[{"tags": ["python", "c", "parsing"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1427932735, "post_id": 29402901, "comment_id": 46981139, "body": "&quot;Efficiently&quot;? Well, just take your inefficient solution and clean it up."}, {"owner": {"reputation": 12433, "user_id": 1609077, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0xiaN.png?s=128&g=1", "display_name": "scls", "link": "https://stackoverflow.com/users/1609077/scls"}, "edited": false, "score": 0, "creation_date": 1462736780, "post_id": 29402901, "comment_id": 61750271, "body": "<code>In [1]: proto=&quot;uint32_t foo(char a, int b, double* c, uint64_t d);&quot; In [2]: p = re.compile(&quot;(\\w+)\\s+(\\w+)\\s*\\(\\s*(.*)\\)&quot;)  # thanks to https:&#47;&#47;regex101.com&#47; In [3]: m = p.match(proto) In [4]: m.groups() Out[4]: (&#39;uint32_t&#39;, &#39;foo&#39;, &#39;char a, int b, double* c, uint64_t d&#39;) In [5]: list(map(lambda s: s.strip().split(&#39; &#39;)[0], m.group(3).split(&#39;,&#39;))) Out[5]: [&#39;char&#39;, &#39;int&#39;, &#39;double*&#39;, &#39;uint64_t&#39;]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1987, "user_id": 2317533, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/11f84de1d659deef11d4f2a75da58c76?s=128&d=identicon&r=PG", "display_name": "Fred Mitchell", "link": "https://stackoverflow.com/users/2317533/fred-mitchell"}, "is_accepted": false, "score": 2, "last_activity_date": 1427936237, "creation_date": 1427936237, "answer_id": 29403358, "question_id": 29402901, "link": "https://stackoverflow.com/questions/29402901/parsing-a-c-function-in-python/29403358#29403358", "title": "Parsing a C function in Python", "body": "<p>I think what you want is to parse the \"prototype of a C function\". When you say parse a \"C function\" ordinarily one would assume that you are doing what a compiler might do with the source implementation.</p>\n\n<p>In your example, you only show a prototype. In the real world, you will encounter many complications that might make you choose another approach. Your killer is the C preprocessor. In an insane piece of code the real type of 'a' could actually be double* due to a really bad macro. You also might have pointers to structs, typedefs for function pointers, etc.</p>\n\n<p>There is a complication that absolutely defies a solution to your problem. The compilation of the prototype will depend on command line arguments to a C compiler describing where to find header files. Without that metadata, you are hosed. With it, you would really want to run the C preprocessor first - check your compiler documentation for how to do so. Then your python program could read the output.</p>\n\n<p>That line might not even be in it - LOL - if it happened to be surrounded by a #if construct that eliminated it.</p>\n\n<p>These <em>features</em> of the C language are the features that make it really nasty to do things like write programs that operate on C, such as a refactoring engine.</p>\n"}], "owner": {"reputation": 41, "user_id": 4740398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4dc463f5d0c98c3c8d80d511fb04f0?s=128&d=identicon&r=PG&f=1", "display_name": "Leon He", "link": "https://stackoverflow.com/users/4740398/leon-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "closed_date": 1427953958, "answer_count": 1, "score": 2, "last_activity_date": 1427936237, "creation_date": 1427932672, "last_edit_date": 1427933101, "question_id": 29402901, "link": "https://stackoverflow.com/questions/29402901/parsing-a-c-function-in-python", "closed_reason": "Needs more focus", "title": "Parsing a C function in Python", "body": "<p>Say I want to parse a C function in a Python script and want to get a list with all the types of the arguments and only the arguments for the C function. How would I go about doing this efficiently?</p>\n\n<p>E.g.: \nWith this function</p>\n\n<pre><code>uint32_t foo(char a, int b, double* c, uint64_t d);\n</code></pre>\n\n<p>I want output <code>['char', 'int', 'double*', 'uint64_t']</code></p>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1427933226, "post_id": 29402835, "comment_id": 46981251, "body": "What you probably want is an array of <code>void*</code>. Then each cell contains a pointer to a structure, and these structures should identify themselves by their first member being a type ID. That&#39;s how you do &quot;duck typing&quot; in C. The type ID might itself be a pointer to a class structure if you really want to be OOPy about it."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3527182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3648c5eafbda18c458d9af4509bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "i_am_human_probably", "link": "https://stackoverflow.com/users/3527182/i-am-human-probably"}, "edited": false, "score": 0, "creation_date": 1427936372, "post_id": 29402881, "comment_id": 46982026, "body": "Thanks! Could you clarify about associating cells together? I think I will be needing to do that. Could I say for example, if the type at <code>*myArray[2][4]</code> is of a specific type, give the surrounding 4 &quot;places?&quot; the same information as that which is at <code>*myArray[2][4]</code> ? Also, b/c I&#39;m using an embedded platform (AVR) there is no memory allocation command available (malloc), so I&#39;ll need to figure out a way around that. Your post was very helpful!"}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 73, "user_id": 3527182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3648c5eafbda18c458d9af4509bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "i_am_human_probably", "link": "https://stackoverflow.com/users/3527182/i-am-human-probably"}, "edited": false, "score": 0, "creation_date": 1427936717, "post_id": 29402881, "comment_id": 46982107, "body": "You have the x,y of your pointer (which is an address) you could compare the surrounding cells testing for (x-1, y), (x+1, y), (x, y + 1), (x, y - 1), (x -1, y -1) ... and bounds check to be sure the coordinates didn&#39;t go off the rectangle and see if they contain the same address, and then make decisions based on that.  Save pointers to different &#39;objects&#39; (structs) where the structs have some sort of way of determining their relationship. Up to you. Regarding lack of malloc(). Make your own. Allocate a large static array of a certain type of struct, and refer to them by index instead of ptr."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 73, "user_id": 3527182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3648c5eafbda18c458d9af4509bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "i_am_human_probably", "link": "https://stackoverflow.com/users/3527182/i-am-human-probably"}, "edited": false, "score": 0, "creation_date": 1427936911, "post_id": 29402881, "comment_id": 46982167, "body": "What I mean is, rather than malloc() you can keep track of which elements of your large static array of objects are empty and use/re-use them as they are created and deleted.  When they are zeroed they are free and use memcmp() or the equivalent or another array to track free slots. Then in your playing field store the index into that array to locate the struct of interest"}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 73, "user_id": 3527182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3648c5eafbda18c458d9af4509bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "i_am_human_probably", "link": "https://stackoverflow.com/users/3527182/i-am-human-probably"}, "edited": false, "score": 0, "creation_date": 1427937061, "post_id": 29402881, "comment_id": 46982206, "body": "You could also fashion your own malloc() around a large pre-allocated (static) chunk of memory but that would be a fair amount of work, except you could probably find some coding implementation examples and borrow that from open source (Google), just guessing."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 73, "user_id": 3527182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3648c5eafbda18c458d9af4509bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "i_am_human_probably", "link": "https://stackoverflow.com/users/3527182/i-am-human-probably"}, "edited": false, "score": 0, "creation_date": 1427937445, "post_id": 29402881, "comment_id": 46982288, "body": "When I say you could &#39;also&#39; fashion your own malloc(), I meant you could <i>alternatively</i> use malloc,  (as opposed to the other method of referencing structs by their index into your large &#39;pool&#39; of structs (e.g. a statically allocated array of them))."}, {"owner": {"reputation": 73, "user_id": 3527182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3648c5eafbda18c458d9af4509bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "i_am_human_probably", "link": "https://stackoverflow.com/users/3527182/i-am-human-probably"}, "edited": false, "score": 0, "creation_date": 1427938830, "post_id": 29402881, "comment_id": 46982594, "body": "Yeah sorry, I just got that ability when you answered my question. :) So that I understand, you&#39;re suggesting I have my large 2D array of pointers which is &quot;my game field&quot;, and if any given object is of a certain size, have a separate 1D array that tracks the memory addresses of the blocks that make up that object? Also, I&#39;d reference the addresses as <code>&amp;objectAddress</code> correct?"}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 73, "user_id": 3527182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3648c5eafbda18c458d9af4509bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "i_am_human_probably", "link": "https://stackoverflow.com/users/3527182/i-am-human-probably"}, "edited": false, "score": 0, "creation_date": 1427939220, "post_id": 29402881, "comment_id": 46982679, "body": "If you want to store pointers in your game field.  I&#39;m saying alternatively you could create an array like thingy_t *poolOfAllThingies[MAX_NUMBER_OF_THINGY];  in place of malloc(). Then instead of a pointer to a thingy, you just store index of it (where it is in your &#39;pool&#39;) in field. Then you need to manage it so you know when you&#39;ve deleted a thingy from your pool, so the next one you create uses a free slot (rather than waste memory).  Kind of a &#39;poor man&#39;s malloc()&#39; in a situation where you <i>do</i> have memory but you have to account for it all at compile time."}], "tags": [], "owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "is_accepted": true, "score": 1, "last_activity_date": 1427937107, "last_edit_date": 1427937107, "creation_date": 1427932547, "answer_id": 29402881, "question_id": 29402835, "link": "https://stackoverflow.com/questions/29402835/conceptual-questions-regarding-multidimensional-arrays-and-pointers/29402881#29402881", "title": "Conceptual Questions Regarding Multidimensional Array&#39;s and Pointers", "body": "<p>Make your array a 2-dimensional array of pointers to a specific kind of struct that you've declared in your program. The structure will contain all the attributes and/or references to related structs. Each element of your matrix (e.g. 2-dimensional array) will contain <code>NULL</code> or a pointer to a relevant struct.  </p>\n\n<p>If your game associates several cells together you can link them to several structs that contain information to associate them among themselves, or just point struct and then determine the surrounding matrix elements through whatever algorithm you see fit to determine the geometry of the relation ship and act accordingly (to the way you've designed your game).</p>\n\n<p>Anytime you want to create a new 'thingy', use malloc().  Use free() to free it and set the reference to NULL when it is freed so you don't try to access a free object or double free (both bad). Freeing NULL is harmless.</p>\n\n<p>Someone suggested a void * linking to different objects where, by convention (your convention if you use the approach) the first field indicates a type.  But if you make a generic type like thingy_t, it can differentiate itself from other thingies any way you choose. There are multiple ways to approach it.</p>\n\n<pre><code>typedef struct thingy {\n     struct thingy *nextThingy;\n     struct thingy *prevThingy;\n     char *name;\n     uint32_t color;\n     int goldCoinCount;\n     int isElf;\n     int annoyedALephrechaun;\n     int StarFleetApproved; \n     int rank;\n     int serialNumber;\n     float netWorth;\n     houseType_t *houseType;\n     struct thingy *friends[];\n     int prevCoords[2];\n     .\n     .\n     .\n} thingy_t;\n\n#define MAX_ROWS 100\n#define MAX_COLS 100\n\nthingy_t *playingField[MAX_ROWS][MAX_COLS];\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3527182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3648c5eafbda18c458d9af4509bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "i_am_human_probably", "link": "https://stackoverflow.com/users/3527182/i-am-human-probably"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 29402881, "answer_count": 1, "score": 3, "last_activity_date": 1427937107, "creation_date": 1427932243, "question_id": 29402835, "link": "https://stackoverflow.com/questions/29402835/conceptual-questions-regarding-multidimensional-arrays-and-pointers", "title": "Conceptual Questions Regarding Multidimensional Array&#39;s and Pointers", "body": "<p>Similar questions have been asked before, but I'm having trouble wrapping my head around pointers and multidimensional arrays for my specific case. I'm not the best C programmer, but I'm trying to get better. I was wondering if somebody could tell me conceptually what I'm missing and hopefully help me clear up some concepts. I'm building a space invaders type game in c which is going to be run on an embedded platform (i.e. low memory). My embedded device sends output over serial to a computer which outputs the game information to some gui i'm writing in python; the game itself though is being played on the micro controller. The gui interprets this information and draws pictures where I want, but it's just taking data and drawing, nothing more.</p>\n\n<p>The issue I'm having is trying to figure out how to construct the game and how it will be played. Here is my idea:</p>\n\n<ol>\n<li><p>Get the window resolution from computing platform (this will be the size of the window scaled, though I'm not quite sure to what yet).</p></li>\n<li><p>Using that scaled resolution create a 2D array which represents the game grid where each element in the array represents a possible location of the player, enemy, bullet, etc...).</p></li>\n<li><p>Each 2D location (x, y) coordinate can have a multitude of information about that location including but not limited to: the presence of some object, that object's current status (health, other data about it), etc...</p></li>\n<li><p>At each computing cycle, update the current location and stats of each object on the game map.</p></li>\n</ol>\n\n<p>To help clarify what I'm saying I've added a crude illustration below. I've created a 2D grid which represents the 'game map'. Imagine this is the grid on which my game will be played. Each place where there is an x is a place that is currently empty of any object. Any place with an o is where some unique object exists, each with different unique characteristics.</p>\n\n<p>My question is how do I create this thing? I'm comfortable with the concept of creating the 2D array, but an array is just a reference to some location where I store some data type. Can I store a pointer to my unique object in say, <code>myArray[2][4]</code> ? And if so, how do I do this? Also, say I store some pointer to my object there, how do I give it multiple attributes? I've create some typdef structs which define the attributes I want (including its current location), but does each o in my map reference this entire structure?</p>\n\n<p>I'm just a bit confused and am looking to clean up my idea. Thank you all for your time!</p>\n\n<pre><code>[x] [x] [x] [x] [x] [x] [x] [x] [x] [x]\n\n[x] [x] [x] [o] [o] [o] [o] [o] [x] [x]\n\n[x] [x] [x] [o] [o] [o] [o] [o] [x] [x]\n\n[x] [x] [x] [x] [x] [o] [x] [x] [x] [x]\n\n[x] [x] [x] [x] [x] [x] [x] [x] [x] [x]\n\n[x] [x] [x] [x] [x] [x] [x] [x] [x] [x]\n\n[x] [x] [x] [x] [x] [x] [x] [x] [x] [x]\n\n[x] [x] [x] [x] [x] [x] [x] [x] [x] [x]\n\n[x] [x] [o] [o] [o] [o] [o] [x] [x] [x]\n\n[x] [x] [x] [x] [x] [o] [x] [x] [x] [x]\n</code></pre>\n"}, {"tags": ["c", "arrays", "runtime"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 2, "creation_date": 1427930885, "post_id": 29402595, "comment_id": 46980638, "body": "You should be passing the address of n to <code>scanf()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1427931056, "post_id": 29402595, "comment_id": 46980697, "body": "Please try to find the flags that allow the compiler you use to warn you about such problems.  With GCC, a sensible option to use is <code>-Wall</code> to catch a large variety of such errors.  Other compilers will probably need other options."}, {"owner": {"reputation": 69, "user_id": 4731786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-ti332s61N5o/AAAAAAAAAAI/AAAAAAAAD4A/Fhibc9MwiOA/photo.jpg?sz=128", "display_name": "Pasha Shestakov", "link": "https://stackoverflow.com/users/4731786/pasha-shestakov"}, "edited": false, "score": 0, "creation_date": 1427932026, "post_id": 29402595, "comment_id": 46980948, "body": "I forgot about the address of operator. Thanks to everyone."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4731786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-ti332s61N5o/AAAAAAAAAAI/AAAAAAAAD4A/Fhibc9MwiOA/photo.jpg?sz=128", "display_name": "Pasha Shestakov", "link": "https://stackoverflow.com/users/4731786/pasha-shestakov"}, "edited": false, "score": 0, "creation_date": 1427931861, "post_id": 29402618, "comment_id": 46980912, "body": "I totally forgot about the address of operator! Such a noob mistake. Code works now. Thanks for your help."}], "tags": [], "owner": {"reputation": 1961, "user_id": 4246760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76db380618d1b0ed80822370d2665681?s=128&d=identicon&r=PG&f=1", "display_name": "DanielG", "link": "https://stackoverflow.com/users/4246760/danielg"}, "is_accepted": true, "score": 2, "last_activity_date": 1427931764, "last_edit_date": 1427931764, "creation_date": 1427930939, "answer_id": 29402618, "question_id": 29402595, "link": "https://stackoverflow.com/questions/29402595/initialize-array-elements-at-run-time/29402618#29402618", "title": "Initialize array elements at run time", "body": "<p>You should be passing &amp;n to scanf.</p>\n\n<pre><code>scanf(\"%d\", &amp;n);\n</code></pre>\n\n<p>As Jonathan pointed out, this is easily caught by a compiler warning. For gcc you can use <code>-Wall</code> which will show you:</p>\n\n<pre><code>warning: format specifies type 'int *' but the argument has type\n  'int' [-Wformat]\nscanf(\"%d\", n); //asks for array value\n       ~~   ^ \n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4731786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-ti332s61N5o/AAAAAAAAAAI/AAAAAAAAD4A/Fhibc9MwiOA/photo.jpg?sz=128", "display_name": "Pasha Shestakov", "link": "https://stackoverflow.com/users/4731786/pasha-shestakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 29402618, "answer_count": 1, "score": 1, "last_activity_date": 1427931764, "creation_date": 1427930798, "last_edit_date": 1427931128, "question_id": 29402595, "link": "https://stackoverflow.com/questions/29402595/initialize-array-elements-at-run-time", "title": "Initialize array elements at run time", "body": "<p>I am new to C, and I am trying to initialize array elements at run time, according to user input (so if the user inputs 4, then array[0]=4).</p>\n\n<p>I have the following code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define MAX 10\n#define maxValue 100\n\nint array[MAX];\nint n;\nint main(void){\n   scanf(\"%d\", n); //asks for array value\n   if (n &lt;= maxValue)\n   {\n      array[0] = n;\n   }\n   return 0;\n}\n</code></pre>\n\n<p>The code compiles, but triggers an access violation.\nWhat's wrong?</p>\n"}, {"tags": ["c", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1428005952, "post_id": 29418455, "comment_id": 47015080, "body": "Do you by chance know a code snippet that shows the problem?"}], "tags": [], "owner": {"reputation": 5876, "user_id": 1655064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/461f0ade50a01275172668e11ef5bd42?s=128&d=identicon&r=PG", "display_name": "zaufi", "link": "https://stackoverflow.com/users/1655064/zaufi"}, "is_accepted": false, "score": 1, "last_activity_date": 1427994122, "creation_date": 1427994122, "answer_id": 29418455, "question_id": 29402452, "link": "https://stackoverflow.com/questions/29402452/check-for-time-h-sys-time-h-compatibilty/29418455#29418455", "title": "Check for time.h / sys/time.h compatibilty", "body": "<p>You can use <a href=\"http://www.cmake.org/cmake/help/v3.2/command/try_compile.html\" rel=\"nofollow\">try_compile()</a> with sample source which <code>#include</code> both files and check the result.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 2037687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e261fccd2b01b793898021f8224f7481?s=128&d=identicon&r=PG", "display_name": "starseeker", "link": "https://stackoverflow.com/users/2037687/starseeker"}, "is_accepted": true, "score": 2, "last_activity_date": 1428116002, "creation_date": 1428116002, "answer_id": 29442207, "question_id": 29402452, "link": "https://stackoverflow.com/questions/29402452/check-for-time-h-sys-time-h-compatibilty/29442207#29442207", "title": "Check for time.h / sys/time.h compatibilty", "body": "<p>It isn't the time test specifically, but for an example of how to do that sort of thing you might check out this example from BRL-CAD:</p>\n\n<p><a href=\"http://sourceforge.net/p/brlcad/code/HEAD/tree/brlcad/trunk/misc/CMake/test_srcs/sys_wait_test.c\" rel=\"nofollow\">http://sourceforge.net/p/brlcad/code/HEAD/tree/brlcad/trunk/misc/CMake/test_srcs/sys_wait_test.c</a></p>\n\n<p>The code is then used to do a test in CMake with:</p>\n\n<pre><code>CHECK_C_SOURCE_RUNS(${CMAKE_SOURCE_DIR}/misc/CMake/test_srcs/sys_wait_test.c SYS_WAIT_TEST_RUNS)\n</code></pre>\n\n<p>You can also use CHECK_C_SOURCE_COMPILES if you don't want to try to run the code (we usually do, but that sort of thing is situation dependent.) See <a href=\"http://www.cmake.org/cmake/help/v3.0/module/CheckCSourceRuns.html\" rel=\"nofollow\">http://www.cmake.org/cmake/help/v3.0/module/CheckCSourceRuns.html</a>\nand \n<a href=\"http://www.cmake.org/cmake/help/v3.0/module/CheckCSourceCompiles.html\" rel=\"nofollow\">http://www.cmake.org/cmake/help/v3.0/module/CheckCSourceCompiles.html</a> for more information about using variables to control how the compilation is done.  Generally speaking if you need to set those variables, you'll want to cache their current values before specifying the test values and then restore the original values after the test, i.e.</p>\n\n<pre><code>set(CMAKE_REQUIRED_FLAGS_CACHE ${CMAKE_REQUIRED_FLAGS})\nset(CMAKE_REQUIRED_FLAGS \"-foo_flag\")\nCHECK_C_SOURCE_RUNS(${CMAKE_SOURCE_DIR}/CMake/time_test.c TIME_TEST_RUNS)\nset(CMAKE_REQUIRED_FLAGS ${CMAKE_REQUIRED_FLAGS_CACHE})\n</code></pre>\n\n<p>I've had a few puzzling behaviors in tests over the years that resulted from leftovers from one test interfering with another.</p>\n"}], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 1, "accepted_answer_id": 29442207, "answer_count": 2, "score": 1, "last_activity_date": 1428116002, "creation_date": 1427930061, "question_id": 29402452, "link": "https://stackoverflow.com/questions/29402452/check-for-time-h-sys-time-h-compatibilty", "title": "Check for time.h / sys/time.h compatibilty", "body": "<p>I am currently porting an autotools project to CMake that uses the <code>AC_HEADER_TIME</code> autotools macro to check if I can include both <code>time.h</code> and <code>sys/time.h</code>.</p>\n\n<p>How can this be done with CMake?</p>\n"}, {"tags": ["c", "pointers", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1427973591, "post_id": 29402381, "comment_id": 46996234, "body": "Please, initialize cursor to something  valid before using <code>-&gt;</code> operator.  <code>cursor</code> is being used uninitialized."}], "answers": [{"comments": [{"owner": {"reputation": 224, "user_id": 3739406, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cef610781f6633b3aaf8727bc277cb59?s=128&d=identicon&r=PG&f=1", "display_name": "user3739406", "link": "https://stackoverflow.com/users/3739406/user3739406"}, "edited": false, "score": 0, "creation_date": 1427930125, "post_id": 29402421, "comment_id": 46980374, "body": "I need to set parent equal to the current element (i.e cursor), to do that, would I then simply initialize cursor at the beginning of the program by cursor = head?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1427931128, "post_id": 29402421, "comment_id": 46980714, "body": "Also, you define a type &quot;struct test&quot;, but your functions take a type &quot;test&quot;. These are not necessarily the same type. Where is &quot;test&quot; defined?"}], "tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 1, "last_activity_date": 1427929869, "creation_date": 1427929869, "answer_id": 29402421, "question_id": 29402381, "link": "https://stackoverflow.com/questions/29402381/how-to-remove-the-last-item-in-a-linked-list/29402421#29402421", "title": "How to remove the last item in a linked list?", "body": "<ol>\n<li>You didn't initialize <code>cursor</code>. </li>\n<li>Don't leak the node you delete. There should probably be a <code>free()</code> call in here somewhere.</li>\n<li>Think about what you need to return if your list has only a single entry.</li>\n</ol>\n"}], "owner": {"reputation": 224, "user_id": 3739406, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cef610781f6633b3aaf8727bc277cb59?s=128&d=identicon&r=PG&f=1", "display_name": "user3739406", "link": "https://stackoverflow.com/users/3739406/user3739406"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 29402421, "answer_count": 1, "score": 0, "last_activity_date": 1427929869, "creation_date": 1427929655, "question_id": 29402381, "link": "https://stackoverflow.com/questions/29402381/how-to-remove-the-last-item-in-a-linked-list", "title": "How to remove the last item in a linked list?", "body": "<p>I'm working on a linked list program, and am trying to remove the last item. I've attempted the function down below, but it's faulty and leads to a seg fault. </p>\n\n<p>I've got a struct as such in a header file:</p>\n\n<pre><code>struct test{\n char * name;\n char * type;\n struct test * next;\n};\n</code></pre>\n\n<p>And I've got a function in a separate .c file, as such:</p>\n\n<pre><code>//NOTE Correct memory is allocated in other parts of the program\n//(i.e not in this function)\n//Also values are initialized in other functions...etc\n\ntest * removeLastItem(test * head)\n{\n    test * parent, * cursor;\n\n    if(head == NULL) //if list is empty return NULL\n    {\n        return NULL;\n    }\n\n    else\n    {\n        while(cursor-&gt;next != NULL) //untill last item of the list is found..\n    {\n        parent = cursor; //parent equal to current element\n        cursor = cursor-&gt;next; //current element set to next pointer of current element\n    }\n\n    parent-&gt;next = NULL; //parent next pointer is now null\n}\n\nreturn head; //return the head of the list\n}\n</code></pre>\n\n<p>I'm not exactly sure if my implication is correct here, but I'm required to return the head of the list, which I do believe I'm doing. Any help would be much appreciated.</p>\n"}, {"tags": ["c", "gcc", "makefile", "ld", "msgpack"], "answers": [{"comments": [{"owner": {"reputation": 880, "user_id": 388456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f76241e4b1ce0cc4b277d08d429f09ec?s=128&d=identicon&r=PG", "display_name": "petermlm", "link": "https://stackoverflow.com/users/388456/petermlm"}, "edited": false, "score": 0, "creation_date": 1427980822, "post_id": 29405465, "comment_id": 47000618, "body": "Thank you, this worked just fine! Just one thing, the &#39;-share&#39; flag is actually &#39;-shared&#39;, but it does what is expected, which is to create a shared library. Again, thanks"}, {"owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "reply_to_user": {"reputation": 880, "user_id": 388456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f76241e4b1ce0cc4b277d08d429f09ec?s=128&d=identicon&r=PG", "display_name": "petermlm", "link": "https://stackoverflow.com/users/388456/petermlm"}, "edited": false, "score": 1, "creation_date": 1427989673, "post_id": 29405465, "comment_id": 47006314, "body": "Thanks. I fixed that &quot;-shared&quot;-typo. My fault."}], "tags": [], "owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "is_accepted": true, "score": 1, "last_activity_date": 1427989644, "last_edit_date": 1427989644, "creation_date": 1427951945, "answer_id": 29405465, "question_id": 29402345, "link": "https://stackoverflow.com/questions/29402345/how-to-properly-link-msgpack-into-a-shared-library/29405465#29405465", "title": "How to properly link msgpack into a shared library", "body": "<p>Try linking with the gcc driver instead of calling <code>ld</code> directly. <code>ld</code> doesn't know about the gcc support libs that are needed for the C runtime:</p>\n\n<pre><code>gcc -Lmsgpack/.libs -shared -o $@ $(MSGPACK_OBJECTS) -lmsgpack\n</code></pre>\n\n<p>If this still doesnt't work, you might need to add <code>-fno-stack-protector</code> to your CFLAGS to supress runtime stack checking.</p>\n"}], "owner": {"reputation": 880, "user_id": 388456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f76241e4b1ce0cc4b277d08d429f09ec?s=128&d=identicon&r=PG", "display_name": "petermlm", "link": "https://stackoverflow.com/users/388456/petermlm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 29405465, "answer_count": 1, "score": 0, "last_activity_date": 1427989644, "creation_date": 1427929460, "question_id": 29402345, "link": "https://stackoverflow.com/questions/29402345/how-to-properly-link-msgpack-into-a-shared-library", "title": "How to properly link msgpack into a shared library", "body": "<p>I'm trying to compile a few .c files that used msgpack-c functions into a shared library. I have the following Makefile:</p>\n\n<pre><code>MSGPACK_CS = msgpack.c\n\nCFLAGS = -std=c99\n\nMSGPACK_OBJECTS = $(subst .c,.o,$(MSGPACK_CS))\n\nMSGPACK_LIBS = msgpack.so\n\nall: $(MSGPACK_OBJECTS) $(MSGPACK_LIBS)\n\n%.o: %.c\n    $(CC) -c -shared -fPIC $(CFLAGS) $&lt;\n\n$(MSGPACK_LIBS): $(MSGPACK_OBJECTS)\n    ld -Lmsgpack/.libs -share -o $@ $(MSGPACK_OBJECTS) -lmsgpack\n</code></pre>\n\n<p>I can compile a program that uses msgpack without problem, but this gives me the following error:</p>\n\n<pre><code>msgpack.o: In function `msgpack_pack_int64':\n/usr/local/include/msgpack/pack_template.h:373: undefined reference to `__stack_chk_fail_local'\nld: msgpack.so: hidden symbol `__stack_chk_fail_local' isn't defined\nld: final link failed: Bad value\n</code></pre>\n\n<p>Apparently the linkage process isn't going well, but I don't know what is wrong. What can I do?</p>\n"}, {"tags": ["c", "dangling-pointer"], "comments": [{"owner": {"reputation": 9749, "user_id": 7507, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b5313e4d49376b6c953509a729f29e38?s=128&d=identicon&r=PG", "display_name": "noahlz", "link": "https://stackoverflow.com/users/7507/noahlz"}, "edited": false, "score": 0, "creation_date": 1427927950, "post_id": 29402070, "comment_id": 46979666, "body": "Hmm... did you execute the code to see if it actually does that?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 9, "creation_date": 1427928023, "post_id": 29402070, "comment_id": 46979695, "body": "There&#39;s no dangling pointer in this piece of code."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 6, "creation_date": 1427928257, "post_id": 29402070, "comment_id": 46979781, "body": "I suggest you never read anything at the billioncodes.com website again, there seems to be no sensible content there."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1427928363, "post_id": 29402070, "comment_id": 46979813, "body": "You probably ought to mistrust code that tries to make <code>in</code> a keyword in the language.  Could have happened, it didn&#39;t for another 30 years."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1427928365, "post_id": 29402070, "comment_id": 46979815, "body": "Ugh, I just looked at that website. It&#39;s total, utter crap, written in gibberish, suggesting bad practices and abusing terminology."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1427928630, "post_id": 29402070, "comment_id": 46979887, "body": "Please post the line the compiler is complaining about and the exact error message."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1427928810, "post_id": 29402070, "comment_id": 46979947, "body": "@1sand0s: The OP didn&#39;t say the compiler complained (and compilers don&#39;t always complain about dangling pointers, even when they exist)."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1427929365, "post_id": 29402070, "comment_id": 46980128, "body": "So I was wondering where he got the idea a pointer was dangling.  I thought maybe his compiler complained. And it&#39;s not true that compilers won&#39;t warn about unused variables. lint does, obviously, but I haven&#39;t seen every C compiler on every platform, for all I know his compiler complained about something.  I don&#39;t see any dangling references there, but just in case his compiler balked, I wanted to know."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1427934235, "post_id": 29402070, "comment_id": 46981556, "body": "@1sand0s: I said compilers don&#39;t <i>always</i> complain about dangling pointers (or unused variables, but that&#39;s not the same thing). The web site (which apparently is really bad) mentioned dangling pointers, and incorrectly presented this code as an example."}], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 4, "last_activity_date": 1427928677, "creation_date": 1427928677, "answer_id": 29402212, "question_id": 29402070, "link": "https://stackoverflow.com/questions/29402070/how-is-this-a-dangling-pointer/29402212#29402212", "title": "How is this a dangling pointer?", "body": "<p>There is no dangling pointer in that program.</p>\n\n<p><code>p</code> is initialized to point to <code>i</code>. Both <code>p</code> and <code>i</code> have exactly the same lifetime; <code>p</code> ceases to exist at the same time that <code>i</code> does (on leaving the nearest enclosing block).</p>\n\n<p><code>j</code>, the <code>int*</code> parameter in the function <code>f</code>, points to <code>i</code> (it's initialized to the value of the argument <code>p</code>, which points to <code>i</code>). The lifetime of <code>j</code> is limited to the execution of the block in the function <code>f</code>; <code>i</code>'s starts after <code>i</code>'s lifetime begins and ends before <code>i</code>'s lifetime ends.</p>\n\n<p>The program should print <code>i = 21</code>. No dangling pointers, no undefined behavior. (<code>int main()</code> should be <code>int main(void)</code>, but that's a minor point.)</p>\n"}], "owner": {"reputation": 348, "user_id": 4538064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dddf357acba95b0b98776142a59d5f48?s=128&d=identicon&r=PG&f=1", "display_name": "five_dollar_shake", "link": "https://stackoverflow.com/users/4538064/five-dollar-shake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 29402212, "answer_count": 1, "score": 0, "last_activity_date": 1427928677, "creation_date": 1427927882, "last_edit_date": 1427928045, "question_id": 29402070, "link": "https://stackoverflow.com/questions/29402070/how-is-this-a-dangling-pointer", "title": "How is this a dangling pointer?", "body": "<p>I was reading online about dangling pointers when I found the code on this link:</p>\n\n<p><a href=\"http://www.billioncodes.com/c/ques-and-ans/747-what-is-dangling-pointer-give-an-example-on-pointers-to-pointer-and-passing-by-address\" rel=\"nofollow\">http://www.billioncodes.com/c/ques-and-ans/747-what-is-dangling-pointer-give-an-example-on-pointers-to-pointer-and-passing-by-address</a></p>\n\n<p>I'll paste it here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid f(int *j)\n{\n    (*j)++;\n}\nint main()\n{\n    int i = 20;\n    int *p = &amp;i;\n    f(p);\n    printf(\"i = %d\\n\", i);\n    return 0;\n}\n</code></pre>\n\n<p>How is this a dangling pointer, and which pointer is dangling? The code looks valid to me. It should print \"i = 21\" and return. I don't see any dangling pointer.</p>\n"}, {"tags": ["c", "recursion", "directory-listing"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1427926048, "post_id": 29401653, "comment_id": 46978946, "body": "<code>current</code> gets assigned <code>c</code> but then you pass it to the next <code>listdir()</code> invocation.  You probably need to take <code>curr_ent</code> and <code>current</code> combined when you recurse."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1427931575, "post_id": 29401653, "comment_id": 46980838, "body": "Please do not reinvent the wheel badly. Use <a href=\"http://stackoverflow.com/a/29402705/1475978\"><code>nftw()</code></a> instead. It was <i>designed</i> to do exactly this -- to walk file trees."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3163379"}, "edited": false, "score": 0, "creation_date": 1427926078, "post_id": 29401692, "comment_id": 46978958, "body": "Do you have any idea how can I neglect &quot;.&quot; and &quot;..&quot; ?"}], "tags": [], "owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "is_accepted": false, "score": 3, "last_activity_date": 1427925977, "creation_date": 1427925977, "answer_id": 29401692, "question_id": 29401653, "link": "https://stackoverflow.com/questions/29401653/printing-all-files-and-folders-in-a-path-in-linux-recursively-in-c/29401692#29401692", "title": "Printing all files and folders in a path in Linux, recursively, in C", "body": "<p>It's working exactly as it should, you just forgot to exempt <code>.</code> and <code>..</code>. Those two \"virtual\" directories exist in ALL directories. <code>.</code> is a shortcut for \"self\", and <code>..</code> is a shortcut for <code>parent</code>.</p>\n\n<p>e.g. if you did <code>listdir('.')</code>, then you'd just keep looping, because the first thing you'd get upon doing <code>opendir</code> in <code>.</code> is ANOTHER <code>.</code>, which points to the exact same place.</p>\n\n<p>In short, you'd need the following pseudo-code:</p>\n\n<pre><code>if (dir != '.' &amp;&amp; dir != '..' &amp;&amp; is_dir(dir)) {\n    listdir(dir);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3163379"}, "edited": false, "score": 0, "creation_date": 1427926572, "post_id": 29401720, "comment_id": 46979136, "body": "I didn&#39;t understand 2nd one. I actually did, but is there way to use &quot;new&quot; one? Or are there actually a new one ?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1427926686, "post_id": 29401720, "comment_id": 46979180, "body": "For every sub-directory to traverse, you have use <code>opendir()</code> and <code>closedir()</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1427927295, "post_id": 29401720, "comment_id": 46979413, "body": "@user3163379, see the updated answer."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1427927230, "last_edit_date": 1427927230, "creation_date": 1427926114, "answer_id": 29401720, "question_id": 29401653, "link": "https://stackoverflow.com/questions/29401653/printing-all-files-and-folders-in-a-path-in-linux-recursively-in-c/29401720#29401720", "title": "Printing all files and folders in a path in Linux, recursively, in C", "body": "<blockquote>\n  <p>What am I doing wrong?</p>\n</blockquote>\n\n<ol>\n<li>You haven't added code to ignore <code>.</code> and <code>..</code>.</li>\n<li>You are using the same <code>DIR*</code> in the recursive calls.</li>\n</ol>\n\n<p>Here's how I would change your function.</p>\n\n<pre><code>int is_dot_or_dot_dot(char const* name)\n{\n   return (strcmp(name, \".\") == 0 || strcmp(name, \"..\") == 0 );\n}\n\nvoid listdir(char const* dirname)\n{\n   char* subdir;\n   DIR* dirp = opendir(dirname);\n   struct dirent *curr_ent;\n\n   if ( dirp == NULL )\n   {\n      return;\n   }\n\n   while ( (curr_ent = readdir(dirp)) != NULL )\n   { \n      // Print the name.\n      printf(\"%s\\n\", curr_ent-&gt;d_name);\n\n      // Traverse sub-directories excluding . and ..\n      // Ignore . and ..\n      if ( curr_ent-&gt;d_type == DT_DIR &amp;&amp; ! (is_dot_or_dot_dot(curr_ent-&gt;d_name)) )\n      {\n         // Allocate memory for the subdirectory.\n         // 1 additional for the '/' and the second additional for '\\0'.\n         subdir = malloc(strlen(dirname) + strlen(curr_ent-&gt;d_name) + 2);\n\n         // Flesh out the subdirectory name.\n         strcpy(subdir, dirname);\n         strcat(subdir, \"/\");\n         strcat(subdir, curr_ent-&gt;d_name);\n\n         // List the contents of the subdirectory.\n         listdir(subdir);\n\n         // Free the allocated memory.\n         free(subdir);\n      }\n   }\n\n   // Close the directory\n   closedir(dirp);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3163379"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2411, "favorite_count": 0, "closed_date": 1427927369, "accepted_answer_id": 29401720, "answer_count": 2, "score": 2, "last_activity_date": 1427927647, "creation_date": 1427925842, "last_edit_date": 1427927647, "question_id": 29401653, "link": "https://stackoverflow.com/questions/29401653/printing-all-files-and-folders-in-a-path-in-linux-recursively-in-c", "closed_reason": "Duplicate", "title": "Printing all files and folders in a path in Linux, recursively, in C", "body": "<p>I've been trying to learn how can I use functions to interact with the paths on the system, but I guess I stucked at the very beginning.</p>\n\n<p>I've searched web and stackoverflow especially and couldn't find a basic implementation like I am trying to do. There are some other questions, which is similar to mine, but I don't find them simple and beginner friendly like mine.</p>\n\n<p>Here is the code, this code just prints the files in given path, and \".\" and \"..\"</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;string.h&gt;\n\nvoid listdir(DIR *c);\n\nint main()\n{\n\n    DIR* root_d;\n    root_d = opendir(\"/home/foo/Desktop/testx\");\n    listdir(root_d);\n\n}\n\nvoid listdir(DIR *c){\n    DIR* current = c;\n    struct dirent *curr_ent;\n    if((curr_ent =readdir(current)) != NULL &amp;&amp; curr_ent-&gt;d_type == DT_DIR){\n        listdir(current);\n    }\n    printf(\"%s\\n\", curr_ent-&gt;d_name);\n    return;\n}\n</code></pre>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["c", "operating-system", "interrupt-handling", "isr"], "comments": [{"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 3, "creation_date": 1427924965, "post_id": 29401426, "comment_id": 46978491, "body": "ISR -&gt; Interrupt service routing. It is same as interrupt handler."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 7, "last_activity_date": 1427924979, "creation_date": 1427924979, "answer_id": 29401460, "question_id": 29401426, "link": "https://stackoverflow.com/questions/29401426/is-there-a-difference-between-an-isr-and-an-interrupt-handler/29401460#29401460", "title": "Is there a difference between an ISR and an interrupt handler?", "body": "<p>There is no difference in Interrupt handler and ISR.<br>\n<a href=\"http://en.wikipedia.org/wiki/Interrupt_handler\" rel=\"noreferrer\">Wiki</a> says that: </p>\n\n<blockquote>\n  <p>In computer systems programming, <strong>an interrupt handler, also known as an interrupt service routine or ISR</strong>, is a callback function [...]</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 7402686, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2u3Jh_hRSXM/AAAAAAAAAAI/AAAAAAAAAcE/tp2RdwGrM5A/photo.jpg?sz=128", "display_name": "Vinay", "link": "https://stackoverflow.com/users/7402686/vinay"}, "is_accepted": false, "score": 5, "last_activity_date": 1484110978, "creation_date": 1484110978, "answer_id": 41583063, "question_id": 29401426, "link": "https://stackoverflow.com/questions/29401426/is-there-a-difference-between-an-isr-and-an-interrupt-handler/41583063#41583063", "title": "Is there a difference between an ISR and an interrupt handler?", "body": "<p>ISR is callback for a specific service pertaining to a device/operation/source. There could be multiple ISRs present in a system depending on addresses available in Interrupt Vector table. Where is Interrupt handler is a common routine which is triggered whenever any interrupt comes. Its job is to understand the source of the interrupt and trigger appropriate ISR mapped in Interrupt Vector table.</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 6691223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ef89550223e5564242bbba6744e698?s=128&d=identicon&r=PG&f=1", "display_name": "K ABHIRAM", "link": "https://stackoverflow.com/users/6691223/k-abhiram"}, "is_accepted": false, "score": 0, "last_activity_date": 1541584231, "creation_date": 1541584231, "answer_id": 53187013, "question_id": 29401426, "link": "https://stackoverflow.com/questions/29401426/is-there-a-difference-between-an-isr-and-an-interrupt-handler/53187013#53187013", "title": "Is there a difference between an ISR and an interrupt handler?", "body": "<p>When interrupt occurs,\ninterrupt handler performs minimal operations required to respond to the device where as updating the buffer and all other operations are taken care by ISR</p>\n"}], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3790, "favorite_count": 0, "accepted_answer_id": 29401460, "answer_count": 3, "score": 3, "last_activity_date": 1541584231, "creation_date": 1427924839, "question_id": 29401426, "link": "https://stackoverflow.com/questions/29401426/is-there-a-difference-between-an-isr-and-an-interrupt-handler", "title": "Is there a difference between an ISR and an interrupt handler?", "body": "<p>I'm studying operating systems and I encountered both the terms ISR and interrupt handler. Are they two words for the same mechanism? If not, what is the difference?</p>\n"}, {"tags": ["c", "macos", "gcc", "crash", "abort"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1427923594, "post_id": 29401116, "comment_id": 46977965, "body": "How are you runniung the program? That doesn&#39;t look like a normal Unix shell error message."}, {"owner": {"reputation": 2059, "user_id": 2014342, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d1d750dd6866cf8acfccdadc444d3c2a?s=128&d=identicon&r=PG", "display_name": "aanrv", "link": "https://stackoverflow.com/users/2014342/aanrv"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1427923672, "post_id": 29401116, "comment_id": 46977995, "body": "@Barmar Compiling it using <code>GCC</code> and running it on <code>OSx</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1427923707, "post_id": 29401116, "comment_id": 46978007, "body": "How are you running the program? From a Terminal window, or with XCode?"}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 2, "creation_date": 1427923741, "post_id": 29401116, "comment_id": 46978028, "body": "have you tried compiling with -g and running it with gdb?  Also; are you doing anything with signals?"}, {"owner": {"reputation": 2059, "user_id": 2014342, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d1d750dd6866cf8acfccdadc444d3c2a?s=128&d=identicon&r=PG", "display_name": "aanrv", "link": "https://stackoverflow.com/users/2014342/aanrv"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1427923852, "post_id": 29401116, "comment_id": 46978074, "body": "@Barmar I&#39;ve clarified the question."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1427923997, "post_id": 29401116, "comment_id": 46978132, "body": "Try using <i>valgrind</i>."}, {"owner": {"reputation": 2059, "user_id": 2014342, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d1d750dd6866cf8acfccdadc444d3c2a?s=128&d=identicon&r=PG", "display_name": "aanrv", "link": "https://stackoverflow.com/users/2014342/aanrv"}, "reply_to_user": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1427924219, "post_id": 29401116, "comment_id": 46978221, "body": "@Foon I am not using signals. I used <code>lldb</code> from XCode and it gave me <code>exit code: 9</code>."}, {"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "edited": false, "score": 0, "creation_date": 1427925133, "post_id": 29401116, "comment_id": 46978577, "body": "You have not posted any code so I do not think you have actually clarified anything."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1458632381, "post_id": 29401116, "comment_id": 59934745, "body": "@JeffersonSteelflex it&#39;s almost a year, can you take a look at the answer please?"}, {"owner": {"reputation": 1398, "user_id": 3743152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b86dfb1bb1df3238ef025a6a96d0fc?s=128&d=identicon&r=PG&f=1", "display_name": "Lux", "link": "https://stackoverflow.com/users/3743152/lux"}, "edited": false, "score": 0, "creation_date": 1472753891, "post_id": 29401116, "comment_id": 65891377, "body": "What do you get for <code>thread backtrace</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427933990, "post_id": 29401197, "comment_id": 46981475, "body": "there are other web pages where you can post large code, then place a link to the code here."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1458632422, "post_id": 29401197, "comment_id": 59934765, "body": "Yes @user3629249, but it&#39;s always better to post the code here, because the link may die."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 3, "last_activity_date": 1427923804, "last_edit_date": 1495542357, "creation_date": 1427923804, "answer_id": 29401197, "question_id": 29401116, "link": "https://stackoverflow.com/questions/29401116/abort-trap-6-in-c-program/29401197#29401197", "title": "Abort trap: 6 in C Program", "body": "<p>You are <strong>probably</strong> writing to memory you do not own! But you know we can not say more without the code, but I see why you do not post it.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26431147/abort-trap-6-error-in-c\">Similar question</a></p>\n\n<p>I would suggest reading again your code super-carefully and look out for your counter and indices (variables named <code>i</code>, <code>j</code> and so on).</p>\n\n<hr>\n\n<p><code>Exit code 9</code> smells like signal handling going wrong. Check <a href=\"https://stackoverflow.com/questions/21339289/xcode-graceful-program-shutdown\">this</a> question.</p>\n"}], "owner": {"reputation": 2059, "user_id": 2014342, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d1d750dd6866cf8acfccdadc444d3c2a?s=128&d=identicon&r=PG", "display_name": "aanrv", "link": "https://stackoverflow.com/users/2014342/aanrv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27247, "favorite_count": 0, "accepted_answer_id": 29401197, "answer_count": 1, "score": 6, "last_activity_date": 1484277839, "creation_date": 1427923458, "last_edit_date": 1472956704, "question_id": 29401116, "link": "https://stackoverflow.com/questions/29401116/abort-trap-6-in-c-program", "title": "Abort trap: 6 in C Program", "body": "<p>I have a program in C. It compiles successfully and runs works fine but right at the end of <code>main()</code>, it crashes and gives me an <code>Abort trap: 6</code> error.</p>\n\n<p>I haven't the slightest clue as to how I can debug this.  The few questions on SO having to do with <code>Abort trap: 6</code> errors have not been of much help to me.</p>\n\n<p>In general, what could be the problem?</p>\n\n<p>(I am reluctant to post my source code for now since it is around 400 lines of code. I would post a particular chunk of code if I knew what to look for.)</p>\n\n<p>Note: I am running the program in Terminal using <code>GCC</code>. But when I run it in XCode, my program crashes and if I stop it, it ends with <code>exit code: 9</code>.</p>\n\n<p>This is the output from <code>lldb</code>:</p>\n\n<pre><code>Process 1191 stopped\n* thread #1: tid = 0xa759, 0x00007fff8fa08286 libsystem_kernel.dylib`__pthread_kill + 10, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n    frame #0: 0x00007fff8fa08286 libsystem_kernel.dylib`__pthread_kill + 10\nlibsystem_kernel.dylib`__pthread_kill + 10:\n-&gt; 0x7fff8fa08286:  jae    0x7fff8fa08290            ; __pthread_kill + 20\n   0x7fff8fa08288:  movq   %rax, %rdi\n   0x7fff8fa0828b:  jmp    0x7fff8fa03c53            ; cerror_nocancel\n   0x7fff8fa08290:  retq \n</code></pre>\n"}, {"tags": ["c", "floating-point-precision"], "answers": [{"comments": [{"owner": {"reputation": 1288, "user_id": 543411, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7439b66bd219b43092800e75db1608f?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/543411/sebastian"}, "edited": false, "score": 0, "creation_date": 1427926520, "post_id": 29401648, "comment_id": 46979112, "body": "Thanks for your answer. I can sort of follow you on points 1. and 2. (I&#39;ll have to check your hypothesis), but the explanation of 3. is unclear to me. It&#39;s not that <code>increment * num_iters</code> has the wrong value. I&#39;m observing that the value of the summation (<code>base</code> in the above code) doesn&#39;t increase anymore."}, {"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "reply_to_user": {"reputation": 1288, "user_id": 543411, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7439b66bd219b43092800e75db1608f?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/543411/sebastian"}, "edited": false, "score": 1, "creation_date": 1427929228, "post_id": 29401648, "comment_id": 46980081, "body": "Oh, I see what you are saying now. The issue is that once <code>base</code> gets to be a certain size, <code>increment</code> is so small in comparison to <code>base</code> that computing <code>base + increment</code> and then rounding the mantissa back down to 23 bits completely erases the change. That is, the difference between <code>base</code> and <code>base + increment</code> is rounding error."}], "tags": [], "owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "is_accepted": false, "score": 1, "last_activity_date": 1428019214, "last_edit_date": 1428019214, "creation_date": 1427925809, "answer_id": 29401648, "question_id": 29401086, "link": "https://stackoverflow.com/questions/29401086/error-propagation-upon-summing-single-precision-float-values/29401648#29401648", "title": "Error Propagation upon Summing Single-Precision (float) Values", "body": "<p>To answer your questions...</p>\n\n<p>1 - IEEE float rounds to <em>even</em> mantissas. This was done specifically in order to prevent error accumulation from always biasing in one way or the other; if it always rounded down, or rounded up, your errors would be much larger.</p>\n\n<p>2 - Nothing in particular is special about 168600 in and of itself. I haven't mathed it out but it's entirely likely that it ends up making a cleaner value in binary representation (i.e. a rational/non-repeating value). Look at the values in binary, not decimal, and see if that theory holds up.</p>\n\n<p>3 - The limiting factor might be due to the float mantissa being 23 bits long. Once <code>base</code> gets to be a certain size, <code>increment</code> is so small in comparison to <code>base</code> that computing <code>base + increment</code> and then rounding the mantissa back down to 23 bits completely erases the change. That is, the difference between <code>base</code> and <code>base + increment</code> is rounding error.</p>\n"}, {"comments": [{"owner": {"reputation": 1288, "user_id": 543411, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7439b66bd219b43092800e75db1608f?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/543411/sebastian"}, "edited": false, "score": 0, "creation_date": 1427926771, "post_id": 29401689, "comment_id": 46979214, "body": "The decimal analogy is quite insightful, thanks a lot. Particularly, the explanation of the <i>wall</i> makes a lot of sense."}], "tags": [], "owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "is_accepted": true, "score": 2, "last_activity_date": 1427925956, "last_edit_date": 1495541186, "creation_date": 1427925956, "answer_id": 29401689, "question_id": 29401086, "link": "https://stackoverflow.com/questions/29401086/error-propagation-upon-summing-single-precision-float-values/29401689#29401689", "title": "Error Propagation upon Summing Single-Precision (float) Values", "body": "<p>First, it's important to know that <code>0.1</code> can't be represented exactly, in binary it's has periodically repeating digits. The value would be <code>0.0001100110011...</code>. Compare to how 1/3 and 1/7 are represented with decimal digits. It's worth repeating your test with increment <code>0.25</code>, which can be represented exactly as <code>0.01</code>.</p>\n\n<p>I'll illustrate the errors in decimal, that's what we humans are used to. Let's work with decimal, and assume we can have <em>4</em> digits of precision. Those are the things happening here.</p>\n\n<ul>\n<li><p>Division: let's calculate 1/11:</p>\n\n<p>1/11 equals 0.090909..., which is probably rounded to 0.0<strong>9091</strong>. This is, as expected, correct to 4 significant digits (in bold).</p></li>\n<li><p>magnitude differences: suppose we calculate 10 + 1/11.</p>\n\n<p>When adding 1/11 to 10, we have to do more rounding, since 10.09091 are 7 significant digits, and we have only four. We have to round 1/11 to two digits after the point, and the calculated sum is <strong>10.09</strong>. That's a underestimation. Note how only one significant digit of 1/11 is retained. If you add a lot of small values together, this will limit the precision of your final result.</p></li>\n<li><p>Now calculate 100 + 1/11. Now we round 1/11 to 0.1 and represent the sum as <strong>100.1</strong>. Now we have a slight overestimation instead of a slight underestimation.</p>\n\n<p>My guess is the pattern of sign changes in your test are the effect of systematic slight underestimation vs. overestimation depending on the magnitude of <code>base</code>.</p></li>\n<li><p>What about 1000 + 1/11? Now we can't have any digits after the point, as we have 4 significant digits before the point already. 1/11 is now rounded to 0, and the sum is still <strong>1000</strong>. That's the <em>wall</em> you're seeing.</p></li>\n<li><p>Another important thing you're not seeing in your test is: what happens if the two values have a different sign. Calculate 1.234 \u2013 1.243: both numbers have 4 significant digits. The result is -0.009. Now the result has only one correct significant digit instead of four.</p></li>\n</ul>\n\n<p>An answer to a similar question here: <a href=\"https://stackoverflow.com/questions/25704731/how-does-floating-point-error-propagate-when-doing-mathematical-operations-in-c?rq=1\">How does floating point error propagate when doing mathematical operations in C++?</a> . It has a few links to more information.</p>\n"}, {"comments": [{"owner": {"reputation": 1288, "user_id": 543411, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7439b66bd219b43092800e75db1608f?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/543411/sebastian"}, "edited": false, "score": 0, "creation_date": 1428094974, "post_id": 29424499, "comment_id": 47047986, "body": "You are right, using <code>0.0000152587890625</code> I&#39;m seeing the same pattern. However, the error increases only when hitting <code>2^23-2^12</code> (<code>2^23-2^13</code> is still ok, no error). Any explanation for that? Try <code>increment(1e-1, 0.0000152587890625, (unsigned long) (1   * NUM_IT - pow(2,13)));</code> and <code>increment(1e-1, 0.0000152587890625, (unsigned long) (1   * NUM_IT - pow(2,12)));</code> and <code>#define NUM_IT 8388608</code>"}], "tags": [], "owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "is_accepted": false, "score": 1, "last_activity_date": 1428020061, "creation_date": 1428020061, "answer_id": 29424499, "question_id": 29401086, "link": "https://stackoverflow.com/questions/29401086/error-propagation-upon-summing-single-precision-float-values/29424499#29424499", "title": "Error Propagation upon Summing Single-Precision (float) Values", "body": "<p>The \"wall\" you are hitting has nothing to do with the increment value, if it is constant through the addition and you start at zero.  It has to with the <code>iters</code>.  2^23 = 8 million, and you are doing 86 million additions.  So once the accumulator is 2^23 bigger than the increment, you hit the wall.</p>\n\n<p>Try running the code with 86323200   iterations, but an increment of 1 or 0.0000152587890625 (or any power of 2). It should have the same relative problem as an increment of 32.</p>\n"}], "owner": {"reputation": 1288, "user_id": 543411, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7439b66bd219b43092800e75db1608f?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/543411/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 29401689, "answer_count": 3, "score": 3, "last_activity_date": 1428020061, "creation_date": 1427923346, "last_edit_date": 1427927068, "question_id": 29401086, "link": "https://stackoverflow.com/questions/29401086/error-propagation-upon-summing-single-precision-float-values", "title": "Error Propagation upon Summing Single-Precision (float) Values", "body": "<p>I'm learning single precision and would like to understand the error propagation. According to <a href=\"http://floating-point-gui.de/errors/propagation/\" rel=\"nofollow\">this nice website</a>, addition is a <em>dangerous</em> operation. </p>\n\n<p>So I wrote a small C program to test how quickly the errors add up. I'm not entirely sure if this is a valid way of testing. If it is, I'm unsure how to interpret the result, see below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n#define TYPE float\n#define NUM_IT 168600\n\nvoid increment (TYPE base, const TYPE increment, const unsigned long num_iters) {\n\n  TYPE err;\n  unsigned long i;\n  const TYPE ref = base + increment * num_iters;\n\n  for (i=0; i &lt; num_iters; i++ ) {\n    base += increment; \n  }\n  err = (base - ref)/ref;\n  printf(\"%lu\\t%9f\\t%9f\\t%+1.9f\\n\", i, base, ref, err);\n\n}\n\nint\nmain()\n{\n  int j;\n  printf(\"iters\\tincVal\\trefVal\\trelErr\\n\");\n\n  for (j = 1; j &lt; 20; j++ ) {\n    increment(1e-1, 1e-6, (unsigned long) (pow(2, (j-10))* NUM_IT));\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>The result of executing</p>\n\n<pre><code>gcc -pedantic -Wall -Wextra -Werror -lm errorPropagation.c &amp;&amp; ./a.out  | tee float.dat  | column -t\n</code></pre>\n\n<p>is </p>\n\n<pre><code>iters     incVal     refVal     relErr\n329       0.100328   0.100329   -0.000005347\n658       0.100657   0.100658   -0.000010585\n1317      0.101315   0.101317   -0.000021105\n2634      0.102630   0.102634   -0.000041596\n5268      0.105259   0.105268   -0.000081182\n10537     0.110520   0.110537   -0.000154624\n21075     0.121041   0.121075   -0.000282393\n42150     0.142082   0.142150   -0.000480946\n84300     0.184163   0.184300   -0.000741986\n168600    0.268600   0.268600   +0.000000222    &lt;-- *\n337200    0.439439   0.437200   +0.005120996\n674400    0.781117   0.774400   +0.008673230\n1348800   1.437150   1.448800   -0.008041115\n2697600   2.723466   2.797600   -0.026499098\n5395200   5.296098   5.495200   -0.036231972\n10790400  10.441361  10.890400  -0.041232508\n21580800  25.463778  21.680799  +0.174485177\n43161600  32.000000  43.261597  -0.260313928    &lt;-- **\n86323200  32.000000  86.423195  -0.629729033\n</code></pre>\n\n<p>If the test is valid</p>\n\n<ul>\n<li>Why does the error change sign? If <code>0.1</code> is represented as e.g. <code>0.100000001</code>, shouldn't this accumulate always to the same bias, irrespective of the number of summations?</li>\n<li>What's special about <code>168600</code> summations (see <code>*</code>)? The error becomes very small. Might be a coincidence.</li>\n<li>Which wall is being hit at <code>incVal = 32.00</code> (see <code>**</code>, last two lines). I'm still well below the <code>unsigned long</code> limit.</li>\n</ul>\n\n<p>Thanks in advance for your effort.</p>\n"}, {"tags": ["c", "file-io", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1427922942, "post_id": 29400749, "comment_id": 46977673, "body": "&quot;. I&#39;m having issues resetting the head of the list back to its original point after all the elements have been added.&quot; What&#39;s the original point? Originally it is NULL, isn&#39;t it? BTW, if every line of your file contains a record, you are missing the data from the even numbered lines since you have two calls of <code>fgets</code>."}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 1, "creation_date": 1427923014, "post_id": 29400749, "comment_id": 46977705, "body": "If you keep a pointer to the head of the list, and the head node&#39;s next element is <code>NULL</code>, then either your linked list isn&#39;t being built correctly or you are not keeping the head pointer correctly. So: 1) Post a minimally compilable chunk of code related to your linked list. 2) Don&#39;t capitalize C variable names. 3) If <code>ListHead</code> is a pointer the head of your list, then do not change its value after initially set. Keep a pointer called <code>currentListNodePtr</code> and set the current node to that. Set some value called  <code>listHeadNodePtr</code> when the first node is added, and don&#39;t fiddle with it after."}, {"owner": {"reputation": 366, "user_id": 3137910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38afbd6e7529d20c6eefe364a52dba3c?s=128&d=identicon&r=PG&f=1", "display_name": "pingOfDoom", "link": "https://stackoverflow.com/users/3137910/pingofdoom"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1427929874, "post_id": 29400749, "comment_id": 46980285, "body": "@RSahu I just realized the even number thing now. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 203, "user_id": 4279158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1beacff49c49beeec2579553cb13a65b?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/4279158/neo"}, "is_accepted": false, "score": 1, "last_activity_date": 1427922538, "creation_date": 1427922538, "answer_id": 29400884, "question_id": 29400749, "link": "https://stackoverflow.com/questions/29400749/creating-linkedlist-from-file-and-resetting-the-head/29400884#29400884", "title": "Creating linkedlist from file and resetting the head", "body": "<p>If I understand your problem correctly you could use rewind() to reset the file to its original point once it has been read. </p>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 3137910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38afbd6e7529d20c6eefe364a52dba3c?s=128&d=identicon&r=PG&f=1", "display_name": "pingOfDoom", "link": "https://stackoverflow.com/users/3137910/pingofdoom"}, "edited": false, "score": 0, "creation_date": 1427923785, "post_id": 29401014, "comment_id": 46978052, "body": "Wouldnt the second if statement never be invoked in this case though since ListTail is never changed outside of the if? I apologize for my lack of understanding. Im very new to linkedlists and havent quite wrapped my head around how they work"}, {"owner": {"reputation": 1047, "user_id": 4669839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9FCz.png?s=128&g=1", "display_name": "cybermike", "link": "https://stackoverflow.com/users/4669839/cybermike"}, "reply_to_user": {"reputation": 366, "user_id": 3137910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38afbd6e7529d20c6eefe364a52dba3c?s=128&d=identicon&r=PG&f=1", "display_name": "pingOfDoom", "link": "https://stackoverflow.com/users/3137910/pingofdoom"}, "edited": false, "score": 0, "creation_date": 1427923967, "post_id": 29401014, "comment_id": 46978120, "body": "No ... the line immediately after the second IF statement always sets ListTail to the lastmost added newElement.  It always get set regardless of the second IF statement."}, {"owner": {"reputation": 1047, "user_id": 4669839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9FCz.png?s=128&g=1", "display_name": "cybermike", "link": "https://stackoverflow.com/users/4669839/cybermike"}, "reply_to_user": {"reputation": 366, "user_id": 3137910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38afbd6e7529d20c6eefe364a52dba3c?s=128&d=identicon&r=PG&f=1", "display_name": "pingOfDoom", "link": "https://stackoverflow.com/users/3137910/pingofdoom"}, "edited": false, "score": 0, "creation_date": 1427924222, "post_id": 29401014, "comment_id": 46978223, "body": "I don&#39;t want to be considered vain, but I did answer another prior question about linked lists recently that you may want to read: <a href=\"http://stackoverflow.com/questions/29312467/explain-to-me-linkedlist-class-with-node-class-like-you-would-to-a-5-year-old/29312597#29312597\" title=\"explain to me linkedlist class with node class like you would to a 5 year old\">stackoverflow.com/questions/29312467/&hellip;</a>"}, {"owner": {"reputation": 366, "user_id": 3137910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38afbd6e7529d20c6eefe364a52dba3c?s=128&d=identicon&r=PG&f=1", "display_name": "pingOfDoom", "link": "https://stackoverflow.com/users/3137910/pingofdoom"}, "edited": false, "score": 0, "creation_date": 1427925371, "post_id": 29401014, "comment_id": 46978680, "body": "Thank you it works. I did happen to go over your other answer, of which i found useful. Incidentally the other part of this assignment was to implement a library of functions to operate on linkedlists. Thats where createRecord() comes from."}, {"owner": {"reputation": 366, "user_id": 3137910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38afbd6e7529d20c6eefe364a52dba3c?s=128&d=identicon&r=PG&f=1", "display_name": "pingOfDoom", "link": "https://stackoverflow.com/users/3137910/pingofdoom"}, "edited": false, "score": 0, "creation_date": 1427929496, "post_id": 29401014, "comment_id": 46980171, "body": "I just realized something. This implementation skips over reading the second line from the file and making it into a struct. Im more confused now."}, {"owner": {"reputation": 1047, "user_id": 4669839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9FCz.png?s=128&g=1", "display_name": "cybermike", "link": "https://stackoverflow.com/users/4669839/cybermike"}, "reply_to_user": {"reputation": 366, "user_id": 3137910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38afbd6e7529d20c6eefe364a52dba3c?s=128&d=identicon&r=PG&f=1", "display_name": "pingOfDoom", "link": "https://stackoverflow.com/users/3137910/pingofdoom"}, "edited": false, "score": 0, "creation_date": 1427929635, "post_id": 29401014, "comment_id": 46980210, "body": "Read R Sahu&#39;s comment above in your question.  You have fgets twice per loop."}], "tags": [], "owner": {"reputation": 1047, "user_id": 4669839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9FCz.png?s=128&g=1", "display_name": "cybermike", "link": "https://stackoverflow.com/users/4669839/cybermike"}, "is_accepted": true, "score": 1, "last_activity_date": 1427924896, "last_edit_date": 1427924896, "creation_date": 1427923067, "answer_id": 29401014, "question_id": 29400749, "link": "https://stackoverflow.com/questions/29400749/creating-linkedlist-from-file-and-resetting-the-head/29401014#29401014", "title": "Creating linkedlist from file and resetting the head", "body": "<p>So I think you are a bit confused how a linked list typically works.  Normally a linked list has a head property that points to the first entry added, then never changes.  You might also have a tail property that points to the last entry added to make adding new entries quicker.  In your code above, what you call the head is really acting like a tail.  And so of course, you are losing your head of the linked list.</p>\n\n<p>I would change your code slightly to:</p>\n\n<pre><code>int Counter = 0;\n\nFILE * fileReader;\n\nFood * newElement = malloc(sizeof(Food));\nFood * ListHead = NULL;\nFood * ListTail = NULL;\n\nchar * fileOutput=malloc(sizeof(char)*1000);\nchar * Token;\n\nchar * name=malloc(sizeof(char)*1000);\n\nchar * foodGroup=malloc(sizeof(char)*1000);\ndouble calories=0;\nchar type;\n\nfileReader = fopen(filename,\"r\");\n\ndo\n{\n    Counter = Counter + 1;\n\n    fgets(fileOutput,200,fileReader);\n\n    Token = strtok(fileOutput,\",\");\n    strcpy(name,Token);\n\n    Token = strtok(NULL,\",\");\n    strcpy(foodGroup,Token);\n\n    Token = strtok(NULL,\",\");\n    calories = atof(Token);\n\n    Token = strtok(NULL,\",\");\n\n    type = *Token;      \n    newElement = createRecord(name,foodGroup,calories,type);\n\n    if (ListHead == NULL) { ListHead = newElement; }\n    newElement-&gt;next = NULL;\n    if (ListTail != NULL) { ListTail-&gt;next = newElement; }\n    ListTail = newElement;\n\n}while (fgets(fileOutput,200,fileReader)!=NULL);    \nreturn ListHead;\n</code></pre>\n\n<p>This gives you a list head and tail.  The ListHead gets set just once for the first newElement, and remains your list head.  The ListTail gets its first set for the first newElement, and progressively moves \"down the list\" as newElements are added.</p>\n"}], "owner": {"reputation": 366, "user_id": 3137910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38afbd6e7529d20c6eefe364a52dba3c?s=128&d=identicon&r=PG&f=1", "display_name": "pingOfDoom", "link": "https://stackoverflow.com/users/3137910/pingofdoom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 29401014, "answer_count": 2, "score": 1, "last_activity_date": 1427924896, "creation_date": 1427922076, "question_id": 29400749, "link": "https://stackoverflow.com/questions/29400749/creating-linkedlist-from-file-and-resetting-the-head", "title": "Creating linkedlist from file and resetting the head", "body": "<p>For an assignment I'm creating a program where a text file is read and used to create a linkedlist. I'm having issues resetting the head of the list back to its original point after all the elements have been added. I have tried assigning the head pointer to some temp pointer and reassigning it at the end but that just leads to head only pointing to the first element and the ->next is null. </p>\n\n<p>My code: </p>\n\n<pre><code>int Counter = 0;\n\nFILE * fileReader;\n\nFood * newElement = malloc(sizeof(Food));\nFood * ListHead;\nFood * originalPointer;\n\nchar * fileOutput=malloc(sizeof(char)*1000);\nchar * Token;\n\nchar * name=malloc(sizeof(char)*1000);\n\nchar * foodGroup=malloc(sizeof(char)*1000);\ndouble calories=0;\nchar type;\n\nfileReader = fopen(filename,\"r\");\n\n do\n {\n     if (Counter == 1)\n     {\n        originalPointer = ListHead;\n     }  \n\n    Counter = Counter + 1;\n\n    fgets(fileOutput,200,fileReader);\n\n    Token = strtok(fileOutput,\",\");\n    strcpy(name,Token);\n\n    Token = strtok(NULL,\",\");\n    strcpy(foodGroup,Token);\n\n    Token = strtok(NULL,\",\");\n    calories = atof(Token);\n\n    Token = strtok(NULL,\",\");\n\n    type = *Token;      \n\n    newElement = createRecord(name,foodGroup,calories,type);\n\n    newElement-&gt;next = ListHead;    \n    ListHead = newElement;\n\n\n}while (fgets(fileOutput,200,fileReader)!=NULL);    \n\nreturn ListHead;\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1427924711, "post_id": 29400649, "comment_id": 46978403, "body": "The first thing to do is to print out more details about the error. In Linux, the last error is stored in the &quot;errno&quot; value. Print that out and look up what the value means. Or use the &quot;perror&quot; function to print out a string message corresponding to the error."}, {"owner": {"reputation": 119, "user_id": 4389682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e5b0ba93801409c72f4df8405e88ae9?s=128&d=identicon&r=PG&f=1", "display_name": "DominusMors", "link": "https://stackoverflow.com/users/4389682/dominusmors"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1427925756, "post_id": 29400649, "comment_id": 46978843, "body": "The perror function was returning ERROR on accept, Bad File Descriptor, but Corluk explained my error."}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 4, "last_activity_date": 1427924724, "creation_date": 1427924724, "answer_id": 29401403, "question_id": 29400649, "link": "https://stackoverflow.com/questions/29400649/linux-socket-bad-file-descriptor/29401403#29401403", "title": "Linux Socket Bad File Descriptor", "body": "<p>In the code of the child you <strong>close</strong> <code>sockfd</code>, which represents the server. But in the next iteration of the infinite for-loop, <strong>which the child also runs</strong>, you attempt to <code>accept()</code> a new client <strong>using</strong> <code>sockfd</code>. Therefore, <code>sockfd</code> is a <code>Bad file descriptor</code>.</p>\n\n<p>Remove the <code>close(sockfd);</code> line in your code and close it when you can be absolutely sure it is not needed anymore.</p>\n"}], "owner": {"reputation": 119, "user_id": 4389682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e5b0ba93801409c72f4df8405e88ae9?s=128&d=identicon&r=PG&f=1", "display_name": "DominusMors", "link": "https://stackoverflow.com/users/4389682/dominusmors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20986, "favorite_count": 4, "accepted_answer_id": 29401403, "answer_count": 1, "score": 5, "last_activity_date": 1483636844, "creation_date": 1427921763, "last_edit_date": 1483636844, "question_id": 29400649, "link": "https://stackoverflow.com/questions/29400649/linux-socket-bad-file-descriptor", "title": "Linux Socket Bad File Descriptor", "body": "<p>I couldn\u2019t find a duplicate, so I decided to post. We're getting into Sockets (beginner-level) now, and was given the code below to make the client send a simple message to the server by using <code>send()</code> and <code>recv()</code>. However, everything I have tried doesn\u2019t seem to get rid of the <code>error: Bad File Descriptor</code> and <code>newsockfd</code> always returns the value <code>-1</code>. I'm confused and have no idea why it doesn\u2019t work.</p>\n\n<p><strong>defs.h</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define SERV_TCP_PORT 6000\n#define SERV_HOST_ADDR  \"127.0.0.1\" \n\nchar *pname;\n</code></pre>\n\n<p><strong>client.c</strong></p>\n\n<pre><code>#include \"../defs.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;strings.h&gt;\n\nmain(argc, argv)\nint argc;\nchar *argv[];\n{\n  int sockfd;\n  struct sockaddr_in serv_addr;\n\n  pname=argv[0];\n  bzero((char*) &amp;serv_addr, sizeof(serv_addr));\n  serv_addr.sin_family=AF_INET;\n  serv_addr.sin_addr.s_addr=inet_addr(SERV_HOST_ADDR);\n  serv_addr.sin_port=htons(SERV_TCP_PORT);\n  if((sockfd=socket(AF_INET,SOCK_STREAM,0)) &lt; 0) {\n    printf(\"client: can't open stream socket\\n\");\n    exit(0);\n  }\n  if (connect(sockfd,(struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) &lt; 0) {\n    printf(\"client: can't connect to server\\n\");\n    exit(0);\n  }\n send(sockfd,\"1\",1,0);\n  close(sockfd);\n  exit(0);\n}\n</code></pre>\n\n<p><strong>server.c</strong></p>\n\n<pre><code>#include \"../defs.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;strings.h&gt;\nvoid error(char *msg)\n{\n    perror(msg);\n    exit(1);\n}\nmain(argc, argv)\nint argc;\nchar *argv[];\n{\n  int sockfd,clilen, childpid;\n int newsockfd;\nchar buff[255];\n  struct sockaddr_in cli_addr, serv_addr;\n  if ((sockfd=socket(AF_INET,SOCK_STREAM, 0)) &lt;0) {\n    printf(\"server: can't open stream socket\\n\");\n    exit(0);\n  }\n  bzero((char*) &amp;serv_addr, sizeof(serv_addr));\n  serv_addr.sin_family=AF_INET;\n  serv_addr.sin_addr.s_addr=htonl(INADDR_ANY);\n  serv_addr.sin_port=htons(SERV_TCP_PORT);\n\n  if(bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) &lt; 0) {\n    printf(\"server: can't bind local address\\n\");\n    exit(0);\n  }\n  listen(sockfd, 5);\n  for ( ; ; ) {\n    clilen=sizeof(cli_addr);\n    newsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clilen);\n  printf(\"%d\\n\",newsockfd);\n    if(newsockfd &lt; 0) {\n      printf(\"server: accept error\\n\");\n    error(\"ERROR on accept\");\n      exit(0);\n    }\n    if((childpid=fork()) &lt;0) {\n      printf(\"server: fork error\\n\");\n      exit(0);\n    }\n    else if (childpid==0) {\n        close(sockfd);  \n      recv(newsockfd,buff,sizeof(buff),0);\n    }\n    close(newsockfd);\n  }\n}\n</code></pre>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26421, "user_id": 343721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b8ad1d8e899bd63166450473531f65b6?s=128&d=identicon&r=PG", "display_name": "Jan Turo\u0148", "link": "https://stackoverflow.com/users/343721/jan-turo%c5%88"}, "edited": false, "score": 0, "creation_date": 1427921806, "post_id": 29400529, "comment_id": 46977126, "body": "try to mention in the title what problem do you want to solve"}, {"owner": {"reputation": 21605, "user_id": 1142167, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/f9MAS.jpg?s=128&g=1", "display_name": "Joel Cornett", "link": "https://stackoverflow.com/users/1142167/joel-cornett"}, "edited": false, "score": 0, "creation_date": 1427930114, "post_id": 29400529, "comment_id": 46980369, "body": "You know, you can&#39;t calculate <code>subTotal</code> <i>before</i> you obtain the values."}, {"owner": {"reputation": 1, "user_id": 4739929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406212cc7af76d0004828cbbdf2a9d74?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond Brown", "link": "https://stackoverflow.com/users/4739929/raymond-brown"}, "edited": false, "score": 0, "creation_date": 1427930397, "post_id": 29400529, "comment_id": 46980482, "body": "so do it like this     printf(&quot;Subtotal: %d&quot;, largePizzaTotal + smallPizzaTotal + drinkTotal);"}, {"owner": {"reputation": 1, "user_id": 4739929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406212cc7af76d0004828cbbdf2a9d74?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond Brown", "link": "https://stackoverflow.com/users/4739929/raymond-brown"}, "edited": false, "score": 0, "creation_date": 1427930608, "post_id": 29400529, "comment_id": 46980544, "body": "Ok, I see what your saying.  Is there any standard for doing this because I don&#39;t want to have variables declarations in the middle of the program."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1427921547, "creation_date": 1427921547, "answer_id": 29400584, "question_id": 29400529, "link": "https://stackoverflow.com/questions/29400529/c-programming-begginner-issue/29400584#29400584", "title": "C programming begginner issue", "body": "<p>You can't compare strings that way in c, probably you meant</p>\n\n<pre><code>char keepGoing = 'y';\nif (keepGoing == 'y')\n</code></pre>\n\n<p>but then you should fix the <code>scanf()</code> too</p>\n\n<pre><code>scanf(\" %c\", &amp;keepGoing);\n</code></pre>\n\n<p>The </p>\n\n<pre><code>int keepGoing = \"y\";\n</code></pre>\n\n<p>compiles well if you have compiler warnings disabled, but it's wrong.</p>\n\n<p>Your compiler is indeed telling you that it's wrong, because <code>int</code> and pointer are incompatible types.</p>\n"}, {"tags": [], "owner": {"reputation": 2651, "user_id": 4059942, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2bmaq.jpg?s=128&g=1", "display_name": "Saagar Elias Jacky", "link": "https://stackoverflow.com/users/4059942/saagar-elias-jacky"}, "is_accepted": false, "score": 0, "last_activity_date": 1427921669, "creation_date": 1427921669, "answer_id": 29400621, "question_id": 29400529, "link": "https://stackoverflow.com/questions/29400529/c-programming-begginner-issue/29400621#29400621", "title": "C programming begginner issue", "body": "<p>You are comparing an <code>integer</code> variable with <code>character</code> data.</p>\n\n<p>Replace <code>int keepGoing = \"y\";</code> </p>\n\n<p>with </p>\n\n<p><code>char keepGoing = 'y';</code></p>\n\n<p>and replace </p>\n\n<p><code>while (keepGoing == \"y\")</code> </p>\n\n<p>with <code>while (keepGoing == 'y')</code> </p>\n\n<p>or if you want to take care of cases, replace it with</p>\n\n<p><code>while ( keepGoing == 'y' || keepGoing == 'Y')</code></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4739929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406212cc7af76d0004828cbbdf2a9d74?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond Brown", "link": "https://stackoverflow.com/users/4739929/raymond-brown"}, "edited": false, "score": 0, "creation_date": 1427944909, "post_id": 29403900, "comment_id": 46983918, "body": "Thank you, looks good.  I like your approach better, never thought of doing it this way.  If you could explain the buffer flush a little more, or send me a good link where I can learn more about it."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 1, "user_id": 4739929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406212cc7af76d0004828cbbdf2a9d74?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond Brown", "link": "https://stackoverflow.com/users/4739929/raymond-brown"}, "edited": false, "score": 0, "creation_date": 1427948934, "post_id": 29403900, "comment_id": 46984820, "body": "When you use <code>scanf</code> on integers or floats or <code>getchar()</code>, both fetch the wanted number or character from <code>stdin</code> but <b>leave</b> the <code>newline</code> (generated by pressing <code>[Enter]</code>) in the input buffer (<code>stdin</code>). If you then call <code>scanf</code> again without emptying <code>stdin</code>, <code>scanf</code> will take the <code>newline</code> value (decimal <code>10</code>, hex <code>0xa</code>) as the next value to be read and appear to <b>skip</b> the next <code>scanf</code>. You took some precaution by your format statement of <code>&quot; %s&quot;</code> (the space saying skip whitespace, including <code>newline</code>) but this just skips over a <code>newline</code> in the buffer, but doesn&#39;t remove the one left."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427943011, "last_edit_date": 1427943011, "creation_date": 1427940643, "answer_id": 29403900, "question_id": 29400529, "link": "https://stackoverflow.com/questions/29400529/c-programming-begginner-issue/29403900#29403900", "title": "C programming begginner issue", "body": "<p>You asked for tips to tighten up what you are doing. I took a bit of time and outlined an approach to your pizza shop that surrounds a <code>Pizza Shop Menu</code>. Rather than prompting for how many of each -- during every loop, this just presents a small menu where you choose <code>L</code> for large, <code>S</code> for small and <code>D</code> for drink, and then fill in the quantity. (<strong>menu entries can be either upper or lower case</strong>) Invalid menu selections are not allowed (no error is shown, the menu just redisplays)</p>\n\n<p>Rather than waiting to sum and total at the end, I find it easier to simply keep a running total of each type sold, the subtotal, tax, etc.. You can compare both methods and see which you prefer.</p>\n\n<p>Also, after each <code>scanf</code> input (where the format string does not consume the <code>newline</code>), the input buffer is emptied to prevent <code>scanf</code> from appearing to skip over entries. Take a look and let me know if you have questions. There are many, many ways to do this, none more right than the next (as long as they are correct). It all comes down to format taste and efficiencies at that point. (<strong>note:</strong> no additional header files were included in case that is a limitation, so there are easier ways to check for a valid entry with <code>strchr</code>, etc.. using <code>string.h</code>, etc.)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* defines are preprocessor commands that simply cause the\n * preprocessor to do a global search-and-replace of the\n * labels with values. They traditionally go at the top.\n * You can add storage type suffixes to the numbers to \n * prevent ambiguity. (e.g. F float, U unsigned, ...)\n */\n#define LARGEPIZZAPRICE 12.0F\n#define SMALLPIZZAPRICE 10.0F\n#define LARGEPIZZATOPPING 2.0F\n#define SMALLPIZZATOPPING 1.50F\n#define DRINK  1.50F\n#define TAXRATE .05F\n\n/* empty input buffer after reading from stdin */\nvoid flush_stdin ()\n{\n    int c = 0;\n    while ((c = getchar()) != '\\n' &amp;&amp; c != EOF);\n}\n\nint show_menu ()\n{\n    int c = 0;\n\n    /* quick &amp; dirty menu */\n    printf (\"\\n Pizza Shop Menu\\n\\n\");\n    printf (\"           L)  Large Pizza\\n\");\n    printf (\"           S)  Small Pizza\\n\");\n    printf (\"           D)  Drink\\n\");\n    printf (\"          --------------------\\n\");\n    printf (\"           C)  Checkout\\n\\n\");\n    printf (\" Choice: \");\n\n    c = getchar ();\n    flush_stdin ();\n\n    /* return only upper case letters */\n    return c &gt; 'Z' ? c - 'a' + 'A' : c;\n}\n\nint main (void)\n{\n    /* ALWAYS INITIALIZE ALL VARIABLES \n     * accidentally reading from an uninitialized variable\n     * is Undefined Behavior.\n     */\n    int numberOfLargePizzas = 0;\n    int numberOfSmallPizzas = 0;\n    int numberOfLargeToppings = 0;\n    int numberOfSmallToppings = 0;\n    int numberOfDrinks = 0;\n    float price = 0.0;\n    float subtotal = 0.0;\n    float tax = 0.0;\n\n    while (1) \n    {\n        int n = 0;\n\n        switch (show_menu())\n        {\n            case 'L' :\n                printf (\"\\n    How many large pizza's do you want : \");\n                scanf (\"%d\", &amp;n);\n                flush_stdin ();\n                if (n) \n                {\n                    numberOfLargePizzas += n;\n                    price = n * LARGEPIZZAPRICE;\n                    tax += price * TAXRATE;\n                    subtotal += price;\n                    n = 0;\n                    printf (\"    How many large toppings do you want: \");\n                    scanf (\"%d\", &amp;n);\n                    flush_stdin ();\n                    if (n)\n                    {\n                        numberOfLargeToppings += n;\n                        price = n * LARGEPIZZATOPPING;\n                        tax += price * TAXRATE;\n                        subtotal += price;\n                    }\n                }\n                printf (\"\\n  Subtotal : %.2f\\n       Tax : %.2f\\n     Total : %.2f\\n\",\n                        subtotal, tax, subtotal + tax);\n                break;\n\n            case 'S' :\n                printf (\"\\n    How many small pizza's do you want : \");\n                scanf (\"%d\", &amp;n);\n                flush_stdin ();\n                if (n) \n                {\n                    numberOfSmallPizzas += n;\n                    price = n * SMALLPIZZAPRICE;\n                    tax += price * TAXRATE;\n                    subtotal += price;\n                    n = 0;\n                    printf (\"    How many small toppings do you want: \");\n                    scanf (\"%d\", &amp;n);\n                    flush_stdin ();\n                    if (n)\n                    {\n                        numberOfSmallToppings += n;\n                        price = n * SMALLPIZZATOPPING;\n                        tax += price * TAXRATE;\n                        subtotal += price;\n                    }\n                }\n                printf (\"\\n  Subtotal : %.2f\\n       Tax : %.2f\\n     Total : %.2f\\n\",\n                        subtotal, tax, subtotal + tax);\n                break;\n\n            case 'D' :\n                printf (\"\\n    How many drinks would you like: \");\n                scanf (\"%d\", &amp;n);\n                flush_stdin ();\n                if (n)\n                {\n                    numberOfDrinks += n;\n                    price = n * DRINK;\n                    tax += price * TAXRATE;\n                    subtotal += price;\n                }\n                printf (\"\\n  Subtotal : %.2f\\n       Tax : %.2f\\n     Total : %.2f\\n\",\n                        subtotal, tax, subtotal + tax);\n                break;\n\n            case 'C' :\n                printf (\"\\nOrder:\\n\");\n                printf (\" ------------------------\\n\");\n                printf (\"   Large Pizzas : %2d\\n Large Toppings : %2d\\n\", numberOfLargePizzas, numberOfLargeToppings);\n                printf (\"   Small Pizzas : %2d\\n Small Toppings : %2d\\n\", numberOfSmallPizzas, numberOfSmallToppings);\n                printf (\"         Drinks : %2d\\n\", numberOfDrinks );\n                printf (\" ------------------------\\n\");\n                printf (\"       Subtotal : %6.2f\\n            Tax : %6.2f\\n          Total : %6.2f\\n\",\n                        subtotal, tax, subtotal + tax);\n                printf (\" ------------------------\\n\\n\");\n                return 0;\n\n            default:\n                /* uncomment to show bad menu entry */\n                // printf (\" &lt;--invalid entry--&gt;\\n\"); \n                break;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>$ ./bin/pizzas\n\n Pizza Shop Menu\n\n           L)  Large Pizza\n           S)  Small Pizza\n           D)  Drink\n          --------------------\n           C)  Checkout\n\n Choice: l\n\n    How many large pizza's do you want : 2\n    How many large toppings do you want: 2\n\n  Subtotal : 28.00\n       Tax : 1.40\n     Total : 29.40\n\n Pizza Shop Menu\n\n           L)  Large Pizza\n           S)  Small Pizza\n           D)  Drink\n          --------------------\n           C)  Checkout\n\n Choice: d\n\n    How many drinks would you like: 4\n\n  Subtotal : 34.00\n       Tax : 1.70\n     Total : 35.70\n\n Pizza Shop Menu\n\n           L)  Large Pizza\n           S)  Small Pizza\n           D)  Drink\n          --------------------\n           C)  Checkout\n\n Choice: c\n\nOrder:\n ------------------------\n   Large Pizzas :  2\n Large Toppings :  2\n   Small Pizzas :  0\n Small Toppings :  0\n         Drinks :  4\n ------------------------\n       Subtotal :  34.00\n            Tax :   1.70\n          Total :  35.70\n ------------------------\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4739929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406212cc7af76d0004828cbbdf2a9d74?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond Brown", "link": "https://stackoverflow.com/users/4739929/raymond-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1427943011, "creation_date": 1427921342, "last_edit_date": 1427931067, "question_id": 29400529, "link": "https://stackoverflow.com/questions/29400529/c-programming-begginner-issue", "title": "C programming begginner issue", "body": "<p>Ok so I'm trying to build a basic program to calculate the price of a pizza order.  I want it to ask if the customer is done ordering.  If they enter y then I want the loop to continue, if any other character entered I want it to stop.  When I enter any character the program just continuously prints out all my printf statements.  I am using codeblocks.  Here is my code. I get 2 warnings. \n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>warning: initialization makes integer from pointer without a cast [enabled by default] at line 17 where i declare the keepgoing variable.\n\nwarning: comparison between pointer and integer [enabled by default]|\n</code></pre>\n\n<p>at line 19 where the while loop starts.</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nmain()\n{\n#define LARGEPIZZAPRICE\n#define SMALLPIZZAPRICE\n#define LARGEPIZZATOPPING\n#define SMALLPIZZATOPPING\n#define DRINK\n\nint numberOfLargePizzas;\nint numberOfSmallPizzas;\nint numberOfLargeToppings;\nint numberOfSmallToppings;\nint numberOfDrinks;\nint keepGoing = \"y\";\n\nwhile (keepGoing == \"y\")\n{\n    printf(\"How many large pizza's do you want\\n\");\n    scanf(\" %d\", &amp;numberOfLargePizzas);\n\n    printf(\"How many large toppings do you want\\n\");\n    scanf(\" %d\", &amp;numberOfLargeToppings);\n\n    printf(\"How many small pizza's do you want\\n\");\n    scanf(\" %d\", &amp;numberOfSmallPizzas);\n\n    printf(\"How many small toppings do you want\\n\");\n    scanf(\" %d\", &amp;numberOfSmallToppings);\n\n    printf(\"Would you like to order more.  Enter a y or n\\n\");\n    scanf(\" %i\", &amp;keepGoing);\n}\n\n\n\n}`\n</code></pre>\n\n<p>*****UPDATE*****\nOk thanks for all the help, it's running good now.  If somebody can look at it and give any tips to tighten it up or do what i'm doing easier, please let me know.  This is learning experience for me and I'm doing it through trial and error.  The program runs but I have a feeling I'm structuring it wrong.  Here's what I have:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nmain()\n{\n#define LARGEPIZZAPRICE 12\n#define SMALLPIZZAPRICE 10\n#define LARGEPIZZATOPPING 2\n#define SMALLPIZZATOPPING 1.50\n#define DRINK  1.50\n#define TAXRATE .05\nint numberOfLargePizzas;\nint numberOfSmallPizzas;\nint numberOfLargeToppings;\nint numberOfSmallToppings;\nint numberOfDrinks;\nchar keepGoing ='y';\nfloat largePizzaTotal;\nfloat smallPizzaTotal;\nfloat drinkTotal;\n\nwhile (keepGoing == 'y')\n{\n        printf(\"How many large pizza's do you want\\n\");\n        scanf(\" %d\", &amp;numberOfLargePizzas);\n\n    if(numberOfLargePizzas != 0){\n        printf(\"How many large toppings do you want\\n\");\n        scanf(\" %d\", &amp;numberOfLargeToppings);\n        }\n\n        printf(\"How many small pizza's do you want\\n\");\n        scanf(\" %d\", &amp;numberOfSmallPizzas);\n    if(numberOfSmallPizzas !=0){\n        printf(\"How many small toppings do you want\\n\");\n        scanf(\" %d\", &amp;numberOfSmallToppings);\n        }\n\n        printf(\"How many drinks would you like\\n\");\n        scanf(\" %int\", &amp;numberOfDrinks);\n        printf(\"Would you like to order more.  Enter a y or n\\n\");\n        scanf(\" %c\", &amp;keepGoing);\n\n}\nlargePizzaTotal = (LARGEPIZZAPRICE*numberOfLargePizzas)+(LARGEPIZZATOPPING*numberOfLargeToppings);\nsmallPizzaTotal=(SMALLPIZZAPRICE*numberOfSmallPizzas)+(SMALLPIZZATOPPING*numberOfSmallToppings);\ndrinkTotal = DRINK*numberOfDrinks;\n\n    printf(\"Subtotal: %2f\", largePizzaTotal + smallPizzaTotal + drinkTotal);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "forms", "tic-tac-toe"], "comments": [{"owner": {"reputation": 1143, "user_id": 1330198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95fca69f28e3740ea7279a1886251ec5?s=128&d=identicon&r=PG", "display_name": "laltin", "link": "https://stackoverflow.com/users/1330198/laltin"}, "edited": false, "score": 0, "creation_date": 1427921519, "post_id": 29400523, "comment_id": 46976989, "body": "Can you make your question clear? I think there is a problem with the variables <code>rinda</code> and <code>kolona</code>"}, {"owner": {"reputation": 161, "user_id": 4299127, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/100000123096513/picture?type=large", "display_name": "Brock", "link": "https://stackoverflow.com/users/4299127/brock"}, "reply_to_user": {"reputation": 1143, "user_id": 1330198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95fca69f28e3740ea7279a1886251ec5?s=128&d=identicon&r=PG", "display_name": "laltin", "link": "https://stackoverflow.com/users/1330198/laltin"}, "edited": false, "score": 0, "creation_date": 1427921820, "post_id": 29400523, "comment_id": 46977138, "body": "Ok, did a little edit. Check first post."}, {"owner": {"reputation": 1143, "user_id": 1330198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95fca69f28e3740ea7279a1886251ec5?s=128&d=identicon&r=PG", "display_name": "laltin", "link": "https://stackoverflow.com/users/1330198/laltin"}, "edited": false, "score": 0, "creation_date": 1427922183, "post_id": 29400523, "comment_id": 46977326, "body": "What about making the question clear? As far as I understand computer makes its move to first column of first row, right?"}, {"owner": {"reputation": 161, "user_id": 4299127, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/100000123096513/picture?type=large", "display_name": "Brock", "link": "https://stackoverflow.com/users/4299127/brock"}, "reply_to_user": {"reputation": 1143, "user_id": 1330198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95fca69f28e3740ea7279a1886251ec5?s=128&d=identicon&r=PG", "display_name": "laltin", "link": "https://stackoverflow.com/users/1330198/laltin"}, "edited": false, "score": 0, "creation_date": 1427922285, "post_id": 29400523, "comment_id": 46977371, "body": "Yes, you&#39;re right. And every next move it doe the same."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 4299127, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/100000123096513/picture?type=large", "display_name": "Brock", "link": "https://stackoverflow.com/users/4299127/brock"}, "edited": false, "score": 0, "creation_date": 1427924174, "post_id": 29401060, "comment_id": 46978206, "body": "Now changes happens only in first square. When I click somewhere, changes happens only on the first square."}], "tags": [], "owner": {"reputation": 4284, "user_id": 3837231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdHnA.jpg?s=128&g=1", "display_name": "NetVipeC", "link": "https://stackoverflow.com/users/3837231/netvipec"}, "is_accepted": false, "score": 0, "last_activity_date": 1427923228, "creation_date": 1427923228, "answer_id": 29401060, "question_id": 29400523, "link": "https://stackoverflow.com/questions/29400523/tic-tac-toe-playing-with-pc-random/29401060#29401060", "title": "Tic Tac Toe, playing with PC (random)", "body": "<p>If i understand correctly the <code>fields</code> variable contain the board with 0 for unoccupied cell, 1 for human player, 2 for CPU.</p>\n\n<p>In this case the terminal condition of the while is wrong <code>while (fields[row][kol] == 0);</code>, you must loop when the cell is occupied (trying to search for free cells).</p>\n\n<pre><code>do {\n    //random\n    row = rand() % 3;\n    kol = rand() % 3;\n}\nwhile (fields[row][kol] != 0);\n</code></pre>\n\n<p>Note: you are initializing all elements of fields to 0, that don't appear in the code.</p>\n"}, {"tags": [], "owner": {"reputation": 1143, "user_id": 1330198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95fca69f28e3740ea7279a1886251ec5?s=128&d=identicon&r=PG", "display_name": "laltin", "link": "https://stackoverflow.com/users/1330198/laltin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427923387, "creation_date": 1427923387, "answer_id": 29401100, "question_id": 29400523, "link": "https://stackoverflow.com/questions/29400523/tic-tac-toe-playing-with-pc-random/29401100#29401100", "title": "Tic Tac Toe, playing with PC (random)", "body": "<p>CPU player loops until it finds a <code>row</code> and <code>col</code> value which is not equal to 0. <code>do-while</code> loop below loops if <code>fields[row][col]</code> is equal to 0 meaning after the exit <code>fields[row][col]</code> will be different than 0.</p>\n\n<pre><code>do {\n    ...\n} while(fields[row][col] == 0)\n\n// fields[row][col] is different than 0 here\n</code></pre>\n\n<p>In your case field value not equal to 0 means a square already used by human or computer, so computer does the same move every time.</p>\n"}], "owner": {"reputation": 161, "user_id": 4299127, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/100000123096513/picture?type=large", "display_name": "Brock", "link": "https://stackoverflow.com/users/4299127/brock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1427923387, "creation_date": 1427921329, "last_edit_date": 1427921706, "question_id": 29400523, "link": "https://stackoverflow.com/questions/29400523/tic-tac-toe-playing-with-pc-random", "title": "Tic Tac Toe, playing with PC (random)", "body": "<pre><code>if (turn == tick) {\n        /*first player*/\n        Form1-&gt;Label1-&gt;Caption = \"X pyr\";\n        fields[row][kol] = 1;\n        Form1-&gt;BitBtn1-&gt;Glyph-&gt;LoadFromFile(\"tick.bmp\");\n        turn = tack;\n    }\n\n    else {\n        do {\n            //random\n            row = rand() % 3;\n            kol = rand() % 3;\n        }\n        while (fields[row][kol] == 0);\n\n        /*cpu*/\n        Form1-&gt;Label1-&gt;Caption = \"CPU\";\n        fields[row][kol] = 2;\n        Form1-&gt;BitBtn1-&gt;Glyph-&gt;LoadFromFile(\"tack.bmp\");\n        turn = tick;\n    }\n\n}\n</code></pre>\n\n<p>The main problem is that when I make my move, computer just clicks on first element and after every next move it does the same. \nComputer just uses first TicTacToe game board square. </p>\n"}, {"tags": ["c", "linux", "algorithm", "ubuntu", "selection-sort"], "comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1427921162, "post_id": 29400353, "comment_id": 46976771, "body": "SO is not a site for code review but for questions."}, {"owner": {"reputation": 21, "user_id": 4733382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWmz7.jpg?s=128&g=1", "display_name": "favourites", "link": "https://stackoverflow.com/users/4733382/favourites"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1427922788, "post_id": 29400353, "comment_id": 46977603, "body": "You don&#39;t see my question?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4733382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWmz7.jpg?s=128&g=1", "display_name": "favourites", "link": "https://stackoverflow.com/users/4733382/favourites"}, "edited": false, "score": 0, "creation_date": 1427921291, "post_id": 29400363, "comment_id": 46976844, "body": "Thank you so much, it works like a charm now, how could I not see it, what a fast reply, I still have to wait to mark your answer as the correct answer, thank you again, you&#39;re a master!  edit: just a question about the etiquette here, should I edit the question to show the correct answer now? or just leave it as it is and just mark your answer as the correct one?"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1427920794, "creation_date": 1427920794, "answer_id": 29400363, "question_id": 29400353, "link": "https://stackoverflow.com/questions/29400353/i-dont-get-all-the-values-of-my-int-array-from-selection-sort-algorithm/29400363#29400363", "title": "I don&#39;t get all the values of my (int) array from Selection Sort algorithm", "body": "<p>You should not <code>free()</code> the array yet, when you will no longer access the memory pointed to buy the pointer, then you call <code>free()</code> but never before.</p>\n\n<p>When you access the <code>a</code> pointer in the code following <code>free(a);</code> there will be garbage because the memory was <code>free()</code>'d already.</p>\n\n<p>So, move <code>free(a)</code> after the second <code>for</code> loop just before <code>return</code> and it should work well.</p>\n\n<p>And also, you don't need to use parentheses with <code>return</code>, and check the value returned by <code>scanf()</code> in case of invalid input, since in that case <code>tam_arreglo</code> will be uninitialized and your program will invoke undefined behavior.</p>\n"}], "owner": {"reputation": 21, "user_id": 4733382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWmz7.jpg?s=128&g=1", "display_name": "favourites", "link": "https://stackoverflow.com/users/4733382/favourites"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 29400363, "answer_count": 1, "score": -3, "last_activity_date": 1427920960, "creation_date": 1427920754, "last_edit_date": 1427920960, "question_id": 29400353, "link": "https://stackoverflow.com/questions/29400353/i-dont-get-all-the-values-of-my-int-array-from-selection-sort-algorithm", "title": "I don&#39;t get all the values of my (int) array from Selection Sort algorithm", "body": "<p>I'm programming on <i>Ubuntu 14.04</i> using the <i>gcc</i> compiler.</p>\n\n<p>I am using the <i>rand();</i> function to give values to the elements of my array. </p>\n\n<p>( <i>rand() % 101;</i> actually, so I don't get values higher than <i>100</i> )</p>\n\n<p>Then I want to sort the elements of my array using the 'Selection sort' algorithm, but when I print(f) them out, the first two elements are 0's, even though there are no 0's on my array (most of the time).</p>\n\n<p>Here's my code, please review it, compile it, try it out and guide me:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int i, j, tam_arreglo;\n    time_t t;\n    int *a;\n    int aux;\n    /* Here I'm asking for you to give me the size of the array and store it in tam_arreglo */   \n    printf(\"Introduzca el tama\u00f1o del arreglo: \\n\");\n    scanf(\"%d\",&amp;tam_arreglo);\n\n    /* Making my array the size I just asked you */\n    int array[tam_arreglo];\n    srand((unsigned) time(&amp;t));\n    /* Dynamic random filling of the array */\n    printf(\"El arreglo sin ordenar es: \\n\");\n    a = malloc(tam_arreglo * sizeof(int));\n    for(i = 0 ; i &lt; tam_arreglo ; i++) {\n        a[i] = rand()%101;\n        printf(\"%d\\n\", a[i]);\n    }\n    free(a);\n    /* My 'Selection sort' algorithm */\n    for(i = 0; i &lt; tam_arreglo; i++) {\n        for(j = i+1; j &lt; tam_arreglo; j++) {\n            if(a[i] &gt; a[j]) {\n                aux = a[i];\n                a[i] = a[j];\n                a[j] = aux;\n            }\n        }\n    }\n    /* Here's when I get the error, the first two elements printed are 0's */\n    printf(\"El arreglo ordenado es: \\n\");\n    for(i = 0; i &lt; tam_arreglo; i++) {\n        printf(\"%d\\n\", a[i]);\n    }\n\n    return(0);\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1427920520, "post_id": 29400233, "comment_id": 46976394, "body": "yeah, it&#39;s a dummy argument if it&#39;s not used, but there&#39;s nothing special about the name. It could have been called <code>x</code> or <code>foo</code> or whatever."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 1035291, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/865b3de70b0e4be901d2e98880a441df?s=128&d=identicon&r=PG", "display_name": "winuall", "link": "https://stackoverflow.com/users/1035291/winuall"}, "edited": false, "score": 0, "creation_date": 1427920661, "post_id": 29400282, "comment_id": 46976463, "body": "well, then if the define points to a value there&#39;s no need for such thing; for other cases I get it. thanks."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 339, "user_id": 1035291, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/865b3de70b0e4be901d2e98880a441df?s=128&d=identicon&r=PG", "display_name": "winuall", "link": "https://stackoverflow.com/users/1035291/winuall"}, "edited": false, "score": 1, "creation_date": 1427921441, "post_id": 29400282, "comment_id": 46976935, "body": "I took your example literally, so that is how it is interpreted. Since <code>_</code> is a valid identifier, it can be used within the macro body if the programmer chooses to do so. It is a bad choice, however, because it hurts readability."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1427926451, "post_id": 29400282, "comment_id": 46979086, "body": "Is there anything special about the underscore, or does it just have the agreed upon meaning of an unneeded parameter?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1427928093, "post_id": 29400282, "comment_id": 46979726, "body": "@Carcigenicate: A <code>_</code> is a valid identifier. There is no convention to use it as an unneeded parameter. My interpretation of that is based on the fact that the substitution text <code>VALUE</code> does not use <code>_</code> in any way."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 5, "last_activity_date": 1427920531, "creation_date": 1427920531, "answer_id": 29400282, "question_id": 29400233, "link": "https://stackoverflow.com/questions/29400233/usage-of-underscore-as-argument-of-a-macro-function/29400282#29400282", "title": "Usage of underscore as argument of a macro function", "body": "<p>In this case, the code can be read as:</p>\n\n<blockquote>\n  <p><code>FUNC</code> takes a single argument, but it doesn't care what it is. No matter what is passed in, <code>VALUE</code> is the result.</p>\n</blockquote>\n\n<p>A single <code>_</code> is a valid identifier in C, and is thus suitable for use as a macro argument name.</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 6, "last_activity_date": 1427920703, "creation_date": 1427920703, "answer_id": 29400332, "question_id": 29400233, "link": "https://stackoverflow.com/questions/29400233/usage-of-underscore-as-argument-of-a-macro-function/29400332#29400332", "title": "Usage of underscore as argument of a macro function", "body": "<p>The <code>_</code> has no special meaning, I suppose they used it because it looks like if the argument is not there.</p>\n\n<p>The <code>_</code> is just a valid identifier, and hence it's taken so the macro requires one parameter, but it keeps the macro definition looking as if there was no parameter.</p>\n\n<pre><code>#define FUNC(ignoredParameter) VALUE\n</code></pre>\n\n<p>would be exaclty the same.</p>\n"}], "owner": {"reputation": 339, "user_id": 1035291, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/865b3de70b0e4be901d2e98880a441df?s=128&d=identicon&r=PG", "display_name": "winuall", "link": "https://stackoverflow.com/users/1035291/winuall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1509, "favorite_count": 2, "accepted_answer_id": 29400282, "answer_count": 2, "score": 5, "last_activity_date": 1464112217, "creation_date": 1427920421, "last_edit_date": 1464112217, "question_id": 29400233, "link": "https://stackoverflow.com/questions/29400233/usage-of-underscore-as-argument-of-a-macro-function", "title": "Usage of underscore as argument of a macro function", "body": "<p>In <strong>C</strong>, what's the meaning of an underscore as a macro parameter?</p>\n\n<pre><code>#define FUNC(_) VALUE\n</code></pre>\n\n<p>Is it a dummy argument? any example for a use-case in which it'll fit?</p>\n"}, {"tags": ["c", "linux", "terminal", "x11"], "answers": [{"comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 67, "user_id": 3878349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e465177db0e6c5e7c6e0f195b3d5715b?s=128&d=identicon&r=PG&f=1", "display_name": "tjnapster555", "link": "https://stackoverflow.com/users/3878349/tjnapster555"}, "edited": false, "score": 0, "creation_date": 1428009650, "post_id": 29401777, "comment_id": 47016822, "body": "It worked when I ran that example - I could attach a screenshot, but that may not help.  Offhand, the only problem I could see is if there is something amiss with the search for <code>rgb.txt</code> on your machine (which would make named-colors not work).  You could check that by running your application with <code>strace</code> to see if it successfully opens that file."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 2, "last_activity_date": 1428017366, "last_edit_date": 1428017366, "creation_date": 1427926369, "answer_id": 29401777, "question_id": 29400209, "link": "https://stackoverflow.com/questions/29400209/how-to-change-color-of-xeyes-using-a-path-in-c/29401777#29401777", "title": "how to change color of xeyes using a path in c?", "body": "<p>You can add onto the argument vector, like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n\n#define LB_SIZE 1024\n\nint main(int argc, char *argv[])\n{\n  char fullPathName[] = \"/usr/bin/X11/xeyes\";\n  char *myArgv[LB_SIZE];  // an array of pointers\n  int n = 0;\n\n  myArgv[0] = (char *) malloc(strlen(fullPathName) + 1);\n  strcpy(myArgv[n++], fullPathName);\n  myArgv[n++] = \"-fg\";\n  myArgv[n++] = \"blue\";\n\n  myArgv[n] = NULL;  // last element should be a NULL pointer\n\n  execvp(fullPathName, myArgv);\n  exit(0);  // should not be reached\n}\n</code></pre>\n\n<p>Here is a picture of the result: <img src=\"https://i.stack.imgur.com/bItek.png\" alt=\"xeyes - blue dots\"></p>\n\n<p>Offhand, I would have expected <code>strace</code> to show the file rgb.txt being opened, but do not see this using <code>-f</code> option (assume it happens in the server).  The \"blue\" does show up in a trace, but only in the exec call, e.g.,</p>\n\n<pre><code>execve(\"/usr/bin/X11/xeyes\", [\"/usr/bin/X11/xeyes\", \"-fg\", \"blue\"], [/* 62 vars */]) = 0\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 3878349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e465177db0e6c5e7c6e0f195b3d5715b?s=128&d=identicon&r=PG&f=1", "display_name": "tjnapster555", "link": "https://stackoverflow.com/users/3878349/tjnapster555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1428017366, "creation_date": 1427920343, "question_id": 29400209, "link": "https://stackoverflow.com/questions/29400209/how-to-change-color-of-xeyes-using-a-path-in-c", "title": "how to change color of xeyes using a path in c?", "body": "<p>all this in Linux not windows</p>\n\n<p>hello i want to know how i can change the color of xeyes like we can do in terminal like </p>\n\n<p>xeyes -fg blue\nnow i want to to do this in c program using path</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n\n//#inlcude &lt;windows.h&gt;\n\n#define LB_SIZE 1024\n\nint main(int argc, char *argv[])\n{\n  char fullPathName[] = \"/usr/bin/X11/xeyes\";\n  char *myArgv[LB_SIZE];  // an array of pointers\n\n  myArgv[0] = (char *) malloc(strlen(fullPathName) + 1);\n  strcpy(myArgv[0], fullPathName);\n\n  myArgv[1] = NULL;  // last element should be a NULL pointer\n\n  execvp(fullPathName, myArgv);\n  exit(0);  // should not be reached\n}\n</code></pre>\n\n<p>if i simply call /usr/bin/X11/xeyes it just show eyes </p>\n\n<p>now i am trying to add command like /usr/bin/X11/xeyes-fg but its not working </p>\n\n<p>any suggestion?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 800102, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a68e61580ff70f80148bdf0a5688c9e4?s=128&d=identicon&r=PG", "display_name": "Dima Thefencingdude Lukhtai", "link": "https://stackoverflow.com/users/800102/dima-thefencingdude-lukhtai"}, "edited": false, "score": 1, "creation_date": 1427921135, "post_id": 29400127, "comment_id": 46976753, "body": "It shouldve been scanf(&quot;%d&quot;, &amp;e); I was having trouble integrating the code in the post."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1427920108, "creation_date": 1427920108, "answer_id": 29400127, "question_id": 29400093, "link": "https://stackoverflow.com/questions/29400093/integration-by-simpsons-rule/29400127#29400127", "title": "Integration by Simpson&#39;s Rule", "body": "<p>Why do you think this</p>\n\n<pre><code>scanf(\"%e\", &amp;e);\n</code></pre>\n\n<p>should be that way?</p>\n\n<p>The <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow\"><code>scanf()</code></a> function takes a format specifier to match the scanned input with, in your case you want to store the values in a <code>double</code> variable, for which you need the <code>\"%lf\"</code> specifier, so all your <code>scanf()</code>'s should change to</p>\n\n<pre><code>scanf(\"%lf\", &amp;whateverDoubleVariableYouWantToStoreTheResultIn);\n</code></pre>\n\n<p>You don't need to cast from a variable of a given type to the same type, like here</p>\n\n<pre><code>dd=(double)d;\n</code></pre>\n\n<p>And also, you must know, that <code>scanf()</code> returns a value, you should not ignore it because your program will misbehave in case of bad input, you should check <code>scanf()</code> in a library manual or the C standard to understand better how to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1427925472, "last_edit_date": 1495541180, "creation_date": 1427925472, "answer_id": 29401573, "question_id": 29400093, "link": "https://stackoverflow.com/questions/29400093/integration-by-simpsons-rule/29401573#29401573", "title": "Integration by Simpson&#39;s Rule", "body": "<p>In addition to <a href=\"https://stackoverflow.com/a/29400127/2410359\">@iharob</a> fine advice:</p>\n\n<ol>\n<li><p>Change <code>n</code> type</p>\n\n<pre><code>// double a, b, c, d, e, n;\ndouble a, b, c, d, e;\nint n;\n</code></pre></li>\n<li><p>Adjust input code</p>\n\n<pre><code>// and previous lines\nif (1 != scanf(\"%lf\", &amp;e))  // %d --&gt; %lf\n  Handle_InputError();\nprintf(\"Please select the number of rectangles for the Simpson's ...\nif (1 != scanf(\"%d\", &amp;n)  // %n --&gt; %d\n  Handle_InputError();\n</code></pre></li>\n<li><p>Adjust output</p>\n\n<pre><code>// printf(\"the value is = %d\",sum);\nprintf(\"the value is = %e\",sum);  // or %f\n</code></pre></li>\n<li><p>Minor bits</p>\n\n<pre><code>// int main()  \nint main(void) // or int main(int argc, char *argv[])\n\n// return sum;  returning a double here is odd\nreturn 0;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 113, "user_id": 800102, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a68e61580ff70f80148bdf0a5688c9e4?s=128&d=identicon&r=PG", "display_name": "Dima Thefencingdude Lukhtai", "link": "https://stackoverflow.com/users/800102/dima-thefencingdude-lukhtai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1518707997, "creation_date": 1427919979, "last_edit_date": 1518707997, "question_id": 29400093, "link": "https://stackoverflow.com/questions/29400093/integration-by-simpsons-rule", "title": "Integration by Simpson&#39;s Rule", "body": "<p>One of my assignments was to create a c program that uses the Simpson's 1/3 rule to find the sum. I am running into issues that I am having trouble fixing. Can some one with more experience point me in the right direction?</p>\n\n<p>In theory my code integrates y=ax^2+bx+c where the user selects values for a,b,c and then the user selects the upper and lower bounds [d,e]. Then the user selects the n value which splits up the area into more rectangles (the value that we will use in my class is 100, so the area is split into 100 rectangles). After which it runs through the Simpson's rule and prints out the sum.</p>\n\n<pre><code>//n is required number of iterations.\n\n#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;math.h&gt;\n\ndouble integral (int a,int b,int c,int d,int e,int n)\n\nint main()\n{\n    double a, b, c, d, e, n;\n\n    printf(\"Please select values for y=ax^2+bx+c\");\n    printf(\"Please select value for a\");\n    scanf(\"%d\", &amp;a);\n    printf(\"Please select value for b\");\n    scanf(\"%d\", &amp;b);\n    printf(\"Please select value for c\");\n    scanf(\"%d\", &amp;c);\n    printf(\"Please select value for the upper limit\");\n    scanf(\"%d\", &amp;d);\n    printf(\"Please select value for the lower limit\");\n    scanf(\"%d\", &amp;e);\n    printf(\"Please select the number of rectangles for the Simpson's Rule (Input 100)\");\n    scanf(\"%n\", &amp;n);\n\n    int i;  \n    double sum=0,length=(double)(d-e)/(n),ad,bd,cd,dd;\n\n    ad=(double)a;\n    bd=(double)b;\n    cd=(double)c;\n    dd=(double)d;\n    for (i=0;i&lt;n;i++)\n    {\n        sum+=(ad*(dd*dd+2*dd*length*i+length*length*i*i)+bd*(dd+length*i)+cd)*length;\n        printf(\"the value is = %d\",sum);\n    }\n    return sum;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "cuda", "thrust"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1427921082, "post_id": 29400050, "comment_id": 46976721, "body": "Without seeing a definition of <code>point</code> in a complete example someone could try and compile it is impossible to say what is wrong, but I would wager that 0 isn&#39;t a valid <code>point</code> value, nor is there a way to construct or cast to one."}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 4, "last_activity_date": 1427922445, "last_edit_date": 1592644375, "creation_date": 1427922445, "answer_id": 29400856, "question_id": 29400050, "link": "https://stackoverflow.com/questions/29400050/cuda-functor-of-min-point/29400856#29400856", "title": "CUDA functor of min point", "body": "<p>It may be helpful if you study the thrust documentation for <a href=\"https://thrust.github.io/doc/group__reductions.html#ga5e9cef4919927834bec50fc4829f6e6b\" rel=\"nofollow noreferrer\">reduce</a>.</p>\n<p>Note the following:</p>\n<blockquote>\n<p>Template Parameters</p>\n<p>InputIterator is a model of Input Iterator and InputIterator's value_type is convertible to T.</p>\n<p>T is a model of Assignable, and is convertible to BinaryFunction's first_argument_type and second_argument_type.</p>\n</blockquote>\n<p>This means that your choice of the <code>init</code> parameter as well as <em>the return type</em> of <code>reduce</code> are not arbitrary.  They must be the same type (effectively) as the type of the input iterator (i.e. <code>point</code> in this case).</p>\n<p><code>thrust::reduce</code> (in this case) does <em>not</em> return the index of the minimum element.  It returns the actual contents of the minimum element, i.e. if your elements are <code>point</code>, it returns a <code>point</code>, and the init value must be of type <code>point</code>.</p>\n<p>To find the index of the minimum point (appears to be your objective) there are various possibilities.  One possibility would be to zip together (using <code>zip_iterator</code>) the data along with an index array (e.g. <code>counting_iterator</code>), do the min-reduction based on that, and then extract the index from the value returned by <code>thrust::reduce</code>.</p>\n<p>However, I think a better approach would be what is suggested <a href=\"https://stackoverflow.com/questions/7709181/finding-the-maximum-element-value-and-its-position-using-cuda-thrust\">here</a>, i.e. use <a href=\"https://thrust.github.io/doc/group__extrema.html#ga90f5158cab04adeb3f1b8b5e4acdbbcc\" rel=\"nofollow noreferrer\"><code>thrust::min_element</code></a> which <em>will</em> return an interator to the minimum element, which can then be used to compute the index easily.</p>\n<p>Here's a worked example:</p>\n<pre><code>$ cat t683.cu\n#include &lt;thrust/device_ptr.h&gt;\n#include &lt;thrust/extrema.h&gt;\n#include &lt;thrust/host_vector.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n\n#include &lt;iostream&gt;\n\nstruct point{\n\n  int value;\n  int data;\n};\n\n\nstruct minPointOperator\n{\n    __device__ __host__ bool operator()(const point&amp; x, const point&amp; y) const\n    {\n        return (x.value &lt; y.value);\n    }\n};\n\nint findBestPointIndx(point* dev_points, int pointCount)\n{\n    thrust::device_ptr&lt;point&gt; points(dev_points);\n    int id = thrust::min_element(points, points+pointCount, minPointOperator()) - points;\n    return id;\n}\n\nint main(){\n\n  point data[4] = { {4,5}, {0,7}, {2,3}, {6,1} };\n  thrust::host_vector&lt;point&gt; h_data(data, data + 4);\n  thrust::device_vector&lt;point&gt; d_data = h_data;\n  int min_point = findBestPointIndx(thrust::raw_pointer_cast(d_data.data()), 4);\n  std::cout &lt;&lt; &quot;min index: &quot; &lt;&lt; min_point &lt;&lt; std::endl;\n  return 0;\n}\n\n$ nvcc t683.cu -o t683\n$ ./t683\nmin index: 1\n$\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3262743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/655b2b590f2266bc1ba9442fb2e72125?s=128&d=identicon&r=PG&f=1", "display_name": "eocron", "link": "https://stackoverflow.com/users/3262743/eocron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 29400856, "answer_count": 1, "score": -1, "last_activity_date": 1427922445, "creation_date": 1427919814, "question_id": 29400050, "link": "https://stackoverflow.com/questions/29400050/cuda-functor-of-min-point", "title": "CUDA functor of min point", "body": "<p>Im stunned. I readed a lot of answers and still can't get it work. Im trying to implement comparator over <code>struct point</code>, which will help to find minimal point in array, this is code so far:</p>\n\n<pre><code>struct minPointOperator\n{\n    __device__ __host__ point operator()(const point&amp; x, const point&amp; y) const \n    { \n        return x.value &gt; y.value ? y : x;\n    } \n};\nint findBestPointIndx(point* dev_points, int pointCount)\n{\n    thrust::device_ptr&lt;point&gt; points(dev_points);\n    int id = thrust::reduce(points, points+pointCount, 0, minPointOperator());\n    return id;\n}\n</code></pre>\n\n<p>but thi doesn't compile, it just spew a lot of <code>function \"minPointOperator::operator()\" cannot be called with the given argument list</code>  errors</p>\n"}, {"tags": ["c", "pointers", "tree", "binary-tree", "binary-search-tree"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3699785, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004076933549/picture?type=large", "display_name": "Laws", "link": "https://stackoverflow.com/users/3699785/laws"}, "edited": false, "score": 0, "creation_date": 1427925652, "post_id": 29400232, "comment_id": 46978803, "body": "i&#39;m new at this site so i thing i answered my ques. :D if you can comment  it , i&#39;ll appreciate it so much , thank you"}], "tags": [], "owner": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "is_accepted": true, "score": 1, "last_activity_date": 1427923329, "last_edit_date": 1427923329, "creation_date": 1427920420, "answer_id": 29400232, "question_id": 29400049, "link": "https://stackoverflow.com/questions/29400049/why-i-cant-add-my-tree-an-element-without-returnnig-the-pointer-of-root/29400232#29400232", "title": "Why i can&#39;t add my tree an element without returnnig the pointer of root?", "body": "<p>Don't you mean this?</p>\n\n<pre><code>void add_Element(node ** root,int data){\n    if(*root==NULL){\n        *root = getNewNode();\n        (*root)-&gt;x = data;\n    }else{\n        if((*root)-&gt;x &lt;= data)\n            add_Element(&amp;(*root)-&gt;right,data);\n        else\n            add_Element(&amp;(*root)-&gt;left,data);\n    }\n}\n</code></pre>\n\n<p>In your first example, you are passing a pointer variable by reference (passing <code>&amp;root</code> to the <code>node ** root</code> parameter).  In the second, you are not (passing only the pointer value <code>root</code>, so the pointer variable <code>root</code> itself cannot be changed), so the new node object is lost - unless you return it, like you ended up having to do.</p>\n"}, {"comments": [{"owner": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "edited": false, "score": 0, "creation_date": 1427927231, "post_id": 29401569, "comment_id": 46979388, "body": "Well in this example, you ALREADY created the instance on the <code>int Arr[50];</code> line.  You are then passing it as a reference (the array object, not the variable <code>Arr</code>) in order to modify its contents.  In your <code>add_Element()</code> function you were creating the node INSIDE the function, and it was &quot;stuck&quot; there, until it was returned back somehow.  If you create the root node FIRST, then passed it in, you could modify its contents (like you are doing with the array) - which is another approach as well (so you don&#39;t have to pass a variable by reference)."}, {"owner": {"reputation": 19, "user_id": 3699785, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004076933549/picture?type=large", "display_name": "Laws", "link": "https://stackoverflow.com/users/3699785/laws"}, "reply_to_user": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "edited": false, "score": 0, "creation_date": 1427928959, "post_id": 29401569, "comment_id": 46979998, "body": "thanks you so much , mate . i have a exam like 7 hours later and this helped me big time :D first year in collage :D"}], "tags": [], "owner": {"reputation": 19, "user_id": 3699785, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004076933549/picture?type=large", "display_name": "Laws", "link": "https://stackoverflow.com/users/3699785/laws"}, "is_accepted": false, "score": 0, "last_activity_date": 1427925465, "creation_date": 1427925465, "answer_id": 29401569, "question_id": 29400049, "link": "https://stackoverflow.com/questions/29400049/why-i-cant-add-my-tree-an-element-without-returnnig-the-pointer-of-root/29401569#29401569", "title": "Why i can&#39;t add my tree an element without returnnig the pointer of root?", "body": "<p>oh well , i always thought it was like this ,for exp:<br>\n    #include </p>\n\n<pre><code>void main(){\n    int Arr[50];\n    random(Arr,50);\n    printf(\"%d\", Arr[25]);\n</code></pre>\n\n<p>}</p>\n\n<pre><code>void random(int * Arr,int size){\n   int i;\n   for(i=0;i&lt;size;i++)\n   Arr[i] = i+1;\n</code></pre>\n\n<p>}\n** so here i'm passing a pointer by reference but when when it's a pointer what i'm passing , i have to use \"&amp;\" to pass it by reference .\ni believe my exp was correct , if it's not there's still  some part that i'm missing**</p>\n"}], "owner": {"reputation": 19, "user_id": 3699785, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004076933549/picture?type=large", "display_name": "Laws", "link": "https://stackoverflow.com/users/3699785/laws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 29400232, "answer_count": 2, "score": 1, "last_activity_date": 1427925465, "creation_date": 1427919813, "last_edit_date": 1427919998, "question_id": 29400049, "link": "https://stackoverflow.com/questions/29400049/why-i-cant-add-my-tree-an-element-without-returnnig-the-pointer-of-root", "title": "Why i can&#39;t add my tree an element without returnnig the pointer of root?", "body": "<p>here's my code , i don't understand the way of these pointers and &amp; works in here.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n\ntypedef struct node {\n  int x;\n  struct node * left;\n  struct node * right;\n\n} node;\nvoid add_Element(node **,int);\nnode * getNewNode();\n\nvoid main(){\n  node * root = NULL;\n  add_Element(&amp;root,4687);\n  inorder_tra_recursive(root);\n  if(root == NULL) printf(\"still Nulll\\n\");\n  else printf(\"not null , working\\n\");\n}\n\nnode * getNewNode(){\n  node * newNode = (node*)malloc(sizeof(node));\n  newNode-&gt;left = NULL;\n  newNode-&gt;right = NULL;\n  newNode-&gt;x = 0;\n  return newNode;\n}\n\nvoid add_Element(node ** root,int data){\n  *root = getNewNode();\n  (*root)-&gt;x = data;\n  // I did not  write all function !! this is just a prototype and this is working\n}\n\nvoid inorder_tra_recursive(node * root){// looking for elements to print !\n  if(root==NULL) \n     return ;\n\n  inorder_tra_recursive(root-&gt;left);\n  printf(\"----%d----\\n\", root-&gt;x);\n  inorder_tra_recursive(root-&gt;right);\n}\n</code></pre>\n\n<p>This is my code and here's the thing that i don't understand when i change my add_Element function to this.</p>\n\n<pre><code>void add_Element(node * root,int data){\n    if(root==NULL){\n        root = getNewNode();\n        root-&gt;x = data;\n    }else{\n        if(root-&gt;x &lt;= data)\n            add_Element(root-&gt;right,data);\n        else\n            add_Element(root-&gt;left,data);\n    }\n}\n</code></pre>\n\n<p>It doesn't add element to the tree . but if i do it like this</p>\n\n<p>node * add_Element(node * root,int data){</p>\n\n<pre><code>if(root==NULL){\n    root = getNewNode();\n    root-&gt;x = data;\n    return root;\n}else{\n    if(root-&gt;x &lt;= data)\n        root-&gt;right = add_Element(root-&gt;right,data);\n    else\n        root-&gt;right = add_Element(root-&gt;left,data);\n}\nreturn root;\n</code></pre>\n\n<p>}</p>\n\n<p>It works but what's the difference here why i have to return root to get results.</p>\n\n<pre><code>void main(){\n   node * root = NULL;\n   root = add_Element(root,48464);//random number \n}\n</code></pre>\n\n<p>i can use it like this last one but i have to learn what causing this difference .\n(<strong>difference: &amp;root to node ** root // not have to return root , works !\n  root to node * root // have to return root otherwise not working</strong>) \nUntil this day i thought this 2 way were the same but apparently it's not . So , please help me , i'm going crazy over here :D . Anyhelp will be appreciated , thanks</p>\n"}, {"tags": ["c", "perl", "haskell", "literate-programming", "idris"], "comments": [{"owner": {"reputation": 418, "user_id": 2005842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25b441e6cc8e98d4d576d7f269a52273?s=128&d=identicon&r=PG", "display_name": "qunying", "link": "https://stackoverflow.com/users/2005842/qunying"}, "edited": false, "score": 0, "creation_date": 1430847816, "post_id": 29399948, "comment_id": 48234386, "body": "I would not create an answer, as my option is biased. Personally, I&#39;m against any form of literate programming, it makes program maintenance and debugging pretty hard. I would suggest you to look at the other way around, using document tools inside the program. like doxygen for C and <a href=\"http://en.wikipedia.org/wiki/Haddock_(software)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Haddock_(software)</a> for Haskell, etc."}, {"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "reply_to_user": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1491207298, "post_id": 29399948, "comment_id": 73432206, "body": "@C\u0153ur  This question seems off-topic as it is asking for software recommendations. Your edit was just correcting one spelling mistake. Would you have served Stack Overflow better by voting to close this question?"}, {"owner": {"reputation": 15917, "user_id": 5211833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pyme2.jpg?s=128&g=1", "display_name": "Adriaan", "link": "https://stackoverflow.com/users/5211833/adriaan"}, "reply_to_user": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1491207779, "post_id": 29399948, "comment_id": 73432453, "body": "@C\u0153ur to add to what AdrianHHH said: the problem is mainly that this question was bumped to the front page, without significant improvement (I don&#39;t count one spelling correction as significant) and that now this OT question gets renewed attention due to it being on the front page again. I&#39;ve seen you edit questions with insignificant edits like this only to be closed not much later; please take the bumping of a question into account when editing and consider whether close voting wouldn&#39;t be the better option."}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "reply_to_user": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 0, "creation_date": 1491214478, "post_id": 29399948, "comment_id": 73436596, "body": "@AdrianHHH I count spelling corrections as significant. It&#39;s good that people vote to close if they figure out it&#39;s off topic: I don&#39;t always notice, but when I do I downvote and vote to close too."}], "answers": [{"tags": [], "owner": {"reputation": 33595, "user_id": 350890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/186bebdcf5f3045b53362efe34e56e8a?s=128&d=identicon&r=PG", "display_name": "Peter Tillemans", "link": "https://stackoverflow.com/users/350890/peter-tillemans"}, "is_accepted": false, "score": 1, "last_activity_date": 1430933205, "last_edit_date": 1430933205, "creation_date": 1430846674, "answer_id": 30059459, "question_id": 29399948, "link": "https://stackoverflow.com/questions/29399948/literate-programming-in-multiple-languages/30059459#30059459", "title": "Literate programming in multiple languages", "body": "<p>If documentation is paramount, and you have some emacs affinity, then you might do worse than look at the literate programming support in org-mode. <a href=\"http://orgmode.org/worg/org-contrib/babel/intro.html\" rel=\"nofollow\">Babel</a> is an org-mode extension allowing to integrate with many programming environments, including tangle-weaving compiled languages, executing code blocks, ...</p>\n\n<p>It is thoroughly language agnostic, and since it has the DNA of an outliner, it allows to manage the documentation in a structured way. Of course it generates syntax highlighted HTML/LateX/PDF/... from your sources.</p>\n\n<p>Check out <a href=\"http://orgmode.org/worg/org-contrib/babel/intro.html\" rel=\"nofollow\">http://orgmode.org/worg/org-contrib/babel/intro.html</a> for more info.</p>\n\n<p>a sample:</p>\n\n<pre><code>** Compiles libpq library for iOS\n\ncopy this script as *build-ios.sh* in the root of the postgresql\nsource tree.\n\n#+BEGIN_SRC sh tangle:build-ios.sh\nmkdir -p build\nrm -rf build/* #*/\n\nfunction build_libpq()   \n{\n    make distclean\n\n    ./configure \\\n...snip...\nlipo -create -output libpq.a build/*\n\n#+END_SRC\n\nRun it and it will create a universal library and  separate arm  \nlibrary in the root folder.\n</code></pre>\n\n<p>I hope this gives an idea what to do to create docs/code using org-mode/Bable combination. Of course a stackexchange answer cannot begin to scratch the surface of this system.</p>\n"}], "owner": {"reputation": 4036, "user_id": 667457, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/33f9a9233b25c8230f5b5edb38493842?s=128&d=identicon&r=PG", "display_name": "Jeff Burdges", "link": "https://stackoverflow.com/users/667457/jeff-burdges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 1, "closed_date": 1491308723, "answer_count": 1, "score": 3, "last_activity_date": 1491202669, "creation_date": 1427919400, "last_edit_date": 1491202669, "question_id": 29399948, "link": "https://stackoverflow.com/questions/29399948/literate-programming-in-multiple-languages", "closed_reason": "Not suitable for this site", "title": "Literate programming in multiple languages", "body": "<p>I've a library project which requires C's interoperability with other languages, and reasonable performance, but must be documented very clearly, \u00e0 la literate programming, and whose documentation might benefit from a functional approach, like Haskell, or even <a href=\"http://www.idris-lang.org/\" rel=\"nofollow\">Idris</a>' proof features.  </p>\n\n<p>I'm therefore interested in building this library as a literate program, first writing the documentation and working Idris prototype code, and next writing C code that closely parallels the Idris code to address any performance issues and be easily linkable from other languages.</p>\n\n<p>What literate programming tool do I want?  </p>\n\n<p><a href=\"http://nuweb.sourceforge.net/nuwebdoc.pdf\" rel=\"nofollow\">NuWeb</a> is designed for multi-language literate programming, but their usage of the @ sign, or indeed any escape character, is problematic for functional languages like Idris, Haskell, etc.  </p>\n\n<p>Idris <a href=\"https://github.com/idris-lang/Idris-dev/issues/1736\" rel=\"nofollow\">wants</a> a <a href=\"https://github.com/idris-lang/Idris-dev/wiki/Egg-%236:-Improved-Support-For-Literate-Programming\" rel=\"nofollow\">literate programming tool</a> to which I could contribute.  I love their preferred approach of just using <code>.tex</code> files delimited by <code>\\begin{code} .. \\end{code}</code> blocks.</p>\n\n<p>Idris, Haskell, etc. do not need tangle like C does, so doing that adds complexity and I'd prefer that any tool I'm using here sticks around.</p>\n\n<p>An approach that minimizes tooling for library consumers might be to extract the C and Idris code using a simple Perl script like <code>cat_latex_env</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nsub usage { die \"Usage: cat_latex_env enviroment_name [filename]\\n\"; }\nusage if ($#ARGV &lt; 0);\n\nmy $env = shift;\nmy $begin = quotemeta \"\\\\begin{$env}\";\nmy $end = quotemeta \"\\\\end{$env}\";\nwhile (&lt;&gt;) {\n        if (/$begin/../$end/) {\n                next if /$begin/ || /$end/;\n                print;\n        }\n}\n</code></pre>\n\n<p>At which point the Idris should compile fine.  And I could embed the tangle instructions needed by a literate programming tool for C like CWEB or NuWeb.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3629, "user_id": 631615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8774bd471bec0899483c832ea428436?s=128&d=identicon&r=PG", "display_name": "librik", "link": "https://stackoverflow.com/users/631615/librik"}, "edited": false, "score": 0, "creation_date": 1427919364, "post_id": 29399912, "comment_id": 46975793, "body": "Do you mean <code>struct person</code> or <code>struct a_person</code> ?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1427919376, "post_id": 29399912, "comment_id": 46975802, "body": "<code>personList;</code> is a typedef name for <code>struct person_list</code> . You are confusing yourself when you say <code>struct personList  resident_list;</code>"}, {"owner": {"reputation": 3600, "user_id": 2249815, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2tZpJ.png?s=128&g=1", "display_name": "Jebathon", "link": "https://stackoverflow.com/users/2249815/jebathon"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1427919563, "post_id": 29399912, "comment_id": 46975894, "body": "@wildplasser Should it be struct personList resident_list?"}, {"owner": {"reputation": 3600, "user_id": 2249815, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2tZpJ.png?s=128&g=1", "display_name": "Jebathon", "link": "https://stackoverflow.com/users/2249815/jebathon"}, "reply_to_user": {"reputation": 3629, "user_id": 631615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8774bd471bec0899483c832ea428436?s=128&d=identicon&r=PG", "display_name": "librik", "link": "https://stackoverflow.com/users/631615/librik"}, "edited": false, "score": 0, "creation_date": 1427919591, "post_id": 29399912, "comment_id": 46975907, "body": "@librik typedef struct a_person is how I defined it"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1427920301, "post_id": 29399912, "comment_id": 46976290, "body": "@BDillan: my personal advice for beginners is: avoid using typedefs, until you really need them. (this may sound cocky, but C is hard enough without typedefs, and you seldomly need them)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1427973979, "post_id": 29399912, "comment_id": 46996466, "body": "@BDillan, you can reference the type of array <code>people</code> elements as <code>struct a_person</code> (because of the actual type definition) or as <code>person</code> (because of the new type typedef declaration), but you have not declared the type <code>struct person</code> anywhere in your code, so a pointer to it is an incomplete type (that what&#39;s the compiler complainting about) It can be used, but with limitations."}], "answers": [{"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1427921584, "post_id": 29400007, "comment_id": 46977019, "body": "There is no reason to have the <code>struct</code> tag different from the <code>typedef</code> name, really. Why using two identifiers when you just can have one?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1427949506, "post_id": 29400007, "comment_id": 46984963, "body": "Because I feel it is more readable. I know they belong to different namespaces. As I said, it is a convention."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1427949551, "last_edit_date": 1427949551, "creation_date": 1427919656, "answer_id": 29400007, "question_id": 29399912, "link": "https://stackoverflow.com/questions/29399912/handling-incomplete-type-errors-in-c/29400007#29400007", "title": "Handling incomplete type errors in C", "body": "<p>You could predeclare every <code>struct</code> that you are further defining, e.g. by starting your file (or your header file) with</p>\n\n<pre><code>  struct a_person;  // should be person_st\n  struct person_list; // should be person_list_st\n</code></pre>\n\n<p>then you may have a pointer to such <code>struct</code> (even without having defined the fields of that <code>struct</code> yet).</p>\n\n<p>However, when you define a <code>struct</code> by listing all its fields, every field should have a size known to the compiler.</p>\n\n<p>Some further hints (including conventions):</p>\n\n<ul>\n<li>you could (and I do, conventionally) name every <code>struct</code> tag ending with e.g. <code>_st</code> (this is a <em>convention</em> that <em>I do like to follow</em>)</li>\n<li><p>you can make a <code>typedef</code> together with the <code>struct</code> declaration, e.g.</p>\n\n<pre><code> typedef struct a_person_st Person;\n</code></pre>\n\n<p>BTW, I am following the convention (inspired by <a href=\"http://gtk.org/\" rel=\"nofollow\">GTK</a>) that a structure type starts with a capital letter.</p></li>\n<li>I don't recommend having <code>typedef</code> for pointers. Being a pointer type is really important in C, and I feel it should be kept apparent. So I recommend against <strike><code>typedef Person*PersonPtr;</code></strike> (but again, this is <em>my convention</em>).</li>\n<li><p>You would later define the <code>struct</code> by listing its fields, e.g.</p>\n\n<pre><code>struct person_st { // or Person \n char name[MAX_LENGTH];\n int age;\n}; // end of definition of struct person_st\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>You might be interested (assuming a C99 or C11 compiler) by <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow\">flexible array members</a> (it is a C feature, not a C++ one, and that flexible array member should <em>always</em> be the last of its containing <code>struct</code>).</p>\n"}], "owner": {"reputation": 3600, "user_id": 2249815, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2tZpJ.png?s=128&g=1", "display_name": "Jebathon", "link": "https://stackoverflow.com/users/2249815/jebathon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 29400007, "answer_count": 1, "score": 0, "last_activity_date": 1427949551, "creation_date": 1427919217, "last_edit_date": 1427919925, "question_id": 29399912, "link": "https://stackoverflow.com/questions/29399912/handling-incomplete-type-errors-in-c", "title": "Handling incomplete type errors in C", "body": "<p>I have a struct called 'residence' below. It contains a <code>person_list</code> struct where the <code>person_list</code> struct contains a struct for each person.</p>\n\n<pre><code>typedef struct a_person\n{\nchar name [MAX_LENGTH];\nint age;\n\n} person;\n\ntypedef struct person_list\n{\nstruct person people[MAX_ALLOWED];\n\n} personList;\n\nstruct residence  {\n    char residence_name [MAX_LENGTH];\n    struct personList resident_list;\n};\n</code></pre>\n\n<p>I'm getting these errors upon compilation:</p>\n\n<pre><code>error: resident_list; has incomplete type\n\nerror: array type has incomplete element type (@struct person\npeople[MAX_ALLOWED];)\n</code></pre>\n\n<hr>\n\n<p>If you need additional code or information please don't hesitate to ask </p>\n"}, {"tags": ["c++", "c", "file", "fopen", "fclose"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427918926, "post_id": 29399771, "comment_id": 46975559, "body": "It&#39;s undefined behavior of course."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1427919134, "post_id": 29399771, "comment_id": 46975678, "body": "In a complex situation that is hard to keep track of, just as with <code>free()</code> if you set the pointer to <code>NULL</code> at the point of declaration, and after closing or freeing, you can then check it before the <code>fclose()</code> or <code>free()</code> call to save a lot of grief."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427919506, "post_id": 29399771, "comment_id": 46975861, "body": "@WeatherVane: But unfortunately, in difference to <code>free</code>, it is not well defined to call <code>fclose</code> with a <code>NULL</code> pointer. I would suggest &quot;checking&quot; for <code>NULL</code> before <code>free</code> is a bad thing. Checking for <code>NULL</code> before calling <code>fclose</code> is definitely a good thing."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1427919548, "post_id": 29399771, "comment_id": 46975883, "body": "Also see <a href=\"http://stackoverflow.com/q/24555980/1708801\">Fclose a file that is already fclose</a> looks like a duplicate"}, {"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1427919666, "post_id": 29399771, "comment_id": 46975953, "body": "@MatsPetersson How about <code>if (!nullptr == fp) \t\t\tfclose(fp); </code> ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1427919667, "post_id": 29399771, "comment_id": 46975954, "body": "@MatsPetersson I didn&#39;t say to call <code>fclose(NULL)</code> or <code>free(NULL)</code>. I said it allows you to check the pointer status and <b><i>not</i></b> call those functions. but with a file, you need to be careful to distinguish that a file handle can be <code>0</code>."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1427919833, "post_id": 29399771, "comment_id": 46976041, "body": "Right, and my point is that <code>free</code>, since about 1990 [or before], tolerates calls with a <code>NULL</code> pointer - so you should NOT check for <code>NULL</code> before calling <code>free</code> (because it&#39;s extra code that doesn&#39;t do anything meaningful), but you should before calling <code>fclose</code>. Which is rather confusing. Better to avoid both and use <code>fstream</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1427920050, "post_id": 29399771, "comment_id": 46976163, "body": "@MatsPetersson I don&#39;t understand your quibble. Is my suggestion that you set a freed memory pointer, or a closed file pointer to <code>NULL</code> wrong, so that in the first case it is benign to <code>free()</code>, and in the second, checkable to <code>fclose()</code>?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1427920178, "post_id": 29399771, "comment_id": 46976225, "body": "No, but your suggestion to &quot;check for <code>NULL</code> before calling <code>free</code> leads to extra code for no good reason, wheras you NEED to do that in the case of <code>fclose</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427920218, "post_id": 29399771, "comment_id": 46976251, "body": "That&#39;s what I originally said. Check for <code>NULL</code>, sorry I mentioned <code>free()</code> now, but you went right off topic."}], "answers": [{"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1427919017, "post_id": 29399840, "comment_id": 46975608, "body": "POSIX also says it&#39;s UB: <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fclose.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/functions/fclose.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1427919021, "post_id": 29399840, "comment_id": 46975610, "body": "Agreed.  An implementation could always <code>new&#47;malloc</code> the <code>FILE</code> in <code>fopen(_s)()</code> and <code>delete&#47;free</code> it in <code>fclose()</code>,or it could use a private cache, and both would be legal.  The caller should not make any assumptions about the validity of a <code>FILE*</code> pointer after passing it to <code>fclose()</code>, just NULL it and move it."}, {"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 0, "creation_date": 1427919042, "post_id": 29399840, "comment_id": 46975626, "body": "Why does it say <i>stream parameter</i>? Not using streams here"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1427919202, "post_id": 29399840, "comment_id": 46975713, "body": "@ShafikYaghmour: ISO C11 Draft N1570, 7.21.3 par. 4: <code>The value of a pointer to a FILE object is indeterminate after the associated file is closed (including the standard text streams).</code>"}], "tags": [], "owner": {"reputation": 765, "user_id": 2661551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/621133c045364c2063d4d943d09a3b97?s=128&d=identicon&r=PG", "display_name": "Shade", "link": "https://stackoverflow.com/users/2661551/shade"}, "is_accepted": true, "score": 6, "last_activity_date": 1427918911, "creation_date": 1427918911, "answer_id": 29399840, "question_id": 29399771, "link": "https://stackoverflow.com/questions/29399771/undefined-behavior-fopen-fclose/29399840#29399840", "title": "Undefined behavior fopen, fclose", "body": "<p>Quote from <code>man fclose</code>:</p>\n\n<blockquote>\n  <p>The  behaviour  of  fclose()  is  undefined  if  the  stream  parameter is an illegal pointer, or is a descriptor already passed to a previous invocation of fclose().</p>\n</blockquote>\n\n<p>So yes, it is undefined behavior.</p>\n"}], "owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 0, "closed_date": 1427919668, "accepted_answer_id": 29399840, "answer_count": 1, "score": 2, "last_activity_date": 1427918969, "creation_date": 1427918659, "last_edit_date": 1427918969, "question_id": 29399771, "link": "https://stackoverflow.com/questions/29399771/undefined-behavior-fopen-fclose", "closed_reason": "Duplicate", "title": "Undefined behavior fopen, fclose", "body": "<p>Can the following code result in undefined behavior?</p>\n\n<pre><code>FILE *fp;\nfopen_s(&amp;fp, \"abc.bin\", \"rb\");\nfclose(fp);\nfclose(fp); // accidentally closed an already closed file.\n</code></pre>\n\n<p>I know that calling free on an already freed up array results in UB. Hence I ask. </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1427918486, "post_id": 29399709, "comment_id": 46975308, "body": "Because you have <code>typedef</code>ed it (question title)."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1427918541, "post_id": 29399709, "comment_id": 46975342, "body": "<code>nod</code> and <code>nod*</code> are not the same."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1427918599, "post_id": 29399709, "comment_id": 46975380, "body": "Probably instead of <code>(nod)v[r]</code> you need <code>&amp;v[r]</code> or <code>v+r</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1427919546, "post_id": 29399767, "comment_id": 46975880, "body": "Nice &#39;fighting with the compiler&#39; is no good (no clue if the answer is correct)"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1427918639, "creation_date": 1427918639, "answer_id": 29399767, "question_id": 29399709, "link": "https://stackoverflow.com/questions/29399709/why-is-a-nod-within-an-array-considered-nod-instead-of-struct-nod/29399767#29399767", "title": "why is a nod within an array considered &#39;nod&#39; instead of &#39;struct nod&#39;?", "body": "<p>You have too many casts, it might indicate that you are fighting with the compiler and forcing it to accept your code, which is very bad.</p>\n\n<p>The problem is</p>\n\n<pre><code>adaugaSfarsit((nod)v[r],cap-&gt;val);\n              /* ^ here it's very wrong */\n</code></pre>\n\n<p>not only <code>v[r]</code> is already of type <code>nod</code> but also, you are casting it to <code>nod</code>?</p>\n\n<p>So the solution is to change it with this</p>\n\n<pre><code>adaugaSfarsit(&amp;v[r], cap-&gt;val);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4739762, "user_type": "registered", "profile_image": "https://graph.facebook.com/878623468863502/picture?type=large", "display_name": "Maria", "link": "https://stackoverflow.com/users/4739762/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427918639, "creation_date": 1427918433, "last_edit_date": 1427918483, "question_id": 29399709, "link": "https://stackoverflow.com/questions/29399709/why-is-a-nod-within-an-array-considered-nod-instead-of-struct-nod", "title": "why is a nod within an array considered &#39;nod&#39; instead of &#39;struct nod&#39;?", "body": "<p>I am currently trying to implement the algorithm Radix Sort. In order to implemented I have to create an array of linked lists. I do this in the following lines:  </p>\n\n<pre><code>typedef struct _nod {\n    struct _nod *next;\n    int val;\n}   nod;\nv=(nod*)malloc(10*sizeof(nod));  \n</code></pre>\n\n<p>I feed the following function an unsorted linked list (v), an 'n' which represents the digit that I want to return(1 means that I want the unit number, 10 means that I want the tens digit number and so on) and an unsorted linked list (cap) which must be sorted.  </p>\n\n<pre><code>nod *sorteaza(nod *v,nod *cap,int n)    {\n    nod *sort,*aux;\n    int cat,r,i;\n    sort=(nod*)malloc(sizeof(nod));\n    while(cap-&gt;next!=NULL)  {\n        cat=cap-&gt;val/n;\n        r=cat%10;\n        adaugaSfarsit(&amp;v[r],cap-&gt;val);\n        cap=cap-&gt;next;\n    }\n    cat=cap-&gt;val/n;\n    r=cat%10;\n    adaugaSfarsit((nod)v[r],cap-&gt;val);\n\n    for(i=0;i&lt;10;i++)   {\n        aux=&amp;v[i];\n        while(aux-&gt;next!=NULL)  {\n            adaugaSfarsitNod(sort,v[i].next);\n            aux=aux-&gt;next;\n        }\n        adaugaSfarsitNod(sort,v[i].next);\n\n    }\n}\n</code></pre>\n\n<p>The problem I am facing when I run this program is being generated by v[i] which gives me the following error:  </p>\n\n<pre><code>1.c: In function \u2018sorteaza\u2019:\n1.c:73:2: error: incompatible type for argument 1 of \u2018adaugaSfarsit\u2019\n  adaugaSfarsit((nod)v[r],cap-&gt;val);\n  ^\n1.c:29:6: note: expected \u2018struct nod *\u2019 but argument is of type \u2018nod\u2019\n nod* adaugaSfarsit (nod *cap,int inf)\n</code></pre>\n\n<p>Can anyone explain to me why it gives me this error? As far as I know v[i] is a nod and that's what I request in the parameters of adaugaSfarsit which is declared like this:  </p>\n\n<pre><code>nod* adaugaSfarsit (nod *cap,int inf)\n\n{\n    nod *nou, *p;\n    p = cap;\n    nou = (nod*) malloc( sizeof(nod));\n    nou-&gt;val=inf;\n    nou-&gt;next = NULL;\n    if(cap == NULL)\n        cap=nou;\n    while (cap-&gt;next != NULL)\n        cap = cap-&gt;next;    //parcurg lista pana ajung la ultimul nod\n    cap-&gt;next = nou;    //adaug elementul\n    return p;\n}\n\n\nnod* adaugaSfarsitNod (nod *cap,nod *nou)\n\n{\n    nod *p;\n    p = cap;\n    if(cap == NULL)\n        cap=nou;\n    while (cap-&gt;next != NULL)\n        cap = cap-&gt;next;    //parcurg lista pana ajung la ultimul nod\n    cap-&gt;next = nou;    //adaug elementul\n    return p;\n}\n</code></pre>\n"}, {"tags": ["c", "pipe", "execl"], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 1, "last_activity_date": 1427916626, "last_edit_date": 1427916626, "creation_date": 1427916224, "answer_id": 29399118, "question_id": 29399057, "link": "https://stackoverflow.com/questions/29399057/print-pipe-content-to-screen/29399118#29399118", "title": "Print pipe content to screen", "body": "<blockquote>\n  <p>how can I print [the content of the] pipe on [the] screen</p>\n</blockquote>\n\n<p><code>read()</code> from the pipe byte by byte and <code>printf(\"%d\\n\", byte);</code> it until the pipe is empty, that is until <code>read()</code> returned <code>0</code>.</p>\n\n<p>If you can asure it's just text coming through the pipe don't print the byte as <code>int</code> (one per line as shown above) but as <code>char</code> in a row using <code>printf(\"%c\", byte);</code></p>\n"}], "owner": {"reputation": 6930, "user_id": 1657309, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kOnqZ.jpg?s=128&g=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/1657309/khaled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2833, "favorite_count": 0, "accepted_answer_id": 29399118, "answer_count": 1, "score": 1, "last_activity_date": 1427916626, "creation_date": 1427916001, "last_edit_date": 1427916478, "question_id": 29399057, "link": "https://stackoverflow.com/questions/29399057/print-pipe-content-to-screen", "title": "Print pipe content to screen", "body": "<p>I am using the <code>execlp()</code> to execute commands on child process and save into a pipe to be read by parent as such for example</p>\n\n<pre><code>int pipefd[2];\nif (pipe(pipefd)) {\n    perror(\"pipe\");\n    exit(127);\n}\nif(!fork()){\n    close(pipefd[0]);\n    dup2(pipefd[1], 1);\n    close(pipefd[1]);\n    execlp(\"ls\", \"ls\", NULL);\n} else {\n    close(pipefd[1]);\n    dup2(pipefd[0], 0);\n    close(pipefd[0]);\n    execlp(\"wc\", \"wc\", NULL);\n}\n</code></pre>\n\n<p>In some cases, parent doesn't have to execute anything, but rather just print out content of the pipe on the screen, how can I print pipe on screen (possibly without storing into a variable due to unknown output size).</p>\n"}, {"tags": ["c", "loops", "numerical-methods", "polynomial-math"], "comments": [{"owner": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "edited": false, "score": 0, "creation_date": 1427916148, "post_id": 29398979, "comment_id": 46974002, "body": "Go on, finish your code. That seems someone correct. Consider that you only need to break out of the loop if you find a solution. You know SO&#39;s policy on giving a direct homework solution..."}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "reply_to_user": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "edited": false, "score": 0, "creation_date": 1427916276, "post_id": 29398979, "comment_id": 46974067, "body": "im not asking for a solution, only direction"}, {"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1427963589, "post_id": 29398979, "comment_id": 46990656, "body": "<code>if (y == zero)</code> it&#39;s wrong. You should instead check the absolute value of <code>y</code> is less than <code>zero</code>. By the way, in your code <code>zero</code> is never 0, so you&#39;d better rename it. A common name for this kind of constant/variable is <code>epsilon</code>. You should keep in mind that one (almost) never use <code>==</code> with floats."}], "answers": [{"comments": [{"owner": {"reputation": 561, "user_id": 4402646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a354f796bf1b1393cba56952653c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubix Rechvin", "link": "https://stackoverflow.com/users/4402646/rubix-rechvin"}, "reply_to_user": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1427917551, "post_id": 29399232, "comment_id": 46974784, "body": "At the end of the while loop add a statement that increments beginning_of_range."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1427962376, "post_id": 29399232, "comment_id": 46990075, "body": "or put <code>x=beginning_of_range</code> outside of the loop, before the <code>while</code> statement."}], "tags": [], "owner": {"reputation": 561, "user_id": 4402646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a354f796bf1b1393cba56952653c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubix Rechvin", "link": "https://stackoverflow.com/users/4402646/rubix-rechvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427916696, "creation_date": 1427916696, "answer_id": 29399232, "question_id": 29398979, "link": "https://stackoverflow.com/questions/29398979/a-code-for-finding-one-root-of-fifth-degree-polynomial/29399232#29399232", "title": "A code for finding one root of fifth degree polynomial", "body": "<p>Your first while loop should probably be an if statement instead of a loop.</p>\n\n<p>Your second (main) while loop never increments the beginning of range. This is probably causing an endless loop for you.</p>\n"}, {"tags": [], "owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "is_accepted": true, "score": 0, "last_activity_date": 1427962886, "creation_date": 1427962886, "answer_id": 29408235, "question_id": 29398979, "link": "https://stackoverflow.com/questions/29398979/a-code-for-finding-one-root-of-fifth-degree-polynomial/29408235#29408235", "title": "A code for finding one root of fifth degree polynomial", "body": "<p>Your task as written is very questionable, so much so that there is perhaps a mis-interpretation or mis-communication.</p>\n\n<p>A randomly given polynomial with floating point coefficients will have integer roots with probability so close to zero that it is practically impossible.</p>\n\n<p>Even with integer coefficients it requires carefully reverse-engineered coefficients to get an integer root. Just change one coefficient by one and in most cases all roots will be irrational.</p>\n\n<p>What you can do in your framework is to find intervals with a sign change so that there is at least one root inside the interval that can be found using one of bisection, regula falsi, Illinois, secant or Mullers methods. All of them derivative free.</p>\n\n<p>Without identifying all roots, also the complex ones, it is rather hard to guarantee that all real roots have been found. Thus it is only approximately possible to find the smallest real root inside the given interval. There might be an integer interval with two real roots inside so that at the boundaries the sign is the same. You would have to analyse the signs of all derivatives at the integer points to make more reliable guesses in this case, see Descartes rule and Budan-Fourier theorem.</p>\n"}], "owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "accepted_answer_id": 29408235, "answer_count": 2, "score": 0, "last_activity_date": 1427963606, "creation_date": 1427915741, "last_edit_date": 1427963606, "question_id": 29398979, "link": "https://stackoverflow.com/questions/29398979/a-code-for-finding-one-root-of-fifth-degree-polynomial", "title": "A code for finding one root of fifth degree polynomial", "body": "<p>I'm trying to write a code that asks from the user to give 5 coefficients for a 5th-degree polynomial, and it also asks to give a range (two values) that the programs checks if there is a solution in it or not (I'm asked to find only one), and the solution must be an integer, while the coefficients can be floats.  </p>\n\n<p>I'm thinking of writing a code that runs over every integer in the range and substitute it in a description of a polynomial than I define, and check if its equal to zero, but I got stuck at deciding how to make the loops. </p>\n\n<p>And another thing, if there are more than one root in the interval that the user enters, then we must print the minimal value of the roots (but I have no direction how to do that either).</p>\n\n<p>I will show you what I wrote so far, and any kind of help would be appreciated:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define zero 0.00001\n\nint main()\n{\n    double a, b, c , d , e , f , y ,  beginning_of_range, end_of_range;\n\n    int x;\n\n    printf(\"please enter the coefficients of the polynomial:\\n\");\n\n    scanf(\"%lf%lf%lf%lf%lf\", &amp;a, &amp;b, &amp;c, &amp;d, &amp;e);\n\n    printf(\"please enter two values to indicate the beginning and end of range:\\n\");\n\n    scanf(\"%lf%lf\", &amp;beginning_of_range, &amp;end_of_range);\n\n    while (beginning_of_range &gt; end_of_range)\n    {\n        printf(\"ERROR: the range you have entered isn't valid, please try again:\");\n\n        scanf(\"%lf%lf\", &amp;beginning_of_range, &amp;end_of_range);\n    }\n\n    while (beginning_of_range &lt; end_of_range)\n    {\n        x = beginning_of_range;\n\n        y = a + b*x + c*x*x + d*x*x*x + e*x*x*x*x + f*x*x*x*x*x;\n\n        if (y == zero)\n        {\n            printf(\"the root is:%d\", x);\n\n        }\n        else \n        {\n            x = x+1;\n        }\n\n        break;\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "casting", "int", "double"], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1427914710, "creation_date": 1427914710, "answer_id": 29398676, "question_id": 29398648, "link": "https://stackoverflow.com/questions/29398648/sum-and-multiply-of-doubles-and-ints-does-not-work/29398676#29398676", "title": "sum and multiply of doubles and ints does not work", "body": "<p>Because your are printing <code>m</code> which is <code>int</code> with the <code>\"%lf\"</code> specifier which is for <code>double</code>.</p>\n\n<p>And you are also passing more arguments to <code>printf()</code> than format specifiers, which means that you are not enabling compiler warnings, you should, specially if you are a beginner.</p>\n\n<p>Change this</p>\n\n<pre><code>printf(\"%lf\", m, sum);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>printf(\"m   = %d\\nsum = %f\\n\", m, sum);\n</code></pre>\n\n<p>and see what I mean.</p>\n"}, {"tags": [], "owner": {"reputation": 203, "user_id": 4725787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705de42a1e38e58dffa0b5b4e0a850f4?s=128&d=identicon&r=PG&f=1", "display_name": "KajolK", "link": "https://stackoverflow.com/users/4725787/kajolk"}, "is_accepted": false, "score": 0, "last_activity_date": 1427915596, "creation_date": 1427915596, "answer_id": 29398938, "question_id": 29398648, "link": "https://stackoverflow.com/questions/29398648/sum-and-multiply-of-doubles-and-ints-does-not-work/29398938#29398938", "title": "sum and multiply of doubles and ints does not work", "body": "<p>Actually you are printing the value of <code>m</code>  -  </p>\n\n<pre><code> printf(\"%lf\", m, sum);  \n</code></pre>\n\n<p>You have to print -  </p>\n\n<pre><code> printf(\"%lf\",sum);\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 3697301, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/000e9a2b5b7fdf131f361d0cb8612df9?s=128&d=identicon&r=PG&f=1", "display_name": "Stabilo", "link": "https://stackoverflow.com/users/3697301/stabilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 29398676, "answer_count": 2, "score": 1, "last_activity_date": 1427915596, "creation_date": 1427914644, "question_id": 29398648, "link": "https://stackoverflow.com/questions/29398648/sum-and-multiply-of-doubles-and-ints-does-not-work", "title": "sum and multiply of doubles and ints does not work", "body": "<p>I wrote this code in C:   </p>\n\n<pre><code> double x1 = 7.52, x2 = 7, x3 = 8;\n int m = 0;\n double sum = x1 + x2*m + x3*m*m;\n\n printf(\"%lf\", m, sum);\n</code></pre>\n\n<p>but sum is always 0 no matter what the value of m that i changed..</p>\n\n<p>why doesnt it make normal calculation ?</p>\n\n<p>thanks</p>\n"}, {"tags": ["c", "assembly", "linker", "nm"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427915951, "post_id": 29398637, "comment_id": 46973910, "body": "Sounds like homework?"}, {"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 0, "creation_date": 1427916600, "post_id": 29398637, "comment_id": 46974272, "body": "The manpage is pretty clear about what they are, but explaining the concepts is a pretty huge topic."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1427917312, "post_id": 29398637, "comment_id": 46974640, "body": "Didn&#39;t we have this question just a few weeks ago?"}, {"owner": {"reputation": 2153, "user_id": 841786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/97d4cfa32ac47f4a4e6e0178cba8ebce?s=128&d=identicon&r=PG", "display_name": "Hudson Worden", "link": "https://stackoverflow.com/users/841786/hudson-worden"}, "edited": false, "score": 0, "creation_date": 1427917503, "post_id": 29398637, "comment_id": 46974754, "body": "It is homework, however this is extra credit, and I&#39;m not looking for someone to do it for me. I just need guidance because we aren&#39;t provided any."}], "answers": [{"comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1427930617, "post_id": 29399466, "comment_id": 46980548, "body": "It is sort of easy to create an absolute symbol via linker script. C doesn&#39;t have such resources."}], "tags": [], "owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "is_accepted": false, "score": 2, "last_activity_date": 1427917558, "creation_date": 1427917558, "answer_id": 29399466, "question_id": 29398637, "link": "https://stackoverflow.com/questions/29398637/what-do-these-symbols-mean-from-a-programming-standpoint/29399466#29399466", "title": "What do these symbols mean from a programming standpoint?", "body": "<p>Of those 3, I think you can only create <code>B</code> using standard C code. That would simply be a global variable initialized to zero, ie. <code>int foo = 0;</code>. To create absolute or weak objects, you have to use compiler-specific extensions. </p>\n\n<p>A weak symbol using gcc can be declared as: <code>int bar __attribute__ ((weak));</code></p>\n\n<p>I can't think of a way to declare an absolute symbol right now.</p>\n"}], "owner": {"reputation": 2153, "user_id": 841786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/97d4cfa32ac47f4a4e6e0178cba8ebce?s=128&d=identicon&r=PG", "display_name": "Hudson Worden", "link": "https://stackoverflow.com/users/841786/hudson-worden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1427917558, "creation_date": 1427914616, "question_id": 29398637, "link": "https://stackoverflow.com/questions/29398637/what-do-these-symbols-mean-from-a-programming-standpoint", "title": "What do these symbols mean from a programming standpoint?", "body": "<p>I have to create a C file that when compiled, returns symbol output from <code>nm</code> with the types <strong>A</strong>, <strong>B</strong>, and <strong>V</strong>. I have read the man page for <code>nm</code> and searched online, but neither is helping me figure out how symbols with those types are created. What do those symbols mean from a programming standpoint? Also are there any good references I should be looking at?</p>\n"}, {"tags": ["c", "c89"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427915591, "post_id": 29398634, "comment_id": 46973728, "body": "The code you show looks ok, so the reason must be elsewhere."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1427915648, "post_id": 29398634, "comment_id": 46973758, "body": "The cast <code>(struct sockaddr*)</code> however is not needed."}, {"owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "edited": false, "score": 2, "creation_date": 1427915649, "post_id": 29398634, "comment_id": 46973759, "body": "Show the declaration of <code>addr_cli</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427915749, "post_id": 29398634, "comment_id": 46973815, "body": "Also doing <code>sizeof CLIENTS[client].addr</code> instead of <code>sizeof(struct sockaddr*)</code> would be less error-prone."}, {"owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "edited": false, "score": 2, "creation_date": 1427916569, "post_id": 29398634, "comment_id": 46974249, "body": "Can you check if you <code>addr_cli</code> is filled as expected by <code>recvfrom</code>? Is <code>laddr_cli</code> initialised to <code>sizeof addr_cli</code>?"}, {"owner": {"reputation": 1842, "user_id": 2968729, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/H2sbO.jpg?s=128&g=1", "display_name": "anat0lius", "link": "https://stackoverflow.com/users/2968729/anat0lius"}, "reply_to_user": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "edited": false, "score": 0, "creation_date": 1427916871, "post_id": 29398634, "comment_id": 46974418, "body": "@WojtekSurowka So it was that! I didn&#39;t init <code>laddr_cli</code>. But I don&#39;t understand why that is necessary. Thank you."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 0, "creation_date": 1427917211, "post_id": 29398634, "comment_id": 46974591, "body": "@LiLou_: from <code>man recvfrom</code>: ...In this case, <code>addrlen</code> is a value-result argument.  Before the call, it should be initialized to the size of the buffer  associated  with  <code>src_addr</code>. Upon return, <code>addrlen</code> is updated to contain the actual size of the source address."}], "answers": [{"tags": [], "owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "is_accepted": true, "score": 2, "last_activity_date": 1427919772, "last_edit_date": 1427919772, "creation_date": 1427917432, "answer_id": 29399432, "question_id": 29398634, "link": "https://stackoverflow.com/questions/29398634/how-to-memcpy-a-struct-sockaddr-in/29399432#29399432", "title": "How to memcpy() a struct sockaddr_in", "body": "<p>The <code>addr_cli</code> was not filled by the call to <code>recvfrom</code>. The last two arguments of <code>recvfrom</code> are a little bit tricky. They are</p>\n\n<pre><code>struct sockaddr *src_addr,\nsocklen_t *addrlen\n</code></pre>\n\n<p>If <code>src_addr</code> is not NULL, the <code>recvfrom</code> expects that <code>addrlen</code> points to the length of <code>src_addr</code> buffer. (Normally it is the size of  <code>sockaddr</code> structure). If the value of <code>addrlen</code> is too small, the returned address will be truncated. After the call to <code>recvfrom</code> the <code>addrlen</code> will be set to the actual address length. Look at <a href=\"http://linux.die.net/man/2/recvfrom\" rel=\"nofollow\" title=\"documentation\">documentation</a> for details.</p>\n\n<p>So you need to initialize <code>laddr_cli</code> before calling <code>recvfrom()</code>:</p>\n\n<pre><code>struct sockaddr_in addr_cli;\nsocklen_t laddr_cli = sizeof(addr_cli); // &lt;--\n\nmemset(&amp;addr_cli,0,laddr_cli);    \nb=recvfrom(SOCK_UDP_FATHER, &amp;pdu, sizeof(pdu), MSG_DONTWAIT,\n    (struct sockaddr *)&amp;addr_cli, &amp;laddr_cli);\n</code></pre>\n"}], "owner": {"reputation": 1842, "user_id": 2968729, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/H2sbO.jpg?s=128&g=1", "display_name": "anat0lius", "link": "https://stackoverflow.com/users/2968729/anat0lius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3425, "favorite_count": 0, "accepted_answer_id": 29399432, "answer_count": 1, "score": 2, "last_activity_date": 1427919772, "creation_date": 1427914611, "last_edit_date": 1427916098, "question_id": 29398634, "link": "https://stackoverflow.com/questions/29398634/how-to-memcpy-a-struct-sockaddr-in", "title": "How to memcpy() a struct sockaddr_in", "body": "<p>I'm programming a server-client program.\nOn the server I manage the clients through an array of this data structure:</p>\n\n<pre><code>struct Client\n{\n    struct sockaddr_in addr;\n    /*...*/\n}; \n\nstruct Client CLIENTS[MAX_CLI];\n</code></pre>\n\n<p>When I receive the first packet from the client through my <code>UDP</code> socket</p>\n\n<pre><code>struct sockaddr_in addr_cli;\n\nmemset(&amp;addr_cli,0,sizeof(struct sockaddr_in));\nb=recvfrom(SOCK_UDP_FATHER, &amp;pdu, sizeof(pdu), MSG_DONTWAIT,\n    (struct sockaddr *)&amp;addr_cli, (socklen_t *)&amp;laddr_cli);\n</code></pre>\n\n<p>I want to copy his address to my struct. So I do:</p>\n\n<pre><code>memcpy(&amp;CLIENTS[client].addr,(struct sockaddr*)&amp;addr_cli,\n    sizeof(struct sockaddr_in));\n\nprintf(\"IP client: %s\",inet_ntoa(CLIENTS[client].addr.sin_addr);\n</code></pre>\n\n<p>The strange thing is that the first try of communication fails, printing <code>0.0.0.0</code>. But the next try that the client does, is successful and everything goes fine. Why that happens?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1427922169, "post_id": 29398621, "comment_id": 46977317, "body": "You could allocate off the stack using | char * mywords = _alloca(10*sizeof(char *)); | , and the memory would automatically be freed at function exit."}], "answers": [{"tags": [], "owner": {"reputation": 2038, "user_id": 2828594, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/4XNqm.jpg?s=128&g=1", "display_name": "soueuls", "link": "https://stackoverflow.com/users/2828594/soueuls"}, "is_accepted": false, "score": 0, "last_activity_date": 1427914765, "creation_date": 1427914765, "answer_id": 29398690, "question_id": 29398621, "link": "https://stackoverflow.com/questions/29398621/malloc-vs-automatic-creation-of-array/29398690#29398690", "title": "Malloc vs automatic creation of array", "body": "<p>Yeah, the first one is actually added onto the stack, therefor destroyed once the actual function is returned, and the second one is added onto the heap.</p>\n"}, {"comments": [{"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 0, "creation_date": 1427916282, "post_id": 29398752, "comment_id": 46974072, "body": "Bear in mind that anything to do with heaps and stacks has nothing to do with C itself, it&#39;s just usually how a platform implements C."}], "tags": [], "owner": {"reputation": 13, "user_id": 4739180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/976c54e37e50b55121e7faad3ea1f2ae?s=128&d=identicon&r=PG&f=1", "display_name": "Aether", "link": "https://stackoverflow.com/users/4739180/aether"}, "is_accepted": false, "score": 0, "last_activity_date": 1427914958, "creation_date": 1427914958, "answer_id": 29398752, "question_id": 29398621, "link": "https://stackoverflow.com/questions/29398621/malloc-vs-automatic-creation-of-array/29398752#29398752", "title": "Malloc vs automatic creation of array", "body": "<p>The malloc data is allocated to the heap and the other one to the stack. Malloc puts your data on the heap, which you have to control yourself. After you are done with the data, you should free the data (check the man pages on malloc) so that you don't have memory leaks.  </p>\n\n<p>Maybe this website provides you with more insight: \n<a href=\"http://gribblelab.org/CBootcamp/7_Memory_Stack_vs_Heap.html\" rel=\"nofollow\">http://gribblelab.org/CBootcamp/7_Memory_Stack_vs_Heap.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "is_accepted": true, "score": 2, "last_activity_date": 1427915851, "creation_date": 1427915851, "answer_id": 29399014, "question_id": 29398621, "link": "https://stackoverflow.com/questions/29398621/malloc-vs-automatic-creation-of-array/29399014#29399014", "title": "Malloc vs automatic creation of array", "body": "<p>These are very different types.</p>\n\n<p>The first creates an array of pointers in the usual (automatic) way. The 10 pointers are valid until the function end. They don't point to anything valid with this alone, but can each point to a separate string that can be accessed from each element of the array.</p>\n\n<p>The second allocates a chunk of memory to a single pointer to a character. Thus you would expect it to point to a string (up to 40 or 80 bytes typically). The memory is valid until you free it, but the pointer is automatic just like the first. (Note that an array of character pointers decays to <code>char **</code> and not <code>char *</code>.)</p>\n"}], "owner": {"reputation": 7780, "user_id": 1281736, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4f64c9f81bb0d4ee969aaf7b4a5a6f40?s=128&d=identicon&r=PG", "display_name": "Apollo", "link": "https://stackoverflow.com/users/1281736/apollo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 29399014, "answer_count": 3, "score": 0, "last_activity_date": 1427915851, "creation_date": 1427914576, "question_id": 29398621, "link": "https://stackoverflow.com/questions/29398621/malloc-vs-automatic-creation-of-array", "title": "Malloc vs automatic creation of array", "body": "<p>I'm trying to create an array of words. What's the difference between creating array like this:</p>\n\n<pre><code>char* myWords[10];\n</code></pre>\n\n<p>and </p>\n\n<pre><code>char* myWords = malloc(10*sizeof(char *))\n</code></pre>\n\n<p>I'm assuming that since the first one happens automatically, that the memory is reaped at the end of the function execution. Is that correct?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1427914604, "post_id": 29398550, "comment_id": 46973170, "body": "You need to use string compare functions, like <code>strcmp</code> or to be safer <code>strncmp</code> with a limit of 10 since that is the max length of your string."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1427914605, "post_id": 29398550, "comment_id": 46973171, "body": "Indent 4 spaces (or select your code and push Ctrl-K) to format it. Do not use backticks for a code block."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427914644, "post_id": 29398550, "comment_id": 46973203, "body": "Wait, it&#39;s not just <code>strcmp()</code> why are you doing this <code>Worker_name= worker1,worker2</code>???"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1427914755, "post_id": 29398550, "comment_id": 46973265, "body": "@helpme . In the scanf you have to use Worker_name instead of Worker_name[10]); and instead of this statement if (Worker_name= worker1,worker2) you have to use  if ( strcmp( Worker_name, worker1,worker2 ) == 0 )"}, {"owner": {"reputation": 9, "user_id": 4727064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11796df257f376a53c2cb71e6273792?s=128&d=identicon&r=PG&f=1", "display_name": "helpme.", "link": "https://stackoverflow.com/users/4727064/helpme"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427914807, "post_id": 29398550, "comment_id": 46973290, "body": "@iharob i dnt knw if statement for it so i used that"}, {"owner": {"reputation": 9, "user_id": 4727064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11796df257f376a53c2cb71e6273792?s=128&d=identicon&r=PG&f=1", "display_name": "helpme.", "link": "https://stackoverflow.com/users/4727064/helpme"}, "edited": false, "score": 0, "creation_date": 1427923953, "post_id": 29398550, "comment_id": 46978116, "body": "@barmar look at this program and see if u can fix the error pls"}], "answers": [{"tags": [], "owner": {"reputation": 518, "user_id": 4734154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mtFgS7yzJfM/AAAAAAAAAAI/AAAAAAAAD4k/lBjqD5wl8CQ/photo.jpg?sz=128", "display_name": "Gerald Zehetner", "link": "https://stackoverflow.com/users/4734154/gerald-zehetner"}, "is_accepted": false, "score": 0, "last_activity_date": 1427914706, "last_edit_date": 1495541187, "creation_date": 1427914706, "answer_id": 29398673, "question_id": 29398550, "link": "https://stackoverflow.com/questions/29398550/if-statement-to-print-worker-name/29398673#29398673", "title": "If statement to print worker name", "body": "<p>You should take a look at this post, it's excatly the same problem with the answer to it:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15038035/c-how-would-i-write-a-search-function-to-look-for-a-match-in-a-struct-array-an\">C: how would I write a search function to look for a match in a struct array, and return (print) the entire struct it matched?</a></p>\n"}, {"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 0, "last_activity_date": 1427915103, "last_edit_date": 1427915103, "creation_date": 1427914794, "answer_id": 29398701, "question_id": 29398550, "link": "https://stackoverflow.com/questions/29398550/if-statement-to-print-worker-name/29398701#29398701", "title": "If statement to print worker name", "body": "<p>In C you can use <code>strcmp</code> to <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"nofollow\">compare</a> two null-terminated (!) byte strings lexicographically:</p>\n\n<pre><code>int err = strcmp(worker1,worker2);\nif( err == 0))\n    printf(\"ok,equal\\n\");\nelse if(err &lt; 0)\n    printf(\"[%s] precedes [%s]\\n\",worker1,worker2);\nelse if(err &gt; 0)\n    printf(\"[%s] follows [%s]\\n\",worker1,worker2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 86506, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1427915718, "post_id": 29398747, "comment_id": 46973794, "body": "Your second version is flawed. It uses the comma operator which will just throw away the first operand. You&#39;re only comparing against <code>worker2.Worker_name</code>."}, {"owner": {"reputation": 9, "user_id": 4727064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11796df257f376a53c2cb71e6273792?s=128&d=identicon&r=PG&f=1", "display_name": "helpme.", "link": "https://stackoverflow.com/users/4727064/helpme"}, "edited": false, "score": 0, "creation_date": 1427916685, "post_id": 29398747, "comment_id": 46974317, "body": "this is right but it only print worker doesn&#39;t exits even if i put in the worker in the struct above @SaagarEliasJacky"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1427917364, "post_id": 29398747, "comment_id": 46974663, "body": "What is <code>&amp;Worker_name[10]</code> supposed to do?"}, {"owner": {"reputation": 9, "user_id": 4727064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11796df257f376a53c2cb71e6273792?s=128&d=identicon&r=PG&f=1", "display_name": "helpme.", "link": "https://stackoverflow.com/users/4727064/helpme"}, "edited": false, "score": 0, "creation_date": 1427917667, "post_id": 29398747, "comment_id": 46974854, "body": "thats the variable name"}], "tags": [], "owner": {"reputation": 2651, "user_id": 4059942, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2bmaq.jpg?s=128&g=1", "display_name": "Saagar Elias Jacky", "link": "https://stackoverflow.com/users/4059942/saagar-elias-jacky"}, "is_accepted": false, "score": 1, "last_activity_date": 1427917814, "last_edit_date": 1427917814, "creation_date": 1427914941, "answer_id": 29398747, "question_id": 29398550, "link": "https://stackoverflow.com/questions/29398550/if-statement-to-print-worker-name/29398747#29398747", "title": "If statement to print worker name", "body": "<p>Don't you need to specify the Struct member in your If Condition if you are checking only the names? Please see below.</p>\n\n<pre><code>if (Worker_name == worker1.Worker_name || Worker_name == worker2.Worker_name)\n{\n    printf(\"Welcome %s\\n\",Worker_name);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (strcmp(Worker_name,worker1.Worker_name) != 0 || strcmp(Worker_name,worker2.Worker_name) != 0)\n{\n    printf(\"Welcome %s\\n\",Worker_name);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 4159282, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/kpV19.jpg?s=128&g=1", "display_name": "Devi", "link": "https://stackoverflow.com/users/4159282/devi"}, "is_accepted": false, "score": 0, "last_activity_date": 1427918659, "creation_date": 1427918659, "answer_id": 29399770, "question_id": 29398550, "link": "https://stackoverflow.com/questions/29398550/if-statement-to-print-worker-name/29399770#29399770", "title": "If statement to print worker name", "body": "<p>I think you need to modify scanf and printf statement this way:</p>\n\n<pre><code>scanf(\"%s\",&amp;Worker_name); //small letter 's' \n</code></pre>\n\n<p>or may be</p>\n\n<pre><code>scanf(\"%s\",Worker_name);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>printf(\"%s\",Worker_name);\n</code></pre>\n\n<p>Hope this works..</p>\n"}], "owner": {"reputation": 9, "user_id": 4727064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11796df257f376a53c2cb71e6273792?s=128&d=identicon&r=PG&f=1", "display_name": "helpme.", "link": "https://stackoverflow.com/users/4727064/helpme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1428093492, "creation_date": 1427914341, "last_edit_date": 1428093492, "question_id": 29398550, "link": "https://stackoverflow.com/questions/29398550/if-statement-to-print-worker-name", "title": "If statement to print worker name", "body": "<p>I cant get my intended result I want my program to display can anyone help me. The program is to print the workers name who are listed in the struct and if you don't enter any of those names I should print worker name doesn't exist. Can someone tell me the code/ syntax to use </p>\n\n<p>Here is what I have </p>\n\n<pre><code>#include &lt;stdio.h&gt;    \n#include &lt;conio.h&gt;       \n#include &lt;string.h&gt;\n\n//Program Purpose: To accept a specific set of worker names and worker id number and accept the time they came to work and determine if they were early or late for the day.`\n\nstruct workers {\n    char worker_name[10];\n    int worker_id;\n}   workers;\n\nint main ()\n{\n    struct workers worker1; \n    struct workers worker2;\n\n    strcpy (worker1.worker_name, \"sean\");\n    worker1.worker_Id = 1234;\n    strcpy (worker2.worker_name,\"tajae\");\n    worker2.worker_Id = 7890;\n\n    char worker_name [30];\n    int Worker_Id;\n    float Time_Arrived;\n    float Minutes_Late;\n    float Extra_Minutes;\n    float Minutes_Early;\n    float lunch_time;\n    float Departure;\n\n    printf(\"******************Produce Pro Time Management System********************\\n\\n\");\n    printf(\"Good morning. Welcome to Produce Pro, Hope you had a good nights rest and ready to have a successful day at work today.\\n\\n\");\n    printf(\"Please follow the instruction and answer with the required details\\n\");\n    printf(\"Note brief: All time are in army hours\\n\\n\");\n    printf(\"Enter your Worker Name\\n\");\n\n    scanf(\"%S\",&amp;worker_name[30]);\n\n    if (worker_name= worker1,worker2) // this is the error in the program//\n    {\n        printf(&amp;worker_name[30]);\n    }\n    else\n    {\n        printf (\"Worker Name doesn't exist\");\n    }\n}\n</code></pre>\n\n<p>when i make a change the if statement and put</p>\n\n<pre><code>if (worker_name == worker1.worker_name || worker_name == worker2.worker_name)\n\n{\nprintf(\"Welcome %s\\n\",worker_name);\n}\n\nelse printf (\"Worker Name doesn't exist\\n\");\n</code></pre>\n\n<p>worker doesn't eixt is what i get</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1427914398, "post_id": 29398522, "comment_id": 46973060, "body": "I don&#39;t think this is the first time someone asks this."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1427914452, "post_id": 29398522, "comment_id": 46973088, "body": "I searched, and didn&#39;t find a duplicate. But the answers below are ok, this was downvoted I suppose, because peopole think that you should have dont <code>gcc --help</code> and see what every option is for, don&#39;t you think so?"}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 4, "creation_date": 1427914488, "post_id": 29398522, "comment_id": 46973109, "body": "One question per question, please."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1427914538, "post_id": 29398522, "comment_id": 46973132, "body": "See <a href=\"http://www.manpages.info/linux/gcc.1.html\" rel=\"nofollow noreferrer\">manpages.info/linux/gcc.1.html</a>. Under the Synopsis section, you will see the <code>-o</code> option."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 0, "creation_date": 1427914927, "post_id": 29398522, "comment_id": 46973366, "body": "The C stadard library is usually called libc.a and is linked by default into any executable. Explicitly you can link it with <code>gcc -lc</code>"}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 0, "creation_date": 1427915510, "post_id": 29398522, "comment_id": 46973693, "body": "correction: <code>libc.so</code> is the one linked by default. The <code>libc.a</code> is the one for static linking. As for the location, there is already a question about it on SO (it&#39;s <code>&#47;usr&#47;lib</code>)"}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "reply_to_user": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 1, "creation_date": 1427915577, "post_id": 29398522, "comment_id": 46973720, "body": "@a3f Thanks, I found it: <a href=\"http://stackoverflow.com/questions/6240639/where-is-the-standard-c-library-on-mac-os-x\" title=\"where is the standard c library on mac os x\">stackoverflow.com/questions/6240639/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1998, "user_id": 2283078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008b29961534cf4b1e499eb430231c3c?s=128&d=identicon&r=PG", "display_name": "Alejandro D&#237;az", "link": "https://stackoverflow.com/users/2283078/alejandro-d%c3%adaz"}, "is_accepted": false, "score": 3, "last_activity_date": 1549198616, "last_edit_date": 1549198616, "creation_date": 1427914332, "answer_id": 29398543, "question_id": 29398522, "link": "https://stackoverflow.com/questions/29398522/what-is-the-o-option-in-gcc/29398543#29398543", "title": "What is the -o option in GCC?", "body": "<p>It indicates the output file, i.e. what your object-file or executable should be. You can see this information by doing <code>gcc --help</code> or <code>man gcc</code>.</p>\n\n<p><code>&lt;stdio.h&gt;</code> is part of the standard library, which your compiler is already linking to.</p>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 1510739, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4efc9a375453c71808330dc8713cdb28?s=128&d=identicon&r=PG", "display_name": "Torkoal", "link": "https://stackoverflow.com/users/1510739/torkoal"}, "is_accepted": false, "score": 1, "last_activity_date": 1427914413, "creation_date": 1427914413, "answer_id": 29398574, "question_id": 29398522, "link": "https://stackoverflow.com/questions/29398522/what-is-the-o-option-in-gcc/29398574#29398574", "title": "What is the -o option in GCC?", "body": "<pre><code>gcc -o [file]\n</code></pre>\n\n<p>Writes the build output to an output file. This is not to be confused with -O which is the optimization level. I don't believe this option has anything to do with linking.</p>\n"}, {"comments": [{"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "edited": false, "score": 0, "creation_date": 1427915453, "post_id": 29398868, "comment_id": 46973658, "body": "I see, thanks a lot."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1549198514, "last_edit_date": 1549198514, "creation_date": 1427915387, "answer_id": 29398868, "question_id": 29398522, "link": "https://stackoverflow.com/questions/29398522/what-is-the-o-option-in-gcc/29398868#29398868", "title": "What is the -o option in GCC?", "body": "<p>See <a href=\"http://www.manpages.info/linux/gcc.1.html\" rel=\"nofollow noreferrer\">manpages.info/linux/gcc.1.html</a>. Under the <em>Synopsis</em> section, you will see the <code>-o</code> option. </p>\n\n<p>Regarding</p>\n\n<blockquote>\n  <p>Well OK, the compiler knows where to look for <code>stdio.h</code>, but the executable must be linked to <code>stdio.o</code>, mustn't it? Where does the <code>stdio.o</code> file reside?</p>\n</blockquote>\n\n<p>The answer to the first question is \"No\". Since the answer to the first question is \"No\", the second question is not relevant.</p>\n\n<p>The functions and variables declared in <code>stdio.h</code> need not be in <code>stdio.o</code>. They are usually in a library (<code>.a</code> or <code>.so</code>) which are found in one of the directories where the linker looks for library files.</p>\n\n<p>In general, there is no rule that each <code>.h</code> file has a corresponding <code>.o</code> file. It is possible to have the functions and variables declared in a <code>.h</code> file to be implemented in multiple <code>.c</code> files that will result in multiple <code>.o</code> files. It is also possible to have functions and variables declared in multiple <code>.h</code> files to be implemented in one <code>.c</code> file. How these are organized varies from project to project.</p>\n\n<p>Each <code>.c</code> file, on the other hand, has a corresponding <code>.o</code> file (I haven't seen any platforms where multiple <code>.c</code> files can be compiled to create one <code>.o</code> file). All the <code>.o</code> files resulting from compiling the <code>.c</code> files are linked together to create an executable.</p>\n"}], "owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11006, "favorite_count": 2, "closed_date": 1551624909, "accepted_answer_id": 29398868, "answer_count": 3, "score": -1, "last_activity_date": 1549198616, "creation_date": 1427914252, "last_edit_date": 1549198338, "question_id": 29398522, "link": "https://stackoverflow.com/questions/29398522/what-is-the-o-option-in-gcc", "closed_reason": "Duplicate", "title": "What is the -o option in GCC?", "body": "<pre><code>gcc -c x.c\n</code></pre>\n\n<p>tells the compiler to create the object code from the x.c file, and not try to link it, right?</p>\n\n<p>What does the <code>-o</code> option tell the compiler as in the following?</p>\n\n<pre><code>gcc a.o y.o -o x.out\n</code></pre>\n\n<p>And the other question I have is, when I have source code like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    puts(\"\");\n}\n</code></pre>\n\n<p>Well OK, the compiler knows where to look for <code>stdio.h</code>, but the executable must be linked to <code>stdio.o</code>, mustn't it? Where does the <code>stdio.o</code> file reside?</p>\n"}, {"tags": ["c", "embedded", "embed"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427913893, "post_id": 29398350, "comment_id": 46972779, "body": "What are you asking? it doesn&#39;t make any sense. If your function has a return type, it must return a value, if it doesn&#39;t AFAIK it&#39;s undefined behavior, and I bet your compiler can warn about a function that should return a value but doesn&#39;t."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1427914012, "post_id": 29398350, "comment_id": 46972843, "body": "Look at the function prototype or definition."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1427914138, "post_id": 29398350, "comment_id": 46972906, "body": "@user236841 As for me then I do not know whether a function return a value or not.:)"}], "answers": [{"comments": [{"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1427919825, "post_id": 29398469, "comment_id": 46976037, "body": "Unless it is a void pointer (void *)"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 1, "creation_date": 1427922362, "post_id": 29398469, "comment_id": 46977404, "body": "@Deanie : <code>void*</code> is clearly not the same as <code>void</code> so really not &quot;unless&quot; anything."}, {"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1427923636, "post_id": 29398469, "comment_id": 46977981, "body": "@Clifford Obviously the person asking has no knowledge of void * either.  Telling him that a function starting with void doesn&#39;t return anything can be very misleading."}], "tags": [], "owner": {"reputation": 374, "user_id": 1510739, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4efc9a375453c71808330dc8713cdb28?s=128&d=identicon&r=PG", "display_name": "Torkoal", "link": "https://stackoverflow.com/users/1510739/torkoal"}, "is_accepted": false, "score": 2, "last_activity_date": 1427914088, "last_edit_date": 1427914088, "creation_date": 1427914007, "answer_id": 29398469, "question_id": 29398350, "link": "https://stackoverflow.com/questions/29398350/when-we-chose-function-return-0-or-1-or-1-or-else-on-what-basis-it-decid/29398469#29398469", "title": "When we chose function return &quot;0&quot; or &quot;1&quot; or &quot;-1&quot; or else ?on what basis it decide?", "body": "<p>By placing <code>void</code> in front of any function definition, you make it so that the function does not need to return a value. For example:</p>\n\n<pre><code>void test(void)\n{\n    ...\n}\n</code></pre>\n\n<p>Would not <code>return</code> anything.</p>\n"}], "owner": {"reputation": 291, "user_id": 3785278, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1170610507/picture?type=large", "display_name": "shadab", "link": "https://stackoverflow.com/users/3785278/shadab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "closed_date": 1427914157, "answer_count": 1, "score": -11, "last_activity_date": 1598680863, "creation_date": 1427913614, "last_edit_date": 1598680863, "question_id": 29398350, "link": "https://stackoverflow.com/questions/29398350/when-we-chose-function-return-0-or-1-or-1-or-else-on-what-basis-it-decid", "closed_reason": "Needs details or clarity", "title": "When we chose function return &quot;0&quot; or &quot;1&quot; or &quot;-1&quot; or else ?on what basis it decide?", "body": "<p>How do you know whether a function returns a value or not in C or embedded C?\non what basis we decide that function return 0 or 1 or -1 or else.</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 2, "creation_date": 1427913656, "post_id": 29398329, "comment_id": 46972640, "body": "<code>int  *i_ptr = 5</code> means the address, not the content of the address, is 5. It doesn&#39;t give an error because 5 is a valid address."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1427913935, "post_id": 29398329, "comment_id": 46972799, "body": "&quot;Can we initialize and declare pointer variable like this - &quot; - yes, and you already know it: <code>int *ptr = &amp;n;</code>"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1427913996, "post_id": 29398329, "comment_id": 46972835, "body": "what you probably want is  <code>int  *i_ptr = new int(5);</code>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1427914189, "post_id": 29398329, "comment_id": 46972941, "body": "This should not compile in C++, period."}, {"owner": {"reputation": 9978, "user_id": 2986537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff296a622eb6993b28017005d1f7e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Razib", "link": "https://stackoverflow.com/users/2986537/razib"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1427914352, "post_id": 29398329, "comment_id": 46973027, "body": "@immibis, dose it mean we can write also int <code>*ptr = &amp;5</code> ?"}, {"owner": {"reputation": 9978, "user_id": 2986537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff296a622eb6993b28017005d1f7e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Razib", "link": "https://stackoverflow.com/users/2986537/razib"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1427914421, "post_id": 29398329, "comment_id": 46973071, "body": "@Quentin, I think it is not duplicate because of the my first question. From the heading of the questions it seems it is duplicate."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1427914499, "post_id": 29398329, "comment_id": 46973118, "body": "@Razib: It is illegal in both C and C++ language to initialize a pointer value with non-zero integer. The code is ill formed. Such initialization (if you need it for some reason) requires an explicit cast."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1427916789, "post_id": 29398329, "comment_id": 46974372, "body": "@AnT, Was it always illegal in C, or just C99 on (or maybe just from the first ISO standard)?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1427917863, "post_id": 29398329, "comment_id": 46974973, "body": "@chris: It is illegal in all versions of standard C. In pre-standard C it was OK."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1427918261, "post_id": 29398329, "comment_id": 46975209, "body": "@AnT, That makes sense, thanks."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1427922576, "post_id": 29398329, "comment_id": 46977497, "body": "@Razib No, because you can&#39;t write <code>&amp;5</code>."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1427913995, "last_edit_date": 1427913995, "creation_date": 1427913613, "answer_id": 29398349, "question_id": 29398329, "link": "https://stackoverflow.com/questions/29398329/understanding-the-warning-and-compilation-error-while-initializing-and-declaring/29398349#29398349", "title": "Understanding the Warning and Compilation Error while Initializing and Declaring Pointer Variable", "body": "<p>The <code>*</code> has a different meaning in your code. </p>\n\n<p>It's not for pointer dereference but for pointer declaration, so you are declaring a pointer and assigning an integer to it, the pointer will store the integer as the address it points to. </p>\n\n<p>That would presumably be Undefined Behavior because you don't know whether <code>5</code> a valid address or not, and it's very very likely that it's not.</p>\n\n<p>If you split the declaration from the initialization it will become obvious that the code has a different meaning, example</p>\n\n<pre><code>int *pointer; /* here the `*' is used for pointer declaration */\nint  value;\n\npointer  = &amp;vaule; /* we store the address of value */\n*pointer = 5; /* we dereference the pointer and write to that location */\n/* ^ here the `*' is used for pointer dereference */\n\nprintf(\"%d\\n\", value * 5); /* this will print 25 */\n/*                   ^ here the `*' is used for multiplication */\n</code></pre>\n\n<p>Now you see that I said that your code is confusing because</p>\n\n<pre><code>int *pointer = 5;\n</code></pre>\n\n<p>seems equivalent to</p>\n\n<pre><code>*pointer = 5;\n</code></pre>\n\n<p>but it's not.</p>\n"}, {"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1427914332, "post_id": 29398416, "comment_id": 46973013, "body": "&quot;Nothing wrong&quot;? It is flat out <i>illegal</i> in both C and C++ language to initialize a pointer value with non-zero integer. The code is ill-formed. Such initialization (if you need it for some reason) requires an explicit cast."}, {"owner": {"reputation": 157, "user_id": 4672998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A7vfI.jpg?s=128&g=1", "display_name": "Martin Kalcok", "link": "https://stackoverflow.com/users/4672998/martin-kalcok"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1427915073, "post_id": 29398416, "comment_id": 46973455, "body": "In no way am I going to defend initializing pointer to static integer values. I merely stated that there&#39;s &quot;Technically&quot; nothing wrong with it. That&#39;s why it gets compiled, and why compiler prints Warning about it."}, {"owner": {"reputation": 148948, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "edited": false, "score": 0, "creation_date": 1427915474, "post_id": 29398416, "comment_id": 46973673, "body": "@MartinKalcok: it is technically wrong because it does not follow the rules of the C language as specified by the ISO standard (cf C11 6.5.16.1, which also holds for initialization according to 6.7.9 &#167;11)"}], "tags": [], "owner": {"reputation": 157, "user_id": 4672998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A7vfI.jpg?s=128&g=1", "display_name": "Martin Kalcok", "link": "https://stackoverflow.com/users/4672998/martin-kalcok"}, "is_accepted": false, "score": 1, "last_activity_date": 1427913989, "last_edit_date": 1427913989, "creation_date": 1427913859, "answer_id": 29398416, "question_id": 29398329, "link": "https://stackoverflow.com/questions/29398329/understanding-the-warning-and-compilation-error-while-initializing-and-declaring/29398416#29398416", "title": "Understanding the Warning and Compilation Error while Initializing and Declaring Pointer Variable", "body": "<ol>\n<li>There is technically nothing wrong with <code>int *n = 5</code>. It's a valid pointer that points at memory with address 5 and that's why it lets you compile it. The reason it segfaults is that your program don't have access to this memory.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1173, "user_id": 4014693, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "avinash pandey", "link": "https://stackoverflow.com/users/4014693/avinash-pandey"}, "is_accepted": false, "score": 1, "last_activity_date": 1427914001, "creation_date": 1427914001, "answer_id": 29398467, "question_id": 29398329, "link": "https://stackoverflow.com/questions/29398329/understanding-the-warning-and-compilation-error-while-initializing-and-declaring/29398467#29398467", "title": "Understanding the Warning and Compilation Error while Initializing and Declaring Pointer Variable", "body": "<p>When you are doing </p>\n\n<pre><code>int  *i_ptr = 5;\n</code></pre>\n\n<p>you are assigning address 5 to i_ptr.But since this address doesn't belongs to your program,hence when you De-reference i_ptr it is giving you segmentation fault.Only try to access those memory location which belongs to your program.</p>\n"}, {"tags": [], "owner": {"reputation": 13415, "user_id": 102, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f20eaa6bccefd48c6ca5aff0badffdce?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/102/bill"}, "is_accepted": false, "score": 1, "last_activity_date": 1427914055, "creation_date": 1427914055, "answer_id": 29398479, "question_id": 29398329, "link": "https://stackoverflow.com/questions/29398329/understanding-the-warning-and-compilation-error-while-initializing-and-declaring/29398479#29398479", "title": "Understanding the Warning and Compilation Error while Initializing and Declaring Pointer Variable", "body": "<p>The compiler is not required to make it an error, so it does not.</p>\n\n<p>The syntax you are looking for is: <code>int *i_ptr = new int(5);</code></p>\n\n<p>This allocates new memory large enough for an integer, sets the value to 5, and sets <code>i_ptr</code> to point at that memory.  Remember to do <code>delete i_ptr;</code> whene you are done with the memory.</p>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1427914822, "last_edit_date": 1427914822, "creation_date": 1427914466, "answer_id": 29398591, "question_id": 29398329, "link": "https://stackoverflow.com/questions/29398329/understanding-the-warning-and-compilation-error-while-initializing-and-declaring/29398591#29398591", "title": "Understanding the Warning and Compilation Error while Initializing and Declaring Pointer Variable", "body": "<p>You code is illegal in both C and C++ languages. You are not allowed to initialize pointers with integer values. This</p>\n\n<pre><code>int *i_ptr = 5;\n</code></pre>\n\n<p>is illegal. It is not \"assigning address 5 to a pointer\" as some other answers seem to suggest. The above initialization is plainly non-compilable within the realm of standard C and C++ languages.</p>\n\n<p>The diagnostic message that you received indicates an error in your code. After that, neither C nor C++ makes any guarantees about the meaning of your code, i.e. your code is neither C nor C++.</p>\n\n<p>Don't ignore diagnostic messages issued by your compiler. C and C++ does no differentiate between \"warnings\" or \"errors\". Any diagnostic message should be treated as a potential error. It is up to you to recognize errors among what looks like a \"mere warning\". With GCC you can also try using <code>-pedantic-errors</code> option to make it report errors as errors.</p>\n"}, {"tags": [], "owner": {"reputation": 148948, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "is_accepted": true, "score": 3, "last_activity_date": 1427915762, "last_edit_date": 1427915762, "creation_date": 1427914468, "answer_id": 29398592, "question_id": 29398329, "link": "https://stackoverflow.com/questions/29398329/understanding-the-warning-and-compilation-error-while-initializing-and-declaring/29398592#29398592", "title": "Understanding the Warning and Compilation Error while Initializing and Declaring Pointer Variable", "body": "<blockquote>\n  <ol>\n  <li>While the first code fails at execution time why it doesn't give compilation error, instead of warning?</li>\n  </ol>\n</blockquote>\n\n<p>The difference between errors and warnings depends on the flags you pass to your compiler.</p>\n\n<p>It's a good idea to make the setting more paranoid during development (<code>-Wall</code>, <code>-Wextra</code>, possibly even <code>-Weverything</code> with Clang), in addition to making warnings into errors via <code>-Werror</code> (which you probably shouldn't set by default when shipping code).</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Can we initialize and declare pointer variable like this </li>\n  </ol>\n</blockquote>\n\n<p>Pointer variables store addresses, and you need to declare an addressable something where you can store the value 5.</p>\n\n<p>Since C99, it's possible to use a compound literal instead of a named variable:</p>\n\n<pre><code>int *p = &amp;(int){ 5 };\n</code></pre>\n"}], "owner": {"reputation": 9978, "user_id": 2986537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff296a622eb6993b28017005d1f7e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Razib", "link": "https://stackoverflow.com/users/2986537/razib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "closed_date": 1427915331, "accepted_answer_id": 29398592, "answer_count": 6, "score": 2, "last_activity_date": 1427915800, "creation_date": 1427913554, "last_edit_date": 1427915800, "question_id": 29398329, "link": "https://stackoverflow.com/questions/29398329/understanding-the-warning-and-compilation-error-while-initializing-and-declaring", "closed_reason": "Duplicate", "title": "Understanding the Warning and Compilation Error while Initializing and Declaring Pointer Variable", "body": "<p>Please look at the following code snippet -  </p>\n\n<pre><code>int main(){\n\n   int  *i_ptr = 5;\n   printf(\"%d\", *i_ptr); \n\n   return 0;\n}\n</code></pre>\n\n<p>Here I am trying to declare and initialize a pointer variable <code>i_ptr</code>. It gives me the following warning while it compiles fine -  </p>\n\n<blockquote>\n  <p>warning: initialization makes pointer from integer without a cast\n  [enabled by default]</p>\n</blockquote>\n\n<p>But when I am going to execute the code it gives me the following error -  </p>\n\n<blockquote>\n  <p>Segmentation fault (core dumped)  </p>\n</blockquote>\n\n<p>I know a correct way to do this - </p>\n\n<pre><code>int n = 5;\nint *ptr = &amp;n;  \n</code></pre>\n\n<p>Now I have some questions - </p>\n\n<p><strong>1.</strong> While the first code fails at execution time why it doesn't give compilation error, instead of warning?</p>\n\n<p><strong>2.</strong> Can we initialize and declare pointer variable like  this - </p>\n\n<pre><code>int n = 5 // both declaration and initialization of int type variable n  \n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1427913378, "post_id": 29398267, "comment_id": 46972458, "body": "Which element do you want to access?"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1427913415, "creation_date": 1427913415, "answer_id": 29398289, "question_id": 29398267, "link": "https://stackoverflow.com/questions/29398267/c-what-symbol-to-access-arrays/29398289#29398289", "title": "C what % symbol to access arrays?", "body": "<p>You are accessing the first row of the array which will be converted to type <code>int *</code> that's the reason of your compiler's message.</p>\n\n<p>If you want to print the whole row you can try with</p>\n\n<pre><code>int i;\nfor (i = 0 ; i &lt; 4 ; ++i)\n    printf(\"%d \", matrix1[0][i]);\n    /*                       ^ another index to specify an integer from the array */\nprintf(\"\\n\");\n</code></pre>\n\n<p>If you just want the first row and first column of the array try</p>\n\n<pre><code>printf(\"%d\\n\", matrix1[0][0]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": false, "score": 1, "last_activity_date": 1427913495, "creation_date": 1427913495, "answer_id": 29398309, "question_id": 29398267, "link": "https://stackoverflow.com/questions/29398267/c-what-symbol-to-access-arrays/29398309#29398309", "title": "C what % symbol to access arrays?", "body": "<blockquote>\n  <p>I assume it's saying there's a particular format for arrays</p>\n</blockquote>\n\n<p>It's saying you are trying to use <code>%i</code>, which is for printing a single integer. There is no format to print an array directly, you have to provide your own glue around the <code>%i</code> format.</p>\n\n<p>In other words, to print a row, you have to use something like:</p>\n\n<pre><code>printf (\"%i %i %i %i\", matrix1[0][0], matrix1[0][1], matrix1[0][2], matrix1[0][3]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1427913937, "last_edit_date": 1495541577, "creation_date": 1427913937, "answer_id": 29398441, "question_id": 29398267, "link": "https://stackoverflow.com/questions/29398267/c-what-symbol-to-access-arrays/29398441#29398441", "title": "C what % symbol to access arrays?", "body": "<blockquote>\n  <p>what symbol do I use to access them if not <code>%i</code>?</p>\n</blockquote>\n\n<p>There is no format specifier in the <code>printf</code> family of functions to print an array. The format specifiers only support writing primitive data types - <code>char</code>, <code>int</code>, etc. The full list can be found using <code>man printf</code>, at <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/io/fprintf</a>, and many other resources on the web.</p>\n\n<p>To write all the elements from an array, you'll need to iterate over the items using a loop and write each element one by one, such as the code in <a href=\"https://stackoverflow.com/a/29398289/434551\">@iharob's answer</a>.</p>\n"}], "owner": {"reputation": 536, "user_id": 4253848, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/100001877465512/picture?type=large", "display_name": "Frank Tocci", "link": "https://stackoverflow.com/users/4253848/frank-tocci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 29398289, "answer_count": 3, "score": 0, "last_activity_date": 1427913937, "creation_date": 1427913345, "question_id": 29398267, "link": "https://stackoverflow.com/questions/29398267/c-what-symbol-to-access-arrays", "title": "C what % symbol to access arrays?", "body": "<p>I'm trying to access an a single row of a multidimensional array. However, I keep getting the following error message:\nformat specifies type 'int' but the argument has type 'int *'.\nI assume it's saying there's a particular format for arrays; what symbol do I use to access them if not %i?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n\n    int matrix1[5][4] =\n        {{1,2,3,4},\n        {5,6,7,8},\n        {9,10,11,12},\n        {13,14,15,16},\n        {17,18,19,20}};\n\n    printf (\"%i\",matrix1[0]);\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "struct", "scanf"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427913114, "post_id": 29398073, "comment_id": 46972313, "body": "Did you try running the code inside a debugger?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 3, "creation_date": 1427913249, "post_id": 29398073, "comment_id": 46972395, "body": "<code>fflush(stdin);</code> is <b>Undefined Behavior</b>. Always. Also, do not use <code>gets</code> it is no longer part of the C standard due to being horribly insecure. Use <code>fgets</code> instead."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1427913321, "post_id": 29398073, "comment_id": 46972433, "body": "<code>f = fopen(&quot;studenti.txt&quot;, &quot;a&quot;);</code> but the file was already opened with <code>f</code> earlier. Don&#39;t do that: use <code>fseek()</code> to position the file pointer before listing and before appending."}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427913382, "post_id": 29398073, "comment_id": 46972462, "body": "If I don&#39;t use &#39;fflush(stdin):&#39; it jumps from &#39;Nume&#39; to &#39;Varsta&#39; without letting me typing the name."}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427913423, "post_id": 29398073, "comment_id": 46972490, "body": "<code>case &#39;S&#39;</code> that is where I close my file."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427913543, "post_id": 29398073, "comment_id": 46972568, "body": "You have a mix of styles due to trying to keep the file open. For each function: open, operate, close."}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427913698, "post_id": 29398073, "comment_id": 46972668, "body": "The file is closed after the first function <code>fclose(f)</code>. I am only using one function at a time."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427913748, "post_id": 29398073, "comment_id": 46972701, "body": "You have destroyed the previous file with the first <code>fopen(&quot;studenti.txt&quot;, &quot;w&quot;);</code> so for each function: open, operate, close."}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427913962, "post_id": 29398073, "comment_id": 46972813, "body": "I did not destroyed anything, writing works great, appending works great, just listing does not work great. My file contains everything I need, just I can&#39;t print it on the screen."}], "answers": [{"tags": [], "owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "is_accepted": false, "score": 0, "last_activity_date": 1427914240, "creation_date": 1427914240, "answer_id": 29398519, "question_id": 29398073, "link": "https://stackoverflow.com/questions/29398073/how-to-print-values-from-file-after-appending/29398519#29398519", "title": "how to print values from file after appending", "body": "<p>I edited my main, so everything should be clear to see now.</p>\n\n<pre><code>int main()\n{\n    FILE *f;\n    struct student studenti[20];\n    int n;\n    char optiune;\n\n     printf(\"Introduceti numarul de studenti: \"); scanf(\"%d\", &amp;n);\n\n    f=fopen(\"studenti.txt\", \"w\");\n    if(f==NULL){\n        printf(\"Nu s-a putut deschide/crea fisierul pentru scriere.\\n\");\n        exit(1);\n    }\n    citire_date(studenti, f, n);\n    fclose(f);\n\n    printf(\"\\n\");\n\n    do{\n        printf(\"A. Adaugarea unui nou student in fisier.\\n\");\n        printf(\"L. Listarea datelor tuturor studentilor.\\n\");\n        printf(\"M. Modificarea datelor unui student.\\n\");\n        printf(\"C. Cautarea unui student dupa nume.\\n\");\n        printf(\"X. Terminarea programului.\\n\");\n        printf(\"Introduceti optiunea: \"); fflush(stdin); optiune=toupper(getchar());\n        printf(\"\\n\");\n\n\n        switch(optiune){\n            case 'A':\n                f = fopen(\"studenti.txt\", \"a\");\n                if(f==NULL ){\n                    printf(\"Nu s-a putut deschide fisierul pentru adaugare.\\n\");\n                    exit(2);\n                }\n                append(studenti, f);\n                fclose(f);\n                break;\n            case 'L':\n                afisare_date(studenti, n);\n                break;\n            case 'M':\n                break;\n            case 'C':\n                break;\n            case 'X':\n                break;\n            default:\n                printf(\"\\nAti introdus o optiune eronata!\\n\");\n                break;\n\n        }\n    }while(optiune!='X');\n\n\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Any suggestions now ? </p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427914799, "post_id": 29398575, "comment_id": 46973286, "body": "@OlarAndrei added to my answer because the <code>append()</code> function overwrites the first array element."}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427915118, "post_id": 29398575, "comment_id": 46973484, "body": "Ok, I added 2 students, then appended one more, so there should be 3, but when I&#39;m printing it just prints me the first 2, the one appended won&#39;t get printed on the screen."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427915472, "post_id": 29398575, "comment_id": 46973669, "body": "Look after the total number of students."}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427915838, "post_id": 29398575, "comment_id": 46973861, "body": "Well, I still don&#39;t get how :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427915928, "post_id": 29398575, "comment_id": 46973900, "body": "Keep a variable <code>int totalstudents</code>. When you add a record, increment it. When you print the list, use it. But don&#39;t use the identifier <code>n</code>. Only use such a short identifier in a very local and obvious situation, because <code>n</code> has no meaning implied."}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427916917, "post_id": 29398575, "comment_id": 46974443, "body": "Ok, I&#39;ve managed to print everything all right. I have one more question, how can I search for a specific name in the file, and once I found it to modify something(name, age or grade), ?"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1427914747, "last_edit_date": 1427914747, "creation_date": 1427914417, "answer_id": 29398575, "question_id": 29398073, "link": "https://stackoverflow.com/questions/29398073/how-to-print-values-from-file-after-appending/29398575#29398575", "title": "how to print values from file after appending", "body": "<p>In <code>append()</code> the loop </p>\n\n<pre><code>for(i=0;i&lt;1;i++) {\n    ...\n    gets((studenti+i)-&gt;nume);\n</code></pre>\n\n<p>writes to <code>studenti[0]</code></p>\n\n<p>It appends to the file but not to the array. The function needs to know (and return) the number of students you already have.</p>\n\n<pre><code>int append(struct student *studenti, FILE *f, int studs){\n    int i;\n\n    printf(\"Nume: \"); fflush(stdin); gets((studenti+studs)-&gt;nume);\n    printf(\"Varsta: \"); scanf(\"%d\", &amp;((studenti+studs)-&gt;varsta));\n    printf(\"Medie: \"); scanf(\"%f\", &amp;((studenti+studs)-&gt;medie));\n    fprintf(f, \"Nume: %s\\n\", (studenti+studs)-&gt;nume);\n    fprintf(f, \"Varsta: %d\\n\", (studenti+studs)-&gt;varsta);\n    fprintf(f, \"Medie: %.2f\\n\", (studenti+studs)-&gt;medie);\n    fprintf(f, \"\\n\");\n    return studs + 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427917175, "post_id": 29399287, "comment_id": 46974575, "body": "Thank you very much. I have managed to do this in another way, but i&#39;ll also do it this way.  I have one more question, how can I search for a specific name in the file, and once I found it to modify something(name, age or grade), ?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427917403, "post_id": 29399287, "comment_id": 46974685, "body": "You will use either a <code>while</code> or <code>for</code> loop to iterate <code>i</code> through each student and <code>if (strcmp ((studenti+i)-&gt;nume), SearchName) == 0) strncpy ((studenti+i)-&gt;nume, NewName, strlen(NewName));</code> That&#39;s probably the easy way."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1427917526, "post_id": 29399287, "comment_id": 46974767, "body": "I&#39;ve got to run. Just drop me a comment with any more questions and I&#39;ll get to them in a bit."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427916891, "creation_date": 1427916891, "answer_id": 29399287, "question_id": 29398073, "link": "https://stackoverflow.com/questions/29398073/how-to-print-values-from-file-after-appending/29399287#29399287", "title": "how to print values from file after appending", "body": "<p>Your code was not far off. The primary issue was your handling of input, and in appending students. First a few critical issues:</p>\n\n<p><code>fflush(stdin)</code> is <strong>Undefined Behavior</strong> and is always wrong. Never use <code>gets</code> it is no longer part of libc and unsecure.</p>\n\n<p>You can handle input of single strings with <code>scanf</code> fairly well with the format string <code>\"%[^\\n]%*c\"</code>. This will consume the trailing <code>newline</code> and empty <code>stdin</code>. (it isn't foolproof, but it works for most purposes). It also provides a way for you to check the return for an empty-string (e.g. <code>[Enter]</code> alone) and terminate input (see below). For reading numbers (e.g. <code>int</code>, <code>float</code>, ...) you are responsible for emptying <code>stdin</code> before calling <code>scanf</code> again. I created a simple <code>flush_stdin()</code> function to do this for you below.</p>\n\n<p>Lastly, <code>append</code> needs to take the current student count and increment that within the function. Passing a pointer to <code>n</code> is the easiest way to approach this. It also allows you to read multiple students in <code>append</code> and simply hit <code>[Enter]</code> on the blank line for <code>(studenti + *n)-&gt;nume)</code> to terminate input. (you should also <code>#define MAXSTUDENTS 20</code> (your current, or whatever you need) so that you can check you don't exceed the number of students when appending. (e.g. <code>if (*n == MAXSTUDENTS)</code> and take proper action)</p>\n\n<p>Below is an updated version of your code that works closer to the way your intended. Look over the code and let me know if you have questions.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid flush_stdin () \n{\n    int c = 0;\n    while ((c = getchar()) != '\\n' &amp;&amp; c != EOF);\n}\n\nstruct student{\n    char nume[20];\n    int varsta;\n    float medie;\n};\n\nvoid citire_date(struct student *studenti, FILE *f, size_t n)\n{\n    int i = 0;  /* always initialize ALL variables */\n\n    for(i=0;i&lt;n;i++){\n        printf(\"Introduceti datele studentului %d\\n\", i+1);\n        printf(\"  Nume: \"); scanf ( \"%[^\\n]%*c\", (studenti+i)-&gt;nume);\n        printf(\"  Varsta: \"); scanf(\"%d\", &amp;((studenti+i)-&gt;varsta));\n    flush_stdin ();\n        printf(\"  Medie: \"); scanf(\"%f\", &amp;((studenti+i)-&gt;medie));\n    flush_stdin ();\n        fprintf(f, \"Nume: %s\\n\", (studenti+i)-&gt;nume);\n        fprintf(f, \"Varsta: %d\\n\", (studenti+i)-&gt;varsta);\n        fprintf(f, \"Medie: %.2f\\n\", (studenti+i)-&gt;medie);\n        fprintf(f, \"\\n\");\n    }\n}\n\nvoid afisare_date(struct student *studenti, size_t n)\n{\n    int i = 0;\n//     char nume1 = 0;     /* what are these for? */\n//     int varsta1 = 0;\n//     float medie1 = 0.0;\n\n    for(i=0;i&lt;n;i++)\n    {\n        printf(\"Nume: %s\\n\", (studenti+i)-&gt;nume);\n        printf(\"Varsta: %d\\n\", (studenti+i)-&gt;varsta);\n        printf(\"Medie: %.2f\\n\", (studenti+i)-&gt;medie);\n        printf(\"\\n\");\n    }\n}\n\nvoid append(struct student *studenti, FILE *f, size_t *n)\n{\n    int i = 0;\n\n    while (1)\n    {\n        printf (\"\\nEnter student information ([Enter] when done)\\n\\n\");\n        printf(\"  Nume: \"); \n        if (!scanf ( \"%[^\\n]%*c\", (studenti + *n)-&gt;nume))\n        {\n            flush_stdin ();\n            break;\n        }\n        printf(\"  Varsta: \"); scanf(\"%d\", &amp;((studenti + *n)-&gt;varsta));\n        if ((studenti+i)-&gt;varsta == '\\n')\n            break;\n    flush_stdin ();\n        printf(\"  Medie: \"); scanf(\"%f\", &amp;((studenti + *n)-&gt;medie));\n        if ((studenti+i)-&gt;medie == '\\n')\n            break;\n    flush_stdin ();\n\n        fprintf(f, \"Nume: %s\\n\", (studenti + *n)-&gt;nume);\n        fprintf(f, \"Varsta: %d\\n\", (studenti + *n)-&gt;varsta);\n        fprintf(f, \"Medie: %.2f\\n\", (studenti + *n)-&gt;medie);\n        fprintf(f, \"\\n\");\n\n        (*n)++;  /* increment numbre of students */\n    }\n}\n\nint main()\n{\n    FILE *f = NULL;\n    struct student studenti[20];\n    size_t n = 0;\n    char optiune = 0;\n\n    f=fopen(\"studenti.txt\", \"w\");\n    if(f==NULL){\n        printf(\"Nu s-a putut deschide/crea fisierul pentru scriere.\\n\");\n        exit(1);\n    }\n\n    printf(\"\\n\");\n\n    do{\n        printf(\"S. Scriere fisier.\\n\");\n        printf(\"A. Adaugarea unui nou student in fisier.\\n\");\n        printf(\"L. Listarea datelor tuturor studentilor.\\n\");\n        printf(\"M. Modificarea datelor unui student.\\n\");\n        printf(\"C. Cautarea unui student dupa nume.\\n\");\n        printf(\"X. Terminarea programului.\\n\");\n        printf(\"Introduceti optiunea: \"); \n        optiune=toupper(getchar());\n        flush_stdin(); \n        printf(\"\\n\");\n\n\n        switch(optiune){\n            case 'S':\n                printf(\"Introduceti numarul de studenti: \"); scanf(\"%d\", &amp;n);\n            flush_stdin ();\n                citire_date(studenti, f, n);\n                fclose(f);\n                printf(\"\\n\");\n                break;\n            case 'A':\n                f = fopen(\"studenti.txt\", \"a\");\n                if(f==NULL ){\n                    printf(\"Nu s-a putut deschide fisierul pentru adaugare.\\n\");\n                    exit(2);\n                }\n                append(studenti, f, &amp;n);\n                fclose(f);\n                break;\n            case 'L':\n                afisare_date(studenti, n);\n                break;\n            case 'M':\n                break;\n            case 'C':\n                break;\n            case 'X':\n                break;\n            default:\n                printf(\"\\nAti introdus o optiune eronata!\\n\");\n                break;\n\n        }\n    }while(optiune!='X');\n\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/student_missing\n\nS. Scriere fisier.\nA. Adaugarea unui nou student in fisier.\nL. Listarea datelor tuturor studentilor.\nM. Modificarea datelor unui student.\nC. Cautarea unui student dupa nume.\nX. Terminarea programului.\nIntroduceti optiunea: s\n\nIntroduceti numarul de studenti: 1\nIntroduceti datele studentului 1\n  Nume: John Student\n  Varsta: 1\n  Medie: 91.2\n\nS. Scriere fisier.\nA. Adaugarea unui nou student in fisier.\nL. Listarea datelor tuturor studentilor.\nM. Modificarea datelor unui student.\nC. Cautarea unui student dupa nume.\nX. Terminarea programului.\nIntroduceti optiunea: l\n\nNume: John Student\nVarsta: 1\nMedie: 91.20\n\nS. Scriere fisier.\nA. Adaugarea unui nou student in fisier.\nL. Listarea datelor tuturor studentilor.\nM. Modificarea datelor unui student.\nC. Cautarea unui student dupa nume.\nX. Terminarea programului.\nIntroduceti optiunea: a\n\n\nEnter student information ([Enter] when done)\n\n  Nume: Jill Student\n  Varsta: 2\n  Medie: 94.3\n\nEnter student information ([Enter] when done)\n\n  Nume: Juan Student\n  Varsta: 3\n  Medie: 92.5\n\nEnter student information ([Enter] when done)\n\n  Nume:\nS. Scriere fisier.\nA. Adaugarea unui nou student in fisier.\nL. Listarea datelor tuturor studentilor.\nM. Modificarea datelor unui student.\nC. Cautarea unui student dupa nume.\nX. Terminarea programului.\nIntroduceti optiunea: l\n\nNume: John Student\nVarsta: 1\nMedie: 91.20\n\nNume: Jill Student\nVarsta: 2\nMedie: 94.30\n\nNume: Juan Student\nVarsta: 3\nMedie: 92.50\n\nS. Scriere fisier.\nA. Adaugarea unui nou student in fisier.\nL. Listarea datelor tuturor studentilor.\nM. Modificarea datelor unui student.\nC. Cautarea unui student dupa nume.\nX. Terminarea programului.\nIntroduceti optiunea: x\n</code></pre>\n"}], "owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1427916891, "creation_date": 1427912726, "question_id": 29398073, "link": "https://stackoverflow.com/questions/29398073/how-to-print-values-from-file-after-appending", "title": "how to print values from file after appending", "body": "<p>I have the following problem: I must must make a student file with name, age and grades. It works ok, but the problem is when printing everything on the screen. Let's say I read 3 students, when I type 'L' for printing the content on screen it works great. When I press 'A' to add another student to the file(append), the student will appear in my file(so we have a total of 4 students), but when I press 'L' to print again, it just prints 3 out of 4 students, including the appended one, but removes anther one. 'S' stands for write the file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nstruct student{\n    char nume[20];\n    int varsta;\n    float medie;\n};\n\nvoid citire_date(struct student *studenti, FILE *f, int n){\n    int i;\n\n    for(i=0;i&lt;n;i++){\n        printf(\"Introduceti datele studentului %d\\n\", i+1);\n        printf(\"Nume: \"); fflush(stdin); gets((studenti+i)-&gt;nume);\n        printf(\"Varsta: \"); scanf(\"%d\", &amp;((studenti+i)-&gt;varsta));\n        printf(\"Medie: \"); scanf(\"%f\", &amp;((studenti+i)-&gt;medie));\n        fprintf(f, \"Nume: %s\\n\", (studenti+i)-&gt;nume);\n        fprintf(f, \"Varsta: %d\\n\", (studenti+i)-&gt;varsta);\n        fprintf(f, \"Medie: %.2f\\n\", (studenti+i)-&gt;medie);\n        fprintf(f, \"\\n\");\n    }\n}\n\nvoid afisare_date(struct student *studenti, int n){\n    int i;\n    char nume1;\n    int varsta1;\n    float medie1;\n\n    for(i=0;i&lt;n;i++){\n       printf(\"Nume: %s\\n\", (studenti+i)-&gt;nume);\n        printf(\"Varsta: %d\\n\", (studenti+i)-&gt;varsta);\n        printf(\"Medie: %.2f\\n\", (studenti+i)-&gt;medie);\n        printf(\"\\n\");\n    }\n}\n\nvoid append(struct student *studenti, FILE *f){\n    int i;\n\n    for(i=0;i&lt;1;i++){\n        printf(\"Nume: \"); fflush(stdin); gets((studenti+i)-&gt;nume);\n        printf(\"Varsta: \"); scanf(\"%d\", &amp;((studenti+i)-&gt;varsta));\n        printf(\"Medie: \"); scanf(\"%f\", &amp;((studenti+i)-&gt;medie));\n        fprintf(f, \"Nume: %s\\n\", (studenti+i)-&gt;nume);\n        fprintf(f, \"Varsta: %d\\n\", (studenti+i)-&gt;varsta);\n        fprintf(f, \"Medie: %.2f\\n\", (studenti+i)-&gt;medie);\n        fprintf(f, \"\\n\");\n    }\n}\n\nint main()\n{\n    FILE *f;\n    struct student studenti[20];\n    int n;\n    char optiune;\n\n    f=fopen(\"studenti.txt\", \"w\");\n    if(f==NULL){\n        printf(\"Nu s-a putut deschide/crea fisierul pentru scriere.\\n\");\n        exit(1);\n    }\n\n    printf(\"\\n\");\n\n    do{\n        printf(\"S. Scriere fisier.\\n\");\n        printf(\"A. Adaugarea unui nou student in fisier.\\n\");\n        printf(\"L. Listarea datelor tuturor studentilor.\\n\");\n        printf(\"M. Modificarea datelor unui student.\\n\");\n        printf(\"C. Cautarea unui student dupa nume.\\n\");\n        printf(\"X. Terminarea programului.\\n\");\n        printf(\"Introduceti optiunea: \"); fflush(stdin); optiune=toupper(getchar());\n        printf(\"\\n\");\n\n\n        switch(optiune){\n            case 'S':\n                printf(\"Introduceti numarul de studenti: \"); scanf(\"%d\", &amp;n);\n                citire_date(studenti, f, n);\n                fclose(f);\n                printf(\"\\n\");\n                break;\n            case 'A':\n                f = fopen(\"studenti.txt\", \"a\");\n                if(f==NULL ){\n                    printf(\"Nu s-a putut deschide fisierul pentru adaugare.\\n\");\n                    exit(2);\n                }\n                append(studenti, f);\n                fclose(f);\n                break;\n            case 'L':\n                afisare_date(studenti, n);\n                break;\n            case 'M':\n                break;\n            case 'C':\n                break;\n            case 'X':\n                break;\n            default:\n                printf(\"\\nAti introdus o optiune eronata!\\n\");\n                break;\n\n        }\n    }while(optiune!='X');\n\n\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>I think I need to use fscanf, but I do not know how becasue it will read from file that \"Nume: name\" \"Varsta: 19\" and so on.\nThank you in advance.</p>\n"}, {"tags": ["c", "getline", "strcmp"], "comments": [{"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1427911695, "post_id": 29397719, "comment_id": 46971559, "body": "what BLUEPIXY mentioned, also, are you doing this on Windows (where newline is \\r\\n)?"}, {"owner": {"reputation": 811, "user_id": 4406558, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hRu3_v7-VLc/AAAAAAAAAAI/AAAAAAAAAAA/N5zpUylxl1g/photo.jpg?sz=128", "display_name": "Eric Hughes", "link": "https://stackoverflow.com/users/4406558/eric-hughes"}, "edited": false, "score": 1, "creation_date": 1427911704, "post_id": 29397719, "comment_id": 46971564, "body": "Does your file use <code>\\r\\n</code> endings?  Also, you&#39;re missing a parenthesis in your <code>if</code> expression, so this shouldn&#39;t compile..."}, {"owner": {"reputation": 811, "user_id": 4406558, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hRu3_v7-VLc/AAAAAAAAAAI/AAAAAAAAAAA/N5zpUylxl1g/photo.jpg?sz=128", "display_name": "Eric Hughes", "link": "https://stackoverflow.com/users/4406558/eric-hughes"}, "edited": false, "score": 0, "creation_date": 1427911774, "post_id": 29397719, "comment_id": 46971605, "body": "@iharob because he wants to jump out if he finds the line, rather than processing the rest of the file, presumably"}, {"owner": {"reputation": 12989, "user_id": 2994596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YU9Zw.png?s=128&g=1", "display_name": "SleuthEye", "link": "https://stackoverflow.com/users/2994596/sleutheye"}, "edited": false, "score": 1, "creation_date": 1427912022, "post_id": 29397719, "comment_id": 46971773, "body": "what is <code>stream</code>? if it is <code>FILE* stream;</code> then the arguments to <code>getline</code>/<code>feof</code> shouldn&#39;t be <code>*stream</code>, but only <code>stream</code>."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1427912099, "post_id": 29397719, "comment_id": 46971821, "body": "Please post real code this one wouldn&#39;t even compile."}, {"owner": {"reputation": 37, "user_id": 4573775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7f3a38932babdc4c959c20a2f5aedd?s=128&d=identicon&r=PG&f=1", "display_name": "stuntpenguin007", "link": "https://stackoverflow.com/users/4573775/stuntpenguin007"}, "edited": false, "score": 0, "creation_date": 1427912377, "post_id": 29397719, "comment_id": 46971955, "body": "Thanks Eric!  I needed to include the \\r"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1427924380, "post_id": 29397959, "comment_id": 46978286, "body": "Good to see code checking <code>getline()</code> result and testing <code>read &gt; 0</code> in while loop, 2 things often missed. +1"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1427925025, "post_id": 29397959, "comment_id": 46978522, "body": "Too many <code>valgrind</code> <b>invalid read of size 1</b> errors not to check for <code>read &gt; 0</code>. See, even a blind squirrel can find a nut every once in a while <code>:p</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428008840, "post_id": 29397959, "comment_id": 47016459, "body": "&#39;read&#39; is the name of a system function.   Should not use system function names for variable names."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428009014, "post_id": 29397959, "comment_id": 47016548, "body": "regarding this line: &#39;if(strcmp(input, &quot;section1\\n&quot;) == 0)&#39;  the code can ignore line endings considerations by using: &#39;if(strncmp(input, &quot;section1&quot;, sizeof &quot;section1&quot;) == 0)&#39;"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1428025572, "post_id": 29397959, "comment_id": 47021532, "body": "That will not work. You must subtract <code>1</code> from <code>sizeof literal</code>, otherwise you are including the <code>null-terminating</code> character in the count. With <code>-1</code> it is a great improvement - along with your catch of <code>read</code>. Fixing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1428029782, "post_id": 29397959, "comment_id": 47022352, "body": "The trouble with using <code>strncmp()</code> is that this will identify <code>section10</code> and <code>section100</code> etc as being <code>section1</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1428029972, "post_id": 29397959, "comment_id": 47022389, "body": "Not limited to <code>8</code> characters it won&#39;t <code>:p</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1428030101, "post_id": 29397959, "comment_id": 47022411, "body": "Oh Oh I see what you are saying. You are correct -- re-fixing <code>:(</code>"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1428030143, "last_edit_date": 1428030143, "creation_date": 1427912332, "answer_id": 29397959, "question_id": 29397719, "link": "https://stackoverflow.com/questions/29397719/c-getline-and-strcmp-issue/29397959#29397959", "title": "C - getline() and strcmp() issue", "body": "<p>Your use of <code>feof</code> is not needed in this situation. You are using <code>getline</code> and <code>strcmp</code> to test the line. Use the return from <code>getline</code> to test whether to continue reading. A correct implementation would be similar to:  </p>\n\n<pre><code>while (getline(&amp;input, &amp;len, *stream) != -1)\n{\n    if(strcmp (input, \"section1\\n\") == 0)\n    {\n        printf(\"End of section\\n\");\n        found = 1;\n        break;  /* if you want to terminate read when found=1 */\n    }\n}\n</code></pre>\n\n<p>To eliminate the problem with dangling <code>newlines</code> at the end of each line read, simply remove them. <code>getline</code> makes this quite simple as it returns the number of characters actually read -- eliminating the need to call <code>strlen</code>. Simply capture the return of <code>getline</code> in a variable, and remove the <code>newline</code> (or both <code>carriage return</code> &amp; <code>newline</code> if using DOS line ends) as follows:</p>\n\n<pre><code>ssize_t nchr = 0;   /* number of characters actually read */\n\nwhile ((nchr = getline (&amp;input, &amp;len, *stream)) != -1)\n{\n    /* strip trailing '\\n' or '\\r' */\n    while (nchr &gt; 0 &amp;&amp; (input[nchr-1] == '\\n' || input[nchr-1] == '\\r'))\n        input[--nchr] = 0;\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1428029703, "post_id": 29398099, "comment_id": 47022338, "body": "Since <code>getline()</code> returns the number of characters in the line it read, you can speed up the removal of the newline by capturing the return value."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1428033039, "post_id": 29398099, "comment_id": 47022895, "body": "@Jonathan Leffler True about the speed up using various code and <code>len</code>.  Though typically  the speed-up pales to the time spent in <code>getline()</code> itself.  <a href=\"http://codereview.stackexchange.com/a/67756\">Trimming fgets(): strlen() or strtok()</a>"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1427912935, "last_edit_date": 1427912935, "creation_date": 1427912790, "answer_id": 29398099, "question_id": 29397719, "link": "https://stackoverflow.com/questions/29397719/c-getline-and-strcmp-issue/29398099#29398099", "title": "C - getline() and strcmp() issue", "body": "<p>Remove potential end-of-line character(s), then compare.</p>\n\n<pre><code>getline(&amp;input, &amp;len, *stream);\ninput[strcspn(input, \"\\r\\n\")] = 0;\nif(strcmp(input, \"section1\") == 0)\n{\n    printf(\"End of section\\n\");\n    found = 1;\n}\n</code></pre>\n\n<p>Notes: With <code>getline()</code>, the buffer is null-terminated and includes the newline character, if one was found.  Wise to check the return value from <code>getline()</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 4573775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7f3a38932babdc4c959c20a2f5aedd?s=128&d=identicon&r=PG&f=1", "display_name": "stuntpenguin007", "link": "https://stackoverflow.com/users/4573775/stuntpenguin007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1619, "favorite_count": 1, "accepted_answer_id": 29398099, "answer_count": 2, "score": 1, "last_activity_date": 1428030143, "creation_date": 1427911501, "last_edit_date": 1427912570, "question_id": 29397719, "link": "https://stackoverflow.com/questions/29397719/c-getline-and-strcmp-issue", "title": "C - getline() and strcmp() issue", "body": "<p>I am having an issue where I can not find a specific word in a file with strcmp() when using getline.</p>\n\n<p>My file looks something like this:</p>\n\n<pre><code>Word1\nWord2\nWord3\nsection1\nWord4\n</code></pre>\n\n<p>This is the code I have right now:</p>\n\n<pre><code>while(found == 0)\n{\n    getline(&amp;input, &amp;len, *stream);\n    if (feof(*stream))\n        break;\n\n    if(strcmp(input, \"section1\\n\") == 0)\n    {\n        printf(\"End of section\\n\");\n        found = 1;\n    }\n}\n</code></pre>\n\n<p>strcmp() never returns 0 though.  Any insight would be greatly appreciated!</p>\n\n<p>Made an edit to the code.  I transferred it incorrectly.</p>\n\n<p>Solution from the comments:\nI need to add \\r to the string being compared</p>\n\n<pre><code>if(strcmp(input, \"section1\\r\\n\") == 0)\n</code></pre>\n"}, {"tags": ["c", "memory", "allocation"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1427911972, "post_id": 29397491, "comment_id": 46971751, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1722687/can-i-execute-any-c-made-prog-without-any-os-platform\">Can I execute any c made prog without any os platform?</a>"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1427913780, "post_id": 29397491, "comment_id": 46972720, "body": "Memory allocation for static and auto variables is a function of the compiler and linker, not the OS.  As for where a variable is stored, that depends on how and where it is declared."}], "answers": [{"tags": [], "owner": {"reputation": 513, "user_id": 2281169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32295eae5eb8ad18efd29bcb0f93aa01?s=128&d=identicon&r=PG", "display_name": "Emily", "link": "https://stackoverflow.com/users/2281169/emily"}, "is_accepted": true, "score": 0, "last_activity_date": 1427911206, "last_edit_date": 1427911206, "creation_date": 1427910877, "answer_id": 29397549, "question_id": 29397491, "link": "https://stackoverflow.com/questions/29397491/memory-allocation-of-variable/29397549#29397549", "title": "Memory allocation of variable", "body": "<p>It depends on where and how you declared it.</p>\n\n<p>If it's a global variable, or a static variable declared inside a function, the linker decides where to put it (typically in the .data or .bss section, for initialized or uninitialized data, respectively). Your executable loader (or, if you don't have an OS under it, your bootloader) would decide exactly where in RAM it finally goes.</p>\n\n<p>If it's a local variable, the compiler will put it on your call stack or in a register.</p>\n"}], "owner": {"reputation": 3, "user_id": 4725043, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y4C7MHOldRk/AAAAAAAAAAI/AAAAAAAAAqY/wdM7beUZXpw/photo.jpg?sz=128", "display_name": "Tushar Mehta", "link": "https://stackoverflow.com/users/4725043/tushar-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 29397549, "answer_count": 1, "score": -1, "last_activity_date": 1427928380, "creation_date": 1427910670, "question_id": 29397491, "link": "https://stackoverflow.com/questions/29397491/memory-allocation-of-variable", "title": "Memory allocation of variable", "body": "<p>Suppose i don't have an os and I write a c and compile a program to run on the computer without os. My program has a line int a = 0; My question is where is the variable a is stored and how does the program determine where to store the variable? </p>\n"}, {"tags": ["c", "fork", "parent-child"], "comments": [{"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 1, "creation_date": 1427911181, "post_id": 29397447, "comment_id": 46971295, "body": "You should use threading, either posix threads or windows own threading API. That way you can simply fork threads (create background child processes) and keep everything in the same executable. It&#39;s much simpler than having multiple programs."}, {"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "reply_to_user": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1427911494, "post_id": 29397447, "comment_id": 46971453, "body": "we are told we have to use the wait() function"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1427922508, "post_id": 29397447, "comment_id": 46977463, "body": "you can call wait() from within any forked thread"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428010055, "post_id": 29397447, "comment_id": 47016988, "body": "as I stated in another answer, this algorithm to determine if a number is prime fails for the number 4"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428010324, "post_id": 29397447, "comment_id": 47017119, "body": "regarding this code block: &#39;if (isPrime(number)) {  exit(1)  }  exit(0);&#39;  it would be much clearer and simpler to use: &#39;&#39; return( isPrime(number) );&quot;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428010668, "post_id": 29397447, "comment_id": 47017264, "body": "due to stdout buffering, the calls to printf() first parameter should end in &#39;\\n&#39; so the stdout buffer will be flushed in a timely manner"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428010798, "post_id": 29397447, "comment_id": 47017323, "body": "please read the man page for each system function being used, so coding errors, such as the &#39;wait()&#39; statement being passed a int rather than a pointer to an int can be avoided.  perform all compiles with all warnings enabled, so the compiler can inform you of problems that need correction"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427911484, "post_id": 29397580, "comment_id": 46971446, "body": "We are told we have to use the wait() function though"}], "tags": [], "owner": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "is_accepted": false, "score": 0, "last_activity_date": 1427910989, "creation_date": 1427910989, "answer_id": 29397580, "question_id": 29397447, "link": "https://stackoverflow.com/questions/29397447/retrieving-return-code-from-child-process-using-wait/29397580#29397580", "title": "Retrieving return code from child process using wait()?", "body": "<p>You don't need to explicitly use fork(), check the system() function (<a href=\"http://linux.die.net/man/3/system\" rel=\"nofollow\">http://linux.die.net/man/3/system</a>), which gives you nice and easy the return code of the other process.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427912204, "post_id": 29397686, "comment_id": 46971868, "body": "Does this get the the exit number or the return number? If it gets the exit number should I change the returns in &quot;prime.c&quot; to exit(0) instead of return 0 etc?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427912288, "post_id": 29397686, "comment_id": 46971908, "body": "@user3373360: Calling <code>exit(0)</code> somewhere is equivalent to <code>return 0</code> from <code>main()</code>."}, {"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427913405, "post_id": 29397686, "comment_id": 46972476, "body": "okay but now I am getting the child&#39;s exit code is 255. I want to be getting either 1 or 0 so I can detect if the number is prime or not?"}, {"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427914012, "post_id": 29397686, "comment_id": 46972844, "body": "I applied these changes but I am still getting that the exit code is 255. I feel like we&#39;re very close to the solution here though"}, {"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427919829, "post_id": 29397686, "comment_id": 46976039, "body": "okay now it&#39;s working but it says that execvp() failed: No such file or directory. So the way I am using it must be wrong?"}, {"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427920262, "post_id": 29397686, "comment_id": 46976277, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/74294/discussion-between-user3373360-and-alk\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 2, "last_activity_date": 1427915088, "last_edit_date": 1427915088, "creation_date": 1427911375, "answer_id": 29397686, "question_id": 29397447, "link": "https://stackoverflow.com/questions/29397447/retrieving-return-code-from-child-process-using-wait/29397686#29397686", "title": "Retrieving return code from child process using wait()?", "body": "<p>For starters, this</p>\n\n<pre><code>wait(childNum);\n</code></pre>\n\n<p>should have made the compiler issue a clear warning, from which you could have drawn that there is something wrong.</p>\n\n<p>And indeed you are using <code>wait()</code> wrongly. It expects a pointer:</p>\n\n<pre><code>wait(int * status);\n</code></pre>\n\n<p>Use it in the following way:</p>\n\n<pre><code>  {\n    int status;\n    int result;\n\n    do\n    {\n      result = 0;\n      if ((pid_t) -1) == wait(&amp;status)))\n      {\n        result = -1;\n        if (errno == EINTR)\n        {\n          continue;\n        }\n        else\n        {\n          perror(\"wait() failed\");\n        }\n      }\n\n      break;\n    } while (1);\n\n    if (-1 != result)\n    {\n      if (WIFEXITED(status))\n      {\n        int ec = WEXITSTATUS(status);\n        printf(\"The child's exit code is %d\\n\", ec);\n      }\n      else\n      {\n        printf(\"The child did not provide an exit code. It probably crashed?\\n\");\n      }\n    }\n  }\n</code></pre>\n\n<p>Details can be read in <a href=\"http://man7.org/linux/man-pages/man2/wait.2.html\" rel=\"nofollow\">the documentation</a>.</p>\n\n<hr>\n\n<p>Also this code somehow does not make sense:</p>\n\n<pre><code>        if (pid == 0) {\n            wait(childNum);\n            morph(argv[1]);\n        }\n</code></pre>\n\n<p>You are calling <code>wait()</code> from the child, and only after it returned you <code>exec*</code> <code>isPrime.exe</code>.</p>\n\n<p>You may want to do it like this</p>\n\n<pre><code>      pid = fork();\n      if (-1 == pid)\n      {\n         perror(\"fork() failed\");\n      }\n      else if (pid == 0) \n      {\n        morph(argv[1]);\n      }\n      else\n      {\n        /* wait code as shown above goes here.\n           childNum needs to get assigend. */\n        if (childNum == 0) {\n        ....\n      }\n</code></pre>\n\n<hr>\n\n<p>Also^2 the code does not test whether the call to <code>execvp()</code> succeeded.</p>\n\n<p>Put a <code>perror(\"execvp() failed\");</code> right after the it.</p>\n\n<hr>\n\n<p>Also^3 this</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1427915088, "creation_date": 1427910515, "question_id": 29397447, "link": "https://stackoverflow.com/questions/29397447/retrieving-return-code-from-child-process-using-wait", "title": "Retrieving return code from child process using wait()?", "body": "<p>I have 2 files \"prime.c\" and \"singlePrime.c\" and inside of singlePrime.c I am trying to create a child that morphs itself into \"isPrime.exe\" which is an executable made out of \"prime.c\". What I want to do is get the return number from isPrime.exe so either 1 or 0 depending on if the input number is prime or not and then store it in childNum inside of the main() function of \"singlePrime.c\" so that I can print to the terminal whether it's a prime number or not based on 1 or 0 that is returned from \"isPrime.exe\". Below are my 2 files:</p>\n\n<p>prime.c:</p>\n\n<pre><code>/*\nFile is isPrime.c\n\nPurpose:\na program that checks if a given number is a prime number\n\ninput:\nnumber - a positive int  entered via the command line parameters.  For example isPrime 1234\n\noutput:\n0 - if the input number is not a prime number\n1 - if the input number is a prime number\n2 - if the command line parameter is not correct\n\nAssumption:\nthe program does not check if the number is a positive integer\n\n*/\n\n\n#include \"stdio.h\"\n#include \"stdlib.h\"\n#include &lt;unistd.h&gt;\n#include \"prime.h\"\n\nint main(int argc, char *argv[])\n{\n        int i;\n\n        int number;\n\n        if (argc &lt; 2) {\n            printf(\"Returning 2\");\n            return(2);\n        }\n        else number = atoi(argv[1]);\n        if (isPrime(number)) {\n                exit(1);\n        }\n        exit(0);\n}\n\n\n/*\nPurpose: check if the input number is a prime number\ninput:\nnumber - the number to be checked\n\nreturn:\n0 - if the number is not a prime number\n1 - if the number is a prime number\n*/\nint isPrime(int number)\n{\n        int i;\n        for(i = 2; i*i &lt; number; i++) {\n                usleep(100);\n                if (number % i == 0) {\n                        printf(\"%d is not a prime number!\",number);\n                        return(0);\n                }\n        }\n        printf(\"%d is a prime number!\",number);\n        return(1);\n}\n</code></pre>\n\n<p>singlePrime.c:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include &lt;unistd.h&gt;\n#include \"prime.h\"\n\nint main(int argc, char *argv[])\n{\n        int number, childNum;\n\n        if (!atoi(argv[1])) {\n                printf(\"Please use a valid integer as an argument!\");\n                exit(1);\n        }\n\n        int pid = fork();\n\n        if (pid == 0) {\n                wait(childNum);\n                morph(argv[1]);\n        }\n\n        else {\n                if (childNum == 0) {\n                        printf(\"The input number is not a prime number!\");\n                        exit(1);\n                }\n                else if (childNum == 1) {\n                        printf(\"The input number is a prime number!\");\n                        exit(1);\n                }\n                else if (childNum == 2) {\n                        printf(\"Please input a number greater than 2!\");\n                        exit(1);\n                }\n        }\n}\n\nvoid morph(char *number)\n{\n        char *primeArgv[] = {\n                \"isPrime.exe\",\n                number,\n                NULL,\n        };\n\n        execvp(\"isPrime.exe\",primeArgv);               \n}\n</code></pre>\n"}, {"tags": ["javascript", "c", "pebble-sdk", "pebble-js"], "comments": [{"owner": {"reputation": 1210, "user_id": 4708865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SHNuz.jpg?s=128&g=1", "display_name": "Kenneth Salomon", "link": "https://stackoverflow.com/users/4708865/kenneth-salomon"}, "edited": false, "score": 0, "creation_date": 1438614541, "post_id": 29397378, "comment_id": 51509624, "body": "Have you analyzed the logs? I would be interested in seeing what we see there, it will help identify how the app is executing and if we see anything wrong, we can use it to debug. The whole thing seems a bit funny. I feel like if you took something that worked and modified it with something more specific to your needs, then it may do with what you added. It appears that the url you are using returns a proper JSON object, so it must be something else. I look forward to seeing what the log shows"}], "owner": {"reputation": 60, "user_id": 1577591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a30f801d038aa0a388611648ccc559a?s=128&d=identicon&r=PG", "display_name": "Crin", "link": "https://stackoverflow.com/users/1577591/crin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1427911369, "creation_date": 1427910237, "last_edit_date": 1427911369, "question_id": 29397378, "link": "https://stackoverflow.com/questions/29397378/disappearing-data-whats-going-on-pebble-newbie", "title": "Disappearing data, what&#39;s going on? Pebble newbie", "body": "<p>Brand new and naive to pebble SDK and C but lots of experience in other languages. Which means I'm probably going to be embarrassed when someone solves this for me very easily but... I have two files in a watchface project based on the tutorials... I'm pulling in different data but it all works just like the getting started tutorial up until the point that the code updates one of the text layers with... nothing. It's got me puzzled becuase the data it's supposed to be putting in there appears fine in the console log so it's definitely getting passed over. Anyways, here's the C</p>\n\n<pre><code>include \n#define KEY_MONTHMILES 0\n#define KEY_MONTHELEVATION 1\n#define KEY_TOTALMILES 2\n#define KEY_TOTALELEVATION 3\n\nstatic Window *s_main_window;\nstatic TextLayer *s_time_layer;\nstatic BitmapLayer *s_background_layer;\nstatic GBitmap *s_background_bitmap;\nstatic TextLayer *s_weather_layer;\n\nstatic void update_time() {\n    // Get a tm structure\n    time_t temp = time(NULL); \n    struct tm *tick_time = localtime(&amp;temp);\n\n    // Create a long-lived buffer\n    static char buffer[] = \"00:00\";\n\n    // Write the current hours and minutes into the buffer\n    if(clock_is_24h_style() == true) {\n        // Use 24 hour format\n        strftime(buffer, sizeof(\"00:00\"), \"%H:%M\", tick_time);\n    } else {\n        // Use 12 hour format\n        strftime(buffer, sizeof(\"00:00\"), \"%I:%M\", tick_time);\n    }\n\n    // Display this time on the TextLayer\n    text_layer_set_text(s_time_layer, buffer);\n}\n\nstatic void tick_handler(struct tm *tick_time, TimeUnits units_changed) {\n    update_time();\n}\n\nstatic void inbox_received_callback(DictionaryIterator *iterator, void *context) {\n    // Store incoming information\n    static char monthlyMiles_buffer[128];\n    static char monthlyElevation_buffer[128];\n    static char yearlyMiles_buffer[128];\n    static char yearlyElevation_buffer[128];\n\n    // Read first item\n    Tuple *t = dict_read_first(iterator);\n\n    // For all items\n    while(t != NULL) {\n        // Which key was received?\n        switch(t-&gt;key) {\n            case KEY_MONTHMILES:\n                snprintf(monthlyMiles_buffer, sizeof(monthlyMiles_buffer), \"%d\", (int)t-&gt;value-&gt;int32);\n                break;\n            case KEY_MONTHELEVATION:\n                snprintf(monthlyElevation_buffer, sizeof(monthlyElevation_buffer), \"%d\", (int)t-&gt;value-&gt;int32);\n                break;\n            case KEY_TOTALMILES:\n                snprintf(yearlyMiles_buffer, sizeof(yearlyMiles_buffer), \"%d\", (int)t-&gt;value-&gt;int32);\n                break;\n            case KEY_TOTALELEVATION:\n                snprintf(yearlyElevation_buffer, sizeof(yearlyElevation_buffer), \"%d\", (int)t-&gt;value-&gt;int32);\n                break;\n            default:\n                APP_LOG(APP_LOG_LEVEL_ERROR, \"Key %d not recognized!\", (int)t-&gt;key);\n                break;\n        }\n\n        // Look for next item\n        t = dict_read_next(iterator);\n    }\n    text_layer_set_text(s_weather_layer, monthlyMiles_buffer);\n}\n\nstatic void inbox_dropped_callback(AppMessageResult reason, void *context) {\n    APP_LOG(APP_LOG_LEVEL_ERROR, \"Message dropped!\");\n}\n\nstatic void outbox_failed_callback(DictionaryIterator *iterator, AppMessageResult reason, void *context) {\n    APP_LOG(APP_LOG_LEVEL_ERROR, \"Outbox send failed!\");\n}\n\nstatic void outbox_sent_callback(DictionaryIterator *iterator, void *context) {\n    APP_LOG(APP_LOG_LEVEL_INFO, \"Outbox send success!\");\n}\n\nstatic void main_window_load(Window *window) {\n    // Create GBitmap, then set to created BitmapLayer\n    s_background_bitmap = gbitmap_create_with_resource(RESOURCE_ID_BG_IMAGE);\n    s_background_layer = bitmap_layer_create(GRect(0, 0, 144, 168));\n    bitmap_layer_set_bitmap(s_background_layer, s_background_bitmap);\n    layer_add_child(window_get_root_layer(window), bitmap_layer_get_layer(s_background_layer)); \n\n    // Create time TextLayer\n    s_time_layer = text_layer_create(GRect(0, 60, 144, 50));\n    text_layer_set_background_color(s_time_layer, GColorClear);\n    text_layer_set_text_color(s_time_layer, GColorWhite);\n    layer_add_child(window_get_root_layer(window), text_layer_get_layer(s_time_layer));\n\n    // Improve the layout to be more like a watchface\n    text_layer_set_font(s_time_layer, fonts_get_system_font(FONT_KEY_BITHAM_42_BOLD));\n    text_layer_set_text_alignment(s_time_layer, GTextAlignmentCenter);\n\n    // Make sure the time is displayed from the start\n    update_time();\n\n    // Create temperature Layer\n    s_weather_layer = text_layer_create(GRect(0, 130, 144, 25));\n    text_layer_set_background_color(s_weather_layer, GColorClear);\n    text_layer_set_text_color(s_weather_layer, GColorWhite);\n    text_layer_set_text_alignment(s_weather_layer, GTextAlignmentCenter);\n    text_layer_set_text(s_weather_layer, \"Loading...\");\n    text_layer_set_font(s_weather_layer, fonts_get_system_font(FONT_KEY_GOTHIC_14));\n    layer_add_child(window_get_root_layer(window), text_layer_get_layer(s_weather_layer));\n}\n\nstatic void main_window_unload(Window *window) {\n    // Destroy TextLayer\n    text_layer_destroy(s_time_layer);\n\n    // Destroy GBitmap\n    gbitmap_destroy(s_background_bitmap);\n\n    // Destroy BitmapLayer\n    bitmap_layer_destroy(s_background_layer);\n\n    // Destroy weather elements\n    text_layer_destroy(s_weather_layer);\n}\n\nstatic void init() {\n    // Create main Window element and assign to pointer\n    s_main_window = window_create();\n\n    // Set handlers to manage the elements inside the Window\n    window_set_window_handlers(s_main_window, (WindowHandlers) {\n        .load = main_window_load,\n        .unload = main_window_unload\n    });\n\n    // Show the Window on the watch, with animated=true\n    window_stack_push(s_main_window, true);\n\n    // Register with TickTimerService\n    tick_timer_service_subscribe(MINUTE_UNIT, tick_handler);\n\n    // Register callbacks\n    app_message_register_inbox_received(inbox_received_callback);\n    app_message_register_inbox_dropped(inbox_dropped_callback);\n    app_message_register_outbox_failed(outbox_failed_callback);\n    app_message_register_outbox_sent(outbox_sent_callback);\n\n    // Open AppMessage\n    app_message_open(app_message_inbox_size_maximum(), app_message_outbox_size_maximum());\n}\n\nstatic void deinit() {\n    // Destroy Window\n    window_destroy(s_main_window);\n}\n\nint main(void) {\n    init();\n    app_event_loop();\n    deinit();\n}\n</code></pre>\n\n<p>and here's the Javascript</p>\n\n<pre><code>var xhrRequest = function (url, type, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function () {\n        callback(this.responseText);\n    };\n    xhr.open(type, url);\n    xhr.send();\n};\n\nfunction getStats() {\n    // Construct URL\n    var url = \"http://crin.co.uk/stravaWatchface/getStats.php\";\n\n    // Send request to crin.co.uk\n    xhrRequest(url, 'GET', \n    function(responseText) {\n        // responseText contains a JSON object with stat info\n        var json = JSON.parse(responseText);\n\n        // Monthly miles\n        var monthMiles = json.mM;\n        console.log(\"Monthly total miles is: \" + monthMiles);\n\n        // Monthly Elevation\n        var monthElevation = json.mE; \n        console.log(\"Monthly total elevation gain is: \" + monthElevation);\n\n        // Total Miles\n        var totalMiles = json.tM; \n        console.log(\"All-time total miles is: \" + totalMiles);\n\n        // Total Elevation\n        var totalElevation = json.tE; \n        console.log(\"All-time total elevation gain is: \" + totalElevation);\n\n        // Assemble dictionary using our keys\n        var dictionary = {\n            \"KEY_MONTHMILES\": monthMiles,\n            \"KEY_MONTHELEVATION\": monthElevation,\n            \"KEY_TOTALMILES\": totalMiles,\n            \"KEY_TOTALELEVATION\": totalElevation\n        };\n\n        // Send to Pebble\n        Pebble.sendAppMessage(dictionary,\n        function(e) {\n            console.log(\"Stats info sent to Pebble successfully!\");\n        },\n        function(e) {\n            console.log(\"Error sending stats info to Pebble!\");\n        }\n        );\n    } \n    );\n}\n\n// Listen for when the watchface is opened\nPebble.addEventListener('ready', \nfunction(e) {\n    console.log(\"PebbleKit JS ready!\");\n\n    // Get the initial weather\n    getStats();\n}\n);\n\n// Listen for when an AppMessage is received\nPebble.addEventListener('appmessage',\nfunction(e) {\n    console.log(\"AppMessage received!\");\n    getStats();\n} \n);\n</code></pre>\n\n<p>Anyone spot anything obvious? It compiles and installs fine, but this line...</p>\n\n<pre><code>text_layer_set_text(s_weather_layer, monthlyMiles_buffer);\n</code></pre>\n\n<p>Is updating the watchface with blank space and not the value it should.</p>\n\n<p>Please help I've lost an afternoon to this.</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "linux-device-driver", "embedded-linux"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1428076953, "post_id": 29397364, "comment_id": 47040269, "body": "There&#39;s some confusion about just what you&#39;re asking. A sample function declaration, showing whether you&#39;re passing an <code>int</code> or a pointer to <code>int</code>, would be helpful. The two answers posted so far are based on two different interpretations of your question."}], "answers": [{"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1427965009, "post_id": 29397566, "comment_id": 46991335, "body": "I disagree with you.  suppose a pointer in user space is not page aligned and you have to assemble both parts of the pointer to get it complete?  The only thing you receive from the user already as a parameter to the call is the user pointer, but if it points to another user pointer, that pointer must be acquired with user_copy.  In 64bit environments, a user pointer is 8 bytes wide, and can be split in a page boundary, so you&#39;ll need to acces the virtual page tables to translate it from user space to kernel.  Also, user space pages can be swapped out, so be careful with this also."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1427995033, "post_id": 29397566, "comment_id": 47009325, "body": "When you say the pointer is not page aligned, do you mean that the pointer object itself is misaligned, or the data it points to? Pointers are scalars and are always passed by value. If a system call has, say, a <code>void*</code> parameter, the kernel function that handles the system call receives a <i>copy</i> of the pointer; the alignment of the pointer object on the caller side is irrelevant."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428076614, "post_id": 29397566, "comment_id": 47040119, "body": "For pointers of simple data types (like <code>int*</code>), <code>put_user</code> and <code>get_user</code> may also be used."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428076784, "post_id": 29397566, "comment_id": 47040195, "body": "@holgac: Yes -- for the object pointed to by a pointer parameter, not for the pointer itself.it"}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 7, "last_activity_date": 1427910949, "creation_date": 1427910949, "answer_id": 29397566, "question_id": 29397364, "link": "https://stackoverflow.com/questions/29397364/copy-to-user-and-copy-from-user-for-basic-data-type/29397566#29397566", "title": "copy_to_user() and copy_from_user() for basic data type", "body": "<p>If the function receives a <em>pointer</em> to user-space data, you have to use <code>copy_from_user()</code> to copy the pointed-to data from user space into kernel space (and vice versa).</p>\n\n<p>Note that the pointer value itself is passed by value (like all C parameters), so you don't have to do a <code>copy_from_user()</code> to obtain the pointer value before you can <code>copy_from_user()</code> the data it points to.</p>\n\n<p>Numeric arguments work the same way as pointer arguments; in C terms, they're both scalars. You don't have to use <code>copy_from_user()</code> to copy the value of the parameter; that's already been copied. You only have to use it to copy data that's pointed to by a passed pointer.</p>\n\n<p>So if you have a parameter of type <code>int</code>, you can use it directly. If your parameter points to an <code>int</code>, then the <code>int</code> object will be in user space, and you need to use <code>copy_to_user</code> to copy the value of that object into kernel space.</p>\n"}, {"comments": [{"owner": {"reputation": 2342, "user_id": 1327774, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e48cbff424b5ffa260198af7284103e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Leinweber", "link": "https://stackoverflow.com/users/1327774/benjamin-leinweber"}, "edited": false, "score": 0, "creation_date": 1427984160, "post_id": 29409073, "comment_id": 47002720, "body": "Luis: I think you have mis-interpreted the OP. All the OP is trying to do is pass a single value of a basic data type. The OP is really asking if it is possible to pass a basic data by value instead of by reference. As @Keith was pointing out, normally a pointer is passed in, and this pointer IS passed by value so it may be accessed directly. However if you want to dereference the user pointer, you must use the copy_from_user() or get_user() function when in the kernel."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 2342, "user_id": 1327774, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e48cbff424b5ffa260198af7284103e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Leinweber", "link": "https://stackoverflow.com/users/1327774/benjamin-leinweber"}, "edited": false, "score": 0, "creation_date": 1428423759, "post_id": 29409073, "comment_id": 47151554, "body": "Sorry, but as he says:  <i>if I am just copying a basic data type such as a u32 or an int</i>  meaning copying, so I supposed the int is passed by reference (to return some value, for example)  Of course that if he is passing a value only to the kernel (but not back to user space) he can do like this.  I am not thinking on ioctl&#39;s that is where this makes sense. Suppose he is trying to <code>int a; write(fc, &amp;a, sizeof a);</code>..."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 2342, "user_id": 1327774, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e48cbff424b5ffa260198af7284103e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Leinweber", "link": "https://stackoverflow.com/users/1327774/benjamin-leinweber"}, "edited": false, "score": 0, "creation_date": 1428423857, "post_id": 29409073, "comment_id": 47151608, "body": "Of course you can <b>use</b> the pointer passed to kernel space in a <b>write(2)</b> as data, but not much sense on making a driver like this.  He says <i>...and for every function...</i>"}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 2, "last_activity_date": 1427965587, "creation_date": 1427965587, "answer_id": 29409073, "question_id": 29397364, "link": "https://stackoverflow.com/questions/29397364/copy-to-user-and-copy-from-user-for-basic-data-type/29409073#29409073", "title": "copy_to_user() and copy_from_user() for basic data type", "body": "<p>When a user passes data to kernel space, this data can be split on several pages, and these pages can be even in <em>swapped out memory</em>.  In these cases, you'll have to wait for the kernel to swap in the page and get access to the page where the data is in.  In the case of elementary data types (like int or pointers) it is also true that some architectures (notably x86 intel) don't force the user to align the data so even an integer can be split around a page border.  You can have access to the first part of you integer, but to wait for the second to get swapped in by the memory manager before the whole thing is accessed.</p>\n\n<p>You can save some roundtrips by putting all user data in a structure whose pointer is passed to the kernel.  You can copy_from_user it as a block and save accesses (and running into the risk of being blocked several times)</p>\n\n<p>So, and as a conclusion, <strong>use the functions even for basic types</strong>, as there are plenty of them.  Don't assume anything about where the user data can be when running in kernel mode.  You have access to it, but the kernel virtual addresses of user data have nothing to do with the virtual addresses seen in user mode.</p>\n"}, {"tags": [], "owner": {"reputation": 593, "user_id": 9070016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2UBsC.jpg?s=128&g=1", "display_name": "therealak12", "link": "https://stackoverflow.com/users/9070016/therealak12"}, "is_accepted": false, "score": 0, "last_activity_date": 1588179507, "creation_date": 1588179507, "answer_id": 61507302, "question_id": 29397364, "link": "https://stackoverflow.com/questions/29397364/copy-to-user-and-copy-from-user-for-basic-data-type/61507302#61507302", "title": "copy_to_user() and copy_from_user() for basic data type", "body": "<p>This is how I do it (works but I'm not sure if this is the right way):\nFirst make an array of that datatype, then fill the array with the data, then pass the reference to that array, for example to pass only an integer:</p>\n\n<pre><code>    int *from_user = (int *)kmalloc(sizeof(int), GFP_KERNEL);\n    if (copy_from_user(from_user, buff, count))\n        return -EFAULT;\n    printk(KERN_INFO \"The value copied from user =   %d\", *from_user);\n    return sizeof(buff);\n</code></pre>\n\n<p>And the code for user space:</p>\n\n<pre><code>    int to_be_passed[1];\n    to_be_passed[0] = 4; // 4 is just an example\n    int fd = open(DEVICE_NAME, O_RDWR);\n    write(fd, to_be_passed, sizeof(to_be_passed));\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 1747719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc8169b9bd8bdb97703f8849da09ea0?s=128&d=identicon&r=PG", "display_name": "user1747719", "link": "https://stackoverflow.com/users/1747719/user1747719"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4026, "favorite_count": 1, "accepted_answer_id": 29397566, "answer_count": 3, "score": 7, "last_activity_date": 1588179507, "creation_date": 1427910176, "question_id": 29397364, "link": "https://stackoverflow.com/questions/29397364/copy-to-user-and-copy-from-user-for-basic-data-type", "title": "copy_to_user() and copy_from_user() for basic data type", "body": "<p>I'm writing a linux kernel driver and for every function that sends data up to userspace or reads data from userspace, I am using copy_to_user() and copy_from_user(). My question is: do I need to use these calls if I am just copying a basic data type such as a u32 or an int?</p>\n"}, {"tags": ["c", "linux", "process", "fork"], "comments": [{"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 0, "creation_date": 1427910032, "post_id": 29397258, "comment_id": 46970651, "body": "Where is the 256 coming from, is it in this printf?"}, {"owner": {"reputation": 183, "user_id": 2971971, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1438575722/picture?type=large", "display_name": "user2971971", "link": "https://stackoverflow.com/users/2971971/user2971971"}, "reply_to_user": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 0, "creation_date": 1427910237, "post_id": 29397258, "comment_id": 46970773, "body": "It does not come from the code sequence given here, it comes from the printf in the solution given in the link. Should I post that code as well?"}, {"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 0, "creation_date": 1427910449, "post_id": 29397258, "comment_id": 46970875, "body": "I haven&#39;t looked at the code, but I know that <code>fork</code> returns -1 when it fails, which might be leading to that 256."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1427930337, "post_id": 29397258, "comment_id": 46980457, "body": "What do you have against pipes?"}], "answers": [{"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 0, "last_activity_date": 1427912071, "last_edit_date": 1427912071, "creation_date": 1427911749, "answer_id": 29397797, "question_id": 29397258, "link": "https://stackoverflow.com/questions/29397258/count-number-of-processes-created-using-fork-in-a-for-loop/29397797#29397797", "title": "Count number of processes created using fork in a for loop", "body": "<p>Something may be limiting the program to 256 processes.  Check the return value of <code>fork()</code>, don't just assume it succeeds each time.</p>\n\n<p>What happens when you run <code>ulimit -u</code> on the command line?</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1427927078, "creation_date": 1427927078, "answer_id": 29401941, "question_id": 29397258, "link": "https://stackoverflow.com/questions/29397258/count-number-of-processes-created-using-fork-in-a-for-loop/29401941#29401941", "title": "Count number of processes created using fork in a for loop", "body": "<p>There is only one byte for the exit status of a process.  Therefore, you cannot count higher than 255 via process exit codes.  Furthermore, it is a quirk of the specific algorithm you tried that it happens to produce exactly the maximum possible exit status (to which the parent process adds <code>1</code> to get <code>256</code>).  The <code>exit()</code> function just uses the least significant 8 bits of its argument (and returning <code>x</code> from <code>main()</code> has the same effect as calling <code>exit(x)</code>).</p>\n\n<p>To count higher, you need a different approach.  You could establish a counter in shared memory, and have each child process increment it (with appropriate synchronization).  That runs cleanly, but shared memory is not trivial to work with.  You could also have each process append to a file to leave a record; the parent process could then read the file to count how many processes left such a record.</p>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 4677458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153168163145908/picture?type=large", "display_name": "Richard Conto", "link": "https://stackoverflow.com/users/4677458/richard-conto"}, "is_accepted": false, "score": 0, "last_activity_date": 1427933038, "creation_date": 1427933038, "answer_id": 29402947, "question_id": 29397258, "link": "https://stackoverflow.com/questions/29397258/count-number-of-processes-created-using-fork-in-a-for-loop/29402947#29402947", "title": "Count number of processes created using fork in a for loop", "body": "<p>I answered an awfully similar question posted on QUORA here: <a href=\"http://www.quora.com/For-I-0-I-3-I++-fork-how-can-I-make-an-algorithm-to-count-the-number-of-processes-and-display-it-only-once/answer/Richard-Conto\" rel=\"nofollow\">http://www.quora.com/For-I-0-I-3-I++-fork-how-can-I-make-an-algorithm-to-count-the-number-of-processes-and-display-it-only-once/answer/Richard-Conto</a></p>\n\n<p>By not checking the result of fork(), you're indicating that you haven't checked the documentation for this system call.  Please make some effort at understanding fork() first.</p>\n"}], "owner": {"reputation": 183, "user_id": 2971971, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1438575722/picture?type=large", "display_name": "user2971971", "link": "https://stackoverflow.com/users/2971971/user2971971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3184, "favorite_count": 0, "accepted_answer_id": 29401941, "answer_count": 3, "score": 1, "last_activity_date": 1427933038, "creation_date": 1427909803, "question_id": 29397258, "link": "https://stackoverflow.com/questions/29397258/count-number-of-processes-created-using-fork-in-a-for-loop", "title": "Count number of processes created using fork in a for loop", "body": "<p>I am trying to find a way to count the number of processes created in a for loop of length 10 with a fork() call. It is easy to see that the result is 2^n for n calls, but I need a way to compute it in the program.</p>\n\n<p>I have found an almost identical question in <a href=\"https://stackoverflow.com/questions/29244170/display-number-of-processes-in-loop-with-fork\">here</a>. However, when I tested the second solution given here, it works ok for a number of forks less than 10. For 10, it yelds 256. Why is that? And is there another solution to this problem? (apart from using pipes).\nHere is the actual code:</p>\n\n<pre><code>for(i=1; i&lt;=10; i++) {\n    fork();\n    printf(\"The process with the PID=%d\\n\", getpid());\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "netbeans"], "comments": [{"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 1, "creation_date": 1427920229, "post_id": 29397038, "comment_id": 46976257, "body": "<a href=\"http://stackoverflow.com/questions/6608569/can-cmake-and-netbeans-play-nice\" title=\"can cmake and netbeans play nice\">stackoverflow.com/questions/6608569/&hellip;</a>"}, {"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1427920346, "post_id": 29397038, "comment_id": 46976300, "body": "<a href=\"http://stackoverflow.com/questions/22765476/where-to-obtain-qmake-qt-compiler-for-netbeans\" title=\"where to obtain qmake qt compiler for netbeans\">stackoverflow.com/questions/22765476/&hellip;</a>"}, {"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 1, "creation_date": 1427920490, "post_id": 29397038, "comment_id": 46976380, "body": "As for other than cmake/qmake build tools - you always can call them from your makefile, provided that your project type is <code>C&#47;C++ Project with Existing Sources</code>"}], "answers": [{"tags": [], "owner": {"reputation": 22989, "user_id": 1622894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fc8ff4593f37f357f8e3985d9f16902?s=128&d=identicon&r=PG&f=1", "display_name": "ollo", "link": "https://stackoverflow.com/users/1622894/ollo"}, "is_accepted": true, "score": 2, "last_activity_date": 1429045674, "last_edit_date": 1495542494, "creation_date": 1429045674, "answer_id": 29637430, "question_id": 29397038, "link": "https://stackoverflow.com/questions/29397038/what-default-make-tool-does-netbeans-use/29637430#29637430", "title": "What default make tool does NetBeans use", "body": "<blockquote>\n  <p>What default make tool does NetBeans use</p>\n</blockquote>\n\n<p>It uses <code>make</code> per default. Default C/C++ project types generate Makefiles for you. You can use custom Makefiles instead too - and even other build tools (like CMake, QMake, ...).</p>\n\n<blockquote>\n  <p>I'v searched a little but there is little information on what tool supports this file or if it is a NetBeans internal tool.</p>\n</blockquote>\n\n<p>The <em>configurations.xml</em> is NetBeans internal only.</p>\n\n<p>Btw. modify this file only, if you are sure what you are doing - it has the capability to break your project!</p>\n\n<blockquote>\n  <p>How could i call it from the command line etc.</p>\n</blockquote>\n\n<p>You mean the configurations.xml? If so; you can't. As said above, it's for NB internal usage only. However it's not necessary though. Netbeans will provide you all Makefiles you need. Those can be build using <code>make</code> the usual way.</p>\n\n<blockquote>\n  <p>Does anyone have experience with it?</p>\n</blockquote>\n\n<p>If the generated Makefiles don't serve your purpose you can either customize it (check comments within the files) - or write a custom one and create a project from it.</p>\n\n<p>As commented by <em>Hekto</em>, <a href=\"http://www.cmake.org/\" rel=\"nofollow noreferrer\">CMake</a> is an alternative build tool that <a href=\"https://stackoverflow.com/questions/6608569/can-cmake-and-netbeans-play-nice\">works great with NetBeans</a>. It's also widely used for C/C++ project and has lot's of benefits. Furthermore CMake-based projects can be used by other IDE's (like Eclipse or VisualStudio) easily - and if all fails just call it from terminal ;-).</p>\n"}], "owner": {"reputation": 1794, "user_id": 2474098, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/511dff23b9073611ae2728779f2b3c85?s=128&d=identicon&r=PG", "display_name": "alknows", "link": "https://stackoverflow.com/users/2474098/alknows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 29637430, "answer_count": 1, "score": 2, "last_activity_date": 1429045674, "creation_date": 1427909067, "question_id": 29397038, "link": "https://stackoverflow.com/questions/29397038/what-default-make-tool-does-netbeans-use", "title": "What default make tool does NetBeans use", "body": "<p>Iv been writing a small c program with <strong>NetBeans 8</strong>  on Linux. It uses this <strong>configuration.xml</strong> file to compile the Makefile together. I'v searched a little but there is little information on what tool supports this file or if it is a NetBeans internal tool. How could i call it from the command line etc.</p>\n\n<p>i was hoping it is some alternative build tool, but so far its no scons, waf, ninja, cmake, qmake</p>\n\n<p>Does anyone have experience with it?</p>\n\n<p>How it looks like:</p>\n\n<p><code>&lt;configurationDescriptor version=\"95\"&gt;\n  &lt;logicalFolder name=\"root\" displayName=\"root\" projectFiles=\"true\" kind=\"ROOT\"&gt;\n   &lt;logicalFolder name=\"HeaderFiles\" ...&gt;\n</code></p>\n"}, {"tags": ["c", "gcc", "linker", "msp430"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1427917974, "post_id": 29396811, "comment_id": 46975026, "body": "The lines with parentheses appear to come from the linker script."}, {"owner": {"reputation": 638, "user_id": 1934174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07eaff1d7dec2658b6356bea4d539ae8?s=128&d=identicon&r=PG", "display_name": "Chintalagiri Shashank", "link": "https://stackoverflow.com/users/1934174/chintalagiri-shashank"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1428065683, "post_id": 29396811, "comment_id": 47034627, "body": "Where they come from doesn&#39;t answer the question of how they are interpreted. It seems to be a reasonably standard approach - the GNU toolchains for both AVR and MSP430 produce lines like those in the Map file. There has to be some sort of standard interpretation!"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1428135036, "post_id": 29396811, "comment_id": 47055815, "body": "<a href=\"https://sourceware.org/binutils/docs/ld/Scripts.html\" rel=\"nofollow noreferrer\">linker script documentation</a>"}], "owner": {"reputation": 638, "user_id": 1934174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07eaff1d7dec2658b6356bea4d539ae8?s=128&d=identicon&r=PG", "display_name": "Chintalagiri Shashank", "link": "https://stackoverflow.com/users/1934174/chintalagiri-shashank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1852, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1427908822, "creation_date": 1427908313, "last_edit_date": 1427908822, "question_id": 29396811, "link": "https://stackoverflow.com/questions/29396811/understanding-gcc-generated-map-files", "title": "Understanding GCC generated map files", "body": "<p>I'm trying to write a script that parses .map files generated by GCC and help me figure out what the footprints of various libraries are in memory. (<a href=\"https://github.com/chintal/fpv-gcc\" rel=\"nofollow\">Github repository of what I have so far</a>)</p>\n\n<p>I'm trying to understand what the following means / how it should be read : </p>\n\n<pre><code>.debug_line     0x00000000     0x67b1\n *(.debug_line .debug_line.* .debug_line_end)\n .debug_line    0x00000000      0x105 /opt/ti/gcc/bin/../lib/gcc/msp430-elf/4.9.1/../../../../msp430-elf/lib/crt0.o\n .debug_line    0x00000105      0x4b5 CMakeFiles/firmware-msp430f5529.elf.dir/main.c.obj\n .debug_line.text.bc_printf.constprop.1\n                0x000005ba       0x23 CMakeFiles/firmware-msp430f5529.elf.dir/main.c.obj\n .debug_line.text.deferred_exec\n                0x000005dd       0x60 CMakeFiles/firmware-msp430f5529.elf.dir/main.c.obj\n .debug_line.text.startup.main\n                0x0000063d       0xfc CMakeFiles/firmware-msp430f5529.elf.dir/main.c.obj\n .debug_line_end\n                0x00000739        0x0 CMakeFiles/firmware-msp430f5529.elf.dir/main.c.obj\n</code></pre>\n\n<p>I've been assuming the first line, which is not indented, is some sort of section heading and that the address (0x0000000) somehow relates to where the contents of the section should be written. 0x00000000 somehow results in the contents being discarded.</p>\n\n<p>The indented lines (those which start with .debug_line) also have an address. These addresses, when the symbol is going to be written to the binary, are absolute. </p>\n\n<pre><code>.text           0x000048d8     0x3312\n                0x000048d8                . = ALIGN (0x2)\n *(.lower.text.* .lower.text)\n                0x000048d8                . = ALIGN (0x2)\n *(.text .stub .text.* .gnu.linkonce.t.* .text:*)\n .text          0x000048d8       0xa4 /opt/ti/gcc/bin/../lib/gcc/msp430-elf/4.9.1/crtbegin.o\n .text.bc_printf.constprop.1\n                0x0000497c       0x1a CMakeFiles/firmware-msp430f5529.elf.dir/main.c.obj\n</code></pre>\n\n<p>How does the address in the section heading, or whatever the first line should be called, translate to the address in the actual symbols and so forth? i.e., How would 0x00000000 result in the symbols being discarded (even though the addresses they contain may indeed be valid writeable locations otherwise)</p>\n\n<p>What does the indented line beginning with a *, i.e. <code>*(.debug_line .debug_line.* .debug_line_end)</code> mean? I'm fairly certain this line is critical to defining the treatment of the second last line in the first snippet, since .debug_line_end isn't defined all by itself in a way similar to how .debug_line is in the first line of the snippet. I can't seem to find any references to the structure of the file, though.</p>\n\n<p>With those answers, I'd like to be able to understand how <code>.eh_frame</code> in the following snippet is resolved. I can post the full map file if it's necessary, but I suspect all the information needed is somehow encoded within the snippet, and at that within the top and bottom few lines only.</p>\n\n<pre><code>.rodata         0x00004400      0x464\n                0x00004400                . = ALIGN (0x2)\n *(.plt)\n                0x00004400                . = ALIGN (0x2)\n *(.lower.rodata.* .lower.rodata)\n                0x00004400                . = ALIGN (0x2)\n *(.rodata .rodata.* .gnu.linkonce.r.* .const .const:*)\n .rodata        0x00004400       0x11 CMakeFiles/firmware-msp430f5529.elf.dir/main.c.obj\n *fill*         0x00004411        0x1\n .rodata.tUsbRequestList\n                0x00004412      0x15c ../peripherals/USB_config/libusb-config-msp430f5529.a(descriptors.c.obj)\n                0x00004412                tUsbRequestList\n .rodata.stUsbHandle\n                0x0000456e       0x40 ../peripherals/USB_config/libusb-config-msp430f5529.a(descriptors.c.obj)\n                0x0000456e                stUsbHandle\n .rodata.report_desc_HID0\n                0x000045ae       0x24 ../peripherals/USB_config/libusb-config-msp430f5529.a(descriptors.c.obj)\n                0x000045ae                report_desc_HID0\n .rodata.abromStringDescriptor\n                0x000045d2      0x146 ../peripherals/USB_config/libusb-config-msp430f5529.a(descriptors.c.obj)\n                0x000045d2                abromStringDescriptor\n .rodata.abromConfigurationDescriptorGroup\n                0x00004718       0xef ../peripherals/USB_config/libusb-config-msp430f5529.a(descriptors.c.obj)\n                0x00004718                abromConfigurationDescriptorGroup\n .rodata.abromDeviceDescriptor\n                0x00004807       0x12 ../peripherals/USB_config/libusb-config-msp430f5529.a(descriptors.c.obj)\n                0x00004807                abromDeviceDescriptor\n *fill*         0x00004819        0x1\n .rodata.report_desc_size\n                0x0000481a        0x2 ../peripherals/USB_config/libusb-config-msp430f5529.a(descriptors.c.obj)\n                0x0000481a                report_desc_size\n .rodata        0x0000481c       0x11 ../subsystem/libcontrol-iface-msp430f5529.a(control_iface.c.obj)\n *fill*         0x0000482d        0x1\n .rodata.GPIO_PORT_TO_BASE\n                0x0000482e       0x1c ../peripherals/driverlib/MSP430F5xx_6xx/libdriverlib-msp430f5529.a(gpio.c.obj)\n .rodata        0x0000484a        0x7 ../lib/libprintf-msp430f5529.a(printf.c.obj)\n *(.rodata1)\n *(.eh_frame_hdr)\n *(.eh_frame)\n *fill*         0x00004851        0x3\n .eh_frame      0x00004854        0x0 /opt/ti/gcc/bin/../lib/gcc/msp430-elf/4.9.1/crtbegin.o\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427908808, "post_id": 29396796, "comment_id": 46970013, "body": "Arrays and strings <a href=\"http://c.learncodethehardway.org/book/ex9.html\" rel=\"nofollow noreferrer\">c.learncodethehardway.org/book/ex9.html</a>  Pointers Dreaded Pointers <a href=\"http://c.learncodethehardway.org/book/ex15.html\" rel=\"nofollow noreferrer\">c.learncodethehardway.org/book/ex15.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 1, "creation_date": 1427909157, "post_id": 29396969, "comment_id": 46970197, "body": "A minor thing - string literals aren&#39;t const in C. It&#39;s undefined behaviour to try to change them, of course."}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "reply_to_user": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 0, "creation_date": 1427909294, "post_id": 29396969, "comment_id": 46970260, "body": "@teppic Thanks - not const as in <code>const char*</code> sure; I meant <code>char* const</code> in C++ terms I think."}, {"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 1, "creation_date": 1427909354, "post_id": 29396969, "comment_id": 46970297, "body": "In C it&#39;s just a plain old <code>char *</code> :) (well, technically it&#39;s probably <code>char []</code>)"}], "tags": [], "owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "is_accepted": false, "score": 2, "last_activity_date": 1427908850, "creation_date": 1427908850, "answer_id": 29396969, "question_id": 29396796, "link": "https://stackoverflow.com/questions/29396796/why-cant-we-assign-int-x-12-or-int-x-12-when-we-can-assign-char-x-hello/29396969#29396969", "title": "Why can&#39;t we assign int* x=12 or int* x= &quot;12&quot; when we can assign char* x= &quot;hello&quot;?", "body": "<p>Because the literal \"hello\" evaluates to a pointer to constant memory initialised with the string \"hello\" (and a nul terminator), i.e. the value you get is of <code>char*</code> type.</p>\n\n<p>If you want a pointer to number 12 then you'll need to store the value 12 somewhere, e.g. in another int, and then take a pointer to that:</p>\n\n<pre><code>int x_value = 12;\nint* x = &amp;x_value;\n</code></pre>\n\n<p>However in this case you're putting the 12 on the stack, and so that pointer will become invalid once you leave this function.</p>\n\n<p>You can at a pinch abuse that mechanism to make yourself a pointer to 12; depending on endianness that would probably be</p>\n\n<pre><code>int* x = (int*)(\"\\x0c\\x00\\x00\");\n</code></pre>\n\n<p>Note that this is making assumptions about your host's endianness and size of <code>int</code>, and that you would not be able to modify that 12 either (but you can change <code>x</code> to point to something else), so this is a bad idea in general.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 2, "last_activity_date": 1427908904, "creation_date": 1427908904, "answer_id": 29396982, "question_id": 29396796, "link": "https://stackoverflow.com/questions/29396796/why-cant-we-assign-int-x-12-or-int-x-12-when-we-can-assign-char-x-hello/29396982#29396982", "title": "Why can&#39;t we assign int* x=12 or int* x= &quot;12&quot; when we can assign char* x= &quot;hello&quot;?", "body": "<p>Because the compiler creates a static (constant) string \"hello\" and lets x point to that, where it doesn't create a static (constant) int.</p>\n"}, {"comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 2, "creation_date": 1427909133, "post_id": 29397005, "comment_id": 46970181, "body": "+1, but beware that by casting the result of your malloc you&#39;re invoking the wrath of the C-tag regulars. (Not that I mind.)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1427909871, "post_id": 29397005, "comment_id": 46970556, "body": "Better: <code>int *x = malloc(sizeof *x);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "edited": false, "score": 0, "creation_date": 1427910440, "post_id": 29397005, "comment_id": 46970872, "body": "Oh, thank you guys, just found out what is up, but here is my source: <a href=\"http://www.cplusplus.com/reference/cstdlib/malloc/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/malloc</a> So they are wrong?"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1427911210, "post_id": 29397005, "comment_id": 46971313, "body": "@GRC cplusplus.com is mostly for c++, not for c - this is one example of the difference between them; <a href=\"http://stackoverflow.com/q/11972076/509868\">some say</a> it&#39;s no good even for c++..."}, {"owner": {"reputation": 3008, "user_id": 2209329, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e62709eac24c8a174c5f876e1cb63b39?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Szyd\u0142owski", "link": "https://stackoverflow.com/users/2209329/micha%c5%82-szyd%c5%82owski"}, "edited": false, "score": 1, "creation_date": 1427920650, "post_id": 29397005, "comment_id": 46976459, "body": "<code>malloc</code> returns pointer to <code>void</code> anyway, so there is no need to explicitly cast it. The compiler will do that anyway for any assignable value. It&#39;s not exactly wrong, but unnecessary."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1427922320, "post_id": 29397005, "comment_id": 46977387, "body": "@GRC: C++ does not allow implicit conversions from <code>void *</code> to other pointer types, so in C++ you would have to cast the result of <code>malloc</code>.  Then again, if you&#39;re writing C++, you shouldn&#39;t be using <code>malloc</code> in the first place (use <code>new</code> instead, and only if one of the standard container types doesn&#39;t meet your needs)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1427925196, "post_id": 29397005, "comment_id": 46978602, "body": "@JohnBode you are right, I know about new in C++ and that is what confuses hell out of me sometimes :(. People cast pointers all the time in C code :(, plus cplusplus.com is not only place where in K&amp;R which is bible of C they used it all over read chapter 6.6 and you will see."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1427925751, "post_id": 29397005, "comment_id": 46978842, "body": "@GRC: I understand.  Prior to the 1989 standard, <code>malloc</code> returned <code>char *</code>, so a cast <i>was</i> necessary if you wanted to assign the result to a different pointer type.  Old habits die hard, and older programmers who started with K&amp;R C retained the practice even though it wasn&#39;t necessary.  They also wrote a lot of reference manuals, so the practice has been passed on.  In the 21st century, though, the rules should be &quot;don&#39;t cast the result of <code>malloc</code>&quot; in C and &quot;don&#39;t use <code>malloc</code>&quot; in C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1427926272, "post_id": 29397005, "comment_id": 46979024, "body": "@JohnBode thank you for explaining, I hope that I did not offend you."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "is_accepted": false, "score": 1, "last_activity_date": 1427926297, "last_edit_date": 1427926297, "creation_date": 1427908984, "answer_id": 29397005, "question_id": 29396796, "link": "https://stackoverflow.com/questions/29396796/why-cant-we-assign-int-x-12-or-int-x-12-when-we-can-assign-char-x-hello/29397005#29397005", "title": "Why can&#39;t we assign int* x=12 or int* x= &quot;12&quot; when we can assign char* x= &quot;hello&quot;?", "body": "<p>Here is how it is done properly:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n   int *x;\n   x = malloc(sizeof(int));\n   *x = 8;\n\n   printf(\"%d \\n\", *x);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 1, "last_activity_date": 1427909647, "creation_date": 1427909647, "answer_id": 29397212, "question_id": 29396796, "link": "https://stackoverflow.com/questions/29396796/why-cant-we-assign-int-x-12-or-int-x-12-when-we-can-assign-char-x-hello/29397212#29397212", "title": "Why can&#39;t we assign int* x=12 or int* x= &quot;12&quot; when we can assign char* x= &quot;hello&quot;?", "body": "<p>A string literal creates an array <em>object</em>. This object has static storage duration (meaning it exists for the entire execution of the program), and is initialized with the characters in the string literal.</p>\n\n<p>The value of a string literal is the value of the array. In most contexts, there is an implicit conversion from <code>char[N]</code> to <code>char*</code>, so you get a pointer to the initial (0th) element of the array. So this:</p>\n\n<pre><code>char *s = \"hello\";\n</code></pre>\n\n<p>initializes <code>s</code> to point to the initial <code>'h'</code> in the implicitly created array object. A pointer can only point to an <em>object</em>; it does not point to a <em>value</em>. (Incidentally, that really should be <code>const char *s</code>, so you don't accidentally attempt to modify the string.)</p>\n\n<p>String literals are a special case. An integer literal does not create an object; it merely yields a value. This:</p>\n\n<pre><code>int *ptr = 42; // INVALID\n</code></pre>\n\n<p>is invalid, because there is no implicit conversion of <code>42</code> from <code>int*</code> to <code>int</code>. This:</p>\n\n<pre><code>int *ptr = &amp;42; // INVALID\n</code></pre>\n\n<p>is also invalid, because the <code>&amp;</code> (address-of) operator can only be applied to an object (an \"lvalue\"), and there is no object for it to apply to.</p>\n\n<p>There are several ways around this; which one you should use depends on what you're trying to do. You can allocate an object:</p>\n\n<pre><code>int *ptr = malloc(sizeof *ptr); // allocation an int object\nif (ptr == NULL) { /* handle the error */ }\n</code></pre>\n\n<p>but a heap allocation can always fail, and you need to deallocate it when you're finished with it to avoid a memory leak. You can just declare an object:</p>\n\n<pre><code>int obj = 42;\nint *ptr = &amp;obj;\n</code></pre>\n\n<p>You just have to be careful with the object's lifetime. If <code>obj</code> is a local variable, you can end up with a dangling pointer.  Or, in C99 and later, you can use a <em>compound literal</em>:</p>\n\n<pre><code>int *ptr = &amp;(int){42};\n</code></pre>\n\n<p><code>(int){42}</code> is a compound literal, which is similar in some ways to a string literal. In particular, it <em>does</em> create an object, and you can take that object's address.</p>\n\n<p>But unlike with string literals, the <em>lifetime</em> of the (anonymous) object created by a compound literal depends on the context in which it appears. If it's inside a function definition, the lifetime is <em>automatic</em>, meaning that it ceases to exist when you leave the block containing it -- just like an ordinary local variable.</p>\n\n<p>That answers the question in your title. The body of your question:</p>\n\n<blockquote>\n  <p>What is the correct way to use <code>int* x</code>?</p>\n</blockquote>\n\n<p>is much more general, and it's not a question we can answer here. There are a multitude of ways to use pointers correctly -- and even more ways to use them incorrectly. Get a good book or tutorial on C and read the section that discusses pointers. Unfortunately there are also a lot of <em>bad</em> books and tutorials. Question 18.10 of the <a href=\"http://www.c-faq.com/\" rel=\"nofollow\">comp.lang.c FAQ</a> is a good starting point. (Bad tutorials can often be identified by the casual use of <code>void main()</code>, and by the false assertion that arrays are really pointers.)</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1427910133, "creation_date": 1427910133, "answer_id": 29397350, "question_id": 29396796, "link": "https://stackoverflow.com/questions/29396796/why-cant-we-assign-int-x-12-or-int-x-12-when-we-can-assign-char-x-hello/29397350#29397350", "title": "Why can&#39;t we assign int* x=12 or int* x= &quot;12&quot; when we can assign char* x= &quot;hello&quot;?", "body": "<p>Q1. Why can't we assign <code>int *x=12</code>? You <em>can</em> provided that <code>12</code> is a valid memory address which holds an <code>int</code>. But with a modern OS specifying a hard memory address is completely wrong (perhaps except embedded code). The usage is typically like this</p>\n\n<pre><code>int y = 42;             // simple var\nint *x = &amp;y;            // address-of: x is pointer to y\n*x = 12;                // write a new value to y\n</code></pre>\n\n<p>This <em>looks</em> the same as what you asked, but it is not, because your original declaration assigns the value <code>12</code> to <code>x</code> the pointer itself, not to <code>*x</code> its target.</p>\n\n<p>Q2. Why can't we assign <code>int *x = \"12\"</code>? Because you are trying to assign an incompatible type - a <code>char</code> pointer to <code>int</code> pointer. <code>\"12\"</code> is a <em>string literal</em> which is accessed via a pointer.</p>\n\n<p>Q3. But we can assign <code>char* x= \"hello\"</code></p>\n\n<p>Putting Q1 and Q2 together, <code>\"hello\"</code> generates a pointer which is assigned to the correct type <code>char*</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 4739218, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ey_mhm_o4i4/AAAAAAAAAAI/AAAAAAAAALQ/HgHKJu6kUr0/photo.jpg?sz=128", "display_name": "user4739218", "link": "https://stackoverflow.com/users/4739218/user4739218"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 29397212, "answer_count": 5, "score": -2, "last_activity_date": 1427926297, "creation_date": 1427908268, "last_edit_date": 1427909664, "question_id": 29396796, "link": "https://stackoverflow.com/questions/29396796/why-cant-we-assign-int-x-12-or-int-x-12-when-we-can-assign-char-x-hello", "title": "Why can&#39;t we assign int* x=12 or int* x= &quot;12&quot; when we can assign char* x= &quot;hello&quot;?", "body": "<p>What is the correct way to use <code>int* x</code>? \nMention any related link if possible as I was unable to find one.</p>\n"}, {"tags": ["c", "arrays", "struct", "malloc", "free"], "comments": [{"owner": {"reputation": 7641, "user_id": 4282370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0WI7C.jpg?s=128&g=1", "display_name": "Amnon Shochot", "link": "https://stackoverflow.com/users/4282370/amnon-shochot"}, "edited": false, "score": 2, "creation_date": 1427908162, "post_id": 29396693, "comment_id": 46969709, "body": "Have you tried <code>free((*queue)-&gt;arr)</code>?"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1427908232, "post_id": 29396693, "comment_id": 46969744, "body": "What do you mean exactly? you are posting a compiler error and then you talk about valgrind? How, if you haven&#39;t got an executable? Btw. if should be <code>free( (*queue)-&gt;arr );</code>"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1427908390, "post_id": 29396693, "comment_id": 46969810, "body": "Actually, I was thinking you were a dereference short:  free(*(**queue)-&gt;arr);"}, {"owner": {"reputation": 13, "user_id": 4739180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/976c54e37e50b55121e7faad3ea1f2ae?s=128&d=identicon&r=PG&f=1", "display_name": "Aether", "link": "https://stackoverflow.com/users/4739180/aether"}, "edited": false, "score": 0, "creation_date": 1427908414, "post_id": 29396693, "comment_id": 46969822, "body": "I just tried free((*queue)-&gt;arr) now and it works. Thanks! I still fail to understand why though."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1427908599, "post_id": 29396693, "comment_id": 46969912, "body": "because <code>*queue-&gt;arr</code> is equal to <code>*(queue-&gt;arr)</code>. So if <code>queue</code> is <code>queue_t **</code> you can&#39;t use <code>-&gt;</code> on it but have do dereference it first; that&#39;s done by the bracketing"}, {"owner": {"reputation": 13, "user_id": 4739180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/976c54e37e50b55121e7faad3ea1f2ae?s=128&d=identicon&r=PG&f=1", "display_name": "Aether", "link": "https://stackoverflow.com/users/4739180/aether"}, "edited": false, "score": 0, "creation_date": 1427908763, "post_id": 29396693, "comment_id": 46969990, "body": "That makes a lot of sense. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 7641, "user_id": 4282370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0WI7C.jpg?s=128&g=1", "display_name": "Amnon Shochot", "link": "https://stackoverflow.com/users/4282370/amnon-shochot"}, "is_accepted": true, "score": 3, "last_activity_date": 1427909309, "creation_date": 1427909309, "answer_id": 29397114, "question_id": 29396693, "link": "https://stackoverflow.com/questions/29396693/freeing-an-array-within-a-struct/29397114#29397114", "title": "Freeing an array within a struct", "body": "<p>The free statement should look like <code>free((*queue)-&gt;arr)</code>.</p>\n\n<p>Explanation: <code>queue_free</code> defines the <code>queue</code> variable as a pointer to a pointer to the <code>queue_t</code> struct. Now, in order to get to the pointer to the struct you need to remove one level of indirection using <code>(*queue)</code>; then you can use the dereference operator <code>-&gt;</code> to access <code>arr</code> member.</p>\n\n<p>Now, the reason why the other options didn't work for you are:</p>\n\n<ul>\n<li><code>free(queue -&gt; arr)</code> - a pointer to a pointer of a queue_t structure does not have an <code>arr</code> member</li>\n<li><code>free(*queue -&gt; arr)</code> - the dereference operator (<code>'*'</code>) refers to the whole expression, i.e. <code>queue-&gt;arr</code>, which takes you back to the previous error</li>\n<li><code>free(**queue -&gt; arr)</code> - same as above</li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 4739180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/976c54e37e50b55121e7faad3ea1f2ae?s=128&d=identicon&r=PG&f=1", "display_name": "Aether", "link": "https://stackoverflow.com/users/4739180/aether"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1596, "favorite_count": 0, "accepted_answer_id": 29397114, "answer_count": 1, "score": 1, "last_activity_date": 1427909309, "creation_date": 1427907921, "question_id": 29396693, "link": "https://stackoverflow.com/questions/29396693/freeing-an-array-within-a-struct", "title": "Freeing an array within a struct", "body": "<p>for an assignment I have to write a circular queue (which I imagine most of you are familiar with). I made a structure and a function that initializes a queue struct using dynamic memory. Note that I also have an array <strong>arr</strong> within the struct to which I assign memory. </p>\n\n<p>For some reason I can't seem to free my array from memory. </p>\n\n<pre><code>struct queue {\n  element_t *arr;    // dynamic array containing data elements\n  int current_size;   // Counts number of elements in the queue\n  int front, rear;   // Remark for later: extra fields need to be added here to make it a thread-safe queue as needed for the assigment\n};\n\n\nqueue_t* queue_create(){\n  struct queue *queue = malloc(sizeof(struct queue));\n\n  if(queue == 0){  //check if memory available\n    printf(\"Out of memory\\n\");\n    return NULL;\n  }\n\n  queue -&gt; current_size = 0;\n  queue -&gt; front = -1;\n  queue -&gt; rear = -1;\n  queue -&gt; arr = malloc(QUEUE_SIZE*sizeof(element_t));\n  return queue;\n}\n</code></pre>\n\n<p>I'm trying to free the memory when I'm done with it using a function queue_free. The function takes in a double pointer to a queue (part of the assignment). </p>\n\n<pre><code>void queue_free(queue_t** queue){\n  free(**queue -&gt; arr);\n  free(*queue);\n}\n</code></pre>\n\n<p>When I call the last function I got an error message saying: </p>\n\n<pre><code>queue.c: In function \u2018queue_free\u2019:\nqueue.c:39:16: error: request for member \u2018arr\u2019 in something not a structure or union\n   free(**queue -&gt; arr);\n                ^\n</code></pre>\n\n<p>I've already checked with valgrind for leaks. The queue gets freed correctly but for some reason I can't get the address of my array.</p>\n\n<p>Thanks in advance</p>\n\n<p>P.S. free(queue -> arr); free(*queue -> arr); and free(**queue -> arr); all fail and generate the same error message.</p>\n"}, {"tags": ["python", "c", "linux", "python-c-extension"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427907852, "post_id": 29396600, "comment_id": 46969571, "body": "Unrelated to your problem, but <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">DO not cast the return value of <code>malloc()</code></a> and if either one of the <code>malloc()</code>s succeeds you will have a memory leak in ` if (NULL == array_a || NULL == array_b)`"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427908078, "post_id": 29396600, "comment_id": 46969666, "body": "Why are you decreffing the items once you get them, does the documentation says you have to?"}, {"owner": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427908749, "post_id": 29396600, "comment_id": 46969982, "body": "@iharob for the first problem, i got it and will not cast the pointer from malloc()."}, {"owner": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427908862, "post_id": 29396600, "comment_id": 46970036, "body": "@iharob   the second one, the doc does not ask me to do like this, i did it by myself becasue I think if i do not use decref() at once , there will be a memory leak after the &quot;item&quot; is set to other &quot;object&quot;"}, {"owner": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427910154, "post_id": 29396600, "comment_id": 46970718, "body": "@plaes  could you help me with this? I really need your help ~"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427910882, "post_id": 29396600, "comment_id": 46971131, "body": "Why are you writing a c extension when you can just do it in pure python? is it too slow?"}, {"owner": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427911176, "post_id": 29396600, "comment_id": 46971289, "body": "yes, the cost of python is 10 times as C according to my test"}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "edited": false, "score": 0, "creation_date": 1427909204, "post_id": 29396687, "comment_id": 46970223, "body": "I run gdb /usr/bin/python2.7 ./core , and it gives a warning: core file may not match specified executable file.   but it still gives some stack info, i copied the stack info above, can you please help me identify the problem?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "edited": false, "score": 0, "creation_date": 1427910152, "post_id": 29396687, "comment_id": 46970716, "body": "If you&#39;re unsure if you&#39;re using the right executable, you could also try running the program by <code>gdb --args python mypythonfile.py</code> as that should ensure the right executable is used"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "edited": false, "score": 0, "creation_date": 1427932709, "post_id": 29396687, "comment_id": 46981133, "body": "@user3978288: no problem; though I would be really happy if you upvoted or accepted my answer :)"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 5, "last_activity_date": 1427907893, "creation_date": 1427907893, "answer_id": 29396687, "question_id": 29396600, "link": "https://stackoverflow.com/questions/29396600/segmentation-fault-core-dump-in-python-c-extension/29396687#29396687", "title": "segmentation fault - core dump in python C-extension", "body": "<blockquote>\n  <p>The c-extension is compiled to cutil.so, I do not know how to see the dump.</p>\n</blockquote>\n\n<p>To solve this, I'm going to cite <a href=\"http://gnuradio.org/redmine/projects/gnuradio/wiki/TutorialsGDB\" rel=\"noreferrer\">GNU Radio's GDB/Python debugging mini-tutorial</a>:</p>\n\n<blockquote>\n  <p>Luckily, there's a feature called core dumping that allows the state of your program to be stored in a file, allowing later analysis. Usually, that feature is disabled; you can enable it by:</p>\n\n<pre><code>ulimit -c unlimited\n</code></pre>\n  \n  <p>Note that this only works for processes spawned from the shell that you used ulimit in. What happens here is that the maximum size of a core dump is set to unlimited (the original value is 0 in most cases).</p>\n  \n  <p>Now, the core dump file lays in the current execution directory of the program that crashed. In our case, that's build/python/, but since all core dumps should have a name like core., we can use a little find magic:</p>\n\n<pre><code>marcus&gt; find -type f -cmin 5 -name 'core.[0-9]*'\n</code></pre>\n  \n  <p>./build/python/core.22608</p>\n  \n  <p>because that will find all _f_iles, changed/created within the last _5 min_utes, having a name that matches.</p>\n  \n  <h2>Using GDB with a core dump</h2>\n  \n  <p>having found build/python/core.22608,\n  we can now launch GDB:</p>\n\n<pre><code>gdb programname coredump\n</code></pre>\n  \n  <p>i.e.</p>\n\n<pre><code>gdb /usr/bin/python2 build/python/core.22608\n</code></pre>\n  \n  <p>A lot of information might scroll by.</p>\n  \n  <p>At the end, you're greeted by the GDB prompt:</p>\n\n<pre><code>(gdb) \n</code></pre>\n  \n  <h2>Getting a backtrace</h2>\n  \n  <p>Typically, you'd just get a backtrace (or shorter, bt). A backtrace is simply the hierarchy of functions that were called.</p>\n\n<pre><code> (gdb)bt\n</code></pre>\n</blockquote>\n\n<p>[...] skipped,</p>\n\n<blockquote>\n  <p>Frame #2 and following definitely look like they're part of the Python implementation -- that sounds bad, because GDB doesn't itself know how to debug python, but luckily, there's an extension to do that. So we can try to use py-bt:</p>\n\n<pre><code>(gdb) py-bt\n</code></pre>\n  \n  <p>If we get a undefined command error, we must stop here and make sure that the python development package is installed (python-devel on Redhatoids, python2.7-dev on Debianoids); for some systems, you should append the content of /usr/share/doc/{python-devel,python2.7-dev}/gdbinit[.gz] to your ~/.gdbinit, and re-start gdb.</p>\n  \n  <p>The output of py-bt now states clearly which python lines correspond to which stack frame (skipping those stack frames that are hidden to python, because they are in external libraries or python-implementation routines)</p>\n  \n  <p>...</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "is_accepted": false, "score": 0, "last_activity_date": 1427957322, "creation_date": 1427957322, "answer_id": 29406721, "question_id": 29396600, "link": "https://stackoverflow.com/questions/29396600/segmentation-fault-core-dump-in-python-c-extension/29406721#29406721", "title": "segmentation fault - core dump in python C-extension", "body": "<p>thanks for the 2 kind and nice guys above who helped me.</p>\n\n<p>Problem seemed to be solved.</p>\n\n<p>comment the 2 lines:</p>\n\n<pre><code>Py_DECREF(seq_a); \nPy_DECREF(seq_b);\n</code></pre>\n\n<p>for more details pls read python offical doc on C-API</p>\n\n<p>I guess the reason is that the seq_a seq_b get from argv is a \"borrowed reference\"  rather than a real refference   , so we do not need to decref().</p>\n\n<p>but as the official docs says, if you convert the borrowed refference into a real referrence  using a incref() , then you should call decref()</p>\n\n<p>U can also search \"python c-extension referrence count\" for more detail</p>\n"}], "owner": {"reputation": 425, "user_id": 3978288, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/461bf2e1d2f4d93c8ed84b55264122f3?s=128&d=identicon&r=PG&f=1", "display_name": "ruiruige1991", "link": "https://stackoverflow.com/users/3978288/ruiruige1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6422, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1427957322, "creation_date": 1427907546, "last_edit_date": 1427910117, "question_id": 29396600, "link": "https://stackoverflow.com/questions/29396600/segmentation-fault-core-dump-in-python-c-extension", "title": "segmentation fault - core dump in python C-extension", "body": "<p>I am writing a c-extension for python. As you can see below, the aim of the code is to calculate the euclidean-dist of two vectors.\nthe first param n is the dimension of the vectors,\nthe second , the third param is the two list of float.</p>\n\n<p>I call the function in python like this:</p>\n\n<pre><code>import cutil\ncutil.c_euclidean_dist(2,[1.0,1,0],[0,0])\n</code></pre>\n\n<p>and it worked well, return the right result.\nbut if i do it for more than 100 times(the dimension is 1*1000), it will cause segmentation fault - core dump:</p>\n\n<pre><code>#!/usr/bin/env python\n#coding:utf-8\nimport cutil\nimport science\nimport time\na = []\nb = []\nd = 0.0 \nfor x in range(2500):\n    a.append([float(i+x) for i in range(1000)])\n    b.append([float(i-x) for i in range(1000)])\n\nt1 = time.time()\nfor x in range(500):\n    d += cutil.c_euclidean_dist(1000,a[x],b[x])\nprint time.time() - t1\nprint d\n</code></pre>\n\n<p>the C code is here:</p>\n\n<pre><code>#include &lt;python2.7/Python.h&gt;\n#include &lt;math.h&gt;\n\nstatic PyObject* cutil_euclidean_dist(PyObject* self, PyObject* args) {\n    PyObject *seq_a, *seq_b;\n    int n;\n    float * array_a,* array_b;\n    PyObject *item;\n\n    PyArg_ParseTuple(args,\"iOO\", &amp;n , &amp;seq_a, &amp;seq_b);\n    if (!PySequence_Check(seq_a) || !PySequence_Check(seq_b)) {\n       PyErr_SetString(PyExc_TypeError, \"expected sequence\");\n       return NULL;\n    }\n\n    array_a =(float *)malloc(sizeof(float)*n);\n    array_b =(float *)malloc(sizeof(float)*n);  \n\n    if (NULL == array_a || NULL == array_b){\n        PyErr_SetString(PyExc_TypeError, \"malloc failed!\");\n        Py_DECREF(seq_a);\n        Py_DECREF(seq_b);\n        return NULL;\n    }\n\n    int i;\n    for(i=0;i&lt;n;i++){\n        item = PySequence_GetItem(seq_a,i);\n\n        if (!PyFloat_Check(item)) {\n            free(array_a);  /* free up the memory before leaving */\n            free(array_b);\n            Py_DECREF(seq_a);\n            Py_DECREF(seq_b);\n            Py_DECREF(item);\n            PyErr_SetString(PyExc_TypeError, \"expected sequence of float\");\n            return NULL;\n        }\n        array_a[i] = PyFloat_AsDouble(item);\n\n        Py_DECREF(item);\n\n        item = PySequence_GetItem(seq_b,i);\n        if(!PyFloat_Check(item)) {\n            free(array_a);\n            free(array_b);\n            Py_DECREF(seq_a);\n            Py_DECREF(seq_b);\n            Py_DECREF(item);\n            PyErr_SetString(PyExc_TypeError, \"expected sequence of float\"); \n            return NULL;\n        }\n        array_b[i] = PyFloat_AsDouble(item);\n        Py_DECREF(item);\n    }\n\n    double sum = 0;\n    for(i=0;i&lt;n;i++){\n        double delta = array_a[i] - array_b[i];\n        sum += delta * delta;\n    }\n\n    free(array_a);\n    free(array_b);\n    Py_DECREF(seq_a);\n    Py_DECREF(seq_b);\n\n    return Py_BuildValue(\"d\",sqrt(sum));\n}\n\nstatic PyMethodDef cutil_methods[] = {\n    {\"c_euclidean_dist\",(PyCFunction)cutil_euclidean_dist,METH_VARARGS,NULL},\n    {NULL,NULL,0,NULL}\n};\n\nPyMODINIT_FUNC initcutil(void) {\n    Py_InitModule3(\"cutil\", cutil_methods, \"liurui's c extension for python\");\n} \n</code></pre>\n\n<p>the error msg:</p>\n\n<pre><code>segmentation fault - core dump:\n</code></pre>\n\n<p>The c-extension is compiled to cutil.so, I do not know how to see the dump.\nBut i looked through my C code for many times,and can not find any problem..</p>\n\n<p>May it be <Strong>a memory problem</Strong>?</p>\n\n<p>It should be a very simple piece of C code, what's wrong with it?\nI need your help~ thanks a lot !</p>\n\n<p>here is the result of gdb /usr/bin/python2.7 ./core:</p>\n\n<pre><code>root@ubuntu:/home/rrg/workspace/opencvTest/test# gdb /usr/bin/python2.7 ./core \nGNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.2) 7.7.1\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/python2.7...Reading symbols from /usr/lib/debug//usr/bin/python2.7...done.\ndone.\n\nwarning: core file may not match specified executable file.\n[New LWP 13787]\n[New LWP 13789]\n[New LWP 13790]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\nCore was generated by `python py.py'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x00000000005398b3 in list_dealloc.16846 (op=0x7f688b2faa28) at ../Objects/listobject.c:309\n309 ../Objects/listobject.c: no such file or directory\n#0  0x00000000005398b3 in list_dealloc.16846 (op=0x7f688b2faa28) at ../Objects/listobject.c:309\n#1  0x00000000004fdb96 in insertdict_by_entry (value=&lt;optimized out&gt;, ep=0x1777fa8, hash=&lt;optimized out&gt;, key='b', mp=0x7f68a8dbb168) at ../Objects/dictobject.c:519\n#2  insertdict (value=&lt;optimized out&gt;, hash=&lt;optimized out&gt;, key='b', mp=0x7f68a8dbb168) at ../Objects/dictobject.c:556\n#3  dict_set_item_by_hash_or_entry (value=&lt;optimized out&gt;, ep=0x0, hash=&lt;optimized out&gt;, key='b', \n    op={'a': None, 'x': None, 'c': None, 'b': None, 'd': &lt;float at remote 0x4480b30&gt;, '__builtins__': &lt;module at remote 0x7f68a8de6b08&gt;, 'science': &lt;module at remote 0x7f68a8ce4088&gt;, '__package__': None, 'i': 999, 'cutil': &lt;module at remote 0x7f68a8cdfbb0&gt;, 'time': &lt;module at remote 0x7f68a640ea28&gt;, '__name__': '__main__', 't1': &lt;float at remote 0xd012708&gt;, '__doc__': None}) at ../Objects/dictobject.c:765\n#4  PyDict_SetItem (\n    op=op@entry={'a': None, 'x': None, 'c': None, 'b': None, 'd': &lt;float at remote 0x4480b30&gt;, '__builtins__': &lt;module at remote 0x7f68a8de6b08&gt;, 'science': &lt;module at remote 0x7f68a8ce4088&gt;, '__package__': None, 'i': 999, 'cutil': &lt;module at remote 0x7f68a8cdfbb0&gt;, 'time': &lt;module at remote 0x7f68a640ea28&gt;, '__name__': '__main__', 't1': &lt;float at remote 0xd012708&gt;, '__doc__': None}, key=key@entry='b', \n    value=&lt;optimized out&gt;) at ../Objects/dictobject.c:818\n#5  0x000000000055a9e1 in _PyModule_Clear (m=&lt;optimized out&gt;) at ../Objects/moduleobject.c:139\n#6  0x00000000004f2ad4 in PyImport_Cleanup () at ../Python/import.c:473\n#7  0x000000000042fa89 in Py_Finalize () at ../Python/pythonrun.c:459\n#8  0x000000000046ac10 in Py_Main (argc=&lt;optimized out&gt;, argv=0x7fff3958d058) at ../Modules/main.c:665\n#9  0x00007f68a8665ec5 in __libc_start_main (main=0x46ac3f &lt;main&gt;, argc=2, argv=0x7fff3958d058, init=&lt;optimized out&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=0x7fff3958d048)\n    at libc-start.c:287\n#10 0x000000000057497e in _start ()\n</code></pre>\n\n<p>Edit:\nI comment the last 2 sentences near the last return:</p>\n\n<pre><code>Py_DECREF(seq_a);\nPy_DECREF(seq_b);  \n</code></pre>\n\n<p>and then it seems to work well. I feel very very strange...\nThe purpose of the two sentence is to free(or release) the two pyobject, why it works well without the two sentences which I think are necessary?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1427907680, "post_id": 29396511, "comment_id": 46969470, "body": "Did you check permissions?"}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1427908136, "creation_date": 1427908136, "answer_id": 29396756, "question_id": 29396511, "link": "https://stackoverflow.com/questions/29396511/opening-internet-explorer-using-c-programming-language/29396756#29396756", "title": "opening Internet Explorer using c programming language", "body": "<p>I guess you have specified the path to Internet Explorer like this</p>\n\n<pre><code>\"C:\\Program Files\\Internet Explorer\\iexplore.exe\"\n</code></pre>\n\n<p>But because the <code>\\</code> character is an \"escape\" character in a literal string, you need to defeat the escape</p>\n\n<pre><code>\"C:\\\\Program Files\\\\Internet Explorer\\\\iexplore.exe\"\n</code></pre>\n\n<p>There was no error when you compiled because the compiler cannot check whether the command passed to <code>system()</code> will be meaningful, or valid at runtime.</p>\n"}], "owner": {"reputation": 9, "user_id": 4739205, "user_type": "registered", "profile_image": "https://graph.facebook.com/815435785217152/picture?type=large", "display_name": "Sufiyan Khot", "link": "https://stackoverflow.com/users/4739205/sufiyan-khot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 29396756, "answer_count": 1, "score": -5, "last_activity_date": 1427908136, "creation_date": 1427907282, "question_id": 29396511, "link": "https://stackoverflow.com/questions/29396511/opening-internet-explorer-using-c-programming-language", "title": "opening Internet Explorer using c programming language", "body": "<p>I made a c program in which I used the very notorious system () function to open internet explorer.There was no error as I compiled it but it is giving me output as illegal command. What is the problem?? I have rechecked my Internet Explorer address in c drive but everything is perfect. how to solve this? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 3, "creation_date": 1427907166, "post_id": 29396426, "comment_id": 46969182, "body": "Write your own function for that."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1427908481, "post_id": 29396426, "comment_id": 46969856, "body": "use <a href=\"http://manpages.ubuntu.com/manpages/utopic/en/man3/itoa.3avr.html\" rel=\"nofollow noreferrer\">itoa,utoa</a>(non-standard) E.g. <code>char bits[32+1];\tprintf(&quot;%s\\n&quot;, itoa(0x19, bits, 2));</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1427909895, "post_id": 29396426, "comment_id": 46970567, "body": "<a href=\"http://stackoverflow.com/questions/111928/is-there-a-printf-converter-to-print-in-binary-format\" title=\"is there a printf converter to print in binary format\">stackoverflow.com/questions/111928/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 2, "last_activity_date": 1427908369, "creation_date": 1427908369, "answer_id": 29396832, "question_id": 29396426, "link": "https://stackoverflow.com/questions/29396426/how-do-i-print-the-binarys-of-a-hex/29396832#29396832", "title": "How do I print the binarys of a hex?", "body": "<pre><code>for (i=0; i&lt;32; i++) putchar((x&amp;(1&lt;&lt;(31-i)))?'1':'0');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1427910979, "last_edit_date": 1427910979, "creation_date": 1427909133, "answer_id": 29397060, "question_id": 29396426, "link": "https://stackoverflow.com/questions/29396426/how-do-i-print-the-binarys-of-a-hex/29397060#29397060", "title": "How do I print the binarys of a hex?", "body": "<p>If itoa(non-standard function) can be used environment, can be written as follows.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;limits.h&gt;\n\nint main( void ){\n    char bits[CHAR_BIT*sizeof(unsigned)+1];\n    itoa((int)0x19, bits, 2);\n    int len = strlen(bits);\n    if(len &lt; 8)//%08\n        printf(\"%0*d%s\\n\", 8-len, 0, bits);\n    else\n        printf(\"%s\\n\", bits);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3517309, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/4647b3aac7d17eb98bff3f28f719784a?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNinjaInTraining", "link": "https://stackoverflow.com/users/3517309/codingninjaintraining"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1427910979, "creation_date": 1427907028, "question_id": 29396426, "link": "https://stackoverflow.com/questions/29396426/how-do-i-print-the-binarys-of-a-hex", "title": "How do I print the binarys of a hex?", "body": "<p>For example 0x19 is 00011001 in binary. I tried using printf %08x, but that gives me 00000019 as the output. How do I get it to print 00011001 instead?</p>\n"}, {"tags": ["c", "regex", "parsing", "interpreter", "lexical-analysis"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1427905536, "post_id": 29395950, "comment_id": 46968239, "body": "Have you looked at <code>lex</code> and <code>yacc</code> (or the FSF analogues <code>flex</code> and <code>bison</code>)? Regular expressions are used in <code>lex</code>, a grammar is used in <code>yacc</code>."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 2, "creation_date": 1427905538, "post_id": 29395950, "comment_id": 46968242, "body": "<i>&quot;I have been told that regular expressions is a terrible way to go about doing this&quot;</i> This is wrong. Regular expressions are a great way to parse tokens, even if they can&#39;t parse the language entirely."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1427907654, "post_id": 29395950, "comment_id": 46969457, "body": "Whether regular expressions are a good way or a poor way to parse parts of your language depends on the details of your language.  They are frequently used for such purposes, though, and have been for a long time.  The <code>lex</code> lexical analyzer and its derivatives depend heavily on regexes, for example."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1429780082, "post_id": 29395950, "comment_id": 47764075, "body": "It is not about making an interpreter, it is just about <a href=\"http://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a> which is the first step of an interpreter."}], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 4570301, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FOmaAHcDY4U/AAAAAAAAAAI/AAAAAAAAA_k/lJ8TnGdIYI4/photo.jpg?sz=128", "display_name": "Walter Delevich", "link": "https://stackoverflow.com/users/4570301/walter-delevich"}, "is_accepted": false, "score": 1, "last_activity_date": 1427907814, "creation_date": 1427907814, "answer_id": 29396666, "question_id": 29395950, "link": "https://stackoverflow.com/questions/29395950/how-to-implement-a-language-interpreter-without-regular-expressions/29396666#29396666", "title": "How to implement a language interpreter without regular expressions?", "body": "<p>As others have mentioned, there's nothing wrong with regex. Here's a typical path:</p>\n\n<ol>\n<li>Parse your source file into tokens</li>\n<li>Generate an abstract syntax tree from your stream of parsed tokens</li>\n<li>Walk your AST to generate your bytecode </li>\n</ol>\n\n<p>Flex/bison are great tools for 1/2.</p>\n\n<p>You will probably also need some sort of symbol table for variable definitions.</p>\n\n<p>Many compiler design courses will end up implementing a compiler for some subset of the c language, you could try looking at open courseware type sites for an actual class on this.</p>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1427920875, "post_id": 29399537, "comment_id": 46976595, "body": "Scanner generators like flex (1) use regular expressions and (2) produce very fast scanners. I dare say that a naively written flex scanner would be (3) much easier to read and (4) quite possibly faster and certainly not significantly slower than your example scanner."}, {"owner": {"reputation": 2255, "user_id": 670358, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6DjA.png?s=128&g=1", "display_name": "Kaslai", "link": "https://stackoverflow.com/users/670358/kaslai"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1427925074, "post_id": 29399537, "comment_id": 46978545, "body": "@rici I edited my answer to make it more correct. I will agree that flex scanner definitions are definitely easier to read and write, after all that&#39;s the entire reason why the project came about in the first place: to make writing scanners easier. I made it clear that regular expressions in and of themselves aren&#39;t the problem; it&#39;s the idea of invoking a regular expression parser from your code that&#39;s bad. Flex knows what the regex are at compile time and can thus break them down into simpler functions that don&#39;t incur performance penalties from parsing regex at run-time."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1427925454, "post_id": 29399537, "comment_id": 46978722, "body": "Actually, <code>flex</code> (and <code>lex</code>) do not use <code>isdigit</code> either. They compile the regular expression into a DFA and use a table-based approach to walk the DFA at runtime. Tables are faster than open code because they don&#39;t require as much test&amp;branch. Nothing stops a regex library from using the same strategy -- re2 does, for example -- but it only works for pure regular expressions: no back-references, no captures, no fancy operators. However, it is almost always good enough for tokenizing."}, {"owner": {"reputation": 2255, "user_id": 670358, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6DjA.png?s=128&g=1", "display_name": "Kaslai", "link": "https://stackoverflow.com/users/670358/kaslai"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1427926056, "post_id": 29399537, "comment_id": 46978950, "body": "I was speaking in generalities even though I mentioned a specific project. I&#39;ve fixed the language. Also, even if a regular expression library is highly optimized, it&#39;s still working at run-time. You&#39;d also have to write all the glue code anyways, which is almost as much of a headache as writing the parser without regex in the first place."}], "tags": [], "owner": {"reputation": 2255, "user_id": 670358, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6DjA.png?s=128&g=1", "display_name": "Kaslai", "link": "https://stackoverflow.com/users/670358/kaslai"}, "is_accepted": true, "score": 5, "last_activity_date": 1427925741, "last_edit_date": 1427925741, "creation_date": 1427917756, "answer_id": 29399537, "question_id": 29395950, "link": "https://stackoverflow.com/questions/29395950/how-to-implement-a-language-interpreter-without-regular-expressions/29399537#29399537", "title": "How to implement a language interpreter without regular expressions?", "body": "<p>The reason why people tell you that regular expressions aren't the best idea for a case like this is because regular expressions take more time to evaluate, and the regular expression language has many limitations and quirks that make it unsuitable for many applications. </p>\n\n<p>You should be aware that this is just a knee-jerk reaction that many programmers have (including myself), regardless of whether or not regular expressions would actually be suitable for the application. This stems from people trying to do too much with regular expressions, such as trying to parse HTML.</p>\n\n<p>Many compilers use a basic single-pass tokenization algorithm. The tokenizer has a very basic idea of what can be used as a delimiter, how constants and identifiers should be treated, etc. The tokenizer will then just iterate through the input quickly and emit a string of tokens that can then be easily parsed.</p>\n\n<p>For a basic application, such as parsing tokens, the relatively minor penalty from using regular expressions isn't something to worry about. However as I said, there are sometimes peculiarities with how regular expressions work that might limit the things that your tokenizer can do, though that work can usually be offloaded to a later point in the compiler pipeline. Everything that a tokenizer is expected to do should be representable by standard regular expressions though.</p>\n\n<p>It should be noted that when you involve regular expressions directly in your code, things can get a little hairy. You have to determine how the regular expressions should be applied to the input, where input will be delineated, and so on. You'll also incur the penalty of compiling and evaluating the regular expressions.</p>\n\n<p>There are some projects, such as <code>lex</code>, which make use of regular expressions because they provide a simple, concise way to describe a grammar, which it can then make use of internally in whatever representation in chooses. They will also handle all of the glue logic for you and you merely have to describe the grammar that it should use via regular expressions. </p>\n\n<p>When such a generator is used , it can change any regular expressions to code that represents what the expression actually means. If it sees the expression <code>[0-9]</code>, it can just replace that with a call to <code>isdigit</code>, an equivalent <code>switch</code> statement, or some other representation. This makes the generated code much more efficient than any inline use of regular expressions could achieve.</p>\n\n<p>So my thought is this: If you want to use regular expressions to parse your language, go all the way and create a scanner description for <code>flex</code>/<code>lex</code> to generate the tokenizer for you. However, if you're actually writing it entirely yourself, you'd be better off with a logically simpler approach like the one I described.</p>\n\n<p>I thought it would be fun to write up a sample tokenizer that doesn't use regular expressions, so here it is. I wrote it in C-like C++. The only C++ feature I used was the standard vector and string, but I did it in such a way that you could easily drop in C variants.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string&gt;\n\ntypedef std::vector&lt;std::string&gt; string_list;\ntypedef std::vector&lt;long long &gt; int_list;\ntypedef std::vector&lt;long double&gt; float_list;\n\nstd::string substr(const char* value, size_t length){\n    std::string v;\n    v.resize(length);\n    memcpy(&amp;v[0], value, length * sizeof(char));\n    return v;\n}\n\nlong long string_to_int(const char* value, size_t length){\n    return atoll(substr(value, length).c_str());\n}\nlong double string_to_float(const char* value, size_t length){\n    return atof(substr(value, length).c_str());\n}\n\n\nvoid int_list_add(int_list&amp; list, long long value){\n    list.push_back(value);\n}\nvoid string_list_add(string_list&amp; list, const char* value, size_t length){\n    list.push_back(substr(value, length));\n}\nvoid float_list_add(float_list&amp; list, long double value){\n    list.push_back(value);\n}\nsize_t int_list_last(int_list&amp; list){\n    return list.size();\n}\nsize_t string_list_last(string_list&amp; list){\n    return list.size();\n}\nsize_t float_list_last(float_list&amp; list){\n    return list.size();\n}\n\n\n\ntypedef struct{\n    string_list identifiers;\n    string_list constants_string;\n    int_list constants_int;\n    float_list constants_float;\n    size_t id;\n} *state, state_value;\n\nstate tok_state_create(){\n    state ret = new state_value;\n    ret-&gt;id = 0;\n    return ret;\n}\nvoid tok_state_destroy(state t_state){\n    delete t_state;\n}\nconst char* tok_state_read_identifier(state t_state, size_t id){\n    return t_state-&gt;identifiers[id - 1].c_str();\n}\nconst char* tok_state_read_string(state t_state, size_t id){\n    return t_state-&gt;constants_string[id - 1].c_str();\n}\nlong long tok_state_read_int(state t_state, size_t id){\n    return t_state-&gt;constants_int[id - 1];\n}\nlong double tok_state_read_float(state t_state, size_t id){\n    return t_state-&gt;constants_float[id - 1];\n}\n\n\n\nconst char* punct_tokens[] = { \"Not A Token (Dummy)\",\n\".\", \",\", \"&lt;\", \"&lt;&lt;\", \"&gt;\", \"&gt;&gt;\",\n\";\", \"+\", \"-\", \"/\", \"*\", \"!\", \"%\", \"^\",\n\"&amp;\", \"(\", \")\", \"=\", \"==\", \"[\", \"]\", \"{\",\n\"}\", \"?\", \":\", \"|\", \"||\", \"&amp;&amp;\", \"~\", 0\n};\n\nconst char* key_tokens[] = { \"Not A Token (Dummy)\",\n\"if\", \"while\", \"do\", \"then\", \"end\", 0\n};\n\ntypedef enum{\n    TOK_TYPE_INTEGER = 500,\n    TOK_TYPE_FLOAT,\n    TOK_TYPE_STRING,\n    TOK_TYPE_IDENTIFIER,\n    TOK_TYPE_NONE\n} tok_type;\n\nconst char* get_token_from_id(size_t id){\n    if (id &lt; 100){\n        return punct_tokens[id];\n    }\n    if (id &lt; 200){\n        return key_tokens[id - 100];\n    }\n    if (id &gt;= 500){\n        switch (id){\n        case TOK_TYPE_INTEGER:      return \"Integer Constant\";\n        case TOK_TYPE_FLOAT:        return \"Float Constant  \";\n        case TOK_TYPE_STRING:       return \"String Constant \";\n        case TOK_TYPE_IDENTIFIER:   return \"Identifier      \";\n        case TOK_TYPE_NONE:         return \"Unknown         \";\n        default:\n            break;\n        }\n    }\n    return \"Not A Token (Dummy)\";\n}\n\nint is_identifier_char(char c){\n    if (isalpha(c) || c == '_'){\n        return 1;\n    }\n    return 0;\n}\n\nsize_t read_punct_token(const char* input, size_t size){\n    size_t max_len = 0;\n    size_t token_id = 0;\n    for (size_t i = 1; punct_tokens[i] != 0; ++i){\n        size_t len = strlen(punct_tokens[i]);\n        if (len &gt; max_len &amp;&amp; len &lt;= size &amp;&amp; strncmp(punct_tokens[i], input, len) == 0){\n            max_len = len;\n            if (i == 1 &amp;&amp; size &gt; 1 &amp;&amp; isdigit(input[1])){\n                return 0; //Special case for floats\n            }\n            token_id = i;\n        }\n    }\n    return token_id;\n}\n\nsize_t read_key_token(const char* input, size_t size){\n    size_t max_len = 0;\n    size_t token_id = 0;\n    for (size_t i = 1; key_tokens[i] != 0; ++i){\n        size_t len = strlen(key_tokens[i]);\n        if (len &gt; max_len &amp;&amp; len &lt;= size &amp;&amp; strncmp(key_tokens[i], input, len) == 0){\n            max_len = len;\n            token_id = i + 100;\n        }\n    }\n    return token_id;\n}\n\n\nsize_t is_punct_token_char(char c){\n    for (size_t i = 1; punct_tokens[i] != 0; ++i){\n        if (punct_tokens[i][0] == c){\n            return 1;\n        }\n    }\n    return 0;\n}\n\n\nvoid add_token(state t_state, tok_type type, const char* string, size_t length){\n    switch (type){\n    case TOK_TYPE_INTEGER:\n        int_list_add(t_state-&gt;constants_int, string_to_int(string, length));\n        t_state-&gt;id = int_list_last(t_state-&gt;constants_int);\n        break;\n    case TOK_TYPE_FLOAT:\n        float_list_add(t_state-&gt;constants_float, string_to_float(string, length));\n        t_state-&gt;id = float_list_last(t_state-&gt;constants_float);\n        break;\n    case TOK_TYPE_STRING:\n        string_list_add(t_state-&gt;constants_string, string, length);\n        t_state-&gt;id = string_list_last(t_state-&gt;constants_string);\n        break;\n    case TOK_TYPE_IDENTIFIER:\n        string_list_add(t_state-&gt;identifiers, string, length);\n        t_state-&gt;id = string_list_last(t_state-&gt;identifiers);\n        break;\n    default:\n        //Do some error here\n        break;\n    }\n}\n\nsize_t get_token(state t_state, char** input, size_t *size){\n    if (t_state-&gt;id != 0){\n        size_t id = t_state-&gt;id;\n        t_state-&gt;id = 0;\n        return id;\n    }\n    char* base = *input;\n    size_t padding = 0;\n    size_t length = 0;\n    tok_type type = TOK_TYPE_NONE;\n    while (*size &gt; 0){\n        if (isspace(*base)){\n            base++;\n            (*size)--;\n        }\n        else{\n            break;\n        }\n    }\n\n    size_t tok = read_punct_token(base, *size);\n    if (tok){\n        size_t len = +strlen(get_token_from_id(tok));\n        *input = base + len;\n        *size -= len;\n        return tok;\n    }\n    tok = read_key_token(base, *size);\n    if (tok){\n        size_t len = +strlen(get_token_from_id(tok));\n        *input = base + len;\n        *size -= len;\n        return tok;\n    }\n\n    while (*size - length &gt; 0){\n        if (length == 0 &amp;&amp; type == TOK_TYPE_NONE){\n            if (is_identifier_char(*base)){\n                type = TOK_TYPE_IDENTIFIER;\n                length++;\n            }\n            else if (*base == '\"'){\n                type = TOK_TYPE_STRING;\n                padding = 1;\n                base++;\n                (*size)--;\n            }\n            else if (*base == '.' &amp;&amp; *size &gt; 1 &amp;&amp; isdigit(base[1])){\n                type = TOK_TYPE_FLOAT;\n            }\n            else if (isdigit(*base)){\n                type = TOK_TYPE_INTEGER;\n            }\n            else if (is_punct_token_char(*base)){\n                tok = read_punct_token(base, *size);\n                if (tok){\n                    size_t len = strlen(punct_tokens[tok]);\n                    *input += len;\n                    *size -= len;\n                    return tok;\n                }\n                else{\n                    //do error\n                }\n            }\n        }\n        else{\n            if (!isspace(base[length]) || type == TOK_TYPE_STRING){\n                switch (type){\n                case TOK_TYPE_INTEGER:\n                    if (isdigit(base[length])){\n                        length++;\n                        continue;\n                    }\n                    else if (base[length] == '.' || tolower(base[length]) == 'e'){\n                        type = TOK_TYPE_FLOAT;\n                        length++;\n                        continue;\n                    }\n                    break;\n                case TOK_TYPE_FLOAT:\n                    if (isdigit(base[length]) || base[length] == '.' || base[length] == 'e'){\n                        length++;\n                        continue;\n                    }\n                    break;\n                case TOK_TYPE_STRING:\n                    if (base[length] != '\"'){\n                        length++;\n                        continue;\n                    }\n                    break;\n                case TOK_TYPE_IDENTIFIER:\n                    if (is_identifier_char(base[length])){\n                        length++;\n                        continue;\n                    }\n                    break;\n                default:\n                    break;\n                }\n            }\n            //We only get here if this is a space or any of the switch cases didn't continue.\n            add_token(t_state, type, base, length);\n            *input = base + length + padding;\n            *size -= length + padding;\n            return type;\n        }\n    }\n    *input = base + length + padding;\n    *size -= length + padding;\n    return 0;\n}\n\nint main(){\n    const char* input = \"if(1+1==4)then print\\\"hi!\\\";end\";\n    state s = tok_state_create();\n    size_t size = strlen(input);\n    size_t token;\n    size_t token_prev = 0;\n    printf(\"Token\\tMeaning\\n\\n\");\n\n    while ((token = get_token(s, (char**)&amp;input, &amp;size)) != 0){\n        if (token_prev &lt; 500){\n            if (token &lt; 500){\n                printf(\"%d\\t%s\\n\", token, get_token_from_id(token));\n            }\n            else{\n                printf(\"%d\\t%s #\", token, get_token_from_id(token));\n            }\n        }\n        else{\n            printf(\"%d\\t\", token);\n            switch (token_prev){\n            case TOK_TYPE_IDENTIFIER: printf(\"%s\\n\", tok_state_read_identifier(s, token)); break;\n            case TOK_TYPE_STRING: printf(\"%s\\n\", tok_state_read_string(s, token)); break;\n            case TOK_TYPE_INTEGER: printf(\"%d\\n\", tok_state_read_int(s, token)); break;\n            case TOK_TYPE_FLOAT: printf(\"%f\\n\", tok_state_read_float(s, token)); break;\n\n            }\n        }\n        token_prev = token;\n    }\n\n    tok_state_destroy(s);\n}\n</code></pre>\n\n<p>This will print:</p>\n\n<pre><code>Token   Meaning\n\n101     if\n16      (\n500     Integer Constant #1     1\n8       +\n500     Integer Constant #2     1\n19      ==\n500     Integer Constant #3     4\n17      )\n104     then\n503     Identifier       #1     print\n502     String Constant  #1     hi!\n7       ;\n105     end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17723, "user_id": 733077, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/db1bf62fae51d5bafb8f1db7fb677176?s=128&d=identicon&r=PG", "display_name": "luser droog", "link": "https://stackoverflow.com/users/733077/luser-droog"}, "is_accepted": false, "score": 1, "last_activity_date": 1429772320, "creation_date": 1429772320, "answer_id": 29815934, "question_id": 29395950, "link": "https://stackoverflow.com/questions/29395950/how-to-implement-a-language-interpreter-without-regular-expressions/29815934#29815934", "title": "How to implement a language interpreter without regular expressions?", "body": "<p>As the other answers have said there's nothing wrong with regular expressions per se. But more than this, <strong>Regular expressions are the natural representation of character-level syntax</strong>. </p>\n\n<p>All the major (and many (most?) minor languages) use a regular expression to define the appearance of different input tokens, at least as a formalism in designing the language. </p>\n\n<p>But there may indeed be a performance penalty for certain tricks provided by regex libraries. This is because many things, like backreferences have to be implemented by a less-powerful automaton than a more <em>pure</em> regular expression.</p>\n\n<p>Regular-expressions (without fancy stuff like backreferences) can be transformed into a finite automaton or state-machine and that can be implemented with a much simpler (ie. <em>faster</em>) controlling function. </p>\n\n<p>At the very least, for efficiency, you should try to <em>pre-compile</em> your languages defining expressions and use the compiled matcher objects instead of constructing a new one dynamically each time. If your regex library doesn't offer this, maybe time to do some library shopping, or read up on automata theory.</p>\n"}, {"tags": [], "owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "is_accepted": false, "score": 1, "last_activity_date": 1429783055, "last_edit_date": 1495542176, "creation_date": 1429778996, "answer_id": 29818283, "question_id": 29395950, "link": "https://stackoverflow.com/questions/29395950/how-to-implement-a-language-interpreter-without-regular-expressions/29818283#29818283", "title": "How to implement a language interpreter without regular expressions?", "body": "<p>Any interpreter or compiler of a sophisticated language (\"has expressions with (...) or compound nested statements like do-while, if-then-else\") requires that you build a parser to extract the (usually recursive) structure of the code.</p>\n\n<p>You've gotten lots of answers here saying \"regular expressions are good for tokens\".   Yes, in many classically built compilers and interpreters, people write regular expressions to describe the shape of individual tokens (identifiers, keywords, numeric and string constants, comments) and hand them to a lexer-generator (like Flex or <a href=\"http://en.wikipedia.org/wiki/Lexical_analysis\" rel=\"nofollow noreferrer\">many others</a>) that combines these into an efficient finite-state machine.  This works because the \"syntax\" of tokens is almost always pretty simple.  That very simplicity means that you can hand code a token lexer yourself and produce practical results for small to medium size languages. (At some point (e.g., COBOL) the sheer size of the language starts to overwhelm you and it is hard to avoid using lexer generator if you want to stay sane).</p>\n\n<p>What hasn't been discussed is real <em>parsing</em>, discovering structure assuming we already have tokens built somehow.  Using regex for tokens IS NOT PARSING.  And regexes cannot be used  for parsing; they cannot recognize nested structures, which is what is needed for those \"sophisticated\" constructs.  <em>People unfamiliar with parsing make this mistake repeatedly.</em> </p>\n\n<p>If you want to succeed, you need to learn how to build a parser.</p>\n\n<p>For complex languages, there are parser generators (YACC, JavaCC, <a href=\"http://en.wikipedia.org/wiki/Comparison_of_parser_generators\" rel=\"nofollow noreferrer\">many others</a>), as analog to lexer generators, that will take a BNF and generate a parser for you.  If you want to write an compiler with such tools, you attach <em>parser actions</em> typically to grammar-rule recognition points, often to build a tree for later processing. </p>\n\n<p>You can also <a href=\"https://stackoverflow.com/a/2336769/120163\">hand-code a parser for modest size languages.</a>  This is a set of mutually recursive procedures, one for each grammar rule, that analyze the code (using recursion to handle nested constructs).   You can also attach parse actions to the procedures.  Since these procedures recognize grammar constructs, this is really essentially the same trick as you would apply if you were using a parser generator.  This scheme can be trivially extended to handle the \"parsing\"(lexing) of tokens.   If you go down this path completely, there are no regular expressions, anywhere.  </p>\n\n<p>It is possible to build an interpreter by executing interpreter-actions in the grammar-rule recognition places/in the hand-coded recursive parsing procedures.   It won't run very fast because it will continually reparse the source code.</p>\n\n<p>It is better to build an <a href=\"https://stackoverflow.com/a/1916687/120163\">(abstract) syntax tree (AST) representing the program</a>, and then <a href=\"https://stackoverflow.com/a/10555114/120163\">build and interpreter that crawls the AST to execute it</a>. The AST is constructed by attaching tree-building actions as parser actions. </p>\n\n<p>If you want to produce <em>byte-code</em>, then you have a classic <em>code generation</em> problem.   These are generally best solved by building an AST, walking the AST almost as an interpreter would, and spitting out byte codes that are intended to achieve the purpose of the interpreter at each point.  You can build an on-the-fly code generator by producing byte codes in the parser actions.  It is harder to generate \"good\" code this way, because the code generator cannot see enough context to handle special cases well.</p>\n\n<p>You can fumble your way through all of this.  Your best approach is to get a compiler book, or take a compiler class.  Then all of this will be much clearer.   Certainly if you fumble your way through this, you will have a much better appreciation of the kinds of machinery the compiler people use to do this.  (Google my essay on \"Life After Parsing\").</p>\n"}], "owner": {"reputation": 63, "user_id": 4738966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcab4affa67bc8502ec3de642e725e93?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Davis", "link": "https://stackoverflow.com/users/4738966/liam-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1608, "favorite_count": 1, "accepted_answer_id": 29399537, "answer_count": 4, "score": 5, "last_activity_date": 1429783055, "creation_date": 1427905398, "question_id": 29395950, "link": "https://stackoverflow.com/questions/29395950/how-to-implement-a-language-interpreter-without-regular-expressions", "title": "How to implement a language interpreter without regular expressions?", "body": "<p>I am attempting to write an interpreted programming language which will read in files and output a bytecode-like format which can then be executed by a virtual machine.</p>\n\n<p>My original plan was:</p>\n\n<ul>\n<li>Begin by loading the contents of the file in to the memory of my interpreter,</li>\n<li>read each line (where a word is defined as being a series of letters followed by a space or escape character),</li>\n<li>using regular expressions, determine the parameters of the word,</li>\n<li>for example, <code>IF myvalue = 5 THEN</code> will become <code>IF</code> <code>myvalue</code> <code>5</code>,</li>\n<li>convert each of these words to the byte form (i.e. <code>IF</code> would become <code>0x09</code>),</li>\n<li>execute these bytes one by one (as the executor will understand that <code>IF</code> or <code>0x09</code> is followed by two bytes.</li>\n</ul>\n\n<p>I have been told that regular expressions is a terrible way to go about doing this, but I'm unsure as to if this is a good or bad way of implementing an interpreted language.</p>\n\n<p>This is mainly just for experience, so I don't mind if it isn't exactly performance friendly, but that would be a benefit.</p>\n\n<p>What is the best way of implementing my interpreter, and are there any examples (written in plain old C)?</p>\n"}, {"tags": ["c++", "c", "arrays", "printf"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1427905632, "post_id": 29395935, "comment_id": 46968303, "body": "You have a loop within a loop, and a semicolon as the body of the second loop. This means that <b>all</b> the data that you enter ends up at the position <code>10</code> of the array."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 6, "creation_date": 1427905657, "post_id": 29395935, "comment_id": 46968320, "body": "Remove semicolon after <code>for(indeks = 0; indeks &lt; 10; indeks++);</code> <b>Voting to close as a typo.</b>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1427905869, "post_id": 29395935, "comment_id": 46968464, "body": "<a href=\"http://isocpp.org/wiki/faq/newbie#main-returns-int\" rel=\"nofollow noreferrer\">main() returns an int</a>"}, {"owner": {"reputation": 85, "user_id": 4739046, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/340fe4a1565e65a676fcf2f52a2a3fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Typo boy", "link": "https://stackoverflow.com/users/4739046/typo-boy"}, "edited": false, "score": 0, "creation_date": 1427906013, "post_id": 29395935, "comment_id": 46968549, "body": "Thanks guys , Im new to programming . This helped me alot."}], "answers": [{"comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 1, "creation_date": 1427906009, "post_id": 29396087, "comment_id": 46968545, "body": "while we are at it, <code>j</code> and <code>rezultat</code> are unused, and <code>indeks</code> (im assuming he meant index) and <code>n</code> can be declared inisde the <code>for</code> loops.  <code>cin</code> and <code>cout</code> would probably be better to use, and you can also remove the <code>{</code> and <code>}</code> near the second for loop"}, {"owner": {"reputation": 85, "user_id": 4739046, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/340fe4a1565e65a676fcf2f52a2a3fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Typo boy", "link": "https://stackoverflow.com/users/4739046/typo-boy"}, "reply_to_user": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 0, "creation_date": 1427906885, "post_id": 29396087, "comment_id": 46969055, "body": "@dwcanillas , oh yeah about that j and rezultat ... I used(copied) my old code so i forgot to remove it , sorry :D."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 4, "last_activity_date": 1427906011, "last_edit_date": 1427906011, "creation_date": 1427905834, "answer_id": 29396087, "question_id": 29395935, "link": "https://stackoverflow.com/questions/29395935/int-array-not-printing-good/29396087#29396087", "title": "Int Array[ ] not printing good.", "body": "<p>The <code>for</code> loop does nothing, since it ends with <code>;</code> and as the <code>while</code> loop iterates, <code>indeks</code> will always be <code>10</code>. I suggest the following</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()                                  // correct function type\n    {\n    int indeks, a[11], j, rezultat[50];\n    int n = 0;\n\n    printf(\"Unesite elemenate niza\\n\");\n\n    //while (n &lt; 10)                        // delete while loop\n    //{\n\n    for(indeks = 0; indeks &lt; 10; indeks++)  // remove trailing ;\n        scanf(\"%d\", &amp;a[indeks]);\n\n    //n++;                                  // delete unnecessary line\n    //} \n\n    for (n = 0; n &lt; 10; n++) {\n        printf(\"%d\\n\", a[n]);\n    }\n   return 0;                                // add return value\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 4739046, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/340fe4a1565e65a676fcf2f52a2a3fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Typo boy", "link": "https://stackoverflow.com/users/4739046/typo-boy"}, "edited": false, "score": 0, "creation_date": 1427906143, "post_id": 29396088, "comment_id": 46968617, "body": "geez man :D , i got answer few seconds ago , no need for writing whole code. I&#39;m new to c++ and whole programing thing . Thanks anyway."}], "tags": [], "owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "is_accepted": false, "score": 1, "last_activity_date": 1427905838, "creation_date": 1427905838, "answer_id": 29396088, "question_id": 29395935, "link": "https://stackoverflow.com/questions/29395935/int-array-not-printing-good/29396088#29396088", "title": "Int Array[ ] not printing good.", "body": "<p>This \n<code>for(indeks = 0; indeks &lt; 10; indeks++);</code>\ndoes nothing except incrementing <code>indeks</code> 10 times.\nI could write the whole code corrected for You but how will You learn then?</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 4739046, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/340fe4a1565e65a676fcf2f52a2a3fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Typo boy", "link": "https://stackoverflow.com/users/4739046/typo-boy"}, "edited": false, "score": 0, "creation_date": 1427906550, "post_id": 29396144, "comment_id": 46968881, "body": "Yeah I did , I looked up for Weather Vane it all works fine . Thanks for answer . I&#39;m sorry , I&#39;m still new to this whole thing."}], "tags": [], "owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "is_accepted": false, "score": 0, "last_activity_date": 1427906046, "creation_date": 1427906046, "answer_id": 29396144, "question_id": 29395935, "link": "https://stackoverflow.com/questions/29395935/int-array-not-printing-good/29396144#29396144", "title": "Int Array[ ] not printing good.", "body": "<p>Your code seems to have a couple of syntax errors. <strong>Weather Vane</strong> has posted the correct version, please look at his answer.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nvoid main()\n{\n    const unsigned int A_SIZE( 10 );\n    int a[ A_SIZE ];\n\n    printf( \"Unesite elemenate niza\\n\" );\n\n    for ( unsigned int indeks( 0 ); indeks &lt; A_SIZE; ++indeks )\n        scanf( \"%d\", &amp;a[ indeks ] );\n\n    for ( unsigned int indeks( 0 ); indeks &lt; A_SIZE; ++indeks )\n        printf( \"%d\\n\", a[ indeks ] );\n\n    std::cout &lt;&lt; \"Enter a character to exit: \"; char c; std::cin &gt;&gt; c;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4739046, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/340fe4a1565e65a676fcf2f52a2a3fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Typo boy", "link": "https://stackoverflow.com/users/4739046/typo-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 29396087, "answer_count": 3, "score": 2, "last_activity_date": 1427906046, "creation_date": 1427905364, "question_id": 29395935, "link": "https://stackoverflow.com/questions/29395935/int-array-not-printing-good", "title": "Int Array[ ] not printing good.", "body": "<p>here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n   {\n   int indeks, a[11], j, rezultat[50];\n   int n = 0;\n\n   printf(\"Unesite elemenate niza\\n\");\n\n   while (n &lt; 10)\n   {\n\n     for(indeks = 0; indeks &lt; 10; indeks++);\n     scanf(\"%d\", &amp;a[indeks]);\n     n++;\n   } \n    for (n = 0; n &lt; 10; n++) {\n    printf(\"%d\\n\", a[n]);\n   }\n\n}\n</code></pre>\n\n<p>Hello , I have problem that this doesn't print array as a integer number that I enter in . </p>\n\n<p>It always print out -858993460 ten times. </p>\n\n<p>this is how it looks in cmd.\n(sorry for bad english)</p>\n\n<pre><code> Unesite elemenate niza: \n 1     /input starts here\n 3\n 5\n 1\n 0\n 2\n 3\n 5\n 7\n 4     /ends here\n-858993460  \n-858993460\n-858993460\n-858993460\n-858993460\n-858993460 \n-858993460\n-858993460\n-858993460\n-858993460      /output result\nPress any key to continue . . .\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 1065, "user_id": 2981403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0lENO.png?s=128&g=1", "display_name": "Hozikimaru", "link": "https://stackoverflow.com/users/2981403/hozikimaru"}, "edited": false, "score": 2, "creation_date": 1427905502, "post_id": 29395873, "comment_id": 46968203, "body": "You can simply google this &quot;C functions&quot;. It seems to me that no research whatsoever was done."}], "answers": [{"tags": [], "owner": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "is_accepted": false, "score": 1, "last_activity_date": 1427906022, "last_edit_date": 1427906022, "creation_date": 1427905452, "answer_id": 29395972, "question_id": 29395873, "link": "https://stackoverflow.com/questions/29395873/how-to-declare-an-array-in-a-function-and-call-the-function-in-c/29395972#29395972", "title": "How to declare an array in a function and call the function in C", "body": "<pre><code>int function(int x, char *array)\n{\n     //do some work\n     return 0;\n}\n</code></pre>\n\n<p>And in main</p>\n\n<pre><code>int main()\n{\n    char arr[5] = {'a', 'b', 'c', 'd'};\n    int x = 5;\n    function(x, &amp;arr[0]);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 2, "creation_date": 1427906215, "post_id": 29396112, "comment_id": 46968666, "body": "Arrays and pointers are different. It&#39;s just that arrays easily decay into pointers."}, {"owner": {"reputation": 662, "user_id": 4430622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gs3LViEzxaA/AAAAAAAAAAI/AAAAAAAAAGU/zt8NSZNqsQg/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4430622/dan"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1427906478, "post_id": 29396112, "comment_id": 46968838, "body": "Hmm. Ok, thanks. You don&#39;t have to pass them by reference to modify the array contents in a function though, correct?"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1427911611, "post_id": 29396112, "comment_id": 46971514, "body": "The normal way you access the data in an array from a different function is that you pass by value a pointer to the array. You normally write this as <code>function_1(15, arr)</code> because in that context (and many others) the array <code>arr</code> will decay into a pointer."}], "tags": [], "owner": {"reputation": 662, "user_id": 4430622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gs3LViEzxaA/AAAAAAAAAAI/AAAAAAAAAGU/zt8NSZNqsQg/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4430622/dan"}, "is_accepted": false, "score": -1, "last_activity_date": 1427905928, "creation_date": 1427905928, "answer_id": 29396112, "question_id": 29395873, "link": "https://stackoverflow.com/questions/29395873/how-to-declare-an-array-in-a-function-and-call-the-function-in-c/29396112#29396112", "title": "How to declare an array in a function and call the function in C", "body": "<p>Interestingly enough, arrays are already pointers in C. So if you want to pass an array as a pointer to your function, you just simply pass the array you declared! I gave a little example below, although, I don't know what your code is supposed to do. I passed <code>function_1(...)</code> the number 12, and then the array pointer.</p>\n\n<pre><code>int function_1(int x, *array)\n{\n    ...\n}\n\nint main()\n{\n  //declare a ten element integer array\n  int arr[10];\n\n  //calls the function, passing in 12 for the integer, and a pointer to the array.\n  function_1(12, arr);\n\n  ...\n\n  return 0;\n}\n</code></pre>\n\n<p>I hope this clears it up a little. The method of using the square brackets with arrays <code>[]</code> is actually something you can do with all pointers in C.You don't really need to consider that part too much yet, but just remember that arrays are already pointers, so you don't need to do anything else to pass them as pointers. In fact, you could rewrite your function to just use an array as an argument, like this, rather than using a <code>*</code> for pointers:</p>\n\n<pre><code>int function_1(int x, int array[])\n{\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4598281, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f9a4ddbcd2a5b49ef38ea12df3b67f28?s=128&d=identicon&r=PG&f=1", "display_name": "loup noir", "link": "https://stackoverflow.com/users/4598281/loup-noir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1427907723, "creation_date": 1427905216, "last_edit_date": 1427907723, "question_id": 29395873, "link": "https://stackoverflow.com/questions/29395873/how-to-declare-an-array-in-a-function-and-call-the-function-in-c", "title": "How to declare an array in a function and call the function in C", "body": "<p>I have an assignment and I cannot figure out this part.  </p>\n\n<p>The assignment requires that I create two separate functions and call them in the main.  So my question is what is the syntax for calling a pointer to an array and how do I call that function in the main program?  For example,</p>\n\n<pre><code>int function_1(int x, *array);\n</code></pre>\n\n<p>How would I call <code>function_1</code>?  Or am I completely lost here?</p>\n\n<p>I should add that anytime I try and call the function with the array, I get this error:\n<code>[Warning] assignment makes pointer from integer without a cast [enabled by default]</code></p>\n"}, {"tags": ["c", "embedded", "parameter-passing", "function-pointers"], "comments": [{"owner": {"reputation": 10183, "user_id": 1292061, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/afD1k.jpg?s=128&g=1", "display_name": "ravron", "link": "https://stackoverflow.com/users/1292061/ravron"}, "edited": false, "score": 1, "creation_date": 1427906370, "post_id": 29395665, "comment_id": 46968756, "body": "I&#39;d argue that what you have now would be &quot;cleaner&quot; than anything that involved manually manipulating the call stack. That said, you can use assembly to do this."}], "answers": [{"comments": [{"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427906616, "post_id": 29396215, "comment_id": 46968914, "body": "Indeed, I need to push numerous (<code>sizeIn</code>) bytes to what I call (probably wrongly) CallStack so the data can be recouped by called function. Pass just the <code>sizeIn</code> value is useless."}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427907068, "post_id": 29396215, "comment_id": 46969139, "body": "This is what I thought first. So I think that your current implementation is the cleanest, since there is one <code>HW_Usb_Read</code> built-in function for each param size."}, {"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427909499, "post_id": 29396215, "comment_id": 46970364, "body": "In fact, <code>HW_Usb_Read_{2,4}Bytes</code> calls <code>HW_Usb_Read_1Byte</code> multiple times. It&#39;s the switch I would like to remove."}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427918212, "post_id": 29396215, "comment_id": 46975172, "body": "Added another possibility in the message"}, {"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427919693, "post_id": 29396215, "comment_id": 46975966, "body": "Your edit did not really help. If there is 0|2|4 bytes of data the called function need a void|int16|int32 parameter as input, and I will still need a swith do convert the address to a pointer of a function who require a void|int16|int32 as parameter."}, {"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427920232, "post_id": 29396215, "comment_id": 46976261, "body": "If I call a \u02cbvoid (*f)(void)\u02cb function with an \u02cbint32\u02cb parameter (\u02cbf(param)\u02cb) I think I will crash my program. Am I wrong ?"}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427921099, "post_id": 29396215, "comment_id": 46976735, "body": "&quot;Undefined Behavior&quot;. So probably a seg fault. But couldn&#39;t you just add a condition to detect if param is 0 to differ the call ?..."}, {"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427958643, "post_id": 29396215, "comment_id": 46988357, "body": "That exactly what I actually do with the switch."}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427962028, "post_id": 29396215, "comment_id": 46989912, "body": "4 labels switch versus 1 for loop and 1 extra condition, it&#39;s up to you. But that&#39;s true, rigid API functions imply a pretty rigid handling."}, {"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427962925, "post_id": 29396215, "comment_id": 46990340, "body": "You miss a point: If I call a <code>void (*f)(int16)</code> function with an <code>int32</code> parameter (<code>f(param)</code>) I think I will crash my program. Am I wrong ? And what about the &quot;two int32 params&quot; case ?"}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427966108, "post_id": 29396215, "comment_id": 46991910, "body": "There is an automatic cast. But I didn&#39;t had in mind the <code>int32, int32</code> case"}, {"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427967311, "post_id": 29396215, "comment_id": 46992576, "body": "Not sure about that. A <code>void (*f)(int16)</code> function casted to a <code>void (*f)(int32)</code> (because, if you did not switch, you only call one type of function) called with an <code>int32</code> parameter (the fact that it contain only 16 bytes of data is irrelevant) is an &quot;Undefined Behavior&quot; for me.."}], "tags": [], "owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1427918146, "last_edit_date": 1427918146, "creation_date": 1427906246, "answer_id": 29396215, "question_id": 29395665, "link": "https://stackoverflow.com/questions/29395665/how-to-pass-n-bytes-of-parameters-to-a-function-called-by-pointer/29396215#29396215", "title": "How to pass N bytes of parameters to a function called by pointer", "body": "<p>It is possible to push a var on a stack using inline assembly:</p>\n\n<pre><code>__asm {\n    push sizeIn\n    ; You can also call your fp using asm:\n    call address\n    ; But it's not very safe because your compiler may not \n    ; have saved its registries before the call\n}\n</code></pre>\n\n<p>However I wonder how pushing <code>sizeIn</code> can help you, don't you need to push the result of <code>HW_Usb_Read_NBytes()</code> instead?</p>\n\n<hr>\n\n<p>EDIT: </p>\n\n<p>By calling <code>HW_Usb_Read_1Byte()</code> multiple times and with bitwise operations you can remove the switch case.</p>\n\n<pre><code>int32 param = 0;\nfor (int i = 0; i &lt; sizeIn; i++)\n   param |= (HW_Usb_Read_1Byte() &lt;&lt; (i * 8));\n</code></pre>\n\n<p>The byte you get at each iteration is shifted to the left by the number of bits we have read until now and is appended to your integer.</p>\n\n<p>However this will only works if the data read comes from a little endian system. And if your API is providing a method for each data size, it may not be the case.</p>\n"}, {"comments": [{"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427910096, "post_id": 29397209, "comment_id": 46970682, "body": "My original purpose is to reduce code size (It is a 16Ko ram DSP, when I take the project in hand all was used, now it is 8/16Ko). I will take a look (maybe copy-past some code) but I can&#39;t load the full library."}, {"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1427959052, "post_id": 29397209, "comment_id": 46988562, "body": "I take a look to the sources,  libffi actually perform a switch over the type of the variables. No magic __asm tricks."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1427909638, "creation_date": 1427909638, "answer_id": 29397209, "question_id": 29395665, "link": "https://stackoverflow.com/questions/29395665/how-to-pass-n-bytes-of-parameters-to-a-function-called-by-pointer/29397209#29397209", "title": "How to pass N bytes of parameters to a function called by pointer", "body": "<p>You might use <a href=\"https://sourceware.org/libffi/\" rel=\"nofollow\">libffi</a> (if it supports your target processor architecture, calling conventions, and ABI) which enables you to \"emulate\" an arbirary call.</p>\n\n<p>However, you should pass a pointer to the data, not the data itself.</p>\n"}, {"tags": [], "owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "is_accepted": false, "score": 0, "last_activity_date": 1427969476, "last_edit_date": 1495542497, "creation_date": 1427969476, "answer_id": 29410334, "question_id": 29395665, "link": "https://stackoverflow.com/questions/29395665/how-to-pass-n-bytes-of-parameters-to-a-function-called-by-pointer/29410334#29410334", "title": "How to pass N bytes of parameters to a function called by pointer", "body": "<p>As <a href=\"https://stackoverflow.com/questions/29395665/how-to-pass-n-bytes-of-parameters-to-a-function-called-by-pointer/29396215?noredirect=1#comment46968756_29395665\">Riley Avron</a> says, use some assembly code is a solution.</p>\n\n<p>For that I need to know how to Interface C and Assembly Language\nwith the DSP I use.</p>\n\n<p>That is called the <a href=\"http://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow noreferrer\">Calling convention</a>. I find few documentation about it, <a href=\"http://www.ti.com/lit/an/spra493/spra493.pdf\" rel=\"nofollow noreferrer\">this one</a> is about the TMS320 family but with <a href=\"http://en.wikipedia.org/wiki/Floating-point_unit\" rel=\"nofollow noreferrer\">FPU</a>, which is not the case with the <a href=\"http://www.ti.com/product/tms320f2812\" rel=\"nofollow noreferrer\">TMS320f2812</a>.</p>\n\n<p>I remembered that the version of code composer studio I use allow to mix source and ASM code when the JTAG is connected.</p>\n\n<p>Here what I can see with my current code:</p>\n\n<pre><code>// Case 0:\nMOVL    XAR7,@XAR2          ; put address in XAR7\nLCR     *XAR7               ; call the function\n...\n\n// Case 1:\nLCR     HW_Usb_Read_2Bytes  ; get the data\nMOVL    XAR7,@XAR2          ; put address in XAR7\nLCR     *XAR7               ; call the function\n...\n\n// Case 2:\nLCR     HW_Usb_Read_4Bytes  ; get the data\nMOVL    XAR7,@XAR2          ; put address in XAR7\nLCR     *XAR7               ; call the function\n...\n</code></pre>\n\n<p>We can see that the data recouped by the calls to <code>HW_Usb_Read_{2|4}Bytes</code> are not treated. I suppose that the called function will take it on the stack where they have been put.</p>\n\n<p>As I say, <code>HW_Usb_Read_4Bytes</code> only call <code>HW_Usb_Read_2Bytes</code> two times and compose an <code>UInt32</code> from two <code>UInt16</code>.</p>\n\n<p>The TMS320C28x has a <a href=\"http://www.ti.com/lit/ug/spru430e/spru430e.pdf\" rel=\"nofollow noreferrer\">RPT (\u00a72.5.3)</a> operation which allows the execution of a single instruction multiples times.</p>\n\n<p>We can image a solution like that:</p>\n\n<pre><code>RPT #N\u22121                        ; Where #N is sizeIn/2\n||LCR     HW_Usb_Read_2Bytes    ; get the data\nMOVL    XAR7,@XAR2              ; put address in XAR7\nLCR     *XAR7                   ; call the function\n</code></pre>\n\n<p>Actually there is some constraints to achieve this:</p>\n\n<ul>\n<li>I have no idea on how to be sure that <code>address</code> is in <code>XAR2</code>.</li>\n<li>Will the data endian be good for the multiple parameter case ?</li>\n</ul>\n"}], "owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1427969476, "creation_date": 1427904567, "last_edit_date": 1427959401, "question_id": 29395665, "link": "https://stackoverflow.com/questions/29395665/how-to-pass-n-bytes-of-parameters-to-a-function-called-by-pointer", "title": "How to pass N bytes of parameters to a function called by pointer", "body": "<p>My software drive an embedded device who run a C code on a TI DSP TMS320f2812.</p>\n\n<p>The communication is done via an USB serial port emulation.</p>\n\n<p>At some point, device side, I need to parse a message who means \"call the function at given address with given parameters\".\nThe message contains:</p>\n\n<ul>\n<li><em>4</em> bytes for the function address.</li>\n<li><em>1</em> byte for the parameter(s) size (in byte).</li>\n<li><em>n</em> bytes for the parameter(s) data.</li>\n</ul>\n\n<p>Here the code I currently use:</p>\n\n<pre><code>typedef void    (*void_fct_void)    (void);\ntypedef void    (*void_fct_int16)   (int16);\ntypedef void    (*void_fct_int32)   (int32);\ntypedef void    (*void_fct_2int32)  (int32, int32);\n\n...\n\nUint32 address;\nUint16 sizeIn;\n\naddress = HW_Usb_Read_4Bytes();\nsizeIn = HW_Usb_Read_1Byte();\n\nswitch(sizeIn) {\n    case 0:\n        ((void_fct_void) address)();\n        break;              \n    case 2:\n        ((void_fct_int16) address)(HW_Usb_Read_2Bytes());\n        break;\n    case 4:\n        ((void_fct_int32) address)(HW_Usb_Read_4Bytes());\n        break;\n    case 8:\n        ((void_fct_2int32) address)(HW_Usb_Read_4Bytes(), HW_Usb_Read_4Bytes());\n        break;\n}\n</code></pre>\n\n<p>I wonder if there is no way to make it more generic and avoid the switch, like:</p>\n\n<pre><code>Uint32 address;\nUint16 sizeIn;\n\naddress = HW_Usb_Read_4Bytes();\nsizeIn = HW_Usb_Read_1Byte();\n\nputNbytesOnParamsStack(sizeIn); // magic function, will call HW_Usb_Read_1Byte 'sizeIn' times.\n((void_fct_void) address)();\n</code></pre>\n\n<p><strong>Also the target functions are numerous and used by the embedded code, I can't change their signatures.</strong></p>\n"}, {"tags": ["c", "assembly", "mips"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1427903675, "post_id": 29395278, "comment_id": 46967009, "body": "Yes, you should count the <code>bne</code> no matter whether the condition is true or not. You should also add up the cycles for the <code>func</code> unless specifically told not to."}, {"owner": {"reputation": 5, "user_id": 4738925, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QWpXZioiT1o/AAAAAAAAAAI/AAAAAAAAACI/bLUZeZw0l_I/photo.jpg?sz=128", "display_name": "Conor59", "link": "https://stackoverflow.com/users/4738925/conor59"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1427903826, "post_id": 29395278, "comment_id": 46967121, "body": "Yes we are only supposed to count the number of instructions executed in the main body of the code down to endif: add $a0, $v0, $zero  So, do I still count the &#39;add&#39; inside the if statement even if the statement is not true?"}, {"owner": {"reputation": 5177, "user_id": 95674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e606b10c31dd8d9eecd1034789653e44?s=128&d=identicon&r=PG", "display_name": "Barett", "link": "https://stackoverflow.com/users/95674/barett"}, "edited": false, "score": 0, "creation_date": 1427907527, "post_id": 29395278, "comment_id": 46969386, "body": "This is a tough homework problem!"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427925032, "post_id": 29395278, "comment_id": 46978525, "body": "Since MIPS has branch delay slots, you also have to count the instruction following a branch, regardless whether it was followed or not. If the instruction following the branch is not executed on the followed branch, you need to add a NOP for the non-followed execution. Also, pipelining."}], "answers": [{"tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1427929577, "creation_date": 1427929577, "answer_id": 29402366, "question_id": 29395278, "link": "https://stackoverflow.com/questions/29395278/mips-code-cycle-time/29402366#29402366", "title": "MIPS Code Cycle Time", "body": "<p>Depending on whether you want to approximate the time (by instruction counting) or determine the actual execution time, you have to count the <code>if</code> instruction no matter what.</p>\n\n<p>In most modern CPUs, any flavor of jump instruction includes some penalties&mdash;maybe (for some CPUs) even when a conditional branch is <em>not</em> taken!</p>\n\n<p>Penalties arise from <a href=\"https://en.wikipedia.org/wiki/CPU_cache#Cache_miss\" rel=\"nofollow\">cache misses</a>, <a href=\"https://en.wikipedia.org/wiki/Pipeline_%28computing%29\" rel=\"nofollow\">pipeline</a> perturbations, and <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"nofollow\">branch prediction</a>.</p>\n\n<p>Since I don't understand what this statement means, I am not dissecting the code path further.</p>\n\n<pre><code>TMP = z \u00d7 y;\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4738925, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QWpXZioiT1o/AAAAAAAAAAI/AAAAAAAAACI/bLUZeZw0l_I/photo.jpg?sz=128", "display_name": "Conor59", "link": "https://stackoverflow.com/users/4738925/conor59"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427929577, "creation_date": 1427903364, "last_edit_date": 1427927080, "question_id": 29395278, "link": "https://stackoverflow.com/questions/29395278/mips-code-cycle-time", "title": "MIPS Code Cycle Time", "body": "<p>I need help with a task of determining the number of cycles for the MIPS code below.</p>\n\n<p>My main issue is with determining if the condition is not met, is the if statement still executed (thus adding to the number of total cycles)</p>\n\n<p>Assuming a single cycle implementation scheme i.e., each instruction requires\none clock cycle to execute.\n1. What is the number of cycles required to execute the code when\na. s==0?\nb. s==1?</p>\n\n<p>This is what I have come up with myself:</p>\n\n<p>a. 9 cycles</p>\n\n<p>b. 8 cycles (it does not do the instruction contained in the if statement, and does not jump to the endif statement - (goes to the function) then the final endif.</p>\n\n<p>This is the sample of MIPS:</p>\n\n<pre><code>main: \n\n # Evaluate the expression.\n\n # Put the final result in a0 to prepare for the syscall.\n\naddi    $sp, $sp, -4    # Make space on stack.\nsw  $ra, 0($sp) # Save return address.\n\nli  $t0, 1      # Put 0 in a register \nli  $a1, 4      # Put 4 in a register \nli  $a2, 6      # Put 6 in a register \n\nif: bne   $t0, $zero, else    # (i == 0) ?\n\nadd $v0, $a1, $a2   # v0 = a1 + a2\n\nj  endif\n\nelse:   jal func\n\nendif:\nadd $a0, $v0, $zero\n\nli  $v0, 1\n</code></pre>\n\n<p>So I need to determine the number of cycles if a. s = 1, and b. s = 0 assuming that each instruction will take 1 cycle.</p>\n\n<p>The C code for this is</p>\n\n<pre><code>main()\n{\nint A; a=4; b=6; s=3;\nint function(a,b);\nif (s==0)\nA = a+b;\nelse\nA = function(a,b)\nreturn;\n}\n# Function to multiply two numbers\nfunction(z,y)\n{\nint TMP;\nTMP = z \u00d7 y;\nret\n</code></pre>\n\n<p>Apologies for formatting. My first post on this forum and still working things out. Any help greatly appreciated.</p>\n"}, {"tags": ["c", "cobol"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4729852"}, "reply_to_user": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427904946, "post_id": 29395215, "comment_id": 46967856, "body": "The last line is basically assessing the top of the stack, it get the top value(st.top) and then gets it from the items array holding integers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4729852"}, "reply_to_user": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427906041, "post_id": 29395215, "comment_id": 46968559, "body": "Open Cobol. Im sorry, I wasnt asking how to implement the stack. I was wanted to know syntax. Like how would that struct and that statement look in Cobol so that I can do the rest of the stack my self."}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427906287, "post_id": 29395215, "comment_id": 46968711, "body": "OK. OpenCOBOL is now GnuCOBOL. If you go here, and ask the question in the <code>Help getting started</code> it&#39;ll be a much better format for the likely-iterative exploration of your question."}], "answers": [{"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1427922663, "post_id": 29400725, "comment_id": 46977541, "body": "@Quentin: bear in mind this was written by a total COBOL noob, so it&#39;s not representative of proper COBOL programming.  I&#39;ll agree that COBOL ain&#39;t all that pretty, but it&#39;s not anywhere near as eye-stabby as Perl."}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427926172, "post_id": 29400725, "comment_id": 46978996, "body": "And I&#39;m not sure this would count as a &quot;stack&quot;, or are all arrays in C &quot;on the stack&quot;? To one of your asides, by Standard COBOL does not have symbolic constants. Some compilers do as an Extension, for instance a level-number 78. Combine that with conditional compiler directives (again non-Standard) and I think that would provide what you want there. I thought a stack was different from an array?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427928042, "post_id": 29400725, "comment_id": 46979705, "body": "@BillWoodger: See my edit; I fleshed out the C equivalent.  Note that in this case we&#39;re using an array to implement a stack data structure."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427928393, "post_id": 29400725, "comment_id": 46979823, "body": "@BillWoodger: It&#39;s clear enough to a C or C++ programmer.  I&#39;ll probably edit this answer again at some point as I learn more."}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427928473, "post_id": 29400725, "comment_id": 46979842, "body": "If you are developing an interest, you can get yourself an open-source GnuCOBOL compiler, see the SourceForge link under the question."}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427928788, "post_id": 29400725, "comment_id": 46979938, "body": "And yes, everything in the WORKING-STORAGE is statically defined, GnuCOBOL (for instance) does have BASED storage, but you still make the definition yourself and acquire storage for it. If you want to &quot;model&quot; a structure on another, you&#39;d use a copybook for the structure and COPY ... REPLACING ... to create another definition with different names. You didn&#39;t actually use the INDEXED BY that you defined, so that&#39;s something to look into :-)"}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1427929606, "post_id": 29400725, "comment_id": 46980201, "body": "A quick look at the tutorial reveals a lot of little things which won&#39;t compile in the first few parts. This one, <a href=\"http://www.csis.ul.ie/cobol/\" rel=\"nofollow noreferrer\">csis.ul.ie/cobol</a>, should be more robust and less Mainframe-centric."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427931490, "post_id": 29400725, "comment_id": 46980813, "body": "Way back when, like 35years ago, I wrote COBOL for a living for an insurance company.  However, thankfully, My career shifted from mainframe COBOL to microprocessors with assembly, pascal, and finally C.   I must admit I have forgotten most of the language and not kept any examples.  So I cannot help you with the details.  however, it has been a interesting walk down memory lane."}, {"owner": {"reputation": 973, "user_id": 1734032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/69zJo.jpg?s=128&g=1", "display_name": "mckenzm", "link": "https://stackoverflow.com/users/1734032/mckenzm"}, "edited": false, "score": 0, "creation_date": 1427947709, "post_id": 29400725, "comment_id": 46984533, "body": "Arrays are sometimes used  in a stack-like manner in COBOL for CICS transactions as &quot;depth&quot; increases and to keep URL-like histories of how that depth was traversed to by a user.  One just needs to be inventive, there is no stack, but there is &#39;MOD&#39; . and also [:]  for shift up, shift down. So for an array x of size 100 we can PUSH by moving the last 99 elements and updating the first.  Not efficient but maybe easier than using a linked list in shared memory or advancing the subscript/address. I am not a fan of very short variable names for any of this."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1427928021, "last_edit_date": 1427928021, "creation_date": 1427921982, "answer_id": 29400725, "question_id": 29395215, "link": "https://stackoverflow.com/questions/29395215/how-would-this-c-struct-be-translated-into-cobol/29400725#29400725", "title": "How would this C struct be translated into Cobol", "body": "<p>This is very much a stab in the dark since I've never written a line of COBOL before today<sup>1</sup>.  However, after a little <a href=\"http://www.tutorialspoint.com/cobol/index.htm\" rel=\"nofollow\">googling</a><sup>2</sup> and playing around in <a href=\"http://ideone.com/\" rel=\"nofollow\">ideone</a>, I think I've at least captured the flavor of what the code would look like, if not the actual solution:</p>\n\n<pre><code>IDENTIFICATION DIVISION.\nPROGRAM-ID. IDEONE.\n\nENVIRONMENT DIVISION.\n\nDATA DIVISION.\n  WORKING-STORAGE SECTION.\n  01 WS-STACK.\n    05 WS-TOP PIC 9 VALUE 0.\n    05 WS-ITEMS OCCURS 10 TIMES INDEXED BY I.\n      10 WS-M PIC 9 VALUE 0.\n\nPROCEDURE DIVISION.\n    ADD 1 TO WS-TOP.\n    MOVE 9 TO WS-M(WS-TOP).\n    ADD 1 TO WS-TOP.\n    MOVE 8 to WS-M(WS-TOP).\n    DISPLAY \"WS-STACK :\" WS-STACK.\n    DISPLAY \"WS-TOP :\" WS-TOP.\n    DISPLAY \"WS-ITEMS[WS-STACK.WS-TOP].M :\" WS-M(WS-TOP).\n    SUBTRACT 1 FROM WS-TOP.\n    DISPLAY \"WS-TOP :\" WS-TOP.\n    DISPLAY \"WS-ITEMS[WS-STACK.WS-TOP].M :\" WS-M(WS-TOP).\n    STOP RUN.\n</code></pre>\n\n<p>Yes, size is hardcoded to 10 (don't know how to do symbolic constants in COBOL), and <code>WS-TOP</code> and <code>WS-M</code> can only store values from 0 to 9.  </p>\n\n<p>Needless to say, data types in COBOL and C are very different.  I haven't actually created a new stack type; I've declared a single data items with a couple of sub-items, one of which is a table that can store 10 instances of something called <code>WS-M</code>.  This is effectively the same as writing</p>\n\n<pre><code>int main( void )\n{\n  int top = 10;\n  int m[10];\n\n  m[--top] = 9;\n  m[--top] = 8;\n\n  printf(\"top = %d\\n\", top );\n  printf(\"m[%d] = %d\", top, m[top] );\n  top++;\n\n  printf(\"top = %d\\n\", top );\n  printf(\"m[%d] = %d\", top, m[top] );\n  return 0;\n}\n</code></pre>\n\n<p>in C, with the main difference being that I wrote the C code such that the stack grows \"downwards\" (which is more natural).  As far as I could tell in the ten minutes I spent going through that COBOL tutorial, COBOL does not really have an equivalent to a <code>struct</code> type; even though data items can be grouped in a hierarchical manner, you're not creating a new <code>struct</code> or record type as such.  If I wanted multiple stacks, I'd have to declare multiple, separate backing stores and index variables.  </p>\n\n<p>I think.  </p>\n\n<p>I'll have to do a little more reading.  </p>\n\n<p><hr>\n<sup>1.  At this point in the day I would rather work on just about <em>anything</em> other than the problem in front of me right now, and I've always been curious about how the other half lived.  Also, I'm working on an online banking platform and I know half our backends are written in COBOL, so it wouldn't hurt to take sime time to learn it.\n<br><br>\n2.  I cannot vouch for the quality of this tutorial; it's the first one I found that seemed reasonably complete and easy to read.</sup></p>\n"}, {"comments": [{"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1428334485, "post_id": 29473082, "comment_id": 47109774, "body": "COMP-4, where COMP-4 is a binary (not all compilers) is only an integer if not defined with an assumed decimal place. Two&#39;s complement is down to implementation, although I don&#39;t know of one that isn&#39;t. COMP is another binary. All the <code>depending on</code> will get is bounds-checking, if available and if turned on. This is only LIFO (OP didn&#39;t specify) with a bit of GIGO as there is no checking on the push/pop paragraphs. The pop should not set a zero, otherwise the implication is zero is an invalid actual value. CURR instead of TOP removes possible confusion about why the top is at the bottom..."}, {"owner": {"reputation": 4168, "user_id": 344249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OQ3ss.jpg?s=128&g=1", "display_name": "Joe Zitzelberger", "link": "https://stackoverflow.com/users/344249/joe-zitzelberger"}, "reply_to_user": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1428357787, "post_id": 29473082, "comment_id": 47121499, "body": "TOP is at the bottom?  Stack-Items (TOP) should always have a memory address that is equal to or greater than Stack-Items (1), how is that at the bottom?"}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1428361645, "post_id": 29473082, "comment_id": 47122824, "body": "No. I can implement a stack as a Linked List, acquiring storage as I go. Will the memory address always be higher as the stack grows? Maybe, maybe not, and it doesn&#39;t matter. Anyway, probably for a C/C++ programmer its not confusing. Just me. Your POP must provide the data from the stack, and both PUSH and POP must do bounds checking (although with a Linked List exceeding the current allocation can just mean &quot;get more storage&quot;)."}], "tags": [], "owner": {"reputation": 4168, "user_id": 344249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OQ3ss.jpg?s=128&g=1", "display_name": "Joe Zitzelberger", "link": "https://stackoverflow.com/users/344249/joe-zitzelberger"}, "is_accepted": false, "score": 0, "last_activity_date": 1428329828, "creation_date": 1428329828, "answer_id": 29473082, "question_id": 29395215, "link": "https://stackoverflow.com/questions/29395215/how-would-this-c-struct-be-translated-into-cobol/29473082#29473082", "title": "How would this C struct be translated into Cobol", "body": "<p>You would do that like so:</p>\n\n<pre><code>*&gt; Not a symbolic constant, but if it is never referenced as a \n*&gt; target of a move/compute, the compiler should recognize that.\n*&gt; and tune for that.\n\n01 Stack-Size      Pic S9(8) comp-4   Value &lt;&lt;some-number&gt;&gt;.\n\n*&gt; The \"comp-4\" data type is a twos complement integer, S9(8) makes\n*&gt; it a 32-bit word.  Depending upon your compiler, you will sometimes\n*&gt; see \"binary\" or \"comp-5\"\n\n01 My-Stack.\n  02 Stack-Top     Pic S9(8) comp-4   Value 0.\n  02 Stack-Items   occurs 0 to &lt;&lt;some-maximum-size&gt;&gt; \n                   depending on Stack-Size.\n*&gt;-------*\n*&gt; This is your data structure, if you made it a copybook, you would have \n*&gt; the similar effect of having the struct def from the C code. You can\n*&gt; use the copy/replacing features if you need to make multipule data\n*&gt; items with different names. \n*&gt;\n    03 Stack-M     Pic S9(8) comp-5.\n*&gt;-------*\n</code></pre>\n\n<p>To access the current value on top of the stack:</p>\n\n<pre><code> Move Stack-M (Stack-Top) to where-ever\n</code></pre>\n\n<p>Some helpful paragraphs:</p>\n\n<pre><code> Pop-Stack.\n     Move 0 to Stack-M (Stack-Top)\n     Subtract 1 from Stack-Top\n     Exit.\n\n Push-Stack.\n     Add 1 to Stack-Top\n     Move &lt;&lt;whatever value&gt;&gt; to Stack-M (Stack-Top)\n     Exit.\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4729852"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1428329828, "creation_date": 1427903155, "question_id": 29395215, "link": "https://stackoverflow.com/questions/29395215/how-would-this-c-struct-be-translated-into-cobol", "title": "How would this C struct be translated into Cobol", "body": "<p>I'm pretty new to Cobol and I'm having difficulty figuring out how to use the structs. What would the C structs below look like when they are converted into Cobol?</p>\n\n<p>These are the structs I have:</p>\n\n<pre><code>struct dataT\n{\n    int m;\n};\n\nstruct stack\n{\n    int top;\n    struct dataT items[STACKSIZE];\n} st;\n</code></pre>\n\n<p>How would this statement be represented in Cobol?</p>\n\n<pre><code>st.items[st.top].m\n</code></pre>\n"}, {"tags": ["c++", "c", "parsing", "arduino", "zigbee"], "comments": [{"owner": {"reputation": 898, "user_id": 3443596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01bc2c1a62bc4080906a1b194c538646?s=128&d=identicon&r=PG&f=1", "display_name": "eventHandler", "link": "https://stackoverflow.com/users/3443596/eventhandler"}, "edited": false, "score": 0, "creation_date": 1427906194, "post_id": 29395159, "comment_id": 46968652, "body": "how do you send the data?"}, {"owner": {"reputation": 15, "user_id": 3810767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kq52T.jpg?s=128&g=1", "display_name": "Venix", "link": "https://stackoverflow.com/users/3810767/venix"}, "reply_to_user": {"reputation": 898, "user_id": 3443596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01bc2c1a62bc4080906a1b194c538646?s=128&d=identicon&r=PG&f=1", "display_name": "eventHandler", "link": "https://stackoverflow.com/users/3443596/eventhandler"}, "edited": false, "score": 0, "creation_date": 1427963871, "post_id": 29395159, "comment_id": 46990816, "body": "With xbee.send(TXRequest); on Arduino1 (it uses the same Library aka Xbee-Arduino); When I log packets with XCTU, the datas are correct so the problem is clearly the parsing on Arduino2"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1427985882, "post_id": 29395159, "comment_id": 47003811, "body": "You are doing it wrong, there must be only <i>one</i> call to getResponse().  You have multiple calls now, so, yes, the data will be changing.  You need to write <code>XBeeResponse response = xbee.getResponse();</code> and then use <i>response</i> in your parsing code."}, {"owner": {"reputation": 10869, "user_id": 266392, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/173e2caa17a8522cae442e23e7879921?s=128&d=identicon&r=PG", "display_name": "tomlogic", "link": "https://stackoverflow.com/users/266392/tomlogic"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1427987971, "post_id": 29395159, "comment_id": 47005205, "body": "@HansPassant, it looks like he&#39;s using <code>xbee.getResponse()</code> correctly, judging from the <a href=\"https://code.google.com/p/xbee-arduino/wiki/DevelopersGuide\" rel=\"nofollow noreferrer\">documentation</a>."}, {"owner": {"reputation": 15, "user_id": 3810767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kq52T.jpg?s=128&g=1", "display_name": "Venix", "link": "https://stackoverflow.com/users/3810767/venix"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1427990699, "post_id": 29395159, "comment_id": 47006976, "body": "@HansPassant I tried but technically, I&#39;m not supposed to use &quot;XBeeResponse&quot; according to the Library Documentation. And xbee.getResponse() should only change after another xbee.readPacket() has been done. So, &quot;It shouldn&#39;t&quot; change and since Arduino is single thread, nothing should change it. That&#39;s why i&#39;m kinda lost here"}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 3810767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kq52T.jpg?s=128&g=1", "display_name": "Venix", "link": "https://stackoverflow.com/users/3810767/venix"}, "is_accepted": true, "score": 0, "last_activity_date": 1428227748, "last_edit_date": 1428227748, "creation_date": 1428012826, "answer_id": 29423384, "question_id": 29395159, "link": "https://stackoverflow.com/questions/29395159/zigbee-arduino-incorrect-parsed-datas/29423384#29423384", "title": "ZigBee Arduino, Incorrect parsed datas", "body": "<p>I finally found what was going on:\nI'm using NewSoftSerial (because one Serial is clearly not enough) and it seems to f**ck up timers (long timeout) and I was actually using either TimerOne library or the \"Thread.h\" library to kinda allow me to use interrupt.</p>\n\n<p>Well, the whole thing was clearly messed up by the timeout on NSS so beware if you use them together in the future. I had to switch from TimerOne to Thread.h (which wasn't real threads of course), allowing me to avoid problems.</p>\n\n<p>I also found that normal Serial, the one bundled with the Arduino, was playing bad stuff aswell with the timer things.</p>\n\n<p>So thank you for trying to help me, but it wasn't really where I thought the problem was.</p>\n\n<p>Venix</p>\n"}], "owner": {"reputation": 15, "user_id": 3810767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kq52T.jpg?s=128&g=1", "display_name": "Venix", "link": "https://stackoverflow.com/users/3810767/venix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 29423384, "answer_count": 1, "score": 0, "last_activity_date": 1428227748, "creation_date": 1427902992, "last_edit_date": 1427980816, "question_id": 29395159, "link": "https://stackoverflow.com/questions/29395159/zigbee-arduino-incorrect-parsed-datas", "title": "ZigBee Arduino, Incorrect parsed datas", "body": "<p>I've got some trouble to make communication between 2 arduinos Uno to work.</p>\n\n<p>Arduino1&lt;>ZigBee >---------- &lt; ZigBee &lt;  > Arduino2</p>\n\n<p>I'm currently trying to make them understand each other. The message is currently going well between the 1st Arduino to his Zigbee then to the Second Zigbee.</p>\n\n<p>Arduino1&lt;>ZigBee>----------&lt; ZigBee--X-- Arduino2</p>\n\n<p>The problem is: When I try to parse, on Arduino2 the payload of the incoming packet from the Arduino1, the messages are differents.</p>\n\n<p>Since I'm using ZigBee API2, there's a CRC on the message while travelling between ZigBees so (after some investigations) I'm sure that the packet is correct where arriving on the ZigBee2 (if not, packet is dropped).</p>\n\n<p>So the main event now:</p>\n\n<pre><code>memmove(received,xbee_Rx.getData(),24);\n</code></pre>\n\n<p>When I receive the packet</p>\n\n<pre><code>xbee.readPacket();\nif (xbee.getResponse().isAvailable())\n{\n  if (xbee.getResponse().getApiId() == ZB_RX_RESPONSE)\n    {\n        xbee.getResponse().getZBRxResponse(xbee_Rx);\n        memmove(received,xbee_Rx.getData(),24);\n        for (int i = 0; i &lt; 24; i++) {       \n          Serial.print(received[i],HEX);\n        }\n    }\n}\n</code></pre>\n\n<p>While I send this \" 4144000000000000446B3AB4083E8484258 \" in HEX on Arduino1</p>\n\n<p>I received this \" 414400000000000008C201862419B5 \" in HEX on Arduino2</p>\n\n<p>It's an example, datas are always wrong (apart maybe from the two first bytes). The result is kinda random and unusable for me.</p>\n\n<p>I also tried to parse with </p>\n\n<pre><code>for (int i = 0; i &lt; 24; i++) {\n    received[i] = xbee_Rx.getData()[i];\n    Serial.print(received[i],HEX);\n  }\n</code></pre>\n\n<p>but the result was kinda the same.</p>\n\n<p>So my question is: Am I doing the parsing wrong? Is there a problem with the <strong>getData()</strong> function?</p>\n\n<p>Thank you :-)</p>\n\n<p>EDIT:\nafter some research, i've found that if i do </p>\n\n<pre><code>   for (int i = 0; i &lt; sizeof(xbee_Rx.getData()); i++) {  \n    Serial.print(xbee_Rx.getData()[i],HEX);\n  }\n        Serial.println();\n  for (int i = 0; i &lt; sizeof(received); i++) {     \n    Serial.print(received[i],HEX);\n  }\n</code></pre>\n\n<p>datas are not the same.</p>\n\n<p>414400000000000008C201885358C80<br>\n414400000000000008C201862419E6</p>\n\n<p>instead of\n4144000000000000441A6E9B407DDD494258</p>\n\n<p>So, I guess while I'm reading the data is changing and that's maybe why it f**k up datas. So, is there any way to \"freeze\" the Datas before I read them?</p>\n"}, {"tags": ["c", "sockets", "winsock"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427903636, "post_id": 29395081, "comment_id": 46966981, "body": "And the question is?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427903689, "post_id": 29395081, "comment_id": 46967024, "body": "If <code>source</code> is 5000 <code>char</code> long, then this <code>source[++newLen] = &#39;\\0&#39;</code> writes past the end of the array."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1427908930, "post_id": 29395081, "comment_id": 46970067, "body": "You should read man strlen().  It&#39;s bad and not required since you already know how  many valid bytes have been read into the buffer."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4738940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75308afe27547dc9f6ed1cea5e27ba67?s=128&d=identicon&r=PG&f=1", "display_name": "user25633", "link": "https://stackoverflow.com/users/4738940/user25633"}, "edited": false, "score": 0, "creation_date": 1427903308, "post_id": 29395193, "comment_id": 46966773, "body": "can you explain this a bit more?"}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 33, "user_id": 4738940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75308afe27547dc9f6ed1cea5e27ba67?s=128&d=identicon&r=PG&f=1", "display_name": "user25633", "link": "https://stackoverflow.com/users/4738940/user25633"}, "edited": false, "score": 0, "creation_date": 1427903371, "post_id": 29395193, "comment_id": 46966819, "body": "It&#39;s very similar to what you already have and understand. What part would you like clarification on?  I updated the text in the top to explain why I&#39;m using 1 byte xfers."}, {"owner": {"reputation": 3702, "user_id": 1059969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKhUL.jpg?s=128&g=1", "display_name": "Agent_L", "link": "https://stackoverflow.com/users/1059969/agent-l"}, "edited": false, "score": 2, "creation_date": 1427903630, "post_id": 29395193, "comment_id": 46966974, "body": "reading by 1 byte makes HUGE difference. Problem is not in caching, but in context-switching from your process to system and back for every one byte."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 3702, "user_id": 1059969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKhUL.jpg?s=128&g=1", "display_name": "Agent_L", "link": "https://stackoverflow.com/users/1059969/agent-l"}, "edited": false, "score": 0, "creation_date": 1427903770, "post_id": 29395193, "comment_id": 46967081, "body": "@Agent_L - For a typical binary it won&#39;t make a practical difference from the user&#39;s perspective since the program will run virtually instantaneously. As far as OS performance goes and the optimal implementation, that&#39;s beyond the scope of the question, but he can increase the size of the xfer and experiment and even use dtrace and get performance metrics if he wants and even catch the system and user-mode calls made as it runs."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1427916150, "post_id": 29395193, "comment_id": 46974003, "body": "@MartinJames - I worked in a kernel performance tuning group. I understand that. I&#39;ve tuned apps that have to scale.  But for all practical intents and purposes for illustrating a basic concept this is fine.  The context switches on a standalone single user system copying small binaries just don&#39;t matter.  Optimizing to scale up.  I&#39;m sure whatever example you gave, someone could come along and say &#39;but but there&#39;s a faster or more efficient way to do it&#39;.  How about mmap or SAN on fiber? I mean, let the punishment fit the crime."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1427929796, "post_id": 29395193, "comment_id": 46980258, "body": "@1sand0s I did a large scale experiment some years ago with 1700 data points that showed the single most influential factor in a TCP transfer is the socket receive buffer size, and the next is the size of individual transfers. I&#39;ve never seen anybody claim that writing a single byte at at a time is efficient, in nearly 40 years in IT."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1455312787, "post_id": 29395193, "comment_id": 58450982, "body": "IMO It depends on the application. I worked in a performance team of a kernel group and I&#39;m familiar with optimizing the hell out of code too. But when I&#39;m making a tool to do something, I consider the specific application at hand, likely future applications, and the actual need, and where efficiency doesn&#39;t amount to a perceptible or at least problematic difference and there are advantages to not going to the trouble, I jut do what works."}], "tags": [], "owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "is_accepted": true, "score": 1, "last_activity_date": 1427908630, "last_edit_date": 1427908630, "creation_date": 1427903098, "answer_id": 29395193, "question_id": 29395081, "link": "https://stackoverflow.com/questions/29395081/break-a-file-into-chunks-and-send-it-as-binary-from-client-to-server-in-c-using/29395193#29395193", "title": "Break a file into chunks and send it as binary from client to server in C using winsock?", "body": "<p>You can copy it one byte at a time. </p>\n\n<p>Reading/writing more than a byte at a time <em>theoretically</em> would make it read and write more efficiently to disk. But since the binary is likely short, and disk I/O is already internally buffered it probably doesn't make a noticeable difference.</p>\n\n<p><code>perror()</code> is a convenient function that displays the text associated with an error code returned from the most recent UNIX system call.  The text in the quotes is the title it displays before showing you the system message associated with the code.</p>\n\n<p><code>exit(EXIT_FAILURE)</code> exits with a -1 value which is what scripts can test to see if your program succeeded or failed, as the exit status can be retrieved for a UNIX program.</p>\n\n<p><code>size_t</code> is an integer type, but it's named size_t to give a hint as to what you're using it for.</p>\n\n<p>If you wanted to transfer more data at a time you could.  But 1-byte xfers is simple and safe and it works.</p>\n\n<pre><code>FILE *exein, *exeout;\n\nexein = fopen(\"filein.exe\", \"rb\");\nif (exein == NULL) {\n    /* handle error */\n    perror(\"file open for reading\");\n    exit(EXIT_FAILURE);\n}\nexeout = fopen(\"fileout.exe\", \"wb\");\nif (exeout == NULL) {\n    /* handle error */\n    perror(\"file open for writing\");\n    exit(EXIT_FAILURE);\n}\nsize_t n, m;\nunsigned char buff[8192];\ndo {\n    n = fread(buff, 1, sizeof buff, exein);\n    if (n) \n        m = fwrite(buff, 1, n, exeout);\n    else   \n        m = 0;\n} while ((n &gt; 0) &amp;&amp; (n == m));\nif (m) \n   perror(\"copy\");\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4738940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75308afe27547dc9f6ed1cea5e27ba67?s=128&d=identicon&r=PG&f=1", "display_name": "user25633", "link": "https://stackoverflow.com/users/4738940/user25633"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "accepted_answer_id": 29395193, "answer_count": 1, "score": 1, "last_activity_date": 1427908630, "creation_date": 1427902781, "question_id": 29395081, "link": "https://stackoverflow.com/questions/29395081/break-a-file-into-chunks-and-send-it-as-binary-from-client-to-server-in-c-using", "title": "Break a file into chunks and send it as binary from client to server in C using winsock?", "body": "<p>I created an application that send a text file from client to server\nSo far i'm send it as string like this:</p>\n\n<pre><code>fp = fopen(filename, \"r\");\n    if (fp != NULL) {\n        newLen = fread(source, sizeof(char), 5000, fp);\n            if (newLen == 0) {\n                fputs(\"Error reading file\", stderr);\n            } else {\n    source[++newLen] = '\\0'; /* Just to be safe. */\n            }\n    }else{\n        printf(\"The file %s does not exist :(\");\n        return 1;\n    }\n\n\n    fclose(fp);\n\n    send(s , source , strlen(source) , 0); //send file\n</code></pre>\n\n<p>However my professor told me I must send the file in Binary and be ready to accept a file of any size \nI'm trying to figure out how to send the file in binary and break it into chunks</p>\n"}, {"tags": ["c++", "c", "visual-studio", "build-process"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1427902740, "post_id": 29394949, "comment_id": 46966461, "body": "I&#39;d force everyone to learn python or octave and change those <code>main()</code>s to wrappers to them."}, {"owner": {"reputation": 3423, "user_id": 4317639, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-51v9SCix-tY/AAAAAAAAAAI/AAAAAAAAAFc/OJYPEymZCVE/photo.jpg?sz=128", "display_name": "erol yeniaras", "link": "https://stackoverflow.com/users/4317639/erol-yeniaras"}, "edited": false, "score": 0, "creation_date": 1427903312, "post_id": 29394949, "comment_id": 46966777, "body": "The short answer to your question is: No."}, {"owner": {"reputation": 3565, "user_id": 545430, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1980ea1d7e33e2a5134f6f3e4d3177cd?s=128&d=identicon&r=PG", "display_name": "Ian", "link": "https://stackoverflow.com/users/545430/ian"}, "reply_to_user": {"reputation": 3423, "user_id": 4317639, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-51v9SCix-tY/AAAAAAAAAAI/AAAAAAAAAFc/OJYPEymZCVE/photo.jpg?sz=128", "display_name": "erol yeniaras", "link": "https://stackoverflow.com/users/4317639/erol-yeniaras"}, "edited": false, "score": 0, "creation_date": 1427903991, "post_id": 29394949, "comment_id": 46967245, "body": "@erol yeniaras: Couldn&#39;t the OP just create a solution with 100 different projects that all build their own exe? Each project would be able to handle its own main entry, it would just be a PITA."}, {"owner": {"reputation": 3423, "user_id": 4317639, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-51v9SCix-tY/AAAAAAAAAAI/AAAAAAAAAFc/OJYPEymZCVE/photo.jpg?sz=128", "display_name": "erol yeniaras", "link": "https://stackoverflow.com/users/4317639/erol-yeniaras"}, "reply_to_user": {"reputation": 3565, "user_id": 545430, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1980ea1d7e33e2a5134f6f3e4d3177cd?s=128&d=identicon&r=PG", "display_name": "Ian", "link": "https://stackoverflow.com/users/545430/ian"}, "edited": false, "score": 1, "creation_date": 1427904889, "post_id": 29394949, "comment_id": 46967811, "body": "@Ian : The short question was: &quot;Is there a way to set up a visual studio solution to build 100 different main files all contained in a single code base, and in a single Visual Studio project?&quot; So John wants not only a single solution but also a &quot;single project&quot; having multiple &quot;main&quot;s."}, {"owner": {"reputation": 3558, "user_id": 389833, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fc01b03cab64a85b58f30b70190eafb8?s=128&d=identicon&r=PG", "display_name": "Bukes", "link": "https://stackoverflow.com/users/389833/bukes"}, "edited": false, "score": 0, "creation_date": 1427911791, "post_id": 29394949, "comment_id": 46971615, "body": "I&#39;m wondering if instead of 100 &quot;little&quot; programs, each of which link and call a &quot;main-like&quot; entry point in the larger library, it would be best to build a single &quot;little&quot; application that links to the aforementioned library and allows the application user to select the functionality to invoke via command line switch or a configuration file."}, {"owner": {"reputation": 5428, "user_id": 107122, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a853e46e13bd048ae88fe160b8d4d874?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/107122/john"}, "edited": false, "score": 0, "creation_date": 1427912463, "post_id": 29394949, "comment_id": 46971992, "body": "@Blukes this is an interesting point.  One example of exactly this approach would be git.  I was hoping to avoid having to modify 100 different files to do this....  That said, a judicious awk/sed script could automate all that....  I think you should write that up as an answer."}], "owner": {"reputation": 5428, "user_id": 107122, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a853e46e13bd048ae88fe160b8d4d874?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/107122/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427902359, "creation_date": 1427902359, "question_id": 29394949, "link": "https://stackoverflow.com/questions/29394949/how-to-manage-100-different-main-files", "title": "How to manage 100 different main files?", "body": "<p>Short version of my question:</p>\n\n<p>Is there a way to set up a visual studio solution to build 100 different main files all contained in a single code base, and in a single Visual Studio project?</p>\n\n<p>Long version of my question:</p>\n\n<p>I work with a legacy corporate signal processing library.</p>\n\n<p>The functions in it are clean, well written, highly optimized, and all in ANSI C. (Yes, I know some of those attributes are contradictory)  We have a VS project to build the library, and to publish it to other projects/groups in the company using our corporate code publishing system.</p>\n\n<p>Each \"big\" library entry point has it's own source file.  Each of these \"big\" entry points has a thin main wrapper function defined in this file, with a </p>\n\n<pre><code>#ifdef FOOMAIN\n/* Main for function foo */\nmain() \n{  \n}\n#endif\n</code></pre>\n\n<p>I have just learned that these \"little\" apps are also used by many people around the company.  So, we would like to include these apps in our publishing process.  (At present they are published via a manual back door means.)  We are using VS solutions, and I am curious if we can do this there?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 1471, "user_id": 4086467, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a09b4041b111e58020670dcaaf6d386a?s=128&d=identicon&r=PG&f=1", "display_name": "texasflood", "link": "https://stackoverflow.com/users/4086467/texasflood"}, "edited": false, "score": 0, "creation_date": 1427901969, "post_id": 29394784, "comment_id": 46966003, "body": "Are you allocating memory to the contents using malloc?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 3, "creation_date": 1427901977, "post_id": 29394784, "comment_id": 46966004, "body": "What you have is a pointer, not an array; if it&#39;s pointing to memory you allocated with <code>malloc</code>, then you delete it with <code>free</code>."}, {"owner": {"reputation": 1471, "user_id": 4086467, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a09b4041b111e58020670dcaaf6d386a?s=128&d=identicon&r=PG&f=1", "display_name": "texasflood", "link": "https://stackoverflow.com/users/4086467/texasflood"}, "edited": false, "score": 0, "creation_date": 1427902147, "post_id": 29394784, "comment_id": 46966124, "body": "Yes that&#39;s right, the pointer itself is not using the memory, it&#39;s only pointing to a location in memory. The answer depends on how you filled the content at that memory location"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1427902915, "post_id": 29394784, "comment_id": 46966564, "body": "It isn&#39;t clear what you&#39;re asking, what is in the &quot;...&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "reply_to_user": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1427903970, "post_id": 29394867, "comment_id": 46967221, "body": "Nothing in the question indicates that."}], "tags": [], "owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "is_accepted": false, "score": 4, "last_activity_date": 1427902098, "creation_date": 1427902098, "answer_id": 29394867, "question_id": 29394784, "link": "https://stackoverflow.com/questions/29394784/delete-the-content-of-a-int-in-c/29394867#29394867", "title": "Delete the content of a int * in C", "body": "<p>If you dynamically allocate memory for an array in C with</p>\n\n<pre><code>int* array = malloc(some_size);\n</code></pre>\n\n<p>then you free that memory with</p>\n\n<pre><code>free(array);\n</code></pre>\n\n<p>Fast and efficient hasn't got much to do with that procedure - it's just how it's done - but you can pretty much count on that there's no way to do it faster...</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1427902154, "creation_date": 1427902154, "answer_id": 29394878, "question_id": 29394784, "link": "https://stackoverflow.com/questions/29394784/delete-the-content-of-a-int-in-c/29394878#29394878", "title": "Delete the content of a int * in C", "body": "<p>If by \"deleting the content\" you mean zeroing out the array, using <a href=\"http://en.cppreference.com/w/cpp/string/byte/memset\" rel=\"noreferrer\"><code>memset</code></a> should work:</p>\n\n<pre><code>size_t element_count = ... // This defines how many elements your array has\nmemset(array, 0, sizeof(int) * element_count);\n</code></pre>\n\n<p>Note that having a pointer to your array and no additional information would be insufficient: you need to provide the number of array elements as well, because it is not possible to derive this information from the pointer itself.</p>\n"}], "owner": {"reputation": 407, "user_id": 4461782, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8acec654041feaf9adda1db7b11f1d72?s=128&d=identicon&r=PG&f=1", "display_name": "laker001", "link": "https://stackoverflow.com/users/4461782/laker001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 29394878, "answer_count": 2, "score": 0, "last_activity_date": 1427902154, "creation_date": 1427901884, "question_id": 29394784, "link": "https://stackoverflow.com/questions/29394784/delete-the-content-of-a-int-in-c", "title": "Delete the content of a int * in C", "body": "<p>If i have an array like this one:</p>\n\n<pre><code>int * array = ...\n</code></pre>\n\n<p>and if i want to delete it's content, what is the fastest and most efficient way to do this in C ?</p>\n"}, {"tags": ["c", "visual-studio", "testing", "syntax"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1427901402, "post_id": 29394537, "comment_id": 46965619, "body": "You mean you want to keep data in <code>stdin</code> buffer? why not go for command line arguments?"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1427901531, "post_id": 29394537, "comment_id": 46965709, "body": "I don&#39;t think I know what stdin buffer is, but I want to have data in the buffer immediately when the program starts as if the user has entered this data. @Gopi"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1427901739, "post_id": 29394537, "comment_id": 46965852, "body": "Do you mean command line in windows? @Gopi"}, {"owner": {"reputation": 2538, "user_id": 2277331, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4b8efcf4537807785c9fbc9472bb8f6d?s=128&d=identicon&r=PG", "display_name": "Anton.P", "link": "https://stackoverflow.com/users/2277331/anton-p"}, "edited": false, "score": 0, "creation_date": 1427906957, "post_id": 29394537, "comment_id": 46969093, "body": "&#39;\\0&#39; has the value 0 so you dont need the if statement inside the while loop"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 2538, "user_id": 2277331, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4b8efcf4537807785c9fbc9472bb8f6d?s=128&d=identicon&r=PG", "display_name": "Anton.P", "link": "https://stackoverflow.com/users/2277331/anton-p"}, "edited": false, "score": 0, "creation_date": 1427911253, "post_id": 29394537, "comment_id": 46971339, "body": "@Anton.P that doesn&#39;t really matter since it isn&#39;t the point of this question. This code is just an example."}], "owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427911378, "creation_date": 1427901249, "last_edit_date": 1427911378, "question_id": 29394537, "link": "https://stackoverflow.com/questions/29394537/how-to-move-data-from-an-array-to-the-buffer-when-a-program-starts", "title": "How to move data from an array to the buffer when a program starts?", "body": "<p>Is there a way to have the data in an array of characters or integers to be placed in the buffer when the programs starts as if the user has entered this data?</p>\n\n<p>For example: </p>\n\n<pre><code>int main()\n{\n    int run = 1;\n    char a[] = \"4\\nasdfg\\0\";\n    char in = NULL;\n\n    datatobuffer(a);//is there a command for this in C?\n\n    while (run){\n        in = getchar();\n        if (in == '\\0')\n            run = 0;\n    }\n    //loop stopped, user didn't do anything\n}\n</code></pre>\n\n<p>Alternatively, is there a way to do this in the debugger of VS?</p>\n\n<p>This is for testing several functions that rely on user input so I want to automate the process of entering data.</p>\n\n<p>EDIT: not optimal but I guess I'll do it with a different macro program, although it isn't really a practical solution for more then a few dozen of characters since it's slow.</p>\n"}, {"tags": ["html", "c", "libcurl", "flex-lexer"], "comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1427907210, "post_id": 29394356, "comment_id": 46969203, "body": "<code>extern FILE * yyin; yyin = fp</code> should do it"}, {"owner": {"reputation": 9, "user_id": 4738800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049dc264292ed7372c21db276fc2b104?s=128&d=identicon&r=PG&f=1", "display_name": "killallo", "link": "https://stackoverflow.com/users/4738800/killallo"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1427915443, "post_id": 29394356, "comment_id": 46973651, "body": "And if I do that after saving the file I can call the yylex() after ? And how do I do to process the yyin file with my regular expression ? Thanks!"}, {"owner": {"reputation": 9, "user_id": 4738800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049dc264292ed7372c21db276fc2b104?s=128&d=identicon&r=PG&f=1", "display_name": "killallo", "link": "https://stackoverflow.com/users/4738800/killallo"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1428163748, "post_id": 29394356, "comment_id": 47063403, "body": "That worked, thank you !"}], "answers": [{"comments": [{"owner": {"reputation": 3751, "user_id": 2991627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1bf3f42fc00dd825eda62f1df4fa304?s=128&d=identicon&r=PG", "display_name": "JJoao", "link": "https://stackoverflow.com/users/2991627/jjoao"}, "edited": false, "score": 0, "creation_date": 1428267056, "post_id": 29448620, "comment_id": 47087831, "body": "The oposite! <code>yyin = fp</code>"}], "tags": [], "owner": {"reputation": 9, "user_id": 4738800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049dc264292ed7372c21db276fc2b104?s=128&d=identicon&r=PG&f=1", "display_name": "killallo", "link": "https://stackoverflow.com/users/4738800/killallo"}, "is_accepted": true, "score": 0, "last_activity_date": 1428164089, "creation_date": 1428164089, "answer_id": 29448620, "question_id": 29394356, "link": "https://stackoverflow.com/questions/29394356/flex-how-to-process-html-file/29448620#29448620", "title": "Flex, how to process HTML file", "body": "<p>After reading the comment from the <strong><em>user58697</em></strong> I start reading about <em>yyin</em> and discovered that after having a file opened in C you can delegate it to the yyin by doing:</p>\n\n<p><code>fp = yyin</code></p>\n\n<p>Assuming that your file is called fp.</p>\n\n<p>Once you do that, the file will be processed in the regular expressions.</p>\n\n<p>I found my solution in the 2nd example of\n<a href=\"http://aquamentus.com/tut_lexyacc.html\" rel=\"nofollow\">this page</a>.</p>\n"}], "owner": {"reputation": 9, "user_id": 4738800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049dc264292ed7372c21db276fc2b104?s=128&d=identicon&r=PG&f=1", "display_name": "killallo", "link": "https://stackoverflow.com/users/4738800/killallo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 29448620, "answer_count": 1, "score": 0, "last_activity_date": 1428164089, "creation_date": 1427900766, "last_edit_date": 1427934407, "question_id": 29394356, "link": "https://stackoverflow.com/questions/29394356/flex-how-to-process-html-file", "title": "Flex, how to process HTML file", "body": "<p>I am using libcurl and flex to download images from an webpage.</p>\n\n<p>I already have the libcurl easy functions set to download any HTML file from a given url and I also have the regular expression but now I don't know how to process the downloaded HTML file. </p>\n\n<p>example:\nI have the file \"fp\" downloaded and saved in a specific location and now I need to pass the fp to the regular expressions to process but the structure of my file is:</p>\n\n<pre><code>    %{ \n#include &lt;...&gt;\n...\n%}\n\n%% \n/* Regular expressions */\n\n%%\nint main () {\n... //c code with file fp downloaded and saved\n}\n</code></pre>\n\n<p>So, how do I \"send\" the fp file to the regular expression to process ?</p>\n\n<p>Any suggestions ?\nThanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1427901019, "post_id": 29394348, "comment_id": 46965373, "body": "<code>natural_array[99];</code> must have <code>101</code> elements to be indexable by <code>100</code>, as a side issue."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1427901024, "post_id": 29394348, "comment_id": 46965377, "body": "Your arrays have 99 elements, with indexes 0 to 98. Your loops goes up to index 100 which is element 101. Indexing out of bounds leads to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}], "answers": [{"comments": [{"owner": {"reputation": 547, "user_id": 2536951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4babb3c9c4de67b74d2af2b0f74e7bff?s=128&d=identicon&r=PG", "display_name": "Suliman Sharif", "link": "https://stackoverflow.com/users/2536951/suliman-sharif"}, "edited": false, "score": 0, "creation_date": 1427901326, "post_id": 29394481, "comment_id": 46965565, "body": "It works, thank you! I guess it was more simple than I figured"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1427903980, "post_id": 29394481, "comment_id": 46967234, "body": "Minor: Given the wide variety of numeric results, recommend <code>&quot;%e&quot;</code> over <code>&quot;%f&quot;</code>."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 3, "last_activity_date": 1427905147, "last_edit_date": 1427905147, "creation_date": 1427901109, "answer_id": 29394481, "question_id": 29394348, "link": "https://stackoverflow.com/questions/29394348/stirling-approximation-producing-a-different-output-than-expected/29394481#29394481", "title": "Stirling approximation producing a different output than expected", "body": "<p>You are not printing the right data type with</p>\n\n<pre><code>printf (\"Element[%d] = %d\\n\", i, x);\n</code></pre>\n\n<p>which wants to print an <code>int</code> type. Please try</p>\n\n<pre><code>printf (\"Element[%d] = %e\\n\", i, x);\n</code></pre>\n\n<p>You must also declare the array thus</p>\n\n<pre><code>static double natural_array[101];\n</code></pre>\n\n<p>Either that, or reduce the loop limit. It is better to tie the two perhaps like this</p>\n\n<pre><code>#define ELEMENTS 100\n...\nstatic double natural_array[ELEMENTS]; \n...\nfor (i = 2; i &lt; ELEMENTS; i++) { \n    ...\n</code></pre>\n"}], "owner": {"reputation": 547, "user_id": 2536951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4babb3c9c4de67b74d2af2b0f74e7bff?s=128&d=identicon&r=PG", "display_name": "Suliman Sharif", "link": "https://stackoverflow.com/users/2536951/suliman-sharif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 29394481, "answer_count": 1, "score": 0, "last_activity_date": 1427905147, "creation_date": 1427900751, "last_edit_date": 1427901147, "question_id": 29394348, "link": "https://stackoverflow.com/questions/29394348/stirling-approximation-producing-a-different-output-than-expected", "title": "Stirling approximation producing a different output than expected", "body": "<p>So I am new to C and slowly learning the syntax. I have come across a problem though. So I am trying to prove Stirlings approximation where</p>\n\n<p>ln (N!) = N ln (N) - (N)</p>\n\n<p>So when I make print statements within the code to test whether each element of the array is producing the output of the array is the number I want it to be. It's far from it. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\ndouble * natural_log ();\n/* Obtain the natural log of 0 to 100 and then store each value in an array     */\ndouble * approximation ();\n/* Use the sterling approximation caluculate the numbers from 0 - 100 and then store it in an array */\ndouble * difference ();\n/* Calculate the difference between the arrays */\ndouble * percentage ();\n/* Calculate the percentage of the difference and return the array */\n\nint main () {\n   natural_log ();\n /*  approximation (); */\n   return 0;\n}\n\n double * natural_log () {\n\n    static double natural_array[101]; /* set up the array */\n    int i; /* set up the integer to increase the array by a value */\n\n\n    natural_array[0] = 0.0; /* set up the first value in the array */\n    natural_array[1] = log(2);\n\n    double x;\n    x = natural_array [1];\n    for (i = 2; i &lt;=100; i++) { /* set up the for loop to increment the i */\n        natural_array[i] = x + log(1 + i);\n        x = natural_array[i];\n        **printf (\"Element[%d] = %d\\n\", i, x);**\n     }\n    return natural_array;\n}\n\ndouble * approximation () {\n\n    static double approximation_array[99]; /* set up the array */\n    int i;  /* set up the integer to increase the array by a value */\n\n    for (i = 0; i &lt;=100; i++) {\n        approximation_array[i] = (i) * log(i) - (i);\n    }\n    return approximation_array;\n}\n</code></pre>\n\n<p>With the print statement in bold it produces this output</p>\n\n<pre><code> Element[2] = 688\n Element[3] = 2048\n Element[4] = 1232\n Element[5] = 688\n .....\n .....\n Element[100] = 544\n</code></pre>\n\n<p>I am certain that these are numbers it's not supposed to be spitting out on the output so can anyone explain why it is? Thank you!</p>\n"}, {"tags": ["c", "memory-management", "struct", "memory-alignment"], "comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1427900941, "post_id": 29394229, "comment_id": 46965327, "body": "<code>(void *)j</code> seems strange to me... Why not use a <code>union</code> to tidy it up? This all smells like premature optimisation, particularly the part where you&#39;re timing this as a program by itself. If you focus on anything but the significant bottlenecks, you may be pushing your most significant optimisations out of sight. 1. Focus on writing clear, maintainable code which solves your <i>actual problem</i>. 2. Run your code using a profiler to determine what the most significant bottlenecks are. 3. Optimise those bottlenecks. 4. Run the profiler again to verify the optimisations, and repeat from 3. ..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1427900959, "post_id": 29394229, "comment_id": 46965340, "body": "Your example code does not contain a variable-length <code>struct</code>.  It contains a fixed-length struct, one of whose members is a pointer.  This is utterly standard conforming.  No C compiler will object to the <code>struct</code> definition.  In particular, note that whatever, if anything, is pointed to by the pointer member of an instance of such a <code>struct</code> is not itself part of the <code>struct</code>."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1427901275, "post_id": 29394229, "comment_id": 46965534, "body": "@undefinedbehaviour <code>(void *)j</code> is just for test case. I put that to test assignment and accessing. 12% performance increase is significant enough in my situation. I believe when applying this to structs with more arrays, the performance increase will be greater due to even more less <code>malloc</code> and <code>free</code> calls."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1427901345, "post_id": 29394229, "comment_id": 46965577, "body": "@JohnBollinger I know what is happening. The point is on saving additional <code>malloc</code> and <code>free</code> calls for faster code."}, {"owner": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 0, "creation_date": 1427901882, "post_id": 29394229, "comment_id": 46965936, "body": "In x86 systems if your array data and the struct fit in the CPU cache it&#39;s much faster than if it doesn&#39;t. General info here:  <a href=\"http://en.wikipedia.org/wiki/CPU_cache\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/CPU_cache</a>"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1427902815, "post_id": 29394416, "comment_id": 46966502, "body": "Although this is true, it&#39;s more a commentary on the test program, not on the main code of interest."}], "tags": [], "owner": {"reputation": 1055, "user_id": 3406936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2294a96c8fb728eca7525ea9de2e3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Shlomi Agiv", "link": "https://stackoverflow.com/users/3406936/shlomi-agiv"}, "is_accepted": false, "score": 0, "last_activity_date": 1427900938, "creation_date": 1427900938, "answer_id": 29394416, "question_id": 29394229, "link": "https://stackoverflow.com/questions/29394229/emulating-a-variable-size-struct-in-c-allignment-performance-issues/29394416#29394416", "title": "emulating a variable size struct in C; allignment, performance issues", "body": "<p>one thing to note - on some systems, int will be 2 bytes instead of 4. In that case, int will only reach 32767. Since you multiply the input by 10000, it will almost definitely cause problems on such machines. Use long instead.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1427901668, "post_id": 29394645, "comment_id": 46965809, "body": "And C99 has variable-length members in the standard, so that this hack is not needed.  The OP&#39;s key assertion though, is that some compilers permit variable-length members may be placed <i>anywhere</i> in a struct (as opposed to only as the last member).  To the best of my knowledge he&#39;s wrong about that, but this answer is anyway not responsive."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1427915450, "post_id": 29394645, "comment_id": 46973657, "body": "@JohnBollinger In C99 it not a hack anymore, see update"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1427916704, "post_id": 29394645, "comment_id": 46974331, "body": "Yes, I explicitly pointed out C99 VLAs in my comment.  They are a standardized way to approach the problem that the struct hack was used for.  The two are not the same, and the struct hack is still a hack.  In any case, none of that makes this answer any more responsive to the actual question, which is primarily about (pseudo-)VLAs in the middle of a struct, rather than at the end."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1427919710, "post_id": 29394645, "comment_id": 46975973, "body": "@JohnBollinger No, that is not correct. They are completely different things. In C99 flexible array member is &#167;6.7.2.1-16 and are related to structure/union definition. And  hack is not a hack anymore, code like I posted  now could be found in this chapter. VLAs are defined at  &#167;6.7.5 and down and related to array definition."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1427922194, "post_id": 29394645, "comment_id": 46977334, "body": "Ok, you&#39;re right that I was getting my terminology mixed up.  However, you are still mistaken about the struct hack.  The code you posted does not define a variable length array in C99, because per C99/6.7.5.2/4, &quot;If the size [given in the array declaration] is an integer constant expression [...], the array type is not a variable length array.&quot;  It is a fixed-length array of the specified size, and accessing elements beyond its declared bounds (as the struct hack involves) results in undefined behavior.  Relying on undefined behavior is what makes the struct hack a hack."}], "tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": -2, "last_activity_date": 1427915421, "last_edit_date": 1427915421, "creation_date": 1427901507, "answer_id": 29394645, "question_id": 29394229, "link": "https://stackoverflow.com/questions/29394229/emulating-a-variable-size-struct-in-c-allignment-performance-issues/29394645#29394645", "title": "emulating a variable size struct in C; allignment, performance issues", "body": "<blockquote>\n  <p>It is possible to put arrays with custom length anywhere in a struct in C, but in that case additional malloc calls are required</p>\n</blockquote>\n\n<p>No it isn't</p>\n\n<p>There is famous \"struct hack\" to get structure with array allocated in one go</p>\n\n<pre><code>struct name {\n    int namelen;\n    char namestr[1];\n};\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>struct name *makename(char *newname)\n{\n    struct name *ret = malloc(sizeof(struct name)-1 + strlen(newname)+1);\n            /* -1 for initial [1]; +1 for \\0 */\n    if(ret != NULL) {\n        ret-&gt;namelen = strlen(newname);\n        strcpy(ret-&gt;namestr, newname);\n    }\n\n    return ret;\n}\n</code></pre>\n\n<p>See <a href=\"http://c-faq.com/struct/structhack.html\" rel=\"nofollow\">http://c-faq.com/struct/structhack.html</a> for details</p>\n\n<p>UPDATE</p>\n\n<p>As mentioned, array to be last member of the struct, that might be unreasonable restriction</p>\n\n<p>UPDATE</p>\n\n<p>IN C99 this is now blessed way, called <code>flexible array member</code>, declaration shall be modified to be </p>\n\n<pre><code>struct name {\n    int namelen;\n    char namestr[];\n};\n</code></pre>\n\n<p>and then it will work and allocated in one go</p>\n"}, {"comments": [{"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 0, "creation_date": 1427903220, "post_id": 29395016, "comment_id": 46966738, "body": "So do you mean that even if <code>int</code>, <code>double</code>, or <code>void *</code> can only be a member of this packed pseudo-struct, there can be alignment problems?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 0, "creation_date": 1427903685, "post_id": 29395016, "comment_id": 46967020, "body": "@xiver77, with your example code, the <code>void *</code>s in the middle of the structure may be misaligned.  For instance, if pointers are 64 bits wide and want 64-bit alignment, but <code>int</code>s are 32-bits wide, then your example code <i>will</i> misalign <i>all</i> the pointers."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 0, "creation_date": 1427905778, "post_id": 29395016, "comment_id": 46968402, "body": "<code>the speed difference you tested is unlikely to be significant.</code> Nonsense. Memory access pattern would be very different. Having linear structure (all allocated in one go) is a lot better due to existence of such thing as prefetcher. I bet 12-14% difference @xiver77 sees is due to better memory access, not multiple allocations"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1427906124, "post_id": 29395016, "comment_id": 46968607, "body": "@SeverinPappadeux, all he tested was the speed of allocating and freeing his data structures.  It is <i>that</i> difference that I said is unlikely to be significant.  Moreover, although it is certainly true that better locality of reference contributes to better performance, the ordinary <code>struct</code> approach could yield equivalent locality of reference in many common cases, given the memory allocation pattern presented."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1427906659, "post_id": 29395016, "comment_id": 46968939, "body": "@SeverinPappadeux, I have updated my answer to clarify."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1427906626, "last_edit_date": 1427906626, "creation_date": 1427902615, "answer_id": 29395016, "question_id": 29394229, "link": "https://stackoverflow.com/questions/29394229/emulating-a-variable-size-struct-in-c-allignment-performance-issues/29395016#29395016", "title": "emulating a variable size struct in C; allignment, performance issues", "body": "<p>Unless a sizable proportion of the work of your program is going to be allocating and freeing these data structures, the difference you observed in allocation / deallocation speed is unlikely to make a significant difference in the program's overall execution time.</p>\n\n<p>Furthermore, do be aware that the two approaches are not equivalent.  The latter does not produce a representation of a <code>struct old_a</code>, so any other code that uses the data structure produced must use the provided access macros (or an equivalent) to do so.</p>\n\n<p>Moreover, the roll-your-own-struct approach has potential alignment issues.  Depending on the implementation-dependent sizes and alignment requirements for various types, it may cause the members of the pointer array inside the pseudo-struct to be misaligned.  If it does, then either a speed penalty or possibly even a program crash will result.</p>\n\n<p>More generally, there are few safe assumptions about sizes of type representations.  It is certainly <strong>un</strong>safe to assume that the size of an <code>int</code> is the same as the size of a <code>void *</code>, or that either one is the same size as a <code>double</code>.</p>\n"}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 29395016, "answer_count": 3, "score": 0, "last_activity_date": 1427915421, "creation_date": 1427900413, "question_id": 29394229, "link": "https://stackoverflow.com/questions/29394229/emulating-a-variable-size-struct-in-c-allignment-performance-issues", "title": "emulating a variable size struct in C; allignment, performance issues", "body": "<p>It is possible to put arrays with custom length anywhere in a struct in C, but in that case additional <code>malloc</code> calls are required. Some compilers allow having VLAs anywhere in a struct, but that is not standard compliant. So I decided to emulate VLAs within struct for standard C.</p>\n\n<p>I am in a situation where I really do have to get the maximum performance. The code in C will be automatically generated, so readability or style is not important in this case.</p>\n\n<p>There will be structs with many custom size array members in between static size members. Below is a very simple form of such structs.</p>\n\n<pre><code>struct old_a {\n    int n_refs;\n    void **refs;\n    int count;\n};\n\nstruct old_a *old_a_new(int n_refs, int count) {\n    struct old_a *p_a = malloc(sizeof(struct old_a));\n    p_a-&gt;n_refs = n_refs;\n    p_a-&gt;refs = malloc(n_refs * sizeof(void *));\n    p_a-&gt;count = count;\n    return p_a;\n}\n\n#define old_a_delete(p_a) do {\\\n    free(p_a-&gt;refs);\\\n    free(p_a);\\\n} while (0)\n</code></pre>\n\n<p>The additional <code>malloc</code> call for <code>refs</code> can be avoided as follows.</p>\n\n<pre><code>#define a_get_n_refs(p_a) *(int *)p_a\n#define a_set_n_refs(p_a, rval) *(int *)p_a = rval\n#define a_get_count(p_a) *(int *)((char *)p_a + sizeof(int) + a_get_n_refs(p_a) * sizeof(void *))\n#define a_set_count(p_a, rval) *(int *)((char *)p_a + sizeof(int) + a_get_n_refs(p_a) * sizeof(void *)) = rval\n#define a_get_refs(p_a, i) *(void **)((char *)p_a + sizeof(int) + i * sizeof(void *))\n#define a_set_refs(p_a, i, rval) *(void **)((char *)p_a + sizeof(int) + i * sizeof(void *)) = rval\n\nstatic void *a_new(int n_refs, int count) {\n    void *p_a = malloc(sizeof(int) + n_refs * sizeof(void *) + sizeof(int));\n    a_set_n_refs(p_a, n_refs);\n    a_set_count(p_a, count);\n    return p_a;\n}\n\n#define a_delete(p_a) do {\\\n    free(p_a);\\\n} while (0)\n</code></pre>\n\n<p>The emulated version seems to run 12~14% faster in my machine than the one with a pointer array. I assume it is due to the halved number of calls to <code>malloc</code> and <code>free</code>, and the reduced number of dereferencing. The test code is below.</p>\n\n<pre><code>int main(int argc, char **argv) {\n    const int n_as = atoi(argv[1]) * 10000;\n    const int n_refs = n_as;\n    const int count = 1;\n    unsigned int old_sum = 0;\n    unsigned int sum = 0;\n    clock_t timer;\n\n    timer = clock();\n    struct old_a **old_as = malloc(n_as * sizeof(struct old_a));\n    for (int i = 0; i &lt; n_as; ++i) {\n        old_as[i] = old_a_new(n_refs, count);\n        for (int j = 0; j &lt; n_refs; ++j) {\n            old_as[i]-&gt;refs[j] = (void *)j;\n            old_sum += (int)old_as[i]-&gt;refs[j];\n        }\n        old_sum += old_as[i]-&gt;n_refs + old_as[i]-&gt;count;\n        old_a_delete(old_as[i]);\n    }\n    free(old_as);\n    timer = clock() - timer;\n    printf(\"old_sum = %u; elapsed time = %.3f\\n\", old_sum, (double)timer / CLOCKS_PER_SEC);\n\n    timer = clock();\n    void **as = malloc(n_as * sizeof(void *));\n    for (int i = 0; i &lt; n_as; ++i) {\n        as[i] = a_new(n_refs, count);\n        for (int j = 0; j &lt; n_refs; ++j) {\n            a_set_refs(as[i], j, (void *)j);\n            sum += (int)a_get_refs(as[i], j);\n        }\n        sum += a_get_n_refs(as[i]) + a_get_count(as[i]);\n        a_delete(as[i]);\n    }\n    free(as);\n    timer = clock() - timer;\n    printf(\"sum = %u; elapsed time = %.2f\\n\", sum, (double)timer / CLOCKS_PER_SEC);\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with <code>gcc test.c -otest -std=c99</code>:</p>\n\n<pre><code>&gt;test 4\nold_sum = 3293684800; elapsed time = 7.04\nsum = 3293684800; elapsed time = 6.07\n\n&gt;test 5\nold_sum = 885958608; elapsed time = 10.74\nsum = 885958608; elapsed time = 9.44\n</code></pre>\n\n<p>Please let me know if my code has any undefined behaviors, implementation defined behaviors et cetera. It is meant to be 100% portable for machines with a sane (standard compliant) C compiler.</p>\n\n<p>I am aware of memory alignment issues. The member of these emulated structs will only be <code>int</code>, <code>double</code>, and <code>void *</code>, so I think there will not be alignment problems, but I am not sure. Also although the emulated struct appreared to run faster in my machine (Windows 7 64bit, MinGW/gcc), I do not know how it is likely to run with other hardware or compilers. Other than checking about standard guarenteed behavior, I really need help about hardware knowledge; which one is more machine friendly code (preferably in general)?</p>\n"}, {"tags": ["c", "arrays", "char", "strcpy"], "comments": [{"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1427899824, "post_id": 29393849, "comment_id": 46964507, "body": "why not <code>void choseArray(char newArray[6][250], ....</code>  ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1427899857, "post_id": 29393849, "comment_id": 46964532, "body": "You have not presented the declaration of <code>newArray</code> that applies in the scope of the <code>switch</code> statement, which is of great relevance."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 3, "last_activity_date": 1427900031, "creation_date": 1427900031, "answer_id": 29394077, "question_id": 29393849, "link": "https://stackoverflow.com/questions/29393849/copy-array-of-strings-into-another-array-in-c/29394077#29394077", "title": "Copy array of strings into another array in C", "body": "<p>Didn't you get a compiler warning? Try declaring the function to match the arguments passed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid choseArray(char newArray[][250], char category[][250]){\n    int i;\n    for(i=0;i&lt;6;i++)\n        strcpy(newArray[i], category[i]);\n}\n\nint main()\n{\n    char gameOfThrones[6][250] = {\"KINGSLANDING\", \"TYRIAN\", \"STARK\", \"LANISTERS\", \"WESTEROS\", \"WINTERFELL\"};\n    char breakingBad[6][250] = {\"JESSE\", \"WALT\", \"HEISENBERG\", \"SAUL\", \"GUSTAVO\", \"BREAKFAST\"};\n    char newArray[6][250];\n    choseArray(newArray, gameOfThrones);\n    return 0;\n}\n</code></pre>\n\n<p>The way you were doing it</p>\n\n<pre><code>char **newArray\n</code></pre>\n\n<p>is a pointer to a pointer, or, an array of pointers.</p>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 4738667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f46b094fd612b9dd3bbffd236172168?s=128&d=identicon&r=PG&f=1", "display_name": "Declan Fitzpatrick", "link": "https://stackoverflow.com/users/4738667/declan-fitzpatrick"}, "edited": false, "score": 0, "creation_date": 1427900989, "post_id": 29394146, "comment_id": 46965355, "body": "Thank you very much, got it working with that and I understand why now, i didn&#39;t get any compiler warning from devc++"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1427900200, "creation_date": 1427900200, "answer_id": 29394146, "question_id": 29393849, "link": "https://stackoverflow.com/questions/29393849/copy-array-of-strings-into-another-array-in-c/29394146#29394146", "title": "Copy array of strings into another array in C", "body": "<p>If you declare your word lists in this form ...</p>\n\n<pre><code>char gameOfThrones[6][250] = { ... };\n</code></pre>\n\n<p>then they are arrays of arrays of <code>char</code>s.  The function parameter type <code>char **</code> is a pointer to a <code>char</code> <em>pointer</em>, which is not even directly comparable.  Your compiler should have thrown a fit about this.</p>\n\n<p>Supposing that <code>newArray</code> is of the same type as the base word lists, you should declare your function like so:</p>\n\n<pre><code>void choseArray(char newArray[][250], char category[][250]) { ... }\n</code></pre>\n\n<p>... or possibly like so:</p>\n\n<pre><code>void choseArray(char (*newArray)[250], char (*category)[250]) { ... }\n</code></pre>\n\n<p>... to match the actual argument types.  The body of your function probably works as-is in that case.</p>\n"}], "owner": {"reputation": 149, "user_id": 4738667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f46b094fd612b9dd3bbffd236172168?s=128&d=identicon&r=PG&f=1", "display_name": "Declan Fitzpatrick", "link": "https://stackoverflow.com/users/4738667/declan-fitzpatrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10780, "favorite_count": 0, "accepted_answer_id": 29394146, "answer_count": 2, "score": 4, "last_activity_date": 1427900200, "creation_date": 1427899490, "question_id": 29393849, "link": "https://stackoverflow.com/questions/29393849/copy-array-of-strings-into-another-array-in-c", "title": "Copy array of strings into another array in C", "body": "<p>I'm making a word search program in C which takes the user input and then chooses one of the global arrays of words and uses that to generate the word search. It works when I just use one of the global arrays but not with the choice, I want to copy the contents of the category arrays, depending on the users choice into the newArray which can be used with the word search. The program crashes after entering an option at the moment, here's what I have. </p>\n\n<pre><code>switch(choice)\n{\n    case 1: choseArray(newArray, massEffect);\n    break;\n    case 2: choseArray(newArray, fallout3);\n    break;\n    case 3: choseArray(newArray, elderScrolls);\n    break;\n    case 4: choseArray(newArray, gameOfThrones);\n    break;\n    case 5: choseArray(newArray, breakingBad);\n    break;\n    default: printf(\"Enter a valid option!\");\n}\n\nvoid choseArray(char** newArray, char** category)\n{\n     int i;\n     for(i=0;i&lt;6;i++)\n     {\n         strcpy(newArray[i], category[i]);\n     }\n}\n</code></pre>\n\n<p>The arrays look like this and are declared globally for now</p>\n\n<pre><code>char gameOfThrones[6][250] = {\"KINGSLANDING\", \"TYRIAN\", \"STARK\", \"LANISTERS\", \"WESTEROS\", \"WINTERFELL\"};\nchar breakingBad[6][250] = {\"JESSE\", \"WALT\", \"HEISENBERG\", \"SAUL\", \"GUSTAVO\", \"BREAKFAST\"};\nchar newArray[6][250];\n</code></pre>\n"}, {"tags": ["c", "matlab", "visual-studio-2012", "matrix", "mex"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1427899705, "post_id": 29393771, "comment_id": 46964427, "body": "You haven&#39;t given nearly enough information to say for sure -- we need to see the body of <code>fivepoint_helper</code> and <i>all</i> the changes you made between the mex version and the standalone version (the change you showed cannot possibly have been the complete change).  However, I have a guess: Matlab, like Fortran, indexes matrices in column-major (&quot;backward&quot;) order.  C indexes matrices in row-major (&quot;correct&quot;) order.  You may therefore need to interchange the indices on every matrix element lookup."}, {"owner": {"reputation": 363, "user_id": 4174809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93d7dce6c9b9a96131e8a1416147aea0?s=128&d=identicon&r=PG&f=1", "display_name": "Didon", "link": "https://stackoverflow.com/users/4174809/didon"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1427900629, "post_id": 29393771, "comment_id": 46965099, "body": "I just edited my question and added a part of the mex file (the file is very long and exceeds the number of characters allowed)"}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1427908205, "post_id": 29393771, "comment_id": 46969731, "body": "@zwol I agree with you. In fact, I stole your answer accidentally as I immediately jumped on this myself. :). This is really common."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1427905311, "post_id": 29395357, "comment_id": 46968080, "body": "E is 9x4, so column major will use the number of rows <code>(row + column*rows)</code> while row major will use the number of columns <code>(column + row*columns)</code>  Definitely wrong for both expressions to contain <code>*9</code> (the number of rows)"}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1427905634, "post_id": 29395357, "comment_id": 46968305, "body": "@BenVoigt You&#39;re right, of course.  That&#39;s what happens when I try to answer on my phone.  I&#39;m updating with a better example element."}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1427906943, "post_id": 29395357, "comment_id": 46969078, "body": "@BenVoigt Now that I look again on a computer screen :), there is nothing wrong with getting row 7, col 2 via <code>[2*9 + 7]</code>, where 9 is the number of rows.  But that&#39;s only good for the MATLAB version.  I&#39;m guessing he calls <code>fivepoint_helper</code> with a row-major version of the matrix <code>EE</code>."}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "reply_to_user": {"reputation": 363, "user_id": 4174809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93d7dce6c9b9a96131e8a1416147aea0?s=128&d=identicon&r=PG&f=1", "display_name": "Didon", "link": "https://stackoverflow.com/users/4174809/didon"}, "edited": false, "score": 0, "creation_date": 1427918087, "post_id": 29395357, "comment_id": 46975101, "body": "@Daphn&#233;e as a test just try to transpose the input from MATLAB.  The answer may be wrong, but it will indicate why the discrepancy exists"}, {"owner": {"reputation": 363, "user_id": 4174809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93d7dce6c9b9a96131e8a1416147aea0?s=128&d=identicon&r=PG&f=1", "display_name": "Didon", "link": "https://stackoverflow.com/users/4174809/didon"}, "edited": false, "score": 0, "creation_date": 1427919978, "post_id": 29395357, "comment_id": 46976127, "body": "@chappjc I finally got a correct result. For EE I swaped row and column indices and used a row major indexing for example: <code>e27=EE[2*9+7]</code>is changed to <code>e27=[7*4+9]</code>I used also a row major indexing for the output A for example <code>A[1 + 10*6]</code>become <code>A[1*20+6]</code>..Thank you for your help"}], "tags": [], "owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "is_accepted": true, "score": 2, "last_activity_date": 1427907227, "last_edit_date": 1427907227, "creation_date": 1427903565, "answer_id": 29395357, "question_id": 29393771, "link": "https://stackoverflow.com/questions/29393771/different-results-between-a-mex-file-and-c-file/29395357#29395357", "title": "Different results between a mex file and C file", "body": "<p>MATLAB is column-major, while C is generally row-major (so your input to <code>fivepoint_helper</code> likely has row-major data organization).  Assuming <code>EE</code> is 9 rows by 4 columns you have,</p>\n\n<pre><code>e27 = EE[2*9 + 7 ]; // row 7, column 2 ?\n</code></pre>\n\n<p>where 9 is the number of rows, so this looks OK, but <strong>only for column-major inputs</strong>.  If you are using this to read in row-major data in the C only (non-MEX) version, then that will be wrong.</p>\n\n<p>For a fix, you could change all of these equations to deal with row-major input, and to make the MEX version work, transpose the input.  That's a quick fix, but you could also add a transpose inside the MEX file version.</p>\n"}], "owner": {"reputation": 363, "user_id": 4174809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93d7dce6c9b9a96131e8a1416147aea0?s=128&d=identicon&r=PG&f=1", "display_name": "Didon", "link": "https://stackoverflow.com/users/4174809/didon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 29395357, "answer_count": 1, "score": 2, "last_activity_date": 1427907227, "creation_date": 1427899270, "last_edit_date": 1427903823, "question_id": 29393771, "link": "https://stackoverflow.com/questions/29393771/different-results-between-a-mex-file-and-c-file", "title": "Different results between a mex file and C file", "body": "<p>I have a MATLAB code in which a computationally expensive part was converted into a C mex file. The mex file is:</p>\n\n<pre><code>/* Copyright Henrik Stewenius*/\n\n/*************************************************\n  Indata  : 9x4 matrix \n  Data out: 10x20 matrix   \n*************************************************/\n#include \"mex.h\"\n#include &lt;math.h&gt;\n\n\nvoid mexFunction(int nlhs, mxArray *plhs[],\n                 int nrhs, const mxArray *prhs[])\n/*nlhs    number of expected mxArrays.\n  plhs    pointer to an array of NULL pointers.\n  nrhs    number of input mxArrays.\n  prhs    pointer to an array of input mxArrays.    */\n{\n  double *EE, *A;\n  double e00,e01,e02,e03,e04,e05,e06,e07,e08;\n  double e10,e11,e12,e13,e14,e15,e16,e17,e18;\n  double e20,e21,e22,e23,e24,e25,e26,e27,e28;\n  double e30,e31,e32,e33,e34,e35,e36,e37,e38;\n\n  double e002,e012,e022,e032,e042,e052,e062,e072,e082;\n  double e102,e112,e122,e132,e142,e152,e162,e172,e182;\n  double e202,e212,e222,e232,e242,e252,e262,e272,e282;\n  double e302,e312,e322,e332,e342,e352,e362,e372,e382;\n\n  double e003,e013,e023,e033,e043,e053,e063,e073,e083;\n  double e103,e113,e123,e133,e143,e153,e163,e173,e183;\n  double e203,e213,e223,e233,e243,e253,e263,e273,e283;\n  double e303,e313,e323,e333,e343,e353,e363,e373,e383;\n\n  if(nrhs != 1  )     mexErrMsgTxt(\"EE (10*4)\\n\");\n  EE = mxGetPr( prhs[0] )  ;\n  plhs[0] = mxCreateDoubleMatrix(10 ,20  , mxREAL);\n  A  = mxGetPr( plhs[0]);\n\n\ne00 = EE[0*9 + 0 ];\ne10 = EE[1*9 + 0 ];\ne20 = EE[2*9 + 0 ];\ne30 = EE[3*9 + 0 ];\ne01 = EE[0*9 + 1 ];\ne11 = EE[1*9 + 1 ];\ne21 = EE[2*9 + 1 ];\ne31 = EE[3*9 + 1 ];\ne02 = EE[0*9 + 2 ];\ne12 = EE[1*9 + 2 ];\ne22 = EE[2*9 + 2 ];\ne32 = EE[3*9 + 2 ];\ne03 = EE[0*9 + 3 ];\ne13 = EE[1*9 + 3 ];\ne23 = EE[2*9 + 3 ];\ne33 = EE[3*9 + 3 ];\ne04 = EE[0*9 + 4 ];\ne14 = EE[1*9 + 4 ];\ne24 = EE[2*9 + 4 ];\ne34 = EE[3*9 + 4 ];\ne05 = EE[0*9 + 5 ];\ne15 = EE[1*9 + 5 ];\ne25 = EE[2*9 + 5 ];\ne35 = EE[3*9 + 5 ];\ne06 = EE[0*9 + 6 ];\ne16 = EE[1*9 + 6 ];\ne26 = EE[2*9 + 6 ];\ne36 = EE[3*9 + 6 ];\ne07 = EE[0*9 + 7 ];\ne17 = EE[1*9 + 7 ];\ne27 = EE[2*9 + 7 ];\ne37 = EE[3*9 + 7 ];\ne08 = EE[0*9 + 8 ];\ne18 = EE[1*9 + 8 ];\ne28 = EE[2*9 + 8 ];\ne38 = EE[3*9 + 8 ];\n\n\ne002 =e00*e00;\ne102 =e10*e10;\ne202 =e20*e20;\ne302 =e30*e30;\ne012 =e01*e01;\ne112 =e11*e11;\ne212 =e21*e21;\ne312 =e31*e31;\ne022 =e02*e02;\ne122 =e12*e12;\ne222 =e22*e22;\ne322 =e32*e32;\ne032 =e03*e03;\ne132 =e13*e13;\ne232 =e23*e23;\ne332 =e33*e33;\ne042 =e04*e04;\ne142 =e14*e14;\ne242 =e24*e24;\ne342 =e34*e34;\ne052 =e05*e05;\ne152 =e15*e15;\ne252 =e25*e25;\ne352 =e35*e35;\ne062 =e06*e06;\ne162 =e16*e16;\ne262 =e26*e26;\ne362 =e36*e36;\ne072 =e07*e07;\ne172 =e17*e17;\ne272 =e27*e27;\ne372 =e37*e37;\ne082 =e08*e08;\ne182 =e18*e18;\ne282 =e28*e28;\ne382 =e38*e38;\n\ne003 =e00*e00*e00;\ne103 =e10*e10*e10;\ne203 =e20*e20*e20;\ne303 =e30*e30*e30;\ne013 =e01*e01*e01;\ne113 =e11*e11*e11;\ne213 =e21*e21*e21;\ne313 =e31*e31*e31;\ne023 =e02*e02*e02;\ne123 =e12*e12*e12;\ne223 =e22*e22*e22;\ne323 =e32*e32*e32;\ne033 =e03*e03*e03;\ne133 =e13*e13*e13;\ne233 =e23*e23*e23;\ne333 =e33*e33*e33;\ne043 =e04*e04*e04;\ne143 =e14*e14*e14;\ne243 =e24*e24*e24;\ne343 =e34*e34*e34;\ne053 =e05*e05*e05;\ne153 =e15*e15*e15;\ne253 =e25*e25*e25;\ne353 =e35*e35*e35;\ne063 =e06*e06*e06;\ne163 =e16*e16*e16;\ne263 =e26*e26*e26;\ne363 =e36*e36*e36;\ne073 =e07*e07*e07;\ne173 =e17*e17*e17;\ne273 =e27*e27*e27;\ne373 =e37*e37*e37;\ne083 =e08*e08*e08;\ne183 =e18*e18*e18;\ne283 =e28*e28*e28;\ne383 =e38*e38*e38;\n\n\nA[0 + 10*0]=0.5*e003+0.5*e00*e012+0.5*e00*e022+0.5*e00*e032+e03*e01*e04+e03*e02*e05+0.5*e00*e062+e06*e01*e07+e06*e02*e08-0.5*e00*e042-0.5*e00*e052-0.5*e00*e072-0.5*e00*e082;\nA[0 + 10*1]=e00*e11*e01+e00*e12*e02+e03*e00*e13+e03*e11*e04+e03*e01*e14+e03*e12*e05+e03*e02*e15+e13*e01*e04+e13*e02*e05+e06*e00*e16+1.5*e10*e002+0.5*e10*e012+0.5*e10*e022+0.5*e10*e062-0.5*e10*e042-0.5*e10*e052-0.5*e10*e072+0.5*e10*e032+e06*e11*e07+e06*e01*e17+e06*e12*e08+e06*e02*e18+e16*e01*e07+e16*e02*e08-e00*e14*e04-e00*e17*e07-e00*e15*e05-e00*e18*e08-0.5*e10*e082;\nA[0 + 10*2]=e16*e02*e18+e03*e12*e15+e10*e11*e01+e10*e12*e02+e03*e10*e13+e03*e11*e14+e13*e11*e04+e13*e01*e14+e13*e12*e05+e13*e02*e15+e06*e10*e16+e06*e12*e18+e06*e11*e17+e16*e11*e07+e16*e01*e17+e16*e12*e08-e10*e14*e04-e10*e17*e07-e10*e15*e05-e10*e18*e08+1.5*e00*e102+0.5*e00*e122+0.5*e00*e112+0.5*e00*e132+0.5*e00*e162-0.5*e00*e152-0.5*e00*e172-0.5*e00*e182-0.5*e00*e142;\nA[0 + 10*3]=0.5*e103+0.5*e10*e122+0.5*e10*e112+0.5*e10*e132+e13*e12*e15+e13*e11*e14+0.5*e10*e162+e16*e12*e18+e16*e11*e17-0.5*e10*e152-0.5*e10*e172-0.5*e10*e182-0.5*e10*e142;\nA[0 + 10*4]=-e00*e28*e08-e00*e25*e05-e00*e27*e07-e00*e24*e04+e26*e02*e08+e26*e01*e07+e06*e02*e28+e06*e22*e08+e06*e01*e27+e06*e21*e07+e23*e02*e05+e23*e01*e04+e03*e02*e25+e03*e22*e05+e03*e01*e24+e03*e21*e04+e00*e22*e02+e00*e21*e01-0.5*e20*e082-0.5*e20*e052-0.5*e20*e072-0.5*e20*e042+e06*e00*e26+0.5*e20*e062+e03*e00*e23+0.5*e20*e022+1.5*e20*e002+0.5*e20*e032+0.5*e20*e012;\nA[0 + 10*5]=-e10*e24*e04-e10*e27*e07-e10*e25*e05-e10*e28*e08-e20*e14*e04-e20*e17*e07-e20*e15*e05-e20*e18*e08-e00*e24*e14-e00*e25*e15-e00*e27*e17-e00*e28*e18+e06*e21*e17+e06*e22*e18+e06*e12*e28+e16*e00*e26+e16*e21*e07+e16*e01*e27+e16*e22*e08+e16*e02*e28+e26*e11*e07+e26*e01*e17+e26*e12*e08+e26*e02*e18+e06*e11*e27+e23*e11*e04+e23*e01*e14+e23*e12*e05+e23*e02*e15+e06*e20*e16+e06*e10*e26+e03*e21*e14+e03*e22*e15+e03*e12*e25+e13*e00*e23+e13*e21*e04+e13*e01*e24+e13*e22*e05+e13*e02*e25+e03*e11*e24+e03*e20*e13+e03*e10*e23+e00*e21*e11+3*e00*e20*e10+e00*e22*e12+e20*e12*e02+e20*e11*e01+e10*e22*e02+e10*e21*e01;\nA[0 + 10*6]=-0.5*e20*e152+e26*e11*e17-e10*e24*e14-e10*e25*e15-e10*e27*e17-e10*e28*e18+0.5*e20*e162+e13*e10*e23+e13*e22*e15+e23*e12*e15+e23*e11*e14+e16*e10*e26+e16*e21*e17+e16*e11*e27+e16*e22*e18+e16*e12*e28+e26*e12*e18+e13*e12*e25+0.5*e20*e132+1.5*e20*e102+0.5*e20*e122+0.5*e20*e112+e10*e21*e11+e10*e22*e12+e13*e11*e24-0.5*e20*e172-0.5*e20*e182-0.5*e20*e142+e13*e21*e14;\nA[0 + 10*7]=-e20*e25*e05-e20*e28*e08-0.5*e00*e272-0.5*e00*e282-0.5*e00*e242+0.5*e00*e262-0.5*e00*e252+e06*e20*e26+0.5*e00*e232+e06*e22*e28+e06*e21*e27+e26*e21*e07+e26*e01*e27+e26*e22*e08+e26*e02*e28-e20*e24*e04-e20*e27*e07+e03*e20*e23+e03*e22*e25+e03*e21*e24+e23*e21*e04+e23*e01*e24+e23*e22*e05+e23*e02*e25+e20*e21*e01+e20*e22*e02+1.5*e00*e202+0.5*e00*e222+0.5*e00*e212;\nA[0 + 10*8]=e23*e21*e14+e23*e11*e24+e23*e22*e15+e23*e12*e25+e16*e20*e26+e16*e22*e28+e16*e21*e27+e26*e21*e17+e26*e11*e27+e26*e22*e18+e26*e12*e28+1.5*e10*e202+0.5*e10*e222+0.5*e10*e212+0.5*e10*e232+e20*e21*e11+e20*e22*e12+e13*e20*e23+e13*e22*e25+e13*e21*e24-e20*e24*e14-e20*e25*e15-e20*e27*e17-e20*e28*e18-0.5*e10*e272-0.5*e10*e282-0.5*e10*e242-0.5*e10*e252+0.5*e10*e262;\nA[0 + 10*9]=0.5*e203+0.5*e20*e222+0.5*e20*e212+0.5*e20*e232+e23*e22*e25+e23*e21*e24+0.5*e20*e262+e26*e22*e28+e26*e21*e27-0.5*e20*e252-0.5*e20*e272-0.5*e20*e282-0.5*e20*e242;\nA[0 + 10*10]=e06*e32*e08-0.5*e30*e082-0.5*e30*e042-0.5*e30*e052-0.5*e30*e072+0.5*e30*e012+0.5*e30*e022+0.5*e30*e032+0.5*e30*e062+1.5*e30*e002+e00*e31*e01+e00*e32*e02+e03*e31*e04+e03*e01*e34+e03*e32*e05+e03*e02*e35+e33*e01*e04+e33*e02*e05+e06*e00*e36+e06*e31*e07+e06*e01*e37+e06*e02*e38+e36*e01*e07+e36*e02*e08-e00*e34*e04-e00*e37*e07-e00*e35*e05-e00*e38*e08+e03*e00*e33;\nA[0 + 10*11]=e06*e30*e16+e03*e30*e13+e16*e31*e07+e06*e10*e36-e10*e37*e07+3*e00*e30*e10+e00*e32*e12-e00*e38*e18-e10*e34*e04-e10*e35*e05-e10*e38*e08-e30*e14*e04-e30*e17*e07-e30*e15*e05-e30*e18*e08+e00*e31*e11+e10*e31*e01+e10*e32*e02+e30*e11*e01+e30*e12*e02+e03*e10*e33-e00*e34*e14-e00*e35*e15-e00*e37*e17+e03*e31*e14+e03*e11*e34+e03*e32*e15+e03*e12*e35+e13*e00*e33+e13*e31*e04+e13*e01*e34+e13*e32*e05+e13*e02*e35+e33*e11*e04+e33*e01*e14+e33*e12*e05+e33*e02*e15+e06*e31*e17+e06*e11*e37+e06*e32*e18+e06*e12*e38+e16*e00*e36+e16*e01*e37+e16*e32*e08+e16*e02*e38+e36*e11*e07+e36*e01*e17+e36*e12*e08+e36*e02*e18;\nA[0 + 10*12]=e13*e10*e33+e33*e11*e14+e16*e10*e36+e16*e31*e17+e16*e11*e37+e16*e32*e18+e16*e12*e38+e36*e12*e18+e36*e11*e17-e10*e34*e14-e10*e35*e15-e10*e37*e17-e10*e38*e18+e10*e31*e11+e10*e32*e12+e13*e31*e14+e13*e11*e34+e13*e32*e15+e13*e12*e35+e33*e12*e15+1.5*e30*e102+0.5*e30*e122+0.5*e30*e112+0.5*e30*e132+0.5*e30*e162-0.5*e30*e152-0.5*e30*e172-0.5*e30*e182-0.5*e30*e142;\nA[0 + 10*13]=e00*e32*e22+3*e00*e30*e20+e00*e31*e21+e20*e31*e01+e20*e32*e02+e30*e21*e01+e30*e22*e02+e03*e20*e33+e03*e32*e25+e03*e22*e35+e03*e31*e24+e03*e21*e34+e23*e00*e33+e23*e31*e04+e23*e01*e34+e23*e32*e05+e23*e02*e35+e33*e21*e04+e33*e01*e24+e33*e22*e05+e33*e02*e25+e06*e30*e26+e06*e20*e36+e06*e32*e28+e06*e22*e38+e06*e31*e27+e06*e21*e37+e26*e00*e36+e26*e31*e07+e03*e30*e23+e26*e01*e37+e26*e32*e08+e26*e02*e38+e36*e21*e07+e36*e01*e27+e36*e22*e08+e36*e02*e28-e00*e35*e25-e00*e37*e27-e00*e38*e28-e00*e34*e24-e20*e34*e04-e20*e37*e07-e20*e35*e05-e20*e38*e08-e30*e24*e04-e30*e27*e07-e30*e25*e05-e30*e28*e08;\nA[0 + 10*14]=e16*e30*e26+e13*e21*e34+3*e10*e30*e20+e10*e32*e22+e10*e31*e21+e20*e31*e11+e20*e32*e12+e30*e21*e11+e30*e22*e12+e13*e30*e23+e13*e20*e33+e13*e32*e25+e13*e22*e35+e13*e31*e24+e23*e10*e33+e23*e31*e14+e23*e11*e34+e23*e32*e15+e23*e12*e35+e33*e21*e14+e33*e11*e24+e33*e22*e15+e33*e12*e25+e16*e20*e36+e16*e32*e28+e16*e22*e38+e16*e31*e27+e16*e21*e37+e26*e10*e36+e26*e31*e17+e26*e11*e37+e26*e32*e18+e26*e12*e38+e36*e21*e17+e36*e11*e27+e36*e22*e18+e36*e12*e28-e10*e35*e25-e10*e37*e27-e10*e38*e28-e10*e34*e24-e20*e34*e14-e20*e35*e15-e20*e37*e17-e20*e38*e18-e30*e24*e14-e30*e25*e15-e30*e27*e17-e30*e28*e18;\nA[0 + 10*15]=-e20*e34*e24+0.5*e30*e262-0.5*e30*e252-0.5*e30*e272-0.5*e30*e282-0.5*e30*e242+1.5*e30*e202+0.5*e30*e222+0.5*e30*e212+0.5*e30*e232+e20*e32*e22+e20*e31*e21+e23*e20*e33+e23*e32*e25+e23*e22*e35+e23*e31*e24+e23*e21*e34+e33*e22*e25+e33*e21*e24+e26*e20*e36+e26*e32*e28+e26*e22*e38+e26*e31*e27+e26*e21*e37+e36*e22*e28+e36*e21*e27-e20*e35*e25-e20*e37*e27-e20*e38*e28;\nA[0 + 10*16]=0.5*e00*e322+e30*e32*e02+e30*e31*e01+1.5*e00*e302+0.5*e00*e312+e03*e32*e35+e33*e31*e04+e33*e01*e34+e33*e32*e05+e33*e02*e35+e06*e30*e36+e06*e31*e37+e06*e32*e38+e36*e31*e07+e36*e01*e37+e36*e32*e08+e36*e02*e38-e30*e34*e04-e30*e37*e07-e30*e35*e05-e30*e38*e08+0.5*e00*e332+0.5*e00*e362-0.5*e00*e382-0.5*e00*e352-0.5*e00*e342-0.5*e00*e372+e03*e30*e33+e03*e31*e34;\nA[0 + 10*17]=0.5*e10*e362-0.5*e10*e382-0.5*e10*e352-0.5*e10*e342-0.5*e10*e372+e36*e31*e17+e36*e11*e37+e36*e32*e18+e36*e12*e38-e30*e34*e14-e30*e35*e15-e30*e37*e17-e30*e38*e18+1.5*e10*e302+0.5*e10*e312+0.5*e10*e322+0.5*e10*e332+e30*e31*e11+e30*e32*e12+e13*e30*e33+e13*e31*e34+e13*e32*e35+e33*e31*e14+e33*e11*e34+e33*e32*e15+e33*e12*e35+e16*e30*e36+e16*e31*e37+e16*e32*e38;\nA[0 + 10*18]=e33*e31*e24+e33*e21*e34+e26*e30*e36+e26*e31*e37+e26*e32*e38+e36*e32*e28+e36*e22*e38+e36*e31*e27+e36*e21*e37-e30*e35*e25-e30*e37*e27-e30*e38*e28-e30*e34*e24+e33*e22*e35+1.5*e20*e302+0.5*e20*e312+0.5*e20*e322+0.5*e20*e332+0.5*e20*e362-0.5*e20*e382-0.5*e20*e352-0.5*e20*e342-0.5*e20*e372+e30*e32*e22+e30*e31*e21+e23*e30*e33+e23*e31*e34+e23*e32*e35+e33*e32*e25;\nA[0 + 10*19]=0.5*e303+0.5*e30*e312+0.5*e30*e322+0.5*e30*e332+e33*e31*e34+e33*e32*e35+0.5*e30*e362+e36*e31*e37+e36*e32*e38-0.5*e30*e382-0.5*e30*e352-0.5*e30*e342-0.5*e30*e372;\nA[1 + 10*0]=e00*e01*e04+0.5*e002*e03+e00*e02*e05+0.5*e033+0.5*e03*e042+0.5*e03*e052+0.5*e03*e062+e06*e04*e07+e06*e05*e08-0.5*e03*e012-0.5*e03*e072-0.5*e03*e022-0.5*e03*e082;\nA[1 + 10*1]=e03*e14*e04+e10*e01*e04+e16*e05*e08+e00*e10*e03+e00*e11*e04+e00*e01*e14+e00*e12*e05+e00*e02*e15+e10*e02*e05+e03*e15*e05+e06*e03*e16+e06*e14*e07+e06*e04*e17+e06*e15*e08+e06*e05*e18+0.5*e002*e13+1.5*e13*e032+0.5*e13*e042+0.5*e13*e052+0.5*e13*e062-0.5*e13*e012-0.5*e13*e072-0.5*e13*e022-0.5*e13*e082+e16*e04*e07-e03*e12*e02-e03*e11*e01-e03*e17*e07-e03*e18*e08;\nA[1 + 10*2]=-e13*e11*e01+e00*e10*e13+e00*e12*e15+e00*e11*e14+e10*e11*e04+e10*e01*e14+e10*e12*e05+e10*e02*e15+e13*e14*e04+e13*e15*e05+e06*e13*e16+e06*e15*e18+e06*e14*e17+e16*e14*e07+e16*e04*e17+e16*e15*e08+e16*e05*e18-e13*e12*e02-e13*e17*e07-e13*e18*e08+0.5*e102*e03+1.5*e03*e132+0.5*e03*e152+0.5*e03*e142+0.5*e03*e162-0.5*e03*e112-0.5*e03*e172-0.5*e03*e122-0.5*e03*e182;\nA[1 + 10*3]=0.5*e102*e13+e10*e11*e14+e10*e12*e15+0.5*e133+0.5*e13*e152+0.5*e13*e142+0.5*e13*e162+e16*e15*e18+e16*e14*e17-0.5*e13*e112-0.5*e13*e122-0.5*e13*e172-0.5*e13*e182;\nA[1 + 10*4]=-e03*e28*e08-e03*e27*e07-e03*e21*e01-e03*e22*e02+e26*e05*e08+e26*e04*e07+e06*e05*e28+e06*e25*e08+e06*e04*e27+e06*e24*e07+e03*e25*e05+e03*e24*e04+e20*e02*e05+e20*e01*e04+e00*e02*e25+e00*e22*e05+e00*e01*e24+e00*e21*e04+e00*e20*e03-0.5*e23*e072-0.5*e23*e082-0.5*e23*e022-0.5*e23*e012+e06*e03*e26+0.5*e23*e052+0.5*e23*e062+1.5*e23*e032+0.5*e23*e042+0.5*e002*e23;\nA[1 + 10*5]=e00*e21*e14+e00*e11*e24+e00*e10*e23+e00*e22*e15+e00*e12*e25+e20*e12*e05+e20*e01*e14+e20*e11*e04+e00*e20*e13+e10*e02*e25+e10*e22*e05+e10*e01*e24+e10*e21*e04+e10*e20*e03+e23*e15*e05+e23*e14*e04+e13*e25*e05+e13*e24*e04+e03*e24*e14+e03*e25*e15+3*e03*e23*e13+e20*e02*e15+e16*e03*e26+e06*e14*e27-e23*e18*e08+e06*e24*e17+e06*e15*e28+e06*e25*e18+e06*e13*e26+e06*e23*e16+e26*e04*e17+e26*e14*e07+e16*e05*e28+e16*e25*e08+e16*e04*e27+e16*e24*e07-e03*e22*e12-e03*e21*e11+e26*e05*e18+e26*e15*e08-e03*e27*e17-e03*e28*e18-e13*e22*e02-e13*e28*e08-e13*e27*e07-e13*e21*e01-e23*e17*e07-e23*e11*e01-e23*e12*e02;\nA[1 + 10*6]=-0.5*e23*e182-0.5*e23*e172-0.5*e23*e112-0.5*e23*e122-e13*e22*e12-e13*e27*e17-e13*e28*e18+e26*e15*e18+e26*e14*e17-e13*e21*e11+e20*e12*e15+e13*e25*e15+e13*e24*e14+e16*e13*e26+e16*e25*e18+e16*e15*e28+e16*e24*e17+e16*e14*e27+1.5*e23*e132+0.5*e23*e152+0.5*e23*e142+0.5*e23*e162+e10*e20*e13+e10*e21*e14+e10*e11*e24+e10*e22*e15+e10*e12*e25+e20*e11*e14+0.5*e102*e23;\nA[1 + 10*7]=e26*e04*e27+e00*e22*e25-e23*e28*e08+0.5*e03*e262-0.5*e03*e212-0.5*e03*e272-0.5*e03*e222-0.5*e03*e282+e23*e24*e04+e23*e25*e05+0.5*e202*e03+e06*e23*e26+e06*e24*e27+e06*e25*e28+e26*e24*e07+e26*e25*e08+e26*e05*e28-e23*e22*e02-e23*e21*e01-e23*e27*e07+e00*e20*e23+e00*e21*e24+e20*e21*e04+e20*e01*e24+e20*e22*e05+e20*e02*e25+1.5*e03*e232+0.5*e03*e242+0.5*e03*e252;\nA[1 + 10*8]=e20*e11*e24-0.5*e13*e212-0.5*e13*e272-0.5*e13*e222-0.5*e13*e282-e23*e27*e17-e23*e28*e18+e26*e25*e18+e26*e24*e17+e26*e14*e27-e23*e21*e11-e23*e22*e12+e26*e15*e28+e23*e25*e15+e23*e24*e14+e16*e23*e26+e16*e24*e27+e16*e25*e28+0.5*e13*e262+e20*e21*e14+e20*e22*e15+e20*e12*e25+0.5*e13*e242+0.5*e13*e252+0.5*e202*e13+1.5*e13*e232+e10*e20*e23+e10*e22*e25+e10*e21*e24;\nA[1 + 10*9]=0.5*e202*e23+e20*e22*e25+e20*e21*e24+0.5*e233+0.5*e23*e242+0.5*e23*e252+0.5*e23*e262+e26*e24*e27+e26*e25*e28-0.5*e23*e212-0.5*e23*e272-0.5*e23*e222-0.5*e23*e282;\nA[1 + 10*10]=e00*e30*e03+0.5*e33*e062-0.5*e33*e012-0.5*e33*e022-0.5*e33*e072+e03*e35*e05+e06*e03*e36+e06*e34*e07+e06*e04*e37+e06*e35*e08+e06*e05*e38+e36*e04*e07+e36*e05*e08-e03*e32*e02-e03*e31*e01-e03*e37*e07+e00*e31*e04+e00*e01*e34+e00*e32*e05+e00*e02*e35+e30*e01*e04+e30*e02*e05+e03*e34*e04-e03*e38*e08+0.5*e002*e33+1.5*e33*e032+0.5*e33*e042+0.5*e33*e052-0.5*e33*e082;\nA[1 + 10*11]=e06*e35*e18+e06*e33*e16+e00*e30*e13+e00*e10*e33+e00*e31*e14+e00*e11*e34+e00*e32*e15+e00*e12*e35+e10*e30*e03-e33*e17*e07-e33*e18*e08+e10*e31*e04+e10*e01*e34+e10*e32*e05+e10*e02*e35+e30*e11*e04+e30*e01*e14+e30*e12*e05+e30*e02*e15+3*e03*e33*e13+e03*e35*e15+e03*e34*e14+e13*e34*e04+e13*e35*e05+e33*e14*e04+e33*e15*e05+e06*e13*e36+e06*e15*e38+e06*e34*e17+e06*e14*e37+e16*e03*e36+e16*e34*e07+e16*e04*e37+e16*e35*e08+e16*e05*e38+e36*e14*e07+e36*e04*e17+e36*e15*e08+e36*e05*e18-e03*e31*e11-e03*e32*e12-e03*e37*e17-e03*e38*e18-e13*e32*e02-e13*e31*e01-e13*e37*e07-e13*e38*e08-e33*e12*e02-e33*e11*e01;\nA[1 + 10*12]=e16*e13*e36+e10*e11*e34+0.5*e33*e152+0.5*e33*e142+0.5*e33*e162-0.5*e33*e112-0.5*e33*e122-0.5*e33*e172-0.5*e33*e182+0.5*e102*e33+1.5*e33*e132+e10*e30*e13+e10*e31*e14+e10*e32*e15+e10*e12*e35+e30*e11*e14+e30*e12*e15+e13*e35*e15+e13*e34*e14+e16*e35*e18+e16*e15*e38+e16*e34*e17+e16*e14*e37+e36*e15*e18+e36*e14*e17-e13*e31*e11-e13*e32*e12-e13*e37*e17-e13*e38*e18;\nA[1 + 10*13]=e06*e35*e28+e36*e04*e27+e00*e20*e33+e00*e30*e23+3*e03*e33*e23+e03*e34*e24+e03*e35*e25+e23*e34*e04+e23*e35*e05+e33*e24*e04+e33*e25*e05+e06*e33*e26+e06*e23*e36+e06*e34*e27+e06*e24*e37+e06*e25*e38+e26*e03*e36+e26*e34*e07+e26*e04*e37+e26*e35*e08+e26*e05*e38+e36*e24*e07+e36*e25*e08+e36*e05*e28-e03*e31*e21-e03*e37*e27-e03*e32*e22-e03*e38*e28-e23*e32*e02-e23*e31*e01-e23*e37*e07-e23*e38*e08-e33*e22*e02-e33*e21*e01-e33*e27*e07-e33*e28*e08+e00*e32*e25+e00*e22*e35+e00*e31*e24+e00*e21*e34+e20*e30*e03+e20*e31*e04+e20*e01*e34+e20*e32*e05+e20*e02*e35+e30*e21*e04+e30*e01*e24+e30*e22*e05+e30*e02*e25;\nA[1 + 10*14]=e10*e30*e23+e10*e20*e33+e10*e22*e35+e10*e32*e25+e10*e31*e24+e10*e21*e34+e20*e30*e13+e20*e31*e14+e20*e11*e34+e20*e32*e15+e20*e12*e35+e30*e21*e14+e30*e11*e24+e30*e22*e15+e30*e12*e25+3*e13*e33*e23+e13*e34*e24+e13*e35*e25+e23*e35*e15+e23*e34*e14+e33*e25*e15+e33*e24*e14+e16*e33*e26+e16*e23*e36+e16*e34*e27+e16*e24*e37+e16*e35*e28+e16*e25*e38+e26*e13*e36+e26*e35*e18+e26*e15*e38+e26*e34*e17+e26*e14*e37+e36*e25*e18+e36*e15*e28+e36*e24*e17+e36*e14*e27-e13*e31*e21-e13*e37*e27-e13*e32*e22-e13*e38*e28-e23*e31*e11-e23*e32*e12-e23*e37*e17-e23*e38*e18-e33*e21*e11-e33*e22*e12-e33*e27*e17-e33*e28*e18;\nA[1 + 10*15]=-0.5*e33*e212-0.5*e33*e272-0.5*e33*e222-0.5*e33*e282+e26*e23*e36+e20*e30*e23+e20*e32*e25+e20*e22*e35+e20*e31*e24+e20*e21*e34+e30*e22*e25+e30*e21*e24+e23*e34*e24+e23*e35*e25+e26*e34*e27+e26*e24*e37+e26*e35*e28+e26*e25*e38+e36*e24*e27+e36*e25*e28-e23*e31*e21-e23*e37*e27-e23*e32*e22-e23*e38*e28+0.5*e202*e33+1.5*e33*e232+0.5*e33*e242+0.5*e33*e252+0.5*e33*e262;\nA[1 + 10*16]=e33*e35*e05+e30*e32*e05+0.5*e03*e362+0.5*e302*e03+1.5*e03*e332+0.5*e03*e352+0.5*e03*e342+e00*e30*e33+e00*e31*e34+e00*e32*e35+e30*e31*e04+e30*e01*e34+e30*e02*e35+e33*e34*e04+e06*e33*e36+e06*e35*e38+e06*e34*e37+e36*e34*e07+e36*e04*e37+e36*e35*e08+e36*e05*e38-e33*e32*e02-e33*e31*e01-e33*e37*e07-e33*e38*e08-0.5*e03*e322-0.5*e03*e382-0.5*e03*e312-0.5*e03*e372;\nA[1 + 10*17]=-e33*e31*e11-e33*e32*e12-e33*e38*e18+e30*e11*e34+e30*e32*e15+e30*e12*e35+e33*e35*e15+e33*e34*e14+e16*e33*e36+e16*e35*e38+e16*e34*e37+e36*e35*e18+e36*e15*e38+e36*e34*e17+e36*e14*e37-e33*e37*e17+0.5*e302*e13+1.5*e13*e332+0.5*e13*e352+0.5*e13*e342+0.5*e13*e362-0.5*e13*e322-0.5*e13*e382-0.5*e13*e312-0.5*e13*e372+e10*e30*e33+e10*e31*e34+e10*e32*e35+e30*e31*e14;\nA[1 + 10*18]=e36*e25*e38+0.5*e302*e23+1.5*e23*e332+0.5*e23*e352+0.5*e23*e342+0.5*e23*e362-0.5*e23*e322-0.5*e23*e382-0.5*e23*e312-0.5*e23*e372+e20*e30*e33+e20*e31*e34+e20*e32*e35+e30*e32*e25+e30*e22*e35+e30*e31*e24+e30*e21*e34+e33*e34*e24+e33*e35*e25+e26*e33*e36+e26*e35*e38+e26*e34*e37+e36*e34*e27+e36*e24*e37+e36*e35*e28-e33*e31*e21-e33*e37*e27-e33*e32*e22-e33*e38*e28;\nA[1 + 10*19]=0.5*e302*e33+e30*e31*e34+e30*e32*e35+0.5*e333+0.5*e33*e352+0.5*e33*e342+0.5*e33*e362+e36*e35*e38+e36*e34*e37-0.5*e33*e322-0.5*e33*e382-0.5*e33*e312-0.5*e33*e372;\nA[2 + 10*0]=0.5*e002*e06+e00*e01*e07+e00*e02*e08+0.5*e032*e06+e03*e04*e07+e03*e05*e08+0.5*e063+0.5*e06*e072+0.5*e06*e082-0.5*e06*e012-0.5*e06*e022-0.5*e06*e042-0.5*e06*e052;\nA[2 + 10*1]=e00*e10*e06+0.5*e002*e16+0.5*e032*e16+1.5*e16*e062+0.5*e16*e072+0.5*e16*e082-0.5*e16*e012-0.5*e16*e022-0.5*e16*e042-0.5*e16*e052+e00*e11*e07+e00*e01*e17+e00*e12*e08+e00*e02*e18+e10*e01*e07+e10*e02*e08+e03*e13*e06+e03*e14*e07+e03*e04*e17+e03*e15*e08+e03*e05*e18+e13*e04*e07+e13*e05*e08+e06*e17*e07+e06*e18*e08-e06*e12*e02-e06*e11*e01-e06*e14*e04-e06*e15*e05;\nA[2 + 10*2]=e13*e14*e07+0.5*e102*e06+e00*e10*e16+e00*e12*e18+e00*e11*e17+e10*e11*e07+e10*e01*e17+e10*e12*e08+e10*e02*e18+e03*e13*e16+e03*e15*e18+e03*e14*e17+e13*e04*e17+e13*e15*e08+e13*e05*e18+e16*e17*e07+e16*e18*e08-e16*e12*e02-e16*e11*e01-e16*e14*e04-e16*e15*e05+0.5*e132*e06+1.5*e06*e162+0.5*e06*e182+0.5*e06*e172-0.5*e06*e112-0.5*e06*e122-0.5*e06*e142-0.5*e06*e152;\nA[2 + 10*3]=0.5*e102*e16+e10*e12*e18+e10*e11*e17+0.5*e132*e16+e13*e15*e18+e13*e14*e17+0.5*e163+0.5*e16*e182+0.5*e16*e172-0.5*e16*e112-0.5*e16*e122-0.5*e16*e142-0.5*e16*e152;\nA[2 + 10*4]=e06*e27*e07+e23*e05*e08+e23*e04*e07+e03*e05*e28+e03*e25*e08+e03*e04*e27+e03*e24*e07+e20*e02*e08+e20*e01*e07+e00*e02*e28+e00*e22*e08+e00*e01*e27+e00*e21*e07+e00*e20*e06-e06*e25*e05-e06*e24*e04-e06*e21*e01-e06*e22*e02+e06*e28*e08-0.5*e26*e042-0.5*e26*e052-0.5*e26*e012-0.5*e26*e022+0.5*e26*e082+0.5*e26*e072+1.5*e26*e062+0.5*e002*e26+e03*e23*e06+0.5*e032*e26;\nA[2 + 10*5]=e13*e05*e28+e00*e12*e28+e13*e25*e08+e13*e04*e27+e13*e24*e07+e13*e23*e06+e03*e14*e27+e03*e24*e17+e03*e15*e28+e03*e25*e18+e03*e13*e26+e03*e23*e16+e20*e02*e18+e20*e12*e08+e20*e01*e17+e20*e11*e07+e00*e21*e17+e10*e02*e28+e10*e22*e08+e10*e01*e27+e10*e21*e07+e10*e20*e06+e00*e11*e27-e26*e15*e05-e26*e14*e04-e26*e11*e01-e26*e12*e02-e16*e25*e05-e16*e24*e04-e16*e21*e01-e16*e22*e02-e06*e24*e14-e06*e22*e12-e06*e21*e11-e06*e25*e15+e00*e20*e16+e00*e22*e18+e00*e10*e26+e26*e18*e08+e26*e17*e07+e16*e28*e08+e16*e27*e07+e06*e27*e17+e06*e28*e18+3*e06*e26*e16+e23*e05*e18+e23*e15*e08+e23*e04*e17+e23*e14*e07;\nA[2 + 10*6]=e10*e22*e18+0.5*e26*e182+0.5*e26*e172+e16*e28*e18+e16*e27*e17-e16*e25*e15-e16*e21*e11-e16*e22*e12+1.5*e26*e162+e13*e15*e28+e13*e24*e17+e13*e14*e27+e23*e15*e18+e23*e14*e17+e10*e12*e28+e10*e21*e17+e10*e11*e27+e20*e12*e18+e20*e11*e17+e13*e23*e16+e13*e25*e18+e10*e20*e16+0.5*e102*e26-0.5*e26*e122-0.5*e26*e142-0.5*e26*e152-e16*e24*e14-0.5*e26*e112+0.5*e132*e26;\nA[2 + 10*7]=-0.5*e06*e212-0.5*e06*e252-0.5*e06*e242+0.5*e06*e272+0.5*e06*e282-0.5*e06*e222+e20*e02*e28+e03*e23*e26+e03*e24*e27+e03*e25*e28+e23*e24*e07+e23*e04*e27+e23*e25*e08+e23*e05*e28+e26*e28*e08-e26*e22*e02-e26*e21*e01-e26*e24*e04-e26*e25*e05+e26*e27*e07+e00*e20*e26+e00*e21*e27+e00*e22*e28+e20*e21*e07+e20*e01*e27+e20*e22*e08+0.5*e202*e06+0.5*e232*e06+1.5*e06*e262;\nA[2 + 10*8]=-e26*e24*e14-0.5*e16*e212-0.5*e16*e252-0.5*e16*e242-e26*e25*e15-0.5*e16*e222-e26*e21*e11+e26*e28*e18+e26*e27*e17-e26*e22*e12+e23*e15*e28+e23*e24*e17+e23*e14*e27+0.5*e232*e16+1.5*e16*e262+0.5*e16*e272+0.5*e16*e282+e10*e20*e26+e10*e21*e27+e10*e22*e28+e20*e22*e18+e20*e12*e28+e20*e21*e17+e20*e11*e27+e13*e23*e26+e13*e24*e27+e13*e25*e28+e23*e25*e18+0.5*e202*e16;\nA[2 + 10*9]=0.5*e202*e26+e20*e21*e27+e20*e22*e28+0.5*e232*e26+e23*e24*e27+e23*e25*e28+0.5*e263+0.5*e26*e272+0.5*e26*e282-0.5*e26*e222-0.5*e26*e212-0.5*e26*e252-0.5*e26*e242;\nA[2 + 10*10]=e03*e34*e07+0.5*e032*e36+1.5*e36*e062+e03*e33*e06+e00*e31*e07+e00*e01*e37+e00*e32*e08+e00*e02*e38+e30*e01*e07+e30*e02*e08+e03*e04*e37+e03*e35*e08+e03*e05*e38+0.5*e002*e36-0.5*e36*e022-0.5*e36*e042-0.5*e36*e052+0.5*e36*e072+0.5*e36*e082-0.5*e36*e012+e33*e04*e07+e33*e05*e08+e06*e37*e07+e06*e38*e08-e06*e32*e02-e06*e31*e01-e06*e34*e04-e06*e35*e05+e00*e30*e06;\nA[2 + 10*11]=e13*e33*e06+e13*e34*e07+e13*e04*e37+e13*e35*e08+e13*e05*e38+e33*e14*e07+e33*e04*e17+e33*e15*e08+e33*e05*e18+3*e06*e36*e16+e06*e38*e18+e06*e37*e17+e16*e37*e07+e16*e38*e08+e36*e17*e07+e36*e18*e08-e06*e35*e15-e06*e31*e11-e06*e32*e12+e00*e31*e17+e00*e11*e37+e10*e30*e06+e10*e31*e07+e10*e01*e37+e10*e32*e08+e10*e02*e38+e30*e11*e07+e30*e01*e17+e30*e12*e08+e30*e02*e18+e03*e33*e16+e03*e13*e36+e03*e35*e18+e03*e15*e38+e03*e34*e17+e03*e14*e37+e00*e30*e16+e00*e12*e38-e06*e34*e14-e16*e32*e02-e16*e31*e01-e16*e34*e04-e16*e35*e05-e36*e12*e02-e36*e11*e01-e36*e14*e04-e36*e15*e05+e00*e10*e36+e00*e32*e18;\nA[2 + 10*12]=0.5*e36*e182+0.5*e36*e172-0.5*e36*e112-0.5*e36*e122-0.5*e36*e142-0.5*e36*e152+0.5*e102*e36+0.5*e132*e36+1.5*e36*e162+e10*e30*e16+e10*e32*e18+e10*e12*e38+e10*e31*e17+e10*e11*e37+e30*e12*e18+e30*e11*e17+e13*e33*e16+e13*e35*e18+e13*e15*e38+e13*e34*e17+e13*e14*e37+e33*e15*e18+e33*e14*e17+e16*e38*e18+e16*e37*e17-e16*e35*e15-e16*e31*e11-e16*e32*e12-e16*e34*e14;\nA[2 + 10*13]=e00*e20*e36+e00*e31*e27+e00*e21*e37+e00*e32*e28+e00*e22*e38+e20*e30*e06+e20*e31*e07+e20*e01*e37+e20*e32*e08+e20*e02*e38+e30*e21*e07+e30*e01*e27+e30*e22*e08+e30*e02*e28+e03*e33*e26+e03*e23*e36+e03*e34*e27+e03*e24*e37+e03*e35*e28-e26*e31*e01-e26*e35*e05-e36*e22*e02-e36*e21*e01-e36*e24*e04-e36*e25*e05-e26*e34*e04+e03*e25*e38+e23*e34*e07+e23*e04*e37+e23*e35*e08+e23*e05*e38+e33*e24*e07+e33*e04*e27+e33*e25*e08+e33*e05*e28+3*e06*e36*e26+e06*e37*e27+e06*e38*e28+e26*e37*e07+e26*e38*e08+e36*e27*e07+e36*e28*e08-e06*e32*e22-e06*e31*e21-e06*e35*e25-e06*e34*e24-e26*e32*e02+e00*e30*e26+e23*e33*e06;\nA[2 + 10*14]=e10*e30*e26+e10*e20*e36+e10*e31*e27+e10*e21*e37+e10*e32*e28+e10*e22*e38+e20*e30*e16+e20*e32*e18+e20*e12*e38+e20*e31*e17+e20*e11*e37+e30*e22*e18+e30*e12*e28+e30*e21*e17+e30*e11*e27+e13*e33*e26+e13*e23*e36+e13*e34*e27+e13*e24*e37+e13*e35*e28+e13*e25*e38+e23*e33*e16+e23*e35*e18+e23*e15*e38+e23*e34*e17+e23*e14*e37+e33*e25*e18+e33*e15*e28+e33*e24*e17+e33*e14*e27+3*e16*e36*e26+e16*e37*e27+e16*e38*e28+e26*e38*e18+e26*e37*e17+e36*e28*e18+e36*e27*e17-e16*e32*e22-e16*e31*e21-e16*e35*e25-e16*e34*e24-e26*e35*e15-e26*e31*e11-e26*e32*e12-e26*e34*e14-e36*e25*e15-e36*e21*e11-e36*e22*e12-e36*e24*e14;\nA[2 + 10*15]=e33*e25*e28+e20*e30*e26+e20*e32*e28+e20*e31*e27+e20*e21*e37+e20*e22*e38+e30*e21*e27+e30*e22*e28+e23*e33*e26+e23*e34*e27+e23*e24*e37+e23*e35*e28+e23*e25*e38+e33*e24*e27+e26*e37*e27+e26*e38*e28-e26*e32*e22-e26*e31*e21-e26*e35*e25-e26*e34*e24+0.5*e202*e36+0.5*e232*e36+1.5*e36*e262+0.5*e36*e272+0.5*e36*e282-0.5*e36*e222-0.5*e36*e212-0.5*e36*e252-0.5*e36*e242;\nA[2 + 10*16]=e00*e30*e36+e00*e32*e38+e00*e31*e37+e30*e31*e07+e30*e01*e37+e30*e32*e08+e30*e02*e38+e03*e33*e36-0.5*e06*e342+e03*e35*e38+e33*e34*e07+e33*e04*e37+e33*e35*e08+e33*e05*e38+e36*e37*e07+e36*e38*e08-e36*e32*e02-e36*e31*e01-e36*e34*e04-e36*e35*e05+e03*e34*e37+0.5*e302*e06+0.5*e332*e06+1.5*e06*e362+0.5*e06*e382+0.5*e06*e372-0.5*e06*e352-0.5*e06*e312-0.5*e06*e322;\nA[2 + 10*17]=-e36*e35*e15+e10*e30*e36+0.5*e302*e16+0.5*e332*e16+1.5*e16*e362+0.5*e16*e382+0.5*e16*e372-0.5*e16*e352-0.5*e16*e312-0.5*e16*e322-0.5*e16*e342+e10*e32*e38+e10*e31*e37+e30*e32*e18+e30*e12*e38+e30*e31*e17+e30*e11*e37+e13*e33*e36+e13*e35*e38+e13*e34*e37+e33*e35*e18+e33*e15*e38+e33*e34*e17+e33*e14*e37+e36*e38*e18+e36*e37*e17-e36*e31*e11-e36*e32*e12-e36*e34*e14;\nA[2 + 10*18]=-e36*e35*e25+e30*e32*e28+0.5*e302*e26+0.5*e332*e26+1.5*e26*e362+0.5*e26*e382+0.5*e26*e372-0.5*e26*e352-0.5*e26*e312-0.5*e26*e322-0.5*e26*e342+e20*e30*e36+e20*e32*e38+e20*e31*e37+e30*e31*e27+e30*e21*e37+e30*e22*e38+e23*e33*e36+e23*e35*e38+e23*e34*e37+e33*e34*e27+e33*e24*e37+e33*e35*e28+e33*e25*e38+e36*e37*e27+e36*e38*e28-e36*e32*e22-e36*e31*e21-e36*e34*e24;\nA[2 + 10*19]=0.5*e302*e36+e30*e32*e38+e30*e31*e37+0.5*e332*e36+e33*e35*e38+e33*e34*e37+0.5*e363+0.5*e36*e382+0.5*e36*e372-0.5*e36*e352-0.5*e36*e312-0.5*e36*e322-0.5*e36*e342;\n\n}\n</code></pre>\n\n<p>To call the same file from visual studio, I just ommitted:</p>\n\n<pre><code>#include \"mex.h\"\n#include &lt;math.h&gt;\n\n\nvoid mexFunction(int nlhs, mxArray *plhs[],\n                 int nrhs, const mxArray *prhs[])\n</code></pre>\n\n<p>and replaced it with:</p>\n\n<pre><code>#include &lt;float.h&gt;\n#include &lt;math.h&gt;\nvoid  fivepoint_helper (float *A, float *E)\n</code></pre>\n\n<p>Where <code>E</code> is a <code>[9x4]</code> input matrix and <code>A</code> is a <code>[10*20]</code> output matrix ( I work with linear indexing of matrices).</p>\n\n<p>The problem is that the same C file called from MATLAB as a mex file or visual studio as a C file gives very different results for the output matrix <code>A</code></p>\n\n<p>What is causing this difference please?</p>\n"}, {"tags": ["c++", "c", "linker"], "comments": [{"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 4, "creation_date": 1427899323, "post_id": 29393733, "comment_id": 46964140, "body": "Compiled headers aren&#39;t object code."}], "owner": {"reputation": 131, "user_id": 2232412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ffd5f1b9e8474916c19ce4a237aeb1b?s=128&d=identicon&r=PG", "display_name": "Whadupapp", "link": "https://stackoverflow.com/users/2232412/whadupapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1428006719, "creation_date": 1427899165, "last_edit_date": 1428006719, "question_id": 29393733, "link": "https://stackoverflow.com/questions/29393733/c-linker-error-combining-c-and-cpp-code-unsupported-file-format", "title": "C++ linker error combining c and cpp code: &#39;unsupported file format&#39;", "body": "<p>I'm trying to combine C and C++ code, however when I try to link I get an unexpected error:</p>\n\n<blockquote>\n  <p>ld: warning: ignoring file edmonds.o, file was built for unsupported file format ( 0x43 0x50 0x43 0x48 0x01 0x0C 0x00 0x00 0x64 0x08 0x00 0x00 0x0B 0x02 0x68 0x42 ) which is not the architecture being linked (x86_64)</p>\n</blockquote>\n\n<p>Here's my setup:</p>\n\n<p>dummy.c</p>\n\n<pre><code>void edmonds(int n, double* weights, int* heads);\n\nint main()\n{\n    int a = 1;\n    edmonds(1234,0,&amp;a);\n    return 0;\n}\n</code></pre>\n\n<p>edmonds.hpp:</p>\n\n<pre><code>extern \"C\" void edmonds(int n, double* weights, int* heads);\n\nvoid edmonds(int n, double* weights, int* heads)\n{\n    heads[0]=n*4;\n    return;\n}\n</code></pre>\n\n<p>I compile manually using the following sequence of commands:</p>\n\n<pre><code>clang -c dummy.c -o dummy.o\nclang++ -c edmonds.hpp -o edmonds.o\nclang++ edmonds.o dummy.o -o main.o\n</code></pre>\n\n<p>with the above mentioned result</p>\n\n<pre><code>ld: warning: ignoring file edmonds.o, file was built for unsupported file format ( 0x43 0x50 0x43 0x48 0x01 0x0C 0x00 0x00 0x64 0x08 0x00 0x00 0x0B 0x02 0x68 0x42 ) which is not the architecture being linked (x86_64): edmonds.o\nUndefined symbols for architecture x86_64:\n  \"_edmonds\", referenced from:\n      _main in dummy.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>My system is osx yosemite. I don't understand why edmonds.hpp gets compiled to some weird file format that is not x86_64. </p>\n"}, {"tags": ["c", "executable"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1427898895, "post_id": 29393583, "comment_id": 46963780, "body": "Starting by reading a <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html\" rel=\"nofollow noreferrer\">reference of the functions</a> might be a good idea."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1427898960, "post_id": 29393583, "comment_id": 46963832, "body": "You are missing the double quotes around the file path."}, {"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427898963, "post_id": 29393583, "comment_id": 46963833, "body": "I&#39;ve read through them but I&#39;m still having trouble"}, {"owner": {"reputation": 319, "user_id": 4166962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607abc196162c9c93a518de4d8c8e4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Garcia-Briseno", "link": "https://stackoverflow.com/users/4166962/daniel-garcia-briseno"}, "edited": false, "score": 0, "creation_date": 1427899434, "post_id": 29393583, "comment_id": 46964226, "body": "Not sure if it&#39;s the same problem but last time I used exec it didn&#39;t include the filename parameter so I had to change all my argv[1]s to argh[0]"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427927803, "post_id": 29393583, "comment_id": 46979613, "body": "if the input number is 4, then this algorithm &#39;isPrime()&#39; fails to provide the correct answer"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427899446, "post_id": 29393787, "comment_id": 46964235, "body": "Okay this worked! However what I don&#39;t understand is that we&#39;re suppose to be defining and running the Morph function inside of prime.c which is the isPrime.exe so it&#39;s basically morphing itself?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427899536, "post_id": 29393787, "comment_id": 46964309, "body": "@user3373360 Do you understand the concept of recursion? This is just the same, but with programs instead of with functions."}, {"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427899763, "post_id": 29393787, "comment_id": 46964460, "body": "Yes I understand that it&#39;s a form of recursion however when I run the program it still only seems to run once. After I create the executable I run &#39;./isPrime.exe 1535068679&#39; it only checks the number, says it&#39;s not a prime number and then the program exits. Should it not continuously run and repeat the above step?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427899899, "post_id": 29393787, "comment_id": 46964561, "body": "@user3373360 The <code>atoi</code> functions returns an <code>int</code> which on just about all platforms are 32 bits, even on 64-bit systems. So the number you pass is simply to big and <code>atoi</code> will not be able to handle it. Use <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow noreferrer\"><code>strtoll</code> (or <code>strtol</code>)</a> instead."}, {"owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "edited": false, "score": 0, "creation_date": 1427900186, "post_id": 29393787, "comment_id": 46964773, "body": "Okay, how would I use strtoll in this situation? &#39;Morph(strtoll(what parameters?));&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427928102, "post_id": 29393787, "comment_id": 46979733, "body": "the contents of primeArgv[] has to be all pointers so a direct number &#39;number&#39; will not produce the correct results."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1427899317, "creation_date": 1427899317, "answer_id": 29393787, "question_id": 29393583, "link": "https://stackoverflow.com/questions/29393583/using-execv-or-execvp-to-morph-a-program-to-isprime/29393787#29393787", "title": "Using &quot;execv&quot; or &quot;execvp&quot; to morph a program to isPrime?", "body": "<p>If you look at <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html\" rel=\"nofollow\">the reference</a> you will see that e.g. the <code>execvp</code> function takes a string as first argument, and an <code>argv</code> style array as it second argument.</p>\n\n<p>The first argument is the path (relative from the current process current working directory, or an absolute path) to the executable you want to run. The second argument is what will become the <code>argv</code> argument in the new program.</p>\n\n<p>So lets say that your <code>isPrime.exe</code> is in the same directory as the current program, then you could call it like this:</p>\n\n<pre><code>char *primeArgv[] = {\n    \"isPrime.exe\",  // First argument is the name of the program\n    number,         // The actual first argument\n    NULL,           // Array must be `NULL` terminated\n};\n\nexecvp(\"isPrime.exe\", primeArgv);\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 3373360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6609c270726f8d90ab6ba223f3edf459?s=128&d=identicon&r=PG&f=1", "display_name": "user3373360", "link": "https://stackoverflow.com/users/3373360/user3373360"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 29393787, "answer_count": 1, "score": 0, "last_activity_date": 1427899317, "creation_date": 1427898742, "question_id": 29393583, "link": "https://stackoverflow.com/questions/29393583/using-execv-or-execvp-to-morph-a-program-to-isprime", "title": "Using &quot;execv&quot; or &quot;execvp&quot; to morph a program to isPrime?", "body": "<p>I have a program called 'prime.c' below:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include &lt;unistd.h&gt;\n\nint isPrime(int number);\nvoid Morph(char *number);\n\nint main(int argc, char *argv[])\n{\n        int i;\n\n        int number;\n\n        if (argc &lt; 2) {\n            printf(\"Returning 2\");\n            return(2);\n        }\n        else number = atoi(argv[1]);\n        if (isPrime(number)) {\n                exit(1);\n        }\n        exit(0);\n}\n\n\n/*\nPurpose: check if the input number is a prime number\ninput:\nnumber - the number to be checked\n\nreturn:\n0 - if the number is not a prime number\n1 - if the number is a prime number\n*/\nint isPrime(int number)\n{\n        int i;\n        for(i = 2; i*i &lt; number; i++) {\n                usleep(100);\n                if (number % i == 0) {\n                        printf(\"%d is not a prime number!\",number);\n                        return(0);\n                }\n        }\n        printf(\"%d is a prime number!\",number);\n        return(1);\n}\n\nvoid Morph(char *number)\n{\n        execvp(isPrime.exe,number);            \n}\n</code></pre>\n\n<p>Which takes in a number and checks to see if it's a prime number or not. We were to create an executable called 'isPrime.exe' which I did using 'gcc -o isPrime.exe prime.c -lm' and everything worked perfectly. The next step is where I'm stuck, we are to create a function Morph(char *number) which takes in a string as the number and morphs the program to the isPrime program using either execv or execvp. I've started to create the morph function however I can't get it to work, any help is appreciated!</p>\n"}, {"tags": ["c", "multithreading", "sockets", "ssl", "epoll"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1427897893, "post_id": 29393140, "comment_id": 46963067, "body": "Assuming the server actually calls accept, you&#39;ll need to provide much more info to get any help."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1427897900, "post_id": 29393140, "comment_id": 46963073, "body": "You created a <b>thousand</b> threads?"}, {"owner": {"reputation": 31, "user_id": 4738501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b5594818a3b18d199d8059ca1e033d?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjithkumar ", "link": "https://stackoverflow.com/users/4738501/ranjithkumar"}, "edited": false, "score": 0, "creation_date": 1427903288, "post_id": 29393140, "comment_id": 46966765, "body": "Yes i created thousand threads so that thousand clients connect to server simultaneously."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427904460, "post_id": 29393140, "comment_id": 46967538, "body": "I&#39;d say the server hit a resouce limit."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1427929529, "post_id": 29393140, "comment_id": 46980177, "body": "How do you know your server can handle ten thousand connections simultaneously?"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": -1, "last_activity_date": 1427928370, "creation_date": 1427928370, "answer_id": 29402149, "question_id": 29393140, "link": "https://stackoverflow.com/questions/29393140/socket-connect-returns-errno-etimeout/29402149#29402149", "title": "Socket connect returns errno ETIMEOUT", "body": "<p>you could change the socket attributes for recv and xmit timeout values  Probably the same way you set the keepalive attribute</p>\n"}], "owner": {"reputation": 31, "user_id": 4738501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b5594818a3b18d199d8059ca1e033d?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjithkumar ", "link": "https://stackoverflow.com/users/4738501/ranjithkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 29402149, "answer_count": 1, "score": 0, "last_activity_date": 1427928370, "creation_date": 1427897669, "question_id": 29393140, "link": "https://stackoverflow.com/questions/29393140/socket-connect-returns-errno-etimeout", "title": "Socket connect returns errno ETIMEOUT", "body": "<p>I have one Tcp/Ip with ssl server enabled with epoll so it can handle ten thousand connections simultaneously. When i tried to test the server,i created thousand clients using thread. when i tried to connect with the server,after certain time connect() return ETIMEOUT. How to overcome this error?</p>\n"}, {"tags": ["c", "system", "system-calls", "sys"], "comments": [{"owner": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "edited": false, "score": 0, "creation_date": 1427898461, "post_id": 29393139, "comment_id": 46963494, "body": "First check the output of getcwd() function to see if you are pointing to correct directory?"}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 3253375, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1505437804/picture?type=large", "display_name": "user3253375", "link": "https://stackoverflow.com/users/3253375/user3253375"}, "is_accepted": false, "score": 0, "last_activity_date": 1427903188, "creation_date": 1427903188, "answer_id": 29395229, "question_id": 29393139, "link": "https://stackoverflow.com/questions/29393139/redirecting-execvp-path/29395229#29395229", "title": "Redirecting execvp path", "body": "<p>The answer was simple.</p>\n\n<p>\"chdir(wanted path)\"\nint dirchange = chdir(argv[1]);</p>\n"}], "owner": {"reputation": 57, "user_id": 3253375, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1505437804/picture?type=large", "display_name": "user3253375", "link": "https://stackoverflow.com/users/3253375/user3253375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427903188, "creation_date": 1427897668, "question_id": 29393139, "link": "https://stackoverflow.com/questions/29393139/redirecting-execvp-path", "title": "Redirecting execvp path", "body": "<p>I'm trying to write a simple code which execute a program from subfolders from a input file and print thr result into a output file.</p>\n\n<p>My problem is that when i execute the program it keeps failing on me. since the execvp command is trying to look for an exe named \"a.out\" on the wrong location. in (desktop rather than searching the correct path address).</p>\n\n<p>here's the code. please help me out :)</p>\n\n<pre><code>pid_t   runner;\nchar enter[] = \"/home/demo/Desktop/OS/Ex1/Ex12/code/input.txt\"; // input file\nchar path[] = \"/home/demo/Desktop/OS/Ex1/Ex12/Ex1/ronen/\"; correct path\nchar *r [] = {\"./a.out\", NULL}; \nint savedFD = dup(0);\nint sever2Fd=dup(1);\nint fdin = open(enter,O_RDONLY);\nint fdout = open (\"output.txt\", O_CREAT | O_RDWR, 0466);\ndup2(fdin,  0);\ndup2(fdout, 1);\nif ((runner = fork()) &lt; 0) {perror(\"could not make fork\");}\nelse if (runner == 0) {\n    if (execvp(r[0],r) &lt; 0 ) {printf(\"Failed!\\n\");}\n} else if (runner != 0) {\n    waitpid(runner,0,0);\n    dup2(savedFD, 0);\n    dup2(sever2Fd, 1);\n    printf(\"done\\n\");\n}\nclose(fdin);close(fdout);\n</code></pre>\n"}, {"tags": ["c", "sqrt"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1480752926, "post_id": 29393057, "comment_id": 69101927, "body": "Any issues remaining for this post?"}], "answers": [{"tags": [], "owner": {"reputation": 1157, "user_id": 4370917, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/UD7AT.jpg?s=128&g=1", "display_name": "icecity96", "link": "https://stackoverflow.com/users/4370917/icecity96"}, "is_accepted": true, "score": 4, "last_activity_date": 1427898082, "last_edit_date": 1427898082, "creation_date": 1427897845, "answer_id": 29393219, "question_id": 29393057, "link": "https://stackoverflow.com/questions/29393057/why-does-the-sqrt-print-the-desired-output-when-i-use-floats-instead-of-d/29393219#29393219", "title": "Why does the `sqrt()` print the desired output when I use `float`s instead of `double`s?", "body": "<p>In your code, you use</p>\n\n<pre><code>scanf( \"%f %f\", &amp;a, &amp;b );\n</code></pre>\n\n<p>But <code>%f</code> is used for a <code>float</code> ,not a <code>double</code>. Try <code>%lf</code> for a <code>double</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1427903489, "last_edit_date": 1427903489, "creation_date": 1427901206, "answer_id": 29394512, "question_id": 29393057, "link": "https://stackoverflow.com/questions/29393057/why-does-the-sqrt-print-the-desired-output-when-i-use-floats-instead-of-d/29394512#29394512", "title": "Why does the `sqrt()` print the desired output when I use `float`s instead of `double`s?", "body": "<p>For <code>scanf()</code>, the specifier <code>\"%f\"</code> expects a <code>float *</code> argument, not a <code>double *</code>.  </p>\n\n<pre><code>double a;\n//           v--- &amp;a is type double *, scanf(\"%f\" expects float *\nscanf( \"%f\", &amp;a );\n</code></pre>\n\n<p>To scan in <code>double</code>, use specifier <code>\"%lf\"</code> which expects a <code>double *</code> argument.</p>\n\n<pre><code>double a;\n//            v--- &amp;a is type double *\nscanf( \"%lf\", &amp;a );\n</code></pre>\n\n<p>Detail: The arguments to <code>scanf()</code> are <em>addresses</em> of where <code>scanf()</code> can store the results.  A <code>float *</code> is not the same as <code>double *</code>.  </p>\n\n<p>With <code>printf()</code>, numeric arguments are the <em>value</em> to print.   Since <code>printf()</code> takes variable number of arguments, they go through <em>usual</em> promotions like <code>float</code> to <code>double</code>.  Thus <code>printf(\"%f\", some_float)</code> and <code>printf(\"%f\", some_double)</code> can use the same format specifier.  <em>Usual</em> promotions does not apply to <code>&amp;a</code>, <code>&amp;b</code> with <code>scanf()</code> as those argument are pointers (addresses), not arithmetic values.</p>\n\n<hr>\n\n<p>Note: Always good to check <code>scanf()</code> results.  The space between <code>\"%lf\"</code> and <code>\"%lf\"</code> is not needed as <code>\"%lf\"</code> itself consumes leading white-space, yet it is often visually easier to understand.</p>\n\n<pre><code>if (2 != scanf( \"%lf%lf\", &amp;a, &amp;b )) Handle_Error();\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4726177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/79c3978d8d2b0da58a6a6e39dbd2bde2?s=128&d=identicon&r=PG&f=1", "display_name": "Shinz6", "link": "https://stackoverflow.com/users/4726177/shinz6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 29393219, "answer_count": 2, "score": 1, "last_activity_date": 1427903489, "creation_date": 1427897448, "last_edit_date": 1427898670, "question_id": 29393057, "link": "https://stackoverflow.com/questions/29393057/why-does-the-sqrt-print-the-desired-output-when-i-use-floats-instead-of-d", "title": "Why does the `sqrt()` print the desired output when I use `float`s instead of `double`s?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble hypotenuse( double side1, double side2 );\n\nint main( void )\n{\n    double a, b;\n\n    printf( \"Enter the values of the two sides: \" );\n    scanf( \"%f %f\", &amp;a, &amp;b );\n    printf( \"\\nThe length of hypotenuse is: %f\", hypotenuse( a, b ) );   \n\n    getchar();\n    getchar();\n    return 0;\n}\n\ndouble hypotenuse( double side1, double side2 )\n{\n       double c;\n\n       c = (side1 * side1) + (side2 * side2);\n       return sqrt( c );\n}\n</code></pre>\n\n<p>The above program works when I use <code>float a, b;</code> instead of <code>double a,b;</code>. Why?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 1, "creation_date": 1427897467, "post_id": 29392977, "comment_id": 46962770, "body": "You can switch to <code>fprintf</code> and <code>fscanf</code> functions if you want &quot;readable&quot; output. BTW. Sorting &quot;directly on the disk&quot; is a bad idea, unless you are absolutely short of RAM."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1427897520, "post_id": 29392977, "comment_id": 46962805, "body": "your structures don&#39;t clear out the extra characters in the <code>char[33]</code> fields when you write them, so they&#39;re full of whatever garbage was in that memory at the time."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1427897644, "post_id": 29392977, "comment_id": 46962888, "body": "the missing elements should be because some <code>fwrite()</code>s are still buffered. Call <code>fflush(f)</code> between writing and reading (and check the result of <code>fread()</code>)"}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1427897735, "post_id": 29392977, "comment_id": 46962955, "body": "@IngoLeonhardt that shouldn&#39;t be relevant - buffering only affects whether <i>other</i> programs can see unflushed data."}, {"owner": {"reputation": 1, "user_id": 4641265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986b720561fde39d5c721581f3142441?s=128&d=identicon&r=PG&f=1", "display_name": "Loki Lord", "link": "https://stackoverflow.com/users/4641265/loki-lord"}, "reply_to_user": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 0, "creation_date": 1427897829, "post_id": 29392977, "comment_id": 46963021, "body": "@user4419802 unfortunately usage of fread/fwrite is compulsory, as well as sorting on the disk.. Doing everything with print and scan, and within RAM would make thing much easier, but the task I&#39;ve received is restricted.."}, {"owner": {"reputation": 1, "user_id": 4641265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986b720561fde39d5c721581f3142441?s=128&d=identicon&r=PG&f=1", "display_name": "Loki Lord", "link": "https://stackoverflow.com/users/4641265/loki-lord"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1427897875, "post_id": 29392977, "comment_id": 46963053, "body": "@Alnitak Is there a way to clean/empty  that extra junk?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1427897983, "post_id": 29392977, "comment_id": 46963133, "body": "Look at <b><i><a href=\"https://msdn.microsoft.com/en-us/library/1fdeehz6.aspx\" rel=\"nofollow noreferrer\">memset()</a></i></b>"}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1427897993, "post_id": 29392977, "comment_id": 46963137, "body": "<code>memset(&amp;c, 0, sizeof(c))</code>"}, {"owner": {"reputation": 1, "user_id": 4641265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986b720561fde39d5c721581f3142441?s=128&d=identicon&r=PG&f=1", "display_name": "Loki Lord", "link": "https://stackoverflow.com/users/4641265/loki-lord"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1427898646, "post_id": 29392977, "comment_id": 46963621, "body": "@Alnitak Thank you, that cleaned most of the junk data, except for that <b>int</b>. I&#39;ve changed that entry to char, and, to my surprise, changing it to char also solved the problem with reading last elements from file. But I can&#39;t understand how it is related.."}, {"owner": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "edited": false, "score": 0, "creation_date": 1427898790, "post_id": 29392977, "comment_id": 46963714, "body": "Y do u need to read from asd.txt?"}, {"owner": {"reputation": 1, "user_id": 4641265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986b720561fde39d5c721581f3142441?s=128&d=identicon&r=PG&f=1", "display_name": "Loki Lord", "link": "https://stackoverflow.com/users/4641265/loki-lord"}, "reply_to_user": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "edited": false, "score": 0, "creation_date": 1427899253, "post_id": 29392977, "comment_id": 46964080, "body": "@YasirMajeed That is just a temporary sample that doesn&#39;t really fit the template properly for fwrite/fread &#39;s understading. The first part of the code, with fscanf, is to convert that data to fwrite/fread &#39;s proper understanding. It&#39;ll be removed later."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1427900107, "post_id": 29392977, "comment_id": 46964720, "body": "Are you working on Windows? As you haven&#39;t open &quot;new.txt&quot; in binary mode, value 26 would written to the file as ^Z (plus some NULs) and then be interpreted as EOF"}, {"owner": {"reputation": 1, "user_id": 4641265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986b720561fde39d5c721581f3142441?s=128&d=identicon&r=PG&f=1", "display_name": "Loki Lord", "link": "https://stackoverflow.com/users/4641265/loki-lord"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1427900853, "post_id": 29392977, "comment_id": 46965271, "body": "@IngoLeonhardt Thank you, that fixed the issue with reading the data."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1427900961, "post_id": 29392977, "comment_id": 46965342, "body": "See <a href=\"http://stackoverflow.com/questions/19196083/fwrite-writes-garbage-value-to-file\" title=\"fwrite writes garbage value to file\">stackoverflow.com/questions/19196083/&hellip;</a>. <code>fwrite</code> is writing your int as a binary representation, you need to use <code>fprintf</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1427902117, "post_id": 29392977, "comment_id": 46966101, "body": "Instead of <code>fwrite (&amp;c, sizeof (cam), 1, f);</code>, use <code>char buf[sizeof cam * 2]; sprintf(buf, &quot;%s\\t%s\\t%d\\t%s\\n&quot;, c.camasa, c.culoare, c.marime, c.material); fwrite (buf, strlen(buf), 1, f);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1427903814, "post_id": 29392977, "comment_id": 46967113, "body": "To be clear: What is the required format of <code>&quot;new.txt&quot;</code> 1) A text file with a variable width <i>line</i> of information per each &quot;cam&quot; record. 2) A binary file with a fixed size record corresponding to the size of &quot;cam&quot; 3) something else?  I suspect #1."}], "answers": [{"tags": [], "owner": {"reputation": 945, "user_id": 4695394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75268cada6fa92af6fa9eb3f2da0d109?s=128&d=identicon&r=PG&f=1", "display_name": "kiviak", "link": "https://stackoverflow.com/users/4695394/kiviak"}, "is_accepted": false, "score": 0, "last_activity_date": 1427902358, "creation_date": 1427902358, "answer_id": 29394948, "question_id": 29392977, "link": "https://stackoverflow.com/questions/29392977/fread-fwrite-a-struct-to-from-a-file-in-c/29394948#29394948", "title": "fread/fwrite a struct to/from a file in C", "body": "<pre><code>asdf11  orange  26  skin   \n</code></pre>\n\n<p>windows  may regard 26 in the txt file as EOF</p>\n"}, {"tags": [], "owner": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "is_accepted": false, "score": 0, "last_activity_date": 1427904208, "creation_date": 1427904208, "answer_id": 29395574, "question_id": 29392977, "link": "https://stackoverflow.com/questions/29392977/fread-fwrite-a-struct-to-from-a-file-in-c/29395574#29395574", "title": "fread/fwrite a struct to/from a file in C", "body": "<blockquote>\n  <p>Is there a way to make it plain text, or it has to be like that?</p>\n</blockquote>\n\n<p>Yes, it has to be like that because when it was written, the file was filled with the data that was in memory. So it's always like this i.e. combination of readable and unreadable characters.</p>\n\n<p>In order to understand the behavior of <code>fread/fwrite</code> i will take the example from your output</p>\n\n<pre><code>asdf1   blue    45      skin$asdf1   blue    45      skin$asdf1   blue    45      skin$asdf1   blue    45      skin$asdf1   blue    45      skin$asdf1   blue    45      skin$asdf1   blue    45      skin$\n</code></pre>\n\n<p>Now let suppose that the above code is in memory such that <code>asdf1   blue    45      skin</code> is a structure currently in memory. '$' is just a seperator to represent 7 structures residing in memory. Now if you want to read data from a file into a structure using fread, then the ideal situation is that the file the file was written using fwrite by writing each structure one by one, without any extra byte between them. Only then it can easily be read using fread(). </p>\n\n<p>To demonstrate this, here is a simple program that first fill 5 struct objects and then write them onto a file using fwrite. Then it again read those written structures from the file and then fill the C structures with that data.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;memory.h&gt;\n\n#define MAX 5\n\nstruct camesi {\n    char camasa[33];\n    char culoare[33];\n    int marime;\n    char material[33];\n} myStruct;\n\nint main()\n{\n    int i = 0;\n    FILE *file = NULL;\n\n    //Fill a structure with values\n    memset(&amp;myStruct, 0, sizeof(myStruct));\n    memcpy(myStruct.camasa, \"asdf1\", 5);\n    memcpy(myStruct.culoare, \"blue\", 4);\n    myStruct.marime = 45;\n    memcpy(myStruct.material, \"skin\", 4);\n\n    //Open the file to write\n    if ((file = fopen(\"test.txt\", \"w+\")) == NULL) {\n        printf(\"Error opening file to write\\n\");\n        return -1;\n    }\n\n    for (i = 0; i &lt; MAX; i++)\n        fwrite(&amp;myStruct, sizeof(myStruct), 1, file);\n\n    fclose(file);\n\n    //Open the file for read\n    if ((file = fopen(\"test.txt\", \"r\")) == NULL) {\n        printf(\"Error opening file for read\\n\");\n        return -1;\n    }\n\n    //Clear the myStruct from previous values\n    memset(&amp;myStruct, 0, sizeof(myStruct));\n\n    //Read and display\n    for (i = 0; i &lt; MAX; i++)\n    {\n        fread(&amp;myStruct, sizeof(myStruct), 1, file);\n        printf(\"%s\\t%s\\t%d\\t%s\\n\", myStruct.camasa, myStruct.culoare, myStruct.marime, myStruct.material);\n\n        //Clear the myStruct from previous value as we will read again in same object in next iteration\n        memset(&amp;myStruct, 0, sizeof(myStruct));\n    }\n\n    fclose(file);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4641265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986b720561fde39d5c721581f3142441?s=128&d=identicon&r=PG&f=1", "display_name": "Loki Lord", "link": "https://stackoverflow.com/users/4641265/loki-lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2011, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427904208, "creation_date": 1427897239, "question_id": 29392977, "link": "https://stackoverflow.com/questions/29392977/fread-fwrite-a-struct-to-from-a-file-in-c", "title": "fread/fwrite a struct to/from a file in C", "body": "<p>I'm having troubles using the fread/fwrite functions to read and write structures to a file. First of all, text written by fwrite is unreadable for me, but from what I see, it is intended to work like this. Is there a way to make it plain text, or it has to be like that?</p>\n\n<p>The other problem is that when I try to read from that file using the fread function, few last elements aren't read.</p>\n\n<p>Further, I'll need this piece of code to sort, directly on the disk, data from a file. Usage of fread/fwrite is compulsory..</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct camesi {\n    char camasa[33];\n    char culoare[33];\n    int marime;\n    char material[33];\n} cam;\n\nint main() {\n\n    FILE *f, *f2;\n    int i, j, n;\n    cam a, b, c;\n\n    n = 13;\n\n    f  = fopen (\"new.txt\", \"w+\");\n    f2 = fopen (\"asd.txt\", \"r\");\n    rewind (f2);\n\n    for (i = 0; i &lt; n; i++) {\n        fscanf (f2, \"%s%s%d%s\", c.camasa, c.culoare, &amp;c.marime, c.material);\n        printf (\"%s\\t%s\\t%d\\t%s\\n\", c.camasa, c.culoare, c.marime, c.material);\n        fwrite (&amp;c, sizeof (cam), 1, f);\n    }\n\n    printf (\"\\n----------------------------------------\\n\\n\");\n\n    rewind (f);\n\n    for (i = 0; i &lt; n; i++) {\n        fread (&amp;c, sizeof (cam), 1, f);\n        printf (\"%s\\t%s\\t%d\\t%s\\n\", c.camasa, c.culoare, c.marime, c.material);\n    }\n\nreturn 0; }\n</code></pre>\n\n<p>This is the output to console:</p>\n\n<pre><code>asdf1   blue    45      skin\nasdf2   green   43      skin\nasdf3   white   49      skin\nasdf4   red     47      skin\nasdf5   yellow  54      skin\nasdf6   purple  13      skin\nasdf7   magenta 74      skin\nasdf8   pink    41      skin\nasdf9   black   97      skin\nasdf10  gray    85      skin\nasdf11  orange  26      skin\nasdf12  violet  64      skin\nasdf13  brown   11      skin\n\n----------------------------------------\n\nasdf1   blue    45      skin\nasdf2   green   43      skin\nasdf3   white   49      skin\nasdf4   red     47      skin\nasdf5   yellow  54      skin\nasdf6   purple  13      skin\nasdf7   magenta 74      skin\nasdf8   pink    41      skin\nasdf9   black   97      skin\nasdf10  gray    85      skin\nasdf11  orange  85      skin\nasdf11  orange  85      skin\nasdf11  orange  85      skin\n</code></pre>\n\n<p>The first half is the data read from a manually created *.txt file.</p>\n\n<p>The other half is the data read from a file created with the program, using fwrite function.</p>\n\n<p>Content of the original *.txt file:</p>\n\n<pre><code>asdf1   blue    45  skin\nasdf2   green   43  skin\nasdf3   white   49  skin\nasdf4   red 47  skin\nasdf5   yellow  54  skin\nasdf6   purple  13  skin\nasdf7   magenta 74  skin\nasdf8   pink    41  skin\nasdf9   black   97  skin\nasdf10  gray    85  skin\nasdf11  orange  26  skin\nasdf12  violet  64  skin\nasdf13  brown   11  skin\n</code></pre>\n\n<p>Content of the file created with fwrite function:</p>\n\n<pre><code>asdf1   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fblue       \u0010    M             -   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf2   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fgreen      \u0010    M             +   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf3   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fwhite      \u0010    M             1   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf4   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fred e      \u0010    M             /   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf5   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fyellow     \u0010    M             6   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf6   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fpurple     \u0010    M             \n   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf7   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fmagenta    \u0010    M             J   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf8   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fpink ta    \u0010    M             )   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf9   \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fblack a    \u0010    M             a   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf10  \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fgray  a    \u0010    M             U   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf11  \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044forange     \u0010    M                skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf12  \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fviolet     \u0010    M             @   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M asdf13  \u20ac\fM o  \u0451\u044e(  \u0402(w\u0457\u0434\u0402\u201a\u044e\u044f\u044f\u044fbrown      \u0010    M             \u000b   skin M `M      \u0410&amp;M \u20ac\u044e( H\u042f\u041ft  M \n</code></pre>\n"}, {"tags": ["c++", "c", "multithreading", "locking", "shared-memory"], "comments": [{"owner": {"reputation": 3694, "user_id": 3374591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24276eb856ed7cbcb5f02d6bacf29ca1?s=128&d=identicon&r=PG", "display_name": "Arnon Zilca", "link": "https://stackoverflow.com/users/3374591/arnon-zilca"}, "edited": false, "score": 2, "creation_date": 1427897113, "post_id": 29392782, "comment_id": 46962526, "body": "You can&#39;t lock with just atomic variables. Consider a situation where every process gets through the <code>if (*lock == 0)</code> command and get switched. Now all of them are going to update the lock to 1, increment the count and update the lock back to 0."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1427897165, "post_id": 29392782, "comment_id": 46962567, "body": "What happend if the lock is set to 1? Simpli your code waits that the lock is == 0 and then ends..."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1427897396, "post_id": 29392782, "comment_id": 46962723, "body": "You need to use a mutex that you can have a blocking lock call on, so that if another thread/process has the mutex locked your code will wait for its turn.  Also, obviously this is just a simple example. But you should consider for things like this the idea of each process or thread having it&#39;s own value of the count and combining them at the end to reduce the amount of time that threads/processes are spinning just waiting for the mutex. In openmp you can do this by instructing it to &quot;reduce&quot; that variable that is modified in a parallel region of code as an example of a possible implementation"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427897629, "post_id": 29392782, "comment_id": 46962878, "body": "If using gcc thes might be interesting to read: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/_005f_005fsync-Builtins.html#_005f_005fsync-Builtins\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/&hellip;</a>"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1427897988, "post_id": 29392782, "comment_id": 46963135, "body": "Or you can just use a std::atomic counter and skip the lock entirely."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427898335, "post_id": 29392782, "comment_id": 46963386, "body": "<code>sig_atomic_t</code> is not a thread-safe atomic. It&#39;s for signal-handlers."}, {"owner": {"reputation": 1175, "user_id": 1654526, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3287ef88010dfa6ae54dfadd74a0d5e0?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/1654526/jack"}, "edited": false, "score": 1, "creation_date": 1427898974, "post_id": 29392782, "comment_id": 46963843, "body": "That&#39;s because when other processes find lock == 1 they sleep and quit"}], "owner": {"reputation": 245, "user_id": 3437741, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cd7810353c8066eb2ecacbd47c290907?s=128&d=identicon&r=PG&f=1", "display_name": "FanFan", "link": "https://stackoverflow.com/users/3437741/fanfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427896735, "creation_date": 1427896735, "question_id": 29392782, "link": "https://stackoverflow.com/questions/29392782/synchronizing-mutiple-processes-in-c-with-shared-memory", "title": "Synchronizing mutiple processes in C with shared memory", "body": "<p>I have a program which creates child processes in a for loop with fork(). The child will create other processes as well. </p>\n\n<p>All the processes must increment a count, and the count must be displayed at the end.</p>\n\n<p>To do this I used a simple locking system. The shared memory is of size 2.\nThere a 2 variable of type sig_tomic_t: the count and a lock.</p>\n\n<p>When a process wants to increment the count it sets the lock to 1, increments the count, then sets the lock to 0. Otherwise, if the lock is 1, then the process sleeps.</p>\n\n<p>Here is the code segment of interest.</p>\n\n<pre><code>for(i = 1; i &lt;= 10; i++) {\n\n    if((pid = fork()) &lt; 0) {\n        perror(\"Error fork!\");\n        exit(2);\n    }\n\n    if(*lock == 0) {\n        *lock = 1;\n        *count = *count  + 1;\n        *lock = 0;\n    }\n    else {\n        while(*lock == 1) {\n            sleep(1);\n        }\n    }\n }\n</code></pre>\n\n<p>The problem is that even though I used a simple locking system, the count isn't incremented correctly.</p>\n"}, {"tags": ["algorithm", "c", "arrays", "gnu", "generalization"], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 2774823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17eaf1f196250edf04555a5cb8611807?s=128&d=identicon&r=PG&f=1", "display_name": "zylatis", "link": "https://stackoverflow.com/users/2774823/zylatis"}, "edited": false, "score": 0, "creation_date": 1429098103, "post_id": 29414385, "comment_id": 47438289, "body": "Thanks Randall. Given that it is, as you say, messy and not very flexible, could you recommend any libraries that make it a bit easier to search a higher dimensional parameter space?"}, {"owner": {"reputation": 399, "user_id": 2774823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17eaf1f196250edf04555a5cb8611807?s=128&d=identicon&r=PG&f=1", "display_name": "zylatis", "link": "https://stackoverflow.com/users/2774823/zylatis"}, "edited": false, "score": 0, "creation_date": 1429103970, "post_id": 29414385, "comment_id": 47442395, "body": "Ack, can&#39;t edit comments. I found the quick tutorial on ADA given here very useful. Loads of options for fiddling, but also the ability to just bung in your own function and bounds and run with it, very cool! <a href=\"http://www.quantcode.com/modules/mydownloads/singlefile.php?lid=504\" rel=\"nofollow noreferrer\">quantcode.com/modules/mydownloads/singlefile.php?lid=504</a>"}, {"owner": {"reputation": 6320, "user_id": 974063, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f1b044b33c5d5ee61e223aac39761f43?s=128&d=identicon&r=PG", "display_name": "Randall Cook", "link": "https://stackoverflow.com/users/974063/randall-cook"}, "reply_to_user": {"reputation": 399, "user_id": 2774823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17eaf1f196250edf04555a5cb8611807?s=128&d=identicon&r=PG&f=1", "display_name": "zylatis", "link": "https://stackoverflow.com/users/2774823/zylatis"}, "edited": false, "score": 0, "creation_date": 1429123546, "post_id": 29414385, "comment_id": 47456236, "body": "@zylatis, glad you found something helpful. I think you are right to go with a more flexible library. After all, it is the Simulated Annealing algorithm you want, not the library it is packaged in. And for reference, you can edit comments on Stack Exchange, but only for a short time, like 5 minutes."}, {"owner": {"reputation": 399, "user_id": 2774823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17eaf1f196250edf04555a5cb8611807?s=128&d=identicon&r=PG&f=1", "display_name": "zylatis", "link": "https://stackoverflow.com/users/2774823/zylatis"}, "edited": false, "score": 0, "creation_date": 1429124140, "post_id": 29414385, "comment_id": 47456611, "body": "Ah right, got it thanks. Interestingly, and also annoyingly, this new library sometimes gets a lower solution than my mathematica code, sometimes not, depending on the model. Time to tinker I guess."}], "tags": [], "owner": {"reputation": 6320, "user_id": 974063, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f1b044b33c5d5ee61e223aac39761f43?s=128&d=identicon&r=PG", "display_name": "Randall Cook", "link": "https://stackoverflow.com/users/974063/randall-cook"}, "is_accepted": false, "score": 0, "last_activity_date": 1427991878, "last_edit_date": 1427991878, "creation_date": 1427915168, "answer_id": 29414385, "question_id": 29414384, "link": "https://stackoverflow.com/questions/29414384/gnu-simulated-annealing/29414385#29414385", "title": "GNU Simulated Annealing", "body": "<p>The underlying algorithm, <code>gsl_siman_solve()</code> from the link provided, is generalized to work with any data type. This is why the ubiquitous <code>xp</code> parameter is always being cast to a double pointer before use. It should be straightforward to use any struct or array or array of arrays instead of simply doubles provided all the callbacks are coded properly.</p>\n\n<p>The problem is that <code>gsl_siman_solve()</code> only seems to support a scalar double step size, initial guess, and 'uniform' value (from <code>gsl_rng_uniform()</code>), so you would need to map scalar double values into what are naturally multidimensional quantities. This can be done, but it is messy and not very flexible. In your case, the mapping would be done in <code>S1()</code>.</p>\n\n<p>This is akin to mapping the digits of a decimal number into a multidimensional space: the ones digit represents the X axis, the tens digit represents the Y axis, and the hundreds digit represents the Z axis, for example. By incrementing an integer, one can walk the entire 3D space from (0, 0, 0) to (9, 9, 9). You don't have to use integers and powers of 10, and the components don't even have to have the same range, but there is an inherent limit in the range of each component of the packed value. You would actually do this in reverse: taking a scalar double and unpacking it into multiple quantities.</p>\n\n<p>Lastly, your code <code>double x = (*((double *) xp))[0];</code> won't work because you are attempting to dereference a double as an array, not a pointer to a double, which would be OK. In other words, it's that first <code>*</code> that is the problem.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1427981830, "question_id": 277984}, "owner": {"reputation": 399, "user_id": 2774823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/17eaf1f196250edf04555a5cb8611807?s=128&d=identicon&r=PG&f=1", "display_name": "zylatis", "link": "https://stackoverflow.com/users/2774823/zylatis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1427991878, "creation_date": 1427896135, "question_id": 29414384, "link": "https://stackoverflow.com/questions/29414384/gnu-simulated-annealing", "title": "GNU Simulated Annealing", "body": "<p>I'm working from the template program given here:</p>\n\n<p><a href=\"https://www.gnu.org/software/gsl/manual/html_node/Trivial-example.html\" rel=\"nofollow\">https://www.gnu.org/software/gsl/manual/html_node/Trivial-example.html</a></p>\n\n<p>The program as they give it compiles and runs perfectly, which is nice. What I would like to do is generalise this method to find the minimum of a function with an arbitrary number of parameters.</p>\n\n<p>Some cursory reading suggests that the metric function (M1) is only used in certain diagnostic and printing situations and so can more or less be ignored. All that remains is then to define E1 and S1 appropriately. Unfortunately my knowledge of using pointers and void is incomplete, so I'm stuck trying to upgrade the configuration 'xp' to be an array of parameters, rather than a single double.</p>\n\n<p>In my naivete tried moving from </p>\n\n<pre><code>double x =  *((double *) xp);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>double x =  (*((double *) xp))[0];\n</code></pre>\n\n<p>where appropriate, but obviously that didn't work. I'm sure I'm missing something stupid, so any hints would be nice! I will obviously be defining my own E1 output function which will take these N parameters and return a number.</p>\n"}, {"tags": ["c", "linux", "driver"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 4159462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc5c5943178c8cf22a9cd98693344aa4?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitar Penev", "link": "https://stackoverflow.com/users/4159462/dimitar-penev"}, "is_accepted": true, "score": 1, "last_activity_date": 1427967569, "creation_date": 1427967569, "answer_id": 29409678, "question_id": 29392269, "link": "https://stackoverflow.com/questions/29392269/linux-my-char-driver-creates-a-node-in-sysfs-but-can-not-clean-it-after-reloadi/29409678#29409678", "title": "Linux: My char driver creates a node in sysfs but can not clean it after reloading", "body": "<p>It appeared a stupid one.\nI am using dynamic major so start from value 0.\nI have to move tdm->dev_major = MAJOR(tdm_dev) after the alloc_chrdev_region() of course so get the proper major which I can clean afterwords</p>\n\n<p>Thanks\nDimitar</p>\n"}], "owner": {"reputation": 101, "user_id": 4159462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc5c5943178c8cf22a9cd98693344aa4?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitar Penev", "link": "https://stackoverflow.com/users/4159462/dimitar-penev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 29409678, "answer_count": 1, "score": 3, "last_activity_date": 1427967569, "creation_date": 1427895395, "question_id": 29392269, "link": "https://stackoverflow.com/questions/29392269/linux-my-char-driver-creates-a-node-in-sysfs-but-can-not-clean-it-after-reloadi", "title": "Linux: My char driver creates a node in sysfs but can not clean it after reloading", "body": "<p>I am writting a simple char driver. I create node in sysfs with device_create() and it is created properly. I get my node in /dev automatically as well.  My problem is that class_distroy() and device_destroy() don't clean the /sys/devices/virtual/tdmcdev/tdm/ directory crated on init. \nMy init and close code below</p>\n\n<pre><code>    ...\n    /* Node in the /dev/  */\n    tdm-&gt;dev_major = 0; //for dynamic major        \n\n    tdm_dev = MKDEV(tdm-&gt;dev_major, 0);\n    tdm-&gt;dev_major = MAJOR(tdm_dev);\n    err = alloc_chrdev_region(&amp;tdm_dev, 0, 1, \"tdm\"); //One node to read/write data frame\n    if (err) {\n            printk(\"can't alloc minor for /dev/tdm\\n\");\n            return -ENODEV;\n    }\n\n    cdev_init(&amp;(tdm-&gt;cdev), &amp;tdm_dev_fops);\n    tdm-&gt;cdev.owner = THIS_MODULE;\n    err = cdev_add(&amp;(tdm-&gt;cdev), tdm_dev, 1);\n    if (err) {\n            printk(\"cdev_add() failed for /dev/tdm\\n\");\n            unregister_chrdev_region(tdm_dev, 1);\n            return -ENODEV;\n    }\n\n    /* Node /sys/devices/virtual/tdmcdev/tdm/  */\n    tdm-&gt;dev_class = class_create(THIS_MODULE, \"tdmcdev\");\n    if (IS_ERR(device_create(tdm-&gt;dev_class, NULL, tdm_dev, NULL, \"tdm\"))) {\n            printk(\"device_create() failed for the tdm device\\n\");\n            class_destroy(tdm-&gt;dev_class);\n            cdev_del(&amp;(tdm-&gt;cdev));\n            unregister_chrdev_region(tdm_dev, 1);\n            return -ENOMEM;\n    }\n    ... \n</code></pre>\n\n<p>my close code </p>\n\n<pre><code>    dev_t tdm_dev = MKDEV(tdm-&gt;dev_major, 0);\n\n    device_destroy(tdm-&gt;dev_class, tdm_dev);\n    class_destroy(tdm-&gt;dev_class);\n\n    cdev_del(&amp;(tdm-&gt;cdev));\n    unregister_chrdev_region(tdm_dev, 1);\n    ...\n</code></pre>\n\n<p>It is on Linux OpenWrt 3.10.49 on MIPS CPU. \nAnyone seeing something not in order?</p>\n\n<p>Thanks.\nDimitar</p>\n"}, {"tags": ["c", "linux", "kernel", "openwrt"], "comments": [{"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1427895224, "post_id": 29392143, "comment_id": 46961279, "body": "Why do this in the kernel?  It seems as if it would be easier to have a single user-space process read the data from <code>ttyS0</code> and then expose the data to other code via sockets."}, {"owner": {"reputation": 588, "user_id": 1934513, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9a081afc9d2ea8fa735de1b5c393f1b5?s=128&d=identicon&r=PG", "display_name": "user1934513", "link": "https://stackoverflow.com/users/1934513/user1934513"}, "reply_to_user": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1427896151, "post_id": 29392143, "comment_id": 46961864, "body": "I need to have /dev/tty files because the other processes can only work with serial like devices"}, {"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1427896248, "post_id": 29392143, "comment_id": 46961921, "body": "Are you certain they wouldn&#39;t work with, say, named pipes instead?"}, {"owner": {"reputation": 588, "user_id": 1934513, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9a081afc9d2ea8fa735de1b5c393f1b5?s=128&d=identicon&r=PG", "display_name": "user1934513", "link": "https://stackoverflow.com/users/1934513/user1934513"}, "reply_to_user": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1427899995, "post_id": 29392143, "comment_id": 46964634, "body": "well the existing binaries take as input a file name that needs to point to a serial device"}, {"owner": {"reputation": 588, "user_id": 1934513, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9a081afc9d2ea8fa735de1b5c393f1b5?s=128&d=identicon&r=PG", "display_name": "user1934513", "link": "https://stackoverflow.com/users/1934513/user1934513"}, "reply_to_user": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1427951655, "post_id": 29392143, "comment_id": 46985555, "body": "I guess you are right ... I can use named pipes. Thanks"}], "owner": {"reputation": 588, "user_id": 1934513, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9a081afc9d2ea8fa735de1b5c393f1b5?s=128&d=identicon&r=PG", "display_name": "user1934513", "link": "https://stackoverflow.com/users/1934513/user1934513"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427894999, "creation_date": 1427894999, "question_id": 29392143, "link": "https://stackoverflow.com/questions/29392143/split-serial-output-in-kernel-space", "title": "split serial output in kernel space", "body": "<p>I am developing some code on a openwrt router and I receive some data on the serial port /dev/ttyS0 . The data that I receive is from different sources and is parsed by different user space applications.</p>\n\n<p>I would like to split this data into N serial virtual ports where N=number of information sources (a source could be a temperature sensor, another source could be another sensor etc).</p>\n\n<p>So I would like to have /dev/ttyS0 which is the main serial device and then /dev/ttyS1 , /dev/ttyS2 ... /dev/ttySN and each serial will output only the data from one information source.</p>\n\n<p>I guess  that for this I would have to do some basic data parsing at kernel level. Do you know any source example that does something similar ?\nThe data is going in only one direction ... from sensors to the router, I don't need to send anything back so this will simplify things.</p>\n\n<p>I'm opened to sugestions</p>\n"}, {"tags": ["c", "linker"], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 2527436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mWV21.jpg?s=128&g=1", "display_name": "MediocreMyna", "link": "https://stackoverflow.com/users/2527436/mediocremyna"}, "edited": false, "score": 2, "creation_date": 1428321005, "post_id": 29392130, "comment_id": 47102892, "body": "It seems like the <code>-r</code> flag can also be used for partial-linking. Please see my <b>Edit_1</b> in the question. As for verification, I am able to link the final-library created by using <code>-r</code> flag with my application."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1427894950, "creation_date": 1427894950, "answer_id": 29392130, "question_id": 29391965, "link": "https://stackoverflow.com/questions/29391965/what-is-partial-linking-in-gnu-linker/29392130#29392130", "title": "What is Partial Linking in GNU Linker?", "body": "<p><code>ld</code> creates executables and shared libraries, not object file archives (.a files). </p>\n\n<p><code>ar</code> creates and modifies object file archives.</p>\n\n<hr>\n\n<p><code>-r, --relocateable</code> option is useful when you would like to resolve certain (unresolved) symbols of a <code>.so</code> and produce another <code>.so</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "is_accepted": false, "score": 9, "last_activity_date": 1571144844, "last_edit_date": 1571144844, "creation_date": 1546005133, "answer_id": 53959624, "question_id": 29391965, "link": "https://stackoverflow.com/questions/29391965/what-is-partial-linking-in-gnu-linker/53959624#53959624", "title": "What is Partial Linking in GNU Linker?", "body": "<p><strong>Minimal runnable example</strong></p>\n\n<p>Here I produce a minimal example and compile it in two ways to produce functionally identical executables:</p>\n\n<ul>\n<li>one combined <code>f12.c</code> file without partial linking linking into <code>f12.o</code></li>\n<li>two separate <code>f1.c</code> and <code>f2.c</code> which are first partially linked into <code>f12_r.o</code></li>\n</ul>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdlib.h&gt;\n\nint f_1_2(void);\nint f_2_1(void);\n\nint main(void) {\n    assert(f_1_2() + f_2_1() == 5);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>f1.c</p>\n\n<pre><code>#include \"f1.h\"\n</code></pre>\n\n<p>f2.c</p>\n\n<pre><code>#include \"f2.h\"\n</code></pre>\n\n<p>f12.c</p>\n\n<pre><code>#include \"f1.h\"\n#include \"f2.h\"\n</code></pre>\n\n<p>f1.h</p>\n\n<pre><code>int f_2(void);\n\nint f_1_2(void) {\n    return f_2() + 1;\n}\n\nint f_1(void) {\n    return 1;\n}\n</code></pre>\n\n<p>f2.h</p>\n\n<pre><code>int f_1(void);\n\nint f_2_1(void) {\n    return f_1() + 1;\n}\n\nint f_2(void) {\n    return 2;\n}\n</code></pre>\n\n<p>run.sh</p>\n\n<pre><code>#!/usr/bin/env bash\nset -eux\ncflags='-ggdb3 -std=c99 -O0 -fPIE -pie'\ngcc $cflags -c -o f1.o f1.c\ngcc $cflags -c -o f2.o f2.c\ngcc $cflags -c -o f12.o f12.c\nld -o f12_r.o -r f1.o f2.o\ngcc $cflags -c -o main.o main.c\ngcc $cflags -o main.out f12.o main.o\ngcc $cflags -o main_r.out f12_r.o main.o\n./main.out\n./main_r.out\n</code></pre>\n\n<p><a href=\"https://github.com/cirosantilli/cpp-cheat/tree/8b67c0713c332d0f6971a0d09f3cd6d713014566/linker/incremental-link\" rel=\"nofollow noreferrer\">GitHub upstream</a>.</p>\n\n<p>If we try the same thing but without <code>ld -r</code>, then we get the final warnings:</p>\n\n<pre><code>+ ld -o f12_r.o f1.o f2.o\nld: warning: cannot find entry symbol _start; defaulting to 0000000000401000\n+ gcc -ggdb3 -std=c99 -O0 -fPIE -pie -o main_r.out f12_r.o main.o\n/usr/bin/ld: error in f12_r.o(.eh_frame); no .eh_frame_hdr table will be created\n</code></pre>\n\n<p>none of them makes makes the tool exit non-0, and the final executable still runs, so I'm not sure how bad it is. TODO understand.</p>\n\n<p><strong>Binary analysis</strong></p>\n\n<p>If you are not familiar with relocation, first read this: <a href=\"https://stackoverflow.com/questions/3322911/what-do-linkers-do/33690144#33690144\">What do linkers do?</a></p>\n\n<p>The key question is how could partial linking speed up the link. The only thing I could think of was by resolving references across pre-linked files. I've focused on this for now.</p>\n\n<p>However, it does not do that as asked at: <a href=\"https://stackoverflow.com/questions/35324636/resolve-relative-relocations-in-partial-link\">Resolve relative relocations in partial link</a> so I would expect it not to speed up link significantly.</p>\n\n<p>I have confirmed this with:</p>\n\n<pre><code>objdump -S f12.o\nobjdump -S f12_r.o\n</code></pre>\n\n<p>both of which produce identical outputs that contain:</p>\n\n<pre><code>int f_1_2(void) {\n   0:   55                      push   %rbp\n   1:   48 89 e5                mov    %rsp,%rbp\n    return f_2() + 1;\n   4:   e8 00 00 00 00          callq  9 &lt;f_1_2+0x9&gt;\n   9:   83 c0 01                add    $0x1,%eax\n}\n   c:   5d                      pop    %rbp\n   d:   c3                      retq\n</code></pre>\n\n<p>so we see that the call to <code>f_1_2</code> has not yet been resolved in either case because the relative offset address is still 0: <code>e8 00 00 00 00</code> (<code>e8</code> is the opcode).</p>\n\n<p>This also taught me that GCC does not resolve function calls before the final link either TODO rationale, possible to force it to resolve?</p>\n\n<p><strong>Benchmark</strong></p>\n\n<p>I had benchmarked LD vs GOLD at: <a href=\"https://stackoverflow.com/questions/3476093/replacing-ld-with-gold-any-experience/53921263#53921263\">Replacing ld with gold - any experience?</a> so I decided to reuse it to see if partial linking leads to any link speedup.</p>\n\n<p>I generated the test objects with <a href=\"https://github.com/cirosantilli/cpp-cheat/blob/fc72bf00cd0d61cd596f7f3e0048502e3fda8549/gold-benchmark/generate-objects\" rel=\"nofollow noreferrer\">this script</a>:</p>\n\n<pre><code>./generate-objects 100 1000 100\n</code></pre>\n\n<p>and then I started with the most extreme link case possible: pre-link everything except the main file, and then benchmark the final link:</p>\n\n<pre><code>mv main.o ..\nld -o partial.o -r *.o\ntime gcc               partial.o ../main.o\ntime gcc -fuse-ld=gold partial.o ../main.o\n</code></pre>\n\n<p>The wall clock time results in seconds were as follows:</p>\n\n<pre><code>          No partial link   Partial link\nNo Gold   6.15              5.756\nGold      4.06              4.457\n</code></pre>\n\n<p>Therefore:</p>\n\n<ul>\n<li>the time difference exists, but is not very significant</li>\n<li>without gold it went faster, but with GOLD it became slower!</li>\n</ul>\n\n<p>Therefore, based on this experiment, it seems that partial linking may not speed up your link time, at all, and I'd just recommend you to try GOLD instead to start with.</p>\n\n<p>Let me know if you can produce a concrete example where incremental linking leads to significant speedup.</p>\n\n<p><strong>Case study: the Linux kernel</strong></p>\n\n<p>The Linux kernel is one example of a large project that used to use incremental linking, so maybe we can learn something from it.</p>\n\n<p>It has since moved to <code>ar T</code> thin archives as shown at: <a href=\"https://unix.stackexchange.com/questions/5518/what-is-the-difference-between-the-following-kernel-makefile-terms-vmlinux-vml/482978#482978\">https://unix.stackexchange.com/questions/5518/what-is-the-difference-between-the-following-kernel-makefile-terms-vmlinux-vml/482978#482978</a></p>\n\n<p>The initial commit and rationale are at: a5967db9af51a84f5e181600954714a9e4c69f1f (included in <code>v4.9</code>) whose commit message says:</p>\n\n<pre><code>ld -r is an incremental link used to create built-in.o files in build\nsubdirectories. It produces relocatable object files containing all\nits input files, and these are are then pulled together and relocated\nin the final link. Aside from the bloat, this constrains the final\nlink relocations, which has bitten large powerpc builds with\nunresolvable relocations in the final link.\n</code></pre>\n\n<p>this is also mentioned at <a href=\"https://github.com/torvalds/linux/blob/v4.19/Documentation/process/changes.rst\" rel=\"nofollow noreferrer\">Documentation/process/changes.rst</a>:</p>\n\n<pre><code>Binutils\n--------\n\nThe build system has, as of 4.13, switched to using thin archives (`ar T`)\nrather than incremental linking (`ld -r`) for built-in.a intermediate steps.\nThis requires binutils 2.20 or newer.\n</code></pre>\n\n<p>TODO: find out when incremental linking was introduced, and see if there is a minimal test case that we can use to see it going faster: <a href=\"https://unix.stackexchange.com/questions/491312/why-does-the-linux-kernel-build-system-use-incremental-linking-or-ar-t-thin-arch\">https://unix.stackexchange.com/questions/491312/why-does-the-linux-kernel-build-system-use-incremental-linking-or-ar-t-thin-arch</a></p>\n\n<p>Tested on Ubuntu 18.10, GCC 8.2.0, Lenovo ThinkPad P51 laptop, Intel Core i7-7820HQ CPU (4 cores / 8 threads), 2x Samsung M471A2K43BB1-CRC RAM (2x 16GiB), Samsung MZVLB512HAJQ-000L7 SSD (3,000 MB/s).</p>\n"}], "owner": {"reputation": 249, "user_id": 2527436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mWV21.jpg?s=128&g=1", "display_name": "MediocreMyna", "link": "https://stackoverflow.com/users/2527436/mediocremyna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7297, "favorite_count": 6, "answer_count": 2, "score": 15, "last_activity_date": 1571144844, "creation_date": 1427894481, "last_edit_date": 1428320691, "question_id": 29391965, "link": "https://stackoverflow.com/questions/29391965/what-is-partial-linking-in-gnu-linker", "title": "What is Partial Linking in GNU Linker?", "body": "<p>The best explanation I was able to find was from the official document:</p>\n\n<blockquote>\n  <p>-r\n  --relocateable Generate relocatable output--i.e., generate an output file that can in turn serve as input to ld. This is often called\n  partial linking. As a side effect, in environments that support\n  standard Unix magic numbers, this option also sets the output file's\n  magic number to OMAGIC. If this option is not specified, an absolute\n  file is produced. When linking C++ programs, this option will not\n  resolve references to constructors; to do that, use -Ur. This option\n  does the same thing as `-i'.</p>\n</blockquote>\n\n<p>I am specifically interested in knowing what happens to the symbols present in inputs to linker. Take a specific case when I have a static library <strong>libstatic.a</strong> which contains a single object file <strong>component.o</strong>. \nNow, I want to create another static library <strong>libfinal.a</strong> which will work as an interface to <strong>libstatic.a</strong>. I use this command to create it:</p>\n\n<p><code>ld -r -o libfinal.a wrapper.o -L. -lstatic</code></p>\n\n<p>Where <strong>wrapper.o</strong> provides exclusive APIs to call the functions defined in libstatic.a</p>\n\n<p>Will the <strong>libfinal.a</strong> be just a combined archive having <strong>wrapper.o</strong> and <strong>component.o</strong> or all the references which can-be-resolved between <strong>wrapper.o</strong> and <strong>component.o</strong> be resolved(linking) and then placed into <strong>libfinal.a</strong>?</p>\n\n<p><strong>Edit_1:</strong> Updating the question based on the progress made:\nThe <strong>objdump</strong> of the component library <code>libstatic.a</code> (<code>objdump -D libstatic.a</code>) shows <code>.text</code> sections separately for each function (as expected). Whereas in the combined library <code>libfinal.a</code>, which has been created by partial linking (<code>-r</code>flag) there is just one single <code>.text</code> section. I guess this means that an internal-linking has taken place and it's not just creating a plain archive.</p>\n"}, {"tags": ["c", "string", "loops"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1427893940, "post_id": 29391525, "comment_id": 46960475, "body": "Remember pressing the enter key for the <code>scanf</code>? This character(<code>\\n</code>) is consumed by the <code>fgets</code> in the first iteration"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427894205, "post_id": 29391525, "comment_id": 46960678, "body": "OT: <code>strlen()</code> returns <code>size_t</code> not <code>int</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427933132, "post_id": 29391525, "comment_id": 46981234, "body": "where is the &#39;t&#39; variable defined?\\"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427933301, "post_id": 29391525, "comment_id": 46981272, "body": "variable &#39;j&#39;, &#39;k&#39;, &#39;x&#39;, and val[] are not used , they cause the compiler to raise  warnings.  suggest eliminate those variables"}], "answers": [{"tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": true, "score": 5, "last_activity_date": 1427894054, "last_edit_date": 1427894054, "creation_date": 1427893421, "answer_id": 29391609, "question_id": 29391525, "link": "https://stackoverflow.com/questions/29391525/string-length-error/29391609#29391609", "title": "String length Error", "body": "<p>You are not clearing the input buffer. After giving the input value to first <code>scanf</code> newline will be there. So <code>fgets</code> will not get the input from the user.\nNewline will be placed in that buffer in a first(<code>song[0]</code>) position. So this is the reason strlen returns as value <code>1</code>.</p>\n\n<p>Make this line before the <code>fgets</code>.</p>\n\n<pre><code>int c;\nif ( i == 0 )\n    while((c=getchar()) != '\\n' &amp;&amp; c != EOF );\nfgets(song,500,stdin);\n</code></pre>\n\n<hr>\n\n<p>Or else place this line after getting the input from the <code>scanf</code>.</p>\n\n<pre><code>scanf(\"%d\",&amp;t);\nwhile((c=getchar()) != '\\n' &amp;&amp; c != EOF );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 4609887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c0128c752d38a95b933088c0eb8197ef?s=128&d=identicon&r=PG&f=1", "display_name": "Patel", "link": "https://stackoverflow.com/users/4609887/patel"}, "edited": false, "score": 1, "creation_date": 1427894149, "post_id": 29391790, "comment_id": 46960634, "body": "I must say this looks so simple and elegant solution"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1427895423, "post_id": 29391790, "comment_id": 46961393, "body": "This <i>can</i> lead to problems as a whitespace character in the format string instructs <code>scanf</code> to skip any number of whitespace characters including none <b>until the first non-whitespace character</b>. So , when you think that the execution of the program has reached the <code>fgets</code> in the first iteration, you&#39;re wrong. The execution is still in the <code>scanf</code>."}, {"owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1427899581, "post_id": 29391790, "comment_id": 46964346, "body": "Thank you @CoolGuy for pointing out the problem, may you provide an example of input that would cause problems?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1427900209, "post_id": 29391790, "comment_id": 46964795, "body": "@Alex , Actually, I was saying that adding, say, a <code>printf</code> just before the <code>fgets</code> causes a problem as the text in the <code>printf</code> does not appear when one enters the number of test cases for the first <code>scanf</code>. It appears only when you press enter. But note that this happens only in the first iteration."}], "tags": [], "owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "is_accepted": false, "score": 3, "last_activity_date": 1427898561, "last_edit_date": 1427898561, "creation_date": 1427893971, "answer_id": 29391790, "question_id": 29391525, "link": "https://stackoverflow.com/questions/29391525/string-length-error/29391790#29391790", "title": "String length Error", "body": "<p>Include <code>\\n</code> in <code>scanf</code> input string (and in C declare variables at the beginning of the <em>block</em> <code>{ }</code>).</p>\n\n<p>Also notice the len will include the <code>\\n</code> char.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main(void)\n{\n    int t, i;\n    printf(\"Enter the no of test cases: \");\n    scanf(\"%d\\n\",&amp;t);\n    for(i=0;i&lt;t;++i) {\n        char song[500];\n        int len;\n\n        fgets(song,500,stdin);\n        len=strlen(song);\n        printf(\"len=%d\\n\",len);\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>update</strong> </p>\n\n<p>If you need to handle weird input just use <code>fgets</code> (<code>\\n</code> removed from <em>len</em>).</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\nint main(void)\n{\n    char song[500];\n    int t, i, len;  \n    printf(\"Enter the no of test cases: \");\n    fgets(song,500,stdin);\n    t = atoi(song);\n    for(i=0;i&lt;t;++i) {\n        fgets(song,500,stdin);\n        if ((len=strlen(song)) &gt; 0) {\n            song[--len] = '\\0';\n            printf(\"len=%d\\n\",len);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427899112, "creation_date": 1427899112, "answer_id": 29393716, "question_id": 29391525, "link": "https://stackoverflow.com/questions/29391525/string-length-error/29393716#29393716", "title": "String length Error", "body": "<p>When using <code>scanf</code> (or its relatives), it is important to check the return of the function. <code>scanf</code> returns the number of input values correctly matched and assigned. If there are inappropriate characters or insufficient characters, <code>scanf</code> will experience a <strong>matching</strong> or <strong>input</strong> failure. A quick <code>if</code> statement will suffice:</p>\n\n<pre><code>    if (!scanf (\"%d\", &amp;t)) {\n        fprintf (stderr, \"error: invalid type or number for test cases.\\n\");\n        return 1;\n    }\n</code></pre>\n\n<p>As also noted, <code>fgets</code> will read and include in <code>song</code> the trailing <code>newline</code> character. Generally, you will want to remove the trailing <code>newline</code> to prevent having stray newlines scattered through various strings within your code. (not to mention looking at a <code>length=5</code> for <code>data</code> is a bit strange) A simple method for removing the <code>newline</code> after your call to <code>fgets</code> is:</p>\n\n<pre><code>            len = strlen (song);\n            while (len &amp;&amp; song[len-1] == '\\n')  /* strip newline */\n                song[--len] = 0;\n</code></pre>\n\n<p>Putting together the test of <code>scanf</code> return, emptying the input buffer, and stripping the <code>newline</code> after <code>fgets</code>, your code would look similar to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main (void)\n{\n    int c = 0;\n    int i = 0;\n    int t = 0;\n\n    printf (\"\\n Enter the no of test cases: \");\n    if (!scanf (\"%d\", &amp;t)) {\n        fprintf (stderr, \"error: invalid type or number for test cases.\\n\");\n        return 1;\n    }\n    while ((c = getchar()) != '\\n' &amp;&amp; c != EOF);\n\n    for (i = 0; i &lt; t; ++i) {\n\n        char song[500] = { 0 };\n        size_t len = 0;\n\n        if (printf (\"\\n    case [%d] : \", i) &amp;&amp; fgets (song, 500, stdin))\n        {\n            len = strlen (song);\n            while (len &amp;&amp; song[len-1] == '\\n')  /* strip newline */\n                song[--len] = 0;\n        }\n        printf (\"         len : %zu\\n\", len);\n    }\n\n    printf (\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/scanf_rd_int\n\n Enter the no of test cases: 2\n\n    case [0] : this is case one - 28 chars.\n         len : 28\n\n    case [1] : this is case two -- 29 chars.\n         len : 29\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 4609887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c0128c752d38a95b933088c0eb8197ef?s=128&d=identicon&r=PG&f=1", "display_name": "Patel", "link": "https://stackoverflow.com/users/4609887/patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 1, "accepted_answer_id": 29391609, "answer_count": 3, "score": 2, "last_activity_date": 1427899112, "creation_date": 1427893224, "last_edit_date": 1427893688, "question_id": 29391525, "link": "https://stackoverflow.com/questions/29391525/string-length-error", "title": "String length Error", "body": "<p>I am reading the string from the stdin using fgets function and then trying to print the length of the string, But I am always getting the length of the string as 1 always for the first time \nHere is my code</p>\n\n<pre><code>#incldue&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main(void)\n{\n   printf(\"\\n Enter the no of test cases\");\n   scanf(\"%d\",&amp;t);\n   int i,j;\n   for(i=0;i&lt;t;++i)\n   {\n     char song[500],val[28];\n     int k=0,x=0;\n     fgets(song,500,stdin);\n     int len=strlen(song);\n     printf(\"\\nlen=%d\",len);\n   }\n  return 0;\n}\n</code></pre>\n\n<p>I am always getting 1 as the length for the first test case :/\nPlease suggest where i am going wrong </p>\n"}, {"tags": ["c", "cmake", "clion"], "comments": [{"owner": {"reputation": 123, "user_id": 4731193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83bde67c53fe84159c2fcc05d99001ee?s=128&d=identicon&r=PG&f=1", "display_name": "TheIcedGuardian", "link": "https://stackoverflow.com/users/4731193/theicedguardian"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1427894301, "post_id": 29391524, "comment_id": 46960742, "body": "I tried :                                                                                       target_link_libraries(fdf /usr/lib/x86_64-linux-gnu/libX11.a) target_link_libraries(fdf /usr/lib/x86_64-linux-gnu/libXext.a)"}, {"owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 1, "creation_date": 1427896711, "post_id": 29391524, "comment_id": 46962247, "body": "show the output of <code>make VERBOSE=ON</code>. More information is required..."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1427915608, "post_id": 29391524, "comment_id": 46973738, "body": "What is <code>fdf</code> by the way?"}], "answers": [{"tags": [], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "is_accepted": true, "score": 3, "last_activity_date": 1427915385, "creation_date": 1427915385, "answer_id": 29398867, "question_id": 29391524, "link": "https://stackoverflow.com/questions/29391524/link-a-a-library-with-cmake/29398867#29398867", "title": "Link a .a library with CMake", "body": "<p>Rewrite your</p>\n\n<pre><code>target_link_libraries(fdf /usr/lib/x86_64-linux-gnu/libX11.a)\ntarget_link_libraries(fdf /usr/lib/x86_64-linux-gnu/libXext.a)\n</code></pre>\n\n<p>as:</p>\n\n<pre><code>target_link_libraries(fdf)\nlink_directories(\"/usr/lib/x86_64-linux-gnu/\")\ntarget_link_libraries(X11)\ntarget_link_libraries(Xext)\n</code></pre>\n\n<p>As you mentioned in your answer, it might be that you have to shuffle the order of the last 2 lines\nand so on.</p>\n"}], "owner": {"reputation": 123, "user_id": 4731193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83bde67c53fe84159c2fcc05d99001ee?s=128&d=identicon&r=PG&f=1", "display_name": "TheIcedGuardian", "link": "https://stackoverflow.com/users/4731193/theicedguardian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "accepted_answer_id": 29398867, "answer_count": 1, "score": -1, "last_activity_date": 1490939901, "creation_date": 1427893221, "last_edit_date": 1490939901, "question_id": 29391524, "link": "https://stackoverflow.com/questions/29391524/link-a-a-library-with-cmake", "title": "Link a .a library with CMake", "body": "<p>I want to link my .a library with CMake as I am used to with :\n <code>cc main.c -L/usr/lib64 -lmlx -L/usr/lib64/X11 -lXext -lX11</code>\nI use Clion from JetBRAINS.</p>\n\n<p>I tried in my CMake :</p>\n\n<pre><code>target_link_libraries(fdf /usr/lib/x86_64-linux-gnu/libX11.a)\ntarget_link_libraries(fdf /usr/lib/x86_64-linux-gnu/libXext.a)\n</code></pre>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 2, "creation_date": 1427893620, "post_id": 29391507, "comment_id": 46960285, "body": "<code>if (s=&#39;s&#39;)</code> looks suspicious. (You seem to use = for == a lot)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1427893652, "post_id": 29391507, "comment_id": 46960310, "body": "The code, as shown, will not compile."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1427893880, "post_id": 29391507, "comment_id": 46960450, "body": "<code>int ,x;</code> seriously?"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 4493153, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/29715292/picture?type=large", "display_name": "Raphael Jones", "link": "https://stackoverflow.com/users/4493153/raphael-jones"}, "edited": false, "score": 0, "creation_date": 1427905063, "post_id": 29391746, "comment_id": 46967931, "body": "ok. helpful thanks.  I&#39;m not sure how have the number of questions divided by the number of attempts. can you explain what formula you would use?"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1427894270, "last_edit_date": 1427894270, "creation_date": 1427893841, "answer_id": 29391746, "question_id": 29391507, "link": "https://stackoverflow.com/questions/29391507/why-doesnt-my-for-loop-exit/29391746#29391746", "title": "Why doesn&#39;t my for loop exit?", "body": "<pre><code>if (x=response[0])\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>if (x==response[0])\n</code></pre>\n\n<p>similar changes should be made in all <code>if()</code>s</p>\n\n<p>Note that you are comparing a character with an integer.Also</p>\n\n<pre><code>result=(4/count)*100;\n</code></pre>\n\n<p>There is a division by 0 operation. </p>\n\n<blockquote>\n  <p>Integer division by zero results in undefined behavior</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1427894217, "creation_date": 1427894217, "answer_id": 29391884, "question_id": 29391507, "link": "https://stackoverflow.com/questions/29391507/why-doesnt-my-for-loop-exit/29391884#29391884", "title": "Why doesn&#39;t my for loop exit?", "body": "<ul>\n<li>Your declaration of <code>int x</code> is erroneous; there's a comma next to the identifier.</li>\n<li>In C, the comparison operator looks like <code>==</code>, <strong>not</strong> <code>=</code>. <strong>This</strong> is the <strong>assignment</strong> operator.</li>\n<li>Your percent calculation is wrong; <code>int / int</code> is <code>int</code> not <code>float</code> or <code>double</code> or <code>long double</code>, so this will always be <code>0</code>. Furthermore, a <code>float</code> is printed out with the <code>\"%f\"</code> format string.</li>\n</ul>\n"}], "owner": {"reputation": 115, "user_id": 4493153, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/29715292/picture?type=large", "display_name": "Raphael Jones", "link": "https://stackoverflow.com/users/4493153/raphael-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1427894270, "creation_date": 1427893193, "question_id": 29391507, "link": "https://stackoverflow.com/questions/29391507/why-doesnt-my-for-loop-exit", "title": "Why doesn&#39;t my for loop exit?", "body": "<p>C program. I am trying to make a multiple choice quiz. I have used a for loop to run from question 1 to 2 to 3 etc. However after running the program it never exits the for loop even when I have specified only count &lt;=3. Why? Can you see what I have done wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main (void)\n{    \n    char s;\n    char response[]={'a','b','c','d'};\n\n    int ,x;\n    int count,result;\n\n\n    printf (\" Listo para empezar?\\n\\n Please type 's' for si or 'n' for no.\\n\");\n    scanf (\"%c\",&amp;s);\n          if (s='s'){\n                printf (\"Bueno. Ya Empezamos!\\n\");\n                }   \n\n    for (count=0;count&lt;=3;count++){\n        printf (\"1.Que significa la palabra 'conocer'\\n\");\n        printf (\"1.\\t to like 2.\\t to know\\t 3. to do\\t 4. to eat\\n\");\n\n\n        scanf (\"%d\",&amp;x);\n        if (x=response[1])\n        {\n        printf (\"Equivocado!\\n 'conocer'significa: to know\\n\");           \n\n        }\n       else {\n       printf (\"Correcto!\\n\");\n\n       }\n\n       printf (\"1.Que significa la palabra 'ser'\\n\");\n        printf (\"1.\\t to be 2.\\t to return\\t 3. to be (location)\\t 4. to eat\\n\");\n        scanf (\"%d\",&amp;x);\n        if (x=response[0])\n        {\n           printf (\"Equivocado!\\n 'ser'significa: to be\\n\");\n        }\n       else {\n            printf (\"Correcto!\\n\");\n\n       }\n       printf (\"1.Que significa la palabra 'poder'\\n\");\n        printf (\"1.\\tto be able to 2.\\t to run\\t 3. to play\\t 4. to put\\n\");\n\n\n        scanf (\"%d\",&amp;x);\n        if (x=response[0])\n        {\n        printf (\"Equivocado!\\n 'poder'significa: to be able to\\n\");           \n\n        }\n       else {\n       printf (\"Correcto!\\n\");\n\n\n       }\n       result=(4/count)*100;\n       printf (\"%d is your percentage out of %d attempts\\n\",result,count);\n\n       } \n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "malloc", "sizeof", "dynamic-arrays"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1427893369, "post_id": 29391494, "comment_id": 46960123, "body": "You have a memory leak in your code, when you assign the string literal to the pointer, you <i>overwrite</i> the previous address stored in the pointer and loose the memory you previously allocated. After that a call to <code>free</code> or <code>realloc</code> will not work."}, {"owner": {"reputation": 10964, "user_id": 2478565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/UnOcW.jpg?s=128&g=1", "display_name": "Drew McGowen", "link": "https://stackoverflow.com/users/2478565/drew-mcgowen"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1427893474, "post_id": 29391494, "comment_id": 46960201, "body": "@JoachimPileborg actually, <code>inp</code> was never assigned to begin with. The <code>malloc</code> return value is stored in <code>res</code> and is not lost, aka no memory leak."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1427893488, "post_id": 29391494, "comment_id": 46960211, "body": "Also, <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">in C you should not cast the result of <code>malloc</code></a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 10964, "user_id": 2478565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/UnOcW.jpg?s=128&g=1", "display_name": "Drew McGowen", "link": "https://stackoverflow.com/users/2478565/drew-mcgowen"}, "edited": false, "score": 0, "creation_date": 1427893513, "post_id": 29391494, "comment_id": 46960224, "body": "@DrewMcGowen Ah, missed that. Well, I&#39;ll leave my comment in case the OP desiced to &quot;fix&quot; that assignment."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1427902023, "post_id": 29391494, "comment_id": 46966033, "body": "@JoachimPileborg now your first comment makes sense sir. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1427893285, "post_id": 29391533, "comment_id": 46960053, "body": "true statements, but does not answer the question."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1427893855, "post_id": 29391533, "comment_id": 46960432, "body": "@abelenky Well, does it now?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": -1, "last_activity_date": 1427904096, "last_edit_date": 1495535295, "creation_date": 1427893240, "answer_id": 29391533, "question_id": 29391494, "link": "https://stackoverflow.com/questions/29391494/size-of-dynamic-array-in-c-doesnt-change/29391533#29391533", "title": "Size of dynamic array in C doesn&#39;t change", "body": "<p><strong><em>****EDIT****</em></strong> : The below post was written before the <a href=\"https://stackoverflow.com/posts/29391494/revisions\">edit</a> of the question.</p>\n\n<p>You're missing <code>stdlib.h</code>, to the most, for function <code>malloc()</code> to work properly. After that, </p>\n\n<p><strong>Point 1:</strong></p>\n\n<pre><code>char *res = (char*)malloc(15*sizeof(char*));\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>char *res = malloc(15);   //will also issue warning to resolve missing stdlib.h\n</code></pre>\n\n<p>Point no note: you should be allocating memory for <code>char</code>s, not <code>char *</code>s. Then , you should write <code>sizeof(char)</code>, not <code>sizeof(char *)</code>. Also, <code>sizeof(char)</code> is always 1 in <code>C</code>. So, can omit that part.</p>\n\n<p>Please read: <a href=\"https://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family in <code>C</code>.</p>\n\n<p><strong>Point 2:</strong></p>\n\n<p>strings are not supposed to be <em>assigned</em> to already <code>malloc()</code>ed pointers. use <code>strcpy()</code> instead.</p>\n\n<pre><code> inp = \"hello world\";\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>strcpy(inp, \"hello world\");\n</code></pre>\n\n<p>Otherwise, you'll overwrite the previously allocated memory, returned by <code>malloc()</code>. The <em>assignment</em> will overwrite the memory location held by <code>inp</code>, causing memory leak.</p>\n\n<p><strong>Point 3.</strong></p>\n\n<p><code>sizeof()</code> operator returns a value of <code>size_t</code>. To print that, you need <code>%zu</code> format specifier.</p>\n\n<p>Related, from <code>C11</code> standard document, chapter <code>\u00a77.21.6.1</code>, paragraph 7, </p>\n\n<blockquote>\n  <p>z </p>\n  \n  <p>Specifies that a following d, i, o, u, x, or X conversion specifier applies to a\n  size_t or the corresponding signed integer type argument; or that a\n  following n conversion specifier applies to a pointer to a signed integer type\n  corresponding to size_t argument.</p>\n</blockquote>\n\n<hr>\n\n<p>Then, to answer the query about the output, in all the cases, you're printing <code>sizeof(inp)</code> which is essentially <code>sizeof(char *)</code> and that value is fixed for a particular platform (<code>8</code>, in your case). </p>\n\n<p>Just FYI, <code>sizeof()</code> is an operator, it's not a function. It returns the <em>size</em> of the datatype, not the <em>amount of space pointed by the variable</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "is_accepted": false, "score": 4, "last_activity_date": 1427893242, "creation_date": 1427893242, "answer_id": 29391534, "question_id": 29391494, "link": "https://stackoverflow.com/questions/29391494/size-of-dynamic-array-in-c-doesnt-change/29391534#29391534", "title": "Size of dynamic array in C doesn&#39;t change", "body": "<p><code>sizeof(inp)</code> gives you the size of pointer (8 bytes, 64-bits), not the storage under that pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1427893328, "creation_date": 1427893328, "answer_id": 29391565, "question_id": 29391494, "link": "https://stackoverflow.com/questions/29391494/size-of-dynamic-array-in-c-doesnt-change/29391565#29391565", "title": "Size of dynamic array in C doesn&#39;t change", "body": "<p><code>sizeof(inp)</code> in your case is <code>sizeof(pointer)</code> and hence <code>sizeof(char-pointer)</code> on your system is 8 bytes which is a constant. While allocating memory using <code>malloc()</code> you would have specified the size so why do you need to get the size of the allocated space again?</p>\n\n<p>And I see <code>res</code> is being initialized and not <code>inp</code></p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1427974502, "post_id": 29391598, "comment_id": 46996751, "body": "Are you trying to solve a problem in C language using C++ constructs?  What the hell means <code>&quot;size of array of 10 int:&quot; &lt;&lt; sizeof(int[10]) &lt;&lt; &#39;\\n&#39;</code> in C ????????????  Could you give an explanation for python language instead?  (look at the tags, please)"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1427989680, "post_id": 29391598, "comment_id": 47006320, "body": "@LuisColorado.: I myself ran the code in C++,then just post the line..sorry I will correct it. thx for pointing it out."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1427989727, "last_edit_date": 1427989727, "creation_date": 1427893397, "answer_id": 29391598, "question_id": 29391494, "link": "https://stackoverflow.com/questions/29391494/size-of-dynamic-array-in-c-doesnt-change/29391598#29391598", "title": "Size of dynamic array in C doesn&#39;t change", "body": "<p>You are using <code>sizeof</code>.returns size in bytes of the object representation of type. Remember sizeof is an operator.</p>\n\n<p>Now sizeof is returning here 8 a constant type of <code>size_t</code></p>\n\n<p><strong>Why isn't it changing?</strong> because in all tha cases you are using the same type that is <code>char *</code>.</p>\n\n<p>Here 8 bytes is the size of the character pointer that is 64 bit.</p>\n\n<p>You can probably have a look at this- </p>\n\n<p><code>printf(\"size of array of 10 int: %d\\n\"  sizeof(int[10]));</code></p>\n\n<p>This will give the output:<code>40</code>. 40 bytes.</p>\n\n<p>And <code>malloc</code> will never affect the size of a <code>char*</code>. It still needs 64 bits to store an address of a dynamically allocated space from heap.</p>\n\n<h2>Is it possible to determine size of dynamically allocated memory in c?</h2>\n\n<p>There is no <strong>standard</strong> way to do this. You have to take this overhead on your own. You may find some extensions to the compiler that may accomplish this.</p>\n"}], "owner": {"reputation": 831, "user_id": 2867337, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fbf0273a08cfad4e5f1f1485d3618222?s=128&d=identicon&r=PG&f=1", "display_name": "vinayawsm", "link": "https://stackoverflow.com/users/2867337/vinayawsm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 0, "accepted_answer_id": 29391598, "answer_count": 4, "score": 0, "last_activity_date": 1427989727, "creation_date": 1427893152, "last_edit_date": 1427894107, "question_id": 29391494, "link": "https://stackoverflow.com/questions/29391494/size-of-dynamic-array-in-c-doesnt-change", "title": "Size of dynamic array in C doesn&#39;t change", "body": "<p>I was getting <code>realloc(): invalid next size</code> for a program. So I just coded this to understand what's happening.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main()\n{\n    char *inp;\n    printf(\"%lu \",sizeof(inp));\n    char *res = (char*)malloc(15*sizeof(char*));\n    printf(\"%lu \",sizeof(res));\n    res = \"hello world\";\n    printf(\"%lu\\n\",sizeof(res));\n    return 0;\n}\n</code></pre>\n\n<p>And surprisingly it outputs <code>8 8 8</code>. Can anyone explain why is it like that? Why is it 8 by default? And how <code>malloc()</code> effects size of <code>inp</code>?</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1427893281, "post_id": 29391483, "comment_id": 46960049, "body": "Did you mean <code>void func1(void)</code>?"}, {"owner": {"reputation": 798, "user_id": 3850993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NTFC2.png?s=128&g=1", "display_name": "Yorick de Wid", "link": "https://stackoverflow.com/users/3850993/yorick-de-wid"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1427893350, "post_id": 29391483, "comment_id": 46960111, "body": "@MohitJain Indeed. Though not specified this should be a <code>void</code>"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1427893657, "post_id": 29391483, "comment_id": 46960312, "body": "Without <code>void</code>, it accepts varargs as in <code>void func1(...)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 3850993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NTFC2.png?s=128&g=1", "display_name": "Yorick de Wid", "link": "https://stackoverflow.com/users/3850993/yorick-de-wid"}, "edited": false, "score": 0, "creation_date": 1427897889, "post_id": 29391893, "comment_id": 46963064, "body": "Should that not be <code>((func_t) &amp;float_func)((param_t) &amp;x);</code> since <code>param_t</code> expects a pointer?"}, {"owner": {"reputation": 416, "user_id": 4718787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f9295a72d1d1e0ee6a6f2dc6d2e84e6?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Demakov", "link": "https://stackoverflow.com/users/4718787/aleksey-demakov"}, "reply_to_user": {"reputation": 798, "user_id": 3850993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NTFC2.png?s=128&g=1", "display_name": "Yorick de Wid", "link": "https://stackoverflow.com/users/3850993/yorick-de-wid"}, "edited": false, "score": 0, "creation_date": 1427900726, "post_id": 29391893, "comment_id": 46965157, "body": "@Yorick de Wid, it is defined as <code>typedef uintptr_t param_t;</code> and  <code>intptr_t</code> is an integer type capable of holding a pointer. See here: <a href=\"http://stackoverflow.com/questions/1845482/what-is-uintptr-t-data-type\" title=\"what is uintptr t data type\">stackoverflow.com/questions/1845482/what-is-uintptr-t-data-t&zwnj;&#8203;ype</a>"}], "tags": [], "owner": {"reputation": 416, "user_id": 4718787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f9295a72d1d1e0ee6a6f2dc6d2e84e6?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Demakov", "link": "https://stackoverflow.com/users/4718787/aleksey-demakov"}, "is_accepted": true, "score": 1, "last_activity_date": 1427906844, "last_edit_date": 1495539805, "creation_date": 1427894255, "answer_id": 29391893, "question_id": 29391483, "link": "https://stackoverflow.com/questions/29391483/c-passing-array-to-pointer-function/29391893#29391893", "title": "C: Passing array to pointer function", "body": "<p>The way to do it is typedef a function with 1 argument, so the compiler could verify if you pass the correct number of arguments and that you do not pass something absolutely incompatible (e.g. a struct by value). And when you initialize your array, use this typedef to cast function types.</p>\n\n<pre><code>void func1(void) { ... }\n\nvoid func2(char *arg) { ... }\n\nvoid func3(int arg) { ... }\n\ntypedef uintptr_t param_t;    \ntypedef void (*func_t)(param_t);\n\nstruct fcall {\n    char name[16];\n    func_t pfunc;\n};\n\nconst struct fcall r[] = {\n    {\"F1\", (func_t) func1},\n    {\"F2\", (func_t) func2}\n    {\"F3\", (func_t) func3}\n};\n\n...\n\nr[0].pfunc((param_t) \"foo\");\nr[1].pfunc((param_t) \"bar\");\nr[2].pfunc((param_t) 1000);\n</code></pre>\n\n<p>Here <code>param_t</code> is defined as <code>uintpr_t</code>. This is an integer type big enough to store a pointer value. For details see here: <a href=\"https://stackoverflow.com/questions/1845482/what-is-uintptr-t-data-type\">What is uintptr_t data type</a>.\nThe caveat is that the calling conventions for <code>param_t</code> should be compatible with the function arguments you use. This is normally true for all integer and pointer types. The following sample is going to work, all the type conversions are compatible with each other in terms of calling conventions:</p>\n\n<pre><code>// No problem here.\nvoid ptr_func(struct my_struct *ptr) {\n    ...\n}\n...\nstruct my_struct struct_x;\n((func_t) &amp;ptr_func)((param_t) &amp;struct_x);\n</code></pre>\n\n<p>But if you are going to pass a float or double argument, then it might not work as expected.</p>\n\n<pre><code>// There might be a problem here. Depending on the calling\n// conventions the value might contain a complete garbage,\n// as it might be taken from a floating point register that\n// was not set on the call site.\nvoid float_func(float value) {\n    ...\n}\n...\nfloat x = 1.0;\n((func_t) &amp;float_func)((param_t) x);\n</code></pre>\n\n<p>In this case you might need to define a function like this:</p>\n\n<pre><code>// Problem fixed, but only partially. Instead of garbage\n// there might be rounding error after the conversions.\nvoid float_func(param_t param) {\n    float value = (float) param;\n    ...\n}\n...\nfloat x = 1.234;\n((func_t) &amp;float_func)((param_t) x);\n</code></pre>\n\n<p>The float is first being converted to an integer type and then back. As a result the value might be rounded. An obvious solution would be to take an address of <code>x</code> and pass it to modified a function <code>float_func2(float *value_ptr)</code>. The function would dereference its pointer argument and get the actual float value.</p>\n\n<p>But, of course, being hardcore C-programmers we do not want to be obvious, so we are going to resort to some ugly trickery.</p>\n\n<pre><code>// Problem fixed the true C-programmer way.\nvoid float_func(param_t param) {\n    float value = *((float *) &amp;param);\n    ...\n}\n...\nfloat x = 1.234;\n((func_t) &amp;float_func)(*((param_t *) &amp;x));\n</code></pre>\n\n<p>The difference of this sample compared to passing a pointer to float, is that on the architecture (like x86-64) where parameters are passed on registers rather than on the stack, a smart enough compiler can make float_func do its job using registers only, without the need to load the parameter from the memory.</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1427895155, "creation_date": 1427895155, "answer_id": 29392194, "question_id": 29391483, "link": "https://stackoverflow.com/questions/29391483/c-passing-array-to-pointer-function/29392194#29392194", "title": "C: Passing array to pointer function", "body": "<p>One option is for all the functions accept a <code>char *</code> argument, and your calling code to always pass one.   The functions that don't need an argument need not use the argument they receive.</p>\n\n<p>To be clean (and avoid undefined behaviour), if you must have some functions that accept no argument and some functions that accept an argument, use two lists and register/call each type of function separately.</p>\n"}, {"comments": [{"owner": {"reputation": 416, "user_id": 4718787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f9295a72d1d1e0ee6a6f2dc6d2e84e6?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Demakov", "link": "https://stackoverflow.com/users/4718787/aleksey-demakov"}, "edited": false, "score": 0, "creation_date": 1427904952, "post_id": 29392983, "comment_id": 46967861, "body": "C-programming is not for the faint of heart anyway. Those young souls who dare to do it instead of java, c#, python are unlikely to listen to any warnings. And that&#39;s a good thing. I would say."}], "tags": [], "owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "is_accepted": false, "score": 0, "last_activity_date": 1427897261, "creation_date": 1427897261, "answer_id": 29392983, "question_id": 29391483, "link": "https://stackoverflow.com/questions/29391483/c-passing-array-to-pointer-function/29392983#29392983", "title": "C: Passing array to pointer function", "body": "<p>If the behaviour is undefined there's no telling how much damage could be caused.</p>\n\n<p>It <em>might</em> blow up the planet.  Or it might not.</p>\n\n<p>So just don't do it, OK?</p>\n"}], "owner": {"reputation": 798, "user_id": 3850993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NTFC2.png?s=128&g=1", "display_name": "Yorick de Wid", "link": "https://stackoverflow.com/users/3850993/yorick-de-wid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 29391893, "answer_count": 3, "score": 0, "last_activity_date": 1427906844, "creation_date": 1427893112, "last_edit_date": 1427893749, "question_id": 29391483, "link": "https://stackoverflow.com/questions/29391483/c-passing-array-to-pointer-function", "title": "C: Passing array to pointer function", "body": "<p>I'm not sure if the question has asked before, but I couldn't find any similar topics.</p>\n\n<p>I'm struggeling with the following piece of code. The idea is to extend <code>r</code> any time later on without writing lots of if-else statements. The functions (<code>func1</code>, <code>func2</code>...) either take zero or one arguments.</p>\n\n<pre><code>void func1() {\n    puts(\"func1\");\n}\n\nvoid func2(char *arg){\n    puts(\"func2\");\n    printf(\"with arg %s\\n\", arg);\n}\n\nstruct fcall {\n    char name[16];\n    void (*pfunc)();\n};\n\nint main() {\n    const struct fcall r[] = {\n        {\"F1\", func1},\n        {\"F2\", func2}\n    };\n    char param[] = \"someval\";\n\n    size_t nfunc = RSIZE(r); /* array size */\n    for(;nfunc--&gt;0;) {\n        r[nfunc].pfunc(param);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The code above assumes that all functions take the string argument, which is <strong>not</strong> the case. The prototype for the pointer function is declared without any datatype to prevent the <em>incompatible pointer type</em> warning.</p>\n\n<p>Passing arguments to functions that do not take any parameters usually results in <em>too few arguments</em>. But in this case the compiler doesn't 'see' this ahead, which also let me to believe that no optimization is done to exclude these unused addresses from being pushed onto the stack. (I haven't looked at the actual assemble code).</p>\n\n<p>It feels wrong someway and that's usually a recipe for buffer overflows or undefined behaviour. Would it be better to call functions without parameters separately? If so, how much damage could this do?</p>\n"}, {"tags": ["c", "sockets", "networking", "ftp"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1427893113, "post_id": 29391259, "comment_id": 46959935, "body": "You send the <code>APPE</code> command, to append to a file on the server-side, but you don&#39;t make a data-connection to send the actual file and neither to initiate active mode data transfer. What do you expect to happen?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1427893247, "post_id": 29391259, "comment_id": 46960022, "body": "Also, you don&#39;t follow the protocol specification, which is of the request-response type. You send a request (a command) and the server responds with an answer. You send all your command without any knowledge if the server accepted them or not, then at the end you read all that the data transferred from the server to you at the end. You need to <a href=\"http://en.wikipedia.org/wiki/File_Transfer_Protocol\" rel=\"nofollow noreferrer\">read more about FTP</a>, including its relevant RFC documents."}, {"owner": {"reputation": 3136, "user_id": 733417, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dcf41e51e47135a6c9e2b2865de99ced?s=128&d=identicon&r=PG", "display_name": "amone", "link": "https://stackoverflow.com/users/733417/amone"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1427893345, "post_id": 29391259, "comment_id": 46960104, "body": "How can I make a data-connection to send file over sockets? Can you tell me which functions I should use or suggest me a source or show an example? I am new to C."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1427893601, "post_id": 29391259, "comment_id": 46960280, "body": "FYI, your <code>memset()</code> functions don&#39;t zero your buffers out but fill them with the ASCII representation of <code>&#39;0&#39;</code>, i.e. 0x30. Better replace it with <code>0</code>."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1443939731, "post_id": 29391259, "comment_id": 53687146, "body": "In fact you don&#39;t need <code>memset()</code> calls at all in correctly written networking code, other than to zero address structures before <code>bind()</code> or <code>connect().</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2479, "user_id": 820319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d8b17fb98d0730c1a7a346ba9ae9c3?s=128&d=identicon&r=PG", "display_name": "brenns10", "link": "https://stackoverflow.com/users/820319/brenns10"}, "edited": false, "score": 0, "creation_date": 1428023816, "post_id": 29393340, "comment_id": 47021128, "body": "If my answer helped, please accept it.  Otherwise, what can I do to expand my answer?"}], "tags": [], "owner": {"reputation": 2479, "user_id": 820319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d8b17fb98d0730c1a7a346ba9ae9c3?s=128&d=identicon&r=PG", "display_name": "brenns10", "link": "https://stackoverflow.com/users/820319/brenns10"}, "is_accepted": true, "score": 10, "last_activity_date": 1427898158, "creation_date": 1427898158, "answer_id": 29393340, "question_id": 29391259, "link": "https://stackoverflow.com/questions/29391259/send-file-to-ftp-server-using-sockets-in-c/29393340#29393340", "title": "Send file to ftp server using sockets in C", "body": "<p>It looks like you have an incomplete understanding of the FTP protocol.  FTP works on the idea of having 2 socket connections between the client and the server.  The first is a \"control\" connection, and the second is a \"data\" connection.  On the control connection, text commands are sent back and forth, as you are doing in your code.  When data needs to be sent back and forth, it is done using the data connection.</p>\n\n<p>There are two ways for FTP to set up a data connection, <a href=\"http://slacksite.com/other/ftp.html\" rel=\"noreferrer\">described here</a>:</p>\n\n<ul>\n<li>Active: Client specifies a port to the server, and the server connects to that port on the client's machine.  This is bad because firewalls and NAT are designed to avoid exactly these sorts of connections.</li>\n<li>Passive: The server gives the client a port to connect to, and the client connects to that port on the server machine.</li>\n</ul>\n\n<p>In brief, you'll need to:</p>\n\n<ol>\n<li>Use the <code>PASV</code> command.</li>\n<li>Parse the response from the server to get the port number (probably using <code>scanf</code>).</li>\n<li>Open a data connection to that port on the server.</li>\n<li>Put your file through that data connection.</li>\n</ol>\n\n<p>It's been a while since I last wrote with sockets in C, and I don't have the time to write an example, but this should be enough to get you started.  (<a href=\"https://www.ietf.org/rfc/rfc959.txt\" rel=\"noreferrer\">Here</a> is the specification for FTP.  RFC's like this are heavy reading, but they are unambiguous and can answer a lot of questions, if you can learn to read them.)</p>\n"}, {"comments": [{"owner": {"reputation": 1530, "user_id": 4592641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc436c6cecf709b67af970dd7cadb8c?s=128&d=identicon&r=PG", "display_name": "eGhoul", "link": "https://stackoverflow.com/users/4592641/eghoul"}, "edited": false, "score": 0, "creation_date": 1443932931, "post_id": 32930027, "comment_id": 53686034, "body": "i use to in my assignment last year but ftp part was made using Qt so i had to upload file using socket and it work just fine :D"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1443951309, "post_id": 32930027, "comment_id": 53689847, "body": "This does not implement the FTP protocol and is therefore 100% irrelevant to the question. I looked briefly at the code: after the first recv() call you assumed that it filled the buffer. You didn&#39;t even check for end of stream. I didn&#39;t look any further."}, {"owner": {"reputation": 1530, "user_id": 4592641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc436c6cecf709b67af970dd7cadb8c?s=128&d=identicon&r=PG", "display_name": "eGhoul", "link": "https://stackoverflow.com/users/4592641/eghoul"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1443971152, "post_id": 32930027, "comment_id": 53695191, "body": "yeah it goes around ftp protocol , using socket to send file"}], "tags": [], "owner": {"reputation": 1530, "user_id": 4592641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc436c6cecf709b67af970dd7cadb8c?s=128&d=identicon&r=PG", "display_name": "eGhoul", "link": "https://stackoverflow.com/users/4592641/eghoul"}, "is_accepted": false, "score": 0, "last_activity_date": 1443932816, "creation_date": 1443932816, "answer_id": 32930027, "question_id": 29391259, "link": "https://stackoverflow.com/questions/29391259/send-file-to-ftp-server-using-sockets-in-c/32930027#32930027", "title": "Send file to ftp server using sockets in C", "body": "<p>i hope this will be useful to you :</p>\n\n<pre><code>int receiveFile(int socket, char text[]) {\nFILE *fp;\nint nsize,k, i, size=0, temp_size, mul = 1, numbytes, lala, recvd; \nint count_freq, repeat;\nchar ch,buf[20],file_buf[505], temp_buf[505];\nsaferead(socket, text,80);\nif(text[0] == '/')  \n    return 1;\n\n\nnsize = strlen(text);\nchar name[nsize];\nstrncpy(name, text, nsize-1);\nname[nsize-1] = '\\0';   \n\nif ((fp = fopen(name,\"w\")) == NULL) {\n        perror(\" Can't open file\");\n    return 1;\n}\n\nif ((numbytes=recv(socket, buf, 10, 0)) == -1) {\n    perror(\"Cant receive size of the file....\\n\\n\");\n    return 1;\n}\n\nfor( i=0; i&lt;=9; i++ ){\n    size =  size + ( buf[i]*mul );\n    mul = mul * 10;\n}\n\n\nrecvd = 0;\nprintf(\"Received File: %s\\n\", name);\nrepeat = size/MAXDATASIZE;\n\nif ( repeat&gt;50 )\n    count_freq = repeat/50;\n\ni=0;    \nwhile( recvd &lt; size ){\n\n    if ((numbytes=recv(socket, temp_buf, MAXDATASIZE, 0)) == -1) {\n        perror(\"Error receiving file from server....\\n\\n\");\n        return 1;\n    }\n\n    fwrite( temp_buf, sizeof(temp_buf[0]), numbytes, fp );\n    recvd = recvd + numbytes;\n}\nfclose(fp);  \n</code></pre>\n\n<p>}</p>\n\n<pre><code>int sendFile(int socket, char text[]) {\nFILE *fp;\nint size =0, k, status, nsize = 0, temp_size, i, sent, numbytes, lala;\nchar buf[20], file_buf[505], temp_buf[505];\nchar ch;\nstruct stat info;\n\nnsize = strlen(text);\nchar name[nsize];\nlala = strlen(name);\nstrncpy(name, text, nsize-1);\nname[nsize-1] = '\\0';   \nlala = strlen(name);\n\nif((fp = fopen(name, \"r\")) == NULL) {\n    perror(\"Can't open file\");\n    text[0] = '/';\n    write(socket,text, 80);\n    return 1;\n}\nwrite(socket,text, 80);    \nprintf(\"Sending File: %s\\n\",text);\n\nstatus = stat( name,&amp;info );\n\nif( status == -1 ){\n    printf(\" fstat failed \\n\");\n    return 1;\n}\nsize = info.st_size;\ntemp_size = size;\n\nfor( i=0; i&lt;=9; i++ )   {\n    buf[i] =  size%10;\n    size = size/10;\n}\n\nif (send(socket, buf, 10, 0) == -1){\n    perror(\"Cant send file size...\\n\\n\");\n    return 1;\n}\n\n\ni = 0;\nsent = 0;\nwhile( sent &lt;= temp_size ){\n    ch = fgetc(fp);\n    if( sent == temp_size ){\n        if (i&gt;0){\n            if (( numbytes = send(socket, file_buf, i, 0)) == -1)\n                perror(\"Error in sending file.....\\n\\n\\n\");\n        }\n            break;\n    }\n\n    file_buf[i++] = ch;\n\n    if(i == MAX_BUFSIZE){                   \n        if (( numbytes = send(socket, file_buf, MAX_BUFSIZE, 0)) == -1)\n                perror(\"Error in sending file....\\n\\n\\n\");\n            i = 0;\n    }   \n        sent++;\n}\n\nfclose(fp);\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 3136, "user_id": 733417, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dcf41e51e47135a6c9e2b2865de99ced?s=128&d=identicon&r=PG", "display_name": "amone", "link": "https://stackoverflow.com/users/733417/amone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18013, "favorite_count": 0, "accepted_answer_id": 29393340, "answer_count": 2, "score": 1, "last_activity_date": 1443932816, "creation_date": 1427892471, "question_id": 29391259, "link": "https://stackoverflow.com/questions/29391259/send-file-to-ftp-server-using-sockets-in-c", "title": "Send file to ftp server using sockets in C", "body": "<p>I am trying to upload a file to my ftp server using sockets. It connects to the server and can read the directories but doesn't upload the file. \"STOR\" command creates a file in the server with an empty content. Why I am getting \"No data connection\" response from server and my file is empty? </p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nint main(int argc, char *argv[])\n{\n    argv[0]=\"2\";\n    argv[1]=\"ip\";\n\n    int sockfd = 0, n = 0;\n    char recvBuff[1024];\n    struct sockaddr_in serv_addr;\n    char mesUser[100]=\"USER ftpuser\\n\";\n    char mesPass[100]=\"PASS pass\\n\";\n    char meStor[100]=\"STOR xx\\n\";\n    char mesPasv[100]=\"PASV\\n\";\n    char meAppe[100]=\"APPE xx\\n\";\n\n    argc=2;\n\n    if(argc != 2)\n    {\n        printf(\"\\n Usage: %s &lt;ip of server&gt; \\n\",argv[0]);\n        return 1;\n    }\n\n    memset(recvBuff, '0',sizeof(recvBuff));\n    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n    {\n        printf(\"\\n Error : Could not create socket \\n\");\n        return 1;\n    }\n\n    memset(&amp;serv_addr, '0', sizeof(serv_addr));\n\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_port = htons(21);\n\n    if(inet_pton(AF_INET, argv[1], &amp;serv_addr.sin_addr)&lt;=0)\n     {\n     printf(\"\\n inet_pton error occured\\n\");\n     return 1;\n     }\n\n\n    //serv_addr.sin_addr.s_addr = inet_addr(argv[1]);\n\n    if( connect(sockfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) &lt; 0)\n    {\n        printf(\"\\n Error : Connect Failed \\n\");\n        return 1;\n    }\n\n    if( send(sockfd , mesUser , strlen(mesUser) , 0) &lt; 0)\n    {\n        perror(\"send failed\");\n        return 1;\n    }\n\n    if( send(sockfd , mesPass , strlen(mesPass) , 0) &lt; 0)\n    {\n        perror(\"send failed\");\n        return 1;\n    }\n\n    char* fr_name = \"pic.jpg\";\n    FILE *fr = fopen(fr_name, \"r\");\n    if(fr == NULL){\n        printf(\"File cannot be opened\");\n        return 0;\n    }\n    else{\n\n        /*if( send(sockfd , mesPasv , strlen(mesPasv) , 0) &lt; 0)\n        {\n            perror(\"send failed\");\n            return 1;\n        }*/\n\n        if( send(sockfd , meStor , strlen(meStor) , 0) &lt; 0)\n        {\n            perror(\"send failed\");\n            return 1;\n        }\n\n\n\n        char buffer[100];\n        fscanf(fr,\"%s\",buffer);\n        write(sockfd,buffer,100);\n\n\n        if( send(sockfd , meAppe , strlen(meAppe) , 0) &lt; 0)\n        {\n            perror(\"send failed\");\n            return 1;\n        }\n        //close(sockfd);\n\n\n    }\n\n    /*if( send(sockfd , meStor , strlen(meStor) , 0) &lt; 0)\n    {\n        perror(\"send failed\");\n        return 1;\n    }\n    */\n\n    while ( (n = read(sockfd, recvBuff, sizeof(recvBuff)-1)) &gt; 0)\n    {\n        recvBuff[n] = 0;\n        if(fputs(recvBuff, stdout) == EOF)\n        {\n            printf(\"\\n Error : Fputs error\\n\");\n            return 0;\n        }\n    }\n\n    if(n &lt; 0)\n    {\n        printf(\"\\n Read error \\n\");\n        return 0;\n    } \n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> 220---------- Welcome to Pure-FTPd [privsep] [TLS] ----------\n220-You are user number 6 of 50 allowed.\n220-Local time is now 14:41. Server port: 21.\n220 You will be disconnected after 15 minutes of inactivity.\n331 User username OK. Password required\n230 OK. Current restricted directory is /\n425 No data connection\n425 No data connection\n</code></pre>\n"}, {"tags": ["c", "performance", "time"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427892309, "post_id": 29391054, "comment_id": 46959405, "body": "Try <code>#define return CET_BEFORE_RETURN return</code>"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 1, "creation_date": 1427892333, "post_id": 29391054, "comment_id": 46959423, "body": "If you are on a Unix system, you can use <code>gprof</code>. Compile your code with <code>-pg</code> option, run it and type <code>gprof .&#47;a.out</code>."}, {"owner": {"reputation": 107, "user_id": 2727738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jQjvX.png?s=128&g=1", "display_name": "loverszhaokai", "link": "https://stackoverflow.com/users/2727738/loverszhaokai"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427946908, "post_id": 29391054, "comment_id": 46984365, "body": "@iharob  Thanks, it does help me. But in this case, if (1==something) return 1; I want it can be replaced as if (1 == something) <b>{</b> CET_BEFORE_RETURN return; <b>}</b>. <b>The brace should be added</b>"}, {"owner": {"reputation": 107, "user_id": 2727738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jQjvX.png?s=128&g=1", "display_name": "loverszhaokai", "link": "https://stackoverflow.com/users/2727738/loverszhaokai"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1427947396, "post_id": 29391054, "comment_id": 46984457, "body": "@Marian  Thanks! You help me a lot. <b>This is what I want!</b> Thanks again!"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428332160, "post_id": 29391054, "comment_id": 47108489, "body": "@loverszhaokai there is also [valgrind](www.valgrind.org) which has the <code>callgrind</code> tool, and there are graphical interfaces for it too, which are very helpful."}, {"owner": {"reputation": 107, "user_id": 2727738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jQjvX.png?s=128&g=1", "display_name": "loverszhaokai", "link": "https://stackoverflow.com/users/2727738/loverszhaokai"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428452025, "post_id": 29391054, "comment_id": 47164983, "body": "@iharob Thanks a lot. I will have a try."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4738913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f76c66001b0e4afb42ef189464a04d6a?s=128&d=identicon&r=PG&f=1", "display_name": "bigthumb", "link": "https://stackoverflow.com/users/4738913/bigthumb"}, "is_accepted": false, "score": 0, "last_activity_date": 1427905048, "last_edit_date": 1427905048, "creation_date": 1427903186, "answer_id": 29395227, "question_id": 29391054, "link": "https://stackoverflow.com/questions/29391054/calculate-execution-time-of-all-the-function/29395227#29395227", "title": "Calculate execution time of all the function", "body": "<p>I suggest using a profile tool, like VTune for VS or Instruments for Xcode so that you don't need to add the ugly code to calculate execution time, which can also slow down execution and make your results less accurate. Profiling tools provide more information\uff0csuch as locating performance bottlenecks.</p>\n"}], "owner": {"reputation": 107, "user_id": 2727738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jQjvX.png?s=128&g=1", "display_name": "loverszhaokai", "link": "https://stackoverflow.com/users/2727738/loverszhaokai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427905048, "creation_date": 1427891869, "question_id": 29391054, "link": "https://stackoverflow.com/questions/29391054/calculate-execution-time-of-all-the-function", "title": "Calculate execution time of all the function", "body": "<p>This project has many functions which some of them takes a lot of time to execute. <strong>Now my task is to find those functions which tasks the most of time.</strong> </p>\n\n<p>Here is my steps:</p>\n\n<ol>\n<li><p>Write a macro to calculate execution time</p>\n\n<pre><code>#ifndef _CALCULATE_EXE_TIME_\n#define _CALCULATE_EXE_TIME_\n\n#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n\n#define CALCULATE_EXE_TIME static clock_t CET_start_time, CET_end_time; \\\nstatic float CET_expend_time, CET_total_expend_time;            \\\nstatic unsigned int CET_invoked_times = 0;                      \\\nCET_start_time = clock();                                       \\\n\n#define CET_BEFORE_RETURN CET_end_time = clock(); \\\nCET_expend_time = (float)(CET_end_time - CET_start_time) / CLOCKS_PER_SEC; \\\nCET_total_expend_time += CET_expend_time;                       \\\nprintf(\"===%s:%s()  invoked_times=%u  expend_time=%.4fs  total_expend_time=%.4fs\\n\", \\\n       __FILE__, __FUNCTION__, ++CET_invoked_times, CET_expend_time, CET_total_expend_time);\n\n#endif  // _CALCULATE_EXE_TIME_\n</code></pre></li>\n</ol>\n\n<p>2.Put the macros to all the functions</p>\n\n<pre><code>static void john_register_one(struct fmt_main *format)\n{\n    CALCULATE_EXE_TIME\n\n    // Do something   \n\n    CET_BEFORE_RETURN\n}\n\nmany other functions\nmany other functions\n\nstatic char *john_loaded_counts(void)\n{\n    CALCULATE_EXE_TIME\n\n    static char s_loaded_counts[80];\n\n    if (database.password_count == 1) {\n        CET_BEFORE_RETURN return \"1 password hash\";\n    }\n\n    CET_BEFORE_RETURN return s_loaded_counts;\n}\n</code></pre>\n\n<ol start=\"3\">\n<li><p>Run</p>\n\n<pre><code>===wordlist.c:mgetl()  invoked_times=1893  expend_time=0.0000s  total_expend_time=0.0082s\n===cracker.c:crk_process_key()  invoked_times=1880  expend_time=0.0000s  total_expend_time=0.0097s\n===cracker.c:crk_process_event()  invoked_times=10  expend_time=0.0000s  total_expend_time=0.0011s\n===cracker.c:crk_password_loop()  invoked_times=235  expend_time=0.0000s  total_expend_time=208.5752s\n===cracker.c:crk_salt_loop()  invoked_times=235  expend_time=0.0000s  total_expend_time=208.6260s\n===cracker.c:crk_done()  invoked_times=1  expend_time=0.0000s  total_expend_time=0.0000s\n===wordlist.c:get_progress()  invoked_times=2  expend_time=0.0000s  total_expend_time=0.0000s\n===wordlist.c:save_state()  invoked_times=2  expend_time=0.0000s  total_expend_time=0.0000s\n===wordlist.c:do_wordlist_crack()  invoked_times=1  expend_time=208.9100s  total_expend_time=208.9100s\n===batch.c:do_wordlist_pass()  invoked_times=1  expend_time=208.9100s  total_expend_time=208.9100s\n===batch.c:do_batch_crack()  invoked_times=1  expend_time=208.9109s  total_expend_time=208.9109s\n===wordlist.c:get_progress()  invoked_times=3  expend_time=0.0000s  total_expend_time=0.0000s\n===cracker.c:crk_get_key2()  invoked_times=1  expend_time=0.0000s  total_expend_time=0.0000s\n</code></pre></li>\n</ol>\n\n<p><strong>HERE is my questions</strong>:</p>\n\n<p>I have to put the CALCULATE_EXE_TIME and CET_BEFORE_RETURN to <strong>all the functions manually</strong>! It's a huge work! <strong>Is there any way to do it automatically</strong>?</p>\n\n<p>I have thought put the CET_BEFORE_RETURN to the destructors so that it can be invoked after the function returns. But gcc does not support class destructor.</p>\n"}, {"tags": ["c", "assembly", "x86-64", "masm"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 7, "creation_date": 1427891398, "post_id": 29390886, "comment_id": 46958826, "body": "64 bit uses different <a href=\"https://msdn.microsoft.com/en-us/library/ms235286.aspx\" rel=\"nofollow noreferrer\">calling convention</a>."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1427906153, "post_id": 29390886, "comment_id": 46968622, "body": "Try writing a small sample program in C, then have the compiler produce assembly code so you can see the calling sequence. For Visual Studio, right click on the project name, then click on properties, C / C++, output files and set assembly output to on."}], "answers": [{"comments": [{"owner": {"reputation": 3558, "user_id": 389833, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fc01b03cab64a85b58f30b70190eafb8?s=128&d=identicon&r=PG", "display_name": "Bukes", "link": "https://stackoverflow.com/users/389833/bukes"}, "edited": false, "score": 3, "creation_date": 1427920472, "post_id": 29400102, "comment_id": 46976370, "body": "The other important bit here is that the caller <i>must</i> reserve enough space on the stack for each of the aforementioned registers - even if the function has fewer than 4 arguments."}], "tags": [], "owner": {"reputation": 1582, "user_id": 189297, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b98a34931025b9d4a04b33b38e7f8504?s=128&d=identicon&r=PG", "display_name": "Aaron Altman", "link": "https://stackoverflow.com/users/189297/aaron-altman"}, "is_accepted": false, "score": 2, "last_activity_date": 1607967513, "last_edit_date": 1607967513, "creation_date": 1427920009, "answer_id": 29400102, "question_id": 29390886, "link": "https://stackoverflow.com/questions/29390886/calling-c-function-from-masm-64/29400102#29400102", "title": "Calling C function from masm 64", "body": "<p>The <a href=\"https://docs.microsoft.com/en-us/cpp/build/x64-calling-convention?view=msvc-160\" rel=\"nofollow noreferrer\">Windows x64 calling convention</a> requires you to pass arguments starting in RCX, followed by RDX, R8 and R9 if needed.  In this case you probably just need RCX to store the address of format, and RDX the integer value you want to print.</p>\n"}], "owner": {"reputation": 39, "user_id": 4612498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d8c22964239fb0721cb5507d06790ee?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Jachna", "link": "https://stackoverflow.com/users/4612498/mateusz-jachna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2409, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1607967513, "creation_date": 1427891325, "last_edit_date": 1427891445, "question_id": 29390886, "link": "https://stackoverflow.com/questions/29390886/calling-c-function-from-masm-64", "title": "Calling C function from masm 64", "body": "<p>I have a problem with my assembly code (64 bit masm in Visual 2013 on win8 64). When I'm calling C function (printf), it throwing exception from ntdll.dll. What I'm doing wrong? How I can read and write data from console in 64 bit masm? Where I can find good tutorial for masm 64 bit? </p>\n\n<pre><code>extrn printf : proc\n.data\nformat byte \"Arg1: %d\", 10, 0\n\n.code\nprintData proc\n\nmov rbx, 100\npush rbx\n\nlea rax, format; format address\npush rax\n\ncall printf; throw unhandled exception ntdll.dll - Access violation reading location 0xFFFFFFFFFFFFFFFF.\nadd rsp, 16 ;2* 64bit value\n\nret\nprintData endp\nend\n</code></pre>\n\n<p>P.S I'm calling printData from C++ code.</p>\n"}, {"tags": ["c", "undefined-behavior"], "comments": [{"owner": {"reputation": 1315, "user_id": 2294676, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e4a9d6886d6cb3767d25f302ae880085?s=128&d=identicon&r=PG", "display_name": "Lydia Ralph", "link": "https://stackoverflow.com/users/2294676/lydia-ralph"}, "edited": false, "score": 1, "creation_date": 1427889422, "post_id": 29390143, "comment_id": 46957527, "body": "Duplicate <a href=\"https://stackoverflow.com/questions/381542/with-c-arrays-why-is-it-the-case-that-a5-5a\" title=\"with c arrays why is it the case that a5 5a\">stackoverflow.com/questions/381542/&hellip;</a>"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 1315, "user_id": 2294676, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e4a9d6886d6cb3767d25f302ae880085?s=128&d=identicon&r=PG", "display_name": "Lydia Ralph", "link": "https://stackoverflow.com/users/2294676/lydia-ralph"}, "edited": false, "score": 0, "creation_date": 1427889587, "post_id": 29390143, "comment_id": 46957621, "body": "Why -1?.... explain please..."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 1315, "user_id": 2294676, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e4a9d6886d6cb3767d25f302ae880085?s=128&d=identicon&r=PG", "display_name": "Lydia Ralph", "link": "https://stackoverflow.com/users/2294676/lydia-ralph"}, "edited": false, "score": 0, "creation_date": 1427889712, "post_id": 29390143, "comment_id": 46957692, "body": "@alex: yeah, but thats because it is related to that post, as My claim is, the claim of that post is wrong and I&#39;m asking for support or guidance."}, {"owner": {"reputation": 56265, "user_id": 283676, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/82d3ad1de1b2b52e33ae85a9e396cdeb?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/283676/andrey"}, "edited": false, "score": 2, "creation_date": 1427889753, "post_id": 29390143, "comment_id": 46957711, "body": "I honestly got lost in the question and had to reread it. Please consider making it more concise. Are you asking whether 5[a] is UB?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 56265, "user_id": 283676, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/82d3ad1de1b2b52e33ae85a9e396cdeb?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/283676/andrey"}, "edited": false, "score": 0, "creation_date": 1427889791, "post_id": 29390143, "comment_id": 46957742, "body": "@Andrey: In short term: yes."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 2, "creation_date": 1427889819, "post_id": 29390143, "comment_id": 46957761, "body": "This shows some effort at a quick glance. I suspect you&#39;ll need to edit the title to make it really clear that it&#39;s not a dup though to avoid getting buried. :P"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1427889837, "post_id": 29390143, "comment_id": 46957775, "body": "<code>a[5] == *(a + 5) == *(5 + a)  == 5[a]</code>.  See 6,5,2.1/2."}, {"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 1, "creation_date": 1427890012, "post_id": 29390143, "comment_id": 46957886, "body": "The standard explicitly says <code>The definition of the subscript operator [] is that E1[E2] is identical to (*((E1)+(E2))).</code>"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1427890034, "post_id": 29390143, "comment_id": 46957904, "body": "@JohnBode: I&#39;m not quite sure about that. Because <code>a[1][8]</code> == <code>*(a + (1 * 8))</code> what should be equal to <code>a[2][4]</code> == <code>*(a + (2 * 4))</code>, but my cite quotes it sin&#39;t."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 3, "creation_date": 1427890218, "post_id": 29390143, "comment_id": 46958015, "body": "<code>a[1][8]</code> is not equivalent to <code>*(a + (1 * 8))</code> as you claim. It is equivalent to <code>*(*(a + 1) + 8)</code>."}, {"owner": {"reputation": 56265, "user_id": 283676, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/82d3ad1de1b2b52e33ae85a9e396cdeb?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/283676/andrey"}, "edited": false, "score": 0, "creation_date": 1427890257, "post_id": 29390143, "comment_id": 46958037, "body": "@Zaibis your quote is double index, which is not exactly same as single index. shortly X[i][j] = X + i*(size of row) + j"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1427890806, "post_id": 29390143, "comment_id": 46958425, "body": "I did a quick edit to the title to make it look less dup&#39;ey."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1427892423, "post_id": 29390143, "comment_id": 46959479, "body": "@interjay: would it really be <code>*(*(a + 1) + 8)</code> or had it to be something like <code>*(*(a[] + 1) + 8)</code> by syntax?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1427894162, "post_id": 29390143, "comment_id": 46960649, "body": "@Zaibis <code>a[]</code> is not valid syntax. I don&#39;t know why you think it&#39;s correct."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1427894371, "post_id": 29390143, "comment_id": 46960782, "body": "@interjay: I dont do so, I said &quot;something like&quot; because I know it isn&#39;t that way valid. But regarding to array decay, it felt wrong for me to not append anything to <code>a</code> in yur snippet"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 2875858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLKDu.png?s=128&g=1", "display_name": "L0aD1nG", "link": "https://stackoverflow.com/users/2875858/l0ad1ng"}, "is_accepted": false, "score": -2, "last_activity_date": 1427890469, "creation_date": 1427890469, "answer_id": 29390542, "question_id": 29390143, "link": "https://stackoverflow.com/questions/29390143/why-5a-with-c-arrays-isnt-out-of-range/29390542#29390542", "title": "Why 5[a] with C arrays isn&#39;t out of range?", "body": "<p>I think that it is true. Probably it is okay because it makes the same calculation like:</p>\n\n<pre><code> *(arr + 4) // For the arr[4]\n *(4 + arr) // For the 4[arr]\n</code></pre>\n\n<p>Which concludes on the same result.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int arr[5] = {1,2,3,4,5};\n    printf(\"\\n%d %d\\n\", arr[4], 4[arr]);\n    printf(\"\\n%d %d\\n\", arr[5], 5[arr]);\n    printf(\"\\n%d %d\\n\\n\", arr[6], 6[arr]);\n\n    return 0;\n}\n</code></pre>\n\n<p>In each <strong>printf</strong> the behaviour will be as expected.</p>\n"}, {"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427891958, "post_id": 29390610, "comment_id": 46959180, "body": "Ah, that revealed the black magic behind the scene for me. Didn&#39;t know thats the way it gets unnested."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427892431, "post_id": 29390610, "comment_id": 46959482, "body": "@Zaibis: Yeah, multidimensional arrays in C are just arrays of arrays, so it works consistently that way."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427892576, "post_id": 29390610, "comment_id": 46959563, "body": "&quot;you can derive it independently (as above).&quot; You are the only one who respected this. thats why I will accept your answer. But I will wait a bit, that it gets more attention, as this would be well to know for others too, I would suggest."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427892750, "post_id": 29390610, "comment_id": 46959676, "body": "@Zaibis: Provided it doesn&#39;t get deleted :/. Maybe you could mention &quot;appendix&quot; or &quot;note&quot; or the like in the title too."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427892896, "post_id": 29390610, "comment_id": 46959775, "body": "I have trouble in phrasing complex sentences. I don&#39;t know how to improve it that it gets even more viewable that I&#39;m asking what I ask. :/"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427893294, "post_id": 29390610, "comment_id": 46960063, "body": "I guess the question I actually answered was how the note in the appendix is compatible with <code>a[b] == *(a + b)</code>. For the <code>5[a]</code> part, you do get an object if you do that, so the subscript <code>a</code> isn&#39;t out of range. Can&#39;t really edit questions to turn them into a different question though. :P"}], "tags": [], "owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "is_accepted": true, "score": 2, "last_activity_date": 1427892366, "last_edit_date": 1427892366, "creation_date": 1427890621, "answer_id": 29390610, "question_id": 29390143, "link": "https://stackoverflow.com/questions/29390143/why-5a-with-c-arrays-isnt-out-of-range/29390610#29390610", "title": "Why 5[a] with C arrays isn&#39;t out of range?", "body": "<p>To see why the note in Appendix J.2 is compatible with <code>a[b]</code> being the same as <code>*(a + b)</code>, consider how an expression like <code>a[1][7]</code> is interpreted (assuming the declaration <code>int a[4][5]</code>, like in the appendix):</p>\n\n<p><code>a[1][7]</code> is the same as <code>*(a[1] + 7)</code>. Each element of the array <code>a</code> is a five-element array, so that <code>a[1]</code> evaluates to a pointer to the first element of a five-element array. If you add 7 to such a pointer, then the resulting pointer will point outside the five-element array, meaning you are not allowed to dereference it (standards-wise -- it might work in practice). But that's exactly what the above expression does.</p>\n\n<p>The note in Appendix J.2 has nothing to do with <code>a[5]</code> vs. <code>5[a]</code> by the way. If the array has at least six elements, then it would be reasonable to call the element \"apparently accessible\" in both of those expressions. They're only trying to clarify that you're not allowed to access a multidimensional array with overflow in <em>any</em> of the indices, even when it looks like it shouldn't overflow the boundaries of the multidimensional array. It's just a note -- you can derive it independently (as above).</p>\n"}, {"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427892144, "post_id": 29390913, "comment_id": 46959302, "body": "Not to 100% addressing my question."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1427892757, "post_id": 29390913, "comment_id": 46959681, "body": "@Zaibis your question seems unclear. Addressing the sentences with question mark: &quot;I&#39;m asking my self, is this true?&quot; - yes.  &quot;So, am I right?&quot; - no. &quot;Or have I forgotten to consider something important?&quot; - yes, Annex J is non-normative. &quot;Why <code>5[a]</code> with C arrays isn&#39;t out of range?&quot; - it depends on what <code>a</code> is. For example If <code>a</code> is a 4-element array then it certainly is out of range."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427893218, "post_id": 29390913, "comment_id": 46959998, "body": "&quot;I&#39;m asking my self&quot; I&#39;m not asking the audience (so introductive related to what made my feel to have to post this). &quot;So, am I right? Or have I forgotten to consider something important?&quot; Is a single quote which expects the one or the other hand. (you splitted it in 2 quotes). &quot;it depends on what <code>a</code> is.&quot; -&gt; Thats why I gave a strict declaration for <code>a</code>. So after all there is just ONE question. where &quot;You forgot Annex J is non-normative.&quot; Isn&#39;t 100% related to my problem, because as @Ulfalizer sated correct: the Annex J cite isn&#39;t incompatible with my claim."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427893412, "post_id": 29390913, "comment_id": 46960153, "body": "@Zaibis given that definition of <code>a</code>, then <code>5[a]</code> is correct .   What is &quot;your claim&quot; exactly? You say &quot;But I would claim... <code>a[5]</code> is ok&quot;. If your claim is that <code>a[5]</code> is OK then nobody is disagreeing.  Is this whole thread an april fool?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427893731, "post_id": 29390913, "comment_id": 46960366, "body": "My claim is that a[5] is true while in the given case 5[a] isn&#39;t. My claim is wrong. Thats related to my post and correct by your answer (that&#39;s why I didn&#39;t downvote it) But the reason you gave (The last sentence of your answer) doesn&#39;t explain WHY it is identical. (As I said in my OP I also knew that section 6.3.2.3 but probably just didn&#39;t get it right. so just pointing me to that section doesn&#39;t fit my needs by 100%)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427893936, "post_id": 29390913, "comment_id": 46960472, "body": "@Zaibis the answers on the <a href=\"http://stackoverflow.com/q/381542/2003898\">other question you linked</a> explain why <code>a[5]</code> and <code>5[a]</code> are identical; and it is elementary logic to say that if two things are identical and one is true, then the other one is also true."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427894198, "post_id": 29390913, "comment_id": 46960673, "body": "Anyway that didn&#39;t address (both, you and the answers there) WHY it is identical and anyway not incompatible with J.2 (As accepted answer states it isn&#39;t incompatible with J.2) and you say it IS incompatible. And that is just my point."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427894350, "post_id": 29390913, "comment_id": 46960769, "body": "@Zaibis The other question does address exactly why it is identical.  The J.2 is irrelevant because it is non-normative. Judging by the voting, I don&#39;t think anybody can figure out what your point is."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427894578, "post_id": 29390913, "comment_id": 46960900, "body": "I think so too, thats why I try to clarify, but obviously, I&#39;m not able to."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427895206, "post_id": 29390913, "comment_id": 46961264, "body": "Well, I give it a last try: Appendix J.2 isn&#39;t normative. AFAIK that means it only &quot;triggers&quot; if there is nothing else saying something different. According to my cite (which was irrelevant, but I didn&#39;t knew at that point, why it isn&#39;t rellevant) I wanted to get to know, why <code>5[a]</code> isn&#39;t out of range in view of the appendix part I cited. And my trouble was: Just mentioning it is irrelevant doesn&#39;t solve my trouble in understanding why it isn&#39;t. And thats why finally @Ulfalizer hitted my point, as he explained why the way it evaluates isn&#39;t in relation to my cite of J.2. I hope its now clear."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427896263, "post_id": 29390913, "comment_id": 46961936, "body": "@Zaibis: &quot;Not normative&quot; means that those parts contain no requirements at all. Think of it as clarifications and &quot;for your information&quot;-type stuff."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1427891396, "creation_date": 1427891396, "answer_id": 29390913, "question_id": 29390143, "link": "https://stackoverflow.com/questions/29390143/why-5a-with-c-arrays-isnt-out-of-range/29390913#29390913", "title": "Why 5[a] with C arrays isn&#39;t out of range?", "body": "<p><code>5</code> is not an array, so <code>5[a]</code> is not an array subscript.</p>\n\n<p>Either way, Annex J is <em>informative</em> which means that it is meant for extra helpfulness and not as a part of the specification.  So we cannot make any claims about undefined behaviour solely based on what J.2 says.</p>\n\n<p>The normative section about pointer arithmetic is 6.3.2.3 which includes the proof that <code>5[a]</code> and <code>a[5]</code> are identical.</p>\n"}], "owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 29390610, "answer_count": 3, "score": -6, "last_activity_date": 1427892366, "creation_date": 1427889362, "last_edit_date": 1495541249, "question_id": 29390143, "link": "https://stackoverflow.com/questions/29390143/why-5a-with-c-arrays-isnt-out-of-range", "title": "Why 5[a] with C arrays isn&#39;t out of range?", "body": "<p>Acording to the Post: <a href=\"https://stackoverflow.com/q/381542/2003898\">With arrays, why is it the case that a[5] == 5[a]?</a></p>\n\n<p>Where is claimed, that <code>a[5]</code> is equal to <code>5[a]</code>.</p>\n\n<p>I'm asking my self, is this true?</p>\n\n<p>While I aggree that E1[E2] is identical to (*((E1)+(E2)))</p>\n\n<p>But I would claim: Given a declaration of</p>\n\n<pre><code>int a[sizeI];\n</code></pre>\n\n<p>where <code>if (sizeI &gt; 5)</code> has to be <code>true</code></p>\n\n<p>I would aggree that <code>a[5]</code> is ok.</p>\n\n<p>But related to the cite from ISO/IEC:9899</p>\n\n<p>Apendix J.2 Undefined behavior:</p>\n\n<blockquote>\n  <p>\u2014 An array subscript is out of range, <strong>even if an object is apparently accessible</strong> with the\n  given subscript (as in the lvalue expression <code>a[1][7]</code> given the declaration int\n  <code>a[4][5]</code>) (6.5.6).</p>\n</blockquote>\n\n<p>Is (if I get it correct from the document) <code>5[a]</code> \"apparently accessible\" but the \"array subscript is out of range\"\nSo I would overall disaggree to the OP I linked,\nas that <code>a[5]</code> is in the given case well defined and <code>5[a]</code> is undefined behaviour.</p>\n\n<p>So, am I right? Or have I forgotten to consider something important?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>my claim doesn't imply that </p>\n\n<blockquote>\n  <p>E1[E2] is identical to (*((E1)+(E2)))</p>\n</blockquote>\n\n<p>would be incorrect.</p>\n\n<p>and also 6.5.2.1 Array subscripting point 2</p>\n\n<p>just says that they are arithmeticaly identical.\nBut nothing is said like: <code>(*((E1)+(E2)))</code> can't achive UB.</p>\n\n<p>So while I know this section, I can't find there anything thatdestroys my claim</p>\n\n<p>Also Note:</p>\n\n<p>As you allready should see in my first sentence,\nI'm asking a different question to the related to the \"problem\" stated by</p>\n\n<p><a href=\"https://stackoverflow.com/q/381542/2003898\">With arrays, why is it the case that a[5] == 5[a]?</a></p>\n\n<p>So please stop marking it as duplicate of that one.</p>\n"}, {"tags": ["c", "pointers", "restrict", "restrict-qualifier"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 3, "creation_date": 1427888895, "post_id": 29389929, "comment_id": 46957215, "body": "I think <a href=\"http://stackoverflow.com/q/18059205/1708801\">Can you use restrict-ed pointers to access the same object in some cases?</a> answers your question"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 8, "creation_date": 1427889158, "post_id": 29389929, "comment_id": 46957380, "body": "Isn&#39;t this a C question? C++ doesn&#39;t have <code>restrict</code>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1427890133, "post_id": 29389929, "comment_id": 46957961, "body": "I do not know C, but under my reading of the standard, the above is UB.  The compiler is free to emit pathological code that assumes <code>a[7]</code> is never changed, even after <code>b[7]</code> is written to.  Is there a reason to emit that code?  No, but still valid output."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1427890312, "post_id": 29389929, "comment_id": 46958073, "body": "I took the liberty of editing the tags to C, since <code>restrict</code> is not a C++ keyword. OP, if you disagree, re-tag it back, but please also edit in an explanation how you&#39;re using a C functionality in C++."}, {"owner": {"reputation": 258, "user_id": 4368442, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4bc70e71315f350a4db30dd2708169eb?s=128&d=identicon&r=PG&f=1", "display_name": "mrzacek mrzacek", "link": "https://stackoverflow.com/users/4368442/mrzacek-mrzacek"}, "edited": false, "score": 0, "creation_date": 1427890515, "post_id": 29389929, "comment_id": 46958221, "body": "restrict is actualy Intel C++ specific keyword, MSVC has _restrict instead (but I think it accepts restrict too)."}, {"owner": {"reputation": 305, "user_id": 4542466, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3eP8241M7Jw/AAAAAAAAAAI/AAAAAAAAAV8/8KC-WYwTjqA/photo.jpg?sz=128", "display_name": "Leonard Michlmayr", "link": "https://stackoverflow.com/users/4542466/leonard-michlmayr"}, "edited": false, "score": 0, "creation_date": 1427902036, "post_id": 29389929, "comment_id": 46966044, "body": "<code>restrict</code> is a type qualifier in C11. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">Draft n1570</a>"}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1433463734, "last_edit_date": 1433463734, "creation_date": 1427892669, "answer_id": 29391318, "question_id": 29389929, "link": "https://stackoverflow.com/questions/29389929/is-c-pointer-aliasing-a-threat-if-the-pointers-are-exactly-the-same/29391318#29391318", "title": "Is C++ pointer aliasing a threat if the pointers are exactly the same?", "body": "<p>In C, your code causes undefined behaviour by violating the <code>restrict</code> definition because it writes to one object through <code>dst</code> but reads the same object through <code>src</code>.  </p>\n\n<p>It doesn't matter whether or not there is an offset between <code>dst</code> and <code>src</code>; the condition is that there exists a <code>float</code> object which is written through one pointer and read through the other.</p>\n"}, {"tags": [], "owner": {"reputation": 2141, "user_id": 3710044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd665eb6cb69cfcdbf5537974a78a17?s=128&d=identicon&r=PG&f=1", "display_name": "user3710044", "link": "https://stackoverflow.com/users/3710044/user3710044"}, "is_accepted": false, "score": 0, "last_activity_date": 1427895649, "creation_date": 1427895649, "answer_id": 29392356, "question_id": 29389929, "link": "https://stackoverflow.com/questions/29389929/is-c-pointer-aliasing-a-threat-if-the-pointers-are-exactly-the-same/29392356#29392356", "title": "Is C++ pointer aliasing a threat if the pointers are exactly the same?", "body": "<p>Restrict is a keyword to allow some optimisations that are only valid if the two pointers don't interfere with each other.</p>\n\n<p>For your very simple case it's unlikely that there are any optimisations available that will fail when the two pointers are identical so when you test nothing bad will happen.</p>\n\n<p>But in the more general case the <code>restrict</code> keyword means you are asserting that the two pointers are different and the data structures that they point to are distinct. The compiler is free to use this assertion to allow any optimisation it wants, especially ones that will make your program fail catastrophically if your assertion is not true.</p>\n\n<p>This failure is called 'undefined behaviour' because the C standard does not define what happens when the assertion is wrong. As this is an optimisation assertion completely unpredictable behaviour, commonly referred to as \"nasal demons\", is reasonable behaviour for the C compiler to define.</p>\n"}, {"tags": [], "owner": {"reputation": 258, "user_id": 4368442, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4bc70e71315f350a4db30dd2708169eb?s=128&d=identicon&r=PG&f=1", "display_name": "mrzacek mrzacek", "link": "https://stackoverflow.com/users/4368442/mrzacek-mrzacek"}, "is_accepted": false, "score": 0, "last_activity_date": 1428010493, "creation_date": 1428010493, "answer_id": 29422871, "question_id": 29389929, "link": "https://stackoverflow.com/questions/29389929/is-c-pointer-aliasing-a-threat-if-the-pointers-are-exactly-the-same/29422871#29422871", "title": "Is C++ pointer aliasing a threat if the pointers are exactly the same?", "body": "<p>Thanks for all answers folks. So:\n- By standard C++ definition this is really incorrect.\n- However I got reply directly from Intel that this is ok.</p>\n\n<p>My original question indeed was not about if it \"follows the rules\", but if there is a possibility that it could go wrong. The src/dst arrays are mapped 1:1, so either the arrays are completely different, or they are exactly the same, hence each item is either dependent on some completely unrelated item, or itself. Therefore if the item is rewritten, its final value has been computed stored and will never be needed again during the cycle.</p>\n\n<p>Anyways I did some additional processing:</p>\n\n<pre><code>void AddSqr(float* restrict dst, float* restrict src, int cnt)\n{\n    if (dst == src)\n        for (int i=0; i&lt;cnt; i++) dst[i] = dst[i] * dst[i];\n    else\n        for (int i=0; i&lt;cnt; i++) dst[i] = src[i] * src[i];\n};\n</code></pre>\n\n<p>This should fix the potential problem and even provides some additional optimization possibilities, as in the case the pointers are the same, the compiler can use just one register (or don't use offset register) to target the arrays.</p>\n"}], "owner": {"reputation": 258, "user_id": 4368442, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4bc70e71315f350a4db30dd2708169eb?s=128&d=identicon&r=PG&f=1", "display_name": "mrzacek mrzacek", "link": "https://stackoverflow.com/users/4368442/mrzacek-mrzacek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1433463734, "creation_date": 1427888708, "last_edit_date": 1430261197, "question_id": 29389929, "link": "https://stackoverflow.com/questions/29389929/is-c-pointer-aliasing-a-threat-if-the-pointers-are-exactly-the-same", "title": "Is C++ pointer aliasing a threat if the pointers are exactly the same?", "body": "<p>Consider this function intended for vectorization:</p>\n\n<pre><code>void AddSqr(float* restrict dst, float* restrict src, int cnt)\n{\n    for (int i=0; i&lt;cnt; i++) dst[i] = src[i] * src[i];\n};\n</code></pre>\n\n<p>This would work if the src &amp; dst are not aliased of course. But what if src == dst? Extreme cases such as src == dst+1 are not allowed of course. But if the pointers are the same, there shouldn't be a problem, or am I missing something?</p>\n\n<p>Edit: restrict is Intel C++ compiler keyword, MSVC has __restrict.</p>\n\n<p>My point with this question is that I don't see a way how any kind of vectorization could go wrong: Since every dst value is dependent on the single src value at either completely different (without any aliasing) or EXACTLY the same address, when dst is changed, the src value will never be needed anymore, because the fact that it has been written means that the output has been calculated. The only case would be if the compiler used the dst itself as temporary buffer, which I don't think is even correct.</p>\n"}, {"tags": ["c++", "c", "linux", "dhcp", "ioctl"], "comments": [{"owner": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "edited": false, "score": 0, "creation_date": 1427888492, "post_id": 29389621, "comment_id": 46956952, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/16085222/how-to-find-out-if-the-eth0-mode-is-static-or-dhcp\">How to find out if the eth0 mode is static or dhcp?</a>"}, {"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 0, "creation_date": 1427888909, "post_id": 29389621, "comment_id": 46957226, "body": "The interface doesn&#39;t have a mode, there&#39;s no dhcp built into the kernel."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1427889311, "post_id": 29389621, "comment_id": 46957465, "body": "I suppose, if you have the right permissions, you could trawl through <code>&#47;var&#47;log&#47;messages</code>...?"}, {"owner": {"reputation": 253, "user_id": 3332593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/90cddbbb899e7850ee4e0824bf818be1?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Bhushan", "link": "https://stackoverflow.com/users/3332593/ravi-bhushan"}, "edited": false, "score": 0, "creation_date": 1427890551, "post_id": 29389621, "comment_id": 46958237, "body": "Hello @all. i just wanted to know about client whether it has static IP or it is dhcp client??"}, {"owner": {"reputation": 253, "user_id": 3332593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/90cddbbb899e7850ee4e0824bf818be1?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Bhushan", "link": "https://stackoverflow.com/users/3332593/ravi-bhushan"}, "reply_to_user": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "edited": false, "score": 0, "creation_date": 1427890976, "post_id": 29389621, "comment_id": 46958533, "body": "@YasirMajeed: it is different question."}, {"owner": {"reputation": 253, "user_id": 3332593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/90cddbbb899e7850ee4e0824bf818be1?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Bhushan", "link": "https://stackoverflow.com/users/3332593/ravi-bhushan"}, "reply_to_user": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "edited": false, "score": 0, "creation_date": 1427891032, "post_id": 29389621, "comment_id": 46958568, "body": "@teppic: i am asking about client. whether it has static IP or it is DHCP client?"}], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 3332593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/90cddbbb899e7850ee4e0824bf818be1?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Bhushan", "link": "https://stackoverflow.com/users/3332593/ravi-bhushan"}, "edited": false, "score": 0, "creation_date": 1427888961, "post_id": 29389906, "comment_id": 46957262, "body": "i just want to retrieve whether client has assigned static IP or it is dhcp client??"}, {"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "reply_to_user": {"reputation": 253, "user_id": 3332593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/90cddbbb899e7850ee4e0824bf818be1?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Bhushan", "link": "https://stackoverflow.com/users/3332593/ravi-bhushan"}, "edited": false, "score": 3, "creation_date": 1427889051, "post_id": 29389906, "comment_id": 46957316, "body": "I know, but from the interface aspect, there is no difference. You need to dive into the network manager&#39;s configuration, or obtain a status from it, or something like this. It is hard to give an answer to this question in a general context. It&#39;s not just operating system, but even distribution dependent."}], "tags": [], "owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "is_accepted": true, "score": 2, "last_activity_date": 1430345151, "last_edit_date": 1430345151, "creation_date": 1427888650, "answer_id": 29389906, "question_id": 29389621, "link": "https://stackoverflow.com/questions/29389621/in-general-how-to-find-out-whether-client-has-assigned-static-ip-or-it-is-dhcp-c/29389906#29389906", "title": "In general How to find out whether client has assigned static Ip or it is dhcp client", "body": "<p>The interface itself has nothing to do with dhcp. It can be configured to have a particular IP address, gateway, etc. but that's all. This configuration, however, can be done with a smart little program called dhcp client :) So what you need is to find out who (i mean, which program) has configured your interface.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>For example, under the majority of linux distributions you may do a</p>\n\n<pre><code>ps aux | grep 'dhcpcd .* eth0'\n</code></pre>\n\n<p>If it gives a result like </p>\n\n<pre><code>/sbin/dhcpcd --netconfig -L -E -HHH -c /etc/sysconfig/network/scripts/dhcpcd-hook -t 0 -h somehostname eth0\n</code></pre>\n\n<p>you can say that eth0 is configured with dhcp</p>\n"}, {"comments": [{"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "edited": false, "score": 1, "creation_date": 1427889621, "post_id": 29390212, "comment_id": 46957640, "body": "1) On which distributions does this file exist?"}, {"owner": {"reputation": 17760, "user_id": 1340631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=128&d=identicon&r=PG", "display_name": "scai", "link": "https://stackoverflow.com/users/1340631/scai"}, "edited": false, "score": 1, "creation_date": 1427889637, "post_id": 29390212, "comment_id": 46957649, "body": "Usually you don&#39;t need any special permission for reading <i>/etc/network/interfaces</i>. Additionally this will only tell you the configuration used during system start when not using NetworkManager. Also, a DHCP client could have been started afterwards."}, {"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "edited": false, "score": 1, "creation_date": 1427889686, "post_id": 29390212, "comment_id": 46957681, "body": "2) Why to use the <code>system()</code> command and <code>cat</code>?? Files can be perfectly read from C, tools are provided in the standard library to do so :)"}, {"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "reply_to_user": {"reputation": 17760, "user_id": 1340631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=128&d=identicon&r=PG", "display_name": "scai", "link": "https://stackoverflow.com/users/1340631/scai"}, "edited": false, "score": 0, "creation_date": 1427889791, "post_id": 29390212, "comment_id": 46957741, "body": "3) @scai is right :)"}], "tags": [], "owner": {"reputation": 1, "user_id": 4737873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dcef770993667607e9778b1d49f4441?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Raghuvanshi", "link": "https://stackoverflow.com/users/4737873/nitin-raghuvanshi"}, "is_accepted": false, "score": -1, "last_activity_date": 1427889525, "creation_date": 1427889525, "answer_id": 29390212, "question_id": 29389621, "link": "https://stackoverflow.com/questions/29389621/in-general-how-to-find-out-whether-client-has-assigned-static-ip-or-it-is-dhcp-c/29390212#29390212", "title": "In general How to find out whether client has assigned static Ip or it is dhcp client", "body": "<p>use system command in c </p>\n\n<p>cat /etc/network/interfaces</p>\n\n<p>this will get you network information txt on screen</p>\n\n<p>but first you need to set permission and for permission you user or group on linux system </p>\n"}], "owner": {"reputation": 253, "user_id": 3332593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/90cddbbb899e7850ee4e0824bf818be1?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Bhushan", "link": "https://stackoverflow.com/users/3332593/ravi-bhushan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 961, "favorite_count": 0, "closed_date": 1430352165, "accepted_answer_id": 29389906, "answer_count": 2, "score": -1, "last_activity_date": 1430345151, "creation_date": 1427887880, "last_edit_date": 1428069838, "question_id": 29389621, "link": "https://stackoverflow.com/questions/29389621/in-general-how-to-find-out-whether-client-has-assigned-static-ip-or-it-is-dhcp-c", "closed_reason": "Not suitable for this site", "title": "In general How to find out whether client has assigned static Ip or it is dhcp client", "body": "<p>I have retrieved IP, subnet and broadcast using ioctl() system call.\ncan anyone help me to find out whether client is static or dhcp??\nI am asking about in general and using system call. it is all about client instead of interface.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1427887755, "post_id": 29389494, "comment_id": 46956500, "body": "<code>argv</code> contains <i>command line arguments</i>, not STDIN."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1427887900, "post_id": 29389494, "comment_id": 46956605, "body": "<code>$hoho | xargs lala</code>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1427887973, "last_edit_date": 1427887973, "creation_date": 1427887594, "answer_id": 29389530, "question_id": 29389494, "link": "https://stackoverflow.com/questions/29389494/why-segmentation-fault-occurs-in-the-following-c-code/29389530#29389530", "title": "Why &#39;segmentation fault&#39; occurs in the following C code", "body": "<p>In your <code>lala.c</code> (I hope the actual files are not named like this),</p>\n\n<pre><code>printf(\"%s\\n\", argv[1]);\n</code></pre>\n\n<p>you're using <code>argv[1]</code> without checking it's validity. It can very well be <code>NULL</code> or uninitalized or non-existant. This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>So, before using <code>argv[n]</code>, you have to always put a check like</p>\n\n<pre><code>if (argc &lt; (n+1))\n  //abort\nelse\n  //use upto argv[n]\n</code></pre>\n\n<p>Other than that, as pointed out my Mr. <strong>@Iharob Al Asimi</strong>,  <code>char* argv</code> should be <code>char* argv[]</code> or <code>char ** argv</code>. (I believe that's more of a typo in your code, though).</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1427887776, "last_edit_date": 1495540247, "creation_date": 1427887776, "answer_id": 29389590, "question_id": 29389494, "link": "https://stackoverflow.com/questions/29389494/why-segmentation-fault-occurs-in-the-following-c-code/29389590#29389590", "title": "Why &#39;segmentation fault&#39; occurs in the following C code", "body": "<ol>\n<li><p>Your <code>main()</code> has the wrong signature. It's not</p>\n\n<pre><code>int main(int argc, char* argv)\n</code></pre>\n\n<p>it's</p>\n\n<pre><code>int main(int argc, char **argv)\n</code></pre>\n\n<p>or equivalently</p>\n\n<pre><code>int main(int argc, char *argv[])\n</code></pre></li>\n<li><p>You are trying to print a <code>char</code> with the <code>\"%s\"</code> specifier, the <code>printf()</code> function tries to read a string and interprets the <code>char</code> value as an address because it's expecting a <code>char</code> pointer, this leads to undefined behavior<sup>1</sup> and hence to the problem.</p></li>\n</ol>\n\n<hr>\n\n<p><sup>1</sup><sub>Please read the link posted by @<a href=\"https://stackoverflow.com/users/2173917/sourav-ghosh\">SouravGhosh</a> as well as his answer which is also good advice.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "is_accepted": false, "score": 1, "last_activity_date": 1427888740, "creation_date": 1427888740, "answer_id": 29389938, "question_id": 29389494, "link": "https://stackoverflow.com/questions/29389494/why-segmentation-fault-occurs-in-the-following-c-code/29389938#29389938", "title": "Why &#39;segmentation fault&#39; occurs in the following C code", "body": "<p>In your code, change the line </p>\n\n<pre><code>int main(int argc, char* argv){\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int main(int argc, char *argv[]){\n</code></pre>\n\n<p>This will be valid if you want multiple arguements. Secondly check for the argument count before printing it. So replace the following line</p>\n\n<pre><code>printf(\"%s\\n\", argv[1]);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>if(argc &gt; 1)\n  printf(\"%s\\n\", argv[1]);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4737919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjLhL.jpg?s=128&g=1", "display_name": "mskwon", "link": "https://stackoverflow.com/users/4737919/mskwon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1427888740, "creation_date": 1427887479, "last_edit_date": 1427887664, "question_id": 29389494, "link": "https://stackoverflow.com/questions/29389494/why-segmentation-fault-occurs-in-the-following-c-code", "title": "Why &#39;segmentation fault&#39; occurs in the following C code", "body": "<pre><code>$hoho\n\na\n\nb\n\nabcd\n\n$hoho | lala\n\nsegmentation fault\n</code></pre>\n\n<p>lala.c \n--></p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(int argc, char* argv){\n\nprintf(\"%s\\n\", argv[1]);\n\n...\n}\n</code></pre>\n\n<p>then, how can I use the std_input a, b and abcd</p>\n"}, {"tags": ["c", "ruby", "ffi"], "answers": [{"tags": [], "owner": {"reputation": 679, "user_id": 3624381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f32f44e789d6de3a61c8385f0476b36b?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3624381/sandy"}, "is_accepted": false, "score": 9, "last_activity_date": 1437522151, "creation_date": 1437522151, "answer_id": 31551509, "question_id": 29389334, "link": "https://stackoverflow.com/questions/29389334/how-do-i-handle-ruby-arrays-in-ruby-ffi-gem/31551509#31551509", "title": "How do I handle ruby arrays in ruby ffi gem?", "body": "<p>Let's say that this is the library you wish to use in your ruby script, call it <code>my_c_lib.c</code>:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\ndouble *my_function(double array[], int size)\n{\n  int i = 0;\n  double *new_array = malloc(sizeof(double) * size);\n  for (i = 0; i &lt; size; i++) {\n    new_array[i] = array[i] * 2;\n  }\n\n  return new_array;\n}\n</code></pre>\n\n<p>You can compile it like so:</p>\n\n<pre><code>$ gcc -Wall -c my_c_lib.c -o my_c_lib.o\n$ gcc -shared -o my_c_lib.so my_c_lib.o\n</code></pre>\n\n<p>Now, it's ready to use in in your ruby code (<code>my_c_lib.rb</code>):</p>\n\n<pre><code>require 'ffi'\n\nmodule MyModule\n  extend FFI::Library\n\n  # Assuming the library files are in the same directory as this script\n  ffi_lib \"./my_c_lib.so\"\n\n  attach_function :my_function, [:pointer, :int], :pointer\nend\n\narray = [4, 6, 4]\nsize = array.size\noffset = 0\n\n# Create the pointer to the array\npointer = FFI::MemoryPointer.new :double, size\n\n# Fill the memory location with your data\npointer.put_array_of_double offset, array\n\n# Call the function ... it returns an FFI::Pointer\nresult_pointer = MyModule.my_function(pointer, size)\n\n# Get the array and put it in `result_array` for use\nresult_array = result_pointer.read_array_of_double(size)\n\n# Print it out!\np result_array\n</code></pre>\n\n<p>And here is the result of running the script:</p>\n\n<pre><code>$ ruby my_c_lib.rb\n[8.0, 12.0, 8.0]\n</code></pre>\n\n<p>A note on memory management...from the docs <a href=\"https://github.com/ffi/ffi/wiki/Pointers\" rel=\"noreferrer\">https://github.com/ffi/ffi/wiki/Pointers</a>:</p>\n\n<blockquote>\n  <p>The FFI::MemoryPointer class allocates native memory with automatic garbage collection as a sweetener. When a MemoryPointer goes out of scope, the memory is freed up as part of the garbage collection process.</p>\n</blockquote>\n\n<p>So you shouldn't have to call <code>pointer.free</code> directly. Also, just to check whether you had to manually free <code>result_pointer</code>, I called <code>result_pointer.free</code> after printing extracting the array and got this warning</p>\n\n<pre><code>warning: calling free on non allocated pointer #&lt;FFI::Pointer address=0x007fd32b611ec0&gt;\n</code></pre>\n\n<p>So it looks like you don't have to manually free <code>result_pointer</code> either.</p>\n"}], "owner": {"reputation": 135, "user_id": 1278765, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/246bc405b6b1751040e1c469dc72dff9?s=128&d=identicon&r=PG", "display_name": "Lekeasong", "link": "https://stackoverflow.com/users/1278765/lekeasong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1604, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1437522151, "creation_date": 1427886923, "question_id": 29389334, "link": "https://stackoverflow.com/questions/29389334/how-do-i-handle-ruby-arrays-in-ruby-ffi-gem", "title": "How do I handle ruby arrays in ruby ffi gem?", "body": "<p>I want to use the ruby ffi gem to call a c function which has an array as an input variable and the output is an array. That is, the c function looks like:</p>\n\n<pre><code>double *my_function(double array[], int size)\n</code></pre>\n\n<p>I have created the ruby binding as:</p>\n\n<pre><code>module MyModule\n  extend FFI::Library\n  ffi_lib 'c'\n  ffi_lib 'my_c_lib'\n  attach_function :my_function, [:pointer, int], :pointer\n</code></pre>\n\n<p>I will like to make a call in ruby code like:</p>\n\n<pre><code>result_array = MyModule.my_function([4, 6, 4], 3)\n</code></pre>\n\n<p>How do I go about this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4701, "user_id": 1770601, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/pp9hI.jpg?s=128&g=1", "display_name": "ha9u63ar", "link": "https://stackoverflow.com/users/1770601/ha9u63ar"}, "edited": false, "score": 1, "creation_date": 1427885688, "post_id": 29388927, "comment_id": 46955239, "body": "implementation decision probably? btw...things have changed since C90 standard....look into <a href=\"http://www.cplusplus.com/reference/cmath/pow/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cmath/pow</a>"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 3, "creation_date": 1427885856, "post_id": 29388927, "comment_id": 46955334, "body": "Old function. Back then, maybe they felt that having pow return a 16 bit int would overflow more than be of any use."}, {"owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "edited": false, "score": 1, "creation_date": 1427885989, "post_id": 29388927, "comment_id": 46955414, "body": "Why should it return Int? It is supposed to be a &quot;general&quot; (not sure how to call it) function, that&#39;s why both its arguments and the returned value are double. This is just for the old standards, as previous comments have noted."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 4701, "user_id": 1770601, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/pp9hI.jpg?s=128&g=1", "display_name": "ha9u63ar", "link": "https://stackoverflow.com/users/1770601/ha9u63ar"}, "edited": false, "score": 0, "creation_date": 1427886004, "post_id": 29388927, "comment_id": 46955427, "body": "@ha9u63ar Still the return values are floating point values and why not int is my question. There has to be some reason why this API was designed this way."}, {"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1427886081, "post_id": 29388927, "comment_id": 46955474, "body": "Probably as @user2225104 says - an int can be limited to 65535, which isn&#39;t much use for a general purpose power function compared to a double, which you can just cast to int anyway if you know it won&#39;t overflow."}, {"owner": {"reputation": 4025, "user_id": 2599552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bApEQ.png?s=128&g=1", "display_name": "James Snook", "link": "https://stackoverflow.com/users/2599552/james-snook"}, "edited": false, "score": 1, "creation_date": 1427886190, "post_id": 29388927, "comment_id": 46955550, "body": "As a point of interest there is a faster (and still very simple) algorithm for integer powers that you can see <a href=\"http://stackoverflow.com/questions/101439/the-most-efficient-way-to-implement-an-integer-based-power-function-powint-int\">here</a>"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1427886391, "post_id": 29388927, "comment_id": 46955679, "body": "@DrKoch You have a case where you need a floating point values but I have come across many situations where I need a decimal return value while calculating power so why not have some API which returns decimal power value"}, {"owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "edited": false, "score": 1, "creation_date": 1427886424, "post_id": 29388927, "comment_id": 46955696, "body": "@Gopi I bet this answers your question. <a href=\"http://stackoverflow.com/questions/2398442/why-isnt-int-powint-base-int-exponent-in-the-standard-c-libraries\" title=\"why isnt int powint base int exponent in the standard c libraries\">stackoverflow.com/questions/2398442/&hellip;</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427888154, "post_id": 29388927, "comment_id": 46956739, "body": "It&#39;s because <code>pow()</code> can easily overflow a <code>int</code>, good question @Gopi if you write your own <code>pow()</code> implementation be careful with integer overflow."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427888354, "post_id": 29388927, "comment_id": 46956878, "body": "I&#39;ll close this as duplicate to the C++ discussion as the answer is the same no matter C or C++. The accepted answer applies 100% to C."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1427888456, "post_id": 29388927, "comment_id": 46956930, "body": "And no, this is not an opinion-based question. How can it be opinion-based to ask why a certain thing in the standard is implemented as it is? Just because people start posting their own subjective opinions as answers, it doesn&#39;t automatically turn the <i>question</i> opinion-based."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427902142, "post_id": 29388927, "comment_id": 46966120, "body": "@iharob I still believe after going through answers here. It would be good to have a integer based pow() say returning <code>long long int</code>"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427902178, "post_id": 29388927, "comment_id": 46966146, "body": "@Lundin Thanks for commenting why not have a pow() returning <code>long long int</code> if we want a decimal based API?"}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1427887466, "post_id": 29389323, "comment_id": 46956308, "body": "Oh I was afraid that there was no good answer to this very interesting question. But overflow is mainly the reason, there is even a <code>powf()</code> and a <code>long double</code> version <code>powl()</code>."}], "tags": [], "owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "is_accepted": false, "score": 3, "last_activity_date": 1427886894, "creation_date": 1427886894, "answer_id": 29389323, "question_id": 29388927, "link": "https://stackoverflow.com/questions/29388927/why-math-h-have-pow-return-double-and-not-int/29389323#29389323", "title": "why math.h have pow() return double and not int", "body": "<p>I would consider the following arguments:</p>\n\n<ul>\n<li>The C standard library is already quite large, and every extra function has a cost; providing a single <code>pow</code> function which can (at least in principle) treat both floating-points and integers means less functions, which is a good thing;</li>\n<li>The <code>int</code> version is sufficiently simple (modulo overflows and exceptional cases) that someone may code their own if necessary, so it is not felt as an absolute necessity (there are several other similar functions which might also have been provided in the standard library, but probably for similar reasons have not been included);</li>\n<li>How to deal with overflow? IEEE-754 already specifies how to deal with all those nasty exceptional cases for floating-points, but for integers you would have to choose yourself: use <code>errno</code>? Limit the input argument? Provide no guarantees about overflow whatsoever? Should there be a version for each integer type? Or simply one that returns <code>long</code>? If so, then surely people would complain about the lack of an <code>int</code> version, and a <code>short</code> version as well...</li>\n<li>One of the arguably most useful cases of <code>pow</code> for integers is when the base is 2, in which case shifts might be more efficient. Trying to provide an efficient function that detects such cases (otherwise, people would start arguing whether one should use shifts or call <code>ipow</code>, and then more discussion would ensue...), and also when the base is 4, or 8, or 1, or 0, etc., becomes a real issue for the library developer.</li>\n</ul>\n\n<p>In the end, this hypothetical <code>ipow</code> function would either have an extremely verbose and over-specified description (mentioning performance aspects), or it would lack visibility: should a developer reliably expect their <code>ipow</code> function to be optimized for special cases? The user might end up coding their own version to have a better understanding of its behavior, and since this is a relatively simple function, different implementations would abound.</p>\n\n<p>All in all, from the point of view of the user, <code>int pow()</code> seems lacking, but from the point of view of the library developers and maintainers, it is yet another burden that they might not be willing to undertake, for a benefit which is arguably quite limited.</p>\n\n<p>It is even possible that early versions of the library considered including it, then after some discussion realized that it had several shortcomings, and decided to remove it from the API.</p>\n"}, {"tags": [], "owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "is_accepted": false, "score": 0, "last_activity_date": 1427888076, "last_edit_date": 1495540366, "creation_date": 1427887190, "answer_id": 29389411, "question_id": 29388927, "link": "https://stackoverflow.com/questions/29388927/why-math-h-have-pow-return-double-and-not-int/29389411#29389411", "title": "why math.h have pow() return double and not int", "body": "<p>It's probably a decision to keep old standards simple. Although newer standards have included similar functions, there was never a function of your liking implemented using simple <code>int</code> argument or return values with the intent of preventing overflow issues as other answers here have presented. Quoting <a href=\"http://www.cplusplus.com/reference/cmath/pow/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cmath/pow/</a></p>\n\n<ul>\n<li><p>C99</p>\n\n<pre><code>double pow  (double base     , double exponent);\nfloat powf (float base      , float exponent);\nlong double powl (long double base, long double exponent);\n</code></pre></li>\n</ul>\n\n<p>Quoting\n<a href=\"https://stackoverflow.com/questions/2398442/why-isnt-int-powint-base-int-exponent-in-the-standard-c-libraries\">Why isn&#39;t int pow(int base, int exponent) in the standard C++ libraries?</a></p>\n\n<blockquote>\n  <p>For example the C99 rationale document specifically carries forward\n  two of the C89 guiding principles which limit what can be added:</p>\n  \n  <blockquote>\n    <ul>\n    <li>Keep the language small and simple.<br></li>\n    <li>Provide only one way to do an operation.</li>\n    </ul>\n  </blockquote>\n</blockquote>\n\n<p>Credits to the original author of the best answer in that topic. That topic might answer your question in its entirety, I believe.</p>\n"}, {"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1427962842, "post_id": 29397007, "comment_id": 46990281, "body": "Thanks this answer covers lot of stuff in detail. I agree with the <code>(2^n)</code> of your explanation and it doesn&#39;t make sense to use a general API to find this value when finding this value can be done in a much better way"}], "tags": [], "owner": {"reputation": 2255, "user_id": 670358, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6DjA.png?s=128&g=1", "display_name": "Kaslai", "link": "https://stackoverflow.com/users/670358/kaslai"}, "is_accepted": true, "score": 1, "last_activity_date": 1427908987, "creation_date": 1427908987, "answer_id": 29397007, "question_id": 29388927, "link": "https://stackoverflow.com/questions/29388927/why-math-h-have-pow-return-double-and-not-int/29397007#29397007", "title": "why math.h have pow() return double and not int", "body": "<p>Anol's answer is very on-point and I believe is the most correct assessment as to why <code>int pow()</code> is not a part of the standard library, however I would like to amend it with another possibility.</p>\n\n<p>The most useful aspect of the <code>pow</code> function is the ability to correctly (at least as far as floating point arithmetic is concerned) perform exponentiation to non-integer powers. This type of behavior is non-trivial to implement using integer math, let alone floating point math. Rather than asking library implementors to write both an integer exponentiation routine and a floating point exponentiation routine, they decided to ask for the more useful of the two. It also helps that the x87 instruction set, as well as many other FPU instruction sets, provides built-in floating point exponentiation instructions to make the implementation on the software side trivial.</p>\n\n<p>C also doesn't have any notion of exceptions, and no language-level global state that could expose things like CPU flags. This would make overflow detection in an <code>int pow()</code> implementation difficult to provide. In the case of <code>double pow()</code>, it can just return a non-signalling <code>NaN</code> or <code>Infinity</code> in the case of exceptional circumstances. However there is no notion of <code>NaN</code> or <code>Infinity</code> in the integer world. </p>\n\n<p>In the case of an exception, the program could do one of the following:</p>\n\n<ul>\n<li>Overflow Silently</li>\n<li>Return <code>INT_MIN</code> or <code>INT_MAX</code></li>\n<li>Change an integer whose pointer was provided to the function by the caller</li>\n<li>Change some global state like <code>errno</code></li>\n<li>Emit a <code>SIGFPE</code></li>\n<li>Provide a sister function <code>int pow_overflow_check()</code> that can be used to boilerplate the call</li>\n</ul>\n\n<p>None of these are desirable. The first two options would lead to hard-to-diagnose logic errors in possibly unrelated areas of a program. The third one would provide an annoying and cumbersome barrier to the use of the function. The fourth one would ruin any sort of reentrancy guarantee. The fifth option would make the entire program grind to a halt. The sixth option would work well, but would also bloat the standard more, and make the function more cumbersome to use like in the third option.</p>\n\n<p>Further, just like others have stated, exponentiation to an integer power, especially if the base is 2, is trivial to implement. A first year compsci student with a basic understanding of math should be able to formulate a correct implementation that could suit most use cases. </p>\n\n<p>The original C language was aimed squarely at assembly programmers, and this is one of the symptoms of that. A very common theme in the language spec is that the language library should only provide things that are either impossible to implement in-language in a portable manner, or extremely non-trivial to implement purely in-language, especially when there are commonly available CPU/FPU instructions that can do it for you.</p>\n"}], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1509, "favorite_count": 0, "accepted_answer_id": 29397007, "answer_count": 3, "score": 3, "last_activity_date": 1427908987, "creation_date": 1427885530, "last_edit_date": 1427885723, "question_id": 29388927, "link": "https://stackoverflow.com/questions/29388927/why-math-h-have-pow-return-double-and-not-int", "title": "why math.h have pow() return double and not int", "body": "<p>Out of curiosity I know <code>pow()</code> returns <code>double</code></p>\n\n<p>Is there any particular reason why <code>math.h</code> has this API with <code>double</code> as argument and return value.</p>\n\n<p>If I have a case where I need an <code>int</code> as the return value I would write my own API as shown below. Why does <code>math.h</code> doesn't have an API something like this and have <code>double pow(double,double);</code></p>\n\n<p>or Is there one for this? If the answer is too obvious let me know I will delete the question. I couldn't figure out the reason behind this.</p>\n\n<pre><code>int i = pow1(2,4);\n\nint pow1(int i,int j)\n{\n   int k = 1;\n   while(j--)\n   {\n      k = k*i;\n   }\n   return k;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "signals", "posix", "rtos"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427888045, "post_id": 29388749, "comment_id": 46956677, "body": "Shouldn&#39;t this &quot;<i>3. high priority thread starts  ....</i>&quot; read &quot;<i>3. high priority thread continues running ...</i>&quot;? Otherwise this could imply the HP thread stopped running. And if it did, then things were clear."}, {"owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1427888180, "post_id": 29388749, "comment_id": 46956760, "body": "@alk - good catch (; sorry for confusion"}], "answers": [{"comments": [{"owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "edited": false, "score": 0, "creation_date": 1427894100, "post_id": 29389891, "comment_id": 46960594, "body": "Do you have an opinion about which of the two options described in the question is more appropriate/expected/...? (;"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "edited": false, "score": 0, "creation_date": 1427896820, "post_id": 29389891, "comment_id": 46962334, "body": "No, as I don&#39;t know anything about the/your implementation. In general I&#39;d try to code this in way that reduces buffering to a minimum, so that <code>sigwait()</code>&#39;s implemenation has the best chances to get the most up-to-date content of the signal list, when it comes to pulling a signal from the list.@FreddieChopin"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "edited": false, "score": 0, "creation_date": 1427896901, "post_id": 29389891, "comment_id": 46962389, "body": "On the other hand one could argue the relevant point in time is when <code>sigwait()</code> got called, so the implementation might just go the other wait wrong and grap the ealierst arriving signal. @FreddieChopin As I said &quot;its implementation defined&quot; and as you are the implementer, just do as you like ... ;-)"}, {"owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "edited": false, "score": 0, "creation_date": 1427897550, "post_id": 29389891, "comment_id": 46962823, "body": "Thanks for your input! As I wrote in the question, previously I&#39;d &quot;select&quot; the signal in point 2, but now I changed that to point 4 - this somehow feels a bit better..."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "edited": false, "score": 0, "creation_date": 1427897806, "post_id": 29389891, "comment_id": 46963005, "body": "Correction: &quot;<i>... go the other wait wrong ...</i>&quot; should read: &quot;<i>... go the other way round ...</i>&quot; ... :-}} @FreddieChopin"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 2, "last_activity_date": 1427888626, "creation_date": 1427888626, "answer_id": 29389891, "question_id": 29388749, "link": "https://stackoverflow.com/questions/29388749/if-sigwait-blocks-when-is-the-accepted-signal-actually-selected/29389891#29389891", "title": "If sigwait() blocks, when is the accepted signal actually &quot;selected&quot;?", "body": "<p>I'd consider the scenario described a race. So, well, the outcome is implementation defined.</p>\n\n<p>Signals should not be used for synchronisation. If the order of receiving the two  signals is important (to the application) it should take the appropriate actions to synchronise (them).</p>\n"}], "owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 29389891, "answer_count": 1, "score": 1, "last_activity_date": 1427888626, "creation_date": 1427885022, "last_edit_date": 1427888153, "question_id": 29388749, "link": "https://stackoverflow.com/questions/29388749/if-sigwait-blocks-when-is-the-accepted-signal-actually-selected", "title": "If sigwait() blocks, when is the accepted signal actually &quot;selected&quot;?", "body": "<p>There are two real-time threads. The first one has low priority and it is waiting for all possible signals in <code>sigwait()</code> (so all signals are blocked and <code>sigmask</code> passed to the function has all signals enabled). The second one has high priority and sends two signals to the first (low priority) thread - it first sends <code>SIGRTMAX</code> and then <code>SIGRTMIN</code>.</p>\n\n<p>POSIX spec for <code>sigwait()</code> ( <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sigwait.html\" rel=\"nofollow\">http://pubs.opengroup.org/onlinepubs/9699919799/functions/sigwait.html</a> ) says this:</p>\n\n<blockquote>\n  <p>If no signal in set is pending at the time of the call, the thread shall be suspended until one or more becomes pending.</p>\n  \n  <p>[...]</p>\n  \n  <p>Should any of the multiple pending signals in the range SIGRTMIN to SIGRTMAX be selected, it shall be the lowest numbered one.</p>\n</blockquote>\n\n<p>The sequence of events in a real-time operating system would look like that:</p>\n\n<pre><code>(H)...............signal(SIGRTMAX)===signal(SIGRTMIN)===...\n(L)===sigwait().........................................===\n      ^           ^                  ^                  ^\n      1           2                  3                  4\n</code></pre>\n\n<ul>\n<li><code>(H)</code> - high priority thread</li>\n<li><code>(L)</code> - low priority thread</li>\n<li><code>.</code> - thread is not running</li>\n<li><code>=</code> - thread is running</li>\n</ul>\n\n<p>The 4 interesting points:</p>\n\n<ol>\n<li>low priority thread blocks on <code>sigwait()</code>, no signals are currently pending, all signals are blocked, high priority thread is not yet started;</li>\n<li>high priority thread starts and sends <code>SIGRTMAX</code> signal to low priority thread, which is unblocked, but not allowed to run, as high priority thread is still running;</li>\n<li>high priority thread continues running and sends <code>SIGRTMIN</code> signal to low priority thread, but low priority thread is still waiting to actually run;</li>\n<li>high priority thread terminates, low priority thread is allowed to run and return from <code>sigwait()</code> call;</li>\n</ol>\n\n<p>Now the problem is that if both <code>SIGRTMIN</code> and <code>SIGRTMAX</code> signals are pending at the same time, <code>SIGRTMIN</code> should be \"selected\" first. However I'm not sure at which point the signal is actually \"selected\" - is it selected by the kernel at \"2\" or maybe it is selected by code in <code>sigwait()</code> executed in low priority thread, so at \"4\"? That's why I'm not sure whether in the scenario above, the <code>sigwait()</code> call would actually select <code>SIGRTMIN</code> or <code>SIGRTMAX</code>. Maybe such details are \"implementation defined\"?</p>\n\n<p>The questions is releated to the real-time operating system for microcontrollers I'm developing ( <a href=\"https://github.com/DISTORTEC/distortos\" rel=\"nofollow\">https://github.com/DISTORTEC/distortos</a> ). Currently my code \"selects\" the signal during generation, so at \"2\" (my code would return <code>SIGRTMAX</code> first), but I'm no longer sure that's the correct way to do it...</p>\n"}, {"tags": ["c", "double", "resolution", "truncation"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1427885209, "post_id": 29388592, "comment_id": 46954976, "body": "use <code>uint64_t</code>. <code>printf(&quot;%&quot; PRIu64 &quot;\\n&quot;, UINT64_MAX);</code>"}, {"owner": {"reputation": 6044, "user_id": 3906965, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c1d2cce52fc69b94c86cb07293091922?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3906965/abhishek"}, "edited": false, "score": 0, "creation_date": 1427888482, "post_id": 29388592, "comment_id": 46956943, "body": "I think it is compiler issue. I tried your code at <a href=\"http://www.tutorialspoint.com/compile_c_online.php\" rel=\"nofollow noreferrer\">tutorialspoint.com/compile_c_online.php</a> and it works fine! Make sure, you compile it with <code>gcc -lm main.c</code> and run it using <code>.&#47;a.out</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1427888938, "post_id": 29388592, "comment_id": 46957241, "body": "@BLUEPIXY But that&#39;s cheating! :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1427888987, "post_id": 29388592, "comment_id": 46957271, "body": "Anyway, <a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">take it away Mr. Goldberg</a>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1427889134, "post_id": 29388592, "comment_id": 46957367, "body": "<code>UINT64_MAX</code> meant 2^64-1. So I make a calculation .. <code>printf(&quot;%&quot; PRIu64 &quot;\\n&quot;, ~(uint64_t)0);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1427897866, "last_edit_date": 1427897866, "creation_date": 1427895455, "answer_id": 29392282, "question_id": 29388592, "link": "https://stackoverflow.com/questions/29388592/truncation-after-17-digit-on-c/29392282#29392282", "title": "Truncation after 17. Digit on C", "body": "<p><code>double</code> of accuracy is approximately 17 decimal digits(52bit+1). so You'll use the type that has a 64-bit or higher accuracy.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n\nuint64_t pow_2_i(int n){//2^n\n    if(0 &gt; n || n &gt;= 64)\n        return 0;\n    uint64_t x = 1;\n    return x &lt;&lt; n;\n}\n\nint main(void){\n    int i;\n    uint64_t x, sum = 0;\n    for(i = 1; i &lt;= 64; ++i){\n        sum += (x = pow_2_i(i-1));\n        printf(\"%2d.Casilla = %\" PRIu64 \"\\n\", i, x);\n    }\n    printf(\"\\n\\n***En Total = %\" PRIu64 \" Granos.\\n\\n\", sum);//No Cheat^-^\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>If <code>long double</code> has large accuracy  than <code>double</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void ){\n    long double x=1.0;//1.0L\n    int i;\n    for(i=1; i&lt;=64;++i){\n        printf(\"%2d.Casilla = %.0Lf\\n\", i, x);\n        x *= 2.0L;\n    }\n    printf(\"\\n\\n***En Total = %.0Lf Granos.\\n\\n\", x-1.0L);//2^64-1:\u03a3ar^k (k=0-&gt;n) =a(r^(n+1)-1)/(r-1):1(2^(63+1)-1)/(2-1)\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4734178, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153218263873901/picture?type=large", "display_name": "Ut.Son", "link": "https://stackoverflow.com/users/4734178/ut-son"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1427898768, "creation_date": 1427884556, "last_edit_date": 1427898768, "question_id": 29388592, "link": "https://stackoverflow.com/questions/29388592/truncation-after-17-digit-on-c", "title": "Truncation after 17. Digit on C", "body": "<p>I was trying to write a simple program on <strong>C</strong> about the classical history between the king, chessboard and rice grains. The total amount of rice grains that is needed to fill the chessboard is :       <strong>18 446 744 073 709 551 615</strong> .</p>\n\n<p>But i'm getting : <strong>18 446 744 073 709 552 000</strong>. on C.</p>\n\n<p>Aren't there any solution to increase 17 digits resolution?</p>\n\n<p>Here is my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main( void )\n{\n  double i=1.0;\n  while(i&lt;=64)  \n  {\n    printf(\"%2.0lf.Casilla = %.0lf\\n\", i, pow(2.0,(i-1.0)));\n    i++;\n  }\n  printf(\"\\n\\n***En Total = %.0lf Granos.\\n\\n\",pow(2.0,64.0)-1);\n  return 0;\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "system-calls"], "comments": [{"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1427888642, "post_id": 29388410, "comment_id": 46957048, "body": "You don&#39;t get the concepts of <code>shell</code> and <code>syscall</code>. You should first try to better understand what are syscalls and what does the shell before writing code. For instance you&#39;re trying to pass a shell command line to the kernel. This is nonsense, the shell <b>is</b> responsible for translating the command line into the correct arguments to the fork/exec sequence."}, {"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1427889033, "post_id": 29388410, "comment_id": 46957309, "body": "Is your question: <i>How to write a program which launch a second program whose standard input and output are redirected to files ?</i>"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3253375, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1505437804/picture?type=large", "display_name": "user3253375", "link": "https://stackoverflow.com/users/3253375/user3253375"}, "edited": false, "score": 0, "creation_date": 1427886680, "post_id": 29388604, "comment_id": 46955843, "body": "Hi first of all thanks for comenting! but i can not use fopen and those functions. only  .fork,dup.dup2,exec,open,write,read"}, {"owner": {"reputation": 57, "user_id": 3253375, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1505437804/picture?type=large", "display_name": "user3253375", "link": "https://stackoverflow.com/users/3253375/user3253375"}, "edited": false, "score": 0, "creation_date": 1427888131, "post_id": 29388604, "comment_id": 46956726, "body": "i don&#39;t understand how to make a command &quot;./a.out &lt;input.txt&gt;output.txt&quot; using the sys call dup"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1427888151, "last_edit_date": 1427888151, "creation_date": 1427884579, "answer_id": 29388604, "question_id": 29388410, "link": "https://stackoverflow.com/questions/29388410/trying-to-redirect-input-and-output-using-system-calls/29388604#29388604", "title": "trying to redirect input and output using system calls", "body": "<p>For reading and writing files, you just use the normal <code>read</code> and <code>write</code> functions; you'll need to have a file descriptor first, so you'll need to use <code>fopen</code>. </p>\n\n<p>all in all, every C tutorial I've ever seen covers opening and writing long before it touches <code>fork</code>, so I wonder what you've been following. I'd really just recommend finding an intro to C that you like and read the first few pages; if you already understand what <code>fork</code> does, this will be a piece of cake for you.</p>\n\n<p><strong>EDIT</strong>: also, you might misunderstand what </p>\n\n<pre><code>program arguments &lt;from_file &gt;to_file \n</code></pre>\n\n<p>does when using that on a shell: </p>\n\n<p>The <strong>shell</strong> reads that line, and calls <code>program</code>, passing it <code>arguments</code> as... arguments. It detects the <code>&lt;</code> and <code>&gt;</code> on that line and \"bends\" the standard input and output file descriptors (yes, standard input and output behave just like that), to be actually <code>fopen</code>ed files.</p>\n\n<p><code>program</code> never sees <code>&lt;from_file</code> nor <code>&gt;to_file</code>.</p>\n\n<p><strong>EDIT</strong> in your comment you say:</p>\n\n<blockquote>\n  <p>i can not use fopen and those functions. only .fork,dup.dup2,exec,open,write,read</p>\n</blockquote>\n\n<p>Obviously, <code>fopen</code> is but a wrapper for <code>open</code> and returns the file descriptor <code>open</code> returns.</p>\n\n<p>Also, your program uses plenty libc functions; if you'd only be allowed to <code>write</code>, you shouldn't use <code>printf</code>, which is a very handy formatting wrapper for <code>puts</code>, which is a wrapper for <code>write</code>. Similar things apply to <strong>all</strong> functions you call, ie. <code>waitpid</code>, <code>execvp</code>, <code>perror</code>. You should document your requirements clearly <em>for yourself</em>, first.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 3253375, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1505437804/picture?type=large", "display_name": "user3253375", "link": "https://stackoverflow.com/users/3253375/user3253375"}, "edited": false, "score": 0, "creation_date": 1427890055, "post_id": 29390092, "comment_id": 46957912, "body": "my question is regarding the exec command which i don&#39;t understand. for instance, say i would like to use &quot;a.out&quot; coomand and only that command. what are the arguments i must pass the execvp function. Thank you."}], "tags": [], "owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "is_accepted": false, "score": 0, "last_activity_date": 1427890558, "last_edit_date": 1427890558, "creation_date": 1427889205, "answer_id": 29390092, "question_id": 29388410, "link": "https://stackoverflow.com/questions/29388410/trying-to-redirect-input-and-output-using-system-calls/29390092#29390092", "title": "trying to redirect input and output using system calls", "body": "<p>I assume your question is: <em>How to write a program which launch a second program whose standard input and output are redirected to files ?</em></p>\n\n<p>In that case you need to follow this sequence:</p>\n\n<p><strong>In the main program</strong></p>\n\n<ul>\n<li>fork() a child process</li>\n<li>wait() for the child process using the pid obtained from fork()</li>\n</ul>\n\n<p><strong>In the child subprocess</strong></p>\n\n<ul>\n<li>close(0) the standard input</li>\n<li>open() the input file (with read mode)</li>\n<li>close(1) the standard output</li>\n<li>open() the output file (with write mode)</li>\n<li>exec() the target program</li>\n</ul>\n\n<p><strong>How to use syscalls</strong></p>\n\n<p><strong>R</strong>ead <strong>T</strong>he <strong>F</strong>ine <strong>M</strong>anuals</p>\n\n<ul>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/close.html\" rel=\"nofollow\">close</a></li>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/dup.html\" rel=\"nofollow\">dup</a></li>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/exec.html\" rel=\"nofollow\">exec</a></li>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html\" rel=\"nofollow\">fork</a></li>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/open.html\" rel=\"nofollow\">open</a></li>\n</ul>\n\n<p>All these man page contains <em>example code</em>. And by reading all of them you should have enough example code to write your whole program.</p>\n"}], "owner": {"reputation": 57, "user_id": 3253375, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1505437804/picture?type=large", "display_name": "user3253375", "link": "https://stackoverflow.com/users/3253375/user3253375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 971, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1427890729, "creation_date": 1427884062, "last_edit_date": 1427890729, "question_id": 29388410, "link": "https://stackoverflow.com/questions/29388410/trying-to-redirect-input-and-output-using-system-calls", "title": "trying to redirect input and output using system calls", "body": "<p>i'm trying to read an input from a specific file and write it to a specific file using unix(sys calls). the output part must be somehow created.</p>\n\n<p>i want to do something like the following:\n./a.out &lt; input.txt > output.txt\nusing only these functions: fork,dup.dup2,exec,open,write,read\nthe code is this : </p>\n\n<pre><code>pid_t   pid, runner;\nchar *path = argv[1];\nchar enter[] = \"/home/demo/Desktop/OS/Ex1/Ex12/code/input.txt\";\nchar to[] = \"/home/demo/Desktop/OS/Ex1/Ex12/Ex1/ronen/\";\nchar *out = \"/home/demo/Desktop/OS/Ex1/Ex12/Ex1/ronen/out1.txt\";\nchar *args[] = {to, \"./a.out\",\"&lt;\",enter,\"&gt;\",out, NULL};\nchar *args2[] = {\"cd\", to, \"./a.out\",\"&lt;\",enter,\"&gt;\",to ,NULL};\nif ((runner = fork()) &lt; 0) {perror(\"could not make fork\");}\nelse if (runner == 0) {\n    printf(\"true\\n\");\n    execvp(args2[0],args2);\n} else if (runner != 0) {\n    waitpid(runner,0,0);\n    printf(\"done\\n\");\n}\n</code></pre>\n\n<p>So it's actaully working when i put the \"a.out\" file in the desktop.</p>\n\n<p>however has anyone know how i can redirect the exec function to go to my spefic folder? so i won't have to pass the executable file to the desktop?</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1427888713, "post_id": 29388341, "comment_id": 46957100, "body": "Explain clearly why you want to do that and we can then explain why you are wrong.  Suspect XY problem.   It&#39;s a mutex; one thread will get there first, that&#39;s it."}, {"owner": {"reputation": 18405, "user_id": 1145388, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HZ9CL.png?s=128&g=1", "display_name": "Stephen Ostermiller", "link": "https://stackoverflow.com/users/1145388/stephen-ostermiller"}, "edited": false, "score": 0, "creation_date": 1427896790, "post_id": 29388341, "comment_id": 46962316, "body": "I&#39;ve improved the clarity of the question by rewriting the title and improving the grammar and the clarity of the question."}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1427910429, "post_id": 29388341, "comment_id": 46970865, "body": "You should search for similar questions already asked.  I searched really quickly <a href=\"http://stackoverflow.com/questions/3280712/how-to-allow-certain-threads-to-have-priority-in-locking-a-mutex-use-pthreads\">and found this one that might answer your question</a>."}], "owner": {"reputation": 1647, "user_id": 1367450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vEbOB.jpg?s=128&g=1", "display_name": "Sabri Mevi\u015f", "link": "https://stackoverflow.com/users/1367450/sabri-mevi%c5%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427916931, "creation_date": 1427883831, "last_edit_date": 1427916931, "question_id": 29388341, "link": "https://stackoverflow.com/questions/29388341/how-to-specify-the-pthread-that-should-be-the-first-to-get-into-a-critical-regio", "title": "How to specify the pthread that should be the first to get into a critical region?", "body": "<p>I want to decide which thread should enter critical region first according to its priority. In the example below, is there any way to choose a specific thread and let it enter the critical region first? I will make it a step to implement Lottery Scheduling.</p>\n\n<pre><code>/* Includes */\n#include &lt;unistd.h&gt;     /* Symbolic Constants */\n#include &lt;sys/types.h&gt;  /* Primitive System Data Types */ \n#include &lt;errno.h&gt;      /* Errors */\n#include &lt;stdio.h&gt;      /* Input/Output */\n#include &lt;stdlib.h&gt;     /* General Utilities */\n#include &lt;pthread.h&gt;    /* POSIX Threads */\n#include &lt;string.h&gt;     /* String handling */\n#include &lt;semaphore.h&gt;  /* Semaphore */\n\n/* prototype for thread routine */\nvoid handler ( void *ptr );\n\n/* global vars */\n/* semaphores are declared global so they can be accessed \n   in main() and in thread routine,\n   here, the semaphore is used as a mutex */\nsem_t mutex;\nint counter; /* shared variable */\n\nint main()\n{\n    int i[2];\n    pthread_t thread_a;\n    pthread_t thread_b;\n\n    i[0] = 0; /* argument to threads */\n    i[1] = 1;\n\n    sem_init(&amp;mutex, 0, 1);      /* initialize mutex to 1 - binary semaphore */\n                                 /* second param = 0 - semaphore is local */\n\n    /* Note: you can check if thread has been successfully created by checking return value of\n       pthread_create */                                 \n    pthread_create (&amp;thread_a, NULL, (void *) &amp;handler, (void *) &amp;i[0]);\n    pthread_create (&amp;thread_b, NULL, (void *) &amp;handler, (void *) &amp;i[1]);\n\n    pthread_join(thread_a, NULL);\n    pthread_join(thread_b, NULL);\n\n    sem_destroy(&amp;mutex); /* destroy semaphore */\n\n    /* exit */  \n    exit(0);\n} /* main() */\n\nvoid handler ( void *ptr )\n{\n    int x; \n    x = *((int *) ptr);\n    printf(\"Thread %d: Waiting to enter critical region...\\n\", x);\n    sem_wait(&amp;mutex);       /* down semaphore */\n    /* START CRITICAL REGION */\n    printf(\"Thread %d: Now in critical region...\\n\", x);\n    printf(\"Thread %d: Counter Value: %d\\n\", x, counter);\n    printf(\"Thread %d: Incrementing Counter...\\n\", x);\n    counter++;\n    printf(\"Thread %d: New Counter Value: %d\\n\", x, counter);\n    printf(\"Thread %d: Exiting critical region...\\n\", x);\n    /* END CRITICAL REGION */    \n    sem_post(&amp;mutex);       /* up semaphore */\n\n    pthread_exit(0); /* exit thread */\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "static", "initialization", "malloc"], "comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1427883656, "post_id": 29388217, "comment_id": 46954191, "body": "both of them are highly dangerous and  aside of learning , they should be avoided."}, {"owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "edited": false, "score": 1, "creation_date": 1427884272, "post_id": 29388217, "comment_id": 46954488, "body": "Your second example will compile, but it&#39;s still wrong:  it&#39;ll allocate new storage every time the function is called, leaking the old.  Initialize the variable to NULL, and check for NULL before calling <code>malloc</code> so that it&#39;s only called once."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1427884985, "post_id": 29388217, "comment_id": 46954838, "body": "@DavidHaim: What exactly are you talking about?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1427885574, "post_id": 29388217, "comment_id": 46955183, "body": "@DavidHaim: you should anyway add what you are refering to here. as the OP doesn&#39;t even contain a real snippet, and your comment did sound like &quot;both, cases should be avoided&quot; (So it sounded like you advise to avoid malloc at all) Because As he just throw in some code I wasn&#39;t thinking about, what he may could have forgotten. So to get what you are warning about is not well stated ;)"}, {"owner": {"reputation": 195, "user_id": 4425633, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JcYVQ.jpg?s=128&g=1", "display_name": "Elhaw", "link": "https://stackoverflow.com/users/4425633/elhaw"}, "reply_to_user": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "edited": false, "score": 0, "creation_date": 1427886545, "post_id": 29388217, "comment_id": 46955770, "body": "@Wyzard you added new concepts to me thanks"}], "answers": [{"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1427885790, "post_id": 29388279, "comment_id": 46955294, "body": "<code>int i = func()</code> would be ok, whilest the case stated by OP is invalid. So -1 for not really beeing related to OP&#39;s question. (Correct me if I&#39;m wrong)"}, {"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427886369, "post_id": 29388279, "comment_id": 46955660, "body": "@Zaibis From what is said above, it&#39;s obvious (I hope) why <code>static int i = func()</code> is invalid - it needs code to execute, while it should be calculated before anything else (as initialization requires). <code>C++</code> solves this issue by using hidden initialization subroutines, yet pure <code>C</code> has no such feature - user code cannot be executed before <code>main()</code>. This is why <code>C</code> allows only constants as initialization."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427886619, "post_id": 29388279, "comment_id": 46955810, "body": "Ah, ok. Anyway you should rephrase it."}], "tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": false, "score": -1, "last_activity_date": 1427888169, "last_edit_date": 1427888169, "creation_date": 1427883660, "answer_id": 29388279, "question_id": 29388217, "link": "https://stackoverflow.com/questions/29388217/using-malloc-with-static-pointers/29388279#29388279", "title": "Using malloc with static pointers", "body": "<p>Roughly, initialization in C is when the compiler outputs binary data to executable file; assignment is the operation performed by actual executable code.</p>\n\n<p>So, <code>static int i = 5</code> makes the compiler to output data word <code>5</code> to executable file's data section; while <code>int i = func()</code> makes the compiler to generate several CPU instructions as <code>call</code> to call subroutine and <code>mov</code> to store the result.</p>\n\n<p>Thus the expression <code>static int i = func()</code> requires both 1) to be calculated earlier than <code>main()</code> (as this is an initialization), 2) a piece of user code to execute (which may only make sense in the context of the new program instance). It's possible to solve that issue by creating some hidden initialization subroutine which executes before <code>main()</code>. Actually, <code>C++</code> does this. But <code>C</code> has no such feature, so static variables may be initialized only with constants.</p>\n"}, {"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 3, "last_activity_date": 1427884175, "last_edit_date": 1427884175, "creation_date": 1427883855, "answer_id": 29388352, "question_id": 29388217, "link": "https://stackoverflow.com/questions/29388217/using-malloc-with-static-pointers/29388352#29388352", "title": "Using malloc with static pointers", "body": "<p>when a variable is declared static inside a function , it is created in either the \"data segment\" or the \"bss segment\" , depends if it were initialized or not.<br/> this variable is created in the binaries and must have a constant value - remember - static variables inside a function are created when the program goes on even before the main() starts , it can't be initialized with any function since the program does not 'run' yet(there is no kind of evaluations or function calls)<br/> so the initializer must be constant or not initialize at the first place. </p>\n\n<pre><code>static int *st_ptr = malloc(sizeof(int));\n</code></pre>\n\n<p>here, you bind the creation of st_ptr with malloc , but since malloc is a function that needs to run and st_ptr must be created before any other function runs - this creates impossible state</p>\n\n<pre><code>static int *st_ptr;\n st_ptr = malloc(5*sizeof(int));\n</code></pre>\n\n<p>here, the st_ptr is created and left un-initialize, the creation of it is not bound to any function.\neach time the function runs - malloc takes place. so the activation of malloc and creation st_ptr are not depended. </p>\n\n<p>but as I stated in the comment - this is extremely dangerous practice. you allocate more and more memory on the same variable. the only way to avoid it is to <code>free(st_ptr)</code> in the end of every function. this said - you don't need it to be static at the first place </p>\n"}, {"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1427885150, "post_id": 29388459, "comment_id": 46954939, "body": "I&#39;m starting to have the impression you are my competitor.... the second time today, you post exactly what I was trying to cite out of the standard just a bit faster then me. +1 for content anyway (You may flag this if you want to^^)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1427885236, "post_id": 29388459, "comment_id": 46954995, "body": "@Zaibis Don&#39;t worry, next time, maybe i&#39;ll be the one posting this very comment. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1427886054, "last_edit_date": 1427886054, "creation_date": 1427884207, "answer_id": 29388459, "question_id": 29388217, "link": "https://stackoverflow.com/questions/29388217/using-malloc-with-static-pointers/29388459#29388459", "title": "Using malloc with static pointers", "body": "<p>First, let's have a brief on <code>initialization</code> vs. <code>assignment</code>.</p>\n\n<ul>\n<li><strong><em>Initialization:</em></strong></li>\n</ul>\n\n<p>This is used to specify the <em>initial</em> value of an object. Usually, this means, only at the time of defining a variable, initialization takes place. The <em>value</em> to initialize the object is called an <em>initalizer</em>. From <code>C11</code> , chapter <code>6.7.9</code>, </p>\n\n<blockquote>\n  <p>An initializer specifies the initial value stored in an object.</p>\n</blockquote>\n\n<ul>\n<li><strong><em>Assignment:</em></strong></li>\n</ul>\n\n<p>Assignment is assigning (or setting) the value of a variable, at any (valid) given point of time of execution. Quoting the standard, chapter <code>6.5.16</code>,</p>\n\n<blockquote>\n  <p>An assignment operator stores a value in the object designated by the left operand.</p>\n</blockquote>\n\n<p>In case of simple assignment (<code>=</code> operator),</p>\n\n<blockquote>\n  <p>In simple assignment (<code>=</code>), the value of the right operand is converted to the type of the\n  assignment expression and replaces the value stored in the object designated by the left\n  operand. </p>\n</blockquote>\n\n<hr>\n\n<p>That said, I think, your query has to do with the initialization of <code>static</code> object.</p>\n\n<p><strong>For the first case,</strong></p>\n\n<pre><code>static int *st_ptr = malloc(sizeof(int)); \n</code></pre>\n\n<p>Quoting from <code>C11</code> standard document, chapter <code>\u00a76.7.9</code>, Initialization, paragraph 4, </p>\n\n<blockquote>\n  <p>All the expressions in an initializer for an object that has static or thread storage duration\n  shall be constant expressions or string literals.</p>\n</blockquote>\n\n<p>and regarding the <em>constant expression</em>, from chapter 6.6 of the same document,  (emphasis mine)</p>\n\n<blockquote>\n  <p><strong>Constant expressions shall not contain</strong> assignment, increment, decrement, <strong>function-call</strong>,\n  or comma operators, except when they are contained within a subexpression that is not\n  evaluated.</p>\n</blockquote>\n\n<p>clearly, <code>malloc(sizeof(int));</code> is not a <em>constant expression</em>, so we cannot use it for initialization of a <code>static</code> object.</p>\n\n<p><strong>For the second case,</strong></p>\n\n<pre><code>static int *st_ptr;\nst_ptr = malloc(5*sizeof(int));\n</code></pre>\n\n<p>you are not <em>initializing</em> the <code>static</code> object. You're leaving it uninialized. Next instruction, you're <em>assigning</em> the return value of <code>malloc()</code> to it. So your compiler does not produce any complains.</p>\n"}], "owner": {"reputation": 195, "user_id": 4425633, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JcYVQ.jpg?s=128&g=1", "display_name": "Elhaw", "link": "https://stackoverflow.com/users/4425633/elhaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 984, "favorite_count": 0, "accepted_answer_id": 29388459, "answer_count": 3, "score": 2, "last_activity_date": 1427888169, "creation_date": 1427883488, "last_edit_date": 1427886611, "question_id": 29388217, "link": "https://stackoverflow.com/questions/29388217/using-malloc-with-static-pointers", "title": "Using malloc with static pointers", "body": "<p>I know that declaring a ststic variable and initializing it in this way<code>static int *st_ptr = malloc(sizeof(int));</code> will generate a compile error message(Type initializer element is not constant),and solving this by using separate statements in this way <code>static int *st_ptr;\nst_ptr = malloc(5*sizeof(int));</code></p>\n\n<hr>\n\n<p>i need to understand the difference between initialization operator and assignment operator in this case ?and why this way solved the problem ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1427883101, "post_id": 29388072, "comment_id": 46953868, "body": "Hi, Welcome to StackOverflow! Your question is too broad; as you already notice * under different scenerio* implies that there are many cases to consider. As you concern yourself with performance, you should already be aware of the fact that there are far too many factors to give you a general answer. There&#39;s nothing that can replace your own testing here!"}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 7, "last_activity_date": 1427883103, "creation_date": 1427883103, "answer_id": 29388103, "question_id": 29388072, "link": "https://stackoverflow.com/questions/29388072/ternary-operator-vs-if-else/29388103#29388103", "title": "Ternary operator vs if else", "body": "<p>It isn't better or worse. It is <em>different</em>, because it is an expression. That means you can do stuff like initialize variables with it:</p>\n\n<pre><code>int n = some_flag ? 0 : 42;\n</code></pre>\n\n<p>or use it in other places that require expressions:</p>\n\n<pre><code>printf(\"Hello number %d\", some_flag ? 0 : 42);\n</code></pre>\n\n<p>You can't do that with an if-else. As for performance, in cases where the two are interchangeable, it is extremely unlikely to make a difference.</p>\n"}, {"tags": [], "owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1427883323, "creation_date": 1427883323, "answer_id": 29388173, "question_id": 29388072, "link": "https://stackoverflow.com/questions/29388072/ternary-operator-vs-if-else/29388173#29388173", "title": "Ternary operator vs if else", "body": "<p>On most of the modern compilers it makes no difference if you are using either of the two. The only thing you can concentrate upon is the maintainability of the code. The only difference you can get with ternary operator is that depending on some expression you can initialize a constant variable. Something like this:</p>\n\n<pre><code>const int a = (x&lt;y) ? y : x;\n</code></pre>\n\n<p>which cant be done using if else</p>\n"}], "owner": {"reputation": 27, "user_id": 2470599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fde767c8b99c8f64a557a42d3f20f6e?s=128&d=identicon&r=PG", "display_name": "kaushal mishra", "link": "https://stackoverflow.com/users/2470599/kaushal-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "closed_date": 1427907160, "answer_count": 2, "score": 0, "last_activity_date": 1427883323, "creation_date": 1427883021, "question_id": 29388072, "link": "https://stackoverflow.com/questions/29388072/ternary-operator-vs-if-else", "closed_reason": "Duplicate", "title": "Ternary operator vs if else", "body": "<p>is ternary operator is better than if else block in execution time or under different scenerio? I have gone through many links but didnt get satisfied answer.</p>\n"}, {"tags": ["c", "memory-management", "c++-cli"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1427882501, "post_id": 29387812, "comment_id": 46953552, "body": "If this was C/C++ and native is a object of type <code>image_t</code> and if it is not a pointer then no need to delete it and it will get deleted when you exit the function. If it is a pointer and memory is allocated dynamically then you need to free it. Again you are not deleting the object it is the memory the pointer is pointing to"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1427884253, "post_id": 29387812, "comment_id": 46954481, "body": "If that the type definitions from <a href=\"https://stackoverflow.com/questions/24548468/passing-managed-c-arrays-to-and-from-unmanaged-c\">your previous question</a> on the subject did not change: No, cleanup is not necessary. However, <code>delete *native;</code> should then not compile because <code>*native</code> is not a valid expression. (Nor should <code>delete native;</code> because <code>native</code> is not a pointer.) Did they change?"}, {"owner": {"reputation": 5169, "user_id": 6776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd9d1f08afc749be0095b81df67da2c8?s=128&d=identicon&r=PG", "display_name": "thomasb", "link": "https://stackoverflow.com/users/6776/thomasb"}, "edited": false, "score": 0, "creation_date": 1427895063, "post_id": 29387812, "comment_id": 46961194, "body": "I have update the question to include the full code (I think ?). Before I wrote the question <code>native</code> actually was a pointer, but I noticed I did not need it, so I just switched while writing the question (and did not check it would work :( )."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 4735949, "user_type": "registered", "profile_image": "https://graph.facebook.com/961410163878654/picture?type=large", "display_name": "Akbar Oripov", "link": "https://stackoverflow.com/users/4735949/akbar-oripov"}, "is_accepted": false, "score": 1, "last_activity_date": 1427883847, "creation_date": 1427883847, "answer_id": 29388349, "question_id": 29387812, "link": "https://stackoverflow.com/questions/29387812/do-i-need-to-delete-unmanaged-objects-in-c-cli/29388349#29388349", "title": "Do I need to delete unmanaged objects in C++/CLI", "body": "<p>You only need to deallocate memory for the objects that are created dynamically, static objects will be destroyed by destructors when variable goes out of scope.</p>\n"}, {"comments": [{"owner": {"reputation": 5169, "user_id": 6776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd9d1f08afc749be0095b81df67da2c8?s=128&d=identicon&r=PG", "display_name": "thomasb", "link": "https://stackoverflow.com/users/6776/thomasb"}, "edited": false, "score": 0, "creation_date": 1427895189, "post_id": 29388986, "comment_id": 46961259, "body": "Sorry, I forgot : I have added the full wrapper code (I think ?). The <code>Image</code> object is actually not the pixel buffer, just a structure for its position. Very interesting anyway :)"}, {"owner": {"reputation": 5169, "user_id": 6776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd9d1f08afc749be0095b81df67da2c8?s=128&d=identicon&r=PG", "display_name": "thomasb", "link": "https://stackoverflow.com/users/6776/thomasb"}, "edited": false, "score": 0, "creation_date": 1427899191, "post_id": 29388986, "comment_id": 46964025, "body": "I thought the <code>image_t</code> was passed by value to the overloaded constructor, and so a copy of it was made ? Am I wrong ? Is the <code>image_t</code> used in the <code>ResizeToFill</code> method still &quot;bound&quot; to the <code>Image</code> instance ?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "reply_to_user": {"reputation": 5169, "user_id": 6776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd9d1f08afc749be0095b81df67da2c8?s=128&d=identicon&r=PG", "display_name": "thomasb", "link": "https://stackoverflow.com/users/6776/thomasb"}, "edited": false, "score": 0, "creation_date": 1427900939, "post_id": 29388986, "comment_id": 46965326, "body": "Hmm, it seems so. I completely based my answer on the assumption that image_t actually stores an image. I don&#39;t want to rewrite it, the big picture of it isn&#39;t wrong. When you copy a simple struct that doesn&#39;t have any pointer members then you are making a deep copy."}, {"owner": {"reputation": 5169, "user_id": 6776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd9d1f08afc749be0095b81df67da2c8?s=128&d=identicon&r=PG", "display_name": "thomasb", "link": "https://stackoverflow.com/users/6776/thomasb"}, "edited": false, "score": 0, "creation_date": 1427903798, "post_id": 29388986, "comment_id": 46967104, "body": "Ok so since the <code>image_t</code> structure contains a pointer (<code>frame_t *hints</code>) it makes a shallow copy. I will review my code to find areas of improvements in this area. Thanks!"}], "tags": [], "owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "is_accepted": true, "score": 1, "last_activity_date": 1427885738, "creation_date": 1427885738, "answer_id": 29388986, "question_id": 29387812, "link": "https://stackoverflow.com/questions/29387812/do-i-need-to-delete-unmanaged-objects-in-c-cli/29388986#29388986", "title": "Do I need to delete unmanaged objects in C++/CLI", "body": "<pre><code>image = gcnew Image(native);\n</code></pre>\n\n<p>It entirely depends on what this statement does.  The library you are using is not a common one and that Image wrapper class is not System::Drawing::Image so there's no way to tell from just your snippet.</p>\n\n<p>There are two ways the programmer of this library could have implemented it.  If he did the smart way then he made it your problem and created a <em>shallow copy</em>.  In other words, a new instance of Image that shares the same underlying pixel buffer as <em>native</em>.  Or he could have created a <em>deep copy</em> and created a new pixel buffer for the Image object.  In which case you can safely destroy the image_t object.</p>\n\n<p>That difference exists in .NET as well, Bitmap::Clone() makes a shallow copy, the Bitmap(Image^) constructor makes a deep copy.  There is a huge difference between the two, the shallow copy takes a few handfuls of <em>nanoseconds</em> at most.  The deep copy takes much, much longer if the image is large, could be <em>milliseconds</em>.</p>\n\n<p>Dealing with a shallow copy if quite painful, you probably can't change the finalizer of the Image class.  You have to keep the image_t* around and get a good signal that the Image object is no longer in use so you can safely delete it.  You'll have to significantly restructure your code.  If you guessed wrong then you got a pretty nasty problem, it isn't guaranteed to crash your code.  You've got a dangling pointer that isn't that likely to cause an access violation.  Seems to work just fine when you test, corrupts the displayed image or crashes your program undiagnosably when you're not looking.</p>\n\n<p>Very important to look at the library's source code or documentation to know what it does.</p>\n"}], "owner": {"reputation": 5169, "user_id": 6776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd9d1f08afc749be0095b81df67da2c8?s=128&d=identicon&r=PG", "display_name": "thomasb", "link": "https://stackoverflow.com/users/6776/thomasb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 29388986, "answer_count": 2, "score": 0, "last_activity_date": 1427897655, "creation_date": 1427882316, "last_edit_date": 1427897655, "question_id": 29387812, "link": "https://stackoverflow.com/questions/29387812/do-i-need-to-delete-unmanaged-objects-in-c-cli", "title": "Do I need to delete unmanaged objects in C++/CLI", "body": "<p>I have a C++/CLI method calling C structures and methods:</p>\n\n<p>In the C header:</p>\n\n<pre><code>typedef struct {\n  int left;\n  int top;\n  int right;\n  int bottom;\n} frame_t;\n\ntypedef struct {\n  int     width;\n  int     height;\n  int     group;\n  int     nb_hints;\n  frame_t *hints;\n\n  frame_t view;\n  frame_t dest;\n  int     page;\n} image_t;\n\nint resize_to_fill(image_t *image, int width, int height);\n</code></pre>\n\n<p>The C++/CLI wrappers:</p>\n\n<pre><code>public ref class Frame {\npublic:\n    int Left;\n    int Top;\n    int Right;\n    int Bottom;\n\n    property int Width {\n        int get() {\n            return (Right - Left);\n        }\n    }\n    property int Height {\n        int get() {\n            return (Bottom - Top);\n        }\n    }\n\n    Frame() {\n        Top = 0;\n        Left = 0;\n        Bottom = 0;\n        Right = 0;\n    }\n\ninternal:\n    frame_t ToNative() {\n        frame_t f;\n        f.left = Left;\n        f.top = Top;\n        f.right = Right;\n        f.bottom = Bottom;\n        return f;\n    }\n\n    Frame(const frame_t &amp;f) {\n        Left = f.left;\n        Top = f.top;\n        Right = f.right;\n        Bottom = f.bottom;\n    }\n};\n\npublic ref class Image {\nprivate:\n    void init(int nb_hints) {\n        this-&gt;view = gcnew Frame();\n        this-&gt;dest = gcnew Frame();\n        this-&gt;page = 0;\n        this-&gt;Hints = gcnew array&lt;Frame^&gt;(nb_hints);\n    }\n\npublic:\n    int Width;\n    int Height;\n    array&lt;Frame^&gt;^ Hints;\n\n    property int Group {\n        int get() {\n            return group;\n        }\n    }\n    property int Page {\n        int get() {\n            return this-&gt;page;\n        }\n    }\n    property Frame^ View {\n        Frame^ get() {\n            return this-&gt;view;\n        }\n    }\n    property Frame^ Dest {\n        Frame^ get() {\n            return this-&gt;dest;\n        }\n    }\n\n    Image(int nb_hints) {\n        this-&gt;init(nb_hints);\n    }\n\n    Image() {\n        this-&gt;init(0);\n    }\n\ninternal:\n    Frame^ view;\n    Frame^ dest;\n    int page;\n    int group;\n\n    Image(image_t native) {\n        this-&gt;Width = native.width;\n        this-&gt;Height = native.height;\n\n        this-&gt;Hints = gcnew array&lt;Frame^&gt;(native.nb_hints);\n        for (int i = 0; i &lt; native.nb_hints; i++)\n        {\n            this-&gt;Hints[i] = gcnew Frame(native.hints[i]);\n        }\n\n        this-&gt;group = native.group;\n        this-&gt;page = native.page;\n        this-&gt;dest = gcnew Frame(native.dest);\n        this-&gt;view = gcnew Frame(native.view);\n    }\n\n    image_t ToNative() {\n        image_t i;\n        i.width = this-&gt;Width;\n        i.height = this-&gt;Height;\n        i.group = this-&gt;Group;\n\n        // hints\n        i.nb_hints = this-&gt;Hints-&gt;Length;\n        i.hints = new frame_t[this-&gt;Hints-&gt;Length];\n        for (int nb = 0; nb &lt; this-&gt;Hints-&gt;Length; nb++)\n        {\n            i.hints[nb] = this-&gt;Hints[nb]-&gt;ToNative();\n        }\n\n        // output values\n        i.page = this-&gt;Page;\n        i.view = this-&gt;View-&gt;ToNative();\n        i.dest = this-&gt;Dest-&gt;ToNative();\n\n        return i;\n    }\n};\n\n// later, in another class\nstatic int ResizeToFill(Image^ %image, int width, int height) {\n    image_t native = image-&gt;ToNative();\n\n    int result = resize_to_fill(&amp;native, width, height);\n\n    image = gcnew Image(native);\n\n    // do I need to do this ?\n    delete *native;\n\n    return result;\n}\n</code></pre>\n\n<p>Do I need to delete the native structure instance ?</p>\n\n<p>I've searched for this answer already, but it's much more often about disposing of managed resources than unmanaged ones, which seems to be evident to most people. I'm new to C/C++ so I don't have all the memory management reflexes.</p>\n"}, {"tags": ["c", "file", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1427879229, "post_id": 29386812, "comment_id": 46951720, "body": "Standard Warning : Please <a href=\"http://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family in <code>C</code>."}, {"owner": {"reputation": 4190, "user_id": 1520248, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/vySwn.jpg?s=128&g=1", "display_name": "niyasc", "link": "https://stackoverflow.com/users/1520248/niyasc"}, "edited": false, "score": 1, "creation_date": 1427879474, "post_id": 29386812, "comment_id": 46951878, "body": "What is <code>length</code>? Where it is defined?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1427879746, "post_id": 29386812, "comment_id": 46952049, "body": "@SouravGhosh: All in all, you don&#39;t cast the return value of <code>malloc()</code> anytime, because:  in C is not required;  In C++ it would be required but in C++ you don&#39;t even use <code>malloc()</code> ;)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1427879834, "post_id": 29386812, "comment_id": 46952105, "body": "@Zaibis yeah. right. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1427879347, "creation_date": 1427879347, "answer_id": 29386854, "question_id": 29386812, "link": "https://stackoverflow.com/questions/29386812/when-the-file-pointer-reads-the-file-over-the-border/29386854#29386854", "title": "When the file pointer reads the file over the border\uff1f", "body": "<p>In your code, you're allocating memory for only one variable of type <code>struct student</code> in <code>node</code>, but you're accessing out-of-bound memory by using the incremental index <code>i</code> in </p>\n\n<pre><code>if (fread(&amp;node[i], length, 1, fp) != 1)\n</code></pre>\n\n<p>which in turn invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 725, "user_id": 2210414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd09de64f1e91ea5a3c729ec33ac2ba?s=128&d=identicon&r=PG", "display_name": "Yasir Majeed", "link": "https://stackoverflow.com/users/2210414/yasir-majeed"}, "is_accepted": false, "score": 0, "last_activity_date": 1427879568, "creation_date": 1427879568, "answer_id": 29386914, "question_id": 29386812, "link": "https://stackoverflow.com/questions/29386812/when-the-file-pointer-reads-the-file-over-the-border/29386914#29386914", "title": "When the file pointer reads the file over the border\uff1f", "body": "<p>I think the problem is in the line</p>\n\n<pre><code>if (fread(&amp;node[i], length, 1, fp) != 1)\n</code></pre>\n\n<p>Because fread will return > 0 value when it is successful. If the struct student has size > 1 your loop will break after the first node has been read. And it will not read remaining nodes</p>\n"}], "owner": {"reputation": 45, "user_id": 4373787, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95249ed6398fc489e27783168f9c3899?s=128&d=identicon&r=PG&f=1", "display_name": "qiabigin", "link": "https://stackoverflow.com/users/4373787/qiabigin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438315409, "creation_date": 1427879203, "last_edit_date": 1438315409, "question_id": 29386812, "link": "https://stackoverflow.com/questions/29386812/when-the-file-pointer-reads-the-file-over-the-border", "title": "When the file pointer reads the file over the border\uff1f", "body": "<p>I first read the file in binary, when I read the end of file, the file is closed, visual stdio 2013 error pointer over the border.</p>\n\n<pre><code>FILE *fp;\nfp = fopen(\"stu_manage.txt\", \"ab+\");\nfseek(fp,0L,SEEK_END);\nlong last = ftell(fp) / length;\nlong i = 0L;\nrewind(fp);\nstruct student *node=(struct student*)malloc(sizeof(struct student));\nfor (; i &lt; last; i++)\n{\n    if (fread(&amp;node[i], length, 1, fp) != 1)\n    {\n        printf(\"read conpletely\");\n        break;\n    }\n}\nif (fp!=NULL)\n   fclose(fp);\n</code></pre>\n\n<p>When I put here the pointer change into global variables, this error is    solved, the array in some degree equivalent to the pointer here could not run I feel unable to understand.</p>\n"}, {"tags": ["c", "assembly", "cpuid"], "answers": [{"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 3, "last_activity_date": 1427880624, "creation_date": 1427880624, "answer_id": 29387255, "question_id": 29386666, "link": "https://stackoverflow.com/questions/29386666/how-to-recognize-cpu-brand-name-in-c-assembler-by-cpuid-instruction/29387255#29387255", "title": "How to recognize cpu brand name in c/assembler by cpuid instruction", "body": "<p>The <code>cpuid</code> instruction tells you various things about the CPU depending on the content of the <code>eax</code> register. When <code>eax</code> contains zero, the registers <code>ebx</code>, <code>edx</code>, and <code>ecx</code> contain a string describing the processor's vendor. The code you have pulls the string from the registers and prints it out.</p>\n\n<p>Read <a href=\"https://en.wikipedia.org/wiki/CPUID\" rel=\"nofollow\">Wikipedia</a> for further details on <code>cpuid</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 4737347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2552c0d6aba5c7198755fc1b8ce091a?s=128&d=identicon&r=PG&f=1", "display_name": "Haidin", "link": "https://stackoverflow.com/users/4737347/haidin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "closed_date": 1427887546, "accepted_answer_id": 29387255, "answer_count": 1, "score": -2, "last_activity_date": 1433067036, "creation_date": 1427878713, "last_edit_date": 1433067036, "question_id": 29386666, "link": "https://stackoverflow.com/questions/29386666/how-to-recognize-cpu-brand-name-in-c-assembler-by-cpuid-instruction", "closed_reason": "Needs details or clarity", "title": "How to recognize cpu brand name in c/assembler by cpuid instruction", "body": "<p>I have no idea how should this program work, i found some codes but i don't understand them, if somebody here was so kind and had program like this could you explain it to me?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;string.h&gt;\nint main()\n{\nchar name[13];\n __asm\n{\nXOR EAX,EAX\nCPUID\nMOV dword ptr [name], EBX\nMOV dword ptr [name+4], EDX\nMOV dword ptr [name+8], ECX\n }\nname[12]=0;\nprintf(\"Procesor: %s\\n\", name);\ngetchar();\nreturn 0;\n}\n</code></pre>\n"}]