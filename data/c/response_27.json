[{"tags": ["c", "c11"], "comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 2, "creation_date": 1437004522, "post_id": 31443077, "comment_id": 50855440, "body": "No, it is not permitted. The existence of a conversion path consisting entirely of legal implicit conversions says nothing about the validity of performing arithmetic on, or dereferencing, such pointers. Keep in mind you can make nearly arbitrary implicit conversion paths with pointers to <code>void</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1437004525, "post_id": 31443077, "comment_id": 50855441, "body": "Lack of a compiler error when stepping through an intermediate pointer type doesn&#39;t necessarily mean the world is right. A simple intermediate <code>void*</code> (or even a cast) would accomplish the same lack-of-errors in C."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1437009527, "post_id": 31443077, "comment_id": 50856651, "body": "I&#39;m not so sure about your specific code, but I believe <code>print_array( (int(*)[2])&amp;a , 3);</code> would be legal. The standard is not precisely clear with regarding accessing arrays via a cast to different array type."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1437027404, "post_id": 31443077, "comment_id": 50861702, "body": "@R.. could you please elaborate this into an answer? I am ok with the fact that the conversion alone doesn&#39;t tell anything about validity. But it doesn&#39;t tell anything about invalidity, either."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1437028727, "post_id": 31443077, "comment_id": 50862378, "body": "I think it&#39;s legal according to the C standard but it&#39;s such an awful idea that it&#39;s moot and not worth the time to do the language lawyering to determine a definitive answer."}], "answers": [{"tags": [], "owner": {"reputation": 1482, "user_id": 297216, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1d89c8b79c5991c01b0f81c731970f5?s=128&d=identicon&r=PG", "display_name": "Cobusve", "link": "https://stackoverflow.com/users/297216/cobusve"}, "is_accepted": false, "score": 1, "last_activity_date": 1437037070, "last_edit_date": 1495539858, "creation_date": 1437037070, "answer_id": 31449724, "question_id": 31443077, "link": "https://stackoverflow.com/questions/31443077/is-reformat-of-multi-dimensional-array-by-pointer-to-incomplete-array-type-all/31449724#31449724", "title": "Is &quot;reformat&quot; of multi-dimensional array by pointer to incomplete array type allowed in C?", "body": "<p>The behavior you see is because of the way multidimensional arrays are handled in C. </p>\n\n<p>Have a look at this question <a href=\"https://stackoverflow.com/questions/2003745/pointer-address-in-a-c-multidimensional-array\">Pointer address in a C multidimensional array</a></p>\n"}], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 2, "answer_count": 1, "score": 8, "last_activity_date": 1437037070, "creation_date": 1437003652, "question_id": 31443077, "link": "https://stackoverflow.com/questions/31443077/is-reformat-of-multi-dimensional-array-by-pointer-to-incomplete-array-type-all", "title": "Is &quot;reformat&quot; of multi-dimensional array by pointer to incomplete array type allowed in C?", "body": "<p>Consider following declaration:</p>\n\n<pre><code>int a[M][N]; // M and N are known compile-time\n</code></pre>\n\n<p>Would it be  legal to treat it like as it was declared as:</p>\n\n<pre><code>int a[N][M];\n</code></pre>\n\n<p>or even:</p>\n\n<pre><code>int a[A][B]; // where A * B = M * N\n</code></pre>\n\n<p>in C without breaking its rules (badly)?</p>\n\n<p>I found that it can be acomplished without any cast:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid print_array(int a[][2], int n);\n\nint main(void)\n{\n    int a[2][3] = {{1, 2, 3}, {4, 5, 6}};\n\n    //int (*p1)[2] = a; // compile error\n\n    int (*ptr_temp)[] = a; // pointer to array of incomplete type\n    int (*p2)[2] = ptr_temp; // compiles without any warning\n\n    print_array(p2, 3);\n}\n\nvoid print_array(int a[][2], int n)\n{\n    for (int i = 0; i &lt; n; i++)\n        for (int j = 0; j &lt; 2; j++)\n            printf(\"a[%d][%d] = %d\\n\", i, j, a[i][j]);\n}\n</code></pre>\n\n<p>Notice that we cannot assign <code>a</code> to <code>p1</code> pointer directly. However compiler does not complain when <code>p2</code> is assigned with <code>ptr_temp</code> even if it seems to be potentially dangerous (it does not require any cast for that). Is it really sanitized? If so, then why it disallows the first assignmment?</p>\n"}, {"tags": ["c", "floating-point", "double", "rounding"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1437003574, "post_id": 31443002, "comment_id": 50855166, "body": "if c is integer type then you can just cast"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1437003587, "post_id": 31443002, "comment_id": 50855170, "body": "At least on some architectures you may be able to set the rounding mode to round towards zero or negative infinity: <code>IEEE 754 1985: 4.2. Directed Roundings An implementation shall also provide three user-selectable directed rounding modes: round toward +INFINITY, round toward \u2013 INFINITY, and round toward 0.</code>"}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1437003632, "post_id": 31443002, "comment_id": 50855181, "body": "Same as Weather Vane, but the longer route, <code>c = floor(-1 * (a + b))*-1</code>; if there was some issue with decimal rounding."}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1437003819, "post_id": 31443002, "comment_id": 50855243, "body": "@user3528438 it is floating point type, not integer. If it were integer there would be no question to begin with."}, {"owner": {"reputation": 23, "user_id": 4909424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a611d4e3199610198f3d26ae2d01feb?s=128&d=identicon&r=PG&f=1", "display_name": "drasko", "link": "https://stackoverflow.com/users/4909424/drasko"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1437003925, "post_id": 31443002, "comment_id": 50855266, "body": "@WeatherVane I edited the post, I&#39;m interested in finding a floating point value, not an integer one. Sorry for being vague."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1437003960, "post_id": 31443002, "comment_id": 50855273, "body": "If I previously misunderstood your question, I think you will find that any lack in precision will result in <code>c</code> being always <code>&lt;= a + b</code> when <code>a</code> and <code>b</code> are positive."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1437004090, "post_id": 31443002, "comment_id": 50855318, "body": "@WeatherVane: ...unless the floating-point implementation is in round-to-nearest- or round-towards-(positive-)infinity-mode?"}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1437004126, "post_id": 31443002, "comment_id": 50855330, "body": "@WeatherVane ah I misread, now looking, also wondering how two positives could be negative, if added."}, {"owner": {"reputation": 23, "user_id": 4909424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a611d4e3199610198f3d26ae2d01feb?s=128&d=identicon&r=PG&f=1", "display_name": "drasko", "link": "https://stackoverflow.com/users/4909424/drasko"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1437004258, "post_id": 31443002, "comment_id": 50855374, "body": "@EOF: Looks like what I&#39;m looking for. I found a how-to at <a href=\"http://stackoverflow.com/questions/6867693/change-floating-point-rounding-mode\">link</a>  Thanks!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1437004542, "post_id": 31443002, "comment_id": 50855448, "body": "@EOF thanks yes, just been looking at MSVC <code>_control87</code> which can specify a flag <code>_MCW_RC</code> for Rounding control. <a href=\"https://msdn.microsoft.com/en-us/library/e9b52ceh.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/e9b52ceh.aspx</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "is_accepted": true, "score": 1, "last_activity_date": 1437004942, "last_edit_date": 1437004942, "creation_date": 1437004351, "answer_id": 31443173, "question_id": 31443002, "link": "https://stackoverflow.com/questions/31443002/round-down-a-floating-point-result/31443173#31443173", "title": "Round Down a Floating Point Result", "body": "<p>Based on your description, it seems like you want to control the rounding mode for a floating-point operation. This is supported in C99 by the functionality provided in the header file <code>fenv.h</code>. You may need to instruct your compiler to turn on C99 support, and you may need to instruct it to perform floating-point arithmetic in an IEEE-754 compliant way. Below is a minimal example showing how to perform <code>double</code> addition with truncation (rounding towards zero). Since your operands are known to be positive, this is equivalent to rounding down (towards negative infinity).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fenv.h&gt;\n\n#pragma STDC FENV_ACCESS ON\n\ndouble dadd_rz (double a, double b) \n{\n    double res;\n    int orig_mode = fegetround ();\n    fesetround (FE_TOWARDZERO);  // set rounding mode to truncate\n    res = a + b;\n    fesetround (orig_mode);      // restore rounding mode\n    return res;\n}\n\nint main (void)\n{\n    double a = 0x1.fffffffffffffp1023;\n    printf (\"                  a = %20.13a\\n\", a);\n    printf (\"                a+a = %20.13a\\n\", a + a);\n    printf (\"round_to_zero (a+a) = %20.13a\", dadd_rz (a, a));\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The output of the above program should look something like this (note that the printing of infinities is implementation dependent):</p>\n\n<pre><code>                  a = 0x1.fffffffffffffp+1023\n                a+a = 0x1.#INF000000000p+0\nround_to_zero (a+a) = 0x1.fffffffffffffp+1023\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1437005017, "last_edit_date": 1495542105, "creation_date": 1437005017, "answer_id": 31443284, "question_id": 31443002, "link": "https://stackoverflow.com/questions/31443002/round-down-a-floating-point-result/31443284#31443284", "title": "Round Down a Floating Point Result", "body": "<p>A tricky problem.</p>\n\n<p><a href=\"https://stackoverflow.com/users/3185968/eof\">@EOF</a>'s comment above to \"round toward 0\" is good and will provide an optimal result.</p>\n\n<pre><code>#ifdef _ _STDC_IEC_559_ _ \n    fesetround(FE_DOWNWARD);\n    c = a + b;\n#else\n   #error unable to set rounding mode\n#endif\n</code></pre>\n\n<p>OP's original approach is close too.  Any good compilation/processor should be expected to create the best answer to with in 0.5 or 1.0 ULP (depending on rounding mode).  It will certainly create a sum <code>c2</code> less than arithmetic <code>a+b</code>, but <code>c</code> <em>may</em> meet the requirements too.</p>\n\n<pre><code>c = a + b\nc2 = nextafter(c, -DBL_MAX);\n</code></pre>\n\n<p><code>c = floor(a + b)</code> will not work as <code>a</code> could be far larger in magnitude than some small negative <code>b</code> such that the computed sum is simple still <code>a</code> and fails the <em>arithmetic</em> <code>c &lt;= a + b</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 4909424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a611d4e3199610198f3d26ae2d01feb?s=128&d=identicon&r=PG&f=1", "display_name": "drasko", "link": "https://stackoverflow.com/users/4909424/drasko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 31443173, "answer_count": 2, "score": 2, "last_activity_date": 1437005017, "creation_date": 1437003212, "last_edit_date": 1437003705, "question_id": 31443002, "link": "https://stackoverflow.com/questions/31443002/round-down-a-floating-point-result", "title": "Round Down a Floating Point Result", "body": "<p>I have two floating point (double) values <em>a</em> and <em>b</em>, and I'm looking to add them to get a result <em>c</em>.  </p>\n\n<p>I know that <em>c</em> will somehow be approximated, because everything is finite precision. Now, I want to 'round down' <em>c</em>, meaning that the floating point <em>c</em> is not greater than the real sum of floating points <em>a</em> and <em>b</em>, or <em>c</em> &lt;= <em>a</em> + <em>b</em>.</p>\n\n<p>How can I do this? The following code in c comes to mind, but I'm not sure whether the answer will be what I want.</p>\n\n<pre><code>c = nextafter(a + b, bigNegativeNumber)\n</code></pre>\n\n<p>Same question goes for multiplication instead of addition. :)</p>\n\n<p>PS. If it helps, <em>a</em> and <em>b</em> are always non-negative numbers.</p>\n\n<p>Edit: <em>c</em> should be a floating point as well</p>\n"}, {"tags": ["c", "malloc", "structure"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1437003174, "post_id": 31442927, "comment_id": 50855022, "body": "<code>*bar = (foo){ 3, 4};</code>"}, {"owner": {"reputation": 736, "user_id": 3695941, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d09ea15b72ed247b054bc6b1df37ab44?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewGrant", "link": "https://stackoverflow.com/users/3695941/andrewgrant"}, "edited": false, "score": 0, "creation_date": 1437003450, "post_id": 31442927, "comment_id": 50855122, "body": "Thanks, This worked!"}], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 4, "creation_date": 1437003454, "post_id": 31443038, "comment_id": 50855125, "body": "It may look like a cast operator but it isn&#39;t one. The whole thing is a compound literal."}, {"owner": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1437003706, "post_id": 31443038, "comment_id": 50855207, "body": "@cremno So it would seem. Good point. I&#39;ve updated the answer with a reference to the standard."}], "tags": [], "owner": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "is_accepted": true, "score": 7, "last_activity_date": 1437003789, "last_edit_date": 1437003789, "creation_date": 1437003335, "answer_id": 31443038, "question_id": 31442927, "link": "https://stackoverflow.com/questions/31442927/initializing-malloced-structure/31443038#31443038", "title": "Initializing Malloc&#39;ed structure", "body": "<p>(This was answered in comments, so making it a CW).</p>\n\n<p>You need to cast the right-hand side of the assignment, like so:</p>\n\n<pre><code>*bar = (foo) {3,4};\n</code></pre>\n\n<p>As pointed out by @cremno in the comment, this isn't a cast but rather an assignment of a <em>compound literal</em></p>\n\n<p>The relevant section of the C99 standard is: <em>6.5.2.5 Compound literals</em> which says:</p>\n\n<blockquote>\n  <p>A postfix expression that consists of a parenthesized type name\n  followed by a brace enclosed list of initializers is a compound\n  literal. It provides an unnamed object whose value is given by the\n  initializer list</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 736, "user_id": 3695941, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d09ea15b72ed247b054bc6b1df37ab44?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewGrant", "link": "https://stackoverflow.com/users/3695941/andrewgrant"}, "edited": false, "score": 0, "creation_date": 1437003537, "post_id": 31443050, "comment_id": 50855154, "body": "I understand how to initialize it like that, I&#39;m looking specifically for brace initialization."}, {"owner": {"reputation": 989, "user_id": 5104621, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ad79WlusIFc/AAAAAAAAAAI/AAAAAAAAAIs/Ia5RgLhh1cw/photo.jpg?sz=128", "display_name": "Shreyas Chavan", "link": "https://stackoverflow.com/users/5104621/shreyas-chavan"}, "reply_to_user": {"reputation": 736, "user_id": 3695941, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d09ea15b72ed247b054bc6b1df37ab44?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewGrant", "link": "https://stackoverflow.com/users/3695941/andrewgrant"}, "edited": false, "score": 0, "creation_date": 1437003745, "post_id": 31443050, "comment_id": 50855218, "body": "In that case, <code>*bar = (foo) {3,4};</code> should word.  <a href=\"https://ideone.com/gzbvUA\" rel=\"nofollow noreferrer\">demo</a>"}], "tags": [], "owner": {"reputation": 989, "user_id": 5104621, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ad79WlusIFc/AAAAAAAAAAI/AAAAAAAAAIs/Ia5RgLhh1cw/photo.jpg?sz=128", "display_name": "Shreyas Chavan", "link": "https://stackoverflow.com/users/5104621/shreyas-chavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1437003458, "creation_date": 1437003458, "answer_id": 31443050, "question_id": 31442927, "link": "https://stackoverflow.com/questions/31442927/initializing-malloced-structure/31443050#31443050", "title": "Initializing Malloc&#39;ed structure", "body": "<p>bar is a pointer that holds reference to the malloced foo struct</p>\n\n<p>Use <code>bar-&gt;x=3;bar-&gt;y=4</code> </p>\n"}], "owner": {"reputation": 736, "user_id": 3695941, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d09ea15b72ed247b054bc6b1df37ab44?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewGrant", "link": "https://stackoverflow.com/users/3695941/andrewgrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1374, "favorite_count": 1, "accepted_answer_id": 31443038, "answer_count": 2, "score": 6, "last_activity_date": 1444990508, "creation_date": 1437002759, "last_edit_date": 1444990508, "question_id": 31442927, "link": "https://stackoverflow.com/questions/31442927/initializing-malloced-structure", "title": "Initializing Malloc&#39;ed structure", "body": "<p>I am trying to initalize a structure using braces, but i am really trying to initalize the structure that is pointed to by a pointer returned from a malloc call.</p>\n\n<pre><code>typedef struct foo{\n    int x;\n    int y;\n} foo;\n\nfoo bar = {5,6};\n</code></pre>\n\n<p>I understand how to do that, but i need to do it in this context.</p>\n\n<pre><code>foo * bar = malloc(sizeof(foo));\n*bar = {3,4};\n</code></pre>\n"}, {"tags": ["c", "linked-list", "stack"], "comments": [{"owner": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "reply_to_user": {"reputation": 2677, "user_id": 3044080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cJDU5.jpg?s=128&g=1", "display_name": "nomistic", "link": "https://stackoverflow.com/users/3044080/nomistic"}, "edited": false, "score": 0, "creation_date": 1437004035, "post_id": 31442444, "comment_id": 50855298, "body": "thanks @nomistic, i&#39;ve lurked a bit here before but this is my first post; I&#39;m still learning the ropes :P"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437008115, "post_id": 31442444, "comment_id": 50856272, "body": "As with many things there are multiple ways to do what you want. One example is to use <a href=\"http://linux.die.net/man/3/scanf\" rel=\"nofollow noreferrer\">fscanf</a> to read and parse the file at the same time."}, {"owner": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437013199, "post_id": 31442444, "comment_id": 50857612, "body": "@Alanau so I would have to just manually read each portion bit by bit.  Like do an fscanf and store it in produce_Item.whateverfield. Then go to the next part and repeat until EOF? Is there another, more efficient way perhaps?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437013552, "post_id": 31442444, "comment_id": 50857716, "body": "Yes. Though you can pass the field pointers directly to fscanf so it&#39;s a single read (not a read and copy). Why do you think that is inefficient? It takes one pass through the file. That would seem like the minimum required. Or are you really asking whether there is a <i>simpler</i> &quot;read and parse this file all in one go&quot; API (note: simpler not more efficient)? The answer to the latter is that there is no standard C API for that (AFAIK)."}, {"owner": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437013997, "post_id": 31442444, "comment_id": 50857826, "body": "@AlanAu yes, I misspoke; simpler was what I intended. I&#39;m not sure I understand what you mean passing the field pointers.  Would you be passing it in the fscanf as an argument? I understand what you mean by the field pointers, the different parts of the produce_Item but I can&#39;t quite visualize what you mean by it in code form.  Do you maybe know of another question on here relating to that because google didn&#39;t quite help me."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437015661, "post_id": 31444618, "comment_id": 50858239, "body": "Code does not set <code>(*newItem)-&gt;next</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437016928, "post_id": 31444618, "comment_id": 50858539, "body": "@chux It does set (*newItem)-&gt;next (in arguably a less common way). <code>newItem</code> is set to point to the next pointer. The body of the <code>do</code> loop will thus write a pointer value into <code>next</code> from the <code>malloc</code> result. Took me a few minutes to wrap my head around that one too."}, {"owner": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437016943, "post_id": 31444618, "comment_id": 50858547, "body": "@chux So how can you adjust it to make it assign each of the fields and then move on to the next? Also confused with the 5, is the fscanf going to return an int value of 5 because of the fields?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "edited": false, "score": 0, "creation_date": 1437017235, "post_id": 31444618, "comment_id": 50858616, "body": "@learning_this_now Please read the man page for <a href=\"http://linux.die.net/man/3/scanf\" rel=\"nofollow noreferrer\">fscanf</a> to understand what it returns. And the above code does fill in a new product item for each input line. At the end of the code <code>list</code> will contain a linked list of each of the products. Though IMHO the code uses techniques which are a bit too advanced for illustrating the principles at a beginner level."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437018126, "post_id": 31444618, "comment_id": 50858795, "body": "@Alan Au The <code>next</code> field is only used on the RHS.  It is not set even by <code>malloc()</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437018227, "post_id": 31444618, "comment_id": 50858814, "body": "@chux <code>newItem = &amp;(*newItem)-&gt;next</code> That sets <code>newItem</code> to point to <code>next</code>. Then, <code>*newItem = malloc(sizeof(struct produce_Item));</code> that sets the <code>next</code> pointer."}, {"owner": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437018555, "post_id": 31444618, "comment_id": 50858901, "body": "@alanau i tried using this method and its throwing an error &quot;request for member next is something not in struct or union&quot;"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "edited": false, "score": 0, "creation_date": 1437018971, "post_id": 31444618, "comment_id": 50858996, "body": "@learning_this_now Please start a new question if you really want to get that issue solved. Can not help you from a description of code. The exact code needs to be shown otherwise it&#39;s impossible to say what the problem is (e.g. you may think you have transcribed the example correctly but perhaps not)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437021446, "post_id": 31444618, "comment_id": 50859666, "body": "@Alan Au Agree <code>newItem = &amp;(*newItem)-&gt;next</code> sets <code>newItem</code> to point to <code>next</code>.  That is not the issue - I was not commenting about <code>newItem</code> being set or not.  The <code>.next</code> field is never set nor initialized."}, {"owner": {"reputation": 137, "user_id": 2129573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f795a5364be4045c615cec55fcd755?s=128&d=identicon&r=PG", "display_name": "Mikkel Christiansen", "link": "https://stackoverflow.com/users/2129573/mikkel-christiansen"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437044896, "post_id": 31444618, "comment_id": 50872370, "body": "@chux *newItem IS next. It gets initialized with malloc."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437056029, "post_id": 31444618, "comment_id": 50880418, "body": "@Mikkel Christiansen  <code>struct produce_Item</code> has 6 fields: <code>produce</code>, <code>type</code>, <code>sold_By</code>, <code>price</code>, <code>quantity_In_Stock</code> and <code>next</code>. The <code>fscanf()</code> function initializes the first 5. The 6th field called <code>.next</code> is never set anywhere in code.  Yet code reads <code>.next</code> <i>field</i> with <code>newItem = &amp;(*newItem)-&gt;next</code>.  What value do you think <code>newItem</code> becomes with uninitialized data?"}], "tags": [], "owner": {"reputation": 137, "user_id": 2129573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f795a5364be4045c615cec55fcd755?s=128&d=identicon&r=PG", "display_name": "Mikkel Christiansen", "link": "https://stackoverflow.com/users/2129573/mikkel-christiansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1437045406, "last_edit_date": 1437045406, "creation_date": 1437014969, "answer_id": 31444618, "question_id": 31442444, "link": "https://stackoverflow.com/questions/31442444/reading-various-forms-of-data-from-a-file-and-storing-them-in-a-linked-list-in-c/31444618#31444618", "title": "Reading various forms of data from a file and storing them in a linked list in C", "body": "<pre><code>struct produce_Item *list, **newItem = &amp;list;\ndo\n  *newItem = malloc(sizeof(struct produce_Item));\nwhile (*newItem != NULL &amp;&amp;\n       5 == fscanf(file, \"%19s,%19s,%19s,%f,%d\",\n                         (*newItem)-&gt;produce,\n                         (*newItem)-&gt;type,\n                         (*newItem)-&gt;sold_By,\n                         &amp;(*newItem)-&gt;price,\n                         &amp;(*newItem)-&gt;quantity_In_Stock)\n       &amp;&amp; (newItem = &amp;(*newItem)-&gt;next));\nfree(*newItem);\n*newItem = NULL;\n</code></pre>\n\n<p>Note that this doesn't handle errors like too long descriptions, descriptions containing spaces or data errors. But if the data is garantied to be in order, this should work, if i haven't made a mistake.</p>\n\n<p>EDIT. It didn't handle out of memory either. Otherwise this is the same as chuxs answer, just a little harder to read:)</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "edited": false, "score": 0, "creation_date": 1437019262, "post_id": 31444945, "comment_id": 50859056, "body": "so you&#39;re saying to take in the line, use strtok to separate the parts and store them into the various sections there with sscanf? I read the tutorialpoint article about strtol but im not quite sure how the base value there works."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "edited": false, "score": 0, "creation_date": 1437021756, "post_id": 31444945, "comment_id": 50859758, "body": "@learning_this_now Not saying to use <code>strtok()</code> and then <code>sscanf()</code>.  As this code suggests, use <code>strtok()</code> <i>or</i>  <code>sscanf()</code> <i>or</i> whatever parsing functions needed <i>or</i> any combination of them to interpret the line.  This code just uses <code>sscanf()</code>."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1437024001, "last_edit_date": 1437024001, "creation_date": 1437017695, "answer_id": 31444945, "question_id": 31442444, "link": "https://stackoverflow.com/questions/31442444/reading-various-forms-of-data-from-a-file-and-storing-them-in-a-linked-list-in-c/31444945#31444945", "title": "Reading various forms of data from a file and storing them in a linked list in C", "body": "<p>A typical method to read a link list is to create a temporary head node and use only its <code>.next</code> field.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\n  ...\n  struct produce_Item Head;\n  struct produce_Item *p = &amp;Head;\n  p-&gt;next = NULL;\n</code></pre>\n\n<p>Then loop through the file.  Although it is another step, things are much easier if the input is done by first reading a line with <code>fgets()</code>.  Then parse the line with <code>sscanf()</code> or <code>strtok()</code>, <code>strtol()</code>, etc. as needed.  Once the scanning completes successfully, allocate memory for a new node, save the data in it and advance <code>p</code>.</p>\n\n<pre><code>  FILE *file;\n  char buf[100];\n  while (fgets(buf, sizeof buf, file) != NULL) {\n    struct produce_Item Item;\n    if (5 != sscanf(buf, \"%19s ,%19s ,%19s ,%f ,%d\", Item.produce, Item.type,\n          Item.sold_By, &amp;Item.price, &amp;Item.quantity_In_Stock)) Handle_BadData();\n    Item.next = NULL;\n    // At this point, all 6 fields are set.\n\n    struct produce_Item *Next = malloc(sizeof *Next);\n    if (Next == NULL) Handle_OOM();  // Out of memory\n    *Next = Item; // Copy Item to *Next\n\n    // Advance p\n    // Notice that the first time this executes, it set Head.next\n    p-&gt;next = Next;\n    p = Next; \n  }\n\n  return Head.next; // The head of the list\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5121356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f118da305e03c73d9673c6727227a01?s=128&d=identicon&r=PG&f=1", "display_name": "learning_this_now", "link": "https://stackoverflow.com/users/5121356/learning-this-now"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1437055731, "accepted_answer_id": 31444945, "answer_count": 2, "score": 0, "last_activity_date": 1437045406, "creation_date": 1436999881, "last_edit_date": 1437019388, "question_id": 31442444, "link": "https://stackoverflow.com/questions/31442444/reading-various-forms-of-data-from-a-file-and-storing-them-in-a-linked-list-in-c", "closed_reason": "Needs more focus", "title": "Reading various forms of data from a file and storing them in a linked list in C", "body": "<p>I didn't see anything quite like this so I decided to ask my own. I'm trying to write a program for a class of mine where you read in a set of data about grocery items from a file and you store it in a stack.</p>\n\n<p>I'm having trouble figuring out how to read in all of the different data types. </p>\n\n<p>The data is formatted:</p>\n\n<blockquote>\n  <p>(String)Produce, (String) Type, (String) Sold By [quantity], (float) price, (int) In Stock [quantity].</p>\n</blockquote>\n\n<p>How could I go about reading in these different data types and saving them into my produce item structure.</p>\n\n<pre><code>struct produce_Item\n{\n   char produce[20];\n   char type[20];\n   char sold_By[20];\n   float price;\n   int quantity_In_Stock;\n   struct produce_Item *next;\n }\n</code></pre>\n"}, {"tags": ["c", "linux", "netbeans", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 2979, "user_id": 4014108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N6ChF.png?s=128&g=1", "display_name": "maskacovnik", "link": "https://stackoverflow.com/users/4014108/maskacovnik"}, "edited": false, "score": 3, "creation_date": 1436999094, "post_id": 31442228, "comment_id": 50853601, "body": "can you include initialization as you mentioned in comment?"}, {"owner": {"reputation": 2979, "user_id": 4014108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N6ChF.png?s=128&g=1", "display_name": "maskacovnik", "link": "https://stackoverflow.com/users/4014108/maskacovnik"}, "edited": false, "score": 0, "creation_date": 1437000311, "post_id": 31442228, "comment_id": 50854043, "body": "No, I mean a part of source code where you initialize <code>*list</code> pointer @user3337714"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437000337, "post_id": 31442228, "comment_id": 50854052, "body": "@user3337714 I still don&#39;t see the initialisation of <code>list</code> in main. Please show the code with that fixed as that is definetely a problem."}, {"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "edited": false, "score": 0, "creation_date": 1437000508, "post_id": 31442228, "comment_id": 50854117, "body": "I just posted the GDB error. It is now just simply giving the segmentation fault."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437001055, "post_id": 31442228, "comment_id": 50854285, "body": "@user3337714 I think you are not understanding our request. You said &quot;GDB says *list is not initialized. Even after  initialization same fault.&quot;. Please show us that code change. That is, the actual &quot;after initialization&quot; code."}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "edited": false, "score": 0, "creation_date": 1437001155, "post_id": 31442576, "comment_id": 50854321, "body": "I got the following error <code>main.c:184:39: error: use of undeclared identifier &#39;List&#39;; did you mean &#39;list&#39;?     struct List *list = malloc(sizeof(List));                                       ^~~~                                       list main.c:184:18: note: &#39;list&#39; declared here     struct List *list = malloc(sizeof(List));                  ^</code>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1437001271, "post_id": 31442576, "comment_id": 50854365, "body": "<code>sizeof(*list)</code> or <code>sizeof(struct List)</code>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1437001351, "post_id": 31442576, "comment_id": 50854393, "body": "No problem. It was just a simple typo."}], "tags": [], "owner": {"reputation": 2979, "user_id": 4014108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N6ChF.png?s=128&g=1", "display_name": "maskacovnik", "link": "https://stackoverflow.com/users/4014108/maskacovnik"}, "is_accepted": true, "score": 6, "last_activity_date": 1437001319, "last_edit_date": 1495540903, "creation_date": 1437000604, "answer_id": 31442576, "question_id": 31442228, "link": "https://stackoverflow.com/questions/31442228/c-segmentation-fault-runs-on-netbeans-os-x-but-not-on-linux/31442576#31442576", "title": "C: Segmentation Fault: Runs on NetBeans (OS X), but not on Linux", "body": "<p>Your part of code:</p>\n\n<pre><code>struct List *list; /* GDB says *list is not initialized.\n                      Even after  initialization same fault.*/\n</code></pre>\n\n<p><code>*list</code> pointer is not initialized (no memory allocated), initialize it like this:</p>\n\n<pre><code>list = malloc(sizeof(struct List));\n</code></pre>\n\n<p>If there is no memory allocation, it is <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">Undefined behavior</a></p>\n\n<p>Undefined behaviour can explain the problem \"sometimes works/sometimes not\". See link above to get more information about Undefined behavior</p>\n"}], "owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 31442576, "answer_count": 1, "score": 2, "last_activity_date": 1437001319, "creation_date": 1436998875, "last_edit_date": 1437001222, "question_id": 31442228, "link": "https://stackoverflow.com/questions/31442228/c-segmentation-fault-runs-on-netbeans-os-x-but-not-on-linux", "title": "C: Segmentation Fault: Runs on NetBeans (OS X), but not on Linux", "body": "<p>My program uses a pointer-based linked list. It opens a text file, add (a) /delete's (d) the content as specified to the linked list.</p>\n\n<p>The program runs on Netbeans (MAC OS X). But when I run the program on Linux (RHEL 6.5), I get a segmentation fault.</p>\n\n<p>I ran <code>gdb</code> and got the error posted below. Any help would be appreciated.</p>\n\n<p><strong>CODE</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nstruct Node\n{\n    char name[42];\n    struct Node* prev;\n    struct Node* next;\n};\n\nstruct List\n{\n    struct Node* head;\n    struct Node* tail;\n};\n\nstruct Node* Allocate_node()\n{\n    struct Node *temp = malloc(sizeof (struct Node));\n    if (temp == NULL)\n    {\n        printf(\"Error: Memory Could Not Be Allocated\");\n        exit(EXIT_FAILURE);\n    }\n    temp-&gt;prev = NULL;\n    temp-&gt;next = NULL;\n    return temp;\n} /* Allocate_node */\n\nvoid Free_node(struct Node* node)\n{\n    free(node);\n} /* Free_node */\n\nvoid Free_list(struct List* list)\n{\n    struct Node* curr = NULL;\n    struct Node* following = NULL;\n\n    curr = list-&gt;head;\n    while (curr != NULL)\n    {\n        following = curr-&gt;next;\n\n        Free_node(curr);\n        curr = following;\n    }\n\n    list-&gt;head = list-&gt;tail = NULL;\n} /* Free_list */\n\nvoid Insert(struct List *list, char *string)\n{\n    struct Node* curr = list-&gt;head;\n    struct Node* temp = NULL;\n\n    while (curr != NULL)\n    {\n        if (strcmp(string, curr-&gt;name) &lt; 0)\n        {\n            break; /* string alphabetically precedes node */\n        }\n        else\n        {\n            curr = curr-&gt;next;\n        }\n    }\n\n    temp = Allocate_node();\n    strcpy(temp-&gt;name, string);\n\n    if (list-&gt;head == NULL)\n    {\n        list-&gt;head = list-&gt;tail = temp;\n    }\n    else if (curr == NULL)\n    {\n        temp-&gt;prev = list-&gt;tail; // Pointing Tail before New Element\n        list-&gt;tail-&gt;next = temp; // Pointing old tail to new tail node\n        list-&gt;tail = temp; // Assigning node to tail\n    }\n    else if (curr == list-&gt;head)\n    {\n        temp-&gt;next = list-&gt;head;\n        list-&gt;head-&gt;prev = temp;\n        list-&gt;head = temp;\n    }\n    else\n    {\n        temp-&gt;next = curr;\n        temp-&gt;prev = curr-&gt;prev;\n        curr-&gt;prev = temp;\n        temp-&gt;prev-&gt;next = temp;\n    }\n} /* Insert */\n\nvoid Delete(struct List *list, char *string)\n{\n    struct Node* curr = list-&gt;head;\n\n    /* Find string */\n    while (curr != NULL)\n    {\n        if (strcmp(string, curr-&gt;name) == 0)\n        {\n            break;\n        }\n        else if (strcmp(string, curr-&gt;name) &lt; 0)\n        {\n            printf(\"%s is not in the list\\n\", string);\n            return;\n        }\n        else\n        {\n            curr = curr-&gt;next;\n        }\n    }\n\n    if (curr == NULL)\n    {\n        printf(\"%s is not in the list\\n\", string);\n    }\n    else\n    {\n        if (curr-&gt;prev == NULL &amp;&amp; curr-&gt;next == NULL)\n        {\n            list-&gt;head = list-&gt;tail = NULL;\n        }\n        else if (curr-&gt;prev == NULL)\n        {\n            list-&gt;head = curr-&gt;next;\n            list-&gt;head-&gt;prev = NULL;\n        }\n        else if (curr-&gt;next == NULL)\n        {\n            list-&gt;tail = curr-&gt;prev;\n            list-&gt;tail-&gt;next = NULL;\n        }\n        else\n        {\n            curr-&gt;prev-&gt;next = curr-&gt;next;\n            curr-&gt;next-&gt;prev = curr-&gt;prev;\n        }\n        Free_node(curr);\n    }\n} /* Delete */\n\nvoid printForward(struct List *list)\n{\n    struct List *temp = list;\n    while (temp-&gt;head != NULL)\n    {\n        printf(\"%s\\n\", temp-&gt;head-&gt;name);\n        temp-&gt;head = temp-&gt;head-&gt;next;\n    }\n}\n\nvoid printReverse(struct List *list)\n{\n    struct List *temp = list;\n    while (temp-&gt;head != NULL)\n    {\n        temp-&gt;head = temp-&gt;head-&gt;next;\n    }\n    while (temp-&gt;tail != NULL)\n    {\n        printf(\"%s \\n\", temp-&gt;tail-&gt;name);\n        temp-&gt;tail = temp-&gt;tail-&gt;prev;\n    }\n}\n\nint main(void)\n{\n    FILE *fp;\n    char *line = NULL, *name=NULL, *flag=NULL;\n    size_t len = 0;\n    ssize_t read = 0;\n\n    struct List *list; // GDB says *list is not initialized. Even after  initialization same fault.\n\n    list-&gt;head = list-&gt;tail = NULL;\n    /* start with empty list */\n\n    fp = fopen(\"data.txt\", \"r\");\n    if (fp == NULL)\n    {\n        exit(EXIT_FAILURE);\n    }\n    while ((read = getline(&amp;line, &amp;len, fp)) != -1)\n    {\n        name = strtok(line, \" \");\n        flag = strtok(NULL, \"\\n\");\n        if (strncmp(flag, \"a\", 1) == 0)\n        {\n            Insert(list, name);\n        }\n        else\n        {\n            Delete(list, name);\n        }\n    }\n    fclose(fp);\n\n    // Printing the List\n    printf(\"\\n\\n\");\n    printf(\"/////////////////////\\n\");\n    printf(\"/// Print Forward ///\\n\");\n    printf(\"/////////////////////\\n\");\n    printForward(list);\n\n    // Printing the List\n    printf(\"\\n\\n\");\n    printf(\"/////////////////////\\n\");\n    printf(\"/// Print Reverse ///\\n\");\n    printf(\"/////////////////////\\n\");\n    printReverse(list);\n\n    // Free Links\n    Free_list(list);\n\n}\n</code></pre>\n\n<p><strong>Text File</strong></p>\n\n<pre><code>Beverly a\nKathy a\nRadell a\nGary a\nChuck a\nDavid a\nkari a\nTom a\nTanya a\nScott a\nBeverly d\nBrenda d\nKathy a\nGary a\nWenChen a\nChuck a\nMike a\nEmanuel a\nLinda a\nBernie a\nHassan a\nBrian a\nGary d\nKathy d\nGary a\nEunjin a\nKathy a\nBrenda a\nJun a\nPeanut a\nTravis a\n</code></pre>\n\n<p><strong>GDB Error</strong></p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x0000000000400c1a in main ()\nMissing separate debuginfos, use: debuginfo-install glibc-2.12-         1.149.el6.x86_64\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998558, "post_id": 31442113, "comment_id": 50853403, "body": "Why don&#39;t you just compress the file after you&#39;re done?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1436998680, "post_id": 31442113, "comment_id": 50853445, "body": "Write a program which pre-preprocesses your code and injects a unique number in every call to an allocation function, plus produces a static table mapping the numbers back to the file,line pairs.  Then you don&#39;t need any hashing at runtime."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1436998694, "post_id": 31442113, "comment_id": 50853450, "body": "Add a static variable that contains <code>MPH(FILE)</code>, so it just gets calculated once per file. Then concatenate this with <code>LINE</code> when you do the allocations."}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 1, "creation_date": 1437001294, "post_id": 31442113, "comment_id": 50854372, "body": "Is there really a problem with using <code>__FILE__</code> as is? The string is a literal (in C), which (in C99) is \u201c<i>.. used to initialize an array of static storage duration</i>\u201d and you pass in its address, which is all you need and need not be compressed. I have done it like this, with no problems (optionally including the current function), in VMS C, AIX C and MSVS C, and it has been very helpful. (I have seen that C++ function name macros may be function calls.)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 0, "creation_date": 1437017863, "post_id": 31442113, "comment_id": 50858751, "body": "@PJTraill Oh, that&#39;s clever, I should&#39;ve thought of that myself."}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 0, "creation_date": 1437036665, "post_id": 31442113, "comment_id": 50866934, "body": "P.S. In theory, a really poor compiler may not pool string literals, not even <code>__FILE__</code>, but that seems highly unlikely!"}, {"owner": {"reputation": 1, "user_id": 3385120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382c2768cf734c551d1d675b48826c6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3385120", "link": "https://stackoverflow.com/users/3385120/user3385120"}, "edited": false, "score": 0, "creation_date": 1437134564, "post_id": 31442113, "comment_id": 50915742, "body": "Thanks for replying!"}, {"owner": {"reputation": 1, "user_id": 3385120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382c2768cf734c551d1d675b48826c6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3385120", "link": "https://stackoverflow.com/users/3385120/user3385120"}, "edited": false, "score": 0, "creation_date": 1437134590, "post_id": 31442113, "comment_id": 50915756, "body": "Barmar: not following either one of your suggestions."}, {"owner": {"reputation": 1, "user_id": 3385120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382c2768cf734c551d1d675b48826c6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3385120", "link": "https://stackoverflow.com/users/3385120/user3385120"}, "edited": false, "score": 0, "creation_date": 1437134853, "post_id": 31442113, "comment_id": 50915923, "body": "zwol: that seems like really hard. We&#39;re talking over 2,000 files and sometimes it&#39;s not the caller you want, but the caller&#39;s caller, etc."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3385120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382c2768cf734c551d1d675b48826c6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3385120", "link": "https://stackoverflow.com/users/3385120/user3385120"}, "edited": false, "score": 0, "creation_date": 1437136308, "post_id": 31451017, "comment_id": 50916845, "body": "Thanks ! I wasn&#39;t sure about the pooling of literals, something I can follow up on. The main concern is that this the combined total {<b>FILE</b>, <b>LINE</b>} is greater than 8 bytes. And there is no easy way to do MPH on this since the addresses are not known until run time. So you&#39;d either have to resort to hackery (because the addresses are likely to have the same leading 4 bytes or whatever) or a hash implementation with collisions and all that jazz to resolve. Solvable, but a big PITA."}], "tags": [], "owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "is_accepted": false, "score": 1, "last_activity_date": 1437049633, "last_edit_date": 1437049633, "creation_date": 1437040598, "answer_id": 31451017, "question_id": 31442113, "link": "https://stackoverflow.com/questions/31442113/c-efficient-encoding-of-code-location/31451017#31451017", "title": "C: efficient encoding of code location", "body": "<p><strong>A code location is already efficiently encoded by <code>{ __FILE__, __LINE__ }</code>.</strong></p>\n\n<p>The macro <code>__FILE__</code> expands to a string literal, which (in C99, and likely earlier) is \u201c<em>used to initialize an array of static storage duration</em>\u201d and you pass in its address, which is all you need and need not be compressed. I have done it like this (optionally including the current function name), with no problems, in VMS C, AIX C and MSVS C, and it has been very helpful.</p>\n\n<p>N.B.</p>\n\n<ul>\n<li>In theory, a really poor compiler may not pool string literals, not even <code>__FILE__</code>, resulting in bloated object code, but that seems unlikely in the extreme!</li>\n<li>As long as your compiler does pool string literals, you can calculate a hash on the address, if you need one.</li>\n<li>I have seen that C++ function name macros may be function calls, so this technique may be inapplicable there.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 3385120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382c2768cf734c551d1d675b48826c6d?s=128&d=identicon&r=PG&f=1", "display_name": "user3385120", "link": "https://stackoverflow.com/users/3385120/user3385120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437049633, "creation_date": 1436998409, "question_id": 31442113, "link": "https://stackoverflow.com/questions/31442113/c-efficient-encoding-of-code-location", "title": "C: efficient encoding of code location", "body": "<p>I wish to encode the location -- say, FILE/LINE -- each time I do a memory allocation. That's over 3,000 in my codebase, so I don't really want to hard code it.</p>\n\n<p>I have used a macro which just passes in <strong>FILE</strong>, <strong>LINE</strong> which works great.</p>\n\n<p>Now I want to store this with each allocation as well so it needs to get compressed. I have used a minimal perfect hash for <strong>FILE</strong> which makes the (FILE, LINE) pair fit within a 32 bit integer.</p>\n\n<p>However, computing the MPH on each allocation is just too expensive (mostly because it loops through the string computing a primary hash first).\nSince all the strings are constant, the MPH is constant and everything is constant, there should be a faster way to compute this.</p>\n\n<p>Alternatively, does anyone know a better way to compute code locations so they can be looked up and stored in an efficient manner (I've looked at the boost library PP_COUNTER macro as well) ?\nThanks!</p>\n"}, {"tags": ["c", "operator-precedence", "associativity"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1436998960, "post_id": 31442100, "comment_id": 50853557, "body": "Precedence and evaluation have nothing to do with one another. Precendence determines the meaning of a sequence of source code (it&#39;s a part of the parsing rules). Evaluation is about establishing the value of an expression. You need to know first what something means before you can compute its value."}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 3, "last_activity_date": 1436998757, "creation_date": 1436998757, "answer_id": 31442204, "question_id": 31442100, "link": "https://stackoverflow.com/questions/31442100/in-which-precedence-is-this-statement-evaluated/31442204#31442204", "title": "In which precedence is this statement evaluated?", "body": "<p>You are correct that the precedence is</p>\n\n<pre><code>++(*(P--))\n</code></pre>\n\n<p>But note that the decrement is a postfix operation: even though the change to <code>P</code> happens first, the rest of the expression uses the old value of <code>P</code>.  So in your example, first <code>P</code> is decremented to <code>array+4</code>, but the value of <code>P--</code> is <code>array+5</code>, so <code>array[5]</code> gets incremented.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1437000859, "last_edit_date": 1437000859, "creation_date": 1436999602, "answer_id": 31442389, "question_id": 31442100, "link": "https://stackoverflow.com/questions/31442100/in-which-precedence-is-this-statement-evaluated/31442389#31442389", "title": "In which precedence is this statement evaluated?", "body": "<p>You can imagine this expression</p>\n\n<pre><code>++*P--\n</code></pre>\n\n<p>the following way</p>\n\n<pre><code>int *tmp = p;\n--p;\nint value = *tmp;\n++value;\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    char s[] = \"Hello World\";\n    char *p = s + 6;\n\n    std::printf( \"%c\\n\", ++*p-- );\n    std::printf( \"%s\\n\", s );\n\n    p = s + 6;\n    char *tmp = p--;\n    char value = *tmp;\n    ++value;\n\n    std::printf( \"%c\\n\", value );\n    std::printf( \"%s\\n\", s );\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>X\nHello Xorld\nY\nHello Xorld\n</code></pre>\n\n<p>The difference in the outputting the string is that expression <code>++*p--</code> changes the string itself but expression <code>++value;</code> changes a separate object. But the logic is similar.</p>\n\n<p>Postfix expression <code>p--</code> has the highest priority but its value is the value of <code>p</code> before decreasing.</p>\n\n<p>Unary operators ++ and * in expression <code>++*p--</code> group right to left. So at first operator * is applied to the expression and after that operator ++ is applied.</p>\n"}], "owner": {"reputation": 4611, "user_id": 947111, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b70Fs.jpg?s=128&g=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/947111/anatoly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 31442204, "answer_count": 2, "score": 0, "last_activity_date": 1437009718, "creation_date": 1436998370, "last_edit_date": 1437009718, "question_id": 31442100, "link": "https://stackoverflow.com/questions/31442100/in-which-precedence-is-this-statement-evaluated", "title": "In which precedence is this statement evaluated?", "body": "<pre><code>++*P--;\n</code></pre>\n\n<p>That is a question from an exam, if <code>P</code> a pointer to any element in an array, explain what this statement really does.</p>\n\n<p>I even wrote a simple code to evaluate it:</p>\n\n<pre><code>  int i;\n    int* array = calloc(10, sizeof(int));\n    for (i = 0; i &lt; 10; i++) {\n        array[i] = i;\n        printf(\"%d,\", array[i]);\n    }\n    int* P = array + 5;\n    printf(\"\\n %p\", P);\n    printf(\"\\n %d\", *P);\n\n    ++*P--;\n    printf(\"\\n %p\", P);\n    printf(\"\\n %d \\n\", *P);\n    for (i = 0; i &lt; 10; i++) {\n        printf(\"%d,\", array[i]);\n    }\n</code></pre>\n\n<p>But the output confuses me even more:</p>\n\n<pre><code>0,1,2,3,4,5,6,7,8,9,\n 0x100105534\n 5\n 0x100105530\n 4 \n0,1,2,3,4,6,6,7,8,9,\n</code></pre>\n\n<p>It looks like it first dereferences <code>P</code>, then increases its value and then decreases value of pointer <code>P</code>, but why? </p>\n\n<p>According to K&amp;R table 2-1 from p53 (see the picture below)\n++, --, and * (dereference) has the same precedence and associativity from right to left. \nSo first step should be <strong>decreasing value</strong> of <code>P</code>, then <strong>dereference</strong> and then <strong>increasing dereferenced value</strong>, am I wrong?</p>\n\n<p><img src=\"https://i.stack.imgur.com/vQsxc.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c", "memory", "memory-management", "memory-leaks", "pthreads"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1437028974, "post_id": 31441897, "comment_id": 50862517, "body": "How do you compile this? Do you use the gcc option <code>-pthread</code> or &quot;just&quot; link using <code>-lpthread</code>??"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1437029027, "post_id": 31441897, "comment_id": 50862543, "body": "Also what is the idea behind passing <code>thr</code> here <code>pthread_exit(&amp;thr);</code>?"}, {"owner": {"reputation": 21, "user_id": 5120448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca413edd4c43a0410403af104514993?s=128&d=identicon&r=PG&f=1", "display_name": "ddkle", "link": "https://stackoverflow.com/users/5120448/ddkle"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1437064137, "post_id": 31441897, "comment_id": 50886253, "body": "I specifically write <code>gcc -pthread -std=c99 -o file file.c</code> in the command line when I compile and I don&#39;t get any errors or warnings.  I also thought that I needed to specify the exact thread that I wanted to exit in <code>pthread_exit</code> so I placed &amp;thr in there.  I&#39;ve also tried doing <code>pthread_exit(NULL)</code> and gotten the exact same memory errors/leaks."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1437064563, "post_id": 31441897, "comment_id": 50886523, "body": "Always compile with all warning&#39;s on. To do so with gcc specifiy <code>-Wall -Wextra -pedantic</code>. Also you might like to take a look into <code>pthread_exit()</code>&#39;s documentation to learn what the parameter is used for. Guessing is a bad option ... really."}, {"owner": {"reputation": 21, "user_id": 5120448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca413edd4c43a0410403af104514993?s=128&d=identicon&r=PG&f=1", "display_name": "ddkle", "link": "https://stackoverflow.com/users/5120448/ddkle"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1437067816, "post_id": 31441897, "comment_id": 50888273, "body": "Thanks for the tip about the warnings!  I got rid of all of the warnings, and I&#39;ve read the pthread_exit() documentation.  Based on my understanding, adding a <code>return NULL</code> at the bottom of my parse_log function should implicitly call pthread_exit() on thr and end the thread.  I think pthread_exit is supposed to be used when you may have a thread waiting on the status of a child thread, and the pthread_exit ends the child thread, making it available to the parent.  So, I added <code>return NULL</code> and removed <code>pthread_exit()</code>, but I get even more leaks.  Am I misunderstanding something?"}, {"owner": {"reputation": 21, "user_id": 5120448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca413edd4c43a0410403af104514993?s=128&d=identicon&r=PG&f=1", "display_name": "ddkle", "link": "https://stackoverflow.com/users/5120448/ddkle"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1437068231, "post_id": 31441897, "comment_id": 50888501, "body": "@alk the program also doesn&#39;t return the expected value."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5120448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca413edd4c43a0410403af104514993?s=128&d=identicon&r=PG&f=1", "display_name": "ddkle", "link": "https://stackoverflow.com/users/5120448/ddkle"}, "edited": false, "score": 0, "creation_date": 1436999463, "post_id": 31442317, "comment_id": 50853745, "body": "The error is still a bit unsettling though; this suggests that I&#39;m writing into something that I shouldn&#39;t.  Can this also be ignored?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 21, "user_id": 5120448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca413edd4c43a0410403af104514993?s=128&d=identicon&r=PG&f=1", "display_name": "ddkle", "link": "https://stackoverflow.com/users/5120448/ddkle"}, "edited": false, "score": 0, "creation_date": 1436999610, "post_id": 31442317, "comment_id": 50853799, "body": "If this is the code that produces those warnings then yes, I would ignore it. There&#39;s nothing I can see that could leak."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1436999271, "creation_date": 1436999271, "answer_id": 31442317, "question_id": 31441897, "link": "https://stackoverflow.com/questions/31441897/memory-error-and-leaks-with-detached-and-exited-thread/31442317#31442317", "title": "Memory error and leaks with detached and exited thread?", "body": "<p>Pthreads allocates certain amount of memory for maintaining each thread's internal state. Detaching a thread only marks that those resources can be reclaimed immediately after the thread exits (as opposed to holding the state in case some other thread might need it). Butt these resources will remain allocated until the thread completes execution. Valgrind might report them as possible \"leak\". </p>\n\n<p>Also remember that valgrind reports false positives at times. I don't see anything obvious in your code that could lead to leaks either. So I wouldn't worry about those \"possible leaks\" message.</p>\n"}], "owner": {"reputation": 21, "user_id": 5120448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca413edd4c43a0410403af104514993?s=128&d=identicon&r=PG&f=1", "display_name": "ddkle", "link": "https://stackoverflow.com/users/5120448/ddkle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 722, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1436999593, "creation_date": 1436997494, "last_edit_date": 1495541990, "question_id": 31441897, "link": "https://stackoverflow.com/questions/31441897/memory-error-and-leaks-with-detached-and-exited-thread", "title": "Memory error and leaks with detached and exited thread?", "body": "<p>I've created a simple program that uses a thread to parse through a log file and print a value.  After reading up on <a href=\"https://stackoverflow.com/questions/5610677/valgrind-memory-leak-errors-when-using-pthread-create\">creating detached threads</a>, I made the thread detached and destroyed the attribute (PTHREAD_CREATE_DETACHED) afterwards in my main function.  I also exited the thread (not exiting created even more memory leaks).  However, I still have memory leaks and an error, even though I'm pretty sure that I don't malloc anything in the rest of the program.  Here is the full code:</p>\n\n<p>*Credits go to <a href=\"https://stackoverflow.com/questions/30294129/i-need-a-mix-of-strtok-and-strtok-single\">Jonathan Leffler</a> for the strtok_fixed function which parses a delimited string </p>\n\n<pre><code>static char *strtok_fixed(char *str, char const *delims)\n{\n    static char  *src = NULL;\n    char  *p,  *ret = 0;\n\n    if (str != NULL)\n        src = str;\n\n    if (src == NULL || *src == '\\0')    // Fix 1\n        return NULL;\n\n    ret = src;                          // Fix 2\n    if ((p = strpbrk(src, delims)) != NULL)\n    {\n        *p  = 0;\n        //ret = src;                    // Unnecessary\n        src = ++p;\n    }\n    else\n        src += strlen(src);\n\n    return ret;\n}\n\nvoid * parse_log(void *arguments){\n\n    file = fopen(\"oms_requests.log\", \"r\");\n    char c;\n\n    if (file == NULL){                        //no valid file\n        printf(\"couldn't find the file\\n\");\n    } else {\n        int f = fseek(file, -2, SEEK_END);\n        if (f == 0){\n            int counter = 1;\n            c = fgetc(file);\n            while (c != '\\n'){\n                counter++;\n                fseek(file, -counter, SEEK_END);\n                c = fgetc(file);\n            }\n\n            //now read last line in the log into buff \n            char buff[counter];\n            int l = fread(buff, 1, counter, file);\n            buff[counter-1] = '\\0';\n\n            if (l != counter-1){\n                printf(\"counter is wrong\\n\");\n            } else {\n                //skip over 22 commas to get the value that I want \n                char *buffer = strtok_fixed(buff, \",\");\n                for (int i = 0; i &lt; 22; i++){\n                    buffer = strtok_fixed(NULL, \",\");\n                    if (buffer == '\\0') i++;\n                        printf(\"%s\\n\", buffer);\n                    }\n                    printf(\"%ld\\n\", strtol(buffer, NULL, 10));\n                }\n        } else {\n            printf(\"error in getting to bottom of file\\n\");\n        }\n    }\n    fclose(file);\n}\n\n\nint main(int argc, char *argv[])\n{\n    //create pthread attributes and set to detached \n    pthread_t thr;\n    pthread_attr_t attr;\n    pthread_attr_init(&amp;attr);\n    pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_DETACHED);\n\n    int l = pthread_create(&amp;thr, &amp;attr, parse_log, NULL);\n    if (l != 0){\n        printf(\"Didn't work\\n\");\n        return -1;\n    }\n\n    //destroy pthread attribute and exit \n    pthread_attr_destroy(&amp;attr);\n    pthread_exit(&amp;thr);\n    return 0;\n}\n</code></pre>\n\n<p>Here is the report given by valgrind when I run the program:</p>\n\n<pre><code>==12387== HEAP SUMMARY:\n==12387==     in use at exit: 272 bytes in 1 blocks\n==12387==   total heap usage: 7 allocs, 6 frees, 2,510 bytes allocated\n==12387==\n==12387== Searching for pointers to 1 not-freed blocks\n==12387== Checked 8,486,312 bytes\n==12387==\n==12387== 272 bytes in 1 blocks are possibly lost in loss record 1 of 1\n==12387==    at 0x4C2CC70: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==12387==    by 0x4012E54: _dl_allocate_tls (dl-tls.c:296)\n==12387==    by 0x4E3FDA0: pthread_create@@GLIBC_2.2.5 (allocatestack.c:589)\n==12387==    by 0x400E11: main (in /afs/.ir.stanford.edu/users/d/i/dianale/CS107/assign1a/reassemble)\n==12387==\n==12387== LEAK SUMMARY:\n==12387==    definitely lost: 0 bytes in 0 blocks\n==12387==    indirectly lost: 0 bytes in 0 blocks\n==12387==      possibly lost: 272 bytes in 1 blocks\n==12387==    still reachable: 0 bytes in 0 blocks\n==12387==         suppressed: 0 bytes in 0 blocks\n==12387==\n==12387== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>I've also tried pthread_detach(&amp;thr) instead of setting an attribute (I've also tried having both at the same time), but I still get the exact same memory leaks and errors. Is there any way to fix this?     </p>\n"}, {"tags": ["c++", "c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1436997806, "post_id": 31441866, "comment_id": 50853104, "body": "I think it&#39;s worse than that. A mutex won&#39;t ensure that the thread reads the value before the creator increments it, or that two threads don&#39;t read it between increments (they&#39;d end up with the same <code>myid</code>)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1436997908, "post_id": 31441866, "comment_id": 50853148, "body": "This seems to be a fundamentally flawed design. Instead of passing a pointer to the pool to each thread, it should pass a unique structure that contains thread-specific information like its unique ID number, as well as a pointer to the common pool."}, {"owner": {"reputation": 3584, "user_id": 743761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/abe8647a64a9d4220d601a4a32499493?s=128&d=identicon&r=PG&f=1", "display_name": "Keeto", "link": "https://stackoverflow.com/users/743761/keeto"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998231, "post_id": 31441866, "comment_id": 50853286, "body": "Yeah. I agree with you. I just needed confirmation because I am not very experienced with pthreads and C but I guess the args that are passed to the pthread_create should be unique"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998297, "post_id": 31441866, "comment_id": 50853310, "body": "The code you&#39;re reading appears to be a student project. Any idea what grade he got?"}, {"owner": {"reputation": 3584, "user_id": 743761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/abe8647a64a9d4220d601a4a32499493?s=128&d=identicon&r=PG&f=1", "display_name": "Keeto", "link": "https://stackoverflow.com/users/743761/keeto"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998363, "post_id": 31441866, "comment_id": 50853332, "body": "haha no. Are you aware of any thread pool C implementation that I can reuse?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998402, "post_id": 31441866, "comment_id": 50853344, "body": "I&#39;m sure there are plenty, but I don&#39;t know them offhand. Maybe search github."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1437232217, "post_id": 31441866, "comment_id": 50948442, "body": "<code>pool-&gt;arrest</code> nice typo ... ;-)"}], "owner": {"reputation": 3584, "user_id": 743761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/abe8647a64a9d4220d601a4a32499493?s=128&d=identicon&r=PG&f=1", "display_name": "Keeto", "link": "https://stackoverflow.com/users/743761/keeto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436997408, "creation_date": 1436997408, "question_id": 31441866, "link": "https://stackoverflow.com/questions/31441866/pthread-function-arguments", "title": "pthread function arguments", "body": "<p>I am reading the source code of a generic C implementation of a threadpool.</p>\n\n<p>The thread pool data structure is defined as:</p>\n\n<pre><code>typedef struct _threadpool_st{\n    pthread_t *array;\n    pthread_mutex_t mutex;\n    pthread_cond_t job_posted;\n    pthread_cond_t job_taken;\n    int arrsz;\n    int live; //number of live threads in the pool\n    queueHead *theQueue; //queue of work orders\n} _thread_pool;\n</code></pre>\n\n<p>Then there is a function that is responsible for creating the threadpool</p>\n\n<pre><code>thread pool create_threadpool(int num_threads_in_pool) {\n    _threadpool *pool;\n    /* irrelevant initializations */\n    for(i = 0; i &lt; pool-&gt;arrest; i++){\n        pthread_create(pool-&gt;array + i; NULL, do_work; (void *) pool);\n        pool-&gt;live = i + 1;\n        /* other stuff */\n    }\n    /* other stuff */\n}\n</code></pre>\n\n<p>the do_work function is as follows:</p>\n\n<pre><code>void * do_work(void * owning_pool) {\n    _threadpool *pool = (_threadpool *)owning_pool;\n    int myid = pool-&gt;live;\n    /* some stuff */\n}\n</code></pre>\n\n<p>My understanding is that each thread in the thread pool should have its own \"myid\"\nHowever, I think a race condition can happen with the way this is implemented. When a pool is created, a pthread is created that does do_work and passed a pointer to the pool data structure. All threads created are passed the same pointer to the arguments data structure. Each thread is supposed to read the value of live from that data structure. however, the main thread (the one creating the pthreads) is writing to this live variable. Is there anything I am missing here? shouldn't the live variable be protected by the pool mutex?</p>\n\n<p>The full source code is here\n<a href=\"http://people.clarkson.edu/~jmatthew/cs644.archive/cs644.fa2001/proj/pthreadsPool/\" rel=\"nofollow\">http://people.clarkson.edu/~jmatthew/cs644.archive/cs644.fa2001/proj/pthreadsPool/</a> </p>\n"}, {"tags": ["c", "linux", "x11", "xlib", "xcb"], "comments": [{"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1613860179, "post_id": 31441772, "comment_id": 117208054, "body": "see <a href=\"https://devblogs.microsoft.com/oldnewthing/20121217-00/?p=5823\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/oldnewthing/20121217-00/?p=5823</a>"}, {"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1613860251, "post_id": 31441772, "comment_id": 117208066, "body": "Write an abstraction layer to generate the mask automatically (according to you rules)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "edited": false, "score": 0, "creation_date": 1437012219, "post_id": 31442835, "comment_id": 50857361, "body": "I don&#39;t have the problem with the fact that it&#39;s an extension, but with the fact that I have to define a bit mask for the entire window, which I have to redraw every time the window itself gets redrawn. So there isn&#39;t a more direct way like on Windows and OSX then?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1437021339, "post_id": 31442835, "comment_id": 50859635, "body": "Not that I&#39;m aware of. Sorry. Keep in mind that, if you aren&#39;t using a compositing X server, the server needs to know what shape your window is to clip drawing on any windows under it. If it had to &quot;ask&quot; your application about each and every pixel drawn under your window, performance would be dismal."}, {"owner": {"reputation": 22804, "user_id": 705115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/212db408fb84ef88b9d5c6b543076c1d?s=128&d=identicon&r=PG", "display_name": "Andrey Sidorov", "link": "https://stackoverflow.com/users/705115/andrey-sidorov"}, "edited": false, "score": 0, "creation_date": 1437035828, "post_id": 31442835, "comment_id": 50866398, "body": "You don&#39;t need to redraw mask when window content is updated, they are separate ( but might need to if its resized )"}, {"owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "edited": false, "score": 0, "creation_date": 1503663859, "post_id": 31442835, "comment_id": 78721050, "body": "Since this is Stack Overflow a MWE would have been nice."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 4, "last_activity_date": 1437002173, "creation_date": 1437002173, "answer_id": 31442835, "question_id": 31441772, "link": "https://stackoverflow.com/questions/31441772/x11-transparent-window-click-through-only-where-alpha-0/31442835#31442835", "title": "X11 transparent window: click-through only where alpha = 0", "body": "<p>The <a href=\"http://www.x.org/releases/current/doc/xextproto/shape.html\" rel=\"nofollow\">X11 Nonrectangular Window Shape Extension</a> is the answer you're looking for.</p>\n\n<p>You may be getting confused by the description of this protocol as an \"extension\". X11 implements many features as extensions to the base protocol. It doesn't mean that these features are nonstandard or that they should be avoided; it just means they weren't part of X11 when it was released in 1987.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1437002173, "creation_date": 1436997012, "question_id": 31441772, "link": "https://stackoverflow.com/questions/31441772/x11-transparent-window-click-through-only-where-alpha-0", "title": "X11 transparent window: click-through only where alpha = 0", "body": "<p>Can I have a window with alpha that I can click-through the 100% transparent portions of the window? I'm looking for a general solution not based on the shapes extension.</p>\n\n<ul>\n<li>In Windows this is done by setting WS_EX_TRANSPARENT.</li>\n<li>In OSX this is done by setting setIgnoresMouseEvents(true).</li>\n<li>In X11 this is done by ...?</li>\n</ul>\n"}, {"tags": ["c", "matlab"], "comments": [{"owner": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 3, "creation_date": 1436997357, "post_id": 31441714, "comment_id": 50852891, "body": "What is wrong with transposing the matrix? That&#39;s the standard way to fix row major vs column major issues."}, {"owner": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 0, "creation_date": 1436997522, "post_id": 31441714, "comment_id": 50852956, "body": "A similar question <a href=\"http://stackoverflow.com/questions/2724020/how-do-you-concatenate-the-rows-of-a-matrix-into-a-vector-in-matlab\" title=\"how do you concatenate the rows of a matrix into a vector in matlab\">stackoverflow.com/questions/2724020/&hellip;</a>"}], "owner": {"reputation": 2098, "user_id": 9947624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc93b6d875408b60d0414c3f914cddb?s=128&d=identicon&r=PG", "display_name": "TEX", "link": "https://stackoverflow.com/users/9947624/tex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1436997034, "creation_date": 1436996728, "last_edit_date": 1436997034, "question_id": 31441714, "link": "https://stackoverflow.com/questions/31441714/saving-in-matlab-a-binary-file-ordered-by-rows", "title": "Saving in Matlab a binary file ordered by rows", "body": "<p>Consider in Matlab a matrix </p>\n\n<pre><code>A=[1 1; \n   1 0; \n   0 1; \n   0 0] \n</code></pre>\n\n<p>I save it as a binary file <code>A.dat</code> using</p>\n\n<pre><code>File_id = fopen('A.dat', 'w');\nfwrite(File_id, A, 'float32');\nfclose(File_id);\n</code></pre>\n\n<p>When I load <code>A.dat</code> in <code>C</code> and print it, it prints\n<code>[1 1 0 0 | 1 0 1 0]</code>, i.e. <code>A(:,1)</code> and then <code>A(:,2)</code>. </p>\n\n<p>When printing in C, I would like to get instead\n<code>[1 1 | 1 0 | 0 1 | 0 0]</code>, i.e. <code>A(1,:) A(2,:) A(3,:) A(4,:)</code></p>\n\n<p>Could you suggest a way to do this other than taking the transpose of <code>A</code> before saving?</p>\n"}, {"tags": ["c", "matlab", "mex"], "comments": [{"owner": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 0, "creation_date": 1436996919, "post_id": 31441654, "comment_id": 50852690, "body": "Platform independent = compatible to all recent windows systems?"}, {"owner": {"reputation": 4529, "user_id": 1346994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AcJNr.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1346994/justin"}, "edited": false, "score": 0, "creation_date": 1436997059, "post_id": 31441654, "comment_id": 50852749, "body": "I&#39;d look into CMake."}, {"owner": {"reputation": 125, "user_id": 2258161, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/887b0efe9b941de6bdfe52abad58a787?s=128&d=identicon&r=PG", "display_name": "dannyhmg", "link": "https://stackoverflow.com/users/2258161/dannyhmg"}, "reply_to_user": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 0, "creation_date": 1437003671, "post_id": 31441654, "comment_id": 50855198, "body": "@Daniel: Yes, ideally I&#39;d like it to work on Windows, Mac and Linux.  Right now I&#39;m using Mac OS 10.8 and Matlab R2014a.  But even getting it to port easily to other Macs would be progress."}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 0, "creation_date": 1437430572, "post_id": 31441654, "comment_id": 51015700, "body": "For option 1, I think you are referring to statically linking MPFR and GMP into your MEX file.  I&#39;ve not used these libraries, but in general there is no reason you can&#39;t do this as long as they provide the ability to build static libraries.  The <code>-I</code> (capital i) just gets the declarations for the functions, but you still need the libs via (<code>-L</code> and <code>-l</code>).  Actually you can skip the lib switches and just list the actual static libraries (the file names!) at the end of the <code>mex</code> command and they will get linked in correctly.  The easiest way is to copy the libraries into the MEX source folder."}], "owner": {"reputation": 125, "user_id": 2258161, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/887b0efe9b941de6bdfe52abad58a787?s=128&d=identicon&r=PG", "display_name": "dannyhmg", "link": "https://stackoverflow.com/users/2258161/dannyhmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436996485, "creation_date": 1436996485, "question_id": 31441654, "link": "https://stackoverflow.com/questions/31441654/creating-a-portable-mex-file-that-uses-c-libraries", "title": "Creating a portable MEX file that uses C libraries", "body": "<p>I have a MEX file that I compiled in order to run a C program in MATLAB.  The C code requires the MPFR library, which in turn requires the GMP library.  I linked against MPFR when I compiled the MEX file using the -L and -l flags.  It works like a charm on my system.  So far, so good. </p>\n\n<p>Now, I want to distribute this whole setup to others.  As it stands now, in order to run my program on a new machine, one has to 1) install a C compiler, 2) install GMP, 3) install MPFR, 4) re-compile the MEX file and 5) pray that it works.  Yuck. </p>\n\n<p>I would like to do one of two things: either \n1) Compile a single binary that already includes MPFR and GMP, rather than linking against them, or \n2) Write an installer script that will look for the compiler, GMP and MPFR on a new system, install them if necessary, and then finally compile the MEX file on any system.  </p>\n\n<p>I tried option 1 by just using the -I (that's a capital I) flag instead of -L and -l (lower-case L), but it doesn't work (I get undefined symbols errors for the MPFR library). </p>\n\n<p>For option 2, I can't seem to find any instructions or tutorials for how to write an installer script.  Is this something that people do for MEX files?  I'm especially curious about what I would need to do to make an installer platform-independent, and whether there are any existing tools that simplify the process (rather than writing all of the code from scratch). </p>\n\n<p>Thanks for any suggestions!</p>\n"}, {"tags": ["c", "arrays", "char", "constants"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5121206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c1f2bcf227f43f4c97d39edf8d1d55?s=128&d=identicon&r=PG&f=1", "display_name": "Nerd Mom", "link": "https://stackoverflow.com/users/5121206/nerd-mom"}, "edited": false, "score": 0, "creation_date": 1437580613, "post_id": 31441555, "comment_id": 51091623, "body": "Here is the function that uses it:                                                                TextBox *setLabels(StringArray labels) \t{ TextBox *ret = new TextBox(CAxis_setLabels(ptr, labels.data,    labels.len)); reg(ret); return ret; }"}], "tags": [], "owner": {"reputation": 95, "user_id": 5061896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bfe3fd8a17f8043525ff54dce9020d?s=128&d=identicon&r=PG&f=1", "display_name": "rondoisthebest", "link": "https://stackoverflow.com/users/5061896/rondoisthebest"}, "is_accepted": false, "score": 0, "last_activity_date": 1436996091, "creation_date": 1436996091, "answer_id": 31441555, "question_id": 31441507, "link": "https://stackoverflow.com/questions/31441507/how-to-put-variables-in-const-char-array-and-make-size-a-variable/31441555#31441555", "title": "How to put variables in const char *array and make size a variable", "body": "<p>c arrays do not have variable size. If you need this functionality, you have to use a different data structure</p>\n\n<p>What do you mean by \"it is being used as a stringArray parameter, which won't take anything less complicated.\"?</p>\n"}, {"comments": [{"owner": {"reputation": 4904, "user_id": 143504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34e7b6be5f0a1bbc846d14eca893bbd3?s=128&d=identicon&r=PG", "display_name": "Julien-L", "link": "https://stackoverflow.com/users/143504/julien-l"}, "edited": false, "score": 0, "creation_date": 1436997063, "post_id": 31441704, "comment_id": 50852752, "body": "Op says it has to be a <code>const char *</code>"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 4904, "user_id": 143504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34e7b6be5f0a1bbc846d14eca893bbd3?s=128&d=identicon&r=PG", "display_name": "Julien-L", "link": "https://stackoverflow.com/users/143504/julien-l"}, "edited": false, "score": 0, "creation_date": 1436997951, "post_id": 31441704, "comment_id": 50853169, "body": "@Julien-L: see my comment"}, {"owner": {"reputation": 4904, "user_id": 143504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34e7b6be5f0a1bbc846d14eca893bbd3?s=128&d=identicon&r=PG", "display_name": "Julien-L", "link": "https://stackoverflow.com/users/143504/julien-l"}, "edited": false, "score": 1, "creation_date": 1436998236, "post_id": 31441704, "comment_id": 50853290, "body": "You right, I had <code>char* const*</code> in mind and then it would have caused problems when putting something in the strings. I +1 you."}, {"owner": {"reputation": 23, "user_id": 5121206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c1f2bcf227f43f4c97d39edf8d1d55?s=128&d=identicon&r=PG&f=1", "display_name": "Nerd Mom", "link": "https://stackoverflow.com/users/5121206/nerd-mom"}, "edited": false, "score": 0, "creation_date": 1439407694, "post_id": 31441704, "comment_id": 51854385, "body": "This worked, @Giorgi. Thanks! I had to delay working on this part, so sorry for the slow reply."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 23, "user_id": 5121206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c1f2bcf227f43f4c97d39edf8d1d55?s=128&d=identicon&r=PG&f=1", "display_name": "Nerd Mom", "link": "https://stackoverflow.com/users/5121206/nerd-mom"}, "edited": false, "score": 0, "creation_date": 1439417051, "post_id": 31441704, "comment_id": 51858906, "body": "@NerdMom: glad if it helped."}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 1, "last_activity_date": 1437038599, "last_edit_date": 1437038599, "creation_date": 1436996650, "answer_id": 31441704, "question_id": 31441507, "link": "https://stackoverflow.com/questions/31441507/how-to-put-variables-in-const-char-array-and-make-size-a-variable/31441704#31441704", "title": "How to put variables in const char *array and make size a variable", "body": "<blockquote>\n  <p>It has to be a const char *array because it is being used as a\n  stringArray parameter, which won't take anything less complicated.</p>\n</blockquote>\n\n<p>You can pass <code>char*</code> to function expecting <code>const char*</code>.</p>\n\n<p>Given that, maybe you can try something like this:</p>\n\n<pre><code>char**arr = malloc(ARRAY_LEN * sizeof(char*));\nfor (i=0; i&lt;ARRAY_LEN; i++)\n{\n     arr[i] = malloc(EACH_STRING_LEN);\n     if(arr[i]==NULL) \n        handleError();\n     strcpy(arr[i],\"test\"); // put some string in i-th array\n}\n</code></pre>\n\n<p>and freeing part:</p>\n\n<pre><code>for (i = 0; i &lt; ARRAY_LEN; i++) {\n  free(arr[i]);\n}\nfree(arr);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5121206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c1f2bcf227f43f4c97d39edf8d1d55?s=128&d=identicon&r=PG&f=1", "display_name": "Nerd Mom", "link": "https://stackoverflow.com/users/5121206/nerd-mom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 31441704, "answer_count": 2, "score": 1, "last_activity_date": 1437038599, "creation_date": 1436995874, "last_edit_date": 1436999697, "question_id": 31441507, "link": "https://stackoverflow.com/questions/31441507/how-to-put-variables-in-const-char-array-and-make-size-a-variable", "title": "How to put variables in const char *array and make size a variable", "body": "<p>I have this array which is correct, but I need the values and size to be variable. Is this possible? If so, how?</p>\n\n<pre><code>const char *labels[] = { \"Group A\", \"Group B\", \"Group C\", \"Group D\", \"Group E\", \"Group F\", \"Group G\", \"Group H\" };\n</code></pre>\n\n<p>It has to be a <code>const char *</code> array because it is being used as a stringArray parameter, which won't take anything less complicated.</p>\n\n<p>Any help would be appreciated. Please keep in mind that I am a student developer.</p>\n"}, {"tags": ["c", "bit-manipulation", "reverse", "bit-shift", "masking"], "comments": [{"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 2, "creation_date": 1436994910, "post_id": 31441200, "comment_id": 50851804, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/746171/best-algorithm-for-bit-reversal-from-msb-lsb-to-lsb-msb-in-c\">Best Algorithm for Bit Reversal ( from MSB-&gt;LSB to LSB-&gt;MSB) in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 2695823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5bb585c29f834116691fd7cac2f9397?s=128&d=identicon&r=PG&f=1", "display_name": "FelIOx", "link": "https://stackoverflow.com/users/2695823/feliox"}, "edited": false, "score": 0, "creation_date": 1436996611, "post_id": 31441433, "comment_id": 50852565, "body": "Yes, I got it, but the code you include code returns 0 :/"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436997190, "post_id": 31441433, "comment_id": 50852818, "body": "<code>for(uint16_t bit=0; bit&lt;15;</code> only does 15 iterations, Certainly 16 are needed."}, {"owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "edited": false, "score": 0, "creation_date": 1437033679, "post_id": 31441433, "comment_id": 50865164, "body": "Dang ! You are right, thank you for noticing ! (edited)"}], "tags": [], "owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "is_accepted": false, "score": 4, "last_activity_date": 1437033697, "last_edit_date": 1437033697, "creation_date": 1436995572, "answer_id": 31441433, "question_id": 31441200, "link": "https://stackoverflow.com/questions/31441200/custom-uint16-t-reverse-function-returns-0x8000/31441433#31441433", "title": "Custom uint16_t reverse function returns 0x8000", "body": "<p>I see two problems (operator precedence and wrong shifts), \nlet us take an example, what you do for the first bit:</p>\n\n<pre><code>reversed |= (nonreversed &amp; 1 &lt;&lt; 15) &lt;&lt; 0;\n</code></pre>\n\n<p>Operator precedence is misleading, &amp; has a higher priority than &lt;&lt;, then it should be:</p>\n\n<pre><code>reversed |= (nonreversed &amp; (1 &lt;&lt; 15)) &lt;&lt; 0;\n</code></pre>\n\n<p>Now let us see what it does, imagine nonreversed is 100000000000000b,</p>\n\n<p>then (nonreversed &amp; (1 &lt;&lt; 15)) is \n  100000000000000b &amp; 100000000000000b,</p>\n\n<p>this gives 100000000000000b</p>\n\n<p>If you shift it by 0, then it remains 100000000000000b\n(then 15th bit is not moved to position 0),\nthus if you want to invert the bit string, you need to say:</p>\n\n<pre><code>reversed |= (nonreversed &amp; (1 &lt;&lt; 15)) &gt;&gt; 15;\n</code></pre>\n\n<p>Same thing for the other bits (take care of operator precedence, and   shift the bit at the right place). Legibility could be improved with a loop. Here is how I would implement it:</p>\n\n<pre><code>uint16_t ReverseInt16(uint16_t nonreversed) {\n  uint16_t reversed = 0;\n  for(uint16_t bit=0; bit&lt;16; ++bit) {\n     reversed |= (uint16_t)((nonreversed &amp; (1 &lt;&lt; bit) != 0)) &lt;&lt; (15 - bit);\n  }\n  return reversed;\n}\n</code></pre>\n\n<p>The expression nonreversed &amp; (1 &lt;&lt; bit) != 0 is a boolean, when converted to a uint16_t, it means 0 if false and 1 if true. 1 is a bit at position zero that I shift at the right place (&lt;&lt; (15 - bit)).</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 2695823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5bb585c29f834116691fd7cac2f9397?s=128&d=identicon&r=PG&f=1", "display_name": "FelIOx", "link": "https://stackoverflow.com/users/2695823/feliox"}, "edited": false, "score": 0, "creation_date": 1436996545, "post_id": 31441581, "comment_id": 50852532, "body": "Sir, Thank you very much for your help! It worked on first try! Have a nice day! :)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1436997014, "last_edit_date": 1436997014, "creation_date": 1436996177, "answer_id": 31441581, "question_id": 31441200, "link": "https://stackoverflow.com/questions/31441200/custom-uint16-t-reverse-function-returns-0x8000/31441581#31441581", "title": "Custom uint16_t reverse function returns 0x8000", "body": "<p>I think you mean the following :)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nuint16_t ReverseInt16( uint16_t nonreversed ) \n{\n    uint16_t reversed = 0;\n\n    for ( uint16_t i = 0; i &lt; 16; i++ )\n    {\n        reversed |= ( nonreversed &gt;&gt; ( 16 - i - 1 ) &amp; 1 ) &lt;&lt; i;\n    }        \n\n    return reversed;\n}\n\nint main( void )\n{\n    uint16_t x = 0x1234;\n\n    printf( \"%x\\n\", x );\n    printf( \"%x\\n\", ReverseInt16( x ) );\n\n}    \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>1234\n2c48\n</code></pre>\n\n<p>As for your code then it does not reverse bits. For example, consider statement</p>\n\n<pre><code>reversed |= (nonreversed &amp; 1 &lt;&lt; 15) &lt;&lt; 0;\n</code></pre>\n\n<p><code>1 &lt;&lt; 15</code> gives in hexadecimal notation <code>8000</code></p>\n\n<p>then for example if the MSB is set then <code>(nonreversed &amp; 1 &lt;&lt; 15)</code> gives also <code>8000</code>. You need to shift the result right </p>\n\n<pre><code>reversed |= (nonreversed &amp; 1 &lt;&lt; 15) &gt;&gt; 15;\n</code></pre>\n\n<p>but you are trying to shift it left</p>\n\n<pre><code>reversed |= (nonreversed &amp; 1 &lt;&lt; 15) &lt;&lt; 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "is_accepted": false, "score": 1, "last_activity_date": 1437002846, "last_edit_date": 1437002846, "creation_date": 1437001539, "answer_id": 31442727, "question_id": 31441200, "link": "https://stackoverflow.com/questions/31441200/custom-uint16-t-reverse-function-returns-0x8000/31442727#31442727", "title": "Custom uint16_t reverse function returns 0x8000", "body": "<p>To supplement some info about <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">C Operator Precedence</a>,</p>\n\n<ul>\n<li><p>Bitwise <code>&amp;</code> has a <strong>lower priority</strong> than <code>&lt;&lt;</code><br>\nSo, expression <code>nonreversed &amp; 1 &lt;&lt; 15</code> is equivalent to <code>nonreversed &amp; (1 &lt;&lt; 15)</code>. However, it is a good practise to use parentheses to make sure the precedence.</p></li>\n<li><p>Here is a typical usage which requires parentheses<br>\n<code>if ((a &amp; mask) == flag)</code> //the inner parentheses are required but easily forgotten</p></li>\n<li>C Operator Precedence table</li>\n</ul>\n\n<p><img src=\"https://i.stack.imgur.com/kcw4g.png\" alt=\"C Operator Precedence\"></p>\n"}], "owner": {"reputation": 63, "user_id": 2695823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5bb585c29f834116691fd7cac2f9397?s=128&d=identicon&r=PG&f=1", "display_name": "FelIOx", "link": "https://stackoverflow.com/users/2695823/feliox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 31441581, "answer_count": 3, "score": 1, "last_activity_date": 1437033697, "creation_date": 1436994725, "last_edit_date": 1436995731, "question_id": 31441200, "link": "https://stackoverflow.com/questions/31441200/custom-uint16-t-reverse-function-returns-0x8000", "title": "Custom uint16_t reverse function returns 0x8000", "body": "<pre><code>    uint16_t ReverseInt16(uint16_t nonreversed) {\n    uint16_t reversed = 0;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 15) &lt;&lt; 0; //check if bit 15 of nonreversed int is 1, if yes, write 1 to position 0, else write 0 to position 0\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 14) &lt;&lt; 1;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 13) &lt;&lt; 2;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 12) &lt;&lt; 3;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 11) &lt;&lt; 4;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 10) &lt;&lt; 5;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 9) &lt;&lt; 6;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 8) &lt;&lt; 7;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 7) &lt;&lt; 8;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 6) &lt;&lt; 9;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 5) &lt;&lt; 10;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 4) &lt;&lt; 11;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 3) &lt;&lt; 12;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 2) &lt;&lt; 13;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 1) &lt;&lt; 14;\n    reversed |= (nonreversed &amp; 1 &lt;&lt; 0) &lt;&lt; 15;\n    return reversed;\n}\n</code></pre>\n\n<p>I need to bit-reverse uint16_t, so I wrote this function that reads bit by bit the original uint_t, and writes them to another uint, but in reverse bit position. The problem is, when I pass integer larger than 0x00 (0), the function returns maximum value of uint16_t.  </p>\n\n<p>I'm beginner in c bitwise operations.</p>\n\n<p>Thank you for replies. </p>\n\n<p>EDIT: The \"Best Algorithm for Bit Reversal ( from MSB->LSB to LSB->MSB) in C\" uses 32bit ints!</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1436994823, "post_id": 31441072, "comment_id": 50851745, "body": "You can have two threads waiting on the same condition, yes.  When you call <code>pthread_cond_signal()</code>, only one of them will wake, but the woken thread could signal again to wake the next waiting thread... or you could use <code>pthread_cond_broadcast()</code> instead to wake all threads waiting on the condition."}], "answers": [{"tags": [], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "is_accepted": false, "score": 2, "last_activity_date": 1547784912, "last_edit_date": 1547784912, "creation_date": 1436994810, "answer_id": 31441228, "question_id": 31441072, "link": "https://stackoverflow.com/questions/31441072/pthread-cond-wait-waking-up-two-threads-at-the-same-time/31441228#31441228", "title": "pthread_cond_wait() waking up two threads at the same time", "body": "<p><code>pthread_cond_signal</code> wakes up one (random) thread waiting on the <code>cond</code> variable. If you want to wake up all threads waiting on this <code>cond</code> variable use <code>pthread_cond_broadcast</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2908, "user_id": 131160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns5R6.png?s=128&g=1", "display_name": "jcsahnwaldt Reinstate Monica", "link": "https://stackoverflow.com/users/131160/jcsahnwaldt-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1572894646, "post_id": 31441290, "comment_id": 103695468, "body": "Downvote. Doesn&#39;t address the severe problem that <code>while(!condition)</code> uses a variable of type <code>pthread_cond_t</code> as a boolean, which makes no sense. <code>pthread_cond_t</code> is an opaque type - it could be anything, and it&#39;s quite unlikely to have the boolean value a user may expect. Other answers explain how to use <code>pthread_cond_wait()</code> correctly."}], "tags": [], "owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "is_accepted": true, "score": 6, "last_activity_date": 1498768697, "last_edit_date": 1498768697, "creation_date": 1436995003, "answer_id": 31441290, "question_id": 31441072, "link": "https://stackoverflow.com/questions/31441072/pthread-cond-wait-waking-up-two-threads-at-the-same-time/31441290#31441290", "title": "pthread_cond_wait() waking up two threads at the same time", "body": "<p>First:  If you wish thread <code>#1</code> to wake up thread <code>#2</code> and <code>#3</code>, it should use <code>pthread_cond_broadcast</code>.</p>\n\n<p>Second: The setup is valid (with broadcast). Thread <code>#2</code> and <code>#3</code> are scheduled for wakeup and they will try to reacquire the mutex as part of waking up. One of them will, the other will have to wait for the mutex to be unlocked again. So thread <code>#2</code> and <code>#3</code> access the critical section sequentically (to re-evaluate the condition). </p>\n"}, {"tags": [], "owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "is_accepted": false, "score": 5, "last_activity_date": 1437051727, "creation_date": 1437051727, "answer_id": 31454943, "question_id": 31441072, "link": "https://stackoverflow.com/questions/31441072/pthread-cond-wait-waking-up-two-threads-at-the-same-time/31454943#31454943", "title": "pthread_cond_wait() waking up two threads at the same time", "body": "<p>If I understand correctly, you want thr#2 and thr#3 (\"workers\") to block until thr#1 (\"boss\") has performed some initialization.</p>\n\n<p>Your approach is almost workable, but you need to <em>broadcast</em> rather than signal, and are missing a <em>predicate variable</em> separate from your condition variable.  (In the question you reference, the predicate and condition variables were very similarly named.)  For example:</p>\n\n<pre><code>pthread_mutex_t mtx;\npthread_cond_t  cv;\nint             initialized = 0;  // our predicate of interest, signaled via cv\n\n...\n\n// boss thread\n  initialize_things();\n  pthread_mutex_lock(&amp;mtx);\n  initialized = 1;\n  pthread_cond_broadcast(&amp;cv);\n  pthread_mutex_unlock(&amp;mtx);\n  ...\n\n// worker threads\n  pthread_mutex_lock(&amp;mtx);\n  while (! initialized) {\n    pthread_cond_wait(&amp;cv, &amp;mtx);\n  }\n  pthread_mutex_unlock(&amp;mtx);\n  do_things();\n</code></pre>\n\n<p>That's common enough that you might want to combine the mutex/cv/flag into a single abstraction.  (For inspiration, see Python's <a href=\"https://docs.python.org/2/library/threading.html#event-objects\" rel=\"noreferrer\">Event object</a>.)  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_barrier_wait.html\" rel=\"noreferrer\">POSIX barriers</a> which are another way of synchronizing threads:  every thread waits until all threads have \"arrived.\"  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_once.html\" rel=\"noreferrer\"><code>pthread_once</code></a> is another way, as it runs a function once and only once no matter how many threads call it.</p>\n"}, {"tags": [], "owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "is_accepted": false, "score": 0, "last_activity_date": 1547803636, "last_edit_date": 1547803636, "creation_date": 1547768884, "answer_id": 54245898, "question_id": 31441072, "link": "https://stackoverflow.com/questions/31441072/pthread-cond-wait-waking-up-two-threads-at-the-same-time/54245898#54245898", "title": "pthread_cond_wait() waking up two threads at the same time", "body": "<p>Depending what you are doing on the critical session there might be also another solution apart from the ones in the previous answers.</p>\n\n<p>Suppose <code>thread1</code> is executing first (i.e. it is the creator thread) and suppose <code>thread2</code> and <code>thread3</code> do not perform any write in to shared resource in the critical session. In this case with <code>pthread_cond_wait</code> you are forcing one thread to wait the other when actually there is no need.</p>\n\n<p>You can use read-write mutex of type <code>pthread_rwlock_t</code>. Basically the <code>thread1</code> performs a write-lock so the other threads will be blocked when trying to acquire a read-lock.</p>\n\n<p>The functions for this lock are quite self-explanatory:</p>\n\n<pre><code>//They return: 0 if OK, error number on failure\nint pthread_rwlock_init(pthread_rwlock_t *restrict rwlock,\n    const pthread_rwlockattr_t *restrict attr);\nint pthread_rwlock_destroy(pthread_rwlock_t *rwlock);\n\nint pthread_rwlock_rdlock(pthread_rwlock_t *rwlock);\nint pthread_rwlock_wrlock(pthread_rwlock_t *rwlock);\nint pthread_rwlock_unlock(pthread_rwlock_t *rwlock);\n\nint pthread_rwlock_tryrdlock(pthread_rwlock_t *rwlock);\nint pthread_rwlock_trywrlock(pthread_rwlock_t *rwlock);\n</code></pre>\n\n<p>When <code>thread1</code> has finished its initialization it unlocks. The other threads will perform a read-lock and since more read-locks can co-exist they can execute simultaneously. Again: <strong>this is valid if you do not perform any write in thread2&amp;3 on the shared resources.</strong></p>\n"}], "owner": {"reputation": 263, "user_id": 2327195, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/550fad7a0f259bf87b2431c5d3d0a5d9?s=128&d=identicon&r=PG&f=1", "display_name": "user2327195", "link": "https://stackoverflow.com/users/2327195/user2327195"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5412, "favorite_count": 3, "accepted_answer_id": 31441290, "answer_count": 4, "score": 6, "last_activity_date": 1547803636, "creation_date": 1436994282, "last_edit_date": 1547748246, "question_id": 31441072, "link": "https://stackoverflow.com/questions/31441072/pthread-cond-wait-waking-up-two-threads-at-the-same-time", "title": "pthread_cond_wait() waking up two threads at the same time", "body": "<p>I am trying to better understand how to use <code>pthread_cond_wait()</code> and how it works.\nI am just looking for a bit of clarification to an answer I saw on this site. </p>\n\n<p>The answer is the last reply on this page</p>\n\n<p><a href=\"https://stackoverflow.com/questions/16522858/understanding-of-pthread-cond-wait-and-pthread-cond-signal\">understanding of pthread_cond_wait() and pthread_cond_signal()</a></p>\n\n<p>I am wondering how this would look with three threads. Imagine Thread 1 wants to tell Thread 2 and Thread 3 to wake up</p>\n\n<p>For example</p>\n\n<pre><code>pthread_mutex_t mutex;\npthread_cond_t condition;\n</code></pre>\n\n<p><strong>Thread 1</strong>:</p>\n\n<pre><code>pthread_mutex_lock(&amp;mutex);\n\n/*Initialize things*/\n\npthread_mutex_unlock(&amp;mutex);\npthread_cond_signal(&amp;condition); //wake up thread 2 &amp; 3\n\n/*Do other things*/\n</code></pre>\n\n<p><strong>Thread 2</strong>:</p>\n\n<pre><code>pthread_mutex_lock(&amp;mutex); //mutex lock\nwhile(!condition){\n    pthread_cond_wait(&amp;condition, &amp;mutex); //wait for the condition\n}\npthread_mutex_unlock(&amp;mutex);\n\n/*Do work*/\n</code></pre>\n\n<p><strong>Thread 3</strong>:</p>\n\n<pre><code>pthread_mutex_lock(&amp;mutex); //mutex lock\nwhile(!condition){\n    pthread_cond_wait(&amp;condition, &amp;mutex); //wait for the condition\n}\npthread_mutex_unlock(&amp;mutex);\n\n/*Do work*/\n</code></pre>\n\n<p>I am wondering if such a setup is valid. Say that Thread 2 and 3 relied on some intialization options that thread 1 needs to process.</p>\n"}, {"tags": ["c", "makefile", "gnu-make"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436994528, "post_id": 31441013, "comment_id": 50851579, "body": "Does it say that can&#39;t find the <code>try.h</code>?"}, {"owner": {"reputation": 2760, "user_id": 2062974, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8bcf43b9b61cdf1d4441739180b99ce6?s=128&d=identicon&r=PG", "display_name": "Hayri U\u011fur Koltuk", "link": "https://stackoverflow.com/users/2062974/hayri-u%c4%9fur-koltuk"}, "edited": false, "score": 0, "creation_date": 1436994538, "post_id": 31441013, "comment_id": 50851585, "body": "you don&#39;t have, by any chance, TRY_H as multiple inclusion guard in any of the other header files do you?"}, {"owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436994667, "post_id": 31441013, "comment_id": 50851656, "body": "@EugeneSh. no it doesn&#39;t complaint about not finding try.h"}, {"owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "reply_to_user": {"reputation": 2760, "user_id": 2062974, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8bcf43b9b61cdf1d4441739180b99ce6?s=128&d=identicon&r=PG", "display_name": "Hayri U\u011fur Koltuk", "link": "https://stackoverflow.com/users/2062974/hayri-u%c4%9fur-koltuk"}, "edited": false, "score": 0, "creation_date": 1436994718, "post_id": 31441013, "comment_id": 50851685, "body": "@HayriU\u011furKoltuk I have verified no other files contains such thing."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1436994731, "post_id": 31441013, "comment_id": 50851694, "body": "Add a <code>#message</code> or <code>#warning</code> to <code>try.h</code> to make sure it is included. If it is, someone is undefining the FALSE and TRUE somewhere after the inclusion.."}, {"owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436994842, "post_id": 31441013, "comment_id": 50851756, "body": "@EugeneSh. I don&#39;t know how to do that. Let me check then."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436994882, "post_id": 31441013, "comment_id": 50851780, "body": "You are actually aware that there is a boolean type in C since C99? Just <code>#include &lt;stdbool.h&gt;</code> and you get the C++-names <code>bool</code>&amp;friends."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436994952, "post_id": 31441013, "comment_id": 50851822, "body": "Just add a line <code>#message &quot;Yay! Try.h is included&quot;</code> to the <code>try.h</code> file near the TRU/FALSE definitions."}, {"owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436994992, "post_id": 31441013, "comment_id": 50851841, "body": "@Olaf Those were just included for testing purpose, I know that."}, {"owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436995841, "post_id": 31441013, "comment_id": 50852241, "body": "@EugeneSh. Yes it throws an error invalid preprocessing directive #message in Interrupt_Config/try.h . So it does gets included."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436995961, "post_id": 31441013, "comment_id": 50852288, "body": "Well, it wasn&#39;t the idea :) But good enough. Actually it should be <code>#pargma message</code>. Well, I guess you will have to post your <code>main</code> here."}, {"owner": {"reputation": 2760, "user_id": 2062974, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8bcf43b9b61cdf1d4441739180b99ce6?s=128&d=identicon&r=PG", "display_name": "Hayri U\u011fur Koltuk", "link": "https://stackoverflow.com/users/2062974/hayri-u%c4%9fur-koltuk"}, "edited": false, "score": 0, "creation_date": 1436996322, "post_id": 31441013, "comment_id": 50852439, "body": "do you, by any chance, #undef TRUE or #undef FALSE in any of your headers / sources? out of curiosity I created the directory structure with empty files but try.h main.c (main.c just references TRUE), and this makefile worked. i think problem might be somewhere else"}, {"owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "reply_to_user": {"reputation": 2760, "user_id": 2062974, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8bcf43b9b61cdf1d4441739180b99ce6?s=128&d=identicon&r=PG", "display_name": "Hayri U\u011fur Koltuk", "link": "https://stackoverflow.com/users/2062974/hayri-u%c4%9fur-koltuk"}, "edited": false, "score": 0, "creation_date": 1437058578, "post_id": 31441013, "comment_id": 50882368, "body": "@HayriU\u011furKoltuk No I have cross checked everything"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1437059211, "post_id": 31441013, "comment_id": 50882812, "body": "Do you have two headers <code>try.h</code>?  Why not use <code>#include &quot;Interrupt_Config&#47;try.h&quot;</code> in the include line?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1437059276, "post_id": 31441013, "comment_id": 50882863, "body": "It&#39;s probably time to zip up all your files and post them here so that others can reproduce your error and see what is wrong.  Also, what version of gcc and what operating system are you using?"}, {"owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1437059343, "post_id": 31441013, "comment_id": 50882914, "body": "@JonathanLeffler I would definitely want to go for that but it is not dependent on me. The team I am working with wants it like that. You can assume it&#39;s my assignment to do this."}, {"owner": {"reputation": 2760, "user_id": 2062974, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8bcf43b9b61cdf1d4441739180b99ce6?s=128&d=identicon&r=PG", "display_name": "Hayri U\u011fur Koltuk", "link": "https://stackoverflow.com/users/2062974/hayri-u%c4%9fur-koltuk"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1437067573, "post_id": 31441013, "comment_id": 50888139, "body": "I tried creating such folder structure and dummy files with only the code you shared, I was unable to reproduce the problem. I agree with @DavidGrayson"}, {"owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "reply_to_user": {"reputation": 2760, "user_id": 2062974, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8bcf43b9b61cdf1d4441739180b99ce6?s=128&d=identicon&r=PG", "display_name": "Hayri U\u011fur Koltuk", "link": "https://stackoverflow.com/users/2062974/hayri-u%c4%9fur-koltuk"}, "edited": false, "score": 0, "creation_date": 1437159179, "post_id": 31441013, "comment_id": 50930725, "body": "@HayriU\u011furKoltuk.. I just rewrote &#39;same&#39; files and &#39;rewrote same&#39; Makefile. It worked this time. Don&#39;t know what was the issue"}], "answers": [{"tags": [], "owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "is_accepted": true, "score": 0, "last_activity_date": 1437413013, "creation_date": 1437413013, "answer_id": 31522591, "question_id": 31441013, "link": "https://stackoverflow.com/questions/31441013/makefile-not-linking-to-one-of-the-header-files-in-one-sub-directory/31522591#31522591", "title": "Makefile not linking to one of the header files in one sub-directory", "body": "<p>I just rewrote every file including Makefile it worked this time, Not sure what was the issue since everything seemed okay.</p>\n"}], "owner": {"reputation": 267, "user_id": 1946082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/21bf4d26f862f2bd1b270605f10c8d21?s=128&d=identicon&r=PG", "display_name": "Aakash", "link": "https://stackoverflow.com/users/1946082/aakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 31522591, "answer_count": 1, "score": 1, "last_activity_date": 1437413013, "creation_date": 1436994098, "last_edit_date": 1437059137, "question_id": 31441013, "link": "https://stackoverflow.com/questions/31441013/makefile-not-linking-to-one-of-the-header-files-in-one-sub-directory", "title": "Makefile not linking to one of the header files in one sub-directory", "body": "<p>I am trying to write a Makefile with the following directory structure -</p>\n\n<p><strong>Example</strong> - Contains <em>Makefile</em>, main.c, xyz.c, xyz.h and sub-directories <em>Hal</em> and <em>Interrupt_Config</em><br>\n<strong>Hal</strong> - Contains <em>test2.c</em> and <em>test2.h</em>\n<strong>Interrupt_Config</strong> - Contains <em>try.h</em></p>\n\n<p>Below is the Makefile I am using- </p>\n\n<pre><code>EXE    := practice\nCC     := gcc\nCPPFLAGS := -IHal -IInterrupt_Config\nVPATH  := Hal:Interrupt_Config\n\nMAIN_OBS  := $(patsubst %.c,%.o,$(wildcard *.c))\nINT_OBS  := $(patsubst %.c,%.o,$(wildcard Interrupt_Config/*.c))\nHAL_OBS  := $(patsubst %.c,%.o,$(wildcard Hal/*.c))\nALL_DEPS := $(patsubst %.o,%.d,$(MAIN_OBS), $(HAL_OBS), $(INT_OBS))\n\nall: $(EXE)\n\n$(EXE): $(MAIN_OBS) $(HAL_OBS) $(INT_OBS)\n    $(CC) -o $@ $(LDFLAGS) $^ $(LDLIBS)\n\n%.o: %.c \n    $(CC) -o $@ -MD -MP $(CPPFLAGS) $(CFLAGS) -c $&lt;\n\n-include $(ALL_DEPS)\n\nclean:\n     rm -f $(EXE) $(MAIN_OBS) $(INT_OBS) $(HAL_OBS) $(ALL_DEPS)\n\n.PHONY: all clean\n</code></pre>\n\n<p>Whenever I am trying to do <em>make</em> without including Interrupt_Config/try.h it works absolutely fine . My <em>main.c</em> includes are like this - </p>\n\n<pre><code>..\n#include \"test2.h\"\n#include \"xyz.h\"\n#include \"try.h\" // Problem is here\n..\n</code></pre>\n\n<p>and <em>try.h</em> is very simple like this - </p>\n\n<pre><code>#ifndef TRY_H\n#define TRY_H\n\n#define TRUE 1\n#define FALSE 0\n\n#endif\n</code></pre>\n\n<p>But the moment I use values of <em>TRUE</em> or <em>FALSE</em> anywhere in <em>main.c</em> and try to do <em>make</em> again. It throws me error - <strong>'TRUE' undefined (first use in this function) and similar for 'FALSE'.</strong></p>\n\n<p>I am not able to understand what exactly is the problem, since I am new to Makefiles.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p><em>main.c</em></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"test2.h\"\n#include \"try.h\"\n#include \"xyz.h\"\n\nint main()\n{\n    bugs(); //test2.h\n    bunny(); //test2.h\n    t_print(); // xyz.h\n    printf(\"Yes! your age is %d\\n\",TRUE); // try.h\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "file", "directory", "subdirectory"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1436995383, "post_id": 31440974, "comment_id": 50852019, "body": "see <a href=\"http://linux.die.net/man/3/scandir\" rel=\"nofollow noreferrer\">scandir</a>"}, {"owner": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1436995455, "post_id": 31440974, "comment_id": 50852049, "body": "@BLUEPIXY will this get files as well?"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1436995703, "post_id": 31440974, "comment_id": 50852168, "body": "Why do you want to add it to an array? If you&#39;re just going to iterate over that array to do something with each filename, it&#39;d be more efficient to just do it there, in the body of the <code>readdir()</code> loop."}, {"owner": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1436995809, "post_id": 31440974, "comment_id": 50852225, "body": "@JonathonReinhart because I will use that array multiple times in the code. I read the folder structure then I use it like 4 times ... I dont want to rescan 4 times the structure ... would you scan the /home folder every time you need something from it?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1436996072, "post_id": 31440974, "comment_id": 50852328, "body": "@PatREllery There is a sample code to link destination."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1436996840, "post_id": 31440974, "comment_id": 50852660, "body": "@PatREllery It depends. Do I always require an up-to-date view of the directory&#39;s contents? Or do I require that all 4 times its used it be the same. Unfortunately I don&#39;t know how you&#39;re using this information, so I can&#39;t give good advice either way. There&#39;s a use case for both approaches."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1437000716, "post_id": 31440974, "comment_id": 50854172, "body": "Look at <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/ftw.html\" rel=\"nofollow noreferrer\">ftw</a>"}, {"owner": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1437756958, "post_id": 31440974, "comment_id": 51181319, "body": "@MarkPlotnick and how can i return an array with ftw?"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1437881549, "post_id": 31440974, "comment_id": 51213630, "body": "ftw won&#39;t allow allocate and fill in an array - as the answers below show, you&#39;ll need to have some additional C code do that - but it makes recursing through subdirectories very easy."}], "answers": [{"comments": [{"owner": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "edited": false, "score": 0, "creation_date": 1436999684, "post_id": 31441301, "comment_id": 50853820, "body": "what can I do if I want to add the sub folders"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "edited": false, "score": 0, "creation_date": 1436999987, "post_id": 31441301, "comment_id": 50853938, "body": "You would need to do the same recursively if the next entry is a directory i.e. <code>ent-&gt;d_type</code> is <code>DT_DIR</code>."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "edited": false, "score": 0, "creation_date": 1437000812, "post_id": 31441301, "comment_id": 50854207, "body": "Take a loot at this: <a href=\"http://stackoverflow.com/questions/8436841/how-to-recursively-list-directories-in-c-on-linux\" title=\"how to recursively list directories in c on linux\">stackoverflow.com/questions/8436841/&hellip;</a>"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1436995536, "last_edit_date": 1436995536, "creation_date": 1436995056, "answer_id": 31441301, "question_id": 31440974, "link": "https://stackoverflow.com/questions/31440974/get-not-display-the-list-of-files-and-folder-in-c/31441301#31441301", "title": "Get (NOT display) the list of files and folder in C", "body": "<p>You can allocate a list of pointers and store each entry by allocating memory for the directory entry:</p>\n\n<pre><code>char **getFolder()\n{\n\nchar **list = malloc(4096* sizeof *list);\nsize_t i = 0;\n....\n\n  while ((ent = readdir (dir)) != NULL) {\n     list[i]=strdup(ent-&gt;d_name);\n     i++;\n     if( i &gt;=4096 ) { /* time to realloc */}\n  }\n\nreturn list;\n}\n</code></pre>\n\n<p>and from the caller, you can use receive it as:</p>\n\n<pre><code>char **list=getFolder();\n</code></pre>\n\n<p>If you are going to have too many entries than you can use <a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow\"><code>realloc()</code></a> to increase the size of the list inside the loop. If <code>strdup</code> is not available, it can be easily implemented by using <a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow\"><code>malloc()</code></a> and <a href=\"http://man7.org/linux/man-pages/man3/strlen.3.html\" rel=\"nofollow\"><code>strlen()</code></a> functions.</p>\n\n<p>I have excluded error checking for simplicity. Ideally, <a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow\"><code>malloc()</code></a> ans <a href=\"http://man7.org/linux/man-pages/man3/strdup.3.html\" rel=\"nofollow\"><code>strdup</code></a> should be checked for errors.</p>\n"}, {"comments": [{"owner": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "edited": false, "score": 0, "creation_date": 1437759409, "post_id": 31443765, "comment_id": 51182586, "body": "<code>&#47;tmp$ dir &#47;B &#47;S &#47;ON . dir: cannot access &#47;B: No such file or directory dir: cannot access &#47;S: No such file or directory dir: cannot access &#47;ON: No such file or directory</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "edited": false, "score": 0, "creation_date": 1437759756, "post_id": 31443765, "comment_id": 51182782, "body": "sorry if you can&#39;t use DIR."}, {"owner": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "edited": false, "score": 0, "creation_date": 1437760629, "post_id": 31443765, "comment_id": 51183260, "body": "<code>sorry if you can&#39;t use DIR. \u2013  BLUEPIXY 14 mins ago</code> : it&#39;s ok to fail sometimes right?"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": -1, "last_activity_date": 1437008677, "creation_date": 1437008677, "answer_id": 31443765, "question_id": 31440974, "link": "https://stackoverflow.com/questions/31440974/get-not-display-the-list-of-files-and-folder-in-c/31443765#31443765", "title": "Get (NOT display) the list of files and folder in C", "body": "<p>use <code>DIR</code> command in <code>popen</code>, and <code>malloc</code> and <code>realloc</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n\n#define INC 1024\n\nchar **getFolders(const char *path, /* out */ size_t *count){\n    char buff[1024];\n    snprintf(buff, sizeof buff, \"dir /B /S /ON \\\"%s\\\"\", path);\n    FILE *fp = popen(buff, \"r\");\n    size_t capacity = INC;\n    char **entry;\n    struct stat finfo;\n\n    if(NULL==(entry=malloc(capacity*sizeof(*entry)))){\n        perror(\"malloc\");\n        exit(EXIT_FAILURE);\n    }\n\n    *count = 0;\n    while(fgets(buff, sizeof buff, fp)){\n        size_t len;\n        for(len = 0; buff[len]; ++len){\n            if(buff[len] == '\\\\')\n                buff[len] = '/';\n        }\n        buff[len-1] = '\\0';\n        stat(buff, &amp;finfo);\n        if(S_ISDIR(finfo.st_mode))\n            buff[len-1] = '/';\n\n        entry[*count] = strdup(buff);\n        if(++*count == capacity){\n            capacity += INC;\n            if(NULL==(entry=realloc(entry, capacity*sizeof(*entry)))){\n                perror(\"realloc\");\n                exit(EXIT_FAILURE);\n            }\n        }\n    }\n    pclose(fp);\n    return entry;\n}\n\nint main(void){\n    size_t i, count = 0;\n    char **entry = getFolders(\"c:/src/\", &amp;count);\n\n    for(i = 0; i &lt; count; ++i){\n        printf(\"%s\\n\", entry[i]);\n        free(entry[i]);\n    }\n    free(entry);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1566, "user_id": 976615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c05370ddb3c92081b497138ba47f5297?s=128&d=identicon&r=PG", "display_name": "Pat R Ellery", "link": "https://stackoverflow.com/users/976615/pat-r-ellery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1437008677, "creation_date": 1436993963, "question_id": 31440974, "link": "https://stackoverflow.com/questions/31440974/get-not-display-the-list-of-files-and-folder-in-c", "title": "Get (NOT display) the list of files and folder in C", "body": "<p>I want to be able to get the list of folders and file (if possible with sub folders) and return it (array for example)</p>\n\n<p>So i have this script:</p>\n\n<pre><code>DIR *dir;\nstruct dirent *ent;\nif ((dir = opendir (\"c:\\\\src\\\\\")) != NULL) {\n  /* print all the files and directories within directory */\n  while ((ent = readdir (dir)) != NULL) {\n    printf (\"%s\\n\", ent-&gt;d_name);  // I dont want to print, I want to add it to a array\n  }\n  closedir (dir);\n} else {\n  /* could not open directory */\n  perror (\"\");\n  return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>So i can do:</p>\n\n<p>array = getFolders('.');</p>\n\n<p>now if I loop thru the array i can see all folders and files.</p>\n\n<pre><code>eg:\n\narray[0] = 'file1.txt';\narray[1] = 'folder1/';\narray[2] = 'folder1/file2.txt';\narray[3] = 'folder1/file3.txt';\narray[4] = 'folder2/';\narray[5] = 'folder3/';\narray[6] = 'folder3/filez.txt';\n</code></pre>\n\n<p>etc...</p>\n"}, {"tags": ["c++", "objective-c", "c", "xcode", "macos"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1436991840, "post_id": 31440170, "comment_id": 50850042, "body": "Where is <code>jsapi.h</code> located? Also, it should be <code>#include &quot;jsapi.h&quot;</code> not <code>#include &lt;jsapi.h&gt;</code>"}, {"owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "edited": false, "score": 0, "creation_date": 1436992088, "post_id": 31440170, "comment_id": 50850188, "body": "Why don&#39;t you go to the compile &quot;tab&quot; and look at the generated command line? You will see whether Xcode has correctly generated the -I options.  (it always does for me). Doing mdfind jsapi.h  at the command line to confirm where the header file is located could help as well."}, {"owner": {"reputation": 19, "user_id": 5121006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FEkFw_dUfoU/AAAAAAAAAAI/AAAAAAAAAP8/bUdjkalzFSA/photo.jpg?sz=128", "display_name": "Zgragselus", "link": "https://stackoverflow.com/users/5121006/zgragselus"}, "edited": false, "score": 0, "creation_date": 1436992442, "post_id": 31440170, "comment_id": 50850393, "body": "#I&#39;L&#39;I nope it shouldn&#39;t (I&#39;m migrating the project from Linux system and you use &lt; and &gt; braces for library based includes and just add -I... include folder path). Unless Mac has different standards for these."}, {"owner": {"reputation": 19, "user_id": 5121006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FEkFw_dUfoU/AAAAAAAAAAI/AAAAAAAAAP8/bUdjkalzFSA/photo.jpg?sz=128", "display_name": "Zgragselus", "link": "https://stackoverflow.com/users/5121006/zgragselus"}, "edited": false, "score": 0, "creation_date": 1436992570, "post_id": 31440170, "comment_id": 50850464, "body": "#Laurent Michel - For <code>mdfind jsapi.h</code> the result is correct (it is where I&#39;m searching for it). I&#39;m having minor problems orienting inside Xcode - could you give me hint or two navigating into compile &quot;tab&quot;"}, {"owner": {"reputation": 19, "user_id": 5121006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FEkFw_dUfoU/AAAAAAAAAAI/AAAAAAAAAP8/bUdjkalzFSA/photo.jpg?sz=128", "display_name": "Zgragselus", "link": "https://stackoverflow.com/users/5121006/zgragselus"}, "edited": false, "score": 0, "creation_date": 1436994503, "post_id": 31440170, "comment_id": 50851560, "body": "I just realised that the <code>-I...</code> is not even added into the compiler flags. How is that even possible?!"}, {"owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "edited": false, "score": 0, "creation_date": 1437011705, "post_id": 31440170, "comment_id": 50857239, "body": "The main window is split in 3 panes (left / center / right). The top of the left pane has a row of buttons [Projects, Hierarchical, Search, Errors, Tests,Debug, Breakpoint, Build]. The last button of that row select &quot;build view&quot; for the middle pane. Once you see a build, pick a line that compiles a .m file. On the far <i>right</i> there is a small icon that looks like a page of text. Click on it. It will show the build command for that file. [Wish I could figure out how to put screenshots in Stack Overflow comments ;-)]."}, {"owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "edited": false, "score": 0, "creation_date": 1437011983, "post_id": 31440170, "comment_id": 50857303, "body": "The setting you are looking for is &quot;Header Search Paths&quot; It is under the &quot;Search Path&quot; section of your settings. I use it regularly, so I know it is supposed to work. Keep in mind that Xcode applies the settings hierarchically. If the setting is overriden &quot;deeper&quot; in the tree, the setting you give at the root will be ignored. I&#39;ve been burned by this before."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 544236, "user_type": "registered", "profile_image": "https://graph.facebook.com/208729/picture?type=large", "display_name": "Ryan Williams", "link": "https://stackoverflow.com/users/544236/ryan-williams"}, "edited": false, "score": 0, "creation_date": 1453594394, "post_id": 31444270, "comment_id": 57671217, "body": "Thanks, this seems close to what I need, but what do you mean &quot;in the option&quot;? Where did you find this &quot;Search Paths&quot; dropdown?"}], "tags": [], "owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "is_accepted": true, "score": 1, "last_activity_date": 1437012635, "creation_date": 1437012635, "answer_id": 31444270, "question_id": 31440170, "link": "https://stackoverflow.com/questions/31440170/mac-xcode-6-4-header-include-path/31444270#31444270", "title": "Mac + xcode 6.4 - header include path", "body": "<p>Just to show....</p>\n\n<p>The \"build tab\" is called \"Report Navigator\". I circled it...</p>\n\n<p><img src=\"https://i.stack.imgur.com/mEznp.png\" alt=\"enter image description here\"></p>\n\n<p>Then you can see the icon to the far right of:\n<img src=\"https://i.stack.imgur.com/oHrMR.png\" alt=\"enter image description here\"></p>\n\n<p>Click that button and you will see the text of the build command in its full glory. </p>\n\n<p>Finally, in the option, you can see below that I have the setting defined for a 3rd party library:</p>\n\n<p><img src=\"https://i.stack.imgur.com/UkqE4.png\" alt=\"enter image description here\"></p>\n\n<p>You can even see that I used the \"User Header Search Paths\" in this case. BTW, I also added the library search path (just above). </p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 19, "user_id": 5121006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FEkFw_dUfoU/AAAAAAAAAAI/AAAAAAAAAP8/bUdjkalzFSA/photo.jpg?sz=128", "display_name": "Zgragselus", "link": "https://stackoverflow.com/users/5121006/zgragselus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6975, "favorite_count": 2, "accepted_answer_id": 31444270, "answer_count": 1, "score": 1, "last_activity_date": 1437012635, "creation_date": 1436991311, "question_id": 31440170, "link": "https://stackoverflow.com/questions/31440170/mac-xcode-6-4-header-include-path", "title": "Mac + xcode 6.4 - header include path", "body": "<p>So, I have an Xcode project that contains sources which include headers from external library (static one)</p>\n\n<p>The include is done in common way:</p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;string&gt;\n #include &lt;jsapi.h&gt;\n</code></pre>\n\n<p>The third line causes compiler error: <code>'jsapi.h' file not found</code></p>\n\n<p>E.g.: <code>Lexical or Preprocessor issue 'jsapi.h' file not found</code></p>\n\n<p>Now I got that I should add include folder into the project settings. So I opened the projects and into <code>Search Paths</code> category under <code>Header Search Paths</code> I've added <code>/usr/local/include/</code> where the headers really are. Still same error. I tried copying them under <code>/Users/.../include/</code> and pointing there - still same error.</p>\n\n<p>So I tried going through SO and people suggested using <code>User Header Search Paths</code>, did that - still same error.</p>\n\n<p>Now I know this will be something really dumb, but why Xcode does not search those paths on default (assuming that <code>/</code> means root folder - as for some reason my C headers are under <code>./Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/</code>). I could try copying those header files in there, but well ... that just makes more harm than good.</p>\n"}, {"tags": ["c", "multithreading", "unix", "posix", "shared-memory"], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "is_accepted": true, "score": 1, "last_activity_date": 1436992254, "creation_date": 1436992254, "answer_id": 31440457, "question_id": 31440019, "link": "https://stackoverflow.com/questions/31440019/how-to-correctly-deallocate-a-shared-memory-between-processes/31440457#31440457", "title": "How to correctly deallocate a shared memory between processes?", "body": "<ol>\n<li>Call munmap on the region.</li>\n<li>Call close on the file descriptor that corresponds to fd_barr</li>\n<li>Call shm_unlink on the filename \"/barrier\"</li>\n</ol>\n\n<p>Note that you could unlink before you close. That would simply make the shared mem not accessible through the filesystem name. It would get deallocated when the <em>last</em> open file descriptor gets closed.</p>\n"}], "owner": {"reputation": 3049, "user_id": 774437, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6fL8U.jpg?s=128&g=1", "display_name": "moorara", "link": "https://stackoverflow.com/users/774437/moorara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 31440457, "answer_count": 1, "score": 0, "last_activity_date": 1436992254, "creation_date": 1436990810, "question_id": 31440019, "link": "https://stackoverflow.com/questions/31440019/how-to-correctly-deallocate-a-shared-memory-between-processes", "title": "How to correctly deallocate a shared memory between processes?", "body": "<p>As I want to have a shared barrier between processes, I'm using the <code>shm_open</code>, <code>ftruncate</code>, and <code>mmap</code> system calls to create a shared memory and map it to a barrier pointer.</p>\n\n<pre><code>int status, fd_barr;\nfd_barr = shm_open(\"/barrier\", O_RDWR | O_CREAT, 0777);\nstatus = ftruncate(fd_barr, sizeof(pthread_barrier_t));\nbarrier = mmap(0, sizeof(pthread_barrier_t), PROT_READ | PROT_WRITE, MAP_SHARED, fd_barr, 0);\n</code></pre>\n\n<p>Everything works fine! My question is after destroying my barrier pointer, how should I correctly deallocate the shared memory? How could I use the <code>shm_unlink</code> and <code>close(fd)</code> functions? Which one should I call first? Which one can I call immediately after the <code>mmap</code> and which one should I call at the very end of my program?</p>\n"}, {"tags": ["c", "tcpdump"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 3638555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a8c78383bdd93afd14421aeb146d3e2?s=128&d=identicon&r=PG", "display_name": "gladiola", "link": "https://stackoverflow.com/users/3638555/gladiola"}, "edited": false, "score": 0, "creation_date": 1437159481, "post_id": 31441063, "comment_id": 50930897, "body": "Okay, thanks.  I thought it would be for plugging it into lex and yacc, but I was surprised that it might be done so often that an option for it had been built into tcpdump."}, {"owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "reply_to_user": {"reputation": 123, "user_id": 3638555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a8c78383bdd93afd14421aeb146d3e2?s=128&d=identicon&r=PG", "display_name": "gladiola", "link": "https://stackoverflow.com/users/3638555/gladiola"}, "edited": false, "score": 0, "creation_date": 1437179166, "post_id": 31441063, "comment_id": 50937556, "body": "No, what <code>-dd</code> prints is the output of something that&#39;s <i>already</i> plugged into lex and yacc (or Flex and Bison or Berkeley YACC), to parse pcap filter expressions and generate BPF code for them."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": true, "score": 1, "last_activity_date": 1436994243, "creation_date": 1436994243, "answer_id": 31441063, "question_id": 31439474, "link": "https://stackoverflow.com/questions/31439474/what-are-some-common-uses-for-the-tcpdump-dd-option/31441063#31441063", "title": "What are some common uses for the tcpdump -dd option?", "body": "<p>It's useful if you're writing a program using libpcap/WinPcap that would use a filter but that, for whatever reason, wouldn't run <code>pcap_compile()</code> to translate a filter string into BPF machine code; it lets you do the compilation with tcpdump and generate some text that you could use in the initialization of an array of <code>struct bpf_insn</code> (a pointer to which, and a count of elements in which, you'd put in a <code>struct bpf_program</code>).</p>\n\n<p>I'm not sure who would do that, however.</p>\n"}], "owner": {"reputation": 123, "user_id": 3638555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a8c78383bdd93afd14421aeb146d3e2?s=128&d=identicon&r=PG", "display_name": "gladiola", "link": "https://stackoverflow.com/users/3638555/gladiola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "closed_date": 1437003443, "accepted_answer_id": 31441063, "answer_count": 1, "score": 0, "last_activity_date": 1436994243, "creation_date": 1436988817, "question_id": 31439474, "link": "https://stackoverflow.com/questions/31439474/what-are-some-common-uses-for-the-tcpdump-dd-option", "closed_reason": "Not suitable for this site", "title": "What are some common uses for the tcpdump -dd option?", "body": "<p>In reading the man pages for tcpdump, I saw that the -dd arguement would output the dump as a fragment of a C file.  In what situations is that useful?  I take it this is to quickly include and compile the fragment in a program that will be used to process the data according to code we write ourselves?  Does this have its utility with unknown or new protocols?  Is there some other common, standing situation in which this is needed?  Just curious.</p>\n"}, {"tags": ["c", "parsing", "recursive-descent"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436990596, "post_id": 31439165, "comment_id": 50849293, "body": "I really don&#39;t understand how this code should work .. <code>*next</code> is never initialized."}, {"owner": {"reputation": 339, "user_id": 2886884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tPpcz.jpg?s=128&g=1", "display_name": "mrdoubtful", "link": "https://stackoverflow.com/users/2886884/mrdoubtful"}, "edited": false, "score": 0, "creation_date": 1436990742, "post_id": 31439165, "comment_id": 50849399, "body": "thx for pointing that out...just initialized next"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1436990954, "post_id": 31439165, "comment_id": 50849520, "body": "Adding a few more comments without completely understanding what you try to do: <code>*next == &#39;\\0&#39;</code> will short-curcuit to <code>0</code> (false) it the user entered anything. Get rid of that <code>scanf</code> in production code, use <code>fgets(str, 10, stdin)</code>. And generally for parsing an <i>epsilon</i> ... just return <code>1</code> (true)?"}, {"owner": {"reputation": 339, "user_id": 2886884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tPpcz.jpg?s=128&g=1", "display_name": "mrdoubtful", "link": "https://stackoverflow.com/users/2886884/mrdoubtful"}, "edited": false, "score": 0, "creation_date": 1436991409, "post_id": 31439165, "comment_id": 50849766, "body": "eventually, parsing would fail if the user enters a random value though using gets could be a better option and returning 1 might help"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436991411, "post_id": 31439165, "comment_id": 50849768, "body": "Another observation is your <code>next</code> pointer never moves.... [<i>edit</i>]: Just a quick shot, how about using a state machine (looping) instead of recursion?"}, {"owner": {"reputation": 339, "user_id": 2886884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tPpcz.jpg?s=128&g=1", "display_name": "mrdoubtful", "link": "https://stackoverflow.com/users/2886884/mrdoubtful"}, "edited": false, "score": 0, "creation_date": 1436991602, "post_id": 31439165, "comment_id": 50849896, "body": "oh yes...sorry abt tat...havent run the program yet...was confused on how to skip epsilon..updated the next pointer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1436991833, "post_id": 31439165, "comment_id": 50850036, "body": "To explain the short-curcuit thing: if the left hand side of &amp;&amp; evaluates to 0, the expression is 0 without evaluating the right hand side. So something to start with would be changing <code>(*next == &#39;\\0&#39; &amp;&amp; E() == 1)</code> to <code>(E() &amp;&amp; !*next)</code> [<i>edit</i> or better yet <code>(E() &amp;&amp; *next != 0 &amp;&amp; *next != &#39;\\n&#39; &amp;&amp; *next != &#39;\\r&#39;)</code> if you use <code>fgets</code> as advisable to avoid buffer overflows]"}, {"owner": {"reputation": 339, "user_id": 2886884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tPpcz.jpg?s=128&g=1", "display_name": "mrdoubtful", "link": "https://stackoverflow.com/users/2886884/mrdoubtful"}, "edited": false, "score": 0, "creation_date": 1436992299, "post_id": 31439165, "comment_id": 50850315, "body": "hey thx a lot! the code seems to be working with returning 1 and yes will keep in mind abt the short circuiting as well"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436992443, "post_id": 31439165, "comment_id": 50850394, "body": "And as a final note: You commonly can&#39;t describe a grammar in C and expect it to work as a parser, because there are too many conditions (end of line, end of input) to be recognized at each step. See this <a href=\"https://github.com/Zirias/llad/blob/master/src/config.c#L222\" rel=\"nofollow noreferrer\">state machine parser</a> I wrote lately. I guess a better alternative would be using tools like <code>flex</code> and <code>bison</code> and I should learn them myself ;)"}, {"owner": {"reputation": 339, "user_id": 2886884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tPpcz.jpg?s=128&g=1", "display_name": "mrdoubtful", "link": "https://stackoverflow.com/users/2886884/mrdoubtful"}, "edited": false, "score": 0, "creation_date": 1436992635, "post_id": 31439165, "comment_id": 50850505, "body": "cool! will check it out! :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436993204, "post_id": 31439165, "comment_id": 50850838, "body": "sorry, my comment above was logically wrong ... you want to make sure you reached the end of input, so it would be the other way around: <code>(E() &amp;&amp; (!*next || *next == &#39;\\r&#39; || *next == &#39;\\n&#39;))</code> -- of course you would have to check for these on every production, too ... that&#39;s what makes it complicated, you don&#39;t have to &quot;only&quot; deal with the grammar but also with such things"}, {"owner": {"reputation": 339, "user_id": 2886884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tPpcz.jpg?s=128&g=1", "display_name": "mrdoubtful", "link": "https://stackoverflow.com/users/2886884/mrdoubtful"}, "edited": false, "score": 0, "creation_date": 1436993683, "post_id": 31439165, "comment_id": 50851128, "body": "next is a pointer to the expression inputed(str). Hence if str was successfully parsed next would point to &#39;\\0&#39; so shouldn&#39;t it be (E() &amp;&amp; (*next == &#39;\\0&#39;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436994479, "post_id": 31439165, "comment_id": 50851551, "body": "In theory, yes, but you should never use <code>scanf(&quot;%s&quot;, str)</code> -- it has the same problem as <code>gets(str)</code> -- it will read happily beyond your buffer and (in the best case) make your program crash or (in the worst case) allow intruders to do anything they want."}, {"owner": {"reputation": 339, "user_id": 2886884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tPpcz.jpg?s=128&g=1", "display_name": "mrdoubtful", "link": "https://stackoverflow.com/users/2886884/mrdoubtful"}, "edited": false, "score": 0, "creation_date": 1436994794, "post_id": 31439165, "comment_id": 50851727, "body": "Will keep tat in mind :)"}], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "is_accepted": true, "score": 0, "last_activity_date": 1436992496, "creation_date": 1436992496, "answer_id": 31440530, "question_id": 31439165, "link": "https://stackoverflow.com/questions/31439165/recursive-descent-parser-in-c-skipping-over-epsilon-productions/31440530#31440530", "title": "Recursive Descent Parser in C - skipping over epsilon productions", "body": "<p>The code is unreadable. But the logic shows that you should return a boolean. An empty production always succeeds. So it should return true. e.g.,  </p>\n\n<pre><code> int H2(){return true;} \n</code></pre>\n\n<p>Naturally, it would make sense to inline such trivial productions. </p>\n"}], "owner": {"reputation": 339, "user_id": 2886884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tPpcz.jpg?s=128&g=1", "display_name": "mrdoubtful", "link": "https://stackoverflow.com/users/2886884/mrdoubtful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 31440530, "answer_count": 1, "score": 0, "last_activity_date": 1436992496, "creation_date": 1436987809, "last_edit_date": 1436991528, "question_id": 31439165, "link": "https://stackoverflow.com/questions/31439165/recursive-descent-parser-in-c-skipping-over-epsilon-productions", "title": "Recursive Descent Parser in C - skipping over epsilon productions", "body": "<p>Constructing a recursive descent parser to parse the following grammar. Is there a way i could return without passing anything back for all the epsilon productions(e)? (considering this approach I'm taking of parsing as shown in the code)</p>\n\n<blockquote>\n  <p>E = TG<br>\n  G = +TG | e<br>\n  T = FH<br>\n  H = *FH | e<br>\n  F = (E) | id<br></p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar* next;\n\nint terminal(char);\nint E();int G();int G1();int G2();int T();int H();int H1();int H2();int F();int F1();int F2();\n\nint main(int argc, char const *argv[])\n{\n    char str[10];\n    printf(\"Enter an expression to be parsed : \");\n    scanf(\"%s\", str);\n    next = &amp;str[0]\n    (*next == '\\0' &amp;&amp; E() == 1) ? printf(\"Parsed Successfully\\n\") : printf(\"Parsed Unsuccessfully\\n\");\n    return 0;\n}\n\nint terminal(char token){return *next++ == token;}\nint E(){return T() &amp;&amp; G();}\nint G(){char* temp = next; return (next = temp, G1()) || (next = temp, G2());}\nint G1(){return terminal('+') &amp;&amp; T() &amp;&amp; G();}\nint G2(){return;}   //ERROR : non-void function should return a value\nint T(){return F() &amp;&amp; H();}\nint H(){char* temp = next; return (next = temp, H1()) || (next = temp, H2());}\nint H1(){return terminal('*') &amp;&amp; F() &amp;&amp; H();}\nint H2(){return;}   //ERROR : on-void function should return a value\nint F(){char* temp = next; return (next = temp, F1()) || (next = temp, F2());}\nint F1(){return terminal('(') &amp;&amp; E() &amp;&amp; terminal(')');}\nint F2(){return terminal('a');}\n</code></pre>\n"}, {"tags": ["c", "pthreads", "posix"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1436987843, "creation_date": 1436987843, "answer_id": 31439177, "question_id": 31439142, "link": "https://stackoverflow.com/questions/31439142/posix-threads-child-returns-error/31439177#31439177", "title": "Posix threads, child returns error", "body": "<p>Only the child thread exits, unless it calls <code>exit()</code>, that is.</p>\n"}, {"tags": [], "owner": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "is_accepted": true, "score": 2, "last_activity_date": 1436988108, "creation_date": 1436988108, "answer_id": 31439240, "question_id": 31439142, "link": "https://stackoverflow.com/questions/31439142/posix-threads-child-returns-error/31439240#31439240", "title": "Posix threads, child returns error", "body": "<p>A Posix thread returns <code>void *</code> (ie. a pointer), so it cannot return anything less than zero since it's not an integer.</p>\n\n<p>In any case, the return value from a detached thread is always ignored, and the process will not exit whatever the value.</p>\n"}], "owner": {"reputation": 96, "user_id": 4297033, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e58845c8c5fe24a3b89595b205312104?s=128&d=identicon&r=PG&f=1", "display_name": "Merl", "link": "https://stackoverflow.com/users/4297033/merl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 31439240, "answer_count": 2, "score": 0, "last_activity_date": 1436988108, "creation_date": 1436987763, "question_id": 31439142, "link": "https://stackoverflow.com/questions/31439142/posix-threads-child-returns-error", "title": "Posix threads, child returns error", "body": "<p>If I have program with a main thread and a function running in a separated detached thread. If something in the detached thread is returning something > 0 \nwill only the child thread exit or the main thread too?</p>\n"}, {"tags": ["c", "system-calls", "ld-preload", "systrace"], "comments": [{"owner": {"reputation": 17219, "user_id": 462370, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7cfe49e263a76df97bd6defdb1a86714?s=128&d=identicon&r=PG", "display_name": "Hubert Kario", "link": "https://stackoverflow.com/users/462370/hubert-kario"}, "edited": false, "score": 0, "creation_date": 1542304159, "post_id": 31438697, "comment_id": 93530894, "body": "to people looking <i>how</i> to inject failures or fake success in syscalls: look for <code>strace</code> <code>-e inject</code> option"}], "answers": [{"comments": [{"owner": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 0, "creation_date": 1436987617, "post_id": 31439038, "comment_id": 50847681, "body": "What I mean by syscall is really syscall wrapper in libc.. in this sense, can <code>LD_PRELOAD</code> capture syscall wrapper? (I suppose syscall wrapper is called after ld.so)"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 2, "creation_date": 1436987814, "post_id": 31439038, "comment_id": 50847779, "body": "@Richard: No, the syscall wrapper in libc is bound to the PLT stub very early. So early that LD_PRELOAD is not able to take effect."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 1, "creation_date": 1436987887, "post_id": 31439038, "comment_id": 50847823, "body": "@Richard: See this article on how the whole PLT/GOT thing works out: <a href=\"https://www.technovelty.org/linux/plt-and-got-the-key-to-code-sharing-and-dynamic-libraries.html\" rel=\"nofollow noreferrer\">technovelty.org/linux/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436988211, "post_id": 31439038, "comment_id": 50848005, "body": "What you are wrapping here is not the tiny syscall wrapper automatically linked (which isn&#39;t even present in an actual file), but the <code>mmap()</code> function in your libc."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1488540290, "post_id": 31439038, "comment_id": 72287823, "body": "&quot;No, the syscall wrapper in libc is bound to the PLT stub very early&quot; - this is wrong. Intra-libc mmap calls are not done through PLT and that&#39;s why they can&#39;t be intercepted. On the contrary, mmap calls in other libraries and in executable are done through PLT and can be interposed just as any other API. &quot;dynamic linking is executed by the kernel itself&quot; - wrong too, kernel does not do <i>any</i> dynamic linking itself."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1488542521, "post_id": 31439038, "comment_id": 72289260, "body": "@yugr: I was not talking about dynamic linking of arbitrary libraries, but refering to the linkage of that special piece of code that implements syscall entry/exit: <a href=\"http://man7.org/linux/man-pages/man7/vdso.7.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man7/vdso.7.html</a> notably this part: <i>The &quot;vDSO&quot; (virtual dynamic shared object) is a small shared library that <b>the kernel automatically maps</b> into the address space of all user-space applications.</i> An in-depth explanation of what it does and how it works can be found here: <a href=\"http://www.trilithium.com/johan/2005/08/linux-gate/\" rel=\"nofollow noreferrer\">trilithium.com/johan/2005/08/linux-gate</a>"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1488543269, "post_id": 31439038, "comment_id": 72289706, "body": "Well, kernel maps vDSO (it also maps executable and <code>ld.so</code>) but does not do any linkage for it. <i>All</i> dynamic linking, even for vDSO, is done in <code>ld.so</code>, not in kernel."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1488543764, "post_id": 31439038, "comment_id": 72290025, "body": "@yugr: Eh, yes. I think I meant mapping when I wrote it (corrected it). And yes, it&#39;s <code>ld.so</code> (or whatever is specified as interpreter) that does the actual linking, which is why I mentioned that, too. Hmm, I think deleting that answer would be the best course of action, but SO won&#39;t allow it. Maybe suggest a few edits?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 752, "user_id": 7659542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/bCzvu.jpg?s=128&g=1", "display_name": "traducerad", "link": "https://stackoverflow.com/users/7659542/traducerad"}, "edited": false, "score": 0, "creation_date": 1570546098, "post_id": 31439038, "comment_id": 102942268, "body": "@traducerad: You&#39;d have to work some <a href=\"https://linux.die.net/man/2/ptrace\" rel=\"nofollow noreferrer\"><code>ptrace(2)</code></a> magic for that: Attach ptrace to process (set ptrace flags to execve the target process in a stopped state, then attach), with <code>PTRACE_SYSCALL</code> and everytime the process stops, manipulate the call stack to modify the syscall. Yes, I know, that&#39;s not pretty straightforward, but the intended way to do this kind of stuff."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 6, "last_activity_date": 1488543559, "last_edit_date": 1488543559, "creation_date": 1436987401, "answer_id": 31439038, "question_id": 31438697, "link": "https://stackoverflow.com/questions/31438697/ld-preload-can-not-intercept-syscalls-but-only-libcalls/31439038#31439038", "title": "LD_PRELOAD can not intercept syscalls, but only libcalls?", "body": "<p>mmap is a syscall, malloc is not.</p>\n\n<p>Since syscalls are essential for the functioning of a program, they must work before ld.so actually springs into action, they are reside in a section that gets loaded before everything else; it may be linked dynamically, but that mapping <em>(of that particular \"virtual\" dynamic object)</em> is done by the kernel itself. Looong before ld.so actually gets to work.</p>\n"}, {"comments": [{"owner": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 0, "creation_date": 1436996498, "post_id": 31439057, "comment_id": 50852511, "body": "I am targeting on <code>x86_64</code> only; seems the <code>syscall</code> instruction scheme is used. wondering if syscall interception can be done by simply hooking with all <code>syscall</code> instructions in a binary..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 0, "creation_date": 1436996645, "post_id": 31439057, "comment_id": 50852586, "body": "I don&#39;t think so ... <code>syscall</code> is on the one hand a CPU instruction (you can&#39;t hook those) and on the other hand a minimal wrapper in <code>glibc</code> allowing programs to call any syscall using C calling conventions. The latter can be hooked using LD_PRELOAD."}, {"owner": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 0, "creation_date": 1437071616, "post_id": 31439057, "comment_id": 50890426, "body": "I believe it is doable by binary rewriting technique though"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 0, "creation_date": 1437079373, "post_id": 31439057, "comment_id": 50894599, "body": "Well yes, ideally if it <code>syscall</code> instructions can be replaced with an instruction of the same length just calling some own subroutine .. but i guess it&#39;s a one-word instruction taking no data? Ah well, I never learned x86 instruction set, so I&#39;m out ;)"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1488540479, "post_id": 31439057, "comment_id": 72287957, "body": "I&#39;m not sure how this answers the question. The author clearly specified that he&#39;s interested in syscall wrapper, not syscall itself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1488959814, "post_id": 31439057, "comment_id": 72456745, "body": "@yugr the &quot;PS&quot; in the question was added after my answer, but it doesn&#39;t even matter; when libc calls its own functions, there&#39;s no dynamic symbol involved."}, {"owner": {"reputation": 5821, "user_id": 1045004, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/637fa57272759210cf9f6d3237ba21f3?s=128&d=identicon&r=PG", "display_name": "Samuel", "link": "https://stackoverflow.com/users/1045004/samuel"}, "edited": false, "score": 0, "creation_date": 1614730298, "post_id": 31439057, "comment_id": 117473231, "body": "I think this answer is out of date. The title doesn&#39;t match what the answer claims. And the answer recommends to use strace, but in the question the user explained that he already did use strace."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 3, "last_activity_date": 1436989473, "last_edit_date": 1436989473, "creation_date": 1436987462, "answer_id": 31439057, "question_id": 31438697, "link": "https://stackoverflow.com/questions/31438697/ld-preload-can-not-intercept-syscalls-but-only-libcalls/31439057#31439057", "title": "LD_PRELOAD can not intercept syscalls, but only libcalls?", "body": "<p>The title to your question is actually the answer.</p>\n\n<blockquote>\n  <p>assuming mmap is indeed called by main.c (I guess through malloc)</p>\n</blockquote>\n\n<p>So your main.c doesn't call the <em>library function</em> <code>mmap()</code>? Of course you can't intercept syscalls this way, how would you do it? Some architectures have a <code>syscall</code> CPU instruction, some use a special interrupt ... there are a lot of ways, but it's in any case completely different from C calling conventions. The kernel is not somehow <em>linked</em> to your binary but takes control (with some hardware assistence) when your userspace process does something ... \"special\".</p>\n\n<p>If you want to know how to intercept syscalls, this is of course very platform specific, but I would advise you to just take a look in the source of the <code>strace</code> utility. You will never see an <code>malloc()</code> in strace, because this is not a syscall, <code>malloc()</code> uses the <code>mmap</code> syscall.</p>\n\n<p>On the other hand, if you preload your lib to a binary that actually calls the libc <code>mmap()</code> function, it will work as expected.</p>\n\n<p>In a nutshell: libc <code>mmap()</code> is a user-friendly wrapper around the <code>mmap</code> syscall and with the following main:</p>\n\n<pre><code>#include &lt;sys/mman.h&gt;\n\nint main()\n{\n    void *test = mmap(0, 20, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS,\n        -1, 0);\n    return 0;\n}\n</code></pre>\n\n<p>The result is:</p>\n\n<blockquote>\n  <p>Loading hack.<br>\n   Hooked(preload)! mmap:start:(nil), length:20, prot:3, flags:0x22,<br>\n  fd:0xffffffff, offset:0</p>\n</blockquote>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436988896, "post_id": 31439261, "comment_id": 50848369, "body": "Sorry, but sure the libc <code>mmap()</code> can be hooked that way! Just use the OP&#39;s code and a tiny test program calling <code>mmap()</code> ... result is here: &quot;Hooked(preload)! mmap:start:(nil), length:20, prot:3, flags:0x22, fd:0xffffffff, offset:0&quot;"}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 0, "creation_date": 1436989079, "post_id": 31439261, "comment_id": 50848474, "body": "Yes, but not glibc&#39;s calls to its <code>mmap</code> @FelixPalmen"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436989395, "post_id": 31439261, "comment_id": 50848648, "body": "so what lib defines it? It&#39;s definitely intercepted and the <code>LD_PRELOAD</code> &quot;trick&quot; can only intercept calls to libraries linked by <code>ld.so</code> [<b>edit</b> I think you refer to library-internal calls ... right?]"}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 0, "creation_date": 1436989736, "post_id": 31439261, "comment_id": 50848818, "body": "@FelixPalmen &quot;I think you refer to library-internal calls ... right?&quot; Yes."}, {"owner": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 0, "creation_date": 1436996275, "post_id": 31439261, "comment_id": 50852409, "body": "capturing glibc-internal calls <code>mmap</code> is impossible with <code>LD_PRELOAD</code>, but they are captured by <code>strace</code>.. wondering how that is done?"}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "reply_to_user": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 0, "creation_date": 1437062233, "post_id": 31439261, "comment_id": 50884980, "body": "@Richard <a href=\"http://stackoverflow.com/a/6672788\">Here</a> I found an answer how strace works."}, {"owner": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "edited": false, "score": 0, "creation_date": 1437151956, "post_id": 31439261, "comment_id": 50926971, "body": "thx.. though, strace is based on ptrace, which will switch into kernel space at runtime... which is something I want to avoid..."}], "tags": [], "owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "is_accepted": false, "score": 7, "last_activity_date": 1436992310, "last_edit_date": 1436992310, "creation_date": 1436988156, "answer_id": 31439261, "question_id": 31438697, "link": "https://stackoverflow.com/questions/31438697/ld-preload-can-not-intercept-syscalls-but-only-libcalls/31439261#31439261", "title": "LD_PRELOAD can not intercept syscalls, but only libcalls?", "body": "<p>The <code>mmap</code> calls printed by <code>strace</code> are glibc-internal.\nIt's impossible to intercept the glibc-internal calls to <code>mmap</code> with <code>LD_PRELOAD</code>:</p>\n\n<p><code>mmap</code> is not in the <code>.plt</code>-section of <code>/lib64/libc.so.6</code> but is called directly from glibc and therefore <code>LD_PRELOAD</code> can't intercept glibc's calls to <code>mmap</code>.</p>\n\n<pre><code>$ objdump -j .plt -d /lib64/libc.so.6 \n\n/lib64/libc.so.6:     file format elf64-x86-64\n\n\nDisassembly of section .plt:\n\n000000000001f400 &lt;*ABS*+0x8e3fb@plt-0x10&gt;:\n   1f400:   ff 35 02 ac 39 00       pushq  0x39ac02(%rip)        # 3ba008 &lt;_GLOBAL_OFFSET_TABLE_+0x8&gt;\n   1f406:   ff 25 04 ac 39 00       jmpq   *0x39ac04(%rip)        # 3ba010 &lt;_GLOBAL_OFFSET_TABLE_+0x10&gt;\n   1f40c:   0f 1f 40 00             nopl   0x0(%rax)\n\n000000000001f410 &lt;*ABS*+0x8e3fb@plt&gt;:\n   1f410:   ff 25 02 ac 39 00       jmpq   *0x39ac02(%rip)        # 3ba018 &lt;_GLOBAL_OFFSET_TABLE_+0x18&gt;\n   1f416:   68 0b 00 00 00          pushq  $0xb\n   1f41b:   e9 e0 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f420 &lt;*ABS*+0xb8c10@plt&gt;:\n   1f420:   ff 25 fa ab 39 00       jmpq   *0x39abfa(%rip)        # 3ba020 &lt;_GLOBAL_OFFSET_TABLE_+0x20&gt;\n   1f426:   68 0a 00 00 00          pushq  $0xa\n   1f42b:   e9 d0 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f430 &lt;realloc@plt&gt;:\n   1f430:   ff 25 f2 ab 39 00       jmpq   *0x39abf2(%rip)        # 3ba028 &lt;_GLOBAL_OFFSET_TABLE_+0x28&gt;\n   1f436:   68 00 00 00 00          pushq  $0x0\n   1f43b:   e9 c0 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f440 &lt;malloc@plt&gt;:\n   1f440:   ff 25 ea ab 39 00       jmpq   *0x39abea(%rip)        # 3ba030 &lt;_GLOBAL_OFFSET_TABLE_+0x30&gt;\n   1f446:   68 01 00 00 00          pushq  $0x1\n   1f44b:   e9 b0 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f450 &lt;__tls_get_addr@plt&gt;:\n   1f450:   ff 25 e2 ab 39 00       jmpq   *0x39abe2(%rip)        # 3ba038 &lt;_GLOBAL_OFFSET_TABLE_+0x38&gt;\n   1f456:   68 02 00 00 00          pushq  $0x2\n   1f45b:   e9 a0 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f460 &lt;memalign@plt&gt;:\n   1f460:   ff 25 da ab 39 00       jmpq   *0x39abda(%rip)        # 3ba040 &lt;_GLOBAL_OFFSET_TABLE_+0x40&gt;\n   1f466:   68 03 00 00 00          pushq  $0x3\n   1f46b:   e9 90 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f470 &lt;*ABS*+0x90f60@plt&gt;:\n   1f470:   ff 25 d2 ab 39 00       jmpq   *0x39abd2(%rip)        # 3ba048 &lt;_GLOBAL_OFFSET_TABLE_+0x48&gt;\n   1f476:   68 09 00 00 00          pushq  $0x9\n   1f47b:   e9 80 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f480 &lt;_dl_find_dso_for_object@plt&gt;:\n   1f480:   ff 25 ca ab 39 00       jmpq   *0x39abca(%rip)        # 3ba050 &lt;_GLOBAL_OFFSET_TABLE_+0x50&gt;\n   1f486:   68 04 00 00 00          pushq  $0x4\n   1f48b:   e9 70 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f490 &lt;calloc@plt&gt;:\n   1f490:   ff 25 c2 ab 39 00       jmpq   *0x39abc2(%rip)        # 3ba058 &lt;_GLOBAL_OFFSET_TABLE_+0x58&gt;\n   1f496:   68 05 00 00 00          pushq  $0x5\n   1f49b:   e9 60 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f4a0 &lt;free@plt&gt;:\n   1f4a0:   ff 25 ba ab 39 00       jmpq   *0x39abba(%rip)        # 3ba060 &lt;_GLOBAL_OFFSET_TABLE_+0x60&gt;\n   1f4a6:   68 06 00 00 00          pushq  $0x6\n   1f4ab:   e9 50 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f4b0 &lt;*ABS*+0xb8bc0@plt&gt;:\n   1f4b0:   ff 25 b2 ab 39 00       jmpq   *0x39abb2(%rip)        # 3ba068 &lt;_GLOBAL_OFFSET_TABLE_+0x68&gt;\n   1f4b6:   68 08 00 00 00          pushq  $0x8\n   1f4bb:   e9 40 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n\n000000000001f4c0 &lt;*ABS*+0x8ec70@plt&gt;:\n   1f4c0:   ff 25 aa ab 39 00       jmpq   *0x39abaa(%rip)        # 3ba070 &lt;_GLOBAL_OFFSET_TABLE_+0x70&gt;\n   1f4c6:   68 07 00 00 00          pushq  $0x7\n   1f4cb:   e9 30 ff ff ff          jmpq   1f400 &lt;data.8467+0x1f390&gt;\n[m@localhost ~]$ \n</code></pre>\n\n<p></p>\n\n<p>Calls to <code>mmap</code> in glibc don't call it via a <code>.plt</code> entry but directly, it's impossible to intercept these calls:</p>\n\n<pre><code>$ objdump -d /lib64/libc.so.6 | grep mmap\n[...]\n   81628:   e8 83 ad 07 00          callq  fc3b0 &lt;mmap&gt;\n   8177c:   e8 2f ac 07 00          callq  fc3b0 &lt;mmap&gt;\n00000000000fc3b0 &lt;mmap&gt;:\n   fc3c0:   73 01                   jae    fc3c3 &lt;mmap+0x13&gt;\n  13a267:   e8 44 21 fc ff          callq  fc3b0 &lt;mmap&gt;\n$ \n</code></pre>\n\n<p></p>\n\n<pre><code>00000000000fc3b0 &lt;mmap&gt;:\n   fc3b0:   49 89 ca                mov    %rcx,%r10\n   fc3b3:   b8 09 00 00 00          mov    $0x9,%eax\n   fc3b8:   0f 05                   syscall \n   fc3ba:   48 3d 01 f0 ff ff       cmp    $0xfffffffffffff001,%rax\n   fc3c0:   73 01                   jae    fc3c3 &lt;mmap+0x13&gt;\n   fc3c2:   c3                      retq   \n   fc3c3:   48 8b 0d 96 da 2b 00    mov    0x2bda96(%rip),%rcx        # 3b9e60 &lt;_DYNAMIC+0x2e0&gt;\n   fc3ca:   f7 d8                   neg    %eax\n   fc3cc:   64 89 01                mov    %eax,%fs:(%rcx)\n   fc3cf:   48 83 c8 ff             or     $0xffffffffffffffff,%rax\n   fc3d3:   c3                      retq   \n   fc3d4:   66 2e 0f 1f 84 00 00    nopw   %cs:0x0(%rax,%rax,1)\n   fc3db:   00 00 00 \n   fc3de:   66 90                   xchg   %ax,%ax\n</code></pre>\n"}], "owner": {"reputation": 12658, "user_id": 486720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/09f96d82bd9ea08e29f01fe76ae52a7a?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/486720/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3113, "favorite_count": 2, "accepted_answer_id": 31439038, "answer_count": 3, "score": 4, "last_activity_date": 1532022286, "creation_date": 1436986278, "last_edit_date": 1532022286, "question_id": 31438697, "link": "https://stackoverflow.com/questions/31438697/ld-preload-can-not-intercept-syscalls-but-only-libcalls", "title": "LD_PRELOAD can not intercept syscalls, but only libcalls?", "body": "<p>My code works well with <code>malloc</code>, but not with <code>mmap</code>. The code is below:</p>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n  int * p = (int*) malloc(sizeof(int));\n  printf(\"in main(): value p = %d\\n\", *p);\n  free(p);\n}\n</code></pre>\n\n<p>preload.c</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;time.h&gt;\n#include &lt;dlfcn.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n\nvoid *(*orig_malloc)(size_t size);\nvoid *malloc(size_t size){\n  printf(\"  Hooked(preload)! malloc:size:%lu\\n\", size);\n  return orig_malloc(size);\n}\n\nvoid * (*orig_mmap)(void *start, size_t length, int prot, int flags, int fd, off_t offset);\nvoid * mmap(void *start, size_t length, int prot, int flags, int fd, off_t offset){\n  printf(\"  Hooked(preload)! mmap:start:%p, length:%lu, prot:%d, flags:%p, fd:%p, offset:%d\\n\", start, length, prot, flags, fd, offset);\n  return orig_mmap(start, length, prot, flags, fd, offset);\n}\n\nvoid\n_init(void)\n{\n  printf(\"Loading hack.\\n\");\n  orig_malloc = (void* (*)(size_t)) dlsym(RTLD_NEXT, \"malloc\");\n  orig_mmap = (void* (*)(void*, size_t, int, int, int, off_t)) dlsym(RTLD_NEXT, \"mmap\");\n}\n</code></pre>\n\n<p>to compile it</p>\n\n<pre><code>gcc -Wall -fPIC -DPIC -c preload.c\nld -shared -o preload.so preload.o -ldl\ngcc main.c\n</code></pre>\n\n<p>to run it with <code>LD_PRELOAD</code></p>\n\n<pre><code>LD_PRELOAD=./preload.so ./a.out\n</code></pre>\n\n<p>to run it with strace </p>\n\n<pre><code>strace ./a.out 2&gt;&amp;1 | view -\n</code></pre>\n\n<p>the printout from <code>LD_PRELOAD</code> does not hook calls to <code>mmap</code>, but only calls to <code>malloc</code>. Meanwhile, when running with <code>strace</code>, the printout does show <code>mmap</code> is called multiple times.</p>\n\n<p>This result baffles me; assuming <code>mmap</code> is indeed called by <code>main.c</code> (I guess through <code>malloc</code>), how come <code>preload.c</code> can not intercept <code>mmap</code>?</p>\n\n<p>PS: My platform is Ubuntu 14.04 with Linux kernel 3.13</p>\n\n<p>PS2: By syscall, I mean the syscall wrapper in libc (not sure if this makes a difference to the question though)..</p>\n"}, {"tags": ["c", "eclipse", "eclipse-cdt"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436990376, "post_id": 31438386, "comment_id": 50849158, "body": "I doubt there is such an option (I can&#39;t find it). But I think it&#39;s better not to have it, because once you set it and forget, you will bash your head against the wall trying figure out how to get rid of these mysterious symbols defined nowhere."}, {"owner": {"reputation": 635, "user_id": 4795318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6c50cc029a14f6ad3af57d725e7c751a?s=128&d=identicon&r=PG&f=1", "display_name": "jwsc", "link": "https://stackoverflow.com/users/4795318/jwsc"}, "edited": false, "score": 0, "creation_date": 1437031194, "post_id": 31438386, "comment_id": 50863741, "body": "Defining it in your header from Project1, which you include in all your projects?"}], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 5329101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eaBCR.jpg?s=128&g=1", "display_name": "Dmitrii Bulashevich", "link": "https://stackoverflow.com/users/5329101/dmitrii-bulashevich"}, "is_accepted": false, "score": 0, "last_activity_date": 1442859894, "creation_date": 1442859894, "answer_id": 32702136, "question_id": 31438386, "link": "https://stackoverflow.com/questions/31438386/in-eclipse-can-you-define-preprocessor-variables-for-all-projects-in-a-workspac/32702136#32702136", "title": "In Eclipse, can you define preprocessor variables for all projects in a workspace?", "body": "<p>Short answer: no.</p>\n\n<p>A bit longer: workspace may consist of many projects with completely different natures. Not all of them have preprocessor settings at all.</p>\n"}], "owner": {"reputation": 524, "user_id": 2063166, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/27cf62bfa9f0b2941bece69404a4546c?s=128&d=identicon&r=PG", "display_name": "alexc", "link": "https://stackoverflow.com/users/2063166/alexc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1442859894, "creation_date": 1436985230, "question_id": 31438386, "link": "https://stackoverflow.com/questions/31438386/in-eclipse-can-you-define-preprocessor-variables-for-all-projects-in-a-workspac", "title": "In Eclipse, can you define preprocessor variables for all projects in a workspace?", "body": "<p>I have a Eclipse workspace with several C projects: Project1, Project2, Project3, ... Project2, Project3, etc. all include a header from Project1. This header is heavy on preprocessor directives, such as:</p>\n\n<pre><code>#ifdef OPTION1\n  typedef MY_INT int;\n#endif\n</code></pre>\n\n<p>To make Eclipse find <code>MY_INT</code> in the code in Project2, Project3, I currently have to  add the preprocessor definition <code>OPTION1</code> for each project separately.</p>\n\n<p>Is there a way to define <code>OPTION1</code> globally, just once, for all the projects in the workspace.</p>\n"}, {"tags": ["c", "c11"], "comments": [{"owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 0, "creation_date": 1436984558, "post_id": 31438122, "comment_id": 50845949, "body": "<code>void foo(int array[2][5]);</code> is equivalent to <code>void foo(int *array[5]);</code>, not <code>void foo(int (*array)[5]);</code>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 2, "creation_date": 1436987566, "post_id": 31438122, "comment_id": 50847651, "body": "@ooga No, <code>void foo(int array[2][5]);</code> <i>is</i> equivalent to <code>void foo(int (*array)[5]);</code>.  <code>int *array[5]</code> is an array of pointers, not a pointer to arrays."}, {"owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1436988912, "post_id": 31438122, "comment_id": 50848377, "body": "@Dmitri You&#39;re right, of course. Brain glitch (I was thinking of argv, which is of course actually an array of pointers as you say)."}], "answers": [{"comments": [{"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1436984762, "post_id": 31438163, "comment_id": 50846064, "body": "Interesting, but can&#39;t these things be resolved at runtime when the arguments are passed? Even in the example, it is obvious that the distance from <code>p[0]</code> to <code>p[1]</code> is 12 bytes."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1436984878, "post_id": 31438163, "comment_id": 50846128, "body": "No they must be resolved at compile time, and if it depends on what is passed to the function then you would have a different function for each different call. It could not depend on the parameters."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1436984955, "post_id": 31438163, "comment_id": 50846178, "body": "oh, duh. you&#39;re totally right. when you use the pointer, it will only allocate the 4 bytes to point to the array elsewhere, but when you have indeterminate sizes, it can&#39;t know dynamically to allocate as many bytes as needed based on the parameters."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1436985056, "post_id": 31438163, "comment_id": 50846241, "body": "in that case, I feel like this answer is a bit incomplete."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1436985064, "post_id": 31438163, "comment_id": 50846248, "body": "Yes, I know that arrays and pointer are distinct, for instance the former is not a <i>modifiable lvalue</i>. However note that <code>array</code> parameter inside prototype is not an array (in both cases). It smells and behaves like pointer."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1436985098, "post_id": 31438163, "comment_id": 50846265, "body": "@Purag I don&#39;t understand. Incomplete why?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 2, "creation_date": 1436985099, "post_id": 31438163, "comment_id": 50846267, "body": "@Purag With newer versions of the C standard, you can pass the sizes (in other arguments) to do this at runtime... eg. <code>void arrfunc(int x, int y, int arr[y][x])</code>"}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 1, "creation_date": 1436985311, "post_id": 31438163, "comment_id": 50846391, "body": "Incomplete because it doesn&#39;t really answer the question, you say this fact about arrays but don&#39;t tie it into why it won&#39;t compile. While it may be obvious, you&#39;re missing the detail regarding the specific problem with memory and the fact that the function allocates the same amount of space on the stack no matter what."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1436985355, "post_id": 31438163, "comment_id": 50846416, "body": "It won&#39;t compile because the compiler wouldn&#39;t know what to do with the <code>int p[][]</code> inside the function. I think it&#39;s clear."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1436985381, "post_id": 31438163, "comment_id": 50846430, "body": "@GrzegorzSzpetkowski I don&#39;t understand what you mean."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1436985450, "post_id": 31438163, "comment_id": 50846469, "body": "I guess so, I just thought more detail would be helpful."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1436985887, "post_id": 31438163, "comment_id": 50846697, "body": "Actually, with <code>int (*p)[]</code> you <i>don&#39;t</i> know that the distance is the size of a pointer -- that&#39;s a pointer to arrays of <code>int</code>, and you&#39;ve left out the size of those arrays.  Did you mean <code>int *p[]</code> (array of pointers to <code>int</code>)?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1436986054, "post_id": 31438163, "comment_id": 50846800, "body": "It&#39;s possible because the array is converted to a pointer and there is nothing you can do about it. But of course, having a prototype like <code>int p[2][3]</code> guarantees that you can only pass the appropriate array. What you do with it inside the funcion that&#39;s another thing and any wrong manipulation will invoke undefined behavior."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 5, "last_activity_date": 1436984503, "creation_date": 1436984503, "answer_id": 31438163, "question_id": 31438122, "link": "https://stackoverflow.com/questions/31438122/passing-multi-dimensional-array-to-function-without-righmost-size-by-pointer-to/31438163#31438163", "title": "Passing multi-dimensional array to function without righmost size by pointer to incomplete array type", "body": "<p>Arrays are not pointers, if you declare an array of pointers with unspecified size it's ok because it will store the addresses stored in the poitners contigously and the size of each element is known, but <code>p[][]</code> would require the arrays to be contigous not their addresses and the size of the array is unknown so that's the problem.</p>\n\n<p>To make it clear if you say <code>int p[][]</code> the you don't know how far is <code>p[0]</code> from <code>p[1]</code> whereas in <code>int (*p)[]</code> you know that the distance is the size of a pointer.</p>\n\n<p>Arrays are converted to pointers but the are not pointers.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1436985497, "post_id": 31438364, "comment_id": 50846498, "body": "It&#39;s a good answer. Just be sure to use the right terminology. Like &quot;<i>an array is converted to a pointer to it&#39;s first element, but the pointer ultimately points to ...</i>&quot;."}], "tags": [], "owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "is_accepted": false, "score": 5, "last_activity_date": 1436999707, "last_edit_date": 1436999707, "creation_date": 1436985132, "answer_id": 31438364, "question_id": 31438122, "link": "https://stackoverflow.com/questions/31438122/passing-multi-dimensional-array-to-function-without-righmost-size-by-pointer-to/31438364#31438364", "title": "Passing multi-dimensional array to function without righmost size by pointer to incomplete array type", "body": "<p>Arrays are usable as pointers, but they're more than pointers; they point to a number of things which have a size. That way, you can tell the compiler you're interested in the third or fifth element of your array, and it will calculate the location of that element by multiplying the size of one element by three or five to find an offset, and adding that offset to the address of the array.</p>\n\n<p>C doesn't actually have multidimensional arrays. What it does have is arrays of arrays, which is pretty much the same thing. Say you have this:</p>\n\n<pre><code>int a[4][5];\n</code></pre>\n\n<p>In memory, this would look like this:</p>\n\n<pre><code>  [0]                 |[1]                |[2]                |[3]\n  +-------------------|-------------------|-------------------|-------------------+\na |   |   |   |   |   |   |   |   |   |   |   |   | X |   |   |   |   |   |   |   |\n  +-------------------|-------------------|-------------------|-------------------+\n    0   1   2   3   4 | 0   1   2   3   4 | 0   1   2   3   4 | 0   1   2   3   4 |\n</code></pre>\n\n<p>and you then try to access the element at index <code>[2][2]</code>, then the system needs to perform the following calculation (conceptually):</p>\n\n<ul>\n<li>Take the size of an int, and multiply that by five to get the size of the inner array</li>\n<li>Take the size of that inner array, and multiply by two to get the offset of the second element in the outer array</li>\n<li>Take the size of an int again, and multiply that by two to get the offset of the second element in the inner array</li>\n<li>Add the two offsets; that's your memory address</li>\n</ul>\n\n<p>In this case, the calculation is <code>*(a + (2 * 5 * sizeof(int)) + (2 * sizeof(int)))</code>, giving <code>*(a + 12*sizeof(int))</code>, which is indeed the correct offset from the starting pointer.</p>\n\n<p>All that means is that the size of the inner array needs to be defined in order for the compiler to be able to do that calculation. If you don't define the size of any dimension (but the leftmost one) of your multidimensional array, you don't have a defined size, and the compiler will balk.</p>\n"}, {"comments": [{"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1437046096, "post_id": 31438572, "comment_id": 50873054, "body": "This is okay information but not an answer to the question, so I&#39;m not sure why it&#39;s the accepted answer..."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 1, "creation_date": 1437093202, "post_id": 31438572, "comment_id": 50899492, "body": "@Purag: there isn&#39;t really a question in the question, other than &quot;why does C allow this&quot;.  My answer attempts to answer that question -- its not doing what you think it does."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1437136271, "post_id": 31438572, "comment_id": 50916820, "body": "@Purag: I edited my question, so I hope it&#39;s clearer. The other anwers aren&#39;t bad, but I think they doesn&#39;t address to my (somewhat specific) question. Chris&#39;s answer is to closest to it and that&#39;s why it is accepted."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 2, "last_activity_date": 1436986512, "last_edit_date": 1436986512, "creation_date": 1436985874, "answer_id": 31438572, "question_id": 31438122, "link": "https://stackoverflow.com/questions/31438122/passing-multi-dimensional-array-to-function-without-righmost-size-by-pointer-to/31438572#31438572", "title": "Passing multi-dimensional array to function without righmost size by pointer to incomplete array type", "body": "<p>You're tripping over the C language support for arrays of 'unspecified' size, which you can declare, but can't generally use directly unless you give it a more specific size somewhere.</p>\n\n<p>In your example, if you actually try to do anything with the array in <code>bar</code>, you'll get an error:</p>\n\n<pre><code>void bar(int (*p)[])\n{\n    printf(\"%d\\n\", p[1][1]);\n}\n\n% gcc -Wall t.c\nt.c: In function \u2018bar\u2019:\nt.c:23:5: error: invalid use of array with unspecified bounds\n     printf(\"%d\\n\", p[1][1]);\n     ^\n</code></pre>\n\n<p>The only thing you can do with <code>p</code> in bar is cast it to some type with an explicit size, or pass it to some other function that takes a pointer to an array (of specified or unspecified size), and if you use the <em>wrong</em> explicit size to try access the array, you get undefined behavior with no warning.</p>\n"}], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 31438572, "answer_count": 3, "score": 4, "last_activity_date": 1437136668, "creation_date": 1436984309, "last_edit_date": 1437136668, "question_id": 31438122, "link": "https://stackoverflow.com/questions/31438122/passing-multi-dimensional-array-to-function-without-righmost-size-by-pointer-to", "title": "Passing multi-dimensional array to function without righmost size by pointer to incomplete array type", "body": "<p>From what I remember arrays are always passed as pointers. For instance, the declaration:</p>\n\n<pre><code>void foo(int array[2][5]);\n</code></pre>\n\n<p>means for compiler exactly the same thing as:</p>\n\n<pre><code>void foo(int (*array)[5]);\n</code></pre>\n\n<p>You can say that these both forms are equivalent. Now, I wonder, why it is allowed then to declare it as:</p>\n\n<pre><code>void foo(int (*array)[]);\n</code></pre>\n\n<p>while not as:</p>\n\n<pre><code>void foo(int array[][]);\n</code></pre>\n\n<p>Take an example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(int (*p)[3]);\nvoid bar(int (*p)[]);\n\nint main(void)\n{\n    int a[2][3] = {{1, 2, 3}, {4, 5, 6}};\n\n    foo(a);\n    bar(a);\n\n    return 0;\n}\n\n// The same as int p[][3] or int p[N][3] where N is a constant expression\nvoid foo(int (*p)[3]) \n{\n\n}\n\n// Would it the same as int p[][] or int p[N][] (by analogy)?\nvoid bar(int (*p)[])\n{\n\n}\n</code></pre>\n\n<p>It compiles fine and without warnings, but if I change <code>bar</code>'s declaration to:</p>\n\n<pre><code>void bar(int p[][]);\n</code></pre>\n\n<p>then it's an error.</p>\n\n<p>Why C allows such \"obscure\" way to pass an array?</p>\n"}, {"tags": ["c", "linux", "x11", "xorg", "xcb"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436984248, "post_id": 31438020, "comment_id": 50845791, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/18234136/focusin-focusout-not-generated\">FocusIn/FocusOut not generated</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436984364, "post_id": 31438020, "comment_id": 50845848, "body": "how is that a duplicate? I&#39;m interested in an event for when the <i>app</i> not the <i>window</i> loses focus"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1436987073, "post_id": 31438020, "comment_id": 50847382, "body": "X does not have (or understand) the concept of &quot;apps&quot; as distinct from windows.  It does have a concept of &quot;clients&quot; with connections -- any given window belongs to a particular client and will be cleaned up if the client (connection) goes away, but clients do not have focus or anything else associated directly with them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1436987290, "post_id": 31438020, "comment_id": 50847501, "body": "@ChrisDodd I know but I still need to know when a window loses focus <i>not</i> because another window that I know of (that I created) gains focus."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436991135, "post_id": 31438020, "comment_id": 50849610, "body": "@EugeneSh. - It doesn&#39;t seem to be a dupe to me - that question was narrowly focused on how an X server running without a window manager dealt with focus."}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 1, "creation_date": 1436991410, "post_id": 31438020, "comment_id": 50849767, "body": "The best you can do is keep track of all your own windows yourself. When ALL the windows in your app has focused out then the app is out of focus. I&#39;m not sure but I think you may need to include a timeout as well to catch cases when you receive focusout before focusin"}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "reply_to_user": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1437081067, "post_id": 31438020, "comment_id": 50895436, "body": "@slebetman good idea - after a window is deactivated, I start a countdown timer: if another window becomes active before the timeout then the timer is defused, otherwise an app_deactivated event is triggered and the timer is defused. If you post that I&#39;ll accept the answer (seems a reasonable choice)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "edited": false, "score": 0, "creation_date": 1436997218, "post_id": 31440058, "comment_id": 50852833, "body": "That tells you when a window loses focus. I&#39;m interested in the event when a window loses focus as the result of focusing say, an icon on the desktop, or another window <i>from a different app</i>, but <i>not</i> as a result of switching between windows of my own app."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1436998388, "post_id": 31440058, "comment_id": 50853340, "body": "@cap - To do that, you&#39;re going to have to reliably track ALL windows created by that application.  Some ideas on how to do that are here:  <a href=\"http://unix.stackexchange.com/questions/5478/what-process-created-this-x11-window\" title=\"what process created this x11 window\">unix.stackexchange.com/questions/5478/&hellip;</a>"}, {"owner": {"reputation": 13280, "user_id": 435253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80df0d0f2a1945a7bed366ff25f8ea5d?s=128&d=identicon&r=PG", "display_name": "ssokolow", "link": "https://stackoverflow.com/users/435253/ssokolow"}, "edited": false, "score": 0, "creation_date": 1483358937, "post_id": 31440058, "comment_id": 70058464, "body": "I&#39;ve found FocusOut to be unreliable under Kwin 4.x, so I used a different solution: <a href=\"http://stackoverflow.com/a/41426283/435253\">monitor _NET_ACTIVE_WINDOW by subscribing to PropertyNotify events on the root window</a>."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1436990931, "creation_date": 1436990931, "answer_id": 31440058, "question_id": 31438020, "link": "https://stackoverflow.com/questions/31438020/x11-event-when-app-loses-focus/31440058#31440058", "title": "X11 event when app loses focus", "body": "<p>You want the <a href=\"https://tronche.com/gui/x/xlib/events/input-focus/\" rel=\"nofollow\"><code>FocusOut</code> X event</a>.</p>\n\n<blockquote>\n  <p>The X server can report FocusIn or FocusOut events to clients wanting\n  information about when the input focus changes. The keyboard is always\n  attached to some window (typically, the root window or a top-level\n  window), which is called the focus window. The focus window and the\n  position of the pointer determine the window that receives keyboard\n  input. Clients may need to know when the input focus changes to\n  control highlighting of areas on the screen.</p>\n  \n  <p>To receive FocusIn or FocusOut events, set the FocusChangeMask bit in\n  the event-mask attribute of the window.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1740, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436990931, "creation_date": 1436983975, "last_edit_date": 1436984526, "question_id": 31438020, "link": "https://stackoverflow.com/questions/31438020/x11-event-when-app-loses-focus", "title": "X11 event when app loses focus", "body": "<p>Is there an XAppFocusOut event similar to Windows <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632614(v=vs.85).aspx\" rel=\"nofollow\">WM_ACTIVATEAPP</a>\nor OSX's <a href=\"https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/#//apple_ref/occ/intfm/NSApplicationDelegate/applicationDidResignActive:\" rel=\"nofollow\">applicationDidResignActive</a> or some other way to get notified when an app loses focus? XCB solution preferred.</p>\n\n<p>To clarify: I'm interested in an event when the <em>app</em>, not a <em>window</em> loses focus.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1436983598, "post_id": 31437871, "comment_id": 50845403, "body": "You should tag the language (and <i>not</i> put it in the title). It helps people find it, and also changes how the syntax highligting of code works."}, {"owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 1, "creation_date": 1436983972, "post_id": 31437871, "comment_id": 50845628, "body": "Just use one file pointer. fseek back to the beginning of the file before you read it. Then fseek back to the end to write it (although the file pointer is at the end, the fseek may be needed). EDIT: from c99 standard &quot;[for update mode] output shall not be directly followed by input without an intervening call to the fflush function or to a file positioning function (fseek, fsetpos, or rewind), and input shall not be directly followed by output without an intervening call to a file positioning function, unless the input operation encounters end- of-file&quot;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1437009133, "post_id": 31437871, "comment_id": 50856516, "body": "At the statement ftell(), the &#39;file pointer&#39; is at the end of the file.  So a fread()will be trying to read past the end of the file, so naturally, the fread() fails, returning EOF.  Copying the file descriptor pointer does not create a second access to the file, it only makes a copy of the pointer. you could just call fopen with mode &quot;a&quot; to set the fp_write pointer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1437009234, "post_id": 31437871, "comment_id": 50856558, "body": "when expecting a command line parameter (in this case, a file name) always first, check argc to assure that such a parameter exists.  if it does not exist, then output a &#39;usage&#39; message and exit the program."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 0, "creation_date": 1436984993, "post_id": 31437929, "comment_id": 50846201, "body": "@Siguza: That makes them point to the same <code>FILE</code> object, as I said. This means, for example, <code>fseek(fp_write, 0, SEEK_END);</code> has the same effect as <code>fseek(fp_read, 0, SEEK_END);</code>."}, {"owner": {"reputation": 21, "user_id": 4595819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f2acb6909e5cb104c4cf93c3120d401?s=128&d=identicon&r=PG&f=1", "display_name": "Madara Uchiha", "link": "https://stackoverflow.com/users/4595819/madara-uchiha"}, "edited": false, "score": 0, "creation_date": 1437034402, "post_id": 31437929, "comment_id": 50865575, "body": "Yes, you are right. Both the file pointers are pointing to the End of file."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 2, "last_activity_date": 1436983719, "creation_date": 1436983719, "answer_id": 31437929, "question_id": 31437871, "link": "https://stackoverflow.com/questions/31437871/file-operation-in-c/31437929#31437929", "title": "File Operation in C", "body": "<p>Your mistake is treating <code>fp_read</code> and <code>fp_write</code> as if they weren't pointing to the same <code>FILE</code> object.</p>\n"}, {"comments": [{"owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 1, "creation_date": 1436984398, "post_id": 31438129, "comment_id": 50845867, "body": "I would say &quot;different streams&quot; instead of &quot;different files&quot; since it would be possible to open the file twice and have two different streams accessing the same file, in which case the technique may work. Not sure it that&#39;s a good idea, of course!"}], "tags": [], "owner": {"reputation": 363, "user_id": 5116493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43de09ef3f41651bc9e2e1580dc68cef?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/5116493/dan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436984524, "last_edit_date": 1436984524, "creation_date": 1436984328, "answer_id": 31438129, "question_id": 31437871, "link": "https://stackoverflow.com/questions/31437871/file-operation-in-c/31438129#31438129", "title": "File Operation in C", "body": "<p>Similar to the answer prior, you are treating both pointers as if they are referencing different <code>FILE</code> streams. When you perform the <code>fseek</code> function, you are changing where the <code>FILE</code> pointer is located. As a check, try running <code>ftell</code> on both <code>fp_read</code> and <code>fp_write</code> and printing them out to determine if they are at different spots.</p>\n\n<p>Edit: As mentioned by the comment, you could open a second stream for the <code>fp_write</code> variable as follows to append.</p>\n\n<pre><code>fp_write = fopen(\"somefile\", \"a\");\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4595819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f2acb6909e5cb104c4cf93c3120d401?s=128&d=identicon&r=PG&f=1", "display_name": "Madara Uchiha", "link": "https://stackoverflow.com/users/4595819/madara-uchiha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1436984524, "creation_date": 1436983539, "last_edit_date": 1436983725, "question_id": 31437871, "link": "https://stackoverflow.com/questions/31437871/file-operation-in-c", "title": "File Operation in C", "body": "<p>Recently, I've started working on File Operations in C, and I was successfully able to copy the contents of one file to another.</p>\n\n<p>I went a step ahead to read the content of a file from the start of the file and then to write the same content at the end of the same file. (Similar to appending). But I'm not able to do so.</p>\n\n<p>Here is the code that I've written.\nCan anyone suggest, what is the mistake I've done here?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\nint size = 0, index = 0;\n\nchar byte = 0; \n\nFILE *fp_read, *fp_write;\n\nif ((fp_read = fopen(argv[1], \"r+\")) == NULL)\n{\n    printf(\"Unable to Open File %s\\n\", argv[1]);\n}\n\nfp_write = fp_read;\n\nfseek(fp_write, 0, SEEK_END);\n\nsize = ftell(fp_write);\n\nprintf(\"The Size of the file %s:\\t%d\\n\", argv[1], size);\n\nfor (index = 0; index &lt; size; index++)\n{\n    if (fread(&amp;byte, 1, 1, fp_read) != 1)\n    {\n        printf(\"Unable to Read from the file at Location:\\t%d\\n\", index);\n    }\n\n    if (fwrite(&amp;byte, 1, 1, fp_write) != 1)\n    {\n        printf(\"Unable to Write to the file at Location:\\t%d\\n\", index);\n    }\n}\n\nif (fclose(fp_read))\n{\n    printf(\"Unsuccessful in Closed the File\\n\");\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Regards,</p>\n\n<p>Naruto Uzumaki </p>\n"}, {"tags": ["c++", "c", "multithreading", "signals", "interrupt"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436983552, "post_id": 31437568, "comment_id": 50845371, "body": "Why are you using the signal to <i>interrupt</i> as an &quot;attention&quot; signal? It&#39;s usually the signal sent when trying to cancel a program with CTRL-C. If you catch it, and have a problem leading a user to wanting to interrupt your program, it would no longer be possible using the usual standard way. You may want to use e.g. <code>SIGUSR1</code> or <code>SIGUSR2</code>."}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1437067081, "post_id": 31437568, "comment_id": 50887892, "body": "@JoachimPileborg  I want to do it for windows also. I think I cannot use SIGUSER1 and SIGUSR2 for that. Please let me know if I am incorrect."}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1437069189, "post_id": 31437568, "comment_id": 50889042, "body": "@JoachimPileborg can you please have a look at <a href=\"http://stackoverflow.com/questions/31461171/signal-handler-getting-called-in-wrong-thread\" title=\"signal handler getting called in wrong thread\">stackoverflow.com/questions/31461171/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436983688, "post_id": 31437821, "comment_id": 50845460, "body": "By using <code>sigaction</code> one can <i>control</i> the behavior with a flag."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436984310, "post_id": 31437821, "comment_id": 50845822, "body": "Yes, not having to reinstall is an obvious advantage among other things."}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "edited": false, "score": 0, "creation_date": 1437069170, "post_id": 31437821, "comment_id": 50889032, "body": "@BlueMoon can you please have a look at <a href=\"http://stackoverflow.com/questions/31461171/signal-handler-getting-called-in-wrong-thread\" title=\"signal handler getting called in wrong thread\">stackoverflow.com/questions/31461171/&hellip;</a>"}, {"owner": {"reputation": 1497, "user_id": 4843379, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a3681737b6e2ecc037c83474eed2309c?s=128&d=identicon&r=PG&f=1", "display_name": "incompetent", "link": "https://stackoverflow.com/users/4843379/incompetent"}, "edited": false, "score": 0, "creation_date": 1437662166, "post_id": 31437821, "comment_id": 51132792, "body": "but still sigaction(or any method) can not guarantee to entertain all signals generated"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1436983692, "last_edit_date": 1436983692, "creation_date": 1436983401, "answer_id": 31437821, "question_id": 31437568, "link": "https://stackoverflow.com/questions/31437568/how-to-send-sigint-signal-multiple-times/31437821#31437821", "title": "how to send SIGINT signal multiple times", "body": "<p>Typically after the first signal, signal handler is reset to <code>SIG_DFL</code> (Unix V signals) and the default behaviour for <code>SIG_INT</code> to exit the program. This is what you observe. So it would require to reinstall the handler again. Install it again in the handler:</p>\n\n<pre><code>void signal_handler(int signal)\n{\n    signal(SIGINT, signal_handler);\n    printf(\"Received signal %d\\n\", signal);\n}\n</code></pre>\n\n<p>A better approach would be to use <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow\"><code>sigaction</code></a> instead as it doesn't have this behaviour.</p>\n"}], "owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1663, "favorite_count": 0, "accepted_answer_id": 31437821, "answer_count": 1, "score": 0, "last_activity_date": 1436983692, "creation_date": 1436982635, "question_id": 31437568, "link": "https://stackoverflow.com/questions/31437568/how-to-send-sigint-signal-multiple-times", "title": "how to send SIGINT signal multiple times", "body": "<p>I am trying to send a SIGINT signal to main thread from some other thread. The main thread has assigned a handler for for the signal. When I send first signal, it is caught in handler. But I want to send signal continuously. but after handling the first signal, the program terminates. I have put a while loop. So what I expect is that it should continue sending these signals. Following is my code</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;windows.h&gt;\n\nstatic void catch_function(int signo) {\n    puts(\"Interactive attention signal caught.\");\n}\n\nDWORD WINAPI MyThreadFunction( LPVOID lpParam ) \n{\n    while(1)\n    {\n        Sleep(50);\n        puts(\"Raising the interactive attention signal.\");\n        if (raise(SIGINT) != 0) \n        {\n            fputs(\"Error raising the signal.\\n\", stderr);\n            return EXIT_FAILURE;\n        }\n    }\nreturn 0;\n}\n\n\nint main(void) \n{\n     if (signal(SIGINT, catch_function) == SIG_ERR) {\n    fputs(\"An error occurred while setting a signal handler.\\n\", stderr);\n    return EXIT_FAILURE;\n    }\n\n    HANDLE thread;\n    DWORD  threadId;\n    thread = CreateThread(NULL, 0, &amp;MyThreadFunction, NULL, 0, &amp;threadId);\n    if(!thread)\n    {\n        printf(\"CreateThread() failed\");\n    }\n\n    while(1)\n    {\n        Sleep(50);\n    }\n    puts(\"Exiting.\");\n    return 0;\n}\n</code></pre>\n\n<p>The output of following code is </p>\n\n<pre><code>Raising the interactive attention signal.\nInteractive attention signal caught.\nRaising the interactive attention signal.\n</code></pre>\n\n<p>I have tried using a simple example also. Here I am sending a signal 3 times, but only first time the signal is caught. After that the program terminated. Following is the code</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid signal_handler(int signal)\n{\n    printf(\"Received signal %d\\n\", signal);\n}\n\nint main(void)\n{\n    // Install a signal handler.\n    signal(SIGINT, signal_handler);\n\n    printf(\"Sending signal %d\\n\", SIGINT);\n    raise(SIGINT);\n    raise(SIGINT);\n    raise(SIGINT);\n    printf(\"Exit main()\\n\");\n}\n</code></pre>\n\n<p>Output is </p>\n\n<pre><code>sending signal 2\nReceived signal 2\n</code></pre>\n\n<p>So I want to know how can I continue sending some signals from one thread  to some other thread? I want that one of my threads will send SIGINT signals and main will catch them and do some operations accordingly.</p>\n"}, {"tags": ["c", "short-circuiting"], "comments": [{"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 2, "creation_date": 1436981265, "post_id": 31437095, "comment_id": 50843984, "body": "Check out <a href=\"http://stackoverflow.com/questions/3958864/c-is-there-lazy-evaluation-when-using-operator-as-in-c\" title=\"c is there lazy evaluation when using operator as in c\">stackoverflow.com/questions/3958864/&hellip;</a>"}, {"owner": {"reputation": 1013, "user_id": 1858954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f399b9420bf9ec6ad27e823cfd2bf2?s=128&d=identicon&r=PG", "display_name": "spalac24", "link": "https://stackoverflow.com/users/1858954/spalac24"}, "edited": false, "score": 0, "creation_date": 1436982890, "post_id": 31437095, "comment_id": 50844964, "body": "That&#39;s pretty much what short circuiting is all about. And it is guaranteed by the standards ONLY when the operation is between <code>bool</code>. NOT when the operator is overloaded."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 1013, "user_id": 1858954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f399b9420bf9ec6ad27e823cfd2bf2?s=128&d=identicon&r=PG", "display_name": "spalac24", "link": "https://stackoverflow.com/users/1858954/spalac24"}, "edited": false, "score": 0, "creation_date": 1436982959, "post_id": 31437095, "comment_id": 50845003, "body": "@user3267581 What do you mean by overloaded operator? Are you having <i>C++</i> in mind?"}, {"owner": {"reputation": 1013, "user_id": 1858954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f399b9420bf9ec6ad27e823cfd2bf2?s=128&d=identicon&r=PG", "display_name": "spalac24", "link": "https://stackoverflow.com/users/1858954/spalac24"}, "edited": false, "score": 0, "creation_date": 1436983185, "post_id": 31437095, "comment_id": 50845145, "body": "Yes, sorry, didn&#39;t notice the question was C specific."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436983346, "post_id": 31437095, "comment_id": 50845233, "body": "I believe in C++ it should be possible for an overloaded <code>||</code>  be implemented as short circuited as well.. But it&#39;s a different question"}], "answers": [{"tags": [], "owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "is_accepted": false, "score": 1, "last_activity_date": 1436981540, "creation_date": 1436981540, "answer_id": 31437220, "question_id": 31437095, "link": "https://stackoverflow.com/questions/31437095/conditional-execution-based-on-short-circuit-logical-operation/31437220#31437220", "title": "Conditional execution based on short-circuit logical operation", "body": "<p>Yes, you are correct in your thinking. <code>c || do_something()</code> will short-circuit if <code>c</code> is <code>true</code>, and so will never call <code>do_something()</code>.</p>\n\n<p>However, if <code>c</code> is <code>false</code>, then <code>do_something()</code> will be called and its result will be the new value of <code>p</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 2, "last_activity_date": 1436982080, "creation_date": 1436982080, "answer_id": 31437391, "question_id": 31437095, "link": "https://stackoverflow.com/questions/31437095/conditional-execution-based-on-short-circuit-logical-operation/31437391#31437391", "title": "Conditional execution based on short-circuit logical operation", "body": "<p>After some search I will answer my question myself referencing the standard:\nThe <a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf\" rel=\"nofollow\">C99 standard</a>, section <strong>6.5.14 Logical OR operator</strong> is stating:</p>\n\n<blockquote>\n  <p>Unlike the bitwise | operator, the || operator guarantees\n  left-to-right evaluation; there is a sequence point after the\n  evaluation of the first operand. If the first operand compares unequal\n  to 0, the second operand is not evaluated.</p>\n</blockquote>\n\n<p>And a similar section about <code>&amp;&amp;</code>.\nSo the answer is yes, the code can be safely considered equivalent.</p>\n"}], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 31437391, "answer_count": 2, "score": 1, "last_activity_date": 1464792909, "creation_date": 1436981175, "last_edit_date": 1464792909, "question_id": 31437095, "link": "https://stackoverflow.com/questions/31437095/conditional-execution-based-on-short-circuit-logical-operation", "title": "Conditional execution based on short-circuit logical operation", "body": "<p>As the evaluation of logical operators <code>&amp;&amp;</code> and <code>||</code> are defined as \"short circuit\", I am assuming the following two pieces of code are equivalent:</p>\n\n<pre><code>p = c || do_something();\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (c) {\n   p = true;\n}\nelse {\n   p = do_something();\n}\n</code></pre>\n\n<p>given <code>p</code> and <code>c</code> are <code>bool</code>, and <code>do_something()</code> is a function returning <code>bool</code> and <strong>possibly having side effects</strong>. According to the C standard, can one rely on the assumption the snippets are equivalent? In particular, having the first snippet, is it promised that if <code>c</code> is true, the function won't be executed, and no side effects of it will take place? </p>\n"}, {"tags": ["c", "linux", "stack-trace"], "comments": [{"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 0, "creation_date": 1437060740, "post_id": 31437045, "comment_id": 50883915, "body": "For anyone who&#39;s interested - a possible way of doing this seems to be using libunwind&#39;s <code>ptrace</code> functionality (I&#39;m still testing).  See <a href=\"http://www.nongnu.org/libunwind/man/libunwind-ptrace(3).html\" rel=\"nofollow noreferrer\">this page</a>.  Additionally, <a href=\"http://codingrelic.geekhold.com/2009/05/pre-mortem-backtracing.html\" rel=\"nofollow noreferrer\">here&#39;s a useful example</a> for how to use libunwind to get a GDB-esque printout.  I&#39;d still appreciate any advice anyone might have!"}], "answers": [{"tags": [], "owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "is_accepted": true, "score": 3, "last_activity_date": 1437074228, "last_edit_date": 1437074228, "creation_date": 1437070063, "answer_id": 31461502, "question_id": 31437045, "link": "https://stackoverflow.com/questions/31437045/how-do-you-programmatically-obtain-a-stack-trace-of-a-child-process-from-its-par/31461502#31461502", "title": "How do you programmatically obtain a stack trace of a child process from its parent?", "body": "<p>To answer my own question - this is doable.  You need <a href=\"http://www.nongnu.org/libunwind/index.html\" rel=\"nofollow\"><code>libunwind</code></a> and <code>ptrace</code>. <code>libunwind</code> provides a wrapper for <code>ptrace</code> that allows you to unwind remote targets. Here's sample code, running an NPB benchmark (cg, Class A):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;wait.h&gt;\n#include &lt;sys/ptrace.h&gt;\n#include &lt;libunwind.h&gt;\n#include &lt;libunwind-x86_64.h&gt;\n#include &lt;libunwind-ptrace.h&gt;\n#include &lt;signal.h&gt;\n\n#define panic(X) fprintf(stderr, #X \"\\n\");\n\nstatic unw_addr_space_t as;\nstatic struct UPT_info *ui;\n\nvoid do_backtrace(pid_t child) {\n\n    ui = _UPT_create(child);\n    if (!ui) {\n        panic(\"_UPT_create failed\");\n    }\n\n    ptrace(PTRACE_ATTACH, child, 0, 0);\n    struct timespec t = { .tv_sec = 0, t.tv_nsec = 1000000 };\n    nanosleep(&amp;t, NULL);\n\n    unw_cursor_t c;\n    int rc = unw_init_remote(&amp;c, as, ui);\n    if (rc != 0) {\n        if (rc == UNW_EINVAL) {\n            panic(\"unw_init_remote: UNW_EINVAL\");\n        } else if (rc == UNW_EUNSPEC) {\n            panic(\"unw_init_remote: UNW_EUNSPEC\");\n        } else if (rc == UNW_EBADREG) {\n            panic(\"unw_init_remote: UNW_EBADREG\");\n        } else {\n            panic(\"unw_init_remote: UNKNOWN\");\n        }\n    }\n\n    do {\n        unw_word_t  offset, pc;\n        char        fname[64];\n\n        unw_get_reg(&amp;c, UNW_REG_IP, &amp;pc);\n        fname[0] = '\\0';\n        (void) unw_get_proc_name(&amp;c, fname, sizeof(fname), &amp;offset);\n\n        printf(\"\\n%p : (%s+0x%x) [%p]\\n\", (void *)pc,\n                                          fname,\n                                          (int) offset,\n                                          (void *) pc);\n    } while (unw_step(&amp;c) &gt; 0);\n\n\n    ptrace(PTRACE_DETACH, child, 0, 0);\n\n    _UPT_destroy(ui);\n}\n\n\nint main(int argc __attribute__((unused)), char **argv, char **envp) {\n\n    as = unw_create_addr_space(&amp;_UPT_accessors, 0);\n    if (!as) {\n        panic(\"unw_create_addr_space failed\");\n    }\n\n    pid_t child;\n    child = fork();\n\n    if (!child) {\n\n        execve(\"/home/#######/#######/my_utilities/child_bt/cg.A.x\",\n                argv, envp);\n\n        return 0;\n\n    } else {\n\n        struct timespec t = { .tv_sec = 1, .tv_nsec = 0 };\n        nanosleep(&amp;t, NULL);\n\n        do_backtrace(child);\n\n        int status;\n        waitpid(child, &amp;status, 0);\n\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>#######-######-desktop:~/popcorn/my_utilities/child_bt$ ./child_bt \n\n NAS Parallel Benchmarks (NPB3.3-SER) - CG Benchmark\n\n Size:       14000\n Iterations:    15\n\n Initialization time =           0.422 seconds\n\n   iteration           ||r||                 zeta\n        1       0.26065081214763E-12    19.9997581277040\n        2       0.25753187736717E-14    17.1140495745506\n        3       0.25934878907518E-14    17.1296668946143\n        4       0.25626292684826E-14    17.1302113581193\n        5       0.25110613524700E-14    17.1302338856353\n        6       0.25581937582088E-14    17.1302349879482\n        7       0.25456477041068E-14    17.1302350498916\n        8       0.24494068328538E-14    17.1302350537510\n\n0x400c85 : (conj_grad_+0x135) [0x400c85]\n\n0x401ec8 : (MAIN__+0x739) [0x401ec8]\n\n0x402b39 : (main+0x1d) [0x402b39]\n\n0x7f8ee80c2ec5 : (__libc_start_main+0xf5) [0x7f8ee80c2ec5]\n\n0x400a89 : (_start+0x29) [0x400a89]\n        9       0.24885235903729E-14    17.1302350540101\n       10       0.24771507610856E-14    17.1302350540284\n       11       0.24928441017003E-14    17.1302350540298\n       12       0.24443706061229E-14    17.1302350540299\n       13       0.24709361922612E-14    17.1302350540299\n       14       0.24381630450112E-14    17.1302350540299\n       15       0.24296673223448E-14    17.1302350540299\n Benchmark completed \n VERIFICATION SUCCESSFUL \n Zeta is     0.1713023505403E+02\n Error is    0.5122640033228E-13\n\n\n CG Benchmark Completed.\n Class           =                        A\n Size            =                    14000\n Iterations      =                       15\n Time in seconds =                     1.01\n Mop/s total     =                  1483.11\n Operation type  =           floating point\n Verification    =               SUCCESSFUL\n Version         =                    3.3.1\n Compile date    =              16 Jul 2015\n\n Compile options:\n    F77          = gfortran \n    FLINK        = $(F77)\n    F_LIB        = (none)\n    F_INC        = (none)\n    FFLAGS       = -O\n    FLINKFLAGS   = -O\n    RAND         = randi8\n\n\n Please send all errors/feedbacks to:\n\n NPB Development Team\n npb@nas.nasa.gov\n</code></pre>\n\n<p>I based the <code>do_backtrace</code> function on the <code>test-ptrace.c</code> file within the <code>tests</code> folder of the <code>libunwind</code> distribution, as well as code from <a href=\"http://codingrelic.geekhold.com/2009/05/pre-mortem-backtracing.html\" rel=\"nofollow\">this blog</a>.</p>\n"}], "owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1516, "favorite_count": 3, "accepted_answer_id": 31461502, "answer_count": 1, "score": 4, "last_activity_date": 1437074228, "creation_date": 1436981008, "last_edit_date": 1437074209, "question_id": 31437045, "link": "https://stackoverflow.com/questions/31437045/how-do-you-programmatically-obtain-a-stack-trace-of-a-child-process-from-its-par", "title": "How do you programmatically obtain a stack trace of a child process from its parent?", "body": "<p>Let's say that I fork a child process within my program. At some point, I pause the child process with <code>kill(child, SIGSTOP)</code> and want to inspect the stack's contents. Is there a way to programmatically obtain a stack trace of a child process from its parent?</p>\n\n<p>I know that <code>ptrace</code> is the standard way of tracing a child process and examining its memory/registers. I also know that <code>backtrace</code> provides this functionality for the <em>calling</em> thread. Is there a function or library that merges these functionalities? Or would I need to manually walk the stack with <code>ptrace</code>?</p>\n"}, {"tags": ["c", "string", "malloc", "free"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1436980699, "post_id": 31436825, "comment_id": 50843661, "body": "What exactly is the code doing that you don&#39;t expect?  What do you expect?"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1436980860, "post_id": 31436825, "comment_id": 50843750, "body": "Don&#39;t cast <code>malloc</code> in C."}, {"owner": {"reputation": 125, "user_id": 4352804, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh4.googleusercontent.com/-dq1mgQc-B60/AAAAAAAAAAI/AAAAAAAAAeo/uthI7lhlW4Q/photo.jpg?sz=128", "display_name": "Goutham Panneeru", "link": "https://stackoverflow.com/users/4352804/goutham-panneeru"}, "edited": false, "score": 0, "creation_date": 1436983554, "post_id": 31436825, "comment_id": 50845373, "body": "sorry for the mess, I just want to know how can i change the string every time the for loop runs."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1436983921, "post_id": 31436825, "comment_id": 50845596, "body": "You do - it&#39;s a new string in the same memory. You didn&#39;t zero the memory or nul-terminate the string though. Perhaps you could show the specific behaviour you don&#39;t like?"}], "answers": [{"comments": [{"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 3, "creation_date": 1436980747, "post_id": 31436935, "comment_id": 50843690, "body": "My first response to this code was &quot;wtf???&quot;  Your response is much better - thank you!"}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 5, "last_activity_date": 1436980661, "creation_date": 1436980661, "answer_id": 31436935, "question_id": 31436825, "link": "https://stackoverflow.com/questions/31436825/using-free-cant-deallocate-memory/31436935#31436935", "title": "Using free() can&#39;t deallocate memory", "body": "<p>Free invalidates the pointer, but does not change the value. You should zero it if that is what you want. After freeing it, what it points to is undefined, but is likely to contain the last thing in it until it is reused.</p>\n\n<pre><code>free(*ptr);\n*ptr = NULL;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436984675, "post_id": 31437552, "comment_id": 50846018, "body": "Note that the <code>if (*ptr_##Lin)</code> is superfluous, <code>free(0)</code> is a silent no-op. Apart from that, neat idea :)"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1436982899, "last_edit_date": 1495541741, "creation_date": 1436982570, "answer_id": 31437552, "question_id": 31436825, "link": "https://stackoverflow.com/questions/31436825/using-free-cant-deallocate-memory/31437552#31437552", "title": "Using free() can&#39;t deallocate memory", "body": "<p>You might consider making your <code>getFree</code> a macro (as an alternative in the spirit of <a href=\"https://stackoverflow.com/a/31436935/841108\">Robert Jacobs' answer</a>), like</p>\n\n<pre><code>#define GET_FREE_AT_BIS(Lin,PtrVar) do { \\\n  void**ptr_##Lin = (void**) &amp;(PtrVar);  \\\n  if (*ptr_##Lin) free (*ptr_##Lin);     \\\n  *ptr_##Lin = NULL;                     \\\n} while(0)\n\n#define GET_FREE_AT(Lin,PtrVar) GET_FREE_AT_BIS(Lin,PtrVar)\n#define GET_FREE(PtrVar) GET_FREE_AT(__LINE__,(PtrVar))\n</code></pre>\n\n<p>the double indirection is required to get <code>__LINE__</code> expanded and suitable for macro concatenation. It is used to have somehow unique variable names like <code>ptr_123</code> for a macro invocation from line 123 (to ease debugging, and often avoid clashes with variables named <code>ptr</code>)</p>\n\n<p>then code</p>\n\n<pre><code>GET_FREE(cpy);\n</code></pre>\n\n<p>wthout any visible address-of operator (which gets done in the macro expansion).</p>\n\n<p>My macro should work even if invoked as <code>GET_FREE(ptrarr[i++]);</code> but a simpler but wrong variant like</p>\n\n<pre><code>#define GET_FREE_BUGGY(PtrVar) do { free(PtrVar); PtrVar=NULL; } while(0)\n</code></pre>\n\n<p>won't work as people expect when invoked as <code>GET_FREE_BUGGY(ptrarr[i++]);</code> because then <code>i</code> would be incremented twice.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 0, "last_activity_date": 1436983671, "creation_date": 1436983671, "answer_id": 31437915, "question_id": 31436825, "link": "https://stackoverflow.com/questions/31436825/using-free-cant-deallocate-memory/31437915#31437915", "title": "Using free() can&#39;t deallocate memory", "body": "<p>If <code>free</code> <em>didn't</em> deallocate memory, as you suggest, a subsequent call to <code>malloc</code> would have to return a different address. Note that the argument isn't changed, it's just undefined behaviour to access it after <code>free</code> returns.</p>\n\n<p>It's only because <code>free</code> actually does deallocate memory that a subsequent call to <code>malloc</code> can (and does) return the same address when you request the same amount of memory.</p>\n\n<p>And why not? This is actually optimal behaviour. If you're just concerned about the contents of the (re)allocated memory - neither <code>free</code> nor <code>malloc</code> tell you anything about what's in there. Since there are no guarantees or requirements on the contents, they decided to leave it alone.</p>\n\n<p>If you want your memory zeroed, use <code>calloc</code> or <code>memset</code> or something instead. Otherwise just relax and stop making assumptions about what should be in your uninitialized memory.</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1437020487, "last_edit_date": 1437020487, "creation_date": 1437018427, "answer_id": 31445047, "question_id": 31436825, "link": "https://stackoverflow.com/questions/31436825/using-free-cant-deallocate-memory/31445047#31445047", "title": "Using free() can&#39;t deallocate memory", "body": "<p>For your particular case, the string need not reallocate in every loop iteration. Consider this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    char * cpy = malloc(500);    // Allocate in the beginning\n    int T, i;\n    scanf(\"%d\\n\", &amp;T);    // Clear newline buffer\n    while (T--) {\n        // for (i = 0; (cpy[i] = getchar()) != '\\n'; ++i);    // Scan until newline\n        fgets(cpy, 499, stdin);    // Scan until newline\n        printf(\"%s\", cpy);\n    }\n    free(cpy);    // Free in the end\n    return 0;\n}\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<pre><code>3\nabcde\nfghij\nklmno\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>abcde\nfghij\nklmno\n</code></pre>\n\n<p>See a demo <a href=\"http://ideone.com/KKEz0j\" rel=\"nofollow\">http://ideone.com/KKEz0j</a>.</p>\n"}], "owner": {"reputation": 125, "user_id": 4352804, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh4.googleusercontent.com/-dq1mgQc-B60/AAAAAAAAAAI/AAAAAAAAAeo/uthI7lhlW4Q/photo.jpg?sz=128", "display_name": "Goutham Panneeru", "link": "https://stackoverflow.com/users/4352804/goutham-panneeru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "answer_count": 4, "score": -3, "last_activity_date": 1457092010, "creation_date": 1436980299, "last_edit_date": 1457092010, "question_id": 31436825, "link": "https://stackoverflow.com/questions/31436825/using-free-cant-deallocate-memory", "title": "Using free() can&#39;t deallocate memory", "body": "<p>The function <code>getFree()</code> I have seen it in one of the answers to a similar question, but the string <code>cpy</code> still have the same string given for the 1st time for number of times it runs i.e., T times. So, someone please help. </p>\n\n<pre><code>void getFree(char ** ptr) {\n    if (*ptr != NULL) {\n        free(*ptr);\n    }\n    return;\n}\n\nint main() {\n    int T, j;\n    scanf(\"%d\", &amp;T);\n    for (j = 0; j &lt; T; j++) {\n        char * cpy,\n        int count = 0, i = 0, x = 0, k = 0;\n        cpy = (char*)malloc(500 * sizeof(char));\n        if (getchar() == '\\n') {\n            do {\n                *(cpy + i) = getchar();\n                i++;\n            } while(*(cpy + i - 1) != '\\n');\n        }\n        getFree(&amp;cpy); \n        printf(\"%s\", cpy);           \n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "logical-operators", "short-circuiting"], "comments": [{"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 5, "creation_date": 1436980190, "post_id": 31436721, "comment_id": 50843350, "body": "<code>&amp;&amp;</code> is called a &quot;short-circuit operator&quot;: if the first condition fails, the second is not evaluated at all. Similarly, if the first condition of <code>||</code> succeeds, the second is not evaluated at all. <code>&amp;</code> and <code>|</code> are not short-circuiting."}], "answers": [{"tags": [], "owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "is_accepted": false, "score": 1, "last_activity_date": 1436980160, "creation_date": 1436980160, "answer_id": 31436766, "question_id": 31436721, "link": "https://stackoverflow.com/questions/31436721/how-does-the-compiler-evaluate-a-condition-in-c/31436766#31436766", "title": "How does the compiler evaluate a condition in C", "body": "<p>The <code>&amp;&amp;</code> operator short circuits under C. This means if the first condition evaluated fails and it is enough to decide on the result of the expression it will terminate there.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 10, "last_activity_date": 1436980726, "last_edit_date": 1436980726, "creation_date": 1436980329, "answer_id": 31436838, "question_id": 31436721, "link": "https://stackoverflow.com/questions/31436721/how-does-the-compiler-evaluate-a-condition-in-c/31436838#31436838", "title": "How does the compiler evaluate a condition in C", "body": "<p>According to the C Standard (6.5.13 Logical AND operator)</p>\n\n<blockquote>\n  <p>4 Unlike the bitwise binary &amp; operator, the &amp;&amp; operator guarantees\n  left-to-right evaluation; if the second operand is evaluated, there is\n  a sequence point between the evaluations of the first and second\n  operands. <strong>If the first operand compares equal to 0, the second operand\n  is not evaluated.</strong></p>\n</blockquote>\n\n<p>As for the logical OR operator (6.5.14 Logical OR operator) then</p>\n\n<blockquote>\n  <p>4 Unlike the bitwise | operator, the || operator guarantees\n  left-to-right evaluation; if the second operand is evaluated, there is\n  a sequence point between the evaluations of the first and second\n  operands. <strong>If the first operand compares unequal to 0, the second\n  operand is not evaluated</strong>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1436980411, "creation_date": 1436980411, "answer_id": 31436862, "question_id": 31436721, "link": "https://stackoverflow.com/questions/31436721/how-does-the-compiler-evaluate-a-condition-in-c/31436862#31436862", "title": "How does the compiler evaluate a condition in C", "body": "<p>using this chart:</p>\n\n<p><a href=\"http://www.swansontec.com/sopc.html\" rel=\"nofollow\">http://www.swansontec.com/sopc.html</a></p>\n\n<p>you will see that the &amp;&amp; operator is evaluated from left to right.</p>\n\n<p>Once a 'false' expression is encountered in a &amp;&amp;, the execution 'shortcuts' out of the rest of the evaluation.</p>\n\n<p>So if the first expression is false, then the second expression is not evaluated</p>\n"}, {"tags": [], "owner": {"reputation": 6240, "user_id": 488700, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/620a68b8a42a5af384929133de068c63?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/488700/artur"}, "is_accepted": false, "score": 4, "last_activity_date": 1436980533, "creation_date": 1436980533, "answer_id": 31436902, "question_id": 31436721, "link": "https://stackoverflow.com/questions/31436721/how-does-the-compiler-evaluate-a-condition-in-c/31436902#31436902", "title": "How does the compiler evaluate a condition in C", "body": "<p>As others have already said &amp;&amp; is a short circuit operator which in case of <code>&amp;&amp;</code> will terminate evaluation as soon as the result is known (which happens when going L-> any operand evaluates to to zero/false which is sufficient condition to cease further evaluation since 0 &amp;&amp; a = 0)</p>\n\n<p>Shortly your pseudo-code:</p>\n\n<pre><code>if( (today is Thursday) &amp;&amp; (Month is July) )\n{\n //do something\n}\n</code></pre>\n\n<p>is equivalent to this:</p>\n\n<pre><code>if (today is Thursday)\n{\n    if (Month is July)\n    {\n        //do something\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1824, "user_id": 4696127, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/914f625817ff2e5cb0cee5db88f13ae4?s=128&d=identicon&r=PG&f=1", "display_name": "tubby", "link": "https://stackoverflow.com/users/4696127/tubby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2380, "favorite_count": 1, "accepted_answer_id": 31436838, "answer_count": 4, "score": 5, "last_activity_date": 1534744468, "creation_date": 1436980014, "last_edit_date": 1534744468, "question_id": 31436721, "link": "https://stackoverflow.com/questions/31436721/how-does-the-compiler-evaluate-a-condition-in-c", "title": "How does the compiler evaluate a condition in C", "body": "<p>I have a question regarding how the compiler evaluates 'AND' condition in c.</p>\n\n<p>Say, I write a statement like</p>\n\n<pre><code>if( (today is Thursday) &amp;&amp; (Month is July) )\n{\n //do something\n}\n</code></pre>\n\n<p>Assume today is not Thursday, but the Month is indeed July.</p>\n\n<p>Does the compiler check both the conditions, and do 1&amp;0 == 0? \nOr as soon as it sees that today is not Thursday, it just skips out and doesn't even bother to check the Month condition since it's inconsequential.</p>\n\n<p>I'm using the following gcc</p>\n\n<pre><code>Using built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) \n</code></pre>\n"}, {"tags": ["c", "linux", "x11", "xlib", "xcb"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "edited": false, "score": 0, "creation_date": 1437057715, "post_id": 31449379, "comment_id": 50881748, "body": "Hi Andrey, looks like we meet again in the not-possible-land of Linux :)"}], "tags": [], "owner": {"reputation": 22804, "user_id": 705115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/212db408fb84ef88b9d5c6b543076c1d?s=128&d=identicon&r=PG", "display_name": "Andrey Sidorov", "link": "https://stackoverflow.com/users/705115/andrey-sidorov"}, "is_accepted": true, "score": 0, "last_activity_date": 1437036142, "creation_date": 1437036142, "answer_id": 31449379, "question_id": 31435934, "link": "https://stackoverflow.com/questions/31435934/x11-intervene-while-moving-and-resizing-windows/31449379#31449379", "title": "X11 intervene while moving and resizing windows", "body": "<p>not possible from app itself, something like magnetic windows is implemented at window manager level </p>\n\n<p>Applications may communicate some of this behaviour via <a href=\"http://standards.freedesktop.org/wm-spec/wm-spec-latest.html\" rel=\"nofollow\">EWMH</a> but anything outside of ewmh spec is only possible when you have direct control over window manager behavior</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 31449379, "answer_count": 1, "score": 0, "last_activity_date": 1437036142, "creation_date": 1436977487, "last_edit_date": 1436978053, "question_id": 31435934, "link": "https://stackoverflow.com/questions/31435934/x11-intervene-while-moving-and-resizing-windows", "title": "X11 intervene while moving and resizing windows", "body": "<p>How can I intervene programmatically while moving and resizing windows? (XCB solution preferred)</p>\n\n<p>Eg. I want to implement magnetic windows a la winamp.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436976389, "post_id": 31435429, "comment_id": 50841074, "body": "Stop using random numbers for a moment and use known ones. Then debug it. Then get back to random. It looks your logic is not implementing what you are expecting. Or vice-versa."}, {"owner": {"reputation": 1274, "user_id": 1257146, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/30c95c84e3ee54ad98c2a25b674b612e?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1257146/harry"}, "edited": false, "score": 0, "creation_date": 1436976576, "post_id": 31435429, "comment_id": 50841189, "body": "What are these amazing things you want this method to do here? It&#39;s quite confusing. Also, as a side note, you don&#39;t need to be returning the matrix, as you are acting on it directly and not a copy."}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 1274, "user_id": 1257146, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/30c95c84e3ee54ad98c2a25b674b612e?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1257146/harry"}, "edited": false, "score": 0, "creation_date": 1436976788, "post_id": 31435429, "comment_id": 50841340, "body": "@Harry I just want to assing a value to a matrix cell randomly chosen when a certain condition is met."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436976859, "post_id": 31435429, "comment_id": 50841391, "body": "Your <code>j</code> might become negative. Several loops can get the same <code>i</code> and <code>j</code>, so the location will be assigned more than once. In either case you are not going to get <code>n</code> assigned cells (unless you <code>perform_check</code> is handling it <i>correctly</i>)."}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436977160, "post_id": 31435429, "comment_id": 50841553, "body": "@EugeneSh. <code>j</code> is the remainder of <code>random_number &#47; width</code> so how can it become negative?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436977627, "post_id": 31435429, "comment_id": 50841815, "body": "No, wait. Disregard the previous comment.."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436977727, "post_id": 31435429, "comment_id": 50841874, "body": "Btw. the situation that <code>matrix[i][j].id == (i*width+j)%15</code> cannot happen before you run this code segment?"}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436977980, "post_id": 31435429, "comment_id": 50842036, "body": "@Let_Me_Be Well no. The matrix I pass to this function has all cells with <code>id</code>s initialized to <code>0</code> and then I only write in <code>matrix[i][j]</code> if <code>matrix[i][j].id == 0</code>."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436978376, "post_id": 31435429, "comment_id": 50842255, "body": "So can you provide some example what results you are seeing? Because <code>matrix[i][j].id = random_number%15;</code> should definitely work just fine"}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436978821, "post_id": 31435429, "comment_id": 50842511, "body": "@Let_Me_Be I know!! This thing is driving me absolutely crazy. Added sample output."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436978887, "post_id": 31435429, "comment_id": 50842553, "body": "Print the entire matrix after each step for starters."}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436979335, "post_id": 31435429, "comment_id": 50842863, "body": "@Let_Me_Be I am noticing that for some of the elements, it assigns the value to the cell and the cell that is three spots ahead."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436979631, "post_id": 31435429, "comment_id": 50843031, "body": "Plus <code>0</code> is handled badly, as it triggers the <code>matrix[i][j].id == (i*width+j)%15</code> condition."}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436979813, "post_id": 31435429, "comment_id": 50843122, "body": "@Let_Me_Be I am sorry, I lost you on this one, what you mean with <code>it triggers the matrix[i][j].id == (i*width+j)%15</code>?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436979888, "post_id": 31435429, "comment_id": 50843175, "body": "It might have to do with what exactly is passed as the first parameter to <code>assign_values_to_random_cells</code>.  How is that variable declared?"}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436980170, "post_id": 31435429, "comment_id": 50843343, "body": "@dbush what you mean how declared? At first is <code>NULL</code>, then <code>malloc()</code> to allocate space and then an init function to set all <code>id</code>s to <code>0</code>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436980334, "post_id": 31435429, "comment_id": 50843432, "body": "Is it declared as <code>CustomDatatype **matrix;</code>?  What exactly do you pass to <code>malloc()</code>?"}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436980395, "post_id": 31435429, "comment_id": 50843467, "body": "@Let_Me_Be figured out your remark, added <code>+1</code> to <code>random_value = random_number%15;</code> but still..."}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436980598, "post_id": 31435429, "comment_id": 50843595, "body": "@dbush the first malloc I perform is <code>matrix = (CustomDatatype **) malloc (width * sizeof(CustomDatatype *));</code> and then <code>matrix[i] = (CustomDatatype *) malloc (height * sizeof(CustomDatatype));</code>"}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436980799, "post_id": 31435429, "comment_id": 50843718, "body": "@dbush that was it!! I have switched <code>width</code> with <code>height</code> in the cycle that performs <code>malloc()</code> and now seems to work!! Thank you!!"}], "answers": [{"comments": [{"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "edited": false, "score": 0, "creation_date": 1436976628, "post_id": 31435578, "comment_id": 50841233, "body": "Oops... you&#39;re right, I got confused cell_number is in fact random_number. I just want to assing a value to a matrix cell randomly chosen when a certain condition is met."}, {"owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "edited": false, "score": 0, "creation_date": 1436977423, "post_id": 31435578, "comment_id": 50841698, "body": "And (stupidly) I forgot to mention that  <code>perform_a_check() </code> makes sure that the cell is not already used."}], "tags": [], "owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "is_accepted": false, "score": 1, "last_activity_date": 1436976358, "creation_date": 1436976358, "answer_id": 31435578, "question_id": 31435429, "link": "https://stackoverflow.com/questions/31435429/cant-properly-assign-values-to-custom-datatype-matrix-cells/31435578#31435578", "title": "Can&#39;t properly assign values to custom datatype matrix cells", "body": "<p>I must admit that I do not completely understand what you are trying to achieve but:</p>\n\n<ul>\n<li>you are writing values to random positions, therefore there is no guarantee that you will write N unique values if you do this process N times</li>\n<li><code>cell_number</code> is never initialized</li>\n</ul>\n"}], "owner": {"reputation": 1481, "user_id": 351763, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/956d40763520513a8fb01b5f8cf8b13b?s=128&d=identicon&r=PG", "display_name": "haunted85", "link": "https://stackoverflow.com/users/351763/haunted85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436979197, "creation_date": 1436975983, "last_edit_date": 1436979197, "question_id": 31435429, "link": "https://stackoverflow.com/questions/31435429/cant-properly-assign-values-to-custom-datatype-matrix-cells", "title": "Can&#39;t properly assign values to custom datatype matrix cells", "body": "<p>I have defined a custom datatype:</p>\n\n<pre><code>typedef CustomDatatype {\n   int id;\n   OtherCustomDatatype *p;\n} CustomDatatype;\n</code></pre>\n\n<p>The thing is I need to work on a 2D <code>CustomDatatype**</code> matrix and I need to properly access the cell of the matrix and modify the id field.</p>\n\n<pre><code>CustomDatatype **assign_values_to_random_cells(CustomDatatype **matrix, \nconst int width, const int n, const int total)\n{\n    int counter = 0;\n    int random_number;\n    int i;\n    int j;\n    int random_value;\n\n    while (counter &lt; n)\n    {\n        random_number = (rand() % total);\n        i = random_number / width;\n        j = random_number - (width * i);\n\n        if (perform_a_check(matrix, i, j))\n        {\n            random_value = random_number%15;\n            (*matrix+(random_number))-&gt;id = random_value;\n            counter++;\n        }\n        fprintf(stderr, \"Counter: %d \", counter);\n        fprintf(stderr, \"Value: %d \", (*matrix+(random_number))-&gt;id);\n        fprintf(stderr, \"Position %d (%d, %d)\\n\", random_number, i, j);\n    }\n\n    return matrix;\n}\n</code></pre>\n\n<p>As a result this function gives back either less or more random numbers than <code>n</code>, which is what I would expect. The same algorithm for an <code>int **</code> matrix works absolutely fine, so I am wondering whether I am accessing the matrix cells the right way.</p>\n\n<p>I have tried:</p>\n\n<ul>\n<li><code>matrix[i][j].id = random_value</code>, which led to duplicate values in addition to the <code>n</code> ones I was expecting to see;</li>\n<li><code>(*matrix+(cell_number))-&gt;id = random_value</code>, which led to wrongly positioned values and definitely not <code>n</code> in number;</li>\n<li><code>(*(*matrix+(cell_number))).id = random_value</code> same as the previous item.</li>\n</ul>\n\n<p><strong>Update #2:</strong> provides extended output</p>\n\n<pre><code>Matrix init:\n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n\n\nCounter: 0\nPosition: 32 (2, 10) (Empty cell!) Value: 2\n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --   2 \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n\n\n\n\nCounter: 1\nPosition: 45 (4, 1) (Empty cell!) Value: 0\n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --   2 \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n\n\n\n\nCounter: 2\nPosition: 64 (5, 9) (Empty cell!) Value: 4\n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --   2 \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --   4  -- \n --   4  --  --  --  --  --  --  --  --  -- \n\n\n\n\nCounter: 3\nPosition: 11 (1, 0) (Empty cell!) Value: 11\n --  --  --  --  --  --  --  --  11  --  -- \n 11  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --   2 \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --   4  -- \n --   4  --  --  --  --  --  --  --  --  -- \n\n\n\n\nCounter: 4\nPosition: 43 (3, 10) (Empty cell!) Value: 13\n --  --  --  --  --  --  --  --  11  --  -- \n 11  --  --  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --  --   2 \n --  --  --  --  --  --  --  --  --  --  13 \n --  --  13  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --   4  -- \n --   4  --  --  --  --  --  --  --  --  -- \n\n\n\n\nCounter: 5\nPosition: 24 (2, 2) (Empty cell!) Value: 9\n --  --  --  --  --  --  --  --  11  --  -- \n 11  --  --  --  --  --  --  --  --  --   9 \n --  --   9  --  --  --  --  --  --  --   2 \n --  --  --  --  --  --  --  --  --  --  13 \n --  --  13  --  --  --  --  --  --  --  -- \n --  --  --  --  --  --  --  --  --   4  -- \n --   4  --  --  --  --  --  --  --  --  -- \n</code></pre>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["c++", "c", "matlab", "signal-processing"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 11, "creation_date": 1436974992, "post_id": 31434959, "comment_id": 50840075, "body": "I think the best solution is to forget about Matlab, get a good linear algebra library for C++ (like Eigen) and implement the algorithms using that library, rather than looking for C++ analogues for each Matlab functionality."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1436975383, "post_id": 31434959, "comment_id": 50840342, "body": "Agree with @5gon12eder. Presumably you are porting this to C++ for speed, otherwise you could just keep it in matlab. Your best bet is to look at what the matlab code is doing, and think of the best way to implement that in C++ with the help of a good BLAS library. You could probably optimize it to make use of multi-threading and SIMD instructions, if you knew how to implement those and wanted to take the time."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1436975505, "post_id": 31434959, "comment_id": 50840443, "body": "As a gold badge holder in MATLAB, this is one of those times where I will side with the majority and discourage you from porting over MATLAB code.  Use a good C++ linear algebra library (Eigen, Armadillo, etc.) instead.  However, you can take a look at the overall logic in the article, but use those ideas and use the functions from the library to port it yourself - don&#39;t rely on MATLAB coder."}, {"owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1436975823, "post_id": 31434959, "comment_id": 50840692, "body": "@RyanP I use C++ because my app need a C++ code, and I also don&#39;t have Matlab license, just use a trial version"}, {"owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1436976227, "post_id": 31434959, "comment_id": 50840965, "body": "@5gon12eder thank you. I&#39;ll think about it, but I&#39;m not good at signal algorithm so I try to port code first. Beside Eigen, do you have any suggestions for me? I really need an advice now"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436976265, "post_id": 31434959, "comment_id": 50840990, "body": "Do you want to convert to C or to C++? They&#39;re two different languages; I suggest you pick one."}, {"owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436976397, "post_id": 31434959, "comment_id": 50841077, "body": "@KeithThompson it isn&#39;t a problem. I know the difference between them and I think I can handle it"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1436976561, "post_id": 31434959, "comment_id": 50841185, "body": "Ok, it isn&#39;t a problem for you -- but it makes your question unclear and more difficult to answer."}, {"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 3, "creation_date": 1436976730, "post_id": 31434959, "comment_id": 50841308, "body": "I&#39;ll join the chorus of people recommending that you look for an existing C++ library to do the heavy lifting. I&#39;ve had good luck with Armadillo; its API is very reminiscent of MATLAB. The documentation includes a handy section describing MATLAB constructs and the Armadillo analogs."}, {"owner": {"reputation": 4529, "user_id": 1346994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AcJNr.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1346994/justin"}, "edited": false, "score": 1, "creation_date": 1436979240, "post_id": 31434959, "comment_id": 50842806, "body": "It depends on what you want to do. If you just want to write an isolated C++ code, I&#39;d use a good C++ matrix library like <a href=\"http://arma.sourceforge.net/\" rel=\"nofollow noreferrer\">Armadillo</a>.  Armadillo uses template meta programming to perform some lazy evaluations and is very fast. You&#39;ll get their nice interface and some pretty good speed. However, if you plan on doing image processing, I&#39;d use OpenCV&#39;s <code>mat</code> instead for better portability with their interface/functions."}, {"owner": {"reputation": 11922, "user_id": 765271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t2IUe.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/765271/nasser"}, "edited": false, "score": 0, "creation_date": 1436982727, "post_id": 31434959, "comment_id": 50844862, "body": "If you must port the code, then port it to Fortran, not c/c++ :) Fortran is much closer to Matlab, and modern Fortran has all the C++ features in it and much better for matrix/vector operations. I recommend gfortran."}, {"owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "reply_to_user": {"reputation": 4529, "user_id": 1346994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AcJNr.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1346994/justin"}, "edited": false, "score": 0, "creation_date": 1437063408, "post_id": 31434959, "comment_id": 50885817, "body": "@jucestain Thank you, Armadillo looks good for me. Seems it has all things I need. But I have to look at matlab code and port line by line, as I really don&#39;t understand the algorithm behind the matlab code above."}], "answers": [{"comments": [{"owner": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 1, "creation_date": 1436992419, "post_id": 31439926, "comment_id": 50850377, "body": "You probably have a license for the Matlab coder as well."}, {"owner": {"reputation": 356, "user_id": 1474013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSNwY.jpg?s=128&g=1", "display_name": "crbah", "link": "https://stackoverflow.com/users/1474013/crbah"}, "reply_to_user": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 0, "creation_date": 1436992639, "post_id": 31439926, "comment_id": 50850508, "body": "@Daniel yes but never used it"}, {"owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "edited": false, "score": 0, "creation_date": 1437142228, "post_id": 31439926, "comment_id": 50920720, "body": "Also, there&#39;s been no need to copy and paste the code into a MATLAB Function Block for some time now. You can just call the function on the MATLAB path like any other."}], "tags": [], "owner": {"reputation": 356, "user_id": 1474013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSNwY.jpg?s=128&g=1", "display_name": "crbah", "link": "https://stackoverflow.com/users/1474013/crbah"}, "is_accepted": false, "score": 0, "last_activity_date": 1436990463, "creation_date": 1436990463, "answer_id": 31439926, "question_id": 31434959, "link": "https://stackoverflow.com/questions/31434959/convert-matlab-function-to-c-c/31439926#31439926", "title": "Convert matlab function to C/C++", "body": "<p>I've no experience on matlab coder but we solve this type of problems by using simulink code generator. It may seem weird but works fine. We create a simulink project and add a matlab function block, copy-paste the function there and start code generation.</p>\n\n<p>And of course matlab don't want to show us the key points of their algorithms thats why there are libraries in this method as well.</p>\n"}], "owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 913, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1436990463, "creation_date": 1436974776, "question_id": 31434959, "link": "https://stackoverflow.com/questions/31434959/convert-matlab-function-to-c-c", "title": "Convert matlab function to C/C++", "body": "<p>My goal is getting the spectrogram result like <a href=\"https://ccrma.stanford.edu/~juhan/super_spec.html\" rel=\"nofollow\">this article</a> in C++. They have example <code>matlab</code> source code and I want to port them into <code>C/C++</code>. Here are 3 <code>matlab</code> functions:</p>\n\n<ul>\n<li><a href=\"http://pastebin.com/7XN7Firx\" rel=\"nofollow\">Blurring function</a></li>\n<li><a href=\"http://pastebin.com/Vtc7P09t\" rel=\"nofollow\">PLCA</a></li>\n<li><a href=\"http://pastebin.com/NBA6wJN3\" rel=\"nofollow\">STFT</a></li>\n</ul>\n\n<p>I tried to use <code>Matlab Coder</code> to generate C code and get result like this:<a href=\"http://pastebin.com/FJv4rTrk\" rel=\"nofollow\">PLCA C</a></p>\n\n<p>There were many problems with this converted code: it depends on many lib and functions, there was some methods can't be ported, and I can't build it.<br><br>\nSo I decide to port code by hand, and then I faced with other problems:</p>\n\n<ul>\n<li>The data type in <code>matlab</code> is very flexible, for example, the array in matlab can add more columns at anytime, it can contain other array or vector, so it make confuse how to convert it into <code>C++</code></li>\n<li>There were some supported methods/operations in <code>matlab</code> and I don't know how to port it into <code>C++</code>. For example, <code>circshift</code>, <code>zeros</code>, divide two matrixes ... \n<br></li>\n</ul>\n\n<p>Is there any suggestion?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 1, "creation_date": 1436974187, "post_id": 31434628, "comment_id": 50839469, "body": "hint: try converting from <code>x,y,l,w</code> to <code>xMin,yMin,xMax,yMax</code> and see how this helps your understanding (a drawing may help you more than the solution code)"}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1436974286, "post_id": 31434628, "comment_id": 50839542, "body": "What I&#39;ve never understood in these questions is why the order is <code>x, y, l, w</code> instead of <code>x, y, w, h</code>... wouldn&#39;t it make more sense to have <code>x-reference, y-reference, x-size, y-size</code> than <code>x-reference, y-reference, y-size, x-size</code>? Why are the width and height always swapped?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1436974327, "post_id": 31434628, "comment_id": 50839572, "body": "Try drawing a picture with two rectangles."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1436976279, "post_id": 31434628, "comment_id": 50840998, "body": "This problem is really more interesting if one answers &quot;find the smallest rectangle&quot; rather than the &quot;find the smallest rectangle that fits as a &quot;x, y, l and w&quot;.  Consider 2 small rectangles spaced far apart diagonally from each other.The &quot;smallest enclosing rectangle&quot; would be aligned at that diagonal."}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436976634, "post_id": 31434628, "comment_id": 50841238, "body": "This question should probably be clarified as to whether the input rectangles and the expected output rectangle are intended to be axis-aligned (as it seems to be, but is not clearly stated). Otherwise, there are an infinite number of rectangles with a given lower left corner and dimensions, and, as pointed out by @chux, the best solution is likely not axis-aligned..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1436976766, "post_id": 31434628, "comment_id": 50841326, "body": "@twalberg Unfortunately, the post does say &quot;Output consists of 4 integers that correspond to x, y, l and w of the Union rectangle.&quot;, so the goal is certainly not the smallest, but axis-aligned.  Yet thanks for also thinking outside the box - angled or not."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1436976782, "post_id": 31434628, "comment_id": 50841338, "body": "@Jashaszun Actually it looks like the specs here <i>are</i>  x,y,w,h, but the nomenclature used is strange. In the instructions it looks like &quot;l&quot; is the length of the rectangle along the x axis, and &quot;w&quot; is the width (height) along the y axis. You can figure this out by examining the given inputs and expected output."}, {"owner": {"reputation": 7, "user_id": 5116010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294a808399f005a97dad8b7f315f1352?s=128&d=identicon&r=PG&f=1", "display_name": "620d", "link": "https://stackoverflow.com/users/5116010/620d"}, "edited": false, "score": 0, "creation_date": 1436978765, "post_id": 31434628, "comment_id": 50842478, "body": "@ BeyelerStudios what do you mean by xMin,yMin,xMax,yMax??"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1436979917, "post_id": 31434628, "comment_id": 50843193, "body": "This is a really easy problem. Use a pencil. Use your mind."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436982348, "post_id": 31434628, "comment_id": 50844649, "body": "Is there a problem with your spacebar when writing code?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436982861, "post_id": 31434628, "comment_id": 50844944, "body": "Note: 1) Remove <code>&#39;\\n&#39;</code> from <code>scanf(\u201c%d %d %d %d\\n\u201d,&amp;x1,&amp;y1,&amp;l1,&amp;w1);</code> 2) Do not use smart quotes <code>\u201c\u201d</code>, use <code>&quot;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436982926, "post_id": 31434628, "comment_id": 50844983, "body": "&quot;its showing wrong answer.&quot;  --&gt; What are the inputs and what is the wrong answer than it is showing?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1436982975, "post_id": 31434628, "comment_id": 50845010, "body": "<code>int e = y1 + w1;</code> --&gt; <code>int e = y2 + w2;</code>.  <code>int c = x2 + l1;</code> --&gt; <code>int c = x2 + l2;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1436983056, "last_edit_date": 1436983056, "creation_date": 1436974241, "answer_id": 31434747, "question_id": 31434628, "link": "https://stackoverflow.com/questions/31434628/union-of-two-rectangles-write-a-program-to-find-the-smallest-possible-rectangle/31434747#31434747", "title": "union of two rectangles.write a program to find the smallest possible rectangle enclosing the 2 given rectangles", "body": "<p>Given the location of the lower left corner, the length, and the width, you can determine the other three points.  Do this for both rectangles.  For example, given <code>x1</code>, <code>y1</code>, <code>l1</code>, <code>w1</code>, <code>p1 = (x1,y1)</code>, <code>p2 = (x1,y1+l1)</code>, <code>p3 = (x1+w1,y1)</code>, <code>p4 = (x1+w1,y1+l1)</code>.</p>\n\n<p>Now look at the eight points you have and find the smallest X (minX) and smallest Y (minY) among them, along with the largest X (maxX) and largest Y (maxY).  Note that none of these values necessarily come from the same point.</p>\n\n<p>Your results are now <code>minX</code>, <code>minY</code>, <code>maxY - minY</code>, and <code>maxX - minX</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436978773, "post_id": 31436250, "comment_id": 50842485, "body": "OP says &quot;I am not asking for the whole program&quot;.  Suggest removing code."}], "tags": [], "owner": {"reputation": 4584, "user_id": 4796021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/quRfq.jpg?s=128&g=1", "display_name": "David P&#233;rez Cabrera", "link": "https://stackoverflow.com/users/4796021/david-p%c3%a9rez-cabrera"}, "is_accepted": false, "score": 1, "last_activity_date": 1437109743, "last_edit_date": 1437109743, "creation_date": 1436978570, "answer_id": 31436250, "question_id": 31434628, "link": "https://stackoverflow.com/questions/31434628/union-of-two-rectangles-write-a-program-to-find-the-smallest-possible-rectangle/31436250#31436250", "title": "union of two rectangles.write a program to find the smallest possible rectangle enclosing the 2 given rectangles", "body": "<p>Steps:</p>\n\n<ol>\n<li>calculate upper-right corner of two rectangles</li>\n<li>You must to Sort the x's coordinates, and the y's coordinates.</li>\n<li><p>The smallest rectangle enclosing the 2 given rectangles has:</p>\n\n<ul>\n<li>lower-left corner: <code>(x1,y1)</code></li>\n<li>upper-right corner: <code>(x4,y4)</code></li>\n</ul></li>\n<li><p>calculate size.</p></li>\n</ol>\n\n<p>See image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Cw5HV.png\" alt=\"enter image description here\"></p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 5116010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294a808399f005a97dad8b7f315f1352?s=128&d=identicon&r=PG&f=1", "display_name": "620d", "link": "https://stackoverflow.com/users/5116010/620d"}, "edited": false, "score": 0, "creation_date": 1436982156, "post_id": 31436596, "comment_id": 50844522, "body": "i have  used the same logic in my program...please go through my program...I have added the program now.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 7, "user_id": 5116010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294a808399f005a97dad8b7f315f1352?s=128&d=identicon&r=PG&f=1", "display_name": "620d", "link": "https://stackoverflow.com/users/5116010/620d"}, "edited": false, "score": 0, "creation_date": 1436983034, "post_id": 31436596, "comment_id": 50845049, "body": "@620d Comments added above - suggest closer attention to detail."}, {"owner": {"reputation": 7, "user_id": 5116010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294a808399f005a97dad8b7f315f1352?s=128&d=identicon&r=PG&f=1", "display_name": "620d", "link": "https://stackoverflow.com/users/5116010/620d"}, "edited": false, "score": 0, "creation_date": 1437057928, "post_id": 31436596, "comment_id": 50881930, "body": "thanks a lot buddy...i figured out the mistakes and the program is accepted now.. :)"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1436980124, "last_edit_date": 1436980124, "creation_date": 1436979603, "answer_id": 31436596, "question_id": 31434628, "link": "https://stackoverflow.com/questions/31434628/union-of-two-rectangles-write-a-program-to-find-the-smallest-possible-rectangle/31436596#31436596", "title": "union of two rectangles.write a program to find the smallest possible rectangle enclosing the 2 given rectangles", "body": "<p>Assuming positive lengths and widths:</p>\n\n<ol>\n<li><p>Find lowest <code>xmin</code>: minimum of <code>x1</code> and <code>x2</code>.  Same for <code>ymin</code>.  Now the output rectangle corner is known.</p></li>\n<li><p>Find highest <code>xmax</code>: maximum of <code>x1 + l1</code> and <code>x2 + l1</code>.  Same for <code>ymax</code> using <code>y</code> values and widths. </p></li>\n<li><p>Determine output rectangle dimensions: <code>length</code>: difference of <code>xmax</code> and <code>xmin</code>.  Same for <code>width</code> and <code>ymax, ymin</code>.</p></li>\n</ol>\n\n<p>It is that simple.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8080507, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-22iBVo3598Y/AAAAAAAAAAI/AAAAAAAAABE/dOv0U6PHiyA/photo.jpg?sz=128", "display_name": "s.surya kala", "link": "https://stackoverflow.com/users/8080507/s-surya-kala"}, "is_accepted": false, "score": 2, "last_activity_date": 1496048565, "creation_date": 1496048565, "answer_id": 44238530, "question_id": 31434628, "link": "https://stackoverflow.com/questions/31434628/union-of-two-rectangles-write-a-program-to-find-the-smallest-possible-rectangle/44238530#44238530", "title": "union of two rectangles.write a program to find the smallest possible rectangle enclosing the 2 given rectangles", "body": "<p>1)Find Xmin = minimum of X1 and X2.</p>\n\n<p>2)Find Ymin = minimum of Y1 and Y2.</p>\n\n<p>3)Find Xmax = maximum of (X1+L1) and (X2+L2)</p>\n\n<p>4)Find Ymax = maximum of (Y1+W1) and (Y2+w2)</p>\n\n<p>5)Find Length = Difference between Xmax and Xmin</p>\n\n<p>6)Find Width = Difference between Ymax and Ymin</p>\n\n<p>7)Final Result is (Xmin,Ymin,Length,Width)</p>\n"}], "owner": {"reputation": 7, "user_id": 5116010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294a808399f005a97dad8b7f315f1352?s=128&d=identicon&r=PG&f=1", "display_name": "620d", "link": "https://stackoverflow.com/users/5116010/620d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8893, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1496048565, "creation_date": 1436973982, "last_edit_date": 1437058081, "question_id": 31434628, "link": "https://stackoverflow.com/questions/31434628/union-of-two-rectangles-write-a-program-to-find-the-smallest-possible-rectangle", "title": "union of two rectangles.write a program to find the smallest possible rectangle enclosing the 2 given rectangles", "body": "<p>Given the coordinates of the lower left corner (x,y), the length (l) and width(w) of 2 rectangles, write a program to find the smallest possible rectangle enclosing the 2 given rectangles.</p>\n\n<p>Input and Output Format:</p>\n\n<p>The 1st line of the input consists of 4 integers separated by a space that correspond to x, y, l and w of the first rectangle.</p>\n\n<p>The 2nd line of the input consists of 4 integers separated by a space that correspond to x, y, l and w of the second rectangle.</p>\n\n<p>Output consists of 4 integers that correspond to x, y, l and w of the Union rectangle.</p>\n\n<p>Sample Input :</p>\n\n<p>3 8 1515</p>\n\n<p>2 6 10 10</p>\n\n<p>Sample Output:</p>\n\n<p>2 6 16 17</p>\n\n<p>I am not able to figure out the logic....I am not asking for the whole program,just want help on the logic part...</p>\n\n<p>UPDATE:\nhere is my program which is now working...thank u all for your help :)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main() {\n  int x1, x2, y1, y2, l1, l2, w1, w2, xmax, xmin, ymax, ymin;\n  scanf(\u201c%d %d %d %d\\n\u201d,&amp;x1,&amp;y1,&amp;l1,&amp;w1);\n  scanf(\u201c%d %d %d %d\\n\u201d,&amp;x2,&amp;y2,&amp;l2,&amp;w2);\n  xmin = x1 &lt; x2 ? x1 : x2;\n  ymin = y1 &lt; y2 ? y1 : y2;\n  int b = x1 + l1;\n  int c = x2 + l2;\n  xmax = b &gt; c ? b : c;\n  int d = y1 + w1;\n  int e = y2 + w2;\n  ymax = d &gt; e ? d : e;\n  int l = xmax - xmin;\n  int w = ymax - ymin;\n  printf(\u201c%d %d %d %d\u201d,xmin,ymin,l,w);\n  return 0;\n}\n</code></pre>\n\n<p>can't figure out the problem in my program.. :(</p>\n"}, {"tags": ["c", "string", "c-preprocessor", "scanf", "format-string"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1436974052, "post_id": 31434597, "comment_id": 50839350, "body": "The pre-processor does not look inside string or character literals."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1436974759, "last_edit_date": 1436974759, "creation_date": 1436973974, "answer_id": 31434622, "question_id": 31434597, "link": "https://stackoverflow.com/questions/31434597/preprocessor-and-subsitution-of-format-string/31434622#31434622", "title": "Preprocessor and subsitution of format string", "body": "<p>In your code, the problem is in </p>\n\n<pre><code>  scanf(\"%SIZEs\", s);\n</code></pre>\n\n<p>Anything residing between the quotes <code>\" \"</code> of a format string (<em>string literal</em>, in general) will not get substituted through MACRO substitution. </p>\n\n<p>So, your <code>scanf()</code> remains the same as you're written, after preprocessing, and <code>%S</code> (or, <code>%SIZEs</code>, in whole) being one invalid format specifier, you get into  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a> and hence got the error.</p>\n\n<p>You can try the workaround as</p>\n\n<pre><code> scanf(\"%\"SIZE\"s\", s);\n</code></pre>\n\n<p>This way, <code>SIZE</code> will be outside the quotes and will be considered for substitution in preprocessing stage.</p>\n"}, {"tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": false, "score": 1, "last_activity_date": 1436974135, "creation_date": 1436974135, "answer_id": 31434712, "question_id": 31434597, "link": "https://stackoverflow.com/questions/31434597/preprocessor-and-subsitution-of-format-string/31434712#31434712", "title": "Preprocessor and subsitution of format string", "body": "<p>If you are using SIZE only for formatting, you can also use:</p>\n\n<pre><code>#define SIZE \"10\"\nscanf(\"%\"SIZE\"s\", s);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 3, "last_activity_date": 1436974446, "creation_date": 1436974446, "answer_id": 31434817, "question_id": 31434597, "link": "https://stackoverflow.com/questions/31434597/preprocessor-and-subsitution-of-format-string/31434817#31434817", "title": "Preprocessor and subsitution of format string", "body": "<p>It is not possible to replace the contents of the string literal by macro.<br>\nFor example, it does the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define S_(x) #x\n#define S(x) S_(x)\n\n#define SIZE 10\n\nint main(void){\n    char s[SIZE + 1];\n    scanf(\"%\" S(SIZE) \"s\", s);\n    puts(s);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1464300173, "creation_date": 1436973902, "last_edit_date": 1464300173, "question_id": 31434597, "link": "https://stackoverflow.com/questions/31434597/preprocessor-and-subsitution-of-format-string", "title": "Preprocessor and subsitution of format string", "body": "<p>If I put:</p>\n\n<pre><code>#define SIZE 10\n</code></pre>\n\n<p>and after:</p>\n\n<pre><code>scanf(\"%SIZEs\", s);\n</code></pre>\n\n<p>I have a runtime error. The preprocessor should substitute <code>SIZE</code> with <code>10</code> before to compile, so this should equal (in my opinion) to write</p>\n\n<pre><code>scanf(\"%10s\", s);\n</code></pre>\n\n<p>so, where is the mistake?</p>\n"}, {"tags": ["c", "performance", "assembly", "operators", "opcode"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1436974025, "post_id": 31434458, "comment_id": 50839333, "body": "You might ask the compiler to give you the assembler code and examine that."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 6, "creation_date": 1436974146, "post_id": 31434458, "comment_id": 50839438, "body": "Both codes compile to the same assembly (both with <code>jle</code>), even with -O0 (gcc 4.9.2). The difference is probably uncontrolled artifact."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1436974468, "post_id": 31434458, "comment_id": 50839676, "body": "Using <code>-O3</code> the compiler should have optimized away the loops, not using optimization is meaningless."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 1, "creation_date": 1436974480, "post_id": 31434458, "comment_id": 50839688, "body": "And as a general matter, a difference &lt;3% is already doubtful, and here you are talking about a difference &lt;0.3%."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1436974865, "post_id": 31434458, "comment_id": 50839975, "body": "See: <a href=\"http://stackoverflow.com/q/26771692/1708801\">Loop with a zero execution time</a>"}, {"owner": {"reputation": 379, "user_id": 3181146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jy2FP.png?s=128&g=1", "display_name": "CircleSquared", "link": "https://stackoverflow.com/users/3181146/circlesquared"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1436976029, "post_id": 31434458, "comment_id": 50840822, "body": "@ElderBug 1) As I said, the difference was roughly the same no matter how many times I ran the tests. 2) Small differences are valid for large enough sample sizes. 3) If you still think that difference is still too small, at 2 billion loops, lt.c takes 4.790s real / 4.772s user, and le.c takes 4.746s real / 4.728s. The trend only grows as I increase the number of loops."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1436976510, "post_id": 31434458, "comment_id": 50841153, "body": "These should produce code with identical runtimes (assuming the compiler isn&#39;t just optimizing the loops away entirely). What <i>might</i> make them faster  is to reverse the loop count: make it count down to zero. Comparisons with zero are faster on many processors than comparison with a constant."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 1, "creation_date": 1436976675, "post_id": 31434458, "comment_id": 50841269, "body": "You should definitely post assembly code. You can of course compare them yourself, too. For me, similarly as for @ElderBug, the generated code is <b>identical</b> in both cases, so it must run in the same time. See also at <a href=\"http://goo.gl/vqgZKH\" rel=\"nofollow noreferrer\">gcc explorer</a> - both functions have exactly the same assembly code (except for label names)."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436977056, "post_id": 31434458, "comment_id": 50841496, "body": "Well, I guess that &#39;JGE label&#39; needs to test two flags, JG only one?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 2, "creation_date": 1436977061, "post_id": 31434458, "comment_id": 50841499, "body": "I get identical assembly as well.  Don&#39;t assume that <code>&lt;</code> and <code>&lt;=</code> compile to <code>jge</code> and <code>jg</code> - they don&#39;t on my system (both versions used <code>jbe</code>).  Do note that <code>jg</code> tests the overflow, sign, and zero flags (<code>OF=SF</code> and <code>ZF=0</code>), while <code>jge</code> only tests the overflow and sign flags (<code>OF=SF</code>).  That <i>may</i> be a potential source of difference in runtime over many, many repetitions."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1436979557, "post_id": 31434458, "comment_id": 50842988, "body": "those are dead loops, you cant measure the difference that way and if you can then counting to 10 is as good as counting to a billion.  as you have figured out the instruction set covers the difference.  The measurable difference between those instructions is far less than one clock cycle and basically not measurable at all.  If you see a difference it is due to measurement inaccuracies or something other than the code differences."}], "answers": [{"tags": [], "owner": {"reputation": 543, "user_id": 3027604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wUHYR.jpg?s=128&g=1", "display_name": "Hitokage", "link": "https://stackoverflow.com/users/3027604/hitokage"}, "is_accepted": false, "score": 0, "last_activity_date": 1436982642, "creation_date": 1436982642, "answer_id": 31437570, "question_id": 31434458, "link": "https://stackoverflow.com/questions/31434458/why-would-be-slower-than-c/31437570#31437570", "title": "Why would &lt; be slower than &lt;=? [C]", "body": "<p>Let's speak in assembly. (depends on the architecture of course)\nWhen comparing you'll use cmp or test instruction and then\n- when you use &lt; the equal instruction would be jl which checks if SF and OF are not the same (some special flags called sign and overflow)\n- when you use &lt;= the equal instruction is jle  which checks not only SF != OF but also ZF == 1 (zero flag) \nand so one, more <a href=\"https://en.wikibooks.org/wiki/X86_Assembly/Control_Flow\" rel=\"nofollow\">here</a>\nbut honestly it's not even the whole cycle so...I think the difference is unmeasurable under normal circumstances</p>\n"}, {"comments": [{"owner": {"reputation": 1482, "user_id": 297216, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1d89c8b79c5991c01b0f81c731970f5?s=128&d=identicon&r=PG", "display_name": "Cobusve", "link": "https://stackoverflow.com/users/297216/cobusve"}, "edited": false, "score": 3, "creation_date": 1437036701, "post_id": 31438519, "comment_id": 50866960, "body": "Now you know more about the CPU instruction cache mechanism and what it does :)"}], "tags": [], "owner": {"reputation": 379, "user_id": 3181146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jy2FP.png?s=128&g=1", "display_name": "CircleSquared", "link": "https://stackoverflow.com/users/3181146/circlesquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1436985737, "creation_date": 1436985737, "answer_id": 31438519, "question_id": 31434458, "link": "https://stackoverflow.com/questions/31434458/why-would-be-slower-than-c/31438519#31438519", "title": "Why would &lt; be slower than &lt;=? [C]", "body": "<p>There were a few requests in the comments to my question to include the assembly being generated for me by GCC. After getting to compiler to pop out the assembly versions of each file, I checked it.</p>\n\n<p><strong>Result:</strong><br>\nIt turns out the default optimization setting turned both for-loops into the same assembly. Both files were identical in assembly-form, actually. (<code>diff</code> confirmed this.)</p>\n\n<p><strong>Possible reason for the previously observed time difference:</strong><br>\nIt seems the order in which I ran the binaries was the cause for the run time difference.</p>\n\n<ul>\n<li>On a given runthrough, the programs generally were executed quicker with each successive execution, before plateauing after about 3 executions.</li>\n<li>I alternated back and forth between <code>time ./lt</code> and <code>time ./le</code>, so the one run first would have a bias towards extra time in its average.</li>\n<li>I usually ran lt first.</li>\n<li>I did several separate runthroughs (increasing the averaged bias).</li>\n</ul>\n\n<p><strong>Code excerpt:</strong></p>\n\n<pre><code>        movl    $0, -4(%rbp)\n        jmp     .L2\n.L3:\n        addl    $1, -4($rbp)\n.L2\n        cmpl    $1000000000, -4(%rbp)\n        jle     .L3\n        mol     $0, %eax\n        pop     %rbp\n</code></pre>\n\n<p>... * covers face * ...carry on.... </p>\n"}], "owner": {"reputation": 379, "user_id": 3181146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jy2FP.png?s=128&g=1", "display_name": "CircleSquared", "link": "https://stackoverflow.com/users/3181146/circlesquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 31438519, "answer_count": 2, "score": 0, "last_activity_date": 1436985737, "creation_date": 1436973566, "last_edit_date": 1495540679, "question_id": 31434458, "link": "https://stackoverflow.com/questions/31434458/why-would-be-slower-than-c", "title": "Why would &lt; be slower than &lt;=? [C]", "body": "<p>Naturally, I've assumed the &lt; and &lt;= operators run at the same speed (<a href=\"https://stackoverflow.com/questions/12135518/is-faster-than\">per Jonathon Reinhart's logic, here</a>). Recently, I decided to test that assumption, and I was a little surprised by my results.</p>\n\n<p>I know, for most modern hardware, this question is purely academic, so had to write test programs that looped about 1 billion times (to get any minuscule difference to add up to more acceptable levels). The programs were as basic as possible (to cut out all possible sources of interference).</p>\n\n<p><strong>lt.c:</strong></p>\n\n<pre><code>int main() {\n    for (int i = 0; i &lt; 1000000001; i++);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>le.c:</strong></p>\n\n<pre><code>int main() {\n    for (int i = 0; i &lt;= 1000000000; i++);\n\n    return 0;\n}\n</code></pre>\n\n<p>They were compiled and run on a <em>Linux VirtualBox 3.19.0-18-generic #18-Ubuntu x86_64</em> installation, using GCC with the <em>-std=c11</em> flag set.</p>\n\n<p>The average time for lt.c's binary was:</p>\n\n<pre><code>real    0m2.404s\nuser    0m2.389s\nsys 0m0.000s\n</code></pre>\n\n<p>The average time for le.c was:</p>\n\n<pre><code>real    0m2.397s\nuser    0m2.384s\nsys 0m0.000s\n</code></pre>\n\n<p>The difference is small, but I couldn't get it to go away or reverse no matter how many times I ran the binaries.</p>\n\n<ul>\n<li>I made the comparison value in the for-loop of lt.c one larger than le.c (so they'd both loop the same number of times). Was this somehow a mistake?</li>\n<li>According the answer in <a href=\"https://stackoverflow.com/questions/12135518/is-faster-than\">Is &lt; faster than &lt;=?</a>, <code>&lt;</code> compiles to <code>jge</code> and <code>&lt;=</code> compiles to <code>jg</code>. That was dealing with if statements rather than a for-loop, but could this still be the reason? Could the execution of <code>jge</code> take slightly longer than <code>jg</code>? <em>(I think this would be ironic since that would mean moving from C to ASM inverts which one is the more complicated instruction, with lt in C translating to gte in ASM and lte to gt.)</em></li>\n<li>Or, is this just so hardware specific that different x86 lines or individual chips may consistently show the reverse trend, the same trend, or no difference?</li>\n</ul>\n"}, {"tags": ["c", "stdio"], "comments": [{"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 3, "creation_date": 1436972627, "post_id": 31433959, "comment_id": 50838365, "body": "That might have been a design decision. You could may try to ask this in Programmer network also; you might have more luck there."}, {"owner": {"reputation": 650, "user_id": 5061723, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/812dfad842a1c235d23f5ab4d7f6ff9d?s=128&d=identicon&r=PG&f=1", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/5061723/isaiah"}, "edited": false, "score": 0, "creation_date": 1436972671, "post_id": 31433959, "comment_id": 50838392, "body": "Holdover from early C which I think lacked enums."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1436976076, "post_id": 31433959, "comment_id": 50840852, "body": "A very similar question: <a href=\"https://stackoverflow.com/questions/18999459/c-fopen-mode-parameter\" title=\"c fopen mode parameter\">stackoverflow.com/questions/18999459/c-fopen-mode-parameter</a>"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1436982051, "post_id": 31433959, "comment_id": 50844459, "body": "Another one (answers are mainly speculations): <a href=\"https://stackoverflow.com/questions/2519263/why-does-cs-fopen-take-a-const-char-as-its-second-argument\" title=\"why does cs fopen take a const char as its second argument\">stackoverflow.com/questions/2519263/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1436972869, "post_id": 31434102, "comment_id": 50838532, "body": "I think that this is the correct answer.  Because before there were <code>enum</code>s, people usually used <code>int</code>s and <code>#define</code>d macro constants for the same purpose rather than using character strings."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1436974473, "post_id": 31434102, "comment_id": 50839683, "body": "Sure, but an implementation could add more elements to an <code>enum</code> type."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436975854, "post_id": 31434102, "comment_id": 50840712, "body": "@KeithThompson: That wouldn&#39;t work (without introducing weird varargs) for variable stream attributes:  <code>&quot;wb,reclen=80&quot;</code> (an example from the C rationale)."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1436981259, "post_id": 31434102, "comment_id": 50843978, "body": "@cremno: True, but the original author(s) of <code>fopen</code> might not have been concerned with that. In any case, <a href=\"http://stackoverflow.com/a/31434115/827263\">dasblinkenlight&#39;s answer</a> is correct; <code>fopen</code> predates <code>enum</code>."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436982868, "post_id": 31434102, "comment_id": 50844948, "body": "@KeithThompson: I agree that it answers <i>this</i> question. However I&#39;ve found <a href=\"https://stackoverflow.com/questions/2519263/why-does-cs-fopen-take-a-const-char-as-its-second-argument\">yet another question</a>. It&#39;s more broad. A definitive answer is missing though."}], "tags": [], "owner": {"reputation": 16519, "user_id": 19100, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d85c685bac51d4cc044f3bc15f09316f?s=128&d=identicon&r=PG", "display_name": "dalle", "link": "https://stackoverflow.com/users/19100/dalle"}, "is_accepted": false, "score": 4, "last_activity_date": 1436972676, "creation_date": 1436972676, "answer_id": 31434102, "question_id": 31433959, "link": "https://stackoverflow.com/questions/31433959/why-fopen-function-does-not-use-enumerations/31434102#31434102", "title": "Why &quot;fopen&quot; function does not use enumerations?", "body": "<p>This is to provide freedom for implementations. For instance the implementation in <a href=\"https://msdn.microsoft.com/en-us/library/yeby3zcb.aspx\" rel=\"nofollow\">VC++</a> has the possibility to select encoding and such: <code>fopen(\"test.xml\", \"wt+,ccs=UNICODE\")</code></p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436972857, "post_id": 31434115, "comment_id": 50838525, "body": "Hmm, I thought K&amp;R1 had enums. (My copy is at the office, and I&#39;ll check it later today; I&#39;m adding this comment mostly as a reminder to myself.)"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436973074, "post_id": 31434115, "comment_id": 50838688, "body": "@KeithThompson Are you one of the lucky owners of the first edition of K&amp;R? I&#39;ve got only the second edition (I learned the language from a home-made Russian translation of the first edition, though). Wikipedia says that &quot;In the years following the publication of K&amp;R C, several features were added to the language, supported by compilers from AT&amp;T (in particular PCC[19]) and some other vendors. These included: ... enumerated types&quot; (<a href=\"https://en.wikipedia.org/wiki/C_(programming_language)#K.26R_C\" rel=\"nofollow noreferrer\">link</a>)."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436974431, "post_id": 31434115, "comment_id": 50839649, "body": "Yes, I first learned C from K&amp;R1. I&#39;ll also check whether it mentions <code>fopen</code> (I know it has <code>&lt;stdio.h&gt;</code>). If it has <code>fopen</code> and not <code>enum</code>, you&#39;ll be able to remove the &quot;most likely&quot; from your answer."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1436981178, "post_id": 31434115, "comment_id": 50843925, "body": "K&amp;R1 does <i>not</i> have <code>enum</code>. It does mention <code>fopen()</code>, and shows a sample implementation. (The implementation only checks the value of <code>*mode</code>, and permits <code>&#39;r&#39;</code>, <code>&#39;w&#39;</code>, or <code>&#39;a&#39;</code>, so there&#39;s no allowance for binary mode or for more than one character.)"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1436972878, "last_edit_date": 1436972878, "creation_date": 1436972699, "answer_id": 31434115, "question_id": 31433959, "link": "https://stackoverflow.com/questions/31433959/why-fopen-function-does-not-use-enumerations/31434115#31434115", "title": "Why &quot;fopen&quot; function does not use enumerations?", "body": "<p>The reason is most likely historical: function <code>fopen</code> has been around in the early K&amp;R version of the language, while <code>enum</code> has been added to the language only for the ANSI standard.</p>\n\n<p>By the time <code>enum</code>s were added the language has been in such widespread use that changing the signature of such important function was impractical.</p>\n"}], "owner": {"reputation": 615, "user_id": 5051002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/X3MMg.jpg?s=128&g=1", "display_name": "Jean Pierre Dudey", "link": "https://stackoverflow.com/users/5051002/jean-pierre-dudey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 31434115, "answer_count": 2, "score": 2, "last_activity_date": 1436972878, "creation_date": 1436972313, "question_id": 31433959, "link": "https://stackoverflow.com/questions/31433959/why-fopen-function-does-not-use-enumerations", "title": "Why &quot;fopen&quot; function does not use enumerations?", "body": "<p>What is the reason to use a <code>const char*</code> for selecting the open mode instead of an <code>enum</code> like this:</p>\n\n<pre><code>enum open_mode {\n        READ,\n        READ_BINARY,\n        WRITE,\n        ...\n};\n</code></pre>\n\n<p>It wouldn't be more simply to use an enum?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 2427, "user_id": 571113, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d672db219273ba970e5c392754cb0d3?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/571113/bobby"}, "edited": false, "score": 0, "creation_date": 1436972368, "post_id": 31433884, "comment_id": 50838180, "body": "What does the reading side of the code look like?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1436972398, "post_id": 31433884, "comment_id": 50838206, "body": "It depends an exactly how the Java process is expecting the the number.  Is it looking for a serialized int or the textual representation of the int?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1436972428, "post_id": 31433884, "comment_id": 50838226, "body": "This code is fine (for sending binary data -- why then a newline?), but you must be aware that the data will arrive in the parent on the read end of the pipe connecting the parent and child, not on the parent <code>stdin</code>.  You may also have buffering issues... <code>write</code> has less buffering than <code>stdio.h</code> functions such as <code>fwrite</code>, but it may be worth adding a flush."}, {"owner": {"reputation": 59, "user_id": 1710614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb35e8920e86e6bf7f6beafcedb31d42?s=128&d=identicon&r=PG", "display_name": "Nole Fan 81", "link": "https://stackoverflow.com/users/1710614/nole-fan-81"}, "edited": false, "score": 0, "creation_date": 1436972736, "post_id": 31433884, "comment_id": 50838443, "body": "I need to (at least I have figured out how I do not need to) pass in a newline to simulate pressing &#39;Enter&#39; Not sure why that didn&#39;t show up in the post :/"}, {"owner": {"reputation": 59, "user_id": 1710614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb35e8920e86e6bf7f6beafcedb31d42?s=128&d=identicon&r=PG", "display_name": "Nole Fan 81", "link": "https://stackoverflow.com/users/1710614/nole-fan-81"}, "edited": false, "score": 0, "creation_date": 1436976366, "post_id": 31433884, "comment_id": 50841057, "body": "Code to parse the input. I assume sending the newline (\\n) is the problem. How can I write &#39;1&#39; and &quot;press enter&quot;? <code>String[] enteredChoice = enteredChoiceStr.split(&quot;,&quot;);                     for ( String indexStr : enteredChoice ) {                         int index = Integer.parseInt(indexStr);                         if ( index == 0 || index &gt; totalNum ) {                             isError = true;                             ErrorMsg=&quot;Invalid number entered: &quot;+indexStr+&quot;.  Verify the number.&quot;;                             cu.wprintln(&quot;&quot;);                             cu.wprintln(ErrorMsg);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436977753, "post_id": 31433884, "comment_id": 50841889, "body": "Minor: Not sure why code is <code>char choice[2] = {0x31, 0x0D}; &#47;&#47; 1 and CR</code> rather than <code>char choice[2] = {&#39;1&#39;, &#39;\\r&#39;};</code>.  What advantage to the original style?"}, {"owner": {"reputation": 5242, "user_id": 556528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c842a2d7efe5d3d3c3746a32d6a991e8?s=128&d=identicon&r=PG", "display_name": "Null Set", "link": "https://stackoverflow.com/users/556528/null-set"}, "edited": false, "score": 0, "creation_date": 1436977759, "post_id": 31433884, "comment_id": 50841894, "body": "How is the java code reading in enteredChoiceStr from the pipe?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1436977830, "post_id": 31433884, "comment_id": 50841946, "body": "@Ben Voigt &quot;This code is fine&quot;   Hmmm, should not <code>char choice = &quot;\\001&quot;;</code> be <code>char choice = &#39;\\001&#39;;</code>?"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 1, "creation_date": 1436978278, "post_id": 31433884, "comment_id": 50842194, "body": "So you are parsing text data, so you cannot send binary data, as you do in several of the code snippets."}, {"owner": {"reputation": 59, "user_id": 1710614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb35e8920e86e6bf7f6beafcedb31d42?s=128&d=identicon&r=PG", "display_name": "Nole Fan 81", "link": "https://stackoverflow.com/users/1710614/nole-fan-81"}, "edited": false, "score": 0, "creation_date": 1436980602, "post_id": 31433884, "comment_id": 50843599, "body": "So the disadvantage here is that the posted attempts did not include previous commands. There was a previous <code>write(PARENT_WRITE_FD, &quot;\\n&quot;, 2);</code> The length was 1 too long so I assume that whatever garbage was there was buffered which is why the log showed my input as &quot;^@1&quot; I corrected the length, and all seems well now. Thanks for your assistance!!"}], "answers": [{"comments": [{"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436978201, "post_id": 31435041, "comment_id": 50842151, "body": "@chux Thanks missed that one."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436978277, "post_id": 31435041, "comment_id": 50842193, "body": "I <i>think</i> OP is really interested in sending text though."}], "tags": [], "owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "is_accepted": false, "score": 0, "last_activity_date": 1436978214, "last_edit_date": 1436978214, "creation_date": 1436975019, "answer_id": 31435041, "question_id": 31433884, "link": "https://stackoverflow.com/questions/31433884/pass-integer-to-child-process/31435041#31435041", "title": "Pass integer to child process", "body": "<p>You have few minor errors in your code. This is the correct version:</p>\n\n<pre><code>...\nint choice = 1;\nwrite(PARENT_WRITE_FD, &amp;choice, sizeof(int)); // you are sending binary data here, probably not what you want \nwrite(PARENT_WRITE_FD, \"\\n\", 1);\n...\n\nchar choice[2] = {0x31, 0x0D};\nwrite(PARENT_WRITE_FD, choice, 2); // choice is an array, that decays into a pointer\n\nchar choice = '\\001';\nwrite(PARENT_WRITE_FD, &amp;choice, 1); // \\001 is not '1', you are effectively writing binary data here\nwrite(PARENT_WRITE_FD, \"\\n\", 1);\n</code></pre>\n\n<p>Do note that the reading side must match the writing side. If you are writing binary data, you need to read binary data in the same format. If you are writing textual data, you need to parse them as text.</p>\n"}], "owner": {"reputation": 59, "user_id": 1710614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb35e8920e86e6bf7f6beafcedb31d42?s=128&d=identicon&r=PG", "display_name": "Nole Fan 81", "link": "https://stackoverflow.com/users/1710614/nole-fan-81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436978214, "creation_date": 1436972120, "last_edit_date": 1436977957, "question_id": 31433884, "link": "https://stackoverflow.com/questions/31433884/pass-integer-to-child-process", "title": "Pass integer to child process", "body": "<p>I have a parent process that reads output from a child process and writes input to the child process where required. The child process reaches a line of java code (not my code and cannot alter) that takes an integer as input. I cannot get the write() call to send an integer and newline (to simulate pressing ). I have tried the many suggestions found in other threads to no avail. Is there a way?</p>\n\n<pre><code>write(PARENT_WRITE_FD, \"1\\n\", 2); //Log file says ^@1 entered\n\nint choice = 1;\nwrite(PARENT_WRITE_FD, &amp;choice, 1);\nwrite(PARENT_WRITE_FD, \"\\n\", 1); //Loops back around as if I just pushed enter\n\nchar choice = 1;\nwrite(PARENT_WRITE_FD, &amp;choice, 1);\nwrite(PARENT_WRITE_FD, \"\\n\", 1); //Loops back around as if I just pushed enter\n\nchar choice[2] = {0x31, 0x0D}; // 1 and CR\nwrite(PARENT_WRITE_FD, &amp;choice, 2); //Incorrect choice:726\n\nchar choice = \"\\001\";\nwrite(PARENT_WRITE_FD, &amp;choice, 1);\nwrite(PARENT_WRITE_FD, \"\\n\", 1); //Forget the outcome, but didn't work\n</code></pre>\n\n<p>Java code to parse the input:</p>\n\n<pre><code>String[] enteredChoice = enteredChoiceStr.split(\",\");\nfor ( String indexStr : enteredChoice ) {\n    int index = Integer.parseInt(indexStr);\n    if ( index == 0 || index &gt; totalNum ) {\n        isError = true;\n        ErrorMsg=\"Invalid number entered: \"+indexStr+\". Verify the number.\";\n        cu.wprintln(\"\");\n        cu.wprintln(ErrorMsg);\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 1688, "user_id": 4974174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAADm.jpg?s=128&g=1", "display_name": "Olivier Poulin", "link": "https://stackoverflow.com/users/4974174/olivier-poulin"}, "edited": false, "score": 0, "creation_date": 1436972112, "post_id": 31433817, "comment_id": 50837994, "body": "Where are you getting the seg fault? on <code>*(s+2)=&#39;4&#39;;</code> ?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1436972133, "post_id": 31433817, "comment_id": 50838006, "body": "Look here: <a href=\"http://stackoverflow.com/questions/1614723/why-is-this-string-reversal-c-code-causing-a-segmentation-fault\" title=\"why is this string reversal c code causing a segmentation fault\">stackoverflow.com/questions/1614723/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1436972247, "post_id": 31433874, "comment_id": 50838095, "body": "This answer is to professional for for person who ask this kind of question."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1436972312, "post_id": 31433874, "comment_id": 50838141, "body": "@MarekR Sorry, I did not get you."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 2, "creation_date": 1436972395, "post_id": 31433874, "comment_id": 50838205, "body": "For newbie this answer is to hard to understand."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1436972573, "post_id": 31433874, "comment_id": 50838336, "body": "@MarekR Actually I like to quote directly from the standard so that there is no chance for misconception / misunderstanding. English is not my strong point (not my native language). Would you like to propose any addition to this answer to make it easy? I&#39;ll be thankful. :-)"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1436981605, "post_id": 31433874, "comment_id": 50844185, "body": "much better. I&#39;m impressed that you give such big attention to this kind of question."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 6, "last_activity_date": 1436973145, "last_edit_date": 1436973145, "creation_date": 1436972100, "answer_id": 31433874, "question_id": 31433817, "link": "https://stackoverflow.com/questions/31433817/modify-a-string-with-pointer/31433874#31433874", "title": "Modify a string with pointer", "body": "<p>In your first case, you're facing <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behaviour</a> by attempting to modify a <em>string literal</em>. A segmentation fault is one of the common <em>side-effects</em> of UB.</p>\n\n<p>In your code,</p>\n\n<pre><code> char *s = \"hello\";\n</code></pre>\n\n<p>essentially puts the starting address of the <em>string literal</em> <code>\"hello\"</code> into <code>s</code>. Now, is you want to modify the content of <code>*s</code> (or <code>*(s+n)</code>, provided <code>n</code> does not go out of bounds), it will actually try to modify that <em>string literal</em>. As usually, the string literals are stored in the read-only memory, they are <em>usually</em> not allowed to be modified. Quoting from <code>C11</code>, chapter \u00a76.4.5, <em>String literals</em>, <sup>(emphasis mine)</sup></p>\n\n<blockquote>\n  <p>It is unspecified whether these arrays are distinct provided their elements have the appropriate values. <strong>If the program attempts to modify such an array, the behavior is undefined.</strong></p>\n</blockquote>\n\n<p>However, in your second case, you're doing</p>\n\n<pre><code> char *s = argv[1];\n</code></pre>\n\n<p>which is putting the value of <code>argv[1]</code> into <code>s</code>. Now, <code>s</code> points to the <em>string</em> contanied by <code>argv[1]</code>. Here, the contents of <code>argv[1]</code> (or, <code>argv[n]</code>, to be general) is not read-only, it can be modified. So, using <code>*s</code> (or <code>*(s+n)</code>, provided <code>n</code> does not go out of bounds), you can modify the contents.</p>\n\n<p>This case is <strong>defined behaviour</strong>, because as per \u00a75.1.2.2.2, <em>Program startup</em></p>\n\n<blockquote>\n  <p><strong>The parameters <code>argc</code> and <code>argv</code> and the strings pointed to by the <code>argv</code> array shall be modifiable by the program</strong>, and retain their last-stored values between program startup and program termination.</p>\n</blockquote>\n\n<p>So, the second case is a <em>special</em> case while using <code>argv[n]</code>, which is by the C standard rules, modifiable.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1436972280, "creation_date": 1436972280, "answer_id": 31433945, "question_id": 31433817, "link": "https://stackoverflow.com/questions/31433817/modify-a-string-with-pointer/31433945#31433945", "title": "Modify a string with pointer", "body": "<p>As Sourav said, attempting to modify a string literal invokes undefined behavior.  If you alternately did the following, it would work fine.</p>\n\n<pre><code>int main(int argc, char *argv[]){   \n   char s[] = \"hello\";   \n   *(s+2)='4';\n   printf( \"%s\\n\",s);\n   return 0;     \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1688, "user_id": 4974174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAADm.jpg?s=128&g=1", "display_name": "Olivier Poulin", "link": "https://stackoverflow.com/users/4974174/olivier-poulin"}, "is_accepted": false, "score": 3, "last_activity_date": 1436972362, "creation_date": 1436972362, "answer_id": 31433979, "question_id": 31433817, "link": "https://stackoverflow.com/questions/31433817/modify-a-string-with-pointer/31433979#31433979", "title": "Modify a string with pointer", "body": "<p>When you do </p>\n\n<pre><code>char *s = \"hello\"; \n</code></pre>\n\n<p>you are assigning <code>*s</code> to point to the beginning  of a <strong>string literal</strong> which is <strong>non-modifiable</strong>. Which means you can <em>read</em> what's there but you can't change it (which is why  </p>\n\n<pre><code>*(s+2)='4';\n</code></pre>\n\n<p>is giving you a segmentation fault.</p>\n\n<p>In your second case, you are not giving your pointer a string literal, so you can modify it.</p>\n\n<p>In fact, in your second case, you are using <code>argv</code>which is <strong>specifically</strong> explained to be modifiable in the c standard.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1437009419, "creation_date": 1437009419, "answer_id": 31443857, "question_id": 31433817, "link": "https://stackoverflow.com/questions/31433817/modify-a-string-with-pointer/31443857#31443857", "title": "Modify a string with pointer", "body": "<p>the literal: 'hello' is in read only memory, so cannot be changed.  </p>\n\n<p>Trying to change it causes the seg fault event</p>\n\n<p>Trying to change the array of strings from argv[] has the same problem.  The values are readonly  </p>\n\n<p>Trying to change a command line argument causes the seg fault event.</p>\n\n<p>You could use: ' char s[] = \"hello\"; ' as that will put the literal on the stack, where it can be changed.</p>\n\n<p>You could copy 'strcpy()' after getting the length of the command line argument and performing a malloc() for that length+1</p>\n"}], "owner": {"reputation": 242, "user_id": 3658308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9023cbfef52669f7654cb4d13db01c4e?s=128&d=identicon&r=PG&f=1", "display_name": "joumvaer92", "link": "https://stackoverflow.com/users/3658308/joumvaer92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1438405851, "accepted_answer_id": 31433874, "answer_count": 4, "score": 2, "last_activity_date": 1438405884, "creation_date": 1436971975, "last_edit_date": 1438405884, "question_id": 31433817, "link": "https://stackoverflow.com/questions/31433817/modify-a-string-with-pointer", "closed_reason": "Duplicate", "title": "Modify a string with pointer", "body": "<p>This two codes have to change the char <code>2</code> in the character <code>'4'</code></p>\n\n<pre><code>int main(int argc, char *argv[]){   \n       char *s = \"hello\";   \n       *(s+2)='4';\n       printf( \"%s\\n\",s);\n       return 0;     \n    }\n</code></pre>\n\n<p>When I run this I get segmentation fault while when I run this:</p>\n\n<pre><code>int main(int argc, char *argv[]){   \n   char *s = argv[1];   \n   *(s+2)='4';\n   printf( \"%s\\n\",s);\n   return 0;     \n}\n</code></pre>\n\n<p>I know that there are other methods to do this. What is the difference between the 2 programs?</p>\n"}, {"tags": ["java", "c", "jvmti"], "comments": [{"owner": {"reputation": 7162, "user_id": 3800782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6d5273f12d5fd7a7cc4c31769558918?s=128&d=identicon&r=PG&f=1", "display_name": "rghome", "link": "https://stackoverflow.com/users/3800782/rghome"}, "edited": false, "score": 0, "creation_date": 1436973444, "post_id": 31433778, "comment_id": 50838958, "body": "How are you executing the &quot;applications&quot; - directly, or in an application server or some other environment?"}, {"owner": {"reputation": 11, "user_id": 5119881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0b9771162f670f836a3a0388e153d9?s=128&d=identicon&r=PG&f=1", "display_name": "DGWelsh", "link": "https://stackoverflow.com/users/5119881/dgwelsh"}, "reply_to_user": {"reputation": 7162, "user_id": 3800782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6d5273f12d5fd7a7cc4c31769558918?s=128&d=identicon&r=PG&f=1", "display_name": "rghome", "link": "https://stackoverflow.com/users/3800782/rghome"}, "edited": false, "score": 0, "creation_date": 1436974130, "post_id": 31433778, "comment_id": 50839407, "body": "all are expected to be executed directly :)"}], "owner": {"reputation": 11, "user_id": 5119881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0b9771162f670f836a3a0388e153d9?s=128&d=identicon&r=PG&f=1", "display_name": "DGWelsh", "link": "https://stackoverflow.com/users/5119881/dgwelsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436971881, "creation_date": 1436971881, "question_id": 31433778, "link": "https://stackoverflow.com/questions/31433778/enforcing-an-application-whitelist-using-jvmti", "title": "Enforcing an application Whitelist using JVMTI", "body": "<p>I am looking into possible ways to restrict the execution of all java applications on my JVM except for those on a whitelist. </p>\n\n<p>Would a JVMTI agent be capable of analyzing an application within the JVM when it first attempts to load at startup and then preventing its execution if it was not found on our list of applications?</p>\n\n<p>Any other information on achieving this whitelist implementation is more than welcome.</p>\n"}, {"tags": ["c", "endianness", "c11", "char16-t", "char32-t"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436974246, "post_id": 31433324, "comment_id": 50839515, "body": "Suggest adding &quot;why&quot; endianness is important for the code.  How does code plan to use the endianness? To make some conversion easier using type spoofing?  IMO, endianness should play a minuscule role in robust portable code."}], "answers": [{"comments": [{"owner": {"reputation": 7760, "user_id": 126411, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/12a175b5493381efd582d90f250383e2?s=128&d=identicon&r=PG", "display_name": "Ryan Li", "link": "https://stackoverflow.com/users/126411/ryan-li"}, "edited": false, "score": 0, "creation_date": 1436973189, "post_id": 31433842, "comment_id": 50838767, "body": "I updated the snippet to print out <code>unsigned char</code>s directly to make my intentions clear. If <code>char32_t</code> was encoded with big-endian, printf(&quot;U+%X\\n&quot;, utf16_str[0]) would have resulted in <code>U+4153</code> because <code>unsigned int</code> is little-endian on x86_64."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 7760, "user_id": 126411, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/12a175b5493381efd582d90f250383e2?s=128&d=identicon&r=PG", "display_name": "Ryan Li", "link": "https://stackoverflow.com/users/126411/ryan-li"}, "edited": false, "score": 0, "creation_date": 1436973576, "post_id": 31433842, "comment_id": 50839051, "body": "That makes your intentions no more clear. An implementation may use a little endian source character set and a big endian execution character set. Consider cross-compiling, for example."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 7760, "user_id": 126411, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/12a175b5493381efd582d90f250383e2?s=128&d=identicon&r=PG", "display_name": "Ryan Li", "link": "https://stackoverflow.com/users/126411/ryan-li"}, "edited": false, "score": 0, "creation_date": 1436973602, "post_id": 31433842, "comment_id": 50839066, "body": "Nonetheless, I&#39;ve updated my answer because I realised what you were actually asking about... See the update."}, {"owner": {"reputation": 7760, "user_id": 126411, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/12a175b5493381efd582d90f250383e2?s=128&d=identicon&r=PG", "display_name": "Ryan Li", "link": "https://stackoverflow.com/users/126411/ryan-li"}, "edited": false, "score": 0, "creation_date": 1436974002, "post_id": 31433842, "comment_id": 50839310, "body": "But why would the source character set matter here? No matter if I save the snippet in UTF-16LE or UTF-16BE, the first character in <code>utf16_str</code> would always have the code point of 0x5341 in UTF-16."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 7760, "user_id": 126411, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/12a175b5493381efd582d90f250383e2?s=128&d=identicon&r=PG", "display_name": "Ryan Li", "link": "https://stackoverflow.com/users/126411/ryan-li"}, "edited": false, "score": 0, "creation_date": 1436974190, "post_id": 31433842, "comment_id": 50839474, "body": "Translation phase 1 (which I quoted) says multibyte characters are mapped in an implementation-defined manner. Why? It is because it is."}], "tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 3, "last_activity_date": 1436974098, "last_edit_date": 1436974098, "creation_date": 1436972029, "answer_id": 31433842, "question_id": 31433324, "link": "https://stackoverflow.com/questions/31433324/char16-t-and-char32-t-endianness/31433842#31433842", "title": "char16_t and char32_t endianness", "body": "<blockquote>\n  <p>However, in the technical report, there is no mention of endianness for these two types.</p>\n</blockquote>\n\n<p>Indeed. The C standard doesn't specify much regarding the representation of multibyte characters in source files.</p>\n\n<blockquote>\n<pre><code>char16_t utf16_str[] = u\"\u5341\u516d\"; // U+5341 U+516D\nprintf(\"U+%X U+%X\\n\", utf_16_str[0], utf_16_str[1]);\n</code></pre>\n  \n  <p>will produce\n      U+5341 U+516D\n  Which means that it's little-endian.</p>\n  \n  <p>But is this behaviour platform/implementation dependent: does it always adhere to the platform's endianness or may some implementation choose to always implement <code>char16_t</code> and <code>char32_t</code> in big-endian?</p>\n</blockquote>\n\n<p><strong>Yes</strong>, The behaviour is <em>implementation dependent</em>, as you call it. See C11\u00a75.1.1.2:</p>\n\n<blockquote>\n  <p>Physical source file multibyte characters are mapped, in an implementation-defined manner, to the source character set (introducing new-line characters for end-of-line indicators) if necessary.</p>\n</blockquote>\n\n<p>That is, whether the multibyte characters in your source code are considered big endian or little endian is implementation-defined. I would advise using something like <code>u\"\\u5341\\u516d\"</code>, if portability is an issue.</p>\n"}, {"tags": [], "owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "is_accepted": true, "score": 6, "last_activity_date": 1436972256, "creation_date": 1436972256, "answer_id": 31433936, "question_id": 31433324, "link": "https://stackoverflow.com/questions/31433324/char16-t-and-char32-t-endianness/31433936#31433936", "title": "char16_t and char32_t endianness", "body": "<p><code>char16_t</code> and <code>char32_t</code> do not guarantee Unicode encoding. (That is a C++ feature.) The macros <code>__STDC_UTF_16__</code> and <code>__STDC_UTF_32__</code>, respectively, indicate that Unicode code points actually determine the fixed-size character values. See C11 \u00a76.10.8.2 for these macros.</p>\n\n<p>(By the way, <code>__STDC_ISO_10646__</code> indicates the same thing for <code>wchar_t</code>, and it also reveals which Unicode edition is implemented via <code>wchar_t</code>. Of course, in practice, the compiler simply copies code points from the source file to strings in the object file, so it doesn't need to know much about particular characters.)</p>\n\n<p>Given that Unicode encoding is in effect, code point values stored in <code>char16_t</code> or <code>char32_t</code> must have the same object representation as <code>uint_least16_t</code> and <code>uint_least32_t</code>, because they are defined to be <code>typedef</code> aliases to those types, respectively (C11 \u00a77.28). This is again somewhat in contrast to C++, which makes those types distinct but explicitly requires compatible object representation.</p>\n\n<p>The upshot is that yes, there is nothing special about <code>char16_t</code> and <code>char32_t</code>. They are ordinary integers in the platform's endianness.</p>\n\n<p>However, your test program has nothing to do with endianness. It simply uses the values of the wide characters without inspecting how they map to bytes in memory.</p>\n"}, {"tags": [], "owner": {"reputation": 955, "user_id": 188450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37fe7f0a63fc1cab4b5e4c3713b089cd?s=128&d=identicon&r=PG", "display_name": "Andr&#233; van Schoubroeck", "link": "https://stackoverflow.com/users/188450/andr%c3%a9-van-schoubroeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1558612837, "creation_date": 1558612837, "answer_id": 56274767, "question_id": 31433324, "link": "https://stackoverflow.com/questions/31433324/char16-t-and-char32-t-endianness/56274767#56274767", "title": "char16_t and char32_t endianness", "body": "<p>UTF-16 and UTF-32 does not have an endianness defined. They are usually encoded in the hosts native byte ordering. This is why there are Byte Order Markers (BOM) which can be inserted at the beginning of the string to indicate the endianness for an UTF-16 or UTF-32 string.</p>\n"}], "owner": {"reputation": 7760, "user_id": 126411, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/12a175b5493381efd582d90f250383e2?s=128&d=identicon&r=PG", "display_name": "Ryan Li", "link": "https://stackoverflow.com/users/126411/ryan-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1577, "favorite_count": 0, "accepted_answer_id": 31433936, "answer_count": 3, "score": 2, "last_activity_date": 1558612837, "creation_date": 1436970773, "last_edit_date": 1436973597, "question_id": 31433324, "link": "https://stackoverflow.com/questions/31433324/char16-t-and-char32-t-endianness", "title": "char16_t and char32_t endianness", "body": "<p>In C11, support for portable wide char types <code>char16_t</code> and <code>char32_t</code> are <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1286.pdf\" rel=\"nofollow\">added</a> for UTF-16 and UTF-32 respectively.</p>\n\n<p>However, in the technical report, there is no mention of endianness for these two types.</p>\n\n<p>For example, the following snippet in <code>gcc-4.8.4</code> on my x86_64 computer when compiled with <code>-std=c11</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;uchar.h&gt;\n\nchar16_t utf16_str[] = u\"\u5341\u516d\";  // U+5341 U+516D\nunsigned char *chars = (unsigned char *) utf16_str;\nprintf(\"Bytes: %X %X %X %X\\n\", chars[0], chars[1], chars[2], chars[3]);\n</code></pre>\n\n<p>will produce</p>\n\n<pre><code>Bytes: 41 53 6D 51\n</code></pre>\n\n<p>Which means that it's little-endian.</p>\n\n<p>But is this behaviour platform/implementation dependent: does it always adhere to the platform's endianness or may some implementation choose to always implement <code>char16_t</code> and <code>char32_t</code> in <a href=\"https://tools.ietf.org/html/rfc2781#section-4.3\" rel=\"nofollow\">big-endian</a>?</p>\n"}, {"tags": ["c++", "c", "lttng"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 4227853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c023ea4c96dfa1b428a60c6e8f032ada?s=128&d=identicon&r=PG&f=1", "display_name": "alexmonthy", "link": "https://stackoverflow.com/users/4227853/alexmonthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1437338828, "last_edit_date": 1437338828, "creation_date": 1437173338, "answer_id": 31485803, "question_id": 31433230, "link": "https://stackoverflow.com/questions/31433230/can-i-query-lttng-if-a-given-tracepoint-with-given-args-is-going-to-be-traced-b/31485803#31485803", "title": "Can I query LTTNG if a given tracepoint with given args is going to be traced, before tracing it?", "body": "<p>You could technically query the status of the tracing session through <a href=\"http://lttng.org/docs/#doc-liblttng-ctl-lttng\" rel=\"nofollow\">liblttng-ctl</a>. However if your goal is to improve performance, I am not sure doing a lookup through this library every time you hit a tracepoint will be more efficient than a string formatting. You would have to benchmark it.</p>\n\n<p>As a side note, if you are moving existing <code>printf()</code> calls to LTTng tracepoints, you may want to look at <a href=\"http://lttng.org/docs/#doc-tracef\" rel=\"nofollow\"><code>tracef()</code></a>, which is basically a single-format-string tracepoint already defined by the tracer. There is also a slightly more advanced <code>tracelog()</code> function which will be introduced in LTTng 2.7.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2442279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c08ae504d66bd69a4fa2352f838e7d?s=128&d=identicon&r=PG", "display_name": "Rama krishnan", "link": "https://stackoverflow.com/users/2442279/rama-krishnan"}, "is_accepted": false, "score": 1, "last_activity_date": 1438843318, "last_edit_date": 1438843318, "creation_date": 1438842710, "answer_id": 31848339, "question_id": 31433230, "link": "https://stackoverflow.com/questions/31433230/can-i-query-lttng-if-a-given-tracepoint-with-given-args-is-going-to-be-traced-b/31848339#31848339", "title": "Can I query LTTNG if a given tracepoint with given args is going to be traced, before tracing it?", "body": "<p>Use <code>tracepoint_enabled()</code> and <code>do_tracepoint()</code> macros as following, code copied from <a href=\"https://github.com/lttng/lttng-ust/blob/9493af145a30229f5369c9d902b1badc0ce7deba/doc/man/lttng-ust.3\" rel=\"nofollow\">man page</a>:</p>\n\n<pre><code>if (tracepoint_enabled(ust_tests_hello, tptest)) {\n    /* prepare arguments */\n    do_tracepoint(ust_tests_hello, tptest, i, netint, values,\n        text, strlen(text), dbl, flt);\n}\n</code></pre>\n\n<p>Note: For this to work you need to have atleast <a href=\"http://lttng.org/files/lttng-ust/lttng-ust-2.7.0-rc1.tar.bz2\" rel=\"nofollow\">LTTng-UST 2.7.0-rc1</a></p>\n"}], "owner": {"reputation": 21, "user_id": 5119826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CLRbBNv3p5U/AAAAAAAAAAI/AAAAAAAAZvw/88WyZwrleyM/photo.jpg?sz=128", "display_name": "mustang51", "link": "https://stackoverflow.com/users/5119826/mustang51"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1438843318, "creation_date": 1436970506, "question_id": 31433230, "link": "https://stackoverflow.com/questions/31433230/can-i-query-lttng-if-a-given-tracepoint-with-given-args-is-going-to-be-traced-b", "title": "Can I query LTTNG if a given tracepoint with given args is going to be traced, before tracing it?", "body": "<p>We need to adapt a huge number of existing traces, printf-like, to LTTNG. One of the issues we are foreseeing is that we will need a catch-all tracepoint with the format of args plus a char* string. We are trying to find a way to avoid having to compose the string before calling the LTTNG tracepoint. Is there any way to know beforehand if the tracepoint \"will be traced\" before passing it to the LTTNG library? Any method we can call to know if the trace is a match? </p>\n\n<p>Thanks a lot!</p>\n\n<p>P.S. We know that having this kind of tracepoint is a bad practice, but zillions of trace lines are flying above us.</p>\n"}, {"tags": ["c++", "c", "c-preprocessor"], "comments": [{"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 4, "creation_date": 1436970862, "post_id": 31433101, "comment_id": 50837061, "body": "<a href=\"http://coliru.stacked-crooked.com/a/d0b2a2304579fd8b\" rel=\"nofollow noreferrer\">clang does produce a error</a>"}, {"owner": {"reputation": 6240, "user_id": 488700, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/620a68b8a42a5af384929133de068c63?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/488700/artur"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1436970958, "post_id": 31433101, "comment_id": 50837144, "body": "@cpplearner: Thanks - this is what I would expect from gcc, vc."}], "answers": [{"comments": [{"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1437038048, "post_id": 31435835, "comment_id": 50867843, "body": "&quot;I don&#39;t know of any compiler which produces a warning for macros with ambiguous ## order of evaluation.&quot; What would be the point since PP concatenation is associative (assuming the intermediate tokens are valid) and has no observable side effects?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 1, "creation_date": 1437050314, "post_id": 31435835, "comment_id": 50875839, "body": "@arnevogel: the intermediate tokens might not be valid for certain orderings. <code>2e ## + ## 7</code>"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1436977215, "creation_date": 1436977215, "answer_id": 31435835, "question_id": 31433101, "link": "https://stackoverflow.com/questions/31433101/two-adjacent-operators/31435835#31435835", "title": "Two adjacent ## operators", "body": "<p>(The C and C++ standards have essentially identical wording in &sect;6.10.3.3 and &sect;16.3.3 respectively. In case there are minor differences, I took the quotes from C11.)</p>\n\n<p>The order in which <code>##</code> operators are processed is explicitly unspecified: (\"The order of evaluation of ## operators is unspecified.\", last sentence of paragraph 3; also see paragraph 2 of the preceding section). So you can't say that the \"preprocesor first tries to concat x with second ##\"; it might first try to concat the first <code>##</code> with the <code>3</code>. That wouldn't produce a valid token, either, so it's a bit of a quibble. But it's important to remember.</p>\n\n<p>The question is whether the statement that the order of evaluation being unspecified permits the evaluation to be <em>interleaved</em>. In other words, could a preprocessor satisfy the standard by first deleting the second <code>##</code>, then deleting the first one, and finally producing a single concatenation? Certainly, in the execution model, it is clear that <em>unsequenced</em> operations are allowed to interleave. (See note 13 in &sect;5.1.2.3. In C++, the words are \"can overlap\"; &sect;1.9/13)</p>\n\n<p>That might be a bit of a stretch, but it's also worth noting that after concatenation:</p>\n\n<blockquote>\n  <p>If the result is not a valid preprocessing token, the behavior is undefined.</p>\n</blockquote>\n\n<p>This is <em>not</em> marked as a constraint, so an error message is not required. And since undefined behaviour relieves the compiler from any obligation to the standard, I suppose gcc is totally within its rights to produce the observed behaviour.</p>\n\n<p>In short, the macro replacement string provided in the original question either involves unspecified or undefined behaviour, but not a constraint violation. Consequently, the compiler is under no obligation to produce a diagnostic.</p>\n\n<p>Not producing a diagnostic in this case could be considered a quality-of-implementation issue. On the other hand, I don't know of any compiler which produces a warning for macros with ambiguous <code>##</code> order of evaluation. Aside from the constraint that a macro expansion list cannot start or end with a <code>##</code> token, which must be diagnosed by the compiler, it is wholly the responsibility of the programmer to ensure that concatenation expressions are well-defined.</p>\n"}], "owner": {"reputation": 6240, "user_id": 488700, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/620a68b8a42a5af384929133de068c63?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/488700/artur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 1, "answer_count": 1, "score": 13, "last_activity_date": 1436977215, "creation_date": 1436970153, "question_id": 31433101, "link": "https://stackoverflow.com/questions/31433101/two-adjacent-operators", "title": "Two adjacent ## operators", "body": "<p>Can someone explain me why having 2 concatenation operators does not produce any error by a preprocessor?:</p>\n\n<pre><code>#define Z(x) x ## ## 3\nZ(3)\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>33\n</code></pre>\n\n<p>Standards say that:</p>\n\n<blockquote>\n  <p>...each instance of a ## preprocessing token in the replacement list\n  (not from an argument) is deleted and the preceding preprocessing\n  token is concatenated with the following preprocessing token</p>\n</blockquote>\n\n<p>so I would expect that preprocesor first tries to concat <code>x</code> with second <code>##</code> which seems strange. This does not produce any valid token so I would expect at least a warning. Neither gcc, nor VC produce any warning.</p>\n\n<p>I would appreciate some explanation of how this works and why.\nStandard mentions <code>placemaker</code> temporary tokens which would explain why this works but there would have to be one such token between both 'double-sharps'. The problem is that <code>placemaker</code> tokens are generated when parameter contains no tokens and there is no parameter between both concat operators.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1436970028, "post_id": 31432542, "comment_id": 50836417, "body": "Related to: <a href=\"http://stackoverflow.com/q/26426910/1708801\">Is accessing a global array outside its bound undefined behavior?</a>"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 0, "creation_date": 1436974502, "post_id": 31432542, "comment_id": 50839701, "body": "also related <a href=\"http://stackoverflow.com/questions/382993/why-do-compilers-not-warn-about-out-of-bounds-static-array-indices?rq=1\" title=\"why do compilers not warn about out of bounds static array indices\">stackoverflow.com/questions/382993/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 3, "creation_date": 1436970221, "post_id": 31432862, "comment_id": 50836580, "body": "Honestly, if you don&#39;t know, maybe you shouldn&#39;t post an answer. Throw the code into a compiler and it will let you know."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436971198, "post_id": 31432862, "comment_id": 50837334, "body": "That&#39;s actually a variable-length array. <code>ARRAY_LENGTH</code> is <code>const</code> but not constant. It&#39;s valid in C99 or later, but not in C90. Consider using s macro or <code>enum</code> instead."}], "tags": [], "owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "is_accepted": true, "score": 3, "last_activity_date": 1436970223, "last_edit_date": 1436970223, "creation_date": 1436969552, "answer_id": 31432862, "question_id": 31432542, "link": "https://stackoverflow.com/questions/31432542/why-doesnt-my-c-compiler-catch-this-out-of-bounds-error/31432862#31432862", "title": "Why Doesn&#39;t My C Compiler Catch This Out Of Bounds Error", "body": "<p>Because C doesn't work that way. As the programmer, you are responsible for making sure the array indexes do not go out of bounds.</p>\n\n<p>One way to get around this is, if you know how long your array needs to be, create a variable and use it in your program like so:</p>\n\n<pre><code>const int ARRAY_LENGTH = 3;\n\nuint8_t test[ARRAY_LENGTH];\n\nfor (int i = 0; i &lt; ARRAY_LENGTH; i++)\n{\n    test[i] = i;\n}\n</code></pre>\n\n<p>That way, if the array length needs to change, you only need to remember to change it in one place instead of every where it is used.</p>\n"}], "owner": {"reputation": 877, "user_id": 1464785, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/80a213d6ed32fd31a42d70a0def9b2dc?s=128&d=identicon&r=PG", "display_name": "spizzak", "link": "https://stackoverflow.com/users/1464785/spizzak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 31432862, "answer_count": 1, "score": 0, "last_activity_date": 1436972594, "creation_date": 1436968774, "last_edit_date": 1436969372, "question_id": 31432542, "link": "https://stackoverflow.com/questions/31432542/why-doesnt-my-c-compiler-catch-this-out-of-bounds-error", "title": "Why Doesn&#39;t My C Compiler Catch This Out Of Bounds Error", "body": "<p>I'm initializing my array to a size of 3 and then assigning 5 elements in it. </p>\n\n<pre><code>uint8_t test[3] = {};\n\nfor (i = 0; i &lt;= 5; i++)\n{\n    test[i]= i;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436968149, "post_id": 31432265, "comment_id": 50834929, "body": "which line give the error?"}, {"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436968209, "post_id": 31432265, "comment_id": 50834966, "body": "In init_module, I put a comment above it"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436968530, "post_id": 31432265, "comment_id": 50835228, "body": "I&#39;m not very sure whether I understood your requirement correctly, but I have added an answer. Check it and let me know if this sates your requirement."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436968971, "post_id": 31432265, "comment_id": 50835579, "body": "Tell me one thing, do you have the required development modules installed? See my updated answer."}, {"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436968987, "post_id": 31432265, "comment_id": 50835592, "body": "I am using make to compile and is there a point in specifying a custom path because I installed  all the header files from linux."}, {"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436969113, "post_id": 31432265, "comment_id": 50835689, "body": "what is development modules?"}, {"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436969677, "post_id": 31432265, "comment_id": 50836150, "body": "I do have installed them"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436969772, "post_id": 31432265, "comment_id": 50836202, "body": "Check my answser and try to search in similar path, if you have."}, {"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436969925, "post_id": 31432265, "comment_id": 50836321, "body": "is it possible that there has been some changes between 3.x and 2.6.x"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436970032, "post_id": 31432265, "comment_id": 50836418, "body": "Possible, but not likely. Frankly speaking, I don&#39;t have a 3.X kernel with me right now to check."}, {"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436970059, "post_id": 31432265, "comment_id": 50836443, "body": "internal.h file is longer there in include directory and your are showing me kernel version 2.6.x"}, {"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436970393, "post_id": 31432265, "comment_id": 50836713, "body": "Speaking of which upto kernel 2.6.39.4, proc_dir_entry is included in proc_fs.h header then why are suggesting to include fs/proc/internal.h"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436970400, "post_id": 31432265, "comment_id": 50836717, "body": "Try getting <code>kcbench-data</code> also."}, {"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436970735, "post_id": 31432265, "comment_id": 50836978, "body": "I don&#39;t think that checking the stability of system using an rpm based package on debian based system is going to help me"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "edited": false, "score": 0, "creation_date": 1436968567, "post_id": 31432379, "comment_id": 50835261, "body": "that file is no longer in include directory in Linux"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1436970356, "last_edit_date": 1436970356, "creation_date": 1436968396, "answer_id": 31432379, "question_id": 31432265, "link": "https://stackoverflow.com/questions/31432265/dereferencing-pointer-to-incomplete-type-in-linux-module/31432379#31432379", "title": "Dereferencing pointer to incomplete type in Linux Module", "body": "<p>The definition of <code>struct proc_dir_entry</code> is available in <code>fs/proc/internal.h</code> file. You have to include it to get the definition into your source file.</p>\n\n<blockquote>\n  <p><em>Using fs/proc/internal.h is not possible as it is not under include directory.</em></p>\n</blockquote>\n\n<p>In compilation time, you can provide the (custom) path to the include files you'll be using using <code>-I</code> option with <code>gcc</code>. </p>\n\n<p><em>NOTE: I assume you have <code>kernel-headerfiles</code> and <code>kernel-devel</code> installed.</em></p>\n"}], "owner": {"reputation": 101, "user_id": 3147230, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c0779f7b98136b23578374764f1286?s=128&d=identicon&r=PG&f=1", "display_name": "user101285", "link": "https://stackoverflow.com/users/3147230/user101285"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436970356, "creation_date": 1436968093, "question_id": 31432265, "link": "https://stackoverflow.com/questions/31432265/dereferencing-pointer-to-incomplete-type-in-linux-module", "title": "Dereferencing pointer to incomplete type in Linux Module", "body": "<p>I encountered a compilation error \"dereferencing pointer to incomplete type\" while compiling a module in Linux. I have created an inode_operations table which I want to assign to proc_iops pointer in proc_dir_entry. I searched for the answers telling me to use procfs APIs. Using fs/proc/internal.h is not possible as it is not under include directory. I know about incomplete types but I am still not able to perform that assignment in init_module. Help needed.</p>\n\n<p>Using Debian 8 with Linux Kernel 3.16 GCC Version 4.8</p>\n\n<pre><code>#include &lt;linux/fs.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/slab.h&gt;\n#include &lt;linux/sched.h&gt;\n#include &lt;linux/proc_fs.h&gt;\n#include &lt;linux/uaccess.h&gt;\n\n#define MESSAGE_LENGTH 80\n\n#define PROC_ENTRY_FILENAME \"sleep\"\n\nstatic char message[MESSAGE_LENGTH];\n\nint already_open = 0;\n\nstatic ssize_t module_output(struct file *file,\n                 char *buf,\n                 size_t len,\n                 loff_t *offset)\n{\n    static int finished = 0;\n    int i;\n    char message[MESSAGE_LENGTH + 30];\n\n    if (finished){\n        finished = 0;\n        return 0;\n    }\n\n    sprintf(message, \"Last input: %s\\n\",message);\n\n    for(i = 0;i &lt; len &amp;&amp; message[i]; i++)\n        put_user(message[i], buf + i);\n\n    finished = 1;\n    return i;\n}\n\nstatic ssize_t module_input(struct file *file,\n                const char *buf,\n                size_t length,\n                loff_t *offset)\n{\n    int i;\n\n    for (i = 0; i &lt; MESSAGE_LENGTH - 1 &amp;&amp; i &lt; length; i++)\n        get_user(message[i], buf + i);\n\n    message[i] = '\\0';\n\n    return i;\n}\n\nDECLARE_WAIT_QUEUE_HEAD(WaitQ);\n\nstatic int module_open(struct inode *inode, struct file *file)\n{\n    int i;\n    int is_sig = 0;\n\n    if ((file-&gt;f_flags &amp; O_NONBLOCK) &amp;&amp; already_open )\n        return -EAGAIN;\n\n    try_module_get(THIS_MODULE);\n\n    while(already_open){\n\n        wait_event_interruptible(WaitQ, !already_open);\n\n        for(i = 0; i &lt; _NSIG_WORDS &amp;&amp; !is_sig; i++)\n            is_sig = current-&gt;pending.signal.sig[i] &amp;\n                 ~current-&gt;blocked.sig[i];\n\n        if (is_sig){\n            module_put(THIS_MODULE);\n            return -EINTR;\n        }   \n    }\n\n    already_open = 1;\n\n    return 0;       \n}\n\nint module_close(struct inode *inode, struct file *file)\n{\n    already_open = 0;\n\n    wake_up(&amp;WaitQ);\n\n    module_put(THIS_MODULE);\n\n    return 0;\n}\n\nstatic int module_permission(struct inode *inode, int op)\n{\n    // Documentation/security/credentials.txt\n    if (op==4 || (op == 2 &amp;&amp; current_euid().val == 0))\n        return 0;\n\n    return -EACCES;\n}\n\nstatic struct file_operations fops = {\n    .read = module_output,\n    .write = module_input,\n    .open = module_open,\n    .release = module_close\n};\n\nstatic struct inode_operations iops = {\n    .permission = module_permission\n};\n\nint init_module(void)\n{\n    struct proc_dir_entry *our_proc_file;\n\n    our_proc_file = proc_create(PROC_ENTRY_FILENAME, 0, NULL, &amp;fops);\n\n    if( our_proc_file == NULL )\n    {\n        printk(KERN_ALERT \"Error: Could not initialize /proc/sleep\\n\"); \n        return -ENOMEM;\n    }\n\n    // Line causing the error\n    our_proc_file-&gt;proc_iops = &amp;iops;\n\n    printk(KERN_INFO \"/proc/sleep file created.\\n\");\n\n    return 0;\n}\n\nvoid cleanup_module(void)\n{\n    remove_proc_entry(PROC_ENTRY_FILENAME, NULL);\n    printk(KERN_INFO \"/proc/sleep file removed.\");\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436967019, "post_id": 31431792, "comment_id": 50833928, "body": "<code>void main()</code> --&gt; <code>int main(void)</code>"}, {"owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "edited": false, "score": 0, "creation_date": 1436967060, "post_id": 31431792, "comment_id": 50833971, "body": "What are you trying to do?"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1436967336, "post_id": 31431792, "comment_id": 50834217, "body": "Pick one of C++ and C, they are different languages."}, {"owner": {"reputation": 1, "user_id": 4976405, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FkX4qjSQqzo/AAAAAAAAAAI/AAAAAAAAABU/JF7k1MjmTRU/photo.jpg?sz=128", "display_name": "Mahesh Ayyappan", "link": "https://stackoverflow.com/users/4976405/mahesh-ayyappan"}, "edited": false, "score": 0, "creation_date": 1437106936, "post_id": 31431792, "comment_id": 50902643, "body": "c will be preferable"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4976405, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FkX4qjSQqzo/AAAAAAAAAAI/AAAAAAAAABU/JF7k1MjmTRU/photo.jpg?sz=128", "display_name": "Mahesh Ayyappan", "link": "https://stackoverflow.com/users/4976405/mahesh-ayyappan"}, "edited": false, "score": 0, "creation_date": 1437107096, "post_id": 31431847, "comment_id": 50902684, "body": "Thank you sourav for your help"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1436968186, "last_edit_date": 1436968186, "creation_date": 1436967093, "answer_id": 31431847, "question_id": 31431792, "link": "https://stackoverflow.com/questions/31431792/how-to-store-values-in-single-dimensional-character-pointer-array/31431847#31431847", "title": "How to store values in single dimensional character pointer array", "body": "<p>In your code,</p>\n\n<pre><code> scanf(\"%s\",&amp;a);\n</code></pre>\n\n<p>is wrong, as <code>a</code> is uninitialised, and <code>&amp;a</code> is not the argument you would need to pass. You need to allocate <em>enough</em> memory to <code>a</code> before passing that.</p>\n\n<p>Better, you don't need to have a pointer for that itself. You can chnage your code like</p>\n\n<pre><code>  char a[128];\n</code></pre>\n\n<p>and then, use</p>\n\n<pre><code>  scanf(\"%127s\", a);    //limit the input against overflow\n</code></pre>\n\n<p>to take the user input.</p>\n\n<p>Or, if you <em>insist</em> to use the pointer and want to go for dynamic memory allocation, you can have a look at <a href=\"http://linux.die.net/man/3/malloc\" rel=\"nofollow\">malloc()</a> and family of functions. Remember, in that case also, you pass <code>a</code> to <code>scanf()</code>, not <code>&amp;a</code>.</p>\n\n<p>After that, please note </p>\n\n<ol>\n<li>The recommended signature of <code>main()</code> is <code>int main(void)</code>.</li>\n<li>Do not use <em>unnecessary</em> global variables. You can always pass the variables as function parameters to use them across functions.</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 4976405, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FkX4qjSQqzo/AAAAAAAAAAI/AAAAAAAAABU/JF7k1MjmTRU/photo.jpg?sz=128", "display_name": "Mahesh Ayyappan", "link": "https://stackoverflow.com/users/4976405/mahesh-ayyappan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436968186, "creation_date": 1436966959, "last_edit_date": 1436967502, "question_id": 31431792, "link": "https://stackoverflow.com/questions/31431792/how-to-store-values-in-single-dimensional-character-pointer-array", "title": "How to store values in single dimensional character pointer array", "body": "<p>I want store values into a character pointer pointer.I have worked out a code which is mentioned below:</p>\n\n<pre><code>#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n\nint i=0,j,n,no_stops;\nchar *r[10],*s[10][10];\nchar *a,*b;\n\n\nvoid fetch_routes_stops()\n   {\n   printf(\"Enter the no of routes:\");\n   scanf(\"%d\",&amp;n);\n   for(i=0;i&lt;n;i++)\n   {\n       printf(\"\\nEnter the route No %d:\",i+1);\n       scanf(\"%s\",&amp;a);\n       r[i]=strdup(a);\n   }\n}\n\nvoid main()\n{\n    fetch_routes_stops();\n    for(i=0;i&lt;n;i++)\n    {\n        printf(\"\\n%s\",r[i]);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "dereference"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 1, "creation_date": 1436967031, "post_id": 31431786, "comment_id": 50833953, "body": "Please format your code in a readable way."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1436967352, "post_id": 31431786, "comment_id": 50834235, "body": "downvote: you asked this question because you didn&#39;t listen to a single word of your CS lectures."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1436968085, "post_id": 31431786, "comment_id": 50834877, "body": "What&#39;s the purpose of <code>ptrarray</code> ? Just call your <code>sort</code> function directly on <code>dataarray</code>."}, {"owner": {"reputation": 39, "user_id": 4855991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1581798542080376/picture?type=large", "display_name": "Russell Davis", "link": "https://stackoverflow.com/users/4855991/russell-davis"}, "edited": false, "score": 0, "creation_date": 1436968199, "post_id": 31431786, "comment_id": 50834960, "body": "The assignment says we are supposed to leave dataarray untouched and make an array of pointers that point to dataarray to be sorted."}, {"owner": {"reputation": 39, "user_id": 4855991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1581798542080376/picture?type=large", "display_name": "Russell Davis", "link": "https://stackoverflow.com/users/4855991/russell-davis"}, "edited": false, "score": 0, "creation_date": 1436968243, "post_id": 31431786, "comment_id": 50834991, "body": "And I do listen, sir, the explanation of this topic just left a lot to be desired."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1436968308, "post_id": 31431786, "comment_id": 50835048, "body": "@RussellDavis  Did you even compile it ?"}, {"owner": {"reputation": 39, "user_id": 4855991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1581798542080376/picture?type=large", "display_name": "Russell Davis", "link": "https://stackoverflow.com/users/4855991/russell-davis"}, "edited": false, "score": 0, "creation_date": 1436968435, "post_id": 31431786, "comment_id": 50835151, "body": "Not yet since the logic I&#39;m using is unworkable/won&#39;t compile."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1436969230, "post_id": 31431786, "comment_id": 50835800, "body": "@RussellDavis  What exactly is your question? Title  is  bit confusing."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1436970108, "post_id": 31431786, "comment_id": 50836484, "body": "<code>for (j; j &lt; (size-1); j)</code> what is this supposed to <i>do</i> ?"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1436970446, "post_id": 31431786, "comment_id": 50836753, "body": "If it won&#39;t even compile then asking how to solve the problem is getting ahead of yourself. Get what you have to compile first then ask how to fix it."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5054291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c692d1e955874d676b6e62797b61995?s=128&d=identicon&r=PG&f=1", "display_name": "whitegoogles", "link": "https://stackoverflow.com/users/5054291/whitegoogles"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1436970595, "post_id": 31432891, "comment_id": 50836866, "body": "Hmm, I don&#39;t think thats correct. In the statement *(ptrarray+j) the array pointer is dereferenced, but the pointer that&#39;s stored there is not. Also, the poster wasn&#39;t asking what was wrong with his code involving the for loop, he just wanted to know how to dereference the array correctly."}, {"owner": {"reputation": 101, "user_id": 5054291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c692d1e955874d676b6e62797b61995?s=128&d=identicon&r=PG&f=1", "display_name": "whitegoogles", "link": "https://stackoverflow.com/users/5054291/whitegoogles"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1436970791, "post_id": 31432891, "comment_id": 50837012, "body": "That&#39;s still wrong. *(ptrarray[j]) does not equal *(ptrarry+j). One performs one dereference, the other performs two..."}, {"owner": {"reputation": 39, "user_id": 4855991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1581798542080376/picture?type=large", "display_name": "Russell Davis", "link": "https://stackoverflow.com/users/4855991/russell-davis"}, "edited": false, "score": 0, "creation_date": 1436975571, "post_id": 31432891, "comment_id": 50840503, "body": "I updated my code, and tried implementing what you suggested, but it did not appear to work, as the program does basically nothing (the array of pointers does not sort)."}, {"owner": {"reputation": 101, "user_id": 5054291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c692d1e955874d676b6e62797b61995?s=128&d=identicon&r=PG&f=1", "display_name": "whitegoogles", "link": "https://stackoverflow.com/users/5054291/whitegoogles"}, "reply_to_user": {"reputation": 39, "user_id": 4855991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1581798542080376/picture?type=large", "display_name": "Russell Davis", "link": "https://stackoverflow.com/users/4855991/russell-davis"}, "edited": false, "score": 0, "creation_date": 1436976253, "post_id": 31432891, "comment_id": 50840983, "body": "Something that seems somewhat confusing about your original solution is the line if ((*(ptrarray + j)) == (*(ptrarray + (j + 1)))). If you wanted it to sort, I think you would need to be doing some kind of &gt; or &lt; comparison, not checking to see if they are equal. Swapping two equivalent values will not actually change the array."}], "tags": [], "owner": {"reputation": 101, "user_id": 5054291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c692d1e955874d676b6e62797b61995?s=128&d=identicon&r=PG&f=1", "display_name": "whitegoogles", "link": "https://stackoverflow.com/users/5054291/whitegoogles"}, "is_accepted": true, "score": 1, "last_activity_date": 1436969998, "last_edit_date": 1436969998, "creation_date": 1436969627, "answer_id": 31432891, "question_id": 31431786, "link": "https://stackoverflow.com/questions/31431786/how-do-i-dereference-a-pointer-that-is-an-element-of-an-array-that-is-passed-int/31432891#31432891", "title": "How do I dereference a pointer that is an element of an array that is passed into a function", "body": "<p>You should just pass the array in, not a pointer to it as C will not actually copy the array it will use a pointer to it anyway. Then, to dereference the pointers you could use *(ptrarray[j]) where j iterates from 0 to the size of the array. It would also be valid to do **(ptrarray+j), which would first dereference the array pointer to get the element pointed at, and then dereference that element to get the original value.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1436970565, "creation_date": 1436970565, "answer_id": 31433254, "question_id": 31431786, "link": "https://stackoverflow.com/questions/31431786/how-do-i-dereference-a-pointer-that-is-an-element-of-an-array-that-is-passed-int/31433254#31433254", "title": "How do I dereference a pointer that is an element of an array that is passed into a function", "body": "<p>First of all this code will not compile as you function <code>sort</code> -</p>\n\n<pre><code> void sort(int *[], int);\n               ^array of pointers \n\n\nvoid sort(int *ptrarray, int size)\n              ^pointer \n</code></pre>\n\n<p>So compiler will give error.</p>\n\n<p>Declare function as -</p>\n\n<pre><code>void sort(int **ptrarray, int size) \n</code></pre>\n\n<p>And also increment <code>j</code> in this for loop-</p>\n\n<pre><code> for (j; j &lt; (size-1); j)\n                       ^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1436976402, "creation_date": 1436976402, "answer_id": 31435594, "question_id": 31431786, "link": "https://stackoverflow.com/questions/31431786/how-do-i-dereference-a-pointer-that-is-an-element-of-an-array-that-is-passed-int/31435594#31435594", "title": "How do I dereference a pointer that is an element of an array that is passed into a function", "body": "<p>You can't call this:</p>\n\n<pre><code>void sort(int ptrarray[], int size)\n</code></pre>\n\n<p>With this:</p>\n\n<pre><code>int *ptrarray[100];\nsort(ptrarray, size);\n</code></pre>\n\n<p>As sort is expecting an array of <code>int</code>, while you're passing it an array of <code>int *</code>.  <code>sort</code> should be declared as:</p>\n\n<pre><code>void sort(int *ptrarray[], int size)\n</code></pre>\n\n<p>Also, this:</p>\n\n<pre><code>if ((*(ptrarray + j)) == (*(ptrarray + (j + 1))))\n</code></pre>\n\n<p>Is comparing the pointers themselves, not the values they point to, which is what you really want to compare, and it's not the right comparison.  You instead want this:</p>\n\n<pre><code>if (*(ptrarray[j]) &gt; *(ptrarray[j + 1]))\n</code></pre>\n\n<p>I'd recommend sticking with the <code>a[i]</code> syntax rather than the <code>*(a + i)</code> syntax as it's more clear.</p>\n\n<p>Your swap function should also change to take pointers to two ints:</p>\n\n<pre><code>void swapvalues(int *a, int *b)\n{\n    int holder;\n    holder = *a;\n    *a = *b;\n    *b = holder;\n}\n</code></pre>\n\n<p>Then you call it like this:</p>\n\n<pre><code>swapvalues(ptrarray[j], ptrarray[j+1]);\n</code></pre>\n\n<p>Your loop initialization is also off.  Here's the full <code>sort</code> function:</p>\n\n<pre><code>void sort(int *ptrarray[], int size)\n{\n    int i,j;\n    for (i = 0; i &lt; size - 1; i++)\n    {\n        for (j = i; j &lt; (size-1); j++)\n        {\n            if (*(ptrarray[j]) &gt; *(ptrarray[j + 1]))\n            {\n                swapvalues(ptrarray[j], ptrarray[j+1]);\n            }\n            else\n                continue;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4855991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1581798542080376/picture?type=large", "display_name": "Russell Davis", "link": "https://stackoverflow.com/users/4855991/russell-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 31432891, "answer_count": 3, "score": -1, "last_activity_date": 1436976402, "creation_date": 1436966954, "last_edit_date": 1436975458, "question_id": 31431786, "link": "https://stackoverflow.com/questions/31431786/how-do-i-dereference-a-pointer-that-is-an-element-of-an-array-that-is-passed-int", "title": "How do I dereference a pointer that is an element of an array that is passed into a function", "body": "<p>So I am working on a homework assignment that requires us to take an integer array and create a parallel array of pointers that will then point to the corresponding element in the original array. We are then to sort the array of pointers into numerical order, and use a bubble sort in a function to do so. My question is, once the array of pointers is passed to the function, how do I dereference back to the value that the element pointer points to so that i can use comparisons in the bubble sort, switch values, and output the sorted arrays? Am i right to pass the array of pointers into a pointer, or should I pass the actual array into the function? Code as it is currently below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid sort(int *[], int);\nvoid swapvalues(int *, int *);\n\n\nint main()\n{\n    int dataarray[] = { 0, 0, 0, 0, 123, 124, 125, 3000, 3000, 82, 876, 986, 345, 1990, 2367, 98, 2, 444, 993, 635, 283, 544, 923, 18, 543, 777, 234, 549, 864, 39, 97, 986, 986, 1, 2999, 473, 776, 9, 23, 397, 15, 822, 1927, 1438, 1937, 1956, 7, 29, -1 };\n    int *ptrarray[100];\n    int flag1 = 0;\n    int flag2 = 0;\n    int flag3 = 0;\n    int i = 0;\n    int j = 0;\n    int k = 0;\n    const int size = sizeof(dataarray) / sizeof(int);\n    for (i; i &lt;= size; i++)\n    {\n        ptrarray[i] = &amp;dataarray[i];\n    }\n    sort(ptrarray, size);\n\n\n\n\n    return 0;\n}\n\n\nvoid sort(int ptrarray[], int size)\n{\n    int i = 0;\n    int j;\n    for (i; i &lt; size; i++)\n    {\n        j = 0;\n        for (j; j &lt; (size-1); j++)\n        {\n            if ((*(ptrarray + j)) == (*(ptrarray + (j + 1))))\n            {\n                swapvalues(ptrarray, j);\n            }\n            else\n                continue;\n        }\n    }\n}\n\nvoid swapvalues(int *ptrarray, int j)\n{\n    int holder;\n    holder = *(ptrarray + j);\n    *(ptrarray + j) = *(ptrarray + (j + 1));\n    *(ptrarray + (j + 1)) = holder;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "compilation", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436967773, "post_id": 31432055, "comment_id": 50834597, "body": "This is, at best, part of an answer."}], "tags": [], "owner": {"reputation": 575, "user_id": 3467703, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d38b63cecc85765dd733221a502e597c?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/3467703/andre"}, "is_accepted": false, "score": 0, "last_activity_date": 1436967574, "creation_date": 1436967574, "answer_id": 31432055, "question_id": 31431730, "link": "https://stackoverflow.com/questions/31431730/makefile-optimisation-of-multiple-targets/31432055#31432055", "title": "Makefile optimisation of multiple targets", "body": "<p>Assuming you can identify a rule to generate tools from the sources, take a look at these make functions:</p>\n\n<ul>\n<li>patsubst</li>\n<li>wildcard</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 1973313, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/43wp4.png?s=128&g=1", "display_name": "HalfBit", "link": "https://stackoverflow.com/users/1973313/halfbit"}, "edited": false, "score": 0, "creation_date": 1437007342, "post_id": 31432137, "comment_id": 50856108, "body": "I see the difference between my &#39;makefile&#39; and the real thing. That makes more sense, thanks. But I was wondering, in the second example you have, what in it makes it remove the object files?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 47, "user_id": 1973313, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/43wp4.png?s=128&g=1", "display_name": "HalfBit", "link": "https://stackoverflow.com/users/1973313/halfbit"}, "edited": false, "score": 0, "creation_date": 1437011531, "post_id": 31432137, "comment_id": 50857201, "body": "make has special rules for handling what it calls &quot;intermediate files&quot;. If file <code>X</code> lists file <code>Y</code> as a prereq and file <code>Y</code> has source file <code>Z</code> as a prereq then make knows that it can build <code>Y</code> when it needs to and knows that <code>Y</code> won&#39;t change if <code>Z</code> doesn&#39;t so it deletes <code>Y</code> when it is done with it. See <a href=\"http://www.gnu.org/software/make/manual/make.html#Chained-Rules\" rel=\"nofollow noreferrer\">Chains of Implicit Rules</a> for more details about this. (Assuming you meant why do you see make &quot;run&quot; <code>rm lbString.o lbLog.</code> at the end of the output. It isn&#39;t really running that by the way that&#39;s just telling you what it did.)"}], "tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": true, "score": 1, "last_activity_date": 1436967758, "creation_date": 1436967758, "answer_id": 31432137, "question_id": 31431730, "link": "https://stackoverflow.com/questions/31431730/makefile-optimisation-of-multiple-targets/31432137#31432137", "title": "Makefile optimisation of multiple targets", "body": "<p>This isn't a proper makefile at all. It doesn't specify any prerequisite/target pairs that make can take advantage of.</p>\n\n<p>To take advantage of what make does for you you want something more like this:</p>\n\n<pre><code># Compilation\nCXX = g++\nCXXFLAGS = -pedantic -Wall -c # -g -Wextra\n\nall: tests/lbLog_example tests/lbString_example\n\nlbLog.o: src/lbLog.cpp\n    $(CXX) $(CXXFLAGS) $^ -o $@    \n\ntests/lbLog_example: examples/lbLog_example.cpp lbLog.o\n    $(CXX) $^ -o $@\n\nlbString.o: src/lbString.cpp\n    $(CXX) $(CXXFLAGS) $^ -o $@\n\ntests/lbString_example: examples/lbString_example.cpp lbString.o\n    $(CXX) $^ -o $@\n</code></pre>\n\n<p>Which tells make to build the test executables by default and that the test executables depend on the toplevel object files and how to build the object files from their respective sources. And now make knows that it needs to rebuild the target files when their prerequisite files change but not otherwise (as opposed to your original which always recompiles everything).</p>\n\n<p>You could even clean that up some more with <a href=\"http://www.gnu.org/software/make/manual/make.html#Pattern-Intro\" rel=\"nofollow\">pattern rules</a> like this:</p>\n\n<pre><code># Compilation\nCXX = g++\nCXXFLAGS = -pedantic -Wall -c # -g -Wextra\n\nall: tests/lbLog_example tests/lbString_example\n\nlb%.o: src/lb%.cpp\n    $(CXX) $(CXXFLAGS) $^ -o $@\n\ntests/lb%_example: examples/lb%_example.cpp lb%.o\n    $(CXX) $^ -o $@\n</code></pre>\n\n<p>If you allowed for building the object files in the <code>src</code> directory you could remove the <code>lb%.o: src/lb%.cpp</code> rule entirely as well. Build the test executables in the <code>examples</code> directory and I believe you could remove the <code>$(CXX) $^ -o $@</code> body from the <code>tests/lb%_example: examples/lb%_example.cpp lb%.o</code> target as well which would end up with this (untested) makefile I believe:</p>\n\n<pre><code># Compilation\nCXX = g++\nCXXFLAGS = -pedantic -Wall -c # -g -Wextra\n\nall: tests/lbLog_example tests/lbString_example\n\ntests/lb%_example: examples/lb%_example.cpp lb%.o\n</code></pre>\n\n<p>This last bit works (assuming I got it all right) because make comes with many <a href=\"http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules\" rel=\"nofollow\">built-in rules</a> for common build patterns.</p>\n"}], "owner": {"reputation": 47, "user_id": 1973313, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/43wp4.png?s=128&g=1", "display_name": "HalfBit", "link": "https://stackoverflow.com/users/1973313/halfbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 31432137, "answer_count": 2, "score": 2, "last_activity_date": 1436968132, "creation_date": 1436966823, "question_id": 31431730, "link": "https://stackoverflow.com/questions/31431730/makefile-optimisation-of-multiple-targets", "title": "Makefile optimisation of multiple targets", "body": "<p>So as part of a few tools I'm making in C++, I wanted to be able to test each tool individually. There are multiple tools with multiple testing files, and hence I want multiple executables as my end result. I was hoping the magic of Makefiles could make my life much easier.</p>\n\n<p>This is my current Makefile template:</p>\n\n<pre><code># Compilation\nCXX = g++\nCXXFLAGS = -pedantic -Wall -c # -g -Wextra\n\nall: lbLog lbString\n\nlbLog:\n    $(CXX) $(CXXFLAGS) 'src/lbLog.cpp' -o lbLog.o\n    $(CXX) 'examples/lbLog_example.cpp' lbLog.o -o 'tests/lbLog_example'\n    rm lbLog.o\n\nlbString:\n    $(CXX) $(CXXFLAGS) 'src/lbString.cpp' -o lbString.o\n    $(CXX) 'examples/lbString_example.cpp' lbString.o -o 'tests/lbString_example'\n    rm lbString.o\n</code></pre>\n\n<p>Intended file structure is </p>\n\n<ul>\n<li>driver example files are in '/examples' (.cpp)</li>\n<li>sources/tools (.cpp) are in '/src'</li>\n<li>headers in '/include'</li>\n<li>output exe's in '/tests'</li>\n</ul>\n\n<p>So the question is, is there anyway to optimise the makefile, so I can virtually 'set and forget'? I don't want to have to add every new tool to the Makefile hopefully. Because it's such a repeating pattern, that there must be a way to smarten it up.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 2, "creation_date": 1436965011, "post_id": 31430953, "comment_id": 50832373, "body": "Your code is <b>very</b> unreadable. Start with proper indent, it might even help you"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5090717"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1436965568, "post_id": 31430953, "comment_id": 50832821, "body": "Every line of code is enough for itself. There are no multyple-line unities."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1436965765, "post_id": 31430953, "comment_id": 50832973, "body": "I know, but I don&#39;t want to spend extra time on reparse your code in my head, and I&#39;m sure I&#39;m not the only one in that case here. Thanks for re-indent ;)"}, {"owner": {"reputation": 13578, "user_id": 1328439, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CuI4k.jpg?s=128&g=1", "display_name": "Dmitri Chubarov", "link": "https://stackoverflow.com/users/1328439/dmitri-chubarov"}, "edited": false, "score": 1, "creation_date": 1436965775, "post_id": 31430953, "comment_id": 50832980, "body": "your code works for me. At what point in the code do you examine <code>sifre[j]</code> and <code>faktori[k]</code>?"}, {"owner": {"reputation": 794, "user_id": 1698991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mD2EI.png?s=128&g=1", "display_name": "jvdm", "link": "https://stackoverflow.com/users/1698991/jvdm"}, "edited": false, "score": 0, "creation_date": 1436966161, "post_id": 31430953, "comment_id": 50833281, "body": "The code seems to be correct, one side comment: one possible point of problem is the missing <code>podatak[i] = &#39;\\0&#39;</code> at the end of every parse loop instead of &quot;feel with spaces&quot;, because that configures a proper C string. In any case, I don&#39;t think any implementation of <code>atoi()</code> would continue parsing upon a <code>&#39; &#39;</code> (whitespace) and that&#39;s why your &quot;feel with spaces&quot; loop solution would suffice IMHO."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5090717"}, "edited": false, "score": 0, "creation_date": 1436966229, "post_id": 31430953, "comment_id": 50833333, "body": "I put break point at line before j++ and k++. Then I start program and input numbers 23 2 257 1. Then press enter and program stops. Values for j and k are 0. Values in sifre[j] and faktori[k] are 23 and 2. Then I press &quot;continue&quot;. Now j and k are 1. But values for sifre[j] and faktori[k] are still 23 and 2. I expect to be 257 and 1."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5090717"}, "edited": false, "score": 0, "creation_date": 1436966744, "post_id": 31430953, "comment_id": 50833704, "body": "I made change and put &#39;\\0&#39; at the end of char podatak[100]after every filling with &#39; &#39;. That doesn&#39;t change situation. I checked value of podatak. It is the same in the second iteration as in the first. Something there is not good."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1436966862, "post_id": 31430953, "comment_id": 50833799, "body": "Can you express in a sentence or two what your objective is with this code?  i.e. are you simply trying to split the input into the two arrays without including the spaces?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5090717"}, "edited": false, "score": 0, "creation_date": 1436967181, "post_id": 31430953, "comment_id": 50834076, "body": "I put four values in two arrays 23 in first array, then 2 in the second, then 257 in first and 1 in the second."}, {"owner": {"reputation": 163, "user_id": 4231034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa659a1eeeaecdec6ea8c415073aec1?s=128&d=identicon&r=PG&f=1", "display_name": "eroween", "link": "https://stackoverflow.com/users/4231034/eroween"}, "edited": false, "score": 0, "creation_date": 1436967685, "post_id": 31430953, "comment_id": 50834522, "body": "Are you sure you don&#39;t read sifre[0] &amp; faktori[0] when the second stop occur ? because you have fill sifre[1] &amp; faktori[1]."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5090717"}, "edited": false, "score": 0, "creation_date": 1436967942, "post_id": 31431884, "comment_id": 50834747, "body": "Yes. When I print field of the array good value is inside. This was misunderstanding of intelisense in Visual Studio 2013. When I debug in second iteration it shows {23} as in the first. It simply doesn&#39;t show correct value for arrayname[1]. It shows same as for arrayname[0]. Thanks everyone."}], "tags": [], "owner": {"reputation": 794, "user_id": 1698991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mD2EI.png?s=128&g=1", "display_name": "jvdm", "link": "https://stackoverflow.com/users/1698991/jvdm"}, "is_accepted": true, "score": 0, "last_activity_date": 1436967531, "last_edit_date": 1436967531, "creation_date": 1436967177, "answer_id": 31431884, "question_id": 31430953, "link": "https://stackoverflow.com/questions/31430953/why-getchar-doesnt-get-next-value-from-input/31431884#31431884", "title": "why getchar() doesn&#39;t get next value from input?", "body": "<p>This works with gcc 4.9.3:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n     int i, j, k, end;\n     char podatak[100];\n\n     int *sifre = malloc(100 * sizeof(int));\n     int *faktori = malloc(100 * sizeof(int));\n\n     j = k = 0;\n     do {\n          for (i = 0; (podatak[i] = getchar()) != ' '; ++i)\n               ;\n\n          podatak[i] = '\\0';\n          sifre[j++] = atoi(podatak);\n\n          for (i = 0; (end = podatak[i] = getchar()) != ' ' &amp;&amp; end != '\\n'; ++i)\n               ;\n\n          podatak[i] = '\\0';\n          faktori[k++] = atoi(podatak);\n     }\n     while (end != '\\n');\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5090717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 31431884, "answer_count": 1, "score": 0, "last_activity_date": 1436967531, "creation_date": 1436964756, "last_edit_date": 1436965692, "question_id": 31430953, "link": "https://stackoverflow.com/questions/31430953/why-getchar-doesnt-get-next-value-from-input", "title": "why getchar() doesn&#39;t get next value from input?", "body": "<p>I have two dinamicaly created arrays:</p>\n\n<pre><code>int *sifre = malloc(brkomp* sizeof(int));\nint *faktori = malloc(brkomp * sizeof(int));\n</code></pre>\n\n<p>and next part of code:</p>\n\n<pre><code>do {        \n    int i = 0;\n\n    while ((podatak[i] = getchar()) != ' ') \n    {\n        i++;\n    }\n    sifre[j] = atoi(podatak);\n\n    for (i = 0; i &lt; 100; i++)\n    {\n        podatak[i] = ' ';\n    }\n\n    i = 0;\n    while ((end = podatak[i] = getchar()) != ' ' &amp;&amp; end != '\\n') \n    {\n        i++;\n    }\n    faktori[k] = atoi(podatak);\n\n    for (i = 0; i &lt; 100; i++)\n    {\n        podatak[i] = ' ';\n    }\n    j++;\n    k++;\n} while (end != '\\n');\n</code></pre>\n\n<p>Input at console is like this:</p>\n\n<pre><code>23 2 257 1\n</code></pre>\n\n<p>When I debug after first iteration values of <code>sifre[j]</code> and <code>faktori[k]</code> are 23 and 2 respectively.\nBut after second iteration values are still the same. I expect 257 and 1.</p>\n\n<p>Why this doesn't work?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1436965790, "post_id": 31430884, "comment_id": 50832991, "body": "I can&#39;t reproduce your problem. What system are you on, what compiler and compilation options? For me, it&#39;s OS X 10, clang-602.0.53, options <code>-Wall -pedantic -std=gnu99</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1436965809, "post_id": 31430884, "comment_id": 50833006, "body": "Do you have by accident a trailing space in your input file?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1436965938, "post_id": 31431107, "comment_id": 50833108, "body": "<code>strtok</code> should replace the separator token (in this case, a <code>&#39;\\n&#39;</code>) by a NUL character, so the string is NUL terminated. From the man page: &quot;The strtok() and strtok_r() functions return a pointer to the beginning of each subsequent token in the string, after replacing the token itself with a NUL character.&quot;. So it should not be necessary to append a NUL character yourself. The <code>strncpy</code> option may work in case there happens to be a missed trailing space in the input file (but then the input file should have been sanitized, not the routine adjusted)."}, {"owner": {"reputation": 2649, "user_id": 2531910, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5dfbd56a0740e577f28bbc048cd77df2?s=128&d=identicon&r=PG", "display_name": "alifirat", "link": "https://stackoverflow.com/users/2531910/alifirat"}, "edited": false, "score": 0, "creation_date": 1436966130, "post_id": 31431107, "comment_id": 50833256, "body": "With <code>strncpy</code>, I didn&#39;t have the problem to put the NUL character at the end (and at the same occasion, thank you for the remark for the strtok function), this is why I put a NUL character at the end after the call to <code>strcpy</code>."}, {"owner": {"reputation": 1929, "user_id": 1783398, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6369d503a436016a8f3998033d6d1ee2?s=128&d=identicon&r=PG", "display_name": "Ziqi", "link": "https://stackoverflow.com/users/1783398/ziqi"}, "edited": false, "score": 0, "creation_date": 1436967764, "post_id": 31431107, "comment_id": 50834582, "body": "Thanks, very thorough explanation, my problem is solved!"}, {"owner": {"reputation": 2649, "user_id": 2531910, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5dfbd56a0740e577f28bbc048cd77df2?s=128&d=identicon&r=PG", "display_name": "alifirat", "link": "https://stackoverflow.com/users/2531910/alifirat"}, "edited": false, "score": 0, "creation_date": 1436967899, "post_id": 31431107, "comment_id": 50834714, "body": "You&#39;re welcome :) (can you mark the problem as solved if my answer is the good one please)"}], "tags": [], "owner": {"reputation": 2649, "user_id": 2531910, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5dfbd56a0740e577f28bbc048cd77df2?s=128&d=identicon&r=PG", "display_name": "alifirat", "link": "https://stackoverflow.com/users/2531910/alifirat"}, "is_accepted": true, "score": 0, "last_activity_date": 1436965441, "last_edit_date": 1436965441, "creation_date": 1436965139, "answer_id": 31431107, "question_id": 31430884, "link": "https://stackoverflow.com/questions/31430884/c-reading-string-content-from-file-and-compare-equality/31431107#31431107", "title": "C reading string content from file and compare equality", "body": "<p>I try the following things and I replace the call of <code>strcpy</code> by <code>strncpy</code>. Your initial problem was the '\\0' at the end of <code>st1</code> variable. So you can do this :   </p>\n\n<pre><code>  while (entity != NULL) {\n    strncpy(st1, entity,strlen(entity)-1); //copy the value from the char pointer entity to the char array st1 so we can compare with other strings\n\n    printf(\"%s\\n\", st1);  //this prints london, ....\n\n    if(!strcmp(st1,\"london\"))\n        printf(\"equals\\n\");  //I was expecting this..\n    else\n        printf(\"unequal\\n\"); //but i got this...\n    entity = strtok(NULL, \"\\n\");\n  }\n</code></pre>\n\n<p>Or the other solution is to put the '\\0' yourself at the end of <code>st1</code> like this :</p>\n\n<pre><code>strcpy(st1, entity);\nst1[strlen(entity)-1] = '\\0';\n</code></pre>\n\n<p>I test the both and it's working. </p>\n"}], "owner": {"reputation": 1929, "user_id": 1783398, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6369d503a436016a8f3998033d6d1ee2?s=128&d=identicon&r=PG", "display_name": "Ziqi", "link": "https://stackoverflow.com/users/1783398/ziqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1973, "favorite_count": 0, "accepted_answer_id": 31431107, "answer_count": 1, "score": 0, "last_activity_date": 1436971175, "creation_date": 1436964565, "last_edit_date": 1436971175, "question_id": 31430884, "link": "https://stackoverflow.com/questions/31430884/c-reading-string-content-from-file-and-compare-equality", "title": "C reading string content from file and compare equality", "body": "<p>I am reading content from a file and I am expecting to look for a particular value, say \"london\". for this I am reading the content, tokenize it by \"\\n\", then compare each value against \"london\" using \"strcmp\". </p>\n\n<p>But I think I still do not understand how C stores data and does comparison and therefore my code below does not work as i expect. I guess I am missing some fundamental knowledge of C here, please help:</p>\n\n<p>TEST COMMAND LINE:</p>\n\n<pre><code>./myprogram datafile.txt \"london\"\n</code></pre>\n\n<p>INPUT datafile.txt:</p>\n\n<pre><code>london\nmanchester\nbritain\n...\n</code></pre>\n\n<p>CODE myprogram.c:</p>\n\n<pre><code>int main(int argc, char **argv) {\n  FILE* fl;\n  char st1[2000];\n  char * buffer = 0;\n  long length;\n\n  fl = fopen (argv[1], \"r\"); //the data file content is shown above\n  if (fl){\n    fseek (fl, 0, SEEK_END);\n    length = ftell (fl);\n    fseek (fl, 0, SEEK_SET);\n    buffer = malloc (length+1);\n    if (buffer){\n        //fread (buffer, 1, length, fl);\n        fread(buffer, sizeof(char), length, fl);\n        buffer[length] = '\\0';\n    }\n  fclose (fl);    \n  }else{\n    printf(\"data file not found\");\n    return -1;\n  }  \n\n\n  //firstly let's compare the value passed by command line with \"london\"\n  strcpy(st1, argv[2]); \n  if(strcmp(st1,\"london\")==0)\n    printf(\"equals\\n\");  //as expected, I get \"equals\" printed\n  else\n    printf(\"unequal\\n\");\n\n\n  //now let's compare the values extracted from the data file, \n  char* entity = strtok(buffer, \"\\n\"); \n  while (entity != NULL) {\n    strcpy(st1, entity); //copy the value from the char pointer entity to the char array st1 so we can compare with other strings\n\n    printf(\"%s\\n\", st1);  //this prints london, ....\n\n    if(strcmp(st1,\"london\")==0)\n        printf(\"equals\\n\");  //I was expecting this..\n    else\n        printf(\"unequal\\n\"); //but i got this...\n    entity = strtok(NULL, \"\\n\");\n  }\n  return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>I am expecting output from the above program to be:</p>\n\n<pre><code>equals\nlondon\nequals\nmanchester\nunequal\nbritain\nunequal\n...\n</code></pre>\n\n<p>but I dont understand why I am getting</p>\n\n<pre><code>equals\nlondon\nunequal  &lt;=============== why and how to fix?\nmanchester\nunequal\nbritain\nunequal\n...\n</code></pre>\n\n<p>And how should I change it so the value \"london\" read from the file equals the actual \"string\" of \"london\"?</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["c", "linux", "ubuntu", "makefile", "arduino"], "comments": [{"owner": {"reputation": 21, "user_id": 5119433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032a42806abb13d821458c2f1323abbc?s=128&d=identicon&r=PG&f=1", "display_name": "mook", "link": "https://stackoverflow.com/users/5119433/mook"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436964536, "post_id": 31430786, "comment_id": 50831983, "body": "I did, i updated the text."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436964757, "post_id": 31430786, "comment_id": 50832173, "body": "Do you have that directory? Does that directory match your kernel? Does this module come with any documentation?"}, {"owner": {"reputation": 21, "user_id": 5119433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032a42806abb13d821458c2f1323abbc?s=128&d=identicon&r=PG&f=1", "display_name": "mook", "link": "https://stackoverflow.com/users/5119433/mook"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436965079, "post_id": 31430786, "comment_id": 50832426, "body": "it has a readme file but is very short. it says &quot;2.Current Driver support versions of linux kernel range from 2.6.25 to 3.13.x&quot; but my kerel is 3.8.x..any way to make it work?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436965263, "post_id": 31430786, "comment_id": 50832564, "body": "That&#39;s within the range so that should work. Does that directory exist? Do you just need to install the kernel development headers?"}, {"owner": {"reputation": 21, "user_id": 5119433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032a42806abb13d821458c2f1323abbc?s=128&d=identicon&r=PG&f=1", "display_name": "mook", "link": "https://stackoverflow.com/users/5119433/mook"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436965549, "post_id": 31430786, "comment_id": 50832800, "body": "no there is no build folder in /lib/modules/3.8.11 I updated the question again with some documentation info. it might help"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436965733, "post_id": 31430786, "comment_id": 50832945, "body": "What version of ubuntu is this? From the website it looks like 12.04 shipped with a 3.11.0 kernel (or at least ended on that kernel)."}, {"owner": {"reputation": 21, "user_id": 5119433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032a42806abb13d821458c2f1323abbc?s=128&d=identicon&r=PG&f=1", "display_name": "mook", "link": "https://stackoverflow.com/users/5119433/mook"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436965813, "post_id": 31430786, "comment_id": 50833013, "body": "this is Trusty (i think 14.04) with XFCE"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436966013, "post_id": 31430786, "comment_id": 50833171, "body": "How do you have a 3.8.11 kernel on trusty? What does <code>uname -a</code> output?"}, {"owner": {"reputation": 21, "user_id": 5119433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032a42806abb13d821458c2f1323abbc?s=128&d=identicon&r=PG&f=1", "display_name": "mook", "link": "https://stackoverflow.com/users/5119433/mook"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436966404, "post_id": 31430786, "comment_id": 50833459, "body": "Linux localhost 3.8.11 #1 SMP Mon Jul 13 22:34:31 PDT 2015 x86_64 x86_64 x86_64 GNU/Linux  ....btw i am running this on a chromebook using crouton. I specified trusty and XFCE"}, {"owner": {"reputation": 21, "user_id": 5119433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032a42806abb13d821458c2f1323abbc?s=128&d=identicon&r=PG&f=1", "display_name": "mook", "link": "https://stackoverflow.com/users/5119433/mook"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436966744, "post_id": 31430786, "comment_id": 50833703, "body": "maybe it fails because I need a build directory. How can I get that"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436967109, "post_id": 31430786, "comment_id": 50834012, "body": "Ah, so some odd build of ubuntu then most likely. I would expect one of the kernel/linux header/devel packages to provide it but I don&#39;t know. You could try just creating it manually but that may not be a good idea."}, {"owner": {"reputation": 21, "user_id": 5119433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032a42806abb13d821458c2f1323abbc?s=128&d=identicon&r=PG&f=1", "display_name": "mook", "link": "https://stackoverflow.com/users/5119433/mook"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436967270, "post_id": 31430786, "comment_id": 50834156, "body": "how should I install those packages"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1436968445, "post_id": 31430786, "comment_id": 50835158, "body": "I don&#39;t know which package it would be offhand. I tried looking but didn&#39;t find it easily and I don&#39;t do kernel development to know how this is supposed to work. You could try looking for more general kernel/module development documentation to see if it says."}], "answers": [{"tags": [], "owner": {"reputation": 8367, "user_id": 44532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4Qf5j.jpg?s=128&g=1", "display_name": "Oliver Friedrich", "link": "https://stackoverflow.com/users/44532/oliver-friedrich"}, "is_accepted": false, "score": -1, "last_activity_date": 1449045420, "creation_date": 1449045420, "answer_id": 34038126, "question_id": 31430786, "link": "https://stackoverflow.com/questions/31430786/how-to-install-c-and-makefile-drivers-on-ubuntu-14-04/34038126#34038126", "title": "How to install .c and Makefile drivers on ubuntu 14.04", "body": "<p>You have to read the readme.txt, it states, that you actually perform the commands as root.</p>\n\n<pre><code>#sudo make\n#sudo make load\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 3579519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6reA1.jpg?s=128&g=1", "display_name": "skoocda", "link": "https://stackoverflow.com/users/3579519/skoocda"}, "is_accepted": false, "score": 1, "last_activity_date": 1453404963, "creation_date": 1453404963, "answer_id": 34932766, "question_id": 31430786, "link": "https://stackoverflow.com/questions/31430786/how-to-install-c-and-makefile-drivers-on-ubuntu-14-04/34932766#34932766", "title": "How to install .c and Makefile drivers on ubuntu 14.04", "body": "<p>This seems to be a crouton-specific issue. Here's the apparent fix:</p>\n\n<p>First you will need to have support for https, it isn't installed by default when creating a chroot with crouton. So install the following package.</p>\n\n<pre><code>sudo apt-get install apt-transport-https\n</code></pre>\n\n<p>Now you need to add my public key because I signed the packages. Do that with the following command.</p>\n\n<pre><code>wget -O - \"https://raw.github.com/divx118/crouton-packages/master/mauricevankruchten@gmail.com.gpg.key\" | sudo apt-key add -\n</code></pre>\n\n<p>Adding the apt repo to your sources.list</p>\n\n<pre><code>sudo vi /etc/apt/sources.list\n</code></pre>\n\n<p>Add the following line in the file.</p>\n\n<pre><code>deb https://raw.github.com/divx118/crouton-packages/master/ saucy main\n</code></pre>\n\n<p>Then you should be able to run these commands to fix the headers</p>\n\n<pre><code>sudo apt-get update\nsudo umount /lib/modules/3.8.11\nsudo apt-get install linux-headers-3.8.11\nsudo apt-get install linux-image-3.8.11\n</code></pre>\n\n<p>Note: that I only tested it on saucy for now. This should work for the HP chromebook 14, Acer C720 and the Dell 11.</p>\n\n<p>SOURCE:\n <a href=\"https://github.com/dnschneid/crouton/issues/772#issuecomment-40894248\" rel=\"nofollow\">https://github.com/dnschneid/crouton/issues/772#issuecomment-40894248</a></p>\n"}, {"tags": [], "owner": {"reputation": 973, "user_id": 1734032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/69zJo.jpg?s=128&g=1", "display_name": "mckenzm", "link": "https://stackoverflow.com/users/1734032/mckenzm"}, "is_accepted": false, "score": 0, "last_activity_date": 1458645134, "last_edit_date": 1458645134, "creation_date": 1458644462, "answer_id": 36152624, "question_id": 31430786, "link": "https://stackoverflow.com/questions/31430786/how-to-install-c-and-makefile-drivers-on-ubuntu-14-04/36152624#36152624", "title": "How to install .c and Makefile drivers on ubuntu 14.04", "body": "<p>The code has been updated. I had the same errors.\nThere is a better version <a href=\"http://www.wch.cn/downfile/177\" rel=\"nofollow\">here</a>.<br>\nCheck line 18 of the readme file :</p>\n\n<pre><code>// 1.2 - 1.3 Fix some bugs\n</code></pre>\n\n<p>The source I used was dated <code>12Sep2015 09:30</code>, also use the <code>new Makefile</code> and <code>make clean</code> first.   </p>\n"}], "owner": {"reputation": 21, "user_id": 5119433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032a42806abb13d821458c2f1323abbc?s=128&d=identicon&r=PG&f=1", "display_name": "mook", "link": "https://stackoverflow.com/users/5119433/mook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10481, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1527039827, "creation_date": 1436964329, "last_edit_date": 1436965923, "question_id": 31430786, "link": "https://stackoverflow.com/questions/31430786/how-to-install-c-and-makefile-drivers-on-ubuntu-14-04", "title": "How to install .c and Makefile drivers on ubuntu 14.04", "body": "<p>I am a newbie.\nI am trying to install CH340 drivers on Ubuntu 14.04 and I don't know where to start. this is a driver for arduino clone\nThe folder has a Makefile and ch34x.c.\nI tried to compile the ch34x.c with GCC and got an error. </p>\n\n<pre><code>~/Downloads/CH341SER_LINUX$ gcc -o driver ch34x.c\nch34x.c:20:24: fatal error: linux/init.h: No such file or directory\n #include &lt;linux/init.h&gt;\n                        ^\ncompilation terminated.\n</code></pre>\n\n<p>when running make in the directory i get:</p>\n\n<pre><code>make -C /lib/modules/3.8.11/build  M=/home/mko/Downloads/CH341SER_LINUX  \nmake: *** /lib/modules/3.8.11/build: No such file or directory.  Stop.\nmake: *** [default] Error 2\n</code></pre>\n\n<p>documentation info: </p>\n\n<pre><code>Instructions\n\nNote: 1.Please run followed executable programs as root privilege\n      2.Current Driver support versions of linux kernel range from 2.6.25 to 3.9.10\n      3.Current Driver support 32bits and 64bits linux systems\n\nUsage:\n    (load or unload linux driver of CH34x)\n    //compile \n    #make\n    //load ch34x chips driver\n    #make load\n    //unload ch34x chips driver\n    #make unload\n</code></pre>\n\n<p>I checked my kernel version using \"uname -r\" and got 3.8.11</p>\n"}, {"tags": ["c", "windows", "audio", "audio-recording"], "comments": [{"owner": {"reputation": 1152, "user_id": 2164304, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/n6m6j.jpg?s=128&g=1", "display_name": "OverCoder", "link": "https://stackoverflow.com/users/2164304/overcoder"}, "edited": false, "score": 0, "creation_date": 1436965060, "post_id": 31430501, "comment_id": 50832407, "body": "I am not the OP, but why this was downvoted? I am really interested in such question"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4134746, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-Wzd8tUoWbac/AAAAAAAAAAI/AAAAAAAAQA8/OyYcO-iZHyM/photo.jpg?sz=128", "display_name": "yagev", "link": "https://stackoverflow.com/users/4134746/yagev"}, "edited": false, "score": 0, "creation_date": 1436973858, "post_id": 31431195, "comment_id": 50839221, "body": "I&#39;ll try saving the code inside the loop. I do have succesful experience with writing to WAV files with libsndfile.h. The problem is that I can&#39;t determine if I am &quot;translating&quot; the sampled data correctly or if the sampled data is even valid."}, {"owner": {"reputation": 23, "user_id": 5115793, "user_type": "registered", "profile_image": "https://graph.facebook.com/863081903739981/picture?type=large", "display_name": "Sam McInnis", "link": "https://stackoverflow.com/users/5115793/sam-mcinnis"}, "reply_to_user": {"reputation": 79, "user_id": 4134746, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-Wzd8tUoWbac/AAAAAAAAAAI/AAAAAAAAQA8/OyYcO-iZHyM/photo.jpg?sz=128", "display_name": "yagev", "link": "https://stackoverflow.com/users/4134746/yagev"}, "edited": false, "score": 0, "creation_date": 1436989181, "post_id": 31431195, "comment_id": 50848541, "body": "The noise concern would require a filtering solution. If you are plugging the mic into your PC, odds are creating a multi-pole notch active filter using op-amps is not the way to go. The author of the website at <a href=\"http://www.iowahills.com/A7ExampleCodePage.html\" rel=\"nofollow noreferrer\">link</a> did a pretty good job of explaining the concept."}], "tags": [], "owner": {"reputation": 23, "user_id": 5115793, "user_type": "registered", "profile_image": "https://graph.facebook.com/863081903739981/picture?type=large", "display_name": "Sam McInnis", "link": "https://stackoverflow.com/users/5115793/sam-mcinnis"}, "is_accepted": false, "score": 0, "last_activity_date": 1436965374, "last_edit_date": 1495535060, "creation_date": 1436965374, "answer_id": 31431195, "question_id": 31430501, "link": "https://stackoverflow.com/questions/31430501/capture-and-analyze-audio-on-windows-using-c/31431195#31431195", "title": "Capture and analyze audio on windows using C", "body": "<p><a href=\"https://stackoverflow.com/questions/12438115/how-to-save-audio-data-in-memory-as-a-wav-file\">Previous question for saving a WAV file.</a> There are a couple recommendations in the answers that you may want to pursue. Assuming your recording is actually occurring, you would want to place your code to save the recorded data inside the DO-WHILE loop right at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 4134746, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-Wzd8tUoWbac/AAAAAAAAAAI/AAAAAAAAQA8/OyYcO-iZHyM/photo.jpg?sz=128", "display_name": "yagev", "link": "https://stackoverflow.com/users/4134746/yagev"}, "is_accepted": false, "score": 0, "last_activity_date": 1437289468, "creation_date": 1437289468, "answer_id": 31498795, "question_id": 31430501, "link": "https://stackoverflow.com/questions/31430501/capture-and-analyze-audio-on-windows-using-c/31498795#31498795", "title": "Capture and analyze audio on windows using C", "body": "<p>After a lot tinkering and testing, I gave up on using the windows API for this purpose and decided to go with <a href=\"http://portaudio.com/\" rel=\"nofollow\">PortAudio</a>.\nThey have several examples that tackle the problem.\nI took one of PA examples and modified it so it fit my needs, and combined it with <a href=\"http://www.mega-nerd.com/libsndfile/\" rel=\"nofollow\">libsndfile</a> based function for <a href=\"http://www.labbookpages.co.uk/audio/wavFiles.html\" rel=\"nofollow\">saving WAV files</a>.\nThis is a great low level solution.</p>\n\n<p>In addition, if someone is looking for a high level solution for audio recording (with no control on sample rate and such), I recommend this <a href=\"http://www.codeproject.com/Articles/67568/Creating-a-Sound-Recorder-in-C-and-C\" rel=\"nofollow\">MCI based solution</a>.</p>\n\n<p>Thanks:)</p>\n"}], "owner": {"reputation": 79, "user_id": 4134746, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-Wzd8tUoWbac/AAAAAAAAAAI/AAAAAAAAQA8/OyYcO-iZHyM/photo.jpg?sz=128", "display_name": "yagev", "link": "https://stackoverflow.com/users/4134746/yagev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1291, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1437289468, "creation_date": 1436963576, "last_edit_date": 1436968531, "question_id": 31430501, "link": "https://stackoverflow.com/questions/31430501/capture-and-analyze-audio-on-windows-using-c", "title": "Capture and analyze audio on windows using C", "body": "<p>I am building a program that requires recording audio and analyze it in real time or semi-real time (record short audio bits and analyze them one recording at the time).</p>\n\n<p>I wrote the code for open and analyze WAV files (using libsndfile library).</p>\n\n<p>Now I am having trouble in writing the code for recording from the PC mic and save it to a buffer/WAV file.\nI tried using this sample - <a href=\"http://www.techmind.org/wave/\" rel=\"nofollow\">http://www.techmind.org/wave/</a>. But I could not figure  out how to save the recorded buffer to WAV or how to use the recorded data itself.</p>\n\n<p>The project's requirements are to write it in C and on windows.</p>\n\n<p>I am looking for an efficient library for this purpose.</p>\n\n<hr>\n\n<p><strong><em>Edit</em></strong>: I managed to save the data as WAV the data after converting it from 16 bit to double using this code:</p>\n\n<pre><code>for (int i = 0; i &lt; size; i += 2)\n{\n    int c = (waveIn[i + 1] &lt;&lt; 8) | waveIn[i];\n    double t = c / 32768.0;\n    data[i] = t;\n}\n</code></pre>\n\n<p>However, the recording is very noisey and unclear. Any suggestions?</p>\n\n<hr>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "sparse-matrix", "matrix-multiplication", "intrinsics", "avx2"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 3, "creation_date": 1436963030, "post_id": 31430198, "comment_id": 50830865, "body": "Basically, gather sucks."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 2, "creation_date": 1436964367, "post_id": 31430198, "comment_id": 50831847, "body": "What @harold said: gathered loads are horribly inefficient and will kill performance unless you&#39;re doing enough computation afterwards to amortise the initial cost of the loads. You might as well just stick to scalar code for this."}, {"owner": {"reputation": 11165, "user_id": 848177, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb6cf63ab055264f2c62c8561769ba31?s=128&d=identicon&r=PG", "display_name": "Marat Dukhan", "link": "https://stackoverflow.com/users/848177/marat-dukhan"}, "edited": false, "score": 2, "creation_date": 1436974130, "post_id": 31430198, "comment_id": 50839410, "body": "Emulate gathers with <code>_mm_move_sd</code> + <code>_mm_loadh_pd</code>. On Haswell it is faster than hardware gather."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 3, "creation_date": 1437031532, "post_id": 31430198, "comment_id": 50863928, "body": "By far the most important improvement for sparse matrix multiplication is <a href=\"https://stackoverflow.com/questions/29603982/cholesky-decomposition-of-sparse-matrices-using-permutation-matrices\">the permutation matrix</a>. This is going to speed up your code far more than SIMD can. Without a good permutation matrix you risk a lot of fill in and far more computations than necessary (i.e. sparse*sparse may equal dense). It&#39;s a NP hard problem so there are many heuristic methods to determine the permutation matrix. It&#39;s a complicated problem. You don&#39;t have to reinvent just one wheel but many!"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1437031626, "post_id": 31430198, "comment_id": 50863985, "body": "<a href=\"http://stackoverflow.com/a/30526005/2542702\">Using Eigen I got a huge speedup</a> compared to my own dense solver using AVX (although my dense solver managed to still beat many other sparse solvers in speed)"}, {"owner": {"reputation": 135, "user_id": 1130612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24007f0945d138b4f4c9f45d49e67d36?s=128&d=identicon&r=PG", "display_name": "chhu79", "link": "https://stackoverflow.com/users/1130612/chhu79"}, "edited": false, "score": 0, "creation_date": 1437035211, "post_id": 31430198, "comment_id": 50866031, "body": "The matrices I&#39;m usually solving with this are around 10-60 million rows with around 40 col entries per row and run on 10k+ cores. So direct solvers are out, unfortunately. For iterative solvers you mostly need dot products and mat-vec mul, that&#39;s why any speedup there would be beneficial..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1437036292, "post_id": 31430198, "comment_id": 50866703, "body": "Isn&#39;t there a sparse format that duplicates data, so you can access rows or columns contiguously?  I added a paragraph about that in my answer.  Or maybe I should make that a new answer for the other topic."}], "answers": [{"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1437031833, "post_id": 31445098, "comment_id": 50864106, "body": "You mean Skylake AVX2 gather will be fast-still than Broadwell gather? Or do you mean AVX512 gather will be faster-still than Broadwell? Skylake won&#39;t have AVX512 except for Xeon processors. Do you have a source for your statements in your last paragraph?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1437033413, "post_id": 31445098, "comment_id": 50865003, "body": "Hmm, I forget whether what I read about Skylake AVX2 gather improvements was speculation or sourced.  It&#39;s a pretty obvious thing to improve in a &quot;tock&quot;, assuming there&#39;s room for improvement without spending too many transistors.  I&#39;ll see if I can find what I was remembering."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1437033779, "post_id": 31445098, "comment_id": 50865226, "body": "I saw <a href=\"http://arstechnica.com/gadgets/2015/07/intel-confirms-tick-tock-shattering-kaby-lake-processor-as-moores-law-falters/\" rel=\"nofollow noreferrer\">this</a> today. I guess tick-tock is over. There will be another 14nm processor next year called Kaby Lake. Maybe that will have AVX512 (instead of tick-tock it should be called tick tick tock)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1437035999, "post_id": 31445098, "comment_id": 50866506, "body": "I changed my answer to not predict anything skylake.  I&#39;d read that too, about Kaby Lake.  &quot;tock&quot; is a new arch on the same process, so it would be &quot;tick tock tock&quot;, I guess.  IDK why Intel chose to call the names that way around, since the pattern started with a new microarch (Core2).  Maybe it wasn&#39;t a &quot;pattern&quot; until the 2nd entry: the Penryn &quot;tick&quot;."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 9, "last_activity_date": 1437036171, "last_edit_date": 1437036171, "creation_date": 1437018826, "answer_id": 31445098, "question_id": 31430198, "link": "https://stackoverflow.com/questions/31430198/avx2-sparse-matrix-multiplication/31445098#31445098", "title": "AVX2 sparse matrix multiplication", "body": "<p>Gather on Haswell is slow.  I implemented an 8-bit-index LUT lookup of 16bit values (for GF16 multiply for par2) in a few different ways, to find out what's fastest.  On Haswell, the <code>VPGATHERDD</code> version took 1.7x as long as the <code>movd / pinsrw</code> version.  (Only a couple <code>VPUNPCK</code> / shift instructions were needed beyond the gathers.)   <a href=\"https://github.com/pcordes/par2-asm-experiments\" rel=\"nofollow\">code here, if anyone wants to run the benchmark</a>.</p>\n\n<p>As is common when an instruction is first introduced, they don't dedicate a huge amount of silicon to making it super-fast.  It's there just to get HW support out there, so code can be written to use it.  For ideal performance on all CPUs, then you need to do what x264 did for <code>pshufb</code>: have a <code>SLOW_SHUFFLE</code> flag for CPUs like Core2, and factor that into your best-routine-finding function-pointer-setting, rather than just what insns a CPU supports.</p>\n\n<p>For projects less fanatical about having asm versions tuned for every CPU they can run on, introducing a no-speedup version of an instruction will get people using it sooner, so when the next design comes along and its fast, more code speeds up.  Releasing a design like Haswell where gather is actually a slowdown is a little dicey.  Maybe they wanted to see how people would use it?  It does increase code density, which helps when the gather isn't in a tight loop.</p>\n\n<p>Broadwell is supposed to have a faster gather implementation, but I don't have access to one.  The Intel manual that lists latency/throughput for instructions says Broadwell's gather is about 1.6x faster, so it would still be slightly slower than a hand-crafted loop that shifts/unpacks the indices in GP regs, and uses them for <code>PINSRW</code> into vectors.</p>\n\n<p>If <code>gather</code> could take advantage of cases where multiple elements had the same index, or even an index that pointed to the same 32B fetch block, there could be some big speedups depending on the input data.</p>\n\n<p>Hopefully Skylake will improve even further.  I thought I'd read something saying that it would, but on checking, I didn't find anything.</p>\n\n<p>RE: sparse matrices: isn't there a format that duplicates the data, so you can do contiguous reads for rows or columns?  It's not something I've had to write code for, but I think I've seen mention of it in some answers.</p>\n"}], "owner": {"reputation": 135, "user_id": 1130612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24007f0945d138b4f4c9f45d49e67d36?s=128&d=identicon&r=PG", "display_name": "chhu79", "link": "https://stackoverflow.com/users/1130612/chhu79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1899, "favorite_count": 1, "accepted_answer_id": 31445098, "answer_count": 1, "score": 6, "last_activity_date": 1437036171, "creation_date": 1436962706, "question_id": 31430198, "link": "https://stackoverflow.com/questions/31430198/avx2-sparse-matrix-multiplication", "title": "AVX2 sparse matrix multiplication", "body": "<p>I'm trying to leverage the new AVX2 GATHER instructions to speed up a sparse matrix - vector multiplication. The matrix is in CSR (or Yale) format with a row pointer that points to a column index array which in turn holds the columns. \nThe C code for such a mat-vec mul does look like this:</p>\n\n<pre><code>for (int row = 0; row &lt; n_rows - 1; row++) {\n    double rowsum = 0;\n    for (int col = row_ptr[row]; col &lt; row_ptr[row + 1]; col++) {\n        rowsum += values[col] * x[col_indices[col]];\n    }\n    result[row] = rowsum;\n}\n</code></pre>\n\n<p>Now my goal is to accelerate this with AVX2 intrinsics. The following code works with latest Intel or GCC, based on <a href=\"https://blog.fox-toolkit.org/?p=174\">https://blog.fox-toolkit.org/?p=174</a> . I removed the remainder here because my rows all align on 4 doubles (columns % 4==0) anyway (lucky me). I have the code dealing with remainder too if someone is interested, but the point is, the code is actually slightly slower. I checked the disassembly and for the above version only FP instructions are generated and for my AVX2 code all AVX2 ops appear as expected. Even with small matrices that fit into the cache the AVX2 version is no good. I'm puzzled here...</p>\n\n<pre><code>double* value_base = &amp;values[0];\ndouble* x_base = &amp;x[0];\nint*    index_base = &amp;col_indices[0];\n\n\nfor (int row = 0; row &lt; n_rows - 1; row++) {\n    int col_length   = row_ptr[row + 1] - row_ptr[row];\n\n    __m256d rowsum = _mm256_set1_pd(0.);\n    for (int col4 = 0; col4 &lt; col_length; col4 += 4) {\n        // Load indices for x vector(const __m128i*)\n        __m128i idxreg     = _mm_load_si128((const __m128i*)index_base);\n        // Load 4 doubles from x indexed by idxreg (AVX2)\n        __m256d x_     = _mm256_i32gather_pd(x_base, idxreg, 8);\n        // Load 4 doubles linear from memory (value array)\n        __m256d v_     = _mm256_load_pd(value_base);\n        // FMA: rowsum += x_ * v_\n        rowsum = _mm256_fmadd_pd(x_, v_, rowsum);\n\n        index_base += 4;\n        value_base += 4;\n    }\n    __m256d s = _mm256_hadd_pd(rowsum, rowsum);\n    result[row] = ((double*)&amp;s)[0] + ((double*)&amp;s)[2];\n    // Alternative (not faster):\n    // Now we split the upper and lower AVX register, and do a number of horizontal adds\n    //__m256d hsum = _mm256_add_pd(rowsum, _mm256_permute2f128_pd(rowsum, rowsum, 0x1));\n    //_mm_store_sd(&amp;result[row], _mm_hadd_pd( _mm256_castpd256_pd128(hsum), _mm256_castpd256_pd128(hsum) ) );\n}\n</code></pre>\n\n<p>Any suggestions are welcome. </p>\n\n<p>Thanks a lot,\nChris</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436962017, "post_id": 31429707, "comment_id": 50830126, "body": "What is a, is it an array?"}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436962109, "post_id": 31429707, "comment_id": 50830182, "body": "int a[100];I declared max 100 so mine is: a[max];"}, {"owner": {"reputation": 123, "user_id": 4669638, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oBB9SaJz_yw/AAAAAAAAAAI/AAAAAAAAAFQ/lo7iKKnkMw0/photo.jpg?sz=128", "display_name": "Nitish Garg", "link": "https://stackoverflow.com/users/4669638/nitish-garg"}, "edited": false, "score": 0, "creation_date": 1436962138, "post_id": 31429707, "comment_id": 50830202, "body": "You want to overwrite the original array itself or do you want to preserve the original array and just output 1,3,4,1,4... sequence to the screen?"}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 1, "creation_date": 1436962389, "post_id": 31429707, "comment_id": 50830384, "body": "Even your input loop doesn&#39;t work. You need <code>scanf(&quot;%d&quot;, &amp;a[i]);</code>. Furthermore your question should use <code>b[i]</code> instead of <code>a[j]</code> (or it is a completely different task, called &quot;in place&quot;)"}, {"owner": {"reputation": 817, "user_id": 4612127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77e5b33fd361733419766d29957eb203?s=128&d=identicon&r=PG&f=1", "display_name": "kaldoran", "link": "https://stackoverflow.com/users/4612127/kaldoran"}, "edited": false, "score": 0, "creation_date": 1436962403, "post_id": 31429707, "comment_id": 50830398, "body": "Don&#39;t understande what&#39;s a[i] mean. a is an array so a[i] is a element of a, e.g  <code>a[0] = 1;</code>  So you want to recreate a new array for exemple b,  where for example :  <code>a = [1, 1, 1];</code> <code>b = [1, 3];</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436962614, "post_id": 31429707, "comment_id": 50830557, "body": "@DemonSlayer What are a[i] and a[j] in your example?:)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436962776, "post_id": 31429707, "comment_id": 50830690, "body": "@Dante &quot;What is a...?&quot; I think it is the first letter of the alphabet is not it?.:)"}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436963127, "post_id": 31429707, "comment_id": 50830939, "body": "I changed the code into this: printf (&quot;insert group of numbers&quot;);     for(i=0; i&lt;n; i++){         scanf(&quot;%d&quot;, &amp;a);     }     for (i=0; i&lt;n; i++){      if (a[i] == 1 &amp;&amp; demon == 0){         b[i] = a[i];         demon++;     }else if (a[i] == 1 &amp;&amp; demon &gt; 0){               demon++;      }else if(a[i] != 1 &amp;&amp; demon &gt; 0){     b[i] = demon;     demon = 0;     }"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436963173, "post_id": 31429707, "comment_id": 50830978, "body": "@DemonSlayer If a is an array then how can  a[j]= a set of values a[j] can only contain a single number."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436963230, "post_id": 31429707, "comment_id": 50831022, "body": "@VladfromMoscow Pity guys like you, go to a mock show, u will not fail there."}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436963543, "post_id": 31429707, "comment_id": 50831241, "body": "@Dante, i edited my code but it&#39;s still not working.."}, {"owner": {"reputation": 123, "user_id": 4669638, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oBB9SaJz_yw/AAAAAAAAAAI/AAAAAAAAAFQ/lo7iKKnkMw0/photo.jpg?sz=128", "display_name": "Nitish Garg", "link": "https://stackoverflow.com/users/4669638/nitish-garg"}, "edited": false, "score": 0, "creation_date": 1436963581, "post_id": 31429707, "comment_id": 50831270, "body": "I have written an edit, can someone approve it?"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436963695, "post_id": 31429707, "comment_id": 50831347, "body": "@DemonSlayer I still guessing what u want. Do you want to build a new array from original given array such that the output array looks like  1,3,4,1.....and so on."}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 123, "user_id": 4669638, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oBB9SaJz_yw/AAAAAAAAAAI/AAAAAAAAAFQ/lo7iKKnkMw0/photo.jpg?sz=128", "display_name": "Nitish Garg", "link": "https://stackoverflow.com/users/4669638/nitish-garg"}, "edited": false, "score": 0, "creation_date": 1436963699, "post_id": 31429707, "comment_id": 50831349, "body": "@Nitish Garg, Thanks nitish, I approved."}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436963800, "post_id": 31429707, "comment_id": 50831416, "body": "@Dante yes. I actually create a new array B[i] and import things from a[i] but when a number happens more than one times I write the number, and how much times it happened like this: 1,1,1,1,1 it  in b become 1,5."}, {"owner": {"reputation": 123, "user_id": 4669638, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oBB9SaJz_yw/AAAAAAAAAAI/AAAAAAAAAFQ/lo7iKKnkMw0/photo.jpg?sz=128", "display_name": "Nitish Garg", "link": "https://stackoverflow.com/users/4669638/nitish-garg"}, "edited": false, "score": 0, "creation_date": 1436963827, "post_id": 31429707, "comment_id": 50831438, "body": "@DemonSlayer do you want to overwrite the original array itself or do you want to preserve the original array and just output 1,3,4,1,4... sequence to the screen?"}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 123, "user_id": 4669638, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oBB9SaJz_yw/AAAAAAAAAAI/AAAAAAAAAFQ/lo7iKKnkMw0/photo.jpg?sz=128", "display_name": "Nitish Garg", "link": "https://stackoverflow.com/users/4669638/nitish-garg"}, "edited": false, "score": 0, "creation_date": 1436963920, "post_id": 31429707, "comment_id": 50831527, "body": "@Nitish Garg, I want it to write on another array. For example in b[i]."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436963946, "post_id": 31429707, "comment_id": 50831546, "body": "@DemonSlayer Is it ok to assume that length of B is equal to a or first u want to calculate the exact number of elements in B to save space."}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436964012, "post_id": 31429707, "comment_id": 50831589, "body": "@Dante, Actually the lenght is not important, as it&#39;s ok as i declared the max is 100 :)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436967342, "post_id": 31429707, "comment_id": 50834223, "body": "@DemonSlayer Where are you hurry? At first see my answer.:) I say you by secret that it is only me who can write code.L)"}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436967661, "post_id": 31429707, "comment_id": 50834504, "body": "@Vlad from Moscow, I think your code is ok and working but for me (a beginner) is too much hard to understand, Thanks anyway :) !"}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436967952, "post_id": 31429707, "comment_id": 50834762, "body": "@Dante, By the way, Why you made the main Void and not int?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436968223, "post_id": 31429707, "comment_id": 50834980, "body": "@DemonSlayer Opposite to you I think it is easy to understand the code.:)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436968394, "post_id": 31429707, "comment_id": 50835112, "body": "@DemonSlayer Simply copy and paste the code and try it.:) And you will like it.:)"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1437037957, "post_id": 31429707, "comment_id": 50867776, "body": "@DemonSlayer I don&#39;t think that my code contains any bug. Kindly abstain from users who suggest you to accept their answers."}], "answers": [{"comments": [{"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1436964653, "post_id": 31430890, "comment_id": 50832082, "body": "@DemonSlayer As u mentioned space is not important so I did not bothered to calculate the length of array b."}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436964789, "post_id": 31430890, "comment_id": 50832196, "body": "That&#39;s not it. The user have to input the numbers, they can&#39;t be already declared and, it has to be in &quot;for&quot; statements,"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436964972, "post_id": 31430890, "comment_id": 50832341, "body": "@DemonSlayer Now it will do."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436965062, "post_id": 31430890, "comment_id": 50832411, "body": "@Dante  This is a demonstration how code should not be written.:)"}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436965171, "post_id": 31430890, "comment_id": 50832490, "body": "@Vlad from Moscow, Why?"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436965635, "post_id": 31430890, "comment_id": 50832868, "body": "@VladfromMoscow You probably never heard of identation.Learning new things is not bad."}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436965749, "post_id": 31430890, "comment_id": 50832961, "body": "@Dante Thank you guys, I will tell to my teacher i did not know how to do such a thing and ask them to explain to me the code.. If i can ask, May you comment the code please? Thanks really guys!"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436965827, "post_id": 31430890, "comment_id": 50833026, "body": "@DemonSlayer Do you want to understand the logic behind the code."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436965936, "post_id": 31430890, "comment_id": 50833107, "body": "@DemonSlayer Which part.I am here to help."}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436966849, "post_id": 31430890, "comment_id": 50833792, "body": "@Dante, Thanks,  while((i+1)&lt;n&amp;&amp;a[i]==a[i+1])             {                 ++x;                 ++i;             }             if(x&gt;1)             {              b[j++]=a[i];              b[j++]=x+1;             }             else b[j++]=a[i]; This one"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436967177, "post_id": 31430890, "comment_id": 50834074, "body": "@DemonSlayer Look (i+1)&lt;n is used so that we do not go outside the array and a[i]==a[i+1] checks whether consecutive numbers are same.The while loop will execute as long as consecutive numbers are same and it will execute x times where x = number of repititions - 1, this is the reason I have b[j++]=x+1 and and not b[j++]=x, every time I fill the array b, the condition x&gt;1 is true because we are only concerned about the elements that occur more than one."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436967212, "post_id": 31430890, "comment_id": 50834099, "body": "@DemonSlayer I would advice you practise as many questions as possible. I know its hard in the beginning.I myself struggled a lot in the beginning 2, 3 months, a hell of a lot."}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436967476, "post_id": 31430890, "comment_id": 50834343, "body": "@Dante i appreciate your help, if you mind and if you want I would appreciate if you leave me your skype username or facebook one so if you have some time we can help eachother.. Thank you so much! Other, i understood everything so yeah :D"}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436967998, "post_id": 31430890, "comment_id": 50834797, "body": "@Dante, why you made the main void and not int? :)"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436968678, "post_id": 31430890, "comment_id": 50835351, "body": "@DemonSlayer It does not matter, you can have any."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436970379, "post_id": 31430890, "comment_id": 50836698, "body": "@DemonSlayer &quot;Why?&quot; \u2013  because it is a bad style of writing code. You should not write code in such a style."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436970567, "post_id": 31430890, "comment_id": 50836842, "body": "@DemonSlayer Don&#39;t care much about the style, a good computer scientist always craves for logic and not style."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436970578, "post_id": 31430890, "comment_id": 50836852, "body": "@Dante  Ask any professional programmer and he wil say that it is a bad code. It is a code of a beginner."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436970717, "post_id": 31430890, "comment_id": 50836967, "body": "@Dante  On the other hand it is good that you already can write code so quickly though it contains a bug. The understanding of a good programming style will come later."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436970753, "post_id": 31430890, "comment_id": 50836992, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/83341/discussion-between-dante-and-vlad-from-moscow\">continue this discussion in chat</a>."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436970981, "post_id": 31430890, "comment_id": 50837163, "body": "@Dante  In gact I already said what I wanted to say.:) So I am sorry."}], "tags": [], "owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "is_accepted": true, "score": 0, "last_activity_date": 1436965452, "last_edit_date": 1436965452, "creation_date": 1436964590, "answer_id": 31430890, "question_id": 31429707, "link": "https://stackoverflow.com/questions/31429707/printing-consecutive-entries-as-pairs-from-an-array/31430890#31430890", "title": "Printing consecutive entries as pairs from an array", "body": "<p>Following code will do the job.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nvoid main()\n{\n    int i,x,j=0,n,*a,*b;\n    printf(\"insert N\");\n    scanf (\"%d\", &amp;n);\n    a=(int *)malloc(n*sizeof(int));\n    b=(int *)malloc(n*sizeof(int));\n    printf (\"insert group of numbers\");\n    for(i=0; i&lt;n; i++)\n    scanf(\"%d\", &amp;a[i]);\n     for( i=0;i&lt;n;++i)\n     {\n        x=0;\n            while((i+1)&lt;n&amp;&amp;a[i]==a[i+1])\n            {\n                ++x;\n                ++i;\n            }\n            if(x&gt;1)\n            {\n             b[j++]=a[i];\n             b[j++]=x+1;\n            }\n            else b[j++]=a[i];\n     }\n    for(i=0;i&lt;j;++i)\n        printf(\"%d  \",b[i]);\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436965823, "post_id": 31431137, "comment_id": 50833023, "body": "Thanks, but I think that Dante&#39;s code is more &quot;easy&quot;"}], "tags": [], "owner": {"reputation": 1563, "user_id": 2632764, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TpYmn.png?s=128&g=1", "display_name": "Sorcrer", "link": "https://stackoverflow.com/users/2632764/sorcrer"}, "is_accepted": false, "score": 0, "last_activity_date": 1436965226, "creation_date": 1436965226, "answer_id": 31431137, "question_id": 31429707, "link": "https://stackoverflow.com/questions/31429707/printing-consecutive-entries-as-pairs-from-an-array/31431137#31431137", "title": "Printing consecutive entries as pairs from an array", "body": "<p>Please check whether this code will help or not, insted of arr_1 elemets you could use the scanf and load the variables</p>\n\n<pre><code>#include&lt;stdio.h&gt; int main() {\n    int arr_1[]={1,3,4,1,1,1,1,6,7,1,1,1,1,1,1,9,3,2,5,6,1,2,1,1,1,1,1};\n    int arr_2[27];\n    int arr_len;\n    int i,j,cntr=0;\n    int flag = 0;\n    arr_len=sizeof(arr_1)/sizeof(int);\n\n    for(i=0,j=0;i&lt;arr_len;i++)\n    {\n\n        if(arr_1[i] == arr_1[i+1])\n        {\n            if(flag == 0)\n            {\n                arr_2[j] = arr_1[i];\n                j++;\n            }\n            flag = 1;\n            cntr++;\n        }\n        else\n        {\n            if(cntr &gt; 0)\n            {\n                arr_2[j] = cntr+1;\n                cntr=0;\n                flag = 0;\n            }\n            else\n            {\n                arr_2[j]=arr_1[i];\n            }\n            j++;\n        }\n\n    }\n\n\n    for(i=0;i&lt;arr_len;i++)\n    printf(\"%d \",arr_1[i]);\n    printf(\"\\n\");\n    for(i=0;i&lt;j;i++)\n    printf(\"%d \",arr_2[i]);\n\n    getch(); }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436967539, "post_id": 31431915, "comment_id": 50834392, "body": "Thank you vlad! :D it&#39;s a really nice alternative way :)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436967629, "post_id": 31431915, "comment_id": 50834474, "body": "@DemonSlayer It is the only code that deserves to be considered.:)"}, {"owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436967790, "post_id": 31431915, "comment_id": 50834609, "body": "My teacher said that when a Main() code is bigger than 20 lines it&#39;s useless, and not working in the right way. Our codes are everytime 15-16 lines. :)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "edited": false, "score": 0, "creation_date": 1436968017, "post_id": 31431915, "comment_id": 50834815, "body": "@DemonSlayer  Your teacher is wrong. In fact the main part of the code I showed is the following loop         for ( size_t i = 0, j = 0; i &lt; n; i += count )         {             count = 0;             while ( ++count + i &lt; n &amp;&amp; a[count + i] == a[i] );              b[j++] = a[i];             if ( count &gt; 1 ) b[j++] = count;         }   that contains only 7 lines. All other statements are auxiliary code as for example printing the arrays.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": -1, "last_activity_date": 1436967660, "last_edit_date": 1436967660, "creation_date": 1436967263, "answer_id": 31431915, "question_id": 31429707, "link": "https://stackoverflow.com/questions/31429707/printing-consecutive-entries-as-pairs-from-an-array/31431915#31431915", "title": "Printing consecutive entries as pairs from an array", "body": "<p>Here is a demonstrative program that is based on using Variable Length Arrays (VLA). If you want you can change it such a way that instead of VLA(s) it used either arrays of fixed sizes or dynamically allocated arrays.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    while ( 1 )\n    {\n        printf( \"\\nEnter array size: \" );\n\n        size_t n = 0;\n        scanf( \"%zu\", &amp;n );\n\n        if ( !n ) break;\n\n        int a[n];\n\n        printf( \"Enter %zu elements of the array: \", n );\n        for ( size_t i = 0; i &lt; n; i++ ) scanf( \"%d\", &amp;a[i] );\n\n        printf( \"\\na[%zu] = { \", n );\n        for ( size_t i = 0; i &lt; n; i++ ) printf( \"%d, \", a[i] );\n        printf( \"}\\n\" );\n\n        size_t m = 0;\n        size_t count;\n\n        for ( size_t i = 0; i &lt; n; i += count )\n        {\n            count = 0;\n            while ( ++count + i &lt; n &amp;&amp; a[count + i] == a[i] );\n            m += count &gt; 1 ? 2 : 1;  \n        }\n\n        int b[m];\n\n        for ( size_t i = 0, j = 0; i &lt; n; i += count )\n        {\n            count = 0;\n            while ( ++count + i &lt; n &amp;&amp; a[count + i] == a[i] );\n\n            b[j++] = a[i];\n            if ( count &gt; 1 ) b[j++] = count;\n        }        \n\n        printf( \"b[%zu] = { \", m );\n        for ( size_t i = 0; i &lt; m; i++ ) printf( \"%d, \", b[i] );\n        printf( \"}\\n\" );\n    }        \n}\n</code></pre>\n\n<p>The program might have the following output</p>\n\n<pre><code>Enter array size: 27\nEnter 27 elements of the array: 1 3 4 1 1 1 1 6 7 1 1 1 1 1 1 9 3 2 5 6 1 2 1 1 1 1 1\n\na[27] = { 1, 3, 4, 1, 1, 1, 1, 6, 7, 1, 1, 1, 1, 1, 1, 9, 3, 2, 5, 6, 1, 2, 1, 1, 1, 1, 1, }\nb[18] = { 1, 3, 4, 1, 4, 6, 7, 1, 6, 9, 3, 2, 5, 6, 1, 2, 1, 5, }\n\nEnter array size: 6\nEnter 6 elements of the array: 1 1 1 1 1 2\n\na[6] = { 1, 1, 1, 1, 1, 2, }\nb[3] = { 1, 5, 2, }\n\nEnter array size: 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 5116493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43de09ef3f41651bc9e2e1580dc68cef?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/5116493/dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436987476, "creation_date": 1436987476, "answer_id": 31439059, "question_id": 31429707, "link": "https://stackoverflow.com/questions/31429707/printing-consecutive-entries-as-pairs-from-an-array/31439059#31439059", "title": "Printing consecutive entries as pairs from an array", "body": "<pre><code>int count=0, last=0, j=0, n, i;\nprintf(\"insert N\");\nscanf (\"%d\", &amp;n);\nint b[n];\nprintf (\"insert group of numbers\");\nfor(i=0; i&lt;n; i++){\n    scanf(\"%d\", &amp;a[i]);\n    if(a[i] == last){\n      count++;\n    }\n    else {\n        b[j] = last;\n        j++;\n        if(count != 0){\n            b[j] = count + 1;\n            j++;\n            count = 0;\n        }\n        last = a[i];\n    }\n\n}\n</code></pre>\n\n<p>Rather than doing post processing as a few others have suggested you can process the input as it is received. </p>\n\n<p>The if statement increments the count when a duplicate is encountered.\nThe else statement sets the second array to the last value (not current value) when the current value is different. If the last value was a duplicate, it adds the number of duplicates in the next if statement. After that, it updates the last variable.</p>\n"}], "owner": {"reputation": 29, "user_id": 5081343, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204918516950836/picture?type=large", "display_name": "DemonSlayer", "link": "https://stackoverflow.com/users/5081343/demonslayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 31430890, "answer_count": 4, "score": -2, "last_activity_date": 1436987476, "creation_date": 1436961376, "last_edit_date": 1436963682, "question_id": 31429707, "link": "https://stackoverflow.com/questions/31429707/printing-consecutive-entries-as-pairs-from-an-array", "title": "Printing consecutive entries as pairs from an array", "body": "<p>I have an array 'a' inserted by the user as:</p>\n\n<pre><code>printf(\"insert N\");\nscanf (\"%d\", &amp;n);\nprintf (\"insert group of numbers\");\nfor(i=0; i&lt;n; i++){\n    scanf(\"%d\", &amp;a[i]);\n}\n</code></pre>\n\n<p>Then, from the original array, I have to make a sequence which will have all the entries of the original array but if an entry is coming multiple times consecutively, then instead of writing that number multiple times, only two numbers should be added to the sequence: first denoting the repeated number and the second denoting its frequency. Example:</p>\n\n<pre><code>Array : 1,3,4,1,1,1,1,6,7,1,1,1,1,1,1,9,3,2,5,6,1,2,1,1,1,1,1.\nSequence: 1,3,4,1,4,6,7,1,6,9,3,2,5,6,1,2,1,5\n</code></pre>\n\n<p>The first 3 numbers are written down as they are. Then '1' comes consecutively 4 times so we append 1,4 to the sequence and so on.</p>\n\n<p>Actually i m confused how i can make i and j are on the same steps,\nas far as i know i and j start from 0 then 1,2,3,4\nbut how can I make them start each in the same step so if a[i(that is 3 in the step)] = 10\nso a[j( on step 3) is 10 too?\nThanks for the time! I appreciate!</p>\n"}, {"tags": ["c", "string", "strlen"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 4, "creation_date": 1436960443, "post_id": 31429332, "comment_id": 50829076, "body": "Strings in C are 0-terminated: they end with the &#39;\\0&#39; char."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 2, "creation_date": 1436960618, "post_id": 31429332, "comment_id": 50829205, "body": "argv is not a string: it&#39;s an array of strings (an array of pointers to chars, in fact); the array requires argc, not the individual argv elements. See the type decl: <code>char *argv[]</code>."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1436960669, "post_id": 31429332, "comment_id": 50829240, "body": "&quot;... only in newer versions of gcc and clang? ...&quot; null-terminated strings are older than C itself, finding out counting how long they are goes <i>way back</i>."}, {"owner": {"reputation": 26254, "user_id": 343302, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/23bea3cac63585e10858de10f2c6b478?s=128&d=identicon&r=PG", "display_name": "dotancohen", "link": "https://stackoverflow.com/users/343302/dotancohen"}, "edited": false, "score": 0, "creation_date": 1436960867, "post_id": 31429332, "comment_id": 50829357, "body": "I have demonstrated that strlen() is not looking for null bytes, see string <code>c</code>. Thank you."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1436961177, "post_id": 31429332, "comment_id": 50829560, "body": "If you refer to <b>char array</b> <code>d</code> (not <code>c</code>), you have demonstrated just nothing, as <i>undefined behaviour</i> cannot prove anything."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436961381, "post_id": 31429332, "comment_id": 50829697, "body": "And <code>strlen</code> returns <code>size_t</code>, not <code>unsigned long</code>. So use the correct format specifier (<code>&quot;%zu&quot;</code>)."}, {"owner": {"reputation": 26254, "user_id": 343302, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/23bea3cac63585e10858de10f2c6b478?s=128&d=identicon&r=PG", "display_name": "dotancohen", "link": "https://stackoverflow.com/users/343302/dotancohen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436961701, "post_id": 31429332, "comment_id": 50829912, "body": "@Olaf: Regarding <code>%zu</code> in place of <code>%lu</code>, the clang compiler specifically mentioned <code>%lu</code>. Thank you."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436961821, "post_id": 31429332, "comment_id": 50829989, "body": "You are right! It is not &quot;<b>null</b>&quot; terminated, as that name is not defined in C and has no meaning at all. However, it is ASCII-<code>NUL</code>-terminated, which is the name for <code>&#39;\\0&#39;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436962269, "post_id": 31429332, "comment_id": 50830290, "body": "Stick with <code>%lu</code> for portable code, see my comment to your picked answer"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436963773, "post_id": 31429332, "comment_id": 50831395, "body": "@FelixPalmen: That is definitively <b>not</b> portable. <code>size_t</code> can very well be 64 bits, while <code>long</code> is 32 bits. That is a very dangerous recommendation - at best."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436964207, "post_id": 31429332, "comment_id": 50831722, "body": "@Olaf, no, it&#39;s not dangerous. As I wrote over there, you can always take the precaution of converting to long before printing, although there is to my knowledge no existing implementation that has a <code>size_t</code> larger than <code>long</code>(and it&#39;s a recommendation in the standard...). It&#39;s very common to always hint about things if they require newer versions of the C standard, and that&#39;s probably mostly due to MSVC."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436988404, "post_id": 31429332, "comment_id": 50848114, "body": "@FelixPalmen: If you refer to <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.19p4\" rel=\"nofollow noreferrer\">7.19p4</a>, you should read the last sentence. If I have some time, I will check the ARMv8-ABI if that allows for 64 bit size_t. For the standard: If we do not refer to it, there is no sense at all to discuss, as then everything is possible. So, unless one states he does use some non-standard compiler, we should assume at least C99 - for reasons I already listed. Note that even gcc now defaults to C11. And I think they have much more backgrund that you or me."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436989262, "post_id": 31429332, "comment_id": 50848582, "body": "@Olaf the point is just that a newer standard doesn&#39;t invalidate the older one, it just replaces it. There are still implementations that stick with the older one (on a side note, if someone could convince MS to <i>move forward</i> -- no objections). Still, going for maximum portability would mean to stick with the lowest common denominator ... and that is C89. To account for <code>size_t</code> being bigger than <code>long</code>, you could always use a converting cast. At least for a string length, this should be safe for any sane string."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436989588, "post_id": 31429332, "comment_id": 50848749, "body": "@FelixPalmen: I bet, there are still K&amp;R compilers in the field. So what would be the acceptable standard? K&amp;R? - no way for me! And C99 changed some semantics compared to C90, so there is also a problem ehere those are involved. If you want to stick with that, just as MS dictates, welcome. I - for myself - will not. Even MISRA has noticed there is a more recent standard and moved on."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436989851, "post_id": 31429332, "comment_id": 50848873, "body": "Let me make a single point here: C89/C90 IS a (formal) standard, K&amp;R isn&#39;t. That said, I think it&#39;s perfectly fine to suggest &quot;better&quot; ways of doing something in newer versions of <i>standard</i> C, just note it requires a compiler supporting this."}], "answers": [{"comments": [{"owner": {"reputation": 26254, "user_id": 343302, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/23bea3cac63585e10858de10f2c6b478?s=128&d=identicon&r=PG", "display_name": "dotancohen", "link": "https://stackoverflow.com/users/343302/dotancohen"}, "edited": false, "score": 1, "creation_date": 1436960875, "post_id": 31429369, "comment_id": 50829362, "body": "I have demonstrated that strlen() is not looking for null bytes, see string c. Thank you."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 26254, "user_id": 343302, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/23bea3cac63585e10858de10f2c6b478?s=128&d=identicon&r=PG", "display_name": "dotancohen", "link": "https://stackoverflow.com/users/343302/dotancohen"}, "edited": false, "score": 0, "creation_date": 1436961116, "post_id": 31429369, "comment_id": 50829516, "body": "@dotancohen what do you mean? My edit got conflicted with yours, so can you please confirm it is in correct state now?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1436961137, "post_id": 31429369, "comment_id": 50829527, "body": "No you haven&#39;t. You mean d. Chances are your variables are aligned so that padding bytes are left after d. And they are probably 0 initially. So your code just prints the &quot;correct&quot; length by accident. d is by definition not a C string (missing the terminating <code>\\0</code>) -- calling <code>strlen()</code> on it is undefined behavior and could crash or anything else."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1436961146, "post_id": 31429369, "comment_id": 50829532, "body": "and BTW, in this case, <code>d</code>  is essentially <i>not qualified</i> to be called a <i>string</i>. You&#39;re running on  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436962156, "post_id": 31429369, "comment_id": 50830215, "body": "@SouravGhosh -- about the <code>z</code> length modifier: It&#39;s GNU specific, so for portable code, better use <code>l</code> (and, to be safe in the very improbable case an implementation uses <code>unsigned long long</code> for <code>size_t</code>, first convert it to <code>unsigned long</code>)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436962533, "post_id": 31429369, "comment_id": 50830495, "body": "@FelixPalmen No, not at all. It is part of <code>C11</code> standard. See &#167;7.21.6.1"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436962663, "post_id": 31429369, "comment_id": 50830601, "body": "Well, then <code>C11</code> adopted it. GNU has it for a long time. No matter what, one widely used compiler just supports <code>C89</code> with SOME extensions from <code>C99</code> ... you know what I&#39;m talking about :) Suggesting <code>z</code> length modifier without any hint about it&#39;s availability isn&#39;t a good idea in my opinion."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1436962868, "post_id": 31429369, "comment_id": 50830754, "body": "@FelixPalmen No, it was a part of <code>C99</code> also. See &#167;7.19.6.1. If any compiler does not support <code>C99</code>, instead of changing the code, I&#39;ll humbly recommend to change the compiler itself. It&#39;s been a good long 15 years now...."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436963538, "post_id": 31429369, "comment_id": 50831237, "body": "@FelixPalmen: Current - and only valid - C standard is C11. However, one might accept C99, too, because C11 is &quot;just&quot; 4 years old and mostly adds extensions, but not (much) change C99 features (which C99 did compared to C90; I intentionally ignore the few features made optional). But C90 should <i>definitvely</i> not be considered a valid basis for discussion; even less the mentioned Visual-C compiler (why not mention its name for the unaware?), as that does (obviously) not set the standard."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436964317, "post_id": 31429369, "comment_id": 50831817, "body": "The minimal common standard is C89 and it&#39;s quite common -- also around here -- to make it explicit when talking about newer features. And also, this whole discussion is pointless now."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 10, "last_activity_date": 1436961392, "last_edit_date": 1436961392, "creation_date": 1436960350, "answer_id": 31429369, "question_id": 31429332, "link": "https://stackoverflow.com/questions/31429332/how-does-strlen-calculate-the-length-of-a-string-not-defined-in-the-current-fu/31429369#31429369", "title": "How does strlen() calculate the length of a string not defined in the current function?", "body": "<blockquote>\n  <p><em>How is strlen() determining the string length?</em></p>\n</blockquote>\n\n<p><code>strlen()</code> searches for the terminating <code>null</code> (<code>'\\0'</code>), and counts the characters (i.e., number of bytes), from the beginning (pointer), till the <code>null</code>, excluding the <code>null</code> itself.</p>\n\n<p><strong><em>Remember, <code>C</code>-style strings are by definition null-terminated.</em></strong></p>\n\n<p>Just as a note, as the return type of <code>strlen()</code> is <code>size_t</code>, <code>%zu</code> format specifier should be used to print the return value.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>If a <code>char</code> array is not null-terminated, that is <strong>not</strong> qualified to be called as a <em>string</em>. Using that kind of array in any <em>string</em> related library function will most certainly invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\">undefined behaviour</a>.</p>\n\n<p>For more info, check the <a href=\"http://linux.die.net/man/3/strlen\">man page</a> for <code>strlen()</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1436963882, "post_id": 31429766, "comment_id": 50831496, "body": "@dotancohen Quite often, this behaviour of accidental zero&#39;s (0, <code>&#39;\\0&#39;</code> or other types of zero&#39;s) disappears when you compile with full optimisation on. Try compiling with e.g. the <code>-O2</code> or <code>-Os</code> option, and see if the results are still the same."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1436961514, "creation_date": 1436961514, "answer_id": 31429766, "question_id": 31429332, "link": "https://stackoverflow.com/questions/31429332/how-does-strlen-calculate-the-length-of-a-string-not-defined-in-the-current-fu/31429766#31429766", "title": "How does strlen() calculate the length of a string not defined in the current function?", "body": "<blockquote>\n  <p>Additionally, why does strlen() report an additional character when the null byte is not including in the string? (added in edit)</p>\n</blockquote>\n\n<p>To answer your edit explicitely: Your assumption is wrong. It could return <code>42</code>, crash or even delete your files. Read about Undefined Behavior, as suggested by previous comments.</p>\n\n<p>The technical reason for it reporting 6 is, by accident, in your final program, there is a 0 byte 2 bytes behind your array. That doesn't make the array a valid C string.</p>\n"}, {"tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 4, "last_activity_date": 1436961544, "creation_date": 1436961544, "answer_id": 31429774, "question_id": 31429332, "link": "https://stackoverflow.com/questions/31429332/how-does-strlen-calculate-the-length-of-a-string-not-defined-in-the-current-fu/31429774#31429774", "title": "How does strlen() calculate the length of a string not defined in the current function?", "body": "<p>Just read the standard. It clearly defines what <code>strlen</code> <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.24.6.3p3\" rel=\"nofollow\">does</a>. It is <strong>your</strong> assertion which is wrong.</p>\n\n<p>Your <strong>char array</strong> <code>d</code> invokes <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.24.1p1\" rel=\"nofollow\"><em>undefined behaviour</em></a> (last sentence) when used with the string functions.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1436965579, "creation_date": 1436965579, "answer_id": 31431268, "question_id": 31429332, "link": "https://stackoverflow.com/questions/31429332/how-does-strlen-calculate-the-length-of-a-string-not-defined-in-the-current-fu/31431268#31431268", "title": "How does strlen() calculate the length of a string not defined in the current function?", "body": "<p>First of all, your functions <code>p1</code> and <code>p2</code> are exactly identical.  It is <strong>not</strong> the case that one of them is treating the string as a pointer, and the other one is treating the string as an array.  A string is, by definition, an array of characters.  <em>But</em>, whenever we manipulate arrays (and, in particular, when we pass an array to a function) what we're actually using is a pointer to the array's first element.  So your function <code>p2</code>, even though it looks like it's receiving an array, is actually receiving a pointer.  See also <a href=\"http://c-faq.com/aryptr/aryptrparam.html\" rel=\"nofollow\">this question</a> in the <a href=\"http://c-faq.com/\" rel=\"nofollow\">C FAQ list</a>.</p>\n\n<p>Now, secondly, a C string <em>does</em> contain, explicitly, an indication of its length: all proper strings contain a null terminator, the special character <code>'\\0'</code>, which marks its end.  How you determine a string's length is to read through it, counting characters, until you find the <code>'\\0'</code>.  That's exactly what <code>strlen</code> does.</p>\n\n<p>Finally, we come to your array <code>d</code>.  As I think you know, you have arranged that this array look sort of like the string <code>\"Hello\"</code>, but <em>without</em> the terminating null character.  So when <code>strlen</code> tries to compute the length of <code>d</code>, it's going to sail right past the end, and start inspecting whatever random area of memory exist past the end of the array.  There are three things that might happen:</p>\n\n<ul>\n<li>The next thing in memory right after the array might just happen to be a 0 byte.  In this case, by pure chance, <code>strlen</code> will just happen to compute the correct answer, 5.</li>\n<li>It's more likely that there are some other random bytes in memory following the array, and that somewhere within them is a 0 byte.  In that case, <code>strrlen</code> will compute an answer greater -- perhaps much greater -- than 5.  That's what appears to have happened.</li>\n<li>Before finding a 0 byte, <code>strlen</code> might run past the end of the memory allocated to your process, in which case you will get some operating-system-level error message, such as a Segmentation violation or Bus error or \"This program has terminated unexpectedly\" or Blue Screen Of Death.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436971685, "last_edit_date": 1436971685, "creation_date": 1436971381, "answer_id": 31433573, "question_id": 31429332, "link": "https://stackoverflow.com/questions/31429332/how-does-strlen-calculate-the-length-of-a-string-not-defined-in-the-current-fu/31433573#31433573", "title": "How does strlen() calculate the length of a string not defined in the current function?", "body": "<p>An implementation of <code>strlen</code></p>\n\n<pre><code>size_t strlen(const char * str) {\n    const char * s;\n    for (s = str; *s; ++s);\n    return(s - str);\n}\n</code></pre>\n\n<p>The loop termination condition <code>*s</code> is internally <code>*s != '\\0'</code>. So, it loops until terminating <code>null</code> character is found. And, it behaves the same for both a <code>pointer to char</code> and a <code>char array</code>.</p>\n"}], "owner": {"reputation": 26254, "user_id": 343302, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/23bea3cac63585e10858de10f2c6b478?s=128&d=identicon&r=PG", "display_name": "dotancohen", "link": "https://stackoverflow.com/users/343302/dotancohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5187, "favorite_count": 0, "accepted_answer_id": 31429369, "answer_count": 5, "score": 0, "last_activity_date": 1438342958, "creation_date": 1436960235, "last_edit_date": 1438342958, "question_id": 31429332, "link": "https://stackoverflow.com/questions/31429332/how-does-strlen-calculate-the-length-of-a-string-not-defined-in-the-current-fu", "title": "How does strlen() calculate the length of a string not defined in the current function?", "body": "<p>From what I understand, in C arrays and pointers to strings do not implicitly contain information regarding the amount of elements in the respective array. This is why <code>argc</code> must be passed to <code>main()</code> in addition to <code>argv</code>. However, on my machine the following code does correctly print the length of the string <code>\"Hello\"</code> which is <code>5</code> even though the string is not defined in the same scope as <code>printf()</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid p1(char *a)\n{\n    printf(\"%lu\\n\", strlen(a));\n}\n\nvoid p2(char a[])\n{\n    printf(\"%lu\\n\", strlen(a));\n}\n\nint main(int argc, char *argv[])\n{\n    char *a = \"Hello\";\n    char b[] = \"Hello\";\n    char c[] = {'H', 'e', 'l', 'l', 'o', '\\0'};\n    char d[] = {'H', 'e', 'l', 'l', 'o'};\n\n    p1(a);\n    p2(a);\n\n    printf(\"\\n\");\n\n    p1(b);\n    p2(b);\n\n    printf(\"\\n\");\n\n    p1(c);\n    p2(c);\n\n    printf(\"\\n\");\n\n    p1(d);\n    p2(d);\n\n    return 0;\n}\n</code></pre>\n\n<p>Here are my results and machine type:</p>\n\n<blockquote>\n  <p>$ ./a.out<br>5<br>5</p>\n  \n  <p>5<br>5</p>\n  \n  <p>5<br>5</p>\n  \n  <p>6<br>6</p>\n  \n  <p>$ uname -a<br> Linux loathe 3.16.0-37-generic #51-Ubuntu SMP Tue May 5\n  13:45:59 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>$ cat /etc/issue<br> Ubuntu 14.10 \\n \\l</p>\n</blockquote>\n\n<p>How is <code>strlen()</code> determining the string length? Why does this work even when the string is explicitly sent as a pointer, as in the function call function <code>p1(a)</code>? If this behaviour is only in newer versions of <code>gcc</code> and <code>clang</code>, when did it start and can I rely on it in my programs?</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Additionally, why does <code>strlen()</code> report an additional character when the null byte is not including in the string? (added in edit)</p>\n\n<p>Edit: I've addressed the assertion that <code>strlen()</code> works by finding a null byte.</p>\n"}, {"tags": ["c++", "c", "strict-aliasing"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1436960878, "post_id": 31429214, "comment_id": 50829365, "body": "Rule o&#39; thumb: Don&#39;t do type-punning. Some instances of it are well-defined but most aren&#39;t and unless there is a damn good reason, you can usually write a more beautiful solution that does not involve type punning."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1436963209, "post_id": 31429214, "comment_id": 50831005, "body": "@FUZxxl, in a sense I agree. I&#39;ve never had to do this, and I don&#39;t need to do it now. But I&#39;m curious. Some time in my life, I may have no option but to push the boundaries a little. If everybody says &quot;don&#39;t do it&quot;, or &quot;it&#39;s always UB&quot;, then I will have no option but to just code it up and say to my boss &quot;well, it worked in my tests, so I&#39;m going to have to run with it because I can&#39;t get any other helpful advice&quot; :-) ."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436963465, "post_id": 31429214, "comment_id": 50831186, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">What is the strict aliasing rule?</a>"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436963479, "post_id": 31429214, "comment_id": 50831199, "body": "... unless, of course, there truly is <i>never</i> <i>any</i> defined-behaviour version of type-punning. I&#39;m beginning to get the impression that this might be the case in C++ specifically, as it may be much stricter than C in this."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436963656, "post_id": 31429214, "comment_id": 50831318, "body": "I know some people are marking this as a dupe of another question. But I referenced exactly that question in the first few words of my question, precisely in order to highlight that I have a different, follow up, question. That other question kind of misses the point for me."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1436964015, "post_id": 31429214, "comment_id": 50831593, "body": "@AaronMcDaid Well, you asked for the \u201csimplest rule of thumb,\u201d do I gave you the simplest rule of thumb."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436966543, "post_id": 31429214, "comment_id": 50833562, "body": "Btw. if you want to make the code so it doesn&#39;t break strict aliasing, that is a different question, and the process is relatively easy."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1436967556, "post_id": 31429214, "comment_id": 50834416, "body": "I would like to write a detailed analysis of your code, however it is crucial as to whether <code>uint32_t</code> is a typedef for <code>unsigned int</code> on your system.  If not, your code is clearly UB. If so, it is murky (But IMHO, not UB).  I suggest updating your question so that either clearly the same type is used for <code>Msg::a</code> as for <code>buff[0]</code> etc., or clearly different types are used.  An answer covering both cases would be too lengthy."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1436967668, "post_id": 31429214, "comment_id": 50834509, "body": "Also, dual-tagging this question makes it doubly complicated because the strict aliasing rule is different in C than in C++. In fact, in C++ it is very underspecified as to what happens when aliasing in malloc&#39;d space."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436994805, "post_id": 31429214, "comment_id": 50851731, "body": "I didn&#39;t dual-tag it. I tagged it as C++ at first, but somebody else must have added C. In hindsight, I am more interested in C."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1436994893, "post_id": 31429214, "comment_id": 50851791, "body": "@MattMcNabb, I copied that example directly from another SO answer, and I didn&#39;t realise the signed-ness was an issue."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1437006505, "post_id": 31429214, "comment_id": 50855932, "body": "@AaronMcDaid signed-ness isn&#39;t an issue, the question is whether the two types are the same or not. The code you copied from has the same problem. Please fix."}], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1436961337, "post_id": 31429487, "comment_id": 50829661, "body": "@Angew Yeah sure (I indeed talk about accessing the object). At least we get that."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436961912, "post_id": 31429487, "comment_id": 50830053, "body": "I don&#39;t get the first line of this question. You&#39;re saying that if I write through a type-punned pointer, then I get UB, <i>even if I never read nor write through either pointer again</i>?"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1436962055, "post_id": 31429487, "comment_id": 50830149, "body": "@Angew With valid I mean &quot;safe&quot; to access, namely that the pointed address is valid. To initialize that region you have to copy the contents of the <code>MsgBuf</code> object in a such a way that aliasing is not a problem; <code>char*</code>, for example, as <code>memcpy</code> likely does. Does that help?"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436962291, "post_id": 31429487, "comment_id": 50830306, "body": "@AaronMcDaid Yeah, fixing. It&#39;s accessing the object through the type-punned pointer that causes UB. As Angew says, simply pointing to it does not cause any problems."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436962879, "post_id": 31429487, "comment_id": 50830762, "body": "Sorry to be pedantic, but you can&#39;t open with &quot;it&#39;s definitely UB&quot;, then quote an exception (<code>memcpy</code>) that makes it OK again. If <code>memcpy</code> is OK, then can we distil <i>why</i> it&#39;s OK? If I reimplemented my own <code>memcpy</code>, then it would be fine, yes? And <code>memcpy</code> has <code>void*</code>, not <code>char*</code>, in its signature, therefore the fact that <code>char*</code> is special isn&#39;t relevant to the justification of <code>memcpy</code>.  (Sorry if my tone is wrong here, but it is important.)"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1436963222, "post_id": 31429487, "comment_id": 50831014, "body": "Sorry, mixed up <code>memcpy</code> on the contents and the pointer, ignore my previous comments."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436963835, "post_id": 31429487, "comment_id": 50831444, "body": "@AaronMcDaid Absolutely fine. <a href=\"http://en.cppreference.com/w/cpp/string/byte/memcpy\" rel=\"nofollow noreferrer\"><code>memcpy</code></a> shall compute a byte copy of <code>n</code> bytes from <code>dst</code> to <code>src</code>. <code>void*</code> is used to represent an address and C allows implicit conversions to <code>void*</code> from other pointer types (unlike for <code>char*</code>); internally <code>src</code> and <code>dst</code> are converted properly."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436964060, "post_id": 31429487, "comment_id": 50831622, "body": "The addresses pointed to by the parameters to <code>memcpy</code> should not overlap each other. But in the example we are using they do overlap each other, because one pointer is simply a cast from the other. Do you mean a different example where the two data structures are non-overlapping?"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436964648, "post_id": 31429487, "comment_id": 50832076, "body": "@AaronMcDaid It depends when you call it. After you <code>malloc</code> the <code>uint32_t*</code>, they don&#39;t overlap and <code>memcpy</code> can be called safely; OTOH, when they do overlap, you need <code>memmove</code>, as quoted in the answer."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436965004, "post_id": 31429487, "comment_id": 50832364, "body": "@black, &quot;they don&#39;t overlap&quot;. We can&#39;t even ask if they overlap at this point - because <code>msg</code> doesn&#39;t even exist! I think you&#39;re discussing a situation where <code>buff</code> and <code>msg</code> have been <code>malloc</code>-ed seperately?"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436965065, "post_id": 31429487, "comment_id": 50832414, "body": "In other words, your answer as currently written implies that we can simply copy and paste <code>memcpy( (void*)buff, (const void*) msg, sizeof (msg));</code> into the original (problematic) code and that will fix it?"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436966524, "post_id": 31429487, "comment_id": 50833553, "body": "@AaronMcDaid Yes (look at the edit, it&#39;s the opposite). Whether <code>msg</code> will contain meaningful values depends though on the actual data into <code>buff</code>."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437408899, "post_id": 31429487, "comment_id": 51003901, "body": "@black, I&#39;ve now posted an answer of my own, which uses <code>memmove</code> in an aggressive manner, in order to fix the issue. Any feedback appreciated."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437427650, "post_id": 31429487, "comment_id": 51014540, "body": "And, returning to your answer, @black. I have downvoted because of the use of <code>memcpy</code>. That single line can&#39;t be inserted in my program - because the memory overlaps and <code>memcpy</code> can&#39;t be used with overlapping memory. Anyway, I guess you meant <code>sizeof(*msg)</code> instead of <code>sizeof(msg)</code>."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437428530, "post_id": 31429487, "comment_id": 51014896, "body": "@AaronMcDaid Feel free to do that; but that&#39;s not a reason for downvoting imho. If the memory overlaps use <i>memmove</i> which is just for that."}], "tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 1, "last_activity_date": 1437428718, "last_edit_date": 1437428718, "creation_date": 1436960679, "answer_id": 31429487, "question_id": 31429214, "link": "https://stackoverflow.com/questions/31429214/simplest-rule-of-thumb-to-avoid-breaking-strict-aliasing-rules/31429487#31429487", "title": "Simplest rule of thumb to avoid breaking strict-aliasing rules?", "body": "<blockquote>\n  <p>My understanding is that any attempt to write through one of these\n  will render the other pointer essentially invalid.</p>\n</blockquote>\n\n<p>As long as you don't access the type-punned pointer, the other, \"official\" one is ok. However, if you do that, it will cause <em>undefined behavior</em>, which may just work, do what you said or something out of this galaxy, including making the other pointer invalid. Compilers can treat UB at their pleasure.</p>\n\n<p>The only way to make <code>buff</code> a valid pointer to <code>Msg</code> is <code>memcpy</code>/<code>memmove</code>, according to the standard:</p>\n\n<pre><code>memcpy( (void*)msg, (const void*) buff, sizeof (*msg));\n</code></pre>\n\n<p>Also, what triggers UB, is not only writing but also <em>reading</em> or whatever other way that accesses the object:</p>\n\n<blockquote>\n  <p>If a program <strong>attempts to access</strong> the stored value of an object through\n  an lvalue of other than one of the following types <strong>the behavior is\n  undefined</strong>:</p>\n</blockquote>\n\n<p>Some compilers also allow \"suspending\" that rule such as GCC, clang and ICC (probably also MSVC) but that cannot be considered portable or standard behavior.\nFurther techniques, and their code generation analysis, are thoroughly analyzed <a href=\"http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html\" rel=\"nofollow\">here</a>.</p>\n\n<h2>Do you really need to break the strict-aliasing rule?</h2>\n\n<p>Most of the times, no, you do not need that. There are <a href=\"https://stackoverflow.com/questions/1577161/passing-a-structure-through-sockets-in-c\">ways and ways</a> to overcome that problem that involve perfectly legal solutions.\nIn the above case, simply store a plain pointer within the <code>struct</code> and send each member in a determined format. </p>\n"}, {"comments": [{"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436961710, "post_id": 31429495, "comment_id": 50829919, "body": "&quot;If you use a different type, you get UB&quot;. That seems so broad as to write all typepunning in C++ as UB? Surely something is allowed? I guess I object to the word &#39;use&#39; here as it is pretty vague. Does the initial cast count as &quot;use&quot;. Or do you have to read/write through the casted pointer."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436961788, "post_id": 31429495, "comment_id": 50829969, "body": "A really dumb short example to clarify my previous comment: <code>int main() { long x = 5; long *xp = &amp;x; int *ip = (int*) xp; *ip = 4; } </code>  Is this UB?"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436962651, "post_id": 31429495, "comment_id": 50830587, "body": "The justification for the strict aliasing rule is usually given in terms of optimizations that assume that certain pointers/lvalues point to different data. By retiring one pointer, I am removing this issue and not allowing any inappropriate optimizations, because the compiler can no longer make incorrect optimizations. So, strict aliasing is still an issue even though I&#39;ve worked around the commonly-given reason for the rule?!"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436962840, "post_id": 31429495, "comment_id": 50830741, "body": "@AaronMcDaid If you have two pointers with incompatible types, they are effectively <code>restrict</code> pointers. So the compiler has no obligation to ever update the data seen from one pointer to the other."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436963091, "post_id": 31429495, "comment_id": 50830909, "body": "@Aaron: Union type punning is allowed.   If you need to type pun, that&#39;s how to do it."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 2, "creation_date": 1436963319, "post_id": 31429495, "comment_id": 50831080, "body": "@AaronMcDaid Yes, your <code>int</code>+<code>long</code> example <i>is</i> UB according to the C++ standard. I cannot speak for C."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1436963460, "post_id": 31429495, "comment_id": 50831182, "body": "@Agnew: Then why is it in the list you posted?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1436963576, "post_id": 31429495, "comment_id": 50831268, "body": "@Kevin OK, maybe you&#39;re right. Seems I&#39;ve always misinterpreted that bullet point."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436964734, "post_id": 31429495, "comment_id": 50832153, "body": "@Let_Me_Be, I never implied that it had an &quot; obligation to ever update the data seen from one pointer to the other&quot;. My example is strictly constructed to avoid any assumptions about whether one pointer can see what happened through another pointer."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436965317, "post_id": 31429495, "comment_id": 50832605, "body": "@AaronMcDaid In your example, this line <code>buff = (uint32_t*) msg;</code> can be safely optimized out, as neither buff nor msg have changed."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436967662, "post_id": 31429495, "comment_id": 50834505, "body": "@Let_Me_Be, that line can&#39;t be removed - it <i>does</i> introduce a change. <code>buff</code> is NULL before that line, and non-NULL after that line. This is important, because it means the dereference of buff shortly after (<code>buff[0]</code>) is better-defined because <code>buff</code> is now non-null."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1436967787, "post_id": 31429495, "comment_id": 50834606, "body": "In C++ it is unclear what the type is of malloc&#39;d space. C has a rule that writing into malloc&#39;d space &quot;imprints&quot; the type of the expression doing the writing, but C++ has no such rule. Also it is unclear in C++ whether copying objects into malloc&#39;d space causes lifetime to begin for an object in the malloc&#39;d space. (The standard does not say that it does)"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436967932, "post_id": 31429495, "comment_id": 50834740, "body": "@AaronMcDaid The <code>buff = NULL;</code> will of course go as well. What you have is: set buff to null; buff not used; set buff to original value. This can be completely optimized out."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 7, "last_activity_date": 1436961089, "last_edit_date": 1436961089, "creation_date": 1436960696, "answer_id": 31429495, "question_id": 31429214, "link": "https://stackoverflow.com/questions/31429214/simplest-rule-of-thumb-to-avoid-breaking-strict-aliasing-rules/31429495#31429495", "title": "Simplest rule of thumb to avoid breaking strict-aliasing rules?", "body": "<p>C++ answer: that won't work. The C++ strict aliasing rule explicitly enumerates which types can be used to access an object. If you use a different type, you get UB, even if you've \"retired\" all access methods of a different type. As per C++14 (n4140) 3.10/10, the allowed types are:</p>\n\n<blockquote>\n  <p>If a program attempts to access the stored value of an object through a glvalue of other than one of the\n  following types the behavior is undefined:</p>\n  \n  <ul>\n  <li>the dynamic type of the object,</li>\n  <li>a cv-qualified version of the dynamic type of the object,</li>\n  <li>a type similar (as defined in 4.4) to the dynamic type of the object,</li>\n  <li>a type that is the signed or unsigned type corresponding to the dynamic type of the object,</li>\n  <li>a type that is the signed or unsigned type corresponding to a cv-qualified version of the dynamic type\n  of the object,</li>\n  <li>an aggregate or union type that includes one of the aforementioned types among its elements or nonstatic\n  data members (including, recursively, an element or non-static data member of a subaggregate\n  or contained union),</li>\n  <li>a type that is a (possibly cv-qualified) base class type of the dynamic type of the object,</li>\n  <li>a <code>char</code> or <code>unsigned char</code> type.</li>\n  </ul>\n</blockquote>\n\n<p>\"Similar types,\" as per 4.4, pertain to modifying cv-qualification of multi-level pointers.</p>\n\n<p>So, if you've ever written into an area through a pointer (or other accessor) to one type, you cannot access it through a pointer to a different type (unless sanctioned by 3.10/10), even if you forget the old pointer.</p>\n\n<p>If you've <em>never</em> written to an area through a particular type, casting pointers back and forth is not an issue.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1436966792, "post_id": 31431455, "comment_id": 50833742, "body": "To be clear: Two incompatible pointers pointing to the same memory is OK. It depends what you do what those pointers as to whether you cause UB.  But you can use that as a rule of thumb to make sure you steer well clear of any possible trouble."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1436967358, "post_id": 31431455, "comment_id": 50834243, "body": "&quot;You cannot have two pointers pointing to the same memory.&quot; Yes you can."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1436967438, "post_id": 31431455, "comment_id": 50834306, "body": "@black And this differs from the previous comment how?"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1436967702, "post_id": 31431455, "comment_id": 50834532, "body": "@Let_Me_Be Not much, but you haven&#39;t corrected that in your answer yet, thing you may want to do."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1436967787, "post_id": 31431455, "comment_id": 50834605, "body": "@black The question is about a rule of thumb. Not a definition, or specification. This a good rule to avoid any issues, even though it will forbid valid cases."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436995936, "post_id": 31431455, "comment_id": 50852278, "body": "I think the loop is confusing things. Let&#39;s unroll the loop. The lines of code then (counting as in this answer currently) are 1,2,3,5,6,3,5,6,3,5,6,3,5,6,...  . When <i>exactly</i> does this become UB? If the program was just 1,2,3, would it be defined? What about 1,2,3,5? 1,2,3,5,6? 1,2,3,5,6,3? 1,2,3,5,6,3,5?  My current opinion is that 1,2,3,5,6 is DB (defined behaviour), but 1,2,3,5,6,3 is UB. If you agree, then I have an important follow-up question. Thanks!"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436997175, "post_id": 31431455, "comment_id": 50852806, "body": "@AaronMcDaid If you unroll the loop you will end up with 1,2,5,6,5,6,5,6,5,6,5,6.... The test will never be evaluated. Discussing whether 1,2,3,5,6 or 1,2,3,5,6,3 is UB is meaningless, as that will not be how the code is interpreted."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436999394, "post_id": 31431455, "comment_id": 50853723, "body": "@AaronMcDaid Btw. I think the core misconception that you have trouble grasping is that when it comes to strict aliasing, the undefined behavior isn&#39;t something that happens at runtime, it manifests at compile time."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437029868, "post_id": 31431455, "comment_id": 50863032, "body": "@Let_Me_Be, I do not have that misconception. My question is: if we took lines 1,2,3,5,6 and put them in a program <i>on their own</i> and compiled <i>that short program</i>, would it be UB or not?"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437034578, "post_id": 31431455, "comment_id": 50865699, "body": "@AaronMcDaid Yes, but it most likely wouldn&#39;t manifest. If the condition would be <code>some_buff[0] != 0</code> it would manifest as 1,2,3,5,6 would become 1,2,3."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437036044, "post_id": 31431455, "comment_id": 50866536, "body": "Your edit (the &quot;even simpler example&quot;) is perfect. What if we remove the last line ( <code>printf(&quot;%d\\n&quot;,some_buff[0]);</code>) and replace it with <code>int *another_buff = (int*) manipulator;  printf(&quot;%d\\n&quot;,another_buff[0]);</code>? If this is DB (defined behaviour), then this is <i>very</i> interesting to me. (And thanks for your patience!)"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437036377, "post_id": 31431455, "comment_id": 50866755, "body": "@AaronMcDaid That is still undefined behavior, although the actual behavior of the compilers should be relatively consistent. But what can happen for example is: <code>memset(); int value = some_buff[0]; .... int *another_buff = (int*)manipulator; printf(&quot;%d\\n&quot;,another_buff[0]);</code> in this can I can definitely see the compiler using the cached value from <code>value</code>."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437038786, "post_id": 31431455, "comment_id": 50868351, "body": "In your second example, I agree that <code>value</code> will be cached. But that doesn&#39;t change my understanding of my <code>int *another_buff</code> example. (...to be continued...)"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437038905, "post_id": 31431455, "comment_id": 50868421, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/83411/discussion-between-let-me-be-and-aaron-mcdaid\">continue this discussion in chat</a>."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437038944, "post_id": 31431455, "comment_id": 50868451, "body": "Maybe we should back up a little. The memory is <code>memset</code> to zero. Then there is <code>whatever *manipulator = (whatever*)some_buff;</code> and <code>manipulate(manipulator);</code>. Does the <code>manipulate</code> function &#39;know&#39; that the data has been zero-ed out earlier? If so, how is it entitled to know this. If not, then why do we zero it?"}], "tags": [], "owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "is_accepted": false, "score": 1, "last_activity_date": 1437035318, "last_edit_date": 1437035318, "creation_date": 1436966101, "answer_id": 31431455, "question_id": 31429214, "link": "https://stackoverflow.com/questions/31429214/simplest-rule-of-thumb-to-avoid-breaking-strict-aliasing-rules/31431455#31431455", "title": "Simplest rule of thumb to avoid breaking strict-aliasing rules?", "body": "<p>The rule is:</p>\n\n<blockquote>\n  <p>\"Unless the pointers are of compatible types. You cannot have two\n  pointers pointing to the same memory.\"</p>\n</blockquote>\n\n<p>Here is a simpler example of an endless cycle:</p>\n\n<pre><code>1: int *some_buff = malloc(sizeof(whatever));\n2: memset(some_buff,0,sizeof(whatever));\n3: while (some_buff[0] == 0)\n4: {\n5:     whatever *manipulator = (whatever*)some_buff; \n6:     manipulate(manipulator);\n7: }\n</code></pre>\n\n<p>This is essentially how the compiler will/can approach this code:</p>\n\n<blockquote>\n  <p>The test for <code>some_buff[0] == 0</code> can be optimized out, because there\n  is no valid way how the <code>some_buff[0]</code> could be changed. It is\n  accessed through <code>manipulator</code>, but <code>manipulator</code> isn't of a\n  compatible type, therefore according to the strict aliasing rule, the\n  value of <code>some_buff[0]</code> cannot change.</p>\n</blockquote>\n\n<p>If you want an even more simpler example:</p>\n\n<pre><code>int *some_buff = malloc(sizeof(whatever));\nmemset(some_buff,0,sizeof(whatever));\nwhatever *manipulator = (whatever*)some_buff;\nmanipulate(manipulator);\nprintf(\"%d\\n\",some_buff[0]);\n</code></pre>\n\n<blockquote>\n  <p>It is perfectly OK for this code to always print zero and it doesn't matter what manipulate does.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436995434, "post_id": 31432992, "comment_id": 50852038, "body": "I am not claiming that setting the pointer to NULL actually has any meaning to the compiler. The purpose of that is to remind me not to use that pointer any more. And because it forces me to stop using that pointer, then I am not &quot;access[ing] the same memory location through pointers of incompatible types.&quot; Or, more precisely I&#39;m not accessing the same location with two differents <i>at the same time</i>. There is a clear &#39;handover&#39;, so to speak, at one point in the code (the cast)"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1436995568, "post_id": 31432992, "comment_id": 50852104, "body": "... it&#39;s entirely possible over the lifetime of a program that, due to <code>malloc</code> and <code>free</code>, you have two different pointers of two different types pointing at the same location. And that&#39;s obviously not a problem. Therefore, there can only be a problem is they two pointers exist at the same time. I think."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1436969888, "creation_date": 1436969888, "answer_id": 31432992, "question_id": 31429214, "link": "https://stackoverflow.com/questions/31429214/simplest-rule-of-thumb-to-avoid-breaking-strict-aliasing-rules/31432992#31432992", "title": "Simplest rule of thumb to avoid breaking strict-aliasing rules?", "body": "<p>Your suggestion doesn't help at all, because it doesn't matter what value you assign your pointer variable after using it. You do access the same memory location through pointers of incompatible types.</p>\n\n<p>For C (<strong>not</strong> for C++), there is at least one safe thing to do other than avoiding type punning: You can safely cast pointers to structs, given that the one struct type just adds fields to the end of the other. This even works when the longer struct just contains the shorter as its first member: A pointer to a struct points to its first member. So e.g. these are safe <strong>in C</strong>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct\n{\n    int id;\n    const char *name;\n} base_t;\n\ntypedef struct\n{\n    base_t base;\n    long foo;\n} derived_t;\n\nderived_t *d = malloc(sizeof derived_t);\nbase_t *b = (base_t *)d;\nint *i = (int *)d;\n</code></pre>\n"}], "owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 3, "answer_count": 4, "score": 12, "last_activity_date": 1438448887, "creation_date": 1436959917, "last_edit_date": 1495539946, "question_id": 31429214, "link": "https://stackoverflow.com/questions/31429214/simplest-rule-of-thumb-to-avoid-breaking-strict-aliasing-rules", "title": "Simplest rule of thumb to avoid breaking strict-aliasing rules?", "body": "<p>While read another question about aliasing ( <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">What is the strict aliasing rule?</a> ) and its top answer, I realised I still wasn't entirely satisfied even though I think I understood it all there.</p>\n\n<p>(<em>This question is now tagged as C and C++. If your answer refers to just one of these, please clarify which.</em>)</p>\n\n<p>So I want to understand how to do some development in this area, casting pointers in aggressive ways, but with a simple conservative rule that ensures I don't introduce UB. I have a proposal here for such a rule.</p>\n\n<p>(<em>Update: of course, we could just avoid all type punning. But that's not very educational. Unless of course, there are literally <strong>zero</strong> well-defined exceptions, beyond the <code>union</code> exception.</em>)</p>\n\n<p><strong><em>Update 2: I understand now why the method proposed in this question is not correct. However, it is still interesting to know whether a simple, safe, alternative exists. As of now, there is at least one answer that proposes such a solution.</em></strong></p>\n\n<p>This is the original example:</p>\n\n<pre><code>int main()\n{\n   // Get a 32-bit buffer from the system\n   uint32_t* buff = malloc(sizeof(Msg));\n\n   // Alias that buffer through message\n   Msg* msg = (Msg*)(buff);\n\n   // Send a bunch of messages    \n   for (int i =0; i &lt; 10; ++i)\n   {\n      msg-&gt;a = i;\n      msg-&gt;b = i+1;\n      SendWord(buff[0] );\n      SendWord(buff[1] );   \n   }\n}\n</code></pre>\n\n<p>The important line is:</p>\n\n<pre><code>Msg* msg = (Msg*)(buff);\n</code></pre>\n\n<p>which means there are now two pointers (of different types) pointing to the same data. My understanding is that any attempt to write through one of these will render the other pointer essentially invalid. (By 'invalid' I mean that we can ignore it safely, but that reading/writing through an invalid pointer is UB.)</p>\n\n<pre><code>Msg* msg = (Msg*)(buff);\nmsg-&gt;a = 5;           // writing to one of the two pointers\nSendWord(buff[0] );   // renders the other, buffer, invalid\n</code></pre>\n\n<p>Therefore, my proposed rule is that, once you create the second pointer (i.e. create <code>msg</code>), you should immediately and permanently 'retire' the other pointer.</p>\n\n<p>What better way to retire a pointer than to set it to NULL:</p>\n\n<pre><code>Msg* msg = (Msg*)(buff);\nbuff = NULL; // 'retire' buff. now just one pointer\nmsg-&gt;a = 5;\n</code></pre>\n\n<p>Now, the last line assigning to <code>msg-&gt;a</code> can't invalidate any other pointers because, of course, there are none.</p>\n\n<p>Next, of course, we have to find a way to call <code>SendWord(buff[1] );</code>. This can't be done immediately because <code>buff</code> has been retired and is NULL. My proposal now is to cast back again.</p>\n\n<pre><code>Msg* msg = (Msg*)(buff);\nbuff = NULL; // 'retire' buff. now just one pointer\nmsg-&gt;a = 5;\n\nbuff = (uint32_t*)(msg);   // cast back again\nmsg = NULL;                // ... and now retire msg\n\nSendWord(buff[1] );\n</code></pre>\n\n<p><em>In summary, every time you cast a pointer between two 'incompatible' types (I'm not sure how to define 'incompatible'?) then you should immediately 'retire' the old pointer. Set it to NULL explicitly if that helps you to enforce the rule.</em></p>\n\n<p>Is this conservative enough?</p>\n\n<p>Perhaps this is too conservative and has other problems, but I first want to know if this is conservative enough to avoid introducing UB via offending strict aliasing.</p>\n\n<p>Finally, recap the original code, modified to use this rule:</p>\n\n<pre><code>int main()\n{\n   // Get a 32-bit buffer from the system\n   uint32_t* buff = malloc(sizeof(Msg));\n\n   // Send a bunch of messages    \n   for (int i =0; i &lt; 10; ++i)\n   {  // here, buff is 'valid'\n\n      Msg* msg = (Msg*)(buff);\n      buff = NULL;\n      // here, only msg is 'valid', as buff has been retired\n      msg-&gt;a = i;\n      msg-&gt;b = i+1;\n      buff = (uint32_t*) msg;  // switch back to buff being 'valid'\n      msg = NULL;              // ... by retiring msg\n      SendWord(buff[0] );\n      SendWord(buff[1] );\n      // now, buff is valid again and we can loop around again\n   }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1436959955, "post_id": 31429179, "comment_id": 50828790, "body": "Please do not write code in this way."}, {"owner": {"reputation": 1405, "user_id": 1764528, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6da340d12df3f5e4c7a53681a9ac91e?s=128&d=identicon&r=PG", "display_name": "DollarAkshay", "link": "https://stackoverflow.com/users/1764528/dollarakshay"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436960010, "post_id": 31429179, "comment_id": 50828814, "body": "@SouravGhosh Dont worry its for a code golf competition :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1436960096, "post_id": 31429179, "comment_id": 50828864, "body": "Then I believe you know the answer to this <i>depends</i> on lot of things. :-)"}, {"owner": {"reputation": 1405, "user_id": 1764528, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6da340d12df3f5e4c7a53681a9ac91e?s=128&d=identicon&r=PG", "display_name": "DollarAkshay", "link": "https://stackoverflow.com/users/1764528/dollarakshay"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436960252, "post_id": 31429179, "comment_id": 50828956, "body": "No bro I don&#39;t :( That why I asked.Even if you mention one of the reasons then I wouldn&#39;t mind"}], "answers": [{"comments": [{"owner": {"reputation": 1405, "user_id": 1764528, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6da340d12df3f5e4c7a53681a9ac91e?s=128&d=identicon&r=PG", "display_name": "DollarAkshay", "link": "https://stackoverflow.com/users/1764528/dollarakshay"}, "edited": false, "score": 0, "creation_date": 1436977123, "post_id": 31430186, "comment_id": 50841535, "body": "Nope it will loop till <code>t-- == 0</code>"}], "tags": [], "owner": {"reputation": 817, "user_id": 4612127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77e5b33fd361733419766d29957eb203?s=128&d=identicon&r=PG&f=1", "display_name": "kaldoran", "link": "https://stackoverflow.com/users/4612127/kaldoran"}, "is_accepted": false, "score": 0, "last_activity_date": 1436962660, "creation_date": 1436962660, "answer_id": 31430186, "question_id": 31429179, "link": "https://stackoverflow.com/questions/31429179/scanf-prevents-runtime-error-when-inside-conditon-block/31430186#31430186", "title": "scanf() prevents runtime error when inside conditon block", "body": "<pre><code>s,x=\"%d\";\nmain(a,t){\nfor(scanf(x,&amp;t);t--;s+=a*(a&gt;0))\n    scanf(x,&amp;a);\nprintf(x, s);\n}\n</code></pre>\n\n<p>This one do not work due to \nfor(scanf(x,&amp;t) <strong>;t--;</strong> s+=a*(a>0))</p>\n\n<p>Your stop condition is <code>t--</code>, you are going to do an endless loop.</p>\n"}], "owner": {"reputation": 1405, "user_id": 1764528, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6da340d12df3f5e4c7a53681a9ac91e?s=128&d=identicon&r=PG", "display_name": "DollarAkshay", "link": "https://stackoverflow.com/users/1764528/dollarakshay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436962660, "creation_date": 1436959790, "last_edit_date": 1592644375, "question_id": 31429179, "link": "https://stackoverflow.com/questions/31429179/scanf-prevents-runtime-error-when-inside-conditon-block", "title": "scanf() prevents runtime error when inside conditon block", "body": "<p>Why does this program run <a href=\"https://ideone.com/A7oVzp\" rel=\"nofollow noreferrer\">correctly</a></p>\n<pre><code>s,x=&quot;%d&quot;;\nmain(a,t){\nfor(scanf(x,&amp;t);t--&amp;&amp;scanf(x,&amp;a);)\n    s+=(a&gt;0)*a;\nprintf(x,s);\n}\n</code></pre>\n<p>And this program doesn't , and gives a <a href=\"https://ideone.com/bF4arv\" rel=\"nofollow noreferrer\">Runtime Error</a></p>\n<pre><code>s,x=&quot;%d&quot;;\nmain(a,t){\nfor(scanf(x,&amp;t);t--;s+=a*(a&gt;0))\n    scanf(x,&amp;a);\nprintf(x, s);\n}\n</code></pre>\n<p>My second program works only if I give <code>return 0;</code> at the end.<br>\nWhat is it that putting <code>scanf()</code> inside  the condition block makes it work ?</p>\n<h2>Sample Input :</h2>\n<pre><code>4\n5\n-5\n6\n-1\n</code></pre>\n"}, {"tags": ["c", "shellcode"], "comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1436963380, "post_id": 31428728, "comment_id": 50831124, "body": "It does not compile because a semicolon is missing after <code>int *ret</code> ;-)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1436964913, "post_id": 31428728, "comment_id": 50832292, "body": "Sems to be a system hack. The program write shellcode bytes to stack and exit main without return instruction, that is undefined behaviour."}, {"owner": {"reputation": 313, "user_id": 3118363, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000117339566/picture?type=large", "display_name": "Davies Jeffrey", "link": "https://stackoverflow.com/users/3118363/davies-jeffrey"}, "edited": false, "score": 0, "creation_date": 1436967213, "post_id": 31428728, "comment_id": 50834100, "body": "this line (*ret) = (int)shelcode; why did they have to use the bracket? could they not have written it as  ret = (int)shellcode;"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1436969785, "post_id": 31428728, "comment_id": 50836207, "body": "Brackets are verbose and useless, but the code could be *ret=(int)shellcode"}, {"owner": {"reputation": 313, "user_id": 3118363, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000117339566/picture?type=large", "display_name": "Davies Jeffrey", "link": "https://stackoverflow.com/users/3118363/davies-jeffrey"}, "edited": false, "score": 0, "creation_date": 1436970789, "post_id": 31428728, "comment_id": 50837009, "body": "we use the *ret when declaring a pointer,  and then we use the ret = &amp;variable, when assigning an address of a variable to the ret pointer  and then we use the *ret again when trying to access the value inside the ret pointer...   am i correct on this ?"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 3118363, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000117339566/picture?type=large", "display_name": "Davies Jeffrey", "link": "https://stackoverflow.com/users/3118363/davies-jeffrey"}, "edited": false, "score": 0, "creation_date": 1436974632, "post_id": 31434461, "comment_id": 50839803, "body": "wow! this is somewhat overwhelming, but i think the idea was to to overwrite the eip to point to the shell-code or something, I&#39;m having problem studying assembly because i&#39;m on x86_64 Linux, and there&#39;s hardly a good book to give me hands-on tutorial"}], "tags": [], "owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "is_accepted": false, "score": 2, "last_activity_date": 1436973569, "creation_date": 1436973569, "answer_id": 31434461, "question_id": 31428728, "link": "https://stackoverflow.com/questions/31428728/please-help-me-understand-this-main-code/31434461#31434461", "title": "please help me understand this main() code", "body": "<p>First of all some fixes to let the code work:</p>\n\n<ul>\n<li>Append <strong>;</strong> to line 7 to mark the end of your instruction.</li>\n<li>Remove other strings after the first one in line 3 because this instruction line expects to assign to char variables.</li>\n</ul>\n\n<p>Furthermore <code>stdlib</code> isn't required because nothing of it is used, the assignment to <code>ret</code> can be skipped by directly using the result in line 8 and your <code>shellcode</code> string can be shortened to 3 characters because just 4 bytes are used and C strings end with a termination character anyway.</p>\n\n<pre><code>char shellcode[] = \"\\xbb\\x14\\x00\";\n\nint main()\n{\n    int *ret;\n    *((int*)&amp;ret + 2) = (int)shellcode;\n}\n</code></pre>\n\n<p>Compiling this with <code>gcc -o test.o -c test.c</code> for x86 target outputs following assembly (with comments by me):</p>\n\n<pre><code>Disassembly of section .text:\n\n00000000 &lt;_main&gt;:                                           ; int main(){\n   0:   55                      push   %ebp                 ; save base pointer on stack\n   1:   89 e5                   mov    %esp,%ebp            ; save current stack in base pointer\n   3:   83 e4 f0                and    $0xfffffff0,%esp     ; align stack by 16\n   6:   83 ec 10                sub    $0x10,%esp           ; reserve 16 bytes on stack (including &lt;int *ret;&gt;)\n   9:   e8 00 00 00 00          call   e &lt;_main+0xe&gt;        ; just move program pointer forward for the following instruction to be aligned\n   e:   8d 44 24 0c             lea    0xc(%esp),%eax       ; %eax = &amp;ret\n  12:   83 c0 08                add    $0x8,%eax            ; %eax = (int*)%eax + 2\n  15:   ba 00 00 00 00          mov    $0x0,%edx            ; %edx = (int)shellcode\n  1a:   89 10                   mov    %edx,(%eax)          ; *(%eax) = %edx\n  1c:   c9                      leave                       ; restore stack &amp; base pointer from enter\n  1d:   c3                      ret                         ; }\n  1e:   90                      nop\n  1f:   90                      nop\n\nDisassembly of section .data:\n\n00000000 &lt;_shellcode&gt;:\n   0:   bb                      .byte 0xbb                  ; char shellcode[] = \"\\xbb...\n   1:   14 00                   adc    $0x0,%al             ; ...\\x14\\x00...\n    ...                                                     ; ...\";    (should be the termination character \\x00)\n</code></pre>\n\n<p>Assuming the stack alignment does nothing, your 4 <code>shellcode</code> bytes get copied on the stack behind <code>ret</code> and the saved base pointer, so out of the function scope.\nNow thinking about <code>int main()</code> is a shortcut for <code>int main(int argc, char** argv)</code> leads us to the conclusion: these 4 bytes replace <code>argv</code> - the address to the command line string, passed in main, was overridden. But for what?</p>\n"}], "owner": {"reputation": 313, "user_id": 3118363, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000117339566/picture?type=large", "display_name": "Davies Jeffrey", "link": "https://stackoverflow.com/users/3118363/davies-jeffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 2, "answer_count": 1, "score": -1, "last_activity_date": 1436973569, "creation_date": 1436958427, "last_edit_date": 1436961059, "question_id": 31428728, "link": "https://stackoverflow.com/questions/31428728/please-help-me-understand-this-main-code", "title": "please help me understand this main() code", "body": "<p>Please could someone help me understand what's going on here. on the main program actually.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nchar shellcode[] = \"\\xbb\\x14\\x00\\x00\\x00\", \"\\xb8\\x01\\x00\\x00\\x00\",\"\\xcd\\x00\";\n\nint main()\n{\n    int *ret\n    ret = (int *) &amp;ret + 2;\n    (*ret) = (int)shellcode;\n}\n</code></pre>\n"}, {"tags": ["c", "pointer-to-pointer"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1436958445, "post_id": 31428708, "comment_id": 50827860, "body": "Please <a href=\"http://stackoverflow.com/q/605845/2173917\">see why not to cast</a> the return value of <code>malloc()</code> and family in <code>C</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436958653, "post_id": 31428708, "comment_id": 50827992, "body": "You can only compare pointers to related pointers (i.e. two pointersthat are both pointing to the same array) or to <code>NULL</code>. And if you compare with <code>NULL</code> you can only check for equality or inequality, not any other relational operator."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1437006694, "post_id": 31428708, "comment_id": 50855971, "body": "<code>if (myOwnStructPointer &gt; 0)</code> causes undefined behaviour. It should be <code>if (myOwnStructPointer != 0)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1436959001, "last_edit_date": 1495535209, "creation_date": 1436958664, "answer_id": 31428801, "question_id": 31428708, "link": "https://stackoverflow.com/questions/31428708/return-value-3221225477-occurs-when-i-use-pointer-to-struct-pointer-in-code/31428801#31428801", "title": "Return value 3221225477 occurs when I use pointer to struct pointer in code", "body": "<p>in your code,</p>\n\n<pre><code> pointerToMyOwnStructPointer = (myIntegers_t**)myOwnStructPointer;\n</code></pre>\n\n<p>is very wrong. You need to change that to</p>\n\n<pre><code>pointerToMyOwnStructPointer = &amp;myOwnStructPointer;\n</code></pre>\n\n<p>to get the expected behaviour.</p>\n\n<p>To elaborate, </p>\n\n<ul>\n<li><code>myOwnStructPointer</code> is a pointer-to-type.</li>\n<li><code>pointerToMyOwnStructPointer</code> is a pointer-to-pointer-to type.</li>\n</ul>\n\n<p>they are not <em>equivalent</em>. <em>Just</em> because they are both pointers, you cannot simply <em>cast</em> value of one type to another and expect that to work. The cast is wrong (<em>and not even required</em>). So,</p>\n\n<ul>\n<li>Do not cast</li>\n<li>Enable compiler warnings.</li>\n</ul>\n\n<p>Most of the time, your compiler will save you, through a warning, at least.</p>\n\n<hr>\n\n<p>Note: Please <a href=\"https://stackoverflow.com/q/605845/2173917\">see why not to cast</a> the return value of <code>malloc()</code> and family in <code>C</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436969572, "last_edit_date": 1436969572, "creation_date": 1436958856, "answer_id": 31428858, "question_id": 31428708, "link": "https://stackoverflow.com/questions/31428708/return-value-3221225477-occurs-when-i-use-pointer-to-struct-pointer-in-code/31428858#31428858", "title": "Return value 3221225477 occurs when I use pointer to struct pointer in code", "body": "<p>Only an improvement suggestion</p>\n\n<p>Also, the correct <code>malloc</code> way of allocation would be</p>\n\n<pre><code>myIntegers_t * myOwnStructPointer = malloc(sizeof(myIntegers_t));\nif (myOwnStructPointer == NULL)\n    return 1;\n\n. . .    // else do something with myOwnStructPointer;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1436958947, "creation_date": 1436958947, "answer_id": 31428889, "question_id": 31428708, "link": "https://stackoverflow.com/questions/31428708/return-value-3221225477-occurs-when-i-use-pointer-to-struct-pointer-in-code/31428889#31428889", "title": "Return value 3221225477 occurs when I use pointer to struct pointer in code", "body": "<p>There <em>would</em> be errors or warnings if you didn't have that cast in the assignment</p>\n\n<pre><code>pointerToMyOwnStructPointer = (myIntegers_t**)myOwnStructPointer;\n</code></pre>\n\n<p>That's because <code>myOwnStructPointer</code> is a pointer to your structure, but <code>pointerToMyOwnStructPointer</code> is a pointer to a pointer to your structure, and those two types are totally incompatible.</p>\n\n<p>The compiler will interpret it like this:</p>\n\n<pre>\n+-----------------------------+    +--------------+    +--------+\n| pointerToMyOwnStructPointer | -> | some address | -> | struct |\n+-----------------------------+    +--------------+    +--------+\n</pre>\n\n<p>So when you do your assignment and then use <code>pointerToMyOwnStructPointer</code> it lead to <em>undefined behavior</em> since it's not pointing to a pointer.</p>\n\n<hr>\n\n<p>The lesson here is that you should almost <em>never</em> insert type-casting to solve compiler errors or warnings, the errors and warnings are there for a reason, and warnings often tell you that you are doing something suspect that might lead to undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5119048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f989abb477f60f827318a1fc568753ec?s=128&d=identicon&r=PG&f=1", "display_name": "Mika", "link": "https://stackoverflow.com/users/5119048/mika"}, "is_accepted": false, "score": 0, "last_activity_date": 1436964237, "creation_date": 1436964237, "answer_id": 31430754, "question_id": 31428708, "link": "https://stackoverflow.com/questions/31428708/return-value-3221225477-occurs-when-i-use-pointer-to-struct-pointer-in-code/31430754#31430754", "title": "Return value 3221225477 occurs when I use pointer to struct pointer in code", "body": "<p>This was my original code and now it is working after I added one '&amp;' mark. Thanks a lot of your support!!</p>\n\n<p>Any comments about this code?  I think there is cast for the return value of malloc function... is that problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define OK 1\n#define FAILURE 0\n\ntypedef struct{\n    int a;\n    int b;\n}myIntegers_t;\n\nvoid * open(void);\nint close(void ** pointerToMyOwnStructPointer );\n\nvoid main(void)\n{\n    void * myVoidParameter;\n\n    if(myVoidParameter = open())\n    {\n        printf(\"\\n\\nPORT OPENED SUCCESSFULLY!!\\n\\n\");\n\n        myIntegers_t ** pointerToMyVoidParameter = (myIntegers_t**)&amp;myVoidParameter;\n\n        printf(\"\\n\");\n        printf(\"Value of pointerToMyVoidParameter-&gt;a = %d\\n\", (*pointerToMyVoidParameter)-&gt;a);\n        printf(\"Value of pointerToMyVoidParameter-&gt;b = %d\\n\", (*pointerToMyVoidParameter)-&gt;b);\n\n        if(close(&amp;myVoidParameter))\n        {\n            printf(\"\\n\\nPORT CLOSED SUCCESSFULLY!!\\n\");\n        }\n        else\n        {\n            printf(\"\\n\\nFAILURE IN PORT CLOSING!!!\\n\");\n        }\n    }\n    else\n    {\n        printf(\"\\n\\nFAILURE IN PORT OPENING!!!\\n\");\n    }\n}\n\nvoid * open(void){\n\n    myIntegers_t *myOwnStructPointer = (myIntegers_t*)malloc(sizeof(myIntegers_t));\n\n    if (myOwnStructPointer)\n    {   \n        myOwnStructPointer-&gt;a = 2;\n        myOwnStructPointer-&gt;b = 8;\n\n        printf(\"\\n\");\n        printf(\"Value of myOwnStructPointer-&gt;a = %d\\n\", myOwnStructPointer-&gt;a);\n        printf(\"Value of myOwnStructPointer-&gt;b = %d\\n\", myOwnStructPointer-&gt;b);\n\n        return myOwnStructPointer;\n    }\n    else\n    {\n        return NULL;\n    }\n}\n\nint close(void ** pointerToMyOwnStructPointer ){\n    int result = OK;\n    myIntegers_t ** descriptor = (myIntegers_t**)pointerToMyOwnStructPointer;\n\n    if(descriptor == NULL || *descriptor == NULL)\n    {\n        return FAILURE;\n    }\n\n    printf(\"\\n\");\n    printf(\"Value of descriptor-&gt;a = %d\\n\", (*descriptor)-&gt;a);\n    printf(\"Value of descriptor-&gt;b = %d\\n\", (*descriptor)-&gt;b);\n\n\n    (*descriptor)-&gt;a = 0;\n    (*descriptor)-&gt;b = 0;\n    free((void*)*descriptor);\n    *pointerToMyOwnStructPointer = NULL;\n\n    return result;  \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 2129573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f795a5364be4045c615cec55fcd755?s=128&d=identicon&r=PG", "display_name": "Mikkel Christiansen", "link": "https://stackoverflow.com/users/2129573/mikkel-christiansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1437006236, "creation_date": 1437006236, "answer_id": 31443434, "question_id": 31428708, "link": "https://stackoverflow.com/questions/31428708/return-value-3221225477-occurs-when-i-use-pointer-to-struct-pointer-in-code/31443434#31443434", "title": "Return value 3221225477 occurs when I use pointer to struct pointer in code", "body": "<p>Answer to your new question.</p>\n\n<p>You should always cast malloc in c++ and never cast malloc in c, as already stated by Shreevardhan and Sourav Ghosh.</p>\n\n<p>All of your void* are in fact myIntegers_t*, so make them myIntegers_t*. It both benefits the reader, but also makes it possible for the compiler to spot errors.</p>\n\n<p>All of your void** are in fact myIntegers_t**. See above.</p>\n\n<p>Unless the contents of a and b is secret, you don't have to make them 0 before freeing. And free doesn't need its argument to be cast to a void*, since void* are compatible with all pointers. It only needs the pointer to have been made by malloc, calloc or realloc.</p>\n\n<p>I don't think the extra descriptor helps anything, except perhaps readability, but then just rename pointerToMyOwnStructPointer.</p>\n"}], "owner": {"reputation": 11, "user_id": 5119048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f989abb477f60f827318a1fc568753ec?s=128&d=identicon&r=PG&f=1", "display_name": "Mika", "link": "https://stackoverflow.com/users/5119048/mika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2797, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1438662319, "creation_date": 1436958379, "last_edit_date": 1438662319, "question_id": 31428708, "link": "https://stackoverflow.com/questions/31428708/return-value-3221225477-occurs-when-i-use-pointer-to-struct-pointer-in-code", "title": "Return value 3221225477 occurs when I use pointer to struct pointer in code", "body": "<p>What is wrong in my code below?  </p>\n\n<p>There are no errors or warnings when I compile it by Dev C++ compiler. But after I run my program there is execution error and following return value text: </p>\n\n<blockquote>\n  <p>Process exited after 5.1 seconds with return value 3221225477<br>\n  Press any key to continue . . .</p>\n</blockquote>\n\n<p>Any idea what is wrong?</p>\n\n<p>When I use debug feature, error occurs in that line:</p>\n\n<pre><code>printf(\"Value of (*pointerToMyOwnStructPointer)-&gt;a = %d\\n\", (*pointerToMyOwnStructPointer)-&gt;a);\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct{\n    int a;\n    int b;\n}myIntegers_t;\n\nint main (void)\n{\n    myIntegers_t *myOwnStructPointer = NULL;\n    myIntegers_t **pointerToMyOwnStructPointer = NULL;\n\n    myOwnStructPointer = (myIntegers_t*)malloc(sizeof(myIntegers_t));\n\n    if (myOwnStructPointer &gt; 0)\n    {   \n        myOwnStructPointer-&gt;a = 2;\n        myOwnStructPointer-&gt;b = 8;\n\n        printf(\"Value of myOwnStructPointer-&gt;a = %d\\n\", myOwnStructPointer-&gt;a);\n        printf(\"Value of myOwnStructPointer-&gt;b = %d\\n\", myOwnStructPointer-&gt;b);\n\n        pointerToMyOwnStructPointer = (myIntegers_t**)myOwnStructPointer;\n\n        printf(\"\\n\");\n        printf(\"Value of (*pointerToMyOwnStructPointer)-&gt;a = %d\\n\", (*pointerToMyOwnStructPointer)-&gt;a);\n        printf(\"Value of (*pointerToMyOwnStructPointer)-&gt;b = %d\\n\", (*pointerToMyOwnStructPointer)-&gt;b);  \n    }\n    else\n    {\n        return -1;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "filesystems", "kernel", "ext4"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436969269, "post_id": 31428641, "comment_id": 50835826, "body": "Probably not, and why do you ask? It looks like a reliability nightmare. So it is certainly <b>a bad idea</b>"}, {"owner": {"reputation": 2479, "user_id": 538753, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba68a1523850a7648cd9edf81ece53a0?s=128&d=identicon&r=PG", "display_name": "zJay", "link": "https://stackoverflow.com/users/538753/zjay"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1437013861, "post_id": 31428641, "comment_id": 50857799, "body": "@BasileStarynkevitch I&#39;m implementing a fuse program, which needs to operate remote filesystem, the fuse low-level API works with i-node number. However, fuse high-level API works with path, but I think that there will be some performance loss."}, {"owner": {"reputation": 9790, "user_id": 544721, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/690b6f4d543b41e22e795a42ca67dfc2?s=128&d=identicon&r=PG", "display_name": "Grzegorz Wierzowiecki", "link": "https://stackoverflow.com/users/544721/grzegorz-wierzowiecki"}, "edited": false, "score": 0, "creation_date": 1495371716, "post_id": 31428641, "comment_id": 75215074, "body": "Nice answer with rationale &quot;why?&quot; : <a href=\"http://stackoverflow.com/a/36092651/544721\">stackoverflow.com/a/36092651/544721</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436960869, "creation_date": 1436960869, "answer_id": 31429548, "question_id": 31428641, "link": "https://stackoverflow.com/questions/31428641/how-can-i-access-file-by-inode-on-linux/31429548#31429548", "title": "How can I access file by inode on Linux", "body": "<p>Not sure if I understood your problem correctly but:<br>You can start with \"/\" directory and proceed recursively (or any loop for that matter) with children. Compare the inode value with <code>strcut stat.ino_t</code>. Once you find it, open the path/file.</p>\n"}, {"tags": [], "owner": {"reputation": 743, "user_id": 4468859, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ff8f77110356c10e86a332aaf205437e?s=128&d=identicon&r=PG&f=1", "display_name": "Fattaneh Talebi", "link": "https://stackoverflow.com/users/4468859/fattaneh-talebi"}, "is_accepted": false, "score": 1, "last_activity_date": 1436962699, "creation_date": 1436962699, "answer_id": 31430195, "question_id": 31428641, "link": "https://stackoverflow.com/questions/31428641/how-can-i-access-file-by-inode-on-linux/31430195#31430195", "title": "How can I access file by inode on Linux", "body": "<p>I don't know if there is an easier way or not but you can do this with bash. with ls -i command you can see the inodes too,</p>\n\n<pre><code>$ ls -i\n11147622 file.txt\n</code></pre>\n\n<p>the first column is the inode number, the blow command shows the inodes in current directory</p>\n\n<pre><code>$ ls -i | awk {'print $1'}\n</code></pre>\n\n<p>so you need to check the inodes from / too all it's subdirectories until find it</p>\n\n<pre><code>ls -iR /\n</code></pre>\n\n<p>it shows all subdirectories and there files with there inode number<br/></p>\n\n<p>now you should start from / and use awk to or cut command to have the first column(inode number is in the first column) then compare it with the inode you want to find. </p>\n"}, {"tags": [], "owner": {"reputation": 1235, "user_id": 5114473, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/iTwYV.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5114473/luke"}, "is_accepted": false, "score": 3, "last_activity_date": 1436969047, "last_edit_date": 1492086984, "creation_date": 1436969047, "answer_id": 31432662, "question_id": 31428641, "link": "https://stackoverflow.com/questions/31428641/how-can-i-access-file-by-inode-on-linux/31432662#31432662", "title": "How can I access file by inode on Linux", "body": "<p>I found the question connected concerning similar topic <a href=\"https://unix.stackexchange.com/questions/35292/quickly-find-which-files-belongs-to-a-specific-inode-number\">here</a>.</p>\n\n<p>Summarizing, check out those commands:</p>\n\n<ul>\n<li><code>find /path/to/mountpoint -inum &lt;inode number&gt;</code></li>\n<li><code>sudo debugfs -R 'ncheck 393094' /dev/sdaX 2&gt;/dev/null</code></li>\n</ul>\n\n<p>Hope this helps you investigate further.</p>\n"}], "owner": {"reputation": 2479, "user_id": 538753, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba68a1523850a7648cd9edf81ece53a0?s=128&d=identicon&r=PG", "display_name": "zJay", "link": "https://stackoverflow.com/users/538753/zjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3444, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1563569321, "creation_date": 1436958213, "last_edit_date": 1563569321, "question_id": 31428641, "link": "https://stackoverflow.com/questions/31428641/how-can-i-access-file-by-inode-on-linux", "title": "How can I access file by inode on Linux", "body": "<p>is there any userspace API or third-party kernel module that can help to access file by inode on Linux? </p>\n\n<p>I'm trying to implement something like:</p>\n\n<pre><code>int read_file_by_ino(int ino, int pos, int size, char* buf);\nint write_file_by_ino(int ino, int pos, int size, const char* buf);\nint readdir_by_ino(...);\nint stat_by_ino(...);\n...\n</code></pre>\n\n<p>The program is expected to run under root user, so there's no security requirement to do permission checking.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 4, "creation_date": 1436958275, "post_id": 31428635, "comment_id": 50827742, "body": "for something this small there is no reason not to post the entire code.."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1436958345, "post_id": 31428635, "comment_id": 50827794, "body": "<code>&quot;C:\\conf.ini&quot;</code> --&gt; <code>&quot;C:\\\\conf.ini&quot;</code>. also <code>if (buffer !=NULL)</code> This is redundant."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "edited": false, "score": 1, "creation_date": 1436958704, "post_id": 31428663, "comment_id": 50828018, "body": "thank you for that :). That was exactly what I needed."}, {"owner": {"reputation": 8982, "user_id": 549472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/204826500d9e0377aac56eaafe38c300?s=128&d=identicon&r=PG", "display_name": "LeleDumbo", "link": "https://stackoverflow.com/users/549472/leledumbo"}, "edited": false, "score": 0, "creation_date": 1436959002, "post_id": 31428663, "comment_id": 50828178, "body": "or simply declare it as 2 dimensional array with static size, you declare var of size 100 only so that could be the correct minimum size for the inner arr."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1436958797, "last_edit_date": 1436958797, "creation_date": 1436958284, "answer_id": 31428663, "question_id": 31428635, "link": "https://stackoverflow.com/questions/31428635/why-does-the-c-program-exe-stop-working/31428663#31428663", "title": "Why does the C program(.exe) stop working?", "body": "<p>Assuming a typo in the closing <code>]</code>, and keeping that apart, </p>\n\n<pre><code>  strcpy(arr[i], buffer];\n</code></pre>\n\n<p><code>arr[i]</code> is uninitialized here. Trying to write into uninitialised memory  invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p><strong>Solution:</strong> Before making use of <code>arr[i]</code>, you need to allocate memory to that. You can have a look at <a href=\"http://linux.die.net/man/3/malloc\" rel=\"nofollow\"><code>malloc()</code></a> and family of functions for dynamic memory allocation.</p>\n\n<p>FWIW, you may want to have a look at <a href=\"http://linux.die.net/man/3/free\" rel=\"nofollow\"><code>free()</code></a> also.</p>\n"}], "owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 31428663, "answer_count": 1, "score": -4, "last_activity_date": 1438173958, "creation_date": 1436958207, "last_edit_date": 1438173958, "question_id": 31428635, "link": "https://stackoverflow.com/questions/31428635/why-does-the-c-program-exe-stop-working", "title": "Why does the C program(.exe) stop working?", "body": "<p>I try to access and store the data from a .ini file into an array in my <code>main</code> program. To verify that the data is really stored I also print them out( and they seem to be the right ones). However , every time I run the main program it executes and then theres a pop up window that says that the .exe file has stopped working. Could somebody take a look and tell me what's wrong.</p>\n\n<p>.ini file is : </p>\n\n<pre><code> [key]\n title= A,H,D\n</code></pre>\n\n<p>C program:</p>\n\n<pre><code>var[100];\nLPCSTR ini=\"C:\\conf.ini\";\nGetPrivateProfileString(\"key\", \"title\", 0, var, 100,ini);\nint i=0;\nchar* arr[10];\nchar* buffer;\nfor(buffer=strtok(var, \",\");buffer;buffer=strtok(NULL, \",\"))\n{\n    if (buffer !=NULL)\n    {\n       puts(\"\")\n       strcpy(arr[i], buffer);\n       printf(\"the value is %S \\n\", arr[i]);\n       i++;\n    }\n}\nprintf(\"first value %s\", arr[0]);\nprintf(\"second value %s\", arr[1]);\nprintf(\"third value %s\", arr[2]);\n</code></pre>\n\n<p>Output I get looks like this:</p>\n\n<pre><code>  The value is A \n\n  The value is H \n\n  The value is D \n  first value A \n  second value H \n  third value D \n</code></pre>\n"}, {"tags": ["c", "malloc", "realloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1436957542, "post_id": 31428351, "comment_id": 50827257, "body": "Please <a href=\"http://stackoverflow.com/q/605845/2173917\">see why not to cast</a> the return value of <code>malloc()</code> and family in <code>C</code>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1436957766, "post_id": 31428351, "comment_id": 50827406, "body": "It is implementation (compiler &amp; operating system &amp; computer) specific. On Linux, read about <a href=\"http://man7.org/linux/man-pages/man2/setrlimit.2.html\" rel=\"nofollow noreferrer\">setrlimit(2)</a> to change that limit (e.g. <code>ulimit</code> in your shell). Use <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> to hunt memory leaks"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1436957960, "post_id": 31428351, "comment_id": 50827538, "body": "If <code>realloc</code> fails to allocate memory, it will return <code>NULL</code> as you know, but since you assign to the same pointer you try to allocate you will loose the original pointer, and your call to <code>free</code> tries to free <code>NULL</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 4, "creation_date": 1436957968, "post_id": 31428351, "comment_id": 50827549, "body": "<code>realloc(*ptr, M * row+1 * sizeof(ptr));</code> the size calculation is wrong; it is in units of <code>long int**</code>, should be in units of <code>long int</code> Easiest syntax is :: <code>*ptr = realloc(*ptr, M * row+1 * sizeof **ptr);</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1436958047, "post_id": 31428351, "comment_id": 50827591, "body": "Regarding the comment by @wildplasser, the original <code>malloc</code> size calculation is also wrong for the same reason."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 0, "creation_date": 1436958139, "post_id": 31428351, "comment_id": 50827654, "body": "(this is not directly your issue, but) check one of the answers here how to use realloc properly, <a href=\"http://stackoverflow.com/questions/9071566/is-it-safe-to-use-realloc\" title=\"is it safe to use realloc\">stackoverflow.com/questions/9071566/is-it-safe-to-use-reallo&zwnj;&#8203;c</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436958159, "post_id": 31428351, "comment_id": 50827663, "body": "Finally, if you want to store two values then why don&#39;t you use an array of arrays (akin to <code>int act_nei[X][2]</code>) (which you can allocate dynamically as well if you just think a little). Or why not an array of structures, where each structure contains the two values?"}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436958984, "post_id": 31428351, "comment_id": 50828173, "body": "@SouravGhosh: Totally irrelevant to the question, quite useless for anyone with a modern compiler, and a total pain in the arse if you want to run your code as C++ code."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1436959197, "post_id": 31428351, "comment_id": 50828289, "body": "@gnasher729 But This isn&#39;t C++, this is C, and you shouldn&#39;t cast to or from a <code>void *</code> in C. And yes it might not be relevant for this question, but casting pointers is almost never the correct solution to anything, and can instead hide other errors or problems that might lead to undefined behavior."}, {"owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "edited": false, "score": 0, "creation_date": 1436960391, "post_id": 31428351, "comment_id": 50829047, "body": "Will consider these comments &amp; suggestions, fix my code, and try again!"}], "answers": [{"tags": [], "owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "is_accepted": false, "score": 1, "last_activity_date": 1436959297, "creation_date": 1436959297, "answer_id": 31429010, "question_id": 31428351, "link": "https://stackoverflow.com/questions/31428351/realloc-fails-to-dynamically-grow-a-1-to-over-a-million-elements/31429010#31429010", "title": "Realloc fails to dynamically grow a 1 to over a million elements", "body": "<p>You are corrupting the malloc ring by writing beyond the allocated space. There is a  missing <code>()</code> and wrong sizeof. Try:</p>\n\n<p>*ptr = (long int *)realloc(*ptr, M * (row+1) * sizeof(**ptr));</p>\n"}, {"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 1, "last_activity_date": 1436959339, "creation_date": 1436959339, "answer_id": 31429024, "question_id": 31428351, "link": "https://stackoverflow.com/questions/31428351/realloc-fails-to-dynamically-grow-a-1-to-over-a-million-elements/31429024#31429024", "title": "Realloc fails to dynamically grow a 1 to over a million elements", "body": "<p>Your calculation of memory usage is very wrong. </p>\n\n<p>First, make your life a lot easier by not using *ptr all the time, but using a local variable. Like</p>\n\n<pre><code>long f (int* *pptr...)\n{\n    int* ptr = *pptr;\n    ...\n    *pptr = ptr;\n}\n</code></pre>\n\n<p>Now it becomes obvious that your sizeof (ptr) is wrong. That's the size of an int** which is totally irrelevant. What you want is the size of an int, which would be sizeof(**ptr) in your code, or sizeof (*ptr) if you use a local variable for the pointer. </p>\n\n<p>Of course where things are totally wrong: </p>\n\n<pre><code>M * row+1 * sizeof(ptr)\n</code></pre>\n\n<p>This calculates M*row, and then it adds 1*sizeof(ptr). You allocate nowhere near enough memory, so your application will crash soon. </p>\n"}, {"comments": [{"owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "edited": false, "score": 0, "creation_date": 1436976176, "post_id": 31429318, "comment_id": 50840929, "body": "I am writing <code>C</code> code to process tens of millions of graph vertices and edges, so performance at scale is a concern.  This program is being prototyped on a Mac Book Pro, but it will run on a cluster machine (56 cores, 242 GB of ram).  Should I have to consider what you recommend on the last 2 lines knowing what I just said? Just wondering what the break point is before I have to consider more optimization."}], "tags": [], "owner": {"reputation": 1858, "user_id": 4971315, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/10206972837629356/picture?type=large", "display_name": "Roberto Attias", "link": "https://stackoverflow.com/users/4971315/roberto-attias"}, "is_accepted": false, "score": 0, "last_activity_date": 1436960178, "creation_date": 1436960178, "answer_id": 31429318, "question_id": 31428351, "link": "https://stackoverflow.com/questions/31428351/realloc-fails-to-dynamically-grow-a-1-to-over-a-million-elements/31429318#31429318", "title": "Realloc fails to dynamically grow a 1 to over a million elements", "body": "<p>A part from the comments already posted re the incorrect use of <code>sizeof()</code> I have a more general comment. I would avoid reallocating the buffer for each line you read.</p>\n\n<p>The semantic of <code>realloc</code> is such that it will return a contiguous area of memory of the requested size. On some OS, when possible, this will be done extending the buffer passed as argument \"in place\". In other OS, or if there is no free space at the end of the passed buffer, a completely new buffer will be allocated and the content of the original buffer copied to it. If your memory is particularly fragmented, this may result into multiple <code>mallocs</code> and <code>memcpy</code> under the hood. </p>\n\n<p>The typical approach in this case consist in allocating a buffer larger than you need, and keep track internally of how much of it you've already consumed through an integer variable. Whenever you run out of space in your internal buffer, you call realloc adding another chunk of empty space. Some implementation add a constant-size chunk, other double the size of the current chunk, that's up to you and depends on various considerations.</p>\n\n<p>Another problem may arise from the fact that <code>realloc</code> return contiguous memory. Depending on OS and system characteristics, you may not have a free region of contiguous memory of the specified size, but there may be multiple regions free of smaller size. If such scenario is a possibility, one has to consider whether a contiguous buffer is really required. For example, a solution still providing O(1) access time (although not as fast as contiguous buffer) might be to create a first buffer containing pointers to fixed size <em>pages</em>. In this case, what would be addressed as <code>ptr[n]</code> in the contiguous case would become <code>ptr[n / PAGE_SIZE][n % PAGE_SIZE]</code> in the new scheme.</p>\n"}, {"comments": [{"owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "edited": false, "score": 0, "creation_date": 1436976388, "post_id": 31429584, "comment_id": 50841072, "body": "IMO this is fancy, have not mastered the use of structures, but I need to.  Will implement this ver. too."}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1436961007, "creation_date": 1436961007, "answer_id": 31429584, "question_id": 31428351, "link": "https://stackoverflow.com/questions/31428351/realloc-fails-to-dynamically-grow-a-1-to-over-a-million-elements/31429584#31429584", "title": "Realloc fails to dynamically grow a 1 to over a million elements", "body": "<p>The passing a pointer-to-pointer and returning-the-element-count idiom can be avoided by using a wrapper struct containing both the element count and the buffer. (the caller <em>could</em> discard the wrapper and only use the buffer if he wanted to)</p>\n\n<pre><code>#define handle_error() do{ perror(\"malloc\"); exit(EXIT_FAILURE); } while (0)\n\nstruct pairs {\n        unsigned size;\n        unsigned used;\n        struct { long int x; long int y; } *data;\n        };\n\nstruct pairs *readpairs(FILE *fp)\n{\nstruct pairs *ret;\nchar *line[80];\n\nret = malloc (sizeof *ret);\nif (!ret) { handle_error();}\n\nret-&gt;size = ret-&gt;used = 0;\nret-&gt;data = NULL;\n\nwhile (fgets(line, sizeof line, fp)) {\n        int rc;\n      if (ret-&gt;used &gt;= ret-&gt;size) { // resize needed\n                void *newp;\n                unsigned newsiz;\n                newsiz = ret-&gt;size ? 2* ret-&gt;size : 8;\n\n                newp = realloc(ret-&gt;data,  newsiz * sizeof *ret-&gt;data);\n                if (!newp) { handle_error();}\n                ret-&gt;data = newp;\n                ret-&gt;size = newsiz;\n                }\n        rc = sscanf(line,\"%ld\\t\\%ld\"\n                , &amp;ret-&gt;data[ret-&gt;used].x\n                , &amp;ret-&gt;data[ret-&gt;used].y\n                );\n        if (rc != 2) { handle_error();}\n        ret-&gt;used += 1;\n        }\nreturn ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1436961007, "creation_date": 1436957438, "last_edit_date": 1495535205, "question_id": 31428351, "link": "https://stackoverflow.com/questions/31428351/realloc-fails-to-dynamically-grow-a-1-to-over-a-million-elements", "title": "Realloc fails to dynamically grow a 1 to over a million elements", "body": "<p>Reading a 2 column text file and storing long int values into an array that is reallocated dynamically, fails when then array grows to over 200 thousand memory reallocations.</p>\n\n<pre><code>    long int load_list_unklen(long int (**ptr), FILE *infname)\n    {   long int row =0;\n        char buf[64];\n        while (fgets (buf, sizeof(buf), infname)) {\n            // M is defined to be = 2\n            *ptr = (long int *)realloc(*ptr, M * row+1 * sizeof(ptr));\n            if(!ptr) {\n                perror(\"Out of memory\");\n                free(ptr);\n                exit( 1); }\n            sscanf(buf, \"%ld\\t%ld\", &amp;(*ptr)[row*2],&amp;(*ptr)[row*2+1]);\n            row += 1;\n        }\n        if (ferror(infname)) {\n            fprintf(stderr,\"Oops, error reading stdin\\n\");\n            abort();\n        }\n        return  row;\n    }\n</code></pre>\n\n<p>Notice that <code>buf</code> gets a string that has two numbers separated by a tab.  The code fails as it tries load a file with over 2mil lines and row increments stop around 221181, thus I wonder if this there a limit where realloc chokes? Should I be calling realloc differently?</p>\n\n<p>Here is how I call the function:</p>\n\n<pre><code>long int *act_nei = (long int *)malloc(M * sizeof (act_nei) );\nconst long int sz  = load_list_unklen(&amp;act_nei, fp);\n</code></pre>\n\n<p>Using code from a SO post to realloc memory slots, where my example is for large input files.<br>\n<a href=\"https://stackoverflow.com/questions/21081191/realloc-and-sscanf-into-a-function\">Realloc and sscanf into a function</a><a href=\"https://stackoverflow.com/questions/21081191/realloc-and-sscanf-into-a-function\">Realloc and scanf</a></p>\n"}, {"tags": ["c", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1436957547, "post_id": 31428146, "comment_id": 50827262, "body": "What error message you got? (Add it to you question post)."}], "answers": [{"comments": [{"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1436987173, "post_id": 31438907, "comment_id": 50847442, "body": "Right...It could be a typo in the CMakeList.txt as well !"}], "tags": [], "owner": {"reputation": 1147, "user_id": 5071535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8bc64d99de802e3fc17bedc722f6dd9e?s=128&d=identicon&r=PG&f=1", "display_name": "user5071535", "link": "https://stackoverflow.com/users/5071535/user5071535"}, "is_accepted": false, "score": 1, "last_activity_date": 1436986981, "creation_date": 1436986981, "answer_id": 31438907, "question_id": 31428146, "link": "https://stackoverflow.com/questions/31428146/cmake-cant-build-simple-project/31438907#31438907", "title": "cmake can&#39;t build simple project", "body": "<p>You're using the wrong filename in your CMakeLists.txt file.</p>\n\n<p>Change the line in your CMakeLists.txt from:</p>\n\n<pre><code>set(SOURCE_FILES main.cpp)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>set(SOURCE_FILES main.c)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 1, "last_activity_date": 1436987096, "last_edit_date": 1495540272, "creation_date": 1436987096, "answer_id": 31438941, "question_id": 31428146, "link": "https://stackoverflow.com/questions/31428146/cmake-cant-build-simple-project/31438941#31438941", "title": "cmake can&#39;t build simple project", "body": "<p>I tried you <code>CMakeList.txt</code> and i got </p>\n\n<blockquote>\n  <p>In function SetupRC():\n  main.cpp:(.text+0xa): undefined reference to Cmake_dermo(int)</p>\n</blockquote>\n\n<p>The problem comes from the fact that different languages are mixed:</p>\n\n<ul>\n<li>main.cpp is C++ and the compiler is a C++ compiler.</li>\n<li>source_file.c is C, since it is a .c file.</li>\n</ul>\n\n<p>To include a header featuring reference to C, read <a href=\"https://stackoverflow.com/questions/3329159/including-c-headers-inside-a-c-program\">this question</a>. A corrected main.cpp file looks like:</p>\n\n<pre><code>extern \"C\"\n{\n  #include \"common/source_file.h\"\n}\n\nvoid SetupRC()\n{\n  Cmake_dermo(1);\n}\n\nint main(int argc, char* argv[])\n{\n  SetupRC();\n\n  return 0;\n}\n</code></pre>\n\n<p>The header file looks like:</p>\n\n<pre><code>#ifndef SOURCE_FILE_H_   /* Include guard */\n#define SOURCE_FILE_H_\n\nvoid Cmake_dermo(int da);\n\n#endif // SOURCE_FILE_H_\n</code></pre>\n\n<p>It seems that Cmake takes care of the different languages without any modification to the CMakeList.txt.</p>\n"}], "owner": {"reputation": 522, "user_id": 5118992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b123079aaeabb268e7d55640cbba0c62?s=128&d=identicon&r=PG", "display_name": "Maxim Palenov", "link": "https://stackoverflow.com/users/5118992/maxim-palenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 31438941, "answer_count": 2, "score": 2, "last_activity_date": 1436987096, "creation_date": 1436956785, "question_id": 31428146, "link": "https://stackoverflow.com/questions/31428146/cmake-cant-build-simple-project", "title": "cmake can&#39;t build simple project", "body": "<p>I'm use clion 1.0 with cmake and try to build simple demo project. But cmake don't want link external .c file to main.c.</p>\n\n<p>System: Xubuntu 14.04</p>\n\n<p>main.c</p>\n\n<pre><code>#include \"common/source_file.h\"\n\nvoid SetupRC()\n{\n    Cmake_dermo(1);\n}\n\nint main(int argc, char* argv[])\n{\n    SetupRC();\n\n    return 0;\n}\n</code></pre>\n\n<p>CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2)\nproject(mytest)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\n\nset(SOURCE_FILES main.cpp)\nadd_executable(mytest common/source_file.h common/source_file.c ${SOURCE_FILES})\n</code></pre>\n\n<p>source_file.c</p>\n\n<pre><code>#include \"source_file.h\"\n\nvoid Cmake_dermo(int da)\n{\n    da += 1;\n}\n</code></pre>\n\n<p>What is wrong?</p>\n"}, {"tags": ["c", "security", "unix", "memory"], "answers": [{"comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1436965661, "post_id": 31428681, "comment_id": 50832888, "body": "Thanks! So it&#39;s quite safe to assume that the operating system will <i>always</i> clear the contents of memory before allocating it to a different process? (This seems to be the way OS X, Debian and Ubuntu behave, but I couldn&#39;t find any definitive references.)"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1436969590, "post_id": 31428681, "comment_id": 50836078, "body": "I&#39;ve had a discussion about it a few times and the only conclusion is &quot;this is so obvious (to OS developers) that it isn&#39;t even documented anywhere&quot;. POSIX does not have any way of getting anonymous memory from the operating system other than <code>malloc</code>&amp;co with the usual semantics, so it is of no help. But to provide safe separation of processes memory has to be wiped out before being given to someone else. There is no other way to do it. Could a standards lawyer make an OS that doesn&#39;t? Sure, but I doubt it would be used. I&#39;m not aware of anyone doing anything different today."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1436973727, "post_id": 31428681, "comment_id": 50839138, "body": "Well perhaps this is all in the grey area between the POSIX and ANSII standards, but I wish they could make a bit more effort to explain themselves on matters like this. Optimizing away a call to <code>memset()</code> before a call to <code>free()</code> is just plain stupid. Doing it silently and without warning is <i>criminally</i> stupid."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": true, "score": 3, "last_activity_date": 1436958715, "last_edit_date": 1436958715, "creation_date": 1436958326, "answer_id": 31428681, "question_id": 31428019, "link": "https://stackoverflow.com/questions/31428019/protecting-heap-data-when-a-program-is-halted/31428681#31428681", "title": "Protecting heap data when a program is halted", "body": "<p>An operating system that leaks contents of memory between processes (especially with different privileges) would be so broken from a security point of view that you doing it yourself won't change anything. Especially since on most operating systems the memory pages that you write to can at any point be taken away from you, swapped out and given to someone else. So I can safely say that you don't need to worry about normal termination unless you're on an operating system so specialized that it doesn't have anyone to leak the memory to. Also, there are certain ways to kill your process without you having any ability to catch the killing signal, so you couldn't handle all the cases anyway.</p>\n\n<p>When it comes to abnormal termination (SIGSEGV, etc.) your best bet is to either disable dumping cores or at least make sure that your core dumps are only readable by you. That should be the main worry, the physical memory won't leak, but your core dumps could be readable by someone else.</p>\n\n<p>That being said, it's still a very good practice to wipe secrets from memory as soon as you don't need them anymore. Not because they can leak to others through normal operation, because they can't, but because they can leak out through bugs. You might have an exploitable bug, maybe you get a stray pointer you'll write to a log, maybe you'll leave your key on the stack and then forget to initialize your data, etc. So your main worry shouldn't be to wipe out secrets from memory before exit, but to actually identify the point in your code where you don't need a secret anymore and wipe it right then and there.</p>\n\n<p>Unfortunately, using <code>memset</code> that you mentioned is not enough. Many compilers today are smart enough to understand that some of your calls to <code>memset</code> are dead stores and optimize them away (like <code>memset</code> of a stack buffer just before leaving a function or just before <code>free</code>). See <a href=\"https://github.com/libressl-portable/openbsd/issues/5\" rel=\"nofollow\">this issue in LibreSSL</a> for a discussion about it, and <a href=\"https://github.com/libressl-portable/openbsd/blob/master/src/lib/libc/string/explicit_bzero.c\" rel=\"nofollow\">this implementation of <code>explicit_bzero</code></a> for the currently best known attempt to work around it on clang and gcc. </p>\n"}], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 31428681, "answer_count": 1, "score": 1, "last_activity_date": 1449359861, "creation_date": 1436956471, "last_edit_date": 1495542847, "question_id": 31428019, "link": "https://stackoverflow.com/questions/31428019/protecting-heap-data-when-a-program-is-halted", "title": "Protecting heap data when a program is halted", "body": "<p>Suppose I have a program that decrypts a file and stores the decrypted contents on the heap. I want to protect this information from other (non-root) processes running on the same system, so before I call <code>free()</code> to release the heap allocation, I'm using <code>memset()</code> to overwrite the data and make it unavailable to the next process that uses the same physical memory. (<a href=\"https://stackoverflow.com/a/1622228/1679849\">I understand this isn't a concern on some systems</a>, but would prefer to err on the side of safety.)</p>\n\n<p>However, I'm not sure what to do in cases where the program doesn't terminate normally, either through a forced termination (<code>SIGINT</code>, <code>SIGTERM</code>, etc.) or due to an error condition (<code>SIGSEGV</code>, <code>SIGBUS</code>, etc.). Should I just trap as many signals as possible to clear the heap before exiting, or is there a more orderly way of doing things?</p>\n"}, {"tags": ["c", "fgets"], "comments": [{"owner": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 2, "creation_date": 1436956625, "post_id": 31428010, "comment_id": 50826703, "body": "should close and reopen the file in read mode.. and add proper error handling"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1436956784, "post_id": 31428010, "comment_id": 50826794, "body": "use <code>rewind</code> before  <code>fgets</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436956789, "post_id": 31428010, "comment_id": 50826798, "body": "Note: always check for the success of <code>fopen()</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 1, "creation_date": 1436956796, "post_id": 31428010, "comment_id": 50826803, "body": "@amdixon - &quot;w+&quot; means &quot;<b>Open for reading and writing</b>. The file is created if it does not exist, otherwise it is truncated. The stream is positioned at the beginning of the file.&quot; per <a href=\"http://linux.die.net/man/3/fopen\" rel=\"nofollow noreferrer\">linux.die.net/man/3/fopen</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1436956850, "post_id": 31428010, "comment_id": 50826831, "body": "@BLUEPIXY - <code>fseek()</code> works too.  <a href=\"http://linux.die.net/man/3/fseek\" rel=\"nofollow noreferrer\">linux.die.net/man/3/fseek</a>"}], "answers": [{"comments": [{"owner": {"reputation": 461, "user_id": 1821490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U91FX.jpg?s=128&g=1", "display_name": "Alex Kroll", "link": "https://stackoverflow.com/users/1821490/alex-kroll"}, "edited": false, "score": 0, "creation_date": 1436957047, "post_id": 31428164, "comment_id": 50826941, "body": "And clean the buffer before reading, and maybe after creating."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 461, "user_id": 1821490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U91FX.jpg?s=128&g=1", "display_name": "Alex Kroll", "link": "https://stackoverflow.com/users/1821490/alex-kroll"}, "edited": false, "score": 0, "creation_date": 1436957208, "post_id": 31428164, "comment_id": 50827026, "body": "@AlexKroll What you do mean by &quot;clean&quot;? <code>fflush</code> would flush any buffered output."}, {"owner": {"reputation": 461, "user_id": 1821490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U91FX.jpg?s=128&g=1", "display_name": "Alex Kroll", "link": "https://stackoverflow.com/users/1821490/alex-kroll"}, "edited": false, "score": 0, "creation_date": 1436957304, "post_id": 31428164, "comment_id": 50827100, "body": "I mean <code>memset(buf, 0, 100)</code>."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 461, "user_id": 1821490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U91FX.jpg?s=128&g=1", "display_name": "Alex Kroll", "link": "https://stackoverflow.com/users/1821490/alex-kroll"}, "edited": false, "score": 0, "creation_date": 1436957419, "post_id": 31428164, "comment_id": 50827178, "body": "<code>memset</code> is needless. Just checking the return of <code>fgets</code> should be enough. OP should error checking for all library functions."}, {"owner": {"reputation": 733, "user_id": 4911018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0a8ba726c789d8ae78654b961597d717?s=128&d=identicon&r=PG&f=1", "display_name": "tian tong", "link": "https://stackoverflow.com/users/4911018/tian-tong"}, "edited": false, "score": 0, "creation_date": 1436957587, "post_id": 31428164, "comment_id": 50827292, "body": "It&#39;s the problem of stream position. I use fseek and succeed, thanks"}, {"owner": {"reputation": 461, "user_id": 1821490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U91FX.jpg?s=128&g=1", "display_name": "Alex Kroll", "link": "https://stackoverflow.com/users/1821490/alex-kroll"}, "edited": false, "score": 0, "creation_date": 1436957628, "post_id": 31428164, "comment_id": 50827320, "body": "Agree. Just for sure but not necessarily."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1436957062, "last_edit_date": 1436957062, "creation_date": 1436956859, "answer_id": 31428164, "question_id": 31428010, "link": "https://stackoverflow.com/questions/31428010/getting-garbled-output-from-fgets-in-c/31428164#31428164", "title": "Getting garbled output from fgets() in C", "body": "<p><code>fp</code> is at the end after you write. Move it to initial position before using <a href=\"http://man7.org/linux/man-pages/man3/fseek.3.html\" rel=\"nofollow\"><code>fseek</code></a> reading again:</p>\n\n<pre><code>fflush(fp);\nfseek(fp, 0, SEEK_SET);\nfgets(buf, 100, fp);\n</code></pre>\n\n<p>Other option is to <a href=\"http://man7.org/linux/man-pages/man3/fclose.3.html\" rel=\"nofollow\"><code>fclose</code></a> it and <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow\"><code>fopen</code></a> it again. It depends on what you want to do.</p>\n"}], "owner": {"reputation": 733, "user_id": 4911018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0a8ba726c789d8ae78654b961597d717?s=128&d=identicon&r=PG&f=1", "display_name": "tian tong", "link": "https://stackoverflow.com/users/4911018/tian-tong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 31428164, "answer_count": 1, "score": 0, "last_activity_date": 1602817261, "creation_date": 1436956458, "last_edit_date": 1602817261, "question_id": 31428010, "link": "https://stackoverflow.com/questions/31428010/getting-garbled-output-from-fgets-in-c", "title": "Getting garbled output from fgets() in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\n  FILE *fp = fopen(&quot;sss&quot;, &quot;w+&quot;);\n  char buf[100];\n  fputs(&quot;hello, world&quot;, fp);\n  fflush(fp);\n  fgets(buf, 100, fp);\n  fputs(buf, stdout);\n  fclose(fp);\n  return 0;\n}\n</code></pre>\n<p>Can someone teach me what's wrong with my code? Below is my test, but I didn't get what I expected:</p>\n<pre><code>% clang test.c\n% ./a.out\n\ufffd\ufffdh\ufffd\ufffd%  \n% cat test.c\nhello, world%\n</code></pre>\n<p>My assumption is that this is a problem of character encoding, but when I use fgets to read the text from an existing file, it works fine. All my files (and code) are written in Emacs, I don't know what causes this garbled output</p>\n"}, {"tags": ["c", "json", "linux", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 5639, "user_id": 234242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QK6L.jpg?s=128&g=1", "display_name": "Justin Force", "link": "https://stackoverflow.com/users/234242/justin-force"}, "edited": false, "score": 0, "creation_date": 1538281526, "post_id": 31427716, "comment_id": 92085104, "body": "The tile says cjson, but the content refers to json-c. These are different projects."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4435810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c95c1b91fa948fc3cfbc387afcb1b7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4435810/ravi"}, "edited": false, "score": 0, "creation_date": 1437019928, "post_id": 31428993, "comment_id": 50859222, "body": "When I tried for documentation related to json-glib then error occurred &quot;E: Unable to locate package libjson-glib-1.0-0-doc E: Couldn&#39;t find any package by regex &#39;libjson-glib-1.0-0-doc&#39; &quot;"}, {"owner": {"reputation": 1, "user_id": 5110588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8476b2a34c9cc601e97c09af80d8f714?s=128&d=identicon&r=PG&f=1", "display_name": "Anshul Kant Saxena", "link": "https://stackoverflow.com/users/5110588/anshul-kant-saxena"}, "reply_to_user": {"reputation": 13, "user_id": 4435810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c95c1b91fa948fc3cfbc387afcb1b7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4435810/ravi"}, "edited": false, "score": 0, "creation_date": 1437050168, "post_id": 31428993, "comment_id": 50875732, "body": "You can download the libjson from this link <a href=\"http://sourceforge.net/projects/libjson/\" rel=\"nofollow noreferrer\">sourceforge.net/projects/libjson</a>. After download just unzip it. You will get one PDF document which explains most of the features of this library."}], "tags": [], "owner": {"reputation": 1, "user_id": 5110588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8476b2a34c9cc601e97c09af80d8f714?s=128&d=identicon&r=PG&f=1", "display_name": "Anshul Kant Saxena", "link": "https://stackoverflow.com/users/5110588/anshul-kant-saxena"}, "is_accepted": false, "score": 0, "last_activity_date": 1436959724, "last_edit_date": 1436959724, "creation_date": 1436959232, "answer_id": 31428993, "question_id": 31427716, "link": "https://stackoverflow.com/questions/31427716/how-to-install-cjson-properly-in-ubuntu-14-0lts/31428993#31428993", "title": "How to install cjson properly in Ubuntu 14.0LTS?", "body": "<p>Try below commands:</p>\n\n<p>$ sudo apt-get install libjson-glib-1.0-0 libjson-glib-1.0-0-dev</p>\n\n<p>If you want to debug your programs and see the various steps of serializing/deserializing you can also install the libjson-glib \u2013 debug symbols package</p>\n\n<p>$ sudo apt-get install libjson-glib-1.0-0-dbg</p>\n\n<p>For documentation related to json-glib, you must install the following package</p>\n\n<p>$ sudo apt-get install libjson-glib-1.0-0-doc</p>\n\n<p>This documentation will then be available in file:///usr/share/gtk-doc/html/json-glib/index.html</p>\n"}, {"tags": [], "owner": {"reputation": 172, "user_id": 6355709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b6ce6786b1f4abb994b373518a0f17b?s=128&d=identicon&r=PG&f=1", "display_name": "asantacreu", "link": "https://stackoverflow.com/users/6355709/asantacreu"}, "is_accepted": false, "score": 0, "last_activity_date": 1477408866, "last_edit_date": 1495535252, "creation_date": 1477408866, "answer_id": 40243787, "question_id": 31427716, "link": "https://stackoverflow.com/questions/31427716/how-to-install-cjson-properly-in-ubuntu-14-0lts/40243787#40243787", "title": "How to install cjson properly in Ubuntu 14.0LTS?", "body": "<p>Maybe your problem is related with the path. </p>\n\n<p>The library is installed correctlly but you have tot tell the system where. Here a post on how to do it in Ubuntu <a href=\"https://stackoverflow.com/questions/13428910/how-to-set-the-environmental-variable-ld-library-path-in-linux\">How to set the environmental variable LD_LIBRARY_PATH in linux</a></p>\n"}], "owner": {"reputation": 13, "user_id": 4435810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c95c1b91fa948fc3cfbc387afcb1b7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4435810/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5121, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1477408866, "creation_date": 1436955689, "question_id": 31427716, "link": "https://stackoverflow.com/questions/31427716/how-to-install-cjson-properly-in-ubuntu-14-0lts", "title": "How to install cjson properly in Ubuntu 14.0LTS?", "body": "<p>I am new in json and I don't know how to use but I found compare to XML json is better so, I am learning json in C programming in Ubuntu 14.0LTS.</p>\n\n<p>I followed <strong><em><a href=\"https://linuxprograms.wordpress.com/2010/05/20/install-json-c-in-linux/\" rel=\"nofollow\">https://linuxprograms.wordpress.com/2010/05/20/install-json-c-in-linux/</a></em></strong>. \nIn this link, I installed <strong>libjson0</strong> with the help of first command but when I installed <strong>libjson \u2013 debug symbols package</strong> with the help of second command which is mentioned in link then showing <strong>\"E: Unable to locate package libjson0-dbg\"</strong>.</p>\n\n<p>Also I gone through <strong><em><a href=\"https://github.com/json-c/json-c\" rel=\"nofollow\">https://github.com/json-c/json-c</a></em></strong>. After cloning moved to <strong>json-c</strong> directory, in <strong>json-c</strong> directory I did <strong>sh autogen.sh</strong> then showing <strong>\"autogen.sh: 2: autogen.sh: autoreconf: not found\"</strong>.</p>\n\n<p>Why autoreconf is not works ? When I installed CppUTest and other stuffs then it works.</p>\n\n<p>I also install build-essential which found in google for above problems but it can't works for me.</p>\n\n<p>How can I installed cjson in a proper manner and how to use with the C-programms.</p>\n"}, {"tags": ["c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "edited": false, "score": 2, "creation_date": 1436954352, "post_id": 31427186, "comment_id": 50825334, "body": "Just <code>##</code> operator doing what it was supposed to be."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1436954629, "post_id": 31427255, "comment_id": 50825512, "body": "@Prashant As you see, it&#39;s not. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1436954459, "last_edit_date": 1436954459, "creation_date": 1436954358, "answer_id": 31427255, "question_id": 31427186, "link": "https://stackoverflow.com/questions/31427186/concatenation-of-integers-using-macro/31427255#31427255", "title": "concatenation of integers using macro", "body": "<p>The <code>##</code> is a form of MACRO replacement. Quoting <code>C11</code>, chapter \u00a76.10.3.3, the <code>##</code> operator</p>\n\n<blockquote>\n  <p>If, in the replacement list of a function-like macro, a parameter is immediately preceded\n  or followed by a <code>##</code> preprocessing token, the parameter is replaced by the corresponding\n  argument\u2019s preprocessing token sequence;</p>\n</blockquote>\n\n<p>So, in your case, as per the MACRO definition, </p>\n\n<pre><code>#define merge(a, b) b##a\n</code></pre>\n\n<p>in your code</p>\n\n<pre><code>merge(12, 36)\n</code></pre>\n\n<p>looks like</p>\n\n<pre><code>3612\n</code></pre>\n\n<p>after the preprocessing stage.</p>\n\n<p>FWIW, the complete statement, <code>printf(\"%d \", 3612);</code>, as simple as that. </p>\n"}], "owner": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 31427255, "answer_count": 1, "score": -2, "last_activity_date": 1438668178, "creation_date": 1436954192, "last_edit_date": 1438668178, "question_id": 31427186, "link": "https://stackoverflow.com/questions/31427186/concatenation-of-integers-using-macro", "title": "concatenation of integers using macro", "body": "<p>Just read this on a <a href=\"http://qa.geeksforgeeks.org/377/give-12-and-36-write-a-function-which-return-an-integer-c-3612?show=393#a393\" rel=\"nofollow\">forum</a>. Can someone throw some light on this, why and how this works?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define merge(a, b) b##a\nint main(void)\n{\n    printf(\"%d \", merge(12, 36));\n    return 0;\n}\n</code></pre>\n\n<p>on the other hand if we don't use macro, then compiler gives compilation error.</p>\n"}, {"tags": ["c++", "c", "matlab", "openmp", "mex"], "comments": [{"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436954058, "post_id": 31427069, "comment_id": 50825138, "body": "Why do you need to name <code>c</code> files with <code>.cpp</code> extension?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1436954541, "post_id": 31427069, "comment_id": 50825457, "body": "CFLAGS are for C, CXXFLAGS are for C++. Note, CPPFLAGS are for something else still. In order to avoid confusion, it is highly recommended to refrain from using the non-word &quot;CPP&quot; when referring to the C++ language."}, {"owner": {"reputation": 397, "user_id": 1653453, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/15e487fc0df7583fe5d395f9b7ec46a0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/1653453/ivan"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1436954945, "post_id": 31427069, "comment_id": 50825700, "body": "Thanks @n.m.! That was indeed a problem of CXXFLAGS. Running mex mex_sum_openmp.cpp CXXFLAGS=&quot;\\$CXXFLAGS -fopenmp&quot; LDFLAGS=&quot;\\$LDFLAGS -fopenmp&quot; did paralleled the code!"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 3, "creation_date": 1436955314, "post_id": 31427069, "comment_id": 50825948, "body": "If you have solved it by your self please provide the answer how you did it so that other users facing the same problem can profit from it. Do it by your self or wait for n.m. Is going to answer it as he did already in his comment"}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 2, "creation_date": 1436957012, "post_id": 31427069, "comment_id": 50826923, "body": "Don&#39;t write <i>Solved:</i> in the question title, if it is solved then write out your own answer and mark it as correct."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1436957329, "post_id": 31427069, "comment_id": 50827118, "body": "It is very confusing to call C++ as CPP or to use .cpp. The CPP is traditionally a C PreProcessor, the <code>cpp</code> command."}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 1653453, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/15e487fc0df7583fe5d395f9b7ec46a0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/1653453/ivan"}, "is_accepted": true, "score": 0, "last_activity_date": 1436961352, "creation_date": 1436961352, "answer_id": 31429703, "question_id": 31427069, "link": "https://stackoverflow.com/questions/31427069/code-is-not-paralleled-when-compiling-cpp-file-but-c-is-paralleled/31429703#31429703", "title": "Code is not paralleled when compiling cpp file, but c is paralleled", "body": "<p>As @n.m. pointed out in order to compile a c++ file I have to use CXXFLAGS instead of CFLAGS.</p>\n\n<p>Running</p>\n\n<pre><code>mex mex_sum_openmp.cpp CXXFLAGS=\"\\$CXXFLAGS -fopenmp\" LDFLAGS=\"\\$LDFLAGS -fopenmp\"\n</code></pre>\n\n<p>solved the problem.</p>\n"}], "owner": {"reputation": 397, "user_id": 1653453, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/15e487fc0df7583fe5d395f9b7ec46a0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/1653453/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 31429703, "answer_count": 1, "score": 2, "last_activity_date": 1436961352, "creation_date": 1436953911, "last_edit_date": 1436956974, "question_id": 31427069, "link": "https://stackoverflow.com/questions/31427069/code-is-not-paralleled-when-compiling-cpp-file-but-c-is-paralleled", "title": "Code is not paralleled when compiling cpp file, but c is paralleled", "body": "<p>I am running the example from <a href=\"http://www.walkingrandomly.com/?p=1795\" rel=\"nofollow\">here</a> which allows Matlab to run C function, inside of which some parallel processing happens (with the support of OpenMP).</p>\n\n<p>Compile:</p>\n\n<pre><code>mex mex_sum_openmp.c CFLAGS=\"\\$CFLAGS -fopenmp\" LDFLAGS=\"\\$LDFLAGS -fopenmp\"\n</code></pre>\n\n<p>In Matlab:</p>\n\n<pre><code>&gt;&gt; tic;mex_sum_openmp(x);toc \nElapsed time is 0.186795 seconds.\n</code></pre>\n\n<p>Example runs correctly, but if I rename the file extension to cpp then suddenly code is not paralleled.</p>\n\n<p>Compile:</p>\n\n<pre><code>mex mex_sum_openmp.cpp CFLAGS=\"\\$CFLAGS -fopenmp\" LDFLAGS=\"\\$LDFLAGS -fopenmp\"\n</code></pre>\n\n<p>In Matlab:</p>\n\n<pre><code>&gt;&gt; tic;mex_sum_openmp(x);toc \nElapsed time is 0.466988 seconds.\n</code></pre>\n\n<p>This combination of CPP+OpenMP+MEX doesn't work at all or am I missing something?</p>\n\n<p>I run Ubuntu 14.04 with Matlab 2014a and GCC 4.8.4. Mex compiler complains about the not supported version of GCC (it supports GCC 4.7.x), but seem to compile things anyway. Can this be a problem?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1436953916, "post_id": 31426884, "comment_id": 50825053, "body": "Check buffer in a Debugger or hex dump it&#39;s content to be sure it is really equal to str."}, {"owner": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 1, "creation_date": 1436953992, "post_id": 31426884, "comment_id": 50825104, "body": "copy paste of the program and your three lines of input as posted, adding the includes it prints correctly - maybe also could use <code>:set list</code> to show hidden characters in vim"}, {"owner": {"reputation": 6986, "user_id": 2968959, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/34c70f9a66b79ca49e2b14e3c075fe3d?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Meshram", "link": "https://stackoverflow.com/users/2968959/saurabh-meshram"}, "edited": false, "score": 0, "creation_date": 1436954522, "post_id": 31426884, "comment_id": 50825438, "body": "No problem with the code, See <a href=\"http://codepad.org/tFoGEaUC\" rel=\"nofollow noreferrer\">codepad.org/tFoGEaUC</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1929, "user_id": 1783398, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6369d503a436016a8f3998033d6d1ee2?s=128&d=identicon&r=PG", "display_name": "Ziqi", "link": "https://stackoverflow.com/users/1783398/ziqi"}, "edited": false, "score": 0, "creation_date": 1436956684, "post_id": 31427316, "comment_id": 50826741, "body": "Thanks all. I tried a new file from scratch (both code and input data file), and the problem is gone. This is really strange. Previously the code I posted is part of a larger file. I suspect if it messes with other lines of code causing the problem... for now it seems to be working. But I have a new problem related to this and I am posting a new question."}], "tags": [], "owner": {"reputation": 8974, "user_id": 343486, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f67c441d77f508eaa5fb540c3af288b4?s=128&d=identicon&r=PG", "display_name": "DanielGibbs", "link": "https://stackoverflow.com/users/343486/danielgibbs"}, "is_accepted": true, "score": 0, "last_activity_date": 1436954916, "last_edit_date": 1436954916, "creation_date": 1436954514, "answer_id": 31427316, "question_id": 31426884, "link": "https://stackoverflow.com/questions/31426884/c-splitting-character-array-read-from-a-file-by-n-newline-character-strange/31427316#31427316", "title": "C splitting character array read from a file by \\n (newline character), strange output", "body": "<p>This may be related to the fact that you aren't terminating your string buffer. I'm unable to produce your exact problem but I do get unexpected extra characters in the output. Amend the relevant lines of your code as follows and see if that helps:</p>\n\n<pre><code>buffer = malloc(length + 1);\nif (buffer) {\n    fread(buffer, sizeof(char), length, fl);\n    buffer[length] = '\\0';\n}\nfclose(fl);\n</code></pre>\n\n<hr>\n\n<p>If that doesn't solve your problem, you might have some weird (invisible) control characters in your text file. Try creating a brand new one and see if the problem still occurs.</p>\n"}], "owner": {"reputation": 1929, "user_id": 1783398, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6369d503a436016a8f3998033d6d1ee2?s=128&d=identicon&r=PG", "display_name": "Ziqi", "link": "https://stackoverflow.com/users/1783398/ziqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1595, "favorite_count": 0, "accepted_answer_id": 31427316, "answer_count": 1, "score": 0, "last_activity_date": 1436954916, "creation_date": 1436953411, "question_id": 31426884, "link": "https://stackoverflow.com/questions/31426884/c-splitting-character-array-read-from-a-file-by-n-newline-character-strange", "title": "C splitting character array read from a file by \\n (newline character), strange output", "body": "<p>I am reading a raw text file into a character array and then I want to split the data line by line based on \"\\n\". My code is attached, but I get very strange output.</p>\n\n<p>INPUT FILE is a .txt file created with VIM on Windows, and it looks like:</p>\n\n<pre><code>london\nmanchester\nbritain\n...\n</code></pre>\n\n<p>CODE (ignoring some var declarations):</p>\n\n<pre><code>....\nchar * buffer = 0;\nlong length;\nfl = fopen (\"file.txt\", \"r\");\nif (fl){\n  fseek (fl, 0, SEEK_END);\n  length = ftell (fl);\n  fseek (fl, 0, SEEK_SET);\n  buffer = malloc (length);\n  if (buffer){\n    fread (buffer, 1, length, fl); \n  }\n  fclose (fl);\n  printf(buffer)\n}else{\n  printf(\"data file not found\");\n  return -1;\n}\n\nchar str[80] = \"london\\nmanchester\\nbritain\";\nchar* entity = strtok(buffer, \"\\n\");  //LINE-A, replacing 'buffer' with 'str' the output is correct.\nwhile (entity != NULL) {\n  printf(\"%s\\n\", entity);  //this prints strange output as shown below\n  entity = strtok(NULL, \"\\n\");\n}\n</code></pre>\n\n<p>....</p>\n\n<p>OUTPUT:</p>\n\n<pre><code>ondon\nanchester\nritain\n</code></pre>\n\n<p>The first character is always missing.</p>\n\n<p>However, if I replace \"buffer\" with \"str\" the declared character array with the same content as the file everything works as expected.</p>\n\n<p>I do not understand why I am getting this error. Any advice please.</p>\n\n<p>Mnay thanks!</p>\n"}, {"tags": ["c", "gcc", "binary"], "comments": [{"owner": {"reputation": 435, "user_id": 4823238, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c23c912b4cf733285963bde3b28c11c7?s=128&d=identicon&r=PG&f=1", "display_name": "Valarpirai", "link": "https://stackoverflow.com/users/4823238/valarpirai"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1436953861, "post_id": 31426874, "comment_id": 50825013, "body": "In the above question they have #included standard header files. But, i didn&#39;t included any header files."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 2, "creation_date": 1436954113, "post_id": 31426874, "comment_id": 50825177, "body": "main is not the first function that is called. The Compiler adds some wrapper around main which then calls main. That wrapper Needs space."}, {"owner": {"reputation": 435, "user_id": 4823238, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c23c912b4cf733285963bde3b28c11c7?s=128&d=identicon&r=PG&f=1", "display_name": "Valarpirai", "link": "https://stackoverflow.com/users/4823238/valarpirai"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1436954266, "post_id": 31426874, "comment_id": 50825290, "body": "I will accept your point @WernerHenze. Can you please post a reference link?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1436954686, "post_id": 31426874, "comment_id": 50825557, "body": "There is no link between source input size and executable output size. Proof #1: remove all optional whitespaces in your source. The executable will be the same size as it is now. Proof #2: add <i>long</i> comments between each statement. The executable will be the same size."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1436963689, "post_id": 31426874, "comment_id": 50831343, "body": "@Valarpirai I don&#39;t have a link available, but &quot;crt startup&quot; is a good combination to google, possibly add your specific compiler gcc."}], "answers": [{"comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1436954160, "post_id": 31427108, "comment_id": 50825214, "body": "Optimizing this code? Seriously? How should that relevantly affect the Output size?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1436954269, "post_id": 31427108, "comment_id": 50825292, "body": "...and none of this really answers the question of how the executable could be <i>larger</i> than the source."}, {"owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1436954449, "post_id": 31427108, "comment_id": 50825395, "body": "@Werner. Review the assembly. Optimization reduces <code>main</code> from 10 instructions down to 1 (not including the <code>ret</code>)."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1436954534, "post_id": 31427108, "comment_id": 50825446, "body": "...which <i>still</i> doesn&#39;t answer why the binary was larger than the source by a comfortable margin. You missed the point of the question."}, {"owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 0, "creation_date": 1436954738, "post_id": 31427108, "comment_id": 50825592, "body": "OK so I added the real reason for the bulk (CRT startup overhead)"}], "tags": [], "owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "is_accepted": false, "score": -1, "last_activity_date": 1436954688, "last_edit_date": 1436954688, "creation_date": 1436954013, "answer_id": 31427108, "question_id": 31426874, "link": "https://stackoverflow.com/questions/31426874/c-binary-file-greater-than-source-file/31427108#31427108", "title": "c binary file greater than source file", "body": "<p>It'll be the debug and symbol information. Optimize and strip it:</p>\n\n<ol>\n<li>Use <code>gcc -Os</code> to optimize for smallest size.</li>\n<li>Use <code>strip a.out</code> to remove the symbols and debug info.</li>\n</ol>\n\n<p>There are also the CRT startup files providing the bulk of your binary that process argc, argv etc and setup your environment. You can opt out of those using <code>-nostartfiles</code> but you probably don't want to do that.</p>\n"}, {"tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": true, "score": 8, "last_activity_date": 1578585585, "last_edit_date": 1578585585, "creation_date": 1436954301, "answer_id": 31427233, "question_id": 31426874, "link": "https://stackoverflow.com/questions/31426874/c-binary-file-greater-than-source-file/31427233#31427233", "title": "c binary file greater than source file", "body": "<p>You have a certain one-time overhead even without including anything. There is code running before <code>main()</code> (which is setting up <code>stdin</code>, <code>stdout</code>, and <code>stderr</code>, <a href=\"http://en.cppreference.com/w/c/program/signal\" rel=\"nofollow noreferrer\">signal handler</a> tables etc.), and code running after that function returns (e.g. checking for anything registered with <a href=\"http://en.cppreference.com/w/c/program/atexit\" rel=\"nofollow noreferrer\"><code>atexit()</code></a> and similar things). This is called the C runtime, traditionally located in <a href=\"https://en.wikipedia.org/wiki/Crt0\" rel=\"nofollow noreferrer\"><code>crt0.o</code></a>, which is linked into any executable.</p>\n"}], "owner": {"reputation": 435, "user_id": 4823238, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c23c912b4cf733285963bde3b28c11c7?s=128&d=identicon&r=PG&f=1", "display_name": "Valarpirai", "link": "https://stackoverflow.com/users/4823238/valarpirai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "closed_date": 1436954735, "accepted_answer_id": 31427233, "answer_count": 2, "score": 2, "last_activity_date": 1578585585, "creation_date": 1436953388, "question_id": 31426874, "link": "https://stackoverflow.com/questions/31426874/c-binary-file-greater-than-source-file", "closed_reason": "Duplicate", "title": "c binary file greater than source file", "body": "<p>I have a c source file with name simple.c (file size <strong>68 bytes</strong>) and I compiled it using gcc. The output binary file size is <strong>7151 bytes</strong>.</p>\n\n<p>C Source code:</p>\n\n<pre><code>int main()\n{\n    int a = 10;\n    int b = 34;\n    int c = a + b;\n    return c;\n}\n</code></pre>\n\n<p>I haven't included any header files.</p>\n\n<p>I don't know, how does the C binary file becomes bigger than the source file. Can anyone please explain?</p>\n\n<pre><code>test@test-desktop:~/Desktop/c$ ls -l\ntotal 4\n-rw-rw-r-- 1 test test 68 Jul 15 15:04 simple.c\ntest@test-desktop:~/Desktop/c$ gcc simple.c \ntest@test-desktop:~/Desktop/c$ ls -l\ntotal 12\n-rwxrwxr-x 1 test test 7151 Jul 15 15:04 a.out\n-rw-rw-r-- 1 test test   68 Jul 15 15:04 simple.c\n</code></pre>\n\n<p>The above is the terminal output.</p>\n"}, {"tags": ["c++", "c", "multithreading", "asynchronous"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1436953262, "post_id": 31426768, "comment_id": 50824609, "body": "Essentially, no but practically, also no."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1436953286, "post_id": 31426768, "comment_id": 50824630, "body": "Just code exactly what you want. What obstacle are you encountering? (If you want more help, it would be very useful to know what threading library or standard you&#39;re using. C++11? POSIX? Windows?)"}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "edited": false, "score": 0, "creation_date": 1436953538, "post_id": 31426768, "comment_id": 50824788, "body": "Basically I want what hardware interrupt does. I have one thread that reads data from a file. Then it should ask main thread to call a function. Main thread will be doing something. It should stop doing it and start executing the function. After completing it, main thread should continue with what it was doing"}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "edited": false, "score": 0, "creation_date": 1436953693, "post_id": 31426768, "comment_id": 50824903, "body": "I am using the windows library right now. I will be doing it for linux (pthread) later"}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "edited": false, "score": 0, "creation_date": 1436954172, "post_id": 31426768, "comment_id": 50825217, "body": "I have updated my question. Please see"}], "answers": [{"comments": [{"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "edited": false, "score": 0, "creation_date": 1436953583, "post_id": 31426837, "comment_id": 50824825, "body": "Basically I want what hardware interrupt does. I have one thread that reads data from a file. Then it should ask main thread to call a function. Main thread will be doing something. It should stop doing it and start executing the function. After completing it, main thread should continue with what it was doing using a queue is option, but what I was looking for is interrupt like hardware does"}, {"owner": {"reputation": 17117, "user_id": 469220, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Epvce.jpg?s=128&g=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/469220/vlad"}, "reply_to_user": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "edited": false, "score": 1, "creation_date": 1436953882, "post_id": 31426837, "comment_id": 50825031, "body": "On Linux, I&#39;d say try to see if using <a href=\"https://en.wikipedia.org/wiki/Unix_signal\" rel=\"nofollow noreferrer\">signals</a> helps.&quot;`The SIGUSR1 and SIGUSR2 signals are set aside for you to use any way you want. They&#39;re useful for simple interprocess communication, if you write a signal handler for them in the program that receives the signal.&quot;"}], "tags": [], "owner": {"reputation": 17117, "user_id": 469220, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Epvce.jpg?s=128&g=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/469220/vlad"}, "is_accepted": true, "score": 3, "last_activity_date": 1436956133, "last_edit_date": 1436956133, "creation_date": 1436953293, "answer_id": 31426837, "question_id": 31426768, "link": "https://stackoverflow.com/questions/31426768/interrupt-main-thread-and-ask-it-to-do-something/31426837#31426837", "title": "interrupt main thread and ask it to do something", "body": "<p>A clean way I think would be to have a queue of operations that t1 adds to, that t2 checks at points in its processing loop where it is safe to start doing something else.</p>\n\n<p>On POSIX systems, you can use signals. For example, the following starts a second thread and, while the main thread is doing other work, this second thread sends it a <code>SIGUSR1</code> signal. The main thread handles it and resumes operation.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;signal.h&gt;\n\nvoid* other_thread(void* main_thread) {\n  printf(\"other_thread: %x\\n\", pthread_self());\n  usleep(250*1000);\n  printf(\"sending SIGUSR1 to main thread...\\n\");\n  pthread_kill((pthread_t) main_thread, SIGUSR1);\n  return NULL; \n}\n\nvoid my_handler(int signal) {\n  printf(\"my_handler: %x\\n\", pthread_self());\n  sleep(2);\n  printf(\"back to main\\n\");\n}\n\nint main(int argc, char**argv) {\n\n  signal(SIGUSR1, my_handler);\n\n  pthread_t thread1;\n  pthread_create(&amp;thread1, NULL, other_thread, pthread_self());\n\n  printf(\"main: %x\\n\", pthread_self());\n  int x = 0;\n  while (1) {\n    // sleep(1), or do some work, or:\n    x++;\n    if (x % 10000000 == 0) printf(\"boo\\n\");\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 0, "accepted_answer_id": 31426837, "answer_count": 1, "score": 2, "last_activity_date": 1472653645, "creation_date": 1436953095, "last_edit_date": 1436954064, "question_id": 31426768, "link": "https://stackoverflow.com/questions/31426768/interrupt-main-thread-and-ask-it-to-do-something", "title": "interrupt main thread and ask it to do something", "body": "<p>I want to know if its possible to interrupt main thread and ask it to execute some callback. The main thread should continue with what it was doing after completing the callback. </p>\n\n<p>For instance, we have 2 threads t1 and m1 (main thread). t1 will interrupt m1 (main thread) and ask it to call a function with some parameters. The m1 (main thread) will stop doing what it was doing before and will start executing the function. The after finishing the function, it will get back to what it was doing earlier.</p>\n\n<p>I want to replicate what hardware interrupt does. I have one thread that reads data from a file. Then it should ask main thread to call a function. Main thread will be doing something. It should stop doing it and start executing the function. After completing it, main thread should continue with what it was doing </p>\n"}, {"tags": ["c", "openssl"], "answers": [{"comments": [{"owner": {"reputation": 4031, "user_id": 1916721, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/xBXSE.png?s=128&g=1", "display_name": "carloabelli", "link": "https://stackoverflow.com/users/1916721/carloabelli"}, "edited": false, "score": 0, "creation_date": 1436953657, "post_id": 31426913, "comment_id": 50824874, "body": "Does this also include other possible key types for instance  ECDSA keys using MD5?"}, {"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "reply_to_user": {"reputation": 4031, "user_id": 1916721, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/xBXSE.png?s=128&g=1", "display_name": "carloabelli", "link": "https://stackoverflow.com/users/1916721/carloabelli"}, "edited": false, "score": 0, "creation_date": 1436954165, "post_id": 31426913, "comment_id": 50825215, "body": "I thought ECDSA are only defined with sha*, but I may be wrong. Quick google search also doesn&#39;t bring up anything with md5."}, {"owner": {"reputation": 4031, "user_id": 1916721, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/xBXSE.png?s=128&g=1", "display_name": "carloabelli", "link": "https://stackoverflow.com/users/1916721/carloabelli"}, "edited": false, "score": 0, "creation_date": 1436954209, "post_id": 31426913, "comment_id": 50825252, "body": "Ah well say I wanted to extend this to SHA in the future is there an equivalent link? I&#39;ll edit the question"}], "tags": [], "owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "is_accepted": true, "score": 2, "last_activity_date": 1437096058, "last_edit_date": 1437096058, "creation_date": 1436953512, "answer_id": 31426913, "question_id": 31426648, "link": "https://stackoverflow.com/questions/31426648/check-if-certificate-signature-is-md5-openssl/31426913#31426913", "title": "Check if Certificate Signature is MD5 OpenSSL", "body": "<p>I think this is what you're after: <a href=\"http://www.alvestrand.no/objectid/1.2.840.113549.1.1.html\" rel=\"nofollow\">http://www.alvestrand.no/objectid/1.2.840.113549.1.1.html</a> It lists the hash/encryption available for X509 certificates. You can generate the nids you're comparing against using <code>OBJ_txt2nid()</code>.</p>\n\n<p>The so you want to compare the algorithm nid to <code>OBJ_txt2nid(\"1.2.840.113549.1.1.4\")</code> - or in practice <code>NID_md5WithRSAEncryption</code> (defined in <code>openssl/objects.h</code>)</p>\n\n<p>Edit:\nJust to add some more info: The <a href=\"https://tools.ietf.org/html/rfc5280#section-4.1.1.2\" rel=\"nofollow\">X509v3 RFC</a> refers to other RFCs which define \"acceptable\" algorithms. These are <a href=\"https://tools.ietf.org/html/rfc3279\" rel=\"nofollow\">RFC3279</a>, <a href=\"https://tools.ietf.org/html/rfc4055\" rel=\"nofollow\">RFC4055</a>, and <a href=\"https://tools.ietf.org/html/rfc4491\" rel=\"nofollow\">RFC4491</a>. They all include OIDs which can be used. Only the first one seems to define schemes with MD5 hashing.</p>\n"}], "owner": {"reputation": 4031, "user_id": 1916721, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/xBXSE.png?s=128&g=1", "display_name": "carloabelli", "link": "https://stackoverflow.com/users/1916721/carloabelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 31426913, "answer_count": 1, "score": 2, "last_activity_date": 1437096058, "creation_date": 1436952773, "last_edit_date": 1436954272, "question_id": 31426648, "link": "https://stackoverflow.com/questions/31426648/check-if-certificate-signature-is-md5-openssl", "title": "Check if Certificate Signature is MD5 OpenSSL", "body": "<p>I need to check if a X509 certificate's signature algorithm is MD5 or SHA. To do this I know I can extract the NID corresponding to the signature algorithm:</p>\n\n<pre><code>int sig_nid = OBJ_obj2nid(cert-&gt;sig_alg-&gt;algorithm);\n</code></pre>\n\n<p>Now the problem is that I can't seem to find an easy way to compare this against MD5 or SHA as I do believe multiple NIDs can be returned for a signature. Is there an easy way to compare this NID or a place where I could find all MD5 and SHA NIDs so that I could do a long comparison myself?</p>\n"}, {"tags": ["c", "linux", "x11", "xlib", "xcb"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437058749, "post_id": 31426602, "comment_id": 50882499, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/18857125/how-to-set-mouse-cursor-on-x11-in-a-c-application\">How to set mouse cursor on X11 in a C application</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437075789, "post_id": 31426602, "comment_id": 50892686, "body": "crud, according to a comment on that question, this isn&#39;t standardized. So am I supposed to use heuristics for the name of the hand cursor and try them all until one of them is loaded or what?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437075852, "post_id": 31426602, "comment_id": 50892724, "body": "also, say I use the Xcursor library -- is that shipped by default with X or do I have to make it a dependency of my own app?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437116652, "post_id": 31426602, "comment_id": 50905957, "body": "libxcursor is normally a separate package. You only need heuristics if your cursor is not in the list of standard X cursors"}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437124806, "post_id": 31426602, "comment_id": 50910127, "body": "@n.m. of course is not on that list, almost no useful cursor is on that list and the ones that are are ugly and not what the user expects."}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437124976, "post_id": 31426602, "comment_id": 50910224, "body": "So, to change the hand cursor I need to 1) add a binary dependency to my app and 2) try out a bunch of different names until one works (or, throw in the towel and use a 50MB toolkit and add that nightmare to my deployments and my runtime). How can you encourage your kids to pick up programming after this?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437131851, "post_id": 31426602, "comment_id": 50914211, "body": "Your rant is misplaced, I am not responsible for your problems with libxcursor. If you are not satisfied with my explanation, try finding a better one. My kids are learning prigramming just fine, thank you. I think they would be able to deduce that &quot;hand2&quot; is the cursor shape you want to use if you want a prettier shape than XC_hand2."}, {"owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437148236, "post_id": 31426602, "comment_id": 50924822, "body": "dude, chill, I didn&#39;t even know you actually had any kids. I don&#39;t even <i>know you</i>. How could you feel responsible for my problems with xcursor? :) Anyway, here&#39;s the answer and yes, it&#39;s ugly: <a href=\"http://lists.x.org/archives/xorg/2015-July/057494.html\" rel=\"nofollow noreferrer\">lists.x.org/archives/xorg/2015-July/057494.html</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1437225464, "post_id": 31491040, "comment_id": 50946654, "body": "Doing it that way will mean that if the first load attempt is successful, then you&#39;ll be executing 5 unnecessary <code>if</code> statements. From an optimization perspective, I&#39;d prefer a loop or at least <code>goto</code>. See <a href=\"http://pastebin.com/jZWBB5Fx\" rel=\"nofollow noreferrer\">&quot;xcb change mouse cursor to hand&quot;</a> for an example."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "is_accepted": true, "score": 2, "last_activity_date": 1437221671, "creation_date": 1437221671, "answer_id": 31491040, "question_id": 31426602, "link": "https://stackoverflow.com/questions/31426602/change-mouse-cursor-to-standard-hand-cursor-in-xcb/31491040#31491040", "title": "Change mouse cursor to standard hand cursor in XCB", "body": "<p>Apparently, you have to:</p>\n\n<ol>\n<li>download and build <a href=\"http://cgit.freedesktop.org/xcb/util-cursor/\" rel=\"nofollow\">xcb/util-cursor</a> because it's not included in older Linuxes</li>\n<li>use it to load the cursor (they're called \"themed cursors\")</li>\n<li>try out a bunch of cursor names because they are not standardized.</li>\n</ol>\n\n<p>Code for loading the \"hand\" cursor (<a href=\"http://lists.x.org/archives/xorg/2015-July/057494.html\" rel=\"nofollow\">ref</a>):</p>\n\n<pre><code>xcb_cursor_context_t *ctx;\nif (xcb_cursor_context_new(connection, defaultScreen, &amp;ctx) &gt;= 0) {\n   xcb_cursor_t cursor = xcb_cursor_load_cursor(ctx, \"pointing_hand\");\n   if (cursor == XCB_CURSOR_NONE) // they come with various names ...\n      cursor = xcb_cursor_load_cursor(ctx, \"hand2\");\n   if (cursor == XCB_CURSOR_NONE)\n      cursor = xcb_cursor_load_cursor(ctx, \"hand\");\n   if (cursor == XCB_CURSOR_NONE)\n      cursor = xcb_cursor_load_cursor(ctx, \"hand1\");\n   if (cursor == XCB_CURSOR_NONE)\n      cursor = xcb_cursor_load_cursor(ctx, \"pointer\");\n   if (cursor == XCB_CURSOR_NONE)\n      cursor = xcb_cursor_load_cursor(ctx, \"e29285e634086352946a0e7090d73106\");\n   if (cursor == XCB_CURSOR_NONE)\n      cursor = xcb_cursor_load_cursor(ctx, \"9d800788f1b08800ae810202380a0822\");\n   if (cursor != XCB_CURSOR_NONE) {\n      xcb_change_window_attributes(connection, window, XCB_CW_CURSOR, &amp;cursor);\n   }\n   xcb_cursor_context_free(ctx);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user519179"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "accepted_answer_id": 31491040, "answer_count": 1, "score": 0, "last_activity_date": 1437221671, "creation_date": 1436952657, "last_edit_date": 1436978022, "question_id": 31426602, "link": "https://stackoverflow.com/questions/31426602/change-mouse-cursor-to-standard-hand-cursor-in-xcb", "title": "Change mouse cursor to standard hand cursor in XCB", "body": "<p>Using XCB, I need to change the mouse pointer for a window to the standard hand cursor (whatever that means in Linux, I need a toolkit-independent solution).</p>\n\n<p>Note: loading the \"cursor\" font and changing the window attribute XCB_CW_CURSOR to XC_hand2 is not a solution. This loads the X11 ugly and unfamiliar hand cursor, not the default Ubuntu hand cursor that you see in Chrome when you hover links.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "linker", "shared-libraries", "static-libraries", "header-files"], "answers": [{"comments": [{"owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "edited": false, "score": 0, "creation_date": 1436953165, "post_id": 31426697, "comment_id": 50824545, "body": "Awesome thanks @Sourav Ghosh (+1) - can I assume that I can use multiple <code>-l</code> flags to include multiple libraries, like <code>-lmylib -lanotherlib -lyetanotherlib</code>, etc.? Thanks again!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "edited": false, "score": 0, "creation_date": 1436953198, "post_id": 31426697, "comment_id": 50824563, "body": "@smeeb No need to assume, you surely can. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1436953276, "last_edit_date": 1436953276, "creation_date": 1436952898, "answer_id": 31426697, "question_id": 31426598, "link": "https://stackoverflow.com/questions/31426598/distribution-and-linking-of-c-header-files-and-libraries/31426697#31426697", "title": "Distribution and Linking of C Header Files and Libraries", "body": "<blockquote>\n  <p><em>how does the linker know where to find: (1) the header file itself, <code>mylib.h</code></em></p>\n</blockquote>\n\n<ul>\n<li>With a notation like <code>#include &lt;mylib.h&gt;</code>, it searches the header file in the system defined include PATH.</li>\n<li>With a notation like <code>#include \"mylib.h\"</code>, it searches the header file in the system defined include PATH and in the current directory.</li>\n</ul>\n\n<p>if the header file is present in some other hierarchy, you can provide the path to get the header file with <code>-I</code> option with <code>gcc</code>.</p>\n\n<blockquote>\n  <p><em>(2) the library implementing mylib.h?</em></p>\n</blockquote>\n\n<p>You need to provide the path to the library using <code>-L</code> (in case of non-standard path to the library) and link the library using <code>-l</code> option.</p>\n\n<p>As per the convention, if the (shared) library is named <code>libmylib.so</code>, you can use <code>-lmylib</code> to link to that directory.</p>\n\n<p>For example , consider the <a href=\"http://linux.die.net/man/3/pow\" rel=\"nofollow\"><code>pow()</code></a> function.</p>\n\n<p>It is prototyped in <code>math.h</code>, so in your source file, you need to add <code>#include &lt;math.h&gt;</code> to get the function declaration.</p>\n\n<p>Then, at compile (<em>rather, linking</em>) time, you need to link it with the \"math\" library using <code>-lm</code> to get the function definition.</p>\n"}], "owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 31426697, "answer_count": 1, "score": 1, "last_activity_date": 1436954986, "creation_date": 1436952649, "last_edit_date": 1495541643, "question_id": 31426598, "link": "https://stackoverflow.com/questions/31426598/distribution-and-linking-of-c-header-files-and-libraries", "title": "Distribution and Linking of C Header Files and Libraries", "body": "<p>I am brand new to C programming (but not programming) and am trying to understand how libraries and header files work together, particularly with respect to packaging and distribution.</p>\n\n<p>After reading <a href=\"https://stackoverflow.com/questions/924485/whats-the-difference-between-a-header-file-and-a-library\">this excellent question and its answer</a>, I understand that the header file(s) act as the API to a library, exposing capabilities to the outside world; and that the library itself is the implementation of those capabilities.</p>\n\n<p>However one thing that I cannot seem to find a good explanation of is: how are header files packaged into or distributed with the libraries?</p>\n\n<ul>\n<li>Are the libs and their headers packaged into an archive (zip, tarball, etc.)?</li>\n<li>Are headers compiled into libs and distributed alongside them?</li>\n</ul>\n\n<p>When I do a <code>#include \"mylib.h\"</code>, how does the linker know where to find: </p>\n\n<ol>\n<li>the header file itself, <code>mylib.h</code></li>\n<li>the library implementing the functions declared in <code>mylib.h</code>.</li>\n</ol>\n"}, {"tags": ["c", "global-variables", "static-variables"], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 3, "last_activity_date": 1436953473, "last_edit_date": 1436953473, "creation_date": 1436952786, "answer_id": 31426653, "question_id": 31426563, "link": "https://stackoverflow.com/questions/31426563/c-local-and-global-static-variables/31426653#31426653", "title": "C local and global static variables", "body": "<p>You messed up all. Static local variable is a place to <strong>hide data from other functions</strong> but retain data for future calls of that function.    </p>\n\n<p>Static global variables have  </p>\n\n<ul>\n<li>static storage duration  (Retain data for future call)</li>\n<li>internal linkage (variable is restricted to single file) and     </li>\n<li>file scope               (Only in the current file the variable can be referenced) </li>\n</ul>\n\n<p>Static local variables have    </p>\n\n<ul>\n<li>static storage duration </li>\n<li>no linkage  </li>\n<li>block scope</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 128, "user_id": 4036145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emGDL.jpg?s=128&g=1", "display_name": "NightWatcher", "link": "https://stackoverflow.com/users/4036145/nightwatcher"}, "is_accepted": false, "score": 0, "last_activity_date": 1436952823, "creation_date": 1436952823, "answer_id": 31426669, "question_id": 31426563, "link": "https://stackoverflow.com/questions/31426563/c-local-and-global-static-variables/31426669#31426669", "title": "C local and global static variables", "body": "<p>Nope. Local Static variables are accessible with in given module.</p>\n\n<p>While Global static variables are accessible with in given C-file.</p>\n"}, {"tags": [], "owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436953307, "creation_date": 1436953307, "answer_id": 31426841, "question_id": 31426563, "link": "https://stackoverflow.com/questions/31426563/c-local-and-global-static-variables/31426841#31426841", "title": "C local and global static variables", "body": "<p>Local static variable has limited scope to the function only.<br>As you can see, following code gives compilation error because it tries to access \"prox\" variable from main even though it is static.</p>\n\n<pre><code>int main(void)\n{\ntest();\nprintf(\"The PROX is : %d\", prox);\n}\n\ntest()\n{\nstatic prox;\nprox=prox+5;\nprintf(\"INSIDE prox[%d]\",prox);\n}\n</code></pre>\n"}], "owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 31426653, "answer_count": 3, "score": 0, "last_activity_date": 1436953473, "creation_date": 1436952567, "question_id": 31426563, "link": "https://stackoverflow.com/questions/31426563/c-local-and-global-static-variables", "title": "C local and global static variables", "body": "<p>My <em>understanding</em> is that a local static variable has \"program scope\"; that is, once defined it lives until the program terminates. Furthermore, my understanding is that local statics are also accessible outside the current module/C-file they are defined inside of:</p>\n\n<pre><code>void doSomething() {\n    static int myVar = 5;   // Program scope &amp; accessible to other modules\n}\n</code></pre>\n\n<p>My <em>understanding</em> is that global static variables also have program scope, but that they are only visible to the current module/C-file:</p>\n\n<pre><code>static int myVar = 5;       // Program scope but \"module private\"\nvoid doSomething() {\n    // Whatever here...\n}\n</code></pre>\n\n<p>Isn't this a bit backwards? I would have expected it to be the other way around. So I ask: is my understanding above correct? If so, then what is the motivation for local statics to be accessible outside their current module, but not global statics?</p>\n"}, {"tags": ["c", "arrays", "malloc", "heap-memory"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3235832"}, "edited": false, "score": 1, "creation_date": 1436953028, "post_id": 31426478, "comment_id": 50824457, "body": "firstly, you need a closing parenthesis for<code>malloc</code> :)"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1436954689, "last_edit_date": 1436954689, "creation_date": 1436952460, "answer_id": 31426507, "question_id": 31426478, "link": "https://stackoverflow.com/questions/31426478/malloc-array-of-struct/31426507#31426507", "title": "Malloc array of struct", "body": "<p>Change  </p>\n\n<pre><code>struct test _testData[5];  // You already declared it an array \n</code></pre>\n\n<p>to dynamically allocate array  </p>\n\n<pre><code>struct test *_testData = malloc(5 * sizeof(struct test));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1436952490, "creation_date": 1436952490, "answer_id": 31426525, "question_id": 31426478, "link": "https://stackoverflow.com/questions/31426478/malloc-array-of-struct/31426525#31426525", "title": "Malloc array of struct", "body": "<pre><code>struct test _testData[5]; \n</code></pre>\n\n<p>You have already allocated memory for 5 objects of type <code>struct test</code> on stack.</p>\n\n<p>If you want to allocate memory dynamically</p>\n\n<p>Then do</p>\n\n<pre><code>struct test * ptr = malloc(sizeof(struct test) * 5);\n</code></pre>\n\n<p>The memory allocated is on heap in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 1, "last_activity_date": 1436952497, "creation_date": 1436952497, "answer_id": 31426529, "question_id": 31426478, "link": "https://stackoverflow.com/questions/31426478/malloc-array-of-struct/31426529#31426529", "title": "Malloc array of struct", "body": "<p>You can simply use something like:</p>\n\n<pre><code>test *_testData = malloc (5 * sizeof(*_testData));\n</code></pre>\n\n<p>Since you create a <code>typedef</code>, there's no real need to specify the full structure name and the multiplication by five automatically gives you an array of the desired size.</p>\n\n<p>You'll notice I've also used <code>*_testData</code> as the argument to <code>sizeof</code> - it's by no means necessary but it minimises the changes required should you change the type to something else in future.</p>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 5109168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e29c377cfb3fe1ebd7d8c94a112bc3cf?s=128&d=identicon&r=PG&f=1", "display_name": "franciscod", "link": "https://stackoverflow.com/users/5109168/franciscod"}, "is_accepted": false, "score": 1, "last_activity_date": 1436952541, "creation_date": 1436952541, "answer_id": 31426550, "question_id": 31426478, "link": "https://stackoverflow.com/questions/31426478/malloc-array-of-struct/31426550#31426550", "title": "Malloc array of struct", "body": "<p>This needs more context, but when you do</p>\n\n<pre><code>struct test _testData[5];\n</code></pre>\n\n<p>you're allocating memory on the stack, so you don't need malloc. Should you use malloc, you'd define your variable as a pointer, request a chunk of memory that would allocate your entire array and assign the pointer to it:</p>\n\n<pre><code>struct test *_testData;  \n_testData = malloc(5 * sizeof(struct test));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "is_accepted": false, "score": 0, "last_activity_date": 1436953569, "last_edit_date": 1436953569, "creation_date": 1436952567, "answer_id": 31426564, "question_id": 31426478, "link": "https://stackoverflow.com/questions/31426478/malloc-array-of-struct/31426564#31426564", "title": "Malloc array of struct", "body": "<ul>\n<li><p>To use <code>struct test _testData[5];</code></p>\n\n<pre><code>struct test _testData[5];\n// to malloc\nfor(int i = 0; i &lt; sizeof(_testData)/sizeof(_testData[0]); i++)\n    _testData[i] = malloc (sizeof(struct test));\n\n// do something to _testData[0],_testData[1]... \n// to free\nfor(int i = 0; i &lt; sizeof(_testData)/sizeof(_testData[0]); i++)\n    if(_testData[i]) {\n        free (_testData[i])\n    };\n</code></pre></li>\n<li><p>To use <code>struct test *p;</code></p>\n\n<pre><code>struct test *p;\nint num = 5;\n// to malloc\np = malloc (sizeof(struct test)*num);\n// do something to p[0],p[1]...\n// to free\nif(p){\n   free(p);\n} \n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1436953154, "last_edit_date": 1436953154, "creation_date": 1436952576, "answer_id": 31426569, "question_id": 31426478, "link": "https://stackoverflow.com/questions/31426478/malloc-array-of-struct/31426569#31426569", "title": "Malloc array of struct", "body": "<p>Use <code>malloc</code> for creating a pointer to the array of 5 <code>struct test</code> items in heap dynamically:</p>\n\n<pre><code>struct test *ptr = malloc(sizeof(struct test) * 5);\n</code></pre>\n\n<p>and you must free the pointer after its use to prevent <strong>memory leaks</strong>.</p>\n\n<p>While your code statement:</p>\n\n<pre><code>struct test _testData[5];\n</code></pre>\n\n<p>allocates the fixed memory to the array of <code>struct test</code> items in the stack. This will be automatically de-allocated by the compiler after its use.</p>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 4377391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nk8IR.jpg?s=128&g=1", "display_name": "rabi shaw", "link": "https://stackoverflow.com/users/4377391/rabi-shaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1436953662, "creation_date": 1436953662, "answer_id": 31426971, "question_id": 31426478, "link": "https://stackoverflow.com/questions/31426478/malloc-array-of-struct/31426971#31426971", "title": "Malloc array of struct", "body": "<pre><code>/* Hope this small prog will help you to understand */\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct test\n{\n        int testMallocOne;\n        int testMallocTwo;\n} test; \n\ntypedef struct test node;\n\nint main ( void )\n{\n        int i=0;\n        node *ptr[5];\n\n        for ( i=0; i&lt;5 ; i++ )\n        {\n                ptr[i] = malloc (sizeof (node ));\n        }\n        for ( i=0; i&lt;5; i++ )\n        {\n                printf (\"\\n enter the value for testMallocOne \" );\n                scanf ( \"%d\", &amp;(ptr[i]-&gt;testMallocOne) );\n\n                printf (\"\\n enter the value for testMallocTwo \" );\n                scanf ( \"%d\", &amp;(ptr[i]-&gt;testMallocTwo) );\n\n        }\n\n        printf ( \"\\n here is the data \\n\");\n\n        for ( i=0; i&lt;5; i++ )\n        {\n                printf ( \"\\n value of i = %d and testMallocOne is  %d\",i, ptr[i]-&gt;testMallocOne );\n                printf ( \"\\n value of i = %d and testMallocTwo is  %d\",i, ptr[i]-&gt;testMallocTwo );\n        }\n\n        return ( 0 );\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 5114357, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/503e46fb03a077c3809d9232bfc854e5?s=128&d=identicon&r=PG&f=1", "display_name": "Dannys", "link": "https://stackoverflow.com/users/5114357/dannys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "answer_count": 7, "score": -1, "last_activity_date": 1436955082, "creation_date": 1436952349, "last_edit_date": 1436955082, "question_id": 31426478, "link": "https://stackoverflow.com/questions/31426478/malloc-array-of-struct", "title": "Malloc array of struct", "body": "<p>I've been looking around for the past few days on and off about how to allocate memory to an array of structs. I have tried most of the examples online with no success, read through the book 'The C programming language' with no success. </p>\n\n<pre><code>typedef struct {\n    int testMallocOne;\n    int testMallocTwo;\n} test;   \n</code></pre>\n\n<p>This is where I have set my struct.</p>\n\n<p>I then declared my struct using -</p>\n\n<pre><code>struct test _testData[5]; \n</code></pre>\n\n<p>and this is where I'm stuck - this is the latest attempt I have made which has been unsuccessful</p>\n\n<pre><code>_testData = malloc (sizeof(struct test);\n</code></pre>\n\n<p>Could anyone point out where I am going wrong, as from my research I seem to be doing the same as most examples I have seen. These are all declared outside of main.</p>\n"}, {"tags": ["c", "linux", "sockets", "tcp"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1436952860, "post_id": 31426420, "comment_id": 50824353, "body": "The values you&#39;re setting may not be the actual values being used. The platform can adjust them. Use <code>getsockopt()</code> to find out what values are actually being used, and then see whether what&#39;s happening agrees with that. NB I believe you can do all this once, on the listening socket, whence it will be inherited by all accepted sockets."}, {"owner": {"reputation": 141, "user_id": 632488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d2d00985a247e17a055f171ab3f62?s=128&d=identicon&r=PG", "display_name": "Arapajoe", "link": "https://stackoverflow.com/users/632488/arapajoe"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1436953090, "post_id": 31426420, "comment_id": 50824493, "body": "I tried it on the listening socket too, with no luck. I&#39;ll double check the return values of  <code>getsockopt()</code>. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 632488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d2d00985a247e17a055f171ab3f62?s=128&d=identicon&r=PG", "display_name": "Arapajoe", "link": "https://stackoverflow.com/users/632488/arapajoe"}, "edited": false, "score": 0, "creation_date": 1437658766, "post_id": 31561519, "comment_id": 51129968, "body": "Thank you for pointing that out. It turns out it was a typo when opening the question here. I checked my code, and as you say, <code>SOL_SOCKET</code> is used with <code>SO_KEEPALIVE</code>."}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "reply_to_user": {"reputation": 141, "user_id": 632488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d2d00985a247e17a055f171ab3f62?s=128&d=identicon&r=PG", "display_name": "Arapajoe", "link": "https://stackoverflow.com/users/632488/arapajoe"}, "edited": false, "score": 0, "creation_date": 1437663410, "post_id": 31561519, "comment_id": 51133915, "body": "Well, then I have no ideas. I suggest to start from minimal example that reproduces your program and do error checking for all system calls, so others can try it and help you. I&#39;ll post a minimal example that works for me in a moment."}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "reply_to_user": {"reputation": 141, "user_id": 632488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d2d00985a247e17a055f171ab3f62?s=128&d=identicon&r=PG", "display_name": "Arapajoe", "link": "https://stackoverflow.com/users/632488/arapajoe"}, "edited": false, "score": 0, "creation_date": 1437663890, "post_id": 31561519, "comment_id": 51134346, "body": "typo: program -&gt; problem"}], "tags": [], "owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "is_accepted": false, "score": 6, "last_activity_date": 1437563639, "creation_date": 1437563639, "answer_id": 31561519, "question_id": 31426420, "link": "https://stackoverflow.com/questions/31426420/configuring-tcp-keepalive-after-accept/31561519#31561519", "title": "Configuring TCP keepalive after accept", "body": "<p><code>SO_KEEPALIVE</code> should be used with <code>SOL_SOCKET</code>, not <code>IPPROTO_TCP</code> or <code>SOL_TCP</code>. See <a href=\"http://linux.die.net/man/7/socket\" rel=\"noreferrer\">socket(7)</a> and <a href=\"http://linux.die.net/man/7/tcp\" rel=\"noreferrer\">tcp(7)</a>.</p>\n\n<p>So try this:</p>\n\n<pre><code>int val = 1;\nsetsockopt(SockConnected, SOL_SOCKET, SO_KEEPALIVE, &amp;val, sizeof(val));\n</code></pre>\n\n<p>I guess <code>TCP_KEEPIDLE</code> and similar options are just ignored if <code>SO_KEEPALIVE</code> was not set correctly, and <code>SOL_TCP</code> is a synonym for <code>IPPROTO_TCP</code>.</p>\n\n<p>If it does not help, consider posting a minimal example that reproduces the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 632488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d2d00985a247e17a055f171ab3f62?s=128&d=identicon&r=PG", "display_name": "Arapajoe", "link": "https://stackoverflow.com/users/632488/arapajoe"}, "edited": false, "score": 0, "creation_date": 1438267402, "post_id": 31591218, "comment_id": 51389768, "body": "Thank you! I was configuring everything before the <code>listen()</code> and after the <code>accept()</code>. If I do it just after <code>accept()</code>, keepalive it&#39;s being enabled."}], "tags": [], "owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "is_accepted": true, "score": 12, "last_activity_date": 1437663843, "creation_date": 1437663843, "answer_id": 31591218, "question_id": 31426420, "link": "https://stackoverflow.com/questions/31426420/configuring-tcp-keepalive-after-accept/31591218#31591218", "title": "Configuring TCP keepalive after accept", "body": "<p>Here is a minimal working example. If it works for you, you can use it as a reference.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/signal.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netinet/tcp.h&gt;\n\n#define check(expr) if (!(expr)) { perror(#expr); kill(0, SIGTERM); }\n\nvoid enable_keepalive(int sock) {\n    int yes = 1;\n    check(setsockopt(sock, SOL_SOCKET, SO_KEEPALIVE, &amp;yes, sizeof(int)) != -1);\n\n    int idle = 1;\n    check(setsockopt(sock, IPPROTO_TCP, TCP_KEEPIDLE, &amp;idle, sizeof(int)) != -1);\n\n    int interval = 1;\n    check(setsockopt(sock, IPPROTO_TCP, TCP_KEEPINTVL, &amp;interval, sizeof(int)) != -1);\n\n    int maxpkt = 10;\n    check(setsockopt(sock, IPPROTO_TCP, TCP_KEEPCNT, &amp;maxpkt, sizeof(int)) != -1);\n}\n\nint main(int argc, char** argv) {\n    check(argc == 2);\n\n    struct sockaddr_in addr;\n    addr.sin_family = AF_INET;\n    addr.sin_port = htons(12345);\n    check(inet_pton(AF_INET, argv[1], &amp;addr.sin_addr) != -1);\n\n    int server = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    check(server != -1);\n\n    int yes = 1;\n    check(setsockopt(server, SOL_SOCKET, SO_REUSEADDR, &amp;yes, sizeof(int)) != -1);\n\n    check(bind(server, (struct sockaddr*)&amp;addr, sizeof(addr)) != -1);\n    check(listen(server, 1) != -1);\n\n    if (fork() == 0) {\n        int client = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n        check(client != -1);\n        check(connect(client, (struct sockaddr*)&amp;addr, sizeof(addr)) != -1);\n        printf(\"connected\\n\");\n        pause();\n    }\n    else {\n        int client = accept(server, NULL, NULL);\n        check(client != -1);\n        enable_keepalive(client);\n        printf(\"accepted\\n\");\n        wait(NULL);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Example output (<code>tcpdump</code> reports keepalive packets every second):</p>\n\n<pre><code>$ ./a.out 127.0.0.1 &amp;\n[1] 14010\nconnected\naccepted\n\n$ tcpdump -n -c4 -ilo port 12345\ndropped privs to tcpdump\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on lo, link-type EN10MB (Ethernet), capture size 262144 bytes\n18:00:35.173892 IP 127.0.0.1.12345 &gt; 127.0.0.1.60998: Flags [.], ack 510307430, win 342, options [nop,nop,TS val 389745775 ecr 389745675], length 0\n18:00:35.173903 IP 127.0.0.1.60998 &gt; 127.0.0.1.12345: Flags [.], ack 1, win 342, options [nop,nop,TS val 389745775 ecr 389745075], length 0\n18:00:36.173886 IP 127.0.0.1.12345 &gt; 127.0.0.1.60998: Flags [.], ack 1, win 342, options [nop,nop,TS val 389745875 ecr 389745775], length 0\n18:00:36.173898 IP 127.0.0.1.60998 &gt; 127.0.0.1.12345: Flags [.], ack 1, win 342, options [nop,nop,TS val 389745875 ecr 389745075], length 0\n4 packets captured\n8 packets received by filter\n0 packets dropped by kernel\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 632488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d2d00985a247e17a055f171ab3f62?s=128&d=identicon&r=PG", "display_name": "Arapajoe", "link": "https://stackoverflow.com/users/632488/arapajoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17983, "favorite_count": 5, "accepted_answer_id": 31591218, "answer_count": 2, "score": 11, "last_activity_date": 1437663843, "creation_date": 1436952200, "last_edit_date": 1437658624, "question_id": 31426420, "link": "https://stackoverflow.com/questions/31426420/configuring-tcp-keepalive-after-accept", "title": "Configuring TCP keepalive after accept", "body": "<p>After the <code>accept()</code> on a socket, I'm trying to configure the TCP keepalive.</p>\n\n<pre><code>SockConnected = accept(SockListen, &amp;RemoteAddr,\n                   &amp;RemoteLen);\n/* A bit of checking goes here */\nif (setsockopt (SockConnected , SOL_SOCKET, SO_KEEPALIVE,\n                            (ST_CHAR *) &amp;sockopt_on, sizeof (int) ) )\n{\n   /* Error logging */\n}\n\nif (setsockopt(SockConnected , IPPROTO_TCP, TCP_KEEPIDLE, (char*)&amp;(sockopt_tcp_keep_idle), sizeof(sockopt_tcp_keep_idle)))\n{\n    /* Error logging */\n}\nif (setsockopt(SockConnected, IPPROTO_TCP, TCP_KEEPINTVL, (char*)&amp;(sockopt_tcp_keep_intvl), sizeof(sockopt_tcp_keep_intvl)))\n{\n    /* Error logging */\n}\nif (setsockopt(SockConnected, IPPROTO_TCP, TCP_KEEPCNT, (char*)&amp;(sockopt_tcp_keep_cnt), sizeof(sockopt_tcp_keep_cnt)))\n{\n    /* Error logging */\n}\n</code></pre>\n\n<p>After calling <code>getsockopt()</code> for all four properties, everything seems alright. I've checked in Wireshark and there are no Keep alive packets being sent. I had to change <code>SOL_TCP</code> to <code>IPPROTO_TCP</code>, because when calling <code>setsockopt()</code> for <code>TCP_KEEPIDLE</code> it was returning errno 92 (Protocol not found).</p>\n\n<p>I'm doing the same thing after calling <code>socket()</code> for an outgoing connection, and it's working perfectly.</p>\n\n<p>I'm using C and Linux.</p>\n\n<p>Is there any reason why <code>setsockopt</code> may not be working after an accept? </p>\n"}, {"tags": ["c", "gcc", "arm", "static-libraries"], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "is_accepted": false, "score": 3, "last_activity_date": 1499439825, "creation_date": 1499439825, "answer_id": 44974049, "question_id": 31426182, "link": "https://stackoverflow.com/questions/31426182/third-party-c-static-library-add-ffunction-sections-fdata-sections/44974049#44974049", "title": "Third party C static library: Add -ffunction-sections -fdata-sections", "body": "<p>I'm aware this is old, but I came across this problem as well, and figured I'd provide my findings.</p>\n\n<p><strong>TL;DR: It's possible, but incredibly difficult. You can't simply move symbols into their own sections. Relocations will bite you.</strong></p>\n\n<p>When the compiler generates machine code, it will generate slightly different instructions if the <code>-ffunction-sections</code> and <code>-fdata-sections</code> flags are, or are not, provided. This is due to assumptions the compiler is able to make about where symbols will be located. These assumptions change depending on the flags provided.</p>\n\n<p>This is best illustrated by example. Take the following very simple code snippet:\n</p>\n\n<pre><code>int a, b;\n\nint getAPlusB()\n{\n    return a + b;\n}\n</code></pre>\n\n<p>The following is the result of <code>arm-none-eabi-objdump -xdr test.o</code>:</p>\n\n<p><code>arm-none-eabi-gcc -c -Os -mthumb -mcpu=cortexm3 -mlittle-endian -o test.o test.c</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SYMBOL TABLE:\n00000000 g     F .text  0000000c getAPlusB\n00000004 g     O .bss   00000004 b\n00000000 g     O .bss   00000004 a\n\nDisassembly of section .text:\n\n00000024 &lt;getAPlusB&gt;:\n  24:   4b01        ldr r3, [pc, #4]    ; (2c &lt;getAPlusB+0x8&gt;)\n  26:   cb09        ldmia   r3, {r0, r3}\n  28:   4418        add r0, r3\n  2a:   4770        bx  lr\n  2c:   00000000    .word   0x00000000\n            2c: R_ARM_ABS32 .bss\n</code></pre>\n\n<p><code>arm-none-eabi-gcc -c -Os -ffunction-sections -fdata-sections \\\n  -mthumb -mcpu=cortexm3 -mlittle-endian -o test.o test.c</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SYMBOL TABLE:\n00000000 g     F .text.getAPlusB    00000014 getAPlusB\n00000000 g     O .bss.b 00000004 b\n00000000 g     O .bss.a 00000004 a\n\nDisassembly of section .text.getAPlusB:\n\n00000000 &lt;getAPlusB&gt;:\n   0:   4b02        ldr r3, [pc, #8]    ; (c &lt;getAPlusB+0xc&gt;)\n   2:   6818        ldr r0, [r3, #0]\n   4:   4b02        ldr r3, [pc, #8]    ; (10 &lt;getAPlusB+0x10&gt;)\n   6:   681b        ldr r3, [r3, #0]\n   8:   4418        add r0, r3\n   a:   4770        bx  lr\n    ...\n            c: R_ARM_ABS32  .bss.a\n            10: R_ARM_ABS32 .bss.b\n</code></pre>\n\n<p>The difference is subtle, but important. The flag enabled code performs two separate loads, while the disabled code performs a single \"load multiple.\" The enabled code does this because it <em>knows</em> both symbols are contained in the same section, in a certain sequence. With the enabled code, this is not the case. The symbols are in two separate sections, and while it is likely they will keep their order and proximity, it is not guaranteed. What's more, if both sections are not referenced, the linker may decide one section is not used, and remove it.</p>\n\n<p>Another example:\n</p>\n\n<pre><code>int a, b;\n\nint getB()\n{\n  return b;\n}\n</code></pre>\n\n<p>And the generated code. First without the flags:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SYMBOL TABLE:\n00000000 g     F .text  0000000c getB\n00000004 g     O .bss   00000004 b\n00000000 g     O .bss   00000004 a\n\nDisassembly of section .text:\n\n00000018 &lt;getB&gt;:\n  18:   4b01        ldr r3, [pc, #4]    ; (20 &lt;getB+0x8&gt;)\n  1a:   6858        ldr r0, [r3, #4]\n  1c:   4770        bx  lr\n  1e:   bf00        nop\n  20:   00000000    .word   0x00000000\n            20: R_ARM_ABS32 .bss\n</code></pre>\n\n<p>And with the flags:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SYMBOL TABLE:\n00000000 g     F .text.getB 00000014 getB\n00000000 g     O .bss.b 00000004 b\n00000000 g     O .bss.a 00000004 a\n\nDisassembly of section .text.getB:\n\n00000000 &lt;getB&gt;:\n   0:   4b01        ldr r3, [pc, #4]    ; (8 &lt;getB+0x8&gt;)\n   2:   6818        ldr r0, [r3, #0]\n   4:   4770        bx  lr\n   6:   bf00        nop\n   8:   00000000    .word   0x00000000\n            8: R_ARM_ABS32  .bss.b\n</code></pre>\n\n<p>In this case, the difference is even more subtle. The enabled code loads with an offset of 0, while the disabled code uses 4. Since the disabled code references the beginning of the section, it needs to offset to the location of <code>b</code>. However the enabled code references the section which contains solely <code>b</code>, and therefore does not need an offset. If we were to split this and only change the relocation, the new code would contain a reference to the section <code>a</code> was in, but not <code>b</code>. This, again, could cause the linker to garbage collect the wrong section.</p>\n\n<p>These were just two scenarios that I came across when looking at this problem, there may be more.</p>\n\n<p>Producing valid object files functionally equivalent to code compiled with the <code>-ffunction-sections</code> and <code>-fdata-sections</code> flags would require parsing the machine instructions looking for these and any other relocation issues that could come up. This is not an easy task to accomplish.</p>\n"}], "owner": {"reputation": 21, "user_id": 3875888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c573986ec2b8031189feab79f6647529?s=128&d=identicon&r=PG&f=1", "display_name": "Lars Rademacher", "link": "https://stackoverflow.com/users/3875888/lars-rademacher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 3, "answer_count": 1, "score": 2, "last_activity_date": 1499439825, "creation_date": 1436951640, "question_id": 31426182, "link": "https://stackoverflow.com/questions/31426182/third-party-c-static-library-add-ffunction-sections-fdata-sections", "title": "Third party C static library: Add -ffunction-sections -fdata-sections", "body": "<p>I am in the situation to have a c static library (compiled with arm-gcc), which is provided by a third party. I have no possibility to (let the third party) re-compile the library.</p>\n\n<p>When investigating the library contents, i found that the gcc options <em>-ffunction-sections</em> and <em>-fdata-sections</em> have not been used for compiling the library. But this would be very helpful for reducing the binary size of the project.</p>\n\n<p>Compilation is done with: <em>(GNU Tools for ARM Embedded Processors) 4.8.4 20140526 (release) [ARM/embedded-4_8-branch revision 211358].</em></p>\n\n<p>Is there any way to put every data and every function into their own separate section to enable function-level-linking for this library, without needing to recompile code?</p>\n\n<p>I thought of this possible approach: </p>\n\n<ul>\n<li>Split library into its object files.</li>\n<li>For each object file:\n\n<ul>\n<li>Write code to move the symbols into own sections</li>\n</ul></li>\n<li>Put new object files back together into archive file</li>\n</ul>\n\n<p>Could this work, or do you have other suggestions, which ideally only use the tools provided by arm-gcc?</p>\n"}, {"tags": ["c", "lua"], "comments": [{"owner": {"reputation": 2792, "user_id": 3125367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/650027e104822e3cd1be56bb90fa5271?s=128&d=identicon&r=PG&f=1", "display_name": "user3125367", "link": "https://stackoverflow.com/users/3125367/user3125367"}, "edited": false, "score": 0, "creation_date": 1437261130, "post_id": 31425891, "comment_id": 50956432, "body": "It is unclear whether <code>luaL_ref</code> could be used due to <i>passing a reference value throughout callbacks is not an option</i>."}], "answers": [{"tags": [], "owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 0, "last_activity_date": 1449601101, "creation_date": 1449601101, "answer_id": 34163814, "question_id": 31425891, "link": "https://stackoverflow.com/questions/31425891/put-userdata-on-lua-stack-in-a-thread-safe-manner/34163814#34163814", "title": "Put userdata on lua stack in a thread-safe manner", "body": "<p>Because Lua has no thread safety guarantees for data races within the same <code>lua_State</code> instance, I'll assume your C code ensures that only one piece of code is communicating with the same <code>lua_State</code> at any one time.</p>\n\n<p>The usual way to handle this is through the <a href=\"http://www.lua.org/manual/5.1/manual.html#3.5\" rel=\"nofollow\">Lua registry</a>. It is a special table that is part of the <code>lua_State</code>, accessible from any C code. You designate some key in the registry table to be your special value.</p>\n\n<p>Lua code cannot access the Lua registry unless some C code gives them access to it (BTW: don't do this). So as long as you maintain the integrity of this table, you don't have to worry about a Lua script reaching out and breaking it.</p>\n"}], "owner": {"reputation": 880, "user_id": 669398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aab866dd1fe7712a79e65389056625dc?s=128&d=identicon&r=PG", "display_name": "Morse", "link": "https://stackoverflow.com/users/669398/morse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1449601101, "creation_date": 1436950813, "question_id": 31425891, "link": "https://stackoverflow.com/questions/31425891/put-userdata-on-lua-stack-in-a-thread-safe-manner", "title": "Put userdata on lua stack in a thread-safe manner", "body": "<p>I have a C function, that calls a lua function, that in turn initiate a long chain of async callbacks that hop between C and lua. And I want all of the C functions involved to be able to access some specific userdata, that I created in the original C function. But the tricky part is: all of this should be thread-safe, and also I can't change API, so passing a reference value throughout callbacks is not an option.</p>\n\n<p>So is there a way to somehow put userdata inside lua_State, in a way that only \"my\" chain of callbacks could access it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 2, "creation_date": 1436950922, "post_id": 31425855, "comment_id": 50823116, "body": "Use man pages. stdio -&gt; <code>extern FILE *stdin;</code> (similar for stdout and stderr). errno -&gt; <code>errno</code> can be a macro because it is local to thread or <code>extern int errno</code>. stdio -&gt; <code>const char *sys_errlist[];</code>"}, {"owner": {"reputation": 865, "user_id": 4326405, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/da507f4ae52697e2d23d7d6ba9f5b458?s=128&d=identicon&r=PG&f=1", "display_name": "nick shmick", "link": "https://stackoverflow.com/users/4326405/nick-shmick"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1436951107, "post_id": 31425855, "comment_id": 50823236, "body": "didnt really understand..? I need to explain those declaration as they are in the C file system... @MohitJain"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 3, "creation_date": 1436951128, "post_id": 31425855, "comment_id": 50823244, "body": "It may vary from system to system, so if you want specifics there&#39;s little point is us telling you what our system does.  You can simply create a file - say <code>x.cc</code> that includes the relevant headers, then run only your preprocessing stage - e.g. <code>g++ -E x.cc</code> or <code>cl &#47;E x.cc</code>: you&#39;ll be able to see the declarations for those symbols and the exact header declaring it.  Alternatively, try e.g. <code>grep</code> on a recursive glob, or <code>find &#47;usr&#47;include -exec grep stderr {} \\;</code> etc..  Sadly, that may not work if they&#39;re macros, but your compiler may have an option to leave macro definitions in."}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1436956049, "post_id": 31425855, "comment_id": 50826371, "body": "DECLARATION or DEFINITION? declaration: header-files; definition: machine-dependant implemenation-source-file."}], "answers": [{"tags": [], "owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "is_accepted": false, "score": 0, "last_activity_date": 1436956222, "creation_date": 1436956222, "answer_id": 31427930, "question_id": 31425855, "link": "https://stackoverflow.com/questions/31425855/how-can-i-find-the-c-definitions-for-some-variables-in-the-system-headers/31427930#31427930", "title": "How can I find the C definitions for some variables in the system headers?", "body": "<p>there is a difference between \"declaration\" and \"definition\". </p>\n\n<p>in short: \"declaration\" is for the compiler, while \"definition\" is for the runtime.</p>\n\n<p>normally you find a \"third-party\"-declaration in the header files and more better in the man-pages.</p>\n\n<p>the definition is abstracted away, because it may be depending on the machine-specific constraints.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 0, "last_activity_date": 1436958072, "last_edit_date": 1436958072, "creation_date": 1436956544, "answer_id": 31428047, "question_id": 31425855, "link": "https://stackoverflow.com/questions/31425855/how-can-i-find-the-c-definitions-for-some-variables-in-the-system-headers/31428047#31428047", "title": "How can I find the C definitions for some variables in the system headers?", "body": "<p>Stricto sensu, you cannot find the definition of <code>errno</code> or <code>stdout</code> <em>variables</em>. Some implementations of <code>&lt;stdio.h&gt;</code> had <code>stdout</code> defined by some macro. So it might not be a C variable, just a <em>name</em> ...! You just can be sure that it is, after an <code>#include &lt;stdio.h&gt;</code>, some \"predefined\" expression of type <code>FILE*</code> (actually an <a href=\"https://en.wikipedia.org/wiki/Value_%28computer_science%29\" rel=\"nofollow\">l-value</a>, since you can take its address).</p>\n\n<p>In particular, <code>errno</code> is generally <em>not</em> a variable (because each thread has its own), at least not on most Linux systems. See <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow\">errno(3)</a>. On my Linux/x86-64 system the <em>internal</em> <code>/usr/include/bits/errno.h</code> header (which should only be <em>indirectly</em> included via <code>#include &lt;errno.h&gt;</code>) contains:</p>\n\n<pre><code>extern int *__errno_location (void) __THROW __attribute__ ((__const__));\n/* When using threads, errno is a per-thread value.  */\n#   define errno (*__errno_location ())\n</code></pre>\n\n<p>A lot of standards related to C programming define names which are permitted to be macros or some compiler magic or <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow\">builtins</a> (e.g. <code>va_args</code> from <a href=\"http://man7.org/linux/man-pages/man3/stdarg.3.html\" rel=\"nofollow\"><code>&lt;stdarg.h&gt;</code></a>....). And nothing <em>requires</em> <code>&lt;stdio.h&gt;</code> to be a file; a standard conforming compiler could process <code>#include &lt;stdio.h&gt;</code> by some special code (which either sets up magically some names, or fetch some compiler state from outside, e.g. a database but not a file).</p>\n"}], "owner": {"reputation": 865, "user_id": 4326405, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/da507f4ae52697e2d23d7d6ba9f5b458?s=128&d=identicon&r=PG&f=1", "display_name": "nick shmick", "link": "https://stackoverflow.com/users/4326405/nick-shmick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 2, "accepted_answer_id": 31428047, "answer_count": 2, "score": 1, "last_activity_date": 1436958072, "creation_date": 1436950738, "last_edit_date": 1436951231, "question_id": 31425855, "link": "https://stackoverflow.com/questions/31425855/how-can-i-find-the-c-definitions-for-some-variables-in-the-system-headers", "title": "How can I find the C definitions for some variables in the system headers?", "body": "<p>I'm looking for the C declarations in the system files for:</p>\n\n<pre><code>errno\nstdin\nstdout\nstderr\nsys_errlist\n</code></pre>\n\n<p>How can I find the definitions for each of these?</p>\n"}, {"tags": ["c", "arrays", "ini", "strtok"], "comments": [{"owner": {"reputation": 6986, "user_id": 2968959, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/34c70f9a66b79ca49e2b14e3c075fe3d?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Meshram", "link": "https://stackoverflow.com/users/2968959/saurabh-meshram"}, "edited": false, "score": 0, "creation_date": 1436951719, "post_id": 31425663, "comment_id": 50823631, "body": "What does <code>returnValue2</code> contain ?, Is this code complete ?"}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "edited": false, "score": 0, "creation_date": 1436951731, "post_id": 31425663, "comment_id": 50823642, "body": "you can use a pointer array to hold all the strings returned by <code>strtok</code>"}, {"owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "reply_to_user": {"reputation": 6986, "user_id": 2968959, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/34c70f9a66b79ca49e2b14e3c075fe3d?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Meshram", "link": "https://stackoverflow.com/users/2968959/saurabh-meshram"}, "edited": false, "score": 0, "creation_date": 1436951818, "post_id": 31425663, "comment_id": 50823700, "body": "@SaurabhMeshram:Sorry for the confusion. I eited my code"}], "answers": [{"tags": [], "owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1436952313, "last_edit_date": 1436952313, "creation_date": 1436951888, "answer_id": 31426301, "question_id": 31425663, "link": "https://stackoverflow.com/questions/31425663/how-to-create-an-array-consisting-of-the-tokens-created-using-the-strtok-functio/31426301#31426301", "title": "How to create an array consisting of the tokens created using the strtok function?", "body": "<p>This question is quite similar to others regarding getting external information and storing it in an array.</p>\n\n<p><strong>The problem</strong> here is the amount of elements in your array to store.</p>\n\n<p>You could use Link-lists, but for this example, I would scan the file, getting the total amount of items needed for the array - and then parse the file data again - storing the items in the array.</p>\n\n<p>The first loop, goes through and counts the items to be store, as per your example posted. I will do the second loop just as an example - please note in my example you would of created nTotalItems and have counted the amount of items, storing that in nTotalItems ... I am assuming you want to store a string, not just a char...</p>\n\n<p>Also please note this a draft example, done at work - only to show a method of storing the tokens into an array, therefore there is no error checking ec </p>\n\n<pre><code> // nTotalItems has already been calculated via the first loop...\n char** strArray = malloc( nTotalItems * sizeof( char* ));\n int    nIndex  = 0;\n\n // re-setup buffer\n buffer = strtok(var, \", \");\n do {\n\n     // allocate the buffer for string and copy...    \n     strArray[ nIndex ] = malloc( strlen( buffer ) + 1 );\n     strcpy( strArray[ nIndex ], buffer );\n\n     printf( \"Array %d = '%s'\\n\", nIndex, strArray[ nIndex ] );\n\n     nIndex++;\n\n } while ((buffer=strtok(NULL, \", \"))!= NULL);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 717, "user_id": 2732907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f284db247e90e436c2be717294e0e5d?s=128&d=identicon&r=PG&f=1", "display_name": "madmurphy", "link": "https://stackoverflow.com/users/2732907/madmurphy"}, "is_accepted": false, "score": 0, "last_activity_date": 1527730973, "creation_date": 1527730973, "answer_id": 50615490, "question_id": 31425663, "link": "https://stackoverflow.com/questions/31425663/how-to-create-an-array-consisting-of-the-tokens-created-using-the-strtok-functio/50615490#50615490", "title": "How to create an array consisting of the tokens created using the strtok function?", "body": "<p>Just use <a href=\"https://github.com/madmurphy/libconfini\" rel=\"nofollow noreferrer\">an INI parser that supports arrays</a>.</p>\n\n<p>INI file:</p>\n\n<pre><code>[my_section]\ntitle = A,H,D\n</code></pre>\n\n<p>C program:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;confini.h&gt;\n\n#define MY_ARRAY_DELIMITER ','\n\nstruct configuration {\n    char ** title;\n    size_t title_length;\n};\n\nstatic char ** make_strarray (size_t * arrlen, const char * src, const size_t buffsize, IniFormat ini_format) {\n\n    *arrlen = ini_array_get_length(src, MY_ARRAY_DELIMITER, ini_format);\n    char ** const dest = *arrlen ? (char **) malloc(*arrlen * sizeof(char *) + buffsize) : NULL;\n    if (!dest) { return NULL; }\n    memcpy(dest + *arrlen, src, buffsize);\n    char * iter = (char *) (dest + *arrlen);\n    for (size_t idx = 0; idx &lt; *arrlen; idx++) {\n        dest[idx] = ini_array_release(&amp;iter, MY_ARRAY_DELIMITER, ini_format);\n        ini_string_parse(dest[idx], ini_format);\n    }\n\n    return dest;\n\n}\n\nstatic int ini_handler (IniDispatch * this, void * v_conf) {\n\n    struct configuration * conf = (struct configuration *) v_conf;\n\n    if (this-&gt;type == INI_KEY &amp;&amp; ini_string_match_si(\"my_section\", this-&gt;append_to, this-&gt;format)) {\n\n        if (ini_string_match_si(\"title\", this-&gt;data, this-&gt;format)) {\n\n            /*  Save memory (not strictly needed)  */\n            this-&gt;v_len = ini_array_collapse(this-&gt;value, MY_ARRAY_DELIMITER, this-&gt;format);\n\n            /*  Allocate a new array of strings  */\n            if (conf-&gt;title) { free(conf-&gt;title); }\n            conf-&gt;title = make_strarray(&amp;conf-&gt;title_length, this-&gt;value, this-&gt;v_len + 1, this-&gt;format);\n            if (!conf-&gt;title) { return 1; }\n\n        }\n\n    }\n\n    return 0;\n\n}\n\nstatic int conf_init (IniStatistics * statistics, void * v_conf) {\n\n    *((struct configuration *) v_conf) = (struct configuration) { NULL, 0 };\n    return 0;\n\n}\n\nint main () {\n\n    struct configuration my_conf;\n\n    /*  Parse the INI file  */\n    if (load_ini_path(\"C:\\\\conf.ini\", INI_DEFAULT_FORMAT, conf_init, ini_handler, &amp;my_conf)) {\n\n        fprintf(stderr, \"Sorry, something went wrong :-(\\n\");\n        return 1;\n\n    }\n\n    /*  Print the parsed data  */\n    for (size_t idx = 0; idx &lt; my_conf.title_length; idx++) {\n\n        printf(\"my_conf.title[%d] = %s\\n\", idx, my_conf.title[idx]);\n\n    }\n\n    /*  Free the parsed data  */\n    if (my_conf.title_length) {\n\n        free(my_conf.title);\n\n    }\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>my_conf.title[0] = A\nmy_conf.title[1] = H\nmy_conf.title[2] = D\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 1, "accepted_answer_id": 31426301, "answer_count": 2, "score": 2, "last_activity_date": 1527730973, "creation_date": 1436950133, "last_edit_date": 1436951790, "question_id": 31425663, "link": "https://stackoverflow.com/questions/31425663/how-to-create-an-array-consisting-of-the-tokens-created-using-the-strtok-functio", "title": "How to create an array consisting of the tokens created using the strtok function?", "body": "<p>I am new with .ini files and thus this qn(which might seem silly) .I have created a .ini file and access it via my C program. The ini file looks like this:</p>\n\n<pre><code> [key]\n title = A,H,D\n</code></pre>\n\n<p>The C program accesses it using:</p>\n\n<pre><code> LPCSTR ini =\"C:\\\\conf.ini;\n char var[100];\n GetPrivateProfileString(\"key\", \"title\", 0, var, 100, ini);\n\n printf(\"%s\", var);\n char* buffer = strtok(var, \", \");\ndo{\n    printf(\"%s\", buffer);\n\n    if (strcmp(buffer, \"A\")==0)\n        printf(\"Hello\");\n\n    puts(\"\");\n}while ((buffer=strtok(NULL, \", \"))!= NULL);\n</code></pre>\n\n<p>output looks as :</p>\n\n<pre><code>  A H D F G IAHello\n  H\n  D\n  F\n  G\n</code></pre>\n\n<p>Now what I need to do is use these individual tokens again to form an array with indices within my C program. For example: </p>\n\n<pre><code>  char x[A, H, D, F, G]\n</code></pre>\n\n<p>so that when I refer to the index 2, x[2] should give me 'D'. Could somebody suggest a way to do this. I have never used strtok before and thus very confused. Thank you in advance.</p>\n"}, {"tags": ["c", "random", "numbers", "generator"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1436950124, "post_id": 31425558, "comment_id": 50822607, "body": "Initialize <code>sum</code> to <code>0</code> and change <code>sum = roll+roll</code> to <code>sum = sum+roll;</code>."}, {"owner": {"reputation": 25, "user_id": 5117497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aed224902f559285b865202e82783ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Muffik9", "link": "https://stackoverflow.com/users/5117497/muffik9"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1436950337, "post_id": 31425558, "comment_id": 50822751, "body": "Damn, I didn&#39;t expect anyone to answer that quick. It works perfectly now, thank you very very much. Could you explain the logic behind this to me, please ?"}, {"owner": {"reputation": 251, "user_id": 1967642, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/2ZriU.png?s=128&g=1", "display_name": "Hullu2000", "link": "https://stackoverflow.com/users/1967642/hullu2000"}, "edited": false, "score": 0, "creation_date": 1436950479, "post_id": 31425558, "comment_id": 50822835, "body": "<code>sum += roll;</code> is shorter."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1436950613, "post_id": 31425558, "comment_id": 50822921, "body": "@Muffik9 You are adding <code>roll</code> twice and printing it. That means, it&#39;ll only print the very last input multiplied by 2 (i.e. <code>roll+roll</code>). Doing <code>sum = sum + roll</code> adds all the input numbers into <code>sum</code> and initializing it to <code>0</code> was necessary since automatic variables are not 0 initialized in C."}, {"owner": {"reputation": 25, "user_id": 5117497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aed224902f559285b865202e82783ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Muffik9", "link": "https://stackoverflow.com/users/5117497/muffik9"}, "edited": false, "score": 0, "creation_date": 1436951054, "post_id": 31425558, "comment_id": 50823204, "body": "I&#39;m pretty sure I understand your explanation. Hopefully I will not make the same mistake again. Thank you very much :)"}], "answers": [{"tags": [], "owner": {"reputation": 2991, "user_id": 4394382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec6051aa680b77974eee192444340495?s=128&d=identicon&r=PG&f=1", "display_name": "wallek876", "link": "https://stackoverflow.com/users/4394382/wallek876"}, "is_accepted": true, "score": 0, "last_activity_date": 1436950286, "creation_date": 1436950286, "answer_id": 31425703, "question_id": 31425558, "link": "https://stackoverflow.com/questions/31425558/adding-numbers-generated-by-random-number-generator-in-c/31425703#31425703", "title": "Adding Numbers Generated By Random Number Generator in C", "body": "<p>Yo need to initialize sum first also you are not adding properly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\nint input;\nscanf(\"%d\", &amp;input);\nint i;\nint roll;\ntime_t t;\nint sum = 0;\n\nsrand((unsigned) time(&amp;t));                                 // the seed for    the random number generator based on the current time\n\n\nfor( i = 0; i &lt; input; i++)\n{\nroll = (rand() % 6 + 1);                                    // random number generator \n  sum += roll;                                              // only dubbling the last roll for some reason = /\nprintf(\"You Rolled : %d\\n\", roll);\n}\n\n    printf(\"The Total Turn Score is : %d\", sum);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1436950299, "creation_date": 1436950299, "answer_id": 31425709, "question_id": 31425558, "link": "https://stackoverflow.com/questions/31425558/adding-numbers-generated-by-random-number-generator-in-c/31425709#31425709", "title": "Adding Numbers Generated By Random Number Generator in C", "body": "<p>Use</p>\n\n<pre><code>srand( ( unsigned int )time( NULL ) ); \n</code></pre>\n\n<p>and initialize variable <code>sum</code>. For example</p>\n\n<pre><code>long long int sum = 0;\n\n//...\nsum += roll;\n//...      \nprintf( \"The Total Turn Score is : %lld\", sum );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5117497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aed224902f559285b865202e82783ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Muffik9", "link": "https://stackoverflow.com/users/5117497/muffik9"}, "edited": false, "score": 0, "creation_date": 1436950763, "post_id": 31425725, "comment_id": 50823018, "body": "Thanks for help and detailed explanation. I really appreciate that : )"}], "tags": [], "owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "is_accepted": false, "score": 0, "last_activity_date": 1436950758, "last_edit_date": 1436950758, "creation_date": 1436950343, "answer_id": 31425725, "question_id": 31425558, "link": "https://stackoverflow.com/questions/31425558/adding-numbers-generated-by-random-number-generator-in-c/31425725#31425725", "title": "Adding Numbers Generated By Random Number Generator in C", "body": "<p>Your program is doubling the number that was generated because that's what you tell it to do in this line:</p>\n\n<pre><code>sum = roll+roll;\n</code></pre>\n\n<p>Instead, you need to add the current <code>roll</code> to the current value of <code>sum</code>:</p>\n\n<pre><code>sum = sum + roll;\n</code></pre>\n\n<p>And you need to initialize <code>sum</code> to 0 so that you start by adding just the first roll.</p>\n\n<p>Think about it like rolling a dice multiple times and writing down what it was each time. You roll it once and get a 3, so you write down 3. You roll it again and get a 6, so you add 6 to the previous roll to get 9. You roll again and get 2, so you add 2 to 9 and get 11, and so on. The variable <code>sum</code> is where you write down the new number after every roll, but you're adding to what you wrote down before.</p>\n\n<p>The way you had it before, you were completely disregarding the previous rolls. <code>rolls</code> in the loop only refers to the latest roll that you performed, and since the loop ends at some point, <code>sum</code> will be left as the sum of the last value of <code>roll</code>. This is why you were getting double the last number.</p>\n"}, {"tags": [], "owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436951812, "creation_date": 1436951812, "answer_id": 31426260, "question_id": 31425558, "link": "https://stackoverflow.com/questions/31425558/adding-numbers-generated-by-random-number-generator-in-c/31426260#31426260", "title": "Adding Numbers Generated By Random Number Generator in C", "body": "<p>replace</p>\n\n<pre><code>sum = roll+roll\n</code></pre>\n\n<p>with</p>\n\n<pre><code>sum = roll+sum;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5117497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aed224902f559285b865202e82783ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Muffik9", "link": "https://stackoverflow.com/users/5117497/muffik9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4851, "favorite_count": 0, "accepted_answer_id": 31425703, "answer_count": 4, "score": 1, "last_activity_date": 1436951812, "creation_date": 1436949841, "last_edit_date": 1436950201, "question_id": 31425558, "link": "https://stackoverflow.com/questions/31425558/adding-numbers-generated-by-random-number-generator-in-c", "title": "Adding Numbers Generated By Random Number Generator in C", "body": "<p>before I ask my question I would like to point out that I did look for the answers already, and I didn't find what I was looking for.\nPlease bear in mind that I am a beginner in terms of programming, so please don't assume that I know everything there is to know.\nRight, to the question.\nMy question is : How do I add together numbers that are created by random number generator ? The difficulty that I have is the fact that the number of randomly generated numbers could be different every time the program is ran. To make it clearer, the amount of randomly generated numbers is dependent on the input from user, eg if the input is 9, the program will generate 9 random numbers. This makes it difficult for me to come up with the idea of how to add the random numbers together and display them.\nHere is the source code from my program. I think it is important to mention that the random numbers change every time I run the program, which is how I want them to be ( I used srand() with time, and rand() ). Also, the problem that I have currently is that the program doubles the last randomly generated number instead of adding them all together.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\n    int input;\n    scanf(\"%d\", &amp;input);\n    int i;\n    int roll;\n    int turn_total;\n    time_t t;\n    int sum;\n\n    srand((unsigned) time(&amp;t));             // the seed for the random number generator based on the current time\n\n    for( i = 0; i &lt; input; i++)\n    {\n        roll = (rand() % 6 + 1);            // random number generator \n        sum = roll+roll;                    // only dubbling the last roll for some reason = /\n        printf(\"You Rolled : %d\\n\", roll);\n    }\n\n    printf(\"The Total Turn Score is : %d\", sum);\n}\n</code></pre>\n\n<p>Any help, ideas or clues would be greatly appreciated.</p>\n"}, {"tags": ["c", "header-files", "atmelstudio"], "comments": [{"owner": {"reputation": 359, "user_id": 1507810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6943d9549e1b9bd6bffacd2a5e7623e?s=128&d=identicon&r=PG", "display_name": "Charlie Scott-Skinner", "link": "https://stackoverflow.com/users/1507810/charlie-scott-skinner"}, "edited": false, "score": 0, "creation_date": 1436949449, "post_id": 31425371, "comment_id": 50822172, "body": "Case sensitivity issue?"}, {"owner": {"reputation": 1984, "user_id": 953279, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/htDmh.jpg?s=128&g=1", "display_name": "Makan Tayebi", "link": "https://stackoverflow.com/users/953279/makan-tayebi"}, "reply_to_user": {"reputation": 359, "user_id": 1507810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6943d9549e1b9bd6bffacd2a5e7623e?s=128&d=identicon&r=PG", "display_name": "Charlie Scott-Skinner", "link": "https://stackoverflow.com/users/1507810/charlie-scott-skinner"}, "edited": false, "score": 0, "creation_date": 1436949700, "post_id": 31425371, "comment_id": 50822322, "body": "I don&#39;t believe so. as I said, IDE is automatically coming up with the same path, and I just triple checked paths."}, {"owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "edited": false, "score": 0, "creation_date": 1436957720, "post_id": 31425371, "comment_id": 50827372, "body": "Try to use <code>#include &quot;.\\libs\\Message.h&quot;</code>"}, {"owner": {"reputation": 1984, "user_id": 953279, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/htDmh.jpg?s=128&g=1", "display_name": "Makan Tayebi", "link": "https://stackoverflow.com/users/953279/makan-tayebi"}, "edited": false, "score": 0, "creation_date": 1436958305, "post_id": 31425371, "comment_id": 50827759, "body": "I have tried that. does not work. but this gives me an Idea. how can I tell Atmel Studio, to change its current working directory? Maybe the working directory is not set as it should."}, {"owner": {"reputation": 1482, "user_id": 297216, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1d89c8b79c5991c01b0f81c731970f5?s=128&d=identicon&r=PG", "display_name": "Cobusve", "link": "https://stackoverflow.com/users/297216/cobusve"}, "edited": false, "score": 0, "creation_date": 1437037719, "post_id": 31425371, "comment_id": 50867624, "body": "Includes should not be relative to current working directory, they should be relative to the location of the C file they are located in.  My guess is that you moved both the C and H files ?"}, {"owner": {"reputation": 1984, "user_id": 953279, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/htDmh.jpg?s=128&g=1", "display_name": "Makan Tayebi", "link": "https://stackoverflow.com/users/953279/makan-tayebi"}, "edited": false, "score": 0, "creation_date": 1437084291, "post_id": 31425371, "comment_id": 50896938, "body": "the current working directory of the project and the C file that the execution starts with, are the same place."}], "owner": {"reputation": 1984, "user_id": 953279, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/htDmh.jpg?s=128&g=1", "display_name": "Makan Tayebi", "link": "https://stackoverflow.com/users/953279/makan-tayebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 513, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436954341, "creation_date": 1436949350, "last_edit_date": 1436954341, "question_id": 31425371, "link": "https://stackoverflow.com/questions/31425371/fatal-error-libs-message-h-no-such-file-or-directory", "title": "fatal error: libs\\Message.h: No such file or directory", "body": "<p>I am trying to compile an Arduino project using Atmel Studio. When I put my header files in the same directory as the project file, and try to include them, it works fine.</p>\n\n<pre><code>#include \"Message.h\"\n</code></pre>\n\n<p>edit: including the absolute path also works.</p>\n\n<pre><code>#include \"C:\\...\\libs\\Message.h\"\n</code></pre>\n\n<p>but this is not a good practice and I want to include my files in a relative manner in the 'libs' folder. but moving the same file in that folder and addressing it brings up the \"no such file or directory\" error. </p>\n\n<pre><code>#include \"libs\\Message.h\"\n</code></pre>\n\n<p>or </p>\n\n<pre><code>#include \"libs/Message.h\"\n</code></pre>\n\n<p>further explanations:\nIDE is running on windows.\nI am sure this is not a misspell, because even the IDE comes up with the same suggestion.\nI tried running IDE as Admin, so that permissions somehow don't interfere.\nI am out of ideas to resolve this. what could be the reason?</p>\n"}, {"tags": ["c", "unzip", "winzip"], "comments": [{"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1436949466, "post_id": 31425341, "comment_id": 50822182, "body": "Try running <code>wzunzip</code> on your commandline, you should get the same error."}, {"owner": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "reply_to_user": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1436949774, "post_id": 31425341, "comment_id": 50822367, "body": "Ya I am getting same error"}, {"owner": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "reply_to_user": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1436950180, "post_id": 31425341, "comment_id": 50822645, "body": "@moffeltje i am getting same error in command prompt also even though i have installed winzip in my system"}, {"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1436951167, "post_id": 31425341, "comment_id": 50823279, "body": "Well, that&#39;s the problem. Restart computer or find executable or install again"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1436954490, "post_id": 31425341, "comment_id": 50825420, "body": "Did you try to pass the full path for the program <code>wzunzip</code> (<code>char unzip[512]=&quot;&#47;full&#47;path&#47;to&#47;wzunzip&quot;;</code>) ?"}, {"owner": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1436955494, "post_id": 31425341, "comment_id": 50826062, "body": "@SergeBallesta <b>C:\\Program Files\\WinZip\\WZUNZIP.EXE</b> this is the path for <b>wzunzip</b> command how to include in the program.can you help"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3235832"}, "edited": false, "score": 0, "creation_date": 1436957355, "post_id": 31425341, "comment_id": 50827132, "body": "remember to put double quotes around the path, <code>\\&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "edited": false, "score": 0, "creation_date": 1436956389, "post_id": 31427788, "comment_id": 50826563, "body": "or do i need to change path variable as given in the site <a href=\"http://kb.winzip.com/kb/entry/288/\" rel=\"nofollow noreferrer\">kb.winzip.com/kb/entry/288</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3235832"}, "edited": false, "score": 0, "creation_date": 1436957313, "post_id": 31427788, "comment_id": 50827107, "body": "put double quotes around the path, <code>\\&quot;</code> - because &quot;Program Files&quot; has a space inside and that means the shell will look for &quot;C:\\\\Program&quot;"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1436959184, "post_id": 31427788, "comment_id": 50828278, "body": "@willywonka_dailyblah : thanks for noticing - post edited"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1436959196, "last_edit_date": 1436959196, "creation_date": 1436955874, "answer_id": 31427788, "question_id": 31425341, "link": "https://stackoverflow.com/questions/31425341/winzip-command-line-in-c-programming/31427788#31427788", "title": "Winzip command line in c programming", "body": "<p>Especially in a Windows system where new programs are not automatically members of the system path, you should use the full path of the command.</p>\n\n<p>In your example, you should write :</p>\n\n<pre><code>char unzip[512]=\"\\\"C:\\\\Program Files\\\\WinZip\\\\WZUNZIP.EXE\\\"\";\n</code></pre>\n\n<p>note the <code>\\\\</code> to include a true <code>\\</code> in a C string, and the initial and ending <code>\"</code> to force the <code>system</code> call to see the path as a single word - thanks to @willywonka_dailyblah  for noticing it</p>\n"}], "owner": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436959196, "creation_date": 1436949258, "question_id": 31425341, "link": "https://stackoverflow.com/questions/31425341/winzip-command-line-in-c-programming", "title": "Winzip command line in c programming", "body": "<p>I wanted to unzip the file using winzip command line using c programming and i have written the following code but after executing it is showing that the <strong>system</strong> command couldn't identify internal or external command</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  #include &lt;stdlib.h&gt;\n  #include&lt;conio.h&gt;\n  #include &lt;string.h&gt;\n\n void fmuUnzip() {\nchar fmuFileName[100], path[100],strFinal[100];\nchar unzip[512]=\"wzunzip\";\nprintf(\"Enter fmuFileName\\n\");\ngets(fmuFileName);\n\nprintf(\"Enter path of the fmuFileName\\n\");\ngets(path);\nstrcat(unzip,\" \");\nstrcat(unzip,fmuFileName);\nstrcat(unzip,\" \");\nstrcat(unzip,path);\n//printf(\"The string is : %s\",unzip);\nsystem(unzip);\n //getch();\n }\n\n void fmuLoad() {\n fmuUnzip();\n}\n\nint main(int argc,char* argv[]) {\n fmuLoad();\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1436948825, "post_id": 31425188, "comment_id": 50821794, "body": "<code>strstr()</code>? or<code>strcpy()</code>?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1436948839, "post_id": 31425188, "comment_id": 50821807, "body": "Read about undefined  behavior. Stricto sensu, the answer is implementation specific. You might have a standard conforming C implementation which never aborts, but instead explode your computer, or terminate the universe."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436948870, "post_id": 31425188, "comment_id": 50821826, "body": "<code>How can I make my program abort</code>... if you&#39;re in luck, UB will do it for you. :-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1436948913, "post_id": 31425188, "comment_id": 50821860, "body": "IMHO, you can <i>prevent</i> UB, but cannot <i>handle</i> UB, if I understood your question correctly."}, {"owner": {"reputation": 6800, "user_id": 264250, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f016489b5d6332031aa8e1c3bf6daec1?s=128&d=identicon&r=PG", "display_name": "zr.", "link": "https://stackoverflow.com/users/264250/zr"}, "edited": false, "score": 0, "creation_date": 1436949087, "post_id": 31425188, "comment_id": 50821966, "body": "BTW, your code won&#39;t work if dest and src overlap."}, {"owner": {"reputation": 2991, "user_id": 4394382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec6051aa680b77974eee192444340495?s=128&d=identicon&r=PG&f=1", "display_name": "wallek876", "link": "https://stackoverflow.com/users/4394382/wallek876"}, "edited": false, "score": 0, "creation_date": 1436949418, "post_id": 31425188, "comment_id": 50822155, "body": "I don&#39;t think you can do that, a don&#39;t think the original <code>strcpy()</code> does it either."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1436949427, "post_id": 31425188, "comment_id": 50822161, "body": "Not related to the question, but it&#39;s good practice to use <code>const</code> for stuff that the function won&#39;t change, as a way of documenting your code; in this case <code>src</code>: <code>char *ft_strcpy(char *dest, const char *src)</code>."}, {"owner": {"reputation": 1732, "user_id": 3543182, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f84c6d267c754e4fd440e595afc32673?s=128&d=identicon&r=PG&f=1", "display_name": "M. Shaw", "link": "https://stackoverflow.com/users/3543182/m-shaw"}, "edited": false, "score": 0, "creation_date": 1436950954, "post_id": 31425188, "comment_id": 50823132, "body": "Use <code>strncpy</code>? Pretty sure <code>strcpy</code> is deprecated."}, {"owner": {"reputation": 2199, "user_id": 1762556, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/10LnU.jpg?s=128&g=1", "display_name": "Ki J&#233;y", "link": "https://stackoverflow.com/users/1762556/ki-j%c3%a9y"}, "edited": false, "score": 0, "creation_date": 1436951457, "post_id": 31425188, "comment_id": 50823473, "body": "Actually this is a special school, I&#39;m just doing my entry exam and we have to code our own library functions, today&#39;s exercices set are about string manipulation, we have to copy strcpy, strncpy, strstr, strcmp, strncmp, strupcase, strlowcase, strcapitalize, str_is_alpha, str_is_numeric, str_is_lowercase, str_is_uppercase, str_is_printable, strcat, strncat, strlcat, strlcpy, putnbr_base, atoi_base, putstr_non_printable, print_memory. We can&#39;t use any lib, only write() from &lt;unistd&gt;. This is my 5th day of C, sorry if I seem irrelevant."}, {"owner": {"reputation": 2199, "user_id": 1762556, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/10LnU.jpg?s=128&g=1", "display_name": "Ki J&#233;y", "link": "https://stackoverflow.com/users/1762556/ki-j%c3%a9y"}, "reply_to_user": {"reputation": 2991, "user_id": 4394382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec6051aa680b77974eee192444340495?s=128&d=identicon&r=PG&f=1", "display_name": "wallek876", "link": "https://stackoverflow.com/users/4394382/wallek876"}, "edited": false, "score": 0, "creation_date": 1436983508, "post_id": 31425188, "comment_id": 50845348, "body": "@wallek876 it does when I try to putstr() the result. maybe with printf it wouldn&#39;t..."}], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 5115030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Bi5U.jpg?s=128&g=1", "display_name": "nekflamm", "link": "https://stackoverflow.com/users/5115030/nekflamm"}, "is_accepted": false, "score": 0, "last_activity_date": 1436949551, "creation_date": 1436949551, "answer_id": 31425439, "question_id": 31425188, "link": "https://stackoverflow.com/questions/31425188/how-do-i-make-my-program-abort-without-any-lib/31425439#31425439", "title": "How do I make my program abort (without any lib)", "body": "<p>You must check your string.\nMay be one of them is NULL.</p>\n\n<p>When you do : <code>While (str[i] ..)</code></p>\n\n<p>You don't know if (str) is NULL or not.</p>\n\n<p>Do : \n<code>While (str &amp;&amp; str[i] != '\\0')</code></p>\n\n<p>It's better.</p>\n\n<p>You can also check if dest is malloc fine because if you don't have any memory for your string dest you can't assign value.</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436950751, "creation_date": 1436950751, "answer_id": 31425864, "question_id": 31425188, "link": "https://stackoverflow.com/questions/31425188/how-do-i-make-my-program-abort-without-any-lib/31425864#31425864", "title": "How do I make my program abort (without any lib)", "body": "<p>I would suggest a compact implementation</p>\n\n<pre><code>char * ft_strcpy(char * dest, const char * src) {\n    if (strlen(dest) &lt; strlen(src)) { /* abort(); or exit(1); */ }\n    char * s = dest;\n    while (*dest++ = *src++);\n    return s;\n}\n</code></pre>\n\n<p>The actual bounds checking is implemented in the safer version of <code>strcpy</code>, i.e. <code>strcpy_s</code>. You can find an implementation in <a href=\"http://sourceforge.net/p/safeclib/code/ci/master/tree/src/safeclib/strcpy_s.c\" rel=\"nofollow\">Safe C Library</a>.</p>\n"}], "owner": {"reputation": 2199, "user_id": 1762556, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/10LnU.jpg?s=128&g=1", "display_name": "Ki J&#233;y", "link": "https://stackoverflow.com/users/1762556/ki-j%c3%a9y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1436950751, "creation_date": 1436948727, "last_edit_date": 1436950479, "question_id": 31425188, "link": "https://stackoverflow.com/questions/31425188/how-do-i-make-my-program-abort-without-any-lib", "title": "How do I make my program abort (without any lib)", "body": "<p>I have an exercise in class where I have to copy the <code>strstr()</code> function in C (from <code>&lt;string.h&gt;</code> library). Here is my code</p>\n\n<pre><code>char *ft_strcpy(char *dest, char *src)\n{\n    int i;\n\n    i = 0;\n    while (src[i] != '\\0')\n    {\n        dest[i] = src[i];\n        i++;\n    }\n    dest[i] = '\\0';\n    return (dest);\n}\n</code></pre>\n\n<p>This code is fully functional but when I try with a <code>dest</code> string that is smaller than the <code>src</code> string, it shows an unpredictable result that ends up overwriting <code>src</code> too. The original <code>strstr()</code> function's answer to that is to abort program in that situation. How can I make my program abort given that I can't use the <code>abort()</code> function?</p>\n"}, {"tags": ["c", "sizeof", "undefined-behavior"], "comments": [{"owner": {"reputation": 1042, "user_id": 1314467, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2de3d42024063a4d7dcef45ed368dc0?s=128&d=identicon&r=PG&f=1", "display_name": "Ishmeet", "link": "https://stackoverflow.com/users/1314467/ishmeet"}, "edited": false, "score": 0, "creation_date": 1436947466, "post_id": 31424504, "comment_id": 50821041, "body": "output will be 1, because <code>foo</code> will be taken by <code>char foo</code> as it is local variable. Change the name of foo to have global variable scope. And, <code>int</code> is <code>typedef</code> to <code>foo</code>, so size of <code>foo</code> should be 4."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1436948014, "post_id": 31424504, "comment_id": 50821346, "body": "Why would an answer of this have anything to do with <code>sizeof</code>?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1436948131, "post_id": 31424504, "comment_id": 50821412, "body": "@JensGustedt: Pardon me? What are you talking about? It would have to do with <code>sizeof</code>, because I faced this scenario while using <code>sizeof</code>. Or what do you mean?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1436948177, "post_id": 31424504, "comment_id": 50821442, "body": "Note that the parenthesis in the expression <code>sizeof(foo)</code> apply to <code>foo</code>, not <code>sizeof</code> and, in this case, are redundant (just like in <code>return(42);</code>). The parenthesis are required when <code>foo</code> is a type as if you hadn&#39;t defined the object <code>char foo;</code>"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1436948414, "post_id": 31424504, "comment_id": 50821558, "body": "@pmg I used the parantheses because I was hoping it is using it as indicator for ti to be a type in this case. But thats jsut because, as I allready noted on Potatoswatter answer, that I didnt knew the scope is here crucial."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1436953747, "post_id": 31424504, "comment_id": 50824939, "body": "@Zaibis, sure you encountered this with <code>sizeof</code>. But your real question is: to which entity refers <code>foo</code> if there are two <code>foo</code>s declared like you have done. Your <code>sizeof</code> is just an artifact on how you came to the question, not relevant to the question itself. Your question heading would be of more use for others by removing the words &quot;sizeof on&quot;."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1436954323, "post_id": 31424504, "comment_id": 50825314, "body": "@JensGustedt: You&#39;r right, but when I posted the question it wasn&#39;t clear to me that there even strictly defined aspects where my example is jsut one of. And I can&#39;t ask a question while respecting knowledge that I just recieved from the answers I got on it. Also just editing the Question would give more Confusion what the answers regarding to then giving any benefit. At all: you are right, sizeof has nothing to do with it. But when I asked the question I wasn&#39;t aware of that and thats not a reason IMO to change the whole post.Also dont know how to rephrase the title so it still fits the post."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1436969526, "post_id": 31424504, "comment_id": 50836024, "body": "FWIW, the GCC warning for this is <code>-Wshadow</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1436947155, "post_id": 31424587, "comment_id": 50820857, "body": "Can you give me a refference that explains why it is hiding it? (orefered a standard C refference.)"}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1436947244, "post_id": 31424587, "comment_id": 50820912, "body": "@Zaibis This is a known behavior. You can reuse identifiers within new scopes, and the function opens a new scope."}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1436947257, "post_id": 31424587, "comment_id": 50820919, "body": "@Zaibis Do you really need that? This is how names work in the C family of languages, and most other programming languages. Local name declarations overlay the set of declarations visible from outer scopes."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1436947418, "post_id": 31424587, "comment_id": 50821024, "body": "@Potatoswatter: And I never heared of this. Thats why I really would like to have that, because it feels currently to me there is something important I never heared of and don&#39;t take it personal, but if something happens to me I like to obtain that knowledge about it from a primary source."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1436948026, "post_id": 31424587, "comment_id": 50821353, "body": "Note: It is not that I&#39;m not beliving you, it is just when I&#39;m facing something new I dont want to risk to missunderstand it."}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1436948123, "post_id": 31424587, "comment_id": 50821407, "body": "@Zaibis No worries, I&#39;m the same way."}], "tags": [], "owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "is_accepted": false, "score": 6, "last_activity_date": 1436947090, "last_edit_date": 1436947090, "creation_date": 1436946919, "answer_id": 31424587, "question_id": 31424504, "link": "https://stackoverflow.com/questions/31424504/is-using-sizeof-on-a-variable-where-a-type-of-the-same-name-exists-well-defined/31424587#31424587", "title": "Is using sizeof on a variable where a type of the same name exists well defined?", "body": "<p>The local <code>char foo</code> completely hides <code>typedef int foo</code> in its scope. You cannot observe the name <code>foo</code> once it is hidden. Try creating a second <code>typedef foo foo_t</code>, or renaming something to avoid the \"collision.\"</p>\n"}, {"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1436949509, "post_id": 31424804, "comment_id": 50822207, "body": "Your answer made it for me, but after Purag had such a awsome explanation and served a workaround, his answer is the one that has to be accepted."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1436953363, "post_id": 31424804, "comment_id": 50824677, "body": "@Zaibis Whatever you think is best, choose that one. I also agree the answer you&#39;re ticking is great. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 11, "last_activity_date": 1436968001, "last_edit_date": 1495539843, "creation_date": 1436947533, "answer_id": 31424804, "question_id": 31424504, "link": "https://stackoverflow.com/questions/31424504/is-using-sizeof-on-a-variable-where-a-type-of-the-same-name-exists-well-defined/31424804#31424804", "title": "Is using sizeof on a variable where a type of the same name exists well defined?", "body": "<blockquote>\n  <p><em>Is this well defined behaviour or is it undefined</em></p>\n</blockquote>\n\n<p>This is well defined behaviour.</p>\n\n<p>In your code</p>\n\n<pre><code>printf (\"%u\\r\\n\", sizeof(foo));\n</code></pre>\n\n<p><code>foo</code> is unambiguous. The <em>local</em> or <em>inner</em> <code>foo</code> \"shadows\" (or hides) the <em>outer</em> <code>foo</code>. So, it is essentially </p>\n\n<pre><code>printf (\"%u\\r\\n\", sizeof(char));\n</code></pre>\n\n<p>To quote <code>C11</code>, chapter \u00a76.2.1, \"Scopes of identifiers\", (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>If an identifier designates two different entities in the same name\n  space, the scopes might overlap. If so, the scope of one entity (the inner scope) will end strictly before the scope of the other entity (the outer scope). <strong>Within the inner scope, the identifier designates the entity declared in the inner scope; the entity declared in the outer scope is hidden (and not visible) within the inner scope.</strong></p>\n</blockquote>\n\n<p>Now, to answer the second part, </p>\n\n<blockquote>\n  <p><em>If it is well defined, is there a way I could obtain the size of the datatype <code>foo</code> without declaring a variable of that type to only use <code>sizeof</code> on it?</em></p>\n</blockquote>\n\n<p>Well, a scope of the <em>inner</em> <code>foo</code> identifier starts <em>after</em> it's definition (as a <code>char</code> type variable). So, if you use <code>foo</code> (the <code>typedef</code>ed type) <em>before</em> the definition of variable <code>foo</code>, you'll be actually <em>seeing</em> the global definition, as till that point , variable <code>foo</code> is not present to \"shadow out\" the global identifier <code>foo</code>.</p>\n\n<p>As mentioned in the <a href=\"https://stackoverflow.com/a/31425267/2173917\">other answer</a> by <a href=\"https://stackoverflow.com/users/814761/purag\">Mr. Purag</a>, you can surely do something like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef int foo;\n\nint main(void)\n{\n    printf (\"%zu\\n\", sizeof foo); /* will cosider the global */\n    char foo = 0;                 /* Global definition gets shadowed here*/\n    printf (\"%zu\\n\", sizeof foo); /* The local definition of 'foo' is only visible*/ \n                                  /* till the end of the block (function)*/\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>That said, as a note, the type of the result of <code>sizeof</code> operator is <code>size_t</code>. You should be using <code>%zu</code> format specifier to print the result.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1436947962, "creation_date": 1436947962, "answer_id": 31424948, "question_id": 31424504, "link": "https://stackoverflow.com/questions/31424504/is-using-sizeof-on-a-variable-where-a-type-of-the-same-name-exists-well-defined/31424948#31424948", "title": "Is using sizeof on a variable where a type of the same name exists well defined?", "body": "<p>First of all according to the C Standard (6.5.3.4 The sizeof and alignof operators)</p>\n\n<blockquote>\n  <p>2 The sizeof operator yields the size (in bytes) of its operand, which\n  may be an expression or the parenthesized name of a type. <strong>The size\n  is determined from the type of the operand.</strong> The result is an\n  integer. If the type of the operand is a variable length array type,\n  the operand is evaluated; otherwise, the operand is not evaluated and\n  the result is an integer constant.</p>\n</blockquote>\n\n<p>Thus it is the type of the operand of the sizeof operator that determinates the size of the operand. So you may use interchangeably either an expression or some type definition.</p>\n\n<p>Take into account that an expression used in the sizeof operator is not evaluated.</p>\n\n<p>For example you can write</p>\n\n<pre><code>int x = 10;\nprintf( \"%zu\\n\", sizeof( ++x ) );\n</code></pre>\n\n<p>and after the printf x will have the same value 10 as before the printf.</p>\n\n<p>As for your code snippet it seems that you made a mistake. I think you mean the following</p>\n\n<pre><code>typedef int foo;\n\nint main(int argc, char *argv[])\n{\n    foo exp;\n    printf (\"%zu\\r\\n\", sizeof( exp ));\n    return 0;\n}\n</code></pre>\n\n<p>Of course there is no need to create an object of type foo. You could write simply</p>\n\n<pre><code>    printf (\"%zu\\r\\n\", sizeof( foo ));\n</code></pre>\n\n<p>As for your original code</p>\n\n<pre><code>typedef int foo;\n\nint main(int argc, char *argv[])\n{\n    char foo;\n    printf (\"%u\\r\\n\", sizeof(foo));\n    return 0;\n}\n</code></pre>\n\n<p>then identifier name <code>foo</code> in the block scope of function main hides the type definition <code>foo</code> in the global scope and statement </p>\n\n<pre><code>    printf (\"%u\\r\\n\", sizeof(foo));\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>    printf (\"%u\\r\\n\", sizeof( char ));\n</code></pre>\n\n<p>In C you can't refer to the global definition of foo in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1436977652, "post_id": 31425267, "comment_id": 50841835, "body": "Your code wouldn&#39;t work, though, would it? I thought that in C, variable declarations had to be the first things in functions and other statements were required to come after. (So <code>char foo;</code> would have to be the first statement.)"}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1436978343, "post_id": 31425267, "comment_id": 50842238, "body": "@Jashaszun Actually, it would only fail in C89, but gcc on my machine compiled it fine in that mode. C99 and C11 will compile this without problems."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1437031455, "post_id": 31425267, "comment_id": 50863889, "body": "@Jashaszun: I would bet you are working under Windows in the Microsoft Visual Studio IDE. Hence compiling with their compiler your code as Visual C. So for your information. The compiler of MSVC is not conform to the ISO C nor to any other C standard. It is closely related to it but doesn&#39;t support all features and is behaving for some situations different to what the C standard is advising. And here you encountered one of this situations. While since c99 it is allowed to declare a variable not just at the beginning of a scope MSVC is still restricted to that rule."}], "tags": [], "owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "is_accepted": true, "score": 11, "last_activity_date": 1436981125, "last_edit_date": 1436981125, "creation_date": 1436949000, "answer_id": 31425267, "question_id": 31424504, "link": "https://stackoverflow.com/questions/31424504/is-using-sizeof-on-a-variable-where-a-type-of-the-same-name-exists-well-defined/31425267#31425267", "title": "Is using sizeof on a variable where a type of the same name exists well defined?", "body": "<p>C does not have explicit scope resolution, so identifiers (variable names, typedef names, struct names, etc etc) can be reused <strong>and overridden</strong> when a new scope is opened. When an identifier is reused, the previous context held by that identifier is no longer <em>visible</em>.</p>\n\n<p>In your particular code, the scope of the <code>typedef</code> is global, so the typedef is visible everywhere in your compile package. However, you open a new scope with the function declaration, and in that new scope you define a variable that uses the same identifier as the <code>typedef</code>. Now, that identifier refers to the variable instead of the type; meaning, until the scope of the variable ends (the end of the function), the <code>typedef</code> is completely hidden.</p>\n\n<p>Recall that C is compiled linearly, so you could do something like this as a way around the shielding that occurs:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ntypedef int foo;\n\nint main()\n{\n    printf (\"%zu\\n\", sizeof (foo)); /* #1 */\n\n    char foo;\n    printf (\"%zu\\n\", sizeof foo); /* #2 */\n\n    return 0;\n}\n</code></pre>\n\n<p>At point #1, note that the scope of the variable <code>char foo</code> has not yet opened since the compiler hasn't reached its declaration. (All the compiler will do is allocate the space on the stack for the variable).</p>\n\n<p>So the usage of <code>foo</code> at that point is still in reference to the globally defined <code>typedef</code>.</p>\n\n<p>By the time you hit #2, the variable is declared and the lifetime of the variable is formally started, meaning the identifier is now in use for a different entity. It shields the current block scope (started by the function declaration) from the global definition of <code>foo</code>.</p>\n\n<p>This is well-document behavior; there is a draft of the C standard up online, but the published standard has to be purchased. The draft says in section 6.2.1:</p>\n\n<blockquote>\n  <p>If an identifier designates two different entities in the same name\n  space, the scopes might overlap. If so, the scope of one entity (the\n  inner scope) will end strictly before the scope of the other entity\n  (the outer scope). Within the inner scope, the identifier designates\n  the entity declared in the inner scope; the entity declared in the\n  outer scope is hidden (and not visible) within the inner scope. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">source</a></p>\n</blockquote>\n\n<p>Note that this isn't magical or anything...this is all done at compile-time. The compiler has a table of identifiers and the things they reference, and new scopes create new tables for these. It so happens that at point #1 in the code above, the compiler hasn't yet populated the table with the new <code>char foo</code> (this is due to the linear compilation). So when it translates the first <code>printf</code> line, it looks through all the active scopes to find the identifier <code>foo</code>, and sees the <code>typedef</code>, and uses that. At the second <code>printf</code>, it looks through all the active scopes and finds a more recent use of the identifier <code>foo</code> and uses that.</p>\n"}], "owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 2, "accepted_answer_id": 31425267, "answer_count": 4, "score": 13, "last_activity_date": 1437764422, "creation_date": 1436946656, "last_edit_date": 1437764422, "question_id": 31424504, "link": "https://stackoverflow.com/questions/31424504/is-using-sizeof-on-a-variable-where-a-type-of-the-same-name-exists-well-defined", "title": "Is using sizeof on a variable where a type of the same name exists well defined?", "body": "<p>Is this well defined behaviour or is it undefined / somehow else defined which <code>foo</code> (data type or identifier) <code>sizeof</code> will be operating on ?</p>\n\n<pre><code>typedef int foo;\n\nint main(int argc, char *argv[])\n{\n    char foo;\n    printf (\"%u\\r\\n\", sizeof(foo));\n    return 0;\n}\n</code></pre>\n\n<p>If it is well defined, is there a way I could obtain the size of the datatype <code>foo</code> without declaring a variable of that type only to use <code>sizeof</code> on it?</p>\n"}, {"tags": ["c", "struct", "linked-list"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 2, "creation_date": 1436946632, "post_id": 31424451, "comment_id": 50820469, "body": "So you know the difference between variables that life on the stack and one that life on the heap?"}, {"owner": {"reputation": 805, "user_id": 3820753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6384d22a5ac18f71099fef49d69fccc?s=128&d=identicon&r=PG&f=1", "display_name": "devcodes", "link": "https://stackoverflow.com/users/3820753/devcodes"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1436947282, "post_id": 31424451, "comment_id": 50820937, "body": "@ckruczek okay,  i looked it up , so one has to use pointers to access memory on heap . thanks."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1437011870, "post_id": 31424451, "comment_id": 50857276, "body": "in C, capitalization counts!   &#39;null&#39; means nothing to the compiler.  use &#39;NULL&#39;.   in C, do not cast the returned value from malloc() as it is a void* and can be assigned to any pointer.   When calling malloc() always check (!=NULL) to assure the operation was successful"}], "answers": [{"tags": [], "owner": {"reputation": 2991, "user_id": 4394382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec6051aa680b77974eee192444340495?s=128&d=identicon&r=PG&f=1", "display_name": "wallek876", "link": "https://stackoverflow.com/users/4394382/wallek876"}, "is_accepted": false, "score": 1, "last_activity_date": 1436946928, "creation_date": 1436946928, "answer_id": 31424589, "question_id": 31424451, "link": "https://stackoverflow.com/questions/31424451/declaring-a-linked-list-node/31424589#31424589", "title": "Declaring a Linked List Node", "body": "<p>In the first two you declare pointers to a struct or node:</p>\n\n<p><code>struct node* new_node;</code> is a pointer, or the adress of a struct </p>\n\n<p>And in your suggestion you declare a whole struct or node:</p>\n\n<p><code>struct node new_node;</code> this is a struct that will live in the stack.</p>\n\n<p>and you can not assign null to a struct, at least in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": false, "score": 1, "last_activity_date": 1436947112, "creation_date": 1436947112, "answer_id": 31424647, "question_id": 31424451, "link": "https://stackoverflow.com/questions/31424451/declaring-a-linked-list-node/31424647#31424647", "title": "Declaring a Linked List Node", "body": "<p>Because <code>node</code> is the name of the <code>struct</code> and <code>new_node</code> is the name of the variable.  The <code>*</code> means that <code>new_node</code> is only the address of the <code>struct</code>, hence you need to allocate memory to it using <code>malloc</code>.</p>\n\n<p>You could define your own custom types for the struct:</p>\n\n<pre><code>typedef struct node_struct_tag       //tag, for use within the struct\n{\n    int data ;                       //data\n    struct node_struct_tag* next;    //pointer\n}   node, *node_pointer;             //types\n</code></pre>\n\n<p>Now you can declare the new node using the simplified syntax that you suggest.</p>\n\n<pre><code>node_pointer newNode = null;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "is_accepted": true, "score": 1, "last_activity_date": 1436948109, "creation_date": 1436948109, "answer_id": 31425001, "question_id": 31424451, "link": "https://stackoverflow.com/questions/31424451/declaring-a-linked-list-node/31425001#31425001", "title": "Declaring a Linked List Node", "body": "<p>You can declare a node that way, but you need to initialize it properly then.</p>\n\n<p>struct node new_node = {5 , NULL};\nwill create a node called new_node with data set to 5 and next set to NULL.</p>\n\n<p>The question is more or less what you actually need. When you create a node like this within a function, the node will cease to exist once the function is finished, if you don't make a copy of it. This is often not desirable.</p>\n\n<p>But if you need to make a copy anyway of such a node, you can just get the memory for the \"copy\" in the first place with malloc and fill the data right in the \"copy\" just via a pointer to the node, instead of putting the node on the function stack.</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436949208, "creation_date": 1436949208, "answer_id": 31425328, "question_id": 31424451, "link": "https://stackoverflow.com/questions/31424451/declaring-a-linked-list-node/31425328#31425328", "title": "Declaring a Linked List Node", "body": "<p>You can define a more readable struct like this</p>\n\n<pre><code>typedef int Type;\ntypedef struct node * Ptr;\n\ntypedef struct node {\n    Type Element;\n    Ptr  Next;\n} Node;\n</code></pre>\n\n<p>A new node can be cleanly defined as</p>\n\n<pre><code>Ptr newNode = NULL;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Ptr newNode = malloc(sizeof(Node));\n</code></pre>\n"}], "owner": {"reputation": 805, "user_id": 3820753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6384d22a5ac18f71099fef49d69fccc?s=128&d=identicon&r=PG&f=1", "display_name": "devcodes", "link": "https://stackoverflow.com/users/3820753/devcodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2364, "favorite_count": 1, "accepted_answer_id": 31425001, "answer_count": 4, "score": 0, "last_activity_date": 1436949208, "creation_date": 1436946554, "last_edit_date": 1436947362, "question_id": 31424451, "link": "https://stackoverflow.com/questions/31424451/declaring-a-linked-list-node", "title": "Declaring a Linked List Node", "body": "<p>Please bear with me if its too BASIC or silly, but I want to know , when we have a node structure as :-</p>\n\n<pre><code>struct node {\n int data ;            //data\n struct node* next;    //pointer\n}\n</code></pre>\n\n<p>Why do we declare a node as :-</p>\n\n<pre><code>struct node* new_node = null;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct node* new_node= (struct node*)malloc(sizeof(struct node)); \n</code></pre>\n\n<p>and why not just <code>struct node new_node = null</code>\n?</p>\n"}, {"tags": ["c", "linux", "gcc"], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 8, "last_activity_date": 1436946572, "creation_date": 1436946572, "answer_id": 31424454, "question_id": 31424345, "link": "https://stackoverflow.com/questions/31424345/compile-open-ssl-dependent-c-program-with-gcc/31424454#31424454", "title": "Compile Open SSL Dependent C Program with GCC", "body": "<p>You haven't linked the crypto and openssl libraries:</p>\n\n<pre><code>gcc opensslhello.c -lssl -lcrypto\n</code></pre>\n"}], "owner": {"reputation": 2168, "user_id": 843021, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f3c6fa71e30cd3d06c6005d3a5acd34?s=128&d=identicon&r=PG&f=1", "display_name": "Dev.K.", "link": "https://stackoverflow.com/users/843021/dev-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3278, "favorite_count": 0, "accepted_answer_id": 31424454, "answer_count": 1, "score": 5, "last_activity_date": 1436946572, "creation_date": 1436946217, "question_id": 31424345, "link": "https://stackoverflow.com/questions/31424345/compile-open-ssl-dependent-c-program-with-gcc", "title": "Compile Open SSL Dependent C Program with GCC", "body": "<p>I have to compile a C program on linux(ubuntu) with gcc. Which is dependent to openssl libraries. </p>\n\n<pre><code>#include &lt;openssl/crypto.h&gt;\n#include &lt;openssl/pem.h&gt;\n#include &lt;openssl/err.h&gt;\n#include &lt;openssl/bio.h&gt;\n#include &lt;openssl/x509.h&gt;\n#include &lt;openssl/pem.h&gt;\n#include &lt;openssl/err.h&gt;\n</code></pre>\n\n<p>I've downloaded libcrypto and libopenssl package from repository. But still I'm getting this error</p>\n\n<pre><code>root@kali:~/openssl# gcc opensslhello.c \n/tmp/ccTahV7g.o: In function `pem2X509':\nopensslhello.c:(.text+0x15): undefined reference to `BIO_s_mem'\nopensslhello.c:(.text+0x1d): undefined reference to `BIO_new'\nopensslhello.c:(.text+0x4e): undefined reference to `BIO_write'\nopensslhello.c:(.text+0x71): undefined reference to `PEM_read_bio_X509'\nopensslhello.c:(.text+0x7f): undefined reference to `BIO_free'\n/tmp/ccTahV7g.o: In function `sendHelloFunction':\nopensslhello.c:(.text+0xb9): undefined reference to `X509_STORE_new'\nopensslhello.c:(.text+0xe2): undefined reference to `X509_STORE_add_cert'\nopensslhello.c:(.text+0x106): undefined reference to `X509_STORE_add_cert'\nopensslhello.c:(.text+0x113): undefined reference to `sk_new_null'\nopensslhello.c:(.text+0x13c): undefined reference to `sk_push'\nopensslhello.c:(.text+0x160): undefined reference to `sk_push'\nopensslhello.c:(.text+0x187): undefined reference to `X509_STORE_CTX_new'\nopensslhello.c:(.text+0x1b0): undefined reference to `X509_STORE_CTX_init'\nopensslhello.c:(.text+0x1bf): undefined reference to `X509_verify_cert'\nopensslhello.c:(.text+0x1d3): undefined reference to `X509_STORE_CTX_get_error'\nopensslhello.c:(.text+0x1e3): undefined reference to `X509_STORE_CTX_get_error'\nopensslhello.c:(.text+0x215): undefined reference to `X509_STORE_CTX_free'\nopensslhello.c:(.text+0x220): undefined reference to `X509_free'\nopensslhello.c:(.text+0x22b): undefined reference to `BIO_free'\nopensslhello.c:(.text+0x233): undefined reference to `X509_free'\nopensslhello.c:(.text+0x23e): undefined reference to `sk_pop_free'\nopensslhello.c:(.text+0x249): undefined reference to `X509_STORE_free'\n/tmp/ccTahV7g.o: In function `main':\nopensslhello.c:(.text+0x291): undefined reference to `EVP_cleanup'\nopensslhello.c:(.text+0x29d): undefined reference to `ERR_remove_state'\nopensslhello.c:(.text+0x2a2): undefined reference to `ERR_free_strings'\ncollect2: error: ld returned 1 exit status\nroot@kali:~/openssl# \n</code></pre>\n\n<p>Can anyone please tell me what I should do to, get rid of this error.?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c", "linux", "file", "memory"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436947009, "post_id": 31424057, "comment_id": 50820756, "body": "Don&#39;t ask several questions. And show the source code relevant to your question."}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436948881, "post_id": 31424057, "comment_id": 50821831, "body": "Universality of I/O is a core principle and therefore having holes in I/O resources and mapping those streams to memory is virtually the same. Those two questions are just related to the concept hole within a medium. It is a file descriptor you use to share memory (as far as I remember) and why should there be code? Another aspect I do not understand."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436948980, "post_id": 31424057, "comment_id": 50821908, "body": "No, some file systems do not permit any holes."}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436949352, "post_id": 31424057, "comment_id": 50822123, "body": "They are filled with zeros transparently as holes are defined to appear on read if they exist."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436949384, "post_id": 31424057, "comment_id": 50822138, "body": "This is wrong for some versions of NFS and for VFAT"}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436949422, "post_id": 31424057, "comment_id": 50822158, "body": "The the Linux Interface book is lying or at least flawed in that regard. What happens in those cases?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "edited": false, "score": 0, "creation_date": 1436949438, "post_id": 31424057, "comment_id": 50822167, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/83297/discussion-between-basile-starynkevitch-and-martin-kersten\">continue this discussion in chat</a>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436949499, "post_id": 31424057, "comment_id": 50822201, "body": "I don&#39;t know, ask another question with some C code. I voted to close this question, since it is unclear and/or too broad. You should ask more focused questions showing some code in them."}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436949776, "post_id": 31424057, "comment_id": 50822370, "body": "I think it is perfectly suited it is regarding to the effects of holes in file description and the answer seams to be that memory is a medium that seam to does not support holes at all but fills it with zeros leading to actually consumption of memory. I hoped Linux is smart enough to fill it with holes in the paging file or virtual memory (so to speak).   Since you raised the issue of eventually formats that support no holes and not filling in zeros (consuming actual space) and answered I do not know, I do not know if your original issue is correct."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436949815, "post_id": 31424057, "comment_id": 50822401, "body": "Wrong. It is a matter of file system &amp; swap area, not of medium. Raw mediums (magnetic tapes, floppy disks, USB keys, hard disks, SSD disks) don&#39;t have any holes (except of course the punched cards of 1960s). Holes are a software artifact (provided by the file system)"}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436949923, "post_id": 31424057, "comment_id": 50822466, "body": "It is a matter of page table and the process&#39;s page table. Since Fat systems work similar by allocating blocks and assign those to fat entries I hoped this might be true for memory but up to now it seams not. Maybe I ask a kernel dev about it."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436949959, "post_id": 31424057, "comment_id": 50822505, "body": "Wrong again. You really seems confused."}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436950013, "post_id": 31424057, "comment_id": 50822536, "body": "I feel you get picky about this issue by referring to holes of punched cards so I guess its time for you to cool down first. Let&#39;s see what other people contribute."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436950388, "post_id": 31424057, "comment_id": 50822780, "body": "No, the point is that holes in files is a file system software artifact. Raw block devices don&#39;t have any hole!"}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436951074, "post_id": 31424057, "comment_id": 50823213, "body": "Exactly. Since we format anything and the page table can be seen as such the question was if the memory &#39;file format&#39; of Linux supports this and the answer seams to be no."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436951408, "post_id": 31424057, "comment_id": 50823435, "body": "The answer (to what question exactly?) probably depends upon the file system and your actual computer. Other people might contribute by voting to close your question (too broad, unclear, several questions in one, no source code shown, ....)"}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1436983828, "post_id": 31424057, "comment_id": 50845544, "body": "Question title includes <b><i>&quot;and Everything&quot;</i></b>??  You really want us to work on a question about <b><i>&quot;everything&quot;</i></b>??"}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "edited": false, "score": 0, "creation_date": 1436996448, "post_id": 31424057, "comment_id": 50852489, "body": "This is just a typical addition. Like a film about a lonely person finding their love and everything... . It is still love related but has to do with the wider picture. So in this regard it was ment to focus on the complete picture rather than what ever... ."}], "answers": [{"comments": [{"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "edited": false, "score": 0, "creation_date": 1436946444, "post_id": 31424315, "comment_id": 50820359, "body": "&gt; this is contradictory. If the memory is shared it is used (by the thing -generally another process- with which you share that memory). &lt;  I thought this is a mapping between a page table and actual memory but I see the problem. If the memory would not be allocated in first hand a special mechanism must exist to notify each party which memory block is intended to fill that hole in the mapping.  What happens if I map a file in memory and it has holes? How does fit the picture?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "edited": false, "score": 0, "creation_date": 1436946655, "post_id": 31424315, "comment_id": 50820485, "body": "&quot;What happens if I map a file in memory and it has holes?&quot; this is yet another question, and it depends how you call <code>mmap</code>"}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "edited": false, "score": 0, "creation_date": 1436948914, "post_id": 31424315, "comment_id": 50821861, "body": "Then tell me or point me to some resources. What happens... ."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "edited": false, "score": 1, "creation_date": 1436948953, "post_id": 31424315, "comment_id": 50821888, "body": "<code>mmap(2)</code> has some answers. If it is unclear, ask another question showing the code that you have tried."}, {"owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "edited": false, "score": 0, "creation_date": 1436950445, "post_id": 31424315, "comment_id": 50822815, "body": "I noticed. I have read Advanced Linux Programming (2001 version) recently since it is available for free. I read those man pages regarding shared memory several times during the last week since I am investigating some possibilities. I never found anything regarding holes."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "edited": false, "score": 0, "creation_date": 1436950633, "post_id": 31424315, "comment_id": 50822938, "body": "You really should ask a <i>separate</i> question and give the code that you have tried and experimented."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1436983559, "last_edit_date": 1436983559, "creation_date": 1436946118, "answer_id": 31424315, "question_id": 31424057, "link": "https://stackoverflow.com/questions/31424057/file-holes-and-shared-memory-in-linux/31424315#31424315", "title": "File Holes and Shared Memory in Linux?", "body": "<blockquote>\n  <p>Can I erase the middle of a file forcing the system to deallocate those blocks on the drive?</p>\n</blockquote>\n\n<p>You probably want the Linux specific <a href=\"http://man7.org/linux/man-pages/man2/fallocate.2.html\" rel=\"nofollow\">fallocate(2)</a>; beware, it might not work on some filesystems (e.g. NFS, VFAT, ...), because some <a href=\"https://en.wikipedia.org/wiki/File_system\" rel=\"nofollow\">filesystems</a> don't have holes. See also <a href=\"http://man7.org/linux/man-pages/man2/lseek.2.html\" rel=\"nofollow\">lseek(2)</a> with <code>SEEK_HOLE</code>, <a href=\"http://man7.org/linux/man-pages/man2/posix_fadvise.2.html\" rel=\"nofollow\">posix_fadvise(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/madvise.2.html\" rel=\"nofollow\">madvise(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/memfd_create.2.html\" rel=\"nofollow\">memfd_create(2)</a>, etc...</p>\n\n<p>Raw <a href=\"https://en.wikipedia.org/wiki/Device_file#BLOCKDEV\" rel=\"nofollow\">block devices</a> (like a disk partition, or an USB key, or an SSD) don't have any holes (but you could <code>mmap</code> into them). Holes are a file system software artifact.</p>\n\n<blockquote>\n  <p>Would be nice to allocate 1GB shared memory but never utilize it</p>\n</blockquote>\n\n<p>this is contradictory. If the memory is <em>shared</em> it is <em>used</em> (by the thing -generally another process- with which you <em>share</em> that memory). Read <a href=\"http://man7.org/linux/man-pages/man7/shm_overview.7.html\" rel=\"nofollow\">shm_overview(7)</a> if you really want <a href=\"http://en.wikipedia.org/wiki/Shared_memory\" rel=\"nofollow\">shared memory</a> (and read <em>carefully</em> <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow\">mmap(2)</a>). Read more about <a href=\"https://en.wikipedia.org/wiki/Virtual_memory\" rel=\"nofollow\">virtual memory</a>, <a href=\"https://en.wikipedia.org/wiki/Address_space\" rel=\"nofollow\">address space</a>, <a href=\"https://en.wikipedia.org/wiki/Paging\" rel=\"nofollow\">paging</a>, <a href=\"https://en.wikipedia.org/wiki/Memory_management_unit\" rel=\"nofollow\">MMU</a>s, <a href=\"https://en.wikipedia.org/wiki/Page_fault\" rel=\"nofollow\">page faults</a>, <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow\">operating systems</a>,  <a href=\"https://en.wikipedia.org/wiki/Kernel_%28operating_system%29\" rel=\"nofollow\">kernels</a>, <a href=\"https://en.wikipedia.org/wiki/Mmap\" rel=\"nofollow\">mmap</a>, <a href=\"https://en.wikipedia.org/wiki/Demand_paging\" rel=\"nofollow\">demand paging</a>, <a href=\"https://en.wikipedia.org/wiki/Copy-on-write\" rel=\"nofollow\">copy-on-write</a>, <a href=\"https://en.wikipedia.org/wiki/Memory_map\" rel=\"nofollow\">memory map</a>, <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow\">ELF</a>, <a href=\"https://en.wikipedia.org/wiki/Sparse_file\" rel=\"nofollow\">sparse files</a> ... Try also the <code>cat /proc/$$/maps</code> command in a terminal, and understand the output (see <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow\">proc(5)</a>...).</p>\n\n<p>Perhaps you want to pre-allocate some address space range, and later really allocate the virtual memory. This is possible using Linux version of <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow\">mmap(2)</a>. </p>\n\n<p>To pre-allocate a gigabyte memory range, you'll first call <code>mmap</code> with <code>MAP_NORESERVE</code></p>\n\n<pre><code>size_t onegiga = 1L&lt;&lt;30;\nvoid* startad = mmap(NULL, onegiga, PROT_NONE, \n                MAP_ANONYMOUS|MAP_NORESERVE|MAP_SHARED,\n                -1, 0);\nif (startad==MAP_FAILED) { perror(\"mmap MAP_NORESERVE\"); exit(EXIT_FAILURE); }\nvoid* endad = (char*)startad + onegiga;\n</code></pre>\n\n<p>The <code>MAP_NORESERVE</code> does not consume a lot of resources (i.e. does not eat swap space, which is not reserved, hence the name of the flag). It is pre-allocating address space, in the sense that further <code>mmap</code> calls (without <code>MAP_FIXED</code>) won't give an address inside the returned range (unless you <code>munmap</code> some of it).</p>\n\n<p>Later on, you can allocate some subsegment of that, in multiples of the page size (generally 4Kbytes), using <code>MAP_FIXED</code> inside the previous segment, e.g.</p>\n\n<pre><code>size_t segoff = 1024*1024; // or something else such that ....\nassert (segoff &gt;=0  &amp;&amp; segoff &lt; onegiga &amp;&amp; segoff % sysconf(_SC_PAGESIZE)==0);\nsize_t segsize = 65536; // or something else such that ....\nassert (segsize &gt; 0 &amp;&amp; segsize % sysconf(_SC_PAGESIZE)==0 \n        &amp;&amp; startad + segoffset + segsize &lt; endad);\nvoid* segmentad = mmap(startad + segoffset, segsize,\n                       PROT_READ|PROT_WRITE, \n                       MAP_FIXED | MAP_PRIVATE, \n                       -1, 0);\nif (segmentad == MAP_FAILED) { perror(\"mmap MAP_FIXED\"); exit(EXIT_FAILURE); }\n</code></pre>\n\n<p>This re-allocation with <code>MAP_FIXED</code> will use some resources (e.g. consume some swap space).</p>\n\n<p>IIRC, the <a href=\"http://sbcl.org/\" rel=\"nofollow\">SBCL</a> runtime and garbage collection uses such tricks.</p>\n\n<p>Read also <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow\">Advanced Linux Programming</a> and carefully <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow\">syscalls(2)</a> and the particular man pages of relevant system calls.</p>\n\n<p>Read also about <a href=\"https://en.wikipedia.org/wiki/Memory_overcommitment\" rel=\"nofollow\">memory overcommitment</a>. This is a Linux feature that I dislike and generally disable (e.g. thru <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow\">proc(5)</a>).</p>\n\n<p>BTW, the <a href=\"https://en.wikipedia.org/wiki/Linux_kernel\" rel=\"nofollow\">Linux kernel</a> is <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow\">free software</a>. You can download its source code from <a href=\"http://kernel.org/\" rel=\"nofollow\">kernel.org</a> and study the source code. And you can write some experimental code also. Then ask another more focused question showing your code and the results of your experiments.</p>\n"}], "owner": {"reputation": 4903, "user_id": 2695344, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7079388c9f9c3a89fbf6e09881c48766?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kersten", "link": "https://stackoverflow.com/users/2695344/martin-kersten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1269, "favorite_count": 0, "accepted_answer_id": 31424315, "answer_count": 1, "score": 0, "last_activity_date": 1436983845, "creation_date": 1436945285, "last_edit_date": 1436983845, "question_id": 31424057, "link": "https://stackoverflow.com/questions/31424057/file-holes-and-shared-memory-in-linux", "title": "File Holes and Shared Memory in Linux?", "body": "<p>Since I read the Linux Programming Interface book (very good read) I discovered the file holes in Linux. Therefore using Unix file formats like Ext4 one can open a new file write 1000 bytes seek to the position of 1000.000.000 write another 1000 bytes and depending the block size of the file format end up with a file consuming just 2048 bytes for a block size of 1024 or 512.</p>\n\n<p>So basically the file is created as a 1GB + 1000 bytes long file where only two blocks of real drive space are used.</p>\n\n<p>Can I erase the middle of a file forcing the system to deallocate those blocks on the drive?</p>\n\n<p>Is there an equivalent where I allocate (shared memory) with or without a file backing it where it has also holes that are just filled as the memory pages are written? </p>\n\n<p>Would be nice to allocate 1GB shared memory but never utilize it fully until necessary just to avoid remapping if the shared memory block should grow.</p>\n"}, {"tags": ["c", "configuration", "strcmp"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "edited": false, "score": 0, "creation_date": 1436946039, "post_id": 31423916, "comment_id": 50820070, "body": "Thank you for correcting the style. I forgot to correct the printf statement. But I still dont get it how do I compare the contents of the buffer and then print a statement using if. Could you maybe post a small example code? Thanks for the help anyways!"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1436945077, "last_edit_date": 1436945077, "creation_date": 1436944860, "answer_id": 31423916, "question_id": 31423838, "link": "https://stackoverflow.com/questions/31423838/how-to-use-strcmp-in-if-statement-to-compare/31423916#31423916", "title": "How to use strcmp in if statement to compare", "body": "<p>As from your input format, there are spaces present and you're not considering that as a prt of delimiter. So, expectedly, those spaces will be present in the string pointed bu <code>buffer</code>. You can either do</p>\n\n<ul>\n<li>Change your delimiter to <code>\" ,\"</code></li>\n<li>Write <code>if (strcmp(buffer, \" A\")==0)</code> and so on.</li>\n</ul>\n\n<p>That said,</p>\n\n<ol>\n<li><code>printf(buffer);</code> is a bad style. Either use <code>puts(buffer)</code> ot prefer <code>printf(\"%s\", buffer)</code>.</li>\n<li>Check for the <code>NULL</code> return from <code>strtok()</code> before using that returned pointer.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 811, "user_id": 4895040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YLzeG.jpg?s=128&g=1", "display_name": "raymelfrancisco", "link": "https://stackoverflow.com/users/4895040/raymelfrancisco"}, "is_accepted": true, "score": 1, "last_activity_date": 1436951485, "last_edit_date": 1592644375, "creation_date": 1436945946, "answer_id": 31424261, "question_id": 31423838, "link": "https://stackoverflow.com/questions/31423838/how-to-use-strcmp-in-if-statement-to-compare/31424261#31424261", "title": "How to use strcmp in if statement to compare", "body": "<p>Here are some fixes I made to your code:</p>\n<ul>\n<li><p>I put <code>strcmp()</code> checking inside the loop so that all pieces of string extracted from <code>strtok()</code> will be checked for equality with <code>&quot;A&quot;</code>.</p>\n<p>The first string before the delimiter is extracted to <code>buffer</code>, then it continues extracting from <code>buffer</code> until <code>NULL</code> inside the <code>do-while</code> loop.</p>\n</li>\n<li><p>Since your <code>ini</code> file's value has this format of space-after comma (<code>&quot;, &quot;</code>), I changed the delimiter from <code>&quot;,&quot;</code> to <code>&quot;, &quot;</code> <em>(adding space after comma)</em>.</p>\n<p>Although it won't make much impact in checking for equality with <code>&quot;A&quot;</code> since <code>A</code> won't be affected <em>(because it is on the first part of the value</em> <code>A, H, D, F</code>), checking the values of letters in-between commas and space <em>(such as <code>H</code>, <code>D</code>, <code>F</code>)</em> will be affected if we will use <code>&quot;,&quot;</code> <em>(comma only)</em> as delimiter.</p>\n</li>\n</ul>\n<p><em><strong>Modified Code</strong></em></p>\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;windows.h&gt;\n\n int main() {\n\n       LPCSTR ini = &quot;C:\\\\conf.ini&quot;;\n       char var[100];\n       GetPrivateProfileString(&quot;key&quot;, &quot;title&quot;, NULL, var, sizeof var, ini);\n       \n       printf(&quot;The complete line is %s\\n&quot;, var);\n      \n       // first piece of string (letter) before delimiter\n       // changed delimiter from &quot;,&quot; to &quot;, &quot;\n       char* buffer = strtok(var, &quot;, &quot;);\n       \n       // exits if buffer is NULL\n       if ( !buffer )\n           return;\n\n       do {  \n           // prints the letter\n           printf(&quot;%s&quot;, buffer);\n           \n           // checking if the extracted piece of code from var is equal with &quot;A&quot;,  \n           // prints either &quot; Yes&quot; or &quot; No&quot;\n           ( !strcmp(buffer, &quot;A&quot;) ) ? puts(&quot; Yes&quot;) : puts(&quot; No&quot;);\n\n       // continues checking until NULL\n       } while( buffer = strtok(NULL, &quot;, &quot;) );\n }\n</code></pre>\n<p><em><strong>Output</strong></em></p>\n<pre><code>The complete line is A, H, D, F\nA Yes\nH No\nD No\nF No\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 31424261, "answer_count": 2, "score": 0, "last_activity_date": 1436953187, "creation_date": 1436944655, "last_edit_date": 1436953187, "question_id": 31423838, "link": "https://stackoverflow.com/questions/31423838/how-to-use-strcmp-in-if-statement-to-compare", "title": "How to use strcmp in if statement to compare", "body": "<p>I am trying to create a C program that reads data from a .ini file. The data is read into a variable named buffer. The data in the .ini file looks like this:</p>\n\n<pre><code> [key]\n title= A, H, D, F \n</code></pre>\n\n<p>My program looks like this:</p>\n\n<pre><code> LPCSTR ini = \"C:\\\\conf.ini\";\n char var[100];\n GetPrivateProfileString(\"key\", \"title\", 0, var, 100, ini);\n char* buffer = strtok(var, \",\");\n printf(\"The complete line is %s\", var);\n\n buffer=strtok(NULL, \",\");\n printf(buffer);\n\n while((buffer= strtok(NULL, \",\"))!=NULL)\n     printf(buffer);\n</code></pre>\n\n<p>The output looks something like this:</p>\n\n<pre><code>The complete line is A, H, D, F\nA\nH\nD\nF\n</code></pre>\n\n<p>Now here what I want to do is compare each letter received in the 'buffer' to character 'A' and if it is true print Yes, else print No. I have tried using strcmp to compare but the .exe file stopped running.</p>\n\n<pre><code>if (strcmp(buffer, \"A\")==0)\n    printf(\"Hello\")\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 112, "user_id": 4243160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e79370ec0f5fc4c9f638acfa3f84d77?s=128&d=identicon&r=PG&f=1", "display_name": "userNishant", "link": "https://stackoverflow.com/users/4243160/usernishant"}, "edited": false, "score": 0, "creation_date": 1436945040, "post_id": 31423732, "comment_id": 50819474, "body": "you must need to know the difference between the pointer and value at the pointer. you can&#39;t change p but you can change the value at p."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1436945236, "post_id": 31423732, "comment_id": 50819601, "body": "&#39;plz explain it in detail&#39; sounds suspiciously homeworky..."}, {"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 2, "creation_date": 1436945291, "post_id": 31423732, "comment_id": 50819632, "body": "<a href=\"http://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-and-int-const\" title=\"what is the difference between const int const int const and int const\">stackoverflow.com/questions/1143262/&hellip;</a>"}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 1, "creation_date": 1436945344, "post_id": 31423732, "comment_id": 50819658, "body": "Exact dupe of the above."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 1, "creation_date": 1436945400, "post_id": 31423732, "comment_id": 50819690, "body": "@legends2k Right, I missed that. Closed and changed my answer to CW."}], "answers": [{"comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1436945179, "post_id": 31423793, "comment_id": 50819564, "body": "prog.c: In function &#39;foo&#39;: prog.c:17:7: error: assignment of read-only parameter &#39;p&#39;      p = &amp;j;"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1436945266, "post_id": 31423793, "comment_id": 50819619, "body": "Oh sorry, I thought you were demonstrating only what values could be changed, mb."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1436944509, "creation_date": 1436944509, "answer_id": 31423793, "question_id": 31423732, "link": "https://stackoverflow.com/questions/31423732/int-const-p-does-not-behave-like-constant/31423793#31423793", "title": "int **const p does not behave like constant", "body": "<p>In your case, <code>const</code> is applied on <code>p</code> itself, not on <code>* p</code> or <code>** p</code>. In other words, you can change <code>*p</code> and <code>**p</code>, but you cannot change <code>p</code>.</p>\n\n<p>FWIW, try changing the <em>value</em> of <code>p</code> and see.</p>\n\n<p>See it <kbd><a href=\"http://ideone.com/pJ0U8i\" rel=\"nofollow\">LIVE</a></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 2, "last_activity_date": 1436945029, "last_edit_date": 1495542587, "creation_date": 1436944519, "answer_id": 31423797, "question_id": 31423732, "link": "https://stackoverflow.com/questions/31423732/int-const-p-does-not-behave-like-constant/31423797#31423797", "title": "int **const p does not behave like constant", "body": "<p><code>int **const p</code> means <code>p</code> is constant.</p>\n\n<p>So following are not allowed</p>\n\n<pre><code>p++; // Bad\np += 10; // Bad\np = newp; // Bad\n</code></pre>\n\n<p>But following are fine:</p>\n\n<pre><code>if(p) *p = some_p;\nif(p &amp;&amp; *p) **p = some_int;\n</code></pre>\n\n<p>If you want <code>*p</code> should not be re-assigned, use the following</p>\n\n<pre><code>int * const *p;\n</code></pre>\n\n<p>If you want neither <code>p</code> nor <code>*p</code> should be changeable, use:</p>\n\n<pre><code>int * const * const p;\n</code></pre>\n\n<p>And following will make all <code>p</code>, <code>*p</code> and <code>**p</code> read-only</p>\n\n<pre><code>  const int *const *const p;\n//  1          2      3\n</code></pre>\n\n<p>1: <code>**p</code> is constant<BR>\n2: <code>*p</code> is constant<BR>\n3: <code>p</code> is constant</p>\n\n<p>Use 1 or 2 or 3 or any combination as per your requirement.</p>\n\n<p>cdecl page: How to read complex declarations like <a href=\"http://cdecl.ridiculousfish.com/?q=int%20**const%20p\" rel=\"nofollow noreferrer\"><code>int ** const p</code></a> and <a href=\"http://cdecl.ridiculousfish.com/?q=const%20int%20*const%20*const%20p\" rel=\"nofollow noreferrer\"><code>const int *const *const p</code></a></p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/27074718/c-what-does-this-2-const-mean/27074751\">c - what does this 2 const mean?</a></p>\n"}], "owner": {"reputation": 105, "user_id": 5118168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-NZxj9Te92xg/AAAAAAAAAAI/AAAAAAAAAFE/k2oqKG6pDqM/photo.jpg?sz=128", "display_name": "Harshit Kudeshiya", "link": "https://stackoverflow.com/users/5118168/harshit-kudeshiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "closed_date": 1436945387, "accepted_answer_id": 31423797, "answer_count": 2, "score": -2, "last_activity_date": 1436945328, "creation_date": 1436944336, "last_edit_date": 1436945328, "question_id": 31423732, "link": "https://stackoverflow.com/questions/31423732/int-const-p-does-not-behave-like-constant", "closed_reason": "Duplicate", "title": "int **const p does not behave like constant", "body": "<p>We know that in int *const p, where p is a constant pointer\nit means that address that p holds cannot changed but here in function foo we change the address. </p>\n\n<p>How can it be possible?  </p>\n\n<pre><code>int main(){\n    int i = 10;\n    int *p = &amp;i;\n    foo(&amp;p);\n    printf(\"%d \", *p);\n    printf(\"%d \", *p);\n}\nvoid foo(int **const p){\n    int j = 11;\n    *p = &amp;j;\n    printf(\"%d \", **p);\n}\n</code></pre>\n"}, {"tags": ["c", "stream", "buffer"], "answers": [{"comments": [{"owner": {"reputation": 733, "user_id": 4911018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0a8ba726c789d8ae78654b961597d717?s=128&d=identicon&r=PG&f=1", "display_name": "tian tong", "link": "https://stackoverflow.com/users/4911018/tian-tong"}, "edited": false, "score": 0, "creation_date": 1436951851, "post_id": 31424229, "comment_id": 50823722, "body": "In #1, &quot;buffered input&quot; is the data will be written into the file on disk, I think. According to what you say, output stream is data written into file, input stream is data read from file, right? Or, &quot;buffered input&quot; is different from input stream?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 733, "user_id": 4911018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0a8ba726c789d8ae78654b961597d717?s=128&d=identicon&r=PG&f=1", "display_name": "tian tong", "link": "https://stackoverflow.com/users/4911018/tian-tong"}, "edited": false, "score": 0, "creation_date": 1436953985, "post_id": 31424229, "comment_id": 50825102, "body": "@tiantong &quot;Buffered input&quot; is data that has been read <i>from</i> the file on disk, into the stream&#39;s buffers.. but not necessarily consumed by your program until you call a function to read input like <code>fgets()</code>, <code>fread()</code>, etc.  &quot;Input&quot; and &quot;output&quot; are relative to your program, not the file."}], "tags": [], "owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "is_accepted": true, "score": 0, "last_activity_date": 1436945869, "creation_date": 1436945869, "answer_id": 31424229, "question_id": 31423713, "link": "https://stackoverflow.com/questions/31423713/questions-about-file-stream-and-buffer-in-c/31424229#31424229", "title": "questions about file stream and buffer in C", "body": "<p>In #1, \"buffered input\" refers to data your program could read <em>from</em> the stream... so it's basically saying that once you close the stream you can't read more data from it.  The buffered input is data that may have been read from the file/device associated with the stream and placed in the stream's input buffer, but hasn't actually been read by <em>your</em> code yet (retrieved in advance and waiting for you to read it, basically).  Discarding it doesn't prevent anything from being written to the file because it's <em>input read from the file</em>, not output to be written <em>to</em> it.</p>\n\n<p>In #2, they're saying that when your program ends (normally), anything your program has written to those streams that hasn't actually been written to the file on disk (or whatever device is associated with the stream) will be flushed, ie. actually written to the disk instead of sitting in the buffer.  Normally your stream writes are kept in buffers temporarily, and only actually written when the buffers are flushed (which may happen when the buffers are full, when <code>fflush()</code> is called, when the stream is closed, etc.)</p>\n"}], "owner": {"reputation": 733, "user_id": 4911018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0a8ba726c789d8ae78654b961597d717?s=128&d=identicon&r=PG&f=1", "display_name": "tian tong", "link": "https://stackoverflow.com/users/4911018/tian-tong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 1, "accepted_answer_id": 31424229, "answer_count": 1, "score": 0, "last_activity_date": 1436945869, "creation_date": 1436944282, "question_id": 31423713, "link": "https://stackoverflow.com/questions/31423713/questions-about-file-stream-and-buffer-in-c", "title": "questions about file stream and buffer in C", "body": "<p>I'm reading \"Advanced programming in the Unix Environment\",in dection 5.5, P150, It says:</p>\n\n<blockquote>\n  <p>1.Any buffered output data is flushed before the file is closed. Any input data that may be buffered is discared....<br>\n  2.When a process terminates normally, ... ,all standard I/O streams with unwritten buffered data are flushed ...</p>\n</blockquote>\n\n<p>In 1, does it mean when I use fclose() to close a stream, the buffered input will be discared so that some data won't be written into file. If not, what's the meaning of \"file is closed\"?</p>\n\n<p>In 2, does \"unwritted buffered data are flushed\" meah that buffered data will be writted into file?</p>\n"}, {"tags": ["c", "optimization", "arm", "simd", "neon"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1436945068, "post_id": 31423641, "comment_id": 50819491, "body": "This is effectively a <i>gathered load</i>, and is not supported in NEON. See: <a href=\"http://stackoverflow.com/questions/11502332/arm-neon-how-can-i-change-value-with-a-index/11506069#11506069\" title=\"arm neon how can i change value with a index\">stackoverflow.com/questions/11502332/&hellip;</a>"}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 2, "creation_date": 1436947635, "post_id": 31423641, "comment_id": 50821143, "body": "If this is <code>uint8_t table[n]</code> or there are fewer than 256 instances in this mapping, then <code>vtbl</code> comes to rescue. The same is true, if the mapping <code>table[i]</code> would be locally monotonic. For generic case the answer is no. Voting to reopen as an effort to get extra information; Unless this is an ad hoc encryption function, I&#39;d be tempted to believe in exploitable order in the mapping table."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 1, "creation_date": 1436949235, "post_id": 31423641, "comment_id": 50822063, "body": "@AkiSuihkonen: VTBL only handles (up to) the five least significant bits of the input. Do you see a way to break that barrier ?"}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 2, "creation_date": 1436961765, "post_id": 31423641, "comment_id": 50829953, "body": "Using a chain <code>vtbx.8 d0, {d4,d5,d5,d6}, d1; vadd.8 d1, d2; vtbx.8 d0, {d7, d8, d9, d10}, d1;</code> with d2 filled with 32 one can augment the table size to 64. To get 256 bytes one needs unfortunately spill some registers."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5101928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a3e281405e4c78aa79efdebe5cb4b?s=128&d=identicon&r=PG&f=1", "display_name": "luowenfeng", "link": "https://stackoverflow.com/users/5101928/luowenfeng"}, "is_accepted": false, "score": 1, "last_activity_date": 1437036754, "last_edit_date": 1495541644, "creation_date": 1437036754, "answer_id": 31449621, "question_id": 31423641, "link": "https://stackoverflow.com/questions/31423641/how-to-optimize-ai-bci-with-neon/31449621#31449621", "title": "how to optimize a[i] = b[c[i]] with NEON", "body": "<p>Thanks for @Paul R and his comment:</p>\n\n<blockquote>\n  <p>This is effectively a gathered load, and is not supported in NEON.See:\n  <a href=\"https://stackoverflow.com/questions/11502332/arm-neon-how-can-i-change-value-with-a-index/11506069#11506069\">stackoverflow.com/questions/11502332/\u2026</a></p>\n</blockquote>\n\n<p>Since it couldn't optimized by NEON, I tried <a href=\"http://openmp.org/wp/\" rel=\"nofollow noreferrer\">OpenMP</a>, and got a significant improvement. And the code is rather simple too:</p>\n\n<pre><code>#pragma omp parallel for\nfor (i=0; i&lt;n; i++)\n{\n    dst[i] = src[table[i]];\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5101928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a3e281405e4c78aa79efdebe5cb4b?s=128&d=identicon&r=PG&f=1", "display_name": "luowenfeng", "link": "https://stackoverflow.com/users/5101928/luowenfeng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437036754, "creation_date": 1436944041, "question_id": 31423641, "link": "https://stackoverflow.com/questions/31423641/how-to-optimize-ai-bci-with-neon", "title": "how to optimize a[i] = b[c[i]] with NEON", "body": "<p>I got a very simple but big(n is large) loop here:</p>\n\n<pre><code>for (i=0; i&lt;n; i++)\n{\n    dst[i] = src[table[i]];\n}\n</code></pre>\n\n<p>I want to optimize it using NEON but I don't know how to deal with this part:<code>src[table[i]]</code>.\nIs it possible to optimize? If yes, how?</p>\n"}, {"tags": ["c", "xml"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1436944989, "post_id": 31423499, "comment_id": 50819432, "body": "Please format your code correctly. Especially all those blank lines are disturbing."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "edited": false, "score": 0, "creation_date": 1437018265, "post_id": 31426750, "comment_id": 50858820, "body": "Thanks @felix i will think on your code but i can&#39;t use library libxml as i have to do this using turbo c only."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "edited": false, "score": 0, "creation_date": 1437024833, "post_id": 31426750, "comment_id": 50860758, "body": "You must be kidding? What machine and OS is this for? I&#39;m sure you could find a better (and free) alternative..."}, {"owner": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "edited": false, "score": 0, "creation_date": 1437029677, "post_id": 31426750, "comment_id": 50862921, "body": "yeah i know its crap.......but i have to do it using this only. Actually i am making xml parser for barcode printer once my code is done i will move it inside the printer hardware. Then it will accept only xml file parse it merge the data with template file &amp; print the barcode."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "edited": false, "score": 0, "creation_date": 1437029758, "post_id": 31426750, "comment_id": 50862957, "body": "Do your XML files always have only one record? [<i>edit</i>: home-grown XML parsers are almost always incorrect and a pile of WTF, but for very constrained input formats (assuming much more than XML guarantees), you could get away with it]"}, {"owner": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "edited": false, "score": 0, "creation_date": 1437038653, "post_id": 31426750, "comment_id": 50868278, "body": "what do you mean @felix?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "edited": false, "score": 0, "creation_date": 1437062979, "post_id": 31426750, "comment_id": 50885534, "body": "The generic parts of this code will go github ... I just think this MIGHT be usable for such limited cases and weird constraints"}, {"owner": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "edited": false, "score": 0, "creation_date": 1437197504, "post_id": 31426750, "comment_id": 50940562, "body": "does it work with turbo c? As there is no libraries in c for xml....or can i just read the data in &quot; &quot; quotes in xml file which is file name &amp; tag name....&amp; then use them to place data at proper position?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "edited": false, "score": 0, "creation_date": 1437215121, "post_id": 31426750, "comment_id": 50944220, "body": "what the hell ... you DO understand anything about programming? Then look at <a href=\"https://github.com/Zirias/badxml/blob/master/include/badxml/badxml.h\" rel=\"nofollow noreferrer\">the header</a> for the interface and <a href=\"https://github.com/Zirias/badxml/blob/master/src/example.c\" rel=\"nofollow noreferrer\">the example</a> for how to use it."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1437145525, "last_edit_date": 1437145525, "creation_date": 1436953053, "answer_id": 31426750, "question_id": 31423499, "link": "https://stackoverflow.com/questions/31423499/fill-a-template-file-with-data-from-xml/31426750#31426750", "title": "Fill a template file with data from XML", "body": "<p>Trying to parse XML with some simple code is almost always a bad idea. Use a a library (<a href=\"http://www.xmlsoft.org/\" rel=\"nofollow\">libxml2</a>) for that, see the <a href=\"http://www.xmlsoft.org/tutorial/index.html\" rel=\"nofollow\">libxml Tutorial</a>, \"<em>Parsing the file</em>\".</p>\n\n<p>Once you have your document, read the template file line by line, looking for bracket pairs, taking the substring between them as key for an XPath lookup on your <code>xmlDoc</code>, see \"<em>Using XPath to Retrieve Element Content</em>\".</p>\n\n<p>Could look like this:</p>\n\n<pre><code>/* get element content by attribute selector */\nxmlChar *labelContent(const char *name)\n{\n    /* xpath code here ... */\n}\n\nint main(void)\n{\n    /* [...] */\n\n    char inbuf[1024];\n    while (fgets(inbuf, 1024, fPin) &gt; 0)\n    {\n        char *inc = inbuf;\n        char *name = 0;\n        xmlChar *val;\n\n        while (*inc)\n        {\n            if (name)\n            {\n                if (*inc == ']')\n                {\n                    /* end found, replace with string terminator */\n                    *inc = 0;\n\n                    /* output value for label, increment name to skip '[' */\n                    val = labelContent(++name);\n                    fputs(val, fPout);\n                    xmlFree(val);\n\n                    /* leave template tag mode */\n                    name = 0;\n                }\n            }\n            else\n            {\n                if (*inc == '[')\n                {\n                    /* start of template tag */\n                    name = inc;\n                }\n                else\n                {\n                    /* all other characters go directly to ouptut file */\n                    fputc(*inc, fPout);\n                }\n            }\n            ++inc;\n        }\n\n        /* no matching ']' found, output rest of line verbatim */\n        if (name) fputs(name, fPout);\n        name = 0;\n    }\n\n    /* [...] */\n}\n</code></pre>\n\n<p>All in all, it will take considerably more effort than you thought ;) Code is just example, didn't try to compile.</p>\n\n<p><strong>edit</strong>: If you absolutely HAVE to parse the XML yourself, I just <a href=\"http://coliru.stacked-crooked.com/a/931e539e789d03b9\" rel=\"nofollow\">put something together</a> that manages to parse your example file. It is still minimal, ignoring a lot of things possible in XML like escaping, quoting with single quotes, any entity sequences and so on. So something like this shouldn't be called an XML parser, but it might help you.</p>\n\n<p><strong>update:</strong> I now took the time to properly release this code, because it COULD be generally useful, fixing some small bugs on the way, so better refer to the new <a href=\"https://github.com/Zirias/badxml/\" rel=\"nofollow\">github repo \"badxml\"</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4873208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a92bf5d51c87c01f97f6e2013a03eb?s=128&d=identicon&r=PG&f=1", "display_name": "RAHUL", "link": "https://stackoverflow.com/users/4873208/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437145525, "creation_date": 1436943549, "last_edit_date": 1437050292, "question_id": 31423499, "link": "https://stackoverflow.com/questions/31423499/fill-a-template-file-with-data-from-xml", "title": "Fill a template file with data from XML", "body": "<p>I have an XML file </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;!DOCTYPE labels SYSTEM \"label.dtd\"&gt;\n   &lt;labels _FORMAT =\"BARCODE\" _QUANTITY=\"1\" _PRINTERNAME=\"P1\"&gt;\n\n        &lt;label&gt;\n             &lt;variable name= \"PRTNUM\"&gt;234243242&lt;/variable&gt;\n             &lt;variable name= \"QUANTY\"&gt;004342&lt;/variable&gt;\n             &lt;variable name= \"PONUMB\"&gt;844463541&lt;/variable&gt;\n             &lt;variable name= \"SERIAL\"&gt;DZ12&lt;/variable&gt;\n             &lt;variable name= \"REV\"&gt;234235&lt;/variable&gt;\n             &lt;variable name= \"UNITS\"&gt;234235&lt;/variable&gt;\n        &lt;/label&gt;\n\n     &lt;/labels&gt;\n</code></pre>\n\n<p>which i have parsed i.e the contain between &lt;>...... tags \neg. 004342 only 004342 data is read &amp; other is neglected.\nThus the whole parsed data i have saved into another file name parsed.txt which looks like</p>\n\n<pre><code>234243242\n004342\n844463541\nDZ12\n234235\n234235\n</code></pre>\n\n<p>this parsed data i have to merge with the other file (barcode.dpl)</p>\n\n<pre><code>c0001\n\nf260\n\nL\n\nD11\n\nH30\n\nR0000\n\nC0040\n\n1X1100000100010B300300003003\n\n181100202900027Part No\n\n181100202900097[PRTNUM]\n\n1e5504002400030B\n\n1X1100002300010L300003\n\n191100202000030Quantity\n\n191100202000080[QUANTY]\n\n1e5504001500040B\n\n1X1100001400010L300003\n\n1X1100001400150L003090\n\n191100202000170P.O.No\n\n191100202000220[PONUMB]\n\n1e5504001500180B\n\n191100201200030Supplier\n\n1e3304000700030B\n\n1X1100000600010L300003\n\n181100200300030Serial\n\n181100200300090[SERIAL]\n\n171100300900190Rev\n\n171100300300190[REV]\n\n171100300900240Units\n\n171100300300240[UNITS]\n\n1X1100000100180L003130\n\nQ0001\n\nE\n</code></pre>\n\n<p>the parsed data will put at the place of [PRTNUM], [QUANTY], [PONUMB] etc.\n&amp; the file will look like....</p>\n\n<pre><code>c0001\n\nf260\n\nL\n\nD11\n\nH30\n\nR0000\n\nC0040\n\n1X1100000100010B300300003003\n\n181100202900027Part No\n\n181100202900097234243242\n\n1e5504002400030B\n\n1X1100002300010L300003\n\n191100202000030Quantity\n\n191100202000080004342\n\n1e5504001500040B\n\n1X1100001400010L300003\n\n1X1100001400150L003090\n\n191100202000170P.O.No\n\n191100202000220844463541\n\n1e5504001500180B\n\n191100201200030Supplier\n\n1e3304000700030B\n\n1X1100000600010L300003\n\n181100200300030Serial\n\n181100200300090DZ12\n\n171100300900190Rev\n\n171100300300190234235\n\n171100300900240Units\n\n171100300300240234235\n\n1X1100000100180L003130\n\nQ0001\n\nE\n</code></pre>\n\n<p>so actually my problem is parsed data place at the position when it detects [....] from barcode file irrespective of the tag name given in xml &amp; barcode file...if i put [QUANTY] at the position of [PRTNUM] it will place the same data 234243242 (which actually for [PRTNUM]). \nHow to make it possible that my program will read the data inside [...] from barcode.txt file &amp; then place the corresponding data from parsed file at that position.</p>\n\n<p>my c code is...</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;DIR.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n\n  clrscr();\n\n  int a[1];\n\n  char cBuffer[50] = {0};\n\n  char ch, cSkipdata;\n\n  FILE* fPtr;\n\n  FILE* fPparse;\n\n  FILE* fPin;\n\n  FILE* fPout;\n\n  char* Ptr;\n\n\n\n\n      getcwd(cBuffer, 100);\n      printf(\"The current directory is %s\\n\\n\",cBuffer);\n      fPtr = fopen(\"sample.xml\", \"r\");                    /* Open XML file*/\n      fPparse = fopen(\"parse.txt\",\"w\");\n\n\n      if(fPtr)\n      {\n\n\n    printf(\"The file is\\n\\n\");\n    scanf(\"%c\",&amp;a[1]);\n                            // look for test between &gt; and &lt;\n    cSkipdata=1;\n    while ((ch = getc(fPtr)) != EOF)                     /* read character */\n    {\n\n           if(ch == '&lt;')\n              cSkipdata=1;\n\n           if(!cSkipdata &amp;&amp; ch != ' ')\n           {\n\n            putchar(ch);\n             // fputc(ch ,stdout);\n            fputc(ch, fPparse);\n           }\n                                 /* write character */\n    if(ch == '&gt;')\n\n          cSkipdata=0;\n   }\n\n\n\n\n\n  fclose(fPtr);\n  fclose(fPparse);\n\n  }\n\n  else\n\n  {\n\n    printf(\"file can not open\\n\");\n\n  }\n\n    fPin = fopen(\"barcode.txt\", \"r\");                 /* Open DPL file*/\n    fPout = fopen(\"final.txt\", \"w\");                  /* Open the output final to save changea*/\n    fPparse = fopen(\"parse.txt\",\"r\");\n\n    scanf(\"%c\",&amp;a[1]);\n    printf(\"\\n\\nfinal.txt is \\n\");\n       cSkipdata = 0;\n  while((ch = getc(fPin)) != EOF)\n  {\n\n\n        if(ch == '[')                                                   /* Skip the data if condition is true*/\n\n        {\n\n\n              int iLine=0;\n             cSkipdata = 1;\n\n        while ( (ch = getc(fPparse)) != EOF)            //f read a character\n        {\n                                  //if newline and we have output data break\n             if((ch=='\\n')  &amp;&amp; (iLine&gt;0) )\n\n            break;                                       // end of line\n                                //if not space output character\n\n                if(ch &gt; ' ')\n                {\n                                  // valid character output\n                   iLine++;\n                   putchar(ch);\n                   fputc(ch, fPout);\n\n                 }\n           }\n\n        }\n\n\n\n        if(cSkipdata)\n        {\n\n         if(ch == ']')\n\n            cSkipdata = 0;\n\n\n\n        }\n\n\n        else\n        {\n\n            putchar(ch);\n            fputc(ch ,fPout);\n\n\n\n        }\n\n\n  }\n\n           fclose(fPin);\n           fclose(fPout);\n           fclose(fPparse);\n\n\n\n\n\n\n\ngetch();\n}\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "c", "xcode", "simulator"], "comments": [{"owner": {"reputation": 1682, "user_id": 4405051, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-GQlLg2oSQQQ/AAAAAAAAAAI/AAAAAAAABQM/DNzSB7MCqPs/photo.jpg?sz=128", "display_name": "kientux", "link": "https://stackoverflow.com/users/4405051/kientux"}, "edited": false, "score": 0, "creation_date": 1437013279, "post_id": 31423496, "comment_id": 50857641, "body": "After searching for hours, finally I found the solution: Apple replaces gcc with clang in their toolchain and adds in a &quot;-triple&quot; option that specifies OSX as the target. If we add <code>miphoneos-version-min=8.0</code> (or whatever version you want) to both <code>CFLAGS</code> and <code>CXXFLAGS</code>, then it&#39;ll know the target is iOS and let we compile. Make sure to use <code>iPhoneSimulator.platform</code> in <code>-isysroot</code>."}, {"owner": {"reputation": 2721, "user_id": 483802, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/14bfdfd16c802913ae2cb17894335412?s=128&d=identicon&r=PG", "display_name": "sahara108", "link": "https://stackoverflow.com/users/483802/sahara108"}, "edited": false, "score": 1, "creation_date": 1437013411, "post_id": 31423496, "comment_id": 50857672, "body": "you should add it as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 1682, "user_id": 4405051, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-GQlLg2oSQQQ/AAAAAAAAAAI/AAAAAAAABQM/DNzSB7MCqPs/photo.jpg?sz=128", "display_name": "kientux", "link": "https://stackoverflow.com/users/4405051/kientux"}, "edited": false, "score": 1, "creation_date": 1437012783, "post_id": 31423811, "comment_id": 50857499, "body": "Thanks for answer but unfortunately it didn&#39;t help. But your answer actually leads me to the right solution :)"}], "tags": [], "owner": {"reputation": 2721, "user_id": 483802, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/14bfdfd16c802913ae2cb17894335412?s=128&d=identicon&r=PG", "display_name": "sahara108", "link": "https://stackoverflow.com/users/483802/sahara108"}, "is_accepted": false, "score": 0, "last_activity_date": 1436944561, "creation_date": 1436944561, "answer_id": 31423811, "question_id": 31423496, "link": "https://stackoverflow.com/questions/31423496/compile-c-library-with-arch-i386-for-iphone-simulator/31423811#31423811", "title": "Compile C library with arch i386 for iPhone simulator?", "body": "<p>Try to force the compiler to gcc. Hope that help. </p>\n\n<pre><code>CC=\"/usr/bin/clang\" \\\nCXX=\"/usr/bin/clang++\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1682, "user_id": 4405051, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-GQlLg2oSQQQ/AAAAAAAAAAI/AAAAAAAABQM/DNzSB7MCqPs/photo.jpg?sz=128", "display_name": "kientux", "link": "https://stackoverflow.com/users/4405051/kientux"}, "is_accepted": true, "score": 1, "last_activity_date": 1440406123, "last_edit_date": 1440406123, "creation_date": 1437013649, "answer_id": 31444409, "question_id": 31423496, "link": "https://stackoverflow.com/questions/31423496/compile-c-library-with-arch-i386-for-iphone-simulator/31444409#31444409", "title": "Compile C library with arch i386 for iPhone simulator?", "body": "<p>After searching for hours, finally I found the solution: Apple replaces gcc with clang in their toolchain and adds in a \"-triple\" option that specifies OSX as the target. If we add <code>-miphoneos-version-min=8.0</code> (or whatever version you want) to both <code>CFLAGS</code> and <code>CXXFLAGS</code>, then it'll know the target is iOS and let we compile. Make sure to use <code>iPhoneSimulator.platform</code> in <code>-isysroot</code>.</p>\n"}], "owner": {"reputation": 1682, "user_id": 4405051, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-GQlLg2oSQQQ/AAAAAAAAAAI/AAAAAAAABQM/DNzSB7MCqPs/photo.jpg?sz=128", "display_name": "kientux", "link": "https://stackoverflow.com/users/4405051/kientux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "accepted_answer_id": 31444409, "answer_count": 2, "score": 0, "last_activity_date": 1440406123, "creation_date": 1436943541, "question_id": 31423496, "link": "https://stackoverflow.com/questions/31423496/compile-c-library-with-arch-i386-for-iphone-simulator", "title": "Compile C library with arch i386 for iPhone simulator?", "body": "<p>I'm making a C library for Xcode project, and successfully compiled with <code>-arch armv7</code>, it can be used on iPhone device. Here's the command I used:</p>\n\n<pre><code>./configure \\\n--host=arm-apple-darwin \\\nCFLAGS=\"-arch armv7 \\\n-isysroot /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS9.0.sdk\" \\\nCXXFLAGS=\"-arch armv7 \\\n-isysroot /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS9.0.sdk\" \\\nLDFLAGS=\"-L.\" \\\nCC=\"/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc\" \\\nCXX=\"/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\"\n</code></pre>\n\n<p>then <code>make</code>.</p>\n\n<p>I did the same to compile <code>armv7s</code> and <code>arm64</code> architecture. With <code>-arch i386</code>, I can't use <code>-isysroot</code> with <code>iPhoneOS.platform</code> anymore, I guess because iPhoneOS does not support i386, so I changed to <code>iPhoneSimulator.platform</code>:</p>\n\n<pre><code>./configure \\\n--host=arm-apple-darwin \\\nCFLAGS=\"-arch armv7 \\\n-isysroot /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk\" \\\nCXXFLAGS=\"-arch armv7 \\\n-isysroot /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk\" \\\nLDFLAGS=\"-L.\" \\\nCC=\"/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc\" \\\nCXX=\"/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\"\n</code></pre>\n\n<p>But it still does not work. There is the same error when I try to compile i386 with iPhoneOS.platform:</p>\n\n<pre><code>checking whether the C compiler works... no\nconfigure: error: C compiler cannot create executables\n</code></pre>\n\n<p>It seems that iPhoneSimulator doesn't support i386 too?! When I use armv7 lib for iPhone simulator, it said that missing symbol for i386 architecture, so I'm pretty sure iPhone simulator supports i386.</p>\n\n<p>Anyone know how to compile the lib for simulator? Or is there an easier way, importing source code (like <a href=\"https://github.com/jedisct1/libsodium\" rel=\"nofollow\">this repo</a>) to Xcode then let it build a universal library for all architectures? From now I must build every lib for every arch then combine them using <code>lipo</code>.</p>\n"}, {"tags": ["c", "runtime-error"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "edited": false, "score": 0, "creation_date": 1436943500, "post_id": 31423358, "comment_id": 50818541, "body": "what to do. i want <b>strcat(unzip,&quot; &quot;);</b> to be there in the program because i want to add space in between unzip string and the path"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "edited": false, "score": 0, "creation_date": 1436943559, "post_id": 31423358, "comment_id": 50818579, "body": "@PrajwalBhat I already told that no? <i>&quot;Define a destination array bigger enough&quot;</i>, something like <code>char unzip[512]</code> or bigger..."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1436943741, "last_edit_date": 1436943741, "creation_date": 1436943091, "answer_id": 31423358, "question_id": 31423333, "link": "https://stackoverflow.com/questions/31423333/getting-error-stack-around-the-variable-was-corrupted/31423358#31423358", "title": "Getting error: Stack around the variable was corrupted", "body": "<p>The problem here is (are)</p>\n\n<pre><code>strcat(unzip,\" \");   //problem starts here itself\nstrcat(unzip,fmuFileName);\nstrcat(unzip,\" \");\nstrcat(unzip,path);\n</code></pre>\n\n<p>as, there is not enough memory to hold the concatenated string. Essentially, you're overrunning the allocated memory and it invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>When you define an array with no size specified and initialize that with a string, the effective size of the array gets calculated as the length of the string, plus one more for the null-terminator. Trying to \"cat\" to that is memory overrrun.</p>\n\n<p>From the <a href=\"http://linux.die.net/man/3/strcat\" rel=\"nofollow\">man page</a> of <code>strcat()</code> (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>The <code>strcat()</code> function appends the <code>src</code> string to the <code>dest</code> string, overwriting the terminating null byte (<code>'\\0'</code>) at the end of <code>dest</code>, and then adds a terminating null byte. The strings may not overlap, and the <code>dest</code> string must have enough space for the result. <strong>If <code>dest</code> is not large enough, program behavior is unpredictable;</strong> ....</p>\n</blockquote>\n\n<p><strong>Solution:</strong> </p>\n\n<p>Define a destination  array bigger enough to hold the concatenated string, including the terminating null, of course.</p>\n\n<hr>\n\n<p>That said, <code>gets()</code> is <b><del>pure evil</del></b> very dangerous , as it suffers from buffer overrun issues. You may want to use <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\"><code>fgets()</code></a> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "edited": false, "score": 0, "creation_date": 1436943807, "post_id": 31423397, "comment_id": 50818721, "body": "showing error in  malloc eventhough i have used stdlib.h"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1436943230, "creation_date": 1436943230, "answer_id": 31423397, "question_id": 31423333, "link": "https://stackoverflow.com/questions/31423333/getting-error-stack-around-the-variable-was-corrupted/31423397#31423397", "title": "Getting error: Stack around the variable was corrupted", "body": "<p>In your case <code>unzip[]=\"winzip32 -e -o -j\";</code> has space only for your init string, 17 chars + null terminator.\nThen your variable has no room to add chars with instructions:</p>\n\n<pre><code>strcat(unzip,\" \");\nstrcat(unzip,fmuFileName);\nstrcat(unzip,\" \");\nstrcat(unzip,path);\n</code></pre>\n\n<p>You could change to:</p>\n\n<pre><code>void fmuUnzip()\n{\n   char fmuFileName[100], path[100],strFinal[100];\n   printf(\"Enter fmuFileName\\n\");\n   gets(fmuFileName);\n\n   printf(\"Enter path of the fmuFileName\\n\");\n   gets(path);\n   char *unzip = malloc(17+1+strlen(fmuFileName)+strlen(path)+1);\n   strcpy(unzip, \"winzip32 -e -o -j\");\n   strcat(unzip,\" \");\n   strcat(unzip,fmuFileName);\n   strcat(unzip,\" \");\n   strcat(unzip,path);\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5109485, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f03e815695f187e43b46757a0cec90f?s=128&d=identicon&r=PG&f=1", "display_name": "PrajwalBhat", "link": "https://stackoverflow.com/users/5109485/prajwalbhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 0, "accepted_answer_id": 31423358, "answer_count": 2, "score": 0, "last_activity_date": 1436943880, "creation_date": 1436942995, "last_edit_date": 1436943880, "question_id": 31423333, "link": "https://stackoverflow.com/questions/31423333/getting-error-stack-around-the-variable-was-corrupted", "title": "Getting error: Stack around the variable was corrupted", "body": "<p>Running the following program but getting error as </p>\n\n<blockquote>\n  <p>Run-Time Check Failure #2 - Stack around the variable 'unzip' was corrupted</p>\n</blockquote>\n\n<p>What can cause the error? Below is my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid fmuUnzip() {\n  char fmuFileName[100], path[100],strFinal[100];\n  char unzip[]=\"winzip32 -e -o -j\";\n  printf(\"Enter fmuFileName\\n\");\n  gets(fmuFileName);\n\n  printf(\"Enter path of the fmuFileName\\n\");\n  gets(path);\n  strcat(unzip,\" \");\n  strcat(unzip,fmuFileName);\n  strcat(unzip,\" \");\n  strcat(unzip,path);\n}\n\nvoid fmuLoad() {\n  fmuUnzip();\n}\n\nint main(int argc,char* argv[]) {\n fmuLoad();\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 3132, "user_id": 4385647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/V3X9c.png?s=128&g=1", "display_name": "Dirk Horsten", "link": "https://stackoverflow.com/users/4385647/dirk-horsten"}, "edited": false, "score": 1, "creation_date": 1436940690, "post_id": 31422645, "comment_id": 50817092, "body": "Please add a tag for the language (probably C or C++)"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 0, "creation_date": 1436999207, "post_id": 31422704, "comment_id": 50853636, "body": "So then in sort(a), is it right that whenever I wanto change in array, I just need to do like *a[0] = 5; ? I somehow get the idea after reading your explanation"}, {"owner": {"reputation": 69, "user_id": 4998084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d2eed195d677751d8425e642d3f076?s=128&d=identicon&r=PG&f=1", "display_name": "normal", "link": "https://stackoverflow.com/users/4998084/normal"}, "reply_to_user": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 1, "creation_date": 1437059068, "post_id": 31422704, "comment_id": 50882705, "body": "You need not use *a[0], <code>a</code> is a pointer, no point dereferencing it twice! Any changes you make to <code>a[0]</code>, <code>a[1]</code> will be reflected, but if u do <code>a = new int[10]</code> inside your sort function, that wont be reflected in your <code>main</code>"}], "tags": [], "owner": {"reputation": 69, "user_id": 4998084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d2eed195d677751d8425e642d3f076?s=128&d=identicon&r=PG&f=1", "display_name": "normal", "link": "https://stackoverflow.com/users/4998084/normal"}, "is_accepted": false, "score": 4, "last_activity_date": 1436940686, "creation_date": 1436940686, "answer_id": 31422704, "question_id": 31422645, "link": "https://stackoverflow.com/questions/31422645/use-pointer-to-change-an-array-when-passing-it-into-a-method/31422704#31422704", "title": "Use pointer to change an array when passing it into a method", "body": "<p>Change your function to just this :: <code>void sort(int *a)</code> or this :: <code>void sort(int a[])</code></p>\n\n<p>And when you call <code>sort</code> from the main, you need not call <code>sort(&amp;a)</code>, <code>a</code> is an array pointer itself, calling <code>sort(a)</code> will do it!</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 0, "creation_date": 1436999537, "post_id": 31422715, "comment_id": 50853779, "body": "Thank for reminding me about sizeof(...)  I just wonder whether the array will change after implementing sort(). Or you mean I need to have an array of pointer with addresses of values in array?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 0, "creation_date": 1436999760, "post_id": 31422715, "comment_id": 50853854, "body": "I don&#39;t get your question. Can you point to the sentence in the answer that you are referring to?"}, {"owner": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 0, "creation_date": 1437000173, "post_id": 31422715, "comment_id": 50853997, "body": "Cause in your answer, I don&#39;t see anything dealing with pointers, so I thought you suggest me to declare pointers inside sort(...) Sorry for unclarified question. Hope you can explain for me"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 1, "creation_date": 1437000394, "post_id": 31422715, "comment_id": 50854066, "body": "In function definition, you only have a pointer. <code>void sort(int a[]) {}</code> and <code>void sort(int *a) {}</code> are exactly the same. Even though, there&#39;s an array notation [], it&#39;s just a pointer."}, {"owner": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 0, "creation_date": 1437002601, "post_id": 31422715, "comment_id": 50854816, "body": "I did try what you showed me and then it works. However, I am more confused because I can not explain why it does.  Why do some people using like doSomething(int *a[]) to change array while we can do like you? And if void sort(int a[]) {} and void sort(int *a) {} like you said, in a function, how can I know which is needed to pass a pointer inside, suppose I have sort( int a, int b, int c). Or it just happens when only one parameter"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 3, "last_activity_date": 1436940755, "creation_date": 1436940755, "answer_id": 31422715, "question_id": 31422645, "link": "https://stackoverflow.com/questions/31422645/use-pointer-to-change-an-array-when-passing-it-into-a-method/31422715#31422715", "title": "Use pointer to change an array when passing it into a method", "body": "<p>Both your passing and using of array are not correct. An array name gets converted into a pointer to its first element. So passing the name is sufficient to modify it, not a pointer to array (You can pass a pointer to array too -- but has to used accordingly in the function and is usually not needed to modify elements of an array).</p>\n\n<p>Call it:</p>\n\n<pre><code>sort(a);\n</code></pre>\n\n<p>and use it:</p>\n\n<pre><code>void sort(int a[]) {\n    int key = a[1]; \n    ...\n}\n</code></pre>\n\n<p>In <code>sort()</code>, you can use it with the usual array notation. </p>\n\n<p>One thing to note is that you can't get the size of the array in <code>sort()</code> using <code>sizeof</code> operator as all the size information is lost in <code>sort()</code> and all you have is a pointer. So you have to pass the array size as an additional argument.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 0, "creation_date": 1436999828, "post_id": 31422725, "comment_id": 50853879, "body": "At first, I thought when I call  Sort(&amp;a) then  my parameter *a[] would be the address, so basically I was just trying to interact on address to change array simultaneously. Am I right with that way of thinking?"}, {"owner": {"reputation": 240, "user_id": 5107247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Af0K1.jpg?s=128&g=1", "display_name": "Josh Vazquez", "link": "https://stackoverflow.com/users/5107247/josh-vazquez"}, "reply_to_user": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 1, "creation_date": 1437003380, "post_id": 31422725, "comment_id": 50855097, "body": "*a[] does match up with passing &amp;a but this creates complications. The problem occurs when you try to access the second element as *a[1]. The square brackets are evaluated first and index into an array of pointers (which you haven&#39;t created and didn&#39;t want). The * then deferences this to get the first element in that bogus array. This is probably outside the memory space of your actual array and causes the bug. It might work if you do (*a)[1], but don&#39;t do this. It&#39;s needlessly complex and hard to read, write, and debug. Use sort(a), void sort(int a[]), and int key = a[1]."}, {"owner": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "edited": false, "score": 0, "creation_date": 1437003760, "post_id": 31422725, "comment_id": 50855223, "body": "Thank you so much!!! With your, the others&#39; comments and searching on Google, I found that array works the same way with pointer so basically, just passing array is pointer already.  I don&#39;t know it before so I keep declaring global variable. Same thing to JAVA"}], "tags": [], "owner": {"reputation": 240, "user_id": 5107247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Af0K1.jpg?s=128&g=1", "display_name": "Josh Vazquez", "link": "https://stackoverflow.com/users/5107247/josh-vazquez"}, "is_accepted": true, "score": 2, "last_activity_date": 1436940801, "creation_date": 1436940801, "answer_id": 31422725, "question_id": 31422645, "link": "https://stackoverflow.com/questions/31422645/use-pointer-to-change-an-array-when-passing-it-into-a-method/31422725#31422725", "title": "Use pointer to change an array when passing it into a method", "body": "<p>Using the square bracket notation <em>with an index</em> deferences the pointer (put simply, gives you the variable rather than the address), so you shouldn't have an asterisk there. The following are equivalent (but only for 0!):</p>\n\n<pre><code>*a\na[0]\n</code></pre>\n\n<p>If you are in fact trying to use the value of the second element (index 1) in <em>key</em>, then you should use:</p>\n\n<pre><code>int key = a[1];\n</code></pre>\n\n<p>Additionally, since <em>a</em> is an address, <em>&amp;a</em> is not useful to you and you should be calling the sort function with only <em>a</em>.</p>\n"}], "owner": {"reputation": 53, "user_id": 5032012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a486fdc6adce1d1850421174dd8b1e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Fantastic Sky", "link": "https://stackoverflow.com/users/5032012/fantastic-sky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 1, "accepted_answer_id": 31422725, "answer_count": 3, "score": 2, "last_activity_date": 1437000667, "creation_date": 1436940451, "last_edit_date": 1437000667, "question_id": 31422645, "link": "https://stackoverflow.com/questions/31422645/use-pointer-to-change-an-array-when-passing-it-into-a-method", "title": "Use pointer to change an array when passing it into a method", "body": "<p>Suppose I am writing a sorting-array method. At the time I did not know pointer, I usually defined array as global so that it automatically change.\nNow I try to use it but it fails, basically it ends up with</p>\n\n<pre><code>int a[5];\nsort(&amp;a);     // Calling sort\n...\n// My method\nvoid sort(int *a[]) {\n    int key = *a[1]; // I've got a bug right here\n    ...\n}\n</code></pre>\n\n<p>I am still unfamiliar with using pointers. Moreover I can not use reference, either. Please suggest me some ways to do that.\nThank you so much.</p>\n"}, {"tags": ["c", "arrays", "struct", "simd", "cpu-cache"], "comments": [{"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "edited": false, "score": 2, "creation_date": 1436943986, "post_id": 31422631, "comment_id": 50818837, "body": "Sorry, maybe I am misinterpreting the whole problem, but it seems to me that you are using vc3 an v incorrectly: indeed, the function vec3_c allocates a local (uninitialized) &quot;v&quot;, then sets SOME fields and returns a COPY OF v (whose fields contain unpredictable values, except for the &quot;index&quot; one). I see that in your example you are not actually interested on the content of  vc3, so what is the purpose of function vec3_c?"}, {"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "reply_to_user": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "edited": false, "score": 0, "creation_date": 1436977798, "post_id": 31422631, "comment_id": 50841917, "body": "@GiuseppeGuerrini my initial code sample had a few bugs that I sorted out over time. I would use this structure to batch process vec3 values something in like a stream processing or SIMD type instructions."}], "answers": [{"comments": [{"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1436948660, "post_id": 31423721, "comment_id": 50821698, "body": "the data will most likely be passed to me in the form of struct A but to process it more efficiently in my algorithms i&#39;ll have to transform from A to B once and store B to process them in batches. I made reference to that in the original question asking about the transformation cost once upfront vs the batching for cache coherence and SIMD style processing."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1436963162, "post_id": 31423721, "comment_id": 50830962, "body": "Actually, if you need to run through all the points in sequence, a struct-of-arrays is MUCH better for SIMD.  The <code>x^2 + y^2 &lt; z^2</code> example is a good case:  with SoA, you load a vector of <code>x</code>s, a vector of <code>y</code>s, and a vector of <code>z</code>s.  Square each, then add the x vector to the y vector.  Then <code>PCMPGT</code> the sum with the <code>z^2</code>, then <code>movmsk</code> or <code>ptest</code>.  With AoS, you have these oddly-packed sequences of x,y,z,x2 or w/e in your vectors, and it&#39;s horrible.  Hardware prefetchers can handle many streams in parallel."}, {"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1436967951, "post_id": 31423721, "comment_id": 50834760, "body": "thank you that&#39;s the direction that I am heading towards to to do SIMD type batch processing of the data. I&#39;ll first have to rotate them from AoS to SoA."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1436968665, "post_id": 31423721, "comment_id": 50835342, "body": "Be careful with just looping over a larger-than-cache buffer when doing the conversion.  The extra memory traffic will be bad.  Instead, work in smaller batches (convert maybe 64kiB of points if needed, then feed that to your vector routine).  This is called cache-blocking or tiling."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1436968857, "post_id": 31423721, "comment_id": 50835497, "body": "If your first comment was accurate, that you&#39;ll get the data passed in in <code>struct A</code> form, then you should leave them that way, and write any non-vector routines to access them in that format.  OTOH, if your earlier question, with crazy struct-of-pointers-to-single-elements is accurate, then yeah you need to convert."}], "tags": [], "owner": {"reputation": 3121, "user_id": 855026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205e72554f6118709a5c4845a880938d?s=128&d=identicon&r=PG", "display_name": "Brian L", "link": "https://stackoverflow.com/users/855026/brian-l"}, "is_accepted": true, "score": 3, "last_activity_date": 1439727588, "last_edit_date": 1439727588, "creation_date": 1436944291, "answer_id": 31423721, "question_id": 31422631, "link": "https://stackoverflow.com/questions/31422631/struct-of-arrays-and-memory-access-patterns/31423721#31423721", "title": "struct of arrays and memory access patterns", "body": "<p>If you are going to have <em>lots</em> of these xyz points and you want to be able to perform an action on all the x's at once, then it makes more sense to put all the x's together:</p>\n\n<pre><code>struct PointBatch {\n    size_t x[batchsize];\n    size_t y[batchsize];\n    size_t z[batchsize];\n}\n\n// More efficient for things like\n// - find the point with the largest X\n// - find the sum of all the points as [xsum, ysum, zsum]\n</code></pre>\n\n<p>If you normally operate on the x, y, and z of single data points, then it makes more sense to put each point together as a struct.</p>\n\n<pre><code>struct Point {\n    size_t x;\n    size_t y;\n    size_t z;\n}\n\nstruct Point pointBatch[batchsize];\n\n// Better for things like\n// - plot all the points on a graph\n// - determine which points satisfy the equation: x^2 + y^2 &lt; z^2\n</code></pre>\n\n<p><strong>N.B.</strong><br/>\nNote that where performance is <em>not</em> an issue, you will probably find that the <code>Point</code>/<code>pointBatch</code> approach makes your code easier to write and more readable as <code>struct PointBatch</code> gives you no convenient way to refer to or pass around a single point.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1436962819, "post_id": 31425787, "comment_id": 50830727, "body": "It&#39;s actually the caller that allocates space for the return value.  In the x86 and amd64 ABIs, the caller passes a pointer to this space.  (And the callee would have to run the constructor, if it wasn&#39;t already the constructor, so yeah, it would have to zero the parts it didn&#39;t write.  Or would it?  That code doesn&#39;t use an initializer that would require the untouched elements to be zeroed.  The returned <code>vec3_c</code> is uninitialized except for <code>v.*[index]</code>)  If you&#39;re lucky, the compiler could eliminate most of this after inlining that constructor."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1436963790, "post_id": 31425787, "comment_id": 50831407, "body": "@PeterCordes : of course you are true ! It is C and not C++ ... And it is explicit in 6.7.9 10 : <i>If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate</i>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1436964051, "post_id": 31425787, "comment_id": 50831612, "body": "Even if it was c++, with no zero-arg constructor, wouldn&#39;t it still be uninitialized?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1436964696, "post_id": 31425787, "comment_id": 50832129, "body": "@PeterCordes : In C++ I always use non default ctors to be sure that data is properly initialized. But the default ctor would not initialize anything either :-)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1436965316, "post_id": 31425787, "comment_id": 50832604, "body": "Oh yeah, that&#39;s right, C++ won&#39;t let you instantiate something without args to the constructor if there IS no default constructor (and there&#39;s at least one non-default constructor).  Like what would happen if you compiled this code as C++."}, {"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1436968201, "post_id": 31425787, "comment_id": 50834962, "body": "you guys are actually right and I was doing too much in my initializer function. I will update the question with the new constructor which just malloc&#39;s a pointer to vec3 and returns it. Then I can fill in the data at a later point in the code. One thing that I noticed is that batch_size needs to be const but if I set batch_size greater than 1&lt;&lt;18 on my machine I get a Segmentation fault: 11, 1&lt;&lt;18 and lower and everything seems to be fine."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1436963595, "last_edit_date": 1436963595, "creation_date": 1436950546, "answer_id": 31425787, "question_id": 31422631, "link": "https://stackoverflow.com/questions/31422631/struct-of-arrays-and-memory-access-patterns/31425787#31425787", "title": "struct of arrays and memory access patterns", "body": "<p>There is at least one problem with this part of your code :</p>\n\n<pre><code>struct vec3_c vec3_c(size_t x, size_t y, size_t z, size_t index)\n{\n    struct vec3_c v;\n    v.x[index] = x;\n    v.y[index] = y;\n    v.z[index] = z;\n    return v;\n}\n</code></pre>\n\n<p>You create a new <code>vec3_v</code> struct on the stack and return it. That means that each call will return a new struct with all elements uninitialized except <code>index</code> row.</p>\n\n<p>And later when you do (100 times) <code>vc3 = vec3_c(i+1, i*i, i*10, i);</code>, you copy 300 values (size of the struct), 297 of which are not initialized : that's really unefficient and invokes Undefined Behaviour !</p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 1, "accepted_answer_id": 31423721, "answer_count": 2, "score": 5, "last_activity_date": 1439727588, "creation_date": 1436940398, "last_edit_date": 1495541742, "question_id": 31422631, "link": "https://stackoverflow.com/questions/31422631/struct-of-arrays-and-memory-access-patterns", "title": "struct of arrays and memory access patterns", "body": "<p>This is sort of a follow up to this original question with some new information added. See here for the first part if you're interested: <a href=\"https://stackoverflow.com/questions/31421171/struct-of-arrays-arrays-of-structs-and-memory-usage-pattern\">Struct of arrays, arrays of structs and memory usage pattern</a></p>\n\n<p>It seems that there are quite a few problems with my first attempt at setting up struct of arrays for a simple class. Mainly being excess memory allocation for pointers and possible memory leaks from allocating those pointers from vec3_b in the previous question.</p>\n\n<p>I though about how I could rearrange the data w/o using pointers, this requires me to first setup some const variable for the size of my data buckets, so no unbounded values like pointers but also reduces the amount of memory to something fixed.</p>\n\n<pre><code>    const size_t batch_size = 100;\n    struct vec3_c\n    {\n    size_t x[batch_size];\n    size_t y[batch_size];\n    size_t z[batch_size];\n    };\n\n    struct vec3_c vec3_c(size_t x, size_t y, size_t z, size_t index)\n    {\n        struct vec3_c v;\n        v.x[index] = x;\n        v.y[index] = y;\n        v.z[index] = z;\n        return v;\n    }\n\n        struct vec3_c vc3;        \n        for(int i = 0; i &lt; batch_size; i++)\n        {\n            vc3 = vec3_c(i+1, i*i, i*10, i);\n            //printf(\"vec3c x:%zu, y:%zu, z:%zu\\n\",vc3.x[i], vc3.y[i], vc3.z[i]);\n            printf(\"vec3c x:%p, y:%p, z:%p\\n\",(void*)&amp;vc3.x[i], (void*)&amp;vc3.y[i], (void*)&amp;vc3.z[i]);\n        }\n\n      ---------------x-----------------|----------------y-----------------|----------------z-----------------|\n\n0|      0x7fff57489f40 : 140734657765184 | 0x7fff5748a260 : 140734657765984 | 0x7fff5748a580 : 140734657766784\n1|      0x7fff57489f48 : 140734657765192 | 0x7fff5748a268 : 140734657765992 | 0x7fff5748a588 : 140734657766792\n2|      0x7fff57489f50 : 140734657765200 | 0x7fff5748a270 : 140734657766000 | 0x7fff5748a590 : 140734657766800\n</code></pre>\n\n<p>with this updated code I have to have a fixed bucket size so I set it to batch_size of 100 just for simple numbers. Fill up the vec3c with some data and did a similar test, this time it seems that each value is aligned in 8 byte chunks.</p>\n\n<p>ex:</p>\n\n<pre><code>size of vec3      : 24 bytes\nsize of vec3a     : 24 bytes\nsize of vec3b     : 24 bytes\nsize of vec3c     : 2400 bytes\nsize of size_t    : 8 bytes\nsize of int       : 4 bytes\nsize of 16 int    : 64 bytes\nvec3c x:0x7fff592d2f40, y:0x7fff592d3260, z:0x7fff592d3580\nvec3c x:0x7fff592d2f48, y:0x7fff592d3268, z:0x7fff592d3588\nvec3c x:0x7fff592d2f50, y:0x7fff592d3270, z:0x7fff592d3590\nvec3c x:0x7fff592d2f58, y:0x7fff592d3278, z:0x7fff592d3598\nvec3c x:0x7fff592d2f60, y:0x7fff592d3280, z:0x7fff592d35a0\nvec3c x:0x7fff592d2f68, y:0x7fff592d3288, z:0x7fff592d35a8\nvec3c x:0x7fff592d2f70, y:0x7fff592d3290, z:0x7fff592d35b0\nvec3c x:0x7fff592d2f78, y:0x7fff592d3298, z:0x7fff592d35b8\nvec3c x:0x7fff592d2f80, y:0x7fff592d32a0, z:0x7fff592d35c0\nvec3c x:0x7fff592d2f88, y:0x7fff592d32a8, z:0x7fff592d35c8\n</code></pre>\n\n<p>are all separated by 8 bytes.</p>\n\n<p>That should get rid of the issues of memory leaks and the excess memory needed for the pointers.</p>\n\n<p>with this being the new layout something like sizeof(vc3[0].x) would return 8 bytes.</p>\n\n<p>back to the original questions:</p>\n\n<ol>\n<li><p>Is my implementation of <code>struct vec3_c</code> the proper way to setup a struct of array?</p></li>\n<li><p>with a vec_3c batch size of 100 it's showing 2400 bytes large but each individual element is only 8 bytes and properly aligned, so I could actually now fit 8 elements on 1 modern cpu cache line?</p></li>\n<li><p>would transforming data passed to me in say a typical format of just arrays of structures outweigh the performance benefits of being in a cache friendly state and able to operate on multiple data points per instruction call? This is with the caveat that both points 1 and 2 are correct.</p></li>\n</ol>\n\n<p>ex doing the dot product of two vectors:\nthat means I could get the dot product of 2 vec3_c per instruction cycle?</p>\n\n<p><strong>edit</strong>\none more question, would it be better to add the additional 8 bytes of data to make this struct a multiple of 32 bytes and maybe use that additional 8 bytes as scratch space or just leave it empty?</p>\n\n<p><strong>edit</strong>\nIt was pointed out to me that my initial initialization function was just making a mess of things. I updated it to this form:</p>\n\n<pre><code>struct vec3_c* vec3_c()\n{\n    struct vec3_c *v = (struct vec3_c*)malloc(sizeof(struct vec3_c));\n    v-&gt;index = 0;\n    return v;\n}\n\nstruct vec3_c* v3 = vec3_c();\n    for(size_t i = 0; i &lt; batch_size; i++)\n    {\n        v3-&gt;x[i] = i + 1;\n        v3-&gt;y[i] = i * i;\n        v3-&gt;z[i] = i * 10;\n        printf(\"index:%d\\tvec3c x:%zu, y:%zu, z:%zu\\n\",i,v3-&gt;x[i], v3-&gt;y[i], v3-&gt;z[i]);\n        printf(\"index:%zu\\tvec3c x:%p, y:%p, z:%p\\n\",i,(void*)&amp;v3-&gt;x[i], (void*)&amp;v3-&gt;y[i], (void*)&amp;v3-&gt;z[i]);\n    }   \n</code></pre>\n"}]