[{"tags": ["c"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520466917, "post_id": 49163198, "comment_id": 85332034, "body": "Because the function is called <code>ntohl</code> with a single <code>l</code>, not double <code>ll</code>."}, {"owner": {"reputation": 21, "user_id": 6296022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbac57b27027ab319f82d82176ffaa0?s=128&d=identicon&r=PG&f=1", "display_name": "sephora", "link": "https://stackoverflow.com/users/6296022/sephora"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 1, "creation_date": 1520467030, "post_id": 49163198, "comment_id": 85332069, "body": "@Pablo : But this  link says its there <a href=\"https://www.unix.com/man-page/all/3SOCKET/ntohll/\" rel=\"nofollow noreferrer\">unix.com/man-page/all/3SOCKET/ntohll</a>"}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 0, "last_activity_date": 1520467872, "last_edit_date": 1520467872, "creation_date": 1520467543, "answer_id": 49163304, "question_id": 49163198, "link": "https://stackoverflow.com/questions/49163198/ntohll-gets-implicit-declaration-of-function-error-even-if-header-files-are-in/49163304#49163304", "title": "ntohll gets &quot;implicit declaration of function&quot; error even if header files are included", "body": "<p><code>ntohll</code> is not a standard function AFAICT. It exists on modern Solaris UNIX (as your link in the comments mentions), and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/jj710202(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Windows provides it</a> (from the WinSock2.h header), but it's not part of any common standard (e.g. POSIX) and not found on many (most/all?) \"UNIX-like\"  systems, e.g Linux and the BSDs.</p>\n\n<p>Many of the systems that lack it do provide <a href=\"https://linux.die.net/man/3/be64toh\" rel=\"nofollow noreferrer\"><code>be64toh</code></a> instead with identical meaning (though the headers it comes from aren't consistent, varying even within the BSD community); they're just saying \"be\" to mean big-endian explicitly and 64 to make the bit size explicit, as opposed to \"n\" for \"network\" which assumes all network protocols are big endian (Windows protocols often aren't, not sure on others), and <code>ll</code> which is a less clear way of spelling out that it works on 64 bit values.</p>\n\n<p>If you need portable code, <a href=\"https://stackoverflow.com/a/4410728/364696\">you'll need to do a bunch of OS detection</a> to determine which headers to include, and use macros (or inline functions or the like) to provide a common name for the functionality based on whatever your OS actually provides.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1520496115, "post_id": 49165580, "comment_id": 85341294, "body": "Presumably <code>tmp</code> is a <code>char *</code>"}], "tags": [], "owner": {"reputation": 1463, "user_id": 2299087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWtlB.jpg?s=128&g=1", "display_name": "James McPherson", "link": "https://stackoverflow.com/users/2299087/james-mcpherson"}, "is_accepted": false, "score": 0, "last_activity_date": 1520484288, "creation_date": 1520484288, "answer_id": 49165580, "question_id": 49163198, "link": "https://stackoverflow.com/questions/49163198/ntohll-gets-implicit-declaration-of-function-error-even-if-header-files-are-in/49165580#49165580", "title": "ntohll gets &quot;implicit declaration of function&quot; error even if header files are included", "body": "<p>Your code snippet implicitly declares a different prototype for the <code>ntohll</code> function, which is what gcc is complaining about.</p>\n\n<p>Your code uses: </p>\n\n<pre><code>ntohll(*(uint64_t *)tmp)\n</code></pre>\n\n<p>However, the prototype in the header file is:</p>\n\n<pre><code>uint64_t htonll(uint64_t hostlonglong);\n</code></pre>\n\n<p>Note the lack of <code>**</code>, let alone <code>*(uint64_t *)</code>.</p>\n\n<p>If you remove the cast from your invocation of the function (assuming you're not doing anything crazy with the variable <code>tmp</code>) then I'd expect it to work.</p>\n"}, {"tags": [], "owner": {"reputation": 678, "user_id": 8400707, "user_type": "registered", "profile_image": "https://graph.facebook.com/1603106016403126/picture?type=large", "display_name": "Junhee Shin", "link": "https://stackoverflow.com/users/8400707/junhee-shin"}, "is_accepted": false, "score": 1, "last_activity_date": 1520493787, "creation_date": 1520493787, "answer_id": 49167531, "question_id": 49163198, "link": "https://stackoverflow.com/questions/49163198/ntohll-gets-implicit-declaration-of-function-error-even-if-header-files-are-in/49167531#49167531", "title": "ntohll gets &quot;implicit declaration of function&quot; error even if header files are included", "body": "<p>The system may not support htonll, ntohll. \nImplement the functions by macro.\nYou need to check the byte order macro. \nIf you don't know this system's byte ordering, use is_big_endian() function below.</p>\n\n<p>I tested this code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;inttypes.h&gt;\n\n#if __BIG_ENDIAN__\n    #define htonll(x)   (x)\n    #define ntohll(x)   (x)\n#else\n    #define htonll(x)   ((((uint64_t)htonl(x&amp;0xFFFFFFFF)) &lt;&lt; 32) + htonl(x &gt;&gt; 32))\n    #define ntohll(x)   ((((uint64_t)ntohl(x&amp;0xFFFFFFFF)) &lt;&lt; 32) + ntohl(x &gt;&gt; 32))\n#endif\n\nvoid dump_bin(unsigned char *p, int len) {\n    int i=0; \n    for (i=0; i&lt;len; i++) {\n        printf(\"%02x \", p[i]) ;\n    }\n    printf(\"\\n\");\n}\n\nint is_big_endian() {\n    union {\n        int i ;\n        char c[4] ;\n    } v = { 0x00000001 } ;\n    return v.c[3]==1 ;\n}\n\nint main() {\n\n    #if __BIG_ENDIAN__\n        printf(\"macro: big_endian.\\n\") ;\n    #else\n        printf(\"macro: little_endian.\\n\") ;\n    #endif\n\n    printf(\"System is big endian? : %d\\n\", is_big_endian());\n\n    long long ll=123456789012345678L;\n    long long ll2=0;\n\n    printf(\"long long value=%lld\\n\", ll) ;\n    dump_bin((unsigned char*)&amp;ll, sizeof(ll)) ;\n\n    ll2=htonll(ll) ;\n    printf(\"htonll=%lld\\n\", ll2) ;\n    dump_bin((unsigned char*)&amp;ll2, sizeof(ll2)) ;\n\n    return 0 ;\n}\n</code></pre>\n\n<p>The output is here.</p>\n\n<pre><code>macro: little_endian.\nSystem is big endian? : 0\nlong long value=123456789012345678\n4e f3 30 a6 4b 9b b6 01 \nhtonll=5688944245090268673\n01 b6 9b 4b a6 30 f3 4e \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6296022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbac57b27027ab319f82d82176ffaa0?s=128&d=identicon&r=PG&f=1", "display_name": "sephora", "link": "https://stackoverflow.com/users/6296022/sephora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1520493787, "creation_date": 1520466823, "question_id": 49163198, "link": "https://stackoverflow.com/questions/49163198/ntohll-gets-implicit-declaration-of-function-error-even-if-header-files-are-in", "title": "ntohll gets &quot;implicit declaration of function&quot; error even if header files are included", "body": "<p>I have included these header files, even then too, I am getting this error</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;inttypes.h&gt;\n\n\nerror: implicit declaration of function \u2018ntohll\u2019 [-Werror=implicit-function-declaration]\n            uint64_t bits = ntohll(*(uint64_t *)tmp);\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "debugging", "gdb"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1520469426, "post_id": 49163052, "comment_id": 85332699, "body": "<i>&quot;exec file is newer than core file.&quot;</i> That&#39;s a big red flag. Why/how is your executable newer than the coredump?"}, {"owner": {"reputation": 179, "user_id": 4476202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7ae7b8ae01ad5052cbdfaf16c895f88?s=128&d=identicon&r=PG&f=1", "display_name": "adowdy", "link": "https://stackoverflow.com/users/4476202/adowdy"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520473965, "post_id": 49163052, "comment_id": 85333838, "body": "That&#39;s a keen observation. It says that because I recopied the application over to the target device, but the application was not changed in any way (so far as I know). It should be the same file with which the core was generated bit by bit"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520505935, "post_id": 49163052, "comment_id": 85347357, "body": "Okay good stuff. (Usually a copy would keep the original timestamp, but this depends on your copying software.)"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 4476202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7ae7b8ae01ad5052cbdfaf16c895f88?s=128&d=identicon&r=PG&f=1", "display_name": "adowdy", "link": "https://stackoverflow.com/users/4476202/adowdy"}, "edited": false, "score": 0, "creation_date": 1520481325, "post_id": 49164532, "comment_id": 85335592, "body": "Thank you, I will review tomorrow and see if i can solve these gdb warnings in some way"}], "tags": [], "owner": {"reputation": 266, "user_id": 4622843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed7c45f601c2672c4137f38c11e621ff?s=128&d=identicon&r=PG&f=1", "display_name": "mere3ortal", "link": "https://stackoverflow.com/users/4622843/mere3ortal"}, "is_accepted": true, "score": 0, "last_activity_date": 1520476981, "creation_date": 1520476981, "answer_id": 49164532, "question_id": 49163052, "link": "https://stackoverflow.com/questions/49163052/gdb-with-corefile-on-remote-embedded-device-how-to-get-more-information-about/49164532#49164532", "title": "GDB with corefile on remote embedded device - How to get more information about backtrace?", "body": "<p>(1)\nThe</p>\n\n<blockquote>\n  <p>Do you need \"set solib-search-path\" or \"set sysroot\"?</p>\n</blockquote>\n\n<p>is a problem. Check the path (on your device) where linux-vdso.so.1 resides, and include that in the solib-search-path. Similarly for the other shared-object libraries that your program uses. E.g. if some shared-object libraries are in /lib, some are in /usr/adowdy/lib and some are in /usr/adowdy/arm/lib, you can say:</p>\n\n<blockquote>\n  <p>(gdb) set solib-search-path /lib:/usr/adowdy/lib:/usr/adowdy/arm/lib</p>\n</blockquote>\n\n<p>(2) The</p>\n\n<blockquote>\n  <p>warning: Unable to find libthread_db matching inferior's thread\n  library, thread debugging will not be available.</p>\n</blockquote>\n\n<p>is also a problem. See the answer to <a href=\"https://stackoverflow.com/questions/11585472/unable-to-debug-multi-threaded-application-with-gdb\">this question</a></p>\n\n<p>(3) The</p>\n\n<blockquote>\n  <p>failed to allocate 65611 bytes</p>\n</blockquote>\n\n<p>is a clue. Are you, by any chance, trying to allocate a negative number of bytes (maybe 65536 - 65611 = -75 bytes)? </p>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 4476202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7ae7b8ae01ad5052cbdfaf16c895f88?s=128&d=identicon&r=PG&f=1", "display_name": "adowdy", "link": "https://stackoverflow.com/users/4476202/adowdy"}, "edited": false, "score": 0, "creation_date": 1520481260, "post_id": 49164537, "comment_id": 85335572, "body": "You are right. I just said that because the stack trace information gives zero new information that I don&#39;t already know from the log error. I&#39;m hoping to use GDB to glean more about what part of the program actually causes this allocation error. It&#39;s frighteningly huge codebase to review every single spot where a malloc type call is initiated in this way. I was hoping to at least get to the point where gdb can show the thread names, for instance!"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1520477041, "creation_date": 1520477041, "answer_id": 49164537, "question_id": 49163052, "link": "https://stackoverflow.com/questions/49163052/gdb-with-corefile-on-remote-embedded-device-how-to-get-more-information-about/49164537#49164537", "title": "GDB with corefile on remote embedded device - How to get more information about backtrace?", "body": "<blockquote>\n  <p>Also the core dump backtrace gives some useless stuff.</p>\n</blockquote>\n\n<p>It's not entirely useless. The stack trace, and the message from the application say the same thing: your application ran out of memory (<code>malloc</code> failed to allocate 65611 bytes).</p>\n\n<p>While a more complete stack would tell you <em>which</em> particular call to <code>g_malloc</code> failed, it's very likely to not matter in practice -- if this <code>g_malloc</code> didn't fail, the next one would.</p>\n\n<p>You likely have a memory leak, or are simply allocating too much memory for what your system allows.</p>\n\n<p>You should look into many debugging tools built for solving this exact problem.</p>\n"}], "owner": {"reputation": 179, "user_id": 4476202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7ae7b8ae01ad5052cbdfaf16c895f88?s=128&d=identicon&r=PG&f=1", "display_name": "adowdy", "link": "https://stackoverflow.com/users/4476202/adowdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 49164532, "answer_count": 2, "score": 0, "last_activity_date": 1520477041, "creation_date": 1520465859, "last_edit_date": 1520474575, "question_id": 49163052, "link": "https://stackoverflow.com/questions/49163052/gdb-with-corefile-on-remote-embedded-device-how-to-get-more-information-about", "title": "GDB with corefile on remote embedded device - How to get more information about backtrace?", "body": "<p>I have a core dump from a C++ application running on an embedded imx6 board (yocto linux). I can put gdb on the box and run it in a terminal to examine the core file like so just fine:</p>\n\n<pre><code>gdb myApplication core.udpsrc256:src.1520419431.5526\n</code></pre>\n\n<p>I get extremely limited information, and really need to know more about what caused the core dump. All I have is a printout from the application:</p>\n\n<pre><code>(myApplication:5526): GLib-ERROR **: ../../glib-2.46.2/glib/gmem.c:100: failed to allocate 65611 bytes\n./run-app.sh: line 8:  5526 Trace/breakpoint trap   (core dumped) XDG_RUNTIME_DIR=/run/user/root ./myApplication\n</code></pre>\n\n<p>Also the core dump backtrace gives some useless stuff. I need to know more stuff up the stack that led to this frame:</p>\n\n<pre><code>#0  0x75ff1910 in raise () from /lib/libc.so.6\n[Current thread is 1 (LWP 5533)]\n(gdb) \n(gdb) \n(gdb) bt\n#0  0x75ff1910 in raise () from /lib/libc.so.6\n#1  0x6b169558 in g_logv () from /usr/lib/libglib-2.0.so.0\n#2  0x6b169610 in g_log () from /usr/lib/libglib-2.0.so.0\n#3  0x6b1681c4 in g_malloc () from /usr/lib/libglib-2.0.so.0\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\n</code></pre>\n\n<p>Sidenote -- there is some warnings when I startup gdb:</p>\n\n<pre><code>GNU gdb (GDB) 7.10.1\nCopyright (C) 2015 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"arm-poky-linux-gnueabi\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from qt5qmlvideo...done.\n\nwarning: exec file is newer than core file.\n[New LWP 5533]\n[New LWP 5526]\n[New LWP 5531]\n[New LWP 5528]\n[New LWP 5534]\n[New LWP 21064]\n[New LWP 5536]\n[New LWP 21065]\n[New LWP 5532]\n[New LWP 5527]\n[New LWP 5530]\n[New LWP 5537]\n\nwarning: Could not load shared library symbols for linux-vdso.so.1.\nDo you need \"set solib-search-path\" or \"set sysroot\"?\n\nwarning: Unable to find libthread_db matching inferior's thread library, thread debugging will not be available.\n\nwarning: Unable to find libthread_db matching inferior's thread library, thread debugging will not be available.\nCore was generated by `./qt5qmlvideo -platform wayland'.\nProgram terminated with signal SIGTRAP, Trace/breakpoint trap.\n#0  0x75ff1910 in raise () from /lib/libc.so.6\n[Current thread is 1 (LWP 5533)]\n(gdb) \n</code></pre>\n\n<p>Can anyone help? Do I need some of the stuff gdb warns about... or can i rebuild my application and its dependencies in some other configuration that would give more output? Thank you!</p>\n\n<p>Some more notes that may matter -</p>\n\n<p>This is a multithreaded application running a gstreamer pipeline. Many gstreamer plugins generate their own threads, one of which in this pipeline is 'udpsrc'. I'm wondering if it's because this failure happens in one of those threads is the reason why I can't get details, but I want to know how to get it to show the details if possible!</p>\n"}, {"tags": ["c", "hex"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1520462479, "post_id": 49162370, "comment_id": 85330562, "body": "It appears that char is a signed type in your compiler (a common option). Because char is only 8 bits, it can only represent positive 0..127, and -1..-128. 0x90 is 144, so it can&#39;t fit into 0..127. It &quot;overflows&quot; and ends up representing -112. But that&#39;s purely interpretation--the bits are all the same in any case."}, {"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520462676, "post_id": 49162370, "comment_id": 85330627, "body": "Could you explain the process how it ends up being -112 ?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1520462690, "post_id": 49162370, "comment_id": 85330631, "body": "Google &quot;twos complement&quot;"}, {"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520462906, "post_id": 49162370, "comment_id": 85330708, "body": "If I calculate twos complement in binary wouldn&#39;t it be the same for both values ? Since the process is converting them to binary , flipping the 0s and 1s for one&#39;s complement then adding 1 to get twos complement."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1520462981, "post_id": 49162370, "comment_id": 85330736, "body": "@holahola Do you know why <code>a</code> and <code>b</code> returns <code>-1</code> <a href=\"https://ideone.com/lGxkDp\" rel=\"nofollow noreferrer\">HERE</a>  and <code>c</code> and <code>d</code> they do not?"}, {"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520463296, "post_id": 49162370, "comment_id": 85330866, "body": "my guess is since unsigned is never negative ,it doesnot return -1"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1520463565, "post_id": 49162370, "comment_id": 85330978, "body": "@holahola Do not stop there. If int is 4 bytes then you have <code>0000 0000 0000 0000</code> . Why you get <code>-1</code> and not <code>1111 1111 1111 1111</code> decimal <code>65635</code> ? I just inverted all bits. That is your main problem here also."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 3, "creation_date": 1520471651, "post_id": 49162370, "comment_id": 85333315, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2054939/is-char-signed-or-unsigned-by-default\">Is char signed or unsigned by default?</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1520471901, "post_id": 49162370, "comment_id": 85333380, "body": "0x90 - 256 = -112, simple as that. That&#39;s how two&#39;s complement works"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520462769, "post_id": 49162448, "comment_id": 85330667, "body": "I believe both are not the same values , as the compiler shows &#39;\\x90&#39; as -114 and 0x90 as 144"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1520463264, "post_id": 49162448, "comment_id": 85330849, "body": "<code>char c = 0x90; </code> this is not right. <code>0x90</code> ends in overflow in implicit constant conversion."}, {"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520463572, "post_id": 49162448, "comment_id": 85330982, "body": "yes that&#39;s true .. Here I am talking about char&#39;\\x90&#39;and int 0x90"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1520463609, "post_id": 49162448, "comment_id": 85330992, "body": "I&#39;m afraid your answer is incorrect for the C language. It is somewhat less incorrect for C++ but still not close."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1520463652, "post_id": 49162448, "comment_id": 85331011, "body": "@chqrlie Definitely this <code>char c = 0x90;</code> is not valid. same for <code>char g = &quot;0x90&quot;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1520468618, "post_id": 49162448, "comment_id": 85332491, "body": "<code>\\x90</code> is a integer constant and has type <code>int</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1520468651, "post_id": 49162448, "comment_id": 85332500, "body": "Escape sequence <code>\\x90</code> has type <code>int</code>.  Perhaps you are thinking of some other language than C?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1520463966, "last_edit_date": 1520463966, "creation_date": 1520462604, "answer_id": 49162448, "question_id": 49162370, "link": "https://stackoverflow.com/questions/49162370/difference-between-char-hexadecimal-escape-sequence-and-hexadecimal-number/49162448#49162448", "title": "Difference between char hexadecimal escape sequence and hexadecimal number", "body": "<p>Both represent the same value.  The difference is in where they are used.</p>\n\n<p><code>\\x90</code> is a character constant and has type <code>char</code>.  This sequence is needed inside of either single quotes or double quotes.  <code>0x90</code> is a hexadecimal integer constant of type <code>int</code>, and it is not used within quotes.</p>\n\n<p>As for positive / negative, integer constants have type <code>int</code> unless they have a suffix denoting the type.  Since <code>0x90</code> fits inside the range of an <code>int</code>, it has a positive value.  If you assigned it to a variable of type <code>char</code>, the value lies outside the range of <code>char</code> and is converted in an implementation defined manner.</p>\n\n<p>Similarly, the escape sequence <code>\\x90</code> has type <code>unsigned char</code>.  If used within a character constant such as <code>'\\x90'</code> it is converted to <code>char</code>, however the value is outside the range of <code>char</code> so it is again converted.</p>\n\n<p>For example:</p>\n\n<pre><code>int a = 0x90;           // valid, has value 144\nint b = '\\x90';         // valid, has value -114\nchar c = 0x90;          // invalid, value out of range\nchar d = '\\x90';        // invalid, same as above\nunsigned char e[] = \"\\x90\\x90\";  // valid, string containing two bytes\nchar f[] = \"\\x90\\x90\";  // invalid, string containing two bytes but values are out of range\nchar g = \\x90;          // invalid, compile error\nchar h = \"0x90\"         // valid, but contains the characters '0', 'x', '9', '0'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520463858, "post_id": 49162621, "comment_id": 85331090, "body": "Thank you , but I really do not get the part how &#39;\\x90&#39; has a value of -112 . how do I find twos complement of &#39;\\x90&#39; ? Isn&#39;t it same as twos complement of 0x90?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520464300, "post_id": 49162621, "comment_id": 85331268, "body": "the <code>char</code> type can be signed or unsigned depending on the compiler default settings. If it is signed, character constants with a non zero bit value for the 8th bit will be negative."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1520470580, "last_edit_date": 1592644375, "creation_date": 1520463440, "answer_id": 49162621, "question_id": 49162370, "link": "https://stackoverflow.com/questions/49162370/difference-between-char-hexadecimal-escape-sequence-and-hexadecimal-number/49162621#49162621", "title": "Difference between char hexadecimal escape sequence and hexadecimal number", "body": "<p>In C <code>'\\x90'</code> and <code>0x90</code> are both <code>int</code> constant literals, but they may have a different value if the <code>char</code> type is signed and has 8 bits. In this case, <code>'\\x90'</code> has a value of <code>-112</code> whereas <code>0x90</code> is always <code>144</code>.</p>\n<p>The C Standard specifies this:</p>\n<blockquote>\n<p><strong>6.4.4.4 Character constants.</strong></p>\n<p>\u00a710 An integer character constant has type <code>int</code>. The value of an integer character constant containing a single character that maps to a single-byte execution character is the numerical value of the representation of the mapped character interpreted as an integer. The value of an integer character constant containing more than one character (e.g., <code>'ab'</code>), or containing a character or escape sequence that does not map to a single-byte execution character, is implementation-defined. If an integer character constant contains a single character or escape sequence, its value is the one that results when an object with type <code>char</code> whose value is that of the single character or escape sequence is converted to type <code>int</code>.</p>\n</blockquote>\n<p>Hence the character constant <code>'\\x90'</code> has a value of <code>(int)(char)0x90</code> which is <code>144</code> if the <code>char</code> type is signed by default or is wider than 8 bits. Otherwise its value is <code>-112</code> as seems to be the case on your system.</p>\n"}, {"comments": [{"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1520463967, "post_id": 49162695, "comment_id": 85331135, "body": "casting c to int,  when coverting <code>char</code> to <code>int</code> you do not have to do it but it is done."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1520463978, "post_id": 49162695, "comment_id": 85331141, "body": "<code>i = int (c)</code> is a syntax error in C. The convention for the position of the sign bit is the <i>leftmost</i>, not the <i>rightmost</i>."}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1520464017, "post_id": 49162695, "comment_id": 85331154, "body": "Sorry will fix mistake, I was thinking in c++"}, {"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520464204, "post_id": 49162695, "comment_id": 85331224, "body": "So by casting it becomes ffffff90 , but what makes that negative number ? Shouldn&#39;t  the leftmost bit be 1 for a binary number to become negative."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520464303, "post_id": 49162695, "comment_id": 85331269, "body": "@holahola If <a href=\"https://ideone.com/9SgEwz\" rel=\"nofollow noreferrer\">This still does not help</a>, then nothing helps."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1520464949, "post_id": 49162695, "comment_id": 85331466, "body": "\u201cBy the rule any int or char with most left bit set to 1 is negative.\u201d You mean signed int/char or You mean that This aplly to unsigned too?"}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1520465057, "post_id": 49162695, "comment_id": 85331504, "body": "@Michi yes, I mean signed lets not confuse the hell out&#39;a him right now since he does not know how the negative number is represented in memory."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1520465235, "post_id": 49162695, "comment_id": 85331564, "body": "I am not making (trying to make) a confusion here,but the OP can if you understand my Point of view."}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1520465347, "post_id": 49162695, "comment_id": 85331595, "body": "@Michi actually I am trying not to confuse the hell out of him. :) it is not that you are confusing him."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1520465400, "post_id": 49162695, "comment_id": 85331608, "body": "My point was that this \u201cBy the rule any int or char with most left bit set to 1 is negative.\u201d should be changed to this \u201cBy the rule any signed int or signed char with most left bit set to 1 is negative.\u201d ... or maybe I am wrong."}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1520465448, "post_id": 49162695, "comment_id": 85331626, "body": "@Michi I fixed it in my answer. Thanks for pointing that out."}, {"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520540464, "post_id": 49162695, "comment_id": 85369165, "body": "You are right GRC, it actually does copy all the 1s to left while casting .. that clears my week long confusion !"}], "tags": [], "owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "is_accepted": true, "score": 1, "last_activity_date": 1520465259, "last_edit_date": 1520465259, "creation_date": 1520463798, "answer_id": 49162695, "question_id": 49162370, "link": "https://stackoverflow.com/questions/49162370/difference-between-char-hexadecimal-escape-sequence-and-hexadecimal-number/49162695#49162695", "title": "Difference between char hexadecimal escape sequence and hexadecimal number", "body": "<p>Without seeing your code here is one possibility:</p>\n\n<pre><code>char c = '\\x90' // 1001 0000 in binary\nint i  = 0x90   // 1001 0000 in binary\n</code></pre>\n\n<p>if you do something like this</p>\n\n<pre><code>i = (int) c;    // i is ffffff90\n                // casting is not necessary in C but this is just for this example\n</code></pre>\n\n<p>because sign (the most left bit in int and char) carries over to fill space to the left.</p>\n\n<p>EDIT:\nSo char is 8bit wide int is 32 bits wide. so when you transfer char int the int most right bit copies over so \n    char c is <strong>1</strong>001 0000 (0x90) when you copy it over to int, by convention value is 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 <strong>1</strong>001 0000 (0xffffffffffffff90) because that bold 1 is copied to the left thus getting negative value.</p>\n\n<p>By the rule <code>int</code> or <code>char</code> with most left bit set to 1 is negative, thus in <code>char c = 0x90</code> `c' is negative</p>\n"}, {"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1520471756, "post_id": 49162845, "comment_id": 85333339, "body": "to be precise, <a href=\"https://stackoverflow.com/q/2098149/995714\"><code>char</code> can have more than 8 bits</a>, and <a href=\"https://stackoverflow.com/q/2054939/995714\">it can be signed or unsigned</a>"}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 3, "last_activity_date": 1520465169, "last_edit_date": 1520465169, "creation_date": 1520464621, "answer_id": 49162845, "question_id": 49162370, "link": "https://stackoverflow.com/questions/49162370/difference-between-char-hexadecimal-escape-sequence-and-hexadecimal-number/49162845#49162845", "title": "Difference between char hexadecimal escape sequence and hexadecimal number", "body": "<p><code>char</code> is 1 byte = 8 bits. If we consider it to be \"unsigned\" (only positive numbers) then 0x90 = 144, which is no problem to hold.</p>\n\n<p>But <code>char</code> is not <code>unsigned</code>. Meaning that one bit is reserved to indicate positive or negative (the sign bit). Therefore only 7 bits are used to represent the maximum positive number. 2^7 = 128. When you try to assign <code>0x90</code> to char, it is therefore larger than the largest positive value. This is signed overflow and undefined behavior.</p>\n\n<p>Most implementations will just wrap around to the negatives, so it instead becomes -128 - (128-144) = -128 + 16 = -112.</p>\n\n<p>The bits may be the same, but the interpretation is not.</p>\n\n<p>(Disclaimer: The actual largest positive value you can hold in 7 bits is 127, and I said what I said because it makes the most intuitive sense. 0 is one of the values that must be accounted for, so the real formula is 2^N-1 where N is the number of bits. Consider 1 bit; the maximum value is 1 even though 2^1 = 2)</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1520469687, "post_id": 49163583, "comment_id": 85332778, "body": "<i>All 3 have the ... same value: 144.</i> not true if <code>char</code> is signed by default."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1520469760, "post_id": 49163583, "comment_id": 85332791, "body": "@chqrlie <code>&#39;\\x90&#39;, 0x90, 144</code> are all integers of type <code>int</code> with the same value.  <code>char</code> is not involved at all at this point.  Sign-ness of <code>char</code> is irrelevant in determining the type/value of these constants"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1520469861, "post_id": 49163583, "comment_id": 85332819, "body": "<code>char</code> should not be involved, but it is... all three indeed have type <code>int</code> in C, but not the same value if <code>char</code> is signed and 8-bit wide."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1520469910, "post_id": 49163583, "comment_id": 85332838, "body": "@chqrlie The determination of a <i>integer constant</i> value does not involve <code>char</code> in any way.  C does not have <code>int</code> constant literals.  Perhaps you are thinking of another language?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1520470839, "post_id": 49163583, "comment_id": 85333097, "body": "As counterintuitive as it may be, <b>It does</b>: C11 6.4.4.4 &#167;10: <i>An integer character constant has type int. The value of an integer character constant containing a single character that maps to a single-byte execution character is the numerical value of the representation of the mapped character interpreted as an integer. ... If an integer character constant contains a single character or escape sequence, its value is the one that results when an object with type <code>char</code> whose value is that of the single character or escape sequence is converted to type <code>int</code>.</i>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1520474173, "post_id": 49163583, "comment_id": 85333884, "body": "@chqrlie Agree that <code>char</code> does affect an integer character constant contains a single character or escape sequence as you have well cited."}, {"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520540556, "post_id": 49163583, "comment_id": 85369206, "body": "Yes , the conclusion is that until 128 the hex escape sequence and int hex are same , and after that char overflows as its beyond the range as in this case (144)"}, {"owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "edited": false, "score": 0, "creation_date": 1520540615, "post_id": 49163583, "comment_id": 85369228, "body": "Where as in Java the case might be completely difference , as char is 2 bytes"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1522629731, "last_edit_date": 1522629731, "creation_date": 1520469464, "answer_id": 49163583, "question_id": 49162370, "link": "https://stackoverflow.com/questions/49162370/difference-between-char-hexadecimal-escape-sequence-and-hexadecimal-number/49163583#49163583", "title": "Difference between char hexadecimal escape sequence and hexadecimal number", "body": "<blockquote>\n  <p>Why are '\\x90' and <code>0x90</code> different from each other(?)</p>\n</blockquote>\n\n<p>The first is an escape sequence and the second is an integer constant.  They have the same value and type.</p>\n\n<hr>\n\n<blockquote>\n  <p>I fail to understand why the char x90 is negative and leads to difference value than int 0x90.</p>\n</blockquote>\n\n<p>They both have the same value when assigned to a <code>char</code>.</p>\n\n<hr>\n\n<p><code>'\\x90'</code>, <code>0x90</code> and <code>144</code> are all <em>integer constants</em> in C.  All 3 have the same type, <code>int</code> and same value: 144.</p>\n\n<p>A <code>char</code> will either act like a <code>signed char</code> or <code>unsigned char</code>.  Apparently in OP's case, it acts like a <code>signed char</code> with a range of [-128 ... 127].</p>\n\n<hr>\n\n<p>Consider <code>char ch = 144;</code></p>\n\n<p>Assigning 144, which is out of range of  OP's <code>char</code> results in <em>implementation defined behavior</em>.  This means the implementation can do all sorts of things like assign the maximum value as if <code>ch = 127;</code>.  The most common <em>implementation defined behavior</em> is to repeatedly add/subtract 256 until the sum is in range.  This is 144-256 --> -112.  </p>\n\n<p>When looking at 144 as an 8-bit <code>unsigned char</code> and -112 as 8-bit <em>signed</em> <code>char</code>, they both have the same bit pattern <code>1001 0000</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 9323869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f889c966e86ccc640fa9208abfaf3e?s=128&d=identicon&r=PG&f=1", "display_name": "holahola", "link": "https://stackoverflow.com/users/9323869/holahola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2236, "favorite_count": 0, "accepted_answer_id": 49162695, "answer_count": 5, "score": 4, "last_activity_date": 1522629731, "creation_date": 1520462204, "last_edit_date": 1520540365, "question_id": 49162370, "link": "https://stackoverflow.com/questions/49162370/difference-between-char-hexadecimal-escape-sequence-and-hexadecimal-number", "title": "Difference between char hexadecimal escape sequence and hexadecimal number", "body": "<p>Why  are '\\x90' and 0x90 different from each other. I understand that one is hexadecimal escape sequence and other is hexadecimal number . However if I convert them to decimal I get 144 , which should be the value for both '\\x90' and 0x90 . Also, book says that '\\x90' is negative value whereas 0x90 is positive.</p>\n\n<p>To my knowledge  char is only 1 byte and int is 4 , so we would get</p>\n\n<pre><code>char '\\x90' = 1001 0000 ( 1 byte,8 bits)\nint 0x90 = 1001 0000 0000 0000 0000 0000 0000 0000 (4 byte,32 bits)\n</code></pre>\n\n<p>Still I fail to understand why the char x90 is negative and leads to difference value than int 0x90.</p>\n\n<p>My question is not about char signed and unsigned , although that relates to my question,  I am asking about the into values of those characters..</p>\n"}, {"tags": ["c", "while-loop", "infinite-loop", "do-while"], "answers": [{"tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": false, "score": 1, "last_activity_date": 1520461444, "creation_date": 1520461444, "answer_id": 49162204, "question_id": 49162095, "link": "https://stackoverflow.com/questions/49162095/do-not-understand-this-infinite-while-loop/49162204#49162204", "title": "Do not understand this Infinite While loop", "body": "<p>The second <code>while</code> loop keeps reading characters until it reads a newline char (<code>\\n</code>) or reaches the end of file (<code>EOF</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 1, "last_activity_date": 1520461997, "last_edit_date": 1520461997, "creation_date": 1520461643, "answer_id": 49162243, "question_id": 49162095, "link": "https://stackoverflow.com/questions/49162095/do-not-understand-this-infinite-while-loop/49162243#49162243", "title": "Do not understand this Infinite While loop", "body": "<p>Your second while loop does not have any body and it will continuously reading from standard input. If you press <code>Enter</code> which is a new line character it will break because it will keep continuously checking whether entered value is not newline character and not a end of file character. </p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520469014, "post_id": 49162377, "comment_id": 85332582, "body": "&#191;Que?  The &quot;very badly written&quot; comment doesn&#39;t seem accurate to me.  If the next character in the input is white space (including newline), it will be read until <code>ch</code> contains either EOF or a character that&#39;s not white space.  If the character after the white space is EOF, it will return EOF; the gobbling loop will detect EOF immediately \u2014 assuming that <code>getchar()</code> continues to return EOF once it has reported it once.  (Some versions of GlibC on Linux have seemed broken when the input comes from a terminal, but that&#39;s a different bug, and not a bug in the code in the question.)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520469309, "post_id": 49162377, "comment_id": 85332664, "body": "I forgot that the \\n is a whitespace as well. But as I understand the idea of this code - it should return first not wihite space in the line. This one will return will just return first not whitespace character which can be anywhere in the file."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520469448, "post_id": 49162377, "comment_id": 85332706, "body": "Where does the code say &quot;first non-white-space character in the line&quot; in the job description?  It returns the &quot;first non-white-space character&quot; period \u2014 regardless of how many lines it has to read to find it.  Your hypothetical requirement is a plausible alternative specification; it just isn&#39;t what the code implements, and the question is about what the code implements, not what it should implement."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1520462565, "last_edit_date": 1520462565, "creation_date": 1520462241, "answer_id": 49162377, "question_id": 49162095, "link": "https://stackoverflow.com/questions/49162095/do-not-understand-this-infinite-while-loop/49162377#49162377", "title": "Do not understand this Infinite While loop", "body": "<p>This function returns first not whitespace in the  input. And then ignores everything until end of the line or end of file. It is very badly written as it will read the next line if there are no non whitespaces in the line or will cause an error if the first char after the whitespace the EOF. </p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 4, "last_activity_date": 1520462946, "creation_date": 1520462946, "answer_id": 49162511, "question_id": 49162095, "link": "https://stackoverflow.com/questions/49162095/do-not-understand-this-infinite-while-loop/49162511#49162511", "title": "Do not understand this Infinite While loop", "body": "<blockquote><code>    while((garbage = getchar()) != '\\n' && garbage != EOF)\n                ;\n</code></blockquote>\n\n<p>is basically a very compressed version of:</p>\n\n<pre><code>garbage = getchar();\nwhile ( garbage != '\\n' &amp;&amp; garbage != EOF )\n  garbage = getchar();\n</code></pre>\n\n<p>Basically, read and discard any characters on standard input until we see a newline or end of file is signaled.  </p>\n\n<p>C condition expressions can contain an assignment:</p>\n\n<pre><code>while ( x = foo() ) // assign result of foo() to x, loop if non-zero\n{\n  // do something\n}\n</code></pre>\n\n<p>Since a <em>lot</em> of people accidentally type <code>=</code> when they mean <code>==</code>, most compilers will warn about an assignment expression in a condition expression <em>unless</em> that expression is wrapped in parentheses:</p>\n\n<pre><code>while ( (x = foo()) ) // assign result of foo() to x, loop if non-zero\n{\n  // do something\n}\n</code></pre>\n\n<p>This tells the compiler \"yes, I <em>intend</em> to assign the result of <code>foo()</code> to <code>x</code> and loop based on the result, shut up.\"</p>\n\n<p>Assignment expressions in C can appear as part of a larger expression.  The result of an assignment expression is the value stored in the target after any appropriate conversions.  Thus, the result of an assignment expression can be compared against something else as well, so you can write</p>\n\n<pre><code>while ( (x = foo()) &gt; 0 ) // assign result of foo() to x, loop while result is positive\n{\n  // do something\n}\n</code></pre>\n\n<p>You can make multiple comparisons:</p>\n\n<pre><code>while ( (x = foo()) &gt; 0 &amp;&amp; x &lt; 100 )\n{\n  // do something\n}\n</code></pre>\n\n<p>The <code>&amp;&amp;</code> operator forces left to right evaluation - <code>(x = foo()) &gt; 0</code> will be evaluated first, assigning a new value to <code>x</code> as a side effect.  If the result is non-zero (<code>x</code> is positive), then <code>x &lt; 100</code> will be evaluated.  Again, it's a compact way of writing:</p>\n\n<pre><code>x = foo();\n\nif ( x &gt; 0 &amp;&amp; x &lt; 100 )\n{\n  // do something\n  x = foo();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520463996, "post_id": 49162564, "comment_id": 85331148, "body": "The first loop will only read multiple lines if they&#39;re all empty."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520464528, "post_id": 49162564, "comment_id": 85331341, "body": "@Barmar: yes, but <i>empty</i> is not precise enough: the first loop will consume lines containing either no characters or only whitespace characters. the newline character &#39;<code>\\n</code>&#39; is a whitespace character."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520466837, "post_id": 49162564, "comment_id": 85332011, "body": "Since the purpose of this function seems be to return the first non-whitespace character, and then skip to the end of the line containing that character, skipping all-white lines seems to be appropriate."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1520463154, "creation_date": 1520463154, "answer_id": 49162564, "question_id": 49162095, "link": "https://stackoverflow.com/questions/49162095/do-not-understand-this-infinite-while-loop/49162564#49162564", "title": "Do not understand this Infinite While loop", "body": "<p>The <code>while</code> loop is not an infinite loop: it has an empty body but will keep executing its condition until it returns a zero value.</p>\n\n<p>The condition will evaluate to <code>0</code> if either the first operand of <code>&amp;&amp;</code> evaluates to <code>0</code> or if the second operand evaluates to <code>0</code>.</p>\n\n<p>The first operand <code>(garbage = getchar()) != '\\n</code> first reads a byte from standard input and stores it to <code>garbage</code> and compares it to <code>'\\n'</code>, the newline character. If the byte read is indeed a newline, the loop stops, otherwise <code>garbage</code> (the byte read) is compared to <code>EOF</code> and the loop stops if the stream is at end of file, where the return value of <code>getchar</code> is the special value <code>EOF</code>.</p>\n\n<p>The purpose of this <code>while</code> loop is simply to consume the rest of the current input line. Note however that the function may read one or more lines until it finds a non whitespace character.</p>\n"}], "owner": {"reputation": 31, "user_id": 7978194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f235edac862019e9b1d2ecf2c56f25c6?s=128&d=identicon&r=PG&f=1", "display_name": "MAD", "link": "https://stackoverflow.com/users/7978194/mad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1520468484, "creation_date": 1520460981, "last_edit_date": 1520468484, "question_id": 49162095, "link": "https://stackoverflow.com/questions/49162095/do-not-understand-this-infinite-while-loop", "title": "Do not understand this Infinite While loop", "body": "<p>Can someone please explain to me in layman's terms what's going on with this snippet of code? I understand it's a function used to get the first character then discard the remaining input but I am confused with the last while loop. When I googled it I found very complicated explanations which went way over my head. There was one explanation that kind of made sense but it was an assembly code explanation dealing with the input being on the stack in memory and then my pea brain went numb. \ud83d\ude0b </p>\n\n<pre><code>int get_First(void)\n{\n     int ch, garbage;\n\n     do\n     {\n          ch = getchar();\n     }while(isspace(ch));\n\n    while((garbage = getchar()) != '\\n' &amp;&amp; garbage != EOF)\n                ;\n    return ch;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "malloc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1520460951, "post_id": 49162020, "comment_id": 85329902, "body": "I beats me why you have a struct which has a pointer to another struct that only contains a pointer. Keep it simple."}, {"owner": {"reputation": 8233, "user_id": 1469457, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72853d2b57e37aab89afe61af4f74c62?s=128&d=identicon&r=PG", "display_name": "Maury Markowitz", "link": "https://stackoverflow.com/users/1469457/maury-markowitz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1520460984, "post_id": 49162020, "comment_id": 85329916, "body": "As I noted in the comment, the struct has a bunch of ints as well, I removed them so that this didn&#39;t flow off the page."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1520460989, "post_id": 49162020, "comment_id": 85329918, "body": "<code>deck-&gt;cards</code> is an array of <code>Cards</code> not an array of <code>Card *</code>, so your allocation is incorrect.  <code>calloc(1, sizeof(Card *));</code> only allocates space for a pointer-to-card but you want space for a <code>Card</code> object. Change to <code>sizeof(Card)</code>. Same with <code>realloc</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1520461026, "post_id": 49162020, "comment_id": 85329935, "body": "<code>calloc(1, line_len * sizeof(char));</code> you need to use <code>line_len+1</code> to allow space for the null terminator."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520461052, "post_id": 49162020, "comment_id": 85329941, "body": "There&#39;s also no reason to use <code>calloc()</code> instead of <code>malloc()</code>, since you&#39;re going to overwrite it immediately."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1520461110, "post_id": 49162020, "comment_id": 85329967, "body": "But if you use <code>calloc()</code>, write it as <code>calloc(line_len+1, sizeof(char))</code>. One of the benefits of <code>calloc()</code> is that it does the multiplication for you."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1520461180, "post_id": 49162020, "comment_id": 85330003, "body": "On the other hand, since you alloc a new <code>Card</code> anyway, maybe <code>deck-&gt;cards</code> should <code>Card**</code>."}, {"owner": {"reputation": 8233, "user_id": 1469457, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72853d2b57e37aab89afe61af4f74c62?s=128&d=identicon&r=PG", "display_name": "Maury Markowitz", "link": "https://stackoverflow.com/users/1469457/maury-markowitz"}, "edited": false, "score": 0, "creation_date": 1520461268, "post_id": 49162020, "comment_id": 85330043, "body": "Johnny, that was it, obviously in retrospect. If you make that an answer I&#39;ll upvote it. It points to my lack of true understanding of the arrays, I though arrays WERE lists of pointers, but of course that is not the case. Barmar, I was told to ALWAYS use calloc for the simple reason that if you malloc, one day you&#39;ll forget to zero."}, {"owner": {"reputation": 8233, "user_id": 1469457, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72853d2b57e37aab89afe61af4f74c62?s=128&d=identicon&r=PG", "display_name": "Maury Markowitz", "link": "https://stackoverflow.com/users/1469457/maury-markowitz"}, "edited": false, "score": 0, "creation_date": 1520461328, "post_id": 49162020, "comment_id": 85330072, "body": "And Johnny, can you expand on that last comment a bit?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9080930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vyDPS.jpg?s=128&g=1", "display_name": "ncaswell", "link": "https://stackoverflow.com/users/9080930/ncaswell"}, "is_accepted": false, "score": 0, "last_activity_date": 1520479141, "last_edit_date": 1520479141, "creation_date": 1520461693, "answer_id": 49162257, "question_id": 49162020, "link": "https://stackoverflow.com/questions/49162020/expanding-a-dynamic-array-in-c-and-getting-nothing-back/49162257#49162257", "title": "expanding a dynamic array in C and getting nothing back", "body": "<p><code>malloc</code> is not needed. <code>calloc</code> is fine and so is the way you implement it. How large is <code>Card</code> initialized to be?</p>\n\n<pre><code>card = calloc(1, sizeof(Card));\n</code></pre>\n\n<p>If there is no specific value then it could cutting off data with each iteration, which is why just tracing through it works and everything is visible but not when you call the <code>fprintf</code> function. </p>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 4152048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dccf5015681d635e9c8398b98da0c68?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDuck", "link": "https://stackoverflow.com/users/4152048/johnduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1520461736, "creation_date": 1520461736, "answer_id": 49162269, "question_id": 49162020, "link": "https://stackoverflow.com/questions/49162020/expanding-a-dynamic-array-in-c-and-getting-nothing-back/49162269#49162269", "title": "expanding a dynamic array in C and getting nothing back", "body": "<p>Seems like the following lines have a logic error:</p>\n\n<pre><code>if(deck-&gt;num_cards == 0) {\n  deck-&gt;num_cards++;\n  deck-&gt;cards = calloc(1, sizeof(Card *));\n} else {\n  deck-&gt;num_cards++;\n  deck-&gt;cards = realloc(deck-&gt;cards, deck-&gt;num_cards*sizeof(Card *));\n}\n</code></pre>\n\n<p>Most likely you meant to write <code>calloc(1, sizeof(Card))</code> and similarly for the <code>realloc</code>. If <code>sizeof(Card *) == sizeof(Card)</code> you probably wouldn't notice any issue, which is indeed the case with your snipped example since <code>Card</code> only contains a pointer member.</p>\n"}, {"tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": false, "score": 1, "last_activity_date": 1520462254, "creation_date": 1520462254, "answer_id": 49162381, "question_id": 49162020, "link": "https://stackoverflow.com/questions/49162020/expanding-a-dynamic-array-in-c-and-getting-nothing-back/49162381#49162381", "title": "expanding a dynamic array in C and getting nothing back", "body": "<p><code>deck-&gt;cards</code> is an array of <code>Cards</code> not an array of <code>Card *</code>, so your allocation is incorrect.</p>\n\n<pre><code>calloc(1, sizeof(Card *));\n</code></pre>\n\n<p>only allocates space for a pointer-to-card but you want space for a <code>Card</code> object. Change to</p>\n\n<pre><code>calloc(1, sizeof(Card));.\n</code></pre>\n\n<p>Same with <code>realloc</code></p>\n\n<p>However, since you are already allocate the <code>Card</code> on the heap</p>\n\n<pre><code>card = calloc(1, sizeof(Card));\n</code></pre>\n\n<p>You could change the type of the array to <code>Card **</code> and just store those pointers in the array</p>\n\n<pre><code>deck-&gt;cards[deck-&gt;num_cards - 1] = card;\n</code></pre>\n\n<p>But I don't think you want to do that, so you can probably disregard that.</p>\n\n<p>You don't need to allocate the temp <code>Card</code> on the heap. You could just change the local variable to:</p>\n\n<pre><code>Card card;\n</code></pre>\n\n<p>and eliminate <code>card = calloc(1, sizeof(Card));</code> altogether. As it is you have a memory leak because you never <code>free</code> them but this way you don't need to worry about that.</p>\n\n<p>Last note, <code>deck-&gt;cards[deck-&gt;num_cards - 1] = *card;</code> does a shallow copy. Which may or may not be an issue. Can't say for sure with the simplified code.</p>\n\n<p>Updated function:</p>\n\n<pre><code>void read_deck(Deck *deck, FILE *pfile) {\n  Card card;   // No longer a pointer\n  char line_buf[MAX_LINE_LEN];\n  int line_len;\n\n  while(TRUE) {\n    if(read_line(line_buf, input_fp) == EOF) break;\n    line_len = strlen(line_buf);\n\n    /* make a new card and copy in the text */\n    // You weren't allocating space for the '\\0' so +1 added\n    card.orig_str = calloc(1, (line_len + 1) * sizeof(char));\n    strcpy(card-&gt;orig_str, line_buf);\n\n    /* calloc/realloc the deck and add this card to it */\n    if(deck-&gt;num_cards == 0) {\n      deck-&gt;num_cards++;\n      deck-&gt;cards = calloc(1, sizeof(Card));\n    } else {\n      deck-&gt;num_cards++;\n      deck-&gt;cards = realloc(deck-&gt;cards, deck-&gt;num_cards*sizeof(Card));\n    }\n    // Shallow copy temp object to array\n    deck-&gt;cards[deck-&gt;num_cards - 1] = card;\n  }\n}\n</code></pre>\n\n<p>I should also mention, calling <code>realloc</code> with a <code>NULL</code> pointer is the same as calling <code>malloc</code> so you could simplify even further by having only 1 allocation.</p>\n"}], "owner": {"reputation": 8233, "user_id": 1469457, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72853d2b57e37aab89afe61af4f74c62?s=128&d=identicon&r=PG", "display_name": "Maury Markowitz", "link": "https://stackoverflow.com/users/1469457/maury-markowitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1520479141, "creation_date": 1520460597, "question_id": 49162020, "link": "https://stackoverflow.com/questions/49162020/expanding-a-dynamic-array-in-c-and-getting-nothing-back", "title": "expanding a dynamic array in C and getting nothing back", "body": "<p>C noob here. I had some code working fine when it was all in <code>main()</code> but when I started factoring it out it died. I know this is simple, that I'm missing some key element and I'll only have to be shown this once (I promise!). So here goes:</p>\n\n<p>in types.h:</p>\n\n<pre><code>typedef struct {\n  char *orig_str; // various ints snipped for clarity\n} Card;\n\ntypedef struct {\n  size_t num_cards;\n  Card *cards;  // same here\n} Deck;\n</code></pre>\n\n<p>in main.c:</p>\n\n<pre><code>int main(int argc, char **argv) {\n  Deck deck;\n  // clipped the part opening input_fp, it's working fine\n  read_deck(&amp;deck, input_fp);\n  for(int i = 0; i &lt; deck.num_cards; i++) {\n    fprintf(\"%s\", deck.cards[i].orig_str);\n  }\n}\n</code></pre>\n\n<p>in input.c, where I moved the code formerly in <code>main</code>:</p>\n\n<pre><code>void read_deck(Deck *deck, FILE *pfile) {\n  Card *card = NULL;\n  char line_buf[MAX_LINE_LEN];\n  int line_len;\n\n  while(TRUE) {\n    if(read_line(line_buf, input_fp) == EOF) break;\n    line_len = strlen(line_buf);\n\n    /* make a new card and copy in the text */\n    card = calloc(1, sizeof(Card));\n    card-&gt;orig_str = calloc(1, line_len * sizeof(char));\n    strcpy(card-&gt;orig_str, line_buf);\n\n    /* calloc/realloc the deck and add this card to it */\n    if(deck-&gt;num_cards == 0) {\n      deck-&gt;num_cards++;\n      deck-&gt;cards = calloc(1, sizeof(Card *));\n    } else {\n      deck-&gt;num_cards++;\n      deck-&gt;cards = realloc(deck-&gt;cards, deck-&gt;num_cards*sizeof(Card *));\n    }\n    deck-&gt;cards[deck-&gt;num_cards - 1] = *card;\n  }\n}\n</code></pre>\n\n<p>When I trace through in gdb inside <code>read_deck</code>, everything seems fine, I can:</p>\n\n<pre><code> p deck-&gt;cards[0].orig_str = \"CM TESTEX5\"\n p deck-&gt;cards[1].orig_str = \"CM YAGI TEST\"\n p deck-&gt;cards[2].orig_str = \"CM 78 SEGMENTS. SIGMA\"\n</code></pre>\n\n<p>But when the loop completes and it returns to <code>main</code>, most cards other than [0] no longer have values:</p>\n\n<pre><code>p deck-&gt;cards[0].orig_str = \"CM TESTEX5\"\np deck-&gt;cards[1].orig_str = \"\"\np deck-&gt;cards[2].orig_str = \"\"\n</code></pre>\n\n<p>Digging a bit deeper, I can see bits of valid data showing up from very different cards - card 24 orig_str looks OK, but the data it has is from card 30! The next time I ran it, that data was in card 20.</p>\n\n<p>I assume the problem is that I'm mallocing something the wrong size so the array or string pointers are wrong. But why would that only happen at the end of the method?</p>\n\n<p>Ok, what did I do wrong?</p>\n"}, {"tags": ["c", "linux", "pipe", "ipc"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520460573, "post_id": 49161993, "comment_id": 85329753, "body": "Create the pipe before the fork, otherwise you are creating 2 pipes"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 5, "creation_date": 1520460615, "post_id": 49161993, "comment_id": 85329769, "body": "your <code>main</code> signature is wrong... that should be <code>char* argv[]</code> or <code>char** argv</code>"}, {"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1520463059, "post_id": 49161993, "comment_id": 85330770, "body": "Why you think shm in printf is a null terminated string?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520534030, "post_id": 49161993, "comment_id": 85365762, "body": "regarding: <code>int main (int argc, char ** argv[])</code>  the second parameter: <code>char **argv[]</code> is effectively: <code>char ***argv</code>  this is not correct.  Suggest using: <code>char **argv</code>  or <code>char *argv[]</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520534137, "post_id": 49161993, "comment_id": 85365822, "body": "Never access beyond <code>argv[0]</code>  with out first checking <code>argc</code> to assure the command line parameter was actually entered by the user."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520534423, "post_id": 49161993, "comment_id": 85365974, "body": "for ease of readability and understanding, 1) consistently indent the code.  Indent after every opening brace &#39;{&#39;.  Unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces.  2) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>  Treat the closing brace &#39;}&#39; as a separate statement.  3) separate code blocks ( <code>for</code> <code>if</code> <code>else</code> <code>while</code> <code>do..while</code> <code>switch</code> <code>case</code> <code>default</code> ) via a single blank line"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520534599, "post_id": 49161993, "comment_id": 85366091, "body": "when calling any of the <code>scanf()</code> family of functions: 1) always check the returned value (not the parameter values) to assure the operation was successful. 2) when using the format specifiers &#39;%[...]&#39; and/or &#39;%s&#39;, always include a MAX CHARACTERS modifier that is 1 less than the length of the input buffer because those specifiers append a NUL byte to the input and to avoid any possibility of a buffer overflow (which would result in undefined behavior and can lead to a seg fault event)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520534727, "post_id": 49161993, "comment_id": 85366167, "body": "regarding: <code>write(1, &quot;\\n&quot;, 1);</code> and <code>printf(&quot;\\n&quot;);</code> are both might CPU cycle expensive ways to write <code>puts(&quot;&quot;);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520534950, "post_id": 49161993, "comment_id": 85366304, "body": "regarding: <code>write(1, &amp;buff, 1);</code>  this is a mighty cpu cycle way to write: <code>putc(buff)</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520535927, "post_id": 49161993, "comment_id": 85366811, "body": "Suggest using <code>ftok()</code> for creating the &#39;key&#39; for the shared memory.  You might also want to make use of <code>shmat()</code> and <code>shmdt()</code> for attaching/detaching the shared memory to each process.  Before each process exit, it should call <code>shmctl()</code> with the <code>IPC_RMID</code> parameter so when the last process using the shared memory is exited, the shared memory will be destroyed (and not before all using processes are exited)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520536229, "post_id": 49161993, "comment_id": 85366981, "body": "it is a poor programming practice to include header files those contents are not being used.  For instance the <code>err.h</code> header file.  Suggest  removing such <code>#include</code>  statements."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9080930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vyDPS.jpg?s=128&g=1", "display_name": "ncaswell", "link": "https://stackoverflow.com/users/9080930/ncaswell"}, "is_accepted": false, "score": -2, "last_activity_date": 1520462054, "creation_date": 1520462054, "answer_id": 49162337, "question_id": 49161993, "link": "https://stackoverflow.com/questions/49161993/c-programming-segmentation-fault-core-dumped/49162337#49162337", "title": "C Programming: Segmentation Fault (Core Dumped)", "body": "<p>You are reading and writing from the same end of the pipe you create. Common practice is to read from end [1] and write to end [0]. Tell me if that helps. Additionally, it is also common practice to not have too much going on between the child and parent processes. Attempting to execute code in between segments (parent and child) usually ends up with a segmentation fault, even if your code compiles. </p>\n"}, {"tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 2, "last_activity_date": 1520473110, "creation_date": 1520473110, "answer_id": 49164026, "question_id": 49161993, "link": "https://stackoverflow.com/questions/49161993/c-programming-segmentation-fault-core-dumped/49164026#49164026", "title": "C Programming: Segmentation Fault (Core Dumped)", "body": "<p>You have several problems in your code</p>\n\n<ol>\n<li><p>Create the pipe <strong>before</strong> the <code>fork</code>. You create the pipe twice, once for\nthe parent process and one for the child process. That makes no sense, the pipe\nthat the child created cannot be used by the parent. The pipe must already\nexists so that the child inherits the file descriptors when the child is\ncreated.</p></li>\n<li><p>Usually the parent creates the shared memory and the child gets the <code>shmid</code>\nfrom the parent when it does the <code>fork</code>. Otherwise you will have to synchronize\nthe child and parent. So I would put the creation of the shared memory before\nthe <code>fork</code>, so that the child inherits the <code>shmid</code> from the parent.</p></li>\n<li><p>In the line <code>char *n = (char *) shm;</code> the cast is not needed, <code>shm</code> is\nalready a <code>char*</code>.</p></li>\n<li><p>In the parent block after the <code>fork</code>, you do <code>wait(NULL);</code> and then proceed to\nwrite into the pipe. That makes no sense and you block both parent and child.\nThe child blocks on <code>read</code> because the parent hasn't send anything through the\npipe, yet. And the parent blocks on <code>wait</code>, because the child never exits and thus\ncannot send anything through the pipe. The parent must <strong>first</strong> send data\nthrough the pipe, then <code>wait</code> for the child to exit.</p></li>\n<li><p>In the child block you do <code>scanf(\"%s\", n);</code>, you are not protecting you\nagainst buffer overflows. <code>scanf(\"%14s\", n)</code> would be better. Also you are not\nchecking if <code>scanf</code> read anything at all. If the user presses\n<kbd>Ctrl</kbd><kbd>D</kbd> then <code>stdin</code> is closed, <code>scanf</code> fails. In that case\n<code>n</code> might not be <code>'\\0'</code>-terminated and this would lead to undefined behaviour\nwhen the parent tries to print it. So it would be better:</p>\n\n<pre><code>if(scanf(\"%14s\", n) != 1) // avoid buffer overflow\n{   \n    fprintf(stderr, \"Child: cannot read from stdin\\n\");\n    n[0] = 0; // 0-terminating\n}\n</code></pre></li>\n<li><p>In the parent block after the <code>fork</code>, you do <code>wait</code> twice, why?</p></li>\n<li><p>Your <code>main</code> is wrong, it should be</p>\n\n<pre><code>int main(int argc, char **argv);\n</code></pre></li>\n<li><p>The parent sends the contents of <code>argv[1]</code> to the child through the pipe, but\nyou fail to check if <code>argv[1]</code> is not <code>NULL</code>. Use this at the start of the\nprogram:</p>\n\n<pre><code> if(argc != 2)\n {\n     fprintf(stderr, \"usage: %s string\\n\", argv[0]);\n     return 1;\n }\n</code></pre></li>\n</ol>\n\n<p>So the correct version would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;err.h&gt;\n#include &lt;sysexits.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;string.h&gt;\n\n\n #define SHM_SIZE 15\n\nint main (int argc, char **argv) {\n     pid_t pid; //pid variable of type pid\n     int shmid; //shared memory id\n     char *shm; //shared memory name \n\n     if(argc != 2)\n     {\n         fprintf(stderr, \"usage: %s string\\n\", argv[0]);\n         return 1;\n     }\n\n     int pipefd[2];\n     char buff;\n\n     // create shared memory before the fork,\n     // otherwise you will need to syncronize parent\n     // and child\n\n     pipe(pipefd); //creating pipe before the fork\n\n     // parent creates shared memory, child inherits shmid\n     // after fork\n     shmid = shmget(IPC_PRIVATE, SHM_SIZE, IPC_CREAT | 0666); \n\n     pid = fork(); //creating child process\n\n\n    if (pid &lt; 0) {\n        fprintf(stderr, \"Fork Failed\"); \n        return 1; // return -1 would be the same as return 255\n    } else if (pid == 0) {\n        shm = shmat(shmid, 0, 0);\n\n        char *n = shm; // shm is already a char*\n\n        printf(\"hello i am the child process. my pid is %d. what is your name?: \", getpid());\n        if(scanf(\"%14s\", n) != 1) // avoid buffer overflow\n        {\n            fprintf(stderr, \"Child: cannot read from stdin\\n\");\n            n[0] = 0; // 0-terminating\n        }\n        printf(\"\\n\");\n\n        /////////////////////////////////////////////////////////////////////////////////////// \n\n        close(pipefd[1]);\n        printf(\"pipe opened on child end\");\n        printf(\"\\n\");\n        printf(\"Parent sends: \");\n        fflush(stdout);\n        while(read(pipefd[0], &amp;buff, 1) &gt; 0) {\n                write(1, &amp;buff, 1);\n        }    \n        write(1, \"\\n\", 1);\n        close(pipefd[0]);\n        printf(\"pipe successfully closed\");\n        printf(\"\\n\");\n        exit(EXIT_SUCCESS);\n\n    } else {\n        shm = shmat(shmid, 0, 0);\n        close(pipefd[0]);\n        printf(\"pipe open on parent end\");\n        printf(\"\\n\");\n        write(pipefd[1], argv[1], strlen(argv[1]));\n        close(pipefd[1]);\n        printf(\"pipe successfully closed\");\n\n        // not we wait for child to exit\n        wait(NULL);\n\n        printf(\"\\nThis is Child's Parent. My pid is %d. Nice to me you %s.\\n\", getpid(), shm);\n        printf(\"\\n\");\n\n        //////////////////////////////////////////////////////////////////////////////////////\n\n        exit(EXIT_SUCCESS);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./b \"message to child: stop playing video games!\"\npipe open on parent end\nhello i am the child process. my pid is 10969. what is your name?: Pablo\n\npipe opened on child end\nParent sends: message to child: stop playing video games!\npipe successfully closed\npipe successfully closed\nThis is Child's Parent. My pid is 10968. Nice to me you Pablo.\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6833628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pzHMS.jpg?s=128&g=1", "display_name": "Jflee", "link": "https://stackoverflow.com/users/6833628/jflee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "accepted_answer_id": 49164026, "answer_count": 2, "score": 0, "last_activity_date": 1520494956, "creation_date": 1520460483, "last_edit_date": 1520494956, "question_id": 49161993, "link": "https://stackoverflow.com/questions/49161993/c-programming-segmentation-fault-core-dumped", "title": "C Programming: Segmentation Fault (Core Dumped)", "body": "<p>The program i am trying to write is trying to demonstrate how IPC works on Linux, but i keep getting a core dump error. It compiles fine and will run up until the last output statement in the parent process. </p>\n\n<p>My code is as follows: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;err.h&gt;\n#include &lt;sysexits.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;string.h&gt;\n\n\n #define SHM_SIZE 15\n\nint main (int argc, char ** argv[]) {\n     pid_t pid; //pid variable of type pid\n     int shmid; //shared memory id\n     int key = 1776; //randomly chosen key\n     char *shm; //shared memory name \n\n     int pipefd[2];\n     char buff;\n\n     pid = fork(); //creating child process\n     pipe(pipefd); //creating pipe\n\n\nif (pid &lt; 0) {\n    fprintf(stderr, \"Fork Failed\"); \n    return -1;\n} else if (pid == 0) {\n    shmid = shmget(key, SHM_SIZE, 0); \n    shm = shmat(shmid, 0, 0);\n\n    char *n = (char *) shm;\n\n    printf(\"hello i am the child process. my pid is %d. what is your name?: \", getpid());\n    scanf(\"%s\", n);\n    printf(\"\\n\");\n\n    /////////////////////////////////////////////////////////////////////////////////////// \n\n    close(pipefd[1]);\n    printf(\"pipe opened on child end\");\n    printf(\"\\n\");\n    while(read(pipefd[0], &amp;buff, 1) &gt; 0) {\n            write(1, &amp;buff, 1);\n    }    \n    write(1, \"\\n\", 1);\n    close(pipefd[0]);\n    printf(\"pipe successfully closed\");\n    printf(\"\\n\");\n    exit(EXIT_SUCCESS);\n\n} else {\n    shmid = shmget(key, SHM_SIZE, 0777 | IPC_CREAT);\n    shm = shmat(shmid, 0, 0);\n\n    wait(NULL);\n\n    printf(\"\\nThis is Child's Parent. My pid is %d. Nice to me you %s.\\n\", getpid(), shm);\n    printf(\"\\n\");\n\n    //////////////////////////////////////////////////////////////////////////////////////\n\n    close(pipefd[0]);\n    printf(\"pipe open on parent end\");\n    printf(\"\\n\");\n    write(pipefd[1], argv[1], strlen(argv[1]));\n    close(pipefd[1]);\n    printf(\"pipe successfully closed\");\n    wait(NULL);\n    exit(EXIT_SUCCESS);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Does it have something to do with my args[]? Such as could i be accessing memory out of reach? Or am trying to access some invalid pointer? </p>\n\n<p>Many Thanks!</p>\n"}, {"tags": ["c", "pipe", "child-process"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520460691, "post_id": 49161927, "comment_id": 85329800, "body": "When you create a fork, you have to distinguish between parent and child, you are not doing that."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520460788, "post_id": 49161927, "comment_id": 85329843, "body": "<code>chaine = (char*) malloc(sizeof(char));</code> you are allocating space for a single <code>char</code>. Why do you even bother to allocate for just one byte? And it&#39;s not enough for a string, because strings must be 0-terminated"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1520517897, "post_id": 49163105, "comment_id": 85354976, "body": "thank you, you&#39;ve helped me alot, i didn&#39;t actually give it a chance to understand the basics, as for the np, we&#39;re supposed to send the string to a particular child (wich number is np), wich i didn&#39;t mention in the question, i defined tmp because i thought that every child have access to all pipes and should deal with them as a whole"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1520520007, "post_id": 49163105, "comment_id": 85356489, "body": "You need a pipe per child, otherwise the parent wouldn&#39;t know which child is talking and the children would have to synchronize in order to write into the pipe."}, {"owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1520550052, "post_id": 49163105, "comment_id": 85373685, "body": "yeah, after studying the basics and putting some energy and time to it, i understood how it should be done, and i did it, thank you"}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 0, "last_activity_date": 1520466218, "creation_date": 1520466218, "answer_id": 49163105, "question_id": 49161927, "link": "https://stackoverflow.com/questions/49161927/how-to-emplement-n-pipes-for-n-child-processes/49163105#49163105", "title": "how to emplement n pipes for n child processes", "body": "<p>You have many conceptual errors.</p>\n\n<ol>\n<li><p>You cannot close the reading end of the pipes before you do the <code>fork</code>. The\nchildren inherit the status of the file descriptors of the parents, you have to\n<code>fork</code> and then close the reading end of the pipe <strong>in the parent</strong> process</p></li>\n<li><p>When you use <code>fork</code>, you have to write code for the child process and for the\n<code>parent</code> process. You are not doing that, but not at the correct place. You do</p>\n\n<pre><code>printf(\"cr\u00e9ation des fils...\\n\");\n\nfor(i=0; i&lt;tmp; i++){\n    if((pid[i] = fork()) == -1){\n        perror(\"Erreur lors du cr\u00e9ation des fils\");\n        exit(EXIT_FAILURE);\n    }\n}\n</code></pre>\n\n<p>here you are creating way to many children, the children and also executing\n<code>fork</code> in the next iterations, you don't end up with a few children, but with a\nwhole army of children. Depending on how large <code>tmp</code> is, you might consume all\n<code>fork</code> allowed for a process. Only the parent should do the <code>fork</code> in your case\n(see my code below).</p></li>\n<li><p>This code:</p>\n\n<pre><code>chaine = (char*) malloc(sizeof(char));\n\nif(scanf(\"%s %d\", chaine, &amp;np) != 2){\n    perror(\"Erreur de lecture de la chaine ou du num\u00e9ro du processus fils\\n\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>You <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">should not cast <code>malloc</code></a> and here you are allocating space for <strong>one</strong>\ncharcter, why even bother to dynamically allocate memory for a single character.\nThen you use in <code>scanf</code> for reading a string. This overflows the buffer, because\na string is <code>'\\0'</code>-terminated and even for a string of length 1 you need 2\nspaces.</p></li>\n<li><p>I don't really understand what's the meaning of <code>np</code>, but later on you do</p>\n\n<pre><code>if(write(tube[np][TUBE_ECRITURE],chaine,sizeof(chaine)) == -1){\n</code></pre>\n\n<p>but you never check if <code>np</code> is in the range [0-<code>MAX_PROCESS</code>], you might access\nthe pipes array out of bounds.</p></li>\n<li><p>Here</p>\n\n<pre><code>if(write(tube[np][TUBE_ECRITURE],chaine,sizeof(chaine)) == -1){\n</code></pre>\n\n<p><code>sizeof(chaine)</code> gives the size of pointer, but if are trying to send a string,\nyou should write <code>strlen(chaine)+1</code> bytes, the <code>+1</code> is for the <code>\\0</code>-terminating\nbyte otherwise the child on the other side of the pipe cannot know how many\nbytes it should read for the string.</p></li>\n<li><p><code>perror</code> should only be used when a function returns an error value and sets\n<code>errno</code>. At the beginning of the code, if <code>argc != 2</code>, then this does not set\n<code>errno</code> to any value, using <code>perror</code> will print a missleading error message. You\nshould use <code>fprintf(stderr, \"...</code> instead.</p></li>\n</ol>\n\n<p>So this is a version (without the <code>fils</code> function, because I don't know what it\ndoes) that shows you how to <code>fork</code> and send data through the pipes.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_PROCESS 5\n\nint child_process(int id, int tube[2], int np)\n{\n    int ret = 0;\n    char buffer[100] = {0};\n    printf(\" Child %d, attempt to read 100 characters from parent. np is: %d\\n\", id, np);\n\n    // closing writing end\n    close(tube[1]);\n\n    ssize_t size = read(tube[0], buffer, sizeof buffer);\n\n    if(size &lt;= 0)\n    {\n        printf(\" Child %d, could not read from parent\\n\", id);\n        ret = 1;\n    } else {\n        // making sure to \\0-terminate string\n        if(buffer[size] != 0)\n            buffer[size - ( size == sizeof(buffer) ? 1 : 0)] = 0;\n        printf(\" Child %d: parent sent '%s'\\n\", id, buffer);\n    }\n\n    // closing reading end\n    close(tube[0]);\n\n    return ret;\n}\n\nint main(int argc, char **argv)\n{\n    int tube[MAX_PROCESS][2], i;\n    pid_t pid[MAX_PROCESS];\n\n    if(argc != 2){\n        fprintf(stderr, \"Error : nombre d'arguments est invalide\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n\n    int noc = atoi(argv[1]);\n\n    if(noc &lt;= 0 || noc &gt; MAX_PROCESS)\n    {\n        fprintf(stderr, \"Erreur : nombre de processus fils doit \u00e9tre inf\u00e9rieure a %d\", MAX_PROCESS);\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"lecture a partir du clavier d'une chaine et du num\u00e9ro du fils voulu : \\n\");\n\n    char chaine[100];\n    int np;\n\n    if(scanf(\"%99s %d\", chaine, &amp;np) != 2)\n    {\n        fprintf(stderr, \"Erreur de lecture de la chaine ou du num\u00e9ro du processus fils\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    if(np &lt; 0 || np &gt;= MAX_PROCESS)\n    {\n        fprintf(stderr, \"Error: np must be in range [0 - %d]\\n\", MAX_PROCESS-1);\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"cr\u00e9ation des fils...\\n\");\n\n\n    for(i = 0; i &lt; noc; ++i)\n    {\n        if(pipe(tube[i]) == -1)\n        {\n            perror(\"pipe\");\n            exit(EXIT_FAILURE);\n        }\n\n        pid[i] = fork();\n\n        if(pid[i] == -1)\n        {\n            perror(\"fork\");\n            exit(EXIT_FAILURE);\n        }\n\n        if(pid[i] == 0)\n        {\n            // CHILD PROC\n            exit(child_process(i, tube[i], np));\n        }\n\n        // PARENT PROC\n        // closing reading end\n        close(tube[i][0]);\n    }\n\n    // parent sends data to children\n    for(i = 0; i &lt; noc; ++i)\n    {\n        size_t len = strlen(chaine) + 1;\n        if(write(tube[i][1], chaine, len) != len)\n            fprintf(stderr, \"Parent could not send the whole string to the child %d\\n\", i);\n\n        // closing writing pipe\n        close(tube[i][1]);\n    }\n\n    for(i = 0; i &lt; noc; ++i)\n    {\n        if(waitpid(pid[i],NULL, 0) == -1){\n            fprintf(stderr,\"Erreur lors de l'attente du fils %d\\n\",i);\n            exit(EXIT_FAILURE);\n        }\n        else\n            printf(\"le fils %d a termin\u00e9\\n\", i);\n    }\n\n\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Which has this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./a 5\nlecture a partir du clavier d'une chaine et du num\u00e9ro du fils voulu : \nHelloWorld 3\ncr\u00e9ation des fils...\n Child 0, attempt to read 100 characters from parent. np is: 3\n Child 1, attempt to read 100 characters from parent. np is: 3\n Child 2, attempt to read 100 characters from parent. np is: 3\n Child 0: parent sent 'HelloWorld'\n Child 2: parent sent 'HelloWorld'\n Child 3, attempt to read 100 characters from parent. np is: 3\n Child 1: parent sent 'HelloWorld'\n Child 3: parent sent 'HelloWorld'\n Child 4, attempt to read 100 characters from parent. np is: 3\n Child 4: parent sent 'HelloWorld'\nle fils 0 a termin\u00e9\nle fils 1 a termin\u00e9\nle fils 2 a termin\u00e9\nle fils 3 a termin\u00e9\nle fils 4 a termin\u00e9\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 49163105, "answer_count": 1, "score": 1, "last_activity_date": 1520466218, "creation_date": 1520460111, "question_id": 49161927, "link": "https://stackoverflow.com/questions/49161927/how-to-emplement-n-pipes-for-n-child-processes", "title": "how to emplement n pipes for n child processes", "body": "<p>I have this code that is supposedly creating n childs and n pipes (n given as an argument to the main) and what i am trying to do is to send a char* to a specified child using the convenient pipe throught  read/write  system calls and it's not actually working (i'm a newbie in system programming)</p>\n\n<p>This is the main</p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\nint tmp,np;\nint tube[MAX_PROCESS][2], i;\npid_t pid[MAX_PROCESS];\nchar *chaine;\n\n\nif(argc != 2){\n    perror(\"Error : nombre d'arguments est invalide\\n\");\n    exit(EXIT_FAILURE);\n}\n\ntmp = atoi(argv[1]);\n\nif(tmp &gt; 10){\n    fprintf(stderr,\"Erreur : nombre de processus fils doit \u00e9tre inf\u00e9rieure a %d\", MAX_PROCESS);\n    exit(EXIT_FAILURE);\n}\nfor(i=0;i&lt;tmp;i++){\n    if(pipe(tube[i]) == -1){\n        perror(\"Erreur lors du cr\u00e9ation du tube\");\n        exit(EXIT_FAILURE);\n    }\n}\nprintf(\"fermeture des tubes de lecture dans le pere\\n\");\n\nfor(i=0; i &lt; tmp; i++){\n\n            if(close(tube[i][TUBE_LECTURE]) == -1){\n                fprintf(stderr,\"Erreur lors la fermeture de tube de lecture %d\\n\",i);\n                exit(EXIT_FAILURE);\n            }else\n                printf(\"tube %d ferm\u00e9\\n\", i);\n}\n\n\nprintf(\"lecture a partir du clavier d'une chaine et du num\u00e9ro du fils voulu : \\n\");\n\nchaine = (char*) malloc(sizeof(char));\n\nif(scanf(\"%s %d\", chaine, &amp;np) != 2){\n    perror(\"Erreur de lecture de la chaine ou du num\u00e9ro du processus fils\\n\");\n    exit(EXIT_FAILURE);\n}\n\n\nprintf(\"cr\u00e9ation des fils...\\n\");\n\nfor(i=0; i&lt;tmp; i++){\n    if((pid[i] = fork()) == -1){\n        perror(\"Erreur lors du cr\u00e9ation des fils\");\n        exit(EXIT_FAILURE);\n    }\n}\n\n\nprintf(\"Initialisation fonction 'fils'\\n\");\nfor(i=0;i&lt;tmp;i++) {\n    if(pid[i] == 0)\n        fils(np,tmp,tube);\n}\n\nprintf(\"ecriture dans le tube\\n\");\n\nif(write(tube[np][TUBE_ECRITURE],chaine,sizeof(chaine)) == -1){\n    perror(\"Erreur ecriture dans le tube\\n\");\n    exit(EXIT_FAILURE);\n}\n\n/*fermeture des tubes d'\u00e9criture*/\n\nfor(i=0; i&lt; tmp; i++){\n    if(close(tube[i][TUBE_ECRITURE]) == -1){\n        perror(\"Erreur lors la fermeture de tube de l'\u00e9criture\\n\");\n        exit(EXIT_FAILURE);\n    }\n}\n\n/*attente des fils*/\n\nfor(i=0;i&lt;tmp;i++){\n    if(waitpid(pid[i],NULL, 0) == -1){\n        fprintf(stderr,\"Erreur lors de l'attente du fils %d\",i);\n        exit(EXIT_FAILURE);\n    }\n    else\n        printf(\"le fils %d a termin\u00e9\\n\", i);\n}\n\nprintf(\"tous les fils ont termin\u00e9\\n\");\n\n\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>it's printing the following error : </p>\n\n<pre><code>  fermeture des tubes de lecture dans le pere\n  tube 0 ferm\u00e9\n  tube 1 ferm\u00e9\n  tube 2 ferm\u00e9\n  tube 3 ferm\u00e9\n  lecture a partir du clavier d'une chaine et du num\u00e9ro du fils voulu : \n  yassine\n  2\n  cr\u00e9ation des fils...\n  Initialisation fonction 'fils'\n  ecriture dans le tube\n  Initialisation fonction 'fils'\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Initialisation fonction 'fils'\n  Erreur lors de la lecture Bad file descriptor\n  Erreur lors de la lecture Bad file descriptor\n</code></pre>\n"}, {"tags": ["c", "visual-c++", "g++", "gmp"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 2, "creation_date": 1520461873, "post_id": 49161722, "comment_id": 85330293, "body": "<a href=\"https://stackoverflow.com/q/37546340/1918193\">stackoverflow.com/q/37546340/1918193</a> (the error is from Microsoft idiotically turning a bad warning into an error)."}, {"owner": {"reputation": 907, "user_id": 4902934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4eaa9bc5abc512bb9851552d880a260c?s=128&d=identicon&r=PG&f=1", "display_name": "HienPham", "link": "https://stackoverflow.com/users/4902934/hienpham"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1520465130, "post_id": 49161722, "comment_id": 85331528, "body": "Thank you very much, now I can sleep without frustration."}], "owner": {"reputation": 907, "user_id": 4902934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4eaa9bc5abc512bb9851552d880a260c?s=128&d=identicon&r=PG&f=1", "display_name": "HienPham", "link": "https://stackoverflow.com/users/4902934/hienpham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520459058, "creation_date": 1520459058, "question_id": 49161722, "link": "https://stackoverflow.com/questions/49161722/gmp-library-error-c4416-unary-minus-operator-applied-to-unsigned-type-result-st", "title": "GMP Library error C4416 unary minus operator applied to unsigned type, result still unsigned", "body": "<p>I have tried to install the GMP Library on Visual C++ for coding with big integers. The installation is good, I've used \"make check\" to test the gmp and everything is fine. But when I tried to build any simple code, it gives an error:</p>\n\n<pre><code> \"C4416 unary minus operator applied to unsigned type, result still unsigned    TestGMP h:\\gmp\\include\\gmp.h    2197\" \n</code></pre>\n\n<p>Apparently, this error comes from the header file itself. I have tried to solve this bug a whole day but no result. I've tried re-install, install another version of GMP everything I can find on the internet. I even tried to install MPIR( but failed due to another unknown reason) and it's still the same.</p>\n\n<p>I know the meaning of the erro and doing the trick of:</p>\n\n<pre><code>#define INT_MIN (-2147483647 - 1)\n</code></pre>\n\n<p>is not working. Is GMP library supposed to let us operate outside of that range ?\nIs this because I used the Community version of Microsoft Visual C++? If it's not then I don't know what it is. Any help will be greatly appreciated.</p>\n"}, {"tags": ["c", "gcc", "compiler-optimization", "numerical-stability"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520458962, "post_id": 49161662, "comment_id": 85329055, "body": "What? It does respect the <i>semantics</i> of your program and is guaranteed to produce the result fully identical to these semantics as long as you are not violating any rules defined in the C standard. But <i>how</i> it is doing it - it is mostly up to the compiler."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1520459143, "post_id": 49161662, "comment_id": 85329137, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7420665/what-does-gccs-ffast-math-actually-do\">What does gcc&#39;s ffast-math actually do?</a>"}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 1, "creation_date": 1520459791, "post_id": 49161662, "comment_id": 85329418, "body": "Just dont add -Ofast -funsafe-math-optimizations or -ffast-math if that is what you want.  Normal optimizations like -O1, -Os, -O2 or -O3 <i>shouldnt</i>."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 1, "creation_date": 1520467196, "post_id": 49161662, "comment_id": 85332120, "body": "@technosaurus it is very probable that the optimisation level may change the order of the evaluation - and the results may vary."}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1520474839, "post_id": 49161662, "comment_id": 85334034, "body": "@PeterJ_01 then your compiler is not standards compliant or you have &quot;unsafe&quot; optimizations enabled that you didn&#39;t realize.  Older compilers did do this a long time ago (~2 decades) ... so unless your compiler is really old or you allow a broken build system to dictate your optimization options - very improbable."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1520505528, "post_id": 49161662, "comment_id": 85347112, "body": "Ok. Maybe I remember it from the far past. Anyway IMO it is better to be sure than to relay on the correctness of the compiler and self esteem. 90% of silly difficult to debug errors come from the wrong assumptions and are easy to prevent. I prefer to be safe by adding couple of parentheses to my code than sorry."}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1520463287, "post_id": 49161795, "comment_id": 85330864, "body": "It is not 100% the truth. There is no particular order of the expression evaluation, with respect of the operator precedence and parentheses. The result of the float operations can be different as the result of the float operations can be different if the order of evaluation is changed. To avoid such problems use the parentheses"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1520464262, "post_id": 49161795, "comment_id": 85331252, "body": "@PeterJ_01 I am not talking about the order of evaluation, it is implementation defined. It is true that picking a particular order of evaluation may influence the value of the expression. However, if the original expression is supposed to evaluate something that yields an exception, call some function with side effects twice, etc., the compiler cannot rewrite the expression to produce the side effect only once, or to avoid an exception. For example, compilers cannot rewrite <code>float x = ..., a = 1, b = a &#47; x * x;</code> as <code>b = a</code>, because that would eliminate a possible division by zero."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1520466777, "post_id": 49161795, "comment_id": 85331995, "body": "Yes but the question IMO is about something else. He has asked if he can be 100% sure the he will get the same result in the different compilation environments. But there is no such a guarantee, The results may vary,"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1520468444, "post_id": 49161795, "comment_id": 85332448, "body": "@PeterJ_01 No. Refer to <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.3p6\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#5.1.2.3p6</a> - the output produced has to be identical to the abstract machine output. So if rearranging of operations will lead to a different output - it should not occur."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1520469034, "post_id": 49161795, "comment_id": 85332588, "body": "From my experience compilers do rearrange.IMO oo be 100% sure is safer to use more parentheses than necessary if the order of the evaluation is critical."}, {"owner": {"reputation": 409, "user_id": 2646908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c4b91d774f3a3a0414830205cf19601?s=128&d=identicon&r=PG&f=1", "display_name": "physics_researcher", "link": "https://stackoverflow.com/users/2646908/physics-researcher"}, "edited": false, "score": 0, "creation_date": 1520474360, "post_id": 49161795, "comment_id": 85333934, "body": "I&#39;ve edited my question; I&#39;ve specified that all the variables are declared as double."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1520478522, "post_id": 49161795, "comment_id": 85334908, "body": "Order of evaluation isn&#39;t implementation-defined. If there are no sequencing relations involved then it&#39;s unspecified."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 409, "user_id": 2646908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c4b91d774f3a3a0414830205cf19601?s=128&d=identicon&r=PG&f=1", "display_name": "physics_researcher", "link": "https://stackoverflow.com/users/2646908/physics-researcher"}, "edited": false, "score": 0, "creation_date": 1520479562, "post_id": 49161795, "comment_id": 85335149, "body": "@Justin Even with all <code>double</code>s your conversion would be invalid, because the product of large <code>d</code> and <code>e</code> in the numerator may overflow <code>double</code>. The compiler cannot change your formula to introduce an overflow in the intermediate result; it is also not allowed to rearrange the formula make an overflow in the intermediate result disappear."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1520459363, "creation_date": 1520459363, "answer_id": 49161795, "question_id": 49161662, "link": "https://stackoverflow.com/questions/49161662/does-the-gcc-compiler-respect-the-form-of-expressions-as-written-in-my-code/49161795#49161795", "title": "Does the gcc compiler respect the form of expressions as written in my code?", "body": "<p>The compiler is guaranteed to produce an expression that yields an equivalent result to evaluating your formula as it is written. This includes all type conversions, side effects, and exceptions the expressions may produce.</p>\n\n<p>In particular, your way to optimize the expression would not pass the equivalency test, because <code>((b+c) / d)</code> in the original expression would be evaluated in terms of the types of <code>b</code>, <code>c</code>, and <code>d</code>, which could be <code>int</code> or <code>float</code>; your second (optimized) formula, on the other hand, forces the <code>double</code> type on the entire expression because of addition of <code>3.14</code>. It also multiplies <code>e</code> by <code>d</code> in the numerator to compensate for <code>d*f</code> in the denominator, which may produce an overflow that did not exist in the original formula.</p>\n"}], "owner": {"reputation": 409, "user_id": 2646908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c4b91d774f3a3a0414830205cf19601?s=128&d=identicon&r=PG&f=1", "display_name": "physics_researcher", "link": "https://stackoverflow.com/users/2646908/physics-researcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 49161795, "answer_count": 1, "score": 2, "last_activity_date": 1520474274, "creation_date": 1520458810, "last_edit_date": 1520474274, "question_id": 49161662, "link": "https://stackoverflow.com/questions/49161662/does-the-gcc-compiler-respect-the-form-of-expressions-as-written-in-my-code", "title": "Does the gcc compiler respect the form of expressions as written in my code?", "body": "<p>Say I write an expression in c, for example</p>\n\n<pre><code>a = (((b+c) / d) / f) + ((3.14 * e) ) / f) ;\n</code></pre>\n\n<p>Here a,b,c,d,e,f are all double precision variables. When I compile my code using, for example, the gcc compiler with some optimization setting, does the compiler respect the particular form of the expression as I wrote it, or does it modify the expression to make the code run faster? For example, would/could gcc with -O2 optimization setting compile the above expression to</p>\n\n<pre><code>a = ((b+c + 3.14* d * e) / (d*f))\n</code></pre>\n\n<p>Or would it keep the expression as is? I am concerned about the compiler changing the forms of my equations, which may affect the numerical stability of my expressions.</p>\n"}, {"tags": ["c", "arrays", "algorithm", "shuffle"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1520458714, "post_id": 49161627, "comment_id": 85328924, "body": "Doesn&#39;t sound random to me."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1520459303, "post_id": 49161627, "comment_id": 85329211, "body": "You forgot to ask a question. While you&#39;re thinking about what to ask, please clarify what you&#39;re doing here. A pack of cards normally consists of 52 cards that are all different. The same card can never appear more than once after shuffling. If you&#39;re not talking about playing cards, please elaborate. How many cards are there. What is the purpose of these arbitrary rules about where and when they can appear. But at least ask a question somewhere."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1520472870, "post_id": 49161627, "comment_id": 85333585, "body": "The only ways to get a card three times from a pack are for (1) that pack to contain AT LEAST three of that card or (2)  cards are returned to the pack after selection.    Also, if you want a card to NOT reappear for a time and then reappear, then the selection is definitely not random."}, {"owner": {"reputation": 75, "user_id": 9408379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56915d65dcf3adcedd5e007e88cad779?s=128&d=identicon&r=PG&f=1", "display_name": "Othello", "link": "https://stackoverflow.com/users/9408379/othello"}, "edited": false, "score": 0, "creation_date": 1521131614, "post_id": 49161627, "comment_id": 85611470, "body": "If I have a similar problem to what I have posted before and I have tried using the shuffling algorithm here. Should I post the new question here or open a new post? I am new here hence the stupid question. Apologies in advance."}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "edited": false, "score": 0, "creation_date": 1521241745, "post_id": 49161627, "comment_id": 85663398, "body": "@Othello post your new problem as the new separate question. Definitely not here."}], "answers": [{"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": true, "score": 0, "last_activity_date": 1520648843, "creation_date": 1520648843, "answer_id": 49204731, "question_id": 49161627, "link": "https://stackoverflow.com/questions/49161627/shuffling-algorithm-for-arrays/49204731#49204731", "title": "Shuffling Algorithm for arrays", "body": "<p>The problem can be solved in two steps. </p>\n\n<p>1) We shuffle the auxiliary array to obtain initial placement of the cities.  </p>\n\n<p>We can use FisherYates shuffle algorithm for shuffling the initial array.</p>\n\n<p>2) We randomly decide which city we want to duplicate. We have to be mindful of the restrictions. City can be doubled only one time. If the city is doubled then there are at least <code>6</code> cities between them.</p>\n\n<p>More explanations in the code:</p>\n\n<pre><code>// The requirement for this shuffling is that same city can only appear again after at least six different cities have appeared.\n// A city can only appear twice.\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\n#define STR_LEN                 16\n#define NR_OF_ROWS               3\n#define NR_OF_SMALL_ARRAYS       4\n#define NR_OF_ROWS_IN_BIG_ARRAY  NR_OF_ROWS*NR_OF_SMALL_ARRAYS\n\n#define DOUBLE_COUNTER          12 // number of tries to double the city\n\nvoid copy(char dest[][STR_LEN], char source[][STR_LEN], size_t displacement)\n{\n    size_t i;\n    for (i=0; i&lt;NR_OF_ROWS; i++){\n      strcpy(dest[i+displacement], source[i]);\n    }\n}   \n\nvoid init_shuffle(size_t array[], size_t size)\n{\n    size_t i;\n\n    for (i=0; i&lt;size; i++){\n        array[i] = i;\n    }\n}\n\nvoid print_array(char array[][STR_LEN], size_t size)\n{\n    size_t i;\n    for (i=0; i&lt;size; i++){\n         printf(\"%s \",array[i]);\n    }\n    printf(\"\\n\");\n}\n\nvoid print_shuffle(size_t array[], size_t size)\n{\n    size_t i;\n    for (i=0; i&lt;size; i++){\n         printf(\"%zu \",array[i]);\n    }\n    printf(\"\\n\");\n}\n\nvoid print_corresponding_cities(char array[][STR_LEN], size_t *shuffle, size_t size)\n{\n    size_t i;\n    size_t j;\n\n    for (i=0; i &lt; size; i++){\n\n        j = shuffle[i];\n\n        printf(\"%s \", array[j] );\n    }\n    printf(\"\\n\");\n}\n\nint check_for_repeats(size_t *arr, size_t size, size_t value)\n{\n    size_t i;\n    size_t counter = 0;\n    for (i=0; i&lt;size; i++){\n\n       if(arr[i] == value){\n\n           counter++;\n           if(counter &gt; 1)\n              return 1;  // repeats found\n       }  \n    }\n    return 0;  // no repeats       \n}\n\nint check_for_number_of_repeats(char array[][STR_LEN], size_t *arr, size_t size)\n{\n    size_t i, j;\n    size_t counter = 0;\n    size_t value;\n    int repeats = 0;\n\n    for (j=0; j&lt;size; j++){    \n\n        value = j;\n        counter = 0;\n\n        for (i=0; i&lt;size; i++){\n\n            if(arr[i] == value){\n\n                counter++;\n\n               if(counter &gt; 1){\n                  repeats++;               // repeats found\n                  printf(\"%s \", array[j]); // print the city\n                  break;\n               }\n            }\n        }  \n    }\n    return repeats;          \n}    \n\nvoid FisherYatesShuffle(size_t *arr, int n) { \n\n     size_t i, j; // indexes\n     size_t tmp;  // create local variables to hold values for shuffle\n\n     for (i = n - 1; i &gt; 0; i--) {  // shuffle\n         j = rand() % (i + 1);      // randomise j for shuffle\n         tmp = arr[j];\n         arr[j] = arr[i];\n         arr[i] = tmp;\n     }\n}\n\nint main()\n{\n    size_t i;\n    int no_yes;\n    size_t double_index;\n    time_t t;\n\n    size_t shuffle[NR_OF_ROWS_IN_BIG_ARRAY]; // keep the results\n\n    char array1[NR_OF_ROWS][STR_LEN]={\"Denver0\",\"Boston1\",\"Colorado2\"};\n    char array2[NR_OF_ROWS][STR_LEN]={\"Melbourne3\",\"Sydney4\",\"Canberra5\"};\n    char array3[NR_OF_ROWS][STR_LEN]={\"Paris6\",\"Brussels7\",\"Oslo8\"};\n    char array4[NR_OF_ROWS][STR_LEN]={\"Durban9\",\"Algiers10\",\"FreeTown11\"};\n    char array5[NR_OF_ROWS_IN_BIG_ARRAY][STR_LEN];\n\n    init_shuffle(shuffle, NR_OF_ROWS_IN_BIG_ARRAY);\n    // Initial arrangement:\n    copy(array5, array1, 0*NR_OF_ROWS);\n    copy(array5, array2, 1*NR_OF_ROWS);\n    copy(array5, array3, 2*NR_OF_ROWS);\n    copy(array5, array4, 3*NR_OF_ROWS);\n\n    printf(\"Initial arrangement:\\n\");\n     print_shuffle(shuffle, NR_OF_ROWS_IN_BIG_ARRAY);\n    print_array(array5, NR_OF_ROWS_IN_BIG_ARRAY);\n\n    printf(\"\\n\");\n\n    // Algorithm: \n    // Note:\n    // The shuffling will be done on the auxilliary shuffle array\n    // Once the shuffling is done we can print the cities base on shuffle array values\n\n    // Steps.\n    // 1. We shuffle existing cities.\n\n    // 2. We randomly decide if we want to repeat the city.\n    // 3. If yes, we choose a random city \n    //\n    // 4. Now we have to repeat that city. The requirement is that if we repeat the city\n    // then we have have at least 6 cities between them.\n    // E.g. We want to repat city from index 0 then duplicated city can only be placed at index 7 to 11\n\n    // Index Next city placement:\n    //\n    // 0     7-11  range 5     [7,8,9,10,11]\n    // 1     8-11  range 4 \n    // 2     9-11  range 3\n    // 3     10-11 range 2   \n    // 4     11 fixed position \n    // 5     no placement\n    // x     if (x &gt; 4) no placement possible\n    //       else placement possible in the range  [x+7, 11] \n    //       size of the range is 5-x\n    // 5. we can repeat that procees a few times (DOUBLE_COUNTER). Restriction: A given city can be repeated only 1 time.\n\n    /* Intializes random number generator */\n    srand((unsigned) time(&amp;t));\n\n    // 1. Shuffle\n    printf(\"After the shuffle:\\n\");\n    FisherYatesShuffle(shuffle, NR_OF_ROWS_IN_BIG_ARRAY);\n    print_shuffle(shuffle, NR_OF_ROWS_IN_BIG_ARRAY);\n    print_corresponding_cities(array5, shuffle, NR_OF_ROWS_IN_BIG_ARRAY);\n    printf(\"\\n\");\n\n    // 2. Add cities\n    for(int i=0; i &lt; DOUBLE_COUNTER; i++)\n    {\n        no_yes = rand() % 2; //  add? YES OR NO \n\n        if(no_yes == 0)      // NO\n            continue;\n\n        double_index = rand() %  NR_OF_ROWS_IN_BIG_ARRAY; // which city \n\n        if(double_index &gt; 4)\n             continue;      // NO placement possible\n\n        // check for repeats\n        int rep = check_for_repeats(shuffle, NR_OF_ROWS_IN_BIG_ARRAY, shuffle[double_index]); \n\n        if(rep)\n           continue; // city under this index has a double already \n\n        //-------------------------------------------------------   \n        // OK we need to repeat the city\n        if(double_index == 4)\n        {\n            shuffle[11] = shuffle[double_index];\n            continue;\n        }\n\n        // now we have a choice:\n        int choice = rand() % (5 - double_index);\n\n        // random placement within the range:\n\n        shuffle[double_index +7 + choice] = shuffle[double_index];\n        //-------------------------------------------------------\n    }\n\n    // Results:\n\n    printf(\"Final arrangement after adding double city/cities:\\n\");\n    print_shuffle(shuffle, NR_OF_ROWS_IN_BIG_ARRAY);\n    print_corresponding_cities(array5, shuffle, NR_OF_ROWS_IN_BIG_ARRAY);\n\n    // Stats:\n    printf(\"\\nThese cites occure two times:\\n\");    \n    int nr_rep = check_for_number_of_repeats(array5, shuffle, NR_OF_ROWS_IN_BIG_ARRAY);\n    printf(\"\\nNumber of repeated cities = %d\\n\", nr_rep);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Initial arrangement:                                                                                                                             \n0 1 2 3 4 5 6 7 8 9 10 11                                                                                                                        \nDenver0 Boston1 Colorado2 Melbourne3 Sydney4 Canberra5 Paris6 Brussels7 Oslo8 Durban9 Algiers10 FreeTown11                                       \n\nAfter the shuffle:                                                                                                                               \n5 9 3 11 6 8 4 0 7 2 1 10                                                                                                                        \nCanberra5 Durban9 Melbourne3 FreeTown11 Paris6 Oslo8 Sydney4 Denver0 Brussels7 Colorado2 Boston1 Algiers10                                       \n\nFinal arrangement after adding double city/cities:                                                                                               \n5 9 3 11 6 8 4 0 5 2 1 6                                                                                                                         \nCanberra5 Durban9 Melbourne3 FreeTown11 Paris6 Oslo8 Sydney4 Denver0 Canberra5 Colorado2 Boston1 Paris6                                          \n\nThese cites occure two times:                                                                                                                    \nCanberra5 Paris6                                                                                                                                 \nNumber of repeated cities = 2 \n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 9408379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56915d65dcf3adcedd5e007e88cad779?s=128&d=identicon&r=PG&f=1", "display_name": "Othello", "link": "https://stackoverflow.com/users/9408379/othello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 49204731, "answer_count": 1, "score": -1, "last_activity_date": 1521238448, "creation_date": 1520458673, "last_edit_date": 1521238448, "question_id": 49161627, "link": "https://stackoverflow.com/questions/49161627/shuffling-algorithm-for-arrays", "title": "Shuffling Algorithm for arrays", "body": "<p>I want to shuffle an array of containing a list of cities to generate a result. The requirement for this shuffling is that same city can only appear again after at least six different cities have appeared. The same city must appear only twice. </p>\n\n<p>I messed up using a different scenario before but I am new on here and getting used to how to post codes that I am struggling with. Any help would be appreciated. <code>Array5</code> is the array to be shuffled.</p>\n\n<p>Cities to be shuffled:</p>\n\n<pre><code>Boston, Durban, Melbourne, Paris, Denver, Algiers, Freetown, Sydney, Colorado, Oslo, Melbourne, Brussels\n</code></pre>\n\n<p>I have included my code below: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int i,j,count;\n\n   char array1[3][10]={\"Denver\",\"Boston\",\"Colorado\"};\n   char array2[3][10]={\"Melbourne\",\"Sydney\",\"Canberra\"};\n   char array3[3][10]={\"Paris\",\"Brussels\",\"Oslo\"};\n   char array4[3][10]={\"Durban\",\"Algiers\",\"Freetown\"};\n\n   char array5[12][10];\n\n   for (i=0;i&lt;3;i++){\n       strcpy(array5[i],array1[i]);\n   }\n\n   for (i=0;i&lt;3;i++){\n       strcpy(array5[i+3],array2[i]);\n   }\n\n   for (i=0;i&lt;3;i++){\n       strcpy(array5[i+6],array3[i]);\n   }\n\n   for (i=0;i&lt;3;i++){\n       strcpy(array5[i+9],array4[i]);\n   }\n\n   for (i=0;i&lt;12;i++)\n       printf(\"%s\\t\\n\",array5[i]);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1520455722, "post_id": 49160849, "comment_id": 85327432, "body": "Actually, looking at <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">the documentation</a> I think it is valid. <i>If there are more arguments than required by format, the extraneous arguments are evaluated and ignored</i>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1520455773, "post_id": 49160849, "comment_id": 85327455, "body": "@Kevin It is actually valid and I removed my comment saying it is not.."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520455794, "post_id": 49160849, "comment_id": 85327466, "body": "@EugeneSh. so did I :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1520455821, "post_id": 49160849, "comment_id": 85327478, "body": "for reference <a href=\"https://stackoverflow.com/questions/3578970/passing-too-many-arguments-to-printf\" title=\"passing too many arguments to printf\">stackoverflow.com/questions/3578970/&hellip;</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520459011, "post_id": 49160849, "comment_id": 85329076, "body": "See <a href=\"https://stackoverflow.com/questions/204476/\">What should <code>main()</code> return in C and C++</a> for lots of reasons why <code>void main()</code> is dubious."}], "answers": [{"tags": [], "owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "is_accepted": false, "score": 2, "last_activity_date": 1520455651, "creation_date": 1520455651, "answer_id": 49160918, "question_id": 49160849, "link": "https://stackoverflow.com/questions/49160849/why-is-the-following-program-valid-and-why-does-it-output-worldhello/49160918#49160918", "title": "Why is the following program valid and why does it output &quot;worldhello&quot;?", "body": "<p>The <code>printf</code> function which prints <code>world</code> runs first as <code>C</code> cannot execute the first <code>printf</code> until all of its arguments have been evaluated (as it evaluates extra arguments supplied before the main one) meaning that it waits for <code>'world'</code> to be printed before printing <code>'hello'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": true, "score": 2, "last_activity_date": 1520458003, "creation_date": 1520458003, "answer_id": 49161489, "question_id": 49160849, "link": "https://stackoverflow.com/questions/49160849/why-is-the-following-program-valid-and-why-does-it-output-worldhello/49161489#49161489", "title": "Why is the following program valid and why does it output &quot;worldhello&quot;?", "body": "<p>From the documentation for <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>printf</code></a>:</p>\n\n<blockquote>\n  <p>If there are fewer arguments than required by format, the behavior is\n  undefined. If there are more arguments than required by format, the\n  extraneous arguments are <strong>evaluated</strong> and ignored.</p>\n</blockquote>\n\n<p>The output of the program is:</p>\n\n<pre><code>worldhello\n</code></pre>\n\n<p>The argument of the first <code>printf</code> is:\n   <code>printf(\"world\")</code></p>\n\n<p>Since the argument is a function, the function will be called producing word:</p>\n\n<pre><code>word\n</code></pre>\n\n<p>Then first <code>printf</code> will print <code>hello</code>. Those prints together will give you:</p>\n\n<pre><code>worldhello\n</code></pre>\n\n<p>Try this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\n    printf(\" hello! %d\",printf(\"world\"));\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>world hello! 5 \n</code></pre>\n\n<p>If <code>printf</code> is successful the total number of characters written is returned. On failure, a negative number is returned.</p>\n"}], "owner": {"reputation": 39, "user_id": 9306660, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mVf57IdbxHI/AAAAAAAAAAI/AAAAAAAABNk/lw6k5CMu5dg/photo.jpg?sz=128", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/9306660/sandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 49161489, "answer_count": 2, "score": 0, "last_activity_date": 1520459107, "creation_date": 1520455415, "last_edit_date": 1520459107, "question_id": 49160849, "link": "https://stackoverflow.com/questions/49160849/why-is-the-following-program-valid-and-why-does-it-output-worldhello", "title": "Why is the following program valid and why does it output &quot;worldhello&quot;?", "body": "<p>What is the output of the following program?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\n    printf(\"hello\",printf(\"world\"));\n}\n</code></pre>\n"}, {"tags": ["c", "bash", "shell", "zsh", "bash4"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1520455006, "post_id": 49160631, "comment_id": 85327063, "body": "The problem is that stdio buffers its input. Even though <code>fgets()</code> only returns one line, it has put the rest of standard input into its internal input buffer, and it&#39;s no longer available for <code>&#47;bin&#47;sh</code> to read."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520455193, "post_id": 49160631, "comment_id": 85327150, "body": "See <a href=\"https://stackoverflow.com/questions/20342772/buffered-and-unbuffered-inputs-in-c\" title=\"buffered and unbuffered inputs in c\">stackoverflow.com/questions/20342772/&hellip;</a> for how to disable input buffering."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1520455170, "post_id": 49160771, "comment_id": 85327139, "body": "See <a href=\"https://stackoverflow.com/questions/20342772/buffered-and-unbuffered-inputs-in-c\" title=\"buffered and unbuffered inputs in c\">stackoverflow.com/questions/20342772/&hellip;</a> for how to disable buffering with stdio"}, {"owner": {"reputation": 1798, "user_id": 5405361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a96d89ccf2e89748a3e8896be99d83b9?s=128&d=identicon&r=PG&f=1", "display_name": "Bilow", "link": "https://stackoverflow.com/users/5405361/bilow"}, "edited": false, "score": 0, "creation_date": 1520456424, "post_id": 49160771, "comment_id": 85327793, "body": "Nice catch for the buffering and race condition. Could you please check out my edit?"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 1798, "user_id": 5405361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a96d89ccf2e89748a3e8896be99d83b9?s=128&d=identicon&r=PG&f=1", "display_name": "Bilow", "link": "https://stackoverflow.com/users/5405361/bilow"}, "edited": false, "score": 0, "creation_date": 1520457441, "post_id": 49160771, "comment_id": 85328292, "body": "@Bilow It&#39;s still a race condition, you&#39;re just rigging the race. <code>(python -c &quot;print &#39;&#39;&quot; ; echo ls) | (sleep 1; .&#47;a.out)</code> makes it fail again. If you adjust the <code>1</code> down to a system specific value, maybe <code>0.01</code> or so, you can run it repeatedly and see that it sometimes works and sometimes fails."}, {"owner": {"reputation": 1798, "user_id": 5405361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a96d89ccf2e89748a3e8896be99d83b9?s=128&d=identicon&r=PG&f=1", "display_name": "Bilow", "link": "https://stackoverflow.com/users/5405361/bilow"}, "edited": false, "score": 0, "creation_date": 1520459448, "post_id": 49160771, "comment_id": 85329276, "body": "Since it is for buffer overflow exploitation it will do the trick. Now I understand what is happening. Thank you"}], "tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 1, "last_activity_date": 1520455018, "creation_date": 1520455018, "answer_id": 49160771, "question_id": 49160631, "link": "https://stackoverflow.com/questions/49160631/bash-reopen-tty-on-simple-program/49160771#49160771", "title": "Bash reopen tty on simple program", "body": "<p><code>strace</code> shows what's going on:</p>\n\n<pre><code>$ ( echo; echo ls; ) | strace ./foo\n[...]\nread(0, \"\\nls\\n\", 4096)                 = 4\n[...]\nclone(child_stack=NULL, flags=CLONE_PARENT_SETTID|SIGCHLD, parent_tidptr=0x7ffdefc88b9c) = 9680\n</code></pre>\n\n<p>In other words, your program reads a whole 4096 byte buffer that includes both lines before it runs your shell. It's fine interactively, because by the time the read happens, there's only one line in the pipe buffer, so over-reading is not possible. </p>\n\n<p>You instead need to stop reading after the first <code>\\n</code>, and the only way to do that is to read byte by byte until you hit it. I don't know libc well enough to know if this kind of functionality is supported, but here it is with <code>read</code> directly:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char buf[1];\n    while((read(0, buf, 1)) == 1 &amp;&amp; buf[0] != '\\n');\n    system(\"/bin/sh\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1798, "user_id": 5405361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a96d89ccf2e89748a3e8896be99d83b9?s=128&d=identicon&r=PG&f=1", "display_name": "Bilow", "link": "https://stackoverflow.com/users/5405361/bilow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 49160771, "answer_count": 1, "score": 1, "last_activity_date": 1520456228, "creation_date": 1520454395, "last_edit_date": 1520456228, "question_id": 49160631, "link": "https://stackoverflow.com/questions/49160631/bash-reopen-tty-on-simple-program", "title": "Bash reopen tty on simple program", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char buf[512];\n    fgets(buf, 512, stdin);\n    system(\"/bin/sh\");\n}\n</code></pre>\n\n<p>Compile with <code>cc main.c</code></p>\n\n<p>I would like a one-line command that makes this program run <code>ls</code> without it waiting for user input.</p>\n\n<pre><code># This does not work - it prints nothing\n(echo ; echo ls) | ./a.out\n\n# This does work if you type ls manually\n(echo ; cat) | ./a.out\n</code></pre>\n\n<p>I'm wondering:</p>\n\n<ul>\n<li>Why doesn't the first example work?</li>\n<li>What command would make the program run <code>ls</code>, without changing the source?</li>\n</ul>\n\n<p>My question is shell and OS-agnostic but I would like it to work at least on bash 4.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>While testing out the answers, I found out that this works.</p>\n\n<pre><code>(python -c \"print ''\" ; echo ls) | ./a.out\n</code></pre>\n\n<p>Using strace:</p>\n\n<pre><code>$ (python -c \"print ''\" ; echo ls) | strace ./a.out\n...\nread(0, \"\\n\", 4096)\n...\n</code></pre>\n\n<p>This also works:</p>\n\n<pre><code>(echo ; sleep 0.1; echo ls) | ./a.out\n</code></pre>\n\n<p>It seems like the buffering is ignored. Is this due to the race condition?</p>\n"}, {"tags": ["c", "c++11", "g++"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520455021, "post_id": 49160596, "comment_id": 85327072, "body": "&quot;C code in C++&quot; is actually a C++ code."}, {"owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520456404, "post_id": 49160596, "comment_id": 85327777, "body": "I meant C style code but yes it&#39;s C++ code as well."}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1520456578, "post_id": 49160596, "comment_id": 85327878, "body": "What version of gcc?  I can&#39;t reproduce with gcc 7.3.0, it gives me bitwise identical 7.3KiB files in C++03, 11, and 14 modes."}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1520456726, "post_id": 49160596, "comment_id": 85327951, "body": "I cannot reproduce this either, gcc 4.8 <code>ls -h</code> gives me 6.3K for <code>.&#47;a.out</code> with <code>g++ -std=c++11 -Os -s code.cpp</code>"}, {"owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "edited": false, "score": 0, "creation_date": 1520456760, "post_id": 49160596, "comment_id": 85327965, "body": "I have g++ 6.3.0"}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 1, "creation_date": 1520456849, "post_id": 49160596, "comment_id": 85328012, "body": "What OS are you using?"}, {"owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "edited": false, "score": 0, "creation_date": 1520456977, "post_id": 49160596, "comment_id": 85328071, "body": "Windows 8.1 pro. I&#39;ll try it out on linux too in a moment"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1520457074, "post_id": 49160596, "comment_id": 85328123, "body": "@Levi: Try running <code>objdump -t your_binary | c++filt</code> or whatever is the Windows equivalent. Also, maybe it&#39;s some weird GCC-on-Windows issue."}, {"owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1520458792, "post_id": 49160596, "comment_id": 85328969, "body": "@einpoklum thanks for the suggestion. I can&#39;t replicate it on linux so probably a weird windows case."}], "owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1520457330, "creation_date": 1520454247, "last_edit_date": 1520457330, "question_id": 49160596, "link": "https://stackoverflow.com/questions/49160596/std-c11-flag-increases-executable-size", "title": "-std=c++11 flag increases executable size", "body": "<p>Having C style code in C++ like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"hi\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Executable size normally is: 8.50 KB. (Optimized for size with -Os -s)</p>\n\n<p>When added -std=c++11, the size grows to 32.50 KB.</p>\n\n<p>Does it have anything to do with stdio.h or why does the size change?</p>\n\n<p>Tested with g++ version 6.3.0 on code::blocks. OS: Windows 8.1 pro</p>\n"}, {"tags": ["c", "linux", "perf"], "answers": [{"comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 2, "creation_date": 1520508865, "post_id": 49165274, "comment_id": 85349084, "body": "This is a good answer, however one interesting part - reading from <code>mpage</code> - is missing. Would you be willing to extend the answer by that?"}, {"owner": {"reputation": 872, "user_id": 644470, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a33421d2bcd8a9924c8a516619c2731?s=128&d=identicon&r=PG", "display_name": "Michael McLoughlin", "link": "https://stackoverflow.com/users/644470/michael-mcloughlin"}, "edited": false, "score": 0, "creation_date": 1520535574, "post_id": 49165274, "comment_id": 85366635, "body": "Really appreciate you taking the time to answer. A few things 1. I&#39;m also interested in the code to access the mmaped ring buffer. 2. I also expected to see <code>pe.sample_freq</code> or <code>pe.sample_period</code> set to some value? 3. Can you confirm the interpretation of <code>pe.sample_period</code>: when combined with <code>PERF_COUNT_HW_INSTRUCTIONS</code> does this mean we sample every <code>pe.sample_period</code> retired instructions."}], "tags": [], "owner": {"reputation": 1793, "user_id": 2368452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f2bbaefe3c6b34dcd2c5a26243ea62?s=128&d=identicon&r=PG", "display_name": "Arnabjyoti Kalita", "link": "https://stackoverflow.com/users/2368452/arnabjyoti-kalita"}, "is_accepted": true, "score": 4, "last_activity_date": 1520547953, "last_edit_date": 1520547953, "creation_date": 1520482173, "answer_id": 49165274, "question_id": 49160450, "link": "https://stackoverflow.com/questions/49160450/emulate-perf-record-g-with-perf-event-open/49165274#49165274", "title": "Emulate `perf record -g` with `perf_event_open`", "body": "<p>The best way to learn about this would be to read the Linux kernel source code and see how you can emulate <code>perf record -g</code> yourself.</p>\n\n<p>As you correctly identified, recording of <code>perf events</code> would start with the system call <code>perf_event_open</code>. So that is where we can start,</p>\n\n<p><a href=\"https://elixir.bootlin.com/linux/latest/source/kernel/events/core.c#L9862\" rel=\"nofollow noreferrer\">definition of perf_event_open</a></p>\n\n<p>If you observe the parameters of the system call, you will see that the first parameter is a <strong>struct perf_event_attr *</strong> type. This is the parameter that takes in the attributes for the system call. This is what you need to modify to record callchains. A sample code could be like this (remember you can tweak other parameters and members of the struct perf_event_attr the way you want) :</p>\n\n<pre><code>     int buf_size_shift = 8;\n\n     static unsigned perf_mmap_size(int buf_size_shift)\n     {\n       return ((1U &lt;&lt; buf_size_shift) + 1) * sysconf(_SC_PAGESIZE);\n     }\n\n\n     int main(int argc, char **argv)\n     {\n\n       struct perf_event_attr pe;\n       long long count;\n       int fd;\n\n       memset(&amp;pe, 0, sizeof(struct perf_event_attr));\n       pe.type = PERF_TYPE_HARDWARE;\n       pe.sample_type = PERF_SAMPLE_CALLCHAIN; /* this is what allows you to obtain callchains */\n\n       pe.size = sizeof(struct perf_event_attr);\n       pe.config = PERF_COUNT_HW_INSTRUCTIONS;\n       pe.disabled = 1;\n       pe.exclude_kernel = 1;\n       pe.sample_period = 1000;\n       pe.exclude_hv = 1;\n\n       fd = perf_event_open(&amp;pe, 0, -1, -1, 0); \n       if (fd == -1) {\n          fprintf(stderr, \"Error opening leader %llx\\n\", pe.config);\n          exit(EXIT_FAILURE);\n       }\n\n       /* associate a buffer with the file */\n       struct perf_event_mmap_page *mpage;\n       mpage = mmap(NULL,  perf_mmap_size(buf_size_shift),\n        PROT_READ|PROT_WRITE, MAP_SHARED,\n       fd, 0);\n       if (mpage == (struct perf_event_mmap_page *)-1L) {\n        close(fd);\n        return -1;\n       }\n\n       ioctl(fd, PERF_EVENT_IOC_RESET, 0);\n       ioctl(fd, PERF_EVENT_IOC_ENABLE, 0);\n\n       printf(\"Measuring instruction count for this printf\\n\");\n\n       ioctl(fd, PERF_EVENT_IOC_DISABLE, 0);\n       read(fd, &amp;count, sizeof(long long));\n\n       printf(\"Used %lld instructions\\n\", count);\n\n       close(fd);\n     }\n</code></pre>\n\n<p><strong>Note: A nice and easy way to understand the handling of all of these perf events can be seen below -</strong></p>\n\n<p><a href=\"https://github.com/andikleen/pmu-tools\" rel=\"nofollow noreferrer\">PMU-TOOLS by Andi Kleen</a></p>\n\n<p>If you start reading the source code for the system call, you will see that a function <a href=\"https://elixir.bootlin.com/linux/latest/source/kernel/events/core.c#L9976\" rel=\"nofollow noreferrer\">perf_event_alloc</a> is being called. This function, among other things, will setup the buffer for obtaining callchains using <code>perf record</code>.</p>\n\n<p>The function <a href=\"https://elixir.bootlin.com/linux/latest/source/kernel/events/core.c#L9546\" rel=\"nofollow noreferrer\">get_callchain_buffers</a> is responsible for setting up callchain buffers.</p>\n\n<p><code>perf_event_open</code> works via a sampling/counting mechanism where if the performance monitoring counter corresponding to the event you are profiling overflows, then all the event relevant information will be collected and stored into a ring-buffer by the kernel. This ring-buffer can be prepared and accessed via <code>mmap(2)</code>.</p>\n\n<p>Edit #1: </p>\n\n<p>The flowchart describing the use of mmap when doing <code>perf record</code> is shown via the below image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bNlOw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bNlOw.png\" alt=\"enter image description here\"></a></p>\n\n<p>The process of mmaping ring buffers would start from the first function when you call <code>perf record</code> - which is <a href=\"https://elixir.bootlin.com/linux/latest/source/tools/perf/builtin-record.c#L794\" rel=\"nofollow noreferrer\">__cmd_record</a>, this calls <a href=\"https://elixir.bootlin.com/linux/latest/source/tools/perf/builtin-record.c#L332\" rel=\"nofollow noreferrer\">record__open</a>, which then calls <a href=\"https://elixir.bootlin.com/linux/latest/source/tools/perf/builtin-record.c#L327\" rel=\"nofollow noreferrer\">record__mmap</a>, followed by a call to <a href=\"https://elixir.bootlin.com/linux/latest/source/tools/perf/builtin-record.c#L298\" rel=\"nofollow noreferrer\">record__mmap_evlist</a>, which then calls <a href=\"https://elixir.bootlin.com/linux/latest/source/tools/perf/util/evlist.c#L1054\" rel=\"nofollow noreferrer\">perf_evlist__mmap_ex</a>, this is followed by <a href=\"https://elixir.bootlin.com/linux/latest/source/tools/perf/util/evlist.c#L877\" rel=\"nofollow noreferrer\">perf_evlist__mmap_per_cpu</a> and finally ending up in <a href=\"https://elixir.bootlin.com/linux/latest/source/tools/perf/util/evlist.c#L801\" rel=\"nofollow noreferrer\">perf_evlist__mmap_per_evsel</a> which is doing most of the heavy-lifting as far as doing an mmap for each event is concerned.</p>\n\n<p>Edit #2:</p>\n\n<p>Yes you are correct. When you set the sample period to be, say, a 1000, this means for every 1000th occurrence of the event(which by default is <strong>cycles</strong>), the kernel will record a sample of this event into this buffer. This means the <code>perf</code> counters will be set to 1000, so that it overflows at 0 and you get an interrupt and eventual recording of the samples.</p>\n"}], "owner": {"reputation": 872, "user_id": 644470, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a33421d2bcd8a9924c8a516619c2731?s=128&d=identicon&r=PG", "display_name": "Michael McLoughlin", "link": "https://stackoverflow.com/users/644470/michael-mcloughlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 2, "accepted_answer_id": 49165274, "answer_count": 1, "score": 5, "last_activity_date": 1520547953, "creation_date": 1520453550, "question_id": 49160450, "link": "https://stackoverflow.com/questions/49160450/emulate-perf-record-g-with-perf-event-open", "title": "Emulate `perf record -g` with `perf_event_open`", "body": "<p>My goal is to write some code to record the current call stack for all CPUs at some interval. Essentially I would like to do the same as <code>perf record</code> but using <code>perf_event_open</code> myself.</p>\n\n<p>According to the manpage it seems I need to use the <code>PERF_SAMPLE_CALLCHAIN</code> sample type and read the results with <code>mmap</code>. That said, the manpage is incredibly terse, and some sample code would go a long way right now.</p>\n\n<p>Can someone point me in the right direction?</p>\n"}, {"tags": ["c", "r", "automation", "code-translation"], "comments": [{"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1520453547, "post_id": 49160259, "comment_id": 85326296, "body": "1. C should be faster anyway - compiler will try to pipeline Your code and so forth. 2. Translation should be pretty straightforward, just replace <code>&lt;-</code> with <code>=</code> and add semicolns and type declarations"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1520453730, "post_id": 49160259, "comment_id": 85326377, "body": "The optimized compilation of the generated C could take quite a long time (perhaps dozens of minutes). I guess the translation from R to C could be coded in R (you would work on the internal <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-ints.html#SEXPs\" rel=\"nofollow noreferrer\">SEXP</a>s)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520454067, "post_id": 49160259, "comment_id": 85326564, "body": "LOL!! ................."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1520454365, "post_id": 49160259, "comment_id": 85326714, "body": "@bartop: not as easy. Replace <code>^</code> by ... what? <code>pow()</code> ? maybe in C++ with operator redefinition. But doesn&#39;t work on basic types."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1520454638, "post_id": 49160259, "comment_id": 85326859, "body": "but doable, and will probably speed this code by 200 or 300%"}, {"owner": {"reputation": 3452, "user_id": 1409930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a523199a98937753c1d6867664b76f?s=128&d=identicon&r=PG", "display_name": "Fhnuzoag", "link": "https://stackoverflow.com/users/1409930/fhnuzoag"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1520459020, "post_id": 49160259, "comment_id": 85329080, "body": "@BasileStarynkevitch if it isn&#39;t weeks that&#39;s still fine, this code is expected to be run many times."}], "owner": {"reputation": 3452, "user_id": 1409930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a523199a98937753c1d6867664b76f?s=128&d=identicon&r=PG", "display_name": "Fhnuzoag", "link": "https://stackoverflow.com/users/1409930/fhnuzoag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520452759, "creation_date": 1520452759, "question_id": 49160259, "link": "https://stackoverflow.com/questions/49160259/conversion-of-automatically-generated-r-code-into-c", "title": "Conversion of automatically generated R code into C", "body": "<p>I have a function that looks like this:</p>\n\n<blockquote>\n  <p>.e1 &lt;- exp(B); .e2 &lt;- t - C; .e3 &lt;- exp(A); .e4 &lt;- .e1 * .e2; .e5 &lt;- dnorm(.e4); .e6 &lt;- .e5 * .e3; .e7 &lt;- .e6 + tol; .e8 &lt;- sigma^2; .e9 &lt;- .e7^2; .e10 &lt;- Y - .e6; .e11 &lt;- .e8 * .e9; .e12 &lt;- .e11^2; .e13 &lt;- dnorm(.e4, 0, 1); .e14 &lt;- .e1^2; .e15 &lt;- sigma^4; .e16 &lt;- (2 * (.e8 * .e7 * .e10/.e12) + 2/.e11) * .e10; .e18 &lt;- 2/.e7; .e19 &lt;- .e15 * .e7^4; .e20 &lt;- 2/.e8; .e21 &lt;- .e2^2; .e24 &lt;- 2 * .e6 + 4 * (.e19 * .e10/.e12) + tol; .e25 &lt;- 6 * .e7; .e26 &lt;- (2 - .e20)/.e9; .e27 &lt;- .e26 + .e8 * (2 * (Y - .e24) - .e25) * .e10/.e12; .e30 &lt;- .e27 * .e5 * .e3 + .e16; .e31 &lt;- 4 * (.e19/.e12); .e33 &lt;- (2 + 4 * (.e15 * .e7^3 * .e10/.e12)) * .e7; .e38 &lt;- 2 * .e10; .e39 &lt;- .e18 - .e30; .e40 &lt;- sigma * (2 * ((2 - .e31) * .e10) - 4 * .e7); .e43 &lt;- .e8 * (2 * (.e24 - Y) + .e25) * .e10/.e12; </p>\n</blockquote>\n\n<p>This continues for over 100kb.</p>\n\n<p>The function was the result of using <code>Deriv</code> to differentiate a complicated function several times. There is a large number of intermediate assignments in this function because Deriv is set to cache re-used expressions, though ultimately this is a simple function that takes in 6 arguments and produces a simple array. It could be a one-liner... if you tolerate a gigantic line length. The function is composed of simple arithmetic operations, and a few maths functions (exp, log...). There are no loops or flow control.</p>\n\n<p>My question is:</p>\n\n<ol>\n<li><p>Would a function of this particular form be substantially faster to run in C? I understand that generally things run faster in compiled code, however would the bottleneck here be interpreting the language or more unavoidable things like all the assignments?</p></li>\n<li><p>Does it seem plausible to automatically try and translate simple code like this to C? The code seems far too long to do it by hand. If someone has done it before, that would help.</p></li>\n</ol>\n"}, {"tags": ["c", "windows", "dll", "linker", "shared-libraries"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1520452736, "post_id": 49160234, "comment_id": 85325873, "body": "In the docs: &quot;If you rebuild the DLL with new exports, you also have to rebuild the applications because the decorated names for exported C++ functions might change if you use a different version of the compiler to rebuild it.&quot;"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520452913, "post_id": 49160234, "comment_id": 85325953, "body": "@tadman That reads like an answer, wouldn&#39;t you want to make one?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1520452950, "post_id": 49160234, "comment_id": 85325970, "body": "@Yunnosch It only applies to C++ (name mangling), not C, so I&#39;m just putting that there as a partial answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "edited": false, "score": 0, "creation_date": 1520453043, "post_id": 49160234, "comment_id": 85326015, "body": "Yes i have badly read, so if i always compile with the same compiler or if i always use a C compiler i will not have problem ?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520455798, "post_id": 49160234, "comment_id": 85327469, "body": "@tadman I see. Partial answers are also adequate participation in the answering process, but that is of course your decision. Thanks for explaining."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520456416, "post_id": 49160234, "comment_id": 85327786, "body": "@tadman That&#39;s just &quot;if you use a different version of the compiler&quot; though."}], "owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520452789, "creation_date": 1520452669, "last_edit_date": 1520452789, "question_id": 49160234, "link": "https://stackoverflow.com/questions/49160234/rebuild-exe-after-dll-updated", "title": "Rebuild EXE after DLL updated?", "body": "<p>I saw topics and microsoft official doc (<a href=\"https://docs.microsoft.com/en-us/cpp/build/determining-which-exporting-method-to-use\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/determining-which-exporting-method-to-use</a>), said that after we add an exporting function to our dll, we have to rebuild the DLL (logic) <strong>AND</strong> the EXE.\nI don't understand why they say that, after tests it is not the case, i don't have to rebuild my exe after i add functions to my dll.</p>\n\n<p>My functions are exported with __declspec and there are basic C functions. \nThey (the link) advice us to use .def file with ordinal numbers to don't have to rebuild, but even without this .def file, i don't have to rebuild.</p>\n\n<p>Does __declspec also use ordinal numbers to link dll functions or does it use function naming ? Could you explain me why they say that, where am i wrong ? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "deadlock", "libusb", "phidgets"], "comments": [{"owner": {"reputation": 216, "user_id": 3491559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6058c9d3b578e8b39bd505e1237a52c1?s=128&d=identicon&r=PG&f=1", "display_name": "Frazy", "link": "https://stackoverflow.com/users/3491559/frazy"}, "edited": false, "score": 0, "creation_date": 1521577749, "post_id": 49160067, "comment_id": 85788777, "body": "Can you show me some of the code you&#39;re using to call open?"}], "owner": {"reputation": 5281, "user_id": 1495627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/05f7c73495dfcdc1b6b32b30fdb994f0?s=128&d=identicon&r=PG", "display_name": "Jean-Micha&#235;l Celerier", "link": "https://stackoverflow.com/users/1495627/jean-micha%c3%abl-celerier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520451996, "creation_date": 1520451996, "question_id": 49160067, "link": "https://stackoverflow.com/questions/49160067/phidget-api-22-libusb-deadlock", "title": "Phidget API 22 : libusb deadlock", "body": "<p>I currently have a thread of the Phidget API which deadlocks; here is a stack trace of my main thread:</p>\n\n<pre><code>1   __lll_lock_wait                                       0x7ffff5b3173c \n2   __lll_lock_elision                                    0x7ffff5b343c7 \n3   mos_mutex_lock            mos_lock-pthread.c     288  0x7fffd64b50ee \n4   StartCentralThread        phidget22.c            205  0x7fffd64d45dd \n5   registerChannel           phidget.c              1348 0x7fffd64d2432 \n6   Phidget_open_internal     phidget.c              1416 0x7fffd64d2432 \n7   list_phidgets             phidgets_parameter.hpp 1076 0x7fffd6139f9b \n    /* list_phidgets is in my own code and calls Phidget_open(...) */\n</code></pre>\n\n<p>and an offending internal libphidget thread : </p>\n\n<pre><code>1  poll                                                   0x7ffff12ba97b \n2  ??                                                     0x7ffff54cb6ec \n3  libusb_handle_events_timeout_completed                 0x7ffff54cc76a \n4  libusb_handle_events_completed                         0x7ffff54cc8b0 \n5  ??                                                     0x7ffff54cd1d9 \n6  libusb_control_transfer                                0x7ffff54cd539 \n7  libusb_get_string_descriptor_ascii                     0x7ffff54ca47e \n8  PhidgetUSBGetString                    usblinux.c  253 0x7fffd64d5319 \n9  scanVintDevices                        vint.c      218 0x7fffd64e5a2e \n10 PhidgetManager_poll                    manager.c   380 0x7fffd64bc87c \n11 CentralThreadFunction                  phidget22.c 371 0x7fffd64d4415 \n12 start_thread                                           0x7ffff5b2808c \n13 clone                                                  0x7ffff12c4e7f \n</code></pre>\n\n<p>Phidget_open called from my main thread, opens a mutex also opened in CentralThreadFunction, and <code>libusb_get_string_descriptor_ascii</code> does not seem to return which deadlocks my whole app. What can I do ? </p>\n"}, {"tags": ["c", "makefile", "cmake", "beagleboneblack", "beagleboard"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1520451913, "post_id": 49159294, "comment_id": 85325433, "body": "first step is <a href=\"https://www.linaro.org/downloads/\" rel=\"nofollow noreferrer\">getting one</a>.. but I&#39;m sure there are others or you could create your own."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1520454348, "post_id": 49159294, "comment_id": 85326703, "body": "So, you want an answer which contains what is cross-compiling using CMake, where you may obtain toolchain for BeagleBone Black, how to adjust it for your specific paths, where you may obtain CMake toolchain file... you want full <b>guide</b>. This is not how Stack Overflow works. You may start with short introduction into <a href=\"https://cmake.org/cmake/help/v3.9/manual/cmake-toolchains.7.html\" rel=\"nofollow noreferrer\">cross-compiling with CMake</a>, then google for toolchain for armhf (asking &quot;recommendation&quot; questions is off-topic here, <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>), then google for ready CMake toolchain file for BeagleBone Black."}], "answers": [{"tags": [], "owner": {"reputation": 558, "user_id": 4207183, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FlaU_rcEFmQ/AAAAAAAAAAI/AAAAAAAAF-Y/UVEWfvV4tKE/photo.jpg?sz=128", "display_name": "Alejandro Visiedo Garc&#237;a", "link": "https://stackoverflow.com/users/4207183/alejandro-visiedo-garc%c3%ada"}, "is_accepted": false, "score": 0, "last_activity_date": 1520451917, "creation_date": 1520451917, "answer_id": 49160053, "question_id": 49159294, "link": "https://stackoverflow.com/questions/49159294/cross-compiling-ubertooth-software-for-armhf/49160053#49160053", "title": "cross Compiling ubertooth software for ARMHF", "body": "<p>Linux Debian Stretch has some precompiled tools for cross compiling:</p>\n\n<pre><code>crossbuild-essential-armhf\n</code></pre>\n\n<p>I guess that package is the one that suit your target architecture. Firstly I would try to compile with it. Probably you need to launch the build commands with the variable CROSS_COMPILE assigned properly. Eg:</p>\n\n<pre><code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-\n</code></pre>\n\n<p>Other option is creating your own toolchain. Have a look to this other link <a href=\"https://crosstool-ng.github.io/\" rel=\"nofollow noreferrer\">https://crosstool-ng.github.io/</a> where you can see how to create your toolchain. This toolchain is compatible with buildroot.</p>\n\n<p>If it does not work, maybe this link could be useful:</p>\n\n<p><a href=\"http://www.jumpnowtek.com/beaglebone/BeagleBone-Systems-with-Buildroot.html\" rel=\"nofollow noreferrer\">http://www.jumpnowtek.com/beaglebone/BeagleBone-Systems-with-Buildroot.html</a></p>\n\n<p>It explain how to build buildroot for beaglebone. Buildroot is a build system used for embebed systems. It is easy to integrate new modules (libraries, binaries) to be build as part of the firmware. Once you have generated your binary for your target architecture, you only have to copy the necessary files into your target system.</p>\n\n<p>If you decide to build with buildroot, have a look to the documentation:</p>\n\n<p><a href=\"https://buildroot.org/downloads/manual/manual.html\" rel=\"nofollow noreferrer\">https://buildroot.org/downloads/manual/manual.html</a></p>\n\n<p>Buildroot have support for packages based on cmake, so that, even easier if you decide for it.</p>\n"}], "owner": {"reputation": 13, "user_id": 8903917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcec1ea909d2c0ea581c92f061d7c9fa?s=128&d=identicon&r=PG&f=1", "display_name": "Eng_Mike", "link": "https://stackoverflow.com/users/8903917/eng-mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520451917, "creation_date": 1520448867, "question_id": 49159294, "link": "https://stackoverflow.com/questions/49159294/cross-compiling-ubertooth-software-for-armhf", "title": "cross Compiling ubertooth software for ARMHF", "body": "<p>I have a software (ubertooth host ) that I need to compile on ARM, I have already compiled it on a normal Linux X64 machine and it worked. The process contains :</p>\n\n<ol>\n<li>cmake .. </li>\n<li>make </li>\n<li>make install</li>\n</ol>\n\n<p>Any help regarding how to cross compile for an armhf processor?</p>\n"}, {"tags": ["c", "file", "pointers", "file-handling", "fclose"], "comments": [{"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1520448593, "post_id": 49159145, "comment_id": 85323482, "body": "I&#39;m not spotting anything in the <code>fopen</code>/<code>fclose</code> calls.  Try removing the <code>for</code> and see if you still crash."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 12, "creation_date": 1520448776, "post_id": 49159145, "comment_id": 85323584, "body": "The problem lies in the code that you did not show."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1520448870, "post_id": 49159145, "comment_id": 85323643, "body": "Please make your example self-contained, so that we can compile it."}, {"owner": {"reputation": 3489, "user_id": 9434800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469a55ff2e5beb918a1ba26465ed5518?s=128&d=identicon&r=PG&f=1", "display_name": "Mickael B.", "link": "https://stackoverflow.com/users/9434800/mickael-b"}, "edited": false, "score": 0, "creation_date": 1520449134, "post_id": 49159145, "comment_id": 85323817, "body": "Can you valgrind and show us the log ?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1520449198, "post_id": 49159145, "comment_id": 85323854, "body": "Can anyone tell me what the <code>t</code> does in the mode string?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1520449539, "post_id": 49159145, "comment_id": 85324063, "body": "@squeamishossifrage: with the Windows MS-provided C library, <code>&quot;wt&quot;</code> means &quot;write text file&quot; (as opposed to standard-compliant <code>&quot;wb&quot;</code> which means &quot;write binary file&quot;, or standard-compliant <code>&quot;w&quot;</code> which also means &quot;write text file&quot;).  On Unix, the distinction is immaterial, but the <code>t</code> on Unix may cause failure to open (invalid parameter) \u2014 or it could invoke implementation defined behaviour."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520449683, "post_id": 49159145, "comment_id": 85324132, "body": "@JonathanLeffler Ah, thanks. I didn&#39;t know that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 1, "creation_date": 1520451615, "post_id": 49159145, "comment_id": 85325262, "body": "<code>[help-me]</code> You&#39;re likely stepping on the core somewhere inside <code>saveTeam</code>. Try commenting out various parts of the program until you narrow it down to a single line or statement whose absence solves the issue. Then figure out why that statement is broken. Or just use valgrinnd :)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520452204, "post_id": 49159145, "comment_id": 85325579, "body": "Like the others have hinted at.  Use your debugger to inspect the value of &#39;file&#39; just after the fopen().  Then again at the fclose().  Imma betting they are different..."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 2, "creation_date": 1520523894, "post_id": 49159145, "comment_id": 85359369, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "owner": {"reputation": 11, "user_id": 8828404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8843e1fdc90f5b689c5b1ca1481fa832?s=128&d=identicon&r=PG&f=1", "display_name": "Tin Tang", "link": "https://stackoverflow.com/users/8828404/tin-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520525301, "creation_date": 1520448226, "last_edit_date": 1520525301, "question_id": 49159145, "link": "https://stackoverflow.com/questions/49159145/c-program-crashes-after-calling-fclose", "title": "C program crashes after calling fclose()", "body": "<p>I need to  write some functions in order to save Data that is saved in a doubly linked list in a XML-File. The problem I've now is, that calling <code>fclose()</code> gives me a SIGARBT Error.</p>\n\n<pre><code>void save()\n{\n    FILE* file = fopen(\"/home/***/CLionProjects/fussballManager/teams.xml\", \"wt\");\n\n    if (!file)\n       return;\n    fprintf(file, \"&lt;Daten&gt;\\n\");\n    //Save teams\n    printf(\"%d\\n\", teamCounter);\n    TTeam* temp = firstTeam;\n    for(int i = 0; i&lt;teamCounter; i++){\n       saveTeam(temp,file);\n       temp = temp-&gt;next;\n    }\n    fprintf(file, \"&lt;/Daten&gt;\\n\");\n    fclose(file);\n}\n</code></pre>\n\n<p>After calling <code>fclose</code>, the program receives a SIGABRT error, that doesn't occur when <code>fclose()</code> is left out. What am I doing wrong?</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1520447529, "post_id": 49158945, "comment_id": 85322877, "body": "<code>stone</code> is a pointer, not an array."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1520447804, "post_id": 49158945, "comment_id": 85323059, "body": "<code>sizeof(stone)</code> evaluates to the size <i>of the pointer</i>, not the thing it&#39;s pointing to.  Also, post your code <i>here</i> - don&#39;t make us follow links."}, {"owner": {"reputation": 558, "user_id": 4207183, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FlaU_rcEFmQ/AAAAAAAAAAI/AAAAAAAAF-Y/UVEWfvV4tKE/photo.jpg?sz=128", "display_name": "Alejandro Visiedo Garc&#237;a", "link": "https://stackoverflow.com/users/4207183/alejandro-visiedo-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1520448409, "post_id": 49158945, "comment_id": 85323391, "body": "And please, check the return of the functions! what happen if calloc return a NULL? or realloc()? and still not into the code but for sure you will have, giving a position into the array, access to the information, in such scenario, please check boundaries! happy coding ;)"}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "is_accepted": false, "score": 0, "last_activity_date": 1520448043, "creation_date": 1520448043, "answer_id": 49159101, "question_id": 49158945, "link": "https://stackoverflow.com/questions/49158945/c-array-doesnt-change-size-with-realloc/49159101#49159101", "title": "C array doesn&#39;t change size with realloc()", "body": "<p>First of all in C, <code>Arrays</code> and <code>pointers</code> are different.An array cannot be treated as a <code>pointer</code> to something.For understanding purpose you can assume array name suppose <code>arr</code> as <code>const pointers</code> (but they really are not a <code>const pointer</code>).So when <code>realloc</code> changes the address of arr variable, it cannot be changed.</p>\n\n<p>Go through this discussion:<a href=\"https://stackoverflow.com/questions/1641957/is-an-array-name-a-pointer\">Is an array name a pointer?</a>  </p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1520449613, "creation_date": 1520449613, "answer_id": 49159504, "question_id": 49158945, "link": "https://stackoverflow.com/questions/49158945/c-array-doesnt-change-size-with-realloc/49159504#49159504", "title": "C array doesn&#39;t change size with realloc()", "body": "<p>You cannot determine the size of the reallocated array from the pointer returned by <code>realloc</code>, you must keep track of the size manually, with a separate variable such as <code>length</code>.</p>\n\n<p><code>sizeof(stone)</code> evaluates to the size of a pointer, 4 bytes on your architecture.</p>\n\n<p>Also note that indexing arrays is much simpler than what you write. You can calculate a pointer to the last element of the array this way:</p>\n\n<pre><code>STONE *d = stone + length - 1;\n</code></pre>\n\n<p>You can pass the last pointer in the array this way:</p>\n\n<pre><code>ausgabeBS(stone[length - 1]);\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 9277759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f16464223892bdc7d0238c9e9117a26?s=128&d=identicon&r=PG&f=1", "display_name": "TheProgrammer", "link": "https://stackoverflow.com/users/9277759/theprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "closed_date": 1520465026, "accepted_answer_id": 49159504, "answer_count": 2, "score": 0, "last_activity_date": 1520449613, "creation_date": 1520447441, "last_edit_date": 1520449337, "question_id": 49158945, "link": "https://stackoverflow.com/questions/49158945/c-array-doesnt-change-size-with-realloc", "closed_reason": "Not suitable for this site", "title": "C array doesn&#39;t change size with realloc()", "body": "<p>I want to reallocate an array of structs in C (add one struct at the end) but it doesn't change its size:</p>\n\n<pre><code>typedef struct stone {\n    int height;\n    int width;\n    int length;\n    int color;\n} STONE;\n\nint main() {\n    STONE *stone;\n    stone = (STONE *)calloc(1, sizeof(STONE));\n    int length = 0;\n    int command = 1;\n    while (command != 0) {\n        printf(\"Choose the method: \\n\");\n        printf(\"[0] - add stone\\n\");\n        printf(\"[1] - show stone\\n\");\n        printf(\"[2] - remove stone\\n\");\n        printf(\"[3] - compare stone\\n\");\n        printf(\"[4] - exit program\\n\");\n        printf(\"Input: \");\n        scanf(\"%d\", &amp;command);\n        switch (command) {\n        case 0:\n            length++;\n            stone= (STONE *)realloc(stone, sizeof(STONE) * length);\n            STONE *d = stone+ (sizeof(STONE) * (length - 1));\n            break;\n        case 1:\n            ausgabeBS(*(stone + length * sizeof(STONE) - sizeof(STONE)));\n            break;\n        case 2:\n            break;\n        case 3:\n            break;\n        default:\n            return 0;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Why is this? I output the size of the array and it always stays at 4 Bytes.</p>\n\n<pre><code>//code I used to output the size\nprintf(\"%d\", sizeof(stone));\n</code></pre>\n\n<p>I hope you can help me - thanks!</p>\n"}, {"tags": ["c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520448973, "post_id": 49158888, "comment_id": 85323713, "body": "Note <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.1.3\" rel=\"nofollow noreferrer\">C11 &#167;7.1.3 Reserved identifiers</a> and avoid using <code>__failure</code> as a name because it is unconditionally reserved for use by the implementation."}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1520448285, "last_edit_date": 1520448285, "creation_date": 1520447897, "answer_id": 49159062, "question_id": 49158888, "link": "https://stackoverflow.com/questions/49158888/stringinize-and-concat-macro-parameters-correctly/49159062#49159062", "title": "Stringinize and concat macro parameters correctly", "body": "<p>If you ask why then from <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html\" rel=\"nofollow noreferrer\">Predefined macros</a></p>\n\n<blockquote>\n  <p>C99 introduced <code>__func__</code>, and GCC has provided <code>__FUNCTION__</code> for a long time. Both of these are strings containing the name of the current function (there are slight semantic differences; see the GCC manual). <strong><em>Neither of them is a macro;</em></strong> the preprocessor does not know the name of the current function. </p>\n</blockquote>\n\n<p>Not a macro - that's why not macro expanded. If this was your intention it won't work. (As you have seen).</p>\n\n<p>Solution is to use a function where you will pass these things and print them accordingly. That would work.</p>\n\n<pre><code>void my_log( const char * filename, int linenumber, const char * funcname){\n    fprintf(sdtout,\"%s[%d]%s\\n\",filename, linenumber, funcname);\n}\n</code></pre>\n\n<p>And call like <code>my_log(__FILE__,__LINE__,__FUNCTION__);</code>.</p>\n"}], "owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1520449023, "accepted_answer_id": 49159062, "answer_count": 1, "score": -1, "last_activity_date": 1520448285, "creation_date": 1520447166, "question_id": 49158888, "link": "https://stackoverflow.com/questions/49158888/stringinize-and-concat-macro-parameters-correctly", "closed_reason": "Duplicate", "title": "Stringinize and concat macro parameters correctly", "body": "<p>Basically, i have the following macro definition :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define altErrMsg(x,y,z) x\":\"#y\":\"z\n#define errMSG(x,y,z) altErrMsg(x,y,z)\n#define __failure() errMSG(__FILE__,__LINE__,__FUNCTION__)\n\nint\nmain (int argc, char **argv) \n{\n    puts (__failure ());\n    return 0;\n}\n</code></pre>\n\n<p>The macro <code>__failure()</code> is supposed to print some debugging information in the form <code>\"filename:line:function\"</code>. For this purpose i used the GCC's predefined macros <code>__LINE__, __FILE__</code> and <code>__FUNCTION__</code>. I used an indirection so that the predefined macros will be expanded before they are concatenated. The expansion of <code>__LINE__</code> must be stringized (using the <code>#</code> before the parameter's name). <br><br>\nAFAIK, <code>__failure()</code> will be expanded to somthing like : \"test.c\"\":\"\"20\"\":\"\"main\" which will be quoted into a one single string constant \"test.c:20:main\". But that's not happening, instead, I'm getting errors :</p>\n\n<pre><code>test.c:5:46: error: expected \u2018)\u2019 before \u2018__FUNCTION__\u2019\n #define __failure() errMSG(__FILE__,__LINE__,__FUNCTION__)\n                                              ^\ntest.c:3:35: note: in definition of macro \u2018altErrMsg\u2019\n #define altErrMsg(x,y,z) x\":\"#y\":\"z\n                                   ^\ntest.c:5:21: note: in expansion of macro \u2018errMSG\u2019\n #define __failure() errMSG(__FILE__,__LINE__,__FUNCTION__)\n                     ^~~~~~\ntest.c:10:11: note: in expansion of macro \u2018__failure\u2019\n     puts (__failure ());\n</code></pre>\n\n<p>Compiling with <code>gcc -E</code> shows that the <code>__FUNCTION__</code> is never expanded and the final string looks like this : <code>\"test.c\"\":\"\"22\"\":\"__FUNCTION__</code> which is a wrong syntax but i have no idea why this happens ! <br><br>\nIs there an explanation for this behavior ? and any correction to the issue ?</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 3, "user_id": 9358099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9358099/brandon"}, "edited": false, "score": 0, "creation_date": 1520447028, "post_id": 49158813, "comment_id": 85322582, "body": "Oh, and I was trying to set the values of n[] to 0 once that person is dropped. How can I set an exit to my loop once there is only 1 &quot;1&quot; left?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520447047, "post_id": 49158813, "comment_id": 85322597, "body": "what is the expected output?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520447135, "post_id": 49158813, "comment_id": 85322645, "body": "<code>ptrN</code> always points to the first element of the array. Updating <code>i</code> doesn&#39;t update <code>ptrN</code> automatically."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1520447161, "post_id": 49158813, "comment_id": 85322658, "body": "you need to use <code>==</code> to compare, <code>=</code> is for assigning."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1520447173, "post_id": 49158813, "comment_id": 85322666, "body": "Perhaps it would be better if you described what the program ought to do in English first."}, {"owner": {"reputation": 3, "user_id": 9358099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9358099/brandon"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1520447357, "post_id": 49158813, "comment_id": 85322777, "body": "@AnttiHaapala The program is supposed to do what I put above the code."}, {"owner": {"reputation": 3, "user_id": 9358099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9358099/brandon"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520447766, "post_id": 49158813, "comment_id": 85323039, "body": "@Barmar -- So if I understand correctly; in my first if statement, the program is counting to n[2] and recognizing its value is 1, but because ptrN only can point to n[0], it will set that value to 0 instead of n[2]? Would I have to make a pointer for each array element?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520447815, "post_id": 49158813, "comment_id": 85323064, "body": "Why do you think you need a pointer at all? Just write <code>n[i] = 0;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520447903, "post_id": 49158813, "comment_id": 85323108, "body": "Another problem: your <code>for</code> loop never increments <code>i</code>. What do you expect <code>n[i+3]</code> in the third part of the loop header to do?"}, {"owner": {"reputation": 3, "user_id": 9358099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9358099/brandon"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520448339, "post_id": 49158813, "comment_id": 85323353, "body": "@Barmar To be honest, I&#39;m not sure why I would need a pointer, but we&#39;ve just learned about them so I was taking a guess that it would be needed here too. And I was expecting n[i+3] to add 3 to each i, but looking back at the code, I think I should just have it as i+3."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520448397, "post_id": 49158813, "comment_id": 85323387, "body": "It should be <code>i = i + 3</code> or <code>i += 3</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520448489, "post_id": 49158813, "comment_id": 85323431, "body": "But I suspect that&#39;s not what you&#39;re really supposed to do. You&#39;re supposed to count 3 entries that have <code>1</code> in them, and skip over the 0&#39;s. If you just increment <code>i</code> by 3, you&#39;ll keep processing the same entries, even though you already dropped them."}, {"owner": {"reputation": 3, "user_id": 9358099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9358099/brandon"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520448694, "post_id": 49158813, "comment_id": 85323535, "body": "@Barmar Yeah you&#39;re right.. I&#39;ve no clue how to skip over the 0&#39;s though. Would I need to make a new loop?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9358099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9358099/brandon"}, "edited": false, "score": 0, "creation_date": 1520454118, "post_id": 49160371, "comment_id": 85326579, "body": "Thank you so much. Can you explain the for loop though?. Im confused on where the j comes in. I believe the first person who would be out would be n[2] right? And for your i value, would it not need to be i = (i + 3) % 10;? Sorry for all the questions. Im a pretty big newbie D:"}, {"owner": {"reputation": 1180, "user_id": 4766261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd4d03badb6ebc92b17af75766fdd57?s=128&d=identicon&r=PG", "display_name": "SiggiSv", "link": "https://stackoverflow.com/users/4766261/siggisv"}, "reply_to_user": {"reputation": 3, "user_id": 9358099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9358099/brandon"}, "edited": false, "score": 0, "creation_date": 1520454889, "post_id": 49160371, "comment_id": 85327005, "body": "I will add more comments to better explain my code."}], "tags": [], "owner": {"reputation": 1180, "user_id": 4766261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd4d03badb6ebc92b17af75766fdd57?s=128&d=identicon&r=PG", "display_name": "SiggiSv", "link": "https://stackoverflow.com/users/4766261/siggisv"}, "is_accepted": true, "score": 2, "last_activity_date": 1520456482, "last_edit_date": 1520456482, "creation_date": 1520453197, "answer_id": 49160371, "question_id": 49158813, "link": "https://stackoverflow.com/questions/49158813/how-to-set-specific-values-to-arrays-in-a-loop-c/49160371#49160371", "title": "How to set specific values to arrays in a loop? - C", "body": "<p>As mentioned in the comments:</p>\n\n<ol>\n<li>Use <code>==</code> to compare, <code>=</code> is for assignment.</li>\n<li>You don't need to use a pointer. You can use <code>n[i]</code></li>\n<li>You need to increment <code>i</code>.</li>\n<li>You need to skip over the <code>0</code>'s.</li>\n</ol>\n\n<p>As you mentioned, you also need to stop when there is only one <code>1</code> left.</p>\n\n<p>There are more than one way to solve that but you could do it by having a counter for how many <code>1</code>'s there are and have a <code>while</code>-loop that ends when the counter is down to <code>1</code>: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int n[10] = {1, 1, 1, 1, 1, 1, 1, 1, 1, 1}, count = 10;\n\n    /* `i` needs to start at -1 so that we start counting:\n     *     \"0, 1, 2. n[2] is out!\"\n     *  instead of counting:\n     *     \"1, 2, 3. n[3] is out!\"\n     */\n    int i = -1;\n\n    while (count &gt; 1) {\n\n        /* We need to count three of those persons that are not out.\n         * That means we have to search for the next person that is not\n         * out (by skipping over `0`) and repeat that three times.\n         *\n         * If we just increase `i` by 3 ( `(i + 3) % 10` ) then we are\n         * not checking how many of those persons between `n[i]` and\n         * `n[(i + 3) % 10]` needed to be skipped over.\n         *\n         * So repeat three times:\n         */\n        for (int j = 0; j &lt; 3; j++) {\n\n            /* This will search for the next person that is not out by \n             * increasing `i` by one until `n[i]` is not `0`:\n             */\n            do {\n                i = (i + 1) % 10;\n            } while (n[i] == 0); // Check next person if this one is out.\n\n        } // I forgot to close this bracket in my first version of the answer\n\n        n[i] = 0;\n        count--;\n    }\n\n    printf(\"The value of n0 %d\\tn1 %d\\tn2 %d\\tn3 %d\\tn4 %d\\tn5 %d\\tn6 %d\\tn7 %d\\tn8 %d\\tn9 %d\", n[0], n[1], n[2], n[3], n[4], n[5], n[6], n[7], n[8], n[9]);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9358099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9358099/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 49160371, "answer_count": 1, "score": -3, "last_activity_date": 1520456482, "creation_date": 1520446893, "last_edit_date": 1520447107, "question_id": 49158813, "link": "https://stackoverflow.com/questions/49158813/how-to-set-specific-values-to-arrays-in-a-loop-c", "title": "How to set specific values to arrays in a loop? - C", "body": "<p>I'm in a beginner programming course and our assignment is make a program of a game that starts with 10 people. You start with the first person and count people till 3, then drop that person. You keep doing this until there is only one person left.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int n[10] = {1, 1, 1, 1, 1, 1, 1, 1, 1, 1}, i = 0;\n    int * ptrN = &amp;n[i];\n\n    for( i = 0; n[i]; n[i+3]){\n\n        if (n[i+3] = 1){ \n            *ptrN = 0; \n        }\n        else if (n[i] = 0)\n            continue;\n        else\n            printf(\"Wrong\");\n    }\n    printf(\"The value of n0 %d\\tn1 %d\\tn2 %d\\tn3 %d\\tn4 %d\\tn5 %d\\tn6 %d\\tn7 %d\\tn8 %d\\tn9 %d\", n[0], n[1], n[2], n[3], n[4], n[5], n[6], n[7], n[8], n[9]);\n    return 0;\n}\n</code></pre>\n\n<p>I'm far off from my answer right now but I'm already encountering problems. When I run the above code, it will only change the value of n[0] and then will exit program. Would appreciate any guidance. Thank you</p>\n"}, {"tags": ["c", "arrays", "string", "multidimensional-array"], "comments": [{"owner": {"reputation": 309, "user_id": 1122218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33478200c27c87c342c75693cc0bf0f4?s=128&d=identicon&r=PG", "display_name": "camel-man", "link": "https://stackoverflow.com/users/1122218/camel-man"}, "edited": false, "score": 1, "creation_date": 1520447443, "post_id": 49158736, "comment_id": 85322835, "body": "use string compare method to compare strings."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9408805, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "rtacr", "link": "https://stackoverflow.com/users/9408805/rtacr"}, "edited": false, "score": 0, "creation_date": 1520450344, "post_id": 49158938, "comment_id": 85324554, "body": "I don&#39;t know much about pointers. I will try it. Thank you for your help! :)"}, {"owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "reply_to_user": {"reputation": 3, "user_id": 9408805, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "rtacr", "link": "https://stackoverflow.com/users/9408805/rtacr"}, "edited": false, "score": 0, "creation_date": 1520450542, "post_id": 49158938, "comment_id": 85324662, "body": "@rtacr I&#39;ll recommend you to go through the book <code>The C programming Language</code> by Kernighan &amp; Ratchie for better concepts."}, {"owner": {"reputation": 3, "user_id": 9408805, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "rtacr", "link": "https://stackoverflow.com/users/9408805/rtacr"}, "edited": false, "score": 0, "creation_date": 1520450663, "post_id": 49158938, "comment_id": 85324736, "body": "Thank you! I&#39;ll definitely check it out."}], "tags": [], "owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "is_accepted": false, "score": 0, "last_activity_date": 1520447412, "creation_date": 1520447412, "answer_id": 49158938, "question_id": 49158736, "link": "https://stackoverflow.com/questions/49158736/reading-2-d-string-array-from-file-in-c/49158938#49158938", "title": "Reading 2-D string Array From File In C", "body": "<p>You should use Array of pointers to take input as line in <code>C</code>. <code>2-D</code> arrays are not suitable for storing strings.</p>\n\n<pre><code> char *lineptr[MAXLINE];   //Array of pointers to store lines.\n\n int readline(char* lineptr[])\n {\n  char line[1000];        //it takes line as input\n  for(i=0;i&lt;MAXLINE;i++){\n       if(fscanf(stdin,\"%s\",line)){\n          char *temp=malloc((strlen(line)+1)*sizeof(char));  //allocates memory for temp to store new line in every loop\n          strcpy(temp,line);   //copies line to temp\n          lineptr[i]=temp;     //lineptr[i] will point to new line i.e temp\n       }\n  }\n  return i;   //returns the number of lines \n}\n</code></pre>\n\n<p>After taking input in <code>lineptr[]</code> you can manipulate your input lines as required.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 8418506, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QxjJ6YngUNk/AAAAAAAAAAI/AAAAAAAAAZo/PeqE1EnXO-8/photo.jpg?sz=128", "display_name": "Sreedev Shibu", "link": "https://stackoverflow.com/users/8418506/sreedev-shibu"}, "is_accepted": true, "score": 0, "last_activity_date": 1520450159, "last_edit_date": 1520450159, "creation_date": 1520448281, "answer_id": 49159163, "question_id": 49158736, "link": "https://stackoverflow.com/questions/49158736/reading-2-d-string-array-from-file-in-c/49159163#49159163", "title": "Reading 2-D string Array From File In C", "body": "<p>Change this line <code>char* elmName[18][5];</code> to char elmName[18][5][4];\nassuming your strings won't have more than 3 characters(3 characters + 1 for NULL). This line creates a 3 dimensional character array. </p>\n\n<p>The [i,j]th element of this will be a character string which is what you would require in this case:\nAlso change this line : <code>if( elmName[g][p] == \"*\")</code> to <code>if( strcmp(elmName[g][p], \"*\")==0)</code> .This is because you cannot compare values  of arrays (string which is a character array) using equal operator .</p>\n\n<p>Also change <code>elmName[g][p] = tempName;</code> to strcpy(elmName[g][p],tempName).\nDon't forget to include <code>string.h</code> . You have to copy each character to the character array which is done by <code>strcpy</code></p>\n\n<p>Here is the corrected code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main()\n{\n    char elmName[18][5][4];\n\nint elmNumber[18][5];\n//AtomNumber[Group][Period] \n\nint iGroupCount = 18;\nint iPeriodCount = 5;\n\nfor(int i=0;i&lt;iPeriodCount;i++){\n    for(int j=0;j&lt;iGroupCount;j++){\n        elmNumber[j][i] = 0;\n    }\n}\n\nprintf(\"\\n\");\n\nfor(int i=0;i&lt;iPeriodCount;i++){\n    for(int j=0;j&lt;iGroupCount;j++){\n        printf(\"%d \", elmNumber[j][i]);\n    }\n    printf(\"\\n\");\n}\n\nint g,p,num;\n//g = Group\n//p = Period\n//num = Atom no.\n\nint tempNum;\nchar tempName[2];\n\nfor(int i=0;i&lt;iPeriodCount;i++){\n    for(int j=0;j&lt;iGroupCount;j++){\n//if there is not an element at this group and period name it '*'\n            strcpy(elmName[j][i] , \"*\");//This line has been changed\n    }\n}\n\nFILE *fs = fopen(\"element.txt\" , \"r\");\nwhile(!feof(fs)){\n    fscanf(fs ,\"%d\\t%d\\t%d\\t%s\\n\" , &amp;g , &amp;p , &amp;tempNum , tempName);\n    printf(\"%d\\t%d\\t%d\\t%s\\n\" , g , p , tempNum , tempName);\n    if( strcmp(elmName[g][p], \"*\")==0)//This line has been changed\n    {\n    elmNumber[g][p] = tempNum;\n    strcpy(elmName[g][p], tempName);//This line has been changed\n\n}\n     //g = group No\n     //p = period No    \n}\n\n\nfclose(fs);\n//For viewing results\nfor(int i=0;i&lt;18;++i)\n    for(int j=0;j&lt;5;++j)\n        printf(\"%d %d %s\\n\",i,j,elmName[i][j]);\n    return 0;\n}\n</code></pre>\n\n<p>This is the ouput that I got when using your sample file</p>\n\n<pre><code>0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n0   0   1   H\n17  0   2   He\n0   1   3   Li\n1   1   4   Be\n12  1   5   B\n13  1   6   C\n14  1   7   N\n15  1   8   O\n16  1   9   F\n17  1   10  Ne\n0   2   11  Na\n1   2   12  Mg\n12  2   13  Al\n13  2   14  Si\n14  2   15  P\n15  2   16  S\n16  2   17  Cl\n0 0 H\n0 1 Li\n0 2 Na\n0 3 *\n0 4 *\n1 0 *\n1 1 Be\n1 2 Mg\n1 3 *\n1 4 *\n2 0 *\n2 1 *\n2 2 *\n2 3 *\n2 4 *\n3 0 *\n3 1 *\n3 2 *\n3 3 *\n3 4 *\n4 0 *\n4 1 *\n4 2 *\n4 3 *\n4 4 *\n5 0 *\n5 1 *\n5 2 *\n5 3 *\n5 4 *\n6 0 *\n6 1 *\n6 2 *\n6 3 *\n6 4 *\n7 0 *\n7 1 *\n7 2 *\n7 3 *\n7 4 *\n8 0 *\n8 1 *\n8 2 *\n8 3 *\n8 4 *\n9 0 *\n9 1 *\n9 2 *\n9 3 *\n9 4 *\n10 0 *\n10 1 *\n10 2 *\n10 3 *\n10 4 *\n11 0 *\n11 1 *\n11 2 *\n11 3 *\n11 4 *\n12 0 *\n12 1 B\n12 2 Al\n12 3 *\n12 4 *\n13 0 *\n13 1 C\n13 2 Si\n13 3 *\n13 4 *\n14 0 *\n14 1 N\n14 2 P\n14 3 *\n14 4 *\n15 0 *\n15 1 O\n15 2 S\n15 3 *\n15 4 *\n16 0 *\n16 1 F\n16 2 Cl\n16 3 *\n16 4 *\n17 0 He\n17 1 Ne\n17 2 *\n17 3 *\n17 4 *\n</code></pre>\n\n<p>You are getting the last added element as output because you are assigning address of string tempName to the 2d character array pointer elmName. In my suggested solution I have used static 3 dimensional character array if you wanted to use 2 dimensional array you have to assign dynamically allocated character array (string)  to it instead of a statically allocated variable in your case tempName </p>\n"}], "owner": {"reputation": 3, "user_id": 9408805, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "rtacr", "link": "https://stackoverflow.com/users/9408805/rtacr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 49159163, "answer_count": 2, "score": 0, "last_activity_date": 1520450159, "creation_date": 1520446643, "question_id": 49158736, "link": "https://stackoverflow.com/questions/49158736/reading-2-d-string-array-from-file-in-c", "title": "Reading 2-D string Array From File In C", "body": "<p>I am new at C and trying to make a little program. </p>\n\n<p>Basically it's a program that takes elements name, group, period (Not scientifically correct) number from a text file. Then insert elements names to 2d string array (elmName in code), element numbers to 2d int array (elmNumber) and then print them as the periodic table.  </p>\n\n<p>But when i try to run it, program takes the last element name it read and assigns it every element in 2d string array (elmName).</p>\n\n<p>Here is the code : </p>\n\n<pre><code>char* elmName[18][5];\n\nint elmNumber[18][5];\n//AtomNumber[Group][Period] \n\nint iGroupCount = 18;\nint iPeriodCount = 5;\n\nfor(int i=0;i&lt;iPeriodCount;i++){\n    for(int j=0;j&lt;iGroupCount;j++){\n        elmNumber[j][i] = 0;\n    }\n}\n\nprintf(\"\\n\");\n\nfor(int i=0;i&lt;iPeriodCount;i++){\n    for(int j=0;j&lt;iGroupCount;j++){\n        printf(\"%d \", elmNumber[j][i]);\n    }\n    printf(\"\\n\");\n}\n\nint g,p,num;\n//g = Group\n//p = Period\n//num = Atom no.\n\nint tempNum;\nchar tempName[2];\n\nfor(int i=0;i&lt;iPeriodCount;i++){\n    for(int j=0;j&lt;iGroupCount;j++){\n//if there is not an element at this group and period name it '*'\n            elmName[j][i] = \"*\";\n    }\n}\n\nFILE *fs = fopen(\"element.txt\" , \"r\");\nwhile(!feof(fs)){\n    fscanf(fs ,\"%d\\t%d\\t%d\\t%s\\n\" , &amp;g , &amp;p , &amp;tempNum , tempName);\n    printf(\"%d\\t%d\\t%d\\t%s\\n\" , g , p , tempNum , tempName);\n    if( elmName[g][p] == \"*\"){\n    elmNumber[g][p] = tempNum;\n    elmName[g][p] = tempName;\n\n}\n     //g = group No\n     //p = period No    \n}\n\nfclose(fs);\n</code></pre>\n\n<p>And here is the text file it reads : </p>\n\n<pre><code>0   0   1   H\n17  0   2   He\n0   1   3   Li\n1   1   4   Be\n12  1   5   B\n13  1   6   C\n14  1   7   N\n15  1   8   O\n16  1   9   F\n17  1   10  Ne\n0   2   11  Na\n1   2   12  Mg\n12  2   13  Al\n13  2   14  Si\n14  2   15  P\n15  2   16  S\n16  2   17  Cl\n</code></pre>\n\n<p>If you have a solution please help. :)</p>\n"}, {"tags": ["c", "sockets", "udp", "dhcp"], "comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1520446645, "post_id": 49158629, "comment_id": 85322347, "body": "Depending on the platform, after a socket function returns an error, there&#39;s usually another global variable value, such as <code>err</code> or <code>errno</code>, or a function to call, such as <code>WSAGetLastError()</code>, which has a specific error code."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1520446646, "post_id": 49158629, "comment_id": 85322349, "body": "<code>sizeof(DHCP_hdr)</code> is this large enough for a complete reply packet ?"}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1520447867, "post_id": 49158629, "comment_id": 85323091, "body": "@wildplasser yes it is, it is, exactly 590 bytes"}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1520447997, "post_id": 49158629, "comment_id": 85323166, "body": "@DanKorn yep,&quot;Resource temporarily unavailable&quot; is a human redable form of the <code>errno</code> after unsuccessful <code>recvfrom()</code>"}, {"owner": {"reputation": 558, "user_id": 4207183, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FlaU_rcEFmQ/AAAAAAAAAAI/AAAAAAAAF-Y/UVEWfvV4tKE/photo.jpg?sz=128", "display_name": "Alejandro Visiedo Garc&#237;a", "link": "https://stackoverflow.com/users/4207183/alejandro-visiedo-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1520452932, "post_id": 49158629, "comment_id": 85325963, "body": "What is the value for errno? I mean EAGAIN, EBADF, EINTR, etc..."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 558, "user_id": 4207183, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FlaU_rcEFmQ/AAAAAAAAAAI/AAAAAAAAF-Y/UVEWfvV4tKE/photo.jpg?sz=128", "display_name": "Alejandro Visiedo Garc&#237;a", "link": "https://stackoverflow.com/users/4207183/alejandro-visiedo-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1520454939, "post_id": 49158629, "comment_id": 85327029, "body": "@AlejandroVisiedo value 11, EAGAIN"}, {"owner": {"reputation": 558, "user_id": 4207183, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FlaU_rcEFmQ/AAAAAAAAAAI/AAAAAAAAF-Y/UVEWfvV4tKE/photo.jpg?sz=128", "display_name": "Alejandro Visiedo Garc&#237;a", "link": "https://stackoverflow.com/users/4207183/alejandro-visiedo-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1520455186, "post_id": 49158629, "comment_id": 85327146, "body": "Any firewall rule that can be filtering the traffic before it arrive to your application? If you are using some firewall, test to disable it."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1520463391, "post_id": 49158629, "comment_id": 85330905, "body": "10,000 \u03bcS is not &#39;50mS&#39;, it is <i>ten</i> milliseconds, and both ten mS and 50mS are far too short for a network timeout. It should be measured in seconds, if not tens of seconds."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1520494034, "post_id": 49158629, "comment_id": 85340231, "body": "@EJP timeout is 5 thats why it is 50ms in total. The fact is - when I try to  set timeout higher than 2 secons, the <code>setsockopt()</code> fails to do so. (returns -1)"}], "answers": [{"comments": [{"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "edited": false, "score": 0, "creation_date": 1520454826, "post_id": 49160296, "comment_id": 85326972, "body": "The timeout is sufficient, since acc to wireshark, the offer is sent in 25ms. I did raise the timeout anyway, but it doesnt help"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1520463571, "post_id": 49160296, "comment_id": 85330981, "body": "@Coolman The error you are getting does not agree with you. You are arguing with the error itself."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "edited": false, "score": 0, "creation_date": 1521010556, "post_id": 49160296, "comment_id": 85545727, "body": "At the end the reason why it threw the error was that some other application was already catching all the responses."}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": true, "score": 1, "last_activity_date": 1520452901, "creation_date": 1520452901, "answer_id": 49160296, "question_id": 49158629, "link": "https://stackoverflow.com/questions/49158629/udp-recvfrom-not-successful/49160296#49160296", "title": "UDP recvfrom not successful", "body": "<p>\"Resource temporarily unavailable\" corresponds to <code>EAGAIN</code>. The Errors section of <code>man recvfrom</code> says that <code>EAGAIN</code> is set if:</p>\n\n<blockquote>\n  <p>a receive timeout had been set, and the timeout expired before data were received.</p>\n</blockquote>\n\n<p>Your timeout seems to be too short.</p>\n\n<p>According to <a href=\"https://tools.ietf.org/html/rfc1541\" rel=\"nofollow noreferrer\">RFC 1541</a>, the client may retransmit the discover message no sooner than 4 seconds after the initial message has been transmitted. It implies that a reasonable timeout shall be in that ballpark.</p>\n"}], "owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 49160296, "answer_count": 1, "score": -2, "last_activity_date": 1520452901, "creation_date": 1520446233, "last_edit_date": 1520446277, "question_id": 49158629, "link": "https://stackoverflow.com/questions/49158629/udp-recvfrom-not-successful", "title": "UDP recvfrom not successful", "body": "<p>I am trying to write DHCP client, but failing to receive the DHCP Offer due to <strong>\"Resource temporarily unavailable\"</strong> on recvfrom(). I set my socket like so (leaving out the checks for return values):</p>\n\n<pre><code>    int sct = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    return sct;\n    /* set option for socket to broadcast */\n    int opt_val = 1;    \n    int res = setsockopt(sct, SOL_SOCKET, SO_REUSEADDR, (char *)&amp;opt_val, sizeof(opt_val));    \n    res = setsockopt(sct, SOL_SOCKET, SO_BROADCAST, (char *)&amp;opt_val, sizeof(opt_val));\n</code></pre>\n\n<p>Then I bind to the socket to the interface and then the actuall bind itself. All success. Then I send DHCP Discover with sucess and I fail to catch DHCP Offer. Shows up in WIreshark. Receiving the packet like so:</p>\n\n<pre><code>struct sockaddr_in srcInfo;\nstruct timeval t_out;\nt_out.tv_usec = timeout * 10000; // 50 ms timeout\nt_out.tv_sec = 0;\nsocklen_t sockSize = sizeof(srcInfo);\nint setSc = setsockopt(socket, SOL_SOCKET, SO_RCVTIMEO, (const char*)&amp;t_out, sizeof(struct timeval));\nssize_t res = recvfrom(socket, (void*)buffer, sizeof(DHCP_hdr), 0, (struct sockaddr *)&amp;srcInfo, &amp;sockSize);\n</code></pre>\n\n<p>The res var is always -1 and the error is as written above. I have tried everything that is here on SO - no success. Using <code>FD_SET</code> with <code>FD_ISSET</code>. Setting the socket as nonblocking, calling recvfrom right after that again. Always getting the same error.</p>\n"}, {"tags": ["c", "arrays", "gcc", "int", "limits"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1520446277, "post_id": 49158599, "comment_id": 85322148, "body": "That&#39;s 8 gigabytes worth of <code>int</code>s. Do you compile for 64 bits? Do you have 8 gb of RAM? Then try to <code>malloc</code> it, since it surely won&#39;t fit on stack."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1520446380, "post_id": 49158599, "comment_id": 85322213, "body": "Might I ask: what do you intend to do with all those ints?"}, {"owner": {"reputation": 3, "user_id": 3579524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203a63ee9df12e03dad51f171cd9337e?s=128&d=identicon&r=PG", "display_name": "Graco Babeuf", "link": "https://stackoverflow.com/users/3579524/graco-babeuf"}, "edited": false, "score": 0, "creation_date": 1520446626, "post_id": 49158599, "comment_id": 85322337, "body": "No. I don&#39;t  have that amount of memory. Thanks for the clarification."}, {"owner": {"reputation": 3, "user_id": 3579524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203a63ee9df12e03dad51f171cd9337e?s=128&d=identicon&r=PG", "display_name": "Graco Babeuf", "link": "https://stackoverflow.com/users/3579524/graco-babeuf"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1520446751, "post_id": 49158599, "comment_id": 85322400, "body": "@Bathsheba I&#39;m trying to build the OpenSSH source."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1520446784, "post_id": 49158599, "comment_id": 85322422, "body": "@GracoBabeuf And how exactly the code above is helping you in building OpenSSH?"}, {"owner": {"reputation": 3, "user_id": 3579524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203a63ee9df12e03dad51f171cd9337e?s=128&d=identicon&r=PG", "display_name": "Graco Babeuf", "link": "https://stackoverflow.com/users/3579524/graco-babeuf"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520448138, "post_id": 49158599, "comment_id": 85323251, "body": "@EugeneSh. That constant value is set to a variable present in OpenSSH source."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520448391, "post_id": 49158599, "comment_id": 85323384, "body": "What constant and why do you think you need this array? I can guarantee that compiling OpenSSH does not require allocating 8gb on stack."}, {"owner": {"reputation": 3, "user_id": 3579524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203a63ee9df12e03dad51f171cd9337e?s=128&d=identicon&r=PG", "display_name": "Graco Babeuf", "link": "https://stackoverflow.com/users/3579524/graco-babeuf"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520448855, "post_id": 49158599, "comment_id": 85323632, "body": "@EugeneSh. This value, 2147483647 = 8GB, is setted to the constant IOV_MAX in the &quot;atomicio.c&quot; code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520448917, "post_id": 49158599, "comment_id": 85323674, "body": "So what? Why do you need an array of this size?"}, {"owner": {"reputation": 3, "user_id": 3579524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203a63ee9df12e03dad51f171cd9337e?s=128&d=identicon&r=PG", "display_name": "Graco Babeuf", "link": "https://stackoverflow.com/users/3579524/graco-babeuf"}, "edited": false, "score": 0, "creation_date": 1520449810, "post_id": 49158599, "comment_id": 85324213, "body": "I don&#39;t know yet."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1520450001, "post_id": 49158599, "comment_id": 85324330, "body": "Then you don&#39;t need it. Problem solved."}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 8418506, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QxjJ6YngUNk/AAAAAAAAAAI/AAAAAAAAAZo/PeqE1EnXO-8/photo.jpg?sz=128", "display_name": "Sreedev Shibu", "link": "https://stackoverflow.com/users/8418506/sreedev-shibu"}, "is_accepted": true, "score": 0, "last_activity_date": 1520446993, "creation_date": 1520446993, "answer_id": 49158843, "question_id": 49158599, "link": "https://stackoverflow.com/questions/49158599/c-error-size-of-array-is-too-large/49158843#49158843", "title": "C error: size of array is too large", "body": "<p>Your stack will not be that large to contain the array this is the main problem.\nTry setting the stack size using the following lines as suggested in <a href=\"https://stackoverflow.com/questions/3557691/increase-stack-size-when-compiling-with-mingw\">Increase stack size when compiling with mingw?</a> while compiling</p>\n\n<pre><code>gcc -Wl,--stack,N\nwhere N is stack size. E.g. gcc -Wl,--stack,4194304\n</code></pre>\n\n<p>Also as mentioned in the comments you might have to compile for 64 bits and      will require that much amount of RAM or possibly a large page file.</p>\n"}], "owner": {"reputation": 3, "user_id": 3579524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203a63ee9df12e03dad51f171cd9337e?s=128&d=identicon&r=PG", "display_name": "Graco Babeuf", "link": "https://stackoverflow.com/users/3579524/graco-babeuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1904, "favorite_count": 0, "accepted_answer_id": 49158843, "answer_count": 1, "score": -1, "last_activity_date": 1520446993, "creation_date": 1520446103, "question_id": 49158599, "link": "https://stackoverflow.com/questions/49158599/c-error-size-of-array-is-too-large", "title": "C error: size of array is too large", "body": "<p>I have tried to compile this C code:</p>\n\n<pre><code>#define MAX_INT 2147483647\n\nint main()\n{\n   int vector[MAX_INT];\n   return 0;\n}\n</code></pre>\n\n<p>I'm using the C compilers provided by both MinGW and MSYS projects, i.e., MinGW / MSYS. MinGW compiler is \"gcc version 6.3.0 (MinGW.org GCC-6.3.0-1)\", which is the most recently version and have win32 thread model, and MSYS compiler is \"gcc version 3.4.4 (msys special)\" with posix thread model.</p>\n\n<p>That MAX_INT constant value is set in the constant \"__INT_MAX__\" provided by the \"limits.h\" header.</p>\n\n<p>How can I avoid this problem and get my simplest code compiled?</p>\n"}, {"tags": ["c", "arrays", "struct", "stack", "free"], "comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1520446052, "post_id": 49158569, "comment_id": 85322020, "body": "Show <code>Stack</code>....and how you pass it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520446132, "post_id": 49158569, "comment_id": 85322056, "body": "Reallocating the whole stack at each pop/push is...sub-optimal. I highly recommend to use a linked list or similar as the underlying data structure."}, {"owner": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1520447864, "post_id": 49158569, "comment_id": 85323090, "body": "My task was making a stack using an array, so I can&#39;t use a linked list. I added the whole code to the post."}, {"owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "edited": false, "score": 0, "creation_date": 1520448485, "post_id": 49158569, "comment_id": 85323428, "body": "But you can avoid reallocation on each pop. Typically you would remember capacity and current size individually, and only realloc when the capacity is severely under or oversized. E.g capacity scaling only on potencies of 2."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 9240768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2372bd2a49b2b13ce0ded543fd2700db?s=128&d=identicon&r=PG", "display_name": "M. Ziegast", "link": "https://stackoverflow.com/users/9240768/m-ziegast"}, "reply_to_user": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1520449860, "post_id": 49158741, "comment_id": 85324245, "body": "Sorry, you hadn&#39;t added the rest of code so I misread things. I thought the stack was an array of pointers to mallocs of Element, to avoid the reuse problem after realloc() the other posters are correct about. Then the free() of the last element would be plausible. The free() should only occur when last element pop&#39;d, as @Ext3h points out, not try to free a subblock each time; the realloc() already did that."}, {"owner": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1520451815, "post_id": 49158741, "comment_id": 85325379, "body": "So do you claim that I don&#39;t need free at all? It&#39;s not working without free either lol"}, {"owner": {"reputation": 125, "user_id": 9240768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2372bd2a49b2b13ce0ded543fd2700db?s=128&d=identicon&r=PG", "display_name": "M. Ziegast", "link": "https://stackoverflow.com/users/9240768/m-ziegast"}, "reply_to_user": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1520464837, "post_id": 49158741, "comment_id": 85331428, "body": "Check the new code block; what tweaks are needed for the rest of the code should be straightforward... if Pop() returns null, you need to reinit the stack, not just Push()."}, {"owner": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1520501674, "post_id": 49158741, "comment_id": 85344583, "body": "I tried your code. This is the main: <a href=\"https://imgur.com/a/MLhbW\" rel=\"nofollow noreferrer\">imgur.com/a/MLhbW</a> in line 131 I changed it to be Element* and then the output is that: <a href=\"https://imgur.com/Jgkf4Ay\" rel=\"nofollow noreferrer\">imgur.com/Jgkf4Ay</a>"}, {"owner": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1520501797, "post_id": 49158741, "comment_id": 85344681, "body": "As you can see the pop isn&#39;t working very well. It does return the top element but the top element doesn&#39;t removed from the stack"}, {"owner": {"reputation": 125, "user_id": 9240768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2372bd2a49b2b13ce0ded543fd2700db?s=128&d=identicon&r=PG", "display_name": "M. Ziegast", "link": "https://stackoverflow.com/users/9240768/m-ziegast"}, "reply_to_user": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1521299245, "post_id": 49158741, "comment_id": 85676961, "body": "Sorry, I typoed the parens in the realloc, should be:"}, {"owner": {"reputation": 125, "user_id": 9240768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2372bd2a49b2b13ce0ded543fd2700db?s=128&d=identicon&r=PG", "display_name": "M. Ziegast", "link": "https://stackoverflow.com/users/9240768/m-ziegast"}, "reply_to_user": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1521299749, "post_id": 49158741, "comment_id": 85677119, "body": "Sorry, I typoed the parens in the realloc, should be: <code>(stackPtr-&gt;content, (stackPtr-&gt;size*sizeof(Element) ) );</code> If the same pointer is returned, trying to access the data by a constant array index might still work, but isn&#39;t guaranteed. Code should use [--stackPtr-&gt;size] as last valid index for non-Pop() access."}], "tags": [], "owner": {"reputation": 125, "user_id": 9240768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2372bd2a49b2b13ce0ded543fd2700db?s=128&d=identicon&r=PG", "display_name": "M. Ziegast", "link": "https://stackoverflow.com/users/9240768/m-ziegast"}, "is_accepted": false, "score": -1, "last_activity_date": 1520453888, "last_edit_date": 1520453888, "creation_date": 1520446671, "answer_id": 49158741, "question_id": 49158569, "link": "https://stackoverflow.com/questions/49158569/c-free-a-specific-struct-inside-an-array-inside-a-stack/49158741#49158741", "title": "C - Free a specific struct inside an array inside a stack", "body": "<p>Since content[] is an array of pointers, the realloc should use sizeof(Element*), not sizeof(Element), especially if sizeof(Element) less than sizeof(*). \nEdited to reflect intent of Comments:</p>\n\n<pre><code>Element *Pop(Stack *stackPtr)\n{\nif (stackPtr-&gt;size==0) return NULL;\nElement temp = stackPtr-&gt;content[stackPtr-&gt;size-1];\nstackPtr-&gt;size--;\nif (stackPtr-&gt;size==0) free(stackPtr-&gt;content)\nelse {   \nElement* newE = (Element*)realloc(stackPtr-&gt;content,stackPtr-&gt;size)*sizeof(Element));\nstackPtr-&gt;content=newE;\n}\nElement* rslt = malloc(sizeof(Element);\nmemcpy(rslt,&amp;temp,sizeof(Element));\nreturn rslt;\n}\n</code></pre>\n\n<p>In the using code the pointer returned would need to be free'd separately. I view this as safer than assuming the compiler will copy the auto allocation of temp into the return value, anyways.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1520449440, "post_id": 49159126, "comment_id": 85324015, "body": "Before I reallocated I copied the element to a new element (temp) and then I return temp so I don&#39;t get where is the problem. The memory isn&#39;t free I reallocated the array and the past element which isn&#39;t in the array anymore still exits but we have no access to it."}, {"owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "reply_to_user": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "edited": false, "score": 0, "creation_date": 1520451347, "post_id": 49159126, "comment_id": 85325105, "body": "@NadavSchneider You have reallocated, but had not assigned it back to <code>stackPtr-&gt;content</code> yet... And the <code>free</code> is still nonsense."}], "tags": [], "owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "is_accepted": false, "score": 0, "last_activity_date": 1520448147, "creation_date": 1520448147, "answer_id": 49159126, "question_id": 49158569, "link": "https://stackoverflow.com/questions/49158569/c-free-a-specific-struct-inside-an-array-inside-a-stack/49159126#49159126", "title": "C - Free a specific struct inside an array inside a stack", "body": "<p>Of course this crashes - you just have reallocated the data which <code>stackPtr-&gt;content</code> was pointing to, so the array access is now invalid.</p>\n\n<p>Since you already reallocated, and you are returning the removed element, that call to <code>free</code> is pointless though, and illegal in multiple ways. The memory is already free'd, but not only that, it was never a pointer to begin with.</p>\n\n<p>Also be aware which parameters to <code>realloc</code> are valid. If your <code>Pop</code> function \"removes\" the last element, you would try to realloc to a size of zero, which isn't legal.</p>\n\n<p>And you should put in a defensive check anyway, ensure that nobody is trying to pop from an already empty stack.</p>\n"}], "owner": {"reputation": 1, "user_id": 9458287, "user_type": "registered", "profile_image": "https://graph.facebook.com/921363668028375/picture?type=large", "display_name": "Nadav Schneider", "link": "https://stackoverflow.com/users/9458287/nadav-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520453888, "creation_date": 1520445972, "last_edit_date": 1520447782, "question_id": 49158569, "link": "https://stackoverflow.com/questions/49158569/c-free-a-specific-struct-inside-an-array-inside-a-stack", "title": "C - Free a specific struct inside an array inside a stack", "body": "<p>During my stack building I encountered a problem with free an element inside an array in my Pop function.\nThis is the code:</p>\n\n<pre><code>Element Pop(Stack *stackPtr)\n{\n    Element temp = stackPtr-&gt;content[stackPtr-&gt;size-1];\n    Element* newE = (Element*)realloc(stackPtr-&gt;content,(stackPtr-&gt;size-1)*sizeof(Element));\n\n    free(stackPtr-&gt;content[stackPtr-&gt;size-1]);\n\n    stackPtr-&gt;content=newE;\n    stackPtr-&gt;size--;\n    return temp;\n}\n</code></pre>\n\n<p>And for some reason the <code>free(stackPtr-&gt;content[stackPtr-&gt;size-1]);</code> do an error every time.\nWhy is that and how do I fix that?\nThanks.</p>\n\n<p>This is the whole code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct \n{\n    int kind; // boolean\n    int num;\n    char ch;\n} Element;\n\ntypedef struct \n{\n    Element *content;\n    int size;\n} Stack;\n\nvoid Init(Stack* stackPtr)\n{\n    stackPtr-&gt;content = (Element*)malloc(1*sizeof(Element));\n    stackPtr-&gt;content[0].kind = 3;\n    stackPtr-&gt;content[0].ch = 'a';\n    stackPtr-&gt;content[0].num = -2;\n    stackPtr-&gt;size = 1;\n}\n\nvoid Push(Stack* stackPtr, Element element)\n{\n    stackPtr-&gt;content = (Element*)realloc(stackPtr-&gt;content,((stackPtr-&gt;size)+1)*sizeof(Element));\n    stackPtr-&gt;size++;\n    stackPtr-&gt;content[stackPtr-&gt;size-1] = element;\n}\n\nElement Pop(Stack *stackPtr)\n{\n    Element temp = stackPtr-&gt;content[stackPtr-&gt;size-1];\n    Element* newE = (Element*)realloc(stackPtr-&gt;content,(stackPtr-&gt;size-1)*sizeof(Element*));\n\n    free(stackPtr-&gt;content[stackPtr-&gt;size-1]);\n\n    stackPtr-&gt;content=newE;\n    stackPtr-&gt;size--;\n    return temp;\n}\n\nElement Top(Stack *stackPtr)\n{\n    return stackPtr-&gt;content[stackPtr-&gt;size-1];\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "fwrite"], "comments": [{"owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "edited": false, "score": 1, "creation_date": 1520444959, "post_id": 49158088, "comment_id": 85321380, "body": "There are no pointers in your structs... what do you mean by NULL? Do you mean the NUL character? Zero?"}, {"owner": {"reputation": 1608, "user_id": 7757135, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/JQ8Kt.png?s=128&g=1", "display_name": "JuMoGar", "link": "https://stackoverflow.com/users/7757135/jumogar"}, "reply_to_user": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "edited": false, "score": 0, "creation_date": 1520445115, "post_id": 49158088, "comment_id": 85321476, "body": "I mean: Array is size 20, if I agree only 2 &#39;cliente&#39; I wanna that fwrite only write this 2 &#39;cliente&#39; only"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1520445475, "post_id": 49158374, "comment_id": 85321680, "body": "You may want to explain why? That if <code>struct viaje *viajes;</code> declared <code>viajes</code> as a pointer and then allocated, in that case a <i>&quot;deep write&quot;</i> would be required, but since <code>struct viaje viajes[50];</code> is of fixed size, the <code>fwrite(clientes[i]...</code> includes the fixed storage."}], "tags": [], "owner": {"reputation": 136, "user_id": 8418506, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QxjJ6YngUNk/AAAAAAAAAAI/AAAAAAAAAZo/PeqE1EnXO-8/photo.jpg?sz=128", "display_name": "Sreedev Shibu", "link": "https://stackoverflow.com/users/8418506/sreedev-shibu"}, "is_accepted": true, "score": 3, "last_activity_date": 1520446027, "last_edit_date": 1520446027, "creation_date": 1520445258, "answer_id": 49158374, "question_id": 49158088, "link": "https://stackoverflow.com/questions/49158088/c-create-a-bin-file-without-nulls-non-defined-elements-is-not-working/49158374#49158374", "title": "C - Create a bin file without NULLs (non-defined) elements is not working", "body": "<p>This is because the containing structure <code>cliente</code> contains in your case statically allocated 50 element array of struct <code>viaje</code>. \nThe line <code>fwrite(clientes[i], sizeof(struct cliente), 1, fp_guardarCargarEstado);</code> automatically writes all the elements present within the <code>cliente</code> object i.e , it writes the 50 element array <code>vijae</code> also.\nTherefore this code is redundant : </p>\n\n<pre><code> for (j = 0; j &lt; clientes[i].totalViajes; j++) {\n            fwrite(clientes[i].viajes[j], sizeof(struct viaje), 1, fp_guardarCargarEstado);\n        }\n</code></pre>\n\n<p>You are writing element that has been already written by the statement : \n`fwrite(clientes[i], sizeof(struct cliente), 1, fp_guardarCargarEstado);\nThis is the expected behaviour.</p>\n\n<p>If you don't want this behaviour create a temporary object like:</p>\n\n<pre><code>struct cliente_temp {\n   char dni[30+1];\n   char nombre[30+1];\n   char apellidos[30+1];\n   char direccion[30+1];\n   //struct viaje viajes[50]; omit this line or use a pointer struct viaje *viajes;\n   int totalViajes;\n} clientes[20];\n</code></pre>\n\n<p>and copy the original structure to this structure before writing to the file and reading from the file. Then you can use the code for writing the structure vijae : </p>\n\n<pre><code>for (j = 0; j &lt; clientes[i].totalViajes; j++) {\n            fwrite(clientes[i].viajes[j], sizeof(struct viaje), 1, fp_guardarCargarEstado);\n        }\n</code></pre>\n"}], "owner": {"reputation": 1608, "user_id": 7757135, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/JQ8Kt.png?s=128&g=1", "display_name": "JuMoGar", "link": "https://stackoverflow.com/users/7757135/jumogar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 49158374, "answer_count": 1, "score": 0, "last_activity_date": 1520446027, "creation_date": 1520444302, "last_edit_date": 1520445258, "question_id": 49158088, "link": "https://stackoverflow.com/questions/49158088/c-create-a-bin-file-without-nulls-non-defined-elements-is-not-working", "title": "C - Create a bin file without NULLs (non-defined) elements is not working", "body": "<p>I have an  array of struct inside another array of structs and I want to create a binary file which contains the data inside both structs but only elements which are not null. </p>\n\n<p>My structs are: </p>\n\n<pre><code>struct viaje {\n   char identificador[30+1];\n   char ciudadDestino[30+1];\n   char hotel[30+1];\n   int numeroNoches;\n   char tipoTransporte[30+1];\n   float precioAlojamiento;\n   float precioDesplazamiento;\n};\n\nstruct cliente {\n   char dni[30+1];\n   char nombre[30+1];\n   char apellidos[30+1];\n   char direccion[30+1];\n   struct viaje viajes[50];\n   int totalViajes;\n} clientes[20];\n</code></pre>\n\n<p>I am trying next: </p>\n\n<pre><code>// For create bin file\n// 'totalClientes' is a var which contain the number of 'clientes'\nfor (i = 0; i &lt; totalClientes; i++) {\n        fwrite(clientes[i], sizeof(struct cliente), 1, fp_guardarCargarEstado);\n        // 'clientes[i].totalViajes' is a var which contain the number of 'viajes' inside actual 'cliente'\n        for (j = 0; j &lt; clientes[i].totalViajes; j++) {\n            fwrite(clientes[i].viajes[j], sizeof(struct viaje), 1, fp_guardarCargarEstado);\n        }\n    }\n\n\n// For read bin file\nfor (i = 0; i &lt; totalClientes; i++) {\n        fread(clientes[i], sizeof(struct cliente), 1, fp_guardarCargarEstado);\n        for (j = 0; j &lt; clientes[i].totalViajes; j++) {\n            fread(clientes[i].viajes[j], sizeof(struct viaje), 1, fp_guardarCargarEstado);\n        }\n    }\n</code></pre>\n\n<p>But It creates all elements into the bin file, includes null elements. What is wrong?</p>\n\n<p>Why could it be? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "c", "c++14"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1520443904, "post_id": 49157950, "comment_id": 85320752, "body": "What complexity? All of these operations (including division) <i>might</i> be implemented as a single CPU instruction."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520443937, "post_id": 49157950, "comment_id": 85320765, "body": "Do you mean &quot;precedence&quot; instead of &quot;complexity&quot;?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1520444024, "post_id": 49157950, "comment_id": 85320814, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/12135518/is-faster-than\">stackoverflow.com/questions/12135518/is-faster-than</a>"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1520444135, "post_id": 49157950, "comment_id": 85320871, "body": "For primitive (built-in) types like <code>int</code> or <code>double</code>, you can normally expect these to all be equal in speed. For user-defined types, it&#39;ll depend on how they&#39;re overloaded."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520444141, "post_id": 49157950, "comment_id": 85320874, "body": "@EugeneSh.: the significant difference is not in number of CPU instructions, but in number of CPU clock cycles, where divide, mod and to a less extent multiplication are often much, much slower (for e.g. <code>int</code>, <code>double</code>) than comparisons, addition, subtraction, and bitwise operations (all the latter often taking one clock cycle)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520444280, "post_id": 49157950, "comment_id": 85320952, "body": "@TonyDelroy addition and subtraction are slower than bitwise operations, but you put them together, so it is still not clear what OP and you mean by complexity."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520444480, "post_id": 49157950, "comment_id": 85321080, "body": "@Slava: <i>&quot;addition and subtraction are slower than bitwise operations&quot;</i> - there&#39;s not much point gainsaying me (or anyone) without evidence or references.  Mine: <a href=\"http://www.agner.org/optimize/instruction_tables.pdf\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520444754, "post_id": 49157950, "comment_id": 85321248, "body": "@TonyDelroy if you ever deal with FPGA you would clearly know why summation is slower. Your reference is irrelevant here, nobody said this question about Intel CPU or compatible ones."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1520445336, "post_id": 49157950, "comment_id": 85321594, "body": "On many CPUs compare is implemented very similar to subtract, and would have the same complexity."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520445416, "post_id": 49157950, "comment_id": 85321639, "body": "@Slava: I just used x86 as a counter example to your blanket claim that &quot;addition and subtraction are slower&quot;.  My own claim - by which I stand -  was that they all are <i>&quot;often taking one clock cycle&quot;</i> - note &quot;often&quot;.  That&#39;s true on <i>many</i> CPUs.  I not only understand why the <i>circuitry</i> for addition/summation is more complicated (FPGAs or not), but also - more importantly - the reasons why clock speeds on CPUs aren&#39;t increased to try to exploit the faster performance of the simpler logic needed for bitwise operations vs <code>+</code> and <code>-</code>."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1520446102, "post_id": 49157950, "comment_id": 85322042, "body": "Almost every compiler is going to turn <code>(x &lt; 100)</code> and <code>(x &lt;= 99)</code> into exactly the same assembly code.  So no, there&#39;s no difference in complexity in that regard.  That said, modern optimizing compilers will do much more complex optimizations, many of which are obviously compiler-specific."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1520446440, "post_id": 49157950, "comment_id": 85322242, "body": "@Slava: He doesn&#39;t specify the CPU involved, but he does specify C and C++, which (at least mostly) restricts you to CPUs. Even though we all know that addition (for example) uses a carry-chain, so in theory it should be slower than a bit-wise operation, on essentially any and all reasonably modern CPUs, addition and subtraction are single-cycle operations."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520448166, "post_id": 49157950, "comment_id": 85323271, "body": "@JerryCoffin you know that for all modern CPUs including embedded? wow. How about CPU that implemented in FPGA?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520450753, "post_id": 49157950, "comment_id": 85324790, "body": "@Slava: I&#39;ll repeat: <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b14\">c++14</a>. So even if we assume there&#39;s some 8-bit microcontroller that needs two cycles for an addition, it&#39;s irrelevant to the question at hand. Likewise something I decide to implement in an FPGA, for which no C++ compiler exists."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520450922, "post_id": 49157950, "comment_id": 85324881, "body": "@JerryCoffin why so, C++ and C++14 is restricted to be used on 8-bit microcontroller? Plus compiled C++ or C++14 code can be executed on software simulator of some CPU, is that allowed?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520451072, "post_id": 49157950, "comment_id": 85324963, "body": "@Slava: If you want to write (for example) an LLVM back-end to target a 6502, feel free--but right now, I&#39;m reasonably certain it just doesn&#39;t exist (and the chances of somebody investing enough to create one are minuscule)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520451220, "post_id": 49157950, "comment_id": 85325039, "body": "@JerryCoffin I do not have to write back-end for LLVM - cfront and existence of C compiler is enough."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520451496, "post_id": 49157950, "comment_id": 85325187, "body": "@Slava: No, it&#39;s not. cfront development stopped long before C++14, or even C++98. What it accepts no longer qualifies as C++ at all, not to mention being even close to C++14."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520451950, "post_id": 49157950, "comment_id": 85325445, "body": "@JerryCoffin how about Comeau? It definitely supported C++98 and some C++11"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520452178, "post_id": 49157950, "comment_id": 85325566, "body": "@Slava: it did. But it didn&#39;t support any arbitrary C compiler as the backend--if you wanted to support some 8-bit CPU, you needed to get Comeau to do that port for you (and it&#39;s been quite a while since I saw anything from Greg Comeau to indicate that he was actively engaged in doing such things any more). Theoretically, somebody else could do the same: license the EDG front end, and use it to target a C compiler of their choice. Then you have an even harder step though: find an <i>actual</i> 8-bit CPU that executes bitwise operators faster than addition/subtraction."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520452717, "post_id": 49157950, "comment_id": 85325868, "body": "Even if I can&#39;t say with <i>absolute</i> authority that it couldn&#39;t possibly exist, I can say that I&#39;ve used most of the common ones (Intel, Motorola, MOS Tech, NEC, National Semi, Dallas Semi, Microchip, Atmel, etc.) and I&#39;m pretty sure it&#39;s not true of any of them. Bottom line: yes, it&#39;s difficult to prove a negative--but in this case, there&#39;s a huge preponderance of evidence indicating that it just doesn&#39;t exist."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1520445504, "post_id": 49158274, "comment_id": 85321700, "body": "In addition to this, these operators can apply to classes and structs which means they&#39;re not always predictable in terms of performance."}], "tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": false, "score": 3, "last_activity_date": 1520446360, "last_edit_date": 1520446360, "creation_date": 1520444934, "answer_id": 49158274, "question_id": 49157950, "link": "https://stackoverflow.com/questions/49157950/complexity-for-vs-operation-in-c-c/49158274#49158274", "title": "Complexity for &gt;=, &lt;= vs &lt;, &gt;, == operation in C/C++", "body": "<blockquote>\n  <p>Does all the relational operations have the same complexity or differs for &lt;= and >= operations.</p>\n</blockquote>\n\n<p>The performance of these (for inbuilt integral and floating point types) is not determined by the C++ language Standard, but the CPU instructions the specific compiler implementation emits, which is of course limited by what that CPU offers.  You'll could research the compiler(s) you're interested in (e.g. <code>g++ -S program.cc</code> will produce <code>program.s</code> with assembly), then research the CPU models you're interested in and their performance.  For x86-family processors you'll find lists of instruction timings easily online (e.g. <a href=\"http://www.agner.org/optimize/instruction_tables.pdf\" rel=\"nofollow noreferrer\">here</a>), and - <strong><em>as with most CPUs - all the comparison operations tend to take one CPU cycle</em></strong>.  It's vaguely possible that some more complicated instruction like a conditional move or jump might support a more limited set of conditions on some CPU model, but that's unlikely to be a practical issue for you.</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1520446063, "creation_date": 1520446063, "answer_id": 49158591, "question_id": 49157950, "link": "https://stackoverflow.com/questions/49157950/complexity-for-vs-operation-in-c-c/49158591#49158591", "title": "Complexity for &gt;=, &lt;= vs &lt;, &gt;, == operation in C/C++", "body": "<p>Computational complexity is discussed in at least two contexts, theoretical and practical.</p>\n\n<p>In a theoretical context, the input to a program is a string of <em>n</em> bits, and we study how long a theoretical computer must take to produce an answer as a function of <em>n</em>. In such a computer, the time it takes to compare two binary numerals is O(<em>n</em>), because you may have to compare each of the bits of the two numbers up to the end before you find a difference. This is true regardless of whether the operation is less than, less than or equal to, greater than, greater than or equal to, equal to, or not equal to. As soon as you find the most significant bit that differs between the two numbers, you can determine any of those order relations immediately. It is finding the most significant bit that differs (or determining all bits are the same) that takes the varying amount of time, and that is O(<em>n</em>).</p>\n\n<p>In a practical context, computers have fixed-size words, and we are concerned with how long practical programs take given that they stay within the bounds of those fixed-size words. In common current general-purpose processors, comparing two scalar numbers (numbers represented in one word or less, such as 64-bit integers or narrower or 64-bit floating-point values) typically has a fixed latency, often a single CPU cycle, sometimes a few cycles. Effectively, the complexity is O(1). Sometimes the latency may be fixed for normal cases but take longer for special cases such as subnormals or NaNs. The latency generally does not differ for which relation is being evaluated. In fact, many processors have a single general comparison instruction that returns all the ordering information, and a second information is used to branch based on whether the order is less than, greater than, equal to, or unordered (NaNs are not ordered).</p>\n\n<p>If a compiler or library implements an arbitrary size number, such as multi-precision floating-point or big integers, then it will behave more like the theoretical problem: Numbers with more digits will take longer to compare. In normal representations of numbers, all comparisons will have the same complexity. However, there are special representations in which the comparisons may differ. For example, we could represent an integer by storing its residues modulo selected divisors instead of storing bits representing specific magnitudes. It would be easy to compare two such integers for equality (Are all their residues the same?), but it could be difficult to compare them for order (which one is larger is a complicated function of their residues).</p>\n"}], "owner": {"reputation": 7, "user_id": 9458110, "user_type": "registered", "profile_image": "https://graph.facebook.com/1696615907042744/picture?type=large", "display_name": "Ravi Kalahasthi", "link": "https://stackoverflow.com/users/9458110/ravi-kalahasthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "closed_date": 1520447583, "answer_count": 2, "score": -1, "last_activity_date": 1520446360, "creation_date": 1520443813, "question_id": 49157950, "link": "https://stackoverflow.com/questions/49157950/complexity-for-vs-operation-in-c-c", "closed_reason": "Needs details or clarity", "title": "Complexity for &gt;=, &lt;= vs &lt;, &gt;, == operation in C/C++", "body": "<p>In arithmetic operation, add and subtract operations takes less complexity while division has high complexity. Does all the relational operations have the same complexity or differs for &lt;= and >= operations.</p>\n"}, {"tags": ["c", "arrays", "file", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1520443496, "post_id": 49157801, "comment_id": 85320516, "body": "In C, it&#39;s frowned upon to cast the return of malloc, as is while(!feof(file))"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8900498"}, "reply_to_user": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1520443658, "post_id": 49157801, "comment_id": 85320619, "body": "@JGroven What should change it into?"}, {"owner": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1520443738, "post_id": 49157801, "comment_id": 85320662, "body": "Take a look <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">here</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8900498"}, "reply_to_user": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1520443888, "post_id": 49157801, "comment_id": 85320741, "body": "@JGroven So you think the only problem is that in the code you see above?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520448391, "post_id": 49157801, "comment_id": 85323383, "body": "regarding: <code>line_ptr=(char *)malloc(line*(sizeof(char)*100));</code>  1) in C, the returned type from any of the heap allocation functions ( <code>malloc</code>, <code>calloc</code>, <code>realloc</code> ) is <code>void*</code>.  I.E. it can be assigned to any other pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc.  2) Always check (!=NULL) the returned value to assure the operation was successful. 3) the expression: <code>sizeof(char)</code> is defined in the standard as 1.  Multiplying anything by 1 has absolutely no effect."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520448543, "post_id": 49157801, "comment_id": 85323452, "body": "regarding: <code>while(!feof(fptr)){</code>  the function: <code>feof()</code> does not do what the code is expecting.  suggest elimination of the <code>for()</code> statement and controlling the loop via the returned value from <code>fscanf()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520448853, "post_id": 49157801, "comment_id": 85323630, "body": "regarding: <code>fscanf(fptr,&quot;%s&quot;,lines_ptr+i);</code>  this reads ALL the lines from the file into the same location in memory.  So all but the last line is lost.  Also, <code>&#39;%s&quot; will stop inputting when it encounters any </code>white space` character.  So if any line contains a space, the rest of the line will not be input during that specific call to <code>fscanf()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 3, "last_activity_date": 1520444330, "creation_date": 1520444330, "answer_id": 49158098, "question_id": 49157801, "link": "https://stackoverflow.com/questions/49157801/allocation-with-char-pointer/49158098#49158098", "title": "allocation with char pointer", "body": "<blockquote>\n<pre><code>HHHHMMMMMMONSTER,ERRTU,14,2 //why does it happen?\n</code></pre>\n</blockquote>\n\n<p>What you do is as follows.</p>\n\n<p>You read to the line buffer, but every time you move the beginning of the text by <code>1</code> character.\nSo when you come back and print beginning of the buffer you will get all the first characters of all previously read lines plus last read line.  </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8900498"}, "edited": false, "score": 0, "creation_date": 1520445610, "post_id": 49158155, "comment_id": 85321762, "body": "I understand thank your for your help. I need to use malloc and i am trying to learn it . how can i use  fgets() with malloc?"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1520496939, "post_id": 49158155, "comment_id": 85341699, "body": "fgets have nothing to do with malloc. If you want to read an unknow number of something (actually, it&#39;s line from a file), there are two commom approach of this : the first si to retrieve the total number of &quot;something&quot;, allocate, then fill it. The second approach is to fill it, and if you don&#39;t have enougth space, reallocate it. Each one have pros and cons, depending on how &quot;easy/possible/not punishing&quot; it is to firstly retrieve the total number of something you need to allocate, and other implemtation-context thing. Give it a try with the first method (in your case, it&#39;s the simpliest)."}], "tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": false, "score": 0, "last_activity_date": 1520444564, "creation_date": 1520444564, "answer_id": 49158155, "question_id": 49157801, "link": "https://stackoverflow.com/questions/49157801/allocation-with-char-pointer/49158155#49158155", "title": "allocation with char pointer", "body": "<p>you incorrectly use \"line_ptr\" (and so many other stuff ...).</p>\n\n<p>From what I understand, it's seem you whant to load the entire file into \"line_ptr\", each file's line being in \"line_ptr[i]\".</p>\n\n<p>If that so, then I advise you to take your time and do really simple code, and after, make it more complicated.</p>\n\n<p>For instance, dont use malloc : with your current code, it's useless anyway.</p>\n\n<p>Let's say you have a file with NB_LINE line at maximum, each line having NB_MAX_CHAR character at maximum.</p>\n\n<pre><code>#define NB_LINE_MAX 50\n#define NB_CHAR_MAX 100\n\nchar   lines[NB_LINE_MAX][NB_CHAR_MAX];\nsize_t nbLines = 0;\n\nfor (nbLines = 0; fgets(lines[nbLines], NB_CHAR_MAX, fptr); ++nbLines) {\n  // Nothing to do, fgets do it for us\n}\n\nif (!feof(fptr)) {\n  // problem while reading :/\n}\n\n\nprintf(\"Test :\\\");\nfor (size_t i = 0; i &lt; nbLines; ++i) {\n  printf(\"%d : %s\", i, lines[i]);\n}\n</code></pre>\n\n<p>Does this code work ? If yes, try to improove it by removing NB_LINE_MAX first (then you can have at many line you want in your file, not only 50) and after, try to remove NB_CHAR_MAX (then you can have a line without char limitation).</p>\n\n<p>Misc remark :</p>\n\n<ul>\n<li>sizeof(char) is alway 1, always. So you can delete it from your malloc.</li>\n<li>fscanf(fptr,\"%s\",lines_ptr+i) is dangerous. %s will read at many char it want, so if he read 500 char but lines_ptr can only hold 100 of them, it will write somewhere not good, and you will probably have SIGSEV runtime crash.</li>\n<li>while(!feof(fptr)) already say by another, but it's note how you use feof.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "is_accepted": false, "score": 0, "last_activity_date": 1520446376, "creation_date": 1520446376, "answer_id": 49158672, "question_id": 49157801, "link": "https://stackoverflow.com/questions/49157801/allocation-with-char-pointer/49158672#49158672", "title": "allocation with char pointer", "body": "<p>There are some mistakes you are doing.First look carefully what you are messing with in the picture.Suppose there are two line in the input <code>hello</code>  and <code>world</code>,while taking the first input <code>line_ptr</code> starts from 0,so it will store hello from <code>0</code> to <code>4</code> but in second line <code>line_ptr</code> is incremented to 1 so it will store <code>world</code> from <code>1</code> to <code>5</code> and this will go on if more lines are there.\n<a href=\"https://i.stack.imgur.com/UjY4D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UjY4D.png\" alt=\"enter image description here\"></a>\nNOTE: Always check the return value of <code>scanf()</code> or <code>fscanf()</code> </p>\n\n<p>For taking line as a input in c, you should use Array of pointers like <code>char *lineptr[MAXLINE];</code></p>\n\n<pre><code> int readline(char* lineptr[])\n {\n      char line[1000];\n      for(i=0;i&lt;MAXLINE;i++){\n           if(fscanf(stdin,\"%s\",line)){\n              char *temp=malloc((strlen(line)+1)*sizeof(char));\n              strcpy(temp,line);\n              lineptr[i]=temp;  \n           }\n      }\n      return i; \n }\n</code></pre>\n\n<p>This function will read a line in a variable <code>line</code>, then it will allocate memory for that line in <code>temp</code> and <code>lineptr[i]</code>  will point to that new line.It returns number of lines read. </p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1520450987, "last_edit_date": 1520450987, "creation_date": 1520450258, "answer_id": 49159669, "question_id": 49157801, "link": "https://stackoverflow.com/questions/49157801/allocation-with-char-pointer/49159669#49159669", "title": "allocation with char pointer", "body": "<p>the following proposed code:</p>\n\n<ol>\n<li>always reads the whole line from the file</li>\n<li>properly checks for errors</li>\n<li>properly places the read in data in the 'malloc'd array</li>\n<li>eliminates the clutter from the code</li>\n<li>eliminates the use of a 'magic' number in the code</li>\n</ol>\n\n<p>and now the proposed code</p>\n\n<pre><code>    if ( !fptr )\n    {\n        perror( \"file could not be opened.\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen successful\n\n    #define MAX_LINE_LEN 100\n\n    //size_t line=number of lines\n    char *line_ptr = malloc( line * MAX_LINE_LEN ));\n    if( !line_ptr )\n    {\n        perror( \"malloc failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, malloc successful\n\n    size_t i = 0;\n    // Note: '%[^\\n]' reads to end of line, but not the newline char\n    //      AND appends a NUL byte to the end of the input\n    //      '%*c' reads and discards the newline char\n    // Note: using the '%*c' requires the last line in the file ends with a newline char\n    //      otherwise the last call to `fscanf()` will 'hang' looking for the final newline\n    while( i &lt; lines &amp;&amp; 1 == fscanf(fptr,\"%[^\\n]%*c\", line_ptr+(MAX_LINE_LEN*i) ) )\n    {\n        printf( \"%s\\n\", line_ptr+(MAX_LINE_LEN*i) );\n        i++;\n    }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8900498"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1520450987, "creation_date": 1520443363, "last_edit_date": 1520450788, "question_id": 49157801, "link": "https://stackoverflow.com/questions/49157801/allocation-with-char-pointer", "title": "allocation with char pointer", "body": "<p>I am beginner.I have a file which has lines like MONSTER,ERRTU,14,2 . when i tried to read the lines and store them into a dynamic memory allocated array. it seems like it worked at first but then when i tried to print the elements of it later , it doesnt work properly.Is it about using char * ? How can I fix this problem?</p>\n\n<p>here my code is;</p>\n\n<pre><code>char *lines_ptr;\nline_ptr=(char *)malloc(line*(sizeof(char)*100));   \nint i=0;\n\nif (fptr==NULL){\n\n    printf(\"file could not be opened.\");\n}\nelse{ \n\n//line=number of lines\nwhile(!feof(fptr)){\n    for(i=0;i&lt;line;i++){\n\n        fscanf(fptr,\"%s\",lines_ptr+i);\n\n        printf(\"%s\\n\",(lines_ptr+i));\n    }\n}\n\nprintf(\"%s\",(lines_ptr));//this part shows me i did something wrong.\n\n}  \n</code></pre>\n\n<p>here is my output;</p>\n\n<pre><code>   HERO,DRIZZT,8,3\n   HERO,CATTIE,6,3\n   HERO,BRUENOR,10,1\n   HERO,WULFGAR,12,4\n   MONSTER,TROLL,4,3\n   MONSTER,GOBLIN,1,3\n   MONSTER,UNDEAD,1,1\n   MONSTER,VERMIN,3,2\n   MONSTER,MINDFLAYER,10,2\n   MONSTER,ERRTU,14,2\n   HHHHMMMMMMONSTER,ERRTU,14,2 \n</code></pre>\n\n<p>why does it happen?</p>\n"}, {"tags": ["c", "pointers", "memory"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 1, "creation_date": 1520442731, "post_id": 49157560, "comment_id": 85320044, "body": "<code>[help-me]</code> Please write an MCVE. How do you declare <code>ptr</code>? Hint: <code>&amp;data[0] = &amp;ptr;</code> does not do what you hope it does."}, {"owner": {"reputation": 87, "user_id": 4511262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1270725850/picture?type=large", "display_name": "Dries Jans", "link": "https://stackoverflow.com/users/4511262/dries-jans"}, "edited": false, "score": 0, "creation_date": 1520443101, "post_id": 49157560, "comment_id": 85320253, "body": "No I already found out that &amp;data[0] = &amp;ptr; was not the way. and yes, I&#39;m a way to chaotic personn I will edit the question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1520444298, "post_id": 49157560, "comment_id": 85320969, "body": "What is the point of <code>data</code>? Delete it and see where it gets you."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520444683, "post_id": 49158136, "comment_id": 85321202, "body": "If size isn&#39;t a multiple of 10, you&#39;ll access outside the size on the laster iteration of the row loop."}, {"owner": {"reputation": 87, "user_id": 4511262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1270725850/picture?type=large", "display_name": "Dries Jans", "link": "https://stackoverflow.com/users/4511262/dries-jans"}, "edited": false, "score": 0, "creation_date": 1520445047, "post_id": 49158136, "comment_id": 85321429, "body": "yes, it will just continu till the next multiple of 10."}], "tags": [], "owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "is_accepted": true, "score": 1, "last_activity_date": 1520444476, "creation_date": 1520444476, "answer_id": 49158136, "question_id": 49157560, "link": "https://stackoverflow.com/questions/49157560/best-datatype-for-a-memdump-of-a-specific-address/49158136#49158136", "title": "Best datatype for a memdump of a specific address", "body": "<p>How about this:</p>\n\n<pre><code>void memdump(byte_t *ptr, long size ) {\n  byte_t * baseptr; /* base addr for each row */\n  for (size_t j = 0; j &lt; size; j+=10) { /* row loop */\n    baseptr = ptr+j;\n    printf(\"%p \",baseptr);\n    for (size_t i = j; i &lt; j+10; i++) { /* hex code */\n      printf(\"%02x \",*(baseptr+i));\n    };\n    for (size_t i = j; i &lt; j+10; i++) { /* char print */\n      if (isprint(*(baseptr+i))) {\n        printf(\"%c\",*(baseptr+i));\n      } else {\n        printf(\".\");\n      };\n    };\n    printf(\"\\n\" );\n  };\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "is_accepted": false, "score": 0, "last_activity_date": 1520445422, "creation_date": 1520445422, "answer_id": 49158427, "question_id": 49157560, "link": "https://stackoverflow.com/questions/49157560/best-datatype-for-a-memdump-of-a-specific-address/49158427#49158427", "title": "Best datatype for a memdump of a specific address", "body": "<p><code>void const *</code> is the best datatype for <code>ptr</code>; everything else will require casts.  <code>size</code> should be of type <code>size_t</code> too:</p>\n\n<pre><code>void memdump(void const *ptr, size_t size ) {\n    uint8_t const *data = ptr;\n\n    for (size_t i = 0; i &lt; size; ++i) {\n        ...\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 4511262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1270725850/picture?type=large", "display_name": "Dries Jans", "link": "https://stackoverflow.com/users/4511262/dries-jans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 49158136, "answer_count": 2, "score": 0, "last_activity_date": 1568858419, "creation_date": 1520442467, "last_edit_date": 1568858419, "question_id": 49157560, "link": "https://stackoverflow.com/questions/49157560/best-datatype-for-a-memdump-of-a-specific-address", "title": "Best datatype for a memdump of a specific address", "body": "<p>I'm writing a memdump application in C and the goal is to print a real piece of the application memory of a specific address. The code I already have is this:</p>\n\n<pre><code>void memdump(byte_t *ptr, long size ) {\n</code></pre>\n\n<p>...</p>\n\n<pre><code>  typedef unsigned char byte_t;\n  byte_t data[size];\n  //&amp;data[0] = &amp;ptr;\n  byte_t * pointer_to_byte = data;\n\n\n  for (size_t j = 0; j &lt; size; j+=10) {\n    printf(\"%p \",&amp;data[j]);\n    for (size_t i = j; i &lt; j+10; i++) {\n      printf(\"%02x \",*(pointer_to_byte+i));\n    }\n    for (size_t i = j; i &lt; j+10; i++) {\n      if (isprint(*(pointer_to_byte+i))) {\n        printf(\"%c\",*(pointer_to_byte+i));\n      } else {\n        printf(\".\" );\n      }\n    }\n      printf(\"\\n\" );\n    }\n}\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>    void  *start_addr;\n...\n    scanf(\"%p\", &amp;start_addr);\n...\n    memdump( (byte_t*)start_addr, size );\n</code></pre>\n\n<p>You can see that I use an array to obtain the memory block, but this might not be the best way. Now I would like to get the address as a parameter to scan and my question is what is the best datatype to get this address and any idea's how I can change my code up so I can use the specific address? I already use a pointer to print the data and the char, so a pointer is the best way I think.</p>\n"}, {"tags": ["c", "azure", "azure-functions"], "comments": [{"owner": {"reputation": 30010, "user_id": 1171619, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6f1d9a240fc75d00c4a4ffa000ea4bd1?s=128&d=identicon&r=PG", "display_name": "Mikhail Shilkov", "link": "https://stackoverflow.com/users/1171619/mikhail-shilkov"}, "edited": false, "score": 1, "creation_date": 1520443570, "post_id": 49157544, "comment_id": 85320570, "body": "How do you measure the durations? Which durations does the log show? What&#39;s the dependency call duration in those cases?"}, {"owner": {"reputation": 527, "user_id": 3339922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e3bf99cc0252879553f93efea725c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Noel", "link": "https://stackoverflow.com/users/3339922/noel"}, "reply_to_user": {"reputation": 30010, "user_id": 1171619, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6f1d9a240fc75d00c4a4ffa000ea4bd1?s=128&d=identicon&r=PG", "display_name": "Mikhail Shilkov", "link": "https://stackoverflow.com/users/1171619/mikhail-shilkov"}, "edited": false, "score": 0, "creation_date": 1520446606, "post_id": 49157544, "comment_id": 85322326, "body": "Not sure what you mean. We call functions from api gateway . I can see the call times there (it shows backend call taking x ms). I Haven proven the service takes under a second to call."}, {"owner": {"reputation": 527, "user_id": 3339922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e3bf99cc0252879553f93efea725c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Noel", "link": "https://stackoverflow.com/users/3339922/noel"}, "reply_to_user": {"reputation": 30010, "user_id": 1171619, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6f1d9a240fc75d00c4a4ffa000ea4bd1?s=128&d=identicon&r=PG", "display_name": "Mikhail Shilkov", "link": "https://stackoverflow.com/users/1171619/mikhail-shilkov"}, "edited": false, "score": 0, "creation_date": 1520446922, "post_id": 49157544, "comment_id": 85322514, "body": "Sorry I mean I have proven the service call I make from the function take a less than a second outside the function."}, {"owner": {"reputation": 30010, "user_id": 1171619, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6f1d9a240fc75d00c4a4ffa000ea4bd1?s=128&d=identicon&r=PG", "display_name": "Mikhail Shilkov", "link": "https://stackoverflow.com/users/1171619/mikhail-shilkov"}, "edited": false, "score": 0, "creation_date": 1520447554, "post_id": 49157544, "comment_id": 85322891, "body": "I mean you that you can measure it from different angles. And we can&#39;t..."}, {"owner": {"reputation": 19351, "user_id": 4148708, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/jLI9o.jpg?s=128&g=1", "display_name": "evilSnobu", "link": "https://stackoverflow.com/users/4148708/evilsnobu"}, "edited": false, "score": 0, "creation_date": 1520451041, "post_id": 49157544, "comment_id": 85324951, "body": "Go to the Kudu Console on your function app, use curl or Invoke-WebRequest a few times in a row and see if the behavior repros.  There could be some throttling applied by the remote for public cloud IP space or <i>greylisted</i> IP space. If you can&#39;t repro, then yes, there&#39;s something in your function code that&#39;s not happy."}, {"owner": {"reputation": 527, "user_id": 3339922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e3bf99cc0252879553f93efea725c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Noel", "link": "https://stackoverflow.com/users/3339922/noel"}, "edited": false, "score": 0, "creation_date": 1520518693, "post_id": 49157544, "comment_id": 85355540, "body": "Thanks for the suggestion on the Kudo call that was a great help. It was actually due to a linked VNet . (Which i didnt mention in my post) It seems to be swallowing up outbound traffic and sending it on a very slow trip,  due to what looks like a bad config around dns.settings."}], "answers": [{"tags": [], "owner": {"reputation": 12931, "user_id": 2069, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/67BMA.jpg?s=128&g=1", "display_name": "Chris Gillum", "link": "https://stackoverflow.com/users/2069/chris-gillum"}, "is_accepted": false, "score": 0, "last_activity_date": 1520538043, "creation_date": 1520538043, "answer_id": 49181211, "question_id": 49157544, "link": "https://stackoverflow.com/questions/49157544/azure-functions-app-service-plan-intermittent-slow-calls/49181211#49181211", "title": "Azure Functions - App Service Plan (Intermittent Slow Calls)", "body": "<p>(Copying Noel's comment as the answer)</p>\n\n<blockquote>\n  <p>Thanks for the suggestion on the Kudo call that was a great help. <strong>It was actually due to a linked VNet</strong>. (Which i didnt mention in my post) It seems to be swallowing up outbound traffic and sending it on a very slow trip, due to what looks like a bad config around dns.settings.</p>\n</blockquote>\n"}], "owner": {"reputation": 527, "user_id": 3339922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e3bf99cc0252879553f93efea725c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Noel", "link": "https://stackoverflow.com/users/3339922/noel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520538043, "creation_date": 1520442380, "question_id": 49157544, "link": "https://stackoverflow.com/questions/49157544/azure-functions-app-service-plan-intermittent-slow-calls", "title": "Azure Functions - App Service Plan (Intermittent Slow Calls)", "body": "<p>We are using Azure Functions. We are running on  App Service Plan (not consumption model). My issue is that we are seeing a strange delay on 'some' web calls into out services. </p>\n\n<p>For example i have one http get trigger, it returns a list of objects from another web service (so there is outbound web traffic from my function). If i call the service 10 times. i'll get maybe 6 respoonses come back in bewteen 400 and 600 ms)  but then 4 of those calls will take bewteen 7000 and 8000 ms). Its actually quite consitent in the number. It seems bizarre , its either half a second or 7.5 seconds. I have tested the backend system and its not that. So its something around the function app itself.  Any thoughts or suggestions welcome.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1520442522, "post_id": 49157538, "comment_id": 85319909, "body": "Sounds like a programming challenge. The point of these is for you to figure it out yourself."}, {"owner": {"reputation": 3489, "user_id": 9434800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469a55ff2e5beb918a1ba26465ed5518?s=128&d=identicon&r=PG&f=1", "display_name": "Mickael B.", "link": "https://stackoverflow.com/users/9434800/mickael-b"}, "edited": false, "score": 0, "creation_date": 1520442590, "post_id": 49157538, "comment_id": 85319955, "body": "You should at least try to write a basic algorithm from your own before we help you."}, {"owner": {"reputation": 3, "user_id": 9458015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a3d5170411474f283472987ad0902bb?s=128&d=identicon&r=PG&f=1", "display_name": "harish", "link": "https://stackoverflow.com/users/9458015/harish"}, "edited": false, "score": 0, "creation_date": 1520442610, "post_id": 49157538, "comment_id": 85319966, "body": "I didnt mean to ask for the entire code. Just wanted a brief way of approach to the solution."}, {"owner": {"reputation": 3, "user_id": 9458015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a3d5170411474f283472987ad0902bb?s=128&d=identicon&r=PG&f=1", "display_name": "harish", "link": "https://stackoverflow.com/users/9458015/harish"}, "edited": false, "score": 0, "creation_date": 1520442672, "post_id": 49157538, "comment_id": 85320007, "body": "I did write the entire program. But I am unable to get the exact logic."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1520442694, "post_id": 49157538, "comment_id": 85320020, "body": "You should take one problem after another, and not try to do all in one go. For example, let&#39;s say you already have an array[n][m] filled. What algorithm can you do in order to know the longest sequence ? After you have resolved that, you can try to fill the array from your input."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520443279, "post_id": 49157538, "comment_id": 85320365, "body": "The algorithm is similar to most &quot;find max&quot; problems. Keep 2 variables, one with the candidate value and another with the quantity. In your loop, check the length of the current sequence, if it&#39;s bigger than the max quantity, replace the value and quantity with the current value and length."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520443343, "post_id": 49157538, "comment_id": 85320397, "body": "You just need 2 2-dimensional loops: one that goes by row and tests the length of horizontal sequences, and another that goes by columns and checks the length of vertical sequences."}, {"owner": {"reputation": 3, "user_id": 9458015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a3d5170411474f283472987ad0902bb?s=128&d=identicon&r=PG&f=1", "display_name": "harish", "link": "https://stackoverflow.com/users/9458015/harish"}, "edited": false, "score": 0, "creation_date": 1520445043, "post_id": 49157538, "comment_id": 85321423, "body": "Thank you for giving me a brief overview. I will try the rest."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 9457907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kai", "link": "https://stackoverflow.com/users/9457907/kai"}, "is_accepted": true, "score": 0, "last_activity_date": 1522358327, "last_edit_date": 1522358327, "creation_date": 1520443366, "answer_id": 49157803, "question_id": 49157538, "link": "https://stackoverflow.com/questions/49157538/cfinding-longest-length-of-same-character-in-a-2-d-character-array/49157803#49157803", "title": "C:Finding longest length of same character in a 2-D character array", "body": "<p>So you want to give the program a character and a 2D array of characters and it returns the largest number of occurrences in a row?</p>\n\n<p>I would go with something simple along the lines of</p>\n\n<pre><code>func(char** grid, xlength, ylengh, char k){\n    int i;\n    int j;\n    int number = 0;\n    int max = 0;\n\n    for(i = 0; i &lt; xlength; i++){\n        for(j = 1; j &lt; ylength; j&lt;&lt;){\n            if(grid[i][j-1] == grid[i][j])\n               number++;\n\n            if(number &gt; max) \n               max = number;\n\n            if(grid[i][j-1] != grid[i][j]number) = 0;\n            }\n        }\n    return max;\n}\n</code></pre>\n\n<p>You would have to do the same thing twice, where you switch the rows an columns. But this should work.                 </p>\n"}], "owner": {"reputation": 3, "user_id": 9458015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a3d5170411474f283472987ad0902bb?s=128&d=identicon&r=PG&f=1", "display_name": "harish", "link": "https://stackoverflow.com/users/9458015/harish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1520444361, "accepted_answer_id": 49157803, "answer_count": 1, "score": 0, "last_activity_date": 1522358327, "creation_date": 1520442362, "last_edit_date": 1520442548, "question_id": 49157538, "link": "https://stackoverflow.com/questions/49157538/cfinding-longest-length-of-same-character-in-a-2-d-character-array", "closed_reason": "Needs more focus", "title": "C:Finding longest length of same character in a 2-D character array", "body": "<p>Can someone please help me giving an algorithm or a pseudo code for the following C program?</p>\n\n<p>There is an n*m grid consisting of lower case characters of the English Alphabet.\nYou need to determine the maximum number of occurrences of a character contiguously either vertically or horizontally.</p>\n\n<p>Input\nInput description.</p>\n\n<p>The first line of the input contains T test-cases.The first line of each Test Case contains n(No. of Rows), m(No. of Columns). Each of the next n lines contain m characters each denoting the grid.</p>\n\n<p>Input\nIn each case output the answer as the problem statement specified</p>\n\n<pre><code>2\n3 3\naaa\nabc\ndca\n2 3\nfgh\nfrq\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3\n2\n</code></pre>\n"}, {"tags": ["c", "struct", "fwrite"], "answers": [{"comments": [{"owner": {"reputation": 1608, "user_id": 7757135, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/JQ8Kt.png?s=128&g=1", "display_name": "JuMoGar", "link": "https://stackoverflow.com/users/7757135/jumogar"}, "edited": false, "score": 0, "creation_date": 1520442871, "post_id": 49157568, "comment_id": 85320129, "body": "Hi! Yes, I have tryed your first code (anidated for) and It creates a extra large file. When I try read it, does not load data. I wanna do a bucle beause I do now want that it saves all data (empty items too), I wanna that only save items which have data"}, {"owner": {"reputation": 1608, "user_id": 7757135, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/JQ8Kt.png?s=128&g=1", "display_name": "JuMoGar", "link": "https://stackoverflow.com/users/7757135/jumogar"}, "edited": false, "score": 0, "creation_date": 1520442927, "post_id": 49157568, "comment_id": 85320163, "body": "I mean, an array has empty elements and others with content, I want to only store the elements that have content, not all the array elements"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1520444379, "post_id": 49157568, "comment_id": 85321017, "body": "Note you can <code>fwrite</code> and <code>fread</code> array of structs on the same machine, but do not consider this a portable solution. It isn&#39;t. Different compilers handle padding and alignment in different ways. So if you create a binary file with <code>fwrite</code> containing an array of struct, there is no guarantee you can move that file to another computer, recompile your code, and <code>fread</code> the values back in."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1520442485, "creation_date": 1520442485, "answer_id": 49157568, "question_id": 49157517, "link": "https://stackoverflow.com/questions/49157517/c-create-a-bin-file-of-a-structss-array-inside-other-structs-array-with-fwri/49157568#49157568", "title": "C - create a bin file of a structs&#39;s array inside other struct&#39;s array with fwrite", "body": "<p>The <code>fread</code> and <code>fwrite</code> functions take a pointer to a memory location as their first parameter.  You're instead passing an instance of a struct.</p>\n\n<p>You need to pass in the address of this struct using the address-of operator <code>&amp;</code>.  Also, there's no need to write the <code>struct viaje</code> instances separately, since they are already contained within a <code>struct cliente</code></p>\n\n<pre><code>// For create bin file\nfor (i = 0; i &lt; totalClientes; i++) {\n    fwrite(&amp;clientes[i], sizeof(struct cliente), 1, fp_guardarCargarEstado);\n}\n\n\n// For read bin file\nfor (i = 0; i &lt; totalClientes; i++) {\n    fread(&amp;clientes[i], sizeof(struct cliente), 1, fp_guardarCargarEstado);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1608, "user_id": 7757135, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/JQ8Kt.png?s=128&g=1", "display_name": "JuMoGar", "link": "https://stackoverflow.com/users/7757135/jumogar"}, "edited": false, "score": 0, "creation_date": 1520454628, "post_id": 49159602, "comment_id": 85326852, "body": "Thank you so much!! That is what I was looking for. I have tested the code and works fine, it is great."}], "tags": [], "owner": {"reputation": 108, "user_id": 9421254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af34d86947b66e43a6501065ba69ffd?s=128&d=identicon&r=PG&f=1", "display_name": "Adam VZ", "link": "https://stackoverflow.com/users/9421254/adam-vz"}, "is_accepted": true, "score": 1, "last_activity_date": 1520450007, "creation_date": 1520450007, "answer_id": 49159602, "question_id": 49157517, "link": "https://stackoverflow.com/questions/49157517/c-create-a-bin-file-of-a-structss-array-inside-other-structs-array-with-fwri/49159602#49159602", "title": "C - create a bin file of a structs&#39;s array inside other struct&#39;s array with fwrite", "body": "<p>It looks like there a a few things going on here. There are some important things to note here.</p>\n\n<ol>\n<li>Location of <code>totalViajes</code> in <code>struct cliente</code></li>\n<li>The number of bytes you want to write in fwrite()</li>\n<li>Resetting the <code>FILE*</code> before reading from the file again.</li>\n</ol>\n\n<p>Here is what I used to test what I think you're looking for.</p>\n\n<pre><code>struct viaje {\n    char identificador[30+1];\n    char ciudadDestino[30+1];\n    char hotel[30+1];\n    int numeroNoches;\n    char tipoTransporte[30+1];\n    float precioAlojamiento;\n    float precioDesplazamiento;\n};\nstruct cliente {\n    int totalViajes;\n    char dni[30+1];\n    char nombre[30+1];\n    char apellidos[30+1];\n    char direccion[30+1];\n    struct viaje viajes[50];\n} clientes[20];\n\nint main()\n{\n    clientes[0].totalViajes = 1;\n    clientes[0].viajes[0].numeroNoches = 52;\n    int totalClientes = 1;\n\n    FILE* fp_guardarCargarEstado = fopen(\"myFile.bin\", \"wb\");\n    // For create bin file\n    for (int i = 0; i &lt; totalClientes; i++) {\n        fwrite(&amp;clientes[i], sizeof(struct cliente)-(sizeof(struct viaje)*50), 1, fp_guardarCargarEstado);\n        for (int j = 0; j &lt; clientes[i].totalViajes; j++) {\n            fwrite(&amp;clientes[i].viajes[j], sizeof(struct viaje), 1, fp_guardarCargarEstado);\n        }\n    }\n    fclose(fp_guardarCargarEstado);\n\n    // set variables to 0 so you can tell if the read actually does anything\n    clientes[0].totalViajes = 0;\n    clientes[0].viajes[0].numeroNoches = 0;\n\n    fp_guardarCargarEstado = fopen( \"myFile.bin\", \"rb\" );\n    // For read bin file\n    for (int i = 0; i &lt; totalClientes; i++) {\n        fread(&amp;clientes[i], sizeof(struct cliente)-(sizeof(struct viaje)*50), 1, fp_guardarCargarEstado);\n        for (int j = 0; j &lt; clientes[i].totalViajes; j++) {\n            fread(&amp;clientes[i].viajes[j], sizeof(struct viaje), 1, fp_guardarCargarEstado);\n        }\n    }\n\n    fclose(fp_guardarCargarEstado);\n\n    printf(\"%i\\n%i\", clientes[0].totalViajes, clientes[0].viajes[0].numeroNoches );\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1608, "user_id": 7757135, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/JQ8Kt.png?s=128&g=1", "display_name": "JuMoGar", "link": "https://stackoverflow.com/users/7757135/jumogar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 49159602, "answer_count": 2, "score": 1, "last_activity_date": 1520450393, "creation_date": 1520442288, "last_edit_date": 1520450393, "question_id": 49157517, "link": "https://stackoverflow.com/questions/49157517/c-create-a-bin-file-of-a-structss-array-inside-other-structs-array-with-fwri", "title": "C - create a bin file of a structs&#39;s array inside other struct&#39;s array with fwrite", "body": "<p>I have a struct's array inside other struct's array and I wanna create a binary file which contains this data (only elements no null). </p>\n\n<p>My structs are: </p>\n\n<pre><code>struct viaje {\n    char identificador[30+1];\n    char ciudadDestino[30+1];\n    char hotel[30+1];\n    int numeroNoches;\n    char tipoTransporte[30+1];\n    float precioAlojamiento;\n    float precioDesplazamiento;\n};\n\nstruct cliente {\n    char dni[30+1];\n    char nombre[30+1];\n    char apellidos[30+1];\n    char direccion[30+1];\n    struct viaje viajes[50];\n    int totalViajes;\n} clientes[20];\n</code></pre>\n\n<p>I am trying next: </p>\n\n<pre><code>// For create bin file\nfor (i = 0; i &lt; totalClientes; i++) {\n    fwrite(clientes[i], sizeof(struct cliente), 1, fp_guardarCargarEstado);\n    for (j = 0; j &lt; clientes[i].totalViajes; j++) {\n        fwrite(clientes[i].viajes[j], sizeof(struct viaje), 1, fp_guardarCargarEstado);\n    }\n}\n\n\n// For read bin file\nfor (i = 0; i &lt; totalClientes; i++) {\n    fread(clientes[i], sizeof(struct cliente), 1, fp_guardarCargarEstado);\n    for (j = 0; j &lt; clientes[i].totalViajes; j++) {\n        fread(clientes[i].viajes[j], sizeof(struct viaje), 1, fp_guardarCargarEstado);\n    }\n}\n</code></pre>\n\n<p>I have not tryed <code>fread</code> yet due to I get two errors in <code>fwrite</code>: <code>error: incompatible type for argument 1 of 'fwrite'</code> and <code>note: expected 'const void *' but argument is of type 'struct cliente'</code></p>\n\n<p>Why could it be? </p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "edited": false, "score": 1, "creation_date": 1520441144, "post_id": 49157070, "comment_id": 85318991, "body": "This is just luck. You code reads whatever garbage it finds present in memory, and that until it finds a null byte which happens to be there."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1520441147, "post_id": 49157070, "comment_id": 85318992, "body": "UB. You&#39;re just getting &quot;lucky&quot; (some may say &quot;unlucky&quot;).  There happens to be a 0 right after the array in memory. Ide produces different results: <a href=\"https://ideone.com/nhbS4r\" rel=\"nofollow noreferrer\">ideone.com/nhbS4r</a>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1520441180, "post_id": 49157070, "comment_id": 85319016, "body": "Referencing <code>name[10]</code> produces undefined behavior, so anything can happen.  What is likely happening in your case is that name + 10 addresses the least significant byte of the integer next to <code>name</code> on the stack, which happens to be 10.  The next significant byte is 0, which is addressed by name + 11."}, {"owner": {"reputation": 1, "user_id": 6247531, "user_type": "registered", "profile_image": "https://graph.facebook.com/1038090816269580/picture?type=large", "display_name": "Vivek Singh", "link": "https://stackoverflow.com/users/6247531/vivek-singh"}, "edited": false, "score": 0, "creation_date": 1521008328, "post_id": 49157070, "comment_id": 85544722, "body": "Hi Rajiska it may be luck but I was just experimenting I found every time it prints the size of the array then it terminates means finds a null."}, {"owner": {"reputation": 1, "user_id": 6247531, "user_type": "registered", "profile_image": "https://graph.facebook.com/1038090816269580/picture?type=large", "display_name": "Vivek Singh", "link": "https://stackoverflow.com/users/6247531/vivek-singh"}, "edited": false, "score": 0, "creation_date": 1521009058, "post_id": 49157070, "comment_id": 85545081, "body": "I am using gcc compile, I know the program could have crashed it is just luck, but I am interested in why it always print size of array and then immediately finds a null in next memory block I have checked hundreds of times every time it is same anyway I always terminate my strings with a null. thanks"}], "answers": [{"comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 10586, "user_id": 170383, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4d9f7a30948dca1bbd05eaf27f277ae6?s=128&d=identicon&r=PG", "display_name": "David R Tribble", "link": "https://stackoverflow.com/users/170383/david-r-tribble"}, "edited": false, "score": 0, "creation_date": 1520441558, "post_id": 49157145, "comment_id": 85319250, "body": "@DavidRTribble.: And <code>strlen</code> etc won&#39;t work with unterminated string. Unterminated string and char array has no difference. And most probably you have used string in the sense that sequence of character. I just went with the convention of ours to call nul terminated char array to be string. That is all there is."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1520441155, "creation_date": 1520441155, "answer_id": 49157145, "question_id": 49157070, "link": "https://stackoverflow.com/questions/49157070/string-not-terminated-with-null-character-in-c/49157145#49157145", "title": "String not terminated with null character in C", "body": "<p>Array access out of bound is undefined behavior. You have accessed array index out of bound. You have gained undefined behavior. </p>\n\n<p>The program could have crashed, stopped or worked perfectly towards some random index or simply could have stopped at index 9. There is no guarantee what will happen. You will be suggested to refrain from introducing undefined behavior in your code. Don't do this. C doesn't provide checking for array index out of bound. You have to be careful on this case.</p>\n\n<p>You can't call it string - it is a char array. Not a string. We can't say it string unless it ends with <code>\\0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 1, "last_activity_date": 1520441179, "creation_date": 1520441179, "answer_id": 49157157, "question_id": 49157070, "link": "https://stackoverflow.com/questions/49157070/string-not-terminated-with-null-character-in-c/49157157#49157157", "title": "String not terminated with null character in C", "body": "<p>You're reading past the end of your array, which results in undefined behaviour.</p>\n\n<p>In this case, you're running into the memory used to store the value of <code>i</code>, which is probably stored as four bytes <code>0a 00 00 00</code> (i.e., the number 10 in little-endian byte order).</p>\n\n<p>But literally anything could happen when you invite UB. So don't do it!</p>\n"}], "owner": {"reputation": 1, "user_id": 6247531, "user_type": "registered", "profile_image": "https://graph.facebook.com/1038090816269580/picture?type=large", "display_name": "Vivek Singh", "link": "https://stackoverflow.com/users/6247531/vivek-singh"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "closed_date": 1520441181, "answer_count": 2, "score": -3, "last_activity_date": 1520441206, "creation_date": 1520440924, "question_id": 49157070, "link": "https://stackoverflow.com/questions/49157070/string-not-terminated-with-null-character-in-c", "closed_reason": "Duplicate", "title": "String not terminated with null character in C", "body": "<p>Please explain the output  of the following program, why the array is printing till 10th array index, if I do not terminate the string with a null character it always print the size of the array and then the loop terminates which means it now found the null character. I checked with different size of array every time I found same result the size at the last and then  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int i;\n    char name[10];\n\n    for(i=0;i&lt;10;i++)\n    {\n        name[i]='A';\n    }\n    for(i=0;name[i]!='\\0';i++)\n    {\n        printf(\"%d %d\\n\",i,name[i]);\n    }\n}\n\nOUTPUT is\n0 65\n1 65\n2 65\n3 65\n4 65\n5 65\n6 65\n7 65\n8 65\n9 65\n10 10\n</code></pre>\n"}, {"tags": ["c", "file", "concatenation"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1520440677, "post_id": 49156962, "comment_id": 85318672, "body": "<code>buf</code> is uninitialized, neither version works. You&#39;re just getting something different out of undefined behavior."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1520440896, "post_id": 49156962, "comment_id": 85318834, "body": "also, <a href=\"http://man7.org/linux/man-pages/man2/open.2.html\" rel=\"nofollow noreferrer\"><code>open</code></a> returns an <code>int</code> and <a href=\"https://linux.die.net/man/2/read\" rel=\"nofollow noreferrer\"><code>read</code></a> returns a <code>ssize_t</code>.. highly recommend using these correct types and checking the <code>open</code> return codes before proceeding."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520442272, "post_id": 49156962, "comment_id": 85319763, "body": "You&#39;ve not allocated space for the buffer (<code>void *buffer = (char [])&quot;\u00a0\u00a0\u00a0&quot;;</code> might work, but it would be more sensible to use <code>char buffer[4] = &quot;&quot;;</code>).  You never read from the second buffer.  You don&#39;t check that anything worked (always check the value returned by <code>open()</code>, <code>fopen()</code> and their kin), and you don&#39;t make sure you have null-terminated information.  You should be using <code>bytes</code> in the <code>printf()</code> too; <code>printf(&quot;%.*s&quot;, bytes, (char *)buf);</code> \u2014 but the need to cast indicates bad design, hence the <code>char buffer[4]</code> recommendation."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520451248, "post_id": 49156962, "comment_id": 85325057, "body": "never access beyond <code>argv[0]</code> without first checking (using <code>argc</code>) to assure the command line parameter was actually entered by the user."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520451372, "post_id": 49156962, "comment_id": 85325120, "body": "the function: <code>open()</code>  returns a <code>int</code>, not a <code>size_t</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520451458, "post_id": 49156962, "comment_id": 85325172, "body": "always check (&gt;=0) the returned value from <code>open()</code>.  If less than 0, then call <code>perror( &quot;open failed&quot; );</code> to output the reason the call failed to <code>stderr</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520451988, "post_id": 49156962, "comment_id": 85325472, "body": "the pointer <code>buf</code> is never set to point to some memory that the code owns, so writing to it (via the call to <code>read()</code>) is writing to some random location in memory. (what ever trash on the stack at the location of <code>buf</code> is being used as a pointer to memory.)  this is undefined behavior and can lead to a seg fault event.  BTW: the <code>buf</code> should be <code>char</code> not <code>void</code>"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1522924111, "post_id": 49669890, "comment_id": 86350106, "body": "Ooof.  <code>size_t length = 0;</code> and then <code>malloc(sizeof(char) * length);</code>?  <code>sizeof(char)</code> is defined to be 1 always, and that&#39;s a zero-byte buffer, if it doesn&#39;t return <code>NULL</code>.  Given <code>char * buf</code>, just what do you think <code>sizeof(buf)</code> returns?  And <code>read()</code> does not produce a <code>NUL</code>-terminated string value."}, {"owner": {"reputation": 154, "user_id": 2531457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cffbbbd18678b2ce23a0c06ca17c438c?s=128&d=identicon&r=PG&f=1", "display_name": "Scorta", "link": "https://stackoverflow.com/users/2531457/scorta"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1522936233, "post_id": 49669890, "comment_id": 86358839, "body": "I meant to set <code>length</code> to 0. Why? Because the program still runs well, and I&#39;m waiting for some guy to explain why. And what is the problem with <code>read()</code>?"}], "tags": [], "owner": {"reputation": 154, "user_id": 2531457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cffbbbd18678b2ce23a0c06ca17c438c?s=128&d=identicon&r=PG&f=1", "display_name": "Scorta", "link": "https://stackoverflow.com/users/2531457/scorta"}, "is_accepted": false, "score": 0, "last_activity_date": 1522923521, "creation_date": 1522923521, "answer_id": 49669890, "question_id": 49156962, "link": "https://stackoverflow.com/questions/49156962/c-multiple-file-descriptors/49669890#49669890", "title": "c multiple file descriptors", "body": "<p>I make some changes, and this works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(int argc, char* argv[]){\n    size_t fdes = open(argv[1], O_RDONLY);\n    size_t fdes2 = open(argv[2], O_RDONLY);\n    size_t length = 0;\n    char * buf = (char *)malloc(sizeof(char) * length);\n    int bytes;\n\n    while ((bytes = (int)read(fdes, buf, sizeof(buf) - 1)) &gt; 0) {\n        printf(\"%s\", buf);\n    }\n\n    while ((bytes = (int)read(fdes2, buf, sizeof(buf) - 1)) &gt; 0) {\n        printf(\"%s\", buf);\n    }\n    close(fdes);\n    close(fdes2);\n    return 0;\n}\n</code></pre>\n\n<p>First, <code>buf</code> should be <code>char *</code></p>\n\n<p>Second, you need to point <code>buf</code> to somewhere (<code>malloc</code> or a <code>char array</code>)</p>\n\n<p>Reference: <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.3.0/com.ibm.zos.v2r3.bpxbd00/rtrea.htm\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.3.0/com.ibm.zos.v2r3.bpxbd00/rtrea.htm</a> </p>\n"}], "owner": {"reputation": 35, "user_id": 7487405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd30edda239ee7c49b4af0cdedd65b45?s=128&d=identicon&r=PG&f=1", "display_name": "dennis3678", "link": "https://stackoverflow.com/users/7487405/dennis3678"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1525358372, "creation_date": 1520440534, "last_edit_date": 1525358372, "question_id": 49156962, "link": "https://stackoverflow.com/questions/49156962/c-multiple-file-descriptors", "title": "c multiple file descriptors", "body": "<p>I am trying to make a C program that concatenates the contents of two files at a target file. To do this I must have at least 2 files open at the same time but I haven't figured out why I can't. The problem can be sufficiently described by the two pieces of code below:</p>\n\n<p>Why does this work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(int argc, char* argv[]){\n    size_t fdes = open(argv[1], O_RDONLY);\n    void * buf;\n    int bytes;\n    while ((bytes = (int)read(fdes, buf, 3)) &gt; 0) {\n        printf(\"%s\", (char*)buf);\n    }\n    close(fdes);\n    return 0;\n}\n</code></pre>\n\n<p>and this doesn't?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(int argc, char* argv[]){\n    size_t fdes = open(argv[1], O_RDONLY);\n    size_t fdes2 = open(argv[2], O_RDONLY);\n    void * buf;\n    int bytes;\n    while ((bytes = (int)read(fdes, buf, 3)) &gt; 0) {\n        printf(\"%s\", (char*)buf);\n    }\n    close(fdes);\n    close(fdes2);\n    return 0;\n}\n</code></pre>\n\n<p>can't i have multiple files open?</p>\n"}, {"tags": ["c++", "c", "database", "postgresql", "libpq"], "answers": [{"tags": [], "owner": {"reputation": 874, "user_id": 6524134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582660ba292a4204b267476ed318bfc6?s=128&d=identicon&r=PG&f=1", "display_name": "toozyfuzzy", "link": "https://stackoverflow.com/users/6524134/toozyfuzzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1520445442, "last_edit_date": 1520445442, "creation_date": 1520439949, "answer_id": 49156763, "question_id": 49156762, "link": "https://stackoverflow.com/questions/49156762/how-to-insert-text-array-in-postgresql-table-in-binary-format-using-libpq/49156763#49156763", "title": "How to insert text array in PostgreSQL table in binary format using libpq?", "body": "<p>Everything described bellow is tested on PostgreSQL 9.5.</p>\n\n<p>PQexecParams has the following prototype:</p>\n\n<pre><code>PGresult *PQexecParams(PGconn *conn,\n                       const char *command,\n                       int nParams,\n                       const Oid *paramTypes,\n                       const char * const *paramValues,\n                       const int *paramLengths,\n                       const int *paramFormats,\n                       int resultFormat);\n</code></pre>\n\n<p><a href=\"https://www.postgresql.org/docs/current/static/libpq-exec.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/static/libpq-exec.html</a></p>\n\n<p><code>Oid</code> for text array and other types can be found in </p>\n\n<blockquote>\n  <p>/postgresql_sources_folder/src/include/catalog/pg_type.h</p>\n</blockquote>\n\n<p>In our case we need 2 of them:</p>\n\n<pre><code>#define TEXTARRAYOID        1009\n#define TEXTOID         25\n</code></pre>\n\n<p>The exact format of external PostgreSQL binary arrays can be deduced from function:</p>\n\n<pre><code>Datum array_send(PG_FUNCTION_ARGS);\n</code></pre>\n\n<p>Defined here:</p>\n\n<blockquote>\n  <p>/postgresql_sources_folder/src/backend/utils/adt/arrayfuncs.c</p>\n</blockquote>\n\n<p>I describe format in structure:</p>\n\n<pre><code>struct pgValsT {\n  /* number of array dimensions */\n  int32_t ndims;\n\n  /* flag describing if array has NULL values */\n  int32_t hasNull;\n\n  /* Oid of data stored in array. In our case is 25 for TEXT */\n  Oid oidType;\n\n  /* Number of elements in array */\n  int32_t totalLen;\n\n  /* Not sure for this one. \n     I think it describes dimensions of elements in case of arrays storing arrays */\n  int32_t subDims;\n\n  /* Here our data begins */\n  char dataBegin[];\n}__attribute__ ((__packed__));\n</code></pre>\n\n<p>Array elements are stored as structures:</p>\n\n<pre><code>struct varlena\n{\n  /* -1 if data = NULL */\n  int32_t vl_len;\n\n  /* our data */\n  char vl_dat[];\n}__attribute__ ((__packed__));\n</code></pre>\n\n<p>Same can be applied for retrieving arrays in binary format.</p>\n\n<p>Full example for insertion text array in binary format to table described in question:</p>\n\n<pre><code>#include &lt;postgresql/libpq-fe.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n\n#define TEXTOID         25\n#define TEXTARRAYOID        1009\n\n\nint main(){\n\n  PGconn* conn = PQsetdbLogin(\"localhost\", \"5432\",\n                 nullptr, nullptr, \"my_database\", \"my_user\",\n                  \"my_password\");\n\n  PGresult* res = NULL;\n\n  /* our strings to pass as array. Sizes should exclude terminating '\\0' \n     and be presented in network byte order */\n\n  const char aStr1[] = \"Stackoverflow\";\n  uint32_t pgSizeStr1 = ntohl(sizeof(aStr1) - 1);\n\n  const char aStr2[] = \"is\";\n  uint32_t pgSizeStr2 = ntohl(sizeof(aStr2) - 1);\n\n  const char aStr3[] = \"awesome!\";\n  uint32_t pgSizeStr3 = ntohl(sizeof(aStr3) - 1);\n\n  /* number of parameters for PQexecParams. We need 1 for sending 1 text array */\n  int nParams = 1;\n\n  /* number of elements in array */\n  int nElems = 3;\n\n  /* our type is text array */\n  Oid paramTypes[] = { TEXTARRAYOID };\n\n  /* Allocating memory for our pgValsT structure + our data. Don't allocate memory for '\\0' at the end of a string */\n\n  uint32_t dataSize = sizeof(pgValsT) + sizeof(int32_t) * nElems + sizeof(aStr1) + sizeof(aStr2) + sizeof(aStr3) - nElems;\n  void* vData = malloc(dataSize);\n\n  pgValsT* pDataStruct = (pgValsT*)vData;\n\n  /* setting up pointer to data to send to PostgreSQL */\n  char* paramValues[] = { (char*)vData };\n\n  /* setting up our element size */\n  int paramLengths[] = { dataSize };\n\n  /* setting binary format for our data */\n  int paramFormats[] = { 1 };\n\n  /* our array has one dimension */\n  pDataStruct-&gt;ndims = ntohl(1);\n\n  /* our array has no NULL elements */\n  pDataStruct-&gt;hasNull = ntohl(0);\n\n  /* type of our elements is text */\n  pDataStruct-&gt;oidType = ntohl(TEXTOID);\n\n  /* our array has 3 elements */\n  pDataStruct-&gt;totalLen = ntohl(nElems);\n\n  pDataStruct-&gt;subDims = ntohl(1);\n\n\n  /* copy our strings and sizes to data structure excluding terminating '\\0' */\n  size_t byteOffset = 0;\n  memcpy(pDataStruct-&gt;dataBegin, &amp;pgSizeStr1, sizeof(pgSizeStr1));\n  memcpy(pDataStruct-&gt;dataBegin + sizeof(pgSizeStr1), aStr1, sizeof(aStr1) - 1);\n  byteOffset += sizeof(pgSizeStr1) + sizeof(aStr1) - 1;\n\n  memcpy(pDataStruct-&gt;dataBegin + byteOffset, &amp;pgSizeStr2, sizeof(pgSizeStr2));\n  memcpy(pDataStruct-&gt;dataBegin + byteOffset + sizeof(pgSizeStr2), aStr2, sizeof(aStr2) - 1);\n  byteOffset += sizeof(pgSizeStr2) + sizeof(aStr2) - 1;\n\n\n  memcpy(pDataStruct-&gt;dataBegin + byteOffset, &amp;pgSizeStr3, sizeof(pgSizeStr3));\n  memcpy(pDataStruct-&gt;dataBegin + byteOffset + sizeof(pgSizeStr3), aStr3, sizeof(aStr3) - 1);\n\n  /* executing query */\n  res = PQexecParams(conn, \"INSERT INTO test_array (array_column) values ($1)\", 1, paramTypes, paramValues, paramLengths, paramFormats, 1);\n\n  PQfinish(conn);\n  PQclear(res);\n  free(vData);\n}\n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 6524134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582660ba292a4204b267476ed318bfc6?s=128&d=identicon&r=PG&f=1", "display_name": "toozyfuzzy", "link": "https://stackoverflow.com/users/6524134/toozyfuzzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 743, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520458611, "creation_date": 1520439949, "last_edit_date": 1520458611, "question_id": 49156762, "link": "https://stackoverflow.com/questions/49156762/how-to-insert-text-array-in-postgresql-table-in-binary-format-using-libpq", "title": "How to insert text array in PostgreSQL table in binary format using libpq?", "body": "<p>I didn't find any documentation describing how to work with binary arrays in PostgreSQL using libpq.\nSo you have table:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS test_array ( array_column text[] )\n</code></pre>\n\n<p>You want to insert array in binary format using <code>PQexecParams</code>\nHow exactly one does this?</p>\n"}, {"tags": ["c", "assembly", "gdb", "stack-overflow", "x86-64"], "comments": [{"owner": {"reputation": 567, "user_id": 6039151, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zB1h4.jpg?s=128&g=1", "display_name": "Kanan Jarrus", "link": "https://stackoverflow.com/users/6039151/kanan-jarrus"}, "reply_to_user": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1520440692, "post_id": 49156334, "comment_id": 85318688, "body": "yes, the objective is to replace the return address of <code>validate_serial</code> with the address at which the call instruction of <code>do_valid_stuff()</code> is located."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 3, "creation_date": 1520441782, "post_id": 49156334, "comment_id": 85319404, "body": "Neither gdb nor scanf parse <code>\\x</code> style escapes. You can use a pipe or a file."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520491174, "post_id": 49156334, "comment_id": 85338887, "body": "GDB disables ASLR, so the only test where you used the shell&#39;s <code>printf</code> to process <code>\\x</code> escapes was the one where you ran the program with ASLR enabled."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1520491343, "post_id": 49156334, "comment_id": 85338962, "body": "Q1: Note that even when your program is running inside GDB, when it reads from the terminal GDB gets out of the way and lets the program read directly.  So you&#39;re not &quot;entering hex values in GDB&quot;, you&#39;re typing them into your program running on the terminal.  After the <code>read</code> system call returns (which scanf eventually uses under the hood), or after <code>scanf</code> itself returns, you could then use <code>gdb</code>&#39;s <code>set</code> command to modify memory contents using hex constants."}], "owner": {"reputation": 567, "user_id": 6039151, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zB1h4.jpg?s=128&g=1", "display_name": "Kanan Jarrus", "link": "https://stackoverflow.com/users/6039151/kanan-jarrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520441119, "creation_date": 1520438616, "last_edit_date": 1520441119, "question_id": 49156334, "link": "https://stackoverflow.com/questions/49156334/unable-to-overwrite-the-return-address-to-create-stackoverflow", "title": "Unable to overwrite the return address to create stackoverflow", "body": "<p>I am trying out an example from the book <a href=\"https://www.wiley.com/en-as/The+Shellcoder%27s+Handbook%3A+Discovering+and+Exploiting+Security+Holes%2C+2nd+Edition-p-9781118079126\" rel=\"nofollow noreferrer\">The Shellcoder's Handbook: Discovering and Exploiting Security Holes, 2nd Edition</a> page 23. Below is the C Program which I am referring to, it takes user input and test for condition <code>User Input % 853 == 83</code>. I am trying out this example on a 64bit Linux machine.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint valid_serial(char *psz){\n\n    size_t len = strlen(psz);\n    unsigned total = 0;\n\n    if (len&lt;0){\n        return 0;\n    }\n\n    for (size_t i = 0; i &lt; len; i++){\n\n        if(psz[i] &lt; '0' || psz[i] &gt; 'z'){\n            return 0;\n        }\n        total += psz[i];\n    }\n    if (total % 853 == 83){\n        return 1;\n    }\n\n    return 0;\n}\nint validate_serial(){\n\n    char serial[24];\n    fscanf(stdin, \"%s\", serial);\n\n    if(valid_serial(serial)){\n        return 1;\n    }\n    else{\n        return 0;\n    }\n}\n\nint do_valid_stuff(){\n    printf(\"The entered serial number is valid\\n\");\n    exit(0);\n}\n\nint do_invalid_stuff(){\n    printf(\"The entered serial number is Invalid\\n\");\n    exit(1);\n}\nint main(void){\n\n    if (validate_serial()){\n        do_valid_stuff();\n    }\n    else{\n        do_invalid_stuff();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I compile the above program and also turning off the stack protector using <code>gcc -g -fno-stack-protector serial.c -o serial</code> and as expected the program does work fine</p>\n\n<pre><code>$ printf \"HHHHHHHHHHHHH\" | ./serial\nThe entered serial number is valid\n$ printf \"1234\" | ./serial\nThe entered serial number is Invalid\n</code></pre>\n\n<p>Q1) How to enter hex values in GDB?</p>\n\n<p>In GDB I create breakpoints at the following lines</p>\n\n<pre><code>line 31          fscanf(stdin, \"%s\", serial);\nline 33          if (valid_serial(serial));\n</code></pre>\n\n<p>At the first breakpoint line 31 this is what I have</p>\n\n<pre><code>(gdb) disassemble main\nDump of assembler code for function main:\n   0x0000555555554912 &lt;+0&gt;: push   rbp\n   0x0000555555554913 &lt;+1&gt;: mov    rbp,rsp\n   0x0000555555554916 &lt;+4&gt;: mov    eax,0x0\n   0x000055555555491b &lt;+9&gt;: call   0x555555554899 &lt;validate_serial&gt;\n   0x0000555555554920 &lt;+14&gt;:    test   eax,eax\n   0x0000555555554922 &lt;+16&gt;:    je     0x555555554930 &lt;main+30&gt;\n   0x0000555555554924 &lt;+18&gt;:    mov    eax,0x0\n   0x0000555555554929 &lt;+23&gt;:    call   0x5555555548de &lt;do_valid_stuff&gt;\n   0x000055555555492e &lt;+28&gt;:    jmp    0x55555555493a &lt;main+40&gt;\n   0x0000555555554930 &lt;+30&gt;:    mov    eax,0x0\n   0x0000555555554935 &lt;+35&gt;:    call   0x5555555548f8 &lt;do_invalid_stuff&gt;\n   0x000055555555493a &lt;+40&gt;:    mov    eax,0x0\n   0x000055555555493f &lt;+45&gt;:    pop    rbp\n   0x0000555555554940 &lt;+46&gt;:    ret\nEnd of assembler dump.\n(gdb) x/20xg $rsp\n0x7fffffffe4f0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe500: 0x0000555555554950  0x00005555555546c0\n0x7fffffffe510: 0x00007fffffffe520  0x0000555555554920\n0x7fffffffe520: 0x0000555555554950  0x00007ffff7a5a2b1\n0x7fffffffe530: 0x0000000000040000  0x00007fffffffe608\n0x7fffffffe540: 0x00000001f7b9b2e8  0x0000555555554912\n0x7fffffffe550: 0x0000000000000000  0x9eeb30dff32f3990\n0x7fffffffe560: 0x00005555555546c0  0x00007fffffffe600\n0x7fffffffe570: 0x0000000000000000  0x0000000000000000\n0x7fffffffe580: 0xcbbe658aabef3990  0xcbbe753e255d3990\n(gdb)\n</code></pre>\n\n<p>So, at the next step i will have to overwrite the return address of <code>validate_serial</code> <code>0x0000555555554920</code> with the address of the <code>call</code> instruction to <code>do_valid_stuff</code> which is <code>0x0000555555554929</code>\nContinuing gdb</p>\n\n<pre><code>(gdb) c\nContinuing.\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA)IUUUU\n\nBreakpoint 2, validate_serial () at serial.c:33\n33      if(valid_serial(serial)){\n</code></pre>\n\n<p>Which successfully overwrites the return address</p>\n\n<pre><code>(gdb) x/20xg $rsp\n0x7fffffffe4f0: 0x4141414141414141  0x4141414141414141\n0x7fffffffe500: 0x4141414141414141  0x4141414141414141\n0x7fffffffe510: 0x4141414141414141  0x0000555555554929\n0x7fffffffe520: 0x0000555555554950  0x00007ffff7a5a2b1\n0x7fffffffe530: 0x0000000000040000  0x00007fffffffe608\n0x7fffffffe540: 0x00000001f7b9b2e8  0x0000555555554912\n0x7fffffffe550: 0x0000000000000000  0x9eeb30dff32f3990\n0x7fffffffe560: 0x00005555555546c0  0x00007fffffffe600\n0x7fffffffe570: 0x0000000000000000  0x0000000000000000\n0x7fffffffe580: 0xcbbe658aabef3990  0xcbbe753e255d3990\n(gdb) c\nContinuing.\nThe entered serial number is valid\n[Inferior 1 (process 9851) exited normally]\n(gdb)\n</code></pre>\n\n<p>I am unable to overwrite the address to 0x0000555555554929 using the below method. </p>\n\n<pre><code>(gdb) c\nContinuing.\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\x29\\x49\\x55\\x55\\x55\\x55\\x00\\x00\n(gdb) x/20xg $rsp\n0x7fffffffe4f0: 0x4141414141414141  0x4141414141414141\n0x7fffffffe500: 0x4141414141414141  0x4141414141414141\n0x7fffffffe510: 0x4141414141414141  0x3934785c3932785c\n0x7fffffffe520: 0x3535785c3535785c  0x3535785c3535785c\n0x7fffffffe530: 0x3030785c3030785c  0x00007fffffffe600\n0x7fffffffe540: 0x00000001f7b9b2e8  0x0000555555554912\n0x7fffffffe550: 0x0000000000000000  0xb17102b2c99239fc\n0x7fffffffe560: 0x00005555555546c0  0x00007fffffffe600\n0x7fffffffe570: 0x0000000000000000  0x0000000000000000\n0x7fffffffe580: 0xe42457e7915239fc  0xe42447531fe039fc\n(gdb) c\nContinuing.\nProgram received signal SIGSEGV, Segmentation fault.\n</code></pre>\n\n<p>Q2) Even with the below method I am unable to overwrite the return address. Is it because of ASLR?</p>\n\n<pre><code>$ printf \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\x29\\x49\\x55\\x55\\x55\\x55\\x00\\x00\" | ./serial\nSegmentation fault\n</code></pre>\n"}, {"tags": ["c", "pointers", "null", "valgrind", "free"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1520438396, "post_id": 49156107, "comment_id": 85317092, "body": "It doesn&#39;t make sense to check for <code>NULL</code> in your <code>free()</code> function if you ignore that allocation might actually produce a <code>NULL</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1520438565, "post_id": 49156107, "comment_id": 85317237, "body": "Pardon if this detail was buried somewhere in there (I couldn&#39;t find it). Are the <i>same</i> nodes pointed to by <i>both</i> structures? By the looks of the code in <code>main</code>, it seems so. If so, you need to decide which &quot;owns&quot; them (the tree or the list). The one that doesn&#39;t shouldn&#39;t be freeing their <code>node</code>, but should still be removing their <code>List</code> (or <code>Tree</code>) matching the corresponding <code>Node</code> from their respective formal structures."}, {"owner": {"reputation": 135, "user_id": 3638629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66902b384a1863d5d94f848457fde69d?s=128&d=identicon&r=PG&f=1", "display_name": "user3638629", "link": "https://stackoverflow.com/users/3638629/user3638629"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1520438655, "post_id": 49156107, "comment_id": 85317306, "body": "@IharobAlAsimi I <i>do</i> check for the return value of <code>malloc</code> in my <code>..._create</code> functions. The check for <code>NULL</code> in <code>list_free</code> is meant to check whether the current item in the list still contains a valid reference to a node, and in this case free the node (i.e. the node was never in the tree)."}, {"owner": {"reputation": 135, "user_id": 3638629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66902b384a1863d5d94f848457fde69d?s=128&d=identicon&r=PG&f=1", "display_name": "user3638629", "link": "https://stackoverflow.com/users/3638629/user3638629"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1520440079, "post_id": 49156107, "comment_id": 85318287, "body": "@WhozCraig Yes, indeed, <i>some</i> nodes are pointed to by both structures. I decided on the Tree owning the Nodes, in which case the List only removes (frees) Nodes that do not belong to the Tree. It is a bit convoluted, I know."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1520438723, "post_id": 49156289, "comment_id": 85317360, "body": "<code>if (node)</code> should probably be <code>if (node &amp;&amp; *node )</code> in your code."}, {"owner": {"reputation": 135, "user_id": 3638629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66902b384a1863d5d94f848457fde69d?s=128&d=identicon&r=PG&f=1", "display_name": "user3638629", "link": "https://stackoverflow.com/users/3638629/user3638629"}, "edited": false, "score": 0, "creation_date": 1520439648, "post_id": 49156289, "comment_id": 85317999, "body": "Oh! I understand! Thanks for pointing this out, now it makes sense come to think of it. I am now calling <code>tree_free_helper</code> from <code>tree_free</code> like this: <code>tree_free_helper(&amp;(tree-&gt;root));</code>. Unfortunately, valgrind still shows me 7 allocs and 8 frees with the same culprit (the node being appended to the list)."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1520439828, "post_id": 49156289, "comment_id": 85318129, "body": "If you call valgrind with the right switches it will tell you where the alloc was. And that way you can track the leak. Also compile with debug symbols."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1520439946, "post_id": 49156289, "comment_id": 85318197, "body": "@IharobAlAsimi It isn&#39;t a leak; it&#39;s a double-free (seven allocs, eight frees), likely because of the reason I commented on below the OP post."}, {"owner": {"reputation": 135, "user_id": 3638629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66902b384a1863d5d94f848457fde69d?s=128&d=identicon&r=PG&f=1", "display_name": "user3638629", "link": "https://stackoverflow.com/users/3638629/user3638629"}, "edited": false, "score": 0, "creation_date": 1520439974, "post_id": 49156289, "comment_id": 85318216, "body": "I&#39;m using it with <code>--leak-check=full</code> (not sure if this is what you had in mind). I&#39;ll get into it and come back here when (if?) I manage to solve the problem."}, {"owner": {"reputation": 135, "user_id": 3638629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66902b384a1863d5d94f848457fde69d?s=128&d=identicon&r=PG&f=1", "display_name": "user3638629", "link": "https://stackoverflow.com/users/3638629/user3638629"}, "edited": false, "score": 0, "creation_date": 1520443747, "post_id": 49156289, "comment_id": 85320669, "body": "@IharobAlAsimi While I understand your answer and it seems the right way to do it, even using a pointer to pointer as you suggested does not solve the double free problem: <code>if (q-&gt;value)</code> still evaluates to true in <code>list_free</code>. The dirty workaround I resorted to in order to avoid double free errors is to check before free&#39;ing nodes in the tree whether they are also stored by items of the list. If this is the case, the pointer to the node in the list item is set to NULL before free&#39;ing the node. Sorry for not accepting your answer (+1!), but it does not solve the problem yet."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1520439290, "last_edit_date": 1520439290, "creation_date": 1520438505, "answer_id": 49156289, "question_id": 49156107, "link": "https://stackoverflow.com/questions/49156107/setting-pointer-to-null-after-free-in-quirky-data-structures-c/49156289#49156289", "title": "Setting pointer to NULL after free in quirky data structures (C)", "body": "<p>You are not setting the pointer to <code>NULL</code> really,</p>\n\n<pre><code>void tree_free_helper(Node *node)\n{\n    if (node) {\n        tree_free_helper(node-&gt;left);\n        tree_free_helper(node-&gt;right);\n        free(node);\n        node = NULL;\n    }\n}\n</code></pre>\n\n<p>only sets the local <code>node</code> pointer to <code>NULL</code>, you would need something like the following</p>\n\n<pre><code>void tree_free_helper(Node **node)\n{\n    if (node &amp;&amp; *node) {\n        tree_free_helper(&amp;(*node)-&gt;left);\n        tree_free_helper(&amp;(*node)-&gt;right);\n        free(*node);\n        *node = NULL;\n    }\n}\n</code></pre>\n\n<p>Pointer variables and parameters just like any other variables and parameters are allocated in the stack frame of the function so they have a life time equal to that of the function, so when you set <code>node</code> to <code>NULL</code> you are actually only setting the variable <code>node</code> to <code>NULL</code> and not the pointer itself.</p>\n\n<p>If you want to set the pointer, you have to pass it's address &mdash; <em>or a pointer to the pointer</em> &mdash; instead to be able to modify it inside the function.</p>\n"}], "owner": {"reputation": 135, "user_id": 3638629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66902b384a1863d5d94f848457fde69d?s=128&d=identicon&r=PG&f=1", "display_name": "user3638629", "link": "https://stackoverflow.com/users/3638629/user3638629"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520439290, "creation_date": 1520438003, "question_id": 49156107, "link": "https://stackoverflow.com/questions/49156107/setting-pointer-to-null-after-free-in-quirky-data-structures-c", "title": "Setting pointer to NULL after free in quirky data structures (C)", "body": "<p>I have the following following somewhat convoluted data structures: a binary tree made up of nodes, and a linked list of items, each item storing tree nodes. If a <code>Node</code> is created, then it will certainly be used in a <code>Tree</code>, in a <code>List</code>, or both. Here are the data structures:</p>\n\n<pre><code>typedef struct Node Node;\ntypedef struct Item Item;\n\nstruct Node {\n    int key;\n    Node *left;\n    Node *right;\n};\n\ntypedef struct {\n    Node *root;\n} Tree;\n\nstruct Item {\n    Node *value;\n    Item *next;\n};\n\ntypedef struct {\n    Item *head;\n} List;\n</code></pre>\n\n<p>I am having trouble free'ing my tree and list. Logically, I would first free the <code>Tree</code>, and then the <code>List</code>. My idea was to set the <code>Node</code> pointers to <code>NULL</code> after freeing them in order for the <code>List</code> to decide whether the current <code>Item</code> has non-<code>NULL</code> nodes which must be free'd.</p>\n\n<p>Here is how the <code>Tree</code> is free'd:</p>\n\n<pre><code>void tree_free_helper(Node *node)\n{\n    if (node) {\n        tree_free_helper(node-&gt;left);\n        tree_free_helper(node-&gt;right);\n        free(node);\n        node = NULL;\n    }\n}\n\nvoid tree_free(Tree *tree)\n{\n    if (tree) {\n        tree_free_helper(tree-&gt;root);\n        free(tree);\n    }    \n}\n</code></pre>\n\n<p>This works fine if <code>Node</code>s only belong to a <code>Tree</code>. However, when a <code>Node</code> is also stored in a <code>List</code> <code>Item</code>, I get one extra <code>free</code> call = number of <code>malloc</code>s + 1. Here is how I free a <code>List</code>:</p>\n\n<pre><code>void list_free(List *list)\n{\n    Item *p, *q;\n\n    if (!list) return;\n\n    p = list-&gt;head;\n    while (p) {\n        q = p;\n        p = p-&gt;next;\n        if (q-&gt;value) // trying to free only non-free'd nodes\n            free(q-&gt;value);\n        free(q);\n    }\n\n    free(list);\n}\n</code></pre>\n\n<p>Valgrind dutifully informs me that <code>Address 0x52040e0 is 0 bytes inside a block of size 24 free'd</code>, and where in my code the block 0x52040e0 <code>was alloc'd at</code>. Here's a simple example for which I get this valgrind report, where I create 3 nodes for a <code>Tree</code> (<code>n1</code> being the root and having <code>n0</code> as left child and <code>n2</code> as right child); the problem comes from appending one of the nodes (<code>n0</code> in this example) to a <code>List</code>:</p>\n\n<pre><code>int main() {\n    List *list = list_create();\n    Tree *tree = tree_create();\n\n    Node *n0 = node_create(0);\n    Node *n1 = node_create(1);\n    Node *n2 = node_create(2);\n\n    tree-&gt;root = n1;\n    n1-&gt;left = n0;\n    n1-&gt;right = n2;\n\n    list_append(list, n0);\n\n    tree_free(tree);\n    list_free(list);\n}\n</code></pre>\n\n<p>Note: <code>list_create</code>, <code>tree_create</code>, and <code>node_create</code> respectively create a <code>List</code>, a <code>Tree</code>, and a <code>Node</code>. <code>list_append</code> creates an <code>Item</code> that is added to the list, and the item stores the <code>Node</code> passed as argument.</p>\n\n<p>So my question is: seeing that setting the node pointer to <code>NULL</code> after I free it does not seem to have any effect, as <code>if (q-&gt;value)</code> always evaluates to true in <code>list_free</code>, what am I doing wrong? Thank you for any insight.</p>\n"}, {"tags": ["c", "assembly", "struct", "minix"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1520438440, "post_id": 49155803, "comment_id": 85317124, "body": "Which Minix version are you modifying? Minix 2 or Minix 3?"}, {"owner": {"reputation": 169, "user_id": 1282190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b95818f2a0975b9eb9f5a744137cf6?s=128&d=identicon&r=PG", "display_name": "calmond", "link": "https://stackoverflow.com/users/1282190/calmond"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1520441654, "post_id": 49155803, "comment_id": 85319316, "body": "I&#39;m working with version 3.1.7."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520489829, "post_id": 49155803, "comment_id": 85338376, "body": "You&#39;d have to recompile any user-space code (like <code>ps</code> apparently) as well as changing headers.  Does <code>sconst.h</code> have some constants that describe the struct layout, so <code>ps</code> can find its way around kernel data structures?"}, {"owner": {"reputation": 169, "user_id": 1282190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b95818f2a0975b9eb9f5a744137cf6?s=128&d=identicon&r=PG", "display_name": "calmond", "link": "https://stackoverflow.com/users/1282190/calmond"}, "edited": false, "score": 0, "creation_date": 1520514225, "post_id": 49155803, "comment_id": 85352435, "body": "All of those utilities get recompiled when you do a make clean install on the kernel.  I&#39;ve manually re-compiled ps as well."}, {"owner": {"reputation": 169, "user_id": 1282190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b95818f2a0975b9eb9f5a744137cf6?s=128&d=identicon&r=PG", "display_name": "calmond", "link": "https://stackoverflow.com/users/1282190/calmond"}, "edited": false, "score": 0, "creation_date": 1520514239, "post_id": 49155803, "comment_id": 85352443, "body": "Here&#39;s the file: <a href=\"https://github.com/Stichting-MINIX-Research-Foundation/minix/blob/R3.1.7/kernel/arch/i386/sconst.h\" rel=\"nofollow noreferrer\">github.com/Stichting-MINIX-Research-Foundation/minix/blob/&hellip;</a>"}, {"owner": {"reputation": 767, "user_id": 656988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e94ad3a9c30ec3290b9600018e8c73?s=128&d=identicon&r=PG", "display_name": "AntoineL", "link": "https://stackoverflow.com/users/656988/antoinel"}, "edited": false, "score": 0, "creation_date": 1520865785, "post_id": 49155803, "comment_id": 85479224, "body": "In fact, in 3.1.7, only some members from <code>struct proc</code> are listed in <code>sconst.h</code>. So provided that the integers you are adding are <b>after</b> the last mentioned member (<code>p_misc_flags</code>), you should be able to freely add them. Are you sure you recompiled everything (including all the libraries)?"}], "owner": {"reputation": 169, "user_id": 1282190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b95818f2a0975b9eb9f5a744137cf6?s=128&d=identicon&r=PG", "display_name": "calmond", "link": "https://stackoverflow.com/users/1282190/calmond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1520437127, "creation_date": 1520437127, "question_id": 49155803, "link": "https://stackoverflow.com/questions/49155803/trouble-adding-two-ints-to-minix-proc-data-structure", "title": "Trouble adding two ints to Minix proc data structure", "body": "<p>I'm trying to add two integers to the Minix proc data structure in /usr/src/kernel/proc.h.  The documentation says you must add entries to sconst.h as well to accommodate this, but I cannot figure out how to update sconst.h.  Adding the two ints compiles fine, but then utilities like ps break because sconst.h isn't updated.  </p>\n\n<p>What should be added to sconst.h to support two new fields and not break compatibility?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520453108, "post_id": 49155563, "comment_id": 85326039, "body": "Umm.. what is a chunk?  typedef please;)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520453320, "post_id": 49155563, "comment_id": 85326162, "body": "..and if it&#39;s a pointer type, please name it appropriately, so as to not confuse, eg. &#39;pChunk&#39; :)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520453473, "post_id": 49155563, "comment_id": 85326249, "body": "Also, your overall reuirement is unclear and, quite possibly, too broad. Do you want to signal off the post-processed chunks as they become available, so that they can be &#39;immediately&#39; written to some disk/network output stream?"}], "owner": {"reputation": 1, "user_id": 9455352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab27839e472a7e9e210c94833b4f9ea?s=128&d=identicon&r=PG&f=1", "display_name": "wingardium", "link": "https://stackoverflow.com/users/9455352/wingardium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520436389, "creation_date": 1520436389, "question_id": 49155563, "link": "https://stackoverflow.com/questions/49155563/c-how-to-implement-a-concurrent-compression-queue", "title": "c - How to implement a concurrent compression queue?", "body": "<p>The thing is that i'm trying to make a concurrent compression tool, this is the code for my comp function which processes the chunks from the input queue sequentially but I get lost trying with how to make it concurrent. Should I create a variable that removes and processes the chunks from the input q and inserts them into the output q? </p>\n\n<pre><code>#define CHUNK_SIZE (1024*1024)\n#define QUEUE_SIZE 100\n\n#define COMPRESS 1\n#define DECOMPRESS 0\n\n\n// take chunks from queue in, run them through process (compress or decompress), send them to queue out\nvoid worker(queue in, queue out, chunk (*process)(chunk)) {\n    chunk ch, res;\n    while(q_elements(in)&gt;0) {\n        ch = q_remove(in);\n\n        res = process(ch);\n        free_chunk(ch);\n\n        q_insert(out, res);\n    }\n}\n\n// Compress file taking chunks of opt.size from the input file,\n// inserting them into the in queue, running them using a worker,\n// and sending the output from the out queue into the archive file\nvoid comp(struct options opt) {\n    int fd, chunks, i;\n    struct stat st;\n    char comp_file[256];\n    archive ar;\n    queue in, out;\n    chunk ch;\n\n    if((fd=open(opt.file, O_RDONLY))==-1) {\n        printf(\"Could not open %s\\n\", opt.file);\n        exit(0);\n    }\n\n    fstat(fd, &amp;st);\n    chunks = st.st_size/opt.size+(st.st_size % opt.size ? 1:0);\n\n    strncpy(comp_file, opt.file, 256);\n    strncat(comp_file, \".ch\", 256);\n\n    ar = create_archive_file(comp_file);\n\n    in  = q_create(QUEUE_SIZE);\n    out = q_create(QUEUE_SIZE);\n\n    // read input file and send chunks to the in queue\n    for(i=0; i&lt;chunks; i++) {\n        ch = alloc_chunk(opt.size);\n\n        ch-&gt;size = read(fd, ch-&gt;data, opt.size);\n\n        q_insert(in, ch);\n    }\n\n    // compression of chunks from in to out\n    worker(in, out, compress);\n\n    // send chunks to the output archive file\n    for(i=0; i&lt;chunks; i++) {\n        ch = q_remove(out);\n\n        add_chunk(ar, ch, i);\n        free_chunk(ch);\n    }\n\n    close_archive_file(ar);\n    close(fd);\n    q_destroy(in);\n    q_destroy(out);\n}\n\n\n// Decompress file taking chunks of opt.size from the input file,\n// inserting them into the in queue, running them using a worker,\n// and sending the output from the out queue into the decompressed file\n\nvoid decomp(struct options opt) {\n    int fd, i;\n    struct stat st;\n    char uncomp_file[256];\n    archive ar;\n    queue in, out;\n    chunk ch;\n\n    if((ar=open_archive_file(opt.file))==NULL) {\n        printf(\"Could not open archive file\\n\");\n        exit(0);\n    };\n\n    strncpy(uncomp_file, opt.file, strlen(opt.file) -3);\n    uncomp_file[strlen(opt.file)-3] = '\\0';\n\n    if((fd=open(uncomp_file, O_RDWR | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH))== -1) {\n        printf(\"Could not create %s: %s\\n\", uncomp_file, strerror(errno));\n        exit(0);\n    } \n\n    in  =q_create(QUEUE_SIZE);\n    out =q_create(QUEUE_SIZE);\n\n    // read chunks with compressed data\n    for(i=0; i&lt;chunks(ar); i++) {\n        ch = get_chunk(ar, i);\n        q_insert(in, ch);\n    }\n\n    // decompress from in to out\n    worker(in, out, decompress);\n\n    // write chunks from output to decompressed file\n    for(i=0; i&lt;chunks(ar); i++) {\n        ch=q_remove(out);\n        write(fd, ch-&gt;data, ch-&gt;size);\n        free_chunk(ch);\n    }\n\n    close_archive_file(ar);    \n    close(fd);\n    q_destroy(in);\n    q_destroy(out);\n}\n\nint main(int argc, char *argv[]) {    \n    struct options opt;\n\n    opt.compress=COMPRESS;\n    opt.num_threads=3;\n    opt.size=CHUNK_SIZE;\n    opt.queue_size=QUEUE_SIZE;\n\n    read_options(argc, argv, &amp;opt);\n\n    if(opt.compress==COMPRESS) comp(opt);\n    else decomp(opt);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "multithreading", "synchronization", "mutex"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 4, "creation_date": 1520436284, "post_id": 49155497, "comment_id": 85315520, "body": "are you using c or c++?  If you&#39;re using c++11 onwards, don&#39;t use pthread_mutex but std::mutex"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520436524, "post_id": 49155497, "comment_id": 85315716, "body": "Are you trying to prevent the same file being written to in two different threads?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1520436775, "post_id": 49155497, "comment_id": 85315921, "body": "You need to decide what objects you&#39;re trying to protect from concurrent access by which threads or code paths. If you have something created and used only in one thread, then unless you actively share it with another thread, there&#39;s no need to protect access to that object."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1520436995, "post_id": 49155497, "comment_id": 85316069, "body": "<i>Why</i> are you trying to prevent simultaneous writes to your file?  Depending on your operating system, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pwrite.html\" rel=\"nofollow noreferrer\">there are ways to do atomic write operations to a file without locking at the application level</a>."}, {"owner": {"reputation": 3, "user_id": 8902868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9af429c5f9927581333cb697cf6938eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nikki", "link": "https://stackoverflow.com/users/8902868/nikki"}, "edited": false, "score": 0, "creation_date": 1520437261, "post_id": 49155497, "comment_id": 85316264, "body": "Yes, I am trying to prevent concurrent writes to the same file by different threads."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1520440794, "creation_date": 1520440794, "answer_id": 49157022, "question_id": 49155497, "link": "https://stackoverflow.com/questions/49155497/implementing-mutexes-for-file-writes/49157022#49157022", "title": "Implementing mutexes for file writes", "body": "<p>It's fairly easy to create a wrapper for an iostream that ensures only one thread can write to the stream at a time. Unfortunately, almost as soon as you do so, you run into another problem. It ensures that only one thread can insert into the stream at a time, so you get defined behavior. If, however, you have something like:</p>\n\n<p>thread 1: <code>sync_stream &lt;&lt; a &lt;&lt; b &lt;&lt; c &lt;&lt; '\\n';</code><br>\nthread 2: <code>sync_stream &lt;&lt; x &lt;&lt; y &lt;&lt; z &lt;&lt; '\\n';</code></p>\n\n<p>What you wanted was either:</p>\n\n<blockquote>\n  <p>abc<br>\n  xyz</p>\n</blockquote>\n\n<p>...or else:</p>\n\n<blockquote>\n  <p>xyz<br>\n  abc</p>\n</blockquote>\n\n<p>Since they're in separate threads, it's fine for the order between them to vary, but a line of output from one thread should remain a single line of output. Something like:</p>\n\n<blockquote>\n  <p>abxy<br>\n  cz</p>\n</blockquote>\n\n<p>...probably isn't desired or acceptable. To ensure against this, we really need <em>two</em> separate classes. One is a synchronized stream. The other is something to let us do some (more or less arbitrary) set of insertions into the stream as a single, indivisible \"transaction\". To do that, we can use a pair of classes like this:</p>\n\n<pre><code>class transaction {\n    std::ostringstream buffer;\npublic:\n    transaction(std::string const &amp;s=\"\") : buffer(s, std::ios::out | std::ios::ate) {}\n\n    template &lt;class T&gt;\n    transaction &amp;operator&lt;&lt;(T const &amp;t) {\n        buffer &lt;&lt; t;\n        return *this;\n    }\n\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, transaction const &amp;t) {\n        return os &lt;&lt; t.buffer.str();\n    }\n};\n\nclass sync_stream {\n    std::ostream &amp;out;\n    std::mutex mutex;\npublic:\n    sync_stream(std::ostream &amp;sink) : out(sink) { }\n\n    void operator&lt;&lt;(transaction const &amp;t) {\n        std::lock_guard&lt;std::mutex&gt; l(mutex);\n        out &lt;&lt; t;\n    }    \n};\n</code></pre>\n\n<p>Note that the <code>transaction</code> class supports chaining, but the <code>sync_stream</code> does not (and the only thing you can insert into it is a <code>transaction</code>). To use them, we do something like this:</p>\n\n<pre><code>for (int i=0; i&lt;10; i++)\n    threads[i] = std::thread([&amp;]{ \n        for (int i=0; i&lt;10; i++) \n            s &lt;&lt; (transaction() &lt;&lt; \"Thread: \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"\\n\");\n    });\n</code></pre>\n\n<p>This way, what a thread thinks of as a single output actually comes out as a single output, so our result might look like this:</p>\n\n<blockquote>\n  <p>Thread: 140375947724544<br>\n  Thread: 140376068564736<br>\n  Thread: 140375964509952<br>\n  Thread: 140375964509952<br>\n  Thread: 140375972902656<br>\n  Thread: 140375964509952</p>\n</blockquote>\n\n<p>Of course, you'll get different thread IDs than I did, and the order of the lines is likely to vary--but each line will be written as a single, intact unit.</p>\n\n<h1>Summary</h1>\n\n<p>The worker threads shouldn't work directly with the mutex at all. That should be automated, so the worker thread can focus on its work, and spend only a bare minimum of effort on the underlying mechanism necessary for it to do its job.</p>\n"}], "owner": {"reputation": 3, "user_id": 8902868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9af429c5f9927581333cb697cf6938eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nikki", "link": "https://stackoverflow.com/users/8902868/nikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 0, "accepted_answer_id": 49157022, "answer_count": 1, "score": -3, "last_activity_date": 1520440794, "creation_date": 1520436219, "question_id": 49155497, "link": "https://stackoverflow.com/questions/49155497/implementing-mutexes-for-file-writes", "title": "Implementing mutexes for file writes", "body": "<p>I am trying to use mutexes to avoid multiple writes to the same thread inC/Cpp. Below is the flow of my program. I am confused as to where to include my lock and unlock code. </p>\n\n<pre><code>main() {\n    spawn a worker thread\n}\nworker_thread() {\n    read the input file name \n    read some content\n    write the content to the given file name\n}\n</code></pre>\n\n<p>Most of the implementation that I see, seem to have something like this: </p>\n\n<pre><code>main() {\n    pthread_mutex_init(&amp;myMutex;,0);\n    *spawn a worker thread*\n    pthread_join(thread1, 0);\n    pthread_mutex_destroy(&amp;myMutex;);\n}\nworker_thread() {\n    read the input file name \n    read some content\n    write the content to the given file name\n}\n</code></pre>\n\n<p>What I want it something like this:</p>\n\n<pre><code>main() {\n    spawn a worker thread\n}\nworker_thread() {\n    read the input file name \n    read some content\n    pthread_mutex_init(&amp;myMutex;,0) --&gt; for the given file?\n    write the content to the given file name\n    pthread_mutex_destroy(&amp;myMutex;);\n}\n</code></pre>\n\n<p>Any ideas to proceed much appreciated. Thank you!</p>\n"}, {"tags": ["python", "c", "linux", "wrapper"], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 0, "last_activity_date": 1520436366, "creation_date": 1520436366, "answer_id": 49155557, "question_id": 49155266, "link": "https://stackoverflow.com/questions/49155266/correctly-making-setup-py-for-c-wrapper/49155557#49155557", "title": "correctly making setup.py for c wrapper", "body": "<p>Header files are not libraries.</p>\n\n<p>If you completely remove the <code>include_dirs</code> and <code>libraries</code> settings from your setup.py, your extension should compile correctly.  If it still doesn't work, please post the new set of error messages you get.</p>\n"}], "owner": {"reputation": 65, "user_id": 3633572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0f7761b650c7ad4df8e2062764c2d0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dick", "link": "https://stackoverflow.com/users/3633572/dick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 49155557, "answer_count": 1, "score": 0, "last_activity_date": 1520436366, "creation_date": 1520435627, "question_id": 49155266, "link": "https://stackoverflow.com/questions/49155266/correctly-making-setup-py-for-c-wrapper", "title": "correctly making setup.py for c wrapper", "body": "<p>I am trying to setup a setup.py file setup a python wrapper around some simple c code. Currently this is what I have for my setup.py:</p>\n\n<pre><code>from distutils.core import setup, Extension\n\nmodule1 = Extension('ledmod', include_dirs = ['/usr/include', '/usr/include/arm-linux-gnueabi'],\n    libraries = ['fcntl.h','sys/mman.h','sys/stat.h','sys/types.h','unistd.h'],\n    sources=['ledmodule.c'])\n\nsetup (name = 'ledmod',\n    version = '1.0',\n    description = \"LED example for TS7400v2\",\n    author='author',\n    url='site',\n    ext_modules=[module1])\n</code></pre>\n\n<p>and this is my c code:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n//Define a new exception object for our module\nstatic PyObject *ledmodError;\n\n\nstatic PyObject* ledmodset(PyObject* self, PyObject *args){\n    short state;\n\n    if(!PyArg_ParseTuple(args, \"h\", &amp;state)){\n        return NULL;\n    }\n    if(state &gt; 1 || state &lt; 0){\n        PyErr_SetString(ledmodError, \"state must be 0 or 1\");\n    }\n\n    unsigned int *pinctl = NULL;\n    unsigned int devmem = open(\"/dev/mem\", O_RDWR|O_SYNC);\n    pinctl = mmap(0, getpagesize(), PROT_READ|PROT_WRITE, MAP_SHARED, devmem, 0x80018000); //0x80010800 is beginning of PinCtrl see page 722 of man for memory map\n    pinctl[(0x114)&gt;&gt;2] = (0x3 &lt;&lt; (24));//24 Bank 0_PIN28 Check page 729 of man and 717 for enable (0x3)\n    if(state == 1){\n        pinctl[(0x708)&gt;&gt;2] = (0x1 &lt;&lt; 28);//SET See page 838 of man\n    }else{\n        pinctl[(0x704)&gt;&gt;2] = (0x1 &lt;&lt; 28);//SET See page 838 of man\n    }\n\n    pinctl[(0xb04)&gt;&gt;2] = (0x1 &lt;&lt; 28); //Enable Register. See page 847\n\n    return NULL;\n}\n\nstatic PyMethodDef ledmod_methods[] = {\n    //\"PythonName\" C-funtion Name, argument presentaion, description\n    {\"led_set\", ledmodset,  METH_VARARGS, \"Sets the green led of the TS7400v2 based on state input\"},\n    {NULL,NULL,0,NULL}\n};\n\nPyMODINIT_FUNC initexmod(void){\n    PyObject *m;\n    m = Py_InitModule(\"ledmod\", ledmod_methods);\n    if(m == NULL) return;\n\n    ledmodError = PyErr_NewException(\"ledmod.error\", NULL, NULL);//\"exmod.error\" python error object\n    Py_INCREF(ledmodError);\n    PyModule_AddObject(m, \"error\",ledmodError);\n}\n</code></pre>\n\n<p>However it seems that I am unable to build using <code>sudo python setup.py build</code> as I get the following errors:</p>\n\n<pre><code>running build\nrunning build_ext\nbuilding 'ledmod' extension\ngcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include -I/usr/include/arm-linux-gnueabi -I/usr/include/python2.7 -c ledmodule.c -o build/temp.linux-armv5tejl-2.7/ledmodule.o\nledmodule.c: In function 'ledmodset':\nledmodule.c:25:2: warning: suggest parentheses around assignment used as truth value [-Wparentheses]\nwarning: no library file corresponding to 'sys/mman.h' found (skipping)\nwarning: no library file corresponding to 'sys/stat.h' found (skipping)\nwarning: no library file corresponding to 'sys/types.h' found (skipping)\ngcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-z,relro build/temp.linux-armv5tejl-2.7/ledmodule.o -lfcntl.h -lunistd.h -o build/lib.linux-armv5tejl-2.7/ledmod.so\n/usr/bin/ld: cannot find -lfcntl.h\n/usr/bin/ld: cannot find -lunistd.h\ncollect2: ld returned 1 exit status\nerror: command 'gcc' failed with exit status 1\n</code></pre>\n\n<p>What am I missing? I have the libraries listed and the include directories... but from the errors the libraries are not being found.</p>\n"}, {"tags": ["c", "file", "merge", "buffer"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520435490, "post_id": 49155088, "comment_id": 85314870, "body": "Just write them in order to the file."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6793527"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520435690, "post_id": 49155088, "comment_id": 85315040, "body": "I don&#39;t get them in order, i don&#39;t have all the buffers at the same time. I just a a buffer at the time, when i receive it. So i know just where it was in the file. I can&#39;t store it anywhere else other then the new file"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520435767, "post_id": 49155088, "comment_id": 85315102, "body": "Then you need to know the size of the file"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6793527"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520436636, "post_id": 49155088, "comment_id": 85315819, "body": "I Can manage to get it. But the problem remains, how can i tell c the specific location where to copy the buffer inside the file"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520436687, "post_id": 49155088, "comment_id": 85315850, "body": "You will need to create a file and fill it with zeros to the known size. Then use <code>fseek</code>."}], "owner": {"user_type": "does_not_exist", "display_name": "user6793527"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520435151, "creation_date": 1520435151, "question_id": 49155088, "link": "https://stackoverflow.com/questions/49155088/merge-buffer-in-a-specific-location-of-a-file", "title": "Merge Buffer in a specific location of a File", "body": "<p>I've split a file into multiple buffers. \nNow i need to merge all this buffers together to recreate the original file. To do so i need to know how to tell c to copy a specific buffer into a specific position inside the file so that the file gets rebuild as it was.\nIs there a method to point at a specific location inside the file.\nThat way i can just rebuild the file using a the buffer dimension multiplied to the buffer original position and copy it in there.</p>\n\n<p>I can write you an example to be a bit more clear:\nThe original file is: <code>\"This is an example\"</code></p>\n\n<p>The first method splits the file into 4 buffers:</p>\n\n<pre><code>buf[0] = \"This\";\nbuf[1] = \" is \";\nbuf[2] = \"an e\";\nbuf[3] = \"xamp\";\nbuf[4] = \"le  \";\n</code></pre>\n\n<p>Now i need to create a method <code>merge(char buffer, int position)</code> that given the position inside the original file, copy this buffer inside the specific spot of the new file.</p>\n\n<p>Thank you in advance. I hope it was clear</p>\n"}, {"tags": ["c", "integer"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1520434639, "post_id": 49154872, "comment_id": 85314188, "body": "That&#39;s not possible."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 3, "creation_date": 1520434935, "post_id": 49154872, "comment_id": 85314421, "body": "You would have to write code that verifies the value before assigning it. The language will not help you."}, {"owner": {"reputation": 711, "user_id": 4203585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RimBNob6Ens/AAAAAAAAAAI/AAAAAAAAAB8/a3_olA9DBfU/photo.jpg?sz=128", "display_name": "Leonardo Henriques", "link": "https://stackoverflow.com/users/4203585/leonardo-henriques"}, "edited": false, "score": 0, "creation_date": 1520434997, "post_id": 49154872, "comment_id": 85314465, "body": "The only way I see you can do it is when you are assigning a value to it you do an <code>if</code> that makes it to only take those numbers."}], "answers": [{"tags": [], "owner": {"reputation": 1482, "user_id": 7284304, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1314689221922100/picture?type=large", "display_name": "Elarbi Mohamed Aymen", "link": "https://stackoverflow.com/users/7284304/elarbi-mohamed-aymen"}, "is_accepted": false, "score": -1, "last_activity_date": 1520435675, "creation_date": 1520435675, "answer_id": 49155284, "question_id": 49154872, "link": "https://stackoverflow.com/questions/49154872/definition-of-int-variable-with-value-limits/49155284#49155284", "title": "Definition of int variable with value limits", "body": "<pre><code>int entredValue,inf,max;\nprintf(\"\\nPlease enter inf value: \\n\");\nscanf(\"%d\", &amp;inf);\n\nprintf(\"\\nPlease enter max value: \\n\");\nscanf(\"%d\", &amp;max);\ndo {\n    printf(\"\\nPlease enter a value: \\n\");\n    scanf(\"%d\", &amp;entredValue);\n}while (entredValue&gt;max || entredValue&lt; inf);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520438555, "creation_date": 1520438555, "answer_id": 49156309, "question_id": 49154872, "link": "https://stackoverflow.com/questions/49154872/definition-of-int-variable-with-value-limits/49156309#49156309", "title": "Definition of int variable with value limits", "body": "<p>Usually you would control boundaries in run-time, by checking the input and ensuring that it lies within the given limits. At compile-time, you cannot specify which values a plain int is allowed to hold.</p>\n\n<p>An alternative is to use an enum, in which case only allowing certain specific values is actually possible. But enums should only be used if you actually need to give each index a unique name. Otherwise, using enums would only be obfuscation. Example:</p>\n\n<pre><code>typedef enum\n{\n  ZERO,\n  ONE,\n  TWO,\n  THREE,\n  FOUR,\n  FIVE,\n} number_t;\n</code></pre>\n\n<p>which is 100% equivalent to this:</p>\n\n<pre><code>typedef enum\n{\n  ZERO  = 0,\n  ONE   = 1,\n  TWO   = 2,\n  THREE = 3,\n  FOUR  = 4,\n  FIVE  = 5,\n} number_t;\n</code></pre>\n\n<p>A variable of <code>number_t</code> can now in theory only hold the values 0 to 5. This does however not prevent someone from assigning a garbage value to it, nor does it prevent bugs (or EMI) from modifying the contents of the variable. So the run-time checks mentioned above also serve a defensive programming purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1520439568, "creation_date": 1520439568, "answer_id": 49156640, "question_id": 49154872, "link": "https://stackoverflow.com/questions/49154872/definition-of-int-variable-with-value-limits/49156640#49156640", "title": "Definition of int variable with value limits", "body": "<p>C does not provide any facility to limit ranges of numeric variables - you will <em>have</em> to add your own runtime check for every assignment.   </p>\n\n<p>You can abstract out an assignment function that performs the check:</p>\n\n<pre><code>int ranged_assign( int *var, int newVal, int min, int max )\n{\n  int result = 0;\n  if ( (result = (min &lt;= newVal &amp;&amp; newVal &lt;= max) ) )\n    *var = newVal;\n\n  return result;\n}\n...\nif ( !ranged_assign( &amp;x, val, 0, 5 ) )\n  // handle range error\n</code></pre>\n\n<p>Obviously, this won't work if you want to assign your ranged variable directly from input.  You'll have to read into a temporary, and then do the range check on that temporary:</p>\n\n<pre><code>if ( scanf( \"%d\", &amp;tmp ) == 1 )\n{\n  if ( !ranged_assign( &amp;x, tmp, 0, 5 ) )\n    // handle range error\n}\nelse\n  // handle input error\n</code></pre>\n\n<p>You'll have to figure out your strategy for handling out-of-range assignments.  </p>\n"}], "owner": {"reputation": 1, "user_id": 7986969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a444c987c1ef67ffaa70298aa4675e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Varkas", "link": "https://stackoverflow.com/users/7986969/varkas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1520439568, "creation_date": 1520434572, "last_edit_date": 1520434697, "question_id": 49154872, "link": "https://stackoverflow.com/questions/49154872/definition-of-int-variable-with-value-limits", "title": "Definition of int variable with value limits", "body": "<p>I'm new at C. I need to define an integer variable with a limited range of values.</p>\n\n<p>In the specific case I need to define an int variable that can only assume the values from 0 to 5, so 0, 1, 2, 3, 4, 5. No less, and no more.</p>\n\n<p>What have I to add to <code>int var</code> to define it as described before? Or, is this the right way to define it?</p>\n"}, {"tags": ["c", "arrays", "array-difference"], "comments": [{"owner": {"reputation": 3699, "user_id": 375399, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ee1c857b767375e1fc848279f64584b?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/375399/nick"}, "edited": false, "score": 2, "creation_date": 1520434621, "post_id": 49154802, "comment_id": 85314173, "body": "Define &quot;difference&quot;. What happens if one array is larger than the other? Why do you compare an entire row against one element in your loop?"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1520434630, "post_id": 49154802, "comment_id": 85314181, "body": "Your last for shouldn&#39;t go to &quot;tot_size&quot; but to &quot;s&quot;. Plus, if I understand correctly, the if condition in the for is suspicious since it will add a new &quot;difference&quot; for each arr1[i] different from arr2[j]. If arr1 size is 10 and arr2 size is 20, you will have 200 possibility !"}, {"owner": {"reputation": 669, "user_id": 865252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59a1f9ce70d467a941bb8257e98fdfe9?s=128&d=identicon&r=PG", "display_name": "gda2004", "link": "https://stackoverflow.com/users/865252/gda2004"}, "edited": false, "score": 0, "creation_date": 1520434718, "post_id": 49154802, "comment_id": 85314255, "body": "do you not want to store the arr2 value as well ?"}, {"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520434979, "post_id": 49154802, "comment_id": 85314457, "body": "Hey, thanks for responding. With difference I mean: each element that is in array 1, that is not in array 2. So I want said elements in a third array."}, {"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520435140, "post_id": 49154802, "comment_id": 85314574, "body": "I&#39;ve editet the question text to contain a difference definition, and stating the problem of two differently sized arrays."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1520435226, "post_id": 49154802, "comment_id": 85314652, "body": "<code>int arr3[tot_size];</code> is very bad. Forget about this style of definition. Use <code>int * arr3 = malloc( tot_size * sizeof(int) );</code>"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1520435383, "post_id": 49154802, "comment_id": 85314784, "body": "@i486 You know that VLA are usable since C99 ? There is no need to malloc anymore, and this syntaxe is correct for c99 and superior (thougth I agree with you and usually avoid VLA, but it&#39;s personnal preference)"}, {"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520435760, "post_id": 49154802, "comment_id": 85315098, "body": "I&#39;ll google the advantages of VLA and malloc in this particular case so I learn. Thank you for your input."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1520460199, "post_id": 49154802, "comment_id": 85329590, "body": "@Tom&#39;s I know it. But I don&#39;t think it is good way to implement large array."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520435306, "post_id": 49155074, "comment_id": 85314720, "body": "Wow! What a clever solution! Thank you so much, I&#39;ll try to implement it."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520435564, "post_id": 49155074, "comment_id": 85314926, "body": "Thanks ! Good luck with the implementation. Keep in mind that is mostly a naive solution, and this can be improved somehow, but I think it&#39;s a good first step."}, {"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520436940, "post_id": 49155074, "comment_id": 85316041, "body": "Hm, I just remembered, I want the third array to contain every element in array1 that is not in array2, and not vica versa. So if array1 is [1, 2, 3], and arr2 is [3, 4, 5], then arr3 is [1, 2]. Do you have any suggestions on how to do this?"}, {"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520439081, "post_id": 49155074, "comment_id": 85317606, "body": "Sorry for the late answer Tom, and thank you again for the help. I&#39;m trying to implement the function you suggested, but how would I compare an integer to an entire array? In my head, I would have to iterate over array2 as well, as I cannot compare an integer to a pointer (array)."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 1, "creation_date": 1520439333, "post_id": 49155074, "comment_id": 85317765, "body": "The purpose of the &quot;IsNumberInArray&quot; function is to tell you if a number is in an array (return true) or not (return false). if arr1 = [1, 2, 3] and arr2 = [3, 4, 5], then &quot;IsNumberInArray(arr1[0], arr2, size2)&quot; should return false since arr1[0] (which is 1) is not in arr2 (which is [3, 4, 5]). On contrary, &quot;IsNumberInArray(arr1[2], arr2, size2)&quot; should return true, sinc arr1[2] (which is 3), is indeed in arr2 (which is [3, 4, 5]). Do you understand ? It&#39;s a really simple function (thougth you can improve it if you know that the array is sorted by doing a dichotomic search)."}, {"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520439991, "post_id": 49155074, "comment_id": 85318226, "body": "Yes, I understand the logic. Perhaps you could move this discussion to a chat? I cannot do it as my rep isn&#39;t high enough."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520440425, "post_id": 49155074, "comment_id": 85318501, "body": "can you join <a href=\"https://chat.stackoverflow.com/rooms/166412/private-discussion-temporary\">chat.stackoverflow.com/rooms/166412/&hellip;</a> ? It&#39;s my first time doing that, so I hope I haven&#39;t done anything wrong ..."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520440907, "post_id": 49155074, "comment_id": 85318838, "body": "You can&#39;t write on a romm unless you have 20 reputation. sg7&#39;s code is exactly what you want to do. The only difference with what I suggest you do is that sg7 directly search with a second for loop. Thus, he have to retain if the number is in the array or not (purpose of &quot;found&quot; variable). With the function, you could directly return and act. it a simple matter a view."}, {"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520441170, "post_id": 49155074, "comment_id": 85319010, "body": "Haha Tom, I think you did everything fine, just a shame that I am unable to speak in a chat rom even if invited. But I agree, sg7&#39;s answer made it more clear, but I&#39;ll try to implement your suggestion as it seems more effective. Thank you for all your help Tom, I wish I could upvote you. :P"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520442099, "post_id": 49155074, "comment_id": 85319647, "body": "I&#39;ve edited, again. I&#39;m not sure this is the way that stackoverflow must be used, but ..."}], "tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": true, "score": 3, "last_activity_date": 1520442327, "last_edit_date": 1520442327, "creation_date": 1520435106, "answer_id": 49155074, "question_id": 49154802, "link": "https://stackoverflow.com/questions/49154802/how-to-find-the-difference-between-two-arrays-in-c/49155074#49155074", "title": "How to find the difference between two arrays in C?", "body": "<p>If the difference between two array is the number in the first not in the second AND the number in the second not in the first, you can simply do the following :</p>\n\n<ul>\n<li><p>create a result array, and copy the first and second array in.</p>\n\n<p>arr1 = [3, 5, 7, 0]</p>\n\n<p>arr2 = [1, 10, 5]</p>\n\n<p>arr3 = [arr1, arr2] ==> [3, 5, 7, 0, 1, 10, 5]</p></li>\n<li><p>Then, sort the array (using qsort, or any other sorting function)</p>\n\n<p>arr3 = [0, 1, 3, 5, 5, 7, 10]</p></li>\n<li><p>Finally, delete the number appearing more than once (the sorting step make it really easy in only one pass)  </p>\n\n<p>arr3 = [0, 1, 3, 7, 10]</p></li>\n</ul>\n\n<hr>\n\n<p>After comment : So, the difference between arr1 and arr2 is number in arr1 not in arr2 ? Your first code make more sense.</p>\n\n<p>You should make some function in order to make it easy for you.</p>\n\n<ul>\n<li><p>Make an \"IsNumberInArray\" function</p>\n\n<p>bool IsNumberInArray(int number, int *array, size_t arraySize)</p></li>\n</ul>\n\n<p>I leave the implementation to you (if the array is sorted, you could implement an dichotomic search, else you can do an good old loop for).</p>\n\n<ul>\n<li>Then, for each number in arr1, if IsNumberInArray(arr1[i], arr2, size2) is false, add arr1[i] in arr3.</li>\n</ul>\n\n<p>Basically, it's nearly exactly what you do. Your problem lie in the \"inversed\" condition (is the number is in the second array ?) and \"how to break\" from the second loop easily. The function will provide that.</p>\n\n<p>Note that since arr3 will only retain arr1 number which is not in arr2, arr3 size can be at max size1. That's why I firstly assumed you wanted uniq number in arr1 AND arr2, since tot_size was size1 + size2.</p>\n\n<hr>\n\n<p>Usually, I don't give code for \"easy\" problem, because if you can't solve it by yourself, that mean you need practice and giving you the answer will not be usefull for you, but since sg7 did it, it's meaningless to hold it (and you can't use the room for now), so here an implementation of the algorithm :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool IsNumberInArray(int number, int *array, size_t arraySize)\n{\n    for (size_t i = 0; i &lt; arraySize; ++i) {\n       if (array[i] == number) {\n           return (true);\n       }\n    }\n\n    return (false);\n}\n\nvoid DumpArrayContent(int *array, size_t arraySize, char *arrayName)\n{\n    printf(\"%s has %zu elements:\\n\", arrayName ? arrayName : \"array\", arraySize);               \n    for (size_t i = 0; i &lt; arraySize; ++i) {\n        printf(\"%d \",array[i]);\n    }\n    printf(\"\\n\");    \n}\n\nint main(void)\n{\n    int arr1[] = {1,2,3,4,7,8,9};\n    int arr2[] = {3,4,5};\n\n    size_t s1 = sizeof(arr1)/sizeof(*arr1);\n    size_t s2 = sizeof(arr2)/sizeof(*arr2);\n\n    int    arr3[s1];\n    int    s3 = 0;\n\n    for (size_t i = 0; i &lt; s1; ++i) {\n        if (!IsNumberInArray(arr1[i], arr2, s2)) {\n           arr3[s3] = arr1[i];\n           s3++;\n        }\n    }\n\n    DumpArrayContent(arr1, s1, \"arr1\");\n    DumpArrayContent(arr2, s2, \"arr2\");\n    DumpArrayContent(arr3, s3, \"arr3\");\n\n    return 0;\n} \n</code></pre>\n\n<p>I don't think there is a more \"effective\" implementation, since after compiler optimization, the resulting executable would be pretty identical. If there are not compiler optimization activated, sg7 code will be more \"effective\" since it's straigthforward (mine have function call). It's up to you to see which one you prefer.</p>\n"}, {"tags": [], "owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "is_accepted": false, "score": 1, "last_activity_date": 1520437111, "creation_date": 1520437111, "answer_id": 49155797, "question_id": 49154802, "link": "https://stackoverflow.com/questions/49154802/how-to-find-the-difference-between-two-arrays-in-c/49155797#49155797", "title": "How to find the difference between two arrays in C?", "body": "<p>Look at your loop, notice that the inner for-loop j\nis initialized to 0 at every iteration of i.</p>\n\n<pre><code>  for(i = 0; i &lt; size1; i++)\n  {\n    for(j = 0; j &lt; size2; j++)\n    {\n      if(arr1[i] != arr2[j])\n      {\n        arr3[s] = arr1[i];\n        ++i;\n        ++j;  // so what does this do?\n        ++s;\n      }\n    }\n  }\n</code></pre>\n\n<p>Lets try to see what happens with two arrays that have different values</p>\n\n<pre><code>arr1 : {1,2}\narr2 : {3,4}\n\n\n           i   j   s\niteration  0   0   0  =&gt; arr3[0] = 1; \n           1   1   1\n               2                        j==2 since j++, leaving inner loop j==size2\niteration  2   0   1                    i==2 since i++, leaving outer loop i==size1\n</code></pre>\n\n<p>Best is to write down your steps on a paper and go through your algorithm, start with a \nsimple example, then create a prototype routine for it, if that works move on to larger \narrays, different lenght arrays, arrays that are identical and so on.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520440499, "post_id": 49156632, "comment_id": 85318561, "body": "Perfect, thank you so much. So when the &quot;for loop&quot; break, it returns to the start of the &quot;j&quot; loop, and increments j? So that the ith element of arr1 is compared to the next element of arr2?"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 1, "creation_date": 1520440781, "post_id": 49156632, "comment_id": 85318747, "body": "@DoeJ When the loop breaks,  it means that element from <code>arr1</code> exists in <code>arr2</code> and there is no need to add it to <code>arr3</code>. Then, the next element is taken form <code>arr1</code> and compared with all elements from <code>arr2</code>. When element is found the loop breaks, if not then the element is added to <code>arr3</code>."}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 1, "creation_date": 1520441545, "post_id": 49156632, "comment_id": 85319234, "body": "@DoeJ. To clarify, when the &quot;for loop&quot; breaks, program returns to take next element from the <code>i</code> loop. That next element <code>e</code> from <code>arr1</code> will  be compared with all elements in <code>arr2</code> (unless duplicate is found and loop breaks). The loop <code>j</code> is always restarted from first element. The loop <code>i</code>  always advances."}, {"owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "edited": false, "score": 0, "creation_date": 1520441561, "post_id": 49156632, "comment_id": 85319254, "body": "Fantastic, I understand. Thank you!"}], "tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 2, "last_activity_date": 1520440270, "last_edit_date": 1520440270, "creation_date": 1520439542, "answer_id": 49156632, "question_id": 49154802, "link": "https://stackoverflow.com/questions/49154802/how-to-find-the-difference-between-two-arrays-in-c/49156632#49156632", "title": "How to find the difference between two arrays in C?", "body": "<blockquote>\n  <p>I want the third array to contain every element in array1 that is not\n  in array2, and not vica versa. So if array1 is [1, 2, 3], and arr2 is\n  [3, 4, 5], then arr3 is [1, 2].</p>\n</blockquote>\n\n<p>Providing that array1 has already been processed to not contain the duplicates,<br>\nit looks like you need this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(void)\n{\n    size_t i,j,k;\n    int s3;\n\n    int arr1[] = {1,2,3,4,7,8,9};\n    int arr2[] = {3,4,5};\n\n    size_t s1 = sizeof(arr1)/sizeof(int);\n    size_t s2 = sizeof(arr2)/sizeof(int);\n\n    int arr3[s1];\n    int e;\n    int found = 0;\n    k = 0;\n\n    for(i=0; i&lt;s1; i++)\n    {\n        e = arr1[i]; \n        found = 0;\n\n        for(j=0; j&lt;s2; j++){\n\n           if(e == arr2[j])\n           {\n               found = 1;\n               break;\n           }\n        }\n\n        if(found == 0){\n           arr3[k] = e;\n           k++;\n        }\n    }\n\n\n    printf(\"arr1 has %d elements:\\n\",s1);\n    for(i=0;i&lt;s1; i++)\n    {\n        printf(\"%d \",arr1[i]);\n    }\n\n    printf(\"\\narr2 has %d elements:\\n\",s2);\n    for(i=0;i&lt;s2; i++)\n    {\n        printf(\"%d \",arr2[i]);\n    }\n\n    printf(\"\\narr3 has %d elements:\\n\",k);               \n    for(i=0;i&lt;k; i++)\n    {\n        printf(\"%d \",arr3[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>arr1 has 7 elements:                                                                                                                         \n1 2 3 4 7 8 9                                                                                                                               \narr2 has 3 elements:                                                                                                                        \n3 4 5                                                                                                                                       \narr3 has 5 elements:                                                                                                                        \n1 2 7 8 9 \n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 9351296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de28db5195fdd1db449bb0ce276e397?s=128&d=identicon&r=PG&f=1", "display_name": "Doe J", "link": "https://stackoverflow.com/users/9351296/doe-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6649, "favorite_count": 0, "accepted_answer_id": 49155074, "answer_count": 3, "score": 1, "last_activity_date": 1520442327, "creation_date": 1520434377, "last_edit_date": 1520436980, "question_id": 49154802, "link": "https://stackoverflow.com/questions/49154802/how-to-find-the-difference-between-two-arrays-in-c", "title": "How to find the difference between two arrays in C?", "body": "<p>I've been trying to write c programs for finding the union, intersection and difference between two arrays, and while the first two worked out fine, I'm having some trouble finding the difference between two arrays. With difference I mean each element that is in array1, that is not in array2. </p>\n\n<p>I want the third array to contain every element in array1 that is not in array2, and not vica versa. So if array1 is [1, 2, 3], and arr2 is [3, 4, 5], then arr3 is [1, 2]. I am also unsure how to find the difference if the two arrays are of different sizes.</p>\n\n<p>My output is a bunch of zeros and negative numbers: </p>\n\n<p>The difference is: 1</p>\n\n<p>The difference is: 2</p>\n\n<p>The difference is: -14200</p>\n\n<p>The difference is: 0</p>\n\n<p>The difference is: -14340</p>\n\n<p>The difference is: 0</p>\n\n<p>This is the code I've been working with:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  int arr1[100];\n  int arr2[100];\n  int size1, size2, i, j, s=0;\n\n  //enter array size\n  printf(\"\\nPlease enter array1 size: \\n\");\n  scanf(\"%d\", &amp;size1);\n  printf(\"\\nPlease enter array2 size: \\n\");\n  printf(\"\\n--------------------------- \\n\");\n  scanf(\"%d\", &amp;size2);\n\n  //setting up a third array to contain the difference\n  int tot_size = size1+size2;\n  int arr3[tot_size];\n\n\n  //enter array elements\n  for(i=0;i&lt;size1;++i)\n  {\n    printf(\"\\nPlease enter array1 element %d:\\n\", i);\n    scanf(\"%d\", &amp;arr1[i]);\n  }\n  printf(\"\\n--------------------------- \\n\");\n  for(i=0;i&lt;size2;++i)\n  {\n    printf(\"\\nPlease enter array2 element %d:\\n\", i);\n    scanf(\"%d\", &amp;arr2[i]);\n  }\n\n  printf(\"\\n--------------------------- \\n\");\n\n\n  //compare the two arrays, if two elements are not equal\n  //store them in a third array\n  for(i = 0; i &lt; size1; i++)\n  {\n    for(j = 0; j &lt; size2; j++)\n    {\n      if(arr1[i] != arr2[j])\n      {\n        arr3[s] = arr1[i];\n        ++i;\n        ++j;\n        ++s;\n      }\n    }\n  }\n\n  for(i=0;i&lt;s;++i)\n    printf(\"\\nThe difference is: %d\\n\", arr3[i]);\n\n}\n</code></pre>\n\n<p>Any help would be much appreciated, as I am new to C and still have lots to learn.</p>\n"}, {"tags": ["c", "binary", "global-variables"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1520434889, "post_id": 49154684, "comment_id": 85314386, "body": "Do your function <code>one</code> return in all cases? A function declared to return a value <i>must</i> do it, or you will have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520435016, "post_id": 49154684, "comment_id": 85314480, "body": "Talking about returning values, the <code>main</code> function is specified in the C specification to always return an <code>int</code>."}, {"owner": {"reputation": 1, "user_id": 8923309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b572b04a89f5e578df74acd55cf57af5?s=128&d=identicon&r=PG&f=1", "display_name": "Lee", "link": "https://stackoverflow.com/users/8923309/lee"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520435091, "post_id": 49154684, "comment_id": 85314542, "body": "my test case is just natural number bigger than 1."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520435570, "post_id": 49154684, "comment_id": 85314933, "body": "Please read my first comment again. What do you <b><i>return</i></b> if <code>num &gt;= 2</code>?"}, {"owner": {"reputation": 1, "user_id": 8923309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b572b04a89f5e578df74acd55cf57af5?s=128&d=identicon&r=PG&f=1", "display_name": "Lee", "link": "https://stackoverflow.com/users/8923309/lee"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520435936, "post_id": 49154684, "comment_id": 85315253, "body": "That is &#39;else{}&#39; case. so, it calls &#39;one(quotient ) &#39;  function. and it piles up stack until it meets &#39;num==1&#39;"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1520436279, "post_id": 49154684, "comment_id": 85315515, "body": "That&#39;s okay, but what do you <b><i>return</i></b> in the <code>else</code> branch? Nothing! You never return anything, leading to the above mentioned <i>undefined behavior</i>. And since you have Undefined Behavior (or UB as it&#39;s often abbreviated) there is no meaning in discussing the behavior of your program."}, {"owner": {"reputation": 1, "user_id": 8923309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b572b04a89f5e578df74acd55cf57af5?s=128&d=identicon&r=PG&f=1", "display_name": "Lee", "link": "https://stackoverflow.com/users/8923309/lee"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520439955, "post_id": 49154684, "comment_id": 85318205, "body": "thank you for comments. :)"}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 2531457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cffbbbd18678b2ce23a0c06ca17c438c?s=128&d=identicon&r=PG&f=1", "display_name": "Scorta", "link": "https://stackoverflow.com/users/2531457/scorta"}, "is_accepted": false, "score": 0, "last_activity_date": 1522971925, "creation_date": 1522971925, "answer_id": 49683154, "question_id": 49154684, "link": "https://stackoverflow.com/questions/49154684/difference-between-cnt-num-2-and-if-num-2-cnt/49683154#49683154", "title": "difference between &quot;cnt += num % 2;&quot;,and, &quot;if (num % 2) ++cnt;&quot;", "body": "<p>Other than lack of <code>return</code> in <code>else branch</code>, you use global var <code>cnt</code> in a .. not an appropriate way (those are what you missed). The following code works well:</p>\n\n<pre><code>int one(int num) {\n    if (num &lt; 2) {\n        return num;\n    } else {\n        return (num % 2) + one(num / 2);\n    }\n}\n</code></pre>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 8923309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b572b04a89f5e578df74acd55cf57af5?s=128&d=identicon&r=PG&f=1", "display_name": "Lee", "link": "https://stackoverflow.com/users/8923309/lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1522971925, "creation_date": 1520434071, "last_edit_date": 1520434673, "question_id": 49154684, "link": "https://stackoverflow.com/questions/49154684/difference-between-cnt-num-2-and-if-num-2-cnt", "title": "difference between &quot;cnt += num % 2;&quot;,and, &quot;if (num % 2) ++cnt;&quot;", "body": "<p>the difference between \"cnt += num % 2;\",and, \"if (num % 2) ++cnt;\"\nI succeeded in counting the number of '1' in binary number.\nbut one line which seems to do the same thing makes different result.</p>\n\n<p>global variable  \"cnt=0\" is declared top of the code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint cnt=0;\n\n//and the recursive function which counts '1' is here\nint one( int num ) {\nif (num &lt; 2)\n{\n cnt += num;\n  return cnt ;   //here, escape and return cnt to main. \n}                      \nelse\n    {\n        one(num / 2);\n        cnt += num % 2; //according to the remainders cnt++ AND THIS IS THE THE QUESTION CORE\n    }\n}\n\nvoid main() {\n    int num;\n    scanf(\"%d\", &amp;num);\n\n    cnt=one(num);  //call recursive function\n    printf(\"%d\", cnt);  //and here, i want to watch the [RESULT]\n}//main\n</code></pre>\n\n<p>[RESULT]</p>\n\n<p>when I use  \" <code>cnt += num % 2;</code>  \"  prints correct answer\nbut another code which seems same    \"<code>if (num % 2) ++cnt;</code>\" prints wrong answer.</p>\n\n<p>num%2 must be 0 or 1. so it adds '1' to cnt. but second code doesn't work.</p>\n\n<p>which point did i miss?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1520434072, "post_id": 49154655, "comment_id": 85313809, "body": "For a start you do not need to consider even numbers"}, {"owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "edited": false, "score": 4, "creation_date": 1520434222, "post_id": 49154655, "comment_id": 85313907, "body": "Forget your primes. Your question is &quot;how do I print &#39;+&#39; between the numbers in a list?&quot;"}, {"owner": {"reputation": 1482, "user_id": 6138345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6B9aT.jpg?s=128&g=1", "display_name": "nima moradi", "link": "https://stackoverflow.com/users/6138345/nima-moradi"}, "edited": false, "score": 0, "creation_date": 1520434642, "post_id": 49154655, "comment_id": 85314192, "body": "save data in array and + sign at end"}, {"owner": {"reputation": 10846, "user_id": 1673776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0llsY.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/1673776/victor"}, "reply_to_user": {"reputation": 1482, "user_id": 6138345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6B9aT.jpg?s=128&g=1", "display_name": "nima moradi", "link": "https://stackoverflow.com/users/6138345/nima-moradi"}, "edited": false, "score": 0, "creation_date": 1520443252, "post_id": 49154655, "comment_id": 85320348, "body": "This question can be answered by a simple Google search. As @nima_moradi pointed out, the question is &quot;how to format strings in C&quot;. This topic has even a Wikipedia page <a href=\"https://en.wikipedia.org/wiki/Printf_format_string\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 0, "creation_date": 1520435726, "post_id": 49155153, "comment_id": 85315066, "body": "+1, but I wonder, given that OP is making <code>is_prime</code> return an int of 0 or 1, if the code they are using is so old as to have no <code>bool</code>... While your code looks fine, you may want to change it to match the style of the posted code, or at least call out the distinction."}], "tags": [], "owner": {"reputation": 5535, "user_id": 1173638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Mq0Io.gif?s=128&g=1", "display_name": "Adder", "link": "https://stackoverflow.com/users/1173638/adder"}, "is_accepted": true, "score": 2, "last_activity_date": 1520436212, "last_edit_date": 1520436212, "creation_date": 1520435307, "answer_id": 49155153, "question_id": 49154655, "link": "https://stackoverflow.com/questions/49154655/c-programming-sum-of-prime-numbers-of-a-given-range-printing-both-the-prime-num/49155153#49155153", "title": "C Programming: Sum of Prime Numbers of a Given Range Printing Both The Prime Numbers and The Sum", "body": "<p>The solution is to print no plus sign in front of the first number, and to print a plus sign in front of all other numbers. To achieve this I am using a boolean with false/true values.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint is_prime(int m)\n{\n    int i;\n    for(i=2; i&lt;=m/2; i++)\n    {\n        if (m % i==0)\n        {\n            return 0;\n        }\n\n    }\n    return 1;\n}\nint main()\n{\n    int num, min, max, sum = 0;\n    scanf(\"%d\", &amp;min);\n    scanf(\"%d\", &amp;max);\n    bool first = true;\n    for(num = min; num &lt;= max; num++)\n    {\n        if(is_prime(num))\n        {\n            sum += num;\n            if(!first) \n            {\n                printf(\"+\");\n            }\n            printf(\"%d\", num);\n            first = false;\n        }\n\n    }\n    printf(\"=%d\\n\", sum);\n    return 0;\n }\n</code></pre>\n\n<p>This code also works with using an integer instead of a boolean: <code>int first = 1;</code> and <code>first = 0;</code></p>\n"}], "owner": {"reputation": 35, "user_id": 6285919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBn6L.png?s=128&g=1", "display_name": "DamagedSoul97", "link": "https://stackoverflow.com/users/6285919/damagedsoul97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "closed_date": 1520443422, "accepted_answer_id": 49155153, "answer_count": 1, "score": 0, "last_activity_date": 1520436212, "creation_date": 1520433961, "last_edit_date": 1520434524, "question_id": 49154655, "link": "https://stackoverflow.com/questions/49154655/c-programming-sum-of-prime-numbers-of-a-given-range-printing-both-the-prime-num", "closed_reason": "Not suitable for this site", "title": "C Programming: Sum of Prime Numbers of a Given Range Printing Both The Prime Numbers and The Sum", "body": "<p>I was creating code that prints the sum of a set of prime numbers of a given integer. Here is what I have created so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint is_prime(int m)\n{\n    int i;\n    for(i=2; i&lt;=m/2; i++)\n    {\n        if (m % i==0)\n        {\n            return 0;\n        }\n\n    }\n    return 1;\n}\nint main()\n{\n    int num, min, max, sum = 0;\n    scanf(\"%d\", &amp;min);\n    scanf(\"%d\", &amp;max);\n    for(num = min; num &lt;= max; num++)\n    {\n        if(is_prime(num))\n        {\n            sum += num;\n            printf(\"%d\", num);\n        }\n\n    }\n    printf(\"=%d\\n\", sum);\n    return 0;\n }\n</code></pre>\n\n<p>If I entered 10 as the minimum, and 20 as the maximum it would print out 11, 13, 17, 19, and it would print out the sum of 60. I was simply wondering how to print '+' between the numbers that are listed when it is executed.</p>\n"}, {"tags": ["c", "unix", "io"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1520433866, "post_id": 49154552, "comment_id": 85313658, "body": "Standard input could be an input-only stream. Never write to it. If you want to test events, just start your program (without the <code>write</code> call) and enter something in the terminal."}, {"owner": {"reputation": 13, "user_id": 9457140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi_BaZxqsBA/AAAAAAAAAAI/AAAAAAAAABY/XgB72Ny_hgo/photo.jpg?sz=128", "display_name": "Greezlock", "link": "https://stackoverflow.com/users/9457140/greezlock"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520434720, "post_id": 49154552, "comment_id": 85314258, "body": "@Someprogrammerdude interesting but &#39;write&#39; was finished successfully (a concrete number of bytes were written). How would you explain it? I mean why I shouldn&#39;t write anything to it?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1520434883, "post_id": 49154552, "comment_id": 85314380, "body": "@Greezlock  If stdin is associated with a terminal, the write may succeed and produce output on the terminal.  But that data went to the tty and is not available to be read by your program."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1520434972, "post_id": 49154552, "comment_id": 85314451, "body": "Is this C, or C++.  <code>#include &lt;cstring&gt;</code> does not look like C."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 2, "creation_date": 1520435208, "post_id": 49154552, "comment_id": 85314637, "body": "@Greezlock writing to stdin is not defined, that&#39;s all. The fact that it does something means nothing. You can&#39;t rely on any behavior. This is like screaming in front of a speaker..."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1520435248, "post_id": 49154552, "comment_id": 85314672, "body": "Try piping output from another program to your program, and try to write to the input, and see what happens. As a general rule: Don&#39;t write to input. Especially since it will not do what you want it to do (add to the input buffer)."}], "owner": {"reputation": 13, "user_id": 9457140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi_BaZxqsBA/AAAAAAAAAAI/AAAAAAAAABY/XgB72Ny_hgo/photo.jpg?sz=128", "display_name": "Greezlock", "link": "https://stackoverflow.com/users/9457140/greezlock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520433635, "creation_date": 1520433635, "question_id": 49154552, "link": "https://stackoverflow.com/questions/49154552/whats-wrong-with-this-behaviour-of-stdin", "title": "What&#39;s wrong with this behaviour of &quot;stdin&quot;?", "body": "<p>I was testing how system call 'poll' works. But while I was doing that, I faced with an unclear behaviour.\nConsider the following easy example:</p>\n\n<pre><code>#include &lt;sys/poll.h&gt;\n#include &lt;cstring&gt;\n#include &lt;cstdio&gt;\n#include &lt;cerrno&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n\n    pollfd p[2];\n    p[0].fd = STDIN_FILENO;\n    p[0].events = POLLIN;\n\n    p[1].fd = STDOUT_FILENO;\n    p[1].events = POLLOUT;\n\n    char *str_to_write = \"Hello world!\";\n\n    write(STDIN_FILENO,\n          str_to_write,\n          strlen(str_to_write));\n\n    const int NUMBER_OF_DESCRIPTORS = 2;\n    const int DELAY = 5;\n\n    int rt = poll(p,\n                  NUMBER_OF_DESCRIPTORS,\n                  DELAY * 1000);\n\n    if (rt == -1)\n    {\n        printf(\"Some error was occurred! %d\", errno);\n\n        return errno;\n    }\n\n    if (rt == 0)\n    {\n        printf(\"Timeout was occurred! None of the events are ready =( \");\n\n        return 0;\n    }\n\n    if (p[0].revents &amp; POLLIN)\n    {\n        printf(\"stdin was ready =)\");\n    }\n\n    if (p[1].revents &amp; POLLOUT)\n    {\n        printf(\"stdout was ready =)\");\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>As we can see, I'm going to wait for a standard input stream until it's ready to be read:</p>\n\n<pre><code> p[0].fd = STDIN_FILENO;\n p[0].events = POLLIN;\n</code></pre>\n\n<p>That's why I decided to write something there by the method 'write':</p>\n\n<pre><code>write(STDIN_FILENO,\nstr_to_write,\nstrlen(str_to_write));\n</code></pre>\n\n<p>Could you please clarify the following questions:<br>\n1) Why my idea of writing something to 'STDIN' and then get an event that would tell us that 'STDIN' is ready to be read doesn't work?<br>\n2) When I start the program not in the debug mode, there is always the message \"hello world\" on the screen (As an output of my program. Except the message that stdout was ready), but when I start it in the debug mode there is no this message. What could it be? How come that that information which was written to 'STDIN' then would be appeared in 'STDOUT' directly?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["java", "c", "windows", "sockets", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "is_accepted": true, "score": 1, "last_activity_date": 1521068032, "creation_date": 1521068032, "answer_id": 49288903, "question_id": 49154522, "link": "https://stackoverflow.com/questions/49154522/socket-read-timeout-under-windows-strange-hardcode-in-native-method/49288903#49288903", "title": "Socket read timeout under windows: strange hardcode in native method", "body": "<p>This code decides how to implement a blocking socket timeout -- whether to do it with <code>SO_RCVTIMEO</code> or with <code>select</code>, as Windows sockets support both (<code>SO_RCVTIMEO</code> is not supported on all platforms, and not even all Windows implementations may support it as noted in the code comment). <code>NET_Timeout</code> uses <code>select</code> under the covers.</p>\n\n<p>Basically the algorithm is:</p>\n\n<pre><code>if SO_RCVTIMEO is supported and timeout is more than 5 seconds:\n    use SO_RCVTIMEO\nelse:\n    use select\n</code></pre>\n\n<p>As to where the 5 seconds threshold comes from, my best guess is that they somehow figured out (through testing or trial and error?) that <code>select</code> is more reliable or more accurate for timeout values less than 5 seconds. Not that it's related specifically to this issue (it is for a different OS), but <a href=\"https://groups.google.com/forum/#!topic/comp.os.qnx/k9TW6Un2R9k\" rel=\"nofollow noreferrer\">here is an example</a> of somebody reporting that SO_RCVTIMEO is unreliable for small timeout values.</p>\n"}, {"tags": [], "owner": {"reputation": 12697, "user_id": 4994021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159a6a0bd0b0b5ab92e0dc66d936cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Brittain", "link": "https://stackoverflow.com/users/4994021/peter-brittain"}, "is_accepted": false, "score": 1, "last_activity_date": 1521071985, "creation_date": 1521071985, "answer_id": 49289479, "question_id": 49154522, "link": "https://stackoverflow.com/questions/49154522/socket-read-timeout-under-windows-strange-hardcode-in-native-method/49289479#49289479", "title": "Socket read timeout under windows: strange hardcode in native method", "body": "<p>Yeah - you've read the code correctly.</p>\n\n<p>It would appear that there is an undocumented lower limit on the timeout for Windows sockets as covered in <a href=\"https://stackoverflow.com/questions/48054568/why-is-the-timeout-on-a-windows-udp-receive-socket-always-500ms-longer-than-set\">Why is the timeout on a windows udp receive socket always 500ms longer than set by SO_RCVTIMEO?</a></p>\n\n<p>My guess is that they hit the limit in testing, didn't try to find the exact value and so just picked 5s as a lower limit that was known to work.</p>\n"}], "owner": {"reputation": 1058, "user_id": 3714601, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b34704f3a7489d7ce9fbd33d744ae945?s=128&d=identicon&r=PG&f=1", "display_name": "user3714601", "link": "https://stackoverflow.com/users/3714601/user3714601"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 49288903, "answer_count": 2, "score": 6, "last_activity_date": 1521071985, "creation_date": 1520433556, "last_edit_date": 1520936889, "question_id": 49154522, "link": "https://stackoverflow.com/questions/49154522/socket-read-timeout-under-windows-strange-hardcode-in-native-method", "title": "Socket read timeout under windows: strange hardcode in native method", "body": "<p>I was trying to grasp how socket read timeout is processed in native code and found some strange hardcoded value of 5000 milliseconds there:</p>\n\n<pre><code>if (timeout) {\n    if (timeout &lt;= 5000 || !isRcvTimeoutSupported) {\n        int ret = NET_Timeout (fd, timeout);\n        .....\n        .....\n    }\n}\n</code></pre>\n\n<p>Source: <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/windows/native/java/net/SocketInputStream.c\" rel=\"noreferrer\">http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/windows/native/java/net/SocketInputStream.c</a></p>\n\n<p>As I can see, the variable isRcvTimeoutSupported is generally set to true, but could be dropped to false when setting socket options: </p>\n\n<pre><code>    /*\n     * SO_RCVTIMEO is only supported on Microsoft's implementation\n     * of Windows Sockets so if WSAENOPROTOOPT returned then\n     * reset flag and timeout will be implemented using\n     * select() -- see SocketInputStream.socketRead.\n     */\n\n    if (isRcvTimeoutSupported) {\n        jclass iCls = (*env)-&gt;FindClass(env, \"java/lang/Integer\");\n        jfieldID i_valueID;\n        jint timeout;\n\n        CHECK_NULL(iCls);\n        i_valueID = (*env)-&gt;GetFieldID(env, iCls, \"value\", \"I\");\n        CHECK_NULL(i_valueID);\n        timeout = (*env)-&gt;GetIntField(env, value, i_valueID);\n\n        /*\n         * Disable SO_RCVTIMEO if timeout is &lt;= 5 second.\n         */\n\n        if (timeout &lt;= 5000) {\n            timeout = 0;\n        }\n\n\n        if (setsockopt(fd, SOL_SOCKET, SO_RCVTIMEO, (char *)&amp;timeout,\n            sizeof(timeout)) &lt; 0) {\n\n            if (WSAGetLastError() == WSAENOPROTOOPT) {\n                isRcvTimeoutSupported = JNI_FALSE;\n            } else {\n                NET_ThrowCurrent(env, \"setsockopt SO_RCVTIMEO\");\n            }\n\n        }\n        ......\n        ......\n    }\n</code></pre>\n\n<p>Source: <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/windows/native/java/net/TwoStacksPlainSocketImpl.c\" rel=\"noreferrer\">http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/windows/native/java/net/TwoStacksPlainSocketImpl.c</a></p>\n\n<p>While I'm not quite sure, it looks like read timeout is supposed to be set through socket options when higher than 5 seconds and through NET_Timeout if less or equal to 5 seconds. Is it correct?</p>\n\n<p>And anyway, where these hardcoded 5 seconds come from?<br>\nI do not see any explanation on MSDN.</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1520433536, "post_id": 49154483, "comment_id": 85313439, "body": "<code>a &lt; 10 , b &lt; 6</code> is equivalent to <code>b &lt; 6</code>. Did you mean <code>a &lt; 10 &amp;&amp; b &lt; 6</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520433543, "post_id": 49154483, "comment_id": 85313444, "body": "<code>a &lt; 10 , b &lt; 6</code> =&gt; <code>a &lt; 10 &amp;&amp; b &lt; 6</code> else you&#39;re just testing <code>b</code> but since variables are incremented at the same time, what&#39;s the point?"}, {"owner": {"reputation": 2708, "user_id": 6355028, "user_type": "registered", "accept_rate": 53, "profile_image": "https://lh3.googleusercontent.com/-f4WLW09LwQQ/AAAAAAAAAAI/AAAAAAAAAAs/_Dr0m4f7_UU/photo.jpg?sz=128", "display_name": "yajiv", "link": "https://stackoverflow.com/users/6355028/yajiv"}, "edited": false, "score": 0, "creation_date": 1520433554, "post_id": 49154483, "comment_id": 85313453, "body": "it is working correctly, what error you are getting.?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520433586, "post_id": 49154483, "comment_id": 85313475, "body": "@Jean-Fran&#231;oisFabre - I think you need to check the comma operator"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1520433619, "post_id": 49154483, "comment_id": 85313499, "body": "@EdHeal I didn&#39;t imply that it&#39;s equivalent. I meant that to check both conditions you need <code>&amp;&amp;</code> not <code>,</code>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1520433620, "post_id": 49154483, "comment_id": 85313500, "body": "And coincidentally changing this particular condition from <code>a &lt; 10, b &lt; 6</code> to <code>a &lt; 10 &amp;&amp; b &lt; 6</code> will result in the exact same output. Since they both increase linearly from 1."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520433750, "post_id": 49154483, "comment_id": 85313581, "body": "@Jean-Fran&#231;oisFabre My fault thinking that <code>=&gt;</code> means implies.- Perhaps I should read this again <a href=\"https://en.wikipedia.org/wiki/List_of_logic_symbols\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/List_of_logic_symbols</a>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1520434706, "post_id": 49154483, "comment_id": 85314240, "body": "@EdHeal: don&#39;t sweat this too much"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520434961, "post_id": 49154483, "comment_id": 85314443, "body": "@Jean-Fran&#231;oisFabre - I try not too. But the symbold <code>=&gt;</code> is implies"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1520435255, "post_id": 49154483, "comment_id": 85314679, "body": "@EdHeal Yes, but only if you think in context of logic symbols. Arrows of any style and shape are frequently used to indicate the way something needs to be changed."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1520435610, "post_id": 49154483, "comment_id": 85314969, "body": "Perhaps <code>-&gt;</code> would be better?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1520438059, "post_id": 49154483, "comment_id": 85316833, "body": "Although perfectly possible, it is generally not recommended to use several iterators in the same for loop because it makes the code much harder to read. The single loop iterator should be the one used for accessing/calculating the &quot;thing&quot; you are iterating across. Any additional incrementing variables such as counters actually don&#39;t have anything to do with the loop itself and are better kept away from the 3 controlling expressions of the for loop."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "edited": false, "score": 0, "creation_date": 1520434832, "post_id": 49154533, "comment_id": 85314348, "body": "thanks a ton! but Can my condition here be &quot;a &lt; 10 &amp;&amp; b &lt; 6&quot; if I would like to have a = 1 - 9 ( a=1, a=2.. ) and b = 1- 5( b= 1, b=2..) as result?"}], "tags": [], "owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "is_accepted": true, "score": 4, "last_activity_date": 1520434877, "last_edit_date": 1520434877, "creation_date": 1520433591, "answer_id": 49154533, "question_id": 49154483, "link": "https://stackoverflow.com/questions/49154483/for-loop-for-2-variables/49154533#49154533", "title": "For loop for 2 variables", "body": "<blockquote>\n  <p>Is there a reason this doesnt work? or am I just doing it wrong?</p>\n</blockquote>\n\n<p>It does work, but not in the way you anticipated:</p>\n\n<p><code>a &lt; 10 , b &lt; 6</code> evaluates <code>a &lt; 10</code> and then <code>b &lt; 6</code> but it's the result of <code>b &lt; 6</code> that gets returned. So your loop will only go to 5.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">Comma oparator (wikipedia)</a></p>\n\n<p>Let me explain how a for loop works:</p>\n\n<p>You have three 'segments', all of which are <em>optional</em>:</p>\n\n<ul>\n<li><code>initialisation</code> this part is run <strong>once</strong> before the loop starts.</li>\n<li><code>condition</code> this part is evaluated <em>before</em> every iteration, if this <code>condition</code> evaluates to <strong>false</strong> the loop exits.</li>\n<li><code>increment</code> is executed after <strong>every</strong> iteration.</li>\n</ul>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>for ( initialisation ; condition ; increment ) {\n     /* body of the for loop */\n}\n</code></pre>\n\n<p>You can achieve the same semantics with a <code>while</code> loop:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>initialisation;\n\nwhile (condition) {\n    /* body of the for loop */\n    increment;\n}\n</code></pre>\n\n<p>So for example:</p>\n\n<p><code>for (;1;)</code> will never exit and <code>for (;0;)</code> will never run.</p>\n\n<p>To achieve the desired behaviour you could do:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>//1-9, and values of \"b\" which are 1-5\nint a, b;\n\nfor (a = 1, b = 1; a &lt;= 9; ++a, (b &lt;= 4 ? ++b : 0)) {\n    printf(\"a: %d\\n\", a);\n    printf(\"b: %d\\n\", b);\n\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>But you are better off doing this <strong>inside</strong> the for loop:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int a, b;\n\n// This reads much better\nfor (a = 1, b = 1; a &lt;= 9; ++a) {\n    printf(\"a: %d\\n\", a);\n    printf(\"b: %d\\n\", b);\n\n    printf(\"\\n\");\n\n    if (b &lt;= 4) {\n        ++b;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "edited": false, "score": 0, "creation_date": 1520434449, "post_id": 49154570, "comment_id": 85314046, "body": "I added an &quot;&amp;&amp;&quot; instead of my &quot;,&quot;  in my &quot;a &lt; 10 , b &lt; 6&quot; part but it still only evaluates my &quot;b &lt; 6&quot; condition. I would like it to print for me values of &quot;a&quot; that are 1-9, and values of &quot;b&quot; which are 1-5. Did I go about this wrong?  thanks for the replies!"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "edited": false, "score": 0, "creation_date": 1520437195, "post_id": 49154570, "comment_id": 85316211, "body": "@skdadle: well, yeah, <code>a &lt; 10 &amp;&amp; b &lt; 6</code> will evaluate to <code>false</code> as soon as <code>b</code> reaches 6, which happens before <code>a</code> reaches 10.  Based on your description, you want something like this:  <code>for ( a = 1, b = 1; a &lt; 10; a++, b++ ) { printf( &quot;a: %d\\n&quot;, a ); if ( b &lt; 6 ) printf( &quot;b: %d\\n&quot;, b ); }</code>.  Basically, you&#39;re looping and printing <code>a</code> while it&#39;s less than 10, but only printing <code>b</code> while it&#39;s less than 6."}], "tags": [], "owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "is_accepted": false, "score": 2, "last_activity_date": 1520433713, "creation_date": 1520433713, "answer_id": 49154570, "question_id": 49154483, "link": "https://stackoverflow.com/questions/49154483/for-loop-for-2-variables/49154570#49154570", "title": "For loop for 2 variables", "body": "<p>This almost works, however your stop condition is wrong.  It will need to be something like <code>a &lt; 10 &amp;&amp; b &lt; 6</code> or similar, depending on what you want.</p>\n\n<p>The reason for this is due to the behavior of the <a href=\"https://stackoverflow.com/questions/54142/how-does-the-comma-operator-work\">comma operator</a>: only the right statement of the comma will be returned.  So your loop will only stop when <code>b &lt; 6</code>, ignoring your <code>a &lt; 10</code> condition.  The other two pieces of the loop don't rely on a value being returned, so they don't have this problem.</p>\n"}], "owner": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 49154533, "answer_count": 2, "score": 1, "last_activity_date": 1520434877, "creation_date": 1520433416, "question_id": 49154483, "link": "https://stackoverflow.com/questions/49154483/for-loop-for-2-variables", "title": "For loop for 2 variables", "body": "<p>I recently started learning C and I feel like this is a not so smart question but, I was wondering if you could take 2 variables, initialize them, evaluate their conditions and increment them in 1 for loop</p>\n\n<p>say I have 2 ints: a and b and I would like to initialize both of them and increment them. </p>\n\n<pre><code>for(a=1, b= 1; a &lt; 10 , b &lt; 6; a++, b++)\n{\n    printf(\"a= %d\\n\", a);\n    printf(\"/tb= %d\\n\", b);\n}\n</code></pre>\n\n<p>Is there a reason this doesnt work? \nor am I just doing it wrong? </p>\n\n<p>I've looked at <a href=\"https://stackoverflow.com/questions/1232176/how-do-i-put-two-increment-statements-in-a-c-for-loop\">this question</a> but in it he/she only wants to increment 2 variables whereas I would like to apply everything for both of my variables </p>\n"}, {"tags": ["python", "c", "jinja2", "template-meta-programming", "mako"], "comments": [{"owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1520446390, "post_id": 49153647, "comment_id": 85322219, "body": "This is perhaps not exactly what you are looking for, but you know that you can change the tags in <code>jinja2</code> right? Look at <a href=\"http://jinja.pocoo.org/docs/2.10/api/#high-level-api\" rel=\"nofollow noreferrer\">jinja.pocoo.org/docs/2.10/api/#high-level-api</a> There it is shown how to change e.g. the <code>block_start_sting</code> and all other tags."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1520448035, "post_id": 49153647, "comment_id": 85323187, "body": "Yes I know that, but mako as several advantages: there is a builtin mako-render command line interface and you can execute python code directly from the template, which is not possible in jinja"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3780, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1520430928, "creation_date": 1520430928, "question_id": 49153647, "link": "https://stackoverflow.com/questions/49153647/how-to-generate-c-code-from-python", "title": "How to generate C code from Python?", "body": "<p>I am writing an embedded algorithm. Currently I have lookup tables that are hard-coded: </p>\n\n<pre><code>static const int32_t sine[65536] = {\n    ...\n}\n</code></pre>\n\n<p>The algorithm should be portable on different platforms but, the lookup table length changes depending on the configuration and on the destination platform. </p>\n\n<p>My current solution uses mako-render (Mako is much faster than Jinja2) as follow: </p>\n\n<pre><code>&lt;%!\nimport os\nimport algo  # Local module that contains tools to generate coefs.\nfrom numpy import sin, linspace, pi\n\na, b, c, d, e = algo.coefficients(os.environ['ALGO_MODE'])\n%&gt;\n\nstatic inline float poly(float x)\n{\n    return x * ( x * ( x * ( x * ${a} + ${b}) + ${c}) + ${d}) + ${e};\n}\n\nfloat sine[] = {\n% for y in sin(linspace(0, 2 * pi, 2 ** 16)):\n    ${y},\n% endfor\n};\n</code></pre>\n\n<p>In my Makefile I use this: </p>\n\n<pre><code>in: $(IN)\n$(IN): build/headers/%: src/%.in\n    mkdir -p $(dir $@)\n    PYTHONPATH=.:$$PYTHONPATH mako-render $&lt; &gt; $@ || true\n</code></pre>\n\n<p>I like this solution because I can easily generate C code from Python results: </p>\n\n<ul>\n<li>Filter coefficients</li>\n<li>Lookup tables</li>\n<li>Dynamic types</li>\n<li>...</li>\n</ul>\n\n<p>The main drawbacks are: </p>\n\n<ul>\n<li>None of the template engine I have found works well with C code\n\n<ul>\n<li>Jinja has a syntax with a lot of curly braces, confusing in C</li>\n<li>Mako has a weird hybrid syntax mix xml (<code>&lt;% %&gt;</code>), shell (<code>${}</code>), mako (<code>%</code>).</li>\n</ul></li>\n<li>Using the <code>.in</code> extension for my template could be confusing because this extension is already used by autotools and CMake. </li>\n</ul>\n\n<p>Meta-programming / Code generation are something becoming very popular and in my field of work I almost need to use such magic everyday. I am surprised that no other native solutions as old as <code>grep</code> exist (please don't mention M4 :)). </p>\n\n<p>What other solution can I use to populate C <em>templates</em> with data generated from an external script? Am I missing any real magic here?</p>\n"}, {"tags": ["c", "assembly", "binaryfiles", "instructions"], "comments": [{"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 3, "creation_date": 1520432728, "post_id": 49153556, "comment_id": 85312880, "body": "Using a framework that performs disassembly probably would be the easiest path.   I would recommend capstone (<a href=\"http://www.capstone-engine.org/\" rel=\"nofollow noreferrer\">capstone-engine.org</a>), it is easy to use, understands multiple file formats and is usable on multiple platforms."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520435462, "post_id": 49153556, "comment_id": 85314851, "body": "it is just a file, you can read it like any other file.  main the label/symbol means nothing to the processor, so you have to have a file format as you have above that contains symbols and their offsets in the file/memory space.  Parse through that based on the file format then find that offset/address in the loadable binary portion of the file and there are your bytes.  just a matter of doing your research"}, {"owner": {"reputation": 305, "user_id": 6136143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b63d5cd332b2cfb3ad224c082ffca0?s=128&d=identicon&r=PG&f=1", "display_name": "Topper Harley", "link": "https://stackoverflow.com/users/6136143/topper-harley"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520437429, "post_id": 49153556, "comment_id": 85316374, "body": "@old_timer I know how to read binary file and parse ELF headers. My problem is, that I need to read a number of <i>whole</i> instructions on an architecture with a variable instruction length."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520446809, "post_id": 49153556, "comment_id": 85322437, "body": "that is a completely different question, for which neither the answer you checked nor the answer i just added are relevant."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520446853, "post_id": 49153556, "comment_id": 85322467, "body": "you have to disassemble, and it has to be in execution order if you want to have some chance of success."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520447111, "post_id": 49153556, "comment_id": 85322629, "body": "as your example shows you start at a known to be good entry point, we see 0x55 you look that up, disassemble it as a single byte instruction, see the next opcode, that may require examining the next byte or few, and from there you can determine how big that instruction,when you hit a conditional branch make a note of that address if possible, when you hit an unconditional stop that disassembly there, and go back and follow any unresolved code fragments based on branch destinations.  repeat until done, assume the rest is either data or code but you cant tell."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 2, "creation_date": 1520447279, "post_id": 49153556, "comment_id": 85322734, "body": "when I write a disassembler for instruction sets like this I have a matching table for every byte, and as I go through I mark the byte as start of an instruction or part of an instruction but not the start, if a branch destination then later lands in the middle of an instruction, declare an error and dont add that to the list.  For todays compiler generate code this is rarely a problem but disassemble some old rom (standup arcade game) or someone who intentionally doesnt want you to disassemble and you can fall into this issue."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520478249, "post_id": 49153556, "comment_id": 85334850, "body": "@old_timer: modern x86 is so convoluted that even that isn&#39;t sufficient.  In 32-bit mode, C4 and C5 could be the opcode for LDS or LES, or they could be the first byte of a VEX prefix for an AVX instruction.  You have to check some bits in the ModR/M byte to tell the difference.  (<a href=\"https://software.intel.com/en-us/articles/introduction-to-intel-advanced-vector-extensions#comment-1919527\" rel=\"nofollow noreferrer\">software.intel.com/en-us/articles/&hellip;</a>)"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520482527, "post_id": 49153556, "comment_id": 85335900, "body": "@PeterCordes certainly, assuming you know what mode/variant/add-ons, etc, THEN you have to go execution order.  The processor certainly isnt confused when it hits one of these opcodes, nor should the disassembler be.  So long as you are parsing using the instruction set/mode/whatever_other_term_you_prefer that matches the code."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520491758, "post_id": 49153556, "comment_id": 85339145, "body": "@PeterCordes the first instructions shouldn&#39;t be an issue, though. but yes, the only way to properly disassemble is &quot;formal execution&quot;, else you can mistake data for code... annoying issue for years in my retrogaming/retrocomputing area :)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520492189, "post_id": 49153556, "comment_id": 85339378, "body": "@old_timer: I meant that a table lookup based on bytes isn&#39;t sufficient.  The same leading byte can mean different things depending on following bits.  But you already need to decode the ModR/M to find instruction lengths, so maybe my point wasn&#39;t as interesting as I thought."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520514083, "post_id": 49153556, "comment_id": 85352337, "body": "@PeterCordes which is why I said after looking at the opcode you have to examine the next byte or few, cant tell with x86 from just the first byte.  Can be from one to N number of bytes before a specific instruction becomes clear and you know how many more bytes after are immediate if any, one to n bytes before you know the full length of the instruction."}], "answers": [{"comments": [{"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 4, "creation_date": 1520431226, "post_id": 49153656, "comment_id": 85311853, "body": "Why the downvote? It looks like the right answer to the OP&#39;s question..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1520431450, "post_id": 49153656, "comment_id": 85312010, "body": "@andreee it partially answer, as I now see, because OP needs the 3 first instructions. An answer like this would need a table to get the size of the instructions. I&#39;m <i>not</i> doing this :)"}, {"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1520431813, "post_id": 49153656, "comment_id": 85312277, "body": "Okay, agreed :-) A rationale from the downvoter would have been helpful though."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 1, "creation_date": 1520432215, "post_id": 49153656, "comment_id": 85312540, "body": "Yes, but people are afraid of revenge downvotes. Not from me anyway!! After editing my answer, I feel I&#39;m fully answering. Finding an instruction size table for OP CPU is off-topic."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520435353, "post_id": 49153656, "comment_id": 85314750, "body": "variable instruction length like x86 you really have to disassemble in execution order, not linearly through memory, adding to your comment, not contradicting it."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520435383, "post_id": 49153656, "comment_id": 85314783, "body": "the OP said to read bytes from a file, not runtime from memory."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520436316, "post_id": 49153656, "comment_id": 85315543, "body": "@old_timer: &quot;is there a way to read given amount of instructions from a binary executable file on x86 architecture programmatically?&quot; yes, I supposed that you could hack into the executable you want to read to. If you cannot why not using <code>objdump</code> then?"}, {"owner": {"reputation": 305, "user_id": 6136143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b63d5cd332b2cfb3ad224c082ffca0?s=128&d=identicon&r=PG&f=1", "display_name": "Topper Harley", "link": "https://stackoverflow.com/users/6136143/topper-harley"}, "edited": false, "score": 0, "creation_date": 1520436393, "post_id": 49153656, "comment_id": 85315602, "body": "Thank you very much. I&#39;ll try the way with the table. I asked this question because I wondered whether there was a library to help me with this (like there is a library <code>elf.h</code> for parsing ELF files), but it seems there&#39;s not."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520445535, "post_id": 49153656, "comment_id": 85321718, "body": "@Jean-Fran&#231;oisFabre  good question, but the OP but that is what the op was asking if it is possible, certainly is and there happens to be tools to do it...why they didnt want to use the tool, dont know...not hacking in any way, its a file format you read the format.  just like a jpg or .wav or mpg or whatever...just a file."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 305, "user_id": 6136143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b63d5cd332b2cfb3ad224c082ffca0?s=128&d=identicon&r=PG&f=1", "display_name": "Topper Harley", "link": "https://stackoverflow.com/users/6136143/topper-harley"}, "edited": false, "score": 0, "creation_date": 1520449278, "post_id": 49153656, "comment_id": 85323911, "body": "@TopperHarley maybe there are but they&#39;re architecture-dependent and probably not very easy to build (I tried to build a compiler toolchain once, only half succeeded, but it took me 3 days with a zillion packages to download, configure &amp; compile). I wouldn&#39;t bother with that, and would use <code>objdump</code> + some post-processing."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520467022, "post_id": 49153656, "comment_id": 85332067, "body": "Note that ISO C doesn&#39;t guarantee this is portable.  A Harvard architecture might have a different address space for function pointers vs. data pointers.  IIRC, the standard doesn&#39;t talk about functions as objects having an object representation.  It does of course work in normal cases on normal architectures.  <b>See <a href=\"https://stackoverflow.com/questions/49022765/c-how-to-read-first-couple-bytes-of-function-32-bit-machine/49022975#49022975\">C++ How To Read First Couple Bytes Of Function? (32 bit Machine)</a> and comments on that for discussion of the caveats.</b>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520491287, "post_id": 49153656, "comment_id": 85338945, "body": "@PeterCordes interesting. this slightly looks like a duplicate of that one too..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520491446, "post_id": 49153656, "comment_id": 85339009, "body": "The answers should maybe be swapped, because the other one just wants to read bytes, but this one wants a number of instructions.  I gave up without deciding to close either as a dup of the other, because it&#39;s a bit of a mess."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 7, "last_activity_date": 1520431718, "last_edit_date": 1520431718, "creation_date": 1520430946, "answer_id": 49153656, "question_id": 49153556, "link": "https://stackoverflow.com/questions/49153556/how-to-read-binary-executable-by-instructions/49153656#49153656", "title": "How to read binary executable by instructions?", "body": "<p>this prints the 10 first bytes of the <code>main</code> function by taking the address of the function and converting to a pointer of <code>unsigned char</code>, print in hex.</p>\n\n<p>This small snippet doesn't count the instructions. For this you would need an instruction size table (not very difficult, just tedious unless you find the table already done, <a href=\"https://stackoverflow.com/questions/1399861/what-is-the-size-of-each-asm-instruction\">What is the size of each asm instruction?</a>) to be able to predict the size of each instruction given the first byte.</p>\n\n<p>(unless of course, the processor you're targetting has a fixed instruction size, which makes the problem trivial to solve)</p>\n\n<p>Debuggers have to decode operands as well, but in some cases like step or trace, I suspect they have a table handy to compute the next breakpoint address.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    printf(\"Hello world\\n\");\n    const unsigned char *start = (const char *)&amp;main;\n    int i;\n    for (i=0;i&lt;10;i++)\n    {\n       printf(\"%x\\n\",start[i]);\n    }    \n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Hello world\n55\n89\ne5\n83\ne4\nf0\n83\nec\n20\ne8\n</code></pre>\n\n<p>seems to match the disassembly :)</p>\n\n<pre><code>00401630 &lt;_main&gt;:\n  401630:   55                      push   %ebp\n  401631:   89 e5                   mov    %esp,%ebp\n  401633:   83 e4 f0                and    $0xfffffff0,%esp\n  401636:   83 ec 20                sub    $0x20,%esp\n  401639:   e8 a2 01 00 00          call   4017e0 &lt;___main&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1520447186, "post_id": 49158771, "comment_id": 85322678, "body": "sorry this question was not about offsets or labels it was about dissassembly...for fixed length like these 32 bit arm instructions you can linearly disassemble, but for variable length even thumb with thumb2 extensions you have to go in EXECUTION order, not linear address order, making many/multiple paths."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 1, "last_activity_date": 1520446770, "creation_date": 1520446770, "answer_id": 49158771, "question_id": 49153556, "link": "https://stackoverflow.com/questions/49153556/how-to-read-binary-executable-by-instructions/49158771#49158771", "title": "How to read binary executable by instructions?", "body": "<pre><code>.globl _start\n_start:\n    bl main\n    b .\n\n.globl main\nmain:\n    add r1,#1\n    add r2,#1\n    add r3,#1\n    add r4,#1\n    b main\n</code></pre>\n\n<p>intentionally wrong architecture, architecture doesnt matter file format matters.  built this into an elf file format, which is very popular, and is simply a file format which is what I understood your question to be, to read a file, not modify the binary to read the program runtime from memory.</p>\n\n<p>it is very much popular and there are tools that do it which you appear to know how to run.</p>\n\n<pre><code>Disassembly of section .text:\n\n00001000 &lt;_start&gt;:\n    1000:   eb000000    bl  1008 &lt;main&gt;\n    1004:   eafffffe    b   1004 &lt;_start+0x4&gt;\n\n00001008 &lt;main&gt;:\n    1008:   e2811001    add r1, r1, #1\n    100c:   e2822001    add r2, r2, #1\n    1010:   e2833001    add r3, r3, #1\n    1014:   e2844001    add r4, r4, #1\n    1018:   eafffffa    b   1008 &lt;main&gt;\n</code></pre>\n\n<p>if I hexdump the file though</p>\n\n<pre><code>00000000  7f 45 4c 46 01 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|\n00000010  02 00 28 00 01 00 00 00  00 10 00 00 34 00 00 00  |..(.........4...|\n00000020  c0 11 00 00 00 02 00 05  34 00 20 00 01 00 28 00  |........4. ...(.|\n00000030  06 00 05 00 01 00 00 00  00 00 00 00 00 00 00 00  |................|\n00000040  00 00 00 00 1c 10 00 00  1c 10 00 00 05 00 00 00  |................|\n00000050  00 00 01 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|\n00000060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|\n*\n00001000  00 00 00 eb fe ff ff ea  01 10 81 e2 01 20 82 e2  |............. ..|\n00001010  01 30 83 e2 01 40 84 e2  fa ff ff ea 41 11 00 00  |.0...@......A...|\n00001020  00 61 65 61 62 69 00 01  07 00 00 00 08 01 00 00  |.aeabi..........|\n00001030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|\n00001040  00 00 00 00 00 10 00 00  00 00 00 00 03 00 01 00  |................|\n00001050  00 00 00 00 00 00 00 00  00 00 00 00 03 00 02 00  |................|\n00001060  01 00 00 00 00 00 00 00  00 00 00 00 04 00 f1 ff  |................|\n00001070  06 00 00 00 00 10 00 00  00 00 00 00 00 00 01 00  |................|\n00001080  18 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |................|\n00001090  09 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |................|\n000010a0  17 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |................|\n000010b0  55 00 00 00 00 10 00 00  00 00 00 00 10 00 01 00  |U...............|\n000010c0  23 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |#...............|\n000010d0  2f 00 00 00 08 10 00 00  00 00 00 00 10 00 01 00  |/...............|\n000010e0  34 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |4...............|\n000010f0  3c 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |&lt;...............|\n00001100  43 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |C...............|\n00001110  48 00 00 00 00 00 08 00  00 00 00 00 10 00 01 00  |H...............|\n00001120  4f 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |O...............|\n00001130  00 73 6f 2e 6f 00 24 61  00 5f 5f 62 73 73 5f 73  |.so.o.$a.__bss_s|\n00001140  74 61 72 74 5f 5f 00 5f  5f 62 73 73 5f 65 6e 64  |tart__.__bss_end|\n00001150  5f 5f 00 5f 5f 62 73 73  5f 73 74 61 72 74 00 6d  |__.__bss_start.m|\n00001160  61 69 6e 00 5f 5f 65 6e  64 5f 5f 00 5f 65 64 61  |ain.__end__._eda|\n00001170  74 61 00 5f 65 6e 64 00  5f 73 74 61 63 6b 00 5f  |ta._end._stack._|\n00001180  5f 64 61 74 61 5f 73 74  61 72 74 00 00 2e 73 79  |_data_start...sy|\n00001190  6d 74 61 62 00 2e 73 74  72 74 61 62 00 2e 73 68  |mtab..strtab..sh|\n000011a0  73 74 72 74 61 62 00 2e  74 65 78 74 00 2e 41 52  |strtab..text..AR|\n000011b0  4d 2e 61 74 74 72 69 62  75 74 65 73 00 00 00 00  |M.attributes....|\n000011c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|\n*\n000011e0  00 00 00 00 00 00 00 00  1b 00 00 00 01 00 00 00  |................|\n000011f0  06 00 00 00 00 10 00 00  00 10 00 00 1c 00 00 00  |................|\n00001200  00 00 00 00 00 00 00 00  04 00 00 00 00 00 00 00  |................|\n00001210  21 00 00 00 03 00 00 70  00 00 00 00 00 00 00 00  |!......p........|\n00001220  1c 10 00 00 12 00 00 00  00 00 00 00 00 00 00 00  |................|\n00001230  01 00 00 00 00 00 00 00  01 00 00 00 02 00 00 00  |................|\n00001240  00 00 00 00 00 00 00 00  30 10 00 00 00 01 00 00  |........0.......|\n00001250  04 00 00 00 05 00 00 00  04 00 00 00 10 00 00 00  |................|\n00001260  09 00 00 00 03 00 00 00  00 00 00 00 00 00 00 00  |................|\n00001270  30 11 00 00 5c 00 00 00  00 00 00 00 00 00 00 00  |0...\\...........|\n00001280  01 00 00 00 00 00 00 00  11 00 00 00 03 00 00 00  |................|\n00001290  00 00 00 00 00 00 00 00  8c 11 00 00 31 00 00 00  |............1...|\n000012a0  00 00 00 00 00 00 00 00  01 00 00 00 00 00 00 00  |................|\n000012b0\n</code></pre>\n\n<p>can google the file format and find a lot of info at wikipedia, with a smidge more at one of the links</p>\n\n<p>useful header information</p>\n\n<pre><code>00 10 00 00 entrh\n34 00 00 00 phoff\nc0 11 00 00 shoff\n00 02 00 05 flags\n34 00 ehsize\n20 00 phentsize\n01 00 phnum\n28 00 shentsize\n06 00 shnum\n05 00shstrndx\n</code></pre>\n\n<p>so if I look at the beginning of the sections there are shnum number of them</p>\n\n<pre><code>0x11C0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n0x11E8 1b 00 00 00 01 00 00 00 06 00 00 00 00 10 00 00 00 10 00 00\n0x1210 21 00 00 00 03 00 00 70 00 00 00 00 00 00 00 00 1c 10 00 00\n0x1238 01 00 00 00 02 00 00 00 00 00 00 00 00 00 00 00 30 10 00 00\n0x1260 09 00 00 00 03 00 00 00 00 00 00 00 00 00 00 00 30 11 00 00\n0x1288 11 00 00 00 03 00 00 00 00 00 00 00 00 00 00 00 8c 11 00 00\n</code></pre>\n\n<p>0x1260 strtab type offset 0x1130 which is broken into null terminated strings until you hit a double null</p>\n\n<pre><code>[0] 00\n[1] 73 6f 2e 6f 00 so.o\n[2] 24 61 00 $a\n[3] 5f 5f 62 73 73 5f 73 74 61 72 74 5f 5f 00 __bss_start__\n[4] 5f 5f 62 73 73 5f 65 6e 64 5f 5f 00 __bss_end__\n[5] 5f 5f 62 73 73  5f 73 74 61 72 74 00 __bss_start\n[6] 6d 61 69 6e 00 main\n...\n</code></pre>\n\n<p>main is at address 0x115F in the file which is offset 0x2F in the\nstrtab.</p>\n\n<p>0x1238 symtab starts at 0x1030, 0x10 or 16 bytes per entry</p>\n\n<pre><code>00001030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|\n00001040  00 00 00 00 00 10 00 00  00 00 00 00 03 00 01 00  |................|\n00001050  00 00 00 00 00 00 00 00  00 00 00 00 03 00 02 00  |................|\n00001060  01 00 00 00 00 00 00 00  00 00 00 00 04 00 f1 ff  |................|\n00001070  06 00 00 00 00 10 00 00  00 00 00 00 00 00 01 00  |................|\n00001080  18 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |................|\n00001090  09 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |................|\n000010a0  17 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |................|\n000010b0  55 00 00 00 00 10 00 00  00 00 00 00 10 00 01 00  |U...............|\n000010c0  23 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |#...............|\n000010d0  2f 00 00 00 08 10 00 00  00 00 00 00 10 00 01 00  |/...............|\n000010e0  34 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |4...............|\n000010f0  3c 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |&lt;...............|\n00001100  43 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |C...............|\n00001110  48 00 00 00 00 00 08 00  00 00 00 00 10 00 01 00  |H...............|\n00001120  4f 00 00 00 1c 10 01 00  00 00 00 00 10 00 01 00  |O...............|\n</code></pre>\n\n<p>000010d0  2f 00 00 00 has the 0x2f offset in the symbol table\nso this is main, from this entry the address 08 10 00 00  or 0x1008 in\nthe processors memory, unfortunately due to the values I chose it happens to also be the file offset, dont get that confused.</p>\n\n<p>this section is type 00000001 PROGBITS</p>\n\n<pre><code>0x11E8 1b 00 00 00 01 00 00 00 06 00 00 00 00 10 00 00 00 10 00 00\noffset 0x1000 in the file 0x1C bytes\n</code></pre>\n\n<p>here is the program, the machine code.</p>\n\n<pre><code>00001000  00 00 00 eb fe ff ff ea  01 10 81 e2 01 20 82 e2\n00001010  01 30 83 e2 01 40 84 e2  fa ff ff ea 41 11\n</code></pre>\n\n<p>so starting at memory offset 0x1008 which is 8 bytes after the\nentry point (unfortunately I picked a bad address to use) we need to\ngo 0x8 bytes offset into this data</p>\n\n<pre><code>01 10 81 e2 01 20 82 e2\n\n00001008 &lt;main&gt;:\n    1008:   e2811001    add r1, r1, #1\n    100c:   e2822001    add r2, r2, #1\n    1010:   e2833001    add r3, r3, #1\n</code></pre>\n\n<p>this is all very file dependent, the cpu could care less about labels, main only means something to the humans, not the cpu.</p>\n\n<p>If I convert the elf into other formats which are perfectly executable:</p>\n\n<p>motorola s record:</p>\n\n<pre><code>S00A0000736F2E7372656338\nS1131000000000EBFEFFFFEA011081E2012082E212\nS10F1010013083E2014084E2FAFFFFEAB1\nS9031000EC\n</code></pre>\n\n<p>raw binary image</p>\n\n<pre><code>hexdump -C so.bin\n00000000  00 00 00 eb fe ff ff ea  01 10 81 e2 01 20 82 e2  |............. ..|\n00000010  01 30 83 e2 01 40 84 e2  fa ff ff ea              |.0...@......|\n0000001c\n</code></pre>\n\n<p>The instruction bytes of interest are of course there, but the symbol information isnt.  It depends on the file format you are interested in as to 1) if you can find \"main\" and then 2) print out the first few bytes at that address.</p>\n\n<p>Hmm, a bit disturbing, but if you link for 0x2000 gnu ld burns some disk space and puts the offset at 0x2000, but choose 0x20000000 and it burns more disk space but not as much</p>\n\n<pre><code>000100d0  2f 00 00 00 08 00 00 20  00 00 00 00 10 00 01 00 \n</code></pre>\n\n<p>shows the file offset is 0x010010 but the address in target space is 0x20000008  </p>\n\n<pre><code>00010010  01 30 83 e2 01 40 84 e2  fa ff ff ea 41 11 00 00\n00010020  00 61 65 61 62 69 00 01  07 00 00 00 08 01\n</code></pre>\n\n<p>just to demonstrate/enforce the file offset and the target memory space address are two different things.</p>\n\n<p>this is a very nice format for what you are wanting to do</p>\n\n<pre><code>arm-none-eabi-objcopy -O symbolsrec so.elf so.srec\ncat so.srec\n$$ so.srec\n  $a $20000000\n  _bss_end__ $2001001c\n  __bss_start__ $2001001c\n  __bss_end__ $2001001c\n  _start $20000000\n  __bss_start $2001001c\n  main $20000008\n  __end__ $2001001c\n  _edata $2001001c\n  _end $2001001c\n  _stack $80000\n  __data_start $2001001c\n$$ \nS0090000736F2E686578A1\nS31520000000000000EBFEFFFFEA011081E2012082E200\nS31120000010013083E2014084E2FAFFFFEA9F\nS70520000000DA\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 6136143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b63d5cd332b2cfb3ad224c082ffca0?s=128&d=identicon&r=PG&f=1", "display_name": "Topper Harley", "link": "https://stackoverflow.com/users/6136143/topper-harley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "accepted_answer_id": 49153656, "answer_count": 2, "score": 1, "last_activity_date": 1520446770, "creation_date": 1520430647, "last_edit_date": 1520431272, "question_id": 49153556, "link": "https://stackoverflow.com/questions/49153556/how-to-read-binary-executable-by-instructions", "title": "How to read binary executable by instructions?", "body": "<p>is there a way to read given amount of instructions from a binary executable file on x86 architecture programmatically?</p>\n\n<p>If I had a binary of a simple C program <code>hello.c</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    printf(\"Hello world\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Where after compilation using <code>gcc</code>, the disassembled function <code>main</code> looks like this:</p>\n\n<pre><code>000000000000063a &lt;main&gt;:\n 63a:   55                      push   %rbp\n 63b:   48 89 e5                mov    %rsp,%rbp\n 63e:   48 8d 3d 9f 00 00 00    lea    0x9f(%rip),%rdi        # 6e4 &lt;_IO_stdin_used+0x4&gt;\n 645:   e8 c6 fe ff ff          callq  510 &lt;puts@plt&gt;\n 64a:   b8 00 00 00 00          mov    $0x0,%eax\n 64f:   5d                      pop    %rbp\n 650:   c3                      retq   \n 651:   66 2e 0f 1f 84 00 00    nopw   %cs:0x0(%rax,%rax,1)\n 658:   00 00 00 \n 65b:   0f 1f 44 00 00          nopl   0x0(%rax,%rax,1)\n</code></pre>\n\n<p>Is there an easy way in C to read for example first three instructions (meaning the bytes <code>55, 48, 89, e5, 48, 8d, 3d, 9f, 00, 00, 00</code>) from <code>main</code>? It is not guaranteed that the function looks like this - the first instructions may have all different opcodes and sizes.</p>\n"}, {"tags": ["c++", "c", "visual-studio-2015"], "comments": [{"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 1, "creation_date": 1520430401, "post_id": 49153432, "comment_id": 85311299, "body": "No, because the compiler is operative at the project level, not the solution level. Choosing <code>C</code> for a solution that also contains a VB project would make no sense."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 3, "creation_date": 1520430549, "post_id": 49153432, "comment_id": 85311391, "body": "Anyway, MSVC respect the source file extension and compiles as C any *.c file"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 0, "creation_date": 1520430736, "post_id": 49153432, "comment_id": 85311531, "body": "@MarkBenningfield: The compiler operates at the compilation unit level. You can have a project, where compilation units are compiled as C and C++ code. Anyway, the compiler does the right thing in compiling .c files as C, unless instructed not to."}, {"owner": {"reputation": 1830, "user_id": 1939432, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33f04ad78cc166c320de2001db7d1955?s=128&d=identicon&r=PG", "display_name": "Lyrk", "link": "https://stackoverflow.com/users/1939432/lyrk"}, "edited": false, "score": 0, "creation_date": 1520430810, "post_id": 49153432, "comment_id": 85311576, "body": "Is it so? I created a simple code and named as .c file. When I compiled it hanged. (default) Then I changed Compile as option to  &quot;Compile as C Code (/TC)&quot; and it worked flawlessly."}, {"owner": {"reputation": 1830, "user_id": 1939432, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33f04ad78cc166c320de2001db7d1955?s=128&d=identicon&r=PG", "display_name": "Lyrk", "link": "https://stackoverflow.com/users/1939432/lyrk"}, "edited": false, "score": 0, "creation_date": 1520431058, "post_id": 49153432, "comment_id": 85311728, "body": "<a href=\"https://onlinegdb.com/SyS6kuaOM\" rel=\"nofollow noreferrer\">onlinegdb.com/SyS6kuaOM</a>    try this with Visual Studio 2015. When you leave the compiler as default, program hangs."}, {"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1520431133, "post_id": 49153432, "comment_id": 85311774, "body": "@IInspectable: You misunderstand. If I restate to say the exact same thing as &quot;The compiler is not operative at the solution level, but at the project level&quot;, does that make it clearer? That doesn&#39;t mean that you can only have one compiler per project; it means that you can&#39;t have <i>any</i> compilers per solution."}, {"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 1, "creation_date": 1520431450, "post_id": 49153432, "comment_id": 85312011, "body": "@Lyrk: Compiled and executed code at your link on VS2015. Renamed <code>stdafx.cpp</code> to <code>stdafx.c</code> and <code>ConsoleApplication1.cpp</code> to <code>ConsoleApplication1</code>.c<code>. </code>CompileAs` setting is &quot;Default&quot;. No problems."}, {"owner": {"reputation": 1830, "user_id": 1939432, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33f04ad78cc166c320de2001db7d1955?s=128&d=identicon&r=PG", "display_name": "Lyrk", "link": "https://stackoverflow.com/users/1939432/lyrk"}, "edited": false, "score": 0, "creation_date": 1520431837, "post_id": 49153432, "comment_id": 85312295, "body": "I do not understand. Maybe my Visual Studio Installation is faulty. Thanks for trying. I will reinstall then."}], "owner": {"reputation": 1830, "user_id": 1939432, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33f04ad78cc166c320de2001db7d1955?s=128&d=identicon&r=PG", "display_name": "Lyrk", "link": "https://stackoverflow.com/users/1939432/lyrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520437555, "creation_date": 1520430293, "question_id": 49153432, "link": "https://stackoverflow.com/questions/49153432/changing-default-compiler-option-of-a-solution", "title": "Changing default compiler option of a Solution", "body": "<p>I have a few Projects under a Solution and I am writing code in C. Whenever I make a new project under this Solution, I should change the compiler from \"default\" to \"Compile as C Code (/TC)\" by right clicking the project and going into Configuration Properties - C/C++ - All Options - Compile As. Instead of this, is there a way to set the compiler of a Solution once and this would apply to all the projects under that solution instead of changing every one of them one by one? </p>\n"}, {"tags": ["c", "multithreading", "libusb-1.0"], "comments": [{"owner": {"reputation": 9246, "user_id": 1041868, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6d476b07acb3919c356015e11ad97608?s=128&d=identicon&r=PG", "display_name": "bph", "link": "https://stackoverflow.com/users/1041868/bph"}, "edited": false, "score": 1, "creation_date": 1520431338, "post_id": 49153357, "comment_id": 85311934, "body": "following is relevant, but quite involved -&gt; <a href=\"http://libusb.sourceforge.net/api-1.0/mtasync.html\" rel=\"nofollow noreferrer\">libusb.sourceforge.net/api-1.0/mtasync.html</a>"}, {"owner": {"reputation": 9246, "user_id": 1041868, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6d476b07acb3919c356015e11ad97608?s=128&d=identicon&r=PG", "display_name": "bph", "link": "https://stackoverflow.com/users/1041868/bph"}, "edited": false, "score": 1, "creation_date": 1520438833, "post_id": 49153357, "comment_id": 85317431, "body": "how a technical question based upon a specific technology with a true/false answer can be considered primarily opinion based is beyond me?"}], "answers": [{"comments": [{"owner": {"reputation": 568, "user_id": 4063520, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/3JkDx.jpg?s=128&g=1", "display_name": "Dmitry Mikushin", "link": "https://stackoverflow.com/users/4063520/dmitry-mikushin"}, "edited": false, "score": 1, "creation_date": 1609617499, "post_id": 49233326, "comment_id": 115880260, "body": "Calling <code>libusb_init</code> twice does not make sense"}], "tags": [], "owner": {"reputation": 9246, "user_id": 1041868, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6d476b07acb3919c356015e11ad97608?s=128&d=identicon&r=PG", "display_name": "bph", "link": "https://stackoverflow.com/users/1041868/bph"}, "is_accepted": true, "score": 1, "last_activity_date": 1520852941, "last_edit_date": 1520852941, "creation_date": 1520851664, "answer_id": 49233326, "question_id": 49153357, "link": "https://stackoverflow.com/questions/49153357/is-it-possible-to-create-multiple-connection-instances-to-same-usb-device-using/49233326#49233326", "title": "Is it possible to create multiple connection instances to same USB device using libusb?", "body": "<p>See below for a small but complete C program proving that it is possible to have multiple connections to the same USB device.</p>\n\n<p>If you want to use it you would have to modify the VID and PID values appropriately for your device. There is also the assumption that the device makes bulk transfers on a control request from the host.</p>\n\n<p>Inspection of the <code>r_1</code> and <code>r_2</code> <code>libusb_bulk_transfer</code> call <code>buf</code> values indicates that bulk transfers using both USB handles have completed successfully, i.e. the expected packet data is present in each.</p>\n\n<pre><code>/**\n * \\brief test whether it is possible to have two connections to same usb device\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;libusb-1.0/libusb.h&gt;\n\nint main()\n{\n    int r_1;\n    int r_2;\n\n    libusb_device_handle *handle_1;\n    libusb_device_handle *handle_2;\n\n    uint8_t bmRequestType = 0x40 | 0x00| 0x00;\n    uint8_t bRequest = 0x90;\n\n    unsigned char buf[12008];\n    int n;\n\n    r_1 = libusb_init(NULL);\n    r_2 = libusb_init(NULL);\n\n    handle_1 = libusb_open_device_with_vid_pid(NULL, 0xFFFF, 0x0001);\n    handle_2 = libusb_open_device_with_vid_pid(NULL, 0xFFFF, 0x0001);    \n\n    libusb_claim_interface(handle_1, 0);\n    libusb_claim_interface(handle_2, 0);\n\n    r_1 = libusb_control_transfer(handle_1, bmRequestType,\n                                  bRequest, 0, 0, NULL,\n                                  0, 5000);\n\n    r_1 = libusb_bulk_transfer(handle_1, 129,\n                               buf, 12008, &amp;n,\n                               5000);\n\n    r_2 = libusb_control_transfer(handle_2, bmRequestType,\n                                  bRequest, 0, 0, NULL,\n                                  0, 5000);\n\n    r_2 = libusb_bulk_transfer(handle_2, 129,\n                               buf, 12008, &amp;n,\n                               5000);\n\n    printf(\"All Done!\\n\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9246, "user_id": 1041868, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6d476b07acb3919c356015e11ad97608?s=128&d=identicon&r=PG", "display_name": "bph", "link": "https://stackoverflow.com/users/1041868/bph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 1, "accepted_answer_id": 49233326, "answer_count": 1, "score": 1, "last_activity_date": 1520852941, "creation_date": 1520430063, "last_edit_date": 1520430899, "question_id": 49153357, "link": "https://stackoverflow.com/questions/49153357/is-it-possible-to-create-multiple-connection-instances-to-same-usb-device-using", "title": "Is it possible to create multiple connection instances to same USB device using libusb?", "body": "<p>I am considering how to create a multithreaded application to send non-sequential messages to a USB device using libusb.</p>\n\n<p>The two options are:</p>\n\n<ol>\n<li><p>create a single USB device connection and have multiple threads\nshare that single connection?</p></li>\n<li><p>create multiple libusb connections to the same device allowing\n    each thread to have their own connection?</p></li>\n</ol>\n\n<p>(1) should be possible with some synchronisation mutexes on the relevant libusb calls.</p>\n\n<p>I'm not sure if (2) is possible - if it is it may be simpler to implement?</p>\n\n<p>That is the context for the question, but the specific question is: </p>\n\n<p>Is it possible to create multiple connection instances to the same USB device using libusb?</p>\n"}, {"tags": ["c", "algorithm", "function", "recursion", "range"], "comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 6, "creation_date": 1520429473, "post_id": 49153113, "comment_id": 85310685, "body": "Why do you want a recursive function?"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "edited": false, "score": 1, "creation_date": 1520429867, "post_id": 49153113, "comment_id": 85310948, "body": "can you define <code>N</code> - is it the number of elements of <code>a</code> - why are you checking the value of <code>N</code> - looks like you should be querying the value of <code>a[i]</code>"}, {"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 0, "creation_date": 1520429983, "post_id": 49153113, "comment_id": 85311019, "body": "You never assign anything to the result array; you send the same array element in every recursive call; <code>N</code> doesn&#39;t appear to be relevant at all. You might want to go back to the book."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1520430222, "post_id": 49153113, "comment_id": 85311177, "body": "Simply use a loop. Faster, safer, more readable, less stack use, better in every single way possible."}, {"owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "edited": false, "score": 0, "creation_date": 1520447281, "post_id": 49153113, "comment_id": 85322737, "body": "Sounds like homework to me."}, {"owner": {"reputation": 4728, "user_id": 1288408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r09bq.jpg?s=128&g=1", "display_name": "Modus Tollens", "link": "https://stackoverflow.com/users/1288408/modus-tollens"}, "reply_to_user": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "edited": false, "score": 0, "creation_date": 1520447593, "post_id": 49153113, "comment_id": 85322910, "body": "@MrSmith42 What&#39;s wrong with asking homework questions?"}], "answers": [{"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1520435088, "post_id": 49153757, "comment_id": 85314536, "body": "The function uses redundant parameter r."}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1520436173, "post_id": 49153757, "comment_id": 85315428, "body": "@VladfromMoscow <code>r</code> is not redundant - it keeps track of the number of values that fall in the range between lower and upper -- if we put values into <code>result[]</code> we need to know how many values have been added to <code>result</code>"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1520436578, "post_id": 49153757, "comment_id": 85315770, "body": "@VladfromMoscow, but I spotted a mistake in my simple loop - maybe <code>r</code> is not necessary from looking at your code -- but I am not sure if your code or mine is more &#39;readable&#39;"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1520437568, "post_id": 49153757, "comment_id": 85316489, "body": "@If you are not sure then your qi\\ualification is not enough high. That is all.:)"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1520449192, "post_id": 49153757, "comment_id": 85323850, "body": "@VladfromMoscow ok - so I did not look so carefully at the detail of your code. Now I look at it more closely it looks as if you have the parameter <code>m</code> which does the same job as my parameter <code>r</code>, though I prefer to call them variables. In the same way that my routine returns the value of <code>r</code> so you return the value of <code>m</code>  . -- BUT your code has the advantage that you allocate just enough memory for the result....:-)"}, {"owner": {"reputation": 45, "user_id": 9345096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jPRn9kzPJ4o/AAAAAAAAAAI/AAAAAAAAABI/EMDlt29F7uo/photo.jpg?sz=128", "display_name": "jw lee", "link": "https://stackoverflow.com/users/9345096/jw-lee"}, "edited": false, "score": 0, "creation_date": 1520561698, "post_id": 49153757, "comment_id": 85376811, "body": "@tom is it possible to define <code>r</code> inside the function, not as one of the function parameter and initialise to 0. But for each loop, the value of <code>r</code> will change back to 0."}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 45, "user_id": 9345096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jPRn9kzPJ4o/AAAAAAAAAAI/AAAAAAAAABI/EMDlt29F7uo/photo.jpg?sz=128", "display_name": "jw lee", "link": "https://stackoverflow.com/users/9345096/jw-lee"}, "edited": false, "score": 0, "creation_date": 1520561826, "post_id": 49153757, "comment_id": 85376838, "body": "@jwlee yes - <code>r</code> needs to be defined to 0 <b>before</b> the function is called for the first time - it is not set to zero in the function and in recursion the updated value of <code>r</code> is sent.... does this make sense?"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 45, "user_id": 9345096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jPRn9kzPJ4o/AAAAAAAAAAI/AAAAAAAAABI/EMDlt29F7uo/photo.jpg?sz=128", "display_name": "jw lee", "link": "https://stackoverflow.com/users/9345096/jw-lee"}, "edited": false, "score": 0, "creation_date": 1520562207, "post_id": 49153757, "comment_id": 85376924, "body": "@jwlee the problem with not sending the value of r is that r tells the function each time where to add to the result[]"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 45, "user_id": 9345096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jPRn9kzPJ4o/AAAAAAAAAAI/AAAAAAAAABI/EMDlt29F7uo/photo.jpg?sz=128", "display_name": "jw lee", "link": "https://stackoverflow.com/users/9345096/jw-lee"}, "edited": false, "score": 0, "creation_date": 1520562270, "post_id": 49153757, "comment_id": 85376937, "body": "@jwlee perhaps the alternative might be to use N as r, but then you would have to be able to know when the input values in a[] run out...."}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 45, "user_id": 9345096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jPRn9kzPJ4o/AAAAAAAAAAI/AAAAAAAAABI/EMDlt29F7uo/photo.jpg?sz=128", "display_name": "jw lee", "link": "https://stackoverflow.com/users/9345096/jw-lee"}, "edited": false, "score": 0, "creation_date": 1520562430, "post_id": 49153757, "comment_id": 85376964, "body": "@jwlee - you could use <code>result[0]</code> instead of <code>r</code>.... -- if you need to remove r from the list of variables sent to the function then it could be done and I could edit, but tomorrow, not now... message me if it would help."}, {"owner": {"reputation": 45, "user_id": 9345096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jPRn9kzPJ4o/AAAAAAAAAAI/AAAAAAAAABI/EMDlt29F7uo/photo.jpg?sz=128", "display_name": "jw lee", "link": "https://stackoverflow.com/users/9345096/jw-lee"}, "edited": false, "score": 0, "creation_date": 1520563352, "post_id": 49153757, "comment_id": 85377146, "body": "@tom after replacing <code>r</code> with <code>result[0]</code>, I see it only store the last data that meet the condition"}], "tags": [], "owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "is_accepted": true, "score": 2, "last_activity_date": 1520565246, "last_edit_date": 1592644375, "creation_date": 1520431233, "answer_id": 49153757, "question_id": 49153113, "link": "https://stackoverflow.com/questions/49153113/recursive-find-number-in-between-in-c/49153757#49153757", "title": "recursive find number in between in C", "body": "<blockquote>\n<p>I want  to find the number within a range in an array</p>\n<p>Let's say in the range of 2 and 3</p>\n</blockquote>\n<p>Normally a <code>for</code> loop or similar would be so much easier here</p>\n<p>If it has to be recursive....</p>\n<pre><code>// need to have another number - r - number in range\n//  r starts at zero\n// \n// normally lower case for variable and capitals for things you #define\n// N starts at the number of elements of a less one \n//\nint within(int a[], int N, int lower, int upper, int r, int result[])\n{\n  if(a[0] &lt;= upper &amp;&amp; a[0]&gt;= lower) {\n     result[r]= a[0];\n     r++;\n  }\n  if(N==0) {\n     return r;\n  } else { \n     r = within(&amp;a[1], N-1, lower, upper, r, result);\n    return r;\n  }\n}\n</code></pre>\n<p>the function will give a return value of the number of values found within the range.</p>\n<p>The code above is recursive, but so much more complicated and fragile than a simple loop... such as the fragment below</p>\n<pre><code>  for (i=0;i&lt;N;i++) {\n    if(a[i] &lt;= upper &amp;&amp; a[i]&gt;= lower) {\n     result[r]= a[i];\n     r++;\n    }\n  }\n</code></pre>\n<p>If it has to be recursive wihtout r...</p>\n<pre><code>// need to have another number - result[0] - number in range\n//  result[0] starts at zero\n// \n// normally lower case for variable and capitals for things you #define\n// N starts at the number of elements of a less one \n//\nint within(int a[], int N, int lower, int upper, int result[])\n{\n  if(a[0] &lt;= upper &amp;&amp; a[0]&gt;= lower) {\n     result[0]++;\n     result[result[0]]= a[0];\n  }\n  if(N==0) {\n     return result[0];\n  } else { \n     result[0] = within(&amp;a[1], N-1, lower, upper, result);\n    return result[0];\n  }\n}\n</code></pre>\n<p>now result conatins</p>\n<p>{number in range, first number in range, second number in range....}</p>\n"}, {"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1520434927, "post_id": 49153868, "comment_id": 85314419, "body": "The function should return an array of target elements. It should not output anything."}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1520436562, "last_edit_date": 1520436562, "creation_date": 1520431623, "answer_id": 49153868, "question_id": 49153113, "link": "https://stackoverflow.com/questions/49153113/recursive-find-number-in-between-in-c/49153868#49153868", "title": "recursive find number in between in C", "body": "<p>Below codes will work for you in recursive way. If you don't want to print the numbers just comment out <code>printf</code> statement inside function <code>printfRange</code>. Hope you can understand the logic :-    </p>\n\n<pre><code>int within(int *a, int rngH, int rngL, int length)\n{\n  int len = length;\n  static int i = 0;\n  static int found = 0;\n  if(len &lt;=0 )\n  {\n   return i;\n  }\n  if (*a == rngH)\n  {\n   printf(\"%d,\",*a);\n   i++;\n   found = 1;\n   within(++a,rngH, rngL,--len);\n  }\n  else if(*a == rngL &amp;&amp; found &gt; 0)\n  {\n   printf(\"%d,\",*a);\n   i++;\n   within(++a,rngH, rngL,--len);\n  }\n  else\n  {\n    within(++a,rngH, rngL,--len);\n  }\n   return i;\n}\n\nint main() {\nint a[] = {4, 1, 3, 1, 3, 2};\n\nint total = within(a,3,2,6);\nprintf(\"\\n\");\nprintf(\"Total :%d\\n\",total);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 540, "user_id": 8932168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ji9k2.jpg?s=128&g=1", "display_name": "rhaport", "link": "https://stackoverflow.com/users/8932168/rhaport"}, "is_accepted": false, "score": 0, "last_activity_date": 1520432104, "creation_date": 1520432104, "answer_id": 49154026, "question_id": 49153113, "link": "https://stackoverflow.com/questions/49153113/recursive-find-number-in-between-in-c/49154026#49154026", "title": "recursive find number in between in C", "body": "<p>Something like this. If you want to implement a recursive function, try to do it in the way that the recursive call happens at the end. </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint find_in_range(int* out, int const *in, int length, int from, int to)\n{\n    if (length == 0)\n    {\n        return 0;\n    }\n\n    int addon;\n\n    if (*in &gt;= from &amp;&amp; *in &lt;= to)\n    {\n        *out = *in;\n        ++out;\n        addon = 1;\n    }\n    else\n    {\n        addon = 0;\n    }\n\n    return find_in_range(out, in + 1, length - 1, from, to) + addon;\n}\n\n#define N 6\n\nint main()\n{\n    int in[N] = {4, 1, 3, 1, 3, 2};\n    int out[N] = {0};\n\n    int num_found = find_in_range(out, in, N, 2, 3);\n\n    for (int i = 0; i &lt; num_found; ++i)\n    {\n        printf(\"%d \", out[i]);\n    }\n\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n\n"}, {"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1520434816, "post_id": 49154457, "comment_id": 85314331, "body": "It is a bad code.  It uses global variables and magic numbers."}, {"owner": {"reputation": 31, "user_id": 4233313, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004076502675/picture?type=large", "display_name": "Muhammad Khubaib Umer", "link": "https://stackoverflow.com/users/4233313/muhammad-khubaib-umer"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1520436396, "post_id": 49154457, "comment_id": 85315606, "body": "@VladfromMoscow It is merely a proof of concept and I&#39;ve mentioned this above. It does uses globals and fixed sized arrays but that&#39;s the point. It isn&#39;t supposed to be inserted as it is in anywhere productive rather the questioner must understand and implement it on his own. I have just provided guidelines as to how it can be done."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1520437499, "post_id": 49154457, "comment_id": 85316427, "body": "It is just a bad proof of the concept."}], "tags": [], "owner": {"reputation": 31, "user_id": 4233313, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004076502675/picture?type=large", "display_name": "Muhammad Khubaib Umer", "link": "https://stackoverflow.com/users/4233313/muhammad-khubaib-umer"}, "is_accepted": false, "score": 0, "last_activity_date": 1520433333, "creation_date": 1520433333, "answer_id": 49154457, "question_id": 49153113, "link": "https://stackoverflow.com/questions/49153113/recursive-find-number-in-between-in-c/49154457#49154457", "title": "recursive find number in between in C", "body": "<p>You can modify the following code as per your requirements. This is just a proof of concept code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic int result[4];\nstatic int ctr1 = 0;\nstatic int ctr2 = 0;\nvoid recFind(int* arr, int* key){\n\n    if(ctr2 == 8)\n        return;\n    if(*arr &gt;= key[0] &amp;&amp; *arr &lt;= key[1])\n        result[ctr1++] = *arr;\n\n        arr++;\n        ctr2++;\n        recFind(arr, key);\n}\nint main(){\n\n    int arr[] = {1,3,3,6,4,6,7,8};\n    int key[] = {1,4};\n\n    recFind(arr, key);\n    printf(\" { \");\n    for(int i = 0; i &lt; 4; i++){\n        printf(\"%d \", result[i]);\n    }\n    printf(\"}\\n\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1520435428, "last_edit_date": 1520435428, "creation_date": 1520434097, "answer_id": 49154696, "question_id": 49153113, "link": "https://stackoverflow.com/questions/49153113/recursive-find-number-in-between-in-c/49154696#49154696", "title": "recursive find number in between in C", "body": "<p>As it follows from the description of the assignment the function should provide two values: the number of elements that satisfy the condition and an array that contains the elements themselves.</p>\n\n<p>It is evident that the array should be allocated dynamically. And it is logically consistent when the function itself returns the number of elements while the pointer to the generated array is passed by reference as an argument.</p>\n\n<p>The recursive function can look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nsize_t get_range( const int a[], size_t n, int lower, int upper, int **out )\n{\n    size_t m;\n\n    if ( n )\n    {\n        m = get_range( a, n - 1, lower, upper, out );\n\n        if ( lower &lt;= a[n-1] &amp;&amp; a[n-1] &lt;= upper )\n        {\n            int *tmp = realloc( *out, ( m + 1 ) * sizeof( int ) );\n\n            if ( tmp )\n            {\n                tmp[m] = a[n-1];\n                *out = tmp;\n                ++m;\n            }               \n        }\n    }\n    else\n    {\n        *out = NULL;\n        m = 0;\n    }\n\n    return m;\n}\n\nint main(void) \n{\n\n    int a[] = { 1, 2, 3, 4, 5, 4, 3, 2, 1 };\n    const size_t N = sizeof( a ) / sizeof( *a );\n\n    int lower = 2, high = 3;\n    int *out;\n\n    size_t n = get_range( a, N, lower, high, &amp;out );\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        printf( \"%d \", out[i] );\n    }\n\n    putchar( '\\n' );\n\n    free( out );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is </p>\n\n<pre><code>2 3 3 2 \n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9345096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jPRn9kzPJ4o/AAAAAAAAAAI/AAAAAAAAABI/EMDlt29F7uo/photo.jpg?sz=128", "display_name": "jw lee", "link": "https://stackoverflow.com/users/9345096/jw-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "accepted_answer_id": 49153757, "answer_count": 5, "score": 0, "last_activity_date": 1520565246, "creation_date": 1520429244, "last_edit_date": 1520434556, "question_id": 49153113, "link": "https://stackoverflow.com/questions/49153113/recursive-find-number-in-between-in-c", "title": "recursive find number in between in C", "body": "<p>I want to find the number within a range in an array and must be in a recursive way. The function variables couldn't be modified.</p>\n\n<p>Let's say in the range of 2 and 3</p>\n\n<p>The input is : <code>int a[] = {4, 1, 3, 1, 3, 2};</code></p>\n\n<p>and the output will be <code>= {3,3,2}</code> , 3 found</p>\n\n<p>Not sure how to code the recursive function in this case. The below I have tried not working.</p>\n\n<pre><code>int within(int a[], int N, int lower, int upper, int result[])\n{\n if(N == 1 &amp;&amp; N &lt;= upper &amp;&amp; N&gt;= lower) \n    return a[0];\n\n return within(&amp;a[1], N-1, lower, upper, result);\n}\n\nint main()\n{\n    int a[] = {4, 1, 3, 1, 3, 2};\n    int result[6] = {0};\n    int i, nResult;\n\n    nResult = within(a, 6, 2, 3, result);\n\n    printf(\"%d data passed the bounds\\n\", nResult);\n    for (i = 0; i &lt; nResult; i++){\n        printf(\"%d \", result[i]);\n    }\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory-management", "free"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 5, "creation_date": 1520427441, "post_id": 49152475, "comment_id": 85309269, "body": "Does this even compile? <code>free((menu1,menu2,menu3,menu4,menu5));</code> would, and only the memory associated with <code>menu5</code> would be released. Methinks you are running the previous build of the code, which was compilable."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1520427927, "post_id": 49152475, "comment_id": 85309612, "body": "It might run, but no, it doesn&#39;t free right."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 7, "creation_date": 1520430402, "post_id": 49152475, "comment_id": 85311300, "body": "This might run because VS2017 uses a s**t C compiler from 1989. I bet it doesn&#39;t find the user-defined library <code>&quot;stdlib.h&quot;</code> (rather than <code>&lt;stdlib.h&gt;</code>) so it makes up the functions malloc and free. Since you cast the result of malloc you hide the bug. What happens if you <code>#include &lt;stdlib.h&gt;</code>?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1520430496, "post_id": 49152475, "comment_id": 85311360, "body": "Notably, a conforming C compiler <i>must</i>  go check <code>&lt;stdlib.h&gt;</code> if it doesn&#39;t find <code>&quot;stdlib.h&quot;</code>, as per C11 6.10.2. However, VS is not a conforming C compiler so all bets are off."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1520434078, "post_id": 49152475, "comment_id": 85313813, "body": "&quot;During my school assignments&quot;... <b>wow</b>. You should consider gifting a copy of K&amp;R&#39;s &quot;The C Programming Language&quot; to your professor."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1520441588, "post_id": 49152475, "comment_id": 85319271, "body": "If you actually make it compile, run it under a memory checker like Valgrind (I&#39;m not sure what the equivalent is on Microsoft platforms, but one should exist)."}], "answers": [{"tags": [], "owner": {"reputation": 540, "user_id": 8932168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ji9k2.jpg?s=128&g=1", "display_name": "rhaport", "link": "https://stackoverflow.com/users/8932168/rhaport"}, "is_accepted": false, "score": 2, "last_activity_date": 1520427769, "creation_date": 1520427769, "answer_id": 49152661, "question_id": 49152475, "link": "https://stackoverflow.com/questions/49152475/is-it-okay-to-free-multiple-dynamically-allocated-memories-at-once/49152661#49152661", "title": "Is it okay to free multiple dynamically allocated memories at once?", "body": "<p>for each pointer you have, you allocated memory separately. By memory allocation, the system allocates a bit more that requested in order to safe some control information which should be used for different internal purposes and also later for deallocation. </p>\n\n<p>Since each allocated memory knows only about itself and not about other allocated pieces of memory, you cannot free all together. </p>\n\n<p>The function free expects only one argument (one pointer). Please see 7.22.3.3 in C standard.</p>\n\n<p>GCC doesn't compile this code. </p>\n"}, {"tags": [], "owner": {"reputation": 610, "user_id": 8979940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmzYf.jpg?s=128&g=1", "display_name": "Omer Dagan", "link": "https://stackoverflow.com/users/8979940/omer-dagan"}, "is_accepted": false, "score": 2, "last_activity_date": 1520427837, "creation_date": 1520427837, "answer_id": 49152682, "question_id": 49152475, "link": "https://stackoverflow.com/questions/49152475/is-it-okay-to-free-multiple-dynamically-allocated-memories-at-once/49152682#49152682", "title": "Is it okay to free multiple dynamically allocated memories at once?", "body": "<p>No.</p>\n\n<p><a href=\"https://linux.die.net/man/3/free\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/free</a></p>\n\n<pre><code>void free(void *ptr);\n</code></pre>\n\n<p>I code does not compile:</p>\n\n<pre><code>error: too many arguments to function \u2018free\u2019\n  free(menu1,menu2,menu3,menu4,menu5);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": false, "score": 2, "last_activity_date": 1520432828, "last_edit_date": 1520432828, "creation_date": 1520429226, "answer_id": 49153107, "question_id": 49152475, "link": "https://stackoverflow.com/questions/49152475/is-it-okay-to-free-multiple-dynamically-allocated-memories-at-once/49153107#49153107", "title": "Is it okay to free multiple dynamically allocated memories at once?", "body": "<p>Your code does not compile, because the function <code>free()</code> expects one argument, but you passed more than that; <code>5</code> to be exact.</p>\n\n<p>You could make it compile by enclosing the arguments in parentheses:</p>\n\n<pre><code>free((menu1, menu2, menu3, menu4, menu5));\n</code></pre>\n\n<p>This allows all the arguments to be evaluated by using the <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">comma operator</a>, but only the last one will be used by the function <code>free()</code>. That is, only <code>menu5</code> will be freed, and the rest won't.</p>\n\n<p>You must call <code>free()</code> on each argument separately to release memory appropriately:</p>\n\n<pre><code>free(menu1);\nfree(menu2);\n...\nfree(menu5);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 2, "last_activity_date": 1520432629, "creation_date": 1520432629, "answer_id": 49154200, "question_id": 49152475, "link": "https://stackoverflow.com/questions/49152475/is-it-okay-to-free-multiple-dynamically-allocated-memories-at-once/49154200#49154200", "title": "Is it okay to free multiple dynamically allocated memories at once?", "body": "<p>The code as is, will not compile:</p>\n\n<pre><code>  free(menu1,menu2,menu3,menu4,menu5); /* error: too many arguments to function 'free' */\n</code></pre>\n\n<p>The function <code>free</code> is defined in header <code>&lt;stdlib.h&gt;</code> and takes only one parameter:</p>\n\n<pre><code>void free( void* ptr );\n</code></pre>\n\n<p>Parameters:</p>\n\n<pre><code> `ptr` -    pointer to the memory to deallocate\n</code></pre>\n\n<p>Return value:</p>\n\n<p><code>(none)</code></p>\n\n<p>Function deallocates the space previously allocated by <code>malloc()</code>, <code>calloc()</code>, <code>aligned_alloc</code>, (since <code>C11</code>) or <code>realloc()</code>.\nIf <code>ptr</code> is a <code>null</code> pointer, the function does nothing.</p>\n\n<p>References:</p>\n\n<pre><code>C11 standard (ISO/IEC 9899:2011):\n7.22.3.3 The free function (p: 348)\n\nC99 standard (ISO/IEC 9899:1999):\n7.20.3.2 The free function (p: 313)\n\nC89/C90 standard (ISO/IEC 9899:1990):\n4.10.3.2 The free function\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 0, "last_activity_date": 1520440229, "creation_date": 1520440229, "answer_id": 49156856, "question_id": 49152475, "link": "https://stackoverflow.com/questions/49152475/is-it-okay-to-free-multiple-dynamically-allocated-memories-at-once/49156856#49156856", "title": "Is it okay to free multiple dynamically allocated memories at once?", "body": "<p>If this compiles you are using an olde compiler. What you are showing is a common error in C code.</p>\n\n<p>What happens in this case the generated code looks something like this:</p>\n\n<pre><code>PUSH  menu5 ; which probably looks more like \"menu5(SP)\"\nPUSH  menu4\nPUSH  menu3\nPUSH  menu2\nPUSH  menu1\nCALL _free\n</code></pre>\n\n<p>free () only expects one argument and it finds an argument: menu1. The extra arguments simply get ignored.</p>\n\n<p>What would cause even bigger problems is to not pass enough arguments to a function. In that case the function being called would use random garbage on the stack as the argument. Something like</p>\n\n<pre><code> fprintf (fp)\n</code></pre>\n\n<p>in rarely executed logging code could give you a crash.</p>\n"}], "owner": {"reputation": 39, "user_id": 9456732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\uc5ec\ub300\uc5fd\ud559\ubd80\uc0dd", "link": "https://stackoverflow.com/users/9456732/%ec%97%ac%eb%8c%80%ec%97%bd%ed%95%99%eb%b6%80%ec%83%9d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1520440229, "creation_date": 1520427220, "last_edit_date": 1520429381, "question_id": 49152475, "link": "https://stackoverflow.com/questions/49152475/is-it-okay-to-free-multiple-dynamically-allocated-memories-at-once", "title": "Is it okay to free multiple dynamically allocated memories at once?", "body": "<p>During my school assignments, I just got curious if it really frees as I expect.</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n\nvoid main(){\n    int* menu1 = (int*)malloc(sizeof(int));\n    int* menu2 = (int*)malloc(sizeof(int));\n    int* menu3 = (int*)malloc(sizeof(int));\n    int* menu4 = (int*)malloc(sizeof(int));\n    int* menu5 = (int*)malloc(sizeof(int));\n\n    free(menu1,menu2,menu3,menu4,menu5);\n    system(\"pause\");\n}\n</code></pre>\n\n<p>It still runs in VS2017, but I'm not sure that it's freed correctly.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1520427311, "post_id": 49152453, "comment_id": 85309159, "body": "Compile your code with all warnings and debug info: <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Improve your code to get no warnings. Then <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">use the <code>gdb</code> debugger</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1520427468, "post_id": 49152453, "comment_id": 85309292, "body": "Also read the <a href=\"http://en.cppreference.com/w/c\" rel=\"nofollow noreferrer\">documentation</a>, notably of each function you are using (because you use them wrongly)"}, {"owner": {"reputation": 8026, "user_id": 1320303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9020a80cda52e7a425d4824ad572b241?s=128&d=identicon&r=PG", "display_name": "mttrb", "link": "https://stackoverflow.com/users/1320303/mttrb"}, "edited": false, "score": 5, "creation_date": 1520427469, "post_id": 49152453, "comment_id": 85309294, "body": "For a start: <code>isalpha</code> takes a <code>char</code> as a parameter not an array of <code>char</code>s.  Also this code has nothing to do with recursion."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520428246, "post_id": 49152556, "comment_id": 85309863, "body": "Even with <code>char</code>, you need <code>isalpha((unsigned char)ch)</code> to avoid undefined behavior."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520429796, "post_id": 49152556, "comment_id": 85310902, "body": "Thanks for pointing out. Edited."}, {"owner": {"reputation": 19, "user_id": 9244469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72b97c5f0715732060c5b72343163f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham Kumar Singh", "link": "https://stackoverflow.com/users/9244469/shubham-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1520429818, "post_id": 49152556, "comment_id": 85310918, "body": "Even tough after correction in scanf statement it&#39;s still not satisfying my output. Because when i have given an input &quot;gh23s&quot; the program giving me an output &quot;Is Alpha&quot; but i should get &quot;Invalid Input&quot;..."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 19, "user_id": 9244469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72b97c5f0715732060c5b72343163f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham Kumar Singh", "link": "https://stackoverflow.com/users/9244469/shubham-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1520429857, "post_id": 49152556, "comment_id": 85310938, "body": "@ShubhamKumarSingh Did you fix the call to <code>isalpha</code>? How?"}, {"owner": {"reputation": 19, "user_id": 9244469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72b97c5f0715732060c5b72343163f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham Kumar Singh", "link": "https://stackoverflow.com/users/9244469/shubham-kumar-singh"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520430099, "post_id": 49152556, "comment_id": 85311099, "body": "Sorry @melpomene I didn&#39;t get you..Can you give me a clarity..."}], "tags": [], "owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "is_accepted": false, "score": 4, "last_activity_date": 1520429960, "last_edit_date": 1520429960, "creation_date": 1520427461, "answer_id": 49152556, "question_id": 49152453, "link": "https://stackoverflow.com/questions/49152453/c-segmentation-fault-error/49152556#49152556", "title": "C-Segmentation Fault error", "body": "<p><a href=\"http://en.cppreference.com/w/c/string/byte/isalpha\" rel=\"nofollow noreferrer\"><code>isalpha()</code>'</a>s prototype is</p>\n\n<pre><code>int isalpha( int ch );\n</code></pre>\n\n<p>The argument is of type <code>int</code>. But the one that you are passing is of type <code>char *</code> since <code>str</code> is a character array.</p>\n\n<p>Perhaps you meant</p>\n\n<pre><code>unsigned char str;\nscanf(\"%c\",&amp;str);\n</code></pre>\n\n<p><code>isalpha()</code> returns <code>0</code> if its argument is <i>not</i> alphabetic.</p>\n\n<p>And to avoid overflow, you could modify your <code>scanf()</code> to</p>\n\n<pre><code>scanf(\"%49s\",str);\n</code></pre>\n\n<p>with one character to store the <code>\\0</code> character.</p>\n\n<p>Have a look at <a href=\"https://stackoverflow.com/questions/24746111/scanf-field-width-string-overflow\">this</a> post.</p>\n\n<p>Edit: The argument of <code>isalpha()</code> shouldn't be <code>char</code>. It must be at least <code>unsigned char</code> as explained <a href=\"https://stackoverflow.com/a/6693878/5375464\">here</a>. Thanks to <a href=\"https://stackoverflow.com/users/1848654/melpomene\">melpomene</a> for pointing this out.</p>\n"}], "owner": {"reputation": 19, "user_id": 9244469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72b97c5f0715732060c5b72343163f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham Kumar Singh", "link": "https://stackoverflow.com/users/9244469/shubham-kumar-singh"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1520429168, "answer_count": 1, "score": -3, "last_activity_date": 1520429960, "creation_date": 1520427157, "last_edit_date": 1520429349, "question_id": 49152453, "link": "https://stackoverflow.com/questions/49152453/c-segmentation-fault-error", "closed_reason": "Duplicate", "title": "C-Segmentation Fault error", "body": "<p>Recently i have started working on built-in functions but came up with an error and that is:</p>\n\n<p>Why am i getting <strong>segmentation fault</strong> for this program</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;ctype.h&gt;\nint main()\n{\n    char str[50];\n    int n;\n    printf(\"Who is your best friend? \");\n    scanf(\"%s\",str);\n    n=isalpha(str);\n    if(n!=0)\n    {\n        printf(\"Is Alpha\");\n    }\n    else\n    {\n        printf(\"Invalid Input\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Please help me out...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1520426994, "post_id": 49152350, "comment_id": 85308941, "body": "Why do you read it as a sequence of bytes? Why don&#39;t you read it as a single 32-bit unsigned integer? Then you already have the &quot;decimal&quot; value (after some optional bit-fiddling to handle endianness)."}, {"owner": {"reputation": 13, "user_id": 9456593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e6b5514358e897b56dc687d1a8d92?s=128&d=identicon&r=PG&f=1", "display_name": "Cian", "link": "https://stackoverflow.com/users/9456593/cian"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520428399, "post_id": 49152350, "comment_id": 85309975, "body": "@Someprogrammerdude is this something I should be doing in the fread? C isn&#39;t my strong-point! I read everything into a buffer because the fileSize isn&#39;t the only thing I&#39;m extracting. I extract a lot more information from the buffer (most of it is only 1 Bytes so simple to convert to decimal).   I was hoping to work only with the buffer, but if necessary I guess I could do another seek and fread to put the 4 bytes I need into an unsigned int (if that&#39;s what you mean)."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9456593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e6b5514358e897b56dc687d1a8d92?s=128&d=identicon&r=PG&f=1", "display_name": "Cian", "link": "https://stackoverflow.com/users/9456593/cian"}, "edited": false, "score": 0, "creation_date": 1520427784, "post_id": 49152540, "comment_id": 85309519, "body": "Yes, the data will be printed. &#39;0x0000EECE&#39; represents the size of a file in bytes. which is what I want to print.    The output is -823263232, which is completely incorrect. It should be 61134"}], "tags": [], "owner": {"reputation": 48, "user_id": 9395411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/9395411/wolfgang"}, "is_accepted": false, "score": 0, "last_activity_date": 1520427395, "creation_date": 1520427395, "answer_id": 49152540, "question_id": 49152350, "link": "https://stackoverflow.com/questions/49152350/array-of-hex-values-to-decimal/49152540#49152540", "title": "Array of HEX Values to Decimal", "body": "<p>What do you do with the data?</p>\n\n<p>Concepts like hex and decimal only apply when you print the data.</p>\n\n<p>What is the output of </p>\n\n<pre><code>printf(\"%d\", *(int *)filesize);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9456593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e6b5514358e897b56dc687d1a8d92?s=128&d=identicon&r=PG&f=1", "display_name": "Cian", "link": "https://stackoverflow.com/users/9456593/cian"}, "edited": false, "score": 0, "creation_date": 1520429907, "post_id": 49152910, "comment_id": 85310970, "body": "Correct. I&#39;m on a little endian machine. I&#39;m analyzing a Disk Image (.dd) which also stores bytes in little endian format. According to some notes that I have, the values have to be converted to big endian in order to get the correct answer.  &quot;Note the little-endian format for the stored bytes on  the disk, where the least significant byte is stored at the lowest address. This has to be converted to big-endian format and converted to a decimal number.&quot;"}, {"owner": {"reputation": 48, "user_id": 9395411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/9395411/wolfgang"}, "reply_to_user": {"reputation": 13, "user_id": 9456593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e6b5514358e897b56dc687d1a8d92?s=128&d=identicon&r=PG&f=1", "display_name": "Cian", "link": "https://stackoverflow.com/users/9456593/cian"}, "edited": false, "score": 0, "creation_date": 1520430862, "post_id": 49152910, "comment_id": 85311601, "body": "I ask again, why you convert the endianess of your data. Your machine is little endian, your data is little endian. When you interpret the memory (casting) as int, the value is correct. Changing the endianess of the data is only required when you use data  from a network (which is defined as big-endian) on a little endian machine. The functions to use in this case are ntohl/ntohs (net to host long /short)."}], "tags": [], "owner": {"reputation": 48, "user_id": 9395411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/9395411/wolfgang"}, "is_accepted": false, "score": 0, "last_activity_date": 1520428558, "creation_date": 1520428558, "answer_id": 49152910, "question_id": 49152350, "link": "https://stackoverflow.com/questions/49152350/array-of-hex-values-to-decimal/49152910#49152910", "title": "Array of HEX Values to Decimal", "body": "<p>Your previous comment suggests you are on a little endian machine.</p>\n\n<p>The value in your file is also little endian.</p>\n\n<p>Why do you change your endianess?</p>\n\n<p>See following test program:</p>\n\n<pre><code>// big endian\nunsigned char fileSize[4] = { 0x0, 0x0, 0xEE, 0xCE };\n\n// little endian\nunsigned char fileSize2[4] = { 0xCE, 0xEE, 0x00, 0x00 };\n\nint main(void)\n{\n    int i;\n\n\n    // Output: 0 0 EE CE &lt;- Correct\n    for (i = 0; i &lt; sizeof fileSize; i++)\n        printf(\"%02x \", fileSize[i]);\n\n    printf(\"\\n\");\n\n    for (i = 0; i &lt; sizeof fileSize2; i++)\n        printf(\"%02x \", fileSize2[i]);\n\n    printf(\"\\n\");\n\n    printf(\"%u\\n\", *(int *)fileSize);\n    printf(\"%u\\n\", *(int *)fileSize2);\n}\n</code></pre>\n\n<p>Output (on pc):</p>\n\n<pre><code>00 00 ee ce\nce ee 00 00\n3471704064\n61134\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1520428789, "creation_date": 1520428789, "answer_id": 49152981, "question_id": 49152350, "link": "https://stackoverflow.com/questions/49152350/array-of-hex-values-to-decimal/49152981#49152981", "title": "Array of HEX Values to Decimal", "body": "<p>Ok, so you have the bytes of an int value in big endian order and want to build the value. You could simply place the bytes into an <code>uint32_t</code> variable:</p>\n\n<pre><code>uint32_t bytes_to_int(unsigned char *bytes) {\n    uint32_t val = 0;\n    for(int i=0; i&lt;4; i++) {\n        val &lt;&lt;= 8;      //shift 8 positions to the right\n        val |= *bytes++;\n    }\n    return val;\n}\n</code></pre>\n\n<p>With it, the following test program:</p>\n\n<pre><code>int main() {\n    unsigned char foo[] = { 0, 0, 0xee, 0xce };\n    unsigned val = bytes_to_int(foo);\n    printf(\"%d - 0x%x\\n\", val, val);\n    return 0;\n}\n</code></pre>\n\n<p>output as expected:</p>\n\n<pre><code>61134 - 0xeece\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1520430040, "last_edit_date": 1520430040, "creation_date": 1520429702, "answer_id": 49153256, "question_id": 49152350, "link": "https://stackoverflow.com/questions/49152350/array-of-hex-values-to-decimal/49153256#49153256", "title": "Array of HEX Values to Decimal", "body": "<p>You could extract the data as a single unsigned 32-bit integer and use that almost directly (depending on endianness issues of course).</p>\n\n<p>Perhaps something like this:</p>\n\n<pre><code>uint32_t fileSize;\nmemcpy(&amp;fileSize, buff[fileLocationOffset + 28], 4);\n</code></pre>\n\n<p>Then for the endianness issue, if you're on Linux you could use <code>be32toh</code> (see e.g. <a href=\"http://man7.org/linux/man-pages/man3/endian.3.html\" rel=\"nofollow noreferrer\">this endian manual page</a>) to convert big-endian to host encoding (and it does nothing if your host system is big-endian):</p>\n\n<pre><code>fileSize = be32toh(fileSize);\n</code></pre>\n\n<p>The closest function to this in the Windows API is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740069(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>ntohl</code></a>, which could be used in a similar way.</p>\n\n<hr>\n\n<p>It's not hard to implement absolute byte-swapping functions, or even macros, for this:</p>\n\n<pre><code>inline uint16_t byteswap16(uint16_t value)\n{\n    return (value &amp; 0xff) &lt;&lt; 8 | (value &gt;&gt; 8);\n}\n\ninline uint32_t byteswap32(uint32_t value)\n{\n    return byteswap16(value &amp; 0xffff) &lt;&lt; 16 | byteswap16(value &gt;&gt; 16);\n}\n\n...\nfileSize = byteswap32(fileSize);\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 6458520, "user_type": "registered", "profile_image": "https://graph.facebook.com/478730552338254/picture?type=large", "display_name": "Mudit", "link": "https://stackoverflow.com/users/6458520/mudit"}, "is_accepted": false, "score": 0, "last_activity_date": 1520430893, "last_edit_date": 1592644375, "creation_date": 1520429964, "answer_id": 49153321, "question_id": 49152350, "link": "https://stackoverflow.com/questions/49152350/array-of-hex-values-to-decimal/49153321#49153321", "title": "Array of HEX Values to Decimal", "body": "<p>Answer given by Serge Ballesta is correct, however there is one other dirty but short trick to do this.</p>\n<pre><code>int main() {\nchar data[]={0xce,0xee,0,0};\nint *ptr;\nptr=data;\nprintf(&quot;%d\\n&quot;,*ptr);\n//if you want to store this result\nint x=*ptr;\nprintf(&quot;%d\\n&quot;,x);\nreturn 0;\n}\n</code></pre>\n<p>This way you won't even have to reverse your bytes.</p>\n<p>Output:</p>\n<blockquote>\n<p>61134</p>\n<p>61134</p>\n</blockquote>\n<p>Here compiler itself takes care of the endianess</p>\n"}], "owner": {"reputation": 13, "user_id": 9456593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e6b5514358e897b56dc687d1a8d92?s=128&d=identicon&r=PG&f=1", "display_name": "Cian", "link": "https://stackoverflow.com/users/9456593/cian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 49152981, "answer_count": 5, "score": 1, "last_activity_date": 1520430893, "creation_date": 1520426828, "question_id": 49152350, "link": "https://stackoverflow.com/questions/49152350/array-of-hex-values-to-decimal", "title": "Array of HEX Values to Decimal", "body": "<p>I'm reading in HEX values from a file into an array.</p>\n\n<p>The part of the buffer I'm using is contains 4 bytes in Hex -> CE EE 00 00</p>\n\n<pre><code>unsigned int fileLocationOffset = 64;\nunsigned char fileSize[4]; //This is actually in a struct. \n                           //Putting here for purposes of this question\nunsigned char buff[sizeOfRoot];\n\nfseek(fp, startOfRoot, SEEK_SET); //Seek to point in file fp\nfread(buff, 1, sizeOfRoot, fp);   //Save contents to a buffer\n\n//Read in 4 Bytes backwards to put as Big-Endian\nfor(int z = 31; z &gt; 27; z--){\n    fileSize[31 - z] = buff[fileLocationOffset + z];\n}\n\n//TEST: Print Values at each element to see if correct\nfor(int z = 0; z &lt; 4; z++){\n  printf(\"%X \", fileSize[z]);\n}\n// Output: 0 0 EE CE &lt;- Correct\n</code></pre>\n\n<p>So, I know that my fileSize array contains the correct values, but now I need to convert 0x00EECE to a decimal.</p>\n\n<p>Could somebody please advise how I should go about doing this?</p>\n"}, {"tags": ["c", "sockets", "server"], "comments": [{"owner": {"reputation": 5291, "user_id": 2225960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbe6ed4dfe3277edd4921b31ad78d05?s=128&d=identicon&r=PG&f=1", "display_name": "Juan", "link": "https://stackoverflow.com/users/2225960/juan"}, "edited": false, "score": 0, "creation_date": 1520426900, "post_id": 49152320, "comment_id": 85308864, "body": "Yes, when you talk to the browser you have to do it in a language it understands. It is the same with any protocol (FTP, SSH, ...)"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1520426920, "post_id": 49152320, "comment_id": 85308883, "body": "Yes. Your response is not valid HTTP and thus Firefox rejects it, use a HTTP response skeleton snippet somewhere and work from there."}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1520427012, "post_id": 49152320, "comment_id": 85308959, "body": "this may be handy: <a href=\"https://www.mocky.io/\" rel=\"nofollow noreferrer\">mocky.io</a>"}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 7517228, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b05d9d15903240b9a297c4b47d8dae64?s=128&d=identicon&r=PG&f=1", "display_name": "ssh", "link": "https://stackoverflow.com/users/7517228/ssh"}, "edited": false, "score": 0, "creation_date": 1520427539, "post_id": 49152373, "comment_id": 85309351, "body": "So after the HTTP headers, we have to give 2 newlines and then the content which we want to display. Am I right?"}, {"owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "reply_to_user": {"reputation": 401, "user_id": 7517228, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b05d9d15903240b9a297c4b47d8dae64?s=128&d=identicon&r=PG&f=1", "display_name": "ssh", "link": "https://stackoverflow.com/users/7517228/ssh"}, "edited": false, "score": 0, "creation_date": 1520427581, "post_id": 49152373, "comment_id": 85309381, "body": "@ssh Yes, exactly."}], "tags": [], "owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "is_accepted": true, "score": 4, "last_activity_date": 1520427699, "last_edit_date": 1520427699, "creation_date": 1520426920, "answer_id": 49152373, "question_id": 49152320, "link": "https://stackoverflow.com/questions/49152320/simple-tcp-server-cant-output-to-web-browser/49152373#49152373", "title": "Simple TCP server can&#39;t output to web browser", "body": "<blockquote>\n  <p>What is the problem? Is browser also expecting HTTP type response from the server? As the server is sending plain text, web browser can't display the contents. Is this the reason for the error displayed in web browser?</p>\n</blockquote>\n\n<p><strong>Yes</strong>, the browser expects a HTTP response.</p>\n\n<p>Here a simple HTTP response:</p>\n\n<pre><code>HTTP/1.1 200 OK\nContent-Type: text/plain\nContent-Length: 12\n\nHello world!\n</code></pre>\n\n<p>C Code snippet:</p>\n\n<pre><code>const char *hello = \"HTTP/1.1 200 OK\\r\\nContent-Type: text/plain\\r\\nContent-Length: 12\\r\\n\\r\\nHello world!\";\n</code></pre>\n\n<p>Parts explained:</p>\n\n<p><code>HTTP/1.1</code> specifies the HTTP protocol version.</p>\n\n<p><code>200 OK</code> is the so called <strong>response status</strong>. 200 means no error.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\" rel=\"nofollow noreferrer\">List of HTTP status codes (wikipedia)</a></p>\n\n<p><code>Content-Type</code> and <code>Content-Length</code> are http headers:</p>\n\n<ul>\n<li><p><code>Content-Type</code> refers to the content type (who would've guessed?). <code>text/plain</code> means plaintext. (There is also <code>text/html</code>, <code>image/png</code> etc..)</p></li>\n<li><p><code>Content-Length</code> total size of the response in bytes.  </p></li>\n</ul>\n"}], "owner": {"reputation": 401, "user_id": 7517228, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b05d9d15903240b9a297c4b47d8dae64?s=128&d=identicon&r=PG&f=1", "display_name": "ssh", "link": "https://stackoverflow.com/users/7517228/ssh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 49152373, "answer_count": 1, "score": 2, "last_activity_date": 1520427699, "creation_date": 1520426757, "question_id": 49152320, "link": "https://stackoverflow.com/questions/49152320/simple-tcp-server-cant-output-to-web-browser", "title": "Simple TCP server can&#39;t output to web browser", "body": "<p>I wrote a simple TCP client and server program in C language.</p>\n\n<p>It works fine among them but I have a doubt.</p>\n\n<p>What if I wanted to access the TCP server from the web server?</p>\n\n<p>I got the headers from web server and I can't <code>write()</code> back to the web browser. Should the response be in <code>HTTP</code> specifications compulsorily?</p>\n\n<p><strong>I get the following error</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iLOMz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iLOMz.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Server Code:</strong></p>\n\n<pre><code>// Server side C program to demonstrate Socket programming\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n#define PORT 8080\nint main(int argc, char const *argv[])\n{\n    int server_fd, new_socket; long valread;\n    struct sockaddr_in address;\n    int addrlen = sizeof(address);\n    char buffer[1024] = {0};\n    char *hello = \"Hello from server\";\n\n    // Creating socket file descriptor\n    if ((server_fd = socket(AF_INET, SOCK_STREAM, 0)) == 0)\n    {\n        perror(\"In socket\");\n        exit(EXIT_FAILURE);\n    }\n\n\n    address.sin_family = AF_INET;\n    address.sin_addr.s_addr = INADDR_ANY;\n    address.sin_port = htons( PORT );\n\n    // Forcefully attaching socket to the port 8080\n    if (bind(server_fd, (struct sockaddr *)&amp;address, sizeof(address))&lt;0)\n    {\n        perror(\"In bind\");\n        exit(EXIT_FAILURE);\n    }\n    if (listen(server_fd, 3) &lt; 0)\n    {\n        perror(\"In listen\");\n        exit(EXIT_FAILURE);\n    }\n    while(1)\n    {\n        if ((new_socket = accept(server_fd, (struct sockaddr *)&amp;address, (socklen_t*)&amp;addrlen))&lt;0)\n        {\n            perror(\"In accept\");\n            exit(EXIT_FAILURE);\n        }\n        valread = read( new_socket , buffer, 1024);\n        printf(\"%s\\n\",buffer );\n        write(new_socket , hello , strlen(hello));\n        printf(\"Hello message sent\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>GET / HTTP/1.1\nHost: localhost:8080\nConnection: keep-alive\nCache-Control: max-age=0\nUpgrade-Insecure-Requests: 1\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\nDNT: 1\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.9\n\n\n\nHello message sent\n</code></pre>\n\n<p>What is the problem? Is browser also expecting <code>HTTP</code> type response from the server? As the server is sending plain text, web browser can't display the contents. Is this the reason for the error displayed in web browser?</p>\n"}, {"tags": ["c", "multithreading", "memory-leaks", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1520442259, "post_id": 49152167, "comment_id": 85319752, "body": "How do you know there is a leak? What valgrind have to say? What are you doing with threads? SDL rendering API is not multithreadable, even with mutexes."}, {"owner": {"reputation": 105, "user_id": 4419539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/293f2e1b13c279db7428945dcac170ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rameleu", "link": "https://stackoverflow.com/users/4419539/rameleu"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1520445620, "post_id": 49152167, "comment_id": 85321768, "body": "I&#39;m using Xcode <code>leaks</code> program, as Valgrind shows me an error when I try to start it. My threads are rendering using pthread mutexes, that&#39;s why I don&#39;t understand when you say &quot;SDL rendering API is not multithreadable&quot;, because it&#39;s working, and just leaking."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1520446551, "post_id": 49152167, "comment_id": 85322296, "body": "<a href=\"https://wiki.libsdl.org/CategoryRender\" rel=\"nofollow noreferrer\">wiki.libsdl.org/CategoryRender</a> &quot;This API is not designed to be used from multiple threads&quot;, with link to bugtracker that explains why. In some cases in may work (depending on OS and rendering backend), but in others it explodes. I don&#39;t think there is a point in fixing something that shouldn&#39;t work."}], "owner": {"reputation": 105, "user_id": 4419539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/293f2e1b13c279db7428945dcac170ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rameleu", "link": "https://stackoverflow.com/users/4419539/rameleu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520426278, "creation_date": 1520426278, "question_id": 49152167, "link": "https://stackoverflow.com/questions/49152167/leaks-in-sdl2-when-printing-pixels", "title": "Leaks in SDL2 when printing pixels", "body": "<p>I'm developing an application using SDL2, and I'm facing some leaks which seems related to the <code>SDL_RenderDrawPoint</code> function.</p>\n\n<p>My code where the leaks happens looks like this</p>\n\n<pre><code>void        set_img_pixel(t_img *img, int x, int y, t_color color)\n{\n    if (x &gt;= 0 &amp;&amp; x &lt; img-&gt;res.width &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; img-&gt;res.height)\n    {\n        pthread_setcancelstate(PTHREAD_CANCEL_DISABLE, NULL);\n        pthread_mutex_lock(&amp;img-&gt;mutex);\n        SDL_SetRenderTarget(img-&gt;renderer, img-&gt;img);\n        SDL_SetRenderDrawColor(img-&gt;renderer, color.r * 255, color.g * 255,\n            color.b * 255, 255);\n        SDL_RenderDrawPoint(img-&gt;renderer, x, y);\n        pthread_mutex_unlock(&amp;img-&gt;mutex);\n        pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);\n    }\n}\n</code></pre>\n\n<p>When I try to comment out <code>SDL_SetRenderTarget</code> and <code>SDL_RenderDrawPoint</code>, I have no leaks.\nI have one leak on each thread of my app, and the leaks appears only when the thread(s) have finished their work, which means when they have finished rendering and they call <code>pthread_exit(NULL)</code>.</p>\n\n<p>Here is the function which calls my <code>set_img_pixel</code></p>\n\n<pre><code>static int      render_scene_p2(t_env *env)\n{\n    int             x;\n    int             y;\n    unsigned int    current_pixel_cpy;\n\n    ft_lock_mult_thread(env);\n    current_pixel_cpy = env-&gt;processed_pixels;\n    env-&gt;processed_pixels++;\n    ft_unlock_mult_thread(env);\n    if (current_pixel_cpy &gt;= (unsigned int)(env-&gt;scene-&gt;camera-&gt;res.height *\n        env-&gt;scene-&gt;camera-&gt;res.width))\n    {\n        env-&gt;finish = 0;\n        return (0);\n    }\n    y = current_pixel_cpy / env-&gt;scene-&gt;camera-&gt;res.width;\n    x = current_pixel_cpy % env-&gt;scene-&gt;camera-&gt;res.width;\n    set_img_pixel(&amp;env-&gt;bg_img, x, y, get_pixel_color(env, x, y));\n    return (1);\n}\n\nvoid            *render_scene(void *arg)\n{\n    t_env *env;\n\n    env = (t_env *)arg;\n    pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, NULL);\n    while (1)\n    {   \n        if (render_scene_p2(env) == 0)\n            break ;\n    }\n    pthread_exit(NULL);\n}\n</code></pre>\n"}, {"tags": ["c", "file", "text"], "comments": [{"owner": {"reputation": 19790, "user_id": 1430607, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AUcNJ.png?s=128&g=1", "display_name": "Luis Sieira", "link": "https://stackoverflow.com/users/1430607/luis-sieira"}, "edited": false, "score": 0, "creation_date": 1520442478, "post_id": 49151807, "comment_id": 85319883, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2229377/writing-an-integer-to-a-file-with-fputs\">Writing an integer to a file with fputs()</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 2, "creation_date": 1520425686, "post_id": 49151897, "comment_id": 85308068, "body": "<code>fputs()</code> doesn&#39;t add newlines. Only <code>puts()</code> does"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1520427462, "post_id": 49151897, "comment_id": 85309289, "body": "@IngoLeonhardt Oops, thanks, mis-read the manual page. Fixed, of course."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1520427451, "last_edit_date": 1520427451, "creation_date": 1520425437, "answer_id": 49151897, "question_id": 49151807, "link": "https://stackoverflow.com/questions/49151807/how-to-insert-variables-on-a-txt-with-fputs-c/49151897#49151897", "title": "How to insert variables on a .txt with fputs C", "body": "<p>This:</p>\n\n<pre><code>fputs(\"DNI cliente:\", file);\n</code></pre>\n\n<p>prints a static string to the file, which you then need to follow with the dynamic data:</p>\n\n<pre><code>fputs(dni, file);\n</code></pre>\n\n<p>You can also do:</p>\n\n<pre><code>fprintf(file, \"DNI cliente: %s\\n\", dni);\n</code></pre>\n\n<p>You should of course also check that the various I/O calls (including <code>scanf()</code>) succeed.</p>\n"}, {"tags": [], "owner": {"reputation": 1608, "user_id": 7757135, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/JQ8Kt.png?s=128&g=1", "display_name": "JuMoGar", "link": "https://stackoverflow.com/users/7757135/jumogar"}, "is_accepted": true, "score": 0, "last_activity_date": 1520433396, "last_edit_date": 1520433396, "creation_date": 1520425616, "answer_id": 49151946, "question_id": 49151807, "link": "https://stackoverflow.com/questions/49151807/how-to-insert-variables-on-a-txt-with-fputs-c/49151946#49151946", "title": "How to insert variables on a .txt with fputs C", "body": "<p>Try this:</p>\n\n<pre><code>char textoACopiar[100];\n\nstrcpy(textoACopiar, \"Este es tu DNI: \");\nstrcat(textoAcopiar, dni);\nfprintf(file, \"%s\\n\", textoACopiar);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5687, "user_id": 8572897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb978298f5ac01ecd8a41b5173ccf081?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Shankar Gupta", "link": "https://stackoverflow.com/users/8572897/jay-shankar-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1520426030, "last_edit_date": 1520426030, "creation_date": 1520425695, "answer_id": 49151976, "question_id": 49151807, "link": "https://stackoverflow.com/questions/49151807/how-to-insert-variables-on-a-txt-with-fputs-c/49151976#49151976", "title": "How to insert variables on a .txt with fputs C", "body": "<p>you can use <code>#include &lt;string.h&gt;</code> and merge them and write in file</p>\n\n<pre><code>char res[100]=\"DNI cliente: \";\nchar dni[100]=\"something\";\nstrcat(res,dni);\nprintf(\"%s\",res);\n</code></pre>\n\n<blockquote>\n  <p>Ouptput: DNI cliente: something</p>\n</blockquote>\n\n<p>Like This</p>\n\n<pre><code>char *result=malloc(strlen(\"DNI cliente: \")+strlen(dni)+1);\n  strcpy(result, \"DNI cliente: \");\n  strcat(result, dni);\n  printf(\"%s\",result);\n  fputs(result, file);\n  fclose(file);\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 8052144, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EtiomubZ7_w/AAAAAAAAAAI/AAAAAAAAGI8/mhm14Clx-fM/photo.jpg?sz=128", "display_name": "Trackless", "link": "https://stackoverflow.com/users/8052144/trackless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2208, "favorite_count": 0, "closed_date": 1520442478, "accepted_answer_id": 49151946, "answer_count": 3, "score": 0, "last_activity_date": 1520433396, "creation_date": 1520425169, "last_edit_date": 1520429054, "question_id": 49151807, "link": "https://stackoverflow.com/questions/49151807/how-to-insert-variables-on-a-txt-with-fputs-c", "closed_reason": "Needs details or clarity", "title": "How to insert variables on a .txt with fputs C", "body": "<p>I wanna introduce info on a txt, and i have this:</p>\n\n<pre><code>int main(){\n\n  FILE * file;\n\n  file=fopen(\"viajes.txt\", \"w\");\n  char select;\n  char dni[tm_dni];\n  printf(\"Introduce DNI:\\n\");\n  scanf(\"%s\", dni);\n  fputs(\"DNI cliente:\", file);\n}\n</code></pre>\n"}, {"tags": ["c", "select", "pthreads"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520424706, "post_id": 49151517, "comment_id": 85307432, "body": "Well, &#39;socket_nonblocking(&amp;connfd);&#39; why, when you are threading off the client&lt;&gt;server socket handling?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520424817, "post_id": 49151517, "comment_id": 85307503, "body": "What does &#39;rv = echo_content(&amp;t-&gt;fd);&#39; do, and what&#39;s with all the select() gunge in a one-thread-per-client server?"}, {"owner": {"reputation": 1337, "user_id": 154206, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/282e296a4edd6be96aadd7b39a970d71?s=128&d=identicon&r=PG", "display_name": "copyninja", "link": "https://stackoverflow.com/users/154206/copyninja"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520425705, "post_id": 49151517, "comment_id": 85308083, "body": "Hi Martin, non_blocking code was from the original legacy code base. Yes I can drop it. Also I&#39;ve added definition of echo_content function. Code can work without select I know but I&#39;m just curious why select is not indicating arrival of data."}], "answers": [{"comments": [{"owner": {"reputation": 1337, "user_id": 154206, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/282e296a4edd6be96aadd7b39a970d71?s=128&d=identicon&r=PG", "display_name": "copyninja", "link": "https://stackoverflow.com/users/154206/copyninja"}, "edited": false, "score": 0, "creation_date": 1520477951, "post_id": 49152522, "comment_id": 85334770, "body": "Thank you that FD_SET was the key :-). Also yes it indeed does not make sense to use 0 timeout and then sleep. I&#39;ve updated code to make select indefinitely block and dropped the sleep."}], "tags": [], "owner": {"reputation": 7193, "user_id": 765971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f390fb2ccc9321e41ca5bcd09cb9a9a?s=128&d=identicon&r=PG", "display_name": "SKi", "link": "https://stackoverflow.com/users/765971/ski"}, "is_accepted": true, "score": 1, "last_activity_date": 1520427789, "last_edit_date": 1520427789, "creation_date": 1520427336, "answer_id": 49152522, "question_id": 49151517, "link": "https://stackoverflow.com/questions/49151517/select-not-indicating-arrival-of-data-in-function-launched-by-pthread-create/49152522#49152522", "title": "select not indicating arrival of data in function launched by pthread_create", "body": "<p>There might be other problems too, but try to move the FD_SET() inside the loop:</p>\n\n<pre><code>  for (;;) {\n    FD_SET(t-&gt;fd, &amp;testfd);\n    int result = select(FD_SETSIZE, &amp;testfd, NULL, NULL, &amp;timeout);\n</code></pre>\n\n<p>AFIK, select() call modify fd-sets, and may remove testfd from the set.</p>\n\n<p>Another possible problem is the zero timeout of your select() call. man page of select says:</p>\n\n<blockquote>\n  <p>If both fields of the\n         timeval structure are zero, then select() returns immediately.  (This\n         is useful for polling.)  If timeout is NULL (no timeout), select()\n         can block indefinitely.</p>\n</blockquote>\n\n<p>You could also try the indefinitely timeout:</p>\n\n<pre><code>  for (;;) {\n    FD_SET(t-&gt;fd, &amp;testfd);\n    int result = select(FD_SETSIZE, &amp;testfd, NULL, NULL, NULL);\n</code></pre>\n\n<p>That way you can remove the ugly polling sleep: <code>usleep(1000);</code>.</p>\n"}], "owner": {"reputation": 1337, "user_id": 154206, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/282e296a4edd6be96aadd7b39a970d71?s=128&d=identicon&r=PG", "display_name": "copyninja", "link": "https://stackoverflow.com/users/154206/copyninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 49152522, "answer_count": 1, "score": 0, "last_activity_date": 1520427789, "creation_date": 1520424291, "last_edit_date": 1520425609, "question_id": 49151517, "link": "https://stackoverflow.com/questions/49151517/select-not-indicating-arrival-of-data-in-function-launched-by-pthread-create", "title": "select not indicating arrival of data in function launched by pthread_create", "body": "<p>I've written a simple multi-threaded TCP echo server for experimenting with threads. Below is the code for my main function.</p>\n\n<pre><code>#include \"server_lib.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;pthread.h&gt;\n#include &lt;errno.h&gt;\n\n\nint main(int argc, char *argv[]) {\n  Server s = setup_socket();\n  pthread_t clients[MAX_CLIENT];\n\n  int connfd, rv = 0;\n\n  client_data.client_number = 0;\n  for(;;) {\n    connfd = accept(s.sockfd, (struct sockaddr*)&amp;s.sa, (socklen_t*)&amp;s.addrlen);\n\n    if (connfd &lt; 0 &amp;&amp; errno != EAGAIN)\n      handle_error(\"accept failed\");\n\n    if (connfd &gt; 0) {\n      client_data.client_number++;\n      if (client_data.client_number &lt;= MAX_CLIENT) {\n        socket_nonblocking(&amp;connfd);\n        disable_nagles_algo(&amp;connfd);\n\n        /* Send the client number to client first */\n        rv = send(connfd, (void *)&amp;client_data.client_number,\n                  sizeof(client_data.client_number), 0);\n        ThreadDataT *t = (ThreadDataT*)malloc(sizeof(ThreadDataT));\n        t-&gt;fd = connfd;\n\n        if (pthread_create(&amp;clients[client_data.client_number-1], NULL, HandleMessage, (void*)t) != 0){\n          handle_error(\"pthread_create failed\");\n        }\n        /* Lets close our copy of connfd */\n      }\n        else {\n          rv = send(connfd, \"Max clients reached!\\n\", 21, 0);\n          client_data.client_number--;\n          close(connfd);\n        }\n    }\n\n    usleep(100000);\n  }\n\n  close(s.sockfd);\n}\n</code></pre>\n\n<p>Here is the code for HandleMessage function which is called via pthread_create.</p>\n\n<pre><code>void* HandleMessage(void *data) {\n  /* Lets detach first */\n  pthread_detach(pthread_self());\n\n  struct timeval timeout;\n  timeout.tv_sec = 0;\n  timeout.tv_usec = 0;\n\n  ThreadDataT *t = (ThreadDataT*)data;\n  fd_set testfd;\n\n  FD_ZERO(&amp;testfd); FD_SET(t-&gt;fd, &amp;testfd);\n\n  int rv = 0;\n\n  for (;;) {\n    int result = select(FD_SETSIZE, &amp;testfd, NULL, NULL, &amp;timeout);\n    if (result &lt; 0) {\n      perror(\"select failed\");\n      pthread_exit(&amp;result);\n    }\n\n\n    if (result &gt; 0) {\n      if(FD_ISSET(t-&gt;fd, &amp;testfd)) {\n        /* We have some data */\n        rv = echo_content(&amp;t-&gt;fd);\n        if (rv &lt; 0) {\n          if (rv != -10)\n            perror(\"echo_content failed\");\n          close(t-&gt;fd);\n          free(t);\n          pthread_exit(NULL);\n        }\n      }\n    }\n\n    usleep(1000);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Below is code for echo_content function as requested in comment.</p>\n\n<pre><code>int echo_content(int *connfd) {\n  unsigned char buffer[2048];\n  int size = recv(*connfd, buffer, sizeof(buffer), 0);\n  if (size &lt; 0)\n    handle_error(\"recv\");\n\n  if (size &gt; 0) {\n    if (strstr((const char*)buffer, \"quit\") != NULL){\n      printf(\"Closing connection with client\\n\");\n      send(*connfd, \"bye\\n\", 4, 0);\n      return -10;\n    }\n\n    size = send(*connfd, buffer, size, 0);\n  } else\n    printf(\"WARNING: Failed to recieve data\\n\");\n\n  return size;\n}\n</code></pre>\n\n<p>Data structures used by code are defined as follows.</p>\n\n<pre><code>#ifndef __SERVER_LIB_H__\n#define __SERVER_LIB_H__\n\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#include &lt;sys/select.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/ioctl.h&gt;\n\n#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netinet/tcp.h&gt;\n\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;pthread.h&gt;\n\n#define handle_error(msg) \\\n  do { perror(msg); exit(EXIT_FAILURE); } while(0)\n\n#define PORT 50000\n#define MAX_CLIENT 2\n\ntypedef struct {\n  int sockfd;\n  struct sockaddr_in sa;\n  int addrlen;\n} Server;\n\ntypedef unsigned char ClientNumber;\n\ntypedef struct {\n  ClientNumber clients[MAX_CLIENT];\n  short client_number;\n} ClientDataT;\n\nClientDataT client_data;;\n\ntypedef struct {\n  int fd;\n} ThreadDataT;\n\nServer setup_socket(void);\nint echo_content(int *);\nvoid socket_nonblocking(int *);\nvoid disable_nagles_algo(int *);\nvoid* HandleMessage(void*);\n\n#endif /* __SERVER_LIB_H__ */\n</code></pre>\n\n<p>After compiling above code and I can connect to it using telnet. I did not see the client number sent by server in telnet. Next I entered some message and was expecting it to echoed back but that did not happen.</p>\n\n<p>While debugging I noticed that select system call in HandleMEssage always returns 0 no matter what I enter at client side. Just to test I then set writefds argument of select and then select returns value > 0 and indicates socket is expecting to be written. The same code was working with fork model. (The fork based code is <a href=\"https://github.com/copyninja/tls-echo-server/blob/master/src/server.c\" rel=\"nofollow noreferrer\">here</a>). </p>\n\n<p>Code is almost similar to fork based one, so I'm bit lost on why it is not working. Can any one point me on what I might be doing wrong here?.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 628, "user_id": 8939165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gchW.jpg?s=128&g=1", "display_name": "Fabio_MO", "link": "https://stackoverflow.com/users/8939165/fabio-mo"}, "edited": false, "score": 0, "creation_date": 1520420321, "post_id": 49150209, "comment_id": 85304654, "body": "Try printf(&quot;%03d&quot;, Number);"}, {"owner": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "edited": false, "score": 0, "creation_date": 1520420333, "post_id": 49150209, "comment_id": 85304664, "body": "<a href=\"https://stackoverflow.com/questions/153890/printing-leading-0s-in-c\" title=\"printing leading 0s in c\">stackoverflow.com/questions/153890/printing-leading-0s-in-c</a>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1520420431, "post_id": 49150209, "comment_id": 85304730, "body": "<i>I also have another variable that which is equal to exactly 12</i> -- what do you mean? <code>Number</code> is also exactly 12."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1520420436, "post_id": 49150209, "comment_id": 85304734, "body": "What exactly are you trying to do? Do you really always have three variables containing digits for the number? What does &quot;check the difference&quot; mean? How do you report the difference between the string &quot;012&quot; and the number 12?"}], "answers": [{"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 1, "last_activity_date": 1520420656, "creation_date": 1520420656, "answer_id": 49150356, "question_id": 49150209, "link": "https://stackoverflow.com/questions/49150209/how-to-check-the-difference-between-012-and-12/49150356#49150356", "title": "How to check the difference between 012 and 12?", "body": "<p>Just use  a <code>if</code> statement like below:-</p>\n\n<pre><code>int diff = 0;\nif ( Number &gt; number2 )\n{\n    diff = Number - number2;\n    printf(\"Number is greater than number2 by %d\\n\", diff);\n}\nelse if( number2 &gt; Number )\n{\n    diff = number2 - Number;\n    printf(\"number2 is greater than Number by %d\\n\", diff);\n}\nelse\n     printf(\"Numbers are equal \\n\");\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 9445965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73b3c5e8539b74049577c68b6275e21?s=128&d=identicon&r=PG&f=1", "display_name": "blackwater7", "link": "https://stackoverflow.com/users/9445965/blackwater7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1520420701, "answer_count": 1, "score": -2, "last_activity_date": 1520420656, "creation_date": 1520420199, "last_edit_date": 1520420338, "question_id": 49150209, "link": "https://stackoverflow.com/questions/49150209/how-to-check-the-difference-between-012-and-12", "closed_reason": "Needs details or clarity", "title": "How to check the difference between 012 and 12?", "body": "<p>I will directly get to the point.</p>\n\n<pre><code>int a,b,c, Number;\na=0;\nb=1;\nc=2;\n\nNumber = (a*100)+(b*10)+(c*1);\n\nprintf(\"%d\", Number);\n</code></pre>\n\n<p>Result is 12. </p>\n\n<p>I also have another variable that which is equal to exactly 12. </p>\n\n<pre><code>int number2 = 12;\n</code></pre>\n\n<p>Now I have to check the difference between them. How do I do that?</p>\n"}, {"tags": ["c", "oracle-pro-c", "embedded-sql"], "comments": [{"owner": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "edited": false, "score": 0, "creation_date": 1520420933, "post_id": 49149927, "comment_id": 85305082, "body": "What happened when you tried wrapping them in a declare section?"}, {"owner": {"reputation": 233, "user_id": 4778225, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f69d183ba8067a990c4d2b57a2d861c?s=128&d=identicon&r=PG&f=1", "display_name": "Hassaan", "link": "https://stackoverflow.com/users/4778225/hassaan"}, "reply_to_user": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "edited": false, "score": 0, "creation_date": 1520504510, "post_id": 49149927, "comment_id": 85346447, "body": "I asked because there were many hurdles in making a standalone test program in my environment..."}], "answers": [{"tags": [], "owner": {"reputation": 233, "user_id": 4778225, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f69d183ba8067a990c4d2b57a2d861c?s=128&d=identicon&r=PG&f=1", "display_name": "Hassaan", "link": "https://stackoverflow.com/users/4778225/hassaan"}, "is_accepted": true, "score": 0, "last_activity_date": 1520504409, "creation_date": 1520504409, "answer_id": 49170689, "question_id": 49149927, "link": "https://stackoverflow.com/questions/49149927/can-i-use-an-sql-declare-section-at-global-scope-in-proc/49170689#49170689", "title": "Can I use an SQL DECLARE section at global scope in Pro*C?", "body": "<p><strong>Yes, you can.</strong></p>\n\n<p>After much fiddling around, I finally managed to create a standalone Pro*C program to test this out, and I can confirm that it works.</p>\n"}], "owner": {"reputation": 233, "user_id": 4778225, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f69d183ba8067a990c4d2b57a2d861c?s=128&d=identicon&r=PG&f=1", "display_name": "Hassaan", "link": "https://stackoverflow.com/users/4778225/hassaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 49170689, "answer_count": 1, "score": 0, "last_activity_date": 1520504409, "creation_date": 1520419386, "question_id": 49149927, "link": "https://stackoverflow.com/questions/49149927/can-i-use-an-sql-declare-section-at-global-scope-in-proc", "title": "Can I use an SQL DECLARE section at global scope in Pro*C?", "body": "<p>I am trying to port a ~2000 line Pro*C program to C++ <em>(Pro*C++)</em>. It is full of global variables being used as host variables in SQL queries:</p>\n\n<pre><code>char var1;\nchar var2;\n\nint execute_query() {\n\n    // some code\n\n    EXEC SQL SELECT ... INTO :var1\n    EXEC SQL SELECT ... INTO :var2\n\n    // some code\n\n}\n</code></pre>\n\n<p>However, with <code>code=cpp</code> in the precompiler options, the <code>PARSE</code> option is set to <code>PARTIAL</code>, meaning the precompiler only recognises host variables declared in a <code>DECLARE</code> section.</p>\n\n<p>Can I just surround the global variables with a declare section?</p>\n\n<pre><code>EXEC SQL BEGIN DECLARE SECTION\n\n   char var1;\n   char var2;\n\nEXEC SQL END DECLARE SECTION\n\nint execute_query() {\n\n    // some code\n\n    EXEC SQL SELECT ... INTO :var1\n    EXEC SQL SELECT ... INTO :var2\n\n    // some code\n\n}\n</code></pre>\n\n<p>If not, is there another way to make the precompiler recognise the global variables without doing a lot of refactoring?</p>\n"}, {"tags": ["c", "linux", "multithreading"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520418146, "post_id": 49149214, "comment_id": 85303183, "body": "No code for S2?  Also, the code for all four threads is essentially the same, so why do you have four different functions?  That last argument in pthread_create() is useful for something:)"}, {"owner": {"reputation": 3, "user_id": 9233500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420d965af1cc5b38e29f7d6e250e5246?s=128&d=identicon&r=PG&f=1", "display_name": "Chandramohan V", "link": "https://stackoverflow.com/users/9233500/chandramohan-v"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520427937, "post_id": 49149214, "comment_id": 85309622, "body": "<code>pthread_cond_t condVar=PTHREAD_COND_INITIALIZER;</code> <code>pthread_mutex_t mutexVar1=PTHREAD_MUTEX_INITIALIZER;</code> <code>pthread_mutex_t mutexVar2=PTHREAD_MUTEX_INITIALIZER;</code> <code>pthread_mutex_t mutexVar3=PTHREAD_MUTEX_INITIALIZER;</code> <code>pthread_mutex_t mutexVar4=PTHREAD_MUTEX_INITIALIZER;</code>     <b>I have declared cond and mutex as per the code given above. I have assigned four different mutex for four different threads.Remaining codes were same as Scenario 1.</b>"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1520419156, "post_id": 49149557, "comment_id": 85303863, "body": "You are probably correct here, but it would have been nice to see the code for S2:("}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520419408, "post_id": 49149557, "comment_id": 85304053, "body": "@MartinJames True, but the description is pretty clearly UB: &quot;Instead of same mutex variable I have created <b>different mutex</b> to each thread.&quot;"}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 1, "last_activity_date": 1520418379, "creation_date": 1520418379, "answer_id": 49149557, "question_id": 49149214, "link": "https://stackoverflow.com/questions/49149214/threads-and-mutex-with-broadcast-signal/49149557#49149557", "title": "Threads and mutex with broadcast signal", "body": "<blockquote>\n  <p>Instead of same mutex variable I have created different mutex to each thread.While passing broadcast signal among the four,only one thread is getting triggered remaining threads were waiting for signal.</p>\n</blockquote>\n\n<p>That's a misuse of condition variables and undefined behavior. <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_cond_wait.html\" rel=\"nofollow noreferrer\">Per the POSIX <code>pthread_cond_wait()</code> documentation</a>:</p>\n\n<blockquote>\n  <p>When a thread waits on a condition variable, having specified a particular mutex to either the pthread_cond_timedwait() or the pthread_cond_wait() operation, a dynamic binding is formed between that mutex and condition variable that remains in effect as long as at least one thread is blocked on the condition variable. <strong>During this time, the effect of an attempt by any thread to wait on that condition variable using a different mutex is undefined.</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 3, "user_id": 9233500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420d965af1cc5b38e29f7d6e250e5246?s=128&d=identicon&r=PG&f=1", "display_name": "Chandramohan V", "link": "https://stackoverflow.com/users/9233500/chandramohan-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "closed_date": 1520433185, "accepted_answer_id": 49149557, "answer_count": 1, "score": 0, "last_activity_date": 1520487589, "creation_date": 1520417415, "last_edit_date": 1520487589, "question_id": 49149214, "link": "https://stackoverflow.com/questions/49149214/threads-and-mutex-with-broadcast-signal", "closed_reason": "Needs details or clarity", "title": "Threads and mutex with broadcast signal", "body": "<p><strong>In scenario 2 why all threads are not getting triggered?\nWhat is the problem with different mutex variable?</strong></p>\n\n<p><strong>Scenario 1 :</strong></p>\n\n<p>I am creating four threads.Each threads were assigned to different cores all four threads are waiting for signal with same conditional and mutex variable.While passing broadcast signal with same conditional variable all threads were getting triggered.</p>\n\n<pre><code>   #define _GNU_SOURCE\n    #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    #include&lt;unistd.h&gt;\n    #include&lt;pthread.h&gt;\n    #include&lt;sched.h&gt;    \npthread_cond_t condVar=PTHREAD_COND_INITIALIZER;        \npthread_mutex_t mutexVar=PTHREAD_MUTEX_INITIALIZER;        \nvoid *thread1(void *ptr)        \n{        \n    int iVar=1;        \n    printf(\"Thread %d\\n\",iVar);        \n    pthread_mutex_lock(&amp;mutexVar);        \n    pthread_cond_wait(&amp;condVar,&amp;mutexVar);        \n    pthread_mutex_unlock(&amp;mutexVar);        \n    printf(\"Thread %d is unblocked...\\n\",iVar);        \n}        \n\nvoid *thread2(void *ptr)        \n{        \n    int iVar=2;        \n    printf(\"Thread %d\\n\",iVar);        \n    pthread_mutex_lock(&amp;mutexVar);        \n    pthread_cond_wait(&amp;condVar,&amp;mutexVar);        \n    pthread_mutex_unlock(&amp;mutexVar);        \n    printf(\"Thread %d is unblocked...\\n\",iVar);        \n\n}        \n\nvoid *thread3(void *ptr)        \n{        \n    int iVar=3;        \n    printf(\"Thread %d\\n\",iVar);        \n    pthread_mutex_lock(&amp;mutexVar);        \n    pthread_cond_wait(&amp;condVar,&amp;mutexVar);        \n    pthread_mutex_unlock(&amp;mutexVar);        \n    printf(\"Thread %d is unblocked...\\n\",iVar);        \n\n}        \n\nvoid *thread4(void *ptr)        \n{        \n    int iVar=4;        \n    printf(\"Thread %d\\n\",iVar);        \n    pthread_mutex_lock(&amp;mutexVar);        \n    pthread_cond_wait(&amp;condVar,&amp;mutexVar);        \n    pthread_mutex_unlock(&amp;mutexVar);        \n    printf(\"Thread %d is unblocked...\\n\",iVar);        \n\n}        \n\n\nint main()        \n{        \n    int i,j=2;        \n    pthread_t t[4];        \n    cpu_set_t cpuset;        \n\n    pthread_create(&amp;t[0],0,thread1,0);\n    pthread_create(&amp;t[1],0,thread2,0);\n    pthread_create(&amp;t[2],0,thread3,0);\n    pthread_create(&amp;t[3],0,thread4,0);\n\n    for(i=0;i&lt;4;i++)            //Assign dedicated core for each thread\n    {\n        CPU_ZERO(&amp;cpuset);\n        CPU_SET(j,&amp;cpuset);\n        if((pthread_setaffinity_np(t[i],sizeof(cpu_set_t),&amp;cpuset))!=0)\n            perror(\"Set_affinity\");\n        j+=2;\n    }\n    sleep(5);\n    pthread_cond_broadcast(&amp;condVar);\n    while(1);\n}    \n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p>Thread 1</p>\n\n<p>Thread 4</p>\n\n<p>Thread 2</p>\n\n<p>Thread 3</p>\n\n<p>Thread 1 is unblocked...</p>\n\n<p>Thread 4 is unblocked...</p>\n\n<p>Thread 2 is unblocked...</p>\n\n<p>Thread 3 is unblocked...</p>\n\n<p><strong>Scenario 2:</strong></p>\n\n<p>Instead of same mutex variable I have created different mutex to each thread.While passing broadcast signal among the four,only one thread is getting triggered remaining threads were waiting for signal.</p>\n\n<p><strong>Output for scenario 2 :</strong></p>\n\n<p>Thread 1</p>\n\n<p>Thread 2</p>\n\n<p>Thread 4</p>\n\n<p>Thread 3</p>\n\n<p>Thread 1 is unblocked...</p>\n"}, {"tags": ["c", "network-programming", "linux-device-driver", "multicast"], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 9395411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/9395411/wolfgang"}, "edited": false, "score": 0, "creation_date": 1520603892, "post_id": 49181612, "comment_id": 85395528, "body": "I already opened a netlink socket and subscribed to all available groups. I tried &quot;ip monitor&quot; which does the same according to strace. All this provided no event in case of IP_ADD_MEMBERSHIP. And using the interface provided for mcast routing daemons is too complex for my application. As I&#39;m on an embedded system I ended up patching the kernel/TUN module. Thanks for your help."}], "tags": [], "owner": {"reputation": 2776, "user_id": 1987437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/508e14a7e9414311eff04b2fd8d20ed6?s=128&d=identicon&r=PG", "display_name": "Liam Kelly", "link": "https://stackoverflow.com/users/1987437/liam-kelly"}, "is_accepted": true, "score": 0, "last_activity_date": 1520539637, "creation_date": 1520539637, "answer_id": 49181612, "question_id": 49149074, "link": "https://stackoverflow.com/questions/49149074/event-when-a-multicast-address-is-added-to-the-tap-driver/49181612#49181612", "title": "Event when a multicast address is added to the tap driver", "body": "<p>Usespace routing daemons normally listen to a <a href=\"https://www.systutorials.com/docs/linux/man/7-rtnetlink/\" rel=\"nofollow noreferrer\">routing netlink socket</a> and <a href=\"http://bitsup.blogspot.com/2008/04/monitoring-ip-changes-with-netlink.html\" rel=\"nofollow noreferrer\">epoll</a> for status to react to events. I think that should give you the desired behavior.</p>\n\n<p>If you have to do more advanced multicast routing you may want to look into a special Linux kernel hook meant for multicast routing daemons to manage the multicast route table labeled CONFIG_IP_MROUTE.</p>\n\n<p>The mechanism is explained well in this article:\n<a href=\"http://www.linuxjournal.com/article/6070\" rel=\"nofollow noreferrer\">http://www.linuxjournal.com/article/6070</a></p>\n\n<p>An example of a simple multicast routing daemon that uses this hook is:\n<a href=\"http://troglobit.com/projects/smcroute/\" rel=\"nofollow noreferrer\">http://troglobit.com/projects/smcroute/</a></p>\n"}], "owner": {"reputation": 48, "user_id": 9395411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/9395411/wolfgang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 49181612, "answer_count": 1, "score": 0, "last_activity_date": 1520539637, "creation_date": 1520417031, "question_id": 49149074, "link": "https://stackoverflow.com/questions/49149074/event-when-a-multicast-address-is-added-to-the-tap-driver", "title": "Event when a multicast address is added to the tap driver", "body": "<p>I'm in the process of porting a user-space network driver to a newer linux version. </p>\n\n<p>The idea is to get rid of a custom kernel module that connected the network stack of the kernel to the driver and use TUN/TAP instead.</p>\n\n<p>The problem I face now is with adding/removing multicast addresses that the driver should listen to on the wire. </p>\n\n<p>I know how to obtain the list of current multicast addresses for the interface with </p>\n\n<pre><code>cat /proc/net/dev_mcast\n</code></pre>\n\n<p>But I don't get any event when the list changes.</p>\n\n<p>When the driver should listen to a new multicast address, user space calls: </p>\n\n<pre><code>struct ip_mreq group;\ngroup.imr_multiaddr.s_addr = inet_addr(\"226.1.1.1\");     // multicast address\ngroup.imr_interface.s_addr = inet_addr(\"172.16.72.100\"); // interface address\n\nsetsockopt(sd, IPPROTO_IP, IP_ADD_MEMBERSHIP, (char *) &amp;group, sizeof(group));\n</code></pre>\n\n<p>This leads in the kernel to a call of </p>\n\n<pre><code>struct net_device_op.ndo_set_rx_mode\n</code></pre>\n\n<p>The driver then can update its (hardware) multicast filters.</p>\n\n<p>Unfortunately the callback in the TAP driver is empty.</p>\n\n<p>Is there any alternative way to detect changes in the multicast reception (without polling)?</p>\n\n<p>I tried netlink messages, but the RTNLGRP_NEIGH doesn't report changes to the multicast addresses.</p>\n\n<p>Monitoring /proc/net/dev_mcast with inotify also doesn't work, as inotify is not supported on virtual file systems.</p>\n\n<p>Thanks,\n   Wolfgang</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1520416991, "post_id": 49149005, "comment_id": 85302467, "body": "Some stuff here. Not sure I particularly like the solutions though: <a href=\"https://stackoverflow.com/questions/16692586/converting-two-digit-number-to-words-using-switch-statement\" title=\"converting two digit number to words using switch statement\">stackoverflow.com/questions/16692586/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520416992, "post_id": 49149005, "comment_id": 85302468, "body": "One or more arrays might be useful. The (absolute) numbers, or digits from them, could be used as indexes."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1520417108, "post_id": 49149005, "comment_id": 85302541, "body": "Don&#39;t use <code>scanf()</code> to read user input. The <code>*scanf()</code> function family is for reading known-well-formatted data from file, not potentially malformed user input. (For that, read a whole line with <code>fgets()</code> and parse in-memory with e.g. <code>strtol</code>). -- If you DO use <code>scanf()</code>, ALWAYS check its return value. If the user entered something other than integers, your variables are not initialized. -- You only read one integer (only one <code>%d</code> in your format string). Your <code>number2</code> is always undefined. -- Consider defining an array of words, and using the integers from the user as index into those arrays."}, {"owner": {"reputation": 35, "user_id": 9455923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37160805e297717424a4787ae72e0951?s=128&d=identicon&r=PG&f=1", "display_name": "Taytayes", "link": "https://stackoverflow.com/users/9455923/taytayes"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520417250, "post_id": 49149005, "comment_id": 85302615, "body": "@Someprogrammerdude It says not to use anything other than what&#39;s mentioned in the OP, so I don&#39;t think I can use arrays (I haven&#39;t learn this either)"}, {"owner": {"reputation": 35, "user_id": 9455923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37160805e297717424a4787ae72e0951?s=128&d=identicon&r=PG&f=1", "display_name": "Taytayes", "link": "https://stackoverflow.com/users/9455923/taytayes"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1520417321, "post_id": 49149005, "comment_id": 85302650, "body": "@DevSolar I&#39;m not sure what you mean by check its return value. How would I do this? Also, I haven&#39;t learnt arrays and I don&#39;t think I&#39;m supposed to use anything other than what&#39;s mentioned in OP"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520417425, "post_id": 49149005, "comment_id": 85302722, "body": "Have you learned about <code>switch</code> or <code>if</code>? About division and modulo operators? About functions and how to return values from them? Use that then."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1520417435, "post_id": 49149005, "comment_id": 85302729, "body": "<code>scanf()</code> returns the number of items read successfully. You want to read two values, so if <code>scanf()</code> does not return <code>2</code>, something has gone wrong and you should abort the program. -- Have you learned <code>switch</code>? That would work as well."}, {"owner": {"reputation": 973, "user_id": 8068739, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1411013638978567/picture?type=large", "display_name": "Theo Walton", "link": "https://stackoverflow.com/users/8068739/theo-walton"}, "edited": false, "score": 1, "creation_date": 1520417843, "post_id": 49149005, "comment_id": 85303009, "body": "you can do it in around 20 if statements if thats ok? you just check if number is negative, print a <code>-</code>, check numbers 0 through 20 and then print their respective words, wrap that in a function like <code>void printwordnum(int n)</code> and then call it 3 times for each number."}, {"owner": {"reputation": 973, "user_id": 8068739, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1411013638978567/picture?type=large", "display_name": "Theo Walton", "link": "https://stackoverflow.com/users/8068739/theo-walton"}, "edited": false, "score": 1, "creation_date": 1520417971, "post_id": 49149005, "comment_id": 85303087, "body": "or if you can&#39;t use functions just copypaste the code 3 times :3"}, {"owner": {"reputation": 35, "user_id": 9455923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37160805e297717424a4787ae72e0951?s=128&d=identicon&r=PG&f=1", "display_name": "Taytayes", "link": "https://stackoverflow.com/users/9455923/taytayes"}, "edited": false, "score": 0, "creation_date": 1520418125, "post_id": 49149005, "comment_id": 85303169, "body": "Thanks everyone, I haven&#39;t learnt switch yet though."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1520418160, "post_id": 49149005, "comment_id": 85303195, "body": "If they haven&#39;t shown you this already, I mean to <code>if ( scanf( ... ) == 2 ) { &#47;* success, continue *&#47; } else { &#47;* insufficient input, abort *&#47; }</code>. And they really <i>should</i> have taught you these things before setting you a problem that you have to solve with one hand tied behind your back..."}, {"owner": {"reputation": 35, "user_id": 9455923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37160805e297717424a4787ae72e0951?s=128&d=identicon&r=PG&f=1", "display_name": "Taytayes", "link": "https://stackoverflow.com/users/9455923/taytayes"}, "reply_to_user": {"reputation": 973, "user_id": 8068739, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1411013638978567/picture?type=large", "display_name": "Theo Walton", "link": "https://stackoverflow.com/users/8068739/theo-walton"}, "edited": false, "score": 0, "creation_date": 1520418378, "post_id": 49149005, "comment_id": 85303351, "body": "@Theo Walton How would I &quot;print their respective words&quot;? Would I do something like  if (&amp;number1 == 1 &amp;&amp; &amp;number 2 == 1){ printf(&quot;one + one = two&quot;); } ?   (like I did in OP). Yeah I can&#39;t use functions."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520419482, "post_id": 49149005, "comment_id": 85304103, "body": "why not make a table: <code>char *digits[] = {&quot;zero&quot;,&quot;one&quot;,&quot;two&quot; ...}</code>"}, {"owner": {"reputation": 35, "user_id": 9455923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37160805e297717424a4787ae72e0951?s=128&d=identicon&r=PG&f=1", "display_name": "Taytayes", "link": "https://stackoverflow.com/users/9455923/taytayes"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520419719, "post_id": 49149005, "comment_id": 85304271, "body": "@Jean-Fran&#231;oisFabre I can&#39;t use &#39;char&#39;"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 3, "creation_date": 1520421149, "post_id": 49149005, "comment_id": 85305216, "body": "Are you sure that you cannot at least use functions? This assignment seems pretty pointless to me, unless the idea is to teach you how <i>not</i> to write computer programs."}, {"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1520424921, "post_id": 49149005, "comment_id": 85307589, "body": "only use &amp;number1 in the <code>scanf()</code> function <b>&quot;command&quot;</b>. The <b>&#39;&amp;&#39;</b> character when used right before a variable name becomes the <b>address_of</b> operator. If you have not learned functions, nor arrays I would find really absurd that you have learned pointers. Use <code>if (number1 == 1 &amp;&amp; number2 == 1)</code> instead, like in the code on your question"}, {"owner": {"reputation": 35, "user_id": 9455923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37160805e297717424a4787ae72e0951?s=128&d=identicon&r=PG&f=1", "display_name": "Taytayes", "link": "https://stackoverflow.com/users/9455923/taytayes"}, "reply_to_user": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1520425473, "post_id": 49149005, "comment_id": 85307920, "body": "@JennyT-Type Thank you for the comment. My instructor says we just use &#39;&amp;&#39; in scanf() to tell the program to &quot;store the input into these variables&quot;, it&#39;s the first time i&#39;ve heard the term &#39;pointers&#39; or &#39;address_of&#39;. Does it screw up my code if I use two ampersands as I originally did?"}, {"owner": {"reputation": 35, "user_id": 9455923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37160805e297717424a4787ae72e0951?s=128&d=identicon&r=PG&f=1", "display_name": "Taytayes", "link": "https://stackoverflow.com/users/9455923/taytayes"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1520425557, "post_id": 49149005, "comment_id": 85307975, "body": "@Groo Yeah, we can&#39;t use functions"}, {"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1520426870, "post_id": 49149005, "comment_id": 85308838, "body": "@Taytayes using them inside the <code>scanf()</code> parenthesis is okay, like I said, the use of the &#39;&amp;&#39; on your OP is actually okay. Sorry if I didn&#39;t express that clearly, About pointers, that is a more advanced topic, which you should encounter after you learn arrays."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1520428044, "post_id": 49149005, "comment_id": 85309709, "body": "@Taytayes: Generally speaking, and seconding Groo here, if you have <i>any</i> choice in the matter, find a different instructor. I am serious. This is a very, <i>very</i> poor way to introduce people to programming. He&#39;s making you jump through hoops that simply are not necessary once you&#39;ve learned the mechanisms that would make this very, very easy. Which means you will have to <i>re-learn</i> things after the next lesson. This should never be done in teaching."}], "answers": [{"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 4, "creation_date": 1520421702, "post_id": 49150412, "comment_id": 85305512, "body": "The assignment is completely ridiculous, but I believe OP can at least handle the &quot;negative&quot; part separately? I.e. <code>if (a &lt; 0) { a = -a; printf(&quot;negative&quot;); }</code>."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1520424417, "post_id": 49150412, "comment_id": 85307219, "body": "Using <code>scanf()</code> without checking return value."}, {"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1520424598, "post_id": 49150412, "comment_id": 85307359, "body": "@DevSolar I think, since the OP hasn&#39;t seen functions he wouldn&#39;t know about return values."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1520424975, "post_id": 49150412, "comment_id": 85307628, "body": "@JennyT-Type: No reason not to showcase proper use in an answer. Besides, <i>this</i> answer in particular <i>also</i> copy-pasted the error that it only ever reads <i>one</i> value, so it&#39;s UB no matter what the user enters..."}, {"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1520425704, "post_id": 49150412, "comment_id": 85308082, "body": "@DevSolar Ops I missed that UB. <code>scanf(&quot;%d&quot;,&amp;number1,&amp;number2);</code>dealing with other UB right now xD, do you think I should try and edit the answer?."}, {"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1520427997, "post_id": 49150412, "comment_id": 85309666, "body": "@tom we&#39;re on a race here!"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1520428129, "post_id": 49150412, "comment_id": 85309767, "body": "@JennyT-Type  --- ahhh hmm... excuse me ? sorry don&#39;t understand"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1520428191, "post_id": 49150412, "comment_id": 85309821, "body": "@DevSolar ok -- that edit is coming... (now I know what you mean about the race.. jenny)"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1520428860, "post_id": 49150412, "comment_id": 85310249, "body": "@Groo - yes - I was wondering about just stopping the program if there was incorrect data input, but thought that might be too extreme.... but it is a good point and I will include it in the next edit...."}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1520429201, "post_id": 49150412, "comment_id": 85310492, "body": "@Groo like your comment at the top about negative numbers - will try to put that in now... and there is also zero of course....."}], "tags": [], "owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "is_accepted": false, "score": 4, "last_activity_date": 1520429493, "last_edit_date": 1520429493, "creation_date": 1520420850, "answer_id": 49150412, "question_id": 49149005, "link": "https://stackoverflow.com/questions/49149005/how-to-convert-numbers-to-words-using-basic-commands-in-c/49150412#49150412", "title": "How to convert numbers to words using basic commands in C", "body": "<blockquote>\n  <p>The only commands I'm using are if's, else if's, else, printf, scanf, int.  </p>\n</blockquote>\n\n<p>I agree with you that this looks pretty tedious.</p>\n\n<p>The one point that I would like to make is that you can do each number individually - which will make it less tedious. </p>\n\n<p>For example, modifying your code...  (<em>note this is not going to be compilable - just modified a bit to give a suggestion</em>)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    int number1;\n    int number2;\n    int sum;\n    int inputs;\n\n    printf(\"Please enter two integers: \");\n\n     // scanf replaced with new one including while\n     // the first statement below will work provided the user provides the \n     // correct input data....\n     //\n     // scanf(\"%d %d\",&amp;number1,&amp;number2); // added second %d - need two %d  one for each number\n    //\n    // would be better to this next scanf command below...\n    // if scanf doesn't work due to bad input it will tell the user\n    // while (scanf(\"%d %d\",&amp;number1,&amp;number2) !=2) printf(\"incorrect input\\nPlease enter two integers: \"); \n    // but this uses 'while' which you haven't used yet if I understand correctly\n    // \n    inputs = scanf(\"%d %d\",&amp;number1,&amp;number2);\n    if (inputs!=2) {\n      printf(\"Incorrect input data\\n\"); \n      return 1;\n    }\n    // if scanf works inputs will have the value 2\n    //\n    // this if statement stops the program if inputs is not equal to 2\n    // \n    sum = number1 + number2\n\n    // the next bit suggested by Groo handles negative numbers nicely....\n    if (number1 &lt; 0) { \n      number1 = -number; printf(\"negative \"); \n    }\n    // if (number1 &gt; 0 &amp;&amp; number2 &gt; 0) \n    if (number1 == 0) {\n       printf(\"zero\");\n    }\n    else if (number1 == 1) {\n        printf(\"one\");\n    } else if (number1 == 2) {\n      printf(\"two\");\n    } else if(number1 == 3) {\n      printf(\"three\");\n    } else if(number1 == 4) {\n      printf(\"four\");\n    } else if(number1 == 5) {\n      printf(\"five\");\n    } else if(number1 == 6) {\n      printf(\"six\");\n    } else if (number1 == 7) {\n      printf(\"seven\");\n    } else if(number1 == 8) {\n      printf(\"eight\");\n    } else if(number1 == 9) {\n      printf(\"nine\");\n    } else if (number1 == 10) {\n      printf(\"ten\");\n    } else  {\n      printf(\"unknown number\");\n    } \n    printf(\" + \");\n     // now insert similar if statements to print number2 ....\n      ....\n\n  return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>hope this is a useful suggestion - if I had to do this I would be using arrays, which I guess you will learn about soon.</p>\n"}, {"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1520424404, "post_id": 49151261, "comment_id": 85307212, "body": "Using <code>scanf()</code> without checking return value."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1520425518, "post_id": 49151261, "comment_id": 85307953, "body": "This is nonsense, use arrays."}], "tags": [], "owner": {"reputation": 1, "user_id": 9428740, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JHermo", "link": "https://stackoverflow.com/users/9428740/jhermo"}, "is_accepted": false, "score": -2, "last_activity_date": 1520423464, "creation_date": 1520423464, "answer_id": 49151261, "question_id": 49149005, "link": "https://stackoverflow.com/questions/49149005/how-to-convert-numbers-to-words-using-basic-commands-in-c/49151261#49151261", "title": "How to convert numbers to words using basic commands in C", "body": "<p>I suggest to do an auxiliary function</p>\n\n<pre><code>void numberName(int number){\n\n  if (number &lt; 0){\n      printf(\"negative \");\n      number=number*(-1);\n  }\n  if(number == 0){\n      printf(\"zero\");\n  }else if (number == 1){\n      printf(\"one\");\n  }else if (number == 2){\n      printf(\"two\");\n  }else if (number == 3){\n      printf(\"three\");\n  }else if (number == 4){\n      printf(\"four\");\n  }else if (number == 5){\n      printf(\"five\");\n  }else if (number == 6){\n      printf(\"six\");\n  }else if (number == 7){\n      printf(\"seven\");\n  }else if (number == 8){\n      printf(\"eight\");\n  }else if (number == 9){\n      printf(\"nine\");\n  }else if (number == 10){\n      printf(\"ten\");\n  }\n}\n</code></pre>\n\n<p>and in your main() code call this function like this:</p>\n\n<pre><code>numberName(number1);\nprintf(\" + \");\nnumberName(number2);\nprintf(\" = \");\nnumberName(sum);\nprintf(\"\\n\");\n</code></pre>\n\n<p>By the way, watch your code, the scan function should be:</p>\n\n<pre><code>scanf(\"%d%d\",&amp;number1,&amp;number2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2308, "user_id": 7963542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WeDjh.png?s=128&g=1", "display_name": "davecar21", "link": "https://stackoverflow.com/users/7963542/davecar21"}, "edited": false, "score": 2, "creation_date": 1520423897, "post_id": 49151273, "comment_id": 85306871, "body": "can you try to explain how you come up with this solution?"}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1520424707, "post_id": 49151273, "comment_id": 85307433, "body": "The size of <code>digits[]</code> needn&#39;t be 20. Maybe it&#39;s better not to specify the size. Let the compiler figure it out. And you haven&#39;t provided a string for 10."}, {"owner": {"reputation": 81, "user_id": 7439929, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dp3YaeroH08/AAAAAAAAAAI/AAAAAAAADdk/LrUJFyyoAV0/photo.jpg?sz=128", "display_name": "Karthika", "link": "https://stackoverflow.com/users/7439929/karthika"}, "edited": false, "score": 0, "creation_date": 1520424806, "post_id": 49151273, "comment_id": 85307493, "body": "I created array named digits that store string representation of numbers.And i used number1 and number2 as index of array to print output."}, {"owner": {"reputation": 81, "user_id": 7439929, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dp3YaeroH08/AAAAAAAAAAI/AAAAAAAADdk/LrUJFyyoAV0/photo.jpg?sz=128", "display_name": "Karthika", "link": "https://stackoverflow.com/users/7439929/karthika"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1520426214, "post_id": 49151273, "comment_id": 85308419, "body": "@DevSolar i cannot understand &quot;using scanf() without checking return value&quot;?can you please explain this?"}, {"owner": {"reputation": 81, "user_id": 7439929, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dp3YaeroH08/AAAAAAAAAAI/AAAAAAAADdk/LrUJFyyoAV0/photo.jpg?sz=128", "display_name": "Karthika", "link": "https://stackoverflow.com/users/7439929/karthika"}, "reply_to_user": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1520426890, "post_id": 49151273, "comment_id": 85308856, "body": "@J...S Thank you for your feedback.I edited my code.I provided a string for 10."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1520427836, "post_id": 49151273, "comment_id": 85309559, "body": "@KarthikaKavi: Ask yourself what happens (or, rather, what does <i>not</i> happen) with <code>number1</code> and <code>number2</code> if the user enters something that is <i>not</i> a number, but, say, &quot;foo&quot;... and how you could avoid that to happen."}], "tags": [], "owner": {"reputation": 81, "user_id": 7439929, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dp3YaeroH08/AAAAAAAAAAI/AAAAAAAADdk/LrUJFyyoAV0/photo.jpg?sz=128", "display_name": "Karthika", "link": "https://stackoverflow.com/users/7439929/karthika"}, "is_accepted": false, "score": 0, "last_activity_date": 1520433656, "last_edit_date": 1520433656, "creation_date": 1520423495, "answer_id": 49151273, "question_id": 49149005, "link": "https://stackoverflow.com/questions/49149005/how-to-convert-numbers-to-words-using-basic-commands-in-c/49151273#49151273", "title": "How to convert numbers to words using basic commands in C", "body": "<p>I hope following code find useful: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    int number1;\n    int number2;\n    int sum;\n    char *digits[] = { \"zero\", \"one\", \"two\", \"three\", \"four\",\n                       \"five\", \"six\", \"seven\", \"eight\", \"nine\", \"ten\"};\n\n    printf(\"Please enter two integers: \");\n    scanf(\"%d\",&amp;number1);\n    scanf(\"%d\",&amp;number2);\n    sum = number1 + number2;\n\n    if(number1&lt;0){\n        printf(\"negative \");\n        number1=-number1;\n    }\n    printf(\"%s\",digits[number1]);\n    printf(\" + \");\n\n    if(number2&lt;0){\n        printf(\"negative \");\n        number2=-number2;\n    }\n    printf(\"%s\",digits[number2]);\n    printf(\" = \");\n    printf(\"%d\",sum);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1520429858, "creation_date": 1520429858, "answer_id": 49153296, "question_id": 49149005, "link": "https://stackoverflow.com/questions/49149005/how-to-convert-numbers-to-words-using-basic-commands-in-c/49153296#49153296", "title": "How to convert numbers to words using basic commands in C", "body": "<p>The actual algorithm here is the easy part, simply declare an array of pointers to string literals and use that as look-up table:</p>\n\n<pre><code>const char* TEXTUAL [11] = \n{\n  \"zero\",\n  \"one\",\n  \"two\",\n  \"three\",\n  \"four\",\n  \"five\",\n  \"six\",\n  \"seven\",\n  \"eight\",\n  \"nine\",\n  \"ten\"\n};  \n\nprintf(\"%s\", TEXTUAL[value]);\n</code></pre>\n\n<p>The hard part here is all the error checking. You have to read two integers from the user, check that they are valid and in range -10 to 10. Then check that the result is in range as well.</p>\n\n<p>I made an example that you can look at for hints. How to safely read integers in C is a chapter of it's own, I made a function <code>read_2_int</code> that reads user input in a safe manner. If you are a beginner, just ignore that function for now and use <code>scanf(\"%d\", &amp;var)</code>. </p>\n\n<p>In order to handle negative numbers I used the function <code>labs</code> to get the absolute value of an integer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdbool.h&gt;\n\nstatic void halt_and_catch_fire (const char* err);\nstatic void read_2_int (int* i1, int* i2);\n\nint main (void)\n{\n  int n1;\n  int n2;\n\n  printf(\"Enter your two integers: \");\n  read_2_int(&amp;n1, &amp;n2);\n\n\n  if(n1 &gt; 10 || n1 &lt; -10 || n2 &gt; 10 || n2 &lt; -10)\n  {\n    halt_and_catch_fire(\"Only numbers from -10 to 10 supported.\");\n  }\n  if(n1+n2 &gt; 10 || n1+n2 &lt; -10)\n  {\n    halt_and_catch_fire(\"The sum must be from -10 to 10.\");\n  }\n\n\n  const char* TEXTUAL [11] = \n  {\n    \"zero\",\n    \"one\",\n    \"two\",\n    \"three\",\n    \"four\",\n    \"five\",\n    \"six\",\n    \"seven\",\n    \"eight\",\n    \"nine\",\n    \"ten\"\n  };  \n\n\n  if(n1 &lt; 0){ printf(\"minus \"); }\n  printf(\"%s + \", TEXTUAL[labs(n1)] ); // labs = absolute value\n  if(n2 &lt; 0){ printf(\"minus \"); }\n  printf(\"%s = \", TEXTUAL[labs(n2)] );\n  if(n1 + n2 &lt; 0) { printf(\"minus \"); }\n  printf(\"%s\\n\", TEXTUAL[labs(n1+n2)] );\n}\n\n\nstatic void halt_and_catch_fire (const char* err)\n{\n  /* some manner of error handling here */\n  fprintf(stderr, err);\n  exit(EXIT_FAILURE);\n}\n\nstatic void read_2_int (int* i1, int* i2)\n{\n  char input[10];\n\n  if(fgets(input, 10, stdin) == NULL)\n  {\n    halt_and_catch_fire (\"You have to type two integers.\");\n  }\n\n  char* endptr;\n  *i1 = strtol(input, &amp;endptr, 10);\n  if(endptr == input)\n  {\n    halt_and_catch_fire (\"Bad number format\");\n  }\n\n  char* next = endptr;\n  *i2 = strtol(next, &amp;endptr, 10);\n  if(endptr == next)\n  {\n    halt_and_catch_fire (\"You have to type two integers.\");\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2191, "user_id": 10232790, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ffWFm9uJgO4/AAAAAAAAAAI/AAAAAAAABjI/hXd8V3yjdoE/photo.jpg?sz=128", "display_name": "Harshith Rai", "link": "https://stackoverflow.com/users/10232790/harshith-rai"}, "is_accepted": false, "score": 0, "last_activity_date": 1535004701, "creation_date": 1535004701, "answer_id": 51979333, "question_id": 49149005, "link": "https://stackoverflow.com/questions/49149005/how-to-convert-numbers-to-words-using-basic-commands-in-c/51979333#51979333", "title": "How to convert numbers to words using basic commands in C", "body": "<p>I have coded a program which works for all numbers from 0 upto 99,999.\nHere is the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main() {\nint n,i;\nint rem,r2,k=0;\nchar *word[100000];\nchar *word_temp[100000];\nchar *units[]={\" zero\",\" one\",\" two\",\" three\",\" four\",\" five\",\" six\",\" seven\",\" eight\",\" nine\"};\nchar *teens[]={\" ten\",\" eleven\",\" twelve\",\" thirteen\",\" fourteen\",\" fifteen\",\" sixteen\",\" seventeen\",\" eighteen\",\" nineteen\"};\nchar *tenths[]={\" twenty\",\" thirty\",\" forty\",\" fifty\",\" sixty\",\" seventy\",\" eighty\",\" ninety\"};\nchar *hundredth[]={\" hundred\"};\nchar *thousandth[]={\" thousand\"};\nprintf(\"\\nenter the number(only positive and less than one lakh): \");\nscanf(\"%d\",&amp;n);\n\nif(n==0){\n    word[k++]=units[0];\n\n    printf(\"\\nthe number in words: \");\n    for(i=(k-1);i&gt;=0;i--)\n        printf(\"%s\",word[i]);\n}\n\nelse if(n&gt;0&amp;&amp;n&lt;=99999){\n    while(n&gt;0) {\n        word_temp[k]=\"\";\n\n        if((n&gt;999)&amp;&amp;(n&lt;=99999)){\n            rem=n/1000;\n\n            if((rem&gt;19)&amp;&amp;(rem&lt;=99)){\n                if((rem%10)!=0){\n                    word_temp[++k]=units[rem%10];\n                    word[k]=word_temp[k];\n                    k--;\n                }\n                word_temp[k]=tenths[(rem/10)-2];\n                word[k]=word_temp[k];\n                if((rem%10)!=0)\n                    k+=2;\n                else\n                    k++;\n            }\n\n            else {\n                if(rem&lt;10)\n                    word_temp[k]=units[rem];\n\n                else if(rem&gt;9&amp;&amp;rem&lt;20)\n                    word_temp[k]=teens[rem%10];  \n                    word[k]=word_temp[k];\n                    k++;\n            }\n            word_temp[k]=thousandth[0];\n            word[k]=word_temp[k];\n            k++;\n            n=n-(rem*1000);\n        }\n\n        else if((n&gt;99)&amp;&amp;(n&lt;=999)){\n            rem=n/100;\n            word_temp[k]=units[rem];\n            word[k]=word_temp[k];\n            k++;\n            word_temp[k]=hundredth[0];\n            word[k]=word_temp[k];\n            k++;\n            word[k++]=\" and\";\n            n=n-(rem*100);\n        }\n\n        else if((n&gt;19)&amp;&amp;(n&lt;=99)){\n            rem=n/10;\n            word_temp[k]=tenths[rem-2];\n            word[k]=word_temp[k];\n            k++;\n            n=n-(rem*10);\n        }\n\n        else if((n&gt;9)&amp;&amp;(n&lt;=19)){\n            rem=n;\n            word_temp[k]=teens[rem%10];\n            word[k]=word_temp[k];\n            k++;\n            n=n-(rem*1);\n            break;\n        }\n\n        else if((n&gt;0)&amp;&amp;(n&lt;=9)){\n            rem=n%10;\n            word_temp[k]=units[rem];\n            word[k]=word_temp[k];\n            k++;\n            n=0;\n            break;\n        }\n\n    }\n\n    printf(\"\\nthe number in words:\\n \");\n    for(i=0;i&lt;=k-1;i++)\n        printf(\"%s \",word[i]);\n    }\n    else {\n         printf(\"\\nvalue out of range...Exiting...\");\n         exit(0);\n    }\n\n    printf(\"\\n\\nprocess terminated... \");\n    }\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9455923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37160805e297717424a4787ae72e0951?s=128&d=identicon&r=PG&f=1", "display_name": "Taytayes", "link": "https://stackoverflow.com/users/9455923/taytayes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3661, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1566896887, "creation_date": 1520416838, "last_edit_date": 1520416957, "question_id": 49149005, "link": "https://stackoverflow.com/questions/49149005/how-to-convert-numbers-to-words-using-basic-commands-in-c", "title": "How to convert numbers to words using basic commands in C", "body": "<p>Hi I'm really new to C.<br>\nI am doing an exercise where I have to make a program that takes in two input integers (integers between -10 and 10 inclusive) and outputs the sum.<br>\nHowever, all the numbers from -10 to 10 inclusive that are displayed will be displayed as their respective words and any other number will be the numeric number.<br>\nThe only commands I'm using are if's, else if's, else, printf, scanf, int.  </p>\n\n<p>An example is:  </p>\n\n<pre><code>Enter your two integers: 9 2\nnine + two = eleven\n\nEnter your two integers: -9 4\nnegative nine + four = negative five\n\nEnter your two integers: -10 -2\nnegative ten + negative two = -12\n</code></pre>\n\n<p>Any help is appreciated. Here is what I did so far but I'm not sure since it seems VERY tedious, but my friend said she did it relatively pretty fast.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    int number1;\n    int number2;\n    int sum;\n    printf(\"Please enter two integers: \");\n    scanf(\"%d\",&amp;number1,&amp;number2);\n    sum = number1 + number2\n    if (number1 &gt; 0 &amp;&amp; number2 &gt; 0) {\n        if (number1 == 1 &amp;&amp; number2 == 1) {\n            printf(\"one + one = two\");\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1520417139, "post_id": 49148860, "comment_id": 85302560, "body": "How big is <code>count</code> at the end of your loops?"}, {"owner": {"reputation": 465, "user_id": 7022936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-vSryJSEuqmg/AAAAAAAAAAI/AAAAAAAABPk/6EU9YSZwHOA/photo.jpg?sz=128", "display_name": "John Nyingi", "link": "https://stackoverflow.com/users/7022936/john-nyingi"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1520417175, "post_id": 49148860, "comment_id": 85302582, "body": "not larger than the outer loop"}, {"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1520420147, "post_id": 49148860, "comment_id": 85304551, "body": "I assume: <code>ciphercount = (sizeof cipher &#47; sizeof cipher[0]) - 1</code>; and <code>textcount = (sizeof text &#47;  sizeof text[0]) - 1;</code> right?"}, {"owner": {"reputation": 1180, "user_id": 4766261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd4d03badb6ebc92b17af75766fdd57?s=128&d=identicon&r=PG", "display_name": "SiggiSv", "link": "https://stackoverflow.com/users/4766261/siggisv"}, "edited": false, "score": 1, "creation_date": 1520441439, "post_id": 49148860, "comment_id": 85319179, "body": "Could you give us a short example of what the two arrays might be and what result you want to get using them."}, {"owner": {"reputation": 1180, "user_id": 4766261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd4d03badb6ebc92b17af75766fdd57?s=128&d=identicon&r=PG", "display_name": "SiggiSv", "link": "https://stackoverflow.com/users/4766261/siggisv"}, "edited": false, "score": 0, "creation_date": 1520442413, "post_id": 49148860, "comment_id": 85319846, "body": "For example, if <code>cipher</code>is <code>{&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, 0, 0, ...}</code> and <code>text</code> is <code>{&#39;a&#39;, &#39;a, &#39;a, &#39;c&#39;, 0}</code>, do you want the result to be <code>&quot;bbbc&quot;</code>? Or should it be <code>&quot;bbba&quot;</code>? Or <code>&quot;bcac&quot;</code>? etc."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1520423580, "post_id": 49149534, "comment_id": 85306684, "body": "Why the downvote? if both strings are exactly identical it could be perfectly fit the worst case Yardras mentioned"}], "tags": [], "owner": {"reputation": 21, "user_id": 6316488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed01dd1702e56cf607aa1b849cd9d2a5?s=128&d=identicon&r=PG&f=1", "display_name": "yardras", "link": "https://stackoverflow.com/users/6316488/yardras"}, "is_accepted": false, "score": 0, "last_activity_date": 1520418309, "creation_date": 1520418309, "answer_id": 49149534, "question_id": 49148860, "link": "https://stackoverflow.com/questions/49148860/replacing-char-in-an-array/49149534#49149534", "title": "Replacing char in an array", "body": "<p>I am not sure to understand the purpose of your code but as -Bob__ wondering, I am worry about count.\nYou are increasing it all the time you access it and you never reset it to 0.\nTherefore, in the worse case, at the end count is equal to ciphercount * textcount * 3 which is larger than MAX_CIPHER_SIZE+1, I guess.</p>\n"}], "owner": {"reputation": 465, "user_id": 7022936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-vSryJSEuqmg/AAAAAAAAAAI/AAAAAAAABPk/6EU9YSZwHOA/photo.jpg?sz=128", "display_name": "John Nyingi", "link": "https://stackoverflow.com/users/7022936/john-nyingi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520418309, "creation_date": 1520416428, "question_id": 49148860, "link": "https://stackoverflow.com/questions/49148860/replacing-char-in-an-array", "title": "Replacing char in an array", "body": "<p>I am trying to build an algorithm where i have two arrays namely</p>\n\n<pre><code>char cipher[MAX_CIPHER_SIZE+1]={0}, text[MAX_TEXT_SIZE+1]={0};\n</code></pre>\n\n<p>so in this case either of the arrays can be larger than the other. So using the cipher array i want to find a matching character and replace it with the next character in the cipher array. so in this case</p>\n\n<pre><code>  int count=0;\n\n  for(i=0;i&lt;=ciphercount;i++){\n\n    for(j=0;j&lt;=textcount;j++){\n        if(cipher[i] == text[j] &amp;&amp; cipher[count++] != '\\0')\n            {\n                temp = cipher[count++];\n                text[j] = cipher[count++];\n                printf(\"%c\\n\",temp);\n                temp = \"\";\n        }\n    }\n}\n</code></pre>\n\n<p>unfortunately it finds and skips the assigning part. In addition if i enter i a long text it results shorten-ed text. That is excludes majority of the text. </p>\n"}, {"tags": ["c", "char", "int", "scanf"], "comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 2, "creation_date": 1520415837, "post_id": 49148396, "comment_id": 85301705, "body": "Note that you are missing corresponding double quotes in your code."}, {"owner": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1520416375, "post_id": 49148396, "comment_id": 85302050, "body": "@machine_1 yeah that is only in the post not in the code, I will edit it right away"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1520416409, "post_id": 49148396, "comment_id": 85302076, "body": "The <code>%c</code>, <code>%[]</code>, and <code>%n</code> directives do <i>not</i> skip leading whitespace characters."}], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "edited": false, "score": 0, "creation_date": 1520416411, "post_id": 49148507, "comment_id": 85302079, "body": "makes sense, the %c specifier won&#39;t suppress leading whitespace characters. Thanks for the comment"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 3, "last_activity_date": 1520415344, "last_edit_date": 1592644375, "creation_date": 1520415344, "answer_id": 49148507, "question_id": 49148396, "link": "https://stackoverflow.com/questions/49148396/scanf-and-whitespace-characters/49148507#49148507", "title": "scanf and whitespace characters", "body": "<p>From <a href=\"https://linux.die.net/man/3/scanf\" rel=\"nofollow noreferrer\">man scanf</a>:</p>\n<blockquote>\n<p><strong>%c</strong></p>\n<p>Matches a sequence of characters whose length is specified by the maximum field width (default 1); the next pointer must be a pointer to char, and there must be enough room for all the characters (no terminating null byte is added). <strong>The usual skip of leading white space is suppressed</strong>. To skip white space first, use an explicit space in the format.</p>\n</blockquote>\n"}], "owner": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1520429756, "accepted_answer_id": 49148507, "answer_count": 1, "score": 1, "last_activity_date": 1520415344, "creation_date": 1520415038, "question_id": 49148396, "link": "https://stackoverflow.com/questions/49148396/scanf-and-whitespace-characters", "closed_reason": "Duplicate", "title": "scanf and whitespace characters", "body": "<p>I am doing a simple example related to scanf()</p>\n\n<pre><code>int a, b;\nprintf(\"Please enter int a:\\n);\nscanf(\"%d\",&amp;a);//line 1\nprintf(\"Please enter int b:\\n);\nscanf(\"%d\",&amp;b);//line 2\n</code></pre>\n\n<p>I run this code at a I put 45, and b 78, so the input buffer looks like this: 45\\n78\\n, line1 takes 45 ignores \\n, and line2 ignores \\n takes 78 and ignores \\n</p>\n\n<pre><code>char ch, ch2;\nprintf(\"Please enter char ch:\\n);\nscanf(\"%c\",&amp;ch);//line3\nprintf(\"Please enter char ch2:\\n);\nscanf(\"%c\",&amp;ch2);//line4\n</code></pre>\n\n<p>I debugged this code and I thought of putting 'a' in ch, and 'b' in ch2, so the input buffer will look like this: a\\nb\\n, line3 takes 'a' ignores \\n and line4 ignores \\n takes 'b' and ignores \\n</p>\n\n<p>I thought this would happen, but when I debugged it line3 takes 'a', and line4 reads \\n and stores it.</p>\n\n<p>I don't understand I thought scanf() is supposed to ignore whitespace characters.</p>\n\n<p>as you can see here\n<a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdio/scanf/</a></p>\n"}, {"tags": ["c++", "c", "performance", "binary", "shortest"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1520412862, "post_id": 49147623, "comment_id": 85299888, "body": "What is the type of <code>a</code>? There are faster ways, but I think it would be difficult to make this algorithm shorter."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 5, "creation_date": 1520412869, "post_id": 49147623, "comment_id": 85299896, "body": "There is a resp. section in the famous <a href=\"https://graphics.stanford.edu/~seander/bithacks.html\" rel=\"nofollow noreferrer\">Bit Twiddling Hacks</a> (look for &quot;Counting bits set&quot;)."}, {"owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1520413352, "post_id": 49147623, "comment_id": 85300192, "body": "a is an integer @Bathsheba"}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 1, "creation_date": 1520413400, "post_id": 49147623, "comment_id": 85300210, "body": "This kind of operation is commonly referred to as &quot;hamming weight&quot; or &quot;population count&quot;. I think some processors have an instruction to do precisely this, and I wouldn&#39;t be surprised if some compilers provided intrisics for this as well. It might be helpful if you desperately want speed to the point of giving up portability."}, {"owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1520413617, "post_id": 49147623, "comment_id": 85300339, "body": "@Caninonos I need shortest, not fastest, but fastest could also work. I am mostly looking for the shorter method, as this is a challenge that I put myself through, but this is one of the harder ones I believe. If i could vote, +1 for Correct Name"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1520414083, "post_id": 49147623, "comment_id": 85300595, "body": "&quot;Shortest&quot; is rather a vague requirement. Do you mean &quot;fewest lines of source code&quot;, &quot;fewest bytes of source code&quot;, &quot;fewest bytes of machine code&quot;, or something else? If you&#39;re using GCC, there are built-in functions like <code>__builtin_popcount()</code> that are not only short but will also use the built-in <a href=\"https://en.wikipedia.org/wiki/SSE4#POPCNT_and_LZCNT\" rel=\"nofollow noreferrer\"><code>POPCNT</code> processor instruction</a> where available."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1520414156, "post_id": 49147623, "comment_id": 85300641, "body": "@squeamishossifrage probably shortest test and debug time."}, {"owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1520414703, "post_id": 49147623, "comment_id": 85300992, "body": "@squeamishossifrage Shortest length of code."}, {"owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1520415041, "post_id": 49147623, "comment_id": 85301190, "body": "@squeamishossifrage __builtin_popcount() seems to do what I want, post it as an answer?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1520416052, "post_id": 49147623, "comment_id": 85301838, "body": "Your code doesn&#39;t work for 0 btw."}, {"owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520416169, "post_id": 49147623, "comment_id": 85301923, "body": "Lol zero is the one thing I forgot @Ajay"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520416430, "post_id": 49147623, "comment_id": 85302095, "body": "@MartinJames do you mean the longest debug time :p"}, {"owner": {"reputation": 908, "user_id": 3589567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKIds.png?s=128&g=1", "display_name": "Alejandro Blasco", "link": "https://stackoverflow.com/users/3589567/alejandro-blasco"}, "edited": false, "score": 0, "creation_date": 1520418145, "post_id": 49147623, "comment_id": 85303181, "body": "<code>r</code> should be initialized to zero. And integers are zero-initialized by default. So you can write <code>while(a&amp;=a-1)r++;</code>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 908, "user_id": 3589567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKIds.png?s=128&g=1", "display_name": "Alejandro Blasco", "link": "https://stackoverflow.com/users/3589567/alejandro-blasco"}, "edited": false, "score": 1, "creation_date": 1520418715, "post_id": 49147623, "comment_id": 85303575, "body": "@AlejandroBlasco <i>integers are zero-initialized by default</i> ???? No local variable in C or C++ is initialized by default."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1520494931, "post_id": 49147623, "comment_id": 85340682, "body": "Code Golf is a game that was played on Stack Overflow in its early days, but it is now considered off-topic. Code Golf challenges should be posted in Programming Puzzles &amp; Code Golf."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520489033, "post_id": 49149383, "comment_id": 85338121, "body": "<code>8 * sizeof(uint8_t)</code> ? Do you mean <code>1 &lt;&lt; (8 * sizeof(uint8_t))</code> for the size of the table?"}, {"owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "edited": false, "score": 0, "creation_date": 1520497103, "post_id": 49149383, "comment_id": 85341788, "body": "This seems to be the fastest :) I will look for a method that will use this  and thanks alot @Lundin"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "edited": false, "score": 0, "creation_date": 1520677177, "post_id": 49149383, "comment_id": 85420593, "body": "@KyoungwanWoo: as a matter of fact, it is not even necessarily the fastest."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520494300, "last_edit_date": 1520494300, "creation_date": 1520417861, "answer_id": 49149383, "question_id": 49147623, "link": "https://stackoverflow.com/questions/49147623/quickest-shortest-in-c-c-method-to-calculate-sum-of-digits-in-binary-aka-numbe/49149383#49149383", "title": "Quickest/Shortest in C/C++ method to calculate sum of digits in binary/aka number of 1s in binary", "body": "<p>The fastest possible code is to generate a look-up table, with the value of the variable as index. Example for uint8_t:</p>\n\n<pre><code>const uint8_t NUMBER_OF_ONES [256] =\n{\n  0, // 0\n  1, // 1\n  1, // 2\n  2, // 3\n  1, // 4\n  2, // 5\n  ...\n  8, // 255\n};\n</code></pre>\n\n<p>You would use it as <code>n = NUMBER_OF_ONES[a];</code>.</p>\n\n<p>The second fastest is to generate smaller look-up tables, to save ROM. For example a nibble-wise look-up for numbers 0 to 15, which you would then call for every nibble in the data type.</p>\n\n<p>Note that the requirement \"Shortest as in shortest length of source code.\" is nonsense, that's not a metric used by professionals. If that's truly what you are after, for the sake of fun or obfuscation, then the question is off-topic on SO and should be asked at <a href=\"https://codegolf.stackexchange.com\">https://codegolf.stackexchange.com</a> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "edited": false, "score": 0, "creation_date": 1520497146, "post_id": 49167802, "comment_id": 85341806, "body": "I have a value assigned for r before this, thus for(;a;a&gt;&gt;=1)r++; This was what I used before, so sorry, but nah,"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520497155, "post_id": 49167802, "comment_id": 85341816, "body": "I don&#39;t think the last one counts the number of ones, but the number of bits."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520497289, "post_id": 49167802, "comment_id": 85341888, "body": "also use <code>a&#47;=2</code> instead of <code>a&gt;&gt;=1</code> if we are in the business of saving source code bytes."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520497365, "post_id": 49167802, "comment_id": 85341944, "body": "Your final solution can be fixed by using <code>r+=a|1</code> (or <code>r+=a%2</code>) instead of <code>r++</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1520500629, "post_id": 49167802, "comment_id": 85343936, "body": "Questions regarding how to save source code symbols are off-topic on SO. If this was the question, we should close it and direct them to <a href=\"https://codegolf.stackexchange.com/\">codegolf.stackexchange.com</a>."}, {"owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "edited": false, "score": 0, "creation_date": 1520850571, "post_id": 49167802, "comment_id": 85469211, "body": "@chqrlie this answers my question better than Lundin&#39;s. Currently designing a program/app that really needed this(on a windows friendly environment), and this actually did significantly boost the lag."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1520679778, "last_edit_date": 1520679778, "creation_date": 1520494784, "answer_id": 49167802, "question_id": 49147623, "link": "https://stackoverflow.com/questions/49147623/quickest-shortest-in-c-c-method-to-calculate-sum-of-digits-in-binary-aka-numbe/49167802#49167802", "title": "Quickest/Shortest in C/C++ method to calculate sum of digits in binary/aka number of 1s in binary", "body": "<p>Your solution assumes <code>a</code> to have an unsigned type.</p>\n\n<p>Yet the code does not work for <code>a = 0</code>. You can fix it this way:</p>\n\n<pre><code>r=!!a;while(a&amp;=a-1)r++;\n</code></pre>\n\n<p>You can shave one character off this way:</p>\n\n<pre><code>for(r=!!a;a&amp;=a-1;r++);\n</code></pre>\n\n<p>But here is an alternative solution with the same source length:</p>\n\n<pre><code>for(r=0;a;a/=2)r+=a&amp;1;\n</code></pre>\n\n<p>As Lundin mentioned, code golfing is off topic on Stack Overflow.  It is a fun game, and one can definitely hone his C skills at trying to make the smallest code that is still fully defined for a given problem, but the resulting code is of poor value to casual readers trying to program at a more basic level. </p>\n\n<p>Regarding the on topic part of your question, <em>The quickest method to compute the number of bits in an integer</em>: this problem has been studied intensively and several methods are available. Which one is fastest depends on many factors:</p>\n\n<ul>\n<li>how portable the code need to be. Some processors have built-in instructions for this and the compiler may provide a way to generate them via intrinsics or inline assembly.</li>\n<li>the expected range of values for the argument. If the range is small, a simple lookup table may yield the best performance.</li>\n<li>the distribution of values of the argument: if a specific value is almost always given, just testing for it might be the fastest solution.</li>\n<li>the cpu specific performance: different algorithms use different instructions, the relative performance of different cpus may differ.</li>\n</ul>\n\n<p>Only careful benchmarking will tell you if a given approach is preferable to another, or if you are trying to optimise code whose performance is irrelevant. Provable correctness is <strong>much</strong> more important than micro-optimisation. Many experts consider optimisation to always be premature.</p>\n\n<p>An interesting solution for 32-bit integers is this:</p>\n\n<pre><code>uint32_t bitcount_parallel(uint32_t v) {\n    uint32_t c = v - ((v &gt;&gt; 1) &amp; 0x55555555);\n    c = ((c &gt;&gt; 2) &amp; 0x33333333) + (c &amp; 0x33333333);\n    c = ((c &gt;&gt; 4) + c) &amp; 0x0F0F0F0F;\n    c = ((c &gt;&gt; 8) + c) &amp; 0x00FF00FF;\n    return ((c &gt;&gt; 16) + c) &amp; 0x0000FFFF;\n}\n</code></pre>\n\n<p>If multiplication is fast, here is a potentially faster solution:</p>\n\n<pre><code>uint32_t bitcount_hybrid(uint32_t v) {\n    v = v - ((v &gt;&gt; 1) &amp; 0x55555555);\n    v = (v &amp; 0x33333333) + ((v &gt;&gt; 2) &amp; 0x33333333);\n    return ((v + (v &gt;&gt; 4) &amp; 0xF0F0F0F) * 0x1010101) &gt;&gt; 24;\n}\n</code></pre>\n\n<p>Different solutions are detailed here: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive\" rel=\"nofollow noreferrer\">https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive</a></p>\n"}], "owner": {"reputation": 29, "user_id": 6269987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IE4SuNtZnVI/AAAAAAAAAAI/AAAAAAAAAEY/9z-xkzTLByw/photo.jpg?sz=128", "display_name": "Kyoungwan Woo", "link": "https://stackoverflow.com/users/6269987/kyoungwan-woo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 49167802, "answer_count": 2, "score": 0, "last_activity_date": 1520679778, "creation_date": 1520412729, "last_edit_date": 1520414735, "question_id": 49147623, "link": "https://stackoverflow.com/questions/49147623/quickest-shortest-in-c-c-method-to-calculate-sum-of-digits-in-binary-aka-numbe", "title": "Quickest/Shortest in C/C++ method to calculate sum of digits in binary/aka number of 1s in binary", "body": "<p>I have a liking to finding shortest methods for coding. I have found a need for a method for calculating the sum of the digits(or the number of 1s in a number) of a number represented in binary. I have used bit operators and found this:</p>\n\n<pre><code>r=1;while(a&amp;=a-1)r++;\n</code></pre>\n\n<p>where a is the number, and r is the count. a is a given integer. Is there any way to shorten this/improve the algorithm?</p>\n\n<p>Shortest as in shortest length of source code.</p>\n"}, {"tags": ["c", "command"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 3, "creation_date": 1520412366, "post_id": 49147444, "comment_id": 85299608, "body": "What&#39;s wrong with doing it <i>this</i> way???"}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1520414067, "post_id": 49147444, "comment_id": 85300580, "body": "There can be many different ways of doing it, what exactly is your requirement?"}], "answers": [{"tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": false, "score": 0, "last_activity_date": 1520412671, "last_edit_date": 1520412671, "creation_date": 1520412364, "answer_id": 49147525, "question_id": 49147444, "link": "https://stackoverflow.com/questions/49147444/reading-input-testcases-from-a-file-in-c-from-command-line/49147525#49147525", "title": "reading input testcases from a file in C from command line", "body": "<p>You could use file I/O operations, <code>fopen()</code>, <code>fclose()</code> and the file version of whatever you are using to read from <code>stdin</code>....<code>fscanf()</code>, <code>fgetc()</code>, <code>fgets()</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main () {\n   char str1[10], str2[10], str3[10];\n   int year;\n   FILE * fp;\n\n   fp = fopen (\"file.txt\", \"w+\");\n   fputs(\"We are in 2012\", fp);\n\n   rewind(fp);\n   fscanf(fp, \"%s %s %s %d\", str1, str2, str3, &amp;year);\n\n   printf(\"Read String1 |%s|\\n\", str1 );\n   printf(\"Read String2 |%s|\\n\", str2 );\n   printf(\"Read String3 |%s|\\n\", str3 );\n   printf(\"Read Integer |%d|\\n\", year );\n\n   fclose(fp);\n\n   return(0);\n}\n</code></pre>\n\n<p>output :</p>\n\n<pre><code>Read String1 |We|\nRead String2 |are|\nRead String3 |in|\nRead Integer |2012|\n</code></pre>\n\n<p>If you want to make the code generic enough to accept input from a number of different files, you could specify the filename as a command line option.</p>\n"}], "owner": {"reputation": 1, "user_id": 9298219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2OQfgIBxP2I/AAAAAAAAAAI/AAAAAAAAAuY/PpVACROziCU/photo.jpg?sz=128", "display_name": "Adharsh Rajan", "link": "https://stackoverflow.com/users/9298219/adharsh-rajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1520412671, "creation_date": 1520412086, "question_id": 49147444, "link": "https://stackoverflow.com/questions/49147444/reading-input-testcases-from-a-file-in-c-from-command-line", "title": "reading input testcases from a file in C from command line", "body": "<p>currently I am using a command like the one below:</p>\n\n<blockquote>\n  <p>./code &lt; input.txt > output.txt</p>\n</blockquote>\n\n<p>is there any other way to do this?</p>\n"}, {"tags": ["c", "linux", "sdl-2"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1520411988, "post_id": 49147323, "comment_id": 85299405, "body": "If the system is <i>headless</i> then that means it will not have a monitor or keyboard/mouse connected to it. So it doesn&#39;t use the on-board video or need a driver for it. What it does mean is that you should be able to log on remotely to the machine, and then run graphical applications over the network. For Linux this is usually done by installing X11 client libraries on the headless system, and an X11 display server on your local system, and then set the <code>DISPLAY</code> to connect to your local X11 server. If you connect over SSH also do some research about <i>ssh x11 tunneling</i>."}, {"owner": {"reputation": 33, "user_id": 6028542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97e235e8d0cdb1058a14ec1c5c372b7?s=128&d=identicon&r=PG&f=1", "display_name": "MikeZ", "link": "https://stackoverflow.com/users/6028542/mikez"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520412913, "post_id": 49147323, "comment_id": 85299928, "body": "Sry. I think I asked my question a little bit incorrectly. I mean my system has no X."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1520413696, "post_id": 49147323, "comment_id": 85300380, "body": "There might be other ways to connect remotely and display a GUI over a network, but X is the most common and best supported way to do it. I strongly advice you to consider it (the X11 client libraries aren&#39;t that big, if that&#39;s your worry)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1520414041, "post_id": 49147323, "comment_id": 85300562, "body": "I <i>think</i> <a href=\"https://en.wikipedia.org/wiki/DirectFB\" rel=\"nofollow noreferrer\">DirectFB</a> is close to what you&#39;re looking for. I&#39;ve had success using it with SDL2 on a Raspberry Pi, but it has been a while so I don&#39;t remember the details."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1520414631, "post_id": 49147323, "comment_id": 85300938, "body": "@Quentin While DirectFB is good for embedded systems, it&#39;s a way to display graphics <i>locally</i> and not over a network connected to a headless system."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520414805, "post_id": 49147323, "comment_id": 85301048, "body": "@Someprogrammerdude oh. The &quot;headless&quot; part had disappeared from the question."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1520415433, "post_id": 49147323, "comment_id": 85301456, "body": "@Quentin Ah, okay. Then DirectFB is definitely the way to go for small embedded systems (where X is overkill)."}, {"owner": {"reputation": 33, "user_id": 6028542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97e235e8d0cdb1058a14ec1c5c372b7?s=128&d=identicon&r=PG&f=1", "display_name": "MikeZ", "link": "https://stackoverflow.com/users/6028542/mikez"}, "edited": false, "score": 0, "creation_date": 1520419639, "post_id": 49147323, "comment_id": 85304209, "body": "Thanks for your answers, guys! I&#39;ll try DirectFB. PS: My hardware platform is not Raspberry, it based on small Intel CPU."}], "owner": {"reputation": 33, "user_id": 6028542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97e235e8d0cdb1058a14ec1c5c372b7?s=128&d=identicon&r=PG&f=1", "display_name": "MikeZ", "link": "https://stackoverflow.com/users/6028542/mikez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1590, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520413219, "creation_date": 1520411622, "last_edit_date": 1520413219, "question_id": 49147323, "link": "https://stackoverflow.com/questions/49147323/sdl2-without-x-no-available-video-device", "title": "SDL2 without X: No available video device", "body": "<p>I'm looking for \u0430 way to build a lightweight system whitout X to be able run SDL2 full-screen application on Intel CPU with integrated video. I have minimal debian 9 (netinst) system. i965-va-driver was installed and SDL2 was built from sources in accordance with <a href=\"https://solarianprogrammer.com/2015/01/22/raspberry-pi-raspbian-getting-started-sdl-2/\" rel=\"nofollow noreferrer\">this article</a>. Any errors was not issued. SDL_Init() in my simple application returns error \"No available video device\". Talking about supported drivers on \"configure\" step discussed <a href=\"https://stackoverflow.com/a/36572003/6028542\">here</a>. Does anybody know how to configure SDL2 correctly and install right driver?</p>\n"}, {"tags": ["c", "treeview", "gtk"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520413874, "post_id": 49146935, "comment_id": 85300471, "body": "Use an editable cell renderer. There is an <a href=\"https://developer.gnome.org/gtk3/stable/GtkCellEditable.html#GtkCellEditable-editing-done\" rel=\"nofollow noreferrer\"><code>editing-done</code></a> signal which you can connect to apply result of editing to the underlying data. If you want to edit a specific cell programmatically use <a href=\"https://developer.gnome.org/gtk3/stable/GtkTreeView.html#gtk-tree-view-set-cursor-on-cell\" rel=\"nofollow noreferrer\"><code>gtk_tree_view_set_cursor_on_cell ()</code></a> to select cell and then <a href=\"https://developer.gnome.org/gtk3/stable/GtkCellRenderer.html#gtk-cell-renderer-start-editing\" rel=\"nofollow noreferrer\"><code>gtk_cell_renderer_start_editing()</code></a>"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1520414065, "post_id": 49146935, "comment_id": 85300577, "body": "There are already some similar Q/As in SO which may help as well, e.g. <a href=\"https://stackoverflow.com/a/23893896/7478597\">SO: Difficulty in editable GtkTreeView</a>. The <a href=\"https://en.wikibooks.org/wiki/GTK%2B_By_Example/Tree_View/Editable_Cells\" rel=\"nofollow noreferrer\">GTK+ By Example/Tree View/Editable Cells</a> might help also."}, {"owner": {"reputation": 45, "user_id": 8778385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziyuM.jpg?s=128&g=1", "display_name": "SmokyPerson", "link": "https://stackoverflow.com/users/8778385/smokyperson"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520415192, "post_id": 49146935, "comment_id": 85301292, "body": "@Scheff In order to use <code>gtk_tree_view_set_cursor_on_cell</code> and <code>gtk_cell_renderer_start_editing</code> to simulate editing, there is still the need to set the &quot;editable&quot; property to TRUE, to the entire renderer. As for the editing-done and other similar signals, sure I can filter which cell to be really edited or not, but in a generic program design, you don&#39;t want to show a text entry box where it is not meant to be edited."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520417104, "post_id": 49146935, "comment_id": 85302538, "body": "I must admit that 1. I used gtkmm and 2. I moved to Qt a few years ago. But if I remember right, you can set cell renderers individually per column. Hence, use editable cell renderers for columns you want to have editable, and non-editable cell renderers else. (I remember that I did it this way in gtkmm.)"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8778385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziyuM.jpg?s=128&g=1", "display_name": "SmokyPerson", "link": "https://stackoverflow.com/users/8778385/smokyperson"}, "edited": false, "score": 0, "creation_date": 1520416363, "post_id": 49148787, "comment_id": 85302045, "body": "I am using TreeStore. Also you can still write the example in your preferred language. Someone /or me/ might just edit and convert it to C."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520417280, "post_id": 49148787, "comment_id": 85302631, "body": "Yes. Additional properties in the model which are considered in cell renderers is even more powerful. (You can selectively re-format cells e.g. make individual cells bold or color-highlighted.)"}], "tags": [], "owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "is_accepted": true, "score": 2, "last_activity_date": 1520416222, "creation_date": 1520416222, "answer_id": 49148787, "question_id": 49146935, "link": "https://stackoverflow.com/questions/49146935/how-to-make-specific-row-child-editable-in-gtktreeview/49148787#49148787", "title": "How to make specific row child editable in GtkTreeView", "body": "<p>You add another boolean column to your ListStore. Then set your Renderer editable property to that extra column. </p>\n\n<p>Sorry, I don't know the C code for a short example.</p>\n"}], "owner": {"reputation": 45, "user_id": 8778385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziyuM.jpg?s=128&g=1", "display_name": "SmokyPerson", "link": "https://stackoverflow.com/users/8778385/smokyperson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 49148787, "answer_count": 1, "score": 0, "last_activity_date": 1520416222, "creation_date": 1520410035, "question_id": 49146935, "link": "https://stackoverflow.com/questions/49146935/how-to-make-specific-row-child-editable-in-gtktreeview", "title": "How to make specific row child editable in GtkTreeView", "body": "<p>I am confused as to how to set the \"editable\" property to a specific child of a GtkTreeView, instead of the entire cell renderer.</p>\n\n<pre><code>|  Column  |\n[+] Parent\n |__ Child\n |__ Child2 &lt;-- Press to edit\n</code></pre>\n\n<hr>\n\n<p>I didn't seem to find a way to do that.</p>\n"}, {"tags": ["c", "multithreading", "thread-safety", "pthreads", "mutex"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1520410072, "post_id": 49146897, "comment_id": 85298423, "body": "What have you tried? Sounds like a homework. Did you read some <a href=\"https://computing.llnl.gov/tutorials/pthreads/\" rel=\"nofollow noreferrer\">pthread tutorial</a>? <b>Too broad question</b> here. StackOverflow is <i>not</i> a <i>do-my-homework</i> service"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1520410737, "post_id": 49146897, "comment_id": 85298753, "body": "If you have data structure that is shared by two different threads then use mutex for MT-safe, this is just the comment from the title of your question."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1520412544, "post_id": 49146897, "comment_id": 85299723, "body": "Remove <code>q-&gt;used</code> completely, for start, and use <code>head</code>/<code>tail</code> (or <code>start</code>/<code>end</code>, whatever), so that one thread only writes to <code>head</code> and the other one only to <code>tail</code>. If you modify the same field from two threads, or you want to have more than two threads, you will need to use some synchronization."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1520412896, "post_id": 49146897, "comment_id": 85299914, "body": "You can use some form of a <i>mutex</i>. If you want a <i>lock-free</i> approach, there are many articles about how to implement lock free queues; the solution depends on a number of readers and writers."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1520418192, "post_id": 49146897, "comment_id": 85303220, "body": "Start by actually declaring <code>queue</code>, maybe. And don&#39;t hide pointers behind typedefs, it is horrible practice."}], "answers": [{"tags": [], "owner": {"reputation": 849, "user_id": 4086095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CMn9X.jpg?s=128&g=1", "display_name": "Tsakiroglou Fotis", "link": "https://stackoverflow.com/users/4086095/tsakiroglou-fotis"}, "is_accepted": false, "score": 1, "last_activity_date": 1520415206, "last_edit_date": 1520415206, "creation_date": 1520413291, "answer_id": 49147798, "question_id": 49146897, "link": "https://stackoverflow.com/questions/49146897/how-to-make-a-queue-thread-safe/49147798#49147798", "title": "How to make a queue thread-safe", "body": "<p>Thread safe means that you have to isolate any shared data.Here your shared data is the pointer to the queue.So , in general , any time you have operations on the queue you need to protect queue and prevent multiple threads reach your queue at the same time.One good way is to implement Condition Variables. Variables are switches to lock threads in crucial data.</p>\n\n<p>I can't see the thread code here.\nSo , let's assume you have a thread that writes in a queue.\nFirst you have to declare Condition Variables.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n\n\npthread_mutex_t mutex2 = PTHREAD_MUTEX_INITIALIZER;\npthread_cond_t w_condition = PTHREAD_COND_INITIALIZER;\n\nque_state_t que_write_state = READY;  //this is just an enum\n\n\nvoid* writer_thread_v2(void* t)\n{\n    pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);\n    pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, NULL);\n    int i = 0;\n    while ( 1 )\n    {\n        pthread_mutex_lock(&amp;mutex2);    \n        while( que_write_state == NOT_READY )\n        {\n            pthread_cond_wait(&amp;w_condition , &amp;mutex2);\n        }\n        que_write_state = NOT_READY;\n        person_t* doe = NULL;\n        pthread_cleanup_push(clean_memory2, &amp;doe);\n        doe = (person_t*) malloc(sizeof(person_t));\n\n        person_t static_person = random_person();\n        doe-&gt;age_bracket = static_person.age_bracket;\n        memcpy(doe-&gt;name , static_person.name , NAME_LENGTH);\n        push(the_queue , doe );\n        pthread_cleanup_pop(0);\n\n        que_write_state = READY;\n        pthread_mutex_unlock(&amp;mutex2);\n        pthread_cond_signal(&amp;w_condition);\n        i++;\n    }\n    pthread_exit(0);\n}\n</code></pre>\n\n<p>Here the thread enters a while loop.</p>\n\n<pre><code>    pthread_mutex_lock(&amp;mutex2);    //Here puts a lock on mutex    \n    while( que_write_state == NOT_READY )    //Here checks the enum\n    {\n        pthread_cond_wait(&amp;w_condition , &amp;mutex2);\n    }\n    que_write_state = NOT_READY;      //Here puts the enum in not ready mode\n</code></pre>\n\n<p>Now all threads of this kind are going to stop and wait until the queue operations finish and you release the mutex.\nA big memory leak problem comes here.What if a thread creates an object and it is cancelled before add data in queue.This is why in the code there is</p>\n\n<pre><code>pthread_cleanup_push(clean_memory2, &amp;doe);\n{\n    inside here it mallocs the heap memory it is needed and adds data in \n    queue.If at any time the thread is cancelled clean_memory2() is called \n    which frees doe.\n}\npthread_cleanup_pop(0);\n</code></pre>\n\n<p>pthread_cleanup_push is going to protect you for memory leaks while creating the object you want to store , and complete the import procedure.Cleanup_push (ghost block) stops at cleanup switch.\nAfter push in que this thread is going to release mutex and sends a signal to the rest of the Threads waiting.</p>\n\n<pre><code>    que_write_state = READY;   //here sets switch to ready mode\n    pthread_mutex_unlock(&amp;mutex2);   //unlocks mutex\n\n    pthread_cond_signal(&amp;w_condition); //signal the next one.\n</code></pre>\n\n<p>Thank you.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9455344"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522272370, "creation_date": 1520409883, "last_edit_date": 1522272370, "question_id": 49146897, "link": "https://stackoverflow.com/questions/49146897/how-to-make-a-queue-thread-safe", "title": "How to make a queue thread-safe", "body": "<p>Two threads working on this queue at the same time could make it fail. What will you do to make concurrent accesses work correctly? Should the queue make the threads wait if they try to remove an element from an empty queue or add one to a full one?</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\n// circular array\ntypedef struct _queue {\n    int size;\n    int used;\n    int first;\n    void **data;\n} _queue;\n\n#include \"queue.h\"\n\nqueue q_create(int size) {\n    queue q = malloc(sizeof(_queue));\n\n    q-&gt;size  = size;\n    q-&gt;used  = 0;\n    q-&gt;first = 0;\n    q-&gt;data = malloc(size*sizeof(void *));\n\n    return q;\n}\n\nint q_elements(queue q) {\n    return q-&gt;used;\n}\n\nint q_insert(queue q, void *elem) {\n    if(q-&gt;size==q-&gt;used) return 0;\n\n    q-&gt;data[(q-&gt;first+q-&gt;used) % q-&gt;size] = elem;    \n    q-&gt;used++;\n\n    return 1;\n}\n\nvoid *q_remove(queue q) {\n    void *res;\n    if(q-&gt;used==0) return NULL;\n\n    res=q-&gt;data[q-&gt;first];\n\n    q-&gt;first=(q-&gt;first+1) % q-&gt;size;\n    q-&gt;used--;\n\n    return res;\n}\n\nvoid q_destroy(queue q) {\n    free(q-&gt;data);\n    free(q);\n}\n</code></pre>\n\n<p>The objective of this queue is to manage the input and output of the compression tool I'm trying to develop.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": false, "score": 0, "last_activity_date": 1520410037, "creation_date": 1520410037, "answer_id": 49146936, "question_id": 49146889, "link": "https://stackoverflow.com/questions/49146889/how-to-print-a-character-but-by-using-variable/49146936#49146936", "title": "How to print a character but by using variable?", "body": "<p>Are you just after the command to print a char to the console?</p>\n\n<pre><code>int main() {\n    char answer;\n\n    printf(\"enter your favorite letter: \\n\");\n\n    answer = getchar();\n\n    printf(\"%c\\n\", answer);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "reply_to_user": {"reputation": 107, "user_id": 9445965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73b3c5e8539b74049577c68b6275e21?s=128&d=identicon&r=PG&f=1", "display_name": "blackwater7", "link": "https://stackoverflow.com/users/9445965/blackwater7"}, "edited": false, "score": 0, "creation_date": 1520410308, "post_id": 49146942, "comment_id": 85298530, "body": "@blackwater7 No problem!"}], "tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1520410066, "creation_date": 1520410066, "answer_id": 49146942, "question_id": 49146889, "link": "https://stackoverflow.com/questions/49146889/how-to-print-a-character-but-by-using-variable/49146942#49146942", "title": "How to print a character but by using variable?", "body": "<p>You need to use <code>printf</code>. This lets you 'embed' variables in output using placeholders declared with <code>%</code> prefixes.</p>\n\n<p>The placeholder for a character is <code>%c</code>, so you could use the following:</p>\n\n<pre><code>printf(\"Your favorite letter is %c\", answer);\n</code></pre>\n\n<p><code>answer</code> is passed as a parameter and replaces the <code>%c</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/11732402/how-to-properly-printf-integer-and-string-in-c\">This question</a> should give you more information about <code>printf</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 9445965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73b3c5e8539b74049577c68b6275e21?s=128&d=identicon&r=PG&f=1", "display_name": "blackwater7", "link": "https://stackoverflow.com/users/9445965/blackwater7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520414262, "creation_date": 1520409855, "last_edit_date": 1520414262, "question_id": 49146889, "link": "https://stackoverflow.com/questions/49146889/how-to-print-a-character-but-by-using-variable", "title": "How to print a character but by using variable?", "body": "<p>Simple example for my problem:</p>\n\n<pre><code>char answer;\n\nprintf(\"enter your favorite letter: \\n\");\n\nanswer = getchar();\n</code></pre>\n\n<p>Now here is the problem. I want to print that character in screen. But by using \"answer\" variable.\nSomething like this:</p>\n\n<pre><code>printf(answer);\n</code></pre>\n\n<p>But of course it doesn't work. What do I do?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520409627, "post_id": 49146771, "comment_id": 85298221, "body": "Please copy-paste (as text) the complete and full output of the compiler into your question. And then show us (with e.g. a comment) where in the <a href=\"http://stackoverflow.com/help/mcve\"><b>Minimal</b>, Complete, and Verifiable Example</a> the error is."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1520409700, "post_id": 49146771, "comment_id": 85298255, "body": "Note that there are other problems with your code as well. For example, uninitialized local variables (like <code>number</code> in your <code>main</code> function) really <i>are</i> uninitialized. Their values are <i>indeterminate</i> and will seem random. Don&#39;t use variables without initialization."}, {"owner": {"reputation": 2837, "user_id": 6607392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Nyj6e.jpg?s=128&g=1", "display_name": "Wreigh", "link": "https://stackoverflow.com/users/6607392/wreigh"}, "edited": false, "score": 0, "creation_date": 1520409995, "post_id": 49146771, "comment_id": 85298387, "body": "how do you solve your problem which you say produces other bugs? because obviously, you cannot perform <code>!=</code> between <code>int</code> and <code>struct</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1520411269, "post_id": 49146771, "comment_id": 85299022, "body": "As for your problem, is the purpose of the comparison <code>*itemtolist != 0</code> to check for a null pointer returned by <code>malloc</code>? Then you should probably reread your text books about pointers and the dereference operator <code>*</code> and what it does."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1520411495, "post_id": 49146771, "comment_id": 85299145, "body": "Oh and you might want to learn that there might be reasons <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">to not cast the result of <code>malloc</code></a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1520418368, "post_id": 49146771, "comment_id": 85303342, "body": "It would appear that you have invalid operands to the != operator. How much clearer can a compiler message get? Look at the operands then fix them."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1520412810, "creation_date": 1520412810, "answer_id": 49147652, "question_id": 49146771, "link": "https://stackoverflow.com/questions/49146771/c-error-invalid-operands-to-binary/49147652#49147652", "title": "C - &quot;Error: Invalid operands to binary != ...&quot;", "body": "<p>You want to check that <strong><code>itemtolist</code></strong> itself (a pointer) isn't a null pointer.</p>\n\n<p>But instead, your code attempts to compare <strong><code>*itemtolist</code></strong> (the pointed-at list), which isn't comparable to <code>0</code>.</p>\n\n<p>This fragment should be improved:</p>\n\n<pre><code>grocerylist * itemtolist;\nitemtolist = (grocerylist*)malloc(sizeof(grocerylist)*arr);\n\nif (*itemtolist != 0)\n</code></pre>\n\n<p>I'd write this as:</p>\n\n<pre><code>grocerylist *itemtolist = malloc((sizeof *itemtolist) * arr);\n\nif (itemtolist)\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li><code>itemtolist != 0</code> is equivalent to just <code>itemlist</code> here in a boolean context.  You can write it the long way if you want, but the short form is probably more idiomatic in C.</li>\n<li>We <a href=\"/q/605845\">don't cast</a> the result of any of the <code>malloc()</code> family of functions.</li>\n<li>Use the <code>sizeof</code> operator on the <code>*itemlist</code> so it automatically uses the correct type.</li>\n<li>Initialize the variable as you declare it - that helps avoid accidentally using unintialized variables (but your compiler warnings should include that).</li>\n</ul>\n\n<p>Also note that you really ought to check the return value from <code>scanf()</code> - I assume you removed the checking to make your example short for the question.  You will need to change <code>%c</code> to <code>%99s</code>, but again, compiling with <code>gcc -Wall</code> or equivalent will help you spot that.</p>\n"}], "owner": {"reputation": 1, "user_id": 9455250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--aWDp8VMWdU/AAAAAAAAAAI/AAAAAAAAANY/ZErzk7h8aVA/photo.jpg?sz=128", "display_name": "Antonius M", "link": "https://stackoverflow.com/users/9455250/antonius-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520412810, "creation_date": 1520409362, "last_edit_date": 1520410048, "question_id": 49146771, "link": "https://stackoverflow.com/questions/49146771/c-error-invalid-operands-to-binary", "title": "C - &quot;Error: Invalid operands to binary != ...&quot;", "body": "<p>I seem to not be able to find the problem to make the program work. C is telling me \"error: Invalid operands to binary != 'grocerylist' (aka struct grocerylist) and 'int' When i try to solve this problem other bugs pop out, can anyone see other problems in this code except for the bug I posted about?</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n#define MAX 100\n\ntypedef struct grocerylist\n{\n    char name[MAX];\n    float ammount;\n    char unit[MAX];\n} grocerylist;\n\n\n\nstruct grocerylist * enterItems(int arr)\n{\n    grocerylist * itemtolist;\n    itemtolist = (grocerylist*)malloc(sizeof(grocerylist)*arr);\n\n    if (*itemtolist != 0)\n    {\n        int i;\n\n        for(i = 0; i &lt; arr; i++)\n        {\n            printf(\"Enter item name: /n\");\n            scanf(\"%c\", (itemtolist[i]).name);\n            printf(\"Enter ammount of item: /n\");\n            scanf(\"%f\", &amp;(itemtolist[i]).ammount);\n            printf(\"Enter unit of item: /n\");\n            scanf(\"%c\", (itemtolist[i]).unit);\n        }\n\n    }\n    return itemtolist;\n}\n\n\nvoid printShoppingList(grocerylist *itemtolist, int arr)\n{\n    int i;\n    for (i = 0; i &lt; arr; i++)\n    {\n        printf(\"%s, %f, %s\", itemtolist[i].name, itemtolist[i].ammount, \n               itemtolist[i].unit);\n    }\n}\n\n\n\nint main(void)\n{\n    int arr, number;\n    grocerylist * itemtolist;\n\n    while (number == 0)\n    {\n        printf(\"How many items would you like to add to your list? /n\");\n        scanf(\"%i\", &amp;arr);\n\n        itemtolist = enterItems(arr);\n        printShoppingList(itemtolist, arr);\n        free(itemtolist);\n\n        printf(\"Do you want to enter another item. 0 for yes, 1 for no\");\n        scanf(\"%i\", &amp;number);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "webkit"], "comments": [{"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1520464429, "post_id": 49146615, "comment_id": 85331300, "body": "You may have the webkit1 api configured for webkit-gtk. Look in your pkgconfig dir for webkitgtk (or is it gtkwebkit) ... once you know the exact name of the .pc file you can add a similar pkgconfig command.  You may need to change your includes as well."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6316488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed01dd1702e56cf607aa1b849cd9d2a5?s=128&d=identicon&r=PG&f=1", "display_name": "yardras", "link": "https://stackoverflow.com/users/6316488/yardras"}, "is_accepted": false, "score": 0, "last_activity_date": 1520418775, "creation_date": 1520418775, "answer_id": 49149710, "question_id": 49146615, "link": "https://stackoverflow.com/questions/49146615/c-gtk-webkit-program-does-not-compile-fatal-error-webkit2-webkit2-h-no-su/49149710#49149710", "title": "C + GTK + WEBKIT program does not compile: fatal error: webkit2/webkit2.h: No such file or directory", "body": "<p>I would recommend you to add some include folders explicitely.\nFor example, in the case of webkit2\ngcc -I \nTry to find it ith find or locate if the db is updated.</p>\n"}, {"tags": [], "owner": {"reputation": 211, "user_id": 4910176, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-LY2kLX49E24/AAAAAAAAAAI/AAAAAAAAAHo/0YkFkiptFj8/photo.jpg?sz=128", "display_name": "Graeme Jensz", "link": "https://stackoverflow.com/users/4910176/graeme-jensz"}, "is_accepted": false, "score": 0, "last_activity_date": 1541410190, "last_edit_date": 1541410190, "creation_date": 1520468234, "answer_id": 49163415, "question_id": 49146615, "link": "https://stackoverflow.com/questions/49146615/c-gtk-webkit-program-does-not-compile-fatal-error-webkit2-webkit2-h-no-su/49163415#49163415", "title": "C + GTK + WEBKIT program does not compile: fatal error: webkit2/webkit2.h: No such file or directory", "body": "<p>The following gcc compile command seems to work:</p>\n\n<pre><code>gcc `pkg-config --cflags gtk+-3.0 webkit2gtk-4.0` -o hello hello.c `pkg-config --libs gtk+-3.0 webkit2gtk-4.0`\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 4910176, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-LY2kLX49E24/AAAAAAAAAAI/AAAAAAAAAHo/0YkFkiptFj8/photo.jpg?sz=128", "display_name": "Graeme Jensz", "link": "https://stackoverflow.com/users/4910176/graeme-jensz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 938, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541411704, "creation_date": 1520408713, "last_edit_date": 1541411704, "question_id": 49146615, "link": "https://stackoverflow.com/questions/49146615/c-gtk-webkit-program-does-not-compile-fatal-error-webkit2-webkit2-h-no-su", "title": "C + GTK + WEBKIT program does not compile: fatal error: webkit2/webkit2.h: No such file or directory", "body": "<p>On a Linux Mint 64-bit PC</p>\n\n<p>This C program does not compile:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n#include &lt;webkit2/webkit2.h&gt;\n\nint main(int argc, char* argv[])\n{\n    gtk_init(&amp;argc, &amp;argv);\n\n    return 0;\n}\n\ngcc `pkg-config --cflags gtk+-3.0` -o hello hello.c `pkg-config --libs gtk+-3.0`\n</code></pre>\n\n<p>The compile error message is: hello.c:2:29: fatal error: webkit2/webkit2.h: No such file or directory</p>\n\n<p>I've installed every webkit library I can find and I continue to get this error message!</p>\n\n<p>I have searched and found on my Linux Mint PC:\n/usr/include/webkitgtk-4.0/webkit2/webkit2.h</p>\n\n<p>I think the gcc compile command does not include info about webkit2.</p>\n"}, {"tags": ["c", "pointers", "malloc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520406962, "post_id": 49146098, "comment_id": 85296994, "body": "<code>contacts</code> is a pointer, and the size of this variable type is <code>4</code> on your system. The correct syntax is <code>printf(&quot;%zu\\n&quot;, sizeof (contacts));</code> and the parentheses around <code>contacts</code> is unnecessary (only for a type). BTW the caller&#39;s  <code>contacts</code> will not be initialised \u2013 the pointer will not be passed back to the caller. All you get is a memory leak, and the caller&#39;s <code>static Contact* contacts; </code> remains <i>uninitialised</i> except to a <code>NULL</code> value. Please take note of compiler warnings."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9455071"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520407812, "post_id": 49146098, "comment_id": 85297373, "body": "@WeatherVane Thank you for taking your precious time to help me on this. Then should I use &amp; operator to pass the address of contacts for successful initialization? I didn&#39;t do it because I learned that array is a kind of pointer . and I can pass an array variable(not the address of the array variable) as an argument to change the value of array elements, which I guess I can pass a pointer variable(not the address) as an argument to change what it points to. I thought I understood the concept of pointer correctly, but I guess I&#39;m totally wrong."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1520408380, "post_id": 49146098, "comment_id": 85297641, "body": "You are probably better off returning the pointer instead of passing it as a parameter, otherwise you would need to use a pointer-to-a-pointer.  So <code>contacts = init()</code>.  By the way, don&#39;t forget to <code>free(contacts)</code> when you are done."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520408401, "post_id": 49146098, "comment_id": 85297645, "body": "Easiest is to return the pointer to allocated memory as the function value. But you don&#39;t even need a separate function \u2013 it&#39;s a one liner. <code>static Contact *contacts = malloc(sizeof *contacts * 5);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9455071"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1520408510, "post_id": 49146098, "comment_id": 85297683, "body": "@cdarke Thank you for your comment. I&#39;ll try that!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9455071"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520408527, "post_id": 49146098, "comment_id": 85297688, "body": "@WeatherVane Thank you so much! I&#39;ll try that"}], "owner": {"user_type": "does_not_exist", "display_name": "user9455071"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1520406777, "answer_count": 0, "score": 1, "last_activity_date": 1520406659, "creation_date": 1520406659, "question_id": 49146098, "link": "https://stackoverflow.com/questions/49146098/c-function-malloc-does-not-work-as-i-expected", "closed_reason": "Duplicate", "title": "C function malloc() does not work as I expected", "body": "<p>I've been studying C language for several days and I'm currently making a simple console Contacts(address book) program to see what I've learned so far.\nBut in the process, I met this error and I don't know what I missed. \nHere's my code</p>\n\n<pre><code>int main() {\n   startProgram();\n}\n</code></pre>\n\n<p>This is my main function. It calls startProgram method, which calls printMenu function.</p>\n\n<pre><code>void printMenu(void) {\n// print select page\n   static Contact* contacts; // this value is for keeping Contact\n                             // when the user inserted them.\n   static int cnt = 0; // this is for counting the number of Contact.\n   int choice;\n   printf(\"%d\\n\", sizeof(contacts));  //prints 4\n   if (cnt == 0) {\n      init(contacts); \n   }\n   printf(\"%d\\n\", sizeof(contacts)); // prints 4\n</code></pre>\n\n<p>I cut some other codes that are not related to this problem. Here's my problem. I wanted to initiate the variable contacts with the size of 5 elements.</p>\n\n<pre><code>void init(Contact* contacts) {\n   contacts = (Contact*)malloc(sizeof(Contact) * 5);\n   printf(\"%d\\n\", sizeof(Contact) * 5); //prints 200 (char[20] name + char[20] phoneNum)\n   printf(\"%d\\n\", sizeof(contacts)); // prints 4 &lt;-????????????\n}\n</code></pre>\n\n<p>I expected the last one would be 1000 (it is 200 * 5) but what I got here is 4. The returned value from malloc() function is some memory address, not NULL. I've searched many articles but I couldn't find out what was wrong so far. Can you guys explain what I missed? Thank you for taking your time in reading this.</p>\n"}, {"tags": ["c++", "c", "serialization", "jsoncpp", "jpbc"], "answers": [{"tags": [], "owner": {"reputation": 266, "user_id": 4622843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed7c45f601c2672c4137f38c11e621ff?s=128&d=identicon&r=PG&f=1", "display_name": "mere3ortal", "link": "https://stackoverflow.com/users/4622843/mere3ortal"}, "is_accepted": true, "score": 0, "last_activity_date": 1520425406, "creation_date": 1520425406, "answer_id": 49151886, "question_id": 49145231, "link": "https://stackoverflow.com/questions/49145231/how-to-store-serialized-element-in-pbc/49151886#49151886", "title": "How to store serialized element in PBC?", "body": "<p>You need to first allocate some memory, and then pass the address of this allocated memory to the element_to_bytes() function, which will store the element in the memory that you allocated.</p>\n\n<p>How do you know how many bytes to allocate? Use the element_length_in_bytes() for that.</p>\n\n<pre><code>int num_bytes = element_length_in_bytes(e);\n/* Handle errors, ensure num_bytes &gt; 0 */\n\nchar *elem_bytes = malloc(num_bytes * sizeof(unsigned char));\n/* Handle malloc failure */\n\nint ret = element_to_bytes(elem_bytes, e);\n/* Handle errors by looking at 'ret'; read the PBC documentation */\n</code></pre>\n\n<p>At this point you have your element rendered as bytes sitting in elem_bytes. The simplest way to just write it to a file would be to use open()/write()/close(). If there is some specific reason why you have to use jsoncpp, then you have to read the documentation for jsoncpp about how to writing a byte array. Note that any method you call must ask for the number of bytes that are being written.</p>\n\n<p>Using open()/write()/close() here is how you would do it:</p>\n\n<pre><code>int fd = open(\"myfile\", ...)\nwrite(fd, elem_bytes, num_bytes);\nclose(fd);\n</code></pre>\n\n<p>After you are done, you have to free up the memory you allocated:</p>\n\n<pre><code>free(elem_bytes);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8394724, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-59tNeCwAhy0/AAAAAAAAAAI/AAAAAAAAAAc/l4dMye1pwgc/photo.jpg?sz=128", "display_name": "FFYzz", "link": "https://stackoverflow.com/users/8394724/ffyzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 49151886, "answer_count": 1, "score": 1, "last_activity_date": 1520425406, "creation_date": 1520402913, "last_edit_date": 1520405384, "question_id": 49145231, "link": "https://stackoverflow.com/questions/49145231/how-to-store-serialized-element-in-pbc", "title": "How to store serialized element in PBC?", "body": "<p>I am using pairing-based cryptography lib to implement an application. And I want to store the element by calling</p>\n\n<pre><code>int element_length_in_bytes(element_t e)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int element_to_bytes(unsigned char *data, element_t e)\n</code></pre>\n\n<p>The problem is that the value store in the type of <code>unsigned char *</code>. So I don't know how to store it in a file.</p>\n\n<p>I tried to cast it to <code>char *</code> and used a lib called <code>jsoncpp</code> to store. However the value is not correct when I use <code>Json::Value((char *)data)</code> to keep. What should I do to solve this problem.</p>\n"}, {"tags": ["c", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 17337, "user_id": 83605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214bcecbc04c7c42696e55cbdea3e17?s=128&d=identicon&r=PG", "display_name": "Aziz", "link": "https://stackoverflow.com/users/83605/aziz"}, "edited": false, "score": 0, "creation_date": 1520406404, "post_id": 49145190, "comment_id": 85296761, "body": "There is nothing wrong with the code. My guess is that there is more code in that block that pre- or post-process the array in parallel, and that only sorting is done by a single thread."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 17337, "user_id": 83605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214bcecbc04c7c42696e55cbdea3e17?s=128&d=identicon&r=PG", "display_name": "Aziz", "link": "https://stackoverflow.com/users/83605/aziz"}, "edited": false, "score": 0, "creation_date": 1520411325, "post_id": 49145190, "comment_id": 85299052, "body": "@Aziz Parallelism inside <code>QuickSort</code> is likely achived via nested parallelism and OpenMP tasks/sections."}], "answers": [{"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 4, "last_activity_date": 1520413180, "last_edit_date": 1520413180, "creation_date": 1520411153, "answer_id": 49147204, "question_id": 49145190, "link": "https://stackoverflow.com/questions/49145190/why-to-use-openmp-single-inside-of-openmp-parallel-block/49147204#49147204", "title": "Why to use OpenMP Single inside of OpenMP parallel block?", "body": "<p>This scenario is typically employed by <em>task parallelism</em>, where first, you need to create a fixed number of threads and second, you define some <em>tasks</em> that are then distributed to these threads by OpenMP runtime. Definition of tasks (via <code>#pragma omp task</code> or <code>#pragma omp section</code>) must be done within a parallel section. However, there are situations, such as within quicksort, where it does not make sense to define tasks from multiple threads; to define them from a single thread only, you use <code>#pragma omp single</code>. </p>\n\n<p>Parallelization of quicksort is not trivial. Additionally to tasking, you also need to execute <em>partitioning</em> in parallel at the top levels of recursion. This is in OpenMP achieved via <em>nested parallelism</em>.</p>\n\n<p>Consider, e.g., quicksort and 8 cores:</p>\n\n<ol>\n<li>You create 8 threads (<code>#pragma omp parallel</code>).</li>\n<li>You invoke <code>quicksort</code> by a single thread only (<code>#pragma omp single</code>).</li>\n<li>Within <code>quicksort</code>, you invoke <code>partition</code>, which splits the single threads into 8 threads via nested parallelism and performs partitioning in parallel.</li>\n<li>Finally, 2 partitions are created. The single thread now creates 2 tasks (<code>#pragma omp task</code>) and invoke itself recursively within them by invoking <code>quicksort</code>.</li>\n<li>OpenMP runtime assigns these 2 tasks to any of 8 available threads, since all are idle now.</li>\n<li>Now, 2 threads are executing the <code>quicksort</code> function.</li>\n</ol>\n\n<p>This case only describes the top level of recursion. At lower levels, you need to care about <em>load balancing</em>, since both partitions may be of different sizes. (On the 2nd level, there are two threads executing <code>partition</code> concurrently. However, due to generally different sizes of both partitions, you, e.g., split the 1st thread into 3 threads and the 2nd thread into 5 threads to utilize all 8 cores. Basically you want all these cores to be utilized as much as possible, which is quite a challenge for multithreaded quicksort developers.)</p>\n\n<p>Efficient implementation will also employ <em>tail call optimization</em>, where only 1 task will be created instead of 2; it saves a lot of stack space and avoid many <code>call</code> instructions. Below some threshold, you then switch to sequential quicksort (or rather to some combination of quicksort, insertion sort, and heapsort, for instance).</p>\n\n<hr>\n\n<p>For illustration, this is the trivial implementation of parallel quicksort with OpenMP for sorting an array of integers:</p>\n\n<pre><code>void par_qs_rec(int* a, long lo, long hi) {\n   if (lo &lt; hi) {\n      long p = partition(a, lo, hi);\n      #pragma omp task\n      par_qs_rec(a, lo, p - 1);\n      #pragma omp task\n      par_qs_rec(a, p + 1, hi);\n   }\n}\n\nvoid par_qs(int* a, long lo, long hi) {\n   #pragma omp parallel \n   {\n      #pragma omp single\n      par_qs_rec(a, lo, hi); // (1)\n   }\n}\n</code></pre>\n\n<p>What would happen if there was no <code>#pragma omp single</code>, i.e., if initial <code>par_qs_rec</code> would be invoked by all threads at <code>(1)</code>?</p>\n"}], "owner": {"reputation": 23, "user_id": 9454930, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Patricp", "link": "https://stackoverflow.com/users/9454930/patricp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 49147204, "answer_count": 1, "score": 2, "last_activity_date": 1520490348, "creation_date": 1520402729, "last_edit_date": 1520490348, "question_id": 49145190, "link": "https://stackoverflow.com/questions/49145190/why-to-use-openmp-single-inside-of-openmp-parallel-block", "title": "Why to use OpenMP Single inside of OpenMP parallel block?", "body": "<p>For example:</p>\n\n<pre><code>#pragma omp parallel num_threads(2)\n{\n    #pragma omp single\n    QuickSort(arr, 0, arr.length, cuttoff);\n}\n</code></pre>\n\n<p>As far as i know <code>#pragma omp single</code> makes code serial. Only one process will will execute QuickSort(). Is something wrong with the upper code?</p>\n"}, {"tags": ["c", "debugging", "greatest-common-divisor"], "comments": [{"owner": {"reputation": 577, "user_id": 5616680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b15c543b518f97dafc4b9b8511bb73c?s=128&d=identicon&r=PG&f=1", "display_name": "dddJewelsbbb", "link": "https://stackoverflow.com/users/5616680/dddjewelsbbb"}, "edited": false, "score": 0, "creation_date": 1520402389, "post_id": 49145077, "comment_id": 85295119, "body": "<code>b</code> is updated when <code>r</code> is updated, every time the loop iterates. The loop goes no further when <code>b == 0</code> is false. So, the second b is updated, the following loop iteration no longer executes."}, {"owner": {"reputation": 577, "user_id": 5616680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b15c543b518f97dafc4b9b8511bb73c?s=128&d=identicon&r=PG&f=1", "display_name": "dddJewelsbbb", "link": "https://stackoverflow.com/users/5616680/dddjewelsbbb"}, "edited": false, "score": 1, "creation_date": 1520402432, "post_id": 49145077, "comment_id": 85295134, "body": "Furthermore, if you have any value OTHER than 0 in the input, your loop will not execute at all."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1520409196, "post_id": 49145077, "comment_id": 85297986, "body": "Compile with all warnings and debug info: <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Add <code>\\n</code> inside your <code>printf</code> control strings (or call <code>fflush</code>). <b><a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">use the <code>gdb</code> debugger</a></b>"}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 1, "last_activity_date": 1520424399, "last_edit_date": 1520424399, "creation_date": 1520403718, "answer_id": 49145428, "question_id": 49145077, "link": "https://stackoverflow.com/questions/49145077/seemingly-ignored-assignment-to-variables-in-head-of-for-loop/49145428#49145428", "title": "seemingly ignored assignment to variables in head of for-loop", "body": "<p>This <code>for(;b==0;(a=b),(b=r))</code> sets up the for-loop like this</p>\n\n<ul>\n<li>do nothing to init anything</li>\n<li>as long as b equals 0 do the loop body</li>\n<li>between loop body executions first copy value of b to a,<br>\nthen copy value of r to b</li>\n</ul>\n\n<p>Note that the loop will never execute if b starts off non-zero.<br>\nOtherwise the loop will stop executing as soon as b becomes non-zero, from being updated with value of r.</p>\n\n<p><em>(This is somewhat compiling an answer from comments, in order to get this out of the list of unanswered questions. Credits to dddJewelsbbb. I offer to delete this if they make an answer and ask me to.)</em></p>\n"}, {"tags": [], "owner": {"reputation": 941, "user_id": 9354476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc42e9e097bc5a2fb492c1a5254d49c5?s=128&d=identicon&r=PG&f=1", "display_name": "Syed.Waris", "link": "https://stackoverflow.com/users/9354476/syed-waris"}, "is_accepted": false, "score": -1, "last_activity_date": 1520412090, "last_edit_date": 1520412090, "creation_date": 1520404723, "answer_id": 49145669, "question_id": 49145077, "link": "https://stackoverflow.com/questions/49145077/seemingly-ignored-assignment-to-variables-in-head-of-for-loop/49145669#49145669", "title": "seemingly ignored assignment to variables in head of for-loop", "body": "<p>Find the corrected working code below, which changes the loop condition:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main ()\n{\n  int a, b, r;\n  //Finf GCD by Eucledian algorithm\n  scanf (\"%d %d\", &amp;a, &amp;b);\n\n  for (; r &gt; 0; a = b, b = r)\n    {\n      r = a % b;\n    }\n  printf (\"GCD is %d\", a);\n}\n</code></pre>\n\n<p>Test by giving inputs: 16, 12</p>\n\n<pre><code>16\n12\nGCD is 4\n</code></pre>\n\n<p>Code explanation:\nThe code is the direct implementation of Euclid's algorithm to find GCD. Here the divisor (one of the number) is used to obtain a remainder (after dividing the second number as dividend). Next, the remainder becomes the divisor and the earlier divisor becomes the dividend and this process continues till remainder is zero.</p>\n\n<p>There is plenty of scope in the code to make it more elegant and handle corner cases. I corrected the exact same code as minimum as possible to spot the exact error (which was in the for loop condition).</p>\n"}], "owner": {"reputation": 11, "user_id": 9454898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Md.Rifat uddin", "link": "https://stackoverflow.com/users/9454898/md-rifat-uddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520427124, "creation_date": 1520402196, "last_edit_date": 1520427124, "question_id": 49145077, "link": "https://stackoverflow.com/questions/49145077/seemingly-ignored-assignment-to-variables-in-head-of-for-loop", "title": "seemingly ignored assignment to variables in head of for-loop", "body": "<pre><code>void main()\n{\n    int a, b, r;\n    //Finf GCD by Eucledian algorithm\n    scanf(\"%d %d\", &amp;a, &amp;b);\n\n    for( ; b == 0; (a = b), (b = r)){\n        r = a % b;\n        printf(\"GCD is %d\", a);\n    }\n    printf(\"GCD is %d\", a);\n}\n</code></pre>\n\n<p>Somehow this doesn't work.<br>\nI assign a to b and b to r, but this doesn't seem to change the value of a or b.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5687, "user_id": 8572897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb978298f5ac01ecd8a41b5173ccf081?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Shankar Gupta", "link": "https://stackoverflow.com/users/8572897/jay-shankar-gupta"}, "edited": false, "score": 0, "creation_date": 1520401630, "post_id": 49144925, "comment_id": 85294858, "body": "paste your complete code please"}, {"owner": {"reputation": 1196, "user_id": 2301570, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/r0lUu.png?s=128&g=1", "display_name": "triandicAnt", "link": "https://stackoverflow.com/users/2301570/triandicant"}, "edited": false, "score": 3, "creation_date": 1520401646, "post_id": 49144925, "comment_id": 85294867, "body": "where have you initialized <code>t</code> and why <code>i&lt;=8</code>?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1520402398, "post_id": 49144925, "comment_id": 85295123, "body": "Where are <code>new</code> and <code>original</code> declared? And in what way is it &quot;not working&quot;? Prints garbage? Prints nothing? segfaults? Only reverses some of the string? You need to provide an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, your input, and actual output (expected output will be obvious so that can be omitted). There&#39;s not enough here for anyone to help you."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1520417100, "post_id": 49146197, "comment_id": 85302536, "body": "Supplying working code with no explanation does not answer the question of why the original code did not work."}, {"owner": {"reputation": 1, "user_id": 9454784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002505a96b86ca6184a271098b71e1aa?s=128&d=identicon&r=PG&f=1", "display_name": "M4RZ", "link": "https://stackoverflow.com/users/9454784/m4rz"}, "edited": false, "score": 0, "creation_date": 1520444672, "post_id": 49146197, "comment_id": 85321191, "body": "this is the most helpful response by far, thanks a ton!"}, {"owner": {"reputation": 450, "user_id": 8187731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UnJd9.jpg?s=128&g=1", "display_name": "Khushit Shah", "link": "https://stackoverflow.com/users/8187731/khushit-shah"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1520517939, "post_id": 49146197, "comment_id": 85355004, "body": "@Eric Postpischil thanks I&#39;m new over here I will keep this in mind"}], "tags": [], "owner": {"reputation": 450, "user_id": 8187731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UnJd9.jpg?s=128&g=1", "display_name": "Khushit Shah", "link": "https://stackoverflow.com/users/8187731/khushit-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1520410592, "last_edit_date": 1520410592, "creation_date": 1520407054, "answer_id": 49146197, "question_id": 49144925, "link": "https://stackoverflow.com/questions/49144925/reversing-a-string-in-c-not-working/49146197#49146197", "title": "Reversing a string in C not working", "body": "<p>Following code should work property</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid main()\n{\n  char str[50],temp;\n  int i,j,len;\n  puts(\"enter a string\");\n  gets(str);\n  len=strlen(str);\n  /* reverse the string*/\n  for(i=0,j=len-1; i&lt;j; i++,j--)\n  {\n     temp = str[i];\n     str[i] = str[j];\n     str[j] = temp;\n  }\n  printf(\"Reverse string is %s\",str);\n}\n</code></pre>\n\n<p>Here I had use only one array and reversed the string it uses less memory and easy to understand.\nHope this works.kudos.</p>\n"}, {"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520443569, "post_id": 49148304, "comment_id": 85320569, "body": "Where do you add the string terminator?"}, {"owner": {"reputation": 109, "user_id": 3769819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33acab2554e6ada705c39f8923b003db?s=128&d=identicon&r=PG&f=1", "display_name": "rstalekar", "link": "https://stackoverflow.com/users/3769819/rstalekar"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520574740, "post_id": 49148304, "comment_id": 85380030, "body": "You could increment the array size to 9 for original and new and then iterate it till 9 instead of 8 as shown above. Infact the best thing to do is use memset at the beginning of main for new ie memset(new,0,9), for this you include string.h and then rest remains the same"}], "tags": [], "owner": {"reputation": 109, "user_id": 3769819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33acab2554e6ada705c39f8923b003db?s=128&d=identicon&r=PG&f=1", "display_name": "rstalekar", "link": "https://stackoverflow.com/users/3769819/rstalekar"}, "is_accepted": false, "score": -1, "last_activity_date": 1520414772, "creation_date": 1520414772, "answer_id": 49148304, "question_id": 49144925, "link": "https://stackoverflow.com/questions/49144925/reversing-a-string-in-c-not-working/49148304#49148304", "title": "Reversing a string in C not working", "body": "<p>Your code is flawed. The arrays you are iterating are of size 8, and in C it starts from 0, so when you mention the size of array as 8 it means the subscript 7 is the end of the array.\nIn your case you must actually input string of length 8 and not less than that.\nBecause when you are printing the array the new will always take it from &amp;new[0] which is the base address, which has nothing. However assuming that your input string will be exactly 8 bytes following is the rectified code.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;  \n    char original[8], new[8];\n    int i = 0, t = 7;\n    void main(){\n        printf(\"Enter your string here: \");\n        scanf(\"%s\", &amp;original);\n        for(i = 0; i &lt; 8; i++, t--){\n        printf(\"%c\\n\", original[i]);\n        new[t] = original[i];\n        }\n        printf(\"Your new string is %s\\n\", new);\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9454784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002505a96b86ca6184a271098b71e1aa?s=128&d=identicon&r=PG&f=1", "display_name": "M4RZ", "link": "https://stackoverflow.com/users/9454784/m4rz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520414772, "creation_date": 1520401429, "last_edit_date": 1520408129, "question_id": 49144925, "link": "https://stackoverflow.com/questions/49144925/reversing-a-string-in-c-not-working", "title": "Reversing a string in C not working", "body": "<p>I have been working on a program that reverses a string from a user. \nI have another program that does something very similar, just without the user input. Yet the former doesn't want to set the values of the second string to the first. Any and all help is appreciated!</p>\n\n<p>also i apologize for my formatting, this is my first time using this forum</p>\n\n<p>code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar original[8], new[8];\nint i = 0, t = 8;\n\nvoid main(){\n\n    printf(\"Enter your string here: \");\n    scanf(\"%s\", &amp;original);\n\n    for(i = 0; i &lt;= 8; i++, t--){\n        printf(\"%c\\n\", original[i]);\n        new[t] = original[i];\n    }\n\n    printf(\"Your new string is %s\\n\", new);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1520401376, "post_id": 49144581, "comment_id": 85294767, "body": "&#39;fairly familar with Java programming&#39; OK, what debugger did you use with java?  You need to use a similar tool with C.  Had you done so, the uninitialized value issue would have become obvious and this question unnecessary."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9213141"}, "edited": false, "score": 0, "creation_date": 1520400754, "post_id": 49144618, "comment_id": 85294561, "body": "Thank you that has solved the large sum value. Is there anything obvious wrong with my for loop? It seems to be iterating properly. Problems with unsigned and signed comparisons perhaps?"}, {"owner": {"reputation": 1581, "user_id": 2848117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7uhq.png?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/2848117/dom"}, "edited": false, "score": 0, "creation_date": 1520400979, "post_id": 49144618, "comment_id": 85294642, "body": "In general, you should always compare similar types which is what the compiler is telling you. It&#39;s not the cause of the logic error you see, but it could hide several bugs. For example a signed 0xFFFF FFFF is a different value than an unsigned 0xFFFF FFFF."}], "tags": [], "owner": {"reputation": 1581, "user_id": 2848117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7uhq.png?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/2848117/dom"}, "is_accepted": true, "score": 2, "last_activity_date": 1520399885, "creation_date": 1520399885, "answer_id": 49144618, "question_id": 49144581, "link": "https://stackoverflow.com/questions/49144581/c-methods-yielding-inconsistent-results/49144618#49144618", "title": "C Methods yielding inconsistent results", "body": "<p>You don't ever initialize <code>sumTest</code> to anything before using it to keep track of the sum so the value is indeterminate. Setting it to 0 should fix the issue like so:</p>\n\n<pre><code>int sum(int array[], unsigned int length) {\n    int sumTest = 0;\n    for (int i = 0; i &lt; length; i++) {\n        sumTest = sumTest + array[i];\n    }\n    return sumTest;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 3769819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33acab2554e6ada705c39f8923b003db?s=128&d=identicon&r=PG&f=1", "display_name": "rstalekar", "link": "https://stackoverflow.com/users/3769819/rstalekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1520400068, "creation_date": 1520400068, "answer_id": 49144654, "question_id": 49144581, "link": "https://stackoverflow.com/questions/49144581/c-methods-yielding-inconsistent-results/49144654#49144654", "title": "C Methods yielding inconsistent results", "body": "<p>You have not initialized the sumTest, so it takes any garbage value. To make it more meaningful initialize it to 0\ni.e. int sumTest = 0;</p>\n"}, {"tags": [], "owner": {"reputation": 817, "user_id": 8901102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df037df6190837d9fd62558ae74b49ca?s=128&d=identicon&r=PG&f=1", "display_name": "pask", "link": "https://stackoverflow.com/users/8901102/pask"}, "is_accepted": false, "score": 2, "last_activity_date": 1520400397, "creation_date": 1520400397, "answer_id": 49144710, "question_id": 49144581, "link": "https://stackoverflow.com/questions/49144581/c-methods-yielding-inconsistent-results/49144710#49144710", "title": "C Methods yielding inconsistent results", "body": "<p>Initialize <code>sum_test=0;</code>.</p>\n\n<p>While finding the min/max instead of saving the temp value you modify the array. This should solve it:</p>\n\n<p><code>min_test = array[i];</code></p>\n"}, {"tags": [], "owner": {"reputation": 895, "user_id": 7418646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVlz8.jpg?s=128&g=1", "display_name": "Samantha", "link": "https://stackoverflow.com/users/7418646/samantha"}, "is_accepted": false, "score": 1, "last_activity_date": 1520400400, "creation_date": 1520400400, "answer_id": 49144712, "question_id": 49144581, "link": "https://stackoverflow.com/questions/49144581/c-methods-yielding-inconsistent-results/49144712#49144712", "title": "C Methods yielding inconsistent results", "body": "<p>As the other answers have noted, <code>sumTest</code> needs to be initialized to 0 before use.</p>\n\n<p>You might also want to test what happens with</p>\n\n<pre><code>unsigned int length = 0;\nscanf(\"%u\", &amp;length);\nint array[length];\n</code></pre>\n\n<p>when you enter a very large value for <code>length</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9213141"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 49144618, "answer_count": 4, "score": 0, "last_activity_date": 1520400400, "creation_date": 1520399641, "question_id": 49144581, "link": "https://stackoverflow.com/questions/49144581/c-methods-yielding-inconsistent-results", "title": "C Methods yielding inconsistent results", "body": "<p>Firstly I am fairly familar with Java programming and have just started to learn C programming.</p>\n\n<p>Below is a program that takes inputted integers and finds the min, max and sum.</p>\n\n<p>To me (at least) that code written seems logical in properly performing the needed tasks and functions.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint sum(int array[], unsigned int length) {\n    int sumTest;\n    for (int i = 0; i &lt; length; i++) {\n        sumTest = sumTest + array[i];\n    }\n    return sumTest;\n}\n\nint max(int array[], unsigned int length) {\n    int maxTest = array[0];\n    for (int i = 0; i &lt; length; i++) {\n        if (array[i] &gt; maxTest) {\n            array[i] = maxTest;\n        }\n    }\n    return maxTest;\n}\n\nint min(int array[], unsigned int length) {\n    int minTest = array[0];\n    for (int i = 0; i &lt; length; i++) {\n        if (array[i] &lt; minTest) {\n            array[i] = minTest;\n        }\n    }\n    return minTest;\n}\n\nint main(void) {\n\n\nunsigned int length = 0;\n    scanf(\"%u\", &amp;length);\n    int array[length];\n    int temp = -1;\n    for (int i = 0; i &lt; length; i++) {\n        scanf(\"%d\", &amp;temp);\n        array[i] = temp;\n    }\n\n    printf(\"SUM: %d\\n\", sum(array, length));\n    printf(\"MAX: %d\\n\", max(array, length));\n    printf(\"MIN: %d\\n\", min(array, length));\n\n    return 0;\n}\n</code></pre>\n\n<p>However when I type in the console some entries the results vary every time.</p>\n\n<pre><code>1\n10\nSUM: 286271434\nMAX: 10\nMIN: 10\n</code></pre>\n\n<p>Again</p>\n\n<pre><code>1\n10\nSUM: -72217974\nMAX: 10\nMIN: 10\n</code></pre>\n\n<p>My compiler highlights the \"&lt;\" sign in the for loops in the three methods min,max and sum telling me I am comparing unsigned and signed integers. To fix this I have tried fixing the line to look like this.</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; length; i++) {\n</code></pre>\n\n<p>Unfortunately I still get the same results, which logically to me makes sense as I have read that unsigned integers can hold large positive numbers. I've read a bit about C being more about memory management, is it possible that I am not considering memory as a factor. I've truth fully been looking up the syntax from handbooks and forum posts none of which don't seem to consider memory as a factor and which seems no different from java.</p>\n\n<p>Can someone help me understand why this happening and what a solution is.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "reference", "dereference"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 1, "creation_date": 1520399773, "post_id": 49144573, "comment_id": 85294318, "body": "Why doesn&#39;t <code>*color</code> give you the value that <code>color</code> points to?"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520400104, "post_id": 49144573, "comment_id": 85294407, "body": "How is <code>dragon</code> defined?"}, {"owner": {"reputation": 33, "user_id": 6288241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HBlGqtmoQyc/AAAAAAAAAAI/AAAAAAAAACs/wTQd6iBwAv0/photo.jpg?sz=128", "display_name": "Henry Tang", "link": "https://stackoverflow.com/users/6288241/henry-tang"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520400198, "post_id": 49144573, "comment_id": 85294424, "body": "typedef struct dragon     { \t    char *name; \t    char *color[3]; \t    int numHead; \t    int numTail;      }dragon;"}, {"owner": {"reputation": 33, "user_id": 6288241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HBlGqtmoQyc/AAAAAAAAAAI/AAAAAAAAACs/wTQd6iBwAv0/photo.jpg?sz=128", "display_name": "Henry Tang", "link": "https://stackoverflow.com/users/6288241/henry-tang"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520400277, "post_id": 49144573, "comment_id": 85294436, "body": "sorry I don&#39;t know how to code block in comments :("}, {"owner": {"reputation": 33, "user_id": 6288241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HBlGqtmoQyc/AAAAAAAAAAI/AAAAAAAAACs/wTQd6iBwAv0/photo.jpg?sz=128", "display_name": "Henry Tang", "link": "https://stackoverflow.com/users/6288241/henry-tang"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520400395, "post_id": 49144573, "comment_id": 85294471, "body": "I think you&#39;re on to something though, maybe the problem I&#39;m having has to do with the address of the value of dragon&#39;s char instead."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520400438, "post_id": 49144573, "comment_id": 85294480, "body": "Tough to tell exactly what you are trying to compare. But your strcmp is probably wrong. I actually think it&#39;s undefined behavior since <code>color</code> is not null terminated. If you are just trying to compare the first character of <code>color</code> with the character  at <code>d [currentDra].color[currentColor]</code> then why does <code>if(*color == d [currentDra].color[currentColor])</code> not work?"}, {"owner": {"reputation": 33, "user_id": 6288241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HBlGqtmoQyc/AAAAAAAAAAI/AAAAAAAAACs/wTQd6iBwAv0/photo.jpg?sz=128", "display_name": "Henry Tang", "link": "https://stackoverflow.com/users/6288241/henry-tang"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520400643, "post_id": 49144573, "comment_id": 85294529, "body": "When I use &#39;if(*color == d [currentDra].color[currentColor])&#39; I receive a <b>warning: comparison b/w pointer and integer</b> error"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520401119, "post_id": 49144573, "comment_id": 85294695, "body": "Right. I missed that. You need to figure out what exactly you are trying to compare. I don&#39;t think I can help you until you figure that out. What <i>exactly</i> is stored in <code>dragon.color</code>?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1520401136, "post_id": 49144573, "comment_id": 85294703, "body": "On the topic of &quot;shunned upon homework help&quot;: Most people here accept the compromise described here or at least tolerate people acting according to it: <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\" title=\"how do i ask and answer homework questions\">meta.stackoverflow.com/questions/334822/&hellip;</a>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1520401363, "post_id": 49144573, "comment_id": 85294763, "body": "For formatting code in a comment use the backward tick <code>`...`</code>. But do not use it to add additional information to a question. Instead <a href=\"https://stackoverflow.com/posts/49144573/edit\">edit</a> your question to add it right in there."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1520401417, "post_id": 49144573, "comment_id": 85294776, "body": "You got the use of the term &quot;dereference&quot; wrong. I edited your question to fix."}, {"owner": {"reputation": 33, "user_id": 6288241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HBlGqtmoQyc/AAAAAAAAAAI/AAAAAAAAACs/wTQd6iBwAv0/photo.jpg?sz=128", "display_name": "Henry Tang", "link": "https://stackoverflow.com/users/6288241/henry-tang"}, "edited": false, "score": 0, "creation_date": 1520401558, "post_id": 49144573, "comment_id": 85294832, "body": "<code>dragon.color</code> stores single char as string literals for example, <code>dragon.color[0]</code> will equal &quot;b&quot; for blue. But also <code>dragon.color</code> will always have three values [0] [1] [2] forming an array of string literals."}, {"owner": {"reputation": 33, "user_id": 6288241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HBlGqtmoQyc/AAAAAAAAAAI/AAAAAAAAACs/wTQd6iBwAv0/photo.jpg?sz=128", "display_name": "Henry Tang", "link": "https://stackoverflow.com/users/6288241/henry-tang"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1520401661, "post_id": 49144573, "comment_id": 85294879, "body": "@Yunnosch ty for the newbie help ^^"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520401740, "post_id": 49144573, "comment_id": 85294898, "body": "Ok. Then <code>strcmp</code> won&#39;t work because <code>color</code> is not null terminated. If it&#39;s always just one character, use <code>if(color[0] ==  d[currentDra].color[currentColor][0])</code>"}, {"owner": {"reputation": 33, "user_id": 6288241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HBlGqtmoQyc/AAAAAAAAAAI/AAAAAAAAACs/wTQd6iBwAv0/photo.jpg?sz=128", "display_name": "Henry Tang", "link": "https://stackoverflow.com/users/6288241/henry-tang"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520402201, "post_id": 49144573, "comment_id": 85295058, "body": "@MFisherKDX Wow. I would&#39;ve never found the answer without you! I have never seen a case like this before."}], "answers": [{"tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": true, "score": 1, "last_activity_date": 1520402010, "creation_date": 1520402010, "answer_id": 49145044, "question_id": 49144573, "link": "https://stackoverflow.com/questions/49144573/c-how-to-get-original-value-of-when-you-pass-a-dereferenced-value-to-a-functio/49145044#49145044", "title": "C - How to get original value of when you pass a dereferenced value to a function to later be compare with another string?", "body": "<p><code>if(strcmp(color, d[currentDra].color[currentColor]);</code></p>\n\n<p>This doesn't work because <code>color</code>, as passed, is not null terminated. Thus this is undefined behavior.</p>\n\n<p><code>if(color ==  d[currentDra].color[currentColor])</code></p>\n\n<p>This doesn't work because you are comparing the pointers and not the values they reference.</p>\n\n<p>If <code>dragon.color</code> is an array that contains single character strings, then you can compare with:</p>\n\n<p><code>if(color[0] == d[currentDra].color[currentColor][0])</code></p>\n"}], "owner": {"reputation": 33, "user_id": 6288241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HBlGqtmoQyc/AAAAAAAAAAI/AAAAAAAAACs/wTQd6iBwAv0/photo.jpg?sz=128", "display_name": "Henry Tang", "link": "https://stackoverflow.com/users/6288241/henry-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 49145044, "answer_count": 1, "score": 3, "last_activity_date": 1520402870, "creation_date": 1520399599, "last_edit_date": 1520401510, "question_id": 49144573, "link": "https://stackoverflow.com/questions/49144573/c-how-to-get-original-value-of-when-you-pass-a-dereferenced-value-to-a-functio", "title": "C - How to get original value of when you pass a dereferenced value to a function to later be compare with another string?", "body": "<p>I know homework help are shunned upon, however, I have intense coder's block.</p>\n\n<p><strong>I want help understanding more than anything.</strong></p>\n\n<p>So when I take the address of the variable (<strong>&amp;c</strong>) I understand that I get an address to its location in memory, but I don't know how to dereference that address in order to access its specific value (<strong>'b'</strong>) to be compared in the function (<strong>color(&amp;c, total</strong>) it is used in.</p>\n\n<p><em>The main cannot be changed for any reason due to the requirements of the assignment</em></p>\n\n<pre><code>typedef struct dragon\n{\n    char *name;\n    char *color[3];\n    int numHead;\n    int numTail;\n\n}dragon;\n\nvoid color(char* color, dragon *d);\n\nint main()\n{\n\ndragon total[4];\ndragon_info(total);\nchar c = 'b';\ncolor(&amp;c, total);\nreturn 0;\n}\n</code></pre>\n\n<p>Eventually, I used this line to see if the colors matched</p>\n\n<pre><code>if(strcmp(color, d[currentDra].color[currentColor]);\n</code></pre>\n\n<p>Before I used the line below because from my from my first perspective they would char </p>\n\n<pre><code>if(color ==  d[currentDra].color[currentColor])\n</code></pre>\n\n<p>But after debugging for a while I realized that <strong>color</strong> was just an address</p>\n\n<p>Overall, I need to somehow get the value of <strong>color</strong> using the address somehow.\n*color doesn't find the value.\n&amp;color doesn't either.</p>\n\n<p>The rest of the function</p>\n\n<pre><code>void color(char *color, dragon *d)\n{\n    char *colorList[5] = {\"red\",\"blue\",\"white\",\"green\",\"yellow\"}; \n    int colorShow;\n    int knownColor = 1;\n    printf(\"what the fuck is color? ==== %p\\n\", color);\n    if(*color == 'r')\n    {\n        colorShow = 0;\n    }\n    else if(*color == 'b')\n    {\n        colorShow = 1;\n    }\n    else if(*color == 'w')\n    {\n        colorShow = 2;\n    }\n    else if(*color == 'g')\n    {\n        colorShow = 3;\n    }\n    else if(*color == 'y')\n    {\n        colorShow = 4;\n    }\n    else\n    {\n        printf(\"Sorry that is an unknown color, exiting...\\n\");\n        knownColor = 0;\n    }\n\n\n    //if a char then = numbers 0-1\n    //one loop for the dragons\n    if(knownColor)\n    {\n        printf(\"***All the %s dragons:***\\n\", colorList[colorShow]);\n        int currentDra;\n        for(currentDra = 0; currentDra &lt; 4; currentDra++)\n        {\n            //another loop for the colors of the dragon\n            int currentColor;\n            for(currentColor = 0; currentColor &lt; 3; currentColor++)\n            {\n                //printf(\"%c\\n\\n\", (char*)color);\n\n                if(strcmp(color, d[currentDra].color[currentColor]))\n                {\n                   printf(\"%s is %s\\n\", d[currentDra].name, colorList[colorShow]);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Thank you so much this is my first question ever.</p>\n"}, {"tags": ["c", "numerical-methods", "dev-c++"], "comments": [{"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 5, "creation_date": 1520398381, "post_id": 49144369, "comment_id": 85293899, "body": "you should not use an image as a code. use text."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1520398690, "post_id": 49144369, "comment_id": 85294004, "body": "Welcome to Stack Overflow.  Please include your code in the question directly \u2014 do not use images of your code because it is unreadable and uncopyable and untestable and therefore undebuggable."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 2, "creation_date": 1520398740, "post_id": 49144369, "comment_id": 85294017, "body": "like @roottraveller has suggested, you should never post images of code. Apart from that, don&#39;t just copy paste the entire code you are trying to run. Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that appropriately demonstrates the problem."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520399034, "post_id": 49144369, "comment_id": 85294105, "body": "You should try printing the <code>coeff</code>s after you read them to determine where the exact problem is."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1520399424, "post_id": 49144369, "comment_id": 85294221, "body": "<code>horner(coeffs, sizeof(coeffs), c);</code> doesn&#39;t do what you think it does. <code>coeffs</code> is a pointer, so <code>sizeof(coeffs)</code> is the size of a pointer. It is not the number of elements in the array."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520399669, "post_id": 49144369, "comment_id": 85294288, "body": "Don&#39;t add more pictures!  Show the text of the output in the question!  In the C tag, pictures are bad unless you&#39;re actually doing graphics, which you are manifestly not doing."}], "answers": [{"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1520413367, "creation_date": 1520413367, "answer_id": 49147824, "question_id": 49144369, "link": "https://stackoverflow.com/questions/49144369/where-is-the-error-in-my-function-for-derivative-of-polynomial-using-horners-me/49147824#49147824", "title": "Where is the error in my function for derivative of polynomial using Horner&#39;s method?", "body": "<p>As pointed, you have some problems in your code:</p>\n\n<ul>\n<li><p>Usage of <code>sizeof</code>. </p>\n\n<ul>\n<li><code>sizeof &lt;array&gt;</code> will return the size of  <strong>in bytes</strong>.</li>\n<li><code>sizeof &lt;pointer&gt;</code> will return the size of a pointer on your system typically 4 (32 bits arch) or 8 (64 bits arch).</li>\n</ul>\n\n<p>Look at this code:</p>\n\n<pre><code>void foo(int * p)\n{\n    printf(\"sizeof pointer is %z\\n\", sizeof p);\n}   \nvoid bar()\n{\n    int a[256];\n    printf(\"sizeof array is %z\\n\", sizeof a);\n    foo(a);\n}\n</code></pre>\n\n<p>It will print:</p>\n\n<pre><code>sizeof array is 1024\nsizeof pointer is 8\n</code></pre>\n\n<p>So you can't use <code>sizeof(coeffs)</code></p></li>\n<li><p>How do you handle when Newton's method make more than 10 step to converge? You should return some value if condition <code>fabs(c_1-c)&lt;eps</code> is never met (why not with some warning?)</p></li>\n</ul>\n\n<hr>\n\n<p>One solution could be:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;stdlib.h&gt;\n\ndouble horner(double *coeffs, int s, double x)\n{\n    int i;\n    double res = 0.0;\n\n    for(i=s-1; i &gt;= 0; i--)\n    {\n        res = res * x + coeffs[i];\n    }\n    return res;\n}\n\ndouble hornerDerivative(double *coeffs, int s_1, double x_1)\n{\n    int i_1;\n    double res_1 = 0.0;\n\n    for(i_1 = s_1; i_1 &gt;= 1; i_1--)\n    {\n        res_1 = res_1 * x_1 + i_1*coeffs[i_1];\n    }\n    return res_1;\n}\n\n/* New parameter here: cnt the number of elements in coeffs */\ndouble newton(double *coeffs, size_t cnt, double a, double b, double eps)\n{\n   int N = 0;\n   double c = ((a+b)/2);\n\n   while(N &lt; 10)\n   {\n        /* replacing sizeof... by cnt */\n        double y = horner(coeffs, cnt, c);\n        /* replacing sizeof... by cnt */\n        double y_derivative = hornerDerivative(coeffs, cnt, c);\n        double c_1 = c - (y/y_derivative);\n        printf(\"c: %f\\t\",c);\n        printf(\"y: %f\\t\",y);\n        printf(\"y_der: %f\\t\",y_derivative);\n        printf(\"c_1: %f\\n\",c_1);\n        if(fabs(c_1-c)&lt;eps)\n        {\n            return c_1;                   \n        }\n        c = c_1;\n        N = N + 1;\n   }\n\n   /* always return some value */\n   fprintf(stderr, \"Warning newton do not converge in 10 steps...\\n\")\n   return c;\n}\n\nint main(int argc, char **argv)\n{\n    printf(\"# of arguments%d\\n\\n\\n\\n\", argc);\n    double coeffs[argc-3];\n\n    double a = atof(argv[argc-2]);\n    double b = atof(argv[argc-1]);\n    double eps = .001;\n\n    int i;\n    for(i=1; i &lt; argc-2; i++)\n    {\n        coeffs[i-1] = atof(argv[argc-2-i]);\n    }\n\n    /* pass the number of elements in coeffs array */\n    printf(\"The root of the equation is: %f\\n\", newton(coeffs, argc-3, a, b, eps));    \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9454047, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215714233195176/picture?type=large", "display_name": "Muhammad Abdullah Mashwani", "link": "https://stackoverflow.com/users/9454047/muhammad-abdullah-mashwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1520413367, "creation_date": 1520398255, "last_edit_date": 1520403377, "question_id": 49144369, "link": "https://stackoverflow.com/questions/49144369/where-is-the-error-in-my-function-for-derivative-of-polynomial-using-horners-me", "title": "Where is the error in my function for derivative of polynomial using Horner&#39;s method?", "body": "<p>I was using horners method to create code that could calculate a polynomial, and its derivative for any set of coefficients that im given. Horner's method was working perfectly when i had values hardcoded, but when i changed my code to take any input from the command line prompt, horner's derivative started printing out crazy numbers with dozens of zeros. but horner's method for the polynomial is being calculated properly still. I don't exactly know where the error is in this code.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;math.h&gt;\n    #include&lt;stdlib.h&gt;\n\n  double horner(double *coeffs, int s, double x)\n{\n  int i;\n  double res = 0.0;\n\n  for(i=s-1; i &gt;= 0; i--)\n  {\n    res = res * x + coeffs[i];\n  }\n  return res;\n}\n\ndouble hornerDerivative(double *coeffs, int s_1, double x_1)\n{\n  int i_1;\n  double res_1 = 0.0;\n\n  for(i_1 = s_1; i_1 &gt;= 1; i_1--)\n  {\n    res_1 = res_1 * x_1 + i_1*coeffs[i_1];\n  }\n  return res_1;\n}\n\ndouble newton(double *coeffs, double a, double b, double eps)\n{\n       int N = 0;\n       double c = ((a+b)/2);\n\n       while(N &lt; 10)\n       {\n               double y = horner(coeffs, sizeof(coeffs), c);\n               double y_derivative = hornerDerivative(coeffs, sizeof(coeffs), c);\n               double c_1 = c - (y/y_derivative);\n               printf(\"c: %f\\t\",c);\n               printf(\"y: %f\\t\",y);\n               printf(\"y_der: %f\\t\",y_derivative);\n               printf(\"c_1: %f\\n\",c_1);\n               if(fabs(c_1-c)&lt;eps)\n               {\n                    return c_1;                   \n               }\n               c = c_1;\n               N = N + 1;\n       }\n}\n\nint main(int argc, char **argv)\n{\n  printf(\"# of arguments%d\\n\\n\\n\\n\", argc);\n  double coeffs[argc-3];\n\n  double a = atof(argv[argc-2]);\n  double b = atof(argv[argc-1]);\n  double eps = .001;\n\n  int i;\n  for(i=1; i &lt; argc-2; i++)\n  {\n           coeffs[i-1] = atof(argv[argc-2-i]);\n  }\n\n  printf(\"The root of the equation is: %f\\n\", newton(coeffs, a, b, eps));\n  system(\"pause\");\n  return 0;\n}\n</code></pre>\n\n<p>This is the output that I am getting. </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Dev-Cpp&gt;ProgrammingAssignment1.exe 1 -6 4 12 1 4\n# of arguments7\n\n\n\nc: 2.500000     y: 0.125000     y_der: 61390858609268995000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000     c_1: 2.500000\nThe root of the equation is: 2.500000\n</code></pre>\n\n<p>As you can see, horner's method is calculating the polynomial just fine, but it isn't calculating the derivative properly. This is consistently the same error no matter what examples I use for the coefficients from the list my professor gave me. </p>\n"}, {"tags": ["c", "operating-system", "pipe", "ipc", "producer-consumer"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520398119, "post_id": 49144297, "comment_id": 85293813, "body": "Mismatch between format string and parameter list in <code>fprintf(stderr, &quot;I am consuming.......%d\\n&quot;, n, out);</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1520398147, "post_id": 49144297, "comment_id": 85293826, "body": "Code is having trouble with I/O yet code lacks checks of the return values of <code>read(), write()</code>.  Best to add checks there."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520398232, "post_id": 49144297, "comment_id": 85293853, "body": "<code>while (cnt == SIZE)              ;</code> doesn&#39;t change <code>cnt</code> at all, so once the loop starts, it will not stop until you get stroppy and kill the program."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520398301, "post_id": 49144297, "comment_id": 85293875, "body": "Note that once the process has forked, the parent and child processes no longer share <code>shared_arr</code> \u2014 each has their own copy of the array.  You have <code>write(fd_pipe_c2p[1], &amp;cnt, 1);</code> \u2014 that writes one byte of the integer <code>cnt</code>.  That&#39;s not what you want.  This is prevalent in both read and write operations."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520398605, "post_id": 49144297, "comment_id": 85293979, "body": "Also, it seems a bit odd for the producer to consume some information from the consumer before it produces anything.  You are going to need to rethink the code from the ground up.  Make sure you know exactly what information is supposed to be exchanged when, and how the other process will know there&#39;s information ready, etc."}, {"owner": {"reputation": 216, "user_id": 1539759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b6d4be2698606bd72567cb30db72f2cb?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1539759/nathan"}, "edited": false, "score": 0, "creation_date": 1520400440, "post_id": 49144297, "comment_id": 85294481, "body": "It has occurred to me that I posted slightly outdated code, I have changed it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520410648, "post_id": 49144297, "comment_id": 85298701, "body": "The revised code gets rid of one infinite loop; that&#39;s good.  You&#39;ve not done anything about reading and writing single bytes instead of integers when you try to pass the count around.  If you&#39;re on a big-endian machine (PowerPC, SPARC, \u2026) then you&#39;ll always be transferring a count of 0.  On a little-endian machine (Intel, \u2026), you&#39;ll be passing the low-order 8 bits, which is probably &quot;OK&quot;, but it would be better to design it so that&#39;s clear (use a <code>char</code> for the type of <code>cnt</code>, for example)."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1520410867, "post_id": 49144297, "comment_id": 85298819, "body": "The producer increments <code>cnt</code> but then the next thing it does is read a byte into <code>cnt</code> making the increment more or less pointless."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520410884, "post_id": 49144297, "comment_id": 85298831, "body": "The consumer writes 0 to the producer; the producer reads 0 and notes that it is not the same as size, so it ignores the <code>sizeof(shared_arr)</code> bytes (all zeroes) that the consumer also wrote on the pipe.  That means it doesn&#39;t write anything to the consumer.  You still have quite a lot of work to do.  It isn&#39;t clear to me how it is supposed to behave.  Your description starts &quot;after producing SIZE items, the producer \u2026&quot;, but the code doesn&#39;t have the producer producing SIZE items at any point.  So it is hard to know what should be done."}, {"owner": {"reputation": 216, "user_id": 1539759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b6d4be2698606bd72567cb30db72f2cb?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1539759/nathan"}, "edited": false, "score": 0, "creation_date": 1520411620, "post_id": 49144297, "comment_id": 85299216, "body": "Actual task i&#39;m trying to complete: Producer process produces an item and add it into the buffer if it is not full; and then notices the consumer process that some items in the buffer and ready to be consumed via a pipe (from producer to consumer);  Once Consumer received the information and then take an item one after another from the buffer until the buffer become empty.  During this process, Consumer needs to notice the producer that the buffer is not full via a pipe (from consumer to producer);  These two processes cooperate each other until the processes are terminated."}], "owner": {"reputation": 216, "user_id": 1539759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b6d4be2698606bd72567cb30db72f2cb?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1539759/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520402751, "creation_date": 1520397877, "last_edit_date": 1520402751, "question_id": 49144297, "link": "https://stackoverflow.com/questions/49144297/producer-consumer-with-two-pipes-consumer-doesnt-write-anything", "title": "Producer/Consumer with two pipes - consumer doesn&#39;t write anything", "body": "<p>After producing SIZE items, the producer process should write to the fd_pipe_p2c pipe and be read by the consumer process, which then outputs what it is consuming. After that the consumer should write back to the producer via the pipe_fd_c2p pipe to let it know there's more room in the buffer. </p>\n\n<p><strong>The cnt int doesn't seem to reach SIZE, which I expect it to do after the producer function produces SIZE items.\nTherefore the consumer function never receives what is produced.</strong> </p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define SIZE 10\n\nint shared_arr[SIZE];\nint cnt = 0, in = 0, out = 0;\nint fd_pipe_c2p[2], fd_pipe_p2c[2];\n\nvoid consumer();\nvoid producer();\n\nint main() {\n    pipe(fd_pipe_c2p); // consumer to producer\n    pipe(fd_pipe_p2c); // producer to consumer\n\n    if (fork() == 0) {\n        // child process\n        consumer();\n    } else {\n        // parent process\n        producer();\n        sleep(3);\n    }\n\n    exit(0);\n}\n\nvoid consumer() {\n    // consumer process\n    close(fd_pipe_c2p[0]);\n    while (1) {\n        while (cnt == 0) {\n            // give up everything\n            write(fd_pipe_c2p[1], &amp;cnt, 1);\n            write(fd_pipe_c2p[1], shared_arr, sizeof(shared_arr));\n\n            // read in cnt?\n            read(fd_pipe_p2c[0], &amp;cnt, 1);\n            if (cnt &gt; 0) { // if we have something, break out of inner loop\n                break;\n            }\n        }\n\n        read(fd_pipe_p2c[0], shared_arr, sizeof(shared_arr)); // read in array\n\n        int n = shared_arr[out]; // get value to consume\n\n        fprintf(stderr, \"I am consuming.......%d\\n\", n, out);\n\n        out = (out + 1) % SIZE; // move out forward?\n        cnt--; // decrease count\n    }\n}\n\nvoid producer() {\n    // producer process\n    close(fd_pipe_p2c[0]);\n    while (1) {\n        // read in cnt, if it's not == SIZE then produce something\n        read(fd_pipe_c2p[0], &amp;cnt, 1);\n        while (cnt == SIZE)  {\n            // write to consumer, we've produced something for it:\n            write(fd_pipe_p2c[1], &amp;cnt, 1);\n            write(fd_pipe_p2c[1], shared_arr, sizeof(shared_arr));\n        }\n\n        // cnt != SIZE, so let's produce something:\n        shared_arr[in] = rand() % 100;\n        fprintf(stderr, \"I am producing......%d...%d\\n\", shared_arr[in], in);\n        in = (in + 1) % SIZE;\n        cnt++;\n    }\n}\n\n\n}\n</code></pre>\n\n<p>Perhaps an example of the expected output would explain better:</p>\n\n<pre><code>I am producing......26...0.\n\nI am producing......34...1.\n\nI am producing......6...2.\n\nI am producing......1...3.\n\nI am producing......84...4.\n\nI am producing......35...5.\n\nI am producing......89...6.\n\nI am producing......38...7.\n\nI am producing......65...8.\n\nI am producing......78...9.\n\n Check to see something available.\n\nI am producing......80...0.\n\nI am consuming......26  0       \n\nI am producing......67...1.\n\nI am consuming......34  1       \n\nI am producing......59...2.\n\nI am consuming......6   2       \n\nI am producing......52...3.\n\nI am consuming......1   3       \n\nI am producing......85...4.\n\nI am consuming......84  4       \n\nI am producing......79...5.\n\nI am consuming......35  5       \n\nI am producing......94...6.\n\nI am consuming......89  6       \n\nI am producing......58...7.\n\nI am consuming......38  7       \n\nI am producing......74...8.\n\nI am consuming......65  8       \n\nI am producing......67...9.\n\nI am consuming......78  9       \n\n Check to see something available.\n</code></pre>\n\n<p>Instead, this is my current output:</p>\n\n<pre><code>I am producing......83...0\nI am producing......86...1\nI am producing......77...2\nI am producing......15...3\nI am producing......93...4\nI am producing......35...5\nI am producing......86...6\nI am producing......92...7\nI am producing......49...8\nI am producing......21...9\nI am producing......62...0\nI am producing......27...1\nI am producing......90...2\nI am producing......59...3\nI am producing......63...4\nI am producing......26...5\nI am producing......40...6\nI am producing......26...7\nI am producing......72...8\nI am producing......36...9\nI am producing......11...0\nI am producing......68...1\nI am producing......67...2\nI am producing......29...3\nI am producing......82...4\nI am producing......30...5\nI am producing......62...6\nI am producing......23...7\nI am producing......67...8\nI am producing......35...9\nI am producing......29...0\nI am producing......2...1\nI am producing......22...2\nI am producing......58...3\nI am producing......69...4\nI am producing......67...5\nI am producing......93...6\nI am producing......56...7\nI am producing......11...8\nI am producing......42...9\nI am producing......29...0\n</code></pre>\n"}, {"tags": ["c", "header-files"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1520397025, "post_id": 49144116, "comment_id": 85293508, "body": "&quot;Is it legal to initialize a variable in a header file&quot;, yes but do not do that.  Better to <i>declare</i> in .h and <i>define</i> in a .c file."}, {"owner": {"reputation": 3, "user_id": 9454595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42247146f8ca4238bbeb763a1ac5eac2?s=128&d=identicon&r=PG&f=1", "display_name": "WindowsDOS", "link": "https://stackoverflow.com/users/9454595/windowsdos"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1520397333, "post_id": 49144116, "comment_id": 85293587, "body": "Can you think of any reason why the programmers of clock builder would include it all in one file? The only reason I can think of is so you have less files to deal with copying/losing if you&#39;re unfamiliar with how it exports data."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1520397840, "post_id": 49144116, "comment_id": 85293717, "body": "You should search the project for all the <code>#include</code> directives for that header. It should only be included in one <code>.c</code> file."}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1520397134, "creation_date": 1520397134, "answer_id": 49144173, "question_id": 49144116, "link": "https://stackoverflow.com/questions/49144116/si-labs-clock-builder-c-header-file-use/49144173#49144173", "title": "Si Labs Clock builder C header file use", "body": "<p>You should only <strong>declare</strong> the variable in your header as following - </p>\n\n<pre><code>extern si5351a_revb_register_t const si5351a_revb_registers[SI5351A_REVB_REG_CONFIG_NUM_REGS];\n</code></pre>\n\n<p>And in one of the C file (that usually takes ownership of the variable), you <strong>define</strong> the variable like you have done now. </p>\n\n<pre><code>si5351a_revb_register_t const si5351a_revb_registers  [SI5351A_REVB_REG_CONFIG_NUM_REGS] =\n{\n    { 0x0002, 0x53 },\n    { 0x0003, 0x00 },\n    { 0x0007, 0x00 },\n\n    ... bunch of data\n};\n</code></pre>\n\n<p>This file should also include the header which is included elsewhere. </p>\n\n<p>You have correctly identified the problem. Since the header is included by multiple C files, all are defining the same variable and the linker is conflicting. </p>\n"}], "owner": {"reputation": 3, "user_id": 9454595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42247146f8ca4238bbeb763a1ac5eac2?s=128&d=identicon&r=PG&f=1", "display_name": "WindowsDOS", "link": "https://stackoverflow.com/users/9454595/windowsdos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 49144173, "answer_count": 1, "score": 0, "last_activity_date": 1520397134, "creation_date": 1520396795, "question_id": 49144116, "link": "https://stackoverflow.com/questions/49144116/si-labs-clock-builder-c-header-file-use", "title": "Si Labs Clock builder C header file use", "body": "<p>Is it legal to initialize a variable in a header file like this header file generated by clock builder?</p>\n\n<pre><code>#ifndef SI5351A_REVB_REG_CONFIG_HEADER\n#define SI5351A_REVB_REG_CONFIG_HEADER\n\n#define SI5351A_REVB_REG_CONFIG_NUM_REGS                57\n\ntypedef struct\n{\n    unsigned int address; /* 16-bit register address */\n    unsigned char value; /* 8-bit register data */\n\n} si5351a_revb_register_t;\n\nsi5351a_revb_register_t const si5351a_revb_registers[SI5351A_REVB_REG_CONFIG_NUM_REGS] =\n{\n    { 0x0002, 0x53 },\n    { 0x0003, 0x00 },\n    { 0x0007, 0x00 },\n\n... bunch of data\n};\n#endif\n</code></pre>\n\n<p>Whenever I try to use this header file, I get an error </p>\n\n<pre><code>./si5351/Si5351A-RevB-Registers.o:(.rodata.si5351a_revb_registers+0x0): first defined here\n./i2c/i2c.o:(.rodata.si5351a_revb_registers+0x0): multiple definition of `si5351a_revb_registers'\n./si5351/Si5351A-RevB-Registers.o:(.rodata.si5351a_revb_registers+0x0): first defined here\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>saying it is being defined multiple times. Probably because it's being included by some other files in my program.</p>\n\n<p>However, if I separate the \"typedef struct\" by leaving it in the header, and then putting the big array definition of the </p>\n\n<pre><code>si5351a_revb_register_t const si5351a_revb_registers[SI5351A_REVB_REG_CONFIG_NUM_REGS] =\n{\n    { 0x0002, 0x53 },\n    { 0x0003, 0x00 },\n    { 0x0007, 0x00 },\n\n... bunch of data\n};\n</code></pre>\n\n<p>data into its own c file, which #includes the header it works.</p>\n\n<p>Is there a more correct way of using a header file like this? Seems like there should be if that's the exact way it's generated to be used.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 2, "creation_date": 1520395729, "post_id": 49143937, "comment_id": 85293148, "body": "does this even compile?"}, {"owner": {"reputation": 1505, "user_id": 4344586, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zmULe.png?s=128&g=1", "display_name": "Frank AK", "link": "https://stackoverflow.com/users/4344586/frank-ak"}, "edited": false, "score": 0, "creation_date": 1520395785, "post_id": 49143937, "comment_id": 85293171, "body": "You didn&#39;t allocate any memory for your <code>buffer</code>."}, {"owner": {"reputation": 41, "user_id": 5267738, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/949bc0cc387565fda0ea639f47ecd75a?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5267738/ravi"}, "edited": false, "score": 0, "creation_date": 1520395897, "post_id": 49143937, "comment_id": 85293206, "body": "I know this, i just want to know how can i access the value of buffer I am new to C"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520396338, "post_id": 49143937, "comment_id": 85293333, "body": "<code>memcopy(&amp;buffer, &amp;gbuffer, sizeof(gbuffer));</code> is same as <code>buffer = gbuffer;</code>"}, {"owner": {"reputation": 41, "user_id": 5267738, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/949bc0cc387565fda0ea639f47ecd75a?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5267738/ravi"}, "edited": false, "score": 0, "creation_date": 1520396766, "post_id": 49143937, "comment_id": 85293455, "body": "I have attached pseudo code please see it.and help"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5267738, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/949bc0cc387565fda0ea639f47ecd75a?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5267738/ravi"}, "edited": false, "score": 0, "creation_date": 1520399938, "post_id": 49144495, "comment_id": 85294360, "body": "Thanks , It was useful"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1520400736, "last_edit_date": 1520400736, "creation_date": 1520399052, "answer_id": 49144495, "question_id": 49143937, "link": "https://stackoverflow.com/questions/49143937/memcpy-character-pointer-array/49144495#49144495", "title": "memcpy character pointer array", "body": "<p>It looks like your code in <code>main</code> that allocates <code>gbuffer</code> works correctly.  It looks like your function <code>dump</code> is trying to do the same thing.  It looks like, within <code>dump</code>, it correctly allocates <code>buffer</code>.  But then, finally, back in <code>main</code>, <code>buffer</code> is improper.</p>\n\n<p>That's because <code>dump</code> allocates memory and stores it in <code>dump</code>'s copy of the <code>buffer</code> pointer, but it doesn't get propagated back to <code>main</code>.</p>\n\n<p>(This is a very common problem.  By rights I shouldn't answer it; I should point you to one of the many hundreds of duplicate questions.)</p>\n\n<p>One way to fix it is to have <code>dump</code> return the new value of <code>buffer</code>.  I have also changed <code>dump</code>'s name, since it does much more than just dump the buffer it's passed.  I have also fixed several other problems, which I'll explain later.</p>\n\n<pre><code>char **gbuffer = NULL;\n\nchar ** reallocate_and_dump(char **buffer)\n{\n    int i;\n    buffer = realloc(buffer, 50 * sizeof(char *));\n\n    for(i = 0; i &lt; 10; i++)\n    {\n      buffer[i] = malloc(50);\n      strcpy(buffer[i], gbuffer[i]);\n    }\n\n    printf(\"string is %s\\n\", buffer[0]);\n\n    return buffer;\n}\n\nint main()\n{\n    char **buffer = NULL;\n\n    gbuffer = realloc(gbuffer, 50 * sizeof(char *));\n    int i;\n    for(i = 0; i &lt; 10; i++)\n    {\n      gbuffer[i] = malloc(50);\n      strcpy(gbuffer[i], \"ashish\");\n    }\n\n    buffer = reallocate_and_dump(buffer);\n    printf(\" global string is %s\\n\", gbuffer[0]);\n    printf(\"string is %s\\n\", buffer[0]);\n    return 0;\n}\n</code></pre>\n\n<p>You were saying things like <code>buffer = realloc(buffer, 50 * sizeof(char **))</code>, but that's not quite right.  <code>buffer</code> holds 50 <code>char *</code>'s.  So you want <code>buffer = realloc(buffer, 50 * sizeof(char *))</code>.</p>\n\n<p>You were saying things like <code>buffer[i] =  malloc(50 * sizeof(char))</code>, but multiplying by <code>sizeof(char)</code> is unnecessary, because <code>sizeof(char)</code> is, by definition, exactly 1.  So I have changed those to <code>buffer[i] = malloc(50)</code>.</p>\n\n<p>You had the pair of lines</p>\n\n<pre><code>buffer[i] = malloc(50 * sizeof(char));\nbuffer[i] = gbuffer[i];\n</code></pre>\n\n<p>Here you allocate 50 bytes of memory and then immediately waste it by overwriting the pointer with a different pointer out of the <code>gbuffer</code> array.  This is confusing and probably not what you want.  I have replaced this with</p>\n\n<pre><code>buffer[i] = malloc(50 * sizeof(char));\nstrcpy(buffer[i], gbuffer[i]);\n</code></pre>\n\n<p>which I think makes more sense.</p>\n\n<hr>\n\n<p>The other possibility, the other way to have <code>reallocate_and_dump</code> update and return the pointer it's handed, is to have it accept a pointer to that pointer.  But since the pointer it's handed is already a two-level pointer, we end up with a three-level pointer, and I don't know about you, but three-level pointers have a tendency to make my head explode.  Nevertheless, here's what that code looks like:</p>\n\n<pre><code>void reallocate_and_dump_2(char ***buffer_pointer)\n{\n    int i;\n    char **buffer = *buffer_pointer;\n\n    buffer = realloc(buffer, 50 * sizeof(char *));\n\n    for(i = 0; i &lt; 10; i++)\n    {\n      buffer[i] = malloc(50);\n      strcpy(buffer[i], gbuffer[i]);\n    }\n\n    printf(\"string is %s\\n\", buffer[0]);\n\n    *buffer_pointer = buffer;\n}\n\nint main()\n{\n    char **buffer = NULL;\n\n    gbuffer = realloc(gbuffer, 50 * sizeof(char *));\n    int i;\n    for(i = 0; i &lt; 10; i++)\n    {\n      gbuffer[i] =  malloc(50 * sizeof(char));\n      strcpy(gbuffer[i], \"ashish\");\n    }\n\n    reallocate_and_dump_2(&amp;buffer);\n    printf(\" global string is %s\\n\", gbuffer[0]);\n    printf(\"string is %s\\n\", buffer[0]);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5267738, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/949bc0cc387565fda0ea639f47ecd75a?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5267738/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520530207, "creation_date": 1520395567, "last_edit_date": 1520530207, "question_id": 49143937, "link": "https://stackoverflow.com/questions/49143937/memcpy-character-pointer-array", "title": "memcpy character pointer array", "body": "<pre><code>char **gbuffer = NULL;\nvoid dump(char **buffer)\n{\n    int i;\n    buffer = realloc(buffer, 50 *sizeof(char **));\n\n    for(i = 0 ; i &lt; 10; i++)\n    {\n      buffer[i] = malloc(50 *sizeof(char));\n      buffer[i] = gbuffer[i];\n    }\n\n    printf(\"string is %s\\n\", buffer[0]);  //able to access here\n}\nint main()\n{\n    char **buffer = NULL;\n\n    gbuffer = realloc(gbuffer, 50 *sizeof(char **));\n    int i;\n    for(i =0 ;i &lt; 10; i++)\n    {\n      gbuffer[i] = malloc(50 * sizeof(char));\n      strcpy(gbuffer[i], \"ashish\");\n    }\n\n    dump(buffer);\n    printf(\" global string is %s\\n\", gbuffer[0]);\n    printf(\"string is %s\\n\", buffer[0]);            //not able to access this value\n    return 0;\n}\n</code></pre>\n\n<p>I am able to access buffer in dump() but unable to access variable in main.\nHow can I access buffer[0] in main()?\nI have attached pseudo-code.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2940, "user_id": 3677457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/16n9h.png?s=128&g=1", "display_name": "Brien Foss", "link": "https://stackoverflow.com/users/3677457/brien-foss"}, "edited": false, "score": 1, "creation_date": 1520394448, "post_id": 49143761, "comment_id": 85292837, "body": "Please post the code, not a picture of the code. If someone wanted to help you and the answer wasn\u2019t obvious, they\u2019d have to retype the entire program themselves."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1520394547, "post_id": 49143761, "comment_id": 85292848, "body": "Images of code are absolutely useless, as are pictures of your entire desktop. See <a href=\"https://meta.stackoverflow.com/a/285557/62576\">this Meta post</a> for a list of the many reasons why you should avoid posting images. Code and errors are in text, and should be posted as such. When you created your account here, it was suggested you take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read the <a href=\"https://stackoverflow.com/help\">help center</a> pages in order to familiarize yourself with this site. Please do so, especially <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, before posting your next question here."}, {"owner": {"reputation": 11, "user_id": 7154356, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144511205644321/picture?type=large", "display_name": "Sandra Green", "link": "https://stackoverflow.com/users/7154356/sandra-green"}, "edited": false, "score": 0, "creation_date": 1520394856, "post_id": 49143761, "comment_id": 85292927, "body": "I&#39;m sorry, I&#180;ve already edit it"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1520395016, "post_id": 49143761, "comment_id": 85292973, "body": "Look carefully at your use of <code>g</code>. If that doesn&#39;t help, use a debugger to step through the code watching the value of <code>g</code>."}, {"owner": {"reputation": 11, "user_id": 7154356, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144511205644321/picture?type=large", "display_name": "Sandra Green", "link": "https://stackoverflow.com/users/7154356/sandra-green"}, "edited": false, "score": 0, "creation_date": 1520395056, "post_id": 49143761, "comment_id": 85292984, "body": "I don&#180;t know I&#180;m learning C, by my own, and it&#39;s different to Java, and my teacher only asks us for code but I don&#180;t even know how to print something or the sintaxis to do it"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1520395444, "post_id": 49143761, "comment_id": 85293062, "body": "I just told you exactly what to look at for the cause of the problem. Please read my last comment again."}, {"owner": {"reputation": 11, "user_id": 7154356, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144511205644321/picture?type=large", "display_name": "Sandra Green", "link": "https://stackoverflow.com/users/7154356/sandra-green"}, "edited": false, "score": 0, "creation_date": 1520395478, "post_id": 49143761, "comment_id": 85293071, "body": "thanks I&#180;m still loking for the problem with g"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1520395542, "post_id": 49143761, "comment_id": 85293090, "body": "OK. One more hint. Print out the value of <code>g</code> before the <code>for</code> loop. Is it what you expect? If that doesn&#39;t help, go back and ask your teacher for help, because you missed something in class."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520395735, "post_id": 49143761, "comment_id": 85293149, "body": "<code>nombres[i] == &quot;Maria&quot;</code> this is probably not what you want to do, read about <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strcmp.htm\" rel=\"nofollow noreferrer\"><code>strcmp</code></a>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1520395799, "post_id": 49143761, "comment_id": 85293177, "body": "<code>printf(&quot;%s\\n&quot;, nombres[40]);</code> Out of bound access on the array here."}, {"owner": {"reputation": 1092, "user_id": 9167609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/141aa63001cf2ec7ffbb8672be1c97aa?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal-Lia", "link": "https://stackoverflow.com/users/9167609/vishal-lia"}, "edited": false, "score": 0, "creation_date": 1520396596, "post_id": 49143761, "comment_id": 85293403, "body": "First get the basics clear,  always intiialize the count variable to 0 (in your case it&#39;s g), compare strings using &quot;strcmp()&quot;, and learn how to use a for loop :)"}], "answers": [{"comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1520395799, "post_id": 49143957, "comment_id": 85293176, "body": "There&#39;s a bigger issue than this in the code posted. Not voting, just commenting. What you&#39;ve pointed out wouldn&#39;t produce the issue the poster has described."}, {"owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 0, "creation_date": 1520396029, "post_id": 49143957, "comment_id": 85293246, "body": "Agreed.  It is loaded with errors. <code>g</code> is clearly just getting whatever happened to be at that stack location since it isn&#39;t initialized and the for loop is never entered."}], "tags": [], "owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "is_accepted": false, "score": 0, "last_activity_date": 1520396000, "last_edit_date": 1520396000, "creation_date": 1520395748, "answer_id": 49143957, "question_id": 49143761, "link": "https://stackoverflow.com/questions/49143761/what-am-i-doing-wrong-with-this-array-in-c/49143957#49143957", "title": "What am I doing wrong with this array in C?", "body": "<p><code>if(nombres[i] == \"Maria\")</code></p>\n\n<p>You can't compare strings like this.  You need to use <code>strstr()</code> to look for substrings in a string.</p>\n\n<p>Also,\n<code>printf(\"%s\\n\", nombres[40]);</code> probably should have <code>i</code> instead of <code>40</code>.  And your comparison in the middle of your for loop above this is backwards.  </p>\n\n<p>And... probably more else wrong, but that is enough for me.</p>\n"}, {"comments": [{"owner": {"reputation": 5698, "user_id": 270280, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d8209c0118ceb99fe4ed98c0c079c0bf?s=128&d=identicon&r=PG", "display_name": "harald", "link": "https://stackoverflow.com/users/270280/harald"}, "edited": false, "score": 1, "creation_date": 1520410761, "post_id": 49146416, "comment_id": 85298768, "body": "The OP does not learn by you fixing his code. Try to explain what is wrong, and how to fix it instead."}, {"owner": {"reputation": 450, "user_id": 8187731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UnJd9.jpg?s=128&g=1", "display_name": "Khushit Shah", "link": "https://stackoverflow.com/users/8187731/khushit-shah"}, "reply_to_user": {"reputation": 5698, "user_id": 270280, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d8209c0118ceb99fe4ed98c0c079c0bf?s=128&d=identicon&r=PG", "display_name": "harald", "link": "https://stackoverflow.com/users/270280/harald"}, "edited": false, "score": 0, "creation_date": 1520412733, "post_id": 49146416, "comment_id": 85299822, "body": "This is my second answer over here sorry for this now I havgiven brief explanation about the code errors and mistajes"}, {"owner": {"reputation": 450, "user_id": 8187731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UnJd9.jpg?s=128&g=1", "display_name": "Khushit Shah", "link": "https://stackoverflow.com/users/8187731/khushit-shah"}, "reply_to_user": {"reputation": 5698, "user_id": 270280, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d8209c0118ceb99fe4ed98c0c079c0bf?s=128&d=identicon&r=PG", "display_name": "harald", "link": "https://stackoverflow.com/users/270280/harald"}, "edited": false, "score": 0, "creation_date": 1520413039, "post_id": 49146416, "comment_id": 85300004, "body": "Briefly explained the code an mistakes mad by the questioner. As this is my second answer over here sorry for this but sometimes you don&#39;t won&#39;t to understand you just need the answer"}, {"owner": {"reputation": 450, "user_id": 8187731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UnJd9.jpg?s=128&g=1", "display_name": "Khushit Shah", "link": "https://stackoverflow.com/users/8187731/khushit-shah"}, "reply_to_user": {"reputation": 5698, "user_id": 270280, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d8209c0118ceb99fe4ed98c0c079c0bf?s=128&d=identicon&r=PG", "display_name": "harald", "link": "https://stackoverflow.com/users/270280/harald"}, "edited": false, "score": 0, "creation_date": 1520518202, "post_id": 49146416, "comment_id": 85355201, "body": "@harald see it now pls and give some more suggestions pls"}, {"owner": {"reputation": 5698, "user_id": 270280, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d8209c0118ceb99fe4ed98c0c079c0bf?s=128&d=identicon&r=PG", "display_name": "harald", "link": "https://stackoverflow.com/users/270280/harald"}, "edited": false, "score": 0, "creation_date": 1520527179, "post_id": 49146416, "comment_id": 85361671, "body": "It&#39;s better, but a bit hard to follow. My suggestions: Drop the complete code, break up the block of text into paragraphs, link to <a href=\"https://devdocs.io/c/string/byte/strcmp\" rel=\"nofollow noreferrer\">doc of strcmp</a> instead of repeating it here. Good luck!"}], "tags": [], "owner": {"reputation": 450, "user_id": 8187731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UnJd9.jpg?s=128&g=1", "display_name": "Khushit Shah", "link": "https://stackoverflow.com/users/8187731/khushit-shah"}, "is_accepted": false, "score": -2, "last_activity_date": 1520412660, "last_edit_date": 1520412660, "creation_date": 1520407894, "answer_id": 49146416, "question_id": 49143761, "link": "https://stackoverflow.com/questions/49143761/what-am-i-doing-wrong-with-this-array-in-c/49146416#49146416", "title": "What am I doing wrong with this array in C?", "body": "<p>There are lots of error..... Let's see how much I could solve..xd</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n\n    int main(int argc, char *argv[])\n    {\n        int g=0;\n        int i;\n        const char * nombres[40] = {\"Sandra Marisol\",\"Juan Luis\",\"Perez Luis\",\"Carlitos\",\"Maria\",\"Mariana\", \"Carlota\",\"Anthony\",\n                            \"Fernando Jan\",\"Alfonso Roche\",\"Julieta Zacatenco\",\"Maria de los Angeles\",\"Laura Jessica\",\n                            \"Andrea Maria\",\"Jose Maria\",\"Andres Molina\",\"Aline Derrant\",\"Paquito\",\"Luisa\",\"Ana Maria\",\n                            \"Caleb\",\"Luis Fernando\",\"Mario Alberto\",\"Paula Monica\",\"Otoniel\",\"Elias Primero\",\"Maurico Enrique\",\n                            \"Anastasia Maria\",\"Maria Juana\",\"Juana de Arco\",\"Aria Montgomery\"\"Hanna Maria\",\"Magdalena\",\"David Green\",\n                            \"Florian Drake\",\"Edward Jones\",\"Joakin Broder\",\"Paar\",\"Alicia Torres\",\"Juan Pablo\"};\n        for(i = 0; i&lt;40; i++)\n        {\n            printf(\"%s\\n\", nombres[i]);\n            if(!strcmp(nombres[i],\"Maria\"))\n            g++;\n        }\n        if(g&gt;0){\n                printf(\"El nombre de Maria aparece %d veces.\", g);\n            }\n            else {\n                printf(\"El nombre de Maria NO aparece\");\n            }\n\n        return 0;\n\n    }\n</code></pre>\n\n<p>Here the counter variable g was not initialized. It should be initialized to 0 otherwize it contains some garbage value.then in for loop the condition was wrong the loop was not being executed because u write I>40 here i is initialized by 0 so condition get false and loop don't run.then printf in the loop contains nombres[40] which gives a nullpointer because you last name is hombres[39].then in if condition you can't just compare string like other variable you have to use lib function which is <strong><em>strcmp</em></strong> which means string compare.\nIn following conditions</p>\n\n<pre><code>strcmp(s1,s2);\n</code></pre>\n\n<p>**</p>\n\n<pre><code>*if s1==s2 then it returns 0.\nIf s1&gt;s2 then it returns 1\nIf s1&lt;s2 it returns -1 \n</code></pre>\n\n<hr>\n\n<p>So I wrote <code>!strcmp();</code>\n<strong><em>So if string matches it will return 0 and '!' Converts it to 1.</em></strong>\nHope this works.kudos.</p>\n"}], "owner": {"reputation": 11, "user_id": 7154356, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144511205644321/picture?type=large", "display_name": "Sandra Green", "link": "https://stackoverflow.com/users/7154356/sandra-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1520412660, "creation_date": 1520394316, "last_edit_date": 1520394887, "question_id": 49143761, "link": "https://stackoverflow.com/questions/49143761/what-am-i-doing-wrong-with-this-array-in-c", "title": "What am I doing wrong with this array in C?", "body": "<p>I need to know how many times does \"Maria\" appears in this array, but when I run it, it says that it appears 51 times, and I think its only like 8 </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int g;\n    int i;\n    const char * nombres[40] = {\"Sandra Marisol\",\"Juan Luis\",\"Perez Luis\",\"Carlitos\",\"Maria\",\"Mariana\", \"Carlota\",\"Anthony\",\n                        \"Fernando Jan\",\"Alfonso Roche\",\"Julieta Zacatenco\",\"Maria de los Angeles\",\"Laura Jessica\",\n                        \"Andrea Maria\",\"Jose Maria\",\"Andres Molina\",\"Aline Derrant\",\"Paquito\",\"Luisa\",\"Ana Maria\",\n                        \"Caleb\",\"Luis Fernando\",\"Mario Alberto\",\"Paula Monica\",\"Otoniel\",\"Elias Primero\",\"Maurico Enrique\",\n                        \"Anastasia Maria\",\"Maria Juana\",\"Juana de Arco\",\"Aria Montgomery\"\"Hanna Maria\",\"Magdalena\",\"David Green\",\n                        \"Florian Drake\",\"Edward Jones\",\"Joakin Broder\",\"Paar\",\"Alicia Torres\",\"Juan Pablo\"};\n    for(i = 0; i&gt;40; i++)\n    {\n        printf(\"%s\\n\", nombres[40]);\n        if(nombres[i] == \"Maria\")\n        g++;\n    }\n    if(g&gt;0){\n            printf(\"El nombre de Maria aparece %d veces.\", g);\n        }\n        else {\n            printf(\"El nombre de Maria NO aparece\");\n        }\n\n    system(\"pause\");\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["python", "c", "pipe"], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1520396628, "post_id": 49143811, "comment_id": 85293414, "body": "But without any <code>fflush</code> on the C side, and only a few bytes written every second, OP needs to wait a long time for something to happen. I guess that the Python process never gets a single byte in practice (since OP needs probably to wait several hundred seconds for that to happen on his original code)"}], "tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 4, "last_activity_date": 1520394748, "creation_date": 1520394748, "answer_id": 49143811, "question_id": 49143718, "link": "https://stackoverflow.com/questions/49143718/sending-data-from-c-process-to-python-process-using-pipes/49143811#49143811", "title": "Sending data from C process to Python process using pipes", "body": "<p><code>readline()</code> would work if you were outputting <em>lines</em> from your C program.</p>\n\n<p>Since you never print a newline, <code>readline</code> will wait forever.</p>\n\n<p><code>read()</code> with no parameters will wait until the C program exits (or otherwise closes stdout). Again this is never going to happen with your program</p>\n"}, {"comments": [{"owner": {"reputation": 148, "user_id": 3966195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81d371cd9bc75b3ab3685df79280f346?s=128&d=identicon&r=PG&f=1", "display_name": "zainosaurus", "link": "https://stackoverflow.com/users/3966195/zainosaurus"}, "edited": false, "score": 1, "creation_date": 1520398939, "post_id": 49143918, "comment_id": 85294077, "body": "Thank you! That fixed it for me"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1520405437, "last_edit_date": 1520405437, "creation_date": 1520395464, "answer_id": 49143918, "question_id": 49143718, "link": "https://stackoverflow.com/questions/49143718/sending-data-from-c-process-to-python-process-using-pipes/49143918#49143918", "title": "Sending data from C process to Python process using pipes", "body": "<p>You rather should use <a href=\"http://man7.org/linux/man-pages/man3/fprintf.3.html\" rel=\"nofollow noreferrer\">fprintf(3)</a> instead of mixing <code>sprintf</code> (which is unsafe, prefer <a href=\"http://man7.org/linux/man-pages/man3/snprintf.3.html\" rel=\"nofollow noreferrer\">snprintf(3)</a>) with <code>fputs</code>.</p>\n\n<p>You really want to output whole lines (because <a href=\"https://en.wikipedia.org/wiki/Text-based_protocol\" rel=\"nofollow noreferrer\">textual protocols</a> are so convenient to debug). And use <code>readline</code> on the Python side.</p>\n\n<p>At last, a <code>FILE*</code> obtained by <a href=\"http://man7.org/linux/man-pages/man3/popen.3.html\" rel=\"nofollow noreferrer\">popen(3)</a> is not even guaranteed to be line-buffered (but could have a much larger buffer, perhaps 4Kbytes or more). You might set its buffer using <a href=\"http://man7.org/linux/man-pages/man3/setvbuf.3.html\" rel=\"nofollow noreferrer\">setvbuf(3)</a> but you really should <strong>flush explicitly the <code>FILE*</code> buffer with <a href=\"http://man7.org/linux/man-pages/man3/fflush.3.html\" rel=\"nofollow noreferrer\">fflush(3)</a></strong>. If you don't, the output could stay in the buffer for a long time (without any actual  <a href=\"http://man7.org/linux/man-pages/man2/write.2.html\" rel=\"nofollow noreferrer\">write(2)</a> done by <code>stdio</code> functions like <code>fprintf</code> or <code>fputs</code>) so the <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow noreferrer\">pipe(7)</a> stays empty.</p>\n\n<p><sup>(so you have problems even on the C side)</sup></p>\n\n<blockquote>\n  <p>The program seems to hang at value = sys.stdin.read(). </p>\n</blockquote>\n\n<p>I guess that not a single byte was actually written by your C code (you could check by using <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a>) because your <code>fputs</code> stayed in the buffer. You might need to wait a long time (perhaps 1000 seconds, to fill a buffer of a few kilobytes) to have it actually write something on the pipe, because you forgot the <code>fflush</code> .</p>\n\n<p>A <code>popen</code>-ed file should absolutely be <code>pclose</code>d.</p>\n\n<p>So you should replace your (incorrect) <code>while</code> loop with:</p>\n\n<pre><code>while(1) {\n    fprintf(fp, \"%d\\n\", inc);\n    inc++;\n    fflush(fp);\n    sleep(1);\n}\n</code></pre>\n\n<p>And your loop should be exited somehow. Perhaps you might catch some <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a> -probably <code>SIGTERM</code>- (but be sure to read <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">signal-safety(7)</a>). Be sure to <code>pclose</code> (to avoid zombie processes).</p>\n\n<p><sup>(I am assuming you are on Linux or some other POSIX system)</sup></p>\n"}], "owner": {"reputation": 148, "user_id": 3966195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81d371cd9bc75b3ab3685df79280f346?s=128&d=identicon&r=PG&f=1", "display_name": "zainosaurus", "link": "https://stackoverflow.com/users/3966195/zainosaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1262, "favorite_count": 0, "accepted_answer_id": 49143918, "answer_count": 2, "score": 3, "last_activity_date": 1520406132, "creation_date": 1520393954, "question_id": 49143718, "link": "https://stackoverflow.com/questions/49143718/sending-data-from-c-process-to-python-process-using-pipes", "title": "Sending data from C process to Python process using pipes", "body": "<p>I'm trying to send data from a C program to a python program (both are running simultaneously). I'm attempting to use the popen function in C. The way I understand it, whatever I write to the file descriptor in C can be read from stdin in the python program. However, the python program appears to hang at the point where it reads from stdin. Any suggestions?</p>\n\n<p>Here's the C program: </p>\n\n<p><strong>test.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n\n    FILE * fp = popen(\"sudo python display.py\", \"w\");\n    if (fp == NULL) {\n        printf(\"popen error\\n\");\n        exit(1);\n    }\n\n    int inc = 0;\n    char buf[10];\n\n    while(1) {\n        sprintf(buf, \"%d\", inc);\n        fputs(buf, fp);\n        inc++;\n        sleep(1);\n    }\n\n\n    return (0);\n}\n</code></pre>\n\n<p>Here is the python program, which should read the value of \"inc\" and output it</p>\n\n<p><strong>display.py</strong></p>\n\n<pre><code>import sys\n\nvalue = 0\n\nwhile(True):\n    value = sys.stdin.read()\n    print value\n</code></pre>\n\n<p>The program seems to hang at <em>value = sys.stdin.read()</em>. I have tried readline() and readlines() as well with the same result.</p>\n"}, {"tags": ["c", "for-loop", "while-loop", "nested-loops"], "comments": [{"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1520394582, "post_id": 49143655, "comment_id": 85292859, "body": "What is it that you do not understand?"}, {"owner": {"reputation": 1092, "user_id": 9167609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/141aa63001cf2ec7ffbb8672be1c97aa?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal-Lia", "link": "https://stackoverflow.com/users/9167609/vishal-lia"}, "edited": false, "score": 0, "creation_date": 1520397096, "post_id": 49143655, "comment_id": 85293531, "body": "Please know that StackOverflow is not a platform to get your homework done or challenges solved. Show us your code(if you ever tried) and we can help where you have gone wrong."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520397269, "post_id": 49143655, "comment_id": 85293568, "body": "Please don&#39;t post links to images of challenges, etc.  Include the code (and the challenge) in the question."}], "answers": [{"comments": [{"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1520394270, "post_id": 49143713, "comment_id": 85292801, "body": "lol you do not need <code>prinf(&quot;%c&quot;, &#39; &#39;)</code> delete <code>%c</code> completely, this should be <code>printf (&quot; &quot;)</code>"}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1520394401, "post_id": 49143713, "comment_id": 85292825, "body": "@GRC, yep, fixed it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520397369, "post_id": 49143713, "comment_id": 85293596, "body": "What happened to <code>putchar(&#39; &#39;);</code>?"}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520434157, "post_id": 49143713, "comment_id": 85313860, "body": "@JonathanLeffler, are you saying <code>putchar</code> is a better option than <code>printf</code>? Well, OP&#39;s question is about how to use <code>for</code> loops. So this answer tries to address it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520437045, "post_id": 49143713, "comment_id": 85316102, "body": "Once upon another millennium, there were speed advantages to using <code>putchar()</code> in place of <code>printf()</code> \u2014 it could save the overhead of a function call most of the time.  However, it is less than clear that there&#39;s a performance benefit these days because of multi-threaded locking etc.  So, the main benefit left to <code>putchar(&#39; &#39;)</code> is that it is a direct statement of what your doing, whereas <code>printf(&quot; &quot;)</code> is slightly more indirect.  Think of it as an old timer grumbling about the good old days\u2026"}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520440837, "post_id": 49143713, "comment_id": 85318780, "body": "@JonathanLeffler, your point is very well taken. Thanks for a really nice explanation. I have updated my answer."}], "tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": false, "score": 2, "last_activity_date": 1520440825, "last_edit_date": 1520440825, "creation_date": 1520393919, "answer_id": 49143713, "question_id": 49143655, "link": "https://stackoverflow.com/questions/49143655/how-to-understand-and-complete-nested-loop-challenge-provided-below/49143713#49143713", "title": "How to understand and complete nested loop challenge provided below", "body": "<p>That's straightforward. Just use two <code>for</code> loops as shown below.</p>\n\n<pre><code>for(i=0;i&lt;=userNum;i++) {\n   for(j=0;j&lt;i;j++) {\n       putchar(' ');\n   }\n   printf(\"%d\\n\", i);\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9454471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d1c8ffbff94351294824ec7444bd55?s=128&d=identicon&r=PG&f=1", "display_name": "Ami", "link": "https://stackoverflow.com/users/9454471/ami"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1520404517, "answer_count": 1, "score": -9, "last_activity_date": 1520440825, "creation_date": 1520393501, "question_id": 49143655, "link": "https://stackoverflow.com/questions/49143655/how-to-understand-and-complete-nested-loop-challenge-provided-below", "closed_reason": "Needs details or clarity", "title": "How to understand and complete nested loop challenge provided below", "body": "<p>I need help with this challenge. I feel like I am brain dead when it comes to nesting loops. I had a better understanding of them last semester in a harder Java class than I do in a beginner C class.</p>\n\n<p><a href=\"https://i.stack.imgur.com/G6cuN.png\" rel=\"nofollow noreferrer\">Challenege code</a></p>\n"}, {"tags": ["c++", "c", "memory-management", "cuda"], "answers": [{"tags": [], "owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "is_accepted": true, "score": 2, "last_activity_date": 1520395354, "creation_date": 1520395354, "answer_id": 49143899, "question_id": 49143545, "link": "https://stackoverflow.com/questions/49143545/os-versions-that-support-the-system-allocator-for-cuda-unified-memory/49143899#49143899", "title": "OS versions that support the system allocator for CUDA Unified Memory?", "body": "<p>So I ran into this problem, because I thought my system was supported, but it's not.  Long story short, since this \"feature\" seems to require a perfect storm of compatible hardware and software, I am sticking to the old API.  I know that is probably not the answer you wanted.</p>\n\n<p>If you really want to use <code>malloc</code> or <code>new</code>, I would say your query would be a combination of:</p>\n\n<ol>\n<li>Asking the OS what kernel version its running.  See the <code>uname</code> syscall.</li>\n<li>Running <code>deviceQuery</code> (or similar) to check for CUDA version (8.0 or better) and GPU (looking for compute capability greater than or equal to 6.0).</li>\n</ol>\n\n<p>More info regarding OS support can be found here: <a href=\"https://www.phoronix.com/scan.php?page=news_item&amp;px=HMM-In-Linux-4.14\" rel=\"nofollow noreferrer\">https://www.phoronix.com/scan.php?page=news_item&amp;px=HMM-In-Linux-4.14</a>.  It does seem that kernel version 4.14 or greater should have this feature.</p>\n"}], "owner": {"reputation": 30126, "user_id": 649233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b093ba11c148847569acfa653964663?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/649233/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 49143899, "answer_count": 1, "score": 3, "last_activity_date": 1520395354, "creation_date": 1520392697, "question_id": 49143545, "link": "https://stackoverflow.com/questions/49143545/os-versions-that-support-the-system-allocator-for-cuda-unified-memory", "title": "OS versions that support the system allocator for CUDA Unified Memory?", "body": "<p>From the slides posted <a href=\"https://www.redhat.com/cms/managed-files/HMM%20for%20SC%20171114_0.pdf\" rel=\"nofollow noreferrer\">here</a>, it seems that using the system allocator through calls to <code>malloc</code> or <code>new</code> instead of Nvidia's <code>cudaMallocManaged</code> is only supported on Linux kernel versions 4.14 or newer?...  If so, is there a way to query the Nvidia driver or the CUDA runtime to know whether the system allocator can be used to properly allocate a memory block for use within the CUDA unified memory model? Or would this have to be something where you keep a white-list of operating systems/kernel versions and fallback to the traditional <code>cudaMallocManaged</code> if the detected operating system is not on the white-list?  If the latter, does anyone know of an approved white-list of operating system versions?</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 1, "creation_date": 1520392269, "post_id": 49143467, "comment_id": 85292318, "body": "&quot;Will the second snprintf , cause a buffer overflow ?&quot; -- why would it? The string you are putting is shorter than 100 chars, and <code>snprintf</code> is guaranteed to not overflow anyway."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1520392311, "post_id": 49143467, "comment_id": 85292325, "body": "As long as the correct/valid destination, size and valid arguments are used, buffer overflow is not possible."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520392541, "post_id": 49143467, "comment_id": 85292367, "body": "That&#39;s the whole point of <code>snprintf</code>, given the correct size (and you&#39;ve passed the correct size), <code>sprintf</code> guarantees not to write more than <code>size-1</code> elements and &#39;\\0&#39;-terminate the string."}, {"owner": {"reputation": 35, "user_id": 3054043, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0deccebf7f21f460e6b6c53eed07d541?s=128&d=identicon&r=PG&f=1", "display_name": "atm007", "link": "https://stackoverflow.com/users/3054043/atm007"}, "edited": false, "score": 0, "creation_date": 1520392725, "post_id": 49143467, "comment_id": 85292406, "body": "Sorry for sounding so naive , but won&#39;t the second snprintf will try to copy arr2 ( size 100 ) + &quot;AND&quot; . So it would be longer than the destination which has a length of 100."}, {"owner": {"reputation": 35, "user_id": 3054043, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0deccebf7f21f460e6b6c53eed07d541?s=128&d=identicon&r=PG&f=1", "display_name": "atm007", "link": "https://stackoverflow.com/users/3054043/atm007"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1520393228, "post_id": 49143467, "comment_id": 85292542, "body": "@chux. Thanks for the answer , that was the real concern."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1520393699, "post_id": 49143467, "comment_id": 85292675, "body": "The second argument to <code>snprintf</code> is the maximum number number of bytes it will copy. You&#39;ve specified <code>sizeof(arr1)</code> in the first call, and <code>sizeof(arr2)</code> in the second. It&#39;s that simple. (Truncation can be a concern, and there are cases where that can be really bad if you don&#39;t deal with it properly.)"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1520393540, "creation_date": 1520393540, "answer_id": 49143661, "question_id": 49143467, "link": "https://stackoverflow.com/questions/49143467/snprintf-overflow-possibility/49143661#49143661", "title": "snprintf() , overflow possibility?", "body": "<p>In the 2nd call, <code>\"%s\"</code> does not direct <code>snprintf()</code> to use all of <code>arr2[100]</code> - see <a href=\"https://stackoverflow.com/questions/49143467/snprintf-overflow-possibility/49143661#comment85292406_49143467\">comment</a>, just the first part of it that constitutes a string - which hopeful is not excessive.</p>\n\n<p>Had <code>arr2[]</code> been populated with a longer string - say 98 characters, <code>arr1[]</code> would receive a truncated version of the concatenation. Still no buffer overflow. </p>\n\n<hr>\n\n<p>As <code>snprintf()</code> is design to guard against <em>overflow</em>, <em>overflow</em> does not need to be checked.  Instead, prudent use of <code>snprintf()</code> checks the result for <em>truncation</em>.  </p>\n\n<blockquote>\n  <p>The <code>snprintf</code> function returns the number of characters that would have been written had <code>n</code> been sufficiently large, not counting the terminating null character, or a negative  value if an encoding error occurred. C11dr \u00a77.21.6.3 3</p>\n</blockquote>\n\n<pre><code>int count = snprintf(arr1, sizeof arr1, \"%sAND\", arr2);\nif (count &lt; 0 || count &gt;= sizeof arr1) Handle_Error();\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3054043, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0deccebf7f21f460e6b6c53eed07d541?s=128&d=identicon&r=PG&f=1", "display_name": "atm007", "link": "https://stackoverflow.com/users/3054043/atm007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1931, "favorite_count": 0, "accepted_answer_id": 49143661, "answer_count": 1, "score": 1, "last_activity_date": 1520393540, "creation_date": 1520392053, "last_edit_date": 1520392572, "question_id": 49143467, "link": "https://stackoverflow.com/questions/49143467/snprintf-overflow-possibility", "title": "snprintf() , overflow possibility?", "body": "<p>I have fixed size arrays - arr1 and arr2.    </p>\n\n<pre><code>char arr1[100];\nchar arr2[100];\nsnprintf(arr2, sizeof(arr2), \"%sAND\", \"CONTENTOFARRAY2\");\nsnprintf(arr1, sizeof(arr1), \"%sAND\", arr2);\n</code></pre>\n\n<p>Will the second snprintf , cause a buffer overflow ? I have tried some testing and no issues were noticed so far. </p>\n\n<p>Has anyone noticed any such issues?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 0, "creation_date": 1520389480, "post_id": 49143086, "comment_id": 85291771, "body": "Your <code>findNumber</code> function is not returning anything. Pay attention to your compiler warnings."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520389549, "post_id": 49143086, "comment_id": 85291790, "body": "Your <code>findNumber</code> is not returning anything. What&#39;s the point in checking the value of array with the size the array? In both cases you do <code>break</code>, the loop most certainly runs only once."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1520389864, "post_id": 49143086, "comment_id": 85291844, "body": "If <code>array_size</code> is <code>10</code> and <code>value is </code>5<code>, the second </code>if` tests if <code>array[i] == 10 &amp;&amp; array[i] != 5</code>.   That is only ever true if <code>array[i] == 10</code> (i.e. if there is a value of <code>10</code> in the array)."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1520389563, "creation_date": 1520389563, "answer_id": 49143131, "question_id": 49143086, "link": "https://stackoverflow.com/questions/49143086/c-buggy-program/49143131#49143131", "title": "C buggy program", "body": "<p>In the loop in <code>findNumber</code>, the statement:</p>\n\n<pre><code>if(array[i] == array_size &amp;&amp; array[i] != value)\n</code></pre>\n\n<p>causes the loop to print a message and stop if <code>array[i]</code> equals <code>array_size</code>. In this, <code>array[i]</code> is an element in the array. You likely intended to test <code>i == array_size</code> instead. However, that is also incorrect, because, inside the loop, <code>i</code> will never equal <code>array_size</code>. The controlling condition in the <code>for</code> statement is <code>i &lt; array_size</code>, which means, if <code>i</code> is not less than <code>array_size</code>, the loop will not do another iteration.</p>\n\n<p>You need to both correct the test to <code>i == array_size</code> and put it after the loop, not in the loop.</p>\n\n<p>Additionally, remove the <code>array[i] != value</code> from that <code>if</code> statement. If <code>i</code> equals <code>array_size</code>, it will refer to an element outside the array.</p>\n"}], "owner": {"reputation": 47, "user_id": 8724869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8653bf0de77bec06bc3574ff30810e96?s=128&d=identicon&r=PG&f=1", "display_name": "JAmes", "link": "https://stackoverflow.com/users/8724869/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "closed_date": 1521146335, "answer_count": 1, "score": 0, "last_activity_date": 1521146354, "creation_date": 1520389266, "last_edit_date": 1521146354, "question_id": 49143086, "link": "https://stackoverflow.com/questions/49143086/c-buggy-program", "closed_reason": "Not suitable for this site", "title": "C buggy program", "body": "<p>I don't know why this program says that 5 was not found in the array when clearly there is a 5 in the array. Also, rarely it won't output any <code>printf</code> message. Apart from this, it correctly identifies if the specified number is present.</p>\n\n<p>Thank you for your time.</p>\n\n<p>Number 5 present but wrong output message and no output message displayed-</p>\n\n<p><img src=\"https://i.stack.imgur.com/WDtIY.png\" alt=\"Number 5 present but wrong output message and no output message displayed\"></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nvoid print_array(int a[], int num_elements);\nint findNumber(int array[], int array_size, int value);\n\n\nvoid main()\n{\n    srand(time(NULL)); //Produce random numbers\n    int randomNums[10]; //Array of 1000 ints\n    int index, value;\n\n\n    //Populate the array with random ints from 1 to 10\n    int i; //Merely for looping purposes\n    for (i = 0; i &lt; 10; i++) {\n        randomNums[i] = rand() % 10 + 1; //Random range from 1 to 10\n    }\n\n    print_array(randomNums, 10);\n    findNumber(randomNums, 10, 5);\n}\n\n\n\n\nvoid print_array(int anarray[], int num_elements)\n{\n    int i;\n    for (i = 0; i &lt; num_elements; i++)\n    {\n        printf(\"Element %d: %d \\n\", i, anarray[i]);\n    }\n    printf(\"\\n\");\n}\n\nint findNumber(int array[], int array_size, int value)\n{\n\n    int i;\n    for (i = 0; i &lt; array_size; i++)\n    {\n        if(array[i] == value)\n        {\n            //Number found\n            printf(\"%d found at element %d \\n\", value, i);\n            break;\n        }\n        if(array[i] == array_size &amp;&amp; array[i] != value)\n        {\n            //Number not found\n            printf(\"%d not found \\n\", value);\n            break;\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "opengl"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1520392109, "post_id": 49142863, "comment_id": 85292288, "body": "Why doesn&#39;t the <code>color</code> array have 4 vertices worth of colors in it?  Are you doing some instancing &amp; attribute divisoring that you aren&#39;t showing us?  Edit in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 375, "user_id": 3565519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cbcd37a14f6a1be2c25982ec9a0b6c15?s=128&d=identicon&r=PG", "display_name": "Red", "link": "https://stackoverflow.com/users/3565519/red"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1520397977, "post_id": 49142863, "comment_id": 85293760, "body": "Actually you just solved my problem, I wasn&#39;t aware I have to have colors for each vertex. Still, I am wondering why I can color the entire quad with a single vec4 in the fragment shader, yet I must specify each vertex when sending it as an attribute."}, {"owner": {"reputation": 375, "user_id": 3565519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cbcd37a14f6a1be2c25982ec9a0b6c15?s=128&d=identicon&r=PG", "display_name": "Red", "link": "https://stackoverflow.com/users/3565519/red"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1520398474, "post_id": 49142863, "comment_id": 85293930, "body": "On second thought, problem persists. Editing my question now."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 5, "creation_date": 1520401511, "post_id": 49142863, "comment_id": 85294809, "body": "You seem to have a strange mix of 255.0 and 1.0 in your color array."}, {"owner": {"reputation": 375, "user_id": 3565519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cbcd37a14f6a1be2c25982ec9a0b6c15?s=128&d=identicon&r=PG", "display_name": "Red", "link": "https://stackoverflow.com/users/3565519/red"}, "edited": false, "score": 0, "creation_date": 1520402581, "post_id": 49142863, "comment_id": 85295191, "body": "Isn&#39;t it correct that each vertex gets values for RGBA?"}, {"owner": {"reputation": 23673, "user_id": 1118321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56b8390b7457739ed8cc7cbd52bf251?s=128&d=identicon&r=PG", "display_name": "user1118321", "link": "https://stackoverflow.com/users/1118321/user1118321"}, "edited": false, "score": 2, "creation_date": 1520402647, "post_id": 49142863, "comment_id": 85295211, "body": "Yes, and when you&#39;re using floating point values for the color channels, the visible colors are in the 0-1 range. It&#39;s only for 8-bit values that you want to use 0-255."}, {"owner": {"reputation": 375, "user_id": 3565519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cbcd37a14f6a1be2c25982ec9a0b6c15?s=128&d=identicon&r=PG", "display_name": "Red", "link": "https://stackoverflow.com/users/3565519/red"}, "edited": false, "score": 0, "creation_date": 1520403558, "post_id": 49142863, "comment_id": 85295550, "body": "This solved it. Can&#39;t believe I missed that. Thank you."}], "owner": {"reputation": 375, "user_id": 3565519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cbcd37a14f6a1be2c25982ec9a0b6c15?s=128&d=identicon&r=PG", "display_name": "Red", "link": "https://stackoverflow.com/users/3565519/red"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "closed_date": 1520420953, "answer_count": 0, "score": 2, "last_activity_date": 1520400432, "creation_date": 1520387353, "last_edit_date": 1520400432, "question_id": 49142863, "link": "https://stackoverflow.com/questions/49142863/opengl-strange-colors", "closed_reason": "Not suitable for this site", "title": "OpenGL strange colors", "body": "<p>I'm trying to draw a colored square in OpenGL and but I only get some weird-looking colored lines. It works when I set the color manually in the shader, but not when I send it as an attribute.</p>\n\n<p>Here's my Minimal, Complete, and Verifiable example.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n\nvoid glfw_framebuffer_size_callback(GLFWwindow *window, int width, int height)\n{\n    glViewport(0, 0, width, height);\n}\n\nint main()\n{\n    glfwInit();\n    GLFWwindow *window = glfwCreateWindow(640, 480, \"test\", NULL, NULL);\n\n    glfwMakeContextCurrent(window);\n    glfwSetFramebufferSizeCallback(window, glfw_framebuffer_size_callback);\n    glfwSwapInterval(0);\n\n    glewExperimental = GL_TRUE;\n    glewInit();\n\n    GLuint vao;\n    glGenVertexArrays(1, &amp;vao);\n    glBindVertexArray(vao);\n\n    GLfloat verts[] = {-1.0f, 1.0f, -1.0f, -1.0f, 1.0f, 1.0f, 1.0f, -1.0f};\n    GLfloat color[] = {\n        255.0f, 0.0f, 0.0f, 1.0f,\n        0.0f, 255.0f, 0.0f, 1.0f,\n        0.0f, 0.0f, 255.0f, 1.0f,\n        255.0f, 255.0f, 0.0f, 1.0f\n    };\n\n    GLuint verts_vbo;\n    glGenBuffers(1, &amp;verts_vbo);\n    glBindBuffer(GL_ARRAY_BUFFER, verts_vbo);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(verts), verts, GL_STATIC_DRAW);\n\n    GLuint color_vbo;\n    glGenBuffers(1, &amp;color_vbo);\n    glBindBuffer(GL_ARRAY_BUFFER, color_vbo);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(color), color, GL_STATIC_DRAW);\n\n    const GLchar *v_shader_source =\n        \"#version 330 core\\n\"\n        \"in vec4 vcoords;\"\n        \"in vec4 color;\"\n        \"out vec4 frag_color;\"\n        \"uniform mat4 model, view, projection;\"\n        \"void main() { gl_Position = vcoords;\"\n        \"frag_color = color; }\";\n\n    const GLchar *f_shader_source =\n        \"#version 330 core\\n\"\n        \"in vec4 frag_color;\"\n        \"out vec4 final_color;\"\n        \"void main() { final_color = frag_color; }\";\n\n    GLuint vs = glCreateShader(GL_VERTEX_SHADER);\n    GLuint fs = glCreateShader(GL_FRAGMENT_SHADER);\n\n    glShaderSource(vs, 1, &amp;v_shader_source, NULL);\n    glShaderSource(fs, 1, &amp;f_shader_source, NULL);\n\n    glCompileShader(vs);\n    glCompileShader(fs);\n\n    GLuint shader = glCreateProgram();\n    glAttachShader(shader, vs);\n    glAttachShader(shader, fs);\n    glLinkProgram(shader);\n    glDeleteShader(vs);\n    glDeleteShader(fs);\n\n    glUseProgram(shader);\n\n    GLuint verts_index = glGetAttribLocation(shader, \"vcoords\");\n    glEnableVertexAttribArray(verts_index);\n    glBindBuffer(GL_ARRAY_BUFFER, verts_vbo);\n    glVertexAttribPointer(verts_index, 2, GL_FLOAT, GL_FALSE, 0, NULL);\n\n    GLuint color_index = glGetAttribLocation(shader, \"color\");\n    glEnableVertexAttribArray(color_index);\n    glBindBuffer(GL_ARRAY_BUFFER, color_vbo);\n    glVertexAttribPointer(color_index, 4, GL_FLOAT, GL_FALSE, 0, NULL);\n\n    while (!glfwWindowShouldClose(window))\n    {\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);\n        glfwSwapBuffers(window);\n        glfwWaitEvents();\n    }\n\n    glDeleteProgram(shader);\n\n    return 0;\n}\n</code></pre>\n\n<p>And this is the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vnj1g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vnj1g.png\" alt=\"enter image description here\"></a></p>\n\n<p>What am I doing wrong? </p>\n\n<p>Code is still too long to submit without adding more text but I don't know what else to say.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "edited": false, "score": 0, "creation_date": 1520385052, "post_id": 49142580, "comment_id": 85290709, "body": "Have a look at <a href=\"https://stackoverflow.com/questions/4968854/is-i-i-truly-a-undefined-behavior\" title=\"is i i truly a undefined behavior\">stackoverflow.com/questions/4968854/&hellip;</a>"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520385238, "post_id": 49142580, "comment_id": 85290743, "body": "<code>*it = *(++it);</code> yields undefined behaviour, anything can happen."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 1, "creation_date": 1520385251, "post_id": 49142580, "comment_id": 85290746, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4968854/is-i-i-truly-a-undefined-behavior\">is i=i++ truly a undefined behavior?</a>"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520385384, "post_id": 49142580, "comment_id": 85290788, "body": "There&#39;s a really easy way to understand the complexities of &quot;++&quot;: never use it. Ever. You don&#39;t need it, and it will never confuse you again."}, {"owner": {"reputation": 983, "user_id": 8772958, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56210f0212692ed235a23c0c3ec6be25?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8772958/michael-smith"}, "reply_to_user": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "edited": false, "score": 1, "creation_date": 1520385411, "post_id": 49142580, "comment_id": 85290795, "body": "@HongOoi @Pablo Is it? This is not <code>i = i++</code> like the examples provided in the linked question. This is assigning a value pointed to by <code>it</code> to the value in front of it, <code>it + 1</code> or <code>++it</code>."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 1, "creation_date": 1520386713, "post_id": 49142580, "comment_id": 85291110, "body": "@MichaelSmith It&#39;s UB for the same reason. <code>++it</code> modifies the variable <code>it</code>, while trying to assign the result of the expression to <code>it</code>. This is why this is undefined behavior, you are trying to modify the same variable twice on a single expression. Odds are <code>*it = *(++it);</code> is the same as just doing <code>++it</code>, but who knows how the compiler is optimizing that behind the scene. By that logic the first code snippet actually modifies the array, the second doesn&#39;t."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520394124, "post_id": 49142580, "comment_id": 85292768, "body": "@LeeDanielCrocker: That is not a solution. Most programmers must work with other people\u2019s code, often on a regular basis. Not using a language feature yourself will not prevent you from encountering it. And a strategy of cultivating ignorance is not a recipe for success."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 4, "last_activity_date": 1520386230, "last_edit_date": 1520386230, "creation_date": 1520385830, "answer_id": 49142682, "question_id": 49142580, "link": "https://stackoverflow.com/questions/49142580/why-is-ptr-1-different-from-ptr-in-this-scenario/49142682#49142682", "title": "Why is ptr + 1 different from ++ptr in this scenario?", "body": "<p>In <code>*it = *(++it);</code>, the compiler might evaluate <code>it</code> for the purposes of preparing the reference <code>*it</code> and, after that, perform the side effect of incrementing <code>it</code> for <code>++it</code>. Or it might do the side effect first and then evaluate <code>it</code> for the <code>*it</code>. The C standard does not say in which order these must occur. The assignment itself, storing a value in <code>*it</code>, must be later, but that is something else. The compiler can work on parts of the left side and parts of the right side in any order it wants.</p>\n\n<p>You are not allowed both modify an object (<code>++it</code>) and use it (in <code>*it</code>) without a determined order between them. Doing so results in undefined behavior. This is per C 2011 [N1570] 6.5 2:</p>\n\n<blockquote>\n  <p>If a side effect on a scalar object is unsequenced relative to either a different side effect on the same scalar object or a value computation using the value of the same scalar object, the behavior is undefined.</p>\n</blockquote>\n\n<p>Incrementing <code>it</code> in <code>++it</code> is a side effect, and using <code>it</code> in <code>*it</code> is a value computation using the value of <code>it</code>, which is a scalar object. Therefore, the behavior is undefined.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1520386152, "post_id": 49142697, "comment_id": 85290976, "body": "C99? You can find links to newer versions of the standard <a href=\"https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents\">here</a>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1520386161, "last_edit_date": 1520386161, "creation_date": 1520385949, "answer_id": 49142697, "question_id": 49142580, "link": "https://stackoverflow.com/questions/49142580/why-is-ptr-1-different-from-ptr-in-this-scenario/49142697#49142697", "title": "Why is ptr + 1 different from ++ptr in this scenario?", "body": "<p>C99, <strong>6.5 Expressions</strong>:</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Between the previous and next sequence point an object shall have its stored value\n  modified at most once by the evaluation of an expression. Furthermore, <strong>the prior value\n  shall be read only to determine the value to be stored</strong>.</li>\n  </ol>\n</blockquote>\n\n<p>(Emphasis mine.)</p>\n\n<p>In</p>\n\n<pre><code>*it = *(++it);\n</code></pre>\n\n<p>We read twice and store once. <code>*it</code> on the left side reads from <code>it</code>; <code>++it</code> on the right side reads from and stores to <code>it</code>. There are no sequences points here.</p>\n\n<p>This expression has undefined behavior because the read on the left side is not used to determine the value to be stored.</p>\n\n<p><code>*it = *(it + 1);</code> is allowed because <code>it</code> is not modified here (there are no stores), so you can have as many reads as you want.</p>\n"}], "owner": {"reputation": 983, "user_id": 8772958, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56210f0212692ed235a23c0c3ec6be25?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8772958/michael-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "accepted_answer_id": 49142682, "answer_count": 2, "score": 7, "last_activity_date": 1520386230, "creation_date": 1520384945, "last_edit_date": 1520385863, "question_id": 49142580, "link": "https://stackoverflow.com/questions/49142580/why-is-ptr-1-different-from-ptr-in-this-scenario", "title": "Why is ptr + 1 different from ++ptr in this scenario?", "body": "<p>I originally had the following code where <code>it</code> is a <code>void**</code>:</p>\n\n<pre><code>while (it != end)\n{\n    *it = *(it + 1);\n    it++;\n}\n</code></pre>\n\n<p>I decided to change <code>it + 1; it++;</code> to <code>++it;</code> because I was calculating the same value twice.</p>\n\n<pre><code>while (it != end)\n{\n    *it = *(++it);\n}\n</code></pre>\n\n<p>However, after doing so, my program no longer functions the same way.</p>\n\n<p><strong>Edit:</strong> I would like to note that this is not <code>i = i++;</code>, but rather assigning the value pointed to by <code>it</code> to the value in front of it.</p>\n"}, {"tags": ["c", "operating-system", "kernel", "qemu"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520384885, "post_id": 49142496, "comment_id": 85290667, "body": "And what happens with <code>*men = 60</code>? Does it print <code>&lt;</code>?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1520385037, "post_id": 49142496, "comment_id": 85290704, "body": "That is <i>very</i> weird. Based <i>just</i> on what you&#39;ve stated, it almost looks like it&#39;s the use of <code>i</code> (or some local var) that&#39;s causing an issue. Since it&#39;s an OS, you may want to look into whether the stack segments/selectors have been set up correctly. You could also find the smallest complete program that exhibits the problem and have a look (and post it here) at the assembler code for it."}, {"owner": {"reputation": 664, "user_id": 3637535, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/X8mvj.jpg?s=128&g=1", "display_name": "Asad Ali", "link": "https://stackoverflow.com/users/3637535/asad-ali"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520387914, "post_id": 49142496, "comment_id": 85291376, "body": "@Pablo Yes, <code>*mem = 60</code> works just fine. I&#39;ll look into the assembler code and update with an answer as soon as I can."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520443446, "post_id": 49142496, "comment_id": 85320477, "body": "what, exactly, is the value of VIDEO_ADDRESS?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520443488, "post_id": 49142496, "comment_id": 85320508, "body": "is your video card in VGA text mode?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520443845, "post_id": 49142496, "comment_id": 85320726, "body": "regarding: <code>while (msg[i] != 0)</code>  the compiler is performing an implicit conversion between int 0 (0x00000000) and char 0 (0x00).  Your compiler should have warned you about this."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1520444220, "post_id": 49142496, "comment_id": 85320925, "body": "regarding: <code>*mem = &#39;0&#39; + i;</code>  your compiler should have warned you about the conversion from <code>int</code> to <code>byte</code> . Suggest: <code>*mem = (byte)(&#39;0&#39; + i);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 724, "user_id": 9454255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDrB2.png?s=128&g=1", "display_name": "Jack C.", "link": "https://stackoverflow.com/users/9454255/jack-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1520389964, "creation_date": 1520389964, "answer_id": 49143189, "question_id": 49142496, "link": "https://stackoverflow.com/questions/49142496/strange-c-array-behavior-with-qemu/49143189#49143189", "title": "Strange C Array Behavior with qemu", "body": "<p>You may need to declare mem as <code>volatile byte *</code>.  </p>\n\n<p>The code snippets you've written look to the compiler like nothing happens to *mem after you write to it.  If nobody ever makes use of *mem, then the compiler can optimize out instructions that write there, but it's not required to.</p>\n\n<p><code>volatile</code> is created for this type of situation, where something else (the video display system) is reading or writing memory that the compiler doesn't know about.</p>\n\n<p>You can read more about <code>volatile</code> here: <a href=\"http://en.cppreference.com/w/c/language/volatile\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/language/volatile</a></p>\n"}], "owner": {"reputation": 664, "user_id": 3637535, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/X8mvj.jpg?s=128&g=1", "display_name": "Asad Ali", "link": "https://stackoverflow.com/users/3637535/asad-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520389964, "creation_date": 1520384394, "question_id": 49142496, "link": "https://stackoverflow.com/questions/49142496/strange-c-array-behavior-with-qemu", "title": "Strange C Array Behavior with qemu", "body": "<p>I'm working on making a kernel for a simple system operating and I'm stuck at a strange behavior with a <code>char</code> array in C. I'm using qemu as an emulator, OS is compiled as x86_64.\nGiven the following code:</p>\n\n<pre><code>char msg[] = \"Hello World!\";\nint i = 0;\nwhile (msg[i] != 0)\n    i++;\nbyte *mem = (byte*)VIDEO_ADDRESS; //VGA text mode\n*mem = '0' + i; //print '&lt;'\n</code></pre>\n\n<p>The number printed on screen is 0 even though it should print <code>'&lt;' ('0' + 12)</code>.\nAs a test I tried printing the first character in the array and it works if I use a hard-coded index:</p>\n\n<pre><code>*mem = msg[0]; //'H' is printed\n</code></pre>\n\n<p>Strangely enough, the following doesn't work:</p>\n\n<pre><code>int i = 0;\n*mem = msg[i]; //no output (or null character)\n</code></pre>\n\n<p>The following works as well:</p>\n\n<pre><code>*mem = 'H';\n</code></pre>\n"}, {"tags": ["python", "c++", "c", "windows"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1520384162, "post_id": 49142439, "comment_id": 85290497, "body": "You probably need to look at the documentation for the wheel that you are using. Maybe the wheels follow some standard, for which there will be documentation for."}, {"owner": {"reputation": 1016, "user_id": 8456454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f627dc7d8a375702876cbfc2a22f168?s=128&d=identicon&r=PG&f=1", "display_name": "gsquaredxc", "link": "https://stackoverflow.com/users/8456454/gsquaredxc"}, "edited": false, "score": 2, "creation_date": 1520385859, "post_id": 49142439, "comment_id": 85290907, "body": "<a href=\"https://stackoverflow.com/questions/tagged/python\">python</a>, <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>, and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> do not go together."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9453998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Trong Ho", "link": "https://stackoverflow.com/users/9453998/trong-ho"}, "edited": false, "score": 0, "creation_date": 1520403294, "post_id": 49143563, "comment_id": 85295437, "body": "Thank you, Jack C. That was very helpful"}], "tags": [], "owner": {"reputation": 724, "user_id": 9454255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDrB2.png?s=128&g=1", "display_name": "Jack C.", "link": "https://stackoverflow.com/users/9454255/jack-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1520392845, "creation_date": 1520392845, "answer_id": 49143563, "question_id": 49142439, "link": "https://stackoverflow.com/questions/49142439/reading-any-pc-compatible-racing-wheel-input/49143563#49143563", "title": "reading any pc compatible racing wheel input", "body": "<p>Most likely, if your steering wheels are marked as PC compatible, they appear in Windows as joysticks.  These devices can be read using the Multimedia Joystick API or DirectInput.</p>\n\n<p>The Multimedia Joystick API docs are here: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd757116(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/dd757116(v=vs.85).aspx</a>.  You use this API by calling a series of C functions, like <code>joyGetPosEx()</code>, which are all available in Windows.h.</p>\n\n<p>DirectInput is more complicated to set up, and works using COM.  DirectInput docs are here: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee416842(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ee416842(v=vs.85).aspx</a></p>\n\n<p>XInput is supposed to be the next generation API for input devices, but it only supports input devices that have the layout (joysticks, buttons, etc.) of an Xbox 360 controller.</p>\n\n<p>The documents that you found work with Microsoft's newer \"Universal Windows Platform,\" which is used in the Microsoft store.  UWP apps are not able to use DirectInput, and are probably not able to use the old joystick API either.</p>\n"}], "owner": {"reputation": 1, "user_id": 9453998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Trong Ho", "link": "https://stackoverflow.com/users/9453998/trong-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1286, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1520392845, "creation_date": 1520384043, "question_id": 49142439, "link": "https://stackoverflow.com/questions/49142439/reading-any-pc-compatible-racing-wheel-input", "title": "reading any pc compatible racing wheel input", "body": "<p>I am an Electrical Engineer student and I am currently doing a Final Year Project on setting up a simulation platform for driving to test my drowsiness detecting device. I am currently looking for methods that can retrieve racing wheel's input data such as steering wheel angle because I need those data to operate my device effectively. I have tried to look up on the internet and I only found these documents:</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/uwp/api/windows.gaming.input.racingwheelreading\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/uwp/api/windows.gaming.input.racingwheelreading</a>\n<a href=\"https://docs.microsoft.com/en-us/windows/uwp/gaming/racing-wheel-and-force-feedback\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/uwp/gaming/racing-wheel-and-force-feedback</a></p>\n\n<p>It seems like windows only support device that is compatible with xbox one or xbox 360 steering wheel. Due to our limiting allowed budget, we could only find some cheap steering wheels that are compatible with PS4/PS3 and PC. Is there any other way that can read input data like steering angle from any pc compatible racing wheel? By the way, I am using windows operating system.</p>\n\n<p>I would really appreciate any help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 96, "user_id": 8942256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fieer.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/8942256/ben"}, "edited": false, "score": 0, "creation_date": 1520382798, "post_id": 49142224, "comment_id": 85290071, "body": "This question has been answered <a href=\"https://stackoverflow.com/questions/2620146/how-do-i-return-multiple-values-from-a-function-in-c\">here</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 4, "creation_date": 1520383353, "post_id": 49142224, "comment_id": 85290244, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2620146/how-do-i-return-multiple-values-from-a-function-in-c\">How do I return multiple values from a function in C?</a>"}, {"owner": {"reputation": 1092, "user_id": 9167609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/141aa63001cf2ec7ffbb8672be1c97aa?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal-Lia", "link": "https://stackoverflow.com/users/9167609/vishal-lia"}, "edited": false, "score": 0, "creation_date": 1520397450, "post_id": 49142224, "comment_id": 85293622, "body": "Since both variables are of same datatype you can return array of floats. Another option is passing both variables as reference."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1520389141, "post_id": 49142240, "comment_id": 85291696, "body": "Minor issue, <code>&#39;A&#39;</code> is an <code>int</code>. <code>printf(... , label);</code> promotes <code>label</code> to an <code>int</code>.  <code>printf(&quot;%c&quot;, label);</code> expects an <code>int</code> (which it converts to an <code>unsigned char</code> before printing).   No  real advantage to using <code>char label</code> whereas <code>int label</code> does better when a value outside the <code>[0...CHAR_MAX]</code> range is used."}], "tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": true, "score": 2, "last_activity_date": 1520388931, "last_edit_date": 1520388931, "creation_date": 1520382694, "answer_id": 49142240, "question_id": 49142224, "link": "https://stackoverflow.com/questions/49142224/returning-more-than-one-variable-in-the-same-function/49142240#49142240", "title": "Returning more than one variable in the same function", "body": "<p>You need to either put the two floats into a struct that the function can return, or pass one (or both) floats in as a pass-by-reference parameter.  I would definitely prefer two pass-by-reference parameters in this case.</p>\n\n<pre><code>void getUserValue(float *side1, float *side2) {      \n    printf(\" Enter a value for Side %c.\\n\", SIDE_1_LABEL);\n    printf(\"&gt; \");\n\n    scanf(\"%f\", side1); \n\n    printf(\" Enter a value for Side %c.\\n\", SIDE_2_LABEL);\n    printf(\"&gt; \");\n\n    scanf(\"%f\", side2);\n}\n</code></pre>\n\n<p>There are other serious issues in your code, such as passing chars <code>A</code> and <code>B</code> in as the float parameters for <code>getUserValue()</code>, and only a single one for each call.  You should call <code>getUserValue()</code> as:</p>\n\n<pre><code>int main() {\n    float   side1, side2; \n\n    getUserValue(&amp;side1, &amp;side2);\n\n    return 0;\n}\n</code></pre>\n\n<p>You don't need to pass in <code>SIDE_1_LABEL</code> and <code>SIDE_2_LABEL</code>, as they are #defined globally and can be accessed directly by <code>getUserValue()</code>.  And since you get both values in a single call, you don't need to call <code>getUserValue()</code> twice.</p>\n\n<p>Another approach would be to have <code>getUserValue()</code> get only a single value at a time with:</p>\n\n<pre><code>float getUserValue(char label) {\n    float side;\n\n    printf(\" Enter a value for Side %c.\\n\", label);\n    printf(\"&gt; \");\n\n    scanf(\"%f\", &amp;side);\n\n    return side;\n}\n</code></pre>\n\n<p>then call it twice like you currently do :</p>\n\n<pre><code>side1     = getUserValue(SIDE_1_LABEL);\nside2     = getUserValue(SIDE_2_LABEL);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9454002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91385b41549ccf77eb5d62e75f08f994?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9454002/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 49142240, "answer_count": 1, "score": 1, "last_activity_date": 1520388931, "creation_date": 1520382559, "question_id": 49142224, "link": "https://stackoverflow.com/questions/49142224/returning-more-than-one-variable-in-the-same-function", "title": "Returning more than one variable in the same function", "body": "<p>I just need help with returning two user input floating-point numbers using the same function. Can anyone show me how to return more then one variable? Thanks in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define SIDE_1_LABEL 'A'\n#define SIDE_2_LABEL 'B'\n\nfloat getUserValue(float side1, float side2);\n\nint main()\n{\n    float   side1,\n            side2; \n\n    side1     = getUserValue(SIDE_1_LABEL);\n    side2     = getUserValue(SIDE_2_LABEL);\n\n    return 0;\n}\n\nfloat getUserValue(float side1, float side2)\n{      \n    printf(\" Enter a value for Side %c.\\n\", SIDE_1_LABEL);\n    printf(\"&gt; \");\n\n    scanf(\"%f\", &amp;side1); \n\n    printf(\" Enter a value for Side %c.\\n\", SIDE_2_LABEL);\n    printf(\"&gt; \");\n\n    scanf(\"%f\", &amp;side2);\n\n    return side1, side2;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 2, "creation_date": 1520382160, "post_id": 49142137, "comment_id": 85289906, "body": "The address are equal, the data types are not. <code>&amp;ar[2][0]</code> is an <code>int*</code>. <code>ar[2]</code> decays into an <code>int*</code> and <code>&amp;ar[2]</code> is <code>int (*)[3]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520383921, "post_id": 49142306, "comment_id": 85290426, "body": "Assigning any pointer type to a void* is legal; no need to cast just for printf()."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520384192, "post_id": 49142306, "comment_id": 85290504, "body": "@LeeDanielCrocker I have seen this advices many times from other high-rep users and the man page states <code>p      The void * pointer argument is printed in hexadecimal...</code>, so that&#39;s why I repeat that."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1520384550, "post_id": 49142306, "comment_id": 85290588, "body": "There&#39;s certainly nothing wrong with the cast, it&#39;s just extra typing."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520384787, "post_id": 49142306, "comment_id": 85290647, "body": "I don&#39;t mind the extra typing if it makes the code 100% correct, if the cast were very long, then I&#39;d probably ignore it."}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1520383106, "creation_date": 1520383106, "answer_id": 49142306, "question_id": 49142137, "link": "https://stackoverflow.com/questions/49142137/multidimensional-array-different-ways-to-represent-address-of-grid220/49142306#49142306", "title": "multidimensional array, different ways to represent address of grid[22][0]", "body": "<p>First of all, if you use <code>%p</code>, then you have to cast the values to <code>(void*)</code>,\nbecause <code>%p</code> expects a expects a void pointer</p>\n\n<pre><code>printf(\"%p\\n\", (void*) &amp;ar[2][0]);\nprintf(\"%p\\n\", (void*) ar[2]);\nprintf(\"%p\\n\", (void*) &amp;ar[2]);\n</code></pre>\n\n<p>They all have the same address (because they are all at the same place in\nmemory) but they expressions are of different types:</p>\n\n<pre><code>&amp;ar[2][0];\n</code></pre>\n\n<p>is a <code>int*</code> (pointer to <code>int</code>)</p>\n\n<pre><code>ar[2];\n</code></pre>\n\n<p>is an <code>int[3]</code> (array of <code>int</code> of dimension 3), but in the <code>printf</code> it decays into\nan <code>int*</code> and then into a <code>void*</code> because of the cast.</p>\n\n<pre><code>&amp;ar[2];\n</code></pre>\n\n<p>is an <code>int (*)[3]</code> (pointer to an <code>int[3]</code>, array of <code>int</code> dimention 2).</p>\n\n<p>You can see that <code>int[3]</code> is an array when you use <code>sizeof</code> with which arrays do\nnot decay into pointers:</p>\n\n<pre><code>printf(\"sizeof &amp;ar[2][0]: %zu\\n\", sizeof &amp;ar[2][0]);\nprintf(\"sizeof ar[2]:     %zu\\n\", sizeof ar[2]);\nprintf(\"sizeof &amp;ar[2]:    %zu\\n\", sizeof &amp;ar[2]);\n</code></pre>\n\n<p>This prints (on my system, <code>x86_64</code>):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sizeof &amp;ar[2][0]: 8         (size of an pointer)\nsizeof ar[2]:     12        (size of an array `int[3]`)\nsizeof &amp;ar[2]:    8         (size of a pointer)\n</code></pre>\n\n<p>If you have this function</p>\n\n<pre><code>void foo(int *x)\n{\n    (void) x; // to silence -Wall warnings\n}\n</code></pre>\n\n<p>then <code>foo(&amp;ar[2][0])</code> is fine and <code>foo(ar[2])</code> is also fine because it decays\ninto a pointer. But <code>foo(&amp;ar[2])</code> is not fine, you would get:</p>\n\n<pre><code>a.c: In function \u2018main\u2019:\na.c:21:6: warning: passing argument 1 of \u2018foo\u2019 from incompatible pointer type [-Wincompatible-pointer-types]\n  foo(&amp;ar[2]);\n      ^\na.c:3:6: note: expected \u2018int *\u2019 but argument is of type \u2018int (*)[3]\u2019\n void foo(int *x)\n      ^~~\n</code></pre>\n\n<p>However for</p>\n\n<pre><code>void bar(int (*x)[3])\n{\n    (void) x;\n}\n</code></pre>\n\n<p><code>bar(&amp;ar[2])</code> is fine.</p>\n\n<p>And bear in mind, that if you print the value/access the memory with any of\nthese expressions, you would be accessing the data out of bounds. <code>ar</code> should be</p>\n\n<pre><code>int ar[3][3] = {\n    {11, 22, 33},\n    {44, 55, 66},\n    {77, 88, 99}\n};\n</code></pre>\n"}], "owner": {"reputation": 8548, "user_id": 5581182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc277bc00b89d827aba59b3e2509a6f4?s=128&d=identicon&r=PG&f=1", "display_name": "Thor", "link": "https://stackoverflow.com/users/5581182/thor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 49142306, "answer_count": 1, "score": 1, "last_activity_date": 1520383106, "creation_date": 1520381796, "last_edit_date": 1592644375, "question_id": 49142137, "link": "https://stackoverflow.com/questions/49142137/multidimensional-array-different-ways-to-represent-address-of-grid220", "title": "multidimensional array, different ways to represent address of grid[22][0]", "body": "<p>I'm currently studying c programming language's multidimensional array and pointers.</p>\n<p>I got asked the following question</p>\n<blockquote>\n<p>Suppose you have the following declaration:</p>\n<p><code>int grid[30][100];.</code></p>\n<p>Express the address of grid[22][0] two ways.</p>\n</blockquote>\n<p>The author provided the following answers</p>\n<pre><code>&amp;grid[22][0] or grid[22]\n</code></pre>\n<p>I came up with</p>\n<pre><code>//notice for the second answer, I placed an address operator &amp; at the front \n&amp;grid[22][0] or &amp;grid[22] \n</code></pre>\n<p>I tested out with the following code</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n\n    int ar[2][3] = {\n            {11, 22, 33},\n            {44, 55, 66}\n    };\n\n    printf(&quot;%p\\n&quot;, &amp;ar[2][0]);\n    printf(&quot;%p\\n&quot;, ar[2]);\n    printf(&quot;%p\\n&quot;, &amp;ar[2]);\n\n    return 0;\n}\n</code></pre>\n<p>and all three form printed the same value</p>\n<pre><code>0062ff30\n0062ff30\n0062ff30\n</code></pre>\n<p>So is the author's answer <code>grid[22]</code> and my answer <code>&amp;grid[22]</code> equivalent? How could they be equivalent?</p>\n"}]