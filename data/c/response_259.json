[{"tags": ["c", "linker-errors"], "comments": [{"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "edited": false, "score": 3, "creation_date": 1577317604, "post_id": 59482501, "comment_id": 105141545, "body": "Note that you should not use <code>ptr = realloc(ptr, new_size);</code> if <code>ptr</code> is the only variable containing current block address because the failure of allocation the return value of <code>realloc</code> is <code>NULL</code> and then you have neither the new block address nor the old one."}], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 12433504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a21f48cc9b08d6adf0005669d9955?s=128&d=identicon&r=PG", "display_name": "VillageTech", "link": "https://stackoverflow.com/users/12433504/villagetech"}, "is_accepted": false, "score": 0, "last_activity_date": 1577316193, "creation_date": 1577316193, "answer_id": 59482523, "question_id": 59482501, "link": "https://stackoverflow.com/questions/59482501/want-to-increase-dynamic-array-by-use-realloc-and-not-successful/59482523#59482523", "title": "Want to increase dynamic array by use realloc and not successful", "body": "<p>Ok, I agree, will not smile ;)\nThis is <code>scanf()</code>, not <code>scnaf()</code> :) :) :) </p>\n\n<p>So:</p>\n\n<pre><code>scanf(\"%d\", &amp;ptr[i]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1577317932, "last_edit_date": 1577317932, "creation_date": 1577316733, "answer_id": 59482572, "question_id": 59482501, "link": "https://stackoverflow.com/questions/59482501/want-to-increase-dynamic-array-by-use-realloc-and-not-successful/59482572#59482572", "title": "Want to increase dynamic array by use realloc and not successful", "body": "<p>There are two problems with your code resulting in errors.</p>\n\n<ol>\n<li>You mistyped scnaf instead of scanf, like @VillageTech noted.</li>\n<li>You need to include the appropriate standard library headers: <code>scanf()</code> comes from <a href=\"http://www.cplusplus.com/reference/cstdio/\" rel=\"nofollow noreferrer\"><code>&lt;stdio.h&gt;</code></a> and <code>realloc()</code> from <a href=\"http://www.cplusplus.com/reference/cstdlib/\" rel=\"nofollow noreferrer\"><code>&lt;stdlib.h&gt;</code></a>.</li>\n</ol>\n\n<p>If you fix that, your code <a href=\"https://godbolt.org/z/gJUcAi\" rel=\"nofollow noreferrer\">compiles</a> (GodBolt.org). It also runs mostly as you would expect.</p>\n\n<p>Note also that \"size is:\"  is a very ambiguous message, and the user will be confused regarding what to do and what to expect later.</p>\n\n<p>There are also other issues with your code, such as failing to check for errors returned from <code>scanf()</code>, or the assumption that <code>realloc()</code> was successful - see @6502's comment.</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1577316896, "post_id": 59482577, "comment_id": 105141460, "body": "You&#39;ve duped my answer :-)"}, {"owner": {"reputation": 1692, "user_id": 12433504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a21f48cc9b08d6adf0005669d9955?s=128&d=identicon&r=PG", "display_name": "VillageTech", "link": "https://stackoverflow.com/users/12433504/villagetech"}, "edited": false, "score": 0, "creation_date": 1577317678, "post_id": 59482577, "comment_id": 105141562, "body": "And mine ;) ;) ;)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1577317478, "last_edit_date": 1577317478, "creation_date": 1577316803, "answer_id": 59482577, "question_id": 59482501, "link": "https://stackoverflow.com/questions/59482501/want-to-increase-dynamic-array-by-use-realloc-and-not-successful/59482577#59482577", "title": "Want to increase dynamic array by use realloc and not successful", "body": "<p>For starters according to the C Standard the function main without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Secondly there is a typo. You wrote <code>scnaf</code> instead of <code>scanf</code>.</p>\n\n<p>And you have to include headers</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) \n{\n    size_t size;\n\n    printf( \"size is: \" );\n    scanf( \"%zu\", &amp;size );\n\n    int *ptr = malloc( size * sizeof( int ) );\n\n    if ( ptr == NULL )\n    {\n        puts( \"Error\" );\n        return EXIT_FAILURE;\n    }\n\n    int *tmp = realloc( ptr, ( size + 10 ) * sizeof( int ) );\n\n    if ( tmp != NULL )\n    {\n        size += 10;\n        ptr = tmp;\n    }\n\n    for ( size_t i = 0; i &lt; size; i++ )\n    {\n        printf(\"number %zu =&gt; \", i );\n        scanf( \"%d\", ptr + i );\n    }\n\n    for ( size_t i = 0; i &lt; size; i++ )\n    {\n        printf( \"%d \", ptr[i] );\n    }\n\n    putchar( '\\n' );\n\n    free( ptr );\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>size is: 5\nnumber 0 =&gt; 1\nnumber 1 =&gt; 2\nnumber 2 =&gt; 3\nnumber 3 =&gt; 4\nnumber 4 =&gt; 5\nnumber 5 =&gt; 6\nnumber 6 =&gt; 7\nnumber 7 =&gt; 8\nnumber 8 =&gt; 9\nnumber 9 =&gt; 10\nnumber 10 =&gt; 11\nnumber 11 =&gt; 12\nnumber 12 =&gt; 13\nnumber 13 =&gt; 14\nnumber 14 =&gt; 15\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12482205, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCIMLkH8Aj90Uo8PR-vzDoPStmAp-F83vecQ7_GDg=k-s128", "display_name": "Lior tahan", "link": "https://stackoverflow.com/users/12482205/lior-tahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 59482577, "answer_count": 3, "score": 2, "last_activity_date": 1577317932, "creation_date": 1577315987, "last_edit_date": 1577316789, "question_id": 59482501, "link": "https://stackoverflow.com/questions/59482501/want-to-increase-dynamic-array-by-use-realloc-and-not-successful", "title": "Want to increase dynamic array by use realloc and not successful", "body": "<pre><code>void main()\n{\n    int *ptr, size, i;\n    printf(\"size is:\\n\");\n    scanf(\"%d\", &amp;size);\n    ptr = (int*)malloc(size * sizeof(int));\n    if (ptr == NULL)\n    {\n        printf(\"Error\");\n        return;\n    }\n    ptr = (int*)realloc(ptr, (size + 10) * sizeof(int));\n    for (i = 0; i &lt;size+10; i++)\n    {\n        printf(\"number %d...\\n\", i);\n        scnaf(\"%d\", &amp;ptr[i]);\n    }\n    for (i = 0; i &lt; size + 10; i++)\n    {\n        printf(\"%d \", ptr[i]);\n    }\n    free(ptr);\n}\n</code></pre>\n\n<p>Want to create a dynamic array, add 10 more places in memory, and absorb the values from the user.\nfor example, if the user enters 5 for the size, the total size will be size=5+10=15, and if the user then enters:</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n</code></pre>\n\n<p>the output will be:  </p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n</code></pre>\n\n<p>The errors I get are :  </p>\n\n<pre><code>Error   LNK2019 unresolved external symbol _scnaf referenced in function _main  realloc \nError   LNK1120 1 unresolved externals  realloc \n</code></pre>\n\n<p>Can you try and help me understand why I'm getting this error?</p>\n"}, {"tags": ["c", "sockets", "http"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1577318327, "post_id": 59482474, "comment_id": 105141627, "body": "Are you using Windows?"}, {"owner": {"reputation": 329, "user_id": 2288914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e8785d362a66ec4c5c8fd10c71812f0?s=128&d=identicon&r=PG", "display_name": "Yingyu YOU", "link": "https://stackoverflow.com/users/2288914/yingyu-you"}, "edited": false, "score": 2, "creation_date": 1577326657, "post_id": 59482474, "comment_id": 105142548, "body": "Looks like you are printing as string and please check the file with any editor support HEX mode or dump the file as hex, to check if the fifth byte is zero (i.e. <code>&#39;\\0&#39;</code>)."}, {"owner": {"reputation": 46, "user_id": 6769860, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ptjjr0GssZs/AAAAAAAAAAI/AAAAAAAAAEc/DUrGDa_TqPU/photo.jpg?sz=128", "display_name": "Mike Bear", "link": "https://stackoverflow.com/users/6769860/mike-bear"}, "edited": false, "score": 0, "creation_date": 1577358283, "post_id": 59482474, "comment_id": 105149744, "body": "You are right I totally forgot that images have <code>&#39;\\0&#39;</code> in their file. Now I only have to figure how I should save it as an image."}], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 6769860, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ptjjr0GssZs/AAAAAAAAAAI/AAAAAAAAAEc/DUrGDa_TqPU/photo.jpg?sz=128", "display_name": "Mike Bear", "link": "https://stackoverflow.com/users/6769860/mike-bear"}, "edited": false, "score": 0, "creation_date": 1577356355, "post_id": 59484408, "comment_id": 105149127, "body": "Thank you for your answer. Indeed I did not know how complex would that be to be done in pure C. It is possible to handle this part (the save of the file) by a script (i.e. PHP)?"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 46, "user_id": 6769860, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ptjjr0GssZs/AAAAAAAAAAI/AAAAAAAAAEc/DUrGDa_TqPU/photo.jpg?sz=128", "display_name": "Mike Bear", "link": "https://stackoverflow.com/users/6769860/mike-bear"}, "edited": false, "score": 0, "creation_date": 1577359060, "post_id": 59484408, "comment_id": 105150031, "body": "@MikeBear: PHP has support for this built in  - see for example <a href=\"https://stackoverflow.com/questions/1075513/parsing-multipart-form-data\">Parsing multipart form data</a>."}], "tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1577340108, "creation_date": 1577340108, "answer_id": 59484408, "question_id": 59482474, "link": "https://stackoverflow.com/questions/59482474/how-to-save-image-file-in-a-c-web-server-after-it-was-sent-on-post-request/59484408#59484408", "title": "How to save image file in a C Web Server after it was sent on POST Request", "body": "<blockquote>\n  <p>After printing the request header this is what I got:</p>\n</blockquote>\n\n<p>What you've printed is not the request header but the header and part of the body.</p>\n\n<blockquote>\n  <p>Why do I receive only 4 bytes from the image</p>\n</blockquote>\n\n<p>You did not provide any code so it is impossible to tell for sure. But a typical problem is to assume that a single <code>recv</code> will be sufficient to retrieve all data. This is not the case. Instead you need to first read the header (which can be contained as part of the first <code>recv</code> but can be spread over multiple <code>recv</code> too), extract the length of the body (in this case <code>Content-Length: 14006</code> but it might also be <a href=\"https://en.wikipedia.org/wiki/Chunked_transfer_encoding\" rel=\"nofollow noreferrer\">chunked transfer encoding</a>) and then read the body. Then you need for a <code>multipart/form-data</code> body to treat the body as a <a href=\"https://en.wikipedia.org/wiki/MIME#Multipart_messages\" rel=\"nofollow noreferrer\">multipart MIME message</a> and extract the various parts.</p>\n\n<p>None of this is trivial, both HTTP and MIME are more complex then they look if you just had a look at a few examples. If you really want to implement everything yourself then please read the (long) standards - they are there for a reason. I recommend instead that you just instead use existing libraries to deal with this.</p>\n"}], "owner": {"reputation": 46, "user_id": 6769860, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ptjjr0GssZs/AAAAAAAAAAI/AAAAAAAAAEc/DUrGDa_TqPU/photo.jpg?sz=128", "display_name": "Mike Bear", "link": "https://stackoverflow.com/users/6769860/mike-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577340108, "creation_date": 1577315708, "question_id": 59482474, "link": "https://stackoverflow.com/questions/59482474/how-to-save-image-file-in-a-c-web-server-after-it-was-sent-on-post-request", "title": "How to save image file in a C Web Server after it was sent on POST Request", "body": "<p>I am trying to build a web server using sockets. I have the parser for GET requests and now I want to be able to send an image to the server from a form.</p>\n\n<p>After printing the request header this is what I got:</p>\n\n<pre><code>POST / HTTP/1.1\nHost: 127.0.0.1:8080\nUser-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nContent-Type: multipart/form-data; boundary=---------------------------15680533759245126501880539822\nContent-Length: 14006\nOrigin: http://127.0.0.1:8080\nConnection: keep-alive\nReferer: http://127.0.0.1:8080/form.html\nUpgrade-Insecure-Requests: 1\n\n-----------------------------15680533759245126501880539822\nContent-Disposition: form-data; name=\"textline\"\n\n4213124124123123153534123412\n-----------------------------15680533759245126501880539822\nContent-Disposition: form-data; name=\"datafile\"; filename=\"5.jpg\"\nContent-Type: image/jpeg\n\n\ufffd\ufffd\ufffd\ufffd\n</code></pre>\n\n<p>This is my form:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Test&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;form action=\"/\"\n        enctype=\"multipart/form-data\" method=\"post\"&gt;\n        &lt;p&gt;\n            Type some text (if you like):&lt;br&gt;\n            &lt;input type=\"text\" name=\"textline\"&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            Please specify a file, or a set of files:&lt;br&gt;\n            &lt;input type=\"file\" name=\"datafile\"&gt;\n        &lt;/p&gt;\n            &lt;div&gt;\n            &lt;input type=\"submit\" value=\"Send\"&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My questions are: Why do I receive only 4 bytes from the image and what should I do to be able to save the data receive in a jpg file?</p>\n"}, {"tags": ["c", "parsing", "syntax", "peg"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1577318296, "post_id": 59482460, "comment_id": 105141623, "body": "A cast has parentheses around the type. So the ambiguity is between <code>(a)*b</code> and <code>(b)*a</code>. <code>a*b</code> is always multiplication (or an error)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1577319065, "post_id": 59482460, "comment_id": 105141716, "body": "Also, the grammar you link to is an Antlr4 grammar, which is not PEG. Antlr4 builds LL(*) parsers, using an extended BNF notation."}], "answers": [{"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 3, "last_activity_date": 1577514392, "creation_date": 1577514392, "answer_id": 59508659, "question_id": 59482460, "link": "https://stackoverflow.com/questions/59482460/how-to-handle-ambiguity-in-syntax-like-in-c-in-a-parsing-expression-grammar-l/59508659#59508659", "title": "How to handle ambiguity in syntax (like in C) in a Parsing Expression Grammar (like PEG.js)", "body": "<p>The usual way this is handled in a PEG grammar is to use a semantic predicate on a rule such that the rule only matches when the predicate is true, and have the predicate check whether the name in question is a type in the current context or not.  In the link you give, there's a rule</p>\n\n<pre><code>typedefName : Identifier\n</code></pre>\n\n<p>which is the (only) one that needs the semantic predicate to resolve this ambiguity.  The predicate simply checks the Identifier in question against the definitions in the current scope.  If it is not defined as a type, then it rejects this rule, so the next lower priority one will (try to) match.</p>\n"}], "owner": {"reputation": 66677, "user_id": 169992, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OeNfG.png?s=128&g=1", "display_name": "Lance Pollard", "link": "https://stackoverflow.com/users/169992/lance-pollard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 1, "accepted_answer_id": 59508659, "answer_count": 1, "score": 5, "last_activity_date": 1577608222, "creation_date": 1577315576, "question_id": 59482460, "link": "https://stackoverflow.com/questions/59482460/how-to-handle-ambiguity-in-syntax-like-in-c-in-a-parsing-expression-grammar-l", "title": "How to handle ambiguity in syntax (like in C) in a Parsing Expression Grammar (like PEG.js)", "body": "<p>So from my limited understanding, <a href=\"https://pdos.csail.mit.edu/archive/l/c/roskind.html\" rel=\"noreferrer\">C has syntax ambiguity</a> as seen in the expression:</p>\n\n<pre><code>T(*b)[4];\n</code></pre>\n\n<p><a href=\"http://calculist.blogspot.com/2009/02/c-typedef-parsing-problem.html\" rel=\"noreferrer\">Here</a> it is said about this sort of thing:</p>\n\n<blockquote>\n  <p>The well-known \"typedef problem\" with parsing C is that the standard C grammar is ambiguous unless the lexer distinguishes identifiers bound by typedef and other identifiers as two separate lexical classes. This means that the parser needs to feed scope information to the lexer during parsing. One upshot is that lexing must be done concurrently with parsing.</p>\n</blockquote>\n\n<p>The problem is it can be interpreted as either multiplication or as a pointer depending on context (I don't 100% understand the details of this since I'm not expert in C, but I get the gist of it and why it's a problem).</p>\n\n<pre><code>typedef a;\nb * a;                    // multiplication\na * b;                    // b is pointer to type a \n</code></pre>\n\n<p>What I'm wondering is if you were to parse C with a Parsing Expression Grammar (PEG) such as <a href=\"https://github.com/antlr/grammars-v4/blob/master/c/C.g4\" rel=\"noreferrer\">this C grammar</a>, how does it handle this ambiguity? I assume this grammar is not 100% correct because of this problem, and so am wondering how you would go about fixing it. What does it need to keep track of or do differently to account for this?</p>\n"}, {"tags": ["c", "trigonometry", "sdl-2", "intersection"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1577313675, "post_id": 59482281, "comment_id": 105141038, "body": "You say you have the arcs center point coordinates. So they are not concentric?I ask because to me (potentially too myoptic) it looks like the arcs are concentric at the little whitle disc."}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1577313724, "post_id": 59482281, "comment_id": 105141046, "body": "Yes, they all have the same center point. The middle of the screen"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577313742, "post_id": 59482281, "comment_id": 105141052, "body": "Can you compute the distance from the arc&#39;s center to the cursor?  What does it mean if that is very close to the radius of the arc?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1577313830, "post_id": 59482281, "comment_id": 105141067, "body": "But then the coordinates are redundant, which seems to indicate that you did not get the objectives right - or failed to explain them correctly and in enough detail, which seems more likely."}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577313859, "post_id": 59482281, "comment_id": 105141072, "body": "@ScottHunter hmmm never thought about that, it can work. I have to try that lol"}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1577313961, "post_id": 59482281, "comment_id": 105141094, "body": "@Yunnosch i&#39;m not a pro yet, and yeah its probably redundant in my code."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1577314152, "post_id": 59482281, "comment_id": 105141121, "body": "@Hazel: or <code>arcRGBA</code> needs the center point, even if all of the arcs have the same one."}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577324478, "post_id": 59482281, "comment_id": 105142316, "body": "@ScottHunter hey, like you said, i can compute the distance and detect if the arc radius reach that distance, but what if my cursor point is not touching the arc even if the arc radius is at the same level as my point. I can&#39;t  detect that."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1577353757, "post_id": 59485317, "comment_id": 105148239, "body": "Hmmm, Is the true goal to find 1) if the cursor is in the arc sector (the pie wedge) or 2) if the triangle cursor intersects the arc (the outer rim)?   This answers does solve #1, yet the question posed &quot;Compute intersection between Line and Arc&quot; looks like #2 and not solved here."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577364928, "post_id": 59485317, "comment_id": 105151981, "body": "It does when combined w/ comparing the distance from the arc centerpoint is the same &amp; the arc radius."}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577393411, "post_id": 59485317, "comment_id": 105160758, "body": "@ScottHunter exactly"}], "tags": [], "owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "is_accepted": false, "score": 0, "last_activity_date": 1577345623, "creation_date": 1577345623, "answer_id": 59485317, "question_id": 59482281, "link": "https://stackoverflow.com/questions/59482281/compute-intersection-between-line-and-arc/59485317#59485317", "title": "Compute intersection between Line and Arc", "body": "<p><strong>Solved it with</strong> !!!!!!!</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6270785/how-to-determine-whether-a-point-x-y-is-contained-within-an-arc-section-of-a-c\">This topic</a>\n<a href=\"https://i.stack.imgur.com/hWiii.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hWiii.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1577348031, "answer_count": 1, "score": 0, "last_activity_date": 1577345623, "creation_date": 1577313034, "last_edit_date": 1577320216, "question_id": 59482281, "link": "https://stackoverflow.com/questions/59482281/compute-intersection-between-line-and-arc", "closed_reason": "Duplicate", "title": "Compute intersection between Line and Arc", "body": "<p>I am implementing a little game in c with sdl2/sdl_gfx for an assignment where you need to avoid the arcs coming at you (in the center) by moving the little cursor under the white circle (it moves around the circle).</p>\n\n<p>My question is simple: what can be an efficient implementation to detect if my cursor intersect an arc?</p>\n\n<p>For each arcs have : the center point (x,y), starting and ending radius, radius.\nWhich are the arguments of:</p>\n\n<pre><code>int arcRGBA(SDL_Renderer *renderer, Sint16 x, Sint16 y, Sint16 rad, Sint16 start, Sint16 end, Uint8 r, Uint8 g, Uint8 b, Uint8 a)\n</code></pre>\n\n<p>For my cursor (the little triangle under the circle) i have : the coordinates of the triangle.</p>\n\n<pre><code>int filledTrigonRGBA(SDL_Renderer *renderer, Sint16 x1, Sint16 y1, Sint16 x2, Sint16 y2, Sint16 x3, Sint16 y3, Uint8 r, Uint8 g, Uint8 b, Uint8 a)\n</code></pre>\n\n<p>Having this information, i thought about using Lines of my triangle to detect if it intersects with an arc. But i dont know how to implement it with the maths involved in it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/sWDVW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sWDVW.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Note: The Arcs are moving and their coordinates are updated each frame. I only need to know the implementation to detect an intersection.</strong></p>\n"}, {"tags": ["c", "linker-errors", "inline-functions"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577312277, "post_id": 59482205, "comment_id": 105140844, "body": "You need <code>extern inline int g();</code> in one translation unit, in ISO C"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577312310, "post_id": 59482205, "comment_id": 105140847, "body": "It would help to show your build command, e.g. as GNU C behaves differently to ISO C"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1577312366, "creation_date": 1577312366, "answer_id": 59482231, "question_id": 59482205, "link": "https://stackoverflow.com/questions/59482205/c-inline-functions/59482231#59482231", "title": "C inline functions", "body": "<p>From the C Standard (6.7.4 Function speci\ufb01ers)</p>\n\n<blockquote>\n  <p>7,,,For a function with external linkage, the following restrictions\n  apply: <strong>If a function is declared with an inline function speci\ufb01er,\n  then it shall also be de\ufb01ned in the same translation unit</strong></p>\n</blockquote>\n\n<p>In your project the function <code>g</code> is declared in the translation unit with main.</p>\n"}], "owner": {"reputation": 13, "user_id": 12597486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51650cd811fc339ec084f1855e42f1ce?s=128&d=identicon&r=PG&f=1", "display_name": "qrort", "link": "https://stackoverflow.com/users/12597486/qrort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1577312390, "accepted_answer_id": 59482231, "answer_count": 1, "score": 1, "last_activity_date": 1577312366, "creation_date": 1577311982, "last_edit_date": 1592644375, "question_id": 59482205, "link": "https://stackoverflow.com/questions/59482205/c-inline-functions", "closed_reason": "Duplicate", "title": "C inline functions", "body": "<p>As far as i know, <code>inline</code> functions in C work pretty the same way as in C++ when used in single translation unit and there's no need to dive into <code>extern inline</code> difficulties in such a case. However, the following program including three files seems not to compile in C and I am struggling to figure out why.</p>\n<h3>f.h</h3>\n<pre><code>int f();\ninline int g();\n</code></pre>\n<h3>f.c</h3>\n<pre><code>#include &quot;f.h&quot;\n\ninline int g() {\n    return 5;\n}\n\nint f() {\n    return 3 + g();\n}\n</code></pre>\n<h3>main.c</h3>\n<pre><code>#include &quot;f.h&quot;\n#include &lt;stdio.h&gt;\n\nint main() {\n    printf(&quot;%d&quot;, f());\n    return 0;\n}\n</code></pre>\n<h2>The linker</h2>\n<p>tells that there is an <em>undefined reference to <code>g</code></em>. However, as <code>g</code> is used only in <strong>f.c</strong> file, I can not define where the problem lies exactly.</p>\n"}, {"tags": ["c", "character-encoding", "printf", "clion"], "comments": [{"owner": {"reputation": 1169, "user_id": 5774900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4a1b9f8a05b6ae616757fbeec30566?s=128&d=identicon&r=PG", "display_name": "Martin Fink", "link": "https://stackoverflow.com/users/5774900/martin-fink"}, "edited": false, "score": 3, "creation_date": 1577307466, "post_id": 59481794, "comment_id": 105140044, "body": "What is the output that you get?"}, {"owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "reply_to_user": {"reputation": 1169, "user_id": 5774900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4a1b9f8a05b6ae616757fbeec30566?s=128&d=identicon&r=PG", "display_name": "Martin Fink", "link": "https://stackoverflow.com/users/5774900/martin-fink"}, "edited": false, "score": 0, "creation_date": 1577307494, "post_id": 59481794, "comment_id": 105140049, "body": "this is what I get &quot;&#212;&#233;&#188;&quot;"}, {"owner": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 2, "creation_date": 1577307541, "post_id": 59481794, "comment_id": 105140058, "body": "where are you seeing that output? (terminal, some GUI...?)"}, {"owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "reply_to_user": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 0, "creation_date": 1577307584, "post_id": 59481794, "comment_id": 105140065, "body": "@bool3max like I said I am using CLion, the output and input is on CLion &quot;Terminal&quot;"}, {"owner": {"reputation": 1468, "user_id": 10332049, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b85YaqT-DmE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rmt7ZG1JNW3HMFwSmbw7iYxcGZTw/mo/photo.jpg?sz=128", "display_name": "Saucy Goat", "link": "https://stackoverflow.com/users/10332049/saucy-goat"}, "edited": false, "score": 2, "creation_date": 1577307780, "post_id": 59481794, "comment_id": 105140106, "body": "Maybe this can help: <a href=\"https://stackoverflow.com/questions/1969385/unable-to-print-euro-symbol-in-a-c-program\" title=\"unable to print euro symbol in a c program\">stackoverflow.com/questions/1969385/&hellip;</a>"}, {"owner": {"reputation": 1169, "user_id": 5774900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4a1b9f8a05b6ae616757fbeec30566?s=128&d=identicon&r=PG", "display_name": "Martin Fink", "link": "https://stackoverflow.com/users/5774900/martin-fink"}, "edited": false, "score": 0, "creation_date": 1577307866, "post_id": 59481794, "comment_id": 105140117, "body": "On the bottom of your screen there should be the current file encoding. Is it set to UTF-8 or something like ISO-8859-1?"}, {"owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "reply_to_user": {"reputation": 1169, "user_id": 5774900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4a1b9f8a05b6ae616757fbeec30566?s=128&d=identicon&r=PG", "display_name": "Martin Fink", "link": "https://stackoverflow.com/users/5774900/martin-fink"}, "edited": false, "score": 0, "creation_date": 1577307933, "post_id": 59481794, "comment_id": 105140127, "body": "@Martin Fink   The file encoding is UTF-8"}, {"owner": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 0, "creation_date": 1577308010, "post_id": 59481794, "comment_id": 105140138, "body": "Try <code>printf(&quot;\\xE2\\x82\\xAC&quot;);</code> Those 3 bytes represent the euro symbol in the UTF-8 encoding. Though the code in your question should produce the desired result."}, {"owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "reply_to_user": {"reputation": 1468, "user_id": 10332049, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b85YaqT-DmE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rmt7ZG1JNW3HMFwSmbw7iYxcGZTw/mo/photo.jpg?sz=128", "display_name": "Saucy Goat", "link": "https://stackoverflow.com/users/10332049/saucy-goat"}, "edited": false, "score": 0, "creation_date": 1577308018, "post_id": 59481794, "comment_id": 105140139, "body": "@Saucy Goat I already read that post and I didn&#39;t understand..."}, {"owner": {"reputation": 1169, "user_id": 5774900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4a1b9f8a05b6ae616757fbeec30566?s=128&d=identicon&r=PG", "display_name": "Martin Fink", "link": "https://stackoverflow.com/users/5774900/martin-fink"}, "edited": false, "score": 2, "creation_date": 1577308063, "post_id": 59481794, "comment_id": 105140147, "body": "That&#39;s what I have on my machine too, but I am able to print the symbol there. The problem then is probably that the CLion terminal is set to the wrong encoding. If you execute your program on a terminal that is configured to use UTF-8, your code <i>should</i> work right."}, {"owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "reply_to_user": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 0, "creation_date": 1577308108, "post_id": 59481794, "comment_id": 105140154, "body": "@bool3max the output is still the same"}, {"owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "reply_to_user": {"reputation": 1169, "user_id": 5774900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4a1b9f8a05b6ae616757fbeec30566?s=128&d=identicon&r=PG", "display_name": "Martin Fink", "link": "https://stackoverflow.com/users/5774900/martin-fink"}, "edited": false, "score": 0, "creation_date": 1577308146, "post_id": 59481794, "comment_id": 105140164, "body": "@MartinFink how can I change the terminal ?"}, {"owner": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 2, "creation_date": 1577308153, "post_id": 59481794, "comment_id": 105140166, "body": "Well then your encoding is wrong. Try to set the encoding of the <i>terminal</i>, not the file."}, {"owner": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 3, "creation_date": 1577308191, "post_id": 59481794, "comment_id": 105140172, "body": "See here: <a href=\"https://www.jetbrains.com/help/clion/configuring-output-encoding.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/clion/configuring-output-encoding.html</a>"}, {"owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "reply_to_user": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 0, "creation_date": 1577308761, "post_id": 59481794, "comment_id": 105140267, "body": "@bool3max just did that and tried again with &quot;\\xE2\\x82\\xAC&quot; and &quot;\\u20AC&quot; the output is the same as before..."}, {"owner": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 0, "creation_date": 1577310646, "post_id": 59481794, "comment_id": 105140568, "body": "Out of ideas then. Try to run your executable and pipe its output to a utility such as <code>hexdump</code> or <code>xxd</code> to make sure that the correct bytes are coming out. e.g. <code>.&#47;yourapp | hexdump</code>."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1577311076, "post_id": 59481794, "comment_id": 105140658, "body": "Normally C outputs strings with the &quot;C&quot; <code>locale</code>. A first step on how to set up another <code>locale</code> for multibyte characters can be found here in <a href=\"https://stackoverflow.com/questions/58039815/print-utf-8-multibyte-character-in-c\" title=\"print utf 8 multibyte character in c\">stackoverflow.com/questions/58039815/&hellip;</a>, but depending on your setting there might be more to it."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "edited": false, "score": 0, "creation_date": 1577394559, "post_id": 59483072, "comment_id": 105161029, "body": "Read the comments."}], "tags": [], "owner": {"reputation": 21, "user_id": 8060734, "user_type": "registered", "profile_image": "https://graph.facebook.com/1913760158894218/picture?type=large", "display_name": "Filipe Dias", "link": "https://stackoverflow.com/users/8060734/filipe-dias"}, "is_accepted": false, "score": 0, "last_activity_date": 1577324213, "creation_date": 1577324213, "answer_id": 59483072, "question_id": 59481794, "link": "https://stackoverflow.com/questions/59481794/how-to-output-%e2%82%ac-symbol-in-c/59483072#59483072", "title": "How to output \u20ac symbol in C?", "body": "<p>A simple way to do it is using the <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a> as native encoding.\nJust print like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"\\xE2\\x82\\xAC\");\n\n    return 0;\n}\n</code></pre>\n\n<p>You can find a useful link to Euro Sign <a href=\"https://eurosymbol.eu/ascii-code\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 85, "user_id": 11373374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15975618fa1cad5ffe3075992a2cf955?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Neves", "link": "https://stackoverflow.com/users/11373374/jo%c3%a3o-neves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577324213, "creation_date": 1577307376, "last_edit_date": 1577308459, "question_id": 59481794, "link": "https://stackoverflow.com/questions/59481794/how-to-output-%e2%82%ac-symbol-in-c", "title": "How to output \u20ac symbol in C?", "body": "<p>I don't know how to output the Euro symbol in a C99 Project, I am using CLion to develop the project and I'm using MinGW as Toolchain (I don't know if that matters).</p>\n\n<p>I already searched a lot and I can't find any answer to my problem, hope someone can help me.</p>\n\n<p>I already tried to do this</p>\n\n<pre><code>printf(\"\u20ac\");\nprintf(\"\\u20AC\");\n</code></pre>\n\n<p>The output is <code>\u00d4\u00e9\u00bc</code>, but I'm expecting <code>\u20ac</code>.</p>\n"}, {"tags": ["c", "parallel-processing", "openmp", "shared-memory", "race-condition"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1577491811, "post_id": 59481619, "comment_id": 105187023, "body": "It could be an issue with the library. I recommend you contact support, as we cannot examine the source (afaik) to verify a race condition or not"}, {"owner": {"reputation": 1331, "user_id": 2207958, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SJNmA.jpg?s=128&g=1", "display_name": "Max Linke", "link": "https://stackoverflow.com/users/2207958/max-linke"}, "edited": false, "score": 0, "creation_date": 1577549596, "post_id": 59481619, "comment_id": 105196946, "body": "What happens if you pre allocate all your temporary copies of the model?  It\u2019s hard to say what the library functions do but the copy method always acts on the same object from all threads. I know a copy should be Thread safe in the ideal case. I wouldn\u2019t bet on it though."}], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 1667423, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3ff1fb6d7b142bca9bb38ec7abd66184?s=128&d=identicon&r=PG", "display_name": "user76284", "link": "https://stackoverflow.com/users/1667423/user76284"}, "edited": false, "score": 0, "creation_date": 1577836225, "post_id": 59512835, "comment_id": 105267463, "body": "I ended up creating a separate model from scratch with <code>GRBnewmodel</code> inside the loop body instead of copying from a template model with <code>GRBcopymodel</code>. It seems to work properly and is faster than the non-parallel solution."}], "tags": [], "owner": {"reputation": 1331, "user_id": 2207958, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SJNmA.jpg?s=128&g=1", "display_name": "Max Linke", "link": "https://stackoverflow.com/users/2207958/max-linke"}, "is_accepted": false, "score": 2, "last_activity_date": 1577551409, "creation_date": 1577551409, "answer_id": 59512835, "question_id": 59481619, "link": "https://stackoverflow.com/questions/59481619/possible-race-condition-in-openmp-parallel-for-loop/59512835#59512835", "title": "Possible race condition in OpenMP parallel for loop", "body": "<p><a href=\"https://www.gurobi.com/documentation/8.1/refman/py_env2.html\" rel=\"nofollow noreferrer\">https://www.gurobi.com/documentation/8.1/refman/py_env2.html</a></p>\n\n<p>According to the docs the models in each loop iteration are not independent copies. They share the same environment variable. This means they potentially read/write from the same memory. If you ensure each copy has its own environment it might succeed. </p>\n\n<p>I see you are calling this code from python. If you only use C is to use multithreaded computation I would recommend using pure python code with joblib or dask to have the same result. The race condition would also be apparent in python as the different models cannot be serialized. See this <a href=\"https://support.gurobi.com/hc/en-us/community/posts/360047219672-Using-Gurobi-with-joblib-in-Python\" rel=\"nofollow noreferrer\">support question </a></p>\n"}], "owner": {"reputation": 917, "user_id": 1667423, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3ff1fb6d7b142bca9bb38ec7abd66184?s=128&d=identicon&r=PG", "display_name": "user76284", "link": "https://stackoverflow.com/users/1667423/user76284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577551409, "creation_date": 1577305501, "last_edit_date": 1577331861, "question_id": 59481619, "link": "https://stackoverflow.com/questions/59481619/possible-race-condition-in-openmp-parallel-for-loop", "title": "Possible race condition in OpenMP parallel for loop", "body": "<p>I'm using <a href=\"https://en.wikipedia.org/wiki/OpenMP\" rel=\"nofollow noreferrer\">OpenMP</a> to parallelize a for loop. This program uses the <a href=\"https://www.gurobi.com/documentation/9.0/refman/c_api_details.html\" rel=\"nofollow noreferrer\">Gurobi C API</a>.</p>\n\n<pre><code>GRBupdatemodel(model);\n\n#pragma omp parallel for\nfor (int batch = 0; batch &lt; n_batch; ++batch)\n{\n\n    int cind[1 + n_max];\n    for (int j = 0; j &lt; n_max; ++j)\n    {\n        cind[1 + j] = n_sum + j;\n    }\n\n    double cval[1 + n_max];\n    cval[0] = 1;\n\n    GRBmodel* model_copy = GRBcopymodel(model);\n    for (int i = 0; i &lt; n_sum; ++i)\n    {\n        cind[0] = i;\n        for (int k = 0; k &lt; n_min; ++k)\n        {\n            for (int j = 0; j &lt; n_max; ++j) \n            {\n                cval[1 + j] = -*((double*) PyArray_GetPtr(array, (long []) {batch, i, j, k}));\n            }\n            GRBaddconstr(model_copy, 1 + n_max, cind, cval, GRB_LESS_EQUAL, 0, NULL);\n        }\n    }\n    GRBoptimize(model_copy);\n    GRBgetdblattrarray(model_copy, GRB_DBL_ATTR_X, 0, n_sum, values[batch]);\n    GRBgetdblattrarray(model_copy, GRB_DBL_ATTR_X, n_sum, n_max, max_strategy[batch]);\n    GRBgetdblattrarray(model_copy, GRB_DBL_ATTR_PI, 1, n_sum * n_min, (double *) min_strategies[batch]);\n    GRBfreemodel(model_copy);\n}\n</code></pre>\n\n<p>Each iteration of this loop writes to a different section of the arrays <code>values</code>, <code>max_strategy</code>, and <code>min_strategies</code>.</p>\n\n<p>Removing <code>#pragma omp parallel for</code> yields correct results. Adding it yields incorrect results, including nan values. Thus I suspect there is a race condition in my loop, but I haven't been able to find it. Does anyone know what might be going wrong? I only see two types of writes in my loop body:</p>\n\n<ul>\n<li>To <code>cind</code>, <code>cval</code>, and <code>model_copy</code> (by <a href=\"https://www.gurobi.com/documentation/9.0/refman/c_getdblattrarray.html\" rel=\"nofollow noreferrer\">GRBgetdblattrarray</a>), which are local variables declared inside the loop body and therefore private to each thread.</li>\n<li>To non-overlapping sections of <code>values</code>, <code>max_strategy</code>, and <code>min_strategies</code>.</li>\n</ul>\n"}, {"tags": ["c", "debugging", "visual-studio-code"], "answers": [{"comments": [{"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "edited": false, "score": 0, "creation_date": 1577532652, "post_id": 59483385, "comment_id": 105192941, "body": "Edited my question and started the bounty"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1577328647, "creation_date": 1577328647, "answer_id": 59483385, "question_id": 59481171, "link": "https://stackoverflow.com/questions/59481171/how-to-start-debug-in-visual-studio-code-on-macos-in-c-language/59483385#59483385", "title": "How to start debug in Visual Studio Code on macOs in C language?", "body": "<p>well, for a start, it is a C program, not a C++ program, so using the wrong debugger.  The C++ debugger is expecting 'name mangling' but GCC does not perform 'name mangling'</p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 8936874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DgLMo.png?s=128&g=1", "display_name": "NaShBe", "link": "https://stackoverflow.com/users/8936874/nashbe"}, "is_accepted": true, "score": 3, "last_activity_date": 1578120672, "last_edit_date": 1578120672, "creation_date": 1577336793, "answer_id": 59484048, "question_id": 59481171, "link": "https://stackoverflow.com/questions/59481171/how-to-start-debug-in-visual-studio-code-on-macos-in-c-language/59484048#59484048", "title": "How to start debug in Visual Studio Code on macOs in C language?", "body": "<p>One thing to note is you are passing the -g flag to LLDB as well as through the compiler. IIRC, LLDB does not have a -g option, so there's most likely a problem with that. <s>Unless there are no declarations externally defined in \"info.h\", there could also be a problem with your makefile not including all necessary object files although you would have been unable to compile the appropriate executable (I'm mentioning this solely because you can still proceed with debugging even when tasks in vscode return errors)</s> Based on your edit, it seems your main.c file doesn't include info.h, so this is not an issue.</p>\n\n<p>I've read from <a href=\"https://github.com/Microsoft/vscode-cpptools/issues/416\" rel=\"nofollow noreferrer\">here</a> that the way you write the main function header can cause problems with breakpoints, too. Try writing your main function header as <code>int main(int argc, char** argv)</code></p>\n\n<p>Side note: althought LLDB should be able to debug GCC-compiled code, I'd suggest you use Clang to compile your code instead since it is also part of the LLVM toolchain. More about that here: <a href=\"https://stackoverflow.com/questions/21132194/is-it-possible-to-debug-a-gcc-compiled-program-using-lldb-or-debug-a-clang-comp\">Is it possible to debug a gcc-compiled program using lldb, or debug a clang-compiled program using gdb?</a></p>\n\n<p>Here's some other places you should look  if you still can't fix it (from what I can tell this could actually be a bug):</p>\n\n<p><a href=\"https://github.com/microsoft/vscode-cpptools/issues/3829\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode-cpptools/issues/3829</a></p>\n\n<p><a href=\"https://lldb.llvm.org/use/troubleshooting.html\" rel=\"nofollow noreferrer\">https://lldb.llvm.org/use/troubleshooting.html</a></p>\n\n<p><a href=\"https://github.com/Microsoft/vscode-cpptools/issues/416\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/vscode-cpptools/issues/416</a></p>\n\n<p><a href=\"https://74th.github.io/vscode-debug-specs/cpp/\" rel=\"nofollow noreferrer\">https://74th.github.io/vscode-debug-specs/cpp/</a></p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 4277988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec609d42f1a47a9519f433ce7b9c92c3?s=128&d=identicon&r=PG&f=1", "display_name": "Axenth", "link": "https://stackoverflow.com/users/4277988/axenth"}, "is_accepted": false, "score": 0, "last_activity_date": 1577670612, "last_edit_date": 1577670612, "creation_date": 1577670109, "answer_id": 59524828, "question_id": 59481171, "link": "https://stackoverflow.com/questions/59481171/how-to-start-debug-in-visual-studio-code-on-macos-in-c-language/59524828#59524828", "title": "How to start debug in Visual Studio Code on macOs in C language?", "body": "<p>I'm note sure if it's of any help but I use CodeLLDB Extension (<a href=\"https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb</a>)\nThen just run make and start the debugger.</p>\n\n<p>Example of the launch.json i use: </p>\n\n<p><code>\"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"lldb\",\n            \"request\": \"launch\",\n            \"name\": \"launch\",\n            \"program\": \"${workspaceFolder}/a.out\",\n            \"args\": [],\n            \"cwd\": \"${workspaceFolder}\"\n        }\n    ]\n}</code></p>\n"}], "owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1748, "favorite_count": 0, "accepted_answer_id": 59484048, "answer_count": 3, "score": 2, "last_activity_date": 1578120672, "creation_date": 1577300843, "last_edit_date": 1577733451, "question_id": 59481171, "link": "https://stackoverflow.com/questions/59481171/how-to-start-debug-in-visual-studio-code-on-macos-in-c-language", "title": "How to start debug in Visual Studio Code on macOs in C language?", "body": "<p>I have a simple project just with one <code>main.c</code> file and <code>info.h</code> file. I am using <code>makefile</code> for building purpose</p>\n\n<pre><code>myprog1 : main.o\n    gcc -g main.o -Wall -ansi -pedantic -o myprog1\nmain.o : main.c info.h\n    gcc -c main.c -Wall -ansi -pedantic -o main.o\n</code></pre>\n\n<p>I am clicking <code>Debug -&gt; Start debugging -&gt; C++ (GDB/LLDB)</code>, then I get generated file (I edited my prog name added <code>-g</code> flag and stopAtEntry = true)</p>\n\n<pre><code>{\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"(lldb) Launch\",\n            \"type\": \"cppdbg\",\n            \"request\": \"launch\",\n            \"program\": \"${workspaceFolder}/myprog1\",\n            \"args\": [\n               \"-g\"\n            ],\n            \"stopAtEntry\": true,\n            \"cwd\": \"${workspaceFolder}\",\n            \"environment\": [],\n            \"externalConsole\": false,\n            \"MIMode\": \"lldb\"\n        }\n    ]\n}\n</code></pre>\n\n<p>And when I click <code>Run Debug</code> it just ignores my debug points with message</p>\n\n<blockquote>\n  <p>module containing this breakpoint has not yet loaded or the breakpoint address could not be obtained</p>\n</blockquote>\n\n<p>I have already read a lot of possible issues, but any help me...</p>\n\n<p>What am I doing wrong?</p>\n\n<p><strong>P.S.</strong>\nI am new in C language and in VS code. Could you please advise me what exactly I have to change in order to make it work?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I also tried to launch debug on my macOS and there is a <code>main()</code> method</p>\n\n<p><a href=\"https://i.stack.imgur.com/E7at6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E7at6.png\" alt=\"enter image description here\"></a> </p>\n\n<p>As you can see I put two debug points, but anyway when I start to debug, it doesn't stop at any of these two points. </p>\n\n<p>You can see log output on the screenshot...</p>\n\n<p>What is the problem?</p>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 313, "user_id": 5534308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246209eb8adf99bcdde38a9c2f380fee?s=128&d=identicon&r=PG&f=1", "display_name": "wuppie367", "link": "https://stackoverflow.com/users/5534308/wuppie367"}, "edited": false, "score": 5, "creation_date": 1577300898, "post_id": 59481144, "comment_id": 105139007, "body": "Try <code>func(Arg, Arr);</code>"}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1577301075, "post_id": 59481144, "comment_id": 105139038, "body": "I think I\u2019m your original attempt you passed the character (contents) of the letter at index 1. Just pass the array itself."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1577304649, "post_id": 59481448, "comment_id": 105139586, "body": "The parameters to <code>main</code> are conventionally called <code>argc</code> and <code>argv</code>."}], "tags": [], "owner": {"reputation": 921, "user_id": 4499969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6dprL.png?s=128&g=1", "display_name": "unDeadHerbs", "link": "https://stackoverflow.com/users/4499969/undeadherbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1577303659, "creation_date": 1577303659, "answer_id": 59481448, "question_id": 59481144, "link": "https://stackoverflow.com/questions/59481144/calling-function-by-value-in-c/59481448#59481448", "title": "calling function by value in C", "body": "<p>C only supports calling functions by value, calling by reference was added in C++ and uses the <code>&amp;</code> symbol.</p>\n\n<p>The value you are passing to the function is a location in memory, a pointer.  If you want to hand to the function a copy of the data at that memory location you'll need to make a copy for it.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Assuming that Arg and Arr are initialized.\nchar* Arr2[];                     // Make a storage place for the char**.\nArr2 = malloc(Arg*sizeof(char*)); // Make the right number of char*s in it\nfor(int e=0; e&lt;Arg; e++) {        // For each elem in the main array: \n  Arr2[e]=malloc(sizeof(char)*strlen(Arr[e])); // Make space for the chars,\n  strcpy(Arr2[e],Arr[e]);                      // And copy them.\n}\n</code></pre>\n\n<hr>\n\n<h1>Side note</h1>\n\n<p>You haven't initialized <code>Arg</code> or <code>Arr</code> in main.  I suspect that you might have meant the command line parameters.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int Arg, char* Arr[])\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12578483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7edafc2dacfe1107bcefeb1ebcb8a4?s=128&d=identicon&r=PG&f=1", "display_name": "codingbase", "link": "https://stackoverflow.com/users/12578483/codingbase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577327800, "creation_date": 1577300618, "last_edit_date": 1577327800, "question_id": 59481144, "link": "https://stackoverflow.com/questions/59481144/calling-function-by-value-in-c", "title": "calling function by value in C", "body": "<p>I am new to C language somehow and I am trying here to call a function \"func\" in main function but it gives me compiling error. I tried to search for examples similar to this situation in Google but stil getting errors. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct str {\n  int value;\n  uint32_t ptr_next;\n};\n\nvoid func(int arg, char* arr[]);\n\nint main() {\n  int Arg;\n  char* Arr[1];\n\n  func(Arg, *Arr[1]);\n\n  return 0;\n}\n\nvoid func(int arg, char* arr[]) {\n  int list;\n\n  struct str r;\n\n  FILE* file = fopen(arr[1], \"rb\");\n\n  do {\n    list = fread(&amp;r, sizeof(struct str), 1, file);\n\n    if (list &gt; 0)\n      printf(\"%d \", r.value);\n\n    fseek(file, r.ptr_next, 0);\n\n  }\n\n  while ((r.ptr_next != 0) &amp;&amp; (list &gt; 0));\n}\n\n</code></pre>\n\n<p>The question is how can I call functions by value in C language?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "virtualization", "hypervisor"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 10013007, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-a--Yg6NSJ_s/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0EUc440l43DVYt1hkQbtc7qdK84A/mo/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/10013007/paul"}, "edited": false, "score": 0, "creation_date": 1577305870, "post_id": 59481324, "comment_id": 105139799, "body": "That makes a lot of sense... I was comparing my code to this guide: <a href=\"https://rayanfam.com/topics/hypervisor-from-scratch-part-4/\" rel=\"nofollow noreferrer\">rayanfam.com/topics/hypervisor-from-scratch-part-4</a>  Which seems to be the most popular tutorial for creating a hypervisor, which doesn&#39;t mention mapping guest structures.  Thanks!"}], "tags": [], "owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "is_accepted": true, "score": 1, "last_activity_date": 1577303072, "last_edit_date": 1577303072, "creation_date": 1577302438, "answer_id": 59481324, "question_id": 59481030, "link": "https://stackoverflow.com/questions/59481030/issues-implementing-ept/59481324#59481324", "title": "Issues implementing EPT", "body": "<p>It looks like it is only mapping 10 pages (40 KB) in the EPT, but GUEST CR3 is 7776e0000, which is not mapped.</p>\n\n<p>If you want to only map a small amount of memory into the guest, then all the guest structures need to be located within that guest physical address range.</p>\n"}], "owner": {"reputation": 103, "user_id": 10013007, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-a--Yg6NSJ_s/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0EUc440l43DVYt1hkQbtc7qdK84A/mo/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/10013007/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 59481324, "answer_count": 1, "score": 1, "last_activity_date": 1577314621, "creation_date": 1577299324, "last_edit_date": 1577314621, "question_id": 59481030, "link": "https://stackoverflow.com/questions/59481030/issues-implementing-ept", "title": "Issues implementing EPT", "body": "<p>I'm having an issue implementing EPT in a hypervisor I'm developing.\nI'm receiving error no. 48 (<b>EPT violation. An attempt to access memory with a guest-physical address was disallowed by the configuration of the EPT paging structures</b>) with an EXIT_QUALIFICATION of 0x81 upon doing a VMLAUNCH. \nI've checked the page allocation logic and made sure GUEST_CR3 = HOST_CR3. I'm not sure why is this happening. I'm running on VMWare on a Linux host.</p>\n\n<p>This is the allocation logic:</p>\n\n<pre><code>EPTP alloc_ept(int initial_pages_count){\n    int i;\n    EPTP eptp;\n    EPT_PML4E *ept_pml4;\n    EPT_PDPTE *ept_pdpt;\n    EPT_PDE *ept_pd;\n    EPT_PTE *ept_pt;\n    eptp.value = 0;\n\n    ept_pml4 = kzalloc(4096, GFP_KERNEL | GFP_NOWAIT);\n    if(!ept_pml4)\n        goto pml4err;\n    ept_pdpt = kzalloc(4096, GFP_KERNEL | GFP_NOWAIT);\n    if(!ept_pdpt)\n        goto pdpterr;\n    ept_pd = kzalloc(4096, GFP_KERNEL | GFP_NOWAIT);\n    if(!ept_pd)\n        goto pderr;\n    ept_pt = kzalloc(4096, GFP_KERNEL | GFP_NOWAIT);\n    if(!ept_pt)\n        goto pterr;\n\n    for(i = 0; i &lt; initial_pages_count; i++){\n        ept_pt[i].fields.phys_addr = virt_to_phys(kzalloc(4096, GFP_KERNEL | GFP_NOWAIT)) &gt;&gt; 12;\n        ept_pt[i].fields.read_access = 1;\n        ept_pt[i].fields.write_access = 1;\n        ept_pt[i].fields.execute_access = 1;\n        // Read CR0.bit30(CD) to determine cache disable and check if memtype=6 is supported:\n        ept_pt[i].fields.ept_memtype = 0;\n    }\n\n    ept_pd[0].fields.phys_addr = virt_to_phys(ept_pt) &gt;&gt; 12;\n    ept_pd[0].fields.read_access = 1;\n    ept_pd[0].fields.write_access = 1;\n    ept_pd[0].fields.execute_access = 1;\n\n    ept_pdpt[0].fields.phys_addr = virt_to_phys(ept_pd) &gt;&gt; 12;\n    ept_pdpt[0].fields.read_access = 1;\n    ept_pdpt[0].fields.write_access = 1;\n    ept_pdpt[0].fields.execute_access = 1;\n\n    ept_pml4[0].fields.phys_addr = virt_to_phys(ept_pdpt) &gt;&gt; 12;\n    ept_pml4[0].fields.read_access = 1;\n    ept_pml4[0].fields.write_access = 1;\n    ept_pml4[0].fields.execute_access = 1;\n\n    eptp.fields.pml4_phys_addr = virt_to_phys(ept_pml4) &gt;&gt; 12;\n    // Read CR0.bit30(CD) to determine cache disable and check if memtype=6 is supported:\n    eptp.fields.memtype = 0;\n    eptp.fields.page_walk = 3;\n    // TODO: Read IA32_VMX_EPT_VPID_CAP - bit 21 if this is supported:\n    eptp.fields.accessed_and_dirty_flags_enabled = 0;\n    printk(\"EPTP PML4 PHYS ADDR: %08llx\", eptp.fields.pml4_phys_addr);\n\n    return eptp;\n\n    pterr:\n    kfree(ept_pd);\n    pderr:\n    kfree(ept_pdpt);\n    pdpterr:\n    kfree(ept_pml4);\n    pml4err:\n    panic(\"EPT ALLOC ERROR!\");\n}\n\nstatic inline void VMLAUNCH(void){\n    uint8_t err;\n    __asm__ __volatile__(\n        \"vmlaunch; setna %[err]\"\n        : [err]\"=rm\"(err) \n        : : \"cc\", \"memory\"\n    );\n    dump_vmcs();\n    printk(KERN_ERR \"VMLAUNCH failure (err %lx)\", vmcs_read(VM_INSTRUCTION_ERROR));\n    BUG_ON(err);\n}\n\nstatic void setup_vm_code(vmstate *vms){\n    int i;\n        EPT_PML4E *pml = phys_to_virt(vms-&gt;eptp.fields.pml4_phys_addr &lt;&lt; 12);\n        EPT_PDPTE *pdpt = phys_to_virt(pml-&gt;fields.phys_addr &lt;&lt; 12);\n        EPT_PDE *pd = phys_to_virt(pdpt-&gt;fields.phys_addr &lt;&lt; 12);\n        EPT_PTE *pt = phys_to_virt(pd-&gt;fields.phys_addr &lt;&lt; 12);\n\n    vms-&gt;initial_rip = (unsigned long)phys_to_virt(pt[0].fields.phys_addr &lt;&lt; 12);\n    for(i = 0; i &lt; 4096; i++){\n        // hlt\n        *(char*)(vms-&gt;initial_rip+i) = 0xf4;\n    }\n    printk(KERN_INFO \"INITIAL_RIP: %016lx\", vms-&gt;initial_rip);\n    printk(KERN_INFO \"INITIAL_RIP_PHYS: %016llx\", virt_to_phys((unsigned long*)vms-&gt;initial_rip));\n    // Stack grows down\n    vms-&gt;initial_rsp = (unsigned long)phys_to_virt(pt[9].fields.phys_addr &lt;&lt; 12) + 4095;\n}\n\nstatic void prepare_vmx_cpu(void){\n    uint32_t vmcs_revid = 0;\n    uint32_t hi = 0;\n    vmstate *vms = per_cpu(cpu_vms, smp_processor_id());\n\n    // Populate VMCS revision id in vmxon region\n    rdmsr_safe(MSR_IA32_VMX_BASIC, &amp;vmcs_revid, &amp;hi);\n    memcpy(vms-&gt;vmxon_region, &amp;vmcs_revid, 4);\n    memcpy(vms-&gt;vmcs_region, &amp;vmcs_revid, 4);\n\n    vms-&gt;eptp = alloc_ept(10);\n    setup_vm_code(vms);\n\n    vmx_enable();   \n}\n\nstatic void handle_vmexit(void){\n    int exit_reason = vmcs_read32(VM_EXIT_REASON);\n    int basic_exit_code = exit_reason &amp; 0xffff;\n    int exit_qualification = vmcs_read32(EXIT_QUALIFICATION);\n    int vm_entry_failure = exit_reason &amp; 0x80000000;\n    dump_vmcs();\n    panic(\"VMEXIT WITH CODE %d, VM ENTRY FAILURE: %s, QUAL: %d\", basic_exit_code, vm_entry_failure ? \"true\" : \"false\", exit_qualification);\n    VMRESUME();\n    //TODO: switch error reasons\n}\n\nstatic void vmx_setup_vm_controls(void){\n    // VM Execution Controls\n    vmcs_write(PIN_BASED_VM_EXEC_CONTROL, adjust_msr_control(MSR_IA32_VMX_PINBASED_CTLS, 0));\n    vmcs_write(CPU_BASED_VM_EXEC_CONTROL, adjust_msr_control(\n        MSR_IA32_VMX_PROCBASED_CTLS, CPU_BASED_HLT_EXITING | CPU_BASED_ACTIVATE_SECONDARY_CONTROLS));\n    vmcs_write(SECONDARY_VM_EXEC_CONTROL, adjust_msr_control(\n        MSR_IA32_VMX_PROCBASED_CTLS2, CPU_BASED_CTL2_RDTSCP | CPU_BASED_CTL2_ENABLE_INVPCID | CPU_BASED_CTL2_ENABLE_VPID | CPU_BASED_CTL2_ENABLE_XSAVE_XRSTORS | CPU_BASED_CTL2_ENABLE_EPT\n    ));\n\n    //vmcs_write64(TSC_OFFSET, 0);  \n\n    vmcs_write(CR0_READ_SHADOW, read_cr0());\n    vmcs_write(CR4_READ_SHADOW, __read_cr4());\n    vmcs_write(CR0_GUEST_HOST_MASK, ~0ul);\n    vmcs_write(CR4_GUEST_HOST_MASK, ~0ul);\n\n    // How many CR3_TARGET_VALUEs are considered without VM exit when MOV CR3, VAL\n    vmcs_write(CR3_TARGET_COUNT, 0);\n\n    // VM Entry &amp; Exit Controls\n    vmcs_write(VM_EXIT_CONTROLS, adjust_msr_control(MSR_IA32_VMX_EXIT_CTLS, VM_EXIT_IA32E_MODE | VM_EXIT_LOAD_IA32_EFER | VM_EXIT_HOST_ADDR_SPACE_SIZE));\n    vmcs_write(VM_ENTRY_CONTROLS, adjust_msr_control(MSR_IA32_VMX_ENTRY_CTLS, VM_ENTRY_IA32E_MODE | VM_ENTRY_LOAD_IA32_EFER));\n}\n\nstatic void vmx_setup_initial_host_state(vmstate *vms){\n    struct desc_ptr gdtptr, idt;\n\n    vmcs_write(HOST_CR0, read_cr0());\n    vmcs_write(HOST_CR3, __read_cr3());\n    vmcs_write(HOST_CR4, __read_cr4());\n    vmcs_write(HOST_RSP, (unsigned long)vms-&gt;vmm_handle_stack + vms-&gt;vmm_handle_stack_size - 1);\n    vmcs_write(HOST_RIP, (unsigned long)handle_vmexit);\n\n    /* An explanation of segment selectors: https://medium.com/hungys-blog/linux-kernel-memory-addressing-a0d304283af3 */\n    // Segment Selectors\n    vmcs_write(HOST_CS_SELECTOR, __KERNEL_CS);\n    vmcs_write(HOST_DS_SELECTOR, __KERNEL_DS);\n    vmcs_write(HOST_ES_SELECTOR, __KERNEL_DS);\n    vmcs_write(HOST_SS_SELECTOR, __KERNEL_DS);\n    vmcs_write(HOST_FS_SELECTOR, 0);\n    vmcs_write(HOST_GS_SELECTOR, 0);\n    vmcs_write(HOST_TR_SELECTOR, GDT_ENTRY_TSS*8);\n\n    // Segment Base Adresses\n    vmcs_write(HOST_FS_BASE, native_read_msr(MSR_FS_BASE));\n    vmcs_write(HOST_GS_BASE, native_read_msr(MSR_GS_BASE));\n    vmcs_write(HOST_TR_BASE, read_tr_base());\n    native_store_gdt(&amp;gdtptr);\n    vmcs_write(HOST_GDTR_BASE, gdtptr.address);\n    store_idt(&amp;idt);\n    vmcs_write(HOST_IDTR_BASE, idt.address);\n\n    // MSRs\n    vmcs_write(HOST_IA32_SYSENTER_CS, native_read_msr(MSR_IA32_SYSENTER_CS));\n    vmcs_write(HOST_IA32_SYSENTER_ESP, native_read_msr(MSR_IA32_SYSENTER_ESP));\n    vmcs_write(HOST_IA32_SYSENTER_EIP, native_read_msr(MSR_IA32_SYSENTER_EIP));\n    vmcs_write64(HOST_IA32_EFER, native_read_msr(MSR_EFER));\n}\n\nstatic void RIPTEST(void) __attribute__((used));\nstatic void RIPTEST(void){\n    __asm__ __volatile__(\"hlt; hlt; hlt; hlt; hlt; hlt\");\n}\n\nstatic void vmx_setup_initial_guest_state(vmstate *vms){\n    vmcs_write(GUEST_CR0, read_cr0());\n    vmcs_write(GUEST_CR3, __read_cr3());\n    vmcs_write(GUEST_CR4, __read_cr4());\n    vmcs_write(GUEST_DR7, 0);\n\n    vmcs_write(GUEST_RIP, vms-&gt;initial_rip);\n    //vmcs_write(GUEST_RIP, (unsigned long)RIPTEST);\n    vmcs_write(GUEST_RSP, vms-&gt;initial_rsp);\n    vmcs_write(GUEST_RFLAGS, 0x2); // Reserved flag\n\n    // Setup selectors\n    vmcs_write(GUEST_CS_SELECTOR, 0);\n    vmcs_write(GUEST_SS_SELECTOR, 0);\n    vmcs_write(GUEST_DS_SELECTOR, 0);\n    vmcs_write(GUEST_ES_SELECTOR, 0);\n    vmcs_write(GUEST_FS_SELECTOR, 0);\n    vmcs_write(GUEST_GS_SELECTOR, 0);\n    vmcs_write(GUEST_LDTR_SELECTOR, 0);\n    vmcs_write(GUEST_TR_SELECTOR, 0);\n\n    // Setup base addresses\n    vmcs_write(GUEST_CS_BASE, 0);\n    vmcs_write(GUEST_SS_BASE, 0);\n    vmcs_write(GUEST_DS_BASE, 0);\n    vmcs_write(GUEST_ES_BASE, 0);\n    vmcs_write(GUEST_FS_BASE, native_read_msr(MSR_FS_BASE));\n    vmcs_write(GUEST_GS_BASE, native_read_msr(MSR_GS_BASE));\n    vmcs_write(GUEST_LDTR_BASE, 0);\n    vmcs_write(GUEST_TR_BASE, 0);\n\n    // Setup guest segment limits   \n    vmcs_write(GUEST_CS_LIMIT, 0xFFFFFFFF);\n    vmcs_write(GUEST_SS_LIMIT, 0xFFFFFFFF);\n    vmcs_write(GUEST_DS_LIMIT, 0xFFFFFFFF);\n    vmcs_write(GUEST_ES_LIMIT, 0xFFFFFFFF);\n    vmcs_write(GUEST_FS_LIMIT, 0xFFFFFFFF);\n    vmcs_write(GUEST_GS_LIMIT, 0xFFFFFFFF);\n    vmcs_write(GUEST_LDTR_LIMIT, 0);\n    vmcs_write(GUEST_TR_LIMIT, 0xFF);\n\n    // Setup guest segment access rights\n    // https://www.amd.com/system/files/TechDocs/24593.pdf#G10.910849\n    vmcs_write(GUEST_CS_AR_BYTES, 0xA09B);\n    vmcs_write(GUEST_SS_AR_BYTES, 0xA093);\n    vmcs_write(GUEST_DS_AR_BYTES, 0xA093);\n    vmcs_write(GUEST_ES_AR_BYTES, 0xA093);\n    vmcs_write(GUEST_FS_AR_BYTES, 0xA093);\n    vmcs_write(GUEST_GS_AR_BYTES, 0xA093);\n    vmcs_write(GUEST_LDTR_AR_BYTES, 0x0082);\n    vmcs_write(GUEST_TR_AR_BYTES, 0x008B);\n\n    // Setup GDTR &amp; IDTR\n    vmcs_write(GUEST_GDTR_BASE, 0);\n    vmcs_write(GUEST_IDTR_BASE, 0);\n    vmcs_write(GUEST_GDTR_LIMIT, 0);\n    vmcs_write(GUEST_IDTR_LIMIT, 0);\n\n    vmcs_write(GUEST_IA32_EFER, native_read_msr(MSR_EFER));\n    vmcs_write64(GUEST_IA32_DEBUGCTL, 0);\n\n    // Setup sysenter primitives\n    vmcs_write(GUEST_SYSENTER_CS, 0);\n    vmcs_write(GUEST_SYSENTER_ESP, 0);\n    vmcs_write(GUEST_SYSENTER_EIP, 0);\n}\n\nstatic void init_vmcs(vmstate *vms){\n    VMPTRLD(vms-&gt;vmcs_physical);\n    vmx_setup_vm_controls();\n    vmx_setup_initial_guest_state(vms);\n    vmx_setup_initial_host_state(vms);\n\n    vmcs_write64(VMCS_LINK_POINTER, -1ull);\n\n    //vmcs_write(EXCEPTION_BITMAP, 8192);\n\n    vmcs_write64(EPT_POINTER, vms-&gt;eptp.value);\n    //vmcs_write(VIRTUAL_PROCESSOR_ID, vms-&gt;vpid);\n}\n\nint vmx_launch(void){\n    int cpu = smp_processor_id();\n    vmstate *vms = per_cpu(cpu_vms, smp_processor_id());\n\n    printk(KERN_INFO \"Launching VM on CPU %d\\n\", cpu);\n    init_vmcs(vms);\n    VMLAUNCH();\n\n    put_cpu();\n    return 0;\n}\n\nint vmx_setup(void){\n    int i = smp_processor_id();\n    vmstate* vms;\n    printk(KERN_INFO \"NUM CPUS: %d\\n\", num_online_cpus());\n\n    vms = create_vmstate();\n    vms-&gt;vmxon_region = kmalloc(4096, GFP_KERNEL);\n    vms-&gt;vmxon_physical = virt_to_phys(vms-&gt;vmxon_region);\n    vms-&gt;vmcs_region = kzalloc(4096, GFP_KERNEL);\n    vms-&gt;vmcs_physical = virt_to_phys(vms-&gt;vmcs_region);\n    vms-&gt;vmm_handle_stack_size = 4096;\n    vms-&gt;vmm_handle_stack = kmalloc(vms-&gt;vmm_handle_stack_size, GFP_KERNEL);\n    vms-&gt;vpid = get_free_vpid();\n    per_cpu(cpu_vms, i) = vms;\n\n\n    prepare_vmx_cpu();\n    printk(KERN_INFO \"CPUS prepared!\");\n\n    vms = per_cpu(cpu_vms, i);\n    if(vms-&gt;vmx_enabled == false) {\n        printk(KERN_ALERT \"Tearing down after VMXON failed!\");\n        vmx_teardown();\n        return -1;\n    }\n    return 0;\n}\n\nstatic int __init hyper_init(void) {\n    int err;\n\n    get_cpu();\n    printk(KERN_INFO \"Hyper1 Init!\\n\");\n    if(check_vmx_support()){\n        device_cleanup();\n        return -1;\n    }\n    if((err = setup_chrdev())){\n        device_cleanup();\n        return err;\n    }\n    if((err = vmx_setup())){\n        device_cleanup();\n        return err;\n    }\n\n    printk(KERN_INFO \"Assigned major number %d\\n\", MAJOR(devt));\n    vmx_launch();\n    put_cpu();\n    return 0;\n}\n\n</code></pre>\n\n<p>VM log:</p>\n\n<pre><code>[  323.188232] Hyper1 Init!\n[  323.189311] NUM CPUS: 2\n[  323.192490] EPTP PML4 PHYS ADDR: 0007261e\n[  323.192500] INITIAL_RIP: 18446615530478686208\n[  323.194087] CPUS prepared!\n[  323.195778] Assigned major number 240\n[  323.198310] Launching VM on CPU 1\n[  323.199330] vmwrite log: reg 4000 value 16\n[  323.200639] vmwrite log: reg 4002 value ffffffff8401e1f2\n[  323.202297] vmwrite log: reg 401e value a\n[  323.203499] vmwrite log: reg 6004 value 80050033\n[  323.204836] vmwrite log: reg 6006 value 626e0\n[  323.206041] vmwrite log: reg 6000 value ffffffffffffffff\n[  323.207529] vmwrite log: reg 6002 value ffffffffffffffff\n[  323.209033] vmwrite log: reg 400a value 0\n[  323.210121] vmwrite log: reg 400c value 236fff\n[  323.211322] vmwrite log: reg 4012 value 93ff\n[  323.212541] vmwrite log: reg 6800 value 80050033\n[  323.213900] vmwrite log: reg 6802 value 7776e004\n[  323.215150] vmwrite log: reg 6804 value 626e0\n[  323.216457] vmwrite log: reg 681a value 0\n[  323.217565] vmwrite log: reg 681e value ffff8b173262d000\n[  323.219124] vmwrite log: reg 681c value ffff8b173260cfff\n[  323.220656] vmwrite log: reg 6820 value 2\n[  323.221746] vmwrite log: reg 802 value 0\n[  323.222811] vmwrite log: reg 804 value 0\n[  323.223938] vmwrite log: reg 806 value 0\n[  323.225008] vmwrite log: reg 800 value 0\n[  323.226082] vmwrite log: reg 808 value 0\n[  323.227246] vmwrite log: reg 80a value 0\n[  323.228437] vmwrite log: reg 80c value 0\n[  323.229551] vmwrite log: reg 80e value 0\n[  323.230626] vmwrite log: reg 6808 value 0\n[  323.231753] vmwrite log: reg 680a value 0\n[  323.232841] vmwrite log: reg 680c value 0\n[  323.233925] vmwrite log: reg 6806 value 0\n[  323.235037] vmwrite log: reg 680e value 7f624c519540\n[  323.236473] vmwrite log: reg 6810 value ffff8b173bc40000\n[  323.237903] vmwrite log: reg 6812 value 0\n[  323.238988] vmwrite log: reg 6814 value 0\n[  323.240129] vmwrite log: reg 4802 value ffffffff\n[  323.241375] vmwrite log: reg 4804 value ffffffff\n[  323.242619] vmwrite log: reg 4806 value ffffffff\n[  323.243905] vmwrite log: reg 4800 value ffffffff\n[  323.245150] vmwrite log: reg 4808 value ffffffff\n[  323.246417] vmwrite log: reg 480a value ffffffff\n[  323.247697] vmwrite log: reg 480c value 0\n[  323.248784] vmwrite log: reg 480e value ff\n[  323.249901] vmwrite log: reg 4816 value a09b\n[  323.251053] vmwrite log: reg 4818 value a093\n[  323.252243] vmwrite log: reg 481a value a093\n[  323.253439] vmwrite log: reg 4814 value a093\n[  323.254594] vmwrite log: reg 481c value a093\n[  323.255822] vmwrite log: reg 481e value a093\n[  323.256978] vmwrite log: reg 4820 value 82\n[  323.258142] vmwrite log: reg 4822 value 8b\n[  323.259238] vmwrite log: reg 6816 value 0\n[  323.260350] vmwrite log: reg 6818 value 0\n[  323.261421] vmwrite log: reg 4810 value 0\n[  323.262489] vmwrite log: reg 4812 value 0\n[  323.263762] vmwrite log: reg 2806 value d01\n[  323.264960] vmwrite log: reg 2802 value 0\n[  323.266068] vmwrite log: reg 482a value 0\n[  323.267136] vmwrite log: reg 6824 value 0\n[  323.268257] vmwrite log: reg 6826 value 0\n[  323.269379] vmwrite log: reg 6c00 value 80050033\n[  323.270601] vmwrite log: reg 6c02 value 7776e004\n[  323.271879] vmwrite log: reg 6c04 value 626e0\n[  323.273037] vmwrite log: reg 6c14 value ffff8b1732619fff\n[  323.274435] vmwrite log: reg 6c16 value ffffffffc07154f0\n[  323.275870] vmwrite log: reg c02 value 10\n[  323.277134] vmwrite log: reg c06 value 18\n[  323.278262] vmwrite log: reg c00 value 18\n[  323.279443] vmwrite log: reg c04 value 18\n[  323.280625] vmwrite log: reg c08 value 0\n[  323.282006] vmwrite log: reg c0a value 0\n[  323.283281] vmwrite log: reg c0c value 40\n[  323.284409] vmwrite log: reg 6c06 value 7f624c519540\n[  323.285794] vmwrite log: reg 6c08 value ffff8b173bc40000\n[  323.287244] vmwrite log: reg 6c0a value 0\n[  323.288367] vmwrite log: reg 6c0c value fffffe000002c000\n[  323.289770] vmwrite log: reg 6c0e value fffffe0000000000\n[  323.291169] vmwrite log: reg 4c00 value 10\n[  323.292295] vmwrite log: reg 6c10 value fffffe000002d200\n[  323.293696] vmwrite log: reg 6c12 value ffffffff860015f0\n[  323.295124] vmwrite log: reg 2c02 value d01\n[  323.296309] vmwrite log: reg 2800 value ffffffffffffffff\n[  323.297711] vmwrite log: reg 201a value 7261e018\n[  323.299105] *** Guest State ***\n[  323.300022] CR0: actual=0x0000000080050033, shadow=0x0000000080050033, gh_mask=ffffffffffffffff\n[  323.302373] CR4: actual=0x00000000000626e0, shadow=0x00000000000626e0, gh_mask=ffffffffffffffff\n[  323.304697] CR3 = 0x000000007776e004\n[  323.305687] PDPTR0 = 0x0000000000000000  PDPTR1 = 0x0000000000000000\n[  323.307411] PDPTR2 = 0x0000000000000000  PDPTR3 = 0x0000000000000000\n[  323.309117] RSP = 0xffff8b173260cfff  RIP = 0xffff8b173262d000\n[  323.310683] RFLAGS=0x00010002         DR7 = 0x0000000000000400\n[  323.312270] Sysenter RSP=0000000000000000 CS:RIP=0000:0000000000000000\n[  323.314044] CS:   sel=0x0000, attr=0x0a09b, limit=0xffffffff, base=0x0000000000000000\n[  323.316257] DS:   sel=0x0000, attr=0x0a093, limit=0xffffffff, base=0x0000000000000000\n[  323.318371] SS:   sel=0x0000, attr=0x0a093, limit=0xffffffff, base=0x0000000000000000\n[  323.320506] ES:   sel=0x0000, attr=0x0a093, limit=0xffffffff, base=0x0000000000000000\n[  323.322580] FS:   sel=0x0000, attr=0x0a093, limit=0xffffffff, base=0x00007f624c519540\n[  323.324678] GS:   sel=0x0000, attr=0x0a093, limit=0xffffffff, base=0xffff8b173bc40000\n[  323.326774] GDTR:                           limit=0x00000000, base=0x0000000000000000\n[  323.328880] LDTR: sel=0x0000, attr=0x00082, limit=0x00000000, base=0x0000000000000000\n[  323.330982] IDTR:                           limit=0x00000000, base=0x0000000000000000\n[  323.333073] TR:   sel=0x0000, attr=0x0008b, limit=0x000000ff, base=0x0000000000000000\n[  323.335153] EFER =     0x0000000000000d01  PAT = 0x0000000000000000\n[  323.337001] DebugCtl = 0x0000000000000000  DebugExceptions = 0x0000000000000000\n[  323.338947] PerfGlobCtl = 0x0000000000000000\n[  323.340114] vmread err: reg 2812 value 0\n[  323.341171] BndCfgS = 0x0000000000000000\n[  323.342235] Interruptibility = 00000000  ActivityState = 00000000\n[  323.343874] vmread err: reg 810 value 0\n[  323.344910] InterruptStatus = 0000\n[  323.345840] *** Host State ***\n[  323.346699] RIP = 0xffffffffc07154f0  RSP = 0xffff8b1732619fff\n[  323.348287] CS=0010 SS=0018 DS=0018 ES=0018 FS=0000 GS=0000 TR=0040\n[  323.349965] FSBase=00007f624c519540 GSBase=ffff8b173bc40000 TRBase=0000000000000000\n[  323.352014] GDTBase=fffffe000002c000 IDTBase=fffffe0000000000\n[  323.353586] CR0=0000000080050033 CR3=000000007776e004 CR4=00000000000626e0\n[  323.355468] Sysenter RSP=fffffe000002d200 CS:RIP=0010:ffffffff860015f0\n[  323.357231] EFER = 0x0000000000000d01  PAT = 0x0000000000000000\n[  323.358815] PerfGlobCtl = 0x0000000000000000\n[  323.359976] *** Control State ***\n[  323.360877] PinBased=00000016 CPUBased=8401e1f2 SecondaryExec=0000000a\n[  323.362632] EntryControls=000093ff ExitControls=00236fff\n[  323.364073] ExceptionBitmap=00000000 PFECmask=00000000 PFECmatch=00000000\n[  323.366003] VMEntry: intr_info=00000000 errcode=00000000 ilen=00000000\n[  323.367768] VMExit: intr_info=00000000 errcode=00000000 ilen=00000003\n[  323.369521]         reason=00000030 qualification=0000000000000081\n[  323.371177] IDTVectoring: info=00000000 errcode=00000000\n[  323.372614] TSC Offset = 0x0000000000000000\n[  323.373742] vmread err: reg 810 value 810\n[  323.374822] SVI|RVI = 08|10 TPR Threshold = 0x00\n[  323.376079] vmread err: reg 2014 value 0\n[  323.377276] APIC-access addr = 0x0000000000000000 virt-APIC addr = 0x0000000000000000\n[  323.379498] vmread err: reg 2 value 0\n[  323.380501] PostedIntrVec = 0x00\n[  323.381383] EPT pointer = 0x000000007261e018\n[  323.382534] Virtual processor ID = 0x0000\n[  323.383629] Kernel panic - not syncing: VMEXIT WITH CODE 48, VM ENTRY FAILURE: false, QUAL: 129\n</code></pre>\n\n<p>Any help would be appreciated, thanks!</p>\n"}, {"tags": ["c", "datetime", "data-structures", "structure"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1577359966, "post_id": 59480924, "comment_id": 105150322, "body": "Too broad: please provide more detail as where you need help."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1577626946, "post_id": 59480924, "comment_id": 105210780, "body": "It might be operating system specific, but the general ideas might be useful. Read <a href=\"http://man7.org/linux/man-pages/man7/time.7.html\" rel=\"nofollow noreferrer\">time(7)</a> and <a href=\"http://man7.org/linux/man-pages/man3/strptime.3.html\" rel=\"nofollow noreferrer\">strptime(3)</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1577627235, "post_id": 59480924, "comment_id": 105210859, "body": "And the code of time related functions on Linux is <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a> e.g. in <a href=\"https://musl-libc.org/\" rel=\"nofollow noreferrer\">musl-libc</a>. It certainly should inspire you. Actually, time is a very difficult topic (e.g. because of <a href=\"https://en.wikipedia.org/wiki/Leap_second\" rel=\"nofollow noreferrer\">leap seconds</a>...) but you may want to convert it to <code>time_t</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1577627447, "post_id": 59480924, "comment_id": 105210930, "body": "Read more about <a href=\"https://en.wikipedia.org/wiki/C_date_and_time_functions\" rel=\"nofollow noreferrer\">C date and time functions</a>"}, {"owner": {"reputation": 1, "user_id": 11679656, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1sx5t5_ybQs/AAAAAAAAAAI/AAAAAAAABfA/qD-J-2DTQUk/photo.jpg?sz=128", "display_name": "Jaroslav S&#253;kora", "link": "https://stackoverflow.com/users/11679656/jaroslav-s%c3%bdkora"}, "edited": false, "score": 0, "creation_date": 1577630742, "post_id": 59480924, "comment_id": 105211782, "body": "Thanks for advice guys. I don&#39;t know how to make &quot;dejDateTime&quot; function... converting this (2018-05-01 01:00:00) from the file so I can work with it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11679656, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1sx5t5_ybQs/AAAAAAAAAAI/AAAAAAAABfA/qD-J-2DTQUk/photo.jpg?sz=128", "display_name": "Jaroslav S&#253;kora", "link": "https://stackoverflow.com/users/11679656/jaroslav-s%c3%bdkora"}, "edited": false, "score": 0, "creation_date": 1577626124, "post_id": 59481357, "comment_id": 105210567, "body": "That is a good idea. But that would work only for a that one certain line. I have almost 30 000 lines of data in that file and they are all with different lenght. Any idea how to make it work for example for the first 4 characters after second semicolon?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1577627585, "post_id": 59481357, "comment_id": 105210961, "body": "Read more about <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a>. Use <a href=\"https://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\">fgets</a> then <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">sscanf</a>"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 1, "user_id": 11679656, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1sx5t5_ybQs/AAAAAAAAAAI/AAAAAAAABfA/qD-J-2DTQUk/photo.jpg?sz=128", "display_name": "Jaroslav S&#253;kora", "link": "https://stackoverflow.com/users/11679656/jaroslav-s%c3%bdkora"}, "edited": false, "score": 0, "creation_date": 1577706288, "post_id": 59481357, "comment_id": 105230106, "body": "@JaroslavS&#253;kora, What do you mean with &quot;work only for ... certain line&quot; ? this works for all lines in the file (until the <code>fgets</code> encounters EOF and then returns a null pointer which breaks the while). It you are talking about different structures in each line, you need to provide a description of the structure in the file, or at least more examples."}], "tags": [], "owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "is_accepted": false, "score": 1, "last_activity_date": 1577303906, "last_edit_date": 1577303906, "creation_date": 1577302791, "answer_id": 59481357, "question_id": 59480924, "link": "https://stackoverflow.com/questions/59480924/how-to-convert-data-from-file-into-a-structure-in-c/59481357#59481357", "title": "How to convert data from file into a structure in C?", "body": "<p>A good approach would be, to have a function that return each value you are interested in (<code>getYear</code>, <code>getMonth</code>, ...), that receives the line as input, and return the desired value: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define YEAR_LEN 4\n\ntypedef struct { \n  int year; \n  int month; \n  int day; \n  int hour; \n  int min; \n  int sec; \n  int dayInWeek; \n}tDateTime;\n\nint getYear(char* p_line){\n  char year[YEAR_LEN+1];\n  strncpy(year, p_line+8, 4);\n  year[YEAR_LEN] = '\\0';   /* null character manually added */\n  return atoi(year);\n}\n\nint main(int argc, char** argv){\n  char const* const fileName = argv[1];\n  FILE* file = fopen(\"data.txt\", \"r\");\n  char line[256];\n  tDateTime dt;\n\n  while (fgets(line, sizeof(line), file)) {\n    printf(\"line: %s\\n\", line);\n    dt.year = getYear(line);\n    printf(\"%d\\n\", dt.year);\n  }\n\n  fclose(file);\n  return 0;\n}\n</code></pre>\n\n<p>After this is working you could also group all functions call into another function (something like <code>getData</code>) in that way the code is more organized and more maintainable.</p>\n\n<p>Something like:</p>\n\n<pre><code>tDateTime getData(char* p_line){\n  tDateTime res;\n  res.year = getYear(p_line); \n  res.month = getMonth(p_line);\n  return res;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11679656, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1sx5t5_ybQs/AAAAAAAAAAI/AAAAAAAABfA/qD-J-2DTQUk/photo.jpg?sz=128", "display_name": "Jaroslav S&#253;kora", "link": "https://stackoverflow.com/users/11679656/jaroslav-s%c3%bdkora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577632936, "creation_date": 1577298401, "last_edit_date": 1577632936, "question_id": 59480924, "link": "https://stackoverflow.com/questions/59480924/how-to-convert-data-from-file-into-a-structure-in-c", "title": "How to convert data from file into a structure in C?", "body": "<p>I have to make a function that converts data(time) from file into structure with use of other function. So take this from the file (2018-06-01 01:00:00) and convert it into structure. \nFirst is year then month, day, hour, min and sec. </p>\n\n<p>I am kinda new to this so I don't know how to properly use strtok fro parsing.</p>\n\n<p>Data in file look like this:</p>\n\n<ul>\n<li>id;sensor_id;time;m3\n<li>12899;1;2018-06-01 01:00:00;0.0000\n<li>150362;222;2019-11-14 14:00:00;0.2465\n<li>150369;35;2019-11-14 15:00:00;0.2550\n<li>. . .\n</ul>\n\n<p>And this is how the structre should looks like.</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct { \nint year; \nint month; \nint day; \nint hour; \nint min; \nint sec; \nint dayInWeek; \n}tDateTime;\n</code></pre>\n\n<p>And declarations of functions. I have already solved the \"giveDayInWeek\" function.</p>\n\n<pre><code>tDateTime dejDateTime(char* datetime) //converts input from text file (2018-05-01 01:00:00) into structure, with using giveDayInWeek\n\nint giveDayInWeek(int y, int m, int d) //returns dan in a week (0-Monday,\u2026,6-Sunday) \n{\n    static int t[] = { 0,3,2,5,0,3,5,1,4,6,2,4 };\n    y -= m &lt; 3;\n    return (y + y / 4 - y / 100 + y / 400 + t[m - 1] + d) % 7;\n}\n</code></pre>\n\n<p>I would really appreaciate a help.\nThank you</p>\n"}, {"tags": ["c", "memory", "memory-leaks", "valgrind", "cs50"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577330272, "post_id": 59480758, "comment_id": 105142938, "body": "the posted code causes the compiler to output warnings about unexpected conversions between <code>int</code> and <code>unsigned int</code>  Suggest correcting the code.  When compiling, always enable the warnings, then fix those warnings.  ( for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -pedantic -std=gnu11</code> )  Note: other compilers use different options to produce the same results"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577330991, "post_id": 59480758, "comment_id": 105143033, "body": "the function: <code>load()</code> is never called in the posted code!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577331531, "post_id": 59480758, "comment_id": 105143087, "body": "OT:  regarding: <code>#include &lt;strings.h&gt;</code>  None of the contents of this header file are being used in the posted code.  It is a very poor programming practice to include header files that are not used. Suggest removing the statement"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577331721, "post_id": 59480758, "comment_id": 105143105, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem and help you debug it"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577331760, "post_id": 59480758, "comment_id": 105143115, "body": "Please post the contents of <code>dictionary.h</code>"}, {"owner": {"reputation": 33, "user_id": 12002033, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAMyjS51fM1VujjsSHfy6M-_kfc7MR_4BnBUKa0UQ=k-s128", "display_name": "Mufaddal Hakim", "link": "https://stackoverflow.com/users/12002033/mufaddal-hakim"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577339265, "post_id": 59480758, "comment_id": 105144262, "body": "@user3629249 strcasecmp() is used which belongs to strings.h header file. Also these functions are called in another file called speller.c. dictionary.h only contains the prototypes of these functions."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577384419, "post_id": 59480758, "comment_id": 105158338, "body": "the header file: <code>strings.h</code> is already included by one of the other header files that are being include."}], "answers": [{"tags": [], "owner": {"reputation": 4475, "user_id": 5577076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qG4gB.png?s=128&g=1", "display_name": "DinoCoderSaurus", "link": "https://stackoverflow.com/users/5577076/dinocodersaurus"}, "is_accepted": true, "score": 0, "last_activity_date": 1577333023, "creation_date": 1577333023, "answer_id": 59483715, "question_id": 59480758, "link": "https://stackoverflow.com/questions/59480758/cs50-pset4-cant-free-memory-in-speller/59483715#59483715", "title": "CS50 PSET4 Cant free memory in speller", "body": "<p>Use debug50 with a breakpoint at this line <code>for (int i = 0; i &gt; 26; i++)</code> in unload and step through. What just happened??? There's a typo in the line. Hover below for spoiler.</p>\n\n<blockquote class=\"spoiler\">\n  <p> The loop never process because <code>i</code> is initialized to 0 and <code>i &gt; 26</code> is false</p>\n</blockquote>\n"}], "owner": {"reputation": 33, "user_id": 12002033, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAMyjS51fM1VujjsSHfy6M-_kfc7MR_4BnBUKa0UQ=k-s128", "display_name": "Mufaddal Hakim", "link": "https://stackoverflow.com/users/12002033/mufaddal-hakim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 59483715, "answer_count": 1, "score": 0, "last_activity_date": 1577333023, "creation_date": 1577296793, "question_id": 59480758, "link": "https://stackoverflow.com/questions/59480758/cs50-pset4-cant-free-memory-in-speller", "title": "CS50 PSET4 Cant free memory in speller", "body": "<p>My code works perfectly but valgrind shows that memory allocated to ALL the nodes is still reachable. This causes in failed memory leak test by check50.\nHere's what valgrind shows-</p>\n\n<p>HEAP SUMMARY:<br>\n==14338==   in use at exit: 8,013,096 bytes in 143,091 blocks<br>\n==14338==   total heap usage: 143,096 allocs, 5 frees, 8,023,416 bytes allocated<br>\n            8,013,096 bytes in 143,091 blocks are still reachable in loss record 1 of 1</p>\n\n<p>here's my code-</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;strings.h&gt;\n\n#include \"dictionary.h\"\n\n// Represents number of buckets in a hash table\n#define N 26\n\n// Represents a node in a hash table\ntypedef struct node\n{\n    char word[LENGTH + 1];\n    struct node *next;\n}\nnode;\n\n// Represents a hash table\nnode *hashtable[N];\n\n//to count no. of words in the dictionary\nint count = 0;\n\n// Hashes word to a number between 0 and 25, inclusive, based on its first letter\nunsigned int hash(const char *word)\n{\n    return tolower(word[0]) - 'a';\n}\n\n// Loads dictionary into memory, returning true if successful else false\nbool load(const char *dictionary)\n{\n    // Initialize hash table\n    for (int i = 0; i &lt; N; i++)\n    {\n        hashtable[i] = NULL;\n    }\n\n    // Open dictionary\n    FILE *file = fopen(dictionary, \"r\");\n    if (file == NULL)\n    {\n        unload();\n        return false;\n    }\n\n    // Buffer for a word\n    char word[LENGTH + 1];\n\n    // Insert words into hash table\n    while (fscanf(file, \"%s\", word) != EOF)\n    {\n        // TODO\n\n        //create a new node\n        node *newnode = (node *)malloc(sizeof(node));\n\n        //check if new node is allocated memory successsfully\n        if (newnode == NULL)\n        {\n            unload();\n            return false;\n        }\n\n        //copy word from dictionary to new node\n        //newnode-&gt;word = word; (X) why?\n        strcpy(newnode-&gt;word, word);\n\n        //hash the word\n        int n = hash(word);\n\n        //add node to the correct bucket\n        newnode-&gt;next = hashtable[n];\n        hashtable[n] = newnode;\n\n        count++;\n\n    }\n\n    // Close dictionary\n    fclose(file);\n\n    // Indicate success\n    return true;\n}\n\n// Returns number of words in dictionary if loaded else 0 if not yet loaded\nunsigned int size(void)\n{\n    // TODO\n    return count;\n}\n\n// Returns true if word is in dictionary else false\nbool check(const char *word)\n{\n    // TODO\n\n    //hash the word to find its bucket\n    int n = hash(word);\n\n    //traverse through the bucket\n    node *temp = hashtable[n];\n    while (temp != NULL)\n    {\n        if (strcasecmp(temp-&gt;word, word) == 0)\n        {\n            return true;\n        }\n        temp = temp-&gt;next;\n    }\n\n    return false;\n}\n\n// Unloads dictionary from memory, returning true if successful else false\nbool unload(void)\n{\n    // TODO\n\n    node *cursor;\n\n    for (int i = 0; i &gt; 26; i++)\n    {\n        cursor = hashtable[i];\n        while (cursor != NULL)\n        {\n            node *temp = cursor;\n            cursor = cursor-&gt;next;\n            free(temp);\n        }\n    }\n\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1577297476, "post_id": 59480706, "comment_id": 105138325, "body": "You have forgotten to allocate space for the terminal null byte on the cipher text string."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 12596655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3003801470e075d0195572053f61c2b1?s=128&d=identicon&r=PG&f=1", "display_name": "lucidcloud", "link": "https://stackoverflow.com/users/12596655/lucidcloud"}, "edited": false, "score": 0, "creation_date": 1577325663, "post_id": 59480734, "comment_id": 105142437, "body": "I don&#39;t quite understand. Do you mean that I cannot change m[i] after I use strcpy to copy the contents of a string to m? If so, how can I ensure that I can use a character array to encode plaintext? Thank you for your previous help by the way."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577330830, "post_id": 59480734, "comment_id": 105143011, "body": "You calculate <code>letter</code> but print <code>m[i]</code>"}, {"owner": {"reputation": 35, "user_id": 12596655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3003801470e075d0195572053f61c2b1?s=128&d=identicon&r=PG&f=1", "display_name": "lucidcloud", "link": "https://stackoverflow.com/users/12596655/lucidcloud"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577334122, "post_id": 59480734, "comment_id": 105143398, "body": "@stark Thank you so much!! The program now runs perfectly after I made the changes corresponding to your comment."}], "tags": [], "owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "is_accepted": true, "score": 1, "last_activity_date": 1577296529, "creation_date": 1577296529, "answer_id": 59480734, "question_id": 59480706, "link": "https://stackoverflow.com/questions/59480706/why-doesnt-my-caesar-cipher-program-work-according-to-my-code-the-code-compile/59480734#59480734", "title": "Why doesn&#39;t my Caesar Cipher program work according to my code? The code compiles, but does not encipher plaintext", "body": "<p><code>m</code> is never changed after the plaintext is read into it. I suggest taking a closer look at the order of your assignments.</p>\n"}], "owner": {"reputation": 35, "user_id": 12596655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3003801470e075d0195572053f61c2b1?s=128&d=identicon&r=PG&f=1", "display_name": "lucidcloud", "link": "https://stackoverflow.com/users/12596655/lucidcloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 59480734, "answer_count": 1, "score": 1, "last_activity_date": 1577297519, "creation_date": 1577296253, "last_edit_date": 1577297519, "question_id": 59480706, "link": "https://stackoverflow.com/questions/59480706/why-doesnt-my-caesar-cipher-program-work-according-to-my-code-the-code-compile", "title": "Why doesn&#39;t my Caesar Cipher program work according to my code? The code compiles, but does not encipher plaintext", "body": "<p>I am curious why this code compiles correctly but only returns the plaintext taken from the user. It does not encipher the plaintext even though the algorithm in the code states so.</p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void)\n{\n    string message=get_string(\"Enter a message to encrypt: \\n\");\n    int key=get_int(\"Enter a key to encrypt the message: \\n\");\n    char m[strlen(message)];\n    strcpy(m, message);\n    for(int i=0; i&lt;strlen(message); i++)\n    {\n        char letter=m[i];\n        if(isalpha(m[i])||isupper(m[i])||islower(m[i]))\n        {\n            if(letter&gt;='a'&amp;&amp;letter&lt;='z')\n            {\n                letter=letter+key;\n                if(letter&gt;'z')\n                {\n                    letter=letter-'z'+'a'-1;\n                    letter=m[i];\n                }\n                letter=m[i];\n            }\n            else if(letter&gt;='A'&amp;&amp;letter&lt;='Z')\n            {\n                letter=letter+key;\n                if(letter&gt;'Z')\n                {\n                    letter=letter-'Z'+'A'-1;\n                    letter=m[i];\n                }\n                letter=m[i];\n            }\n        }\n        printf(\"%c\", m[i]);\n    }\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "variables", "scope", "linkage"], "comments": [{"owner": {"reputation": 1692, "user_id": 12433504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a21f48cc9b08d6adf0005669d9955?s=128&d=identicon&r=PG", "display_name": "VillageTech", "link": "https://stackoverflow.com/users/12433504/villagetech"}, "edited": false, "score": 1, "creation_date": 1577296109, "post_id": 59480672, "comment_id": 105138036, "body": "Exactly - only globals can be externals."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1692, "user_id": 12433504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a21f48cc9b08d6adf0005669d9955?s=128&d=identicon&r=PG", "display_name": "VillageTech", "link": "https://stackoverflow.com/users/12433504/villagetech"}, "edited": false, "score": 1, "creation_date": 1577309729, "post_id": 59480672, "comment_id": 105140417, "body": "@VillageTech: Identifiers with local (block) scope can have external linkage. For example, with <code>#include &lt;stdio.h&gt;</code> / <code>int a = 0; int main(void) { extern void foo(void); foo(); printf(&quot;%d\\n&quot;, a); }</code> in one source file and <code>void foo(void) { extern int a; a = 4; }</code>, the program will compile and print \u201c4\u201d. The definition must be a file scope, but the declaration may be inside a block."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1577297216, "last_edit_date": 1577297216, "creation_date": 1577296088, "answer_id": 59480688, "question_id": 59480672, "link": "https://stackoverflow.com/questions/59480672/defining-an-extern-variable-in-a-fucntion/59480688#59480688", "title": "defining an extern variable in a fucntion", "body": "<p>The internal or external linkage may have only variables that have a file scope.</p>\n\n<p>In your first example</p>\n\n<pre><code>void init()\n{\n    int a = 1;\n}\n</code></pre>\n\n<p>the variable a has a block scope and hence does not have a linkage.</p>\n\n<p>In the header</p>\n\n<pre><code>extern int a\n</code></pre>\n\n<p>there is declared a variable with external linkage that has the file scope. But it was not defined. So the linker issues an error because it can not find the variable definition. </p>\n\n<p>You may declare a block scope variable with the extern specifier. But it will not be a variable definition. The declaration will refer to a variable with a linkage declared in a file scope.</p>\n\n<p>For example consider the following demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint x = 10;\n\nvoid f( void )\n{\n    extern int x;\n\n    printf( \"x = %d\\n\", x );\n}\n\nint main(void) \n{\n    f();\n\n    x = 20;\n\n    f();\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>x = 10\nx = 20\n</code></pre>\n\n<p>That is there is defined the file scope variable <code>x</code> with the external linkage. And within the outer block scope of the function <code>f</code> the declaration of the variable <code>x</code> refers to the variable <code>x</code> in the file scope. It does not define a new object.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12593879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1577296495, "answer_count": 1, "score": 1, "last_activity_date": 1577297246, "creation_date": 1577295883, "last_edit_date": 1577297246, "question_id": 59480672, "link": "https://stackoverflow.com/questions/59480672/defining-an-extern-variable-in-a-fucntion", "closed_reason": "Duplicate", "title": "defining an extern variable in a fucntion", "body": "<p>Assume the following:</p>\n\n<p>test1.h</p>\n\n<pre><code>extern int a;\nvoid init();\n</code></pre>\n\n<p>test1.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"test1.h\"\n\nint main()\n{\n    init();\n    printf(\"%d\\n\", a);\n    return 0;\n}\n</code></pre>\n\n<p>test2.c</p>\n\n<pre><code>#include \"test1.h\"\n\nvoid init()\n{\n    int a = 1;\n}\n</code></pre>\n\n<p>Above will give me a <code>linker error</code> saying <code>a</code> isn't defined, but it is defined under <code>init()</code>.\nHowever, if I change <code>test2.c</code> like this then it will work:</p>\n\n<pre><code>int a = 1;\nvoid init()\n{\n    //\n}\n</code></pre>\n\n<p>Does extern have to be defined globally only?</p>\n"}, {"tags": ["c", "linux", "symbols", "debug-symbols", "ldd"], "comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1577296316, "post_id": 59480646, "comment_id": 105138075, "body": "It&#39;s not clear what you are trying to do, or in what circumstance.  You might not be aware, but a program is not truly deleted while it is still in use - the directory entry may be gone, but /proc/self/exe still points to the actual file contents, which will not be deleted until the program exits.   Regardless of that, have you determined that dladdr() will not meet your need?  If not, you will likely need to provide more details of your goal."}, {"owner": {"reputation": 603, "user_id": 2625346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee31fca82dd2895bc5eb68ead5f973e?s=128&d=identicon&r=PG", "display_name": "Ivan Baidakou", "link": "https://stackoverflow.com/users/2625346/ivan-baidakou"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1577298251, "post_id": 59480646, "comment_id": 105138486, "body": "<code>dladdr()</code> resolves <i>dynamic</i> symbols. It is mentioned, that I still need to resolve <i>static</i> symbols, i.e. those, which are missing in the .so; for example C++ inlined function (compiled with -O2 -g).  Another example is <code>static void my_fn()</code> inside <code>.cpp</code> which is not dynamic symbol.   What I need to to is to lazily print full available stack trace, like <code>bt</code> command in <code>gdb</code>.  OK, the <code>&#47;proc&#47;self&#47;exe</code> is not deleted, but how about loaded <code>.so</code> files? How can I get them on the running program, if they where deleted?"}], "answers": [{"tags": [], "owner": {"reputation": 603, "user_id": 2625346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee31fca82dd2895bc5eb68ead5f973e?s=128&d=identicon&r=PG", "display_name": "Ivan Baidakou", "link": "https://stackoverflow.com/users/2625346/ivan-baidakou"}, "is_accepted": true, "score": 0, "last_activity_date": 1578918085, "creation_date": 1578918085, "answer_id": 59716585, "question_id": 59480646, "link": "https://stackoverflow.com/questions/59480646/read-debug-static-symbols-when-on-own-process-on-linux-without-disk-i-o-in-c-lin/59716585#59716585", "title": "read debug/static symbols when on own process on linux without disk I/O in C/Linux?", "body": "<p>The static/debug symbols in ELF-files are encoded in <code>DWARF</code>-format. They can be discovered via analyzing debug information. However, all <code>.debug_*</code> sections seems are simply <strong>not loaded</strong> by Operating system (<a href=\"https://help.backtrace.io/en/articles/1716990-dwarf\" rel=\"nofollow noreferrer\">see</a>), because they are quite big and useless for the program execution (they become useful only when program is debugged). </p>\n\n<p>So, the answer is: when debug symbols are needed the executable have to be read from disk via own forces.</p>\n"}], "owner": {"reputation": 603, "user_id": 2625346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee31fca82dd2895bc5eb68ead5f973e?s=128&d=identicon&r=PG", "display_name": "Ivan Baidakou", "link": "https://stackoverflow.com/users/2625346/ivan-baidakou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59716585, "answer_count": 1, "score": -1, "last_activity_date": 1578918085, "creation_date": 1577295695, "last_edit_date": 1577303194, "question_id": 59480646, "link": "https://stackoverflow.com/questions/59480646/read-debug-static-symbols-when-on-own-process-on-linux-without-disk-i-o-in-c-lin", "title": "read debug/static symbols when on own process on linux without disk I/O in C/Linux?", "body": "<p>Is it possible to read own symbol name by it's address using some API, when we assume that the whole program (and all related .so-files) has been deleted ?  </p>\n\n<p>I found some pieces how to get this information using <code>objdump</code>, <code>readelf</code>, <code>nm</code> etc., but are not an option. </p>\n\n<p>What I'd like to have is a function <code>string get_symbol_at(uint64_t addr)</code>.</p>\n"}, {"tags": ["c", "elf", "segment", "fseek"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1577295036, "post_id": 59480513, "comment_id": 105137838, "body": "1024 is literally the same as 0x000400, and 32768 is the exact same as 0x00008000. You should just convert your numbers to hexadecimal."}], "answers": [{"comments": [{"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 1, "creation_date": 1577295367, "post_id": 59480587, "comment_id": 105137894, "body": "If the leading <code>0x</code> is a must, you can also use <code>%#x</code> as the format specifier."}], "tags": [], "owner": {"reputation": 1692, "user_id": 12433504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a21f48cc9b08d6adf0005669d9955?s=128&d=identicon&r=PG", "display_name": "VillageTech", "link": "https://stackoverflow.com/users/12433504/villagetech"}, "is_accepted": true, "score": 1, "last_activity_date": 1577295096, "creation_date": 1577295096, "answer_id": 59480587, "question_id": 59480513, "link": "https://stackoverflow.com/questions/59480513/trouble-reading-one-segment-from-a-elf-file-in-c/59480587#59480587", "title": "Trouble reading one segment from a .ELF file in C", "body": "<p>Everything is ok: 1024 in decimal notation is equal to 0x400 in hexadecimal notation, and 0x8000 is equal to 32768.</p>\n\n<p>Anyway, if you need to have results in hexadecimal notation, use <code>%x</code> format instead of <code>%d</code>:</p>\n\n<pre><code>printf(\"\\n%x\",segment.p_offset);\nprintf(\"\\n\");\nprintf(\"pyshical address: \");\nprintf(\"%x\",segment.p_paddr);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12281727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCgHidY8OOPaJtD6K_NlsTazmcgF14zmk26wrx81g=k-s128", "display_name": "V&#237;ctor Cano", "link": "https://stackoverflow.com/users/12281727/v%c3%adctor-cano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 59480587, "answer_count": 1, "score": -1, "last_activity_date": 1577295096, "creation_date": 1577294496, "question_id": 59480513, "link": "https://stackoverflow.com/questions/59480513/trouble-reading-one-segment-from-a-elf-file-in-c", "title": "Trouble reading one segment from a .ELF file in C", "body": "<p>I'm trying to read an ELF file to acces to the one segment it has. So far I've read the header of the file and it shows that the offset of the segment section starts 52 bytes from the beggining of the file (header.e_phoff) so I've tried using fseek(fitxer, header.e_phoff, SEEK_SET ); but then when I read the segment and print it it shows that the offset of the header is 1024 and the pyshical addres is 32768 when they should be  0x000400 and 0x00008000 respectively.</p>\n\n<pre><code>FILE* fitxer = fopen(string,\"rb\");\n        if(fitxer)\n        {\n            fread(&amp;header, 1, sizeof(header), fitxer);\n            fseek(fitxer, header.e_phoff, SEEK_SET );\n            fread(&amp;segment, 1, sizeof(segment), fitxer);\n        }\n        fclose(fitxer);\nprintf(\"offset: \");\n    printf(\"\\n%d\",segment.p_offset);\n    printf(\"\\n\");\n    printf(\"pyshical address: \");\n    printf(\"%d\",segment.p_paddr);\n    printf(\"\\n\");\n</code></pre>\n\n<p>What am I doing wrong? </p>\n\n<pre><code>$ arm-none-eabi-readelf -l HOLA.elf\nElf file type is EXEC (Executable file)\nEntry point 0x8000\nThere are 1 program headers, starting at offset 52\nProgram Headers:\n Type Offset VirtAddr PhysAddr FileSiz MemSiz Flg Align\n LOAD 0x000400 0x00008000 0x00008000 0x0019f 0x0019f R E 0x400\n Section to Segment mapping:\n Segment Sections...\n 00 .text .rodata\n```\n</code></pre>\n"}, {"tags": ["c", "loops", "while-loop"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1577294415, "post_id": 59480333, "comment_id": 105137731, "body": "Neither <code>if</code> nor <code>while</code> is a function, and similarly for other keywords, including <code>switch</code>, <code>for</code>, <code>return</code> and even<code>sizeof</code>."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577296220, "post_id": 59480333, "comment_id": 105138057, "body": "If there are multiple instances where <code>fs&gt;gained[value].var1[i].m_mode_max[p] &gt; 0</code> does that count once or multiple times?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577296862, "post_id": 59480333, "comment_id": 105138187, "body": "Why do you want to use a <code>while</code> here? An <code>if</code> inside a <code>for</code> is appropriate."}, {"owner": {"reputation": 35, "user_id": 9848445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac259c3f8b6585f8313f7e9c053eccaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9848445/gabriel"}, "edited": false, "score": 0, "creation_date": 1577297063, "post_id": 59480333, "comment_id": 105138232, "body": "just to learn to use all possibilities. so I said at the end that I could use the if condition I wanted to know more about while"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9848445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac259c3f8b6585f8313f7e9c053eccaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9848445/gabriel"}, "edited": false, "score": 0, "creation_date": 1577294330, "post_id": 59480357, "comment_id": 105137716, "body": "Is it necessary to check while p &lt;= 10 to avoid problems? example <code>while (p &lt;= 10 &amp;&amp; fs&gt;gained[value].var1[i].m_mode_max[p] &gt; 0)</code>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 35, "user_id": 9848445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac259c3f8b6585f8313f7e9c053eccaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9848445/gabriel"}, "edited": false, "score": 1, "creation_date": 1577294566, "post_id": 59480357, "comment_id": 105137762, "body": "Yes, @Sombra, that is a very good idea in this specific instance :) though it should be <code>while (p &lt; 10 &amp;&amp; ...)</code>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577296070, "post_id": 59480357, "comment_id": 105138027, "body": "Isn&#39;t this redundant with the <code>for</code> loop that&#39;s already iterating over <code>p</code>? Should they be combined?"}, {"owner": {"reputation": 35, "user_id": 9848445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac259c3f8b6585f8313f7e9c053eccaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9848445/gabriel"}, "edited": false, "score": 0, "creation_date": 1577296633, "post_id": 59480357, "comment_id": 105138141, "body": "<code>for</code> must be removed because inside while has <code>p++</code>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577297219, "post_id": 59480357, "comment_id": 105138267, "body": "@pmg Does <code>while (p &lt; 10 &amp;&amp; fs-&gt;gained[value].var1[i].m_mode_max[p] &gt; 0)</code> work? The loop will exit as soon as <code>fs-&gt;gained[value].var1[i].m_mode_max[p] &lt;= 0</code>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577297414, "post_id": 59480357, "comment_id": 105138312, "body": "@Schwern: I meant those <code>...</code> as the code posted by Sombra (it&#39;s kinda hard doing copy/paste on mobile phone)"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577297679, "post_id": 59480357, "comment_id": 105138366, "body": "@pmg I understand. Maybe there&#39;s a misunderstanding about what&#39;s being counted. Consider the simplified <code>int foo[] = {0, 0, 23, 42};</code> and <code>while(i &lt; 4 &amp;&amp; foo[i] &gt; 0) { count++; i++ }</code>. The loop will exit on the first iteration and <code>count</code> will never be incremented. <code>int foo[] = {99, 0, 0, 23, 42};</code> will have a count of 1, should be 3. <code>int foo[] = {99, 98, 0, 0, 23, 42};</code> will count 2 not 4."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577297847, "post_id": 59480357, "comment_id": 105138404, "body": "Ah! I was just trying to prevent access beyond array boundary; didn&#39;t even think about other situations."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 0, "last_activity_date": 1577293202, "creation_date": 1577293202, "answer_id": 59480357, "question_id": 59480333, "link": "https://stackoverflow.com/questions/59480333/while-function-not-returning-count-correctly/59480357#59480357", "title": "while function not returning count correctly", "body": "<p>You need to change the value of the condition inside the while</p>\n\n<pre><code>while (&lt;SOMETHING&gt; &gt; 0) {\n    // change the value of &lt;SOMETHING&gt;, otherwise\n    // you get an infinite loop\n}\n</code></pre>\n\n<p>In your case, maybe something like</p>\n\n<pre><code>        while (fs&gt;gained[value].var1[i].m_mode_max[p] &gt; 0) {\n            count++;                     // does not change fs&gt;gained[value].var1[i].m_mode_max[p]\n            printf(\"count %d\\n\", count); // does not change fs&gt;gained[value].var1[i].m_mode_max[p]\n            p++;                         // &lt;== change fs&gt;gained[value].var1[i].m_mode_max[p]\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1577297035, "last_edit_date": 1577297035, "creation_date": 1577293406, "answer_id": 59480382, "question_id": 59480333, "link": "https://stackoverflow.com/questions/59480333/while-function-not-returning-count-correctly/59480382#59480382", "title": "while function not returning count correctly", "body": "<p>You're already looping over <code>i</code> and <code>p</code> to iterate through the structure. You need an <code>if</code> to decide to increment the counter.</p>\n\n<p>The problem is you're printing the count every time its incremented. Perhaps you should only print it when the loop is complete?</p>\n\n<pre><code>for (int i = 0; i &lt; 5; i++) {\n    int count = 0;\n    for (int p = 0; p &lt; 10; p++) {\n        // Typo fix: fs&gt;gained to fs-&gt;gained\n        if (fs-&gt;gained[value].var1[i].m_mode_max[p] &gt; 0) {\n            count++;\n        }\n    }\n    printf(\"i: %d, count: %d\\n\", i, count);\n}\n</code></pre>\n\n<p>If the intent is to count an m_mode_max only once, you can add a <code>break</code> to exit the <code>p</code> loop once its been counted.</p>\n\n<pre><code>for (int i = 0; i &lt; 5; i++) {\n    int count = 0;\n    for (int p = 0; p &lt; 10; p++) {\n        // Typo fix: fs&gt;gained to fs-&gt;gained\n        if (fs-&gt;gained[value].var1[i].m_mode_max[p] &gt; 0) {\n            count++;\n            break;\n        }\n    }\n    printf(\"i: %d, count: %d\\n\", i, count);\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9848445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac259c3f8b6585f8313f7e9c053eccaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9848445/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 59480357, "answer_count": 2, "score": 0, "last_activity_date": 1577298129, "creation_date": 1577292999, "last_edit_date": 1577298129, "question_id": 59480333, "link": "https://stackoverflow.com/questions/59480333/while-function-not-returning-count-correctly", "title": "while function not returning count correctly", "body": "<p>I am trying to use the while function to count one of my pointers is greater than 0.</p>\n\n<p>What I need is to count the amount that returned me value above 0.</p>\n\n<p>Below the code of the part I use while:</p>\n\n<pre><code>struct mode {\n    int m_mode_max[10];\n    ...\n}\n\nstruct gained_var {\n    struct mode var1[10];\n    ...\n}\n\nstruct fs_session {\n    struct gained_var gained[5];\n    ...\n}\n\nvoid frist_gained(struct fs_session *fs, int value) {\n\n    struct itv_expanse itv[5];\n    memset(itv, 0, sizeof(itv));\n\n    for (int i = 0; i &lt; 5; i++) {\n        int count = 0;\n        for (int p = 0; p &lt; 10; p++) {\n            while (fs&gt;gained[value].var1[i].m_mode_max[p] &gt; 0) {\n                count++;\n                printf(\"count %d\\n\", count);\n            }\n        }\n    }\n\n    itv[value].var1[i].m_mode = fs&gt;gained[value].var1[i].m_mode_max[rand()%count];\n    printf(\"m_mode %d rnd_value %d\\n\", itv[value].var1[i].m_mode, rnd()%count);\n}\n</code></pre>\n\n<p>I could use an if function to check count, but I want to use While</p>\n\n<p>What is the best way to do this using while function?</p>\n"}, {"tags": ["c", "string", "sorting", "c-strings", "alphabetical"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1577296654, "post_id": 59480329, "comment_id": 105138145, "body": "<a href=\"https://en.wikipedia.org/wiki/Morris_worm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Morris_worm</a>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1577296742, "post_id": 59480329, "comment_id": 105138167, "body": "BTW: The function you want is <code>strcasecmp()</code>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1577298594, "post_id": 59480329, "comment_id": 105138568, "body": "Do not use <code>gets</code>.  Ever.  <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\" title=\"why is the gets function so dangerous that it should not be used\">stackoverflow.com/questions/1694036/&hellip;</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1577439701, "post_id": 59480329, "comment_id": 105170309, "body": "<code>strcpy(temp, str[i]); strcpy(str[i], str[j]); strcpy(str[j], temp);</code> this is a bad way to sort strings. You just need to sort their pointers to avoid copying their contents"}], "answers": [{"tags": [], "owner": {"reputation": 1325, "user_id": 12447766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8u4KF2jS0Fk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQ51MyoIeOHM14pz1QnUu7L-8N_Q/photo.jpg?sz=128", "display_name": "Burak", "link": "https://stackoverflow.com/users/12447766/burak"}, "is_accepted": false, "score": -1, "last_activity_date": 1577296277, "creation_date": 1577296277, "answer_id": 59480709, "question_id": 59480329, "link": "https://stackoverflow.com/questions/59480329/c-program-sort-strings-in-alphabetical-order/59480709#59480709", "title": "C program sort strings in alphabetical order", "body": "<p>What is wrong here is that you directly use <code>strcmp</code> without changing the first letter. Even the last letter <code>'Z'</code> comes before <code>'a'</code> because of that. The following code changes the first letters to uppercase, then compares the strings, then changes the strings to their original state.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nbool islower(char c) {\n    return ('a' &lt;= c) &amp;&amp; (c &lt;= 'z');\n}\nvoid makeupper(char&amp; c) {\n    c = c - 'a' + 'A';\n}\nvoid makelower(char&amp; c) {\n    c = c - 'A' + 'a';\n}\nint main() {\n    int i=0, j=0, count;\n    char str[25][25], temp[25];\n    while (1) {\n        scanf(\"%s\", str[i]);\n        if(str[i][0]=='0')\n            break;\n        i++;\n        j++;\n    }\n    count=i;\n    // beware for loop conditions\n    for(i=0; i&lt;count-1; i++)\n        for(j=i+1; j&lt;count; j++) {\n            bool lower1 = islower(str[i][0]);\n            bool lower2 = islower(str[j][0]);\n            if (lower1)\n                makeupper(str[i][0]);\n            if (lower2)\n                makeupper(str[j][0]);\n            // swap the strings under these conditions\n            if (((strcmp(str[i], str[j]) == 0) &amp;&amp; lower1 &amp;&amp; !lower2) // string are equal but first string's first letter was lowercase and second string's first letter was uppercase\n                    || (strcmp(str[i], str[j]) &gt; 0)) { // second string comes alphabetically first\n                strcpy(temp, str[i]);\n                strcpy(str[i], str[j]);\n                strcpy(str[j], temp);\n                // undo changes\n                if(lower1)\n                    makelower(str[j][0]);\n                if(lower2)\n                    makelower(str[i][0]);\n            }\n            else { // undo changes\n                if (lower1)\n                    makelower(str[i][0]);\n                if (lower2)\n                    makelower(str[j][0]);\n            }\n        }\n    for(i=0; i&lt;count; i++)\n        printf(\"%s \", str[i]);\n    return 0;\n}\n</code></pre>\n\n<p>This code only fixes the first letter but it does not check for the second letter. You can do a similar trick by changing <code>lower1</code> and <code>lower2</code> as bool arrays, and the rest of the code accordingly.</p>\n"}, {"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1577367268, "post_id": 59480774, "comment_id": 105152731, "body": "That is a lot of complexity just to avoid stdlib functions..."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1577367501, "post_id": 59480774, "comment_id": 105152820, "body": "@wildplasser: and I didn&#39;t even (YET!) implement all of the functionality required by OP!! OP wants <code>&quot;Ggxx&quot;</code> to sort before <code>&quot;Ggdddddd&quot;</code> becuase it&#39;s shorter and the first two characters are equal :)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1577367702, "post_id": 59480774, "comment_id": 105152892, "body": "Huh? Because it is shorter? I resign!"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1577368223, "post_id": 59480774, "comment_id": 105153090, "body": "LOL Don&#39;t resign: it&#39;s a fun project to &quot;reinvent the [square] wheel&quot; :)"}, {"owner": {"reputation": 1793, "user_id": 12330258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SczMJ.jpg?s=128&g=1", "display_name": "hanie", "link": "https://stackoverflow.com/users/12330258/hanie"}, "edited": false, "score": 0, "creation_date": 1577434766, "post_id": 59480774, "comment_id": 105168778, "body": "@pmg:it&#39;s working great but I have a question what can I do so the function return one char sooner than two, like char a being printed before aa?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577438771, "post_id": 59480774, "comment_id": 105170006, "body": "I missed that, code above updated new fork in ideone. Just needed to check if <code>a[1]</code> or <code>b[1]</code> is the <code>&#39;\\0&#39;</code> terminator."}, {"owner": {"reputation": 1793, "user_id": 12330258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SczMJ.jpg?s=128&g=1", "display_name": "hanie", "link": "https://stackoverflow.com/users/12330258/hanie"}, "edited": false, "score": 0, "creation_date": 1577477377, "post_id": 59480774, "comment_id": 105183615, "body": "@pmg: thanks for your help I actually wanted to write function  by myself not using functions in libraries.I have a question ,is the function in library similar to this one?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1577520273, "post_id": 59480774, "comment_id": 105190525, "body": "Do you mean <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/strcmp.html\" rel=\"nofollow noreferrer\"><code>strcmp()</code></a>, <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/strncmp.html\" rel=\"nofollow noreferrer\"><code>strncmp()</code></a> and/or <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/strcasecmp.html\" rel=\"nofollow noreferrer\"><code>str[n]casecmp()</code></a>? Yes, they&#39;re similar, and they&#39;re the ones used most often. Your requirement of <code>&quot;ggx&quot;</code> sorting before <code>&quot;ggddd&quot;</code> because it&#39;s shorter means there is no library function that does exactly what you want. You can use the existing functions for an approximation (like in @wildplasser answer) or do it from scratch."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 1, "last_activity_date": 1577438806, "last_edit_date": 1577438806, "creation_date": 1577296855, "answer_id": 59480774, "question_id": 59480329, "link": "https://stackoverflow.com/questions/59480329/c-program-sort-strings-in-alphabetical-order/59480774#59480774", "title": "C program sort strings in alphabetical order", "body": "<p>You need a \"new\" <code>strcmp()</code> tailored to your specific needs:</p>\n\n<pre><code>enum /*untagged*/ { AbeforeB = -1, AequalsB = 0, AafterB = 1 };\n\nint tailored_strcmp(const char *a, const char *b) {\n    static char baseorder[] = \"AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz\";\n    //if a or b is the empty string\n    if (*a == 0) return AbeforeB;\n    if (*b == 0) return AafterB;\n    int lena = strlen(a);\n    int lenb = strlen(b);\n    char *pa = strchr(baseorder, *a);\n    char *pb = strchr(baseorder, *b);\n    if (pa == NULL) return lena &lt; lenb ? AbeforeB : AafterB;\n    if (pb == NULL) return lena &lt; lenb ? AbeforeB : AafterB;\n    if (pa == pb) {\n        //need to check second letter\n        if (a[1] == 0) return AbeforeB;\n        if (b[1] == 0) return AafterB;\n        char *ppa = strchr(baseorder, a[1]);\n        char *ppb = strchr(baseorder, b[1]);\n        if (ppa == NULL) return lena &lt; lenb ? AbeforeB : AafterB;\n        if (ppb == NULL) return lena &lt; lenb ? AbeforeB : AafterB;\n        if (ppa == ppb) return lena &lt; lenb ? AbeforeB : AafterB;\n        return ppa &lt; ppb ? AbeforeB : AafterB;\n    }\n    return pa &lt; pb ? AbeforeB : AafterB;\n}\n</code></pre>\n\n<p>See <s><a href=\"https://ideone.com/9oC4YW\" rel=\"nofollow noreferrer\">version running at ideone</a>, or <a href=\"https://ideone.com/tuiVPz\" rel=\"nofollow noreferrer\">version with improved adherence to requirements</a> or</s> <a href=\"https://ideone.com/JYEN4L\" rel=\"nofollow noreferrer\">version checking 1-length strings</a></p>\n"}, {"comments": [{"owner": {"reputation": 1793, "user_id": 12330258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SczMJ.jpg?s=128&g=1", "display_name": "hanie", "link": "https://stackoverflow.com/users/12330258/hanie"}, "edited": false, "score": 0, "creation_date": 1577477989, "post_id": 59480848, "comment_id": 105183795, "body": "well it was a great suggestion to use this function,thanks ,but  when I run your code in visual stdio it won&#39;t work due not understanding strcasecmp function ,do you have in idea why?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 1793, "user_id": 12330258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SczMJ.jpg?s=128&g=1", "display_name": "hanie", "link": "https://stackoverflow.com/users/12330258/hanie"}, "edited": false, "score": 0, "creation_date": 1577484844, "post_id": 59480848, "comment_id": 105185624, "body": "Maybe because Microsoft hates C? (IOW: dump it. It is beyond repair) BTW: there was a thing 20 years ago: you had to include <code>&lt;strings.h&gt;</code>, too. Maybe they forgot?"}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 1, "last_activity_date": 1577370313, "last_edit_date": 1577370313, "creation_date": 1577297589, "answer_id": 59480848, "question_id": 59480329, "link": "https://stackoverflow.com/questions/59480329/c-program-sort-strings-in-alphabetical-order/59480848#59480848", "title": "C program sort strings in alphabetical order", "body": "<ul>\n<li>Dont use gets() <a href=\"https://en.wikipedia.org/wiki/Morris_worm\" rel=\"nofollow noreferrer\">The Morris worm was 30 years ago, and gets() has been removed from the stdlib</a></li>\n<li>there is a function in the standard library that does exactly what you want : <code>strcasecmp()</code></li>\n<li>array indexes start at one and end <em>before</em> count; the last valid index is <code>count-1</code></li>\n</ul>\n\n<hr>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main(void){\n   int i=0,j=0,count;\n   char str[25][25],temp[25];\n\n   for (i=0; i &lt; 25; i++) {\n       if (!fgets(str[i], sizeof str[i], stdin)) break;\n       if(str[i][0]=='0')break;\n       str[i][ strcspn(str[i], \"\\r\\n\")] = 0;\n       }\n   count=i;\n\n   for(i=0;i&lt;count;i++) {\n      for(j=i+1;j&lt;count;j++){\n          int rc;\n\n          rc = strcasecmp(str[i],str[j]);\n          if (rc &lt; 0) continue;\n            /* strings are equal, except for case: do the normal compare */\n          if (rc == 0) rc = strcmp(str[i],str[j]);\n          if (rc &lt; 0) continue;\n          strcpy(temp,str[i]);\n          strcpy(str[i],str[j]);\n          strcpy(str[j],temp);\n      }\n   }\n   for(i=0;i&lt;count;i++) {\n          printf(\"%s \",str[i]);\n   }\n\n   return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>UPDATE: New version, implementing the {first_two_characters, length, rest_of_the string}\n, using a rather complex compare function:</p>\n\n<hr>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint myverysillystringcompare(char *ll, char *rr)\n{\nsize_t siz_l, siz_r, siz;\nint rc;\n\nsiz_l = strlen(ll);\nsiz_r = strlen(rr);\n\nif (!siz_l || !siz_r) return siz_r - siz_l;\n\nsiz = (siz_l &lt; siz_r) ? siz_l : siz_r;\n\nif( siz &gt; 2) siz = 2;\n        // Compare the first two characters, (if any) case INSIGNIFICANT\nrc = strncasecmp( ll, rr, siz );\nif (rc) return rc; // They differ\n\n        // Compare the first two characters, (if any) case SIGNIFICANT\nrc = strncmp( ll, rr, siz );\nif (rc) return rc; // they differ\n\n        // Compare the lengths; the shortest wins\nif (siz_l != siz_r) return siz_l - siz_r;\n\n        // Compare the rest of the string, (if any) case INSIGNIFICANT\nrc = strcasecmp(ll+siz, rr+siz);\nif (rc) return rc; // they differ\n\n        // Compare the rest of the string, (if any) case SIGNIFICANT\nrc = strcmp(ll+siz, rr+siz);\nreturn rc;\n}\n\nint main(void){\n   int i=0,j=0,count;\n   char str[25][25],temp[25];\n\n   for (i=0; i &lt; 25; i++) {\n       if (!fgets(str[i], sizeof str[i], stdin)) break;\n       if(str[i][0]=='0')break;\n       str[i][ strcspn(str[i], \"\\r\\n\")] = 0;\n       }\n   count=i;\n\n   for(i=0;i&lt;count;i++) {\n      for(j=i+1;j&lt;count;j++){\n         int rc;\n         rc = myverysillystringcompare(str[i],str[j]);\n         if (rc &lt;= 0) continue;\n         strcpy(temp,str[i]);\n         strcpy(str[i],str[j]);\n         strcpy(str[j],temp);\n      }\n   }\n   for(i=0;i&lt;count;i++) {\n          printf(\"%s \",str[i]);\n   }\n\n   return 0;\n}\n</code></pre>\n\n<hr>\n"}], "owner": {"reputation": 1793, "user_id": 12330258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SczMJ.jpg?s=128&g=1", "display_name": "hanie", "link": "https://stackoverflow.com/users/12330258/hanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1331, "favorite_count": 0, "accepted_answer_id": 59480774, "answer_count": 3, "score": -1, "last_activity_date": 1577438806, "creation_date": 1577292975, "last_edit_date": 1577298485, "question_id": 59480329, "link": "https://stackoverflow.com/questions/59480329/c-program-sort-strings-in-alphabetical-order", "title": "C program sort strings in alphabetical order", "body": "<p>I'm new to C programming and I'm trying to write a code which sorts words in alphabetical order. I considered capital letters and small letters different. My rules for sorting is first to consider alphabetical order, and then capital letters have priority, and words with fewer characters has priority. For all words we consider only first and second letters characters, if they are similar we go to next word.<br>\nFinally when <code>0</code> is entered, the program should finish.<br>\nHere is an example of what should it do:<br>\ninput : <code>alireza Mohammad Arash anahita sarah Milad john Alireza Maryam 0</code><br>\noutput : <code>Alireza alireza anahita Arash john Maryan Milad Mohammad sarah</code>  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main() {\n    int i=0, j=0, count;\n    char str[25][25], temp[25];\n    while (1) {\n        gets(str[i]);\n        if(str[i][0]=='0')\n            break;\n        i++;\n        j++;\n    }\n    count=i;\n    for(i=0; i&lt;=count; i++)\n        for(j=i+1; j&lt;=count; j++) {\n            if(strcmp(str[i], str[j]) &gt; 0) {\n                strcpy(temp, str[i]);\n                strcpy(str[i], str[j]);\n                strcpy(str[j], temp);\n            }\n         }\n    for(i=0; i&lt;count; i++)\n        printf(\"%s \", str[i]);\n    return 0;\n}\n</code></pre>\n\n<p>but my code only sort words by comparing their ASCII code which cause all capital come first like<br>\ninput : <code>aa bb AA we WE 0</code><br>\nmy output : <code>AA WE aa bb we</code><br>\nbut it should be:<br>\noutput : <code>AA aa bb WE we</code><br>\nI was thinking if I could do something like creating new ASCII code for chars but it also seem impossible.\nHow could sort strings like this?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 9047883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lqpZ7Z8mUHU/AAAAAAAAAAI/AAAAAAAADPY/A2RVqtLf0Hg/photo.jpg?sz=128", "display_name": "Ianau Andrei", "link": "https://stackoverflow.com/users/9047883/ianau-andrei"}, "is_accepted": true, "score": 0, "last_activity_date": 1577293638, "creation_date": 1577293638, "answer_id": 59480408, "question_id": 59480319, "link": "https://stackoverflow.com/questions/59480319/im-trying-to-make-a-program-which-rotated-the-matrix-clockwise-and-i-think-the/59480408#59480408", "title": "I&#39;m trying to make a program which rotated the matrix clockwise, and I think there&#39;s some problem with pointers", "body": "<p><code>int *s=mat[0][0];</code> Here you declare <code>s</code> as a <code>pointer of type int</code>, while you initialize it with <code>mat[0][0]</code>, which is of type <code>int</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11783143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7tFO5btRBlo/AAAAAAAAAAI/AAAAAAAAAOM/3sU7u9_hvLw/photo.jpg?sz=128", "display_name": "Aditya Sharma", "link": "https://stackoverflow.com/users/11783143/aditya-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 59480408, "answer_count": 1, "score": 0, "last_activity_date": 1577307222, "creation_date": 1577292902, "last_edit_date": 1577307222, "question_id": 59480319, "link": "https://stackoverflow.com/questions/59480319/im-trying-to-make-a-program-which-rotated-the-matrix-clockwise-and-i-think-the", "title": "I&#39;m trying to make a program which rotated the matrix clockwise, and I think there&#39;s some problem with pointers", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n    int mat[3][3]={\n        {1, 2, 3},\n        {4, 5, 6},\n        {7, 8, 9}\n    };\n    int nmat[3][3];\n    int *s=mat[0][0];\n    int *t=nmat[0][2];\n    int i;\n    for (i=0; i&lt;3; i++){\n        *t=*s;\n        s++; t=t+3;\n    }\n    int *q=mat[2][0];\n    int *w=nmat[0][0];\n    for (i=0; i&lt;3; i++){\n        *w=*q;\n        q++; w=w+3;\n    }\n    int *a=mat[2][0];\n    int *b=nmat[0][0];\n    for (i=0; i&lt;3; i++){\n        *b=*a;\n        a=a-3; b++;\n    }\n    int *x=mat[2][2];\n    int *y=nmat[2][0];\n    for (i=0; i&lt;3; i++){\n        *b=*a;\n        a=a-3; b++;\n    }\n    int *p=nmat[0][0];\n    int j;\n    for (i=0; i&lt;3; i++){\n        for (j=0; j&lt;3; j++){\n            printf(\"%d \", *p);\n            p++;\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>I am a beginner in c and I was practicing some questions.\nI am trying to make a program that rotates a matrix clockwise, but it does not seem to work. where is my code wrong?</p>\n\n<p><a href=\"https://i.stack.imgur.com/HlDcp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HlDcp.png\" alt=\"The program doesn&#39;t print anything\"></a></p>\n"}, {"tags": ["c", "loops", "scanf"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1577293234, "post_id": 59480219, "comment_id": 105137470, "body": "Note that <code>NULL</code> is technically a pointer, so the assignment <code>char unit = NULL;</code> is bad practice. What you want there is <code>char unit = &#39;\\0&#39;;</code> since <code>&#39;\\0&#39;</code> is the NUL character. And the <code>if</code> statement surrounding the <code>scanf</code> is not needed. Instead, you need an <code>if</code> statement to verify that <code>scanf</code> returned 2, e.g. <code>if (scanf(&quot;%lf %c&quot;, &amp;input, &amp;unit) != 2) break;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 11805611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e29dac1699fd306834e9a2d4eb0ff86a?s=128&d=identicon&r=PG&f=1", "display_name": "Katie Melosto", "link": "https://stackoverflow.com/users/11805611/katie-melosto"}, "edited": false, "score": 0, "creation_date": 1577295799, "post_id": 59480481, "comment_id": 105137963, "body": "Thanks everyone ---&gt; this solved it! ``` if(scanf(&quot;%lf %c\\n&quot;, &amp;input, &amp;unit) != 2) break;```"}], "tags": [], "owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "is_accepted": true, "score": 4, "last_activity_date": 1577294211, "creation_date": 1577294211, "answer_id": 59480481, "question_id": 59480219, "link": "https://stackoverflow.com/questions/59480219/scanf-in-a-loop-in-c-only-asks-user-once/59480481#59480481", "title": "scanf in a loop in C only asks user once", "body": "<p>You have a couple issues here.</p>\n\n<ol>\n<li>You're assigning <code>NULL</code> (of type <code>void*</code>) into a <code>char</code> as well as comparing these values later. Don't do this. If you want to use some sort of canary value you could instead use the character <code>'\\0'</code> (or any other non-readily enter-able character).</li>\n<li>You've given <code>scanf</code> a parameter that it expects to be a <code>char*</code> as a <code>char</code>. In order for the line <code>scanf(\"%lf %c\\n\", &amp;input, unit);</code> to work as intended, you should have an ampersand in front of <code>unit</code> in order to pass a pointer to the local variable <code>unit</code>.</li>\n<li>Giving <code>scanf</code> trailing whitespace requires it to read <em>all subsequent whitespace</em> until it can determine a block of whitespace has ended (see <code>man 3 scanf</code> for some more info, but note that any whitespace character in the format string is treated equivalently). In this instance having a newline on the end of your <code>scanf</code> calls will require them to read some amount of whitespace and then a non-whitespace character (see also the accepted answer here: <a href=\"https://stackoverflow.com/questions/47903523/white-space-in-format-string-of-scanf\">white space in format string of scanf()</a>). Just leave off the <code>\\n</code>.</li>\n<li>Some of your braces (namely the block for the function main) aren't closed. I'm assuming this is just a function of copying-and-pasting into SO though.</li>\n</ol>\n\n<p>Most of this could be avoided with a stricter compilation command. If you're using <code>gcc</code> with the C99 standard you could try\n<code>gcc -Wall -Werror -Wextra -Wshadow -pedantic -std=c99 source_file.c</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12596391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEU1I.png?s=128&g=1", "display_name": "Anikel31", "link": "https://stackoverflow.com/users/12596391/anikel31"}, "is_accepted": false, "score": 2, "last_activity_date": 1577307889, "last_edit_date": 1577307889, "creation_date": 1577303828, "answer_id": 59481458, "question_id": 59480219, "link": "https://stackoverflow.com/questions/59480219/scanf-in-a-loop-in-c-only-asks-user-once/59481458#59481458", "title": "scanf in a loop in C only asks user once", "body": "<p>First of all, I recommend using the _s functions instead of the regulars (for example printf_s and not printf). Second, I wrote down a version of the code that is working. I noticed that whenever I added some text to scanf_s (for example a \\n) the program didn't stop but when I printed it with printf the program stopped.</p>\n\n<p>FYI: For initialization, you need to put a number that the user won't enter - If the user doesn't put a value num won't store 0 but -9.2559631349317831e+61. And you should use || instead of &amp;&amp; because you want that num and unit will store a value! :)</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int amount;\n    printf_s(\"How many numbers would you like to recive?\\n\");\n    scanf_s(\"%i\", &amp;amount);\n\n    for (int i = 0; i &lt; amount; ++i)\n    {\n\n        // Initialization of all variables.\n        double convertedNum;\n        double rawNum;\n        char unit[3] = \"\";\n\n        // Getting the variables.\n        printf_s(\"Please enter the number that you\\'d like to convert and the unit to \n        convert to.\\n\");\n        printf_s(\"Number: \");\n        scanf_s(\"%lf\", &amp;rawNum);\n        printf_s(\"Units (m/ft): \");\n        scanf_s(\"%s\", &amp;unit, 3);\n\n        // To make sure that we're getting right input &amp; the wanted amount of \n        // numbers.\n\n        if (rawNum == -9.2559631349317831e+61 || unit == \"\")\n        {\n            printf_s(\"Please enter a number and a unit!\");\n            --i;\n        }\n\n        else if (strcmp(unit, \"m\") == 0)\n        {\n            convertedNum = rawNum * 3.2808399;\n            printf_s(\"\\n\\nAfter convention, the number is %f\\n\", convertedNum);\n        }\n\n        else if (strcmp(unit, \"ft\") == 0)\n        {\n            convertedNum = rawNum / 3.2808399;\n            printf_s(\"\\n\\nAfter convention, the number is %f\\n\", convertedNum);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 11805611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e29dac1699fd306834e9a2d4eb0ff86a?s=128&d=identicon&r=PG&f=1", "display_name": "Katie Melosto", "link": "https://stackoverflow.com/users/11805611/katie-melosto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 59480481, "answer_count": 2, "score": 0, "last_activity_date": 1577307889, "creation_date": 1577292053, "question_id": 59480219, "link": "https://stackoverflow.com/questions/59480219/scanf-in-a-loop-in-c-only-asks-user-once", "title": "scanf in a loop in C only asks user once", "body": "<p>I'm trying to create a simple converter that will ask a user to input data n times. The scanf() in the loop ideally should allow user to input a response in the terminal, press enter, then pass an output, then ask again....n times. But the program so far, just asks one time and never allows user to ask again. </p>\n\n<p>There are many <a href=\"https://stackoverflow.com/questions/2303300/scanf-in-while-loop\">posts</a> about scanf in loops I've seen, but I wasn't able to connect my issue with any of them.  </p>\n\n<p>I'm new to C coming from java. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\ndouble feet(double m);\ndouble lbs(double g);\ndouble f(double c);\n//double askInput(int num);\n\n\nint main()\n{\n    int num, i;\n    i = 0;\n\n    printf(\"how many?\\n\");\n    scanf(\"%i\\n\", &amp;num);\n\n    for(i = 0; i &lt; num; i++)\n    {\n    double input = 0.0;\n    double output;\n    char unit = NULL;\n        printf(\"num to convert, units to convert?\\n\");\n\n        //scanf(\"%lf %c\\n\", &amp;input, unit);\n        if(input == 0.0 &amp;&amp; unit == NULL)\n        {\n            //input = askInput(num);\n            scanf(\"%lf %c\\n\", &amp;input, unit);\n        }\n\n        //meters to feet\n        if(unit == 'm')\n        {\n            output = feet(input);\n        }\n\n    }\n</code></pre>\n\n<p>I've tried a number of things. I've tried using a while loop, I've tried putting scanf in a separate function and then also using if statements. I imagine I am not quite understanding how scanf works. Thank you!</p>\n"}, {"tags": ["c++", "c", "string"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1577292074, "post_id": 59480208, "comment_id": 105137217, "body": "Why would you need <code>strcat()</code> or it&#39;s wrapper in C++?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 5, "creation_date": 1577292137, "post_id": 59480208, "comment_id": 105137230, "body": "Just use <code>std::string</code>.  No reason to use <code>strcat</code> or C99&#39;s <code>strcat_s</code> in modern C++."}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "edited": false, "score": 0, "creation_date": 1577292220, "post_id": 59480208, "comment_id": 105137246, "body": "Because I need to use some particular environment functions like (_dupenv_s)"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1577292824, "post_id": 59480208, "comment_id": 105137379, "body": "It isn&#39;t clear what exactly you&#39;re asking. Create a wrapper that does what?"}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1577293124, "post_id": 59480208, "comment_id": 105137441, "body": "Hey @interjay thanks for responding! I edited the question to better explain what I meant."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1577293166, "post_id": 59480208, "comment_id": 105137450, "body": "But that&#39;s the signature of <code>strcat</code>. Why don&#39;t you just call that? It isn&#39;t possible to call <code>strcat_s</code> given that signature because you don&#39;t know the buffer size."}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1577293240, "post_id": 59480208, "comment_id": 105137472, "body": "Because in VS2017 you need to enable _crt_secure_no_warnings to use the &quot;outdated&quot; functions. Which I do not want to do. Thanks @interjay"}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1577294083, "post_id": 59480208, "comment_id": 105137662, "body": "Thankyou! I solved the problem using _dupenv_s() and std::strings @interjay"}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1577294096, "post_id": 59480208, "comment_id": 105137666, "body": "Thankyou! I solved the problem using _dupenv_s() and std::strings @Eljay"}, {"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1577294104, "post_id": 59480208, "comment_id": 105137669, "body": "Thankyou! I solved the problem using _dupenv_s() and std::strings @Slava"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "edited": false, "score": 0, "creation_date": 1577294059, "post_id": 59480251, "comment_id": 105137658, "body": "Thankyou! I solved the problem using _dupenv_s() and std::strings @eerorika"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 1, "last_activity_date": 1577292260, "creation_date": 1577292260, "answer_id": 59480251, "question_id": 59480208, "link": "https://stackoverflow.com/questions/59480208/is-the-wrapper-from-strcat-s-to-strcat-if-there-isnt-is-it-possible-to-c/59480251#59480251", "title": "Is the wrapper from strcat_s() to strcat() ? If there isn&#39;t, is it possible to create one?", "body": "<blockquote>\n  <p>Is there any way to create a wrapper for the strcat_s() function?</p>\n</blockquote>\n\n<p>Yes. Define a function. In the function, call <code>strcat_s</code>. Now your function is a wrapper for <code>strcat_s</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1619032066, "post_id": 59481470, "comment_id": 118785121, "body": "<i>the traditional c string handling functions are unsafe by design</i>  <a href=\"https://en.wikipedia.org/wiki/Embrace,_extend,_and_extinguish\" rel=\"nofollow noreferrer\">Hogwash</a>:  &quot;embrace, extend, and exterminate&quot;, is a phrase that the U.S. Department of Justice found that was used internally by Microsoft to describe its strategy for entering product categories involving widely used standards, extending those standards with proprietary capabilities, and then using those differences in order to strongly disadvantage its competitors."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1619032205, "post_id": 59481470, "comment_id": 118785167, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">To wit</a>:  &quot;A widespread fallacy originated by Microsoft&#39;s deprecation of the standard functions in an effort to increase the adoption of the APIs is that every call to the standard functions is necessarily unsafe and should be replaced by one to the &quot;safer&quot; API."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1619032274, "post_id": 59481470, "comment_id": 118785192, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">It&#39;s inherenly multithread-<b><i>unsafe</i></b></a>:   &quot;Unfortunately, since there is only one runtime-constraint handler per-process, components that run in distinct threads cannot make use of the set_constraint_handler() function since doing so could change the handler installed and relied on by other threads.&quot;"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1619032343, "post_id": 59481470, "comment_id": 118785214, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">They are non-portable</a>:  &quot;Microsoft Visual Studio implements an early version of the APIs. However, the implementation is incomplete and conforms neither to C11 nor to the original TR 24731-1. ...   As a result of the numerous deviations from the specification the Microsoft implementation cannot be considered conforming or portable.&quot;"}], "tags": [], "owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "is_accepted": false, "score": -3, "last_activity_date": 1577794503, "last_edit_date": 1577794503, "creation_date": 1577303957, "answer_id": 59481470, "question_id": 59480208, "link": "https://stackoverflow.com/questions/59480208/is-the-wrapper-from-strcat-s-to-strcat-if-there-isnt-is-it-possible-to-c/59481470#59481470", "title": "Is the wrapper from strcat_s() to strcat() ? If there isn&#39;t, is it possible to create one?", "body": "<blockquote>\n  <p>Is there any way to create a wrapper for the strcat_s() function?</p>\n</blockquote>\n\n<p>You can't meaningfully create a wrapper function. The Whole reason MS put those warnings/errors there is that the interfaces of the traditional c string handling functions are unsafe by design.</p>\n\n<p>So while sure technically you could write something like.</p>\n\n<pre><code>void stupid_strcat(char* dest, char * src)\n{\n  strcat_s(dest,strlen(dest)+strlen(src)+1,src);\n}\n</code></pre>\n\n<p>Doing so would just result in something that was slower than strcat and just as unsafe.</p>\n\n<p>If your destination is a directly accessed (not via a pointer) array then you could write a macro like.</p>\n\n<pre><code>#define array_strcat(dest,src) strcat_s(dest,sizeof(dest),src)\n</code></pre>\n\n<blockquote>\n  <p>As personally I feel that it is much more difficult to use.</p>\n</blockquote>\n\n<p>Doing C string handling safely is a pain. Generally in C++ you should avoid using C strings and use std::string or similar instead.</p>\n\n<blockquote>\n  <p>Plus why does it return a errno?</p>\n</blockquote>\n\n<p>strcat_s can detect certain errors at runtime. When such errors are detected the \"constraint handler\" is called. If the constraint handler returns then the error will be passed back up to the caller of strcat_s so it knows an error occoured.</p>\n"}], "owner": {"reputation": 5, "user_id": 12596413, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZOVlc92U5nmTo4RlQ3AXNxTq01pOEaPUcVtZW-w=k-s128", "display_name": "GAME_DEV_BOT", "link": "https://stackoverflow.com/users/12596413/game-dev-bot"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1577311603, "accepted_answer_id": 59480251, "answer_count": 2, "score": -3, "last_activity_date": 1619028305, "creation_date": 1577291988, "last_edit_date": 1619028305, "question_id": 59480208, "link": "https://stackoverflow.com/questions/59480208/is-the-wrapper-from-strcat-s-to-strcat-if-there-isnt-is-it-possible-to-c", "closed_reason": "Needs details or clarity", "title": "Is the wrapper from strcat_s() to strcat() ? If there isn&#39;t, is it possible to create one?", "body": "<p>As the question says it all, Is there any way to create a wrapper for the strcat_s() function? As personally I feel that it is much more difficult to use. Plus why does it return a errno?</p>\n<p>I want to make a wrapper which kinda looks like this. Also I don't want to enable _crt_secure_no_warnings</p>\n<pre><code>void (char* dest, char* src) \n{\n    // Execute strcat_s() here\n}\n</code></pre>\n<p>Samuel</p>\n"}, {"tags": ["c", "pic", "i2c"], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 9470194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c03b3b31ebf2766d49ac83663a14d757?s=128&d=identicon&r=PG", "display_name": "Joe Thomas", "link": "https://stackoverflow.com/users/9470194/joe-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1577994066, "creation_date": 1577994066, "answer_id": 59569085, "question_id": 59480164, "link": "https://stackoverflow.com/questions/59480164/i2c-acken-bit-doesnt-get-cleared-by-hardware/59569085#59569085", "title": "I2C ACKEN Bit doesnt get cleared by hardware", "body": "<p>I think the issue is really the BF flag is still set and not allowing the ack to be clocked out.  As soon as you set RCEN, the BF flag is cleared, thus the call to wait does nothing and val probably contains old data, not new.  After 8 clocks, the BF flag is then set and SSP1BUF has the new data.  Again, the issue is that BF is set because you didn't read the data buffer after receiving the data, thus the baud rate generator (clock source) is suspended:</p>\n\n<blockquote>\n  <p>\"the contents of the SSPSR are loaded into the SSPBUF, the BF flag bit\n  is set, the SSP1IF flag bit is set and the Baud Rate Generator is\n  suspended from counting, holding SCL low. The MSSP is now in Idle\n  state awaiting the next command. When the buffer is read by the CPU,\n  the BF flag bit is automatically cleared. The user can then send an\n  Acknowledge bit at the end of reception by setting the Acknowledge\n  Sequence Enable, ACKEN bit of the SSPCON2 register.\"</p>\n</blockquote>\n\n<p>To fix this, you should poll the BF flag looking for a true after you write RCEN.</p>\n\n<p>There are other issues, such as the wait after writing to SEN probably does nothing either, since writing to SEN only SSP1IF bit (SSP1IF is set by hardware on completion of the Start. )</p>\n"}], "owner": {"reputation": 3, "user_id": 11900142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df40e55095070888663eb7328b1d9f9a?s=128&d=identicon&r=PG&f=1", "display_name": "vberiah", "link": "https://stackoverflow.com/users/11900142/vberiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577994066, "creation_date": 1577291543, "question_id": 59480164, "link": "https://stackoverflow.com/questions/59480164/i2c-acken-bit-doesnt-get-cleared-by-hardware", "title": "I2C ACKEN Bit doesnt get cleared by hardware", "body": "<p>I am using a PIC16F1789 and an MPU-9250. The Code inside my I2C Reading funciton looks like this:</p>\n\n<pre><code>unsigned char i2cSensor_Read(unsigned char regAddr){\nunsigned char val;\n// Start\ni2cWait();\nSEN = 1;\n\n// Address + Write Bit\ni2cWait();\nSSP1BUF = ((slvAdd&lt;&lt;1) | (0b0&lt;&lt;0)); // address slave + write (0)\ni2cWait();\n\n//Register address\nSSP1BUF = regAddr; // address register\ni2cWait();\n\n//Start\nRSEN = 1;\ni2cWait();\n\n// Address + Read Bit\nSSP1BUF = ((slvAdd&lt;&lt;1) | (0b1&lt;&lt;0)); //Address + read (1)\ni2cWait();\n\n// Read data\nRCEN = 1;\ni2cWait();\nval = SSP1BUF;\n\nACKDT = 1; // set acknowlege Bit (1 = Not Acknowlege, 0 = Acknowlege)\nACKEN = 1; // send acknowlege Bit\n\n// Stop\ni2cWait();\nPEN = 1;\nreturn val;\n</code></pre>\n\n<p><code>}</code></p>\n\n<p>When calling the last i2cWait(), the program hangs.\nThe wait function looks like this:</p>\n\n<pre><code>void i2cWait(){\nwhile((SSP1STAT &amp; 0x04) || (SSP1CON2 &amp; 0x1F));\n}\n</code></pre>\n\n<p>I've worked with the \"Single-Byte Read Sequence\" on page 35 of the 9250 Datasheet: <a href=\"https://cdn.sparkfun.com/assets/learn_tutorials/5/5/0/MPU9250REV1.0.pdf\" rel=\"nofollow noreferrer\">https://cdn.sparkfun.com/assets/learn_tutorials/5/5/0/MPU9250REV1.0.pdf</a></p>\n\n<p>And the PIC Datasheet: <a href=\"http://ww1.microchip.com/downloads/en/DeviceDoc/40001675C.pdf\" rel=\"nofollow noreferrer\">http://ww1.microchip.com/downloads/en/DeviceDoc/40001675C.pdf</a></p>\n\n<p>When debugging, the program gets stuck in the i2cWait() after I send the NACK Bit. It gets stuck because the ACKEN Bit (Bit 4) of the SSPCON2 register (Page 341 of PIC datasheet) doesn't get cleared, so the program gets stuck in the while().</p>\n\n<p>Why is this the case? Does the Slave have to clear this bit? Is the slave device broken?</p>\n"}, {"tags": ["c", "operators", "operator-precedence"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1577287406, "post_id": 59479634, "comment_id": 105136222, "body": "Operator precedence is not the same as order of evaluation."}], "answers": [{"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 3, "last_activity_date": 1577289940, "last_edit_date": 1577289940, "creation_date": 1577287351, "answer_id": 59479683, "question_id": 59479634, "link": "https://stackoverflow.com/questions/59479634/why-p-dereferences-a-pointer-first-and-then-increments-pointer-adress/59479683#59479683", "title": "Why *p++ dereferences a pointer first and then increments pointer adress?", "body": "<p><code>*p++</code> parses as <code>*(p++)</code>.</p>\n\n<p>the value of <code>p++</code> is <code>p</code> (and the side effect is incrementing <code>p</code>), so the value of <code>*p++</code> is the same value as <code>*p</code>.</p>\n\n<p><em>Except for the side-effect, <code>*p</code> and <code>*p++</code> are identical.</em></p>\n\n<p>The exact same thing happens with integer:</p>\n\n<pre><code>int n = 6;\nprintf(\"%d\\n\", 7 * n);\nprintf(\"%d\\n\", 7 * n++); // except for the side-effect same value as above\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10901363, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DBqmut0kEqw/AAAAAAAAAAI/AAAAAAAAAGw/3TrQPPZE8xg/photo.jpg?sz=128", "display_name": "ToTheSpace 2", "link": "https://stackoverflow.com/users/10901363/tothespace-2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 59479683, "answer_count": 1, "score": 1, "last_activity_date": 1577293075, "creation_date": 1577286878, "last_edit_date": 1577293075, "question_id": 59479634, "link": "https://stackoverflow.com/questions/59479634/why-p-dereferences-a-pointer-first-and-then-increments-pointer-adress", "title": "Why *p++ dereferences a pointer first and then increments pointer adress?", "body": "<p>The C operator precedence chart looks like this:\n<a href=\"https://i.stack.imgur.com/QzcgZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QzcgZ.png\" alt=\"C operator precedence\"></a></p>\n\n<p>Why is post increment/decrement first on the list but *p++ results in dereferencing a pointer first and then incrementing adress it points to?</p>\n"}, {"tags": ["c", "yacc", "lex"], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1577308313, "last_edit_date": 1577308313, "creation_date": 1577297642, "answer_id": 59480851, "question_id": 59479561, "link": "https://stackoverflow.com/questions/59479561/inserting-c-code-between-yacc-grammars-rules-creates-shift-reduces-conflicts/59480851#59480851", "title": "Inserting C code between YACC grammar&#39;s rules creates shift/reduces conflicts", "body": "<p>The code here, which you say produces a shift/reduce conflict, is not \"between rules\":</p>\n\n<pre><code>function_declaration\n  : {add_new_node(head);} '(' list_param ')' ID available_types '{' function_content '}'\n  | '(' list_param ')' ID available_types '{' '}'\n</code></pre>\n\n<p>(That's your rule except I replaced the tokens with <a href=\"https://www.gnu.org/software/bison/manual/bison.html#index-single_002dcharacter-literal\" rel=\"nofollow noreferrer\">single-character literals</a> to reduce the line width.)</p>\n\n<p>The action in that line is <em>inside</em> the rule, so it's a <a href=\"https://www.gnu.org/software/bison/manual/bison.html#Midrule-Actions\" rel=\"nofollow noreferrer\">mid-rule action</a>, usually abbreviated MRA. MRAs are notorious for creating conflicts, and the bison manual has a whole section on <a href=\"https://www.gnu.org/software/bison/manual/bison.html#Midrule-Conflicts\" rel=\"nofollow noreferrer\">conflicts from MRAs</a> and what you can do about them.</p>\n\n<p>In fact, it includes an example pretty similar to yours: two rules which start with the same token, where one has a leading MRA and the other doesn't. As the manual says, the result is that</p>\n\n<blockquote>\n  <p>&hellip;the parser is forced to decide whether to run the midrule action when it has read no farther than the open-brace. In other words, it must commit to using one rule or the other, without sufficient information to do it correctly.</p>\n</blockquote>\n\n<p>It's not clear to my why you feel the need to have two productions in that example. You could easily combine them into a single production, either by left-factoring or by allowing <code>function_content</code> to be empty (i.e. replace the non-recursive rule <code>function_content: instructions</code> with <code>function-content: %empty</code>.</p>\n\n<p>If only one rule is applicable, then there is no conflict. But that does mean that the MRA will also be called for function declarations with empty content. Frankly, I don't see any reason you'd want to avoid the call in that case, but you may well have your reasons.</p>\n\n<p>For other approaches, see the bison manual sections I linked above.</p>\n"}], "owner": {"reputation": 3, "user_id": 10901249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e520e2a8ad44d27586182a683ffc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Phantosus", "link": "https://stackoverflow.com/users/10901249/phantosus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577308313, "creation_date": 1577286162, "question_id": 59479561, "link": "https://stackoverflow.com/questions/59479561/inserting-c-code-between-yacc-grammars-rules-creates-shift-reduces-conflicts", "title": "Inserting C code between YACC grammar&#39;s rules creates shift/reduces conflicts", "body": "<p>Currently i am working on an assignement from my Formal Language and Compilers course and i am hitting a constant wall which is,when i am inserting C code between rules literals a lot of shift/reduces appears.For example let's say that i have the following extracted from my grammar.</p>\n\n<p>function_declaration: OPEN_ROUND_BRACKET list_param CLOSE_ROUND_BRACKET ID available_types<br>\n                      OPEN_CURLY_BRACKET function_content CLOSE_CURLY_BRACKET \n                    | OPEN_ROUND_BRACKET list_param CLOSE_ROUND_BRACKET ID available_types \n                     OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET \n                    ;</p>\n\n<p>If i am inserting something like</p>\n\n<p>function_declaration: {add_new_node(head);}OPEN_ROUND_BRACKET list_param CLOSE_ROUND_BRACKET ID \n                      available_types<br>\n                      OPEN_CURLY_BRACKET function_content CLOSE_CURLY_BRACKET \n                    | OPEN_ROUND_BRACKET list_param CLOSE_ROUND_BRACKET ID available_types \n                     OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET </p>\n\n<p>This creates a shift/reduce .Why and how i can avoid this.</p>\n\n<p>My entire code:</p>\n\n<p>Grammar.y</p>\n\n<pre><code>%{\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;/usr/include/glib-2.0/glib.h&gt;\n\nextern FILE* yyin;\nextern int yylineno;\nint yydebug=1;\nint yylex();\nint yyerror(char *s);\n\ntypedef struct expr_info\n{\n        char*name;\n        int datatype;\n        int intvalue;\n        float floatvalue;\n        _Bool boolvalue;\n\n} expr_info;\nstruct SymTabEntry\n{\n        char*name;\n        char*scope;\n        char*whatIs;\n        char*dataType;\n        int intvalue;\n        int lineOf;\n        char*stringval;\n        char charvalue;\n        float floatvalue;\n        char*paramlist;\n\n} SymTabEntry;\nstruct Checker\n{\n        GHashTable*localScope;\n        int counter;\n        char*currentScope;\n        struct Checker*next;\n\n};\nGHashTable*SymTab;\nint noScopes=0;\nstruct Checker*head=NULL;\nvoid init_checker();\nvoid free_entry(struct SymTabEntry*val);\nvoid start_program();\nvoid add_new_variable(struct Checker*head,const char*type,char*identifier);\nconst char*return_type(int type);\nvoid dump_symtab(gpointer key,gpointer value,gpointer userdata);\nvoid add_new_node(struct Checker*head);\nvoid remove_head_node(struct Checker*head);\nvoid printf_symtab();\n\n%}\n\n%union \n{\n        int type;\n        char*strname;\n        int intval;\n        char* strval;\n        _Bool boolval;\n        char charval;\n        float floatval;\n        struct expr_info* expr_ptr;\n}\n\n%start start_program\n%token START END ASSIGN IF ELSEIF WHILE FOR STRCPY STRLEN STRCMP STRCAT ADD DIV BIGGER SMALLER MIN MUL EQUAL OPEN_ROUND_BRACKET CLOSE_ROUND_BRACKET CLOSE_CURLY_BRACKET OPEN_CURLY_BRACKET INCR CLASS MAIN ELSE SMALLER_EQUAL BOOL_TRUE BOOL_FALSE GREATER_EQUAL STRING_TYPE CONST\n%left ADD \n%left MIN\n%left MUL\n%left DIV\n%left SMALLER\n%left BIGGER\n%left INCR\n%left EQUAL\n%left IF\n%left ELSEIF\n\n\n%token&lt;strname&gt; ID\n%token&lt;intval&gt; INT_VAL;\n%token&lt;strval&gt; STRING_VAL\n%token&lt;floatval&gt; FLOAT_VAL\n%token&lt;charval&gt; CHAR_VAL\n%token&lt;type&gt; INT STRING FLOAT CHAR BOOL\n%type&lt;type&gt; available_types \n\n%%\nstart_program:{init_checker(head);start_program();} declaration_section main_section {printf(\"Programul este corect\\n\");}\n             ;\n\ndeclaration_section:declaration_section declaration_content;\n                    | declaration_content\n                    ;\n\ndeclaration_content: function_declaration \n                    | object_declaration  \n                    | create_variable \n                    ;\n\n\nobject_declaration: ID CLASS OPEN_CURLY_BRACKET object_content CLOSE_CURLY_BRACKET \n                   | ID CLASS OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET\n                   ;\n\nobject_content:object_content inside_object \n              | inside_object\n              | expression \n              ; \n\ninside_object:function_declaration\n             | create_variable \n             ; \n\nfunction_declaration: OPEN_ROUND_BRACKET list_param CLOSE_ROUND_BRACKET ID available_types  OPEN_CURLY_BRACKET function_content CLOSE_CURLY_BRACKET \n                    | OPEN_ROUND_BRACKET list_param CLOSE_ROUND_BRACKET ID available_types OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET \n                    ;\n\nlist_param:list_param ',' ID available_types\n           |ID available_types\n           ;\n\nfunction_content: function_content instructions\n                | instructions\n                ;\n\nmultiple_instructions:multiple_instructions instructions\n                     | instructions\n                     ;\n\ninstructions: if_instr\n            | while_instr\n            | for_instr\n            | assign_instr \n            | create_variable \n            | ';'function_call\n            | ';' object_call_function\n            ;\n\nfunction_call:'#'OPEN_ROUND_BRACKET list_call CLOSE_ROUND_BRACKET  ID\n             |'#'OPEN_ROUND_BRACKET CLOSE_ROUND_BRACKET  ID\n             ;\n\n\nlist_call: expression  ',' list_call\n         | expression\n         ;\n\nif_instr:OPEN_ROUND_BRACKET expression CLOSE_ROUND_BRACKET IF OPEN_CURLY_BRACKET multiple_instructions CLOSE_CURLY_BRACKET else_instr\n        |OPEN_ROUND_BRACKET expression CLOSE_ROUND_BRACKET IF OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET else_instr\n        ;\n\nelse_instr:ELSE OPEN_CURLY_BRACKET multiple_instructions CLOSE_CURLY_BRACKET\n          |ELSE OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET\n          | \n          ;\n\nwhile_instr: OPEN_ROUND_BRACKET expression CLOSE_ROUND_BRACKET WHILE OPEN_CURLY_BRACKET multiple_instructions CLOSE_CURLY_BRACKET\n            |OPEN_ROUND_BRACKET expression CLOSE_ROUND_BRACKET WHILE OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET\n            ;\n\nassign_instr: ';'expression ASSIGN ID \n            | ';'expression ASSIGN object_access_var\n            | ';'expression ASSIGN access_vector\n            ;\n\n\nfor_instr: OPEN_ROUND_BRACKET assign_instr ';' expression ';' expression CLOSE_ROUND_BRACKET FOR OPEN_CURLY_BRACKET multiple_instructions CLOSE_CURLY_BRACKET\n         | OPEN_ROUND_BRACKET assign_instr ';' expression ';' expression CLOSE_ROUND_BRACKET FOR OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET\n         | OPEN_ROUND_BRACKET CLOSE_ROUND_BRACKET FOR OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET\n         ;\n\ncreate_variable: ';'create_single_variable \n             //  | ';''#'create_multiple_variable available_types\n               | ';''$'create_array_variable\n               | ';'create_const_variable\n               ;\n\ncreate_array_variable:'['expression']' ID available_types\n                     | '[' expression ']' ID ID\n                     ;\n\ncreate_single_variable:  '$' ID available_types {add_new_variable(head,return_type($3),$2);}\n                        |'$' ID ID {add_new_variable(head,$3,$2);}\n                        |'$' expression ASSIGN ID available_types {add_new_variable(head,return_type($5),$4);}\n                        |'$' expression ASSIGN ID ID {add_new_variable(head,$5,$4);}\n                        |'$' expression ASSIGN ID available_types CONST {\n                                char*newtype=malloc(strlen(\"const-\")+strlen(return_type($5))+1);\n                                strcpy(newtype,\"const-\");\n                                strcat(newtype,return_type($5));\n                                newtype[strlen(newtype)]='\\0';\n                                add_new_variable(head,newtype,$4);\n                        }\n                        ;\n/*\ncreate_multiple_variable:create_multiple_variable ',' ID\n                        | ID\n*/                     ;\n\ncreate_const_variable:expression ASSIGN ID CONST available_types\n                     | expression ASSIGN ID CONST ID\n                     ;\n\navailable_types: INT {$$=$1;}\n               | CHAR {$$=$1;}\n               | FLOAT {$$=$1;}\n               | BOOL {$$=$1;}\n               | STRING {$$=$1;}\n               ;\n\nexpression: ID \n          | INT_VAL \n          | FLOAT_VAL\n          | BOOL_TRUE\n          | BOOL_FALSE\n          | STRING_VAL\n          | function_call\n          | object_call_function\n          | object_access_var\n          | access_vector\n          | OPEN_ROUND_BRACKET expression CLOSE_ROUND_BRACKET\n          | expression ADD expression \n          | expression MUL expression\n          | expression DIV expression\n          | expression MIN expression\n          | expression BIGGER expression\n          | expression SMALLER expression\n          | expression EQUAL expression\n          | STRCPY OPEN_ROUND_BRACKET expression expression CLOSE_ROUND_BRACKET\n          | STRLEN OPEN_ROUND_BRACKET expression CLOSE_ROUND_BRACKET\n          | STRCAT OPEN_ROUND_BRACKET expression expression CLOSE_ROUND_BRACKET\n          ;\n\n\nobject_call_function:function_call '.' ID\n                    ;\n\nobject_access_var:ID'.'ID\n                 ;\n\naccess_vector:'['expression']' ID\n             ;\n\nmain_section:OPEN_ROUND_BRACKET CLOSE_ROUND_BRACKET MAIN INT OPEN_CURLY_BRACKET multiple_instructions CLOSE_CURLY_BRACKET\n            | OPEN_ROUND_BRACKET CLOSE_ROUND_BRACKET MAIN INT OPEN_CURLY_BRACKET CLOSE_CURLY_BRACKET\n            ;\n%%\nint yyerror(char * s){\n    printf(\"eroare: %s la linia:%d\\n\",s,yylineno);\n    return 0;\n}\n\nint main(int argc, char** argv){\n   yyin=fopen(argv[1],\"r\");\n   init_checker();\n   yyparse();\n   printf_symtab();\n   return 0;\n} \nvoid init_checker()\n{\n        head=malloc(sizeof(struct Checker));\n        head-&gt;next=NULL;\n        head-&gt;localScope=g_hash_table_new_full(g_str_hash,g_str_equal,g_free,(void*)free_entry);\n        head-&gt;currentScope=malloc(2);\n        strcpy(head-&gt;currentScope,\"0\");\n        head-&gt;currentScope[strlen(head-&gt;currentScope)]='\\0';\n        head-&gt;counter=0;\n}\nvoid free_entry(struct SymTabEntry*val)\n{\n        g_free(val);\n}\nvoid start_program()\n{\n        SymTab=g_hash_table_new_full(g_str_hash,g_str_equal,g_free,(void*)free_entry);\n}\nvoid add_new_variable(struct Checker*head,const char*type,char*identifier)\n{\n        printf(\"Adaug:%s de tipul %s in cu path-ul %s\\n\",identifier,type,head-&gt;currentScope);\n        struct SymTabEntry*newEntry=malloc(sizeof(struct SymTabEntry));\n        newEntry-&gt;name=malloc(strlen(identifier)+1);\n        newEntry-&gt;name[strlen(newEntry-&gt;name)]='\\0';\n        strcpy(newEntry-&gt;name,identifier);\n        newEntry-&gt;dataType=malloc(strlen(type)+1);\n        strcpy(newEntry-&gt;dataType,type);\n        newEntry-&gt;whatIs=malloc(strlen(\"variable\")+1);\n        strcpy(newEntry-&gt;whatIs,\"variable\");\n        newEntry-&gt;scope=malloc(strlen(head-&gt;currentScope));\n        strcpy(newEntry-&gt;scope,head-&gt;currentScope);\n        newEntry-&gt;lineOf=yylineno;\n        g_hash_table_insert(head-&gt;localScope,identifier,newEntry);\n}\nconst char*return_type(int type)\n{\n        switch(type)\n        {\n                case 0:{return \"int\";}\n                case 1:{return \"char\";}\n                case 2:{return \"float\";}\n                case 3:{return \"bool\";}\n                case 4:{return \"char*\";}\n                case 5:{return \"const\";}\n        }\n\n}\nvoid print_key_value(gpointer key,gpointer value,gpointer userdata)\n{\n        struct SymTabEntry*var=value;\n        printf(\"%s \\t%s\\t %s \\t %s\\n\",var-&gt;name,var-&gt;whatIs,var-&gt;dataType,var-&gt;scope);\n}\nvoid printf_symtab()\n{\n       g_hash_table_foreach(SymTab,print_key_value,NULL);\n}\nvoid add_new_node(struct Checker*head)\n{\n        printf(\"Am adaugat ceva nou\\n\");\n        head-&gt;counter++;\n        struct Checker*newChecker=malloc(sizeof(struct Checker));\n        newChecker-&gt;currentScope=malloc(strlen(head-&gt;currentScope)+3);\n        if(head-&gt;next==NULL)\n        {\n\n            sprintf(newChecker-&gt;currentScope,\"%d\",head-&gt;counter);\n        }\n        else\n        {\n                strcpy(newChecker-&gt;currentScope,head-&gt;currentScope);\n                strcat(newChecker-&gt;currentScope,\"-\");\n                char value[6];\n                sprintf(value,\"%d\",newChecker-&gt;counter);\n                strcat(newChecker-&gt;currentScope,value);   \n        }\n        newChecker-&gt;localScope=g_hash_table_new_full(g_str_hash,g_str_equal,g_free,(void*)free_entry);\n        newChecker-&gt;next=head;\n        head=newChecker;\n}\nvoid remove_head_node(struct Checker*head)\n{\n\n}\n\n</code></pre>\n\n<p>Lex.l</p>\n\n<pre><code>\n%{\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"y.tab.h\"\n%}\n%option noyywrap\n%%\n\"/*\"(.|\\n)\"*/\" ;\n\"tni\" {yylval.type=0;return INT;}\n\"ssalc\" {return CLASS;}\n\"rahc\" {yylval.type=1;return CHAR;}\n\"taolf\" {yylval.type=2;return FLOAT;}\n\"loob\" {yylval.type=3;return BOOL;}\n\"*rahc\" {yylval.type=4;return STRING;}\n\"fi\" {return IF;}\n\"esle\" {return ELSE;}\n\"fiesle\" {return ELSEIF;}\n\"elihw\" {return WHILE;}\n\"tsnoc\" {return CONST;}\n\"rof\" {return FOR;}\n\"ypcrts\" {return STRCPY;}\n\"nelrts\" {return STRLEN;}\n\"pmcrts\" {return STRCMP;}\n\"tacrts\" {return STRCAT;}\n\"niam\" {return MAIN;}\n\"eurt\" {return BOOL_TRUE;}\n\"eslaf\" {return BOOL_FALSE;}\n\"+\" {return ADD;}\n\"-\" {return MIN;}\n\"*\" {return MUL;}\n\"/\" {return DIV;}\n\"&gt;\" {return BIGGER;}\n\"&lt;\" {return SMALLER;}\n\"&lt;=\" {return SMALLER_EQUAL;}\n\"&gt;=\" {return GREATER_EQUAL;}\n\"++\" {return INCR;}\n\"=\" {return ASSIGN;}\n\"==\" {return EQUAL;}\n\"{\" {return OPEN_CURLY_BRACKET;}\n\"}\" {return CLOSE_CURLY_BRACKET;}\n\"(\" {return OPEN_ROUND_BRACKET;}\n\")\" {return CLOSE_ROUND_BRACKET;}\n[A-Za-z][A-Za-z0-9]* {yylval.strname=strdup(yytext);return ID;}\n[-]?[1-9][0-9]*|0 {yylval.intval=atoi(yytext);return INT_VAL;}\n[-]?([0-9]*[.])?[0-9]+ {yylval.floatval=atof(yytext);return FLOAT_VAL;}\n\\\"[^\\\"\\n]*\\\" {yylval.strval=strdup(yytext);return STRING_VAL;}\n[ \\t] ;\n\\n {yylineno++;}\n. {return yytext[0];}\n\n\n</code></pre>\n\n<p>It is still incomplete and under wroking conditions.The thing that i am trying to achieve is a symbol table for verifying at run if for example the variable was declared before use and such.</p>\n"}, {"tags": ["c", "function", "file", "scanf", "fopen"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11759143, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MY5VtlonkWM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regLQCELqolTKgAUz0Co510mTjnVw/photo.jpg?sz=128", "display_name": "mohamed benhaddou", "link": "https://stackoverflow.com/users/11759143/mohamed-benhaddou"}, "edited": false, "score": 0, "creation_date": 1577288270, "post_id": 59479590, "comment_id": 105136400, "body": "thanks a lot... but why SaveProduct() didn&#39;t return 1 and what&#39;s wrong with this line fprintf(f,&quot;Code\\tName\\tPrice\\n&quot;);"}], "tags": [], "owner": {"reputation": 561, "user_id": 10252307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5LzP8.jpg?s=128&g=1", "display_name": "darkprinx", "link": "https://stackoverflow.com/users/10252307/darkprinx"}, "is_accepted": true, "score": 1, "last_activity_date": 1577288838, "last_edit_date": 1577288838, "creation_date": 1577286391, "answer_id": 59479590, "question_id": 59479476, "link": "https://stackoverflow.com/questions/59479476/writing-and-reading-from-a-file-in-c/59479590#59479590", "title": "writing and reading from a file in c", "body": "<p>Just remove the line and run again :) </p>\n\n<pre><code>fprintf(f,\"Code\\tName\\tPrice\\n\");\n</code></pre>\n\n<p>The above line was causing the output to the save.txt file like below-</p>\n\n<pre><code>Code Name Price    // line 1\n123  aa   10       // line 2\n456  bb   20       // line 3\n789  cc   30       // line 4\n</code></pre>\n\n<p>When the program was reading the file with </p>\n\n<pre><code>fscanf(f,\"%d %s %f\",&amp;p[i].Code,p[i].Name,&amp;p[i].Price)\n</code></pre>\n\n<p>it was getting wrong input for <strong>line 1</strong>. That's why the above code from <strong>SaveProduct</strong> function should be removed so that <strong>line 1</strong> doesn't get writen in the file.</p>\n"}, {"tags": [], "owner": {"reputation": 329, "user_id": 2288914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e8785d362a66ec4c5c8fd10c71812f0?s=128&d=identicon&r=PG", "display_name": "Yingyu YOU", "link": "https://stackoverflow.com/users/2288914/yingyu-you"}, "is_accepted": false, "score": 2, "last_activity_date": 1577290923, "last_edit_date": 1592644375, "creation_date": 1577290923, "answer_id": 59480092, "question_id": 59479476, "link": "https://stackoverflow.com/questions/59479476/writing-and-reading-from-a-file-in-c/59480092#59480092", "title": "writing and reading from a file in c", "body": "<p>This is a partial answer to your question 2) why the second function, i.e. <code>displayProduct</code>, it give me infinite series of 0s...?</p>\n<p>There are at least two issues:</p>\n<p>a) Why it got 0?</p>\n<p>As @Abdullah Al Masud Tushar already answered, the first line of the file <code>save.txt</code> being read is <code>Code&lt;TAB&gt;Name&lt;TAB&gt;Price</code>, while the format string for <code>fscanf</code> is <code>&quot;%d %s %f&quot;</code>. The <code>%d</code> is expecting:</p>\n<blockquote>\n<p>Any number of decimal digits (0-9), optionally preceded by a sign (+ or -).</p>\n</blockquote>\n<p>But 'C' is met, then <code>fscanf</code> stops without filling any item and returns, leaving items unchanged. And, your struct array <code>p</code> is global variable and is initialized as all-zeroes.</p>\n<p>b) Why infinite?\n<code>fscanf</code> returns number of items being successfully filled normally; It returns EOF only when error happens or the end-of-file is reached before any data could be successfully read.</p>\n<p>In your case, due to reason of issue a), zero is returned and the condition <code>fscanf(...) != EOF</code> is always true.</p>\n<blockquote>\n<p>On success, the function returns the number of items of the argument list successfully filled. This count can match the expected number of items or be less (even zero) due to a matching failure, a reading error, or the reach of the end-of-file.</p>\n<p>If a reading error happens or the end-of-file is reached while reading, the proper indicator is set (feof or ferror). <em><strong>And, if either happens before any data could be successfully read, EOF is returned</strong></em>.</p>\n</blockquote>\n<p>Again, there are some additional issues of <code>fscanf</code>:</p>\n<p>c) In the file, <code>'\\t'</code> is used as field delimiter (when writing) but in format string of <code>fscanf</code> blank space (<code>' '</code>) is used, hence blank space is expected.</p>\n<p>d) <code>%s</code> expects any number of non-whitespace characters, stopping at the first whitespace character found. If the &quot;name&quot; input contains whitespace, it cannot be filled correctly, and what's more will confuse the later <code>%f</code>.</p>\n<p>See the manual of <code>fscanf</code> at\n<a href=\"http://www.cplusplus.com/reference/cstdio/fscanf/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdio/fscanf/</a>\nor\n<a href=\"http://man7.org/linux/man-pages/man3/fscanf.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/fscanf.3.html</a></p>\n"}], "owner": {"reputation": 27, "user_id": 11759143, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MY5VtlonkWM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regLQCELqolTKgAUz0Co510mTjnVw/photo.jpg?sz=128", "display_name": "mohamed benhaddou", "link": "https://stackoverflow.com/users/11759143/mohamed-benhaddou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59479590, "answer_count": 2, "score": 0, "last_activity_date": 1577290923, "creation_date": 1577285563, "question_id": 59479476, "link": "https://stackoverflow.com/questions/59479476/writing-and-reading-from-a-file-in-c", "title": "writing and reading from a file in c", "body": "<p>What I'm trying to do is to write 2 functions :\n a function that writes in a file and a function that reads the same file\u2026\nI face two problems :\n1-when I execute the two function at the same time :\n the first function work almost correctly but it didn\u2019t return 1 ; and the second function read my file correctly but it give me after that infinite series of 0s.\n2-when I execute only the second function(reading) , it give me infinite series of 0s and it didn\u2019t read what I have inside the file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdlib.h&gt;\n struct Product\n    {\n        int Code;\n        char Name[30];\n        float Price;\n\n    };\n    struct Product p[15];\n\nint SaveProduct(int n) // n number of product\n{\n    int i;\n     FILE *f;\n     if((f=fopen(\"save.txt\",\"w\"))==NULL)\n\n     {\n         return 0;\n     }\n     else{\n     fprintf(f,\"Code\\tName\\tPrice\\n\");\n\n\n     for(i=0;i&lt;n;i++)\n     {\n        printf(\"enter Code,Name,Price\\n\");\n      scanf(\"%d %s %f\",&amp;p[i].Code, p[i].Name,&amp;p[i].Price);\n      fprintf(f,\"%d \\t %s\\t %.2f\\n\",p[i].Code, p[i].Name,p[i].Price);\n     }\n     fclose(f);\n        return 1;\n     }\n}\nvoid displayProduct()\n    {\n\n        FILE *f;\n        if ( (f=fopen(\"save.txt\",\"r\"))==NULL )\n        {\n            printf(\"error\");\n        }\n        else\n        {int i=0;\n            printf(\"Code\\tName\\tPrice\\n\");\n           while(fscanf(f,\"%d %s %f\",&amp;p[i].Code,p[i].Name,&amp;p[i].Price) != EOF)\n\n             {\n\n                printf(\"%d\\t %s\\t %.2f\\n\",p[i].Code,p[i].Name,p[i].Price);\n                i++;\n                }\n\n            fclose(f);\n        }\n\n    }\n\n\n\n\n\nint main()\n\n{\n\n    SaveProduct(3);  //3 number of product\n      displayProduct();\n\n\n}\n\n</code></pre>\n"}, {"tags": ["c", "memory-management", "c-strings", "strtok"], "comments": [{"owner": {"reputation": 118, "user_id": 9037569, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F3AKAgU1H7M/AAAAAAAAAAI/AAAAAAAAFlQ/4F8jN8_uyRg/photo.jpg?sz=128", "display_name": "Anurag B.", "link": "https://stackoverflow.com/users/9037569/anurag-b"}, "edited": false, "score": 0, "creation_date": 1577287302, "post_id": 59479466, "comment_id": 105136209, "body": "This looks very complex. you would just check the input string character by character, and look for &#39; &#39; character to let you know that the first word has ended. Then just take in all the characters until a null character &#39;\\0&#39; is found, and you know that the second word has ended. (Because true strings end in a null character)"}], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 7586354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6b25d17bc706e1c95cc8e18bd10be80d?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Duarte", "link": "https://stackoverflow.com/users/7586354/rafael-duarte"}, "edited": false, "score": 0, "creation_date": 1577285840, "post_id": 59479504, "comment_id": 105135906, "body": "And how would I do it to have the correct value stored in my <code>second</code> variable?"}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 524, "user_id": 7586354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6b25d17bc706e1c95cc8e18bd10be80d?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Duarte", "link": "https://stackoverflow.com/users/7586354/rafael-duarte"}, "edited": false, "score": 1, "creation_date": 1577285941, "post_id": 59479504, "comment_id": 105135929, "body": "@RafaelDuarte, Allocate memory for it inside the function dynamically, using the malloc function."}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "edited": false, "score": 1, "creation_date": 1577285993, "post_id": 59479504, "comment_id": 105135946, "body": "Replace <code>char inputCopy [255];</code> with <code>char *inputCopy = malloc(255 * sizeof(char));</code>"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1577287917, "last_edit_date": 1577287917, "creation_date": 1577285787, "answer_id": 59479504, "question_id": 59479466, "link": "https://stackoverflow.com/questions/59479466/get-second-word-from-string/59479504#59479504", "title": "Get second word from string", "body": "<p>The functions return invalid pointers because they point to local arrays that will not be alive after exiting the functions As result using the pointers can invoke undefined behavior.</p>\n\n<p>You could define only one function with one more parameter that specifies which substring you are going to extract.</p>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar * GetToken( const char str[], size_t pos )\n{\n    const char delim[] = \" \\t\";\n\n    char *inputCopy = malloc( ( strlen( str ) + 1 ) );\n\n    char *p = NULL;\n\n    if ( inputCopy != NULL )\n    {\n        strcpy( inputCopy, str );\n\n        p = strtok( inputCopy, delim );\n\n        while ( p != NULL &amp;&amp; pos -- != 0 )\n        {\n            p = strtok( NULL, delim );\n        }\n\n        if ( p != NULL )\n        {\n            size_t n = strlen( p );\n            memmove( inputCopy, p, n + 1 );\n\n            p = realloc( inputCopy, n + 1 );\n        }           \n\n        if ( p == NULL )\n        {\n            free( inputCopy );\n        }\n    }\n\n    return p;\n}\n\n\nint main(void) \n{\n    char my_str[100] =\"hello world\";\n    char *first = GetToken(my_str, 0);\n    char *second = GetToken( my_str, 1 );\n\n    if ( first ) printf(\"first:%s\\n\", first);\n    if ( second ) printf(\"second:%s\\n\", second);\n\n    free( first );\n    free( second );\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1894, "user_id": 3980558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ve9D.jpg?s=128&g=1", "display_name": "Eyal Golan", "link": "https://stackoverflow.com/users/3980558/eyal-golan"}, "is_accepted": true, "score": 2, "last_activity_date": 1577290466, "last_edit_date": 1577290466, "creation_date": 1577285989, "answer_id": 59479534, "question_id": 59479466, "link": "https://stackoverflow.com/questions/59479466/get-second-word-from-string/59479534#59479534", "title": "Get second word from string", "body": "<p>You declare <code>char inputCopy[255]</code> inside of each function, and then return a pointer to it. However, the array exists only in the scope of the function, causing <strong>undefined behavior</strong>. </p>\n\n<p>You can avoid this by creating the array in the main, and passing it as an argument to the functions. Also, use <code>malloc</code> to dynamically allocate memory for the array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nchar* GetFirstToken(char str[], char inputCopy[], const char delim[])\n{\n    strcpy(inputCopy, str);\n    return strtok(inputCopy, delim);        \n}\n\nchar* GetSecondToken(char str[], char inputCopy[], const char delim[])\n{\n    strcpy(inputCopy, str);\n    char * ptr = strtok(inputCopy, delim);    \n    return strtok(NULL, delim); \n}\n\nint main(void){\n    char my_str[100] =\"hello world\";\n    char *inputCopy = malloc(255 * sizeof(char));\n    const char delim[] = \" \";\n    char *first = GetFirstToken(my_str, inputCopy, delim);\n    char *second = GetSecondToken(my_str, inputCopy, delim);\n\n    printf(\"first:%s\\n\", first);\n    printf(\"second:%s\\n\", second);\n\n    free(inputCopy);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>first:hello\nsecond:world\n</code></pre>\n\n<p>You can read more about <strong>scopes</strong> in C <a href=\"https://www.tutorialspoint.com/cprogramming/c_scope_rules.htm\" rel=\"nofollow noreferrer\">here</a>, and about <strong>malloc</strong> <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_malloc.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Also, notice that <code>GetFirstToken</code> and <code>GetSecondToken</code> have a similar functionality. Therefore, it is better to have one function that returns the nth words in a given string. Here is the basic idea:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nint main()\n{\n    char my_str[] =\"hello world i am a string\";\n    char* word;\n\n    /* get the first word from the message, seperated by\n     * space character */\n    word = strtok(my_str, \" \");\n    printf(\"1st word: %s\\n\", word);\n\n    /* the following loop gets the rest of the words until the\n     * end of the message */\n    int i=2;\n    while ((word = strtok(NULL, \" \")) != NULL)\n    {\n        printf(\"%d word: %s\\n\", i, word);\n        i++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>You can read more about such solutions <a href=\"https://gist.github.com/efeciftci/9120921\" rel=\"nofollow noreferrer\">here</a> and also in <a href=\"https://stackoverflow.com/questions/52904246/c-get-the-nth-word-in-a-string\">this thread</a>.</p>\n"}], "owner": {"reputation": 524, "user_id": 7586354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6b25d17bc706e1c95cc8e18bd10be80d?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Duarte", "link": "https://stackoverflow.com/users/7586354/rafael-duarte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1513, "favorite_count": 0, "accepted_answer_id": 59479534, "answer_count": 2, "score": 1, "last_activity_date": 1577290466, "creation_date": 1577285479, "last_edit_date": 1577288027, "question_id": 59479466, "link": "https://stackoverflow.com/questions/59479466/get-second-word-from-string", "title": "Get second word from string", "body": "<p>I'm trying to get the second word from a string in C using <code>strtok</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nchar* GetFirstToken(char str[])\n{\n    const char delim[] = \" \";\n    char inputCopy [255];\n    strcpy(inputCopy, str);\n    return strtok(inputCopy, delim);        \n}\n\nchar* GetSecondToken(char str[])\n{\n    const char delim[] = \" \";\n    char inputCopy [255];\n    strcpy(inputCopy, str);\n    char * ptr = strtok(inputCopy, delim);    \n    return strtok(NULL, delim); \n}\n\nint main(void){\n    char my_str[100] =\"hello world\";\n    char *first = GetFirstToken(my_str);\n    char *second = GetSecondToken(my_str);\n\n    printf(\"first:%s\\n\", first);\n    printf(\"second:%s\\n\", second);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>first: hello\n\nsecond: wo\n</code></pre>\n\n<p>Why isn't \"world\" the value of <code>second</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1577285362, "post_id": 59479358, "comment_id": 105135802, "body": "It is unclear what you are trying to do. For example I do not understand this phrase &quot;code to find the units and tens digit&quot; ."}], "answers": [{"tags": [], "owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "is_accepted": false, "score": 0, "last_activity_date": 1577286353, "last_edit_date": 1577286353, "creation_date": 1577285561, "answer_id": 59479475, "question_id": 59479358, "link": "https://stackoverflow.com/questions/59479358/variable-is-exceeding-specified-limit-in-for-loop/59479475#59479475", "title": "Variable is exceeding specified limit in for loop", "body": "<p>1) In the <code>else</code> block of <code>ten()</code> you are returning a value only if some condition is met. If the condition does not satisfy you are not returning anything. In that case a garbage value may be printed.</p>\n\n<p>2) To get the tenth digit, that is a lot of work. Just change the function body to -</p>\n\n<pre><code>int ten(int x) {\n return (x % 100) /10;\n}\n</code></pre>\n\n<p>The numbers upto 99 gets correct result because the condition satisfies. Lets take 99 as an example. After unit digit subtraction you got 90. When <code>i</code> becomes 9, the <code>temp%(i*10)</code> becomes 0 and <code>temp/(i*10)</code> becomes 1.</p>\n\n<p>When number is 100, after unit digit subtraction the number remains same(i.e. 100). But for values of <code>i</code>  from 1 to 9 <code>temp/(i*10)</code> never becomes 1 and the loop quits, resulting in the absurd behavior. You will get the same behavior for all the numbers that are greater than 99 using your code.</p>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 9037569, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F3AKAgU1H7M/AAAAAAAAAAI/AAAAAAAAFlQ/4F8jN8_uyRg/photo.jpg?sz=128", "display_name": "Anurag B.", "link": "https://stackoverflow.com/users/9037569/anurag-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1577286365, "creation_date": 1577286365, "answer_id": 59479588, "question_id": 59479358, "link": "https://stackoverflow.com/questions/59479358/variable-is-exceeding-specified-limit-in-for-loop/59479588#59479588", "title": "Variable is exceeding specified limit in for loop", "body": "<p>Think about what happens when the number is greater than 99. You will not be able to find a value of i b/w 1 and 9 such that the expression in the if is true. You will need a value of i > 10, but of course, then it wouldn't be the tens digit of the number.</p>\n\n<p>Your method only works for a specific case, ie, when the number is b/w 1 and 10^2. Sure, you could write some more code to make it work for numbers b/w  1 and 10^3, but that would just be a pain in the ass. Even then, you'd have to write more code if the number is greater than that.</p>\n\n<p>Try to think of a solution for the general case. To do that, two facts would be very useful:</p>\n\n<ol>\n<li>Dividing using / only gives the integer part of the answer. Eg: 66/10 = 6</li>\n<li>% This operator gives you the remainder. Eg: 59%10 = 9</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 11379773, "user_type": "registered", "profile_image": "https://graph.facebook.com/1207766932726234/picture?type=large", "display_name": "Chandra Sangala", "link": "https://stackoverflow.com/users/11379773/chandra-sangala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59479588, "answer_count": 2, "score": -3, "last_activity_date": 1577286365, "creation_date": 1577284566, "last_edit_date": 1577285349, "question_id": 59479358, "link": "https://stackoverflow.com/questions/59479358/variable-is-exceeding-specified-limit-in-for-loop", "title": "Variable is exceeding specified limit in for loop", "body": "<p>I have written code to find the units and tens digit of a number,but am facing a problem when the number is greater than 99.The value of i has been set to less than 10 inside the for loop but when i execute the code with <code>no=100</code>,I find that i has a value of 10.</p>\n\n<p>Why is this happening?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint unit(int x){\n  return x%10;\n}\n\nint ten(int x){\n  int temp=x-unit(x);\n  if(temp==0){\n    return 0;\n  }\n  else{\n    for(int i=1;i&lt;10;i++){\n        if(temp%(i*10)==0 &amp;&amp; temp/(i*10)==1){\n            return i;\n\n        }\n    }\n  }\n}\n\nint main(){\n  int no=100;\n  printf(\"%d\",ten((no)));\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 0, "creation_date": 1577284312, "post_id": 59479306, "comment_id": 105135570, "body": "Please share more information. What is the input? What is the expected output? What is the actual output? What else have you tried?"}, {"owner": {"reputation": 31, "user_id": 10118668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRci4.jpg?s=128&g=1", "display_name": "Kishor Pokharel", "link": "https://stackoverflow.com/users/10118668/kishor-pokharel"}, "edited": false, "score": 0, "creation_date": 1577285074, "post_id": 59479306, "comment_id": 105135739, "body": "hey i&#39;ve added the expected output. please check it out"}, {"owner": {"reputation": 31, "user_id": 10118668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRci4.jpg?s=128&g=1", "display_name": "Kishor Pokharel", "link": "https://stackoverflow.com/users/10118668/kishor-pokharel"}, "reply_to_user": {"reputation": 230, "user_id": 12286396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wh6sV.jpg?s=128&g=1", "display_name": "XueQing", "link": "https://stackoverflow.com/users/12286396/xueqing"}, "edited": false, "score": 0, "creation_date": 1577285119, "post_id": 59479306, "comment_id": 105135753, "body": "@XueQing Do you have the answer?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10118668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRci4.jpg?s=128&g=1", "display_name": "Kishor Pokharel", "link": "https://stackoverflow.com/users/10118668/kishor-pokharel"}, "edited": false, "score": 0, "creation_date": 1577285176, "post_id": 59479385, "comment_id": 105135765, "body": "everything looks fine on my side but the output is different"}, {"owner": {"reputation": 31, "user_id": 10118668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRci4.jpg?s=128&g=1", "display_name": "Kishor Pokharel", "link": "https://stackoverflow.com/users/10118668/kishor-pokharel"}, "edited": false, "score": 0, "creation_date": 1577285660, "post_id": 59479385, "comment_id": 105135865, "body": "@Maxsym Kosov but why is it so?"}, {"owner": {"reputation": 168, "user_id": 12330848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/157251266eeac9500403511558670ecc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxsym Kosov", "link": "https://stackoverflow.com/users/12330848/maxsym-kosov"}, "reply_to_user": {"reputation": 31, "user_id": 10118668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRci4.jpg?s=128&g=1", "display_name": "Kishor Pokharel", "link": "https://stackoverflow.com/users/10118668/kishor-pokharel"}, "edited": false, "score": 1, "creation_date": 1577286207, "post_id": 59479385, "comment_id": 105135984, "body": "Why do you need &quot;\\n&quot; in scanf function? If you are gonna input value, you should type &quot;enter&quot; so that&#39;s not needed. And we can&#39;t add any other symbols in scanf function. This is basic syntax in programming."}, {"owner": {"reputation": 31, "user_id": 10118668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRci4.jpg?s=128&g=1", "display_name": "Kishor Pokharel", "link": "https://stackoverflow.com/users/10118668/kishor-pokharel"}, "edited": false, "score": 0, "creation_date": 1577286290, "post_id": 59479385, "comment_id": 105136006, "body": "I thought it would make a new line"}], "tags": [], "owner": {"reputation": 168, "user_id": 12330848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/157251266eeac9500403511558670ecc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxsym Kosov", "link": "https://stackoverflow.com/users/12330848/maxsym-kosov"}, "is_accepted": true, "score": 3, "last_activity_date": 1577285245, "last_edit_date": 1577285245, "creation_date": 1577284781, "answer_id": 59479385, "question_id": 59479306, "link": "https://stackoverflow.com/questions/59479306/why-can-not-i-print-an-element-of-an-array-right-after-assigning-it-in-c-in-this/59479385#59479385", "title": "Why can not I print an element of an array right after assigning it in C in this code?", "body": "<p>You should erase \"\\n\" in scanf function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int a[5];\n    int i;\n    for(i = 0; i&lt; 5; i++) {\n        printf(\"Enter: \");\n        scanf(\"%d\", &amp;a[i]);\n        printf(\"You entered: %d\\n\", a[i]);\n    }\n}\n\nEnter: 1\nYou entered: 1\nEnter: 2\nYou entered: 2\nEnter: 3\nYou entered: 3\nEnter: 4\nYou entered: 4\nEnter: 5\nYou entered: 5\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10118668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRci4.jpg?s=128&g=1", "display_name": "Kishor Pokharel", "link": "https://stackoverflow.com/users/10118668/kishor-pokharel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 59479385, "answer_count": 1, "score": -3, "last_activity_date": 1577285245, "creation_date": 1577284098, "last_edit_date": 1577284909, "question_id": 59479306, "link": "https://stackoverflow.com/questions/59479306/why-can-not-i-print-an-element-of-an-array-right-after-assigning-it-in-c-in-this", "title": "Why can not I print an element of an array right after assigning it in C in this code?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int a[5];\n    int i;\n\n    for(i=0; i&lt;5; i++) {\n        printf(\"Enter: \");\n        scanf(\"%d\\n\", &amp;a[i]);\n        printf(\"You entered: %d\\n\", a[i]);\n    }\n\n}\n</code></pre>\n\n<p>I wonder why I can't print the number this way? (Right after assigning it)</p>\n\n<p>The output is:\n<strong><br>Enter: 5<br>\n6<br>\nYou entered: 5<br>\nEnter: 3<br>\nYou entered: 6<br>\nEnter: 8<br>\nYou entered: 3<br>\nEnter: 9<br>\nYou entered: 8<br>\nEnter: 1<br>\nYou entered: 9<br></strong></p>\n\n<p>and i expect it to be:\n<strong><br>Enter: 5<br>\nYou entered: 5<br>\nEnter: 6<br>\nYou entered: 6<br></strong></p>\n\n<p>and so on</p>\n"}, {"tags": ["c", "visual-studio", "error-handling", "runtime-error"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12401988"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1577284694, "post_id": 59479247, "comment_id": 105135665, "body": "@user3121023 I fixed that, still did not resolve the issue.  When I comment out all free(); statements and fclose(); program does not give Assertion Failed but it does not return value, it&#39; just gives sound and stops."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12401988"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1577285555, "post_id": 59479247, "comment_id": 105135834, "body": "Well, strtok_s does change lineBuffer. After strtok_s is called, lineBuffer points to part of the string that is left after taking everything before the delimeter, &quot;,&quot; in this case."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12401988"}, "edited": false, "score": 1, "creation_date": 1577284801, "post_id": 59479287, "comment_id": 105135682, "body": "This is not the problem."}], "tags": [], "owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "is_accepted": false, "score": 0, "last_activity_date": 1577283953, "creation_date": 1577283953, "answer_id": 59479287, "question_id": 59479247, "link": "https://stackoverflow.com/questions/59479247/c-debug-assertion-failed-crtisvalidheappointerblock/59479287#59479287", "title": "C - Debug Assertion Failed: _CrtIsValidHeapPointer(block)", "body": "<p>At least this line is wrong:</p>\n\n<pre><code>movie* movies = (movie*)calloc(sizeof(movie), numberOfMovies);\n</code></pre>\n\n<p>The parameters are in wrong order. To fix, change it to:</p>\n\n<pre><code>movie* movies = (movie*)calloc( numberOfMovies, sizeof(movie) );\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12401988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577283953, "creation_date": 1577283626, "question_id": 59479247, "link": "https://stackoverflow.com/questions/59479247/c-debug-assertion-failed-crtisvalidheappointerblock", "title": "C - Debug Assertion Failed: _CrtIsValidHeapPointer(block)", "body": "<p>I'm trying to read from .csv file in C using VS2019 and am getting Assertion Error.\nAssertion error that I'm getting is _CrtIsValidHeapPointer which I believe is linked with memory leak but I'm unable to realize what's triggering it.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>My struct looks like this:</p>\n\n<pre><code>struct movie\n{\n    double score;\n    char* title;\n    int year;\n    char* actors;\n    char* genre;\n};\n</code></pre>\n\n<p>And my function is:</p>\n\n<pre><code>void readMoviesFromCSV(movie* movies)\n{\n    FILE* inputFile;\n    fopen_s(&amp;inputFile, \"Movies.csv\", \"r\");\n\n    if (inputFile == NULL)\n    {\n        fclose(inputFile);\n        printf(\"Error opening file.\\n\");\n        exit(1);\n    }\n\n    char* lineBuffer = (char*)calloc(sizeof(char), 2048);\n    char* current = (char*)calloc(sizeof(char), 512);\n\n    fgets(lineBuffer, 2048, inputFile); // Discarding of the header\n\n    for (int i = 0; i &lt; numberOfMovies; i++)\n    {\n        fgets(lineBuffer, 2048, inputFile);\n\n        current = strtok_s(lineBuffer, \",\", &amp;lineBuffer);\n        (movies + i)-&gt;score = atof(current);\n\n        current = strtok_s(lineBuffer, \",\", &amp;lineBuffer);\n        strcpy_s((movies + i)-&gt;title, 512, current);\n\n        current = strtok_s(lineBuffer, \",\", &amp;lineBuffer);\n        (movies + i)-&gt;year = atoi(current);\n\n        current = strtok_s(lineBuffer, \",\", &amp;lineBuffer);\n        strcpy_s((movies + i)-&gt;actors, 512, current);\n\n        current = strtok_s(lineBuffer, \"\\n\", &amp;lineBuffer);\n        strcpy_s((movies + i)-&gt;genre, 512, current);\n\n        printf(\"ID: %d\\nScore: %.2lf\\nTitle: %s\\nYear: %d\\nActors: %s\\nGenre: %s\\n\\n\", i + 1, (movies + i)-&gt;score, (movies + i)-&gt;title, (movies + i)-&gt;year, (movies + i)-&gt;actors, (movies + i)-&gt;genre);\n    }\n\n    free(lineBuffer);\n    free(current);\n    fclose(inputFile);\n    return;\n}\n</code></pre>\n\n<p>I allocated my movies array in main:</p>\n\n<pre><code>int main()\n{\n    movie* movies = (movie*)calloc(sizeof(movie), numberOfMovies);\n    for (int i = 0; i &lt; numberOfMovies; i++)\n    {\n        (movies + i)-&gt;title = (char*)calloc(sizeof(char), 512);\n        (movies + i)-&gt;actors = (char*)calloc(sizeof(char), 512);\n        (movies + i)-&gt;genre = (char*)calloc(sizeof(char), 512);\n    }\n\n    readMoviesFromCSV(movies);\n    // free(movies);\n    return 0;\n}\n</code></pre>\n\n<p>What might be the problem here?</p>\n"}, {"tags": ["c", "pointers", "memory", "standards"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1577283329, "post_id": 59479183, "comment_id": 105135305, "body": "Pointers are not integers but are processed as numeric values. For example how are you going to represent a machine address?!"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1577283347, "post_id": 59479183, "comment_id": 105135312, "body": "The C standard uses the term <i>abstract machine</i>. The actual implementation is relevant only to the (hardware) implementors."}, {"owner": {"reputation": 2333, "user_id": 886227, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/qRFBm.png?s=128&g=1", "display_name": "zduny", "link": "https://stackoverflow.com/users/886227/zduny"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1577283511, "post_id": 59479183, "comment_id": 105135353, "body": "@VladfromMoscow Well, for example: one could imagine a machine that addresses memory cells the same way we address our homes. It would be dumb, but possible."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1577283558, "post_id": 59479183, "comment_id": 105135378, "body": "See this answer <a href=\"https://stackoverflow.com/a/15151542/817643\">stackoverflow.com/a/15151542/817643</a>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1577283573, "post_id": 59479183, "comment_id": 105135382, "body": "@mrpyo it is not the address is the reference which can be anything."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1577283859, "post_id": 59479183, "comment_id": 105135456, "body": "<i>&quot;does C require arrays/buffers etc. to be contiguous&quot;</i> Yes, <i>&quot;An array type describes a contiguously allocated nonempty set of objects...&quot;</i> (C11)"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577284245, "post_id": 59479183, "comment_id": 105135552, "body": "Your argument that pointers should be integral is flawed.   Yes, pointers support a lot of arithmetic operations that integral types do.   But, if you look at the arithmetic operations supported by pointers, a lot of them are also supported by floating point types.    There are operations supported by pointers (e.g. dereferencing) that are supported by neither integral nor floating point types."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1577284526, "post_id": 59479183, "comment_id": 105135627, "body": "@VladfromMoscow: Other ways of addressing memory other than a simple numbering of bytes include segment and offset, word addressing (where the words are addressed by hardware and the C implementation has to manufacture addresses for bytes, which may result in <code>int *</code> and <code>char *</code> having different representations), pointers with additional information in them (such as data for security checks), pointers that do not point directly to main memory but to a data structure with information about loading necessary data from disk, bank-switched memory, and more."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1577288171, "post_id": 59479183, "comment_id": 105136374, "body": "@EricPostpischil In any case addresses are stored as numeric values whether there is a flat memory or a segmented memory."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1577317481, "post_id": 59479183, "comment_id": 105141530, "body": "@VladfromMoscow If you want to be pedantic, as bit-patterns which can be interpreted among others as a number, and probably three different &quot;natural&quot; ways, floating-point, signed and unsigned. Whether that reinterpretation is natural depends on the pointer-format."}], "answers": [{"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 3, "last_activity_date": 1577305580, "last_edit_date": 1577305580, "creation_date": 1577283615, "answer_id": 59479246, "question_id": 59479183, "link": "https://stackoverflow.com/questions/59479183/does-the-c-standard-require-pointers-to-be-integer-numbers/59479246#59479246", "title": "Does the C standard require pointers to be (integer) numbers?", "body": "<p>No, pointers need not be plain numbers.</p>\n\n<p>If you read the standard, there are provisions for that:</p>\n\n<ol>\n<li><p>Two pointers to unrelated objects (meaning not part of a bigger object, remember structs and arrays) may not be compared, except for equality.</p>\n\n<blockquote>\n  <h3>6.5.8 Relational operators</h3>\n  \n  <p>[...]<br>\n  5 When two pointers are compared, the result depends on the relative locations in the address space of the objects pointed to. If two pointers to object or incomplete types both point to the same object, or both point one past the last element of the same array object, they compare equal. If the objects pointed to are members of the same aggregate object, pointers to structure members declared later compare greater than pointers to members declared earlier in the structure, and pointers to array elements with larger subscript\n  values compare greater than pointers to elements of the same array with lower subscript values. All pointers to members of the same union object compare equal. If the expression <code>P</code> points to an element of an array object and the expression <code>Q</code> points to the last element of the same array object, the pointer expression <code>Q+1</code> compares greater than <code>P</code>. In all other cases, the behavior is unde\ufb01ned.</p>\n</blockquote></li>\n<li><p>Two pointers to unrelated objects may not be subtracted.</p>\n\n<blockquote>\n  <h3>6.5.6 Additive operators</h3>\n  \n  <p>[...]<br>\n  9 When two pointers are subtracted, both shall point to elements of the same array object, or one past the last element of the array object; the result is the difference of the subscripts of the twoarray elements. The size of the result is implementation-de\ufb01ned, and its type (a signed integer type) is <code>ptrdiff_t</code> de\ufb01ned in the <code>&lt;stddef.h&gt;</code> header. If the result is not representable in an object of that type, the behavior is unde\ufb01ned. In other words, if the expressions <code>P</code> and <code>Q</code> point to, respectively,the <em>i</em>-th and <em>j</em>-th elements of an array object, the expression <code>(P)-(Q)</code> has the value <em>i\u2212j</em> provided the value \ufb01ts in an object of type <code>ptrdiff_t</code>. Moreover, if the expression <code>P</code> points either to an element of an array object or one past the last element of an array object, and the expression <code>Q</code> points to the last element of the same array object, the expression <code>((Q)+1)-(P)</code> has the same\n  value as <code>((Q)-(P))+1</code> and as <code>-((P)-((Q)+1))</code>, and has the value zero if the expression <code>P</code> points one past the last element of the array object, even though the expression <code>(Q)+1</code> does not point to an element of the array object.91) </p>\n</blockquote></li>\n<li><p>There may not be a way to represent a pointer as a number, as no suitable type might exist. Thus, trying to convert might result in Undefined Behavior.</p>\n\n<p>Any specific implementation defining a behavior does not mean it isn't UB according to the standard.</p>\n\n<blockquote>\n  <h3>6.3.2.3 Pointers</h3>\n  \n  <p>[...]<br>\n  6 Any pointer type may be converted to an integer type. Except as previously speci\ufb01ed, the result is implementation-de\ufb01ned. If the result cannot be represented in the integer type, the behavior is unde\ufb01ned. The result need not be in the range of values of anyinteger type.</p>\n  \n  <h3>7.18.1.4 Integer types capable of holding object pointers</h3>\n  \n  <p>1 The following type designates a signed integer type with the property that any valid pointer to <code>void</code> can be converted to this type, then converted back to pointer to <code>void</code>, and the result will compare equal to the original pointer:</p>\n\n<pre><code>intptr_t\n</code></pre>\n  \n  <p>The following type designates an unsigned integer type with the property that any valid pointer to <code>void</code> can be converted to this type, then converted back to pointer to <code>void</code>, and the result will compare equal to the original pointer:</p>\n\n<pre><code>uintptr_t\n</code></pre>\n  \n  <p>These types are optional.</p>\n</blockquote></li>\n</ol>\n\n<p>That's just off the top of my head, I'm sure there's more.</p>\n\n<p>All quotes from n1256 (C99 draft).</p>\n\n<p>Arrays have always been required to be contiguous.</p>\n"}, {"tags": [], "owner": {"reputation": 144, "user_id": 2982586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56dea6792e3195dcbaff4e46505f4dae?s=128&d=identicon&r=PG&f=1", "display_name": "Math Lover", "link": "https://stackoverflow.com/users/2982586/math-lover"}, "is_accepted": false, "score": 0, "last_activity_date": 1577284090, "creation_date": 1577284090, "answer_id": 59479304, "question_id": 59479183, "link": "https://stackoverflow.com/questions/59479183/does-the-c-standard-require-pointers-to-be-integer-numbers/59479304#59479304", "title": "Does the C standard require pointers to be (integer) numbers?", "body": "<p>To answer to your second question in arrays elements are in contiguous Memory locations. Thats why you use pointer arithmetic to move between elements.</p>\n"}], "owner": {"reputation": 2333, "user_id": 886227, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/qRFBm.png?s=128&g=1", "display_name": "zduny", "link": "https://stackoverflow.com/users/886227/zduny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 59479246, "answer_count": 2, "score": 1, "last_activity_date": 1577305580, "creation_date": 1577283017, "last_edit_date": 1577283452, "question_id": 59479183, "link": "https://stackoverflow.com/questions/59479183/does-the-c-standard-require-pointers-to-be-integer-numbers", "title": "Does the C standard require pointers to be (integer) numbers?", "body": "<p>Does the C standard require pointers to be (integer) numbers?</p>\n\n<p>One may argue that yes, because of pointer arithmetic...</p>\n\n<p>But on the other hand operations like <code>--</code> or <code>++</code> may be understood as <em>previous memory location</em>, <em>next memory location</em>, depending on how they are described in the standard, and actual implementation may use any representation to hold pointer data (as long as mentioned operations are implemented)...</p>\n\n<p>Another question comes to mind - does C require arrays/buffers etc. to be contiguous, i.e. next element is stored in <em>next memory location</em> (<code>++p</code> where p is a pointer)? I ask because you can often see implementations online that seem to assume that it does.</p>\n"}, {"tags": ["c", "multithreading", "unix", "mutex", "condition-variable"], "comments": [{"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 1, "creation_date": 1577283661, "post_id": 59479143, "comment_id": 105135405, "body": "To me, it seems that everything <b>is already clearly explained in the question</b>. Obviously, assuming there is no data to consume, first code sample will loop forever waiting data to be available while in the second case the thread will be suspended while waiting the condition variable. A thread that sleep waiting clearly wastes less CPU than one that do busy waiting testing a mutex at a fast rate. In first case, the mutex only wait producer mutex is unlock not that data is available."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577284383, "post_id": 59479143, "comment_id": 105135582, "body": "@Phil1970 How will the first code sample loop forever since it&#39;s blocked by trying to lock a mutex owned by the producer? There is no busy test in the loop of the first version. The consumer is blocked -&gt; producer increase <code>avail</code>, unblocks the mutex -&gt; consumer continues."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 2, "creation_date": 1577285113, "post_id": 59479143, "comment_id": 105135752, "body": "You assume that the producer always have the mutex locked. When it is not the case, the consumer might be able to loop hundreds of time when there is no available data (let say that the producer take a lot of time to produce an item and then lock the mutex a short time to insert the item)."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577285573, "post_id": 59479143, "comment_id": 105135843, "body": "@Phil1970 Yes you are right :(. Now I get it. Thanks. I suggest making it as an answer and then I can accept and close this question."}], "answers": [{"comments": [{"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1577284929, "post_id": 59479238, "comment_id": 105135706, "body": "Thank you first. <i>&quot;but you do not have a mechanism to actually let the consumer sleep so not to waste precious CPU that can be used by the producer in order to produce more work.&quot;</i>. Doesn&#39;t the consumer thread in the first version sleep when it&#39;s blocked by trying to lock a mutex owned by the producer?"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1577285082, "post_id": 59479238, "comment_id": 105135743, "body": "From your answer, you seem to indicate that a thread blocked by trying to lock a locked mutex and <code>pthread_condi_wait</code> have different low-level effects. Could you explain a bit more about this?"}, {"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "reply_to_user": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1577285655, "post_id": 59479238, "comment_id": 105135862, "body": "Your mutex is unlocked and them immediately locked again to continue producing, so the consumer doesn&#39;t have time to lock it."}, {"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "reply_to_user": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1577285774, "post_id": 59479238, "comment_id": 105135889, "body": "Think of a mutex as a resource lock. You want to make sure that only 1 thread is using the resource. Your producer is never done using the resource, it wants to continue producing. A condition variable has no ties to a resource, it is a means for 1 thread to signal to another thread to wake up. There is no resource ownership here."}], "tags": [], "owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "is_accepted": false, "score": 0, "last_activity_date": 1577283486, "creation_date": 1577283486, "answer_id": 59479238, "question_id": 59479143, "link": "https://stackoverflow.com/questions/59479143/why-this-example-using-mutex-is-less-efficient-compared-to-another-one-with-addi/59479238#59479238", "title": "Why this example using mutex is less efficient compared to another one with additional condition variable?", "body": "<p>To start off, both are problematic. You want the producer to produce items outside the lock, and use the lock only to enqueue the job and notify the consumer about it, and you weant the consumer to wait and dequeue inside the lock, but to \"do something\" with the job OUTSIDE of the lock.</p>\n\n<p>Now, regarding the condition variable: A mutex allows you to synchronize the code of two or more threads to ensure that the code within the mutex runs with no interruptions in order to maintain data integrity: if 2 threads run i++ at the same time you have no guarantee that i will grow exactly by 2. So the mutex here solves the problem of enqueuing/dequeuing from one queue (or in this case the <code>avail</code> variable) at the same time, but you do not have a mechanism to actually let the consumer sleep so not to waste precious CPU that can be used by the producer in order to produce more work. This is where the condition variable comes to help the consumer to sleep until the producers sets <code>avail&gt;0</code> and wakes the consumer up.</p>\n\n<p>Example producer:</p>\n\n<pre><code>while (true) {\n    // produce outside the lock\n    ...\n\n    pthread_mutex_lock(&amp;mtx);   // lock\n    ++avail;                    // update new job \n    pthread_cond_signal(&amp;cond); // wake up consumer\n    pthread_mutex_unlock(&amp;mtx); // unlock\n}\n</code></pre>\n\n<p>Example consumer:</p>\n\n<pre><code>while (true) {\n    pthread_mutex_lock(&amp;mtx);   // lock\n    while (avail&lt;=0)            // wait for new job\n        pthread_cond_wait(&amp;cond, &amp;mtx);\n    --avail;                    // get the new job \n    pthread_mutex_unlock(&amp;mtx); // unlock\n\n    // consume job outside the lock\n}\n</code></pre>\n\n<p><strong>Note that I have removed error handling for simplification</strong></p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Sleeping_barber_problem\" rel=\"nofollow noreferrer\">For more reading</a></p>\n"}], "owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577377601, "creation_date": 1577282688, "question_id": 59479143, "link": "https://stackoverflow.com/questions/59479143/why-this-example-using-mutex-is-less-efficient-compared-to-another-one-with-addi", "title": "Why this example using mutex is less efficient compared to another one with additional condition variable?", "body": "<p>An example from <em>The Linux Programming Interface</em>:</p>\n\n<blockquote>\n  <p>In the producer threads, we would have code such as the following:</p>\n</blockquote>\n\n<pre><code>static pthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;\nstatic int avail = 0;\n\n/* Code to produce a unit omitted */\ns = pthread_mutex_lock(&amp;mtx);\nif (s != 0)\n    errExitEN(s, \"pthread_mutex_lock\");\n\navail++; /* Let consumer know another unit is available */\n\ns = pthread_mutex_unlock(&amp;mtx);\nif (s != 0)\n    errExitEN(s, \"pthread_mutex_unlock\");\n</code></pre>\n\n<blockquote>\n  <p>And in the main (consumer) thread, we could employ the following code:</p>\n</blockquote>\n\n<pre><code>for (;;) {\n    s = pthread_mutex_lock(&amp;mtx);\n    if (s != 0)\n        errExitEN(s, \"pthread_mutex_lock\");\n    while (avail &gt; 0) {\n        /* Consume all available units */\n        /* Do something with produced unit */\n        avail--;\n    }\n    s = pthread_mutex_unlock(&amp;mtx);\n    if (s != 0)\n        errExitEN(s, \"pthread_mutex_unlock\");\n}\n</code></pre>\n\n<blockquote>\n  <p>The above code works, <strong>but it wastes CPU time</strong>, <strong>because the main thread\n  continually loops</strong>,  checking the state of the variable <code>avail</code>. A\n  condition variable remedies this problem. It allows a thread to sleep\n  (wait) until another thread notifies (signals) it that it must do\n  something.</p>\n</blockquote>\n\n<hr>\n\n<p>The book then gives what he thinks is a better version,  with condition variable:</p>\n\n<pre><code>static pthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;\nstatic pthread_cond_t cond = PTHREAD_COND_INITIALIZER;\nstatic int avail = 0;\n</code></pre>\n\n<p>Producer thread:</p>\n\n<pre><code>/* Code to produce a unit omitted */\ns = pthread_mutex_lock(&amp;mtx);\nif (s != 0)\n    errExitEN(s, \"pthread_mutex_lock\");\n\navail++;  /* Let consumer know another unit is available */\n\ns = pthread_mutex_unlock(&amp;mtx);\nif (s != 0)\n    errExitEN(s, \"pthread_mutex_unlock\");\n\ns = pthread_cond_signal(&amp;cond); /* Wake sleeping consumer */\nif (s != 0)\n    errExitEN(s, \"pthread_cond_signal\");\n</code></pre>\n\n<p>Consumer thread:</p>\n\n<pre><code>for (;;) {\n    s = pthread_mutex_lock(&amp;mtx);\n    if (s != 0)\n        errExitEN(s, \"pthread_mutex_lock\");\n    while (avail == 0) {            /* Wait for something to consume */\n        s = pthread_cond_wait(&amp;cond, &amp;mtx);\n        if (s != 0)\n            errExitEN(s, \"pthread_cond_wait\");\n    }\n\n    while (avail &gt; 0) {             /* Consume all available units */\n        /* Do something with produced unit */\n        avail--;\n    }\n\n    s = pthread_mutex_unlock(&amp;mtx);\n    if (s != 0)\n        errExitEN(s, \"pthread_mutex_unlock\");\n    /* Perhaps do other work here that doesn't require mutex lock */\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Question</strong>: Why the first version is less effcient(wastes CPU time) compared to the second one? I can't see the difference.</p>\n\n<p>Btw, could you give me an example which may illustrate the author's point of view, which I think is:<br>\nYou can use mutex along with condition variable to improve perfomance, compared to the one that uses only mutex.</p>\n"}, {"tags": ["c", "zlib"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1577498381, "post_id": 59478821, "comment_id": 105187813, "body": "Note that unlike zip, zlib is not a container format. Thus if you compress multiple files, they will be effectively concatenated together. This is why we typically compress tar files."}], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 5504692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IfpUyEOZ8SI/AAAAAAAAAAI/AAAAAAAAAEU/j_Ka3vfEOGc/photo.jpg?sz=128", "display_name": "B Abali", "link": "https://stackoverflow.com/users/5504692/b-abali"}, "is_accepted": false, "score": -1, "last_activity_date": 1577496064, "creation_date": 1577496064, "answer_id": 59507426, "question_id": 59478821, "link": "https://stackoverflow.com/questions/59478821/how-to-use-zlib-to-compress-more-than-one-file-at-a-time/59507426#59507426", "title": "how to use Zlib to compress more than one file at a time?", "body": "<p>You can concatenate the compressed outputs in your zpipe.c based code. \nDo not fclose() the output file. Keep appending to it.</p>\n\n<p>gunzip of the concatenated file is equivalent to <code>cat file1 file2</code>. If you\nwant to recover the multiple files will need to uncat the output file yourself\nin your zpipe.c based code. Basically, continue fread() even though inflate()\nreturned you a Z_STREAM_END.</p>\n\n<p>Here is a proof that concatenating works</p>\n\n<pre><code>$ echo \"this is file 1\" &gt; file1\n$ echo \"this is file 2\" &gt; file2\n$ gzip file1\n$ gzip file2\n$ cat file1.gz file2.gz &gt; files.gz\n$ rm file1.gz file2.gz\nrm: remove regular file 'file1.gz'? y\nrm: remove regular file 'file2.gz'? y\n$ gunzip files.gz\n$ cat files\nthis is file 1\nthis is file 2\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12595690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea480d02309612e49b176e1fda2e351?s=128&d=identicon&r=PG&f=1", "display_name": "Yuha", "link": "https://stackoverflow.com/users/12595690/yuha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577496322, "creation_date": 1577280284, "last_edit_date": 1577496322, "question_id": 59478821, "link": "https://stackoverflow.com/questions/59478821/how-to-use-zlib-to-compress-more-than-one-file-at-a-time", "title": "how to use Zlib to compress more than one file at a time?", "body": "<p>I know <code>minizip</code> can do this\uff0cbut that's too complex. And for some reason i can only include <code>zlib.h</code>.</p>\n\n<p>I am try to do this based on <code>zpipe.c</code>. I expect to output a <code>.z</code> or <code>.gz</code> that contains different files (include directory is not necessary).</p>\n\n<p>My way is </p>\n\n<p><code>deflateInit()-&gt;deflateSetHeader()-&gt;fread()-&gt;deflate()-&gt;fwrite()-&gt;deflateEnd()</code></p>\n\n<p>, then do it again by open <code>output.z</code> again in an additional way.The result is that 2 files be compressed to one file in the <code>output.z</code>, that may not be what i want.</p>\n\n<p>Is it possible to  compress more than one file with a few lines of code?</p>\n"}, {"tags": ["c", "dynamic", "malloc", "free", "c99"], "comments": [{"owner": {"reputation": 1064, "user_id": 551967, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a7a36c264afc0dc84a919dcbf3b92c69?s=128&d=identicon&r=PG", "display_name": "shan", "link": "https://stackoverflow.com/users/551967/shan"}, "edited": false, "score": 1, "creation_date": 1577280307, "post_id": 59478761, "comment_id": 105134592, "body": "You put <code>word</code> pointer to <code>words</code> array which comes from the caller, and then you delete it. Don&#39;t do that. If you plan to use allocated memory later, don&#39;t delete it. This may be the cause for your bug."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1577280677, "post_id": 59478761, "comment_id": 105134683, "body": "Only call <code>free</code> when that what is allocated is no longer needed."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1577280752, "post_id": 59478761, "comment_id": 105134704, "body": "Do not forget to null-terminate the string, e.g. <code>word[j]=&#39;\\0&#39;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12593341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41bdb044b44f441c8003ef13bfeb227?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel0909", "link": "https://stackoverflow.com/users/12593341/daniel0909"}, "edited": false, "score": 0, "creation_date": 1577281171, "post_id": 59478862, "comment_id": 105134819, "body": "but how to free all the pointers? that&#39;s my question. As you can see I tried to use free and it didn&#39;t work"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 11, "user_id": 12593341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41bdb044b44f441c8003ef13bfeb227?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel0909", "link": "https://stackoverflow.com/users/12593341/daniel0909"}, "edited": false, "score": 1, "creation_date": 1577281307, "post_id": 59478862, "comment_id": 105134852, "body": "@Daniel0909, the question is not <i>how</i> to free the pointers, but <i>when</i> to free the pointers."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 11, "user_id": 12593341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41bdb044b44f441c8003ef13bfeb227?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel0909", "link": "https://stackoverflow.com/users/12593341/daniel0909"}, "edited": false, "score": 0, "creation_date": 1577281937, "post_id": 59478862, "comment_id": 105134988, "body": "@Daniel0909 In a different function. You&#39;re passing <code>malloc</code>d pointers to your caller via <code>words</code>. Those pointers had better be valid. <code>free</code>ing invalidates them. <code>free</code>ing doesn&#39;t make sense here."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1577280610, "creation_date": 1577280610, "answer_id": 59478862, "question_id": 59478761, "link": "https://stackoverflow.com/questions/59478761/free-doesnt-work-as-expected-after-calling-malloc/59478862#59478862", "title": "Free() doesn&#39;t work as expected after calling malloc()", "body": "<p>You put a <code>malloc</code>'d <code>char*</code> into a caller-provided <code>words[i]</code> and then you free it. That doesn't make sense. If you free it, the caller can't do anything with it.</p>\n\n<p>If you want the <code>malloc</code>'d strings to be minimal you could <code>realloc</code> them or you could read into a large buffer (allocated perhaps at the start of the function) and then copy the result into a <code>malloc</code>'d buffer that's sized just right.</p>\n\n<p>Note that you're also failing to check <code>scanf</code> for errors and that you're leaking memory if you get a memory failure in the middle of the function\u2014by returning -1, you effectively lose info on how many elements of <code>words</code> have been filled with owning pointers. You might want to return that info (<code>return i;</code>) or to free all pointers allocated by the function before the <code>malloc</code> failure.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1577309556, "creation_date": 1577309556, "answer_id": 59481987, "question_id": 59478761, "link": "https://stackoverflow.com/questions/59478761/free-doesnt-work-as-expected-after-calling-malloc/59481987#59481987", "title": "Free() doesn&#39;t work as expected after calling malloc()", "body": "<p>There are multiple problems in your code:</p>\n\n<ul>\n<li>you free the memory allocated for each word, yet you return pointers to the freed blocks in the array supplied by the caller, causing undefined behavior when the caller will dereference these pointers.</li>\n<li>your test for end of file is incorrect: <code>scanf()</code> will return <code>EOF</code> then, bu the character will not be set to <code>EOF</code>, which might not be appropriate for a <code>char</code> anyway. You should use <code>getchar()</code> and make <code>ch</code> an <code>int</code>.</li>\n<li>you should set a null terminator at the end of the string read.</li>\n<li>you could use <code>realloc</code> to shrink the block of memory once you know the string length.</li>\n</ul>\n\n<p>Here is a modified version:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int read_words(char *words[], int size, int max_str_len) {\n    char *word, *p;\n    int i, j, ch;\n    for (i = 0; i &lt; size;) {\n        word = (char *)malloc(max_str_len + 1);\n        if (word == NULL) {\n            /* free the words allocated so far and return a failure code */\n            while (i-- &gt; 0)\n                free(words[i];\n            return -1;\n        }\n        for (j = 0; j &lt; max_str_len; ++j) {\n            ch = getchar();\n            if (ch == '\\n' || ch == EOF || ch == 'R') break;\n            word[j] = ch;\n        }\n        if (j == 0 &amp;&amp; (ch == EOF || ch == 'R'))\n            break;\n        word[j] = '\\0';\n        p = (char *)realloc(word, j + 1);\n        if (p != NULL)\n            word = p;\n        words[i++] = word;\n        if (ch == EOF || ch == 'R')\n            break;\n    }\n    return i;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12593341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41bdb044b44f441c8003ef13bfeb227?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel0909", "link": "https://stackoverflow.com/users/12593341/daniel0909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577309556, "creation_date": 1577279803, "last_edit_date": 1577308642, "question_id": 59478761, "link": "https://stackoverflow.com/questions/59478761/free-doesnt-work-as-expected-after-calling-malloc", "title": "Free() doesn&#39;t work as expected after calling malloc()", "body": "<p>I wrote the following function in C but have 2 problems:</p>\n\n<ol>\n<li><p>I am asked to free the dynamically allocated memory to prevent using too much RAM but the line <code>free(word)</code> just causes bugs to my program.\nif I delete it everything works fine, why is that happening? I used free after I finished using <code>word</code> as suggested in many different articles.</p></li>\n<li><p>I am requested to use malloc with the minimum needed space but how could I do that?\ncurrently my code allocates <code>max_str_len</code> blocks of RAM but if the word was much shorter like <code>a</code> letter I don't want to allocate 200 blocks for that.\nAny suggestions please?</p></li>\n</ol>\n\n<pre><code>int read_words(char *words[], int size, int max_str_len) {\n    char *word;\n    char ch;\n    int i;\n    for (i = 0; i &lt; size; ++i) {\n        word = (char *)malloc((max_str_len + 1) * sizeof(char));\n        if (word == NULL)\n            return -1;\n        for (int j = 0; j &lt; max_str_len; ++j) {\n            scanf(\"%c\", &amp;ch);\n            if (ch == '\\n') break;\n            if (ch == EOF || ch == 'R') return i;\n            word[j] = ch;\n        }\n        words[i] = word;\n        free(word);\n    }\n    return i;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1577281215, "post_id": 59478743, "comment_id": 105134833, "body": "Post code, not links."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12421507, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAzi-yRfSQEdHMvGaKt8szSLKkFhNI3xHibNp-RFg=k-s128", "display_name": "Asher Manangan", "link": "https://stackoverflow.com/users/12421507/asher-manangan"}, "edited": false, "score": 0, "creation_date": 1577397675, "post_id": 59482940, "comment_id": 105161747, "body": "Thank you for answering"}], "tags": [], "owner": {"reputation": 1959, "user_id": 12094894, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NjIomZJlN5g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reQRTujazUTsx8ooT0_rHUW6q7FPA/photo.jpg?sz=128", "display_name": "Simon Crane", "link": "https://stackoverflow.com/users/12094894/simon-crane"}, "is_accepted": true, "score": 0, "last_activity_date": 1577322090, "creation_date": 1577322090, "answer_id": 59482940, "question_id": 59478743, "link": "https://stackoverflow.com/questions/59478743/c-how-to-detect-a-re-entry-of-a-char-character/59482940#59482940", "title": "C: How to detect a re-entry of a char character?", "body": "<p>How about you have an array of length 256 (assuming you use single-byte chars), initialise all values to 0.  Then when a character is entered, cast it to int, look up if it has been entered before, and then set the corresponding array element to 1.  </p>\n\n<pre><code>int entered_char[256] = {0};\n\n...\n\n// in the main game loop, when you receive a guess\nif (entered_char[(int) guess]){\n... //already guessed\n} else {\n... //new guess\n    entered_char[(int) guess] = 1;\n}\n</code></pre>\n\n<p>Note that this could be made much more memory efficient by using bit shifting to store one bit per \"has this character been guessed?\" but I couldn't be bothered.</p>\n"}], "owner": {"reputation": 13, "user_id": 12421507, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAzi-yRfSQEdHMvGaKt8szSLKkFhNI3xHibNp-RFg=k-s128", "display_name": "Asher Manangan", "link": "https://stackoverflow.com/users/12421507/asher-manangan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1577323085, "accepted_answer_id": 59482940, "answer_count": 1, "score": -3, "last_activity_date": 1577322090, "creation_date": 1577279635, "question_id": 59478743, "link": "https://stackoverflow.com/questions/59478743/c-how-to-detect-a-re-entry-of-a-char-character", "closed_reason": "Needs more focus", "title": "C: How to detect a re-entry of a char character?", "body": "<blockquote>\n  <p>I am creating a program whereby;\n  the first input e.g.  'a'   will give a \"no duplicate\" result,\n  and upon re-entry of 'a' it should would give me a \"duplicate has found\" result.</p>\n</blockquote>\n\n<pre><code>I am having a hard time finding the logic to this program. Help would be much appreciated. Thanks.\n</code></pre>\n\n<blockquote>\n  <p>I am working on lines 127-129 btw. <a href=\"https://pastebin.com/wQKH3iZE\" rel=\"nofollow noreferrer\">https://pastebin.com/wQKH3iZE</a></p>\n</blockquote>\n"}, {"tags": ["c", "linux", "linux-kernel", "driver"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10128645, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216413870168779/picture?type=large", "display_name": "Guy Berkovitz", "link": "https://stackoverflow.com/users/10128645/guy-berkovitz"}, "edited": false, "score": 0, "creation_date": 1577299794, "post_id": 59480988, "comment_id": 105138798, "body": "Im trying to avoid writing to a r/o page by changing the page premission to RW. In kernel mode, I belive i have the option to change the premission. I also tried to manipulate the bits with logical and\\or directly but the linux will crash."}, {"owner": {"reputation": 382, "user_id": 2526111, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a754b6b5fde7bf4865d249bbcf9266b5?s=128&d=identicon&r=PG", "display_name": "user2526111", "link": "https://stackoverflow.com/users/2526111/user2526111"}, "reply_to_user": {"reputation": 17, "user_id": 10128645, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216413870168779/picture?type=large", "display_name": "Guy Berkovitz", "link": "https://stackoverflow.com/users/10128645/guy-berkovitz"}, "edited": false, "score": 0, "creation_date": 1577680854, "post_id": 59480988, "comment_id": 105222299, "body": "This is changing the kernel page permission. You can set ro or rw. You can give starting address of the page and number of the pages."}], "tags": [], "owner": {"reputation": 382, "user_id": 2526111, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a754b6b5fde7bf4865d249bbcf9266b5?s=128&d=identicon&r=PG", "display_name": "user2526111", "link": "https://stackoverflow.com/users/2526111/user2526111"}, "is_accepted": true, "score": 1, "last_activity_date": 1577298960, "creation_date": 1577298960, "answer_id": 59480988, "question_id": 59478580, "link": "https://stackoverflow.com/questions/59478580/changing-virtual-page-premissions/59480988#59480988", "title": "Changing virtual page premissions", "body": "<p>Do you need this?</p>\n\n<p><a href=\"https://elixir.bootlin.com/linux/v4.3/source/arch/arm/mm/pageattr.c#L68\" rel=\"nofollow noreferrer\">https://elixir.bootlin.com/linux/v4.3/source/arch/arm/mm/pageattr.c#L68</a>\\</p>\n\n<p>At least, you can change your memory attribute for kernel module. Also, you can change your kernel text memory attribute as well.</p>\n\n<p>As far as I tested, if we try to write ro memory in the kernel module, MMU will generate exception and you will see \"invalid virtual memory\" access.</p>\n\n<p>You have to pass virtual memory address.</p>\n"}], "owner": {"reputation": 17, "user_id": 10128645, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216413870168779/picture?type=large", "display_name": "Guy Berkovitz", "link": "https://stackoverflow.com/users/10128645/guy-berkovitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59480988, "answer_count": 1, "score": 0, "last_activity_date": 1577298960, "creation_date": 1577278341, "last_edit_date": 1577279677, "question_id": 59478580, "link": "https://stackoverflow.com/questions/59478580/changing-virtual-page-premissions", "title": "Changing virtual page premissions", "body": "<p>I am trying to override the kill command In my module by replacing the pointer stored in sys_call_table, to a pointer to function i implemented.\nI used the <code>kallsyms_lookup_name()</code> syscall to get the address of the table, and <code>lookup_address()</code> to get the address of the page.\nnow, my problem is the kernel protecting the page with r/w flag.\nSo, given a virtual page address, is there a way to modify the r/w flag?</p>\n"}, {"tags": ["c", "linux", "gcc", "arm", "cpu-architecture"], "comments": [{"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 2, "creation_date": 1577278335, "post_id": 59478463, "comment_id": 105134096, "body": "AFAIK, on ARM this information is privileged, so you&#39;d have to either ask the OS directly, or attempt to execute some instruction that was undefined on ARMv4 and was defined for ARMv7 and handle the resulting exception."}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1577278541, "post_id": 59478463, "comment_id": 105134140, "body": "@Ruslan: Can you point me to such an implementation (which attempts to execute an instruction, and catches the exception when it tails)?"}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1577279265, "post_id": 59478463, "comment_id": 105134306, "body": "Well, not for ARM but x86, and not for detection of CPU but to experiment with skipping faulting division by zero instruction, but might help you: <a href=\"https://pastebin.com/uQLuAm2U\" rel=\"nofollow noreferrer\">pastebin.com/uQLuAm2U</a> . Also keep in mind that you&#39;ll likely get <code>SIGILL</code> or some other signal instead of <code>SIGFPE</code> handled in this example. Actual signal will depend on the instruction you choose as the discriminant. Note also that <code>ucontext_t</code> is also platform-dependent."}, {"owner": {"reputation": 1118, "user_id": 8074683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e8Ik8.jpg?s=128&g=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/8074683/anton"}, "edited": false, "score": 0, "creation_date": 1577279584, "post_id": 59478463, "comment_id": 105134397, "body": "Just curiosity, but why do you need it at run-time? what architecture do you compile for?"}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "reply_to_user": {"reputation": 1118, "user_id": 8074683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e8Ik8.jpg?s=128&g=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/8074683/anton"}, "edited": false, "score": 0, "creation_date": 1577279709, "post_id": 59478463, "comment_id": 105134427, "body": "@oxuf: The first goal is to make it work on Debian&#39;s armel and armhf architectures, exactly how Debian defines them."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1577346335, "post_id": 59478463, "comment_id": 105146009, "body": "Where would you have a situation (outside emulation) where these two architectures overlap?  armv6, armv7, and all the sub-details that one would need to possibly execute different code paths based on optimizations for a platform you would use the CPUID registers, which has so many different options that you would need to dive down into those if you had some reason to care...granted from the application you very likely cannot get at the cpuid registers and would use the answer below as a starting point."}], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 6, "last_activity_date": 1577317945, "last_edit_date": 1577317945, "creation_date": 1577280658, "answer_id": 59478873, "question_id": 59478463, "link": "https://stackoverflow.com/questions/59478463/how-to-distinguish-armhf-armv7-and-armel-armv4-in-c-code/59478873#59478873", "title": "How to distinguish armhf (ARMv7) and armel (ARMv4) in C code?", "body": "<blockquote>\n  <p>... I have two implementations of the same function, one for armhf (fast) and one for armel (slow). At runtime I'd like to detect the CPU type, and call the armhf implementation if armhf was detected. How do I detect the CPU? I need something like this in C code ...</p>\n</blockquote>\n\n<p>As @Ruslan noted, the cpu features are mostly privileged on ARM. If you are root then you can read a MRS register for the feature mask. The latest kernels fake a cpuid for ARM, but it is only available on most recent kernels.</p>\n\n<p>At runtime you may be able to parse <code>/proc/cpuinfo</code> on Linux for cpu arch and features. You may also be able to call <code>getauxval</code> and read the bits from the auxiliary vector.</p>\n\n<p>What I have found that works best is:</p>\n\n<ol>\n<li>Try to read <code>getauxval</code> for arch and feature</li>\n<li>Use a <code>SIGILL</code> probe if <code>getauxval</code> fails</li>\n</ol>\n\n<p>The <code>SIGILL</code> probe is expensive. You setup a <code>SIGILL</code> handler and try the ARMv5  or ARMv7 instruction. If you catch a <code>SIGILL</code> you know the instruction is not available.</p>\n\n<p><code>SIGILL</code> probes are used by Crypto++ and OpenSSL. For example, <code>movw</code> and <code>movt</code> were added at ARMv7. Here is the code to probe for ARMv7 using the <a href=\"https://github.com/weidai11/cryptopp/blob/master/neon_simd.cpp\" rel=\"nofollow noreferrer\"><code>movw</code> and <code>movt</code> instructions</a> in Crypto++. OpenSSL performs similar in <a href=\"https://github.com/openssl/openssl/blob/master/crypto/armcap.c\" rel=\"nofollow noreferrer\"><code>crypto/armcap.c</code></a>.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>bool CPU_ProbeARMv7()\n{\n    volatile bool result = true;\n\n    volatile SigHandler oldHandler = signal(SIGILL, SigIllHandler);\n    if (oldHandler == SIG_ERR)\n        return false;\n\n    volatile sigset_t oldMask;\n    if (sigprocmask(0, NULLPTR, (sigset_t*)&amp;oldMask))\n        return false;\n\n    if (setjmp(s_jmpSIGILL))\n        result = false;\n    else\n    {\n        unsigned int a;\n        asm volatile (\n    #if defined(__thumb__)\n            \".inst.n 0xf241, 0x2034  \\n\\t\"   // movw r0, 0x1234\n            \".inst.n 0xf2c1, 0x2034  \\n\\t\"   // movt r0, 0x1234\n            \"mov %0, r0              \\n\\t\"   // mov [a], r0\n    #else\n            \".inst 0xe3010234  \\n\\t\"   // movw r0, 0x1234\n            \".inst 0xe3410234  \\n\\t\"   // movt r0, 0x1234\n            \"mov %0, r0        \\n\\t\"   // mov [a], r0\n    #endif\n            : \"=r\" (a) : : \"r0\");\n\n        result = (a == 0x12341234);\n    }\n\n    sigprocmask(SIG_SETMASK, (sigset_t*)&amp;oldMask, NULLPTR);\n    signal(SIGILL, oldHandler);\n\n    return result;\n}\n</code></pre>\n\n<p>The <code>volatiles</code> are required in the probes. Also see <a href=\"https://stackoverflow.com/q/7721854/608639\">What sense do these clobbered variable warnings make?</a></p>\n\n<p>On Android you should use <code>android_getCpuFamily()</code> and <code>android_getCpuFeatures()</code> instead of <code>getauxval</code>.</p>\n\n<p>The ARM folks say you should <em>NOT</em> parse <code>/proc/cpuinfo</code>. Also see ARM Blog and <a href=\"http://community.arm.com/groups/android-community/blog/2014/10/10/runtime-detection-of-cpu-features-on-an-armv8-a-cpu\" rel=\"nofollow noreferrer\">Runtime Detection of CPU Features on an armv8-a CPU</a>. (Non-paywall version <a href=\"https://web.archive.org/web/20160629111439/https://community.arm.com/groups/android-community/blog/2014/10/10/runtime-detection-of-cpu-features-on-an-armv8-a-cpu\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p><em>DO NOT</em> perform <code>SIGILL</code> based feature probes on iOS devices. Apple devices trash memory. For Apple devices use something like <a href=\"https://stackoverflow.com/q/11197509/608639\">How to get device make and model on iOS?</a>.</p>\n\n<p>You also need to enable code paths based on compiler options. That is a whole 'nother can of worms. For that problem see <a href=\"https://stackoverflow.com/q/37050532/608639\">Detect ARM NEON availability in the preprocessor?</a></p>\n\n<p>For some additional source code to examine, see <a href=\"https://github.com/weidai11/cryptopp/blob/master/cpu.cpp\" rel=\"nofollow noreferrer\"><code>cpu.cpp</code></a> in Crypto++. It is the place where Crypto++ does things like call <code>getauxval</code>, <code>android_getCpuFamily()</code> and <code>android_getCpuFeatures()</code>.</p>\n\n<p>The Crypto++ <code>SIGILL</code> probes occur in specific source files since a source file usually needs a compiler option to enable an arch, like <code>-march=armv7-a</code> and <code>-fpu=neon</code> for ARM. That's why ARMv7 and NEON are detected in <a href=\"https://github.com/weidai11/cryptopp/blob/master/neon_simd.cpp\" rel=\"nofollow noreferrer\"><code>neon_simd.cpp</code></a>. (There are other similar files for i686 and x86_64, Altivec, PowerPC, and Aarch64).</p>\n\n<hr>\n\n<p>Here is what a <code>getauxval</code> and <code>android_getCpuFamily()</code> looks like in Crypto++. <code>CPU_QueryARMv7</code> is used first. If <code>CPU_QueryARMv7</code> fails, then a <code>SIGILL</code> feature probe is used.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>inline bool CPU_QueryARMv7()\n{\n#if defined(__ANDROID__) &amp;&amp; defined(__arm__)\n    if (((android_getCpuFamily() &amp; ANDROID_CPU_FAMILY_ARM) != 0) &amp;&amp;\n        ((android_getCpuFeatures() &amp; ANDROID_CPU_ARM_FEATURE_ARMv7) != 0))\n        return true;\n#elif defined(__linux__) &amp;&amp; defined(__arm__)\n    if ((getauxval(AT_HWCAP) &amp; HWCAP_ARMv7) != 0 ||\n        (getauxval(AT_HWCAP) &amp; HWCAP_NEON) != 0)\n        return true;\n#elif defined(__APPLE__) &amp;&amp; defined(__arm__)\n    // Apple hardware is ARMv7 or above.\n    return true;\n#endif\n    return false;\n}\n</code></pre>\n\n<hr>\n\n<p>The ARM instructions for <code>movw</code> and <code>movt</code> were disassembled from the following source code:</p>\n\n<pre><code>int a;\nasm volatile(\"movw %0,%1 \\n\"\n             \"movt %0,%1 \\n\"\n             : \"=r\"(a) : \"i\"(0x1234));\n\n00000010 &lt;_Z5test2v&gt;:  // ARM\n  10:   e3010234        movw    r0, #4660       ; 0x1234\n  14:   e3410234        movt    r0, #4660       ; 0x1234\n  18:   e12fff1e        bx      lr\n\n0000001c &lt;_Z5test3v&gt;:  // Thumb\n  1c:   f241 2034       movw    r0, #4660       ; 0x1234\n  20:   f2c1 2034       movt    r0, #4660       ; 0x1234\n  24:   e12fff1e        bx      lr\n</code></pre>\n\n<hr>\n\n<p>Here is what reading a MRS looks like. It is very similar to getting cpuid bitmask on x86. The code below can be used to get Crypto features for Aarch64, but it requires root privileges.</p>\n\n<p>The code requires Exception Level 1 (EL1) and above, but user space runs at EL0. Attempting to run the code from userland results in a <code>SIGILL</code> and termination.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#if defined(__arm64__) || defined(__aarch64__)\n  uint64_t caps = 0;  // Read ID_AA64ISAR0_EL1\n  __asm __volatile(\"mrs %0, \" \"id_aa64isar0_el1\" : \"=r\" (caps));\n#elif defined(__arm__) || defined(__aarch32__)\n  uint32_t caps = 0;  // Read ID_ISAR5_EL1\n  __asm __volatile(\"mrs %0, \" \"id_isar5_el1\" : \"=r\" (caps));\n#endif\n</code></pre>\n\n<hr>\n\n<p>The benefit of issuing instructions yourself is, it does not need arch options when compiling the source file:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    unsigned int a;\n    asm volatile (\n#if defined(__thumb__)\n        \".inst.n 0xf241, 0x2034  \\n\\t\"   // movw r0, 0x1234\n        \".inst.n 0xf2c1, 0x2034  \\n\\t\"   // movt r0, 0x1234\n        \"mov %0, r0              \\n\\t\"   // mov [a], r0\n#else\n        \".inst 0xe3010234  \\n\\t\"   // movw r0, 0x1234\n        \".inst 0xe3410234  \\n\\t\"   // movt r0, 0x1234\n        \"mov %0, r0        \\n\\t\"   // mov [a], r0\n#endif\n        : \"=r\" (a) : : \"r0\");\n</code></pre>\n\n<p>You can compile the above code without arch options:</p>\n\n<pre><code>gcc cpu-test.c -o cpu-test.o\n</code></pre>\n\n<p>If you were to use <code>movw</code> and <code>movt</code>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int a;\nasm volatile(\"movw %0,%1 \\n\"\n             \"movt %0,%1 \\n\"\n             : \"=r\"(a) : \"i\"(0x1234));\n</code></pre>\n\n<p>then your compiler would need to support ARMv7, and you would need to use the arch option:</p>\n\n<pre><code>gcc -march=armv7 cpu-test.c -o cpu-test.o\n</code></pre>\n\n<p>And GCC could use ARMv7 throughout the source file, which could cause a <code>SIGILL</code> outside your protected code.</p>\n\n<p>I've experienced Clang using the wrong instruction set on x86. See <a href=\"https://github.com/weidai11/cryptopp/issues/751\" rel=\"nofollow noreferrer\">Crypto++ Issue 751</a>. GCC will surely follow. In the Clang case, I needed to compile with <code>-march=avx</code> on a source file so I could use AVX intrinsics. Clang generated AVX code outside my protected block and it crashed on a old Core2 Duo machine. (The Clang generated unsafe code was initialization of a <code>std::string</code>).</p>\n\n<p>In the case of ARM the problem is, you need <code>-march=armv7</code> to enable the ISA with <code>movw</code> and <code>movt</code> and the compiler thinks it can use the ISA, too. It is a design bug in the compiler where the user's arch and the compiler's arch'es are conflated. In reality, because of the compiler design, you need a user arch and a separate compiler arch.</p>\n"}], "owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 1, "accepted_answer_id": 59478873, "answer_count": 1, "score": 6, "last_activity_date": 1577317945, "creation_date": 1577277429, "last_edit_date": 1577278130, "question_id": 59478463, "link": "https://stackoverflow.com/questions/59478463/how-to-distinguish-armhf-armv7-and-armel-armv4-in-c-code", "title": "How to distinguish armhf (ARMv7) and armel (ARMv4) in C code?", "body": "<p>In the executable I'm writing I have 2 implementations of the same function, one for armhf (fast) and one for armel (slow). At runtime I'd like to detect the CPU type, and call the armhf implementation if armhf was detected. How do I detect the CPU? I need something like this in C code:</p>\n\n<pre><code>int is_cpu_armhf(void) {\n  ...\n}\n</code></pre>\n\n<p>The code may contain inline assembly, but preferably it shouldn't contain a call to a library function or a system call, because it should work with multiple libraries and multiple operating systems.</p>\n\n<p>I've found <a href=\"https://github.com/pytorch/cpuinfo/tree/master/src/arm\" rel=\"noreferrer\">https://github.com/pytorch/cpuinfo/tree/master/src/arm</a> , but it doesn't seem to be using any inline assembly, but it relies on the operating system to get the CPU information.</p>\n"}, {"tags": ["c", "integer", "bit-shift", "integer-promotion"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1577274465, "post_id": 59478095, "comment_id": 105133243, "body": "and where is the <code>if</code> statement?"}, {"owner": {"reputation": 276, "user_id": 7445145, "user_type": "registered", "profile_image": "https://graph.facebook.com/336114270099221/picture?type=large", "display_name": "Edward Garemo", "link": "https://stackoverflow.com/users/7445145/edward-garemo"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1577274895, "post_id": 59478095, "comment_id": 105133354, "body": "Modified code for clarity."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1577274983, "post_id": 59478095, "comment_id": 105133374, "body": "That&#39;s not an <code>if</code> statement, that&#39;s a print statement: just saying."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1577276444, "post_id": 59478095, "comment_id": 105133700, "body": "<i>&quot;I&#39;ve been told that in expressions involving both types of variables, signed are converted to/interpreted as unsigned&quot;</i> is untrue. In an expression that has <code>unsigned short</code> and <code>short</code>, both are promoted to signed <code>int</code>s if representable."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577279368, "post_id": 59478095, "comment_id": 105134333, "body": "<code>%x</code> tells <code>printf()</code> to ASSUME the corresponding argument is of type <code>unsigned</code>, and <code>%d</code> tells <code>printf()</code> to ASSUME the corresponding argument is of type <code>int</code>.   The behaviour is undefined if the assumption is invalid.   Since <code>y &gt;&gt; x</code> has type <code>int</code>, the usage of <code>%x</code> gives undefined behaviour.   It may happen to give a result that makes sense to you, but is not required to."}], "answers": [{"comments": [{"owner": {"reputation": 276, "user_id": 7445145, "user_type": "registered", "profile_image": "https://graph.facebook.com/336114270099221/picture?type=large", "display_name": "Edward Garemo", "link": "https://stackoverflow.com/users/7445145/edward-garemo"}, "edited": false, "score": 0, "creation_date": 1577275730, "post_id": 59478183, "comment_id": 105133546, "body": "Thanks! To clarify: In shift operations each side is treated independently? Separate question: which operations act like the shift (sides treated independently) and which act like the if (both sides treated as one unit)? What is &amp;, ^, +, -, /, *, etc?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 276, "user_id": 7445145, "user_type": "registered", "profile_image": "https://graph.facebook.com/336114270099221/picture?type=large", "display_name": "Edward Garemo", "link": "https://stackoverflow.com/users/7445145/edward-garemo"}, "edited": false, "score": 0, "creation_date": 1577275843, "post_id": 59478183, "comment_id": 105133571, "body": "@EdwardGaremo Yes, the integer promotions are performed separately for each operands. As for other operators then then im most cases the usual arithmetic conversions are performed."}, {"owner": {"reputation": 276, "user_id": 7445145, "user_type": "registered", "profile_image": "https://graph.facebook.com/336114270099221/picture?type=large", "display_name": "Edward Garemo", "link": "https://stackoverflow.com/users/7445145/edward-garemo"}, "edited": false, "score": 0, "creation_date": 1577276136, "post_id": 59478183, "comment_id": 105133644, "body": "Most or all? Is shift the only odd one out or is there another operator which works like it?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 276, "user_id": 7445145, "user_type": "registered", "profile_image": "https://graph.facebook.com/336114270099221/picture?type=large", "display_name": "Edward Garemo", "link": "https://stackoverflow.com/users/7445145/edward-garemo"}, "edited": false, "score": 0, "creation_date": 1577276184, "post_id": 59478183, "comment_id": 105133649, "body": "@EdwardGaremo the shift is special because the right hand side just needs to have range 0 ... width - 1. Actually it would not need to be promoted at all..."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 276, "user_id": 7445145, "user_type": "registered", "profile_image": "https://graph.facebook.com/336114270099221/picture?type=large", "display_name": "Edward Garemo", "link": "https://stackoverflow.com/users/7445145/edward-garemo"}, "edited": false, "score": 1, "creation_date": 1577276464, "post_id": 59478183, "comment_id": 105133706, "body": "@EdwardGaremo It is the only operator where the integer promotions are performed on each operand."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1577279348, "post_id": 59478183, "comment_id": 105134330, "body": "Operators with multiple object operands (i.e., excluding <code>_Generic</code>, which takes a list of types) that do not convert operands to a common type are array subscripting (<code>a[i]</code>), function calls (arguments are separate), member accesses (<code>Structure.Member</code>, <code>StructurePointer-&gt;Member</code>), shifts, the conditional operator (<code>a ? b : c</code> does not convert <code>a</code>, and the result is a common type derived from <code>b</code> and <code>c</code>, but only one is evaluated), and the comma operator."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1577275732, "last_edit_date": 1577275732, "creation_date": 1577275141, "answer_id": 59478183, "question_id": 59478095, "link": "https://stackoverflow.com/questions/59478095/unsigned-and-signed-in-same-expression-what-rules-apply/59478183#59478183", "title": "Unsigned and Signed in same expression: What rules apply?", "body": "<p>In this expression</p>\n\n<pre><code>y&gt;&gt;x\n</code></pre>\n\n<p>(the C Standard, 6.5.7 Bitwise shift operators)</p>\n\n<blockquote>\n  <p>3 The integer promotions are performed on each of the operands.</p>\n</blockquote>\n\n<p>That means that as <code>y</code> has the type <code>int</code> and <code>x</code> has the type <code>unsigned int</code> neither conversion (promotion) occurs. And</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>...The type of the result is that of the promoted left operand.</li>\n  </ol>\n</blockquote>\n\n<p>So the result of the expression has the type <code>int</code> - the type of the operand <code>y</code>. As <code>y</code> has a negative value then</p>\n\n<blockquote>\n  <ol start=\"5\">\n  <li>...IfE1 has a signed type and a negative value, the resulting value is \n  implementation-de\ufb01ned</li>\n  </ol>\n</blockquote>\n\n<p>As for this expression</p>\n\n<pre><code>y &lt; x\n</code></pre>\n\n<p>then there is used the usual arithmetic conversions. The boths operands have the same rank so the operand <code>y</code> of the type <code>int</code> is converted to the type <code>unsigned int</code> and its binary representation as an object of the type <code>unsigned int</code> is greater than the binary representation of the operand <code>x</code>. </p>\n\n<p>From the C Standard *6.3.1.8 Usual arithmetic conversions)</p>\n\n<blockquote>\n  <p>Otherwise, if the operand that has unsigned integer type has rank\n  greater or equal to the rank of the type of the other operand, then\n  the operand with signed integer type is converted to the type of the\n  operand with unsigned integer type.</p>\n</blockquote>\n"}], "owner": {"reputation": 276, "user_id": 7445145, "user_type": "registered", "profile_image": "https://graph.facebook.com/336114270099221/picture?type=large", "display_name": "Edward Garemo", "link": "https://stackoverflow.com/users/7445145/edward-garemo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 59478183, "answer_count": 1, "score": 1, "last_activity_date": 1577276019, "creation_date": 1577274284, "last_edit_date": 1577276019, "question_id": 59478095, "link": "https://stackoverflow.com/questions/59478095/unsigned-and-signed-in-same-expression-what-rules-apply", "title": "Unsigned and Signed in same expression: What rules apply?", "body": "<p>I'm confused by the issue stated in the title. I've been told that in expressions involving both types of variables, signed are converted to/interpreted as unsigned. However, as the following code snippet shows, that isn't always the case.</p>\n\n<p>Code: </p>\n\n<pre><code>unsigned int x = 1;\nint y = -20;\nprintf(\"Right shift = %x, %d\\n\", y&gt;&gt;x, y&gt;&gt;x);\nprintf(\"If = %x, %d\\n\", y &lt; x, y &lt; x);\n</code></pre>\n\n<p>Result: </p>\n\n<pre><code>Right shift = fffffff6, -10                                        \nIf = 0, 0\n</code></pre>\n\n<p>The if statement returns the expected 0, -20 being cast to a very large unsigned integer, but the shift expression returns -10, making it evident that arithmetic and not logical shift has taken place. The x has been interpreted as signed rather than the y being interpreted as unsigned. </p>\n\n<p>Could anyone clear this up for me? </p>\n"}, {"tags": ["c", "turbo-c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1577265935, "post_id": 59476928, "comment_id": 105131348, "body": "Tag spam removed. Lets try and stay on target, shall we ?"}, {"owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "edited": false, "score": 0, "creation_date": 1577266195, "post_id": 59476928, "comment_id": 105131400, "body": "Input to be taken in <code>string</code> and convert to integer."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1577267061, "post_id": 59476928, "comment_id": 105131590, "body": "Why are you reading the parameter from stdin?  Take it from argv instead.  Don&#39;t use scanf until you have more experience."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577268377, "post_id": 59476928, "comment_id": 105131845, "body": "Egads @Wackie <a href=\"http://www.seebs.net/c/10com.html\" rel=\"nofollow noreferrer\">10 Commandments for C Programmers -- NO. 6</a>. You fail to validate any (<i>any</i>) of the user-input and therefore tempt <i>Undefined Behavior</i> by proceeding to process the input without ever knowing whether valid input was received. Bad Juju..."}, {"owner": {"reputation": 51, "user_id": 12594858, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-COIV0lHwF1Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYQbJrovgnvGzuORrOWMsMCYkwyg/photo.jpg?sz=128", "display_name": "Wackie", "link": "https://stackoverflow.com/users/12594858/wackie"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1577332728, "post_id": 59476928, "comment_id": 105143206, "body": "What&#39;s <code>argv</code>? @William Pursell"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1577430399, "post_id": 59476928, "comment_id": 105167709, "body": "@Wackle <code>argv</code> is the conventional name for the second argument passed to <code>main</code>.  It is the list of strings passed on the command line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577473634, "post_id": 59476928, "comment_id": 105182452, "body": "regarding: <code>void main()</code>   There are only two valid signatures for the function: <code>main()</code>  They are: <code>int main( void )</code> and <code>int main( int argc, char *argv[] )</code>   Notice they both have a return type of <code>int</code>, NOT <code>void</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 12594858, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-COIV0lHwF1Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYQbJrovgnvGzuORrOWMsMCYkwyg/photo.jpg?sz=128", "display_name": "Wackie", "link": "https://stackoverflow.com/users/12594858/wackie"}, "edited": false, "score": 0, "creation_date": 1577289412, "post_id": 59477025, "comment_id": 105136649, "body": "Thanks for the solution brother. Can you please explain the meaning of <code>while(scanf(&quot;%d&quot;,&amp;numberOfLines) != 1)</code> in detail. Because the code worked but I don&#39;t know the meaning of this condition in the while loop"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 51, "user_id": 12594858, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-COIV0lHwF1Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYQbJrovgnvGzuORrOWMsMCYkwyg/photo.jpg?sz=128", "display_name": "Wackie", "link": "https://stackoverflow.com/users/12594858/wackie"}, "edited": false, "score": 1, "creation_date": 1577436464, "post_id": 59477025, "comment_id": 105169243, "body": "@Wackie The function <code>scanf</code> returns the number of elements successfully matched. So if 1 integer is matched (and stored in <code>numberOfLines</code>) the function returns 1. So in that case you have <code>while(1 != 1)</code> which is false and therefore stops the loop. But if no integer is matched <code>scanf</code> will return 0 and you have: <code>while(0 != 1)</code> which is true and the loop will continue. So all together it means that the loop will continue until you have matched an integer."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 2, "last_activity_date": 1577267770, "last_edit_date": 1577267770, "creation_date": 1577266479, "answer_id": 59477025, "question_id": 59476928, "link": "https://stackoverflow.com/questions/59476928/c-lang-turbo-c-dos-input-4-output-going-infinite-loop-for/59477025#59477025", "title": "C lang: Turbo C, DOS, Input = 4. Output =$ $$ $$$ $$$$. Going infinite loop for char input. S", "body": "<p>When you do <code>scanf(\"%d\",&amp;numberOfLines);</code> you want to read an integer. If you then enter a letter, like an <code>a</code>, nothing will be read from the input stream. In other words, you'll go into an endless loop where you keep trying to read an integer but the stream contains a letter.</p>\n\n<p>You need to remove that letter from the stream.</p>\n\n<p>You could try:</p>\n\n<pre><code>while(scanf(\"%d\",&amp;numberOfLines) != 1)\n{\n    // Didn't get an integer so remove a char\n    getchar();\n}\n</code></pre>\n\n<p>However, that will lead to problems if the input stream fails.</p>\n\n<p>The better solution is to use <code>fgets</code> and <code>sscanf</code></p>\n"}, {"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 0, "last_activity_date": 1577278562, "creation_date": 1577278562, "answer_id": 59478606, "question_id": 59476928, "link": "https://stackoverflow.com/questions/59476928/c-lang-turbo-c-dos-input-4-output-going-infinite-loop-for/59478606#59478606", "title": "C lang: Turbo C, DOS, Input = 4. Output =$ $$ $$$ $$$$. Going infinite loop for char input. S", "body": "<p>Here is a shorter, simpler version of <code>printPattern</code></p>\n\n<pre><code>void printPattern(int n)\n{\n    char dollar[n];\n    memset(dollar, '$', n);\n\n    for(int i = 1; i &lt;= n; ++i)\n        printf(\"%.*s\\n\", i, dollar);\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 12594858, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-COIV0lHwF1Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYQbJrovgnvGzuORrOWMsMCYkwyg/photo.jpg?sz=128", "display_name": "Wackie", "link": "https://stackoverflow.com/users/12594858/wackie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 59477025, "answer_count": 2, "score": 0, "last_activity_date": 1577278562, "creation_date": 1577265795, "last_edit_date": 1577268033, "question_id": 59476928, "link": "https://stackoverflow.com/questions/59476928/c-lang-turbo-c-dos-input-4-output-going-infinite-loop-for", "title": "C lang: Turbo C, DOS, Input = 4. Output =$ $$ $$$ $$$$. Going infinite loop for char input. S", "body": "<p>User gives input and accordingly the pattern must be printed. It should encounter negative numbers and char as input. I encounterd the negative value as input but as I try to give char input it goes on ifinite loop. So how can I encounter char value for int data type as an input.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n/*\nC program to print the pattern allowing user\nto input the no. of lines.\n*/\n\n//Declaring method for printing pattern\nvoid printPattern(int numberOfLines);\n\nvoid main()\n{\n    char userChoice;//User's choice to continue or exit\n    int numberOfLines;//User's input for number line to be printed\n\n    clrscr();\n\n    //Logic for printing the pattern\n    do\n    {\n        printf(\"Enter the number of lines you want to print \\n\");\n        scanf(\"%d\",&amp;numberOfLines);\n\n        //Countering issue if user enters a char insted of number\n        /*while()\n        {\n            printf(\"Enter number only \\n\");\n            scanf(\" %c\",&amp;numberOfLines);\n        }*/\n\n        //Countering issue if user enters negative number\n        while(numberOfLines&lt;=0)\n        {\n            printf(\"Enter positive number \\n\");\n            scanf(\"%d\",&amp;numberOfLines);\n        }\n\n        //Calling method to the start printing of method\n        printPattern(numberOfLines);\n\n        //Taking user's choice to continue or not\n        printf(\"Press Y to continue else any other key to exit \\n\");\n        scanf(\" %c\",&amp;userChoice);\n    }\n    while(userChoice == 'y' || userChoice == 'Y');\n}\n\n/*\nMethod  definition for printing the pattern\nArgument numberOfLines: User's input for number of lines\n*/\nvoid printPattern(int numberOfLines)\n{\n    int i,j;\n    for(i=0 ; i&lt;numberOfLines ; i++) //for rows\n    {\n        for(j=0 ; j&lt;=i  ; j++) //for columns\n        {\n            printf(\"$\");\n        }\n        printf(\"\\n\"); //for going to next row after printing one\n    }\n}```\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1577265935, "post_id": 59476908, "comment_id": 105131349, "body": "get rid of the humungous array. <code>while (x &lt; 1000000) { newg = oldg + gcd(x, oldg); oldg = newg; x++; }</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1577266120, "post_id": 59476908, "comment_id": 105131388, "body": "I don&#39;t care what the problem is, a quadrillion unsigned long longs isn&#39;t going to be part of the solution."}, {"owner": {"reputation": 19, "user_id": 12594911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FzozDFbo4bo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfnGVM2Kj9n_W8rDDWBV-qb-vSWnQ/photo.jpg?sz=128", "display_name": "Marque Phoenix", "link": "https://stackoverflow.com/users/12594911/marque-phoenix"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577266560, "post_id": 59476908, "comment_id": 105131470, "body": "@pmg it still stops at 50000."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1577268256, "post_id": 59476908, "comment_id": 105131819, "body": "<code>x</code> has type <code>unsigned long long</code>, using <code>&quot;%d&quot;</code> to print it is wrong."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1577271314, "post_id": 59476908, "comment_id": 105132488, "body": "<code>static unsigned long long int g[1000000000000000];</code> OMG, does your machine explode when you execute this?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1577272285, "post_id": 59476908, "comment_id": 105132702, "body": "@WilliamPursell No, that array is only a small fraction of 64 bit virtual address space, so OS just happily marks the highest allowed address the application requests as usual and doesn&#39;t notice anything funny. Problems only occur when trying to write so much data there that it all doesn&#39;t fit in memory and swap."}, {"owner": {"reputation": 19, "user_id": 12594911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FzozDFbo4bo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfnGVM2Kj9n_W8rDDWBV-qb-vSWnQ/photo.jpg?sz=128", "display_name": "Marque Phoenix", "link": "https://stackoverflow.com/users/12594911/marque-phoenix"}, "edited": false, "score": 0, "creation_date": 1577272877, "post_id": 59476908, "comment_id": 105132844, "body": "Even when I don&#39;t use any arrays and type the datatypes right, it still gets to 50k something and stops. What should I do?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577273527, "post_id": 59476908, "comment_id": 105132995, "body": "I rewrote the <code>gcd()</code> function. <a href=\"https://ideone.com/3nO4UL\" rel=\"nofollow noreferrer\">My attempt</a> appears to go well past 50000 without any problems."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577274356, "post_id": 59476908, "comment_id": 105133219, "body": "where did you learn of this sequence? I couldn&#39;t find any reference to it in a quick internet search. Thanks"}, {"owner": {"reputation": 19, "user_id": 12594911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FzozDFbo4bo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfnGVM2Kj9n_W8rDDWBV-qb-vSWnQ/photo.jpg?sz=128", "display_name": "Marque Phoenix", "link": "https://stackoverflow.com/users/12594911/marque-phoenix"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577274576, "post_id": 59476908, "comment_id": 105133272, "body": "@pmg it&#39;s an assignment from our lecturer at the university"}, {"owner": {"reputation": 19, "user_id": 12594911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FzozDFbo4bo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfnGVM2Kj9n_W8rDDWBV-qb-vSWnQ/photo.jpg?sz=128", "display_name": "Marque Phoenix", "link": "https://stackoverflow.com/users/12594911/marque-phoenix"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577274891, "post_id": 59476908, "comment_id": 105133352, "body": "@pmg okay but it can&#39;t get over to 10^15. I need to make it faster somehow."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577275739, "post_id": 59476908, "comment_id": 105133548, "body": "I suspect there may be some function that calculates the final value without having to calculate all previous ones. Something like <code>n + numberofprimesbelow(n) + ...</code>, can&#39;t help you with that."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1577275964, "post_id": 59476908, "comment_id": 105133615, "body": "You run out of stack with the recursive call of <code>gcd</code>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1577277240, "post_id": 59476908, "comment_id": 105133881, "body": "@PaulOgilvie perhaps <a href=\"https://ideone.com/QLRYn3\" rel=\"nofollow noreferrer\">tail call gcd</a>?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577277634, "post_id": 59476908, "comment_id": 105133956, "body": "@pmg, yes, compiler could do that (turn it into a jump)"}, {"owner": {"reputation": 19, "user_id": 12594911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FzozDFbo4bo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfnGVM2Kj9n_W8rDDWBV-qb-vSWnQ/photo.jpg?sz=128", "display_name": "Marque Phoenix", "link": "https://stackoverflow.com/users/12594911/marque-phoenix"}, "edited": false, "score": 0, "creation_date": 1577283311, "post_id": 59476908, "comment_id": 105135298, "body": "I still couldnt get it to work on the required number. Is there anyone with a solution"}], "owner": {"reputation": 19, "user_id": 12594911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FzozDFbo4bo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfnGVM2Kj9n_W8rDDWBV-qb-vSWnQ/photo.jpg?sz=128", "display_name": "Marque Phoenix", "link": "https://stackoverflow.com/users/12594911/marque-phoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577269664, "creation_date": 1577265638, "last_edit_date": 1577269664, "question_id": 59476908, "link": "https://stackoverflow.com/questions/59476908/the-function-only-goes-up-to-50000-in-c", "title": "The function only goes up to 50000 in C", "body": "<p>The problem is <code>g(n) = g(n-1) + gcd(n, g(n-1)) for n &gt; 4</code>. <code>gcd</code> is great common divisor. <code>g(4) = 13</code>.\nI need to find the <code>10^15th</code> element. I used this code but I can only find <code>50000th</code> or so. </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nunsigned long long int gcd(unsigned long long int a, unsigned long long int b);\nint main(){\n    int i;\n    unsigned long long int x = 5;\n    static unsigned long long int g[1000000000000000];\n    g[4] = 13;\n    unsigned long long int y = pow(10,15);\nwhile(x != y){                                                                                      \n    g[x] = g[x-1] + gcd(x,g[x-1]);\n    printf(\"%llu\\n\", g[x]); \n    printf(\"\\n  %d   \", x);\n    x++;\n\n}\n\n}\n\nunsigned long long int gcd(unsigned long long int a, unsigned long long int b) \n{ \n    // Everything divides 0  \n    if (a == 0) \n       return b; \n    if (b == 0) \n       return a; \n\n    // base case \n    if (a == b) \n        return a; \n\n    // a is greater \n    if (a &gt; b) \n        return gcd(a-b, b); \n    return gcd(a, b-a); \n} \n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 1, "creation_date": 1577265592, "post_id": 59476878, "comment_id": 105131267, "body": "Do you know the difference of relative and absolute path? BTW: The place where your prog was compiled is totally independent in this case here! Only the place from where it is called matters!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577265982, "post_id": 59476878, "comment_id": 105131360, "body": "I&#39;ll compile with: <code>gcc src&#47;print_text_from_file.c</code> and then execute it with: <code>.&#47;src&#47;a.out</code>, the output is: <code>The file doesn&#39;t exist</code>.  -- it is <code>.&#47;src&#47;a.out</code> that doesn&#39;t exits. In order to produce a <code>src&#47;a.out</code> file you need <code>gcc -o src&#47;a.out src&#47;print_text_from_file.c</code> that places the executable in the <code>src</code> directory. You can always forget about that and simply <code>cd src</code> and <code>..&#47;a.out</code>. And you should really be using <code>gcc -Wall -Wextra -pedantic -Wshadow -o where&#47;you&#47;want&#47;exe path&#47;to&#47;your&#47;source.c</code> to enable warnings --  and do not accept code until it compiles without a single warning."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1577267226, "post_id": 59476878, "comment_id": 105131620, "body": "&quot;The file doesn&#39;t exist&quot; is the canonical example of a bad error message. <code>man perror</code>"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1577268270, "post_id": 59476878, "comment_id": 105131822, "body": "Which of the two files is the user allowed to move?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11231342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UmTS_OuYRjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpjuoCZru-bGzsS_Xcrx6yGbNDCQ/mo/photo.jpg?sz=128", "display_name": "Anddy Anddy", "link": "https://stackoverflow.com/users/11231342/anddy-anddy"}, "edited": false, "score": 0, "creation_date": 1577267011, "post_id": 59476947, "comment_id": 105131572, "body": "Actually my bad on the first point, on the test on my machine I was doing it as it was required, I edited my post to solve this bug, my confusion writing the topic.  Following the second point, the challenge of this problem is that I can&#39;t know where the user will put the program, so I don&#39;t know his file tree, so imo, i can&#39;t use absolute paths"}, {"owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "reply_to_user": {"reputation": 21, "user_id": 11231342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UmTS_OuYRjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpjuoCZru-bGzsS_Xcrx6yGbNDCQ/mo/photo.jpg?sz=128", "display_name": "Anddy Anddy", "link": "https://stackoverflow.com/users/11231342/anddy-anddy"}, "edited": false, "score": 0, "creation_date": 1577267890, "post_id": 59476947, "comment_id": 105131733, "body": "I&#39;ve edited the answer to reflect how to get path from the user"}, {"owner": {"reputation": 21, "user_id": 11231342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UmTS_OuYRjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpjuoCZru-bGzsS_Xcrx6yGbNDCQ/mo/photo.jpg?sz=128", "display_name": "Anddy Anddy", "link": "https://stackoverflow.com/users/11231342/anddy-anddy"}, "edited": false, "score": 0, "creation_date": 1577268147, "post_id": 59476947, "comment_id": 105131788, "body": "Aight, thanks but the challenge required by the exercise is that I am not allowed to use arguments from the main (neither scanf or any kind of user input) (precised in the first post), it would be a solution but I simply can&#39;t"}, {"owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "reply_to_user": {"reputation": 21, "user_id": 11231342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UmTS_OuYRjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpjuoCZru-bGzsS_Xcrx6yGbNDCQ/mo/photo.jpg?sz=128", "display_name": "Anddy Anddy", "link": "https://stackoverflow.com/users/11231342/anddy-anddy"}, "edited": false, "score": 0, "creation_date": 1577268567, "post_id": 59476947, "comment_id": 105131899, "body": "if this is the case, I assume the user should have the input file at the working directory (the directory from where you execute your program), otherwise, how can you know the right path to the input file"}, {"owner": {"reputation": 21, "user_id": 11231342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UmTS_OuYRjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpjuoCZru-bGzsS_Xcrx6yGbNDCQ/mo/photo.jpg?sz=128", "display_name": "Anddy Anddy", "link": "https://stackoverflow.com/users/11231342/anddy-anddy"}, "edited": false, "score": 0, "creation_date": 1577269343, "post_id": 59476947, "comment_id": 105132068, "body": "I don&#39;t know. Maybe I could use the unix <code>cd $(find -name $(name_of_the_dir_where_a.out_is))</code> (where name_of... would be src here) and then cwd in order to force the program to search for the file i&#39;m looking for from the correct view. But I have no idea how to code the cd in c and since there will probably be a lot of &quot;src&quot; directories, how to select the good one ?"}, {"owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "reply_to_user": {"reputation": 21, "user_id": 11231342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UmTS_OuYRjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpjuoCZru-bGzsS_Xcrx6yGbNDCQ/mo/photo.jpg?sz=128", "display_name": "Anddy Anddy", "link": "https://stackoverflow.com/users/11231342/anddy-anddy"}, "edited": false, "score": 0, "creation_date": 1577269516, "post_id": 59476947, "comment_id": 105132098, "body": "I don&#39;t think this is the approach your lecturer meant. you can also request the user to create a symbolic link from working directory to the actual input path. Searching for specific file within the entire file system is not recommended. you may find multiple files, you may not have access to some folders, you file system may be large, and the search will consume a lot of resources..."}], "tags": [], "owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "is_accepted": false, "score": 1, "last_activity_date": 1577275652, "last_edit_date": 1577275652, "creation_date": 1577265992, "answer_id": 59476947, "question_id": 59476878, "link": "https://stackoverflow.com/questions/59476878/use-fopen-independently-on-the-current-directory/59476947#59476947", "title": "Use fopen independently on the current directory", "body": "<p>There are several issues here:</p>\n\n<ol>\n<li><p>gcc generates the <code>a.out</code> file at the <strong>working directory</strong>. It does not matter whether your build <code>print_text_from_file.c</code> or <code>src/print_text_from_file.c</code>, the <code>a.out</code> file is created at the same place, at the working directory (not at <code>src</code> directory). When you run src/a.out, I don't know what did you actually run, maybe an old artifact.</p></li>\n<li><p>The file opened by the program calling fopen is relative to the working directory. If you want to open the file <code>src/text_to_be_printed.txt</code> you should give path which is relative to the working directory (i.e. <code>src/text_to_be_printed.txt</code>).</p>\n\n<p>Alternative way is to give the full path of the file. e.g. something like <code>/home/myuser/src/text_to_be_printed.txt</code>; this way, the program will find the input file, not as relative to the working directory but as absolute path.</p>\n\n<p>In order to enable the user to give you the path, you shall change the main function signature to get arguments from the user. It should be: <code>int main(int ac, char **av)</code>. The user shall run the command like this <code>./a.out INPUT_FILE_PATH</code>, where INPUT_FILE_PATH is either relative to the working directory or absolute path.\nYou can access INPUT_FILE_PATH within your code as av[1]. Code will look like this:</p>\n\n<pre><code>int main(int ac, char **av){\n\n   const char *input_path = av[1];\n   FILE *fp = fopen (input_path, \"r\");\n   ...\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1577266324, "last_edit_date": 1577266324, "creation_date": 1577266011, "answer_id": 59476950, "question_id": 59476878, "link": "https://stackoverflow.com/questions/59476878/use-fopen-independently-on-the-current-directory/59476950#59476950", "title": "Use fopen independently on the current directory", "body": "<p>You really should read something like <a href=\"http://www.makelinux.net/alp/\" rel=\"nofollow noreferrer\">Advanced Linux Programming</a> and something about <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\">operating systems</a>.</p>\n\n<p>And you might also look into <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a> and <a href=\"http://man7.org/linux/man-pages/man7/credentials.7.html\" rel=\"nofollow noreferrer\">credentials(7)</a></p>\n\n<p>The important notions are <a href=\"https://en.wikipedia.org/wiki/Working_directory\" rel=\"nofollow noreferrer\">working directory</a>, <a href=\"https://en.wikipedia.org/wiki/Process_(computing)\" rel=\"nofollow noreferrer\">process</a>, <a href=\"https://en.wikipedia.org/wiki/Glob_(programming)\" rel=\"nofollow noreferrer\">glob</a>, <a href=\"https://en.wikipedia.org/wiki/Unix_shell\" rel=\"nofollow noreferrer\">unix shell</a>, and <a href=\"https://en.wikipedia.org/wiki/PATH_(variable)\" rel=\"nofollow noreferrer\">PATH</a></p>\n\n<p>See also <a href=\"http://man7.org/linux/man-pages/man2/chdir.2.html\" rel=\"nofollow noreferrer\">chdir(2)</a>, <a href=\"http://man7.org/linux/man-pages/man7/path_resolution.7.html\" rel=\"nofollow noreferrer\">path_resolution(7)</a>, <a href=\"http://man7.org/linux/man-pages/man7/glob.7.html\" rel=\"nofollow noreferrer\">glob(7)</a>, <a href=\"http://man7.org/linux/man-pages/man3/getcwd.3.html\" rel=\"nofollow noreferrer\">getcwd(3)</a>, <a href=\"http://man7.org/linux/man-pages/man3/exec.3.html\" rel=\"nofollow noreferrer\">exec(3)</a>, <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a></p>\n"}], "owner": {"reputation": 21, "user_id": 11231342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UmTS_OuYRjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpjuoCZru-bGzsS_Xcrx6yGbNDCQ/mo/photo.jpg?sz=128", "display_name": "Anddy Anddy", "link": "https://stackoverflow.com/users/11231342/anddy-anddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577275652, "creation_date": 1577265422, "last_edit_date": 1577267635, "question_id": 59476878, "link": "https://stackoverflow.com/questions/59476878/use-fopen-independently-on-the-current-directory", "title": "Use fopen independently on the current directory", "body": "<p>Let's say I am in 2 differents directory:\nOn the one hand:</p>\n\n<pre><code>print_text_from_file.c\ntext_to_be_printed.txt\n\n</code></pre>\n\n<p>On the other hand:</p>\n\n<pre><code>src/\n    print_text_from_file.c\n    text_to_be_printed.txt\n\n</code></pre>\n\n<p>And the source code from the .c:</p>\n\n<pre><code>// can't use argv\nint main(void){\n    FILE *fp = fopen (\"text_to_be_printed.txt\", \"r\");\n    if (fp != NULL) {\n        // working function which takes fp and prints it as expected\n        print_from_file(fp);\n        fclose (fp);\n    }\n    else {\n        printf(\"The file doesn't exist\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And let's say, the file only contains <code>Hello World !</code></p>\n\n<p>If I compile it \nAfter compiling it from being in the first directory with <code>gcc print_text_from_file.c</code>\nand after executing it with <code>./a.out</code>, the output is:\n<code>Hello world !</code> (exactly what I want)</p>\n\n<p>However if I'm in the second case, I'll compile being on src : <code>gcc print_text_from_file.c</code>\nand then execute it with being out of src: <code>./src/a.out</code>, the output is:\n<code>The file doesn't exist</code>.</p>\n\n<p>So basically the challenge is that I can't use argv AND I can't know from where the user will execute the file (so I don't know if using absolute paths would be correct). From anywhere, the program will have to print Hello World !.</p>\n"}, {"tags": ["c++", "c", "xampp", "nodemcu"], "comments": [{"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1577263421, "post_id": 59476602, "comment_id": 105130828, "body": "firewall on PC? why do you use IP address as hostname? use <code>IPAddress serverIp(172, 20, 10, 9)</code>"}, {"owner": {"reputation": 11, "user_id": 12205203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09140c3a21dc65ab73981f044c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/12205203/adib"}, "reply_to_user": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1577263873, "post_id": 59476602, "comment_id": 105130921, "body": "my firewall on pc is on. I am already tried to off my firewall and it still not working. Did I need to change from <code>char server1[] = &quot;172.20.10.9&quot;;  </code> to <code>IPAddress serverIP(172, 20, 10, 9)</code>?"}, {"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1577266289, "post_id": 59476602, "comment_id": 105131413, "body": "the string hostname would go over a DNS server. if that is not set right then the connection fails on name resolving"}, {"owner": {"reputation": 11, "user_id": 12205203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09140c3a21dc65ab73981f044c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/12205203/adib"}, "reply_to_user": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1577266946, "post_id": 59476602, "comment_id": 105131558, "body": "I&#39;m sorry but I do not really understand. what are you suggest then? I&#39;m totally lost"}, {"owner": {"reputation": 19479, "user_id": 131929, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06780f50c30ffab584630481476ba6f4?s=128&d=identicon&r=PG", "display_name": "Marcel St&#246;r", "link": "https://stackoverflow.com/users/131929/marcel-st%c3%b6r"}, "edited": false, "score": 0, "creation_date": 1577313086, "post_id": 59476602, "comment_id": 105140954, "body": "Try to focus on the real problem. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> -&gt; create a Minimal, Complete, and Verifiable example. This will help find more people willing to try to reproduce your problem."}], "owner": {"reputation": 11, "user_id": 12205203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09140c3a21dc65ab73981f044c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/12205203/adib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577429200, "creation_date": 1577262946, "last_edit_date": 1577429200, "question_id": 59476602, "link": "https://stackoverflow.com/questions/59476602/nodemcu-esp8266-can-connect-with-xampp-database-but-the-data-is-not-in-the-datab", "title": "Nodemcu Esp8266 can connect with Xampp database but the data is not in the database. How can i fix it?", "body": "<p>I am trying to send my sensor data to the Xampp database.I can connect the nodemcu esp8266 with my xampp server. The problem is the sensor data is not stored in the database.</p>\n\n<p>can you help me fix this?</p>\n\n<p>void Sending_To_phpmyadmindatabase() is the part where it should send the sensor data to the database.</p>\n\n<p>this is my code fireAlarm.ino</p>\n\n<pre><code>#include \"DHT.h\"\n#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt;\n#include &lt;ESP8266WebServer.h&gt;\n#include &lt;ESP8266mDNS.h&gt;\n#include &lt;SPI.h&gt;\n#define DHTPIN D2\n#define DHTTYPE DHT11\n\nDHT dht(DHTPIN,DHTTYPE);\n\n\nfloat humidityData;\nfloat temperatureData;\n\n //Fire risk based on Angstrom Index\n String stat1 = \"No Fire\";\n String stat2 = \"Low Risk\";\n String stat3 = \"Medium Risk\";\n String stat4 = \"High Risk\";\n String stat5 = \"Extremely High Risk\";\n\n //Formula to determine the fire risk using Angstrom Index\n float valIndex = (humidityData/20) + ((27-temperatureData)/10);\n\nboolean fire = false;\n\nconst char* ssid = \"Adbhzkpli\";\nconst char* password = \"icecreamcake\";\n\nIPAddress serverIP (172,20,10,9);  \n\nWiFiClient client;    \n\n\nvoid setup()\n{\n\n    pinMode(BUILTIN_LED, OUTPUT);\n    pinMode(DHTPIN, INPUT);\n    digitalWrite(BUILTIN_LED, LOW);\n\n    Serial.begin(115200);\n    delay(10);\n\n  // Connect to WiFi network\n    Serial.println();\n    Serial.println();\n    Serial.print(\"Connecting to \");\n    Serial.println(ssid);\n\n    WiFi.begin(ssid, password);\n\n    while (WiFi.status() != WL_CONNECTED) {\n      delay(500);\n      Serial.print(\".\");\n    }\n    Serial.println(\"\");\n    Serial.println(\"WiFi connected\");\n\n  // Start the server\n    server.begin();\n    Serial.println(\"Server started\");\n    Serial.print(WiFi.localIP());\n    delay(1000);\n    Serial.println(\"connecting...\");\n\n    dht.begin();\n }\n\n\nvoid loop()\n{ \n  humidityData = dht.readHumidity();\n  temperatureData = dht.readTemperature(); \n\n  Sending_To_phpmyadmindatabase(); \n}\n\n\n\nvoid Sending_To_phpmyadmindatabase()   //CONNECTING WITH MYSQL\n {\n\n   if (client.connect(serverIP, 80))\n   {\n\n      Serial.println(\"connected\");\n      // Make a HTTP request:\n      Serial.print(\"GET /mdff/insertsensor1.php?humidity=\");\n      client.print(\"GET /mdff/insertsensor1.php?humidity=\");     //YOUR URL\n      Serial.println(humidityData);\n      client.print(humidityData);\n\n      client.print(\"&amp;temperature=\");\n      Serial.println(\"&amp;temperature=\");\n      client.print(temperatureData);\n      Serial.println(temperatureData);\n\n      //Angstrom Index\n      if(valIndex &gt;= 4.0)\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat1);\n        Serial.println(stat1);  \n      }\n      else if ((valIndex &gt;= 3.0) &amp;&amp; (valIndex &lt; 4.0))\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat2);\n        Serial.println(stat2);\n      }\n      else if ((valIndex &gt;= 2.5) &amp;&amp; (valIndex &lt; 3.0))\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat3);\n        Serial.println(stat3);\n\n      }\n      else if ((valIndex &gt;= 2.0) &amp;&amp; (valIndex &lt; 2.5))\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat4);\n        Serial.println(stat4);\n\n      }\n      else if (valIndex &lt; 2.0)\n      {\n        client.print(\"&amp;value=\");\n        Serial.println(\"&amp;value=\");\n        client.print(valIndex);\n        Serial.println(valIndex);\n\n        client.print(\"&amp;status=\");\n        Serial.println(\"&amp;status=\");\n        client.print(stat5);\n        Serial.println(stat5);\n\n      }\n\n    client.print(\" \");      //SPACE BEFORE HTTP/1.1\n    client.print(\"HTTP/1.1\");\n    client.println();\n    client.println(\"Host: 172.20.10.9\");\n    client.println(\"Connection: close\");\n    client.println();\n  } \n  else \n  {\n    // if you didn't get a connection to the server:\n    Serial.println(\"connection failed\");\n  }\n\n }\n\n</code></pre>\n\n<p>I don't think my php code is the problem because I am trying to insert data to the database manually and its working fine. I think my nodemcu code is the problem. </p>\n\n<p>Can you help me with my Final Year Project please. Please help me. </p>\n"}, {"tags": ["c", "arrays", "pointers", "char", "copy"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1577263543, "post_id": 59476589, "comment_id": 105130847, "body": "2nd loop should go from <code>0</code> to <code>size</code> just like the first to properly index into <code>second</code>. Adjust indexing <code>ans</code> with <code>ans[size + 1 + i] = second[i];</code>. Also if you&#39;re going to treat <code>ans</code> as a string you need to add a zero terminator."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1577263697, "post_id": 59476589, "comment_id": 105130886, "body": "Adding fuel to the fire, <code>ans[size] = &quot;,&quot;</code> had better be puking at least a compiler warning (assignment of pointer to <code>char</code>), or you need to turn up your compiler warning levels. And those assigned values should be offset by <code>&#39;0&#39;</code>, assuming you actually fix the indexing issues."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1577263710, "post_id": 59476589, "comment_id": 105130888, "body": "<code>ans[i] = &quot;,&quot;</code> is wrong.  You can store the integer <code>0</code> in a char, but it will not display as <code>0</code> when you try to use printf to print it.  Show us the code where you print <code>ans</code>.  That is (likely) where the problem is.  If you&#39;re doing <code>printf(&quot;%s\\n&quot;, ans)</code>, that will not work."}, {"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "edited": false, "score": 0, "creation_date": 1577265323, "post_id": 59476589, "comment_id": 105131206, "body": "As others also have pointed, the provided code is a little too less to solve your problems in total. What exactly is the declaration and definition for <code>size</code>,<code>first</code> and <code>second</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "edited": false, "score": 0, "creation_date": 1577263538, "post_id": 59476661, "comment_id": 105130846, "body": "Also the indexing in the second loop. The <code>malloc</code> doesn&#39;t need sizeof int either. The proper integer to character digit is also required"}], "tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1577319767, "last_edit_date": 1577319767, "creation_date": 1577263470, "answer_id": 59476661, "question_id": 59476589, "link": "https://stackoverflow.com/questions/59476589/copy-two-arrays-of-int-to-one-char-in-c/59476661#59476661", "title": "copy two arrays of int to one char* in C", "body": "<p>There are at least four issues with your code. </p>\n\n<ol>\n<li>You <code>malloc</code> the wrong size, you want to use <code>sizeof(char)</code>. </li>\n<li>You need to zero terminate it, so you need to add extra room for the terminating zero</li>\n</ol>\n\n<pre><code>char* ans = (char*)malloc((size * 2+2) * sizeof(char));\nsecond[size * 2+1] = 0;\n</code></pre>\n\n<ol start=\"3\">\n<li>Also the indexing of the second loop is wrong. You are accessing second array out of bounds. Make the loop more like the first. </li>\n<li>We also need to convert the <code>integer</code> value to a <code>char</code> in the loops.</li>\n</ol>\n\n<pre><code>for (int i = 0; i &lt; size; i++)\n    ans[size+i+1] = second[i] + '0';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": false, "score": 1, "last_activity_date": 1577264110, "creation_date": 1577264110, "answer_id": 59476734, "question_id": 59476589, "link": "https://stackoverflow.com/questions/59476589/copy-two-arrays-of-int-to-one-char-in-c/59476734#59476734", "title": "copy two arrays of int to one char* in C", "body": "<p>Among the multitude of problems:</p>\n\n<ul>\n<li>Your allocation size is wrong. It should include space for the separating comma <em>and</em> the terminating nullchar. <code>sizeof(int)</code> is wrong regardless, it should be <code>sizeof(char)</code> and as-such can be omitted (<code>sizeof(char)</code> is always <code>1</code>).</li>\n<li>Your storage is wrong. You want to store characters, and your values should be adjusted relative to <code>'0'</code>.</li>\n<li>Your indexing of the second loop is wrong.</li>\n</ul>\n\n<p>In reality, you don't need the second loop in the first place:</p>\n\n<pre><code>char* ans = malloc(size * 2 + 2);\nfor (int i = 0; i &lt; size; i++)\n{\n    ans[i] = '0' + first[i];\n    ans[size+1+i] = '0' + second[i];\n}\nans[size] = ',';\nans[2*size+1] = 0;\n</code></pre>\n\n<p>That's it.</p>\n"}, {"tags": [], "owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "is_accepted": false, "score": 0, "last_activity_date": 1577267255, "last_edit_date": 1577267255, "creation_date": 1577266917, "answer_id": 59477089, "question_id": 59476589, "link": "https://stackoverflow.com/questions/59476589/copy-two-arrays-of-int-to-one-char-in-c/59477089#59477089", "title": "copy two arrays of int to one char* in C", "body": "<p>1.</p>\n\n<pre><code> char* ans = (char*)malloc((size * 2+1) * sizeof(int));\n</code></pre>\n\n<ul>\n<li>What is <code>size</code> here? It is not defined and declared in the provided code.</li>\n<li>You do not need to cast the return value of malloc() to char. In fact, you do not need to cast the return value of malloc() anymore. It is a habit from the early C days.</li>\n<li>Why do you need a char pointer here at all exactly? If you want to print <code>01100,10111</code> there is no need to use a char pointer for the output of the integer values.</li>\n</ul>\n\n<p>2.</p>\n\n<pre><code>for (int i = 0; i &lt; size; i++)\n    ans[i] = first[i];\n</code></pre>\n\n<ul>\n<li>Again what is <code>size</code> here?</li>\n<li>What is <code>first</code> here? If it isn\u00b4t a pointer this statement is invalid.</li>\n</ul>\n\n<p>3.</p>\n\n<pre><code>    ans[size] = \",\";\n</code></pre>\n\n<ul>\n<li>This operation is invalid. You are trying to assign a string to a pointer.</li>\n<li>By the way, I don\u00b4t know what you trying to do with this statement. You can incorporate the comma separate in the output of <code>01100,10111</code>, without your intend to include it int the memory of the int arrays itself.</li>\n</ul>\n\n<p>4.</p>\n\n<pre><code>for (int i = size+1; i &lt; 2*size+1; i++)\n    ans[i] = second[i];\n</code></pre>\n\n<ul>\n<li>Same as above: What is value and the type of <code>size</code>?</li>\n<li>What is <code>second</code>? If it isn\u00b4t it a pointer this statement is invalid.</li>\n</ul>\n\n<p>5.</p>\n\n<p>To answer to the question title:</p>\n\n<h3>(How to) Copy two arrays of int to one char* in C</h3>\n\n<p>This isn\u00b4t possible. You can\u00b4t copy two arrays with its data to a pointer to char.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12591754"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1577319767, "creation_date": 1577262849, "last_edit_date": 1577263030, "question_id": 59476589, "link": "https://stackoverflow.com/questions/59476589/copy-two-arrays-of-int-to-one-char-in-c", "title": "copy two arrays of int to one char* in C", "body": "<p>I have to arrays of int for example <code>arr1={0,1,1,0,0}</code>, <code>arr2={1,0,1,1,1}</code> and I need to return 1 char* created by <code>malloc</code> that will be shown like this : <code>\"01100,10111\"</code>.\nwhen I do for loop it doesn't work, how can I do it ?</p>\n\n<pre><code>char* ans = (char*)malloc((size * 2+1) * sizeof(int));\nfor (int i = 0; i &lt; size; i++)\n    ans[i] = first[i];\nans[size] = \",\";\nfor (int i = size+1; i &lt; 2*size+1; i++)\n    ans[i] = second[i];\n</code></pre>\n"}, {"tags": ["c", "data-structures", "linked-list", "insertion"], "comments": [{"owner": {"reputation": 2953, "user_id": 5133088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d0efad94ced5dcd194c0a482cafd4f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen Heier", "link": "https://stackoverflow.com/users/5133088/jeroen-heier"}, "edited": false, "score": 3, "creation_date": 1577261864, "post_id": 59476376, "comment_id": 105130516, "body": "Welcome to StackOverflow. DId you also debug your code?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577474213, "post_id": 59476376, "comment_id": 105182626, "body": "OT: regarding: <code>struct Node* new_node = (struct Node*) malloc(sizeof(struct Node));</code>  1) in C, the returned type is <code>void*</code>, which can be assigned to any pointer.  Casting just clutters the code.  Suggest removing the cast.  2) when calling any of the heap allocation functions: <code>malloc()</code>, <code>calloc()</code> and/or <code>realloc()</code>, always check (!=NULL) the returned value to assure the operation was successful.  If not successful, then call <code>perror( &quot;my error message&quot; ); to output both your error message AND the text reason the system thinks the error occurred to </code>stderr`."}], "answers": [{"tags": [], "owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "is_accepted": false, "score": 3, "last_activity_date": 1577261382, "creation_date": 1577261382, "answer_id": 59476425, "question_id": 59476376, "link": "https://stackoverflow.com/questions/59476376/why-my-append-function-is-not-showing-output/59476425#59476425", "title": "Why my append function is not showing output?", "body": "<p>The problem is just on printing out in <code>printList()</code>:</p>\n\n<pre><code>while(node-&gt;next!=NULL)\n</code></pre>\n\n<p>The very last node has the value <code>5</code> and <code>node-&gt;next == NULL</code>, so the loop will terminate without printing. Simply change to:</p>\n\n<pre><code>while(node != NULL)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7343806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1352818301416213/picture?type=large", "display_name": "Anirudh Rawat", "link": "https://stackoverflow.com/users/7343806/anirudh-rawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577261382, "creation_date": 1577260923, "last_edit_date": 1577261046, "question_id": 59476376, "link": "https://stackoverflow.com/questions/59476376/why-my-append-function-is-not-showing-output", "title": "Why my append function is not showing output?", "body": "<p>I'm using this append function to append data on my linked-list but it's not showing any output. I've reviewed the code multiple times. This code worked in my previous code.</p>\n\n<pre><code>\nvoid append(struct Node** head_ref, int new_data)\n{\n/* 1. allocate node */\n    struct Node* new_node = (struct Node*) malloc(sizeof(struct Node));\n\n    struct Node *last = *head_ref;  /* used in step 5*/\n\n    /* 2. put in the data  */\n    new_node-&gt;data  = new_data;\n\n    /* 3. This new node is going to be the last node, so make next\n          of it as NULL*/\n    new_node-&gt;next = NULL;\n\n    /* 4. If the Linked List is empty, then make the new node as head */\n    if (*head_ref == NULL)\n    {\n       *head_ref = new_node;\n       return;\n    }\n\n    /* 5. Else traverse till the last node */\n    while (last-&gt;next!= NULL)\n        last = last-&gt;next;\n\n    /* 6. Change the next of last node */\n    last-&gt;next = new_node;\n    return;\n}\n\nvoid printList(struct Node *node)\n{\nwhile(node-&gt;next!=NULL)\n{\nprintf(\"%d \",node-&gt;data);\nnode = node-&gt;next;\n}\n}\n\nint main()\n{\nstruct Node *head = NULL;\n\npush(&amp;head,7);\npush(&amp;head,1);\npush(&amp;head, 3);\npush(&amp;head, 2);\nappend(&amp;head,5);\n\nputs(\"Created Linked List: \");\nprintList(head);\n//deleteNode(&amp;head, 1);\nputs(\"\\nLinked List after Deletion of 1: \");\nprintList(head);\nreturn 0;\n}\n</code></pre>\n\n<p>It's giving output:\n<strong>2->3->1->7</strong>\nAlthough I need output:\n<strong>2->3->1->7->5</strong></p>\n\n<blockquote>\n  <p>Should I make the changes in linked list management?</p>\n</blockquote>\n"}, {"tags": ["c++", "c", "encryption", "openssl", "aes"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1577276665, "post_id": 59476128, "comment_id": 105133751, "body": "<i>&quot;...These undocumented functions ... has a known bug....&quot;</i>: source: <a href=\"https://mta.openssl.org/pipermail/openssl-commits/2019-April/022801.html\" rel=\"nofollow noreferrer\">mta.openssl.org/pipermail/openssl-commits/2019-April/&hellip;</a>  So not a public API and bugged."}, {"owner": {"reputation": 17201, "user_id": 9014097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2dJaU.png?s=128&g=1", "display_name": "Topaco", "link": "https://stackoverflow.com/users/9014097/topaco"}, "edited": false, "score": 1, "creation_date": 1577287078, "post_id": 59476128, "comment_id": 105136165, "body": "My understanding is that not only the implementation (i.e. <code>AES_ige_encrypt()</code>) but IGE itself (i.e. the block cipher mode as such, <a href=\"https://nourbakhsh.ir/wp-content/uploads/2015/11/jakobsen-master-thesis-telegram.pdf\" rel=\"nofollow noreferrer\">block diagram</a>, p. 11) is deprecated in OpenSSL. Then it is rather unlikely to find anything with the <i>same</i> functionality that is <i>not</i> deprecated in OpenSSL. But this is only a guess. You might find <a href=\"https://crypto.stackexchange.com/a/43842\">this</a> and <a href=\"https://crypto.stackexchange.com/a/9515\">this</a> interesting."}], "answers": [{"comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1577586386, "post_id": 59504133, "comment_id": 105204354, "body": "Or to grab the current code and fix the Bi-IGE bug for yourself, of course, then link against OpenSSL for the block cipher. Or re-implement Bi-IGE according to spec. But I&#39;ll be danged if I&#39;m going to create a competing answer against Matt :)"}], "tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": true, "score": 2, "last_activity_date": 1577467967, "creation_date": 1577467967, "answer_id": 59504133, "question_id": 59476128, "link": "https://stackoverflow.com/questions/59476128/alternative-for-deprecated-aes-ige-encrypt-api-in-openssl/59504133#59504133", "title": "Alternative for deprecated AES_ige_encrypt() API in openssl", "body": "<p>Are you sure you are using the correct version of OpenSSL? That function is deprecated in the master branch (i.e. what will become OpenSSL 3.0), but is not yet deprecated in 1.1.1.</p>\n\n<p>Anyway, you should not be using these modes. As per the CHANGES entry:</p>\n\n<blockquote>\n  <p>*) The functions AES_ige_encrypt() and AES_bi_ige_encrypt() have\n  been\n       deprecated. These undocumented functions were never integrated into the EVP\n       layer and implement the AES Infinite Garble Extension (IGE) mode and AES\n       Bi-directional IGE mode. These modes were never formally standardised and\n       usage of these functions is believed to be very small. In particular\n       AES_bi_ige_encrypt() has a known bug. It accepts 2 AES keys, but only one\n       is ever used. The security implications are believed to be minimal, but\n       this issue was never fixed for backwards compatibility reasons. New code\n       should not use these modes.\n       [Matt Caswell]</p>\n</blockquote>\n\n<p>As per my comment on the end - new code should not use these modes. If you are using them, then the alternative is to look for an alternative mode that meets your requirement and use the EVP functions to use that mode.</p>\n"}], "owner": {"reputation": 23, "user_id": 11016015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dCb7z.jpg?s=128&g=1", "display_name": "VargheseJ", "link": "https://stackoverflow.com/users/11016015/varghesej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 59504133, "answer_count": 1, "score": 2, "last_activity_date": 1577467967, "creation_date": 1577258590, "last_edit_date": 1577260463, "question_id": 59476128, "link": "https://stackoverflow.com/questions/59476128/alternative-for-deprecated-aes-ige-encrypt-api-in-openssl", "title": "Alternative for deprecated AES_ige_encrypt() API in openssl", "body": "<p>While upgrading from OpenSSL version 1.0.0 to 1.1.1x there was a warning that the API <code>AES_ige_encrypt()</code> is deprecated which is used for the encryption and decryption using AES_ige.\nEven though the source comments says the function is deprecated it not mentioning anything about any alternatives for this API.\nSearching the net didn't gave any useful information regarding this.\nIt will be very helpful if anyone can suggest the OpenSSL API that will provide the same functionality as <code>AES_ige_encrypt()</code> API.</p>\n"}, {"tags": ["c", "arrays", "matrix"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1577257700, "post_id": 59476030, "comment_id": 105129732, "body": "include the code in the question and format it properly. Don&#39;t post it in comments like that"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1577257905, "post_id": 59476030, "comment_id": 105129768, "body": "And please ask an actual question. What specific problem are you encountering?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1577258384, "post_id": 59476030, "comment_id": 105129858, "body": "&quot;doesnt run correctly&quot;. Can you please be more precise? Does it crash? Does it print nothing? Does it print some correct results and some wrong results? Also, please format the code so that it is readable."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1577258836, "post_id": 59476030, "comment_id": 105129958, "body": "What is the input your are entering? <code>&quot;Enter an integer n&gt;5</code> implies you are entering a number greater than 5. But the condition <code>while(n&gt;5)</code> would be wrong for that as it will keep looping unless the number is less than or equal to 5."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1577266068, "post_id": 59476030, "comment_id": 105131376, "body": "BTW, it&#39;s <code>int main(void)</code>, not <code>main()</code>. What compiler are you using?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1577266472, "post_id": 59476030, "comment_id": 105131457, "body": "What is the range that you need? The formula you are using will produce numbers in [0, 10], but you may want to also use <code>srand</code> once in <code>main</code>."}, {"owner": {"reputation": 11, "user_id": 9202655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WMqV68nuw3U/AAAAAAAAAAI/AAAAAAAACSo/FbXYOIKatI4/photo.jpg?sz=128", "display_name": "Black Mamba", "link": "https://stackoverflow.com/users/9202655/black-mamba"}, "edited": false, "score": 0, "creation_date": 1577286543, "post_id": 59476030, "comment_id": 105136058, "body": "I am using Dev C, the range i need is random numbers between 1-10 depending to the size of the array i give to the variable n which is the size of the array."}], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 12133371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfq9.png?s=128&g=1", "display_name": "Sinon", "link": "https://stackoverflow.com/users/12133371/sinon"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1577260690, "post_id": 59476226, "comment_id": 105130264, "body": "@kaylum,ok, thanks for your advice. I will edit my answer"}, {"owner": {"reputation": 11, "user_id": 9202655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WMqV68nuw3U/AAAAAAAAAAI/AAAAAAAACSo/FbXYOIKatI4/photo.jpg?sz=128", "display_name": "Black Mamba", "link": "https://stackoverflow.com/users/9202655/black-mamba"}, "edited": false, "score": 0, "creation_date": 1577261008, "post_id": 59476226, "comment_id": 105130328, "body": "The code after i fixed continues to output a lot of numbers that are not between [1-10] and i cant find what i do wrong i looked everywhere on internet that&#39;s why i ask here cause i know if someone doesnt help me here noone will."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 11, "user_id": 9202655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WMqV68nuw3U/AAAAAAAAAAI/AAAAAAAACSo/FbXYOIKatI4/photo.jpg?sz=128", "display_name": "Black Mamba", "link": "https://stackoverflow.com/users/9202655/black-mamba"}, "edited": false, "score": 1, "creation_date": 1577261136, "post_id": 59476226, "comment_id": 105130354, "body": "@BlackMamba The <code>showPin</code> function is printing <code>i</code> and <code>j</code>. It&#39;s not printing the array contents."}, {"owner": {"reputation": 11, "user_id": 9202655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WMqV68nuw3U/AAAAAAAAAAI/AAAAAAAACSo/FbXYOIKatI4/photo.jpg?sz=128", "display_name": "Black Mamba", "link": "https://stackoverflow.com/users/9202655/black-mamba"}, "edited": false, "score": 0, "creation_date": 1577261398, "post_id": 59476226, "comment_id": 105130404, "body": "Can u suggest a change, i dont know how it is supposed to be i cant find a similar problem nowhere."}, {"owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "edited": false, "score": 1, "creation_date": 1577261470, "post_id": 59476226, "comment_id": 105130419, "body": "<code>printf(&quot;%d\\n&quot;,p[i][j]);</code> will be fine"}, {"owner": {"reputation": 46, "user_id": 12133371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfq9.png?s=128&g=1", "display_name": "Sinon", "link": "https://stackoverflow.com/users/12133371/sinon"}, "reply_to_user": {"reputation": 11, "user_id": 9202655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WMqV68nuw3U/AAAAAAAAAAI/AAAAAAAACSo/FbXYOIKatI4/photo.jpg?sz=128", "display_name": "Black Mamba", "link": "https://stackoverflow.com/users/9202655/black-mamba"}, "edited": false, "score": 0, "creation_date": 1577261540, "post_id": 59476226, "comment_id": 105130436, "body": "@BlackMamba, as user3386109 has say, you should output p[i][j]"}], "tags": [], "owner": {"reputation": 46, "user_id": 12133371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfq9.png?s=128&g=1", "display_name": "Sinon", "link": "https://stackoverflow.com/users/12133371/sinon"}, "is_accepted": false, "score": 1, "last_activity_date": 1577261393, "last_edit_date": 1577261393, "creation_date": 1577259485, "answer_id": 59476226, "question_id": 59476030, "link": "https://stackoverflow.com/questions/59476030/make-a-2d-array-with-user-giving-the-size-of-the-array-nn-and-the-array-getti/59476226#59476226", "title": "Make a 2d array with user giving the size of the array (n*n) and the array getting filled with random numbers [1-10] without malloc", "body": "<p>Your question is on the condition of \"while\". You want a n>5, so what you should put into \"while\" should be \"<strong>n&lt;=5</strong>\", that way you can break the \"while\" if n is actually greater than 5.</p>\n\n<p>A more thing to say, it's better to use malloc than just use int p[n][n].\nBecause when you use int p[n][n], the memory of p is allocated on the stack, which may make the stack overflow if the n is too large. And if you use malloc, the space is on the heap, and you can easily change the size of p by using realloc().</p>\n\n<p>On many IDEs(for example,visual studio), the syntax of int p[n][n] is error, the IDE will tell you to give a constant instead of a variable. </p>\n\n<p>I think you can view more discussion on:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/34975342/creating-dynamic-array-without-malloc\">Creating Dynamic Array without malloc</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6656731/dynamic-arrays-in-c-without-malloc\">Dynamic arrays in C without malloc?</a></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 9202655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WMqV68nuw3U/AAAAAAAAAAI/AAAAAAAACSo/FbXYOIKatI4/photo.jpg?sz=128", "display_name": "Black Mamba", "link": "https://stackoverflow.com/users/9202655/black-mamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1577261630, "creation_date": 1577257528, "last_edit_date": 1577261630, "question_id": 59476030, "link": "https://stackoverflow.com/questions/59476030/make-a-2d-array-with-user-giving-the-size-of-the-array-nn-and-the-array-getti", "title": "Make a 2d array with user giving the size of the array (n*n) and the array getting filled with random numbers [1-10] without malloc", "body": "<p>This is a function to fill the array with random numbers. <code>n</code> is the user input,<code>p[n][n]</code> is the array I try to create.I wanna use 2 functions named <code>fillPin2d</code> and <code>showPin2d</code> in order one function to fill the array with random numbers and one to print the array.The program keeps asking to enter an integer and its doesn't show the array I created.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid fillPin2d(int n,int p[n][n])\n{\n    int i,j;\n    for(i=0;i&lt;n;i++)\n        for(j=0;j&lt;n;j++)\n            p[i][j]=rand()% 11;\n\n}\nvoid showPin(int n,int p[n][n])\n{\n    int i,j;\n\n    for(i=0;i&lt;n;i++){\n        for(j=0;j&lt;n;j++){\n            printf(\"%d\\n\",p[i][j]);\n        }\n    }\n}\n\nmain() {\n   int n;\n\n   do {\n        printf(\"Enter an integer n&gt;5: \\n\");\n        scanf(\"%d\",&amp;n);\n    }while(n&lt;=5);\n\n    int p[n][n];\n    fillPin2d(n,p);\n    showPin(n,p);\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1577257220, "post_id": 59475922, "comment_id": 105129653, "body": "Please edit your question by adding an entire paragraph motivating it"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1577258514, "last_edit_date": 1577258514, "creation_date": 1577256869, "answer_id": 59475956, "question_id": 59475922, "link": "https://stackoverflow.com/questions/59475922/can-we-use-getcontext-in-linux-to-get-the-context-of-an-another-thread/59475956#59475956", "title": "Can we use getcontext in linux to get the context of an another thread?", "body": "<blockquote>\n  <p>can we use getcontext in linux to get the context of an another thread?</p>\n</blockquote>\n\n<p><strong>You cannot get the context of another running thread</strong>, since that thread is probably running on some other <a href=\"https://en.wikipedia.org/wiki/Multi-core_processor\" rel=\"nofollow noreferrer\">processor core</a> (so its context is of course changing, since it contains the <a href=\"https://en.wikipedia.org/wiki/Processor_register\" rel=\"nofollow noreferrer\">processor registers</a> of that other thread).</p>\n\n<p>Read much more about <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\">operating systems</a> and <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a>. Read also more about the <a href=\"https://www.kernel.org/doc/html/latest/scheduler/index.html\" rel=\"nofollow noreferrer\">Linux kernel scheduler</a> and a <a href=\"https://computing.llnl.gov/tutorials/pthreads/\" rel=\"nofollow noreferrer\">pthread tutorial</a>.</p>\n\n<p>See also <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a>, <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">signal-safety(7)</a>, <a href=\"http://man7.org/linux/man-pages/man7/futex.7.html\" rel=\"nofollow noreferrer\">futex(7)</a>, <a href=\"http://man7.org/linux/man-pages/man7/pthreads.7.html\" rel=\"nofollow noreferrer\">pthreads(7)</a>, <a href=\"http://man7.org/linux/man-pages/man7/nptl.7.html\" rel=\"nofollow noreferrer\">nptl(7)</a>, <a href=\"http://man7.org/linux/man-pages/man7/credentials.7.html\" rel=\"nofollow noreferrer\">credentials(7)</a>, <a href=\"http://man7.org/linux/man-pages/man2/tgkill.2.html\" rel=\"nofollow noreferrer\">tgkill(2)</a> and <a href=\"http://man7.org/linux/man-pages/man2/clone.2.html\" rel=\"nofollow noreferrer\">clone(2)</a> (the <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">system call</a> used by <a href=\"http://man7.org/linux/man-pages/man3/pthread_create.3.html\" rel=\"nofollow noreferrer\">pthread_create(3)</a> to start threads).</p>\n\n<p>You might but should not use low level <a href=\"http://man7.org/linux/man-pages/man2/ptrace.2.html\" rel=\"nofollow noreferrer\">ptrace(2)</a> facilities. I tend to believe that a thread might trace another thread of the same process (see <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\">fork(2)</a>...), but I am not sure, and if you did that, your program becomes very brittle (prone to <a href=\"https://en.wikipedia.org/wiki/Heisenbug\" rel=\"nofollow noreferrer\">heisenbugs</a>).</p>\n\n<p>I believe that <a href=\"http://man7.org/linux/man-pages/man3/setcontext.3.html\" rel=\"nofollow noreferrer\">setcontext(3)</a> and <strong><code>getcontext</code> should <em>not</em> be used in multi-threaded programs</strong>.</p>\n\n<p>Study the source code of an existing standard C library such as <a href=\"https://musl-libc.org/\" rel=\"nofollow noreferrer\">musl-libc</a> or GNU <a href=\"https://www.gnu.org/software/libc/\" rel=\"nofollow noreferrer\">glibc</a>. Use <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 12594380, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCDyrvWIaE7LAAC4l2jPW-Q7b8NsFhtL8OwIqOhIA=k-s128", "display_name": "sunil kn", "link": "https://stackoverflow.com/users/12594380/sunil-kn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577258514, "creation_date": 1577256694, "last_edit_date": 1577258113, "question_id": 59475922, "link": "https://stackoverflow.com/questions/59475922/can-we-use-getcontext-in-linux-to-get-the-context-of-an-another-thread", "title": "Can we use getcontext in linux to get the context of an another thread?", "body": "<p>I am trying to understand the <code>getcontext</code> and <code>setcontext</code> linux API.\ncurrently <code>getcontext</code> can be used to get the context of its own thread.\nand I wanted to know whether it can also get the context of an another thread.</p>\n"}, {"tags": ["c", "arrays", "syntax", "operators", "increment"], "comments": [{"owner": {"reputation": 1950, "user_id": 11207416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d91d68c248076f96733f44a1f5f4e05?s=128&d=identicon&r=PG&f=1", "display_name": "jkb", "link": "https://stackoverflow.com/users/11207416/jkb"}, "edited": false, "score": 2, "creation_date": 1577256205, "post_id": 59475865, "comment_id": 105129483, "body": "Presumably <code>graph[x][0]</code> contains some value of a type that supports the increment operator. Maybe an int? Without seeing the definition of <code>graph</code> it&#39;s hard to say for sure."}, {"owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "edited": false, "score": 1, "creation_date": 1577256257, "post_id": 59475865, "comment_id": 105129497, "body": "<a href=\"https://en.wikipedia.org/wiki/Increment_and_decrement_operators\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Increment_and_decrement_operators</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577257269, "post_id": 59475865, "comment_id": 105129662, "body": "Unrelated: I recommend sanitizing <code>x</code> and <code>y</code> before using them as array indices. The foolish or malicious user can cause a great deal of harm if you don&#39;t make absolutely certain what they&#39;ve provided is in range. In general, always make sure you A) got input (check <code>scanf</code>&#39;s return code as it may have failed) and B) the value of the input is in a range you can use."}, {"owner": {"reputation": 140, "user_id": 6774250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sruUzjfIs7k/AAAAAAAAAAI/AAAAAAAAADI/0mir0-9AWLc/photo.jpg?sz=128", "display_name": "michi7x7", "link": "https://stackoverflow.com/users/6774250/michi7x7"}, "edited": false, "score": 0, "creation_date": 1577261547, "post_id": 59475865, "comment_id": 105130438, "body": "Is this code from a crackme or similar?"}], "answers": [{"tags": [], "owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "is_accepted": false, "score": 4, "last_activity_date": 1577256705, "last_edit_date": 1577256705, "creation_date": 1577256279, "answer_id": 59475890, "question_id": 59475865, "link": "https://stackoverflow.com/questions/59475865/how-does-the-increment-operator-work-with-an-array/59475890#59475890", "title": "How does the increment operator work with an array?", "body": "<p><code>++</code> is a <em>unary</em> operator, i.e., it acts on one operand.</p>\n\n<p>The statement <code>graph[x][0]++;</code> should be perceived as <code>(graph[x][0])++;</code>, which means that the value in the 2d array <code>graph</code> at index <code>x</code> and <code>0</code> for the first and the second dimension respectively is fetched, and then the operator is applied to it, thus increasing it by one.</p>\n\n<blockquote>\n  <p>Is it increasing the value of the array</p>\n</blockquote>\n\n<p>Yes, at a specific index. </p>\n\n<blockquote>\n  <p>or iterating through the array somehow?</p>\n</blockquote>\n\n<p>No.</p>\n"}, {"tags": [], "owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "is_accepted": false, "score": 0, "last_activity_date": 1577292761, "last_edit_date": 1577292761, "creation_date": 1577292475, "answer_id": 59480272, "question_id": 59475865, "link": "https://stackoverflow.com/questions/59475865/how-does-the-increment-operator-work-with-an-array/59480272#59480272", "title": "How does the increment operator work with an array?", "body": "<p>Let\u00b4s first see how the increment-operator <code>++</code> usually works:</p>\n\n<pre><code>var++\n</code></pre>\n\n<p>The increment operator is used to increase a value held and portrayed by a variable by <code>1</code> or <code>1.0</code>, equivalent to the statement <code>var = var + 1;</code> or <code>var = var + 1.0;</code>.</p>\n\n<p>So it is increasing the value by 1 counter.</p>\n\n<p>Now lets look on what an array is:</p>\n\n<pre><code>datatype array_of_variables[index]; \n</code></pre>\n\n<p>An array is a bond of several variables of the same datatype. By giving the index fields we can access certain variables of this cluster.</p>\n\n<pre><code>array_of_variables[0];\n</code></pre>\n\n<p>Following the above statement, we access the variable which is at first in dimension 1, due to of course, this is an one-dimensional array only.</p>\n\n<p>So, the expression <code>array_of_variables[0]</code> is an identification for this first variable and the value held inside it.</p>\n\n<p>The same goes for two-dimensional arrays. The only thing what is changed is that the \"adressing\" of a certain variable is now done by two index fields, according to the where the variable is stored in the dimensions.</p>\n\n<p>So, <code>array_of_variables[0][1]</code> equals the value held by variable 2 in dimension 1. It is an identification for it.</p>\n\n<hr>\n\n<p>Now the statement, </p>\n\n<pre><code> array_of_variables[0][1]++;\n</code></pre>\n\n<p>does the same as done by a certain variable on its own. It is increasing the value inside the corresponding variable. </p>\n\n<p>The array as whole does not get changed. Only a specific variable and the its value.</p>\n\n<hr>\n\n<p>There is also an important difference whether the operator is preceding the variable <code>++var</code> or trailing at it <code>var++</code>.</p>\n\n<p>But I do not want to discuss that certain topic here further, it is best explained at:\n<a href=\"https://stackoverflow.com/questions/24853/c-what-is-the-difference-between-i-and-i?rq=1\">C: What is the difference between ++i and i++?</a></p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1577435570, "creation_date": 1577435570, "answer_id": 59498012, "question_id": 59475865, "link": "https://stackoverflow.com/questions/59475865/how-does-the-increment-operator-work-with-an-array/59498012#59498012", "title": "How does the increment operator work with an array?", "body": "<p>The <code>++</code> and <code>--</code> operators act on scalar values, incrementing or decrementing them.  An array (not a pointer) is an aggregate of values (an ordered list of values stored contiguously in memory) so it cannot be <em>incremented</em> or <em>decremented</em>.</p>\n\n<p>What is confusing about this is that an array and a pointer share access methods when the <code>[]</code> operator is used, as the pointer is considered a scalar value and is allowed to be <em>incremented</em> or <em>decremented</em>.</p>\n\n<p>So you can increment or decrement a pointer, when you do this, the pointer will point to the <em>next</em> (or <em>previous</em>) element, considering the elements are stored in <em>array style</em>.  This is a very useful C tool, that allows to position a pointer just pointing to an <em>array element</em> (never confuse an array element with the whole array) and move it forward or backward, by incrementing or decrementing the pointer.</p>\n\n<p>But remember, an array and a pointer are different things.  An array is an aggregate of elements, while a pointer is an object that stores the address of another.</p>\n\n<p>In the case you post, the postincrement operator is attached to <code>graph[x][0]</code> which represents an array element (a single cell) so it is incrementing the array element positioned at position <code>[x][0]</code>, and not the whole array.</p>\n\n<p>Arrays are very simple in what operations they allow the programmer, the only operations they allow are</p>\n\n<ul>\n<li>To use the name of the array, which represents a fixed, constant, pointer <em>value</em> (not object) that points to the address of it first element in the array,</li>\n<li>and applying it the <code>sizeof</code> operator, that will give you the actual size of the array.  </li>\n</ul>\n\n<p>No more operations are permitted on arrays.  If you try to increment or decrement this pointer, as in <code>graph++</code> (or <code>++graph</code>) you'll get an error, noticing you about the fact that an array is not a pointer object, or if you take the <code>sizeof</code> operator to an array, you'll get the full size of the array in bytes, while if you do this to a pointer, you'll get the size of the pointer variable, different things (normally, all pointers are the same size in a fixed architecture, but array sizes normally depend on the number of elements declared).</p>\n\n<p>The <code>[]</code> operator is defined for pointers, and there's a trick here, to mean the same as the following equivalent expressions: <code>a[b]</code> is equivalent to the expresion <code>*(a + b)</code> for pointers, as you normally use the name of the array, it means to add <code>b</code> to the pointer to the first element (to move the <code>a</code> pointer value <code>b</code> element places up in memory), and then access the <em>pointed to</em> value.</p>\n"}], "owner": {"reputation": 83, "user_id": 9235460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d33885a92adff4cb0902f6cb9d910c2?s=128&d=identicon&r=PG&f=1", "display_name": "sayeedk06", "link": "https://stackoverflow.com/users/9235460/sayeedk06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1577435570, "creation_date": 1577256003, "last_edit_date": 1577289080, "question_id": 59475865, "link": "https://stackoverflow.com/questions/59475865/how-does-the-increment-operator-work-with-an-array", "title": "How does the increment operator work with an array?", "body": "<p>In the code below: how does the increment operator(++) work? Is it increasing the value of the array or iterating through the array somehow? </p>\n\n<pre><code>  scanf(\"%d\",&amp;e);\n  for(i=0;i&lt;e;i++)\n  {\n   scanf(\"%d %d\",&amp;x,&amp;y);\n   graph[x][0]++;\n   graph[x][graph[x][0]]=y;\n   graph[y][0]++;\n   graph[y][graph[y][0]]=x;\n  }\n\n\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 317, "user_id": 11272100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea5b3bb1f79e2f48166c594523816d5?s=128&d=identicon&r=PG&f=1", "display_name": "oleque", "link": "https://stackoverflow.com/users/11272100/oleque"}, "edited": false, "score": 4, "creation_date": 1577258706, "post_id": 59475851, "comment_id": 105129931, "body": "This looks like output buffering. Try to close the file or flush the file buffers, I guess after this you will see the &quot;missed&quot; data in your file."}, {"owner": {"reputation": 67, "user_id": 11138778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XzHFP.jpg?s=128&g=1", "display_name": "palapapa", "link": "https://stackoverflow.com/users/11138778/palapapa"}, "reply_to_user": {"reputation": 317, "user_id": 11272100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea5b3bb1f79e2f48166c594523816d5?s=128&d=identicon&r=PG&f=1", "display_name": "oleque", "link": "https://stackoverflow.com/users/11272100/oleque"}, "edited": false, "score": 0, "creation_date": 1577265520, "post_id": 59475851, "comment_id": 105131249, "body": "So if i don&#39;t flush <code>saveFileStream</code>, where do the data go? Aren&#39;t they written into the file immediately?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1577267184, "post_id": 59475851, "comment_id": 105131612, "body": "When you <code>fclose(saveFileStream);</code> all remaining data is written. I suspect you have a problem filling your <code>frame</code> array of struct. You likely have less that 256 filled elements and are invoking <i>Undefined Behavior</i> attempting to access unintialized values (but that is all <i>Crystal Ball</i> guessing without a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>)"}, {"owner": {"reputation": 67, "user_id": 11138778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XzHFP.jpg?s=128&g=1", "display_name": "palapapa", "link": "https://stackoverflow.com/users/11138778/palapapa"}, "edited": false, "score": 0, "creation_date": 1577279015, "post_id": 59475851, "comment_id": 105134239, "body": "Thanks, <code>fclose</code> after the loops fixed the problem."}], "owner": {"reputation": 67, "user_id": 11138778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XzHFP.jpg?s=128&g=1", "display_name": "palapapa", "link": "https://stackoverflow.com/users/11138778/palapapa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577255906, "creation_date": 1577255906, "question_id": 59475851, "link": "https://stackoverflow.com/questions/59475851/fprintf-stops-printing-into-file-partway", "title": "fprintf stops printing into file partway", "body": "<p>This is a part in my code which is used to save all the information to a text file which is then used to load into my program later. Somehow the <code>fprintf</code> never printed everything i needed it to and always stopped midway.</p>\n\n<p>Code:</p>\n\n<pre><code>for(int frames=0;frames&lt;MAX_FRAME;frames++)\n{\n    fprintf(saveFileStream,\"frame=%d xOffset=%d yOffset=%d delay=%d\\n\",frames,frame[frames].offset[XPOS],frame[frames].offset[YPOS],frame[frames].delay);//saves frame properties\n    for(int xPos=0;xPos&lt;MAX_X_COORDINATE;xPos++)\n    {\n        for(int yPos=0;yPos&lt;MAX_Y_COORDINATE;yPos++)\n        {\n            if(frame[frames].particle[xPos][yPos].p!=' ')//skips blank characters\n            {\n                fprintf(saveFileStream,\"frame=%d xPos=%d yPos=%d particle=%c\\n\",frames,xPos,yPos,frame[frames].particle[xPos][yPos].p);//saves particles\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>and when this code is executed, it prints:</p>\n\n<pre><code>frame=0 xOffset=0 yOffset=0 delay=200\nframe=1 xOffset=0 yOffset=0 delay=200\nframe=2 xOffset=0 yOffset=0 delay=200\nframe=3 xOffset=0 yOffset=0 delay=200\nframe=4 xOffset=0 yOffset=0 delay=200\nframe=5 xOffset=0 yOffset=0 delay=200\nframe=6 xOffset=0 yOffset=0 delay=200\nframe=7 xOffset=0 yOffset=0 delay=200\nframe=8 xOffset=0 yOffset=0 delay=200\nframe=9 xOffset=0 yOffset=0 delay=200\n.\n.\n.\nframe=203 xOffset=0 yOffset=0 delay=200\nframe=204 xOffset=0 yOffset=0 delay=200\nframe=205 xOffset=0 yOffset=0 delay=200\nframe=206 xOffset=0 yOffset=0 delay=200\nframe=207 xOffset=0 yO\n</code></pre>\n\n<p>(<code>MAX_FRAME</code> is 256)</p>\n\n<p>What confused me the most is that it didn't stop after a line, but stopped while printing <code>yOffset</code> at frame 207.</p>\n\n<p>If i set <code>MAX_FRAME</code> to a smaller number, it still stops printing before the counter <code>frames</code> reaches it.</p>\n"}, {"tags": ["c", "eclipse"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1577252960, "post_id": 59475553, "comment_id": 105129058, "body": "You need to post a reproducible example if you want to be helped. Lots of functions, such as <code>isGameOver</code>, are missing."}, {"owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "edited": false, "score": 0, "creation_date": 1577256688, "post_id": 59475553, "comment_id": 105129555, "body": "Are you able to display simple text on Console? If not issue with the tool rather the code. Try to run same code on different compilers or online complers <a href=\"https://www.onlinegdb.com/\" rel=\"nofollow noreferrer\">like</a>"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1577299190, "post_id": 59475553, "comment_id": 105138679, "body": "Output is frequently line-buffered which means that nothing is shown until a <code>&#39;\\n&#39;</code> is printed. And you might like to look into the options of your run configuration about the console assignment."}, {"owner": {"reputation": 11, "user_id": 12593319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yDOtL-TtGUI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqaLgyfE2okoW63AZ9wFJYjmGWhg/photo.jpg?sz=128", "display_name": "Sugam Arora", "link": "https://stackoverflow.com/users/12593319/sugam-arora"}, "edited": false, "score": 0, "creation_date": 1577299732, "post_id": 59475553, "comment_id": 105138781, "body": "Yes I can. However, when I enter debugging mode, the console doesn&#39;t display anything."}, {"owner": {"reputation": 11, "user_id": 12593319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yDOtL-TtGUI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqaLgyfE2okoW63AZ9wFJYjmGWhg/photo.jpg?sz=128", "display_name": "Sugam Arora", "link": "https://stackoverflow.com/users/12593319/sugam-arora"}, "edited": false, "score": 0, "creation_date": 1577300232, "post_id": 59475553, "comment_id": 105138880, "body": "Ok, so when I tried the online compiler that TruthSeeker linked, there was an output.  However, I would like to use Eclipse, so how do I fix the console on eclipse?"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1577356012, "post_id": 59475553, "comment_id": 105149004, "body": "The debug configurations are separate from the run configurations. Check them for the console assignments. Did you reduce your test project to a &quot;hello, world&quot; program?"}], "owner": {"reputation": 11, "user_id": 12593319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yDOtL-TtGUI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqaLgyfE2okoW63AZ9wFJYjmGWhg/photo.jpg?sz=128", "display_name": "Sugam Arora", "link": "https://stackoverflow.com/users/12593319/sugam-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577300633, "creation_date": 1577252626, "last_edit_date": 1577300633, "question_id": 59475553, "link": "https://stackoverflow.com/questions/59475553/eclipse-console-doest-output-anything", "title": "Eclipse Console Does&#39;t Output Anything", "body": "<p>When I run my code, the console doesn't output anything. When I go into \"debug as c application mode\" and step into the makeBoard() method that is supposed to print stuff nothing is shown on the console. I can't work on this project if the console doesn't work. </p>\n\n<p>Whenever I run my code with only makeBoard() in the int main(void) method, the console outputs what it's supposed to. However, when I add the rest of my code in the int main(void) method, nothing is shown in the console window.</p>\n\n<p>I am very new to C and the eclipse IDE. Do I need to download something? </p>\n\n<p>The makeBoard() method: </p>\n\n<pre><code> void makeBoard(){\n    printf(\"Row A: \");\n\n    for(int i = 0; i&lt; rowAcounter; i++)\n    {\n        printf(\"O\");\n    }\n    printf(\"\\n\");\n\n    printf(\"Row B: \");\n    for(int i = 0; i&lt; rowBcounter; i++)\n        {\n            printf(\"O\");\n        }\n\n    printf(\"\\n\");\n    printf(\"Row C: \");\n    for(int i = 0; i&lt; rowCcounter; i++)\n        {\n            printf(\"O\");\n        }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>My complete int main method and the rest of my program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nvoid makeBoard();\nvoid nextTurn(int player);\nvoid prompt(int turn);\n_Bool isGameOver();\nvoid done(int currentTurn);\nvoid test();\nvoid update();\n\nint rowAcounter = 3;\nint rowBcounter = 5;\nint rowCcounter = 8;\nint currentPlayer = 0; // 0= player 1's turn, 1 \n  = player 2's turn\n\nchar firstIn;\nchar secondIn;\n\n_Bool flag = 0;\n\nint main(void){\n  makeBoard();\n\n  while(isGameOver() == 0){\n      prompt(currentPlayer);\n      update();\n      nextTurn(currentPlayer);\n      if(flag == 1){\n          break;\n      }\n      makeBoard();\n  } \n  done(currentPlayer);\n  return 0;\n}\n</code></pre>\n\n<p>the rest of my code:</p>\n\n<pre><code>void update(){\n\npoll: scanf(\" %c%c\", &amp;firstIn, &amp;secondIn);\n        int checkFirst = firstIn - 'A';\n        if((checkFirst &lt; 0) || (checkFirst &gt; 2))\n        {\n            printf(\"\\n Try again, you ape.\");\n            goto poll;\n        }\n\n\n        int checkSecond = secondIn - '0';\n        if((checkSecond &lt; 0 ) || (checkSecond &gt; 8)){\n            printf(\"\\n Try again, you fricker.\");\n            goto poll;\n        }\n        else if(checkFirst == 0){       // the player chose row A\n            if(checkSecond &gt; 3){\n                printf(\"\\n Try again, you frick.\");\n                goto poll;\n            }\n            else{\n                rowAcounter = rowAcounter - checkSecond;\n\n            }\n        }\n        else if(checkFirst == 1){       // the player chose row B\n            if(checkSecond &gt; 5){\n                printf(\"\\n Try again, you headass.\");\n                goto poll;\n            }\n            else{\n                rowBcounter = rowBcounter - checkSecond;\n\n            }\n        }\n        else{                                       // the player chose row C\n            if(checkSecond &gt; 8)\n            {\n                printf(\"\\n Try again!\");\n                goto poll;\n            }\n            else{\n                rowCcounter = rowCcounter - checkSecond;\n\n            }\n        }\n\n        if(isGameOver() == 1){\n            flag = 1;\n        }\n\n\n }\n\n\nvoid nextTurn(int player){\nif(player == 0){\n    player = 1;\n}else\n  {\n      player = 0;\n  }\n}\n\nvoid prompt(int turn){\nif(turn == 0){\n    printf(\"Player 1, make your move:\");\n}\nelse{\n    printf(\"Player 2, make your move:\");\n  }\n}\n\n_Bool isGameOver(){\nif((rowAcounter == 0) &amp;&amp; (rowBcounter == 0) &amp;&amp; (rowCcounter == 0)){\n    return 1;\n}\nelse{\n      return 0;\n  }\n}\n\nvoid done(int currentTurn){\nif(currentTurn == 0){\n    puts(\"Player 1 wins!\");\n}\nelse{\n      puts(\"Player 2 wins!\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 1055, "user_id": 3406936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2294a96c8fb728eca7525ea9de2e3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Shlomi Agiv", "link": "https://stackoverflow.com/users/3406936/shlomi-agiv"}, "is_accepted": true, "score": 0, "last_activity_date": 1577252995, "last_edit_date": 1577252995, "creation_date": 1577252772, "answer_id": 59475559, "question_id": 59475481, "link": "https://stackoverflow.com/questions/59475481/traversing-a-linked-list-by-1/59475559#59475559", "title": "Traversing a linked list by 1", "body": "<p>it points to a memory area right after the first element, which you shouldn't be accessing.</p>\n\n<p>I think you're confusing the concept of array with linked list. If you use an array, then <code>head = head + 1</code> would have given you the next element in the array. But on a linked list every member has a different location in memory, and the only way to get that location is by dereferencing the previous element's <code>next</code> member</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1577252894, "creation_date": 1577252894, "answer_id": 59475569, "question_id": 59475481, "link": "https://stackoverflow.com/questions/59475481/traversing-a-linked-list-by-1/59475569#59475569", "title": "Traversing a linked list by 1", "body": "<blockquote>\n  <p>If we do head = head + 1 than it points to next linked list or it points to random memory of heap or it points to the next memory of beginner list in the heap.</p>\n</blockquote>\n\n<p>Provided that <code>head</code> initially points to a valid object of the correct type, after that statement, <code>head</code> points just past the end of the object to which it initially pointed.  That might or might not make it a pointer to the next node, depending on numerous factors, some of them out of your control, but typically the new value of <code>head</code> is <em>not</em> a pointer to the next node.</p>\n\n<p>The addition operation knows nothing about the significance of the object to which <code>head</code> initially points.  It is the same operation for a pointer of any type.</p>\n"}], "owner": {"reputation": 3, "user_id": 12594110, "user_type": "registered", "profile_image": "https://graph.facebook.com/747421679081703/picture?type=large", "display_name": "Shrey Neil Singhal", "link": "https://stackoverflow.com/users/12594110/shrey-neil-singhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59475559, "answer_count": 2, "score": 0, "last_activity_date": 1577252995, "creation_date": 1577251805, "last_edit_date": 1577252227, "question_id": 59475481, "link": "https://stackoverflow.com/questions/59475481/traversing-a-linked-list-by-1", "title": "Traversing a linked list by 1", "body": "<p>Every time we allocate memory for linked list in heap we get an address and this address is linked to the next variable of linked list and head is a pointer which pointer to beginner node of linked list.</p>\n\n<p>If we do <code>head = head + 1</code> than it points to next linked list or it points to random memory of heap or it points to the next memory of beginner list in the heap.</p>\n"}, {"tags": ["c", "linux", "permissions", "linux-kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 3, "creation_date": 1577250732, "post_id": 59475335, "comment_id": 105128789, "body": "This is certainly not the right way to accomplish whatever your goal is.  Do some thinking about what existing piece of standard functionality would have a similar need, and then look up how that was implemented."}], "answers": [{"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 2, "last_activity_date": 1577267445, "last_edit_date": 1577267445, "creation_date": 1577261733, "answer_id": 59476460, "question_id": 59475335, "link": "https://stackoverflow.com/questions/59475335/providing-permissions-for-a-root-user-in-a-kernel-module/59476460#59476460", "title": "Providing permissions for a root user in a kernel module", "body": "<p><code>root_user</code> does not <a href=\"https://elixir.bootlin.com/linux/latest/ident/root_user\" rel=\"nofollow noreferrer\">seem</a> to be exported using <a href=\"https://stackoverflow.com/a/57881867/1116364\"><code>EXPORT_SYMBOL</code></a> by the linux kernel; therefore you cannot use it from a module.</p>\n\n<p>Looking at <a href=\"https://github.com/torvalds/linux/blob/46cf053efec6a3a5f343fead837777efe8252a46/kernel/user.c#L104\" rel=\"nofollow noreferrer\">its definition</a> we can see that the <code>uid</code> value is set to <code>GLOBAL_ROOT_UID</code>.  This is a macro defined in <code>include/linux/uidgid.h</code> and is basically just a type cast of 0 to <code>kuid_t</code> so you can use just that macro if all you need is the UID.</p>\n\n<p>So ...</p>\n\n<blockquote>\n  <p>Why is the symbol\u00a0<code>root_user</code>\u00a0declared, but not defined?</p>\n</blockquote>\n\n<p>The symbol is defined. It's not exported though so you cannot use it from a module.</p>\n\n<blockquote>\n  <p>How to use\u00a0<code>INIT_USER</code>\u00a0correctly?</p>\n</blockquote>\n\n<p>\"Not\". You cannot use it.</p>\n"}], "owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 59476460, "answer_count": 1, "score": 3, "last_activity_date": 1577267445, "creation_date": 1577249461, "question_id": 59475335, "link": "https://stackoverflow.com/questions/59475335/providing-permissions-for-a-root-user-in-a-kernel-module", "title": "Providing permissions for a root user in a kernel module", "body": "<p><code>Linux Kernel 5.0.0-37</code></p>\n\n<p>I'm writing a function to manage permissions to be provided as a function pointer to the <a href=\"https://www.kernel.org/doc/html/latest/filesystems/vfs.html#id1\" rel=\"nofollow noreferrer\"><code>struct inode_operations</code></a>. Here is a simplified stub implementation:</p>\n\n<pre><code>#include &lt;linux/cred.h&gt;\n\nint pfsw_permission(struct inode *ino, int op){\n    if(uid_eq(INIT_USER-&gt;uid, get_current_user()-&gt;uid)){\n        printk(KERN_INFO \"Current user is root\\n\");\n    } else {\n        printk(KERN_INFO \"Current user is not root\\n\");\n    }\n    if(op &amp; (MAY_READ | MAY_WRITE)){\n        return 0;\n    }\n\n    return -EACCES;\n}\n</code></pre>\n\n<p>when compiling a kernel module containing this function and trying to load it <code>dmesg</code> shows the following error:</p>\n\n<pre><code>Unknown symbol root_user (err -2)\n</code></pre>\n\n<p>This I think is due to <code>INIT_USER</code> macro coming from <a href=\"https://github.com/torvalds/linux/blob/master/include/linux/sched/user.h#L49\" rel=\"nofollow noreferrer\">include/linux/sched/user.h</a> which is defined as</p>\n\n<pre><code>extern struct user_struct root_user;\n#define INIT_USER (&amp;root_user)\n</code></pre>\n\n<p><strong>QUESTION:</strong> Why is the symbol <code>root_user</code> declared, but not defined? How to use <code>INIT_USER</code> correctly?</p>\n"}, {"tags": ["c", "linux", "process", "fork", "exit"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1577250008, "post_id": 59475321, "comment_id": 105128682, "body": "It&#39;s probably in zombie state. Show the <code>ps</code> output so we can confirm."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1577256759, "post_id": 59475321, "comment_id": 105129572, "body": "Read <a href=\"http://www.makelinux.net/alp/\" rel=\"nofollow noreferrer\">advanced linux programming</a> and <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\"><i>How to debug small programs</i></a>"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 2865734, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ffbe49226d55154c14595ba86eda70a0?s=128&d=identicon&r=PG&f=1", "display_name": "AllenHu", "link": "https://stackoverflow.com/users/2865734/allenhu"}, "edited": false, "score": 0, "creation_date": 1577252247, "post_id": 59475435, "comment_id": 105128977, "body": "I used to use &quot;0&quot; in the waitpid instead of WNOHANG, the result is the parent process is hang at the waitpid, It seems that the child process does not trigger the SIG_CHLD to parent, in other word, the exit(0) is not successfully called. the point is the child process does not exit, it is not the point that child process exit but not reaped by the parent"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 349, "user_id": 2865734, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ffbe49226d55154c14595ba86eda70a0?s=128&d=identicon&r=PG&f=1", "display_name": "AllenHu", "link": "https://stackoverflow.com/users/2865734/allenhu"}, "edited": false, "score": 0, "creation_date": 1577299184, "post_id": 59475435, "comment_id": 105138677, "body": "SIGCHLD is ignored by default. If you change that, you can&#39;t use <code>waitpid</code> outside of the signal handler."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1577251225, "creation_date": 1577251225, "answer_id": 59475435, "question_id": 59475321, "link": "https://stackoverflow.com/questions/59475321/why-after-the-exit0-is-called-but-the-child-process-still-remains/59475435#59475435", "title": "why after the exit(0) is called, but the child process still remains?", "body": "<p>Using <code>WNOHANG</code> instead of <code>0</code> is surely wrong. If the parent calls <code>waitpid</code> (with <code>WNOHANG</code>) before the child exits, the child will remain in existence as a zombie waiting to be reaped until the parent exits too.</p>\n"}], "owner": {"reputation": 349, "user_id": 2865734, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ffbe49226d55154c14595ba86eda70a0?s=128&d=identicon&r=PG&f=1", "display_name": "AllenHu", "link": "https://stackoverflow.com/users/2865734/allenhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577251225, "creation_date": 1577249303, "question_id": 59475321, "link": "https://stackoverflow.com/questions/59475321/why-after-the-exit0-is-called-but-the-child-process-still-remains", "title": "why after the exit(0) is called, but the child process still remains?", "body": "<p>in the parent process I want to start a daemon to do a long time work, so I use\nthe double fork() to create the grandchild process to start the daemon. The question is\nevery once in a while, the child process does not exit successfully, I am sure that\nthe printf() before the exit(0) is called, but when I use the \"ps\" I can see the child process\npid listed, and it never exit. Do you know why this happened, should I call _exit(0) instead of\nexit(0) to make the child process exit?</p>\n\n<pre><code>startProcess(const char *pidfile, const char *command)\n    pid_t   pid;\n    char    cmd[1024];\n    char    *head = cmd;\n    char    *end;\n    char    *argv[128] = {0};\n    int     argc = 0;\n\n    if( 0 == (pid=fork()) ) { //fork a child \n        if( 0 &gt; setpriority(PRIO_PROCESS, 0, 0) ) {\n            perror();\n            return;\n        }\n        pid = fork(); //fork a grandchild\n        if(-1 == pid){\n            exit(-1);\n        }else if(0 == pid){ //grandchild process\n            if (snprintf(cmd, sizeof(cmd), \"%s\", command) &lt;= sizeof(cmd) - 1) {\n                /* change command line to argc/argv format */\n                do {\n                    if (argc &gt;= sizeof(argv)/sizeof(argv[0]) - 1)\n                        break;\n                    for (; (*head == ' ' || *head == '\\t'); head++); //remove space or TAB in the header\n                    if (*head == '\\0')\n                        break;\n                    if (NULL != (end = strpbrk(head, \" \\t\"))) {\n                        *end = '\\0';\n                        argv[argc++] = head;\n                        head = end + 1;\n                    } else {\n                        argv[argc++] = head;\n                        break;\n                    }\n                } while (1);\n                argv[argc] = NULL; // Maximal value of argc is ARRAY_SIZE(argv) - 1.\n\n                /* execute command to start a daemon*/\n                execvp(argv[0], argv);\n           }\n           //should not enter here\n           exit(-1);\n        }else{ //still in child process\n            printf(\"child process exit\\n\");\n            exit(0); //child process exit, but sometimes this call seems fail\n        }\n    }else if(-1 == pid){\n        return;\n    }else{ //parent process\n        int     status = 0;\n        int     rv\n        pid_t   r_pid = waitpid(pid, &amp;status, WNOHANG);\n        if (pid == r_pid) {\n            if (WIFEXITED(status) &amp;&amp; (0 == WEXITSTATUS(status))) {\n                rv = 0;\n            } else {\n                rv = -1;\n            }\n        }\n        return rv;\n    }\n\n</code></pre>\n"}, {"tags": ["c", "ruby", "assembly", "gdb", "sigfpe"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1577250761, "post_id": 59475312, "comment_id": 105128793, "body": "Note that <code>INT_MIN&#47;-1</code> on signed integers will also SIGFPE on 2&#39;s complement machines that raise an arithmetic exception on divide overflow (e.g. x86).  But it looks like you&#39;re using some wide typedef <code>OnigDistance</code> and this is faulting inside a GCC helper function; possible its simply buggy for large inputs on this obscure ISA?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1577250768, "post_id": 59475312, "comment_id": 105128794, "body": "At least in the debug case there is a <code>ONIG_INFINITE_DISTANCE &#47; m</code> before the zero check."}, {"owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1577252103, "post_id": 59475312, "comment_id": 105128959, "body": "I have edit the question and add missed definition/typedef @PeterCordes"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1577257341, "post_id": 59475312, "comment_id": 105129679, "body": "I&#39;d start by disassembling __divlu to see what instruction its faulting on. You&#39;ll probably find that it&#39;s either dividing by 0 or has a divide overflow and needs to be fixed like Peter Cordes said. Given the Sunway instruction set is undocumented you&#39;re probably on your own after that."}], "owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577316476, "creation_date": 1577249237, "last_edit_date": 1577316476, "question_id": 59475312, "link": "https://stackoverflow.com/questions/59475312/how-to-debug-sigfpe-when-divide-by-zero-doesnt-occur", "title": "How to debug sigfpe when divide-by-zero doesn&#39;t occur", "body": "<p>I'm trying to compile ruby with <code>O0 -ggdb3</code> on <a href=\"https://en.wikipedia.org/wiki/Sunway_(processor)\" rel=\"nofollow noreferrer\">sw64</a>---- a <a href=\"https://en.wikipedia.org/wiki/DEC_Alpha\" rel=\"nofollow noreferrer\">alpha</a>-like arch and met a weird SIGFPE error: </p>\n\n<pre><code>(gdb) bt \n#0  0x000002000544463c in __divlu ()\n   from /lib/libc.so.6.1\n#1  0x0000020001fe6808 in distance_multiply (\n    d=18446744073709551615, m=1) at regcomp.c:109\n#2  0x0000020001ff5a44 in optimize_node_left (\n    node=0x121f43be0, opt=0x2000db31480,\n    env=0x2000db31678) at regcomp.c:5247\n#3  0x0000020001ff4b6c in optimize_node_left (\n    node=0x122387f60, opt=0x2000db317c0,\n    env=0x2000db319b8) at regcomp.c:4982\n#4  0x0000020001ff62c4 in set_optimize_info_from_tree (node=0x122387f60, reg=0x12216df60,\n    scan_env=0x2000db31a20) at regcomp.c:5417\n#5  0x0000020001ff6d64 in onig_compile_ruby (\n    reg=0x12216df60,\n    pattern=0x121c021e0 \"\\\\A([^:\\\\s]*)(?:::([^:\\\\s]*))?\\\\s*=(.*)\\\\z\", pattern_end=0x121c02205 \"\",\n    einfo=0x2000db31bc0,\n    sourcefile=0x12109eea0 \"-\", sourceline=90)\n    at regcomp.c:5854\n#6  0x0000020001fd9ef4 in onig_new_with_source (\n    reg=0x2000db31bd8,\n    pattern=0x121c021e0 \"\\\\A([^:\\\\s]*)(?:::([^:\\\\s]*))?\\\\s*=(.*)\\\\z\", pattern_end=0x121c02205 \"\",\n    option=0, enc=0x12108c840,\n    syntax=0x2000213fef8 &lt;OnigSyntaxRuby&gt;,\n    einfo=0x2000db31bc0,\n    sourcefile=0x12109eea0 \"-\", sourceline=90)\n    at re.c:842\n#7  0x0000020001fd9fe8 in make_regexp (\n    s=0x121c021e0 \"\\\\A([^:\\\\s]*)(?:::([^:\\\\s]*))?\\\\s*=(.*)\\\\z\", len=37, enc=0x12108c840, flags=0,\n    err=0x2000db31d20 \"\",\n&lt;tinue, or q &lt;return&gt; to quit---\n</code></pre>\n\n<p>IIUC, the backtrace from gdb tells me that the frame 1 <code>distance_multiply</code> is the root cause of sigfpe. </p>\n\n<p>Below is the definition of <code>distance_multiply</code></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static OnigDistance\ndistance_multiply(OnigDistance d, int m)\n{\n  if (m == 0) return 0;\n\n  if (d &lt; ONIG_INFINITE_DISTANCE / m)\n    return d * m;\n  else\n    return ONIG_INFINITE_DISTANCE;\n}\n</code></pre>\n\n<p>As you can see, if m is zero, it will return directly, so <code>devided-by-zero</code> sigfpe will never occur. I have also tried to dump the value of <code>d</code> and <code>m</code> with the help of <code>printf</code>: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static OnigDistance\ndistance_multiply(OnigDistance d, int m)\n{\n    fprintf(stderr, \"\\n\\nd = %zu, m = %d, ONIG_INFINITE_DISTANCE = %d    \", d, m, ONIG_INFINITE_DISTA\\\nNCE );\n  if (m == 0)\n  {\n    fprintf(stderr, \"m == 0, should return\\n\");\n          return 0;\n  }\n\n  if (d &lt; ONIG_INFINITE_DISTANCE / m)\n  {\n\n    fprintf(stderr, \"d &lt; ONIG_INFINITE_DISTANCE / m\\n\");\n    return d * m;\n  }\n  else\n  {\n    fprintf(stderr, \"else\\n\");\n    return ONIG_INFINITE_DISTANCE;\n  }\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 22% [198/871]  ext/psych/lib/psych.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x000002000209263c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 2, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 43% [378/871]  lib/net/http.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x0000020004bbc63c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 22% [198/871]  ext/psych/lib/psych.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x000002000d9f063c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 22% [198/871]  ext/psych/lib/psych.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x0000020001abc63c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 22% [198/871]  ext/psych/lib/psych.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x0000020005ce263c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 23, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n\n\nd = 24, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n\n\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n 37% [329/871]  lib/getoptlong.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x0000020000ba863c in __divlu () from /lib/libc.so.6.1\n(gdb)\n#+END_SRC\n\n</code></pre>\n\n<p>From the log, we can see that the last log is always:</p>\n\n<blockquote>\n  <p>d = 1, m = 1, ONIG_INFINITE_DISTANCE = -1</p>\n</blockquote>\n\n<p>and <code>d &lt; ONIG_INFINITE_DISTANCE / m</code> part is not printed because it has trapped into sigfpe already. What's strange is that some previous logs also printed <code>d = 1, m = 1, ONIG_INFINITE_DISTANCE = -1</code>, which means when <code>d = 1</code> and <code>m = 1</code>, sigfpe doesn't occur in those cases. </p>\n\n<p>What may happend? I have no ideas any more. Can disassembly help here?</p>\n\n<h2>EDIT:</h2>\n\n<p>Sorry for the lack of macro definitions:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define ONIG_INFINITE_DISTANCE  ~((OnigDistance )0)\ntypedef size_t         OnigDistance;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 3, "creation_date": 1577246408, "post_id": 59475103, "comment_id": 105128335, "body": "Accessing an array element doesn&#39;t require knowing the size of the array. Array access is just pointer arithmetic."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1577246874, "post_id": 59475103, "comment_id": 105128377, "body": "Aside: <code>printf(&quot;%d\\n&quot;, sizeof(a));</code> is better done with a matching specifier: <code>printf(&quot;%zu\\n&quot;, sizeof a);</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577254040, "post_id": 59475103, "comment_id": 105129177, "body": "At file scope, in C89  <code>a[] = {1, 2, 3};</code> was allowed and equivalent to <code>int a[] = {1, 2, 3};</code>. The C89 language allowed you to leave the type name out of a declaration and <code>int</code> was assumed if so.  This is not allowed since C99 but compilers might offer it as an extension, you should see a warning if you compile in conforming mode"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12593879"}, "edited": false, "score": 0, "creation_date": 1577248354, "post_id": 59475197, "comment_id": 105128508, "body": "Why don&#39;t I have to use <code>extern</code> when dealing with a regular variable like <code>int a</code>. I tried and it worked without it. Also why would <code>a[] = {1, 2, 3};</code> work globally? I edited my question above to add an example."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577248789, "post_id": 59475197, "comment_id": 105128551, "body": "Both <code>int a;</code> and <code>int a[];</code> work without <code>extern</code> with my <code>gcc</code>. I can&#39;t tell you why they work without <code>extern</code>. But it&#39;s far clearer if you use it where appropriate."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12593879"}, "edited": false, "score": 0, "creation_date": 1577248929, "post_id": 59475197, "comment_id": 105128574, "body": "if it&#39;s working globally then why won&#39;t work in a function? because compiler needs to know how much memory to reserve and it can&#39;t do it when defining within a function?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577248970, "post_id": 59475197, "comment_id": 105128577, "body": "Re &quot;<i>if it&#39;s working globally then why won&#39;t work in a function?</i>&quot;, This is answered by my answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12593879"}, "edited": false, "score": 0, "creation_date": 1577249040, "post_id": 59475197, "comment_id": 105128590, "body": "Also I though <code>extern</code> is an alternative to <code>define in a header and include the header where needed</code>, it&#39;s not use both <code>header </code> and <code>extern</code>, one should  do it, no?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12593879"}, "edited": false, "score": 0, "creation_date": 1577249426, "post_id": 59475197, "comment_id": 105128629, "body": "Thanks, now only If I could get the difference between <code>extern</code> and <code>define in a header</code>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577249453, "post_id": 59475197, "comment_id": 105128634, "body": "&quot;why won&#39;t work in a function&quot; is answered by my answer. As for why <code>a[] = {1, 2, 3};</code> works, why wouldn&#39;t it?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577249477, "post_id": 59475197, "comment_id": 105128641, "body": "<code>extern</code> is a C keyword. <code>define in a header</code> is not valid C."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577249636, "post_id": 59475197, "comment_id": 105128651, "body": "Sorry, tired. Earlier deleted comment was correct. It said: <code>a[] = {1, 2, 3};</code> is short for <code>int a[] = {1, 2, 3};</code>. Enable and use your compiler&#39;s warnings. (I use <code>-Wall -Wextra -pedantic</code> with <code>gcc</code>.)"}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1577249157, "last_edit_date": 1577249157, "creation_date": 1577247643, "answer_id": 59475197, "question_id": 59475103, "link": "https://stackoverflow.com/questions/59475103/declaring-and-later-defining-an-array-in-c/59475197#59475197", "title": "Declaring and later defining an array in C", "body": "<blockquote>\n  <p><em>Why would this produce a compile time error:</em></p>\n</blockquote>\n\n<p>The compiler needs to know how much memory to reserve for an array in static storage at compile time, so it can't depend on code in functions.</p>\n\n<blockquote>\n  <p><em>Why sizeof cannot be used with this way of declaring arrays?</em></p>\n</blockquote>\n\n<p>First of all, <code>int a[];</code> should be <code>extern int a[];</code> in <code>test1.h</code>.</p>\n\n<p>The size of the array is set by <code>int a[] = {6};</code>, which is found in a file compiled completely independently, and thus not available when requested by <code>sizeof</code>.</p>\n\n<p>The size isn't needed for <code>a[0]</code> since no bound checks are performed.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12593879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 59475197, "answer_count": 1, "score": 0, "last_activity_date": 1577249157, "creation_date": 1577246204, "last_edit_date": 1577248247, "question_id": 59475103, "link": "https://stackoverflow.com/questions/59475103/declaring-and-later-defining-an-array-in-c", "title": "Declaring and later defining an array in C", "body": "<p>Edit: I would like to ask the question differently;</p>\n\n<p>Why would this produce a compile time error:</p>\n\n<pre><code>int a[];\n\nint main(){\n    a[] = {1, 2, 3};\n}\n</code></pre>\n\n<p>How else can it be done? Above works if <code>a[] = {1, 2, 3};</code> is defined globally like this:</p>\n\n<pre><code>int a[];\na[] = {1, 2, 3};\n\nint main(){\n    //\n}\n</code></pre>\n\n<p>Old question:</p>\n\n<p>Assume the following:</p>\n\n<p>test1.h</p>\n\n<pre><code>void init();\nint a[];\n</code></pre>\n\n<p>test1.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"test1.h\"\n\nint a[] = {6};\nint main()\n{\n    init();\n    return 0;\n}\n</code></pre>\n\n<p>test2.c</p>\n\n<pre><code>#include \"test1.h\"\n\nvoid init()\n{\n    printf(\"%d\\n\", sizeof(a));\n    printf(\"%d\\n\", a[0]);\n}\n</code></pre>\n\n<p>Above will have this compile time error:\n<code>error: invalid application of 'sizeof' to an incomplete type 'int []'</code></p>\n\n<p>However, <code>printf(\"%d\\n\", a[0]);</code> will print <code>6</code> just fine. Why <code>sizeof</code> cannot be used with \nthis way of declaring arrays?</p>\n"}, {"tags": ["c", "bash", "segmentation-fault"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1577244277, "post_id": 59474958, "comment_id": 105128133, "body": "You&#39;d probably be better served by posting your C program here so we can show you what you did wrong in it."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1577247104, "post_id": 59474958, "comment_id": 105128403, "body": "&quot; program which ran successfully yesterday involving pointers to a struct core dumped on me today&quot;. Those are the common symptoms in code with undefined behaviour. Usually caused by invalid memory access or memory corruptions. And it doesn&#39;t require dynamic memory to occur. Show your code if you need help finding the problem. Alternatively if developing in Linux then use <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">valgrind</a> to help you find memory problems."}], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 1535323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/991c2b0a8d558700eb169ffe52a19e6e?s=128&d=identicon&r=PG", "display_name": "Lasse Karagiannis", "link": "https://stackoverflow.com/users/1535323/lasse-karagiannis"}, "edited": false, "score": 0, "creation_date": 1577250979, "post_id": 59475264, "comment_id": 105128829, "body": "Incredible useful script. Program that I though was rock solid was proved be &lt;= trash. Thought that I understood pointers. Back on zero -again :-)"}], "tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 2, "last_activity_date": 1577248615, "creation_date": 1577248615, "answer_id": 59475264, "question_id": 59474958, "link": "https://stackoverflow.com/questions/59474958/how-do-i-write-a-bash-script-which-runs-a-program-until-it-senses-signal-sigsegv/59475264#59475264", "title": "How do I write a bash script which runs a program until it senses signal SIGSEGV, Segmentation fault?", "body": "<p>You can detect this by checking its exit status. Here's <code>man bash</code>:</p>\n\n<pre><code>   The return value of a simple command is its exit status,  or  128+n  if\n   the command is terminated by signal n.\n</code></pre>\n\n<p>Since <code>kill -l</code> shows <code>SIGSEGV</code> as signal 11, you can therefore run the program until it exits with 139:</p>\n\n<pre><code>until ./yourprogram; [ $? -eq 139 ]; do printf '.'; done\n</code></pre>\n\n<p>If this is <code>yourprogram.c</code>:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\nint main()\n{\n  if(getpid()%100 == 0 ) {\n    char* ptr = 1;\n    *ptr = 1;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>You get a result like this (one dot per non-segfault invocation):</p>\n\n<pre><code>............................Segmentation fault\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 1535323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/991c2b0a8d558700eb169ffe52a19e6e?s=128&d=identicon&r=PG", "display_name": "Lasse Karagiannis", "link": "https://stackoverflow.com/users/1535323/lasse-karagiannis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 59475264, "answer_count": 1, "score": 0, "last_activity_date": 1577248615, "creation_date": 1577244131, "question_id": 59474958, "link": "https://stackoverflow.com/questions/59474958/how-do-i-write-a-bash-script-which-runs-a-program-until-it-senses-signal-sigsegv", "title": "How do I write a bash script which runs a program until it senses signal SIGSEGV, Segmentation fault?", "body": "<p>Learning C-pointers and I am convinced that a program which ran successfully yesterday involving pointers to a struct core dumped on me today without me even touching it, at least that is what I believe. Is it reasonable? I do not allocate memory dynamically.\nChanged it today but hower but how do I write a bash script\nwhich restarts the program until it returns with a segmentation fault.\nMaybe also count how many times it can execute the program until the event occurs?\nHow do I sense the SIGSEGV signal?</p>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 1, "creation_date": 1577243681, "post_id": 59474918, "comment_id": 105128057, "body": "You don&#39;t have any code to read in the initial apple positions; you&#39;re only running a single iteration of the gravity rule; and you have no handling for <code>#</code> obstacles."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 12593737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e8scR.jpg?s=128&g=1", "display_name": "Gratus", "link": "https://stackoverflow.com/users/12593737/gratus"}, "is_accepted": false, "score": 2, "last_activity_date": 1577243918, "creation_date": 1577243918, "answer_id": 59474941, "question_id": 59474918, "link": "https://stackoverflow.com/questions/59474918/2d-rectangular-grid/59474941#59474941", "title": "2D Rectangular grid", "body": "<p>Your code is not reading inputs (the contents of grid) properly. You must read from the standard input with scanf or other input functions before you check conditions and perform more tasks.</p>\n\n<p>Although, if you declare <code>r * c</code> size of char array, push input to them and run the code, it'll check on the <code>r</code>th index on <code>arr[i+1][j]=='.'</code> part. You should avoid this by declaring array slightly bigger or by modifying your logic.</p>\n"}, {"tags": [], "owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "is_accepted": true, "score": 0, "last_activity_date": 1577263828, "creation_date": 1577263828, "answer_id": 59476705, "question_id": 59474918, "link": "https://stackoverflow.com/questions/59474918/2d-rectangular-grid/59476705#59476705", "title": "2D Rectangular grid", "body": "<p>As pointed out, you are missing the initial grid reading code.\nAs it won't help you directly solve the problem, the code for reading the grid could help you advance.</p>\n\n<p>As it is a 2d grid there is <a href=\"https://en.wikipedia.org/wiki/Row-_and_column-major_order\" rel=\"nofollow noreferrer\">two way of storing the data</a>: </p>\n\n<ul>\n<li>row major (the way you did, and a natural way of organizing data), where the data is stored in a array of rows </li>\n<li>column major, where the data is stored in a array of columns</li>\n</ul>\n\n<p>For the problem it would be more advantageous to store the data in a column major format. But for the sake of completeness I will provide you with both ways of storing</p>\n\n<pre><code>// Row major\nchar arr[r][c];\nint count = 0;\nint ch;\nwhile (EOF != (ch = fgetc(fp))) {\n    if(ch!='a' &amp;&amp; ch != '#' &amp;&amp; ch != '.') continue;\n    row = count / c;\n    col = count % c;\n    arr[row][col] = ch;\n}\n</code></pre>\n\n<pre><code>// Col major\nchar arr[c][r];\nint count = 0;\nint ch;\nwhile (EOF != (ch = fgetc(fp))) {\n    if(ch!='a' &amp;&amp; ch != '#' &amp;&amp; ch != '.') continue;\n    row = count / c;\n    col = count % c;\n    arr[col][row] = ch;\n}\n</code></pre>\n\n<p>the reason I am recommending you column major storage, is the problem would be better solved if your treat each column separately.</p>\n"}], "owner": {"reputation": 119, "user_id": 8739203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927ad8019eafd1fe795ea9370f36130f?s=128&d=identicon&r=PG", "display_name": "Prav", "link": "https://stackoverflow.com/users/8739203/prav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 59476705, "answer_count": 2, "score": 1, "last_activity_date": 1577263828, "creation_date": 1577243473, "last_edit_date": 1577243526, "question_id": 59474918, "link": "https://stackoverflow.com/questions/59474918/2d-rectangular-grid", "title": "2D Rectangular grid", "body": "<p>I tried solving the following problem at <a href=\"https://nus.kattis.com/problems/apples\" rel=\"nofollow noreferrer\">https://nus.kattis.com/problems/apples</a> but my code does not pass the test cases. I'm new to C and I'm not particularly sure where I have gone wrong. My code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\n    int r,c;\n    scanf(\"%d\",&amp;r);\n    scanf(\"%d\",&amp;c);\n    char arr[r][c];\n    for (int i=0; i&lt;r;i++){\n        for(int j=0;j&lt;c;j++){\n            if(arr[i][j]=='a' &amp;&amp; arr[i+1][j]=='.'){\n                arr[i][j] = '.';\n                arr[i+1][j] = 'a';\n            }\n        }\n    }\n    for(int i=0;i&lt;r;i++){\n        for(int j=0;j&lt;c;j++){\n            printf(\"%c\",arr[i][j]);\n        }\n    }\n}\n</code></pre>\n\n<p>If I had to guess, I would put my finger on checking if arr[i][j] is equals to 'a' as the 'a' at arr[i][j] would be of different address from a generic 'a'.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1577242799, "post_id": 59474809, "comment_id": 105127963, "body": "It has nothing to do with scope or other variables, it&#39;s just talking about the possible values of the type."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1577243070, "post_id": 59474809, "comment_id": 105127994, "body": "example - &quot;all values of unsigned char&quot; means the set { 0, 1, 2, ...., UCHAR_MAX }"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 12561572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tputicWQvxs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfc45Xhlmxx4Pajig5QI7vVLU9WQw/photo.jpg?sz=128", "display_name": "lev.1 code", "link": "https://stackoverflow.com/users/12561572/lev-1-code"}, "edited": false, "score": 0, "creation_date": 1577243548, "post_id": 59474882, "comment_id": 105128043, "body": "@paxdiable I saw promoted identifiers being used as operand. And I thought operation have something to do with identifier&#39;s scope. C17 6.3.1.1 is subclause of Arithmetic operands(6.3.1)."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 2, "last_activity_date": 1577262122, "last_edit_date": 1577262122, "creation_date": 1577242883, "answer_id": 59474882, "question_id": 59474809, "link": "https://stackoverflow.com/questions/59474809/about-integer-promotion/59474882#59474882", "title": "About integer promotion", "body": "<blockquote>\n  <p>Does 'all values' mean whole identifiers in same scope?</p>\n</blockquote>\n\n<p>I'm not sure why you think all identifiers in a scope matter. The integer promotion applies to a <em>single</em> item, be it an object (e.g., variable) or expression.</p>\n\n<p>What it's saying is that, if every possible value of this item (already one of the types guaranteed to fit into an <code>int</code> or <code>unsigned int</code> as per the paragraphs before your quote<sup>(a)</sup>) can be represented by the <code>int</code> type, it gets promoted to an <code>int</code>. Otherwise it gets promoted to an <code>unsigned int</code>.</p>\n\n<hr>\n\n<p><sup>(a)</sup> The text states, in full:</p>\n\n<blockquote>\n  <p>The following may be used in an expression wherever an <code>int</code> or <code>unsigned int</code> may be used:</p>\n  \n  <ul>\n  <li><p>An object or expression with an integer type (other than <code>int</code> or <code>unsigned int</code>) whose integer conversion rank is less than or equal to the rank of <code>int</code> and\n  <code>unsigned int</code>.</p></li>\n  <li><p>A bit-field of type <code>_Bool</code>, <code>int</code>, <code>signed int</code>, or <code>unsigned int</code>.</p></li>\n  </ul>\n  \n  <p>If an <code>int</code> can represent all values of the original type (as restricted by the width, for a bit-field), the value is converted to an <code>int</code>; otherwise, it is converted to an <code>unsigned int</code>. These are called the integer promotions. All other types are unchanged by the integer promotions.</p>\n</blockquote>\n"}], "owner": {"reputation": 77, "user_id": 12561572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tputicWQvxs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfc45Xhlmxx4Pajig5QI7vVLU9WQw/photo.jpg?sz=128", "display_name": "lev.1 code", "link": "https://stackoverflow.com/users/12561572/lev-1-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59474882, "answer_count": 1, "score": 0, "last_activity_date": 1577262122, "creation_date": 1577241938, "last_edit_date": 1577242734, "question_id": 59474809, "link": "https://stackoverflow.com/questions/59474809/about-integer-promotion", "title": "About integer promotion", "body": "<p>According to C17 6.3.1.1</p>\n\n<blockquote>\n  <p>If an int can represent all values of the original type (as restricted by the width, for a bit-field), the value is converted to an int; otherwise, it is converted to an unsigned int.</p>\n</blockquote>\n\n<p>Does 'all values' mean whole identifiers in same scope?\nThen when some identifiers are with variable which can't be represented by int (such as long long int) in same identifier scope, there are no any promotion for identifiers?</p>\n"}, {"tags": ["c", "string", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 2, "creation_date": 1577240238, "post_id": 59474651, "comment_id": 105127694, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 7494517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a400592f19e36bfcbf20b5b1b93ce4?s=128&d=identicon&r=PG&f=1", "display_name": "YMG", "link": "https://stackoverflow.com/users/7494517/ymg"}, "edited": false, "score": 0, "creation_date": 1577240168, "post_id": 59474660, "comment_id": 105127679, "body": "strtok does not returns a null pointer in my code. But I do not know why it causes."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 100, "user_id": 7494517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a400592f19e36bfcbf20b5b1b93ce4?s=128&d=identicon&r=PG&f=1", "display_name": "YMG", "link": "https://stackoverflow.com/users/7494517/ymg"}, "edited": false, "score": 1, "creation_date": 1577252478, "post_id": 59474660, "comment_id": 105129002, "body": "@YMG with the code you have showed us there is no way you can know if strtok returned a null pointer or not. So claiming &quot;strtok does not returns a null pointer&quot; is not something we can trust."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1577239627, "creation_date": 1577239627, "answer_id": 59474660, "question_id": 59474651, "link": "https://stackoverflow.com/questions/59474651/why-strtok-causing-a-segmentation-fault/59474660#59474660", "title": "Why strtok() causing a segmentation fault?", "body": "<p><code>strtok</code> isn't causing the segfault. <code>atoi</code> is, because you're passing it a null pointer. You need to check whether <code>strtok</code> returns a null pointer and break out of your loop if it does, rather than just blindly handing it to <code>atoi</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577251720, "post_id": 59475397, "comment_id": 105128908, "body": "Yep, that&#39;s a good rewrite of the loop, though the jury is still out on <code>&amp;tmp-&gt;P</code>, which may be right, but may be the source of the segfault -- no way to tell without a MCVE."}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577256287, "post_id": 59475397, "comment_id": 105129499, "body": "@DavidC.Rankin Yes, <code>&amp;tmp-&gt;P</code> could be source of the segfault but the OP is pointing out the <code>d = atoi(strtok(NULL, &quot;:&quot;))</code> statement as cause of segfault in the program comment. But, of course, a MCVE would have assured the cause of segfault."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 4, "last_activity_date": 1577255511, "last_edit_date": 1592644375, "creation_date": 1577250540, "answer_id": 59475397, "question_id": 59474651, "link": "https://stackoverflow.com/questions/59474651/why-strtok-causing-a-segmentation-fault/59475397#59475397", "title": "Why strtok() causing a segmentation fault?", "body": "<p>How can you be so sure that it's <code>strtok()</code> which is causing segmentation fault?</p>\n<p>Compile and run this program and check the behaviour:</p>\n<pre><code>#include &lt;stdlib.h&gt;\n\nint main(void) {\n    atoi (NULL);\n    return 0;\n}\n</code></pre>\n<p>From <a href=\"https://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\">strtok</a> <em>[emphasis added]</em>:</p>\n<blockquote>\n<p>Return value</p>\n<p>Returns pointer to the beginning of the next token or <strong>NULL</strong> if there are no more tokens.</p>\n</blockquote>\n<p>Look at these statements:</p>\n<pre><code>for ( j = 0; j &lt; SIZE; j++) {\n    pushLinkedList(&amp;tmp-&gt;P, d);\n    d= atoi(strtok(NULL, &quot;:&quot;));\n    .....\n    .....\n</code></pre>\n<p>If <code>SIZE</code> is some value greater than <code>&lt;number of tokens&gt; - 1</code> then <code>strtok()</code> will return <code>NULL</code> for the n<sup>th</sup> iteration where <code>n</code> is equal to <code>&lt;number of tokens&gt;</code> in the string.</p>\n<p>Since, you have not shown the value of <code>SIZE</code> in code posted, I believe it's greater than the number of tokens in the string processed in the loop. When  <code>strtok()</code> finds all the tokens in the given string then all future calls to <code>strtok()</code> will return a <code>NULL</code> pointer and this <code>NULL</code> pointer is passed to <code>atoi()</code> which is resulting in segmentation fault. You should check the <code>strtok()</code> return value and pass it to <code>atoi</code> only when it's not a <code>NULL</code>.</p>\n<p>You can do:</p>\n<pre><code>int d;\nchar* line = arr[i];\nchar* tok = strtok(line, &quot;:&quot;);\nwhile (tok) {\n    d = atoi(tok);\n    pushLinkedList(&amp;tmp-&gt;P, d);\n    tok = strtok(NULL, &quot;:&quot;);\n}\n</code></pre>\n<p>Additional:<br />\n<a href=\"https://stackoverflow.com/questions/17710018/why-shouldnt-i-use-atoi\">Why you should not use <code>atoi()</code>?</a></p>\n"}], "owner": {"reputation": 100, "user_id": 7494517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a400592f19e36bfcbf20b5b1b93ce4?s=128&d=identicon&r=PG&f=1", "display_name": "YMG", "link": "https://stackoverflow.com/users/7494517/ymg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 59475397, "answer_count": 2, "score": 0, "last_activity_date": 1577255511, "creation_date": 1577239505, "question_id": 59474651, "link": "https://stackoverflow.com/questions/59474651/why-strtok-causing-a-segmentation-fault", "title": "Why strtok() causing a segmentation fault?", "body": "<p>I'm trying to read file in c and store it in array. After that I need convert to integer related to input.\nBut I got segmentation fault. \nWhen I'm looking for reason then I realised that strtok() causes segmentation fault. I tried some of solutions but I could not do that. </p>\n\n<p>My input file is like:</p>\n\n<pre><code>1:2:3:4:5:6\n6:5:4:3:2:1\n</code></pre>\n\n<p>and I store it in array. </p>\n\n<p><strong>Note that: I need to split it by \":\" character. And every item must be digit.</strong></p>\n\n<p>then my code is below: </p>\n\n<pre><code>char* line = arr[i];\nint d = atoi(strtok(line, \":\"));\nfor ( j = 0; j &lt; SIZE; j++) {\n    pushLinkedList(&amp;tmp-&gt;P, d);\n    d= atoi(strtok(NULL, \":\"));  /* This part causes segmentation fault.   */\n\n}\n</code></pre>\n\n<p>How can i get rid of this fault?\nThanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4475, "user_id": 8858995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d1981ec5dd8311a79e695d512716ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ibraheem Ahmed", "link": "https://stackoverflow.com/users/8858995/ibraheem-ahmed"}, "edited": false, "score": 0, "creation_date": 1577239534, "post_id": 59474649, "comment_id": 105127623, "body": "Can you please provide an example of what you want to accomplish?"}, {"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 1, "creation_date": 1577239627, "post_id": 59474649, "comment_id": 105127632, "body": "What was the reason to read number as <code>scanf(&quot;%s&quot;,&amp;num);</code>? Use <code>%d</code> an no conversion needed"}, {"owner": {"reputation": 13, "user_id": 12593493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccac945a66dbbb2217c08b29f3f898?s=128&d=identicon&r=PG&f=1", "display_name": "Bolbol Tay", "link": "https://stackoverflow.com/users/12593493/bolbol-tay"}, "reply_to_user": {"reputation": 4475, "user_id": 8858995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d1981ec5dd8311a79e695d512716ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ibraheem Ahmed", "link": "https://stackoverflow.com/users/8858995/ibraheem-ahmed"}, "edited": false, "score": 0, "creation_date": 1577239980, "post_id": 59474649, "comment_id": 105127655, "body": "@Redline its already been answered thank u for your concerned"}, {"owner": {"reputation": 13, "user_id": 12593493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccac945a66dbbb2217c08b29f3f898?s=128&d=identicon&r=PG&f=1", "display_name": "Bolbol Tay", "link": "https://stackoverflow.com/users/12593493/bolbol-tay"}, "reply_to_user": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 0, "creation_date": 1577239995, "post_id": 59474649, "comment_id": 105127660, "body": "@vsh its already been answered thank u for your concerned"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1577246980, "post_id": 59474664, "comment_id": 105128390, "body": "Wrong type for <code>&quot;%s&quot;</code>: <code>scanf(&quot;%s&quot;,&amp;num);</code> --&gt; <code>scanf(&quot;%s&quot;, num);</code>..<code>scanf(&quot;%99s&quot;, num);</code> is even better."}], "tags": [], "owner": {"reputation": 51, "user_id": 12591451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8872d026b04ee93fccb0ad8b29e64b2d?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12591451/alex"}, "is_accepted": true, "score": 2, "last_activity_date": 1577239681, "creation_date": 1577239681, "answer_id": 59474664, "question_id": 59474649, "link": "https://stackoverflow.com/questions/59474649/adding-the-value-of-character-in-c/59474664#59474664", "title": "Adding the value of character in c", "body": "<p>You need to convert a string into integer using (atoi) the numerical representation to add it.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nint main()\n{\n    char num[100];\n    int sum=0,n;\n    printf(\"Total number: \");\n    scanf(\"%d\",&amp;n);\n    for(int i=0;i&lt;n;i++)\n    {\n        printf(\"Number %d: \",i+1);\n        scanf(\"%s\",&amp;num);\n        sum+=atoi(num);\n    }\n    printf(\"Total = %d\",sum);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12593493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccac945a66dbbb2217c08b29f3f898?s=128&d=identicon&r=PG&f=1", "display_name": "Bolbol Tay", "link": "https://stackoverflow.com/users/12593493/bolbol-tay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 59474664, "answer_count": 1, "score": 1, "last_activity_date": 1577249910, "creation_date": 1577239407, "last_edit_date": 1577249910, "question_id": 59474649, "link": "https://stackoverflow.com/questions/59474649/adding-the-value-of-character-in-c", "title": "Adding the value of character in c", "body": "<p>I was to ask to add the value of a number character into an integer, does anyone know how to do that? </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    char num[100];\n    int sum=0,n;\n    printf(\"Total number: \");\n    scanf(\"%d\",&amp;n);\n    for(int i=0;i&lt;n;i++)\n    {\n        printf(\"Number %d: \",i+1);\n        scanf(\"%s\",&amp;num);\n        sum=sum+num;\n    }\n    printf(\"Total = %d\",sum);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "qt", "debugging", "linker"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1577238226, "post_id": 59474550, "comment_id": 105127490, "body": "My guess is, the two compilers don&#39;t agree on the binary layout of <code>NodeTrueProperties</code>. Try printing <code>sizeof(NodeTrueProperties)</code> on both C and C++ sides. <code>bool</code> is a built-in type in C++, but some macro in C, possibly expanding to a type of different size."}], "answers": [{"tags": [], "owner": {"reputation": 1263, "user_id": 6941952, "user_type": "registered", "profile_image": "https://graph.facebook.com/1683664381950916/picture?type=large", "display_name": "Mohammed Deifallah", "link": "https://stackoverflow.com/users/6941952/mohammed-deifallah"}, "is_accepted": false, "score": 0, "last_activity_date": 1577265602, "creation_date": 1577265602, "answer_id": 59476905, "question_id": 59474550, "link": "https://stackoverflow.com/questions/59474550/calling-a-compiled-c-library-function-from-qt-c-produces-unexpected-behaviour/59476905#59476905", "title": "Calling a compiled C library function from Qt C++ produces unexpected behaviour", "body": "<p>Try this format: <code>@ #include &lt;dsemantic.h&gt; @</code>\nI hope this helps solve your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9759525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f39582adfa84ce4fc37277290d89d6?s=128&d=identicon&r=PG&f=1", "display_name": "drwhut", "link": "https://stackoverflow.com/users/9759525/drwhut"}, "is_accepted": true, "score": 0, "last_activity_date": 1577305983, "creation_date": 1577305983, "answer_id": 59481660, "question_id": 59474550, "link": "https://stackoverflow.com/questions/59474550/calling-a-compiled-c-library-function-from-qt-c-produces-unexpected-behaviour/59481660#59481660", "title": "Calling a compiled C library function from Qt C++ produces unexpected behaviour", "body": "<p>I found the culprit thanks to Igor Tandetnik's comment: My <code>bool</code> that I created in the C library (4 bytes = <code>int</code>) was a different size to the <code>bool</code> type in the C++ program (1 byte), which I assume ended up changing the <code>NodeTrueProperties</code> struct between the program and the library as well.</p>\n\n<p>For reference, I changed my <code>bool</code> definition in C from this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/**\n * \\enum bool\n * \\brief A boolean.\n */\ntypedef enum {\n    false, ///&lt; `false`\n    true   ///&lt; `true`\n} bool;\n</code></pre>\n\n<p>to including the <code>stdbool.h</code> header file:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdbool.h&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9759525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f39582adfa84ce4fc37277290d89d6?s=128&d=identicon&r=PG&f=1", "display_name": "drwhut", "link": "https://stackoverflow.com/users/9759525/drwhut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 59481660, "answer_count": 2, "score": 1, "last_activity_date": 1577305983, "creation_date": 1577237380, "last_edit_date": 1577291417, "question_id": 59474550, "link": "https://stackoverflow.com/questions/59474550/calling-a-compiled-c-library-function-from-qt-c-produces-unexpected-behaviour", "title": "Calling a compiled C library function from Qt C++ produces unexpected behaviour", "body": "<p>I am on Windows, and I have 2 projects: One is made in C, which I have compiled into a DLL library, and a Qt C++ project, which I am linking with the C library.</p>\n\n<p>When I've tried linking the C library in the past with C code, it works fine. But there seems to be a problem when I try to link it with C++ code (on both Qt here and on Linux in general), even if I insert the <code>extern \"C\"</code> block where I include the C header files.</p>\n\n<p>The strangest part is when debugging, the code does things that just... shouldn't happen?</p>\n\n<p>Here is the C code that I am calling:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// Defined in a header file elsewhere...\ntypedef struct _nodeTrueProperties {\n    bool isDefined;\n    bool needFuncName;\n    bool _mallocd;\n\n    const DType *inputTypes;\n    long numInputs;\n\n    const DType *outputTypes;\n    long numOutputs;\n} NodeTrueProperties;\n\n// The actual code...\nNodeTrueProperties d_semantic_get_node_properties(struct _sheet *sheet,\n                                                  const char *name,\n                                                  size_t lineNum,\n                                                  const char *funcName,\n                                                  NameDefinition *definition) {\n    VERBOSE(5, \"Getting node properties of node %s on line %zu in %s...\\n\",\n            name, lineNum, sheet-&gt;filePath)\n\n    NodeTrueProperties out =\n        (NodeTrueProperties){false, false, true, NULL, 0, NULL, 0};\n\n    // Most cases use this to build up the output types.\n    DType *outputTypes = NULL;\n\n    // First, let's check if it's a special function like Start.\n    // We do this now so we don't need to search all of our includes\n    // for this function.\n    if (strcmp(name, \"Start\") == 0) {\n\n        // THIS IS THE SECTION THAT SHOULD AND DOES RUN!\n\n        out.isDefined  = true;\n        out.numOutputs = 1;\n\n        outputTypes    = (DType *)d_malloc(sizeof(DType));\n        outputTypes[0] = TYPE_EXECUTION;\n\n        out.outputTypes = (const DType *)outputTypes;\n    } else if (strcmp(name, \"Return\") == 0) {\n        // ... stuff that shouldn't run...\n    } // ...\n\n    return out;\n}\n</code></pre>\n\n<p>And this is the Qt C++ code calling that function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"nodegraphicsitem.h\"\n\n#include &lt;QPainter&gt;\n\nextern \"C\" {\n    #include &lt;dsemantic.h&gt;\n}\n\n// ...\n\nvoid NodeGraphicsItem::setupNode(Sheet *sheet, QString name, QPointF position) {\n    _name = name;\n    _position = position;\n    _sheet = sheet;\n    _size = STARTING_SIZE;\n\n    // Set the QGraphicsItem flags.\n    setFlags(ItemIsMovable | ItemIsSelectable);\n\n    // Get the true properties of the node.\n    NameDefinition nodeDefinition;\n    QByteArray nameByteArray      = name.toLatin1();\n    const char *nameCharArray     = nameByteArray.constData();\n\n    // THIS IS THE CALL TO THE COMPILED C FUNCTION\n    NodeTrueProperties properties =\n        d_semantic_get_node_properties(sheet, nameCharArray, 1, NULL,\n                                       &amp;nodeDefinition);\n\n    // THIS FUNCTION DOES SOME WHACKY STUFF\n    d_semantic_free_true_properties(properties);\n\n    // ...\n}\n\n</code></pre>\n\n<p>Everything compiles fine, but it does not run fine at all:</p>\n\n<p>What I expect my <code>NodeTrueProperties</code> to look like, based on the if statement that runs (since the name passed in is <code>\"Start\"</code>), should look like this: <code>{true, false, true, NULL, 0, (pointer to DType array), 1}</code>. What I actually get is <code>{true, false, false, NULL, 1, NULL, 0}</code> according to the debugger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Q99Wj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q99Wj.png\" alt=\"What the debugger says the values are\"></a></p>\n\n<p>Another really whacky artifact is an if statement activates in the C code, even though the condition, according to the debugger, is false (<code>trueProperties._mallocd == false</code>):</p>\n\n<p><a href=\"https://i.stack.imgur.com/F1IMQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F1IMQ.png\" alt=\"If statement activates for some reason\"></a></p>\n\n<p>I use CMake and VS2017 in Win32 mode to compile the C project into a DLL, and I use Qt Creator with the MSVC2017 32bit kit to compile the Qt C++ project.</p>\n"}, {"tags": ["c", "string", "scanf"], "comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1577228792, "post_id": 59474001, "comment_id": 105126329, "body": "Do you know the effect of putting that space and the comma in the format specifier string?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1577229204, "post_id": 59474001, "comment_id": 105126375, "body": "Did you check the return value? It seems that since you first searched for a newline, the comma can\u2019t match and therefore the call fails before the string is read."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1577233272, "post_id": 59474077, "comment_id": 105126912, "body": "&quot;This will read and discard everything up to the next newline&quot; --&gt; only if the first character is not <code>&#39;\\n&#39;</code>.  In that case nothing is read, <code>&#39;\\n&#39;</code> remains in <code>stdin</code> and <code>str</code> unwritten."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577243197, "post_id": 59474077, "comment_id": 105128007, "body": "The string in the question had leading space on the format string"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 0, "last_activity_date": 1577229375, "creation_date": 1577229375, "answer_id": 59474077, "question_id": 59474001, "link": "https://stackoverflow.com/questions/59474001/how-does-n-scanf-works-in-c/59474077#59474077", "title": "how does %*[^\\n] (scanf) ,works in c?", "body": "<pre><code>scanf( \"%*[^\\n],%10s\", str);\n</code></pre>\n\n<p>attempts to read <em>and discard</em> everything up to (but not including) the next newline, then attempts to match a comma, then reads up to 10 non-whitespace characters into <code>str</code>.</p>\n\n<p>That\u2019s not going to work, because if you read up to a newline, then the next character in the stream is going to be a newline, not a comma.  You\u2019re likely getting a <em>matching failure</em>, and the contents of <code>str</code> are not getting updated.  Check the return value of <code>scanf</code> to see if you successfully read the number of the items you were expecting (in this case, 1).</p>\n\n<p>You <em>probably</em> want</p>\n\n<pre><code>scanf( \"%*[^\\n]%10s\", str ); // no comma in format string.\n</code></pre>\n\n<p>This will read and discard everything up to the next newline, then any whitespace will be skipped, and up to 10 non-whitespace characters will b3 read into <code>str</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11273428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59474077, "answer_count": 1, "score": 0, "last_activity_date": 1577229375, "creation_date": 1577228454, "question_id": 59474001, "link": "https://stackoverflow.com/questions/59474001/how-does-n-scanf-works-in-c", "title": "how does %*[^\\n] (scanf) ,works in c?", "body": "<p>can someone explain me how <code>%*[^n]</code> works  ?I understand that if I use that like <code>scanf(\"%*[^\\n]\")</code> it should ignore all the input till it meets a newline character but what really happens when I try something like this \n<code>scanf(\" %*[^\\n],%10s\",str)</code> str being a declared string ,i thought all the input after newline\nincluding newline will get in to the string but when i try to print its its just prints invalid characters.</p>\n"}, {"tags": ["c", "batch-file"], "comments": [{"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 4, "creation_date": 1577227540, "post_id": 59473932, "comment_id": 105126163, "body": "<a href=\"https://www.studytonight.com/c/command-line-argument.php\" rel=\"nofollow noreferrer\">Command line arguments</a>"}, {"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 3, "creation_date": 1577229001, "post_id": 59473932, "comment_id": 105126350, "body": "Are you trying to have a variable that can be statically known, or would such a value be known only at runtime? Depending on your use case you could use command line arguments, environment variables, or perhaps define a macro in your compilation command which you use in the declaration (if it&#39;s known statically)."}, {"owner": {"reputation": 600, "user_id": 7176243, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-dLD6kFec4Bg/AAAAAAAAAAI/AAAAAAAAAJ0/CQ6lkIKBWPI/photo.jpg?sz=128", "display_name": "vk-code", "link": "https://stackoverflow.com/users/7176243/vk-code"}, "edited": false, "score": 0, "creation_date": 1577322041, "post_id": 59473932, "comment_id": 105142031, "body": "You can try using getenv to read value of the variable in your c file"}], "answers": [{"tags": [], "owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "is_accepted": false, "score": 3, "last_activity_date": 1577321705, "last_edit_date": 1577321705, "creation_date": 1577240283, "answer_id": 59474713, "question_id": 59473932, "link": "https://stackoverflow.com/questions/59473932/how-to-send-a-variable-from-batch-file-to-a-c-program/59474713#59474713", "title": "How to send a variable from batch file to a C program?", "body": "<p>As pointed out by @kopecs, it seem that you want to define a macro in the command line while compiling your code. This would be useful if you want to define some constant that will be included in the binary for future execution, but not if you simply want to get argument from the command line.</p>\n\n<p>Modify your code the following way to use the preprocessor</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#ifndef VARIABLE\n// In case you want to define a default value for your VARIABLE\n#define VARIABLE \"default value\"\n#endif\n\nint main() {\n    char(or any other) name[] = VARIABLE // VARIABLE is a preprocessing macro that will be defined by the compiler\n    printf(name);\n\n    return 0;\n}\n</code></pre>\n\n<p>Then invoke the compiler with the following <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options\" rel=\"nofollow noreferrer\">preprocessor option</a></p>\n\n<pre><code> @echo off\nset name=%1\n::somehow set a variable in myfile.c to \"name\"'s value\ngcc myfile.c -o readf -D \"VARIABLE=%name%\" -Wall -Wextra -pedantic\n.\\readf\n</code></pre>\n\n<p>Documentation quote for the argument</p>\n\n<blockquote>\n  <p><strong>-D name=definition</strong></p>\n  \n  <p>The contents of definition are tokenized and processed as if they appeared during translation phase three in a \u2018#define\u2019 directive. In particular, the definition is truncated by embedded newline characters.</p>\n  \n  <p>If you are invoking the preprocessor from a shell or shell-like program you may need to use the shell\u2019s quoting syntax to protect characters such as spaces that have a meaning in the shell syntax.</p>\n  \n  <p>If you wish to define a function-like macro on the command line, write its argument list with surrounding parentheses before the equals sign (if any). Parentheses are meaningful to most shells, so you should quote the option. With sh and csh, -D'name(args\u2026)=definition' works.</p>\n  \n  <p>-D and -U options are processed in the order they are given on the command line. All -imacros file and -include file options are processed after all -D and -U options.</p>\n</blockquote>\n\n<p>However, I would recommend using command line argument for your program, that would be more flexible and avoid to recompile it each time you want to change it (unless you want to redistribute the binary with the hardcoded string).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(int argc, char* argv[]) {\n    // add some sanity checking against argc before getting the value in argv\n    char(or any other) name[] = argv[1];\n    printf(name);\n\n    return 0;\n}\n</code></pre>\n\n<p>and after compiling your code the with </p>\n\n<pre><code>gcc myfile.c -o readf -Wall -Wextra -pedantic\n</code></pre>\n\n<p>Just invoke with</p>\n\n<pre><code>.\\readf name_value\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 11163054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GhR0W.jpg?s=128&g=1", "display_name": "Jsscripter", "link": "https://stackoverflow.com/users/11163054/jsscripter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577321705, "creation_date": 1577227438, "last_edit_date": 1577264704, "question_id": 59473932, "link": "https://stackoverflow.com/questions/59473932/how-to-send-a-variable-from-batch-file-to-a-c-program", "title": "How to send a variable from batch file to a C program?", "body": "<p>How to use a variable from a batch file and send the value to a variable in a C file/program?</p>\n\n<p>I absolutely do not know how to do this, and I don't know if it is even possible.</p>\n\n<p>I am thinking about something like this:</p>\n\n<p><strong>Batch file:</strong></p>\n\n<pre><code>@echo off\nset name= %1\n::somehow set a variable in myfile.c to \"name\"'s value\ngcc myfile.c -o readf\n.\\readf\n</code></pre>\n\n<p><strong>C file:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    char(or any other) name[] = /* the value of \"name\" in the batch file */\n    printf(name);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "pointers", "types", "structure"], "comments": [{"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 0, "creation_date": 1577227161, "post_id": 59473888, "comment_id": 105126114, "body": "If you&#39;re looking for the distance to (0, 0), the name in English is indeed origin."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1577227191, "post_id": 59473888, "comment_id": 105126117, "body": "To fix the compilation error remove the <code>&amp;</code> in <code>abstandsberechnung(&amp;punkt,N);</code> - however then your code will invoke undefined behavior in <code>scanf (&quot;%d%d&quot;,&amp;(punkt-&gt;x),&amp;(punkt-&gt;y));</code> because <code>punkt</code> is never initialized to point at anything"}, {"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 0, "creation_date": 1577227420, "post_id": 59473888, "comment_id": 105126148, "body": "(In turn to fix this issue) You&#39;ll probably want to do <code>punktdaten *punkt = malloc(sizeof(punktdaten));</code> at the start of <code>main</code> instead of what you currently have and, assuming you don&#39;t want to leak memory, <code>free</code> it at the end of <code>main</code>."}, {"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 0, "creation_date": 1577227573, "post_id": 59473888, "comment_id": 105126167, "body": "It would also be helpful if you could clarify what purpose <code>hilf</code> is meant to serve as it doesn&#39;t seem to be used."}, {"owner": {"reputation": 13, "user_id": 12593188, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rYqLUUIc1DI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyFkFt4eLgFWsBdzSm5Uy57M2waw/photo.jpg?sz=128", "display_name": "Selcuk Demirtas", "link": "https://stackoverflow.com/users/12593188/selcuk-demirtas"}, "edited": false, "score": 0, "creation_date": 1577227968, "post_id": 59473888, "comment_id": 105126218, "body": "hilf is for later to swap between the structeres. Structures with more distance to the origin put down in the list and with lower distance put higher. (i cut that part out so it would counfuse but forgot to delete also hilf)"}, {"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 0, "creation_date": 1577228231, "post_id": 59473888, "comment_id": 105126245, "body": "After translating some of the text you print, you almost certainly want what @Barmar has posted as an answer---i.e., an array instead of my earlier suggestion."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1577227620, "creation_date": 1577227620, "answer_id": 59473947, "question_id": 59473888, "link": "https://stackoverflow.com/questions/59473888/pointer-and-structures/59473947#59473947", "title": "Pointer and structures", "body": "<p>You're dereferencing the uninitialized pointer <code>punkt</code>. It shouldn't be a pointer, it should be an array. Then you need to index it each time through the loops in <code>main()</code> and <code>abstandsberechnung()</code>.</p>\n\n<pre><code>int main ()\n{\n    int N;\n    punktdaten hilf;\n    printf (\"Geben sie die Anzahl ihrer Punkt ein:\\n\");\n    scanf (\"%d\", &amp;N);\n    if (N &lt;= 100)             /* Es darf h\u00f6chstens 100 sein, weil Aufgabenstellung */\n    {\n        punktdaten punkt[N];\n        for (int i = 0; i &lt; N; i++)\n        {\n            printf (\"Geben sie die X und Y Koordinaten ihrer %d Punkte ein:\", N);\n            scanf (\"%d%d\",&amp;(punkt[i].x),&amp;(punkt[i].y));\n        }\n        abstandsberechnung(punkt,N);\n    }\n    else\n        printf(\"Zu viele Punkte!\");\n}\n\nvoid abstandsberechnung (punktdaten *punkt,int N)\n{\n    for(int i=0;i&lt;N;i++)\n        punkt[i].abstand=sqrt(punkt[i].x*punkt[i].x*punkt[i].y*punkt[i].y);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12593188, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rYqLUUIc1DI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyFkFt4eLgFWsBdzSm5Uy57M2waw/photo.jpg?sz=128", "display_name": "Selcuk Demirtas", "link": "https://stackoverflow.com/users/12593188/selcuk-demirtas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 59473947, "answer_count": 1, "score": 1, "last_activity_date": 1577227620, "creation_date": 1577226933, "question_id": 59473888, "link": "https://stackoverflow.com/questions/59473888/pointer-and-structures", "title": "Pointer and structures", "body": "<p>I wanted to write a Code that scans the X and Y Variable and put it in a structure (with pointer) and then open a function where it should calculate the distance betweeen the points to the coordinate origin (dont know the english name sry).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ntypedef struct\n  {\n    int x;\n    int y;\n    double abstand;\n  }punktdaten;\n\nvoid abstandsberechnung(punktdaten *punkt,int N);\n\n\nint main ()\n{\n  punktdaten *punkt;\n  int N;\n  punktdaten hilf;\n  printf (\"Geben sie die Anzahl ihrer Punkt ein:\\n\");\n  scanf (\"%d\", &amp;N);\n  if (N &lt;= 100)             /* Es darf h\u00f6chstens 100 sein, weil Aufgabenstellung */\n    {\n      for (int i = 0; i &lt; N; i++)\n     {\n       printf (\"Geben sie die X und Y Koordinaten ihrer %d Punkte ein:\", N);\n       scanf (\"%d%d\",&amp;(punkt-&gt;x),&amp;(punkt-&gt;y));\n     }\n  abstandsberechnung(&amp;punkt,N);\n    }\n    else\n    printf(\"Zu viele Punkte!\");\n}\n\nvoid abstandsberechnung (punktdaten *punkt,int N)\n{\n    for(int i=0;i&lt;N;i++)\n     punkt-&gt;abstand=sqrt(punkt-&gt;x*punkt-&gt;x*punkt-&gt;y*punkt-&gt;y);\n}\n</code></pre>\n\n<p>I dont know how to scan the variables and how to count up with structure and pointer.\nIt says that in line 29 there is a incompatible pointer type and in line 12 it expects \"punktdaten *\" but it\u00b4s \"punktdaten**\".</p>\n\n<p>could you help me pls?</p>\n"}, {"tags": ["c", "function", "callback", "arguments", "gtk"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1577224347, "post_id": 59473619, "comment_id": 105125674, "body": "Pass in <code>nb</code> instead of <code>&amp;nb</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1577225234, "post_id": 59473619, "comment_id": 105125827, "body": "You&#39;re passing the address of a local variable. That address becomes invalid when the function returns."}, {"owner": {"reputation": 20, "user_id": 7183227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybMlz.png?s=128&g=1", "display_name": "Narek", "link": "https://stackoverflow.com/users/7183227/narek"}, "edited": false, "score": 0, "creation_date": 1577225629, "post_id": 59473619, "comment_id": 105125884, "body": "So in function1, in the g_signal_connect, i passed nb but it still don&#39;t give me that 50 in function2"}], "answers": [{"comments": [{"owner": {"reputation": 20, "user_id": 7183227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybMlz.png?s=128&g=1", "display_name": "Narek", "link": "https://stackoverflow.com/users/7183227/narek"}, "edited": false, "score": 0, "creation_date": 1577227568, "post_id": 59473769, "comment_id": 105126166, "body": "Hi Thanks for taking the time to answer, I tried your solution but it still shows me a bunch of random digits, am I right to have the following for function2 : <code>function2(void* nb) {...</code> ? Thanks !"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 20, "user_id": 7183227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybMlz.png?s=128&g=1", "display_name": "Narek", "link": "https://stackoverflow.com/users/7183227/narek"}, "edited": false, "score": 0, "creation_date": 1577227820, "post_id": 59473769, "comment_id": 105126197, "body": "Maybe you should use <code>GINT_TO_POINTER</code>?"}, {"owner": {"reputation": 20, "user_id": 7183227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybMlz.png?s=128&g=1", "display_name": "Narek", "link": "https://stackoverflow.com/users/7183227/narek"}, "edited": false, "score": 0, "creation_date": 1577228005, "post_id": 59473769, "comment_id": 105126223, "body": "Oh I didn&#39;t know about that Im going to try it out Thanks !"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577225649, "creation_date": 1577225649, "answer_id": 59473769, "question_id": 59473619, "link": "https://stackoverflow.com/questions/59473619/pass-received-argument-to-a-callback-function/59473769#59473769", "title": "Pass received argument to a callback function", "body": "<p>You have two problems:</p>\n\n<p>First, you're passing the address of a local variable, but this cannot be used after the function returns.</p>\n\n<p>Second, <code>function2</code> expects <code>nb</code> to be a pointer to <code>int</code>, but you're passing a pointer to a pointer to <code>int</code> to <code>g_signal_connect()</code>.</p>\n\n<pre><code>void function1(int* nb) {\n    ...\n    int *nb_copy = malloc(sizeof(int));\n    *nb_copy = *nb;\n    g_signal_connect(G_OBJECT(button),\"clicked\", G_CALLBACK(function2), nb_copy);\n    // I know that the 4th arg expects void*, but even though I give the address of that _nb_ parameter, still can't get that 50 in function2\n}\n</code></pre>\n\n<p><code>function_2()</code> should <code>free(nb);</code> after it's done with it to prevent a memory leak.</p>\n"}, {"comments": [{"owner": {"reputation": 20, "user_id": 7183227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybMlz.png?s=128&g=1", "display_name": "Narek", "link": "https://stackoverflow.com/users/7183227/narek"}, "edited": false, "score": 0, "creation_date": 1577377684, "post_id": 59480752, "comment_id": 105156190, "body": "\ud83d\ude0d\ud83d\ude0d\ud83d\ude0d\ud83d\ude0d\ud83d\ude0d\ud83d\ude0d\ud83d\ude0d Oh. My. Goodness. Thank you soooo much"}], "tags": [], "owner": {"reputation": 694, "user_id": 8627962, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4f-Yq3BvCaA/AAAAAAAAAAI/AAAAAAAAARM/NeJoNAwQHT0/photo.jpg?sz=128", "display_name": "Siva Guru", "link": "https://stackoverflow.com/users/8627962/siva-guru"}, "is_accepted": true, "score": 1, "last_activity_date": 1577296712, "creation_date": 1577296712, "answer_id": 59480752, "question_id": 59473619, "link": "https://stackoverflow.com/questions/59473619/pass-received-argument-to-a-callback-function/59480752#59480752", "title": "Pass received argument to a callback function", "body": "<p>The problem's in your code are:-</p>\n\n<p>1) you are passing the address of the variable to the callback function \n    so instead of &amp;nb, it should be nb.</p>\n\n<p>2) this is the callback function for clicked signal (<a href=\"https://developer.gnome.org/gtk3/stable/GtkButton.html#GtkButton-clicked_\" rel=\"nofollow noreferrer\">https://developer.gnome.org/gtk3/stable/GtkButton.html#GtkButton-clicked_</a></p>\n\n<pre><code>void\nuser_function (GtkButton *button,\n               gpointer   user_data)\n</code></pre>\n\n<p>you are missing an argument in your callback function </p>\n"}], "owner": {"reputation": 20, "user_id": 7183227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybMlz.png?s=128&g=1", "display_name": "Narek", "link": "https://stackoverflow.com/users/7183227/narek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59480752, "answer_count": 2, "score": 0, "last_activity_date": 1577296712, "creation_date": 1577223865, "last_edit_date": 1577227876, "question_id": 59473619, "link": "https://stackoverflow.com/questions/59473619/pass-received-argument-to-a-callback-function", "title": "Pass received argument to a callback function", "body": "<p>I am working on a Gtk project in C.</p>\n\n<p>From the main.c I call a <strong>function1</strong> with an int address as a parameter.</p>\n\n<p>In that <strong>function1</strong>, I can access that first value, but then at the end (inside) of that <strong>function1</strong>, I call another <strong>function2</strong> (which is a callback function to a click event) and pass it the address I got from the <strong>function1</strong> parameter.</p>\n\n<p>But in <strong>function2</strong>, the address have changed, definitely can't figure out <strong>why</strong>...</p>\n\n<p>My project looks like this :</p>\n\n<p><strong>[main.c]</strong></p>\n\n<pre><code>int main(...) {\n\n    int a = 50;\n    function1(&amp;a);\n\n}\n</code></pre>\n\n<p><strong>[function1.c]</strong></p>\n\n<pre><code>void function1(int* nb) {\n    ...\n    g_signal_connect(G_OBJECT(button),\"clicked\", G_CALLBACK(function2), &amp;nb);\n    // I know that the 4th arg expects void*, but even though I give the address of that _nb_ parameter, still can't get that 50 in function2\n}\n</code></pre>\n\n<p><strong>[function2.c]</strong></p>\n\n<pre><code>void function2(void* nb) {\n    ...\n    printf(\"should got 50 : %d \", *(int*)nb);\n    // shows random 8 digits number like 60035152\n}\n</code></pre>\n\n<p>EDIT: Forgot to mention that each function is in a separate file, I don't know if that matters as long as I do the includes and gives the prototypes...</p>\n\n<p>Thank you in advance...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1577222747, "post_id": 59473515, "comment_id": 105125402, "body": "<code>c</code> is a pointer, yet you assign it an integer value. Exactly as the error says."}, {"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 1, "creation_date": 1577223201, "post_id": 59473515, "comment_id": 105125459, "body": "Are you attempting to use <code>+</code> to concatenate characters into a string? In C <code>+</code> is merely addition for numeric types."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1577223337, "post_id": 59473515, "comment_id": 105125487, "body": "Can you please explain what you want the code to do?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12593044, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TuLEmIbrskw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcc-kcCIE7EvUUQRB7zQabQLAIoEQ/photo.jpg?sz=128", "display_name": "Lucas Summers", "link": "https://stackoverflow.com/users/12593044/lucas-summers"}, "edited": false, "score": 0, "creation_date": 1577223607, "post_id": 59473550, "comment_id": 105125531, "body": "Solved it! Thank you"}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1577224457, "post_id": 59473550, "comment_id": 105125702, "body": "Caution, if <code>monitor_write</code> is expecting a nul-terminated string, then the code above is wrong, but may only fail intermittently if you are unlucky."}], "tags": [], "owner": {"reputation": 3429, "user_id": 5899161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7974a2c4fbb2bc7a521323ecfaa207a?s=128&d=identicon&r=PG&f=1", "display_name": "lukeg", "link": "https://stackoverflow.com/users/5899161/lukeg"}, "is_accepted": false, "score": 0, "last_activity_date": 1577223139, "creation_date": 1577223139, "answer_id": 59473550, "question_id": 59473515, "link": "https://stackoverflow.com/questions/59473515/cannot-fix-this-error-initialization-makes-pointer-from-integer-without-a-c/59473550#59473550", "title": "Cannot fix this error.... &quot;initialization makes pointer from integer without a cast&quot;", "body": "<p>In the line <code>char *c = n+'0'</code> (and in the analogous line below) on the left side of the assignment you have <code>char *c</code> (a pointer to <code>char</code>), on the right an integral value of <code>n+'0'</code>. The compiler warns you that you most probably don't want to assign one type to a different type.</p>\n\n<p>I suspect it might be true and if your <code>monitor_write</code> function expects a pointer, you should pass it a pointer to an already existing variable, something like (though not seeing the complete code one is not completely sure if that's the right solution):</p>\n\n<pre><code>char c = n+'0';\nmonitor_write(&amp;c);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1577223479, "creation_date": 1577223479, "answer_id": 59473580, "question_id": 59473515, "link": "https://stackoverflow.com/questions/59473515/cannot-fix-this-error-initialization-makes-pointer-from-integer-without-a-c/59473580#59473580", "title": "Cannot fix this error.... &quot;initialization makes pointer from integer without a cast&quot;", "body": "<p>In these statements</p>\n\n<pre><code>   char *c = n+'0';\n   char *c = n+'7';\n</code></pre>\n\n<p>You are declaring a pointer but initializing it with an integer.</p>\n\n<p>It seems you mean something like the following</p>\n\n<pre><code>   void monitor_write_hex(u32int n)\n   {\n       if(n &lt;= 9) {\n           char c[2] = { n+'0' };\n           monitor_write(c);\n       } else {\n           char c[2] = { n+'7' };\n           monitor_write(c);\n       }\n   }\n</code></pre>\n\n<p>provided that the function <code>monitor_write</code> awaits a string of the type <code>char *</code> as an argument.</p>\n"}], "owner": {"reputation": 11, "user_id": 12593044, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TuLEmIbrskw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcc-kcCIE7EvUUQRB7zQabQLAIoEQ/photo.jpg?sz=128", "display_name": "Lucas Summers", "link": "https://stackoverflow.com/users/12593044/lucas-summers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1577223479, "creation_date": 1577222708, "last_edit_date": 1577222754, "question_id": 59473515, "link": "https://stackoverflow.com/questions/59473515/cannot-fix-this-error-initialization-makes-pointer-from-integer-without-a-c", "title": "Cannot fix this error.... &quot;initialization makes pointer from integer without a cast&quot;", "body": "<p>I have this function...</p>\n\n<pre><code>  void monitor_write_hex(u32int n)\n       {\n           if(n &lt;= 9) {\n               char *c = n+'0';\n               monitor_write(c);\n           } else {\n               char *c = n+'7';\n               monitor_write(c);\n           }\n       }\n</code></pre>\n\n<p>And I getting the error:</p>\n\n<blockquote>\n  <p>monitor.c:149:13: warning: initialization makes pointer from integer\n  without a cast [-Wint-conversion] char* c = n+'0';</p>\n</blockquote>\n\n<p>I'm hoping someone can help me fix it</p>\n"}, {"tags": ["c", "exploit"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1577220320, "post_id": 59473095, "comment_id": 105124917, "body": "Can you add the disassembly for <code>function1</code>?"}, {"owner": {"reputation": 213, "user_id": 7138943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44490df86b28e88d2e34606a77fb2d3?s=128&d=identicon&r=PG&f=1", "display_name": "cloudy_eclispse", "link": "https://stackoverflow.com/users/7138943/cloudy-eclispse"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1577223161, "post_id": 59473095, "comment_id": 105125453, "body": "I&#39;ve added it above."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1577224323, "post_id": 59473095, "comment_id": 105125670, "body": "The <code>add $0x44, %rax</code> doesn&#39;t seem consistent with the <code>buffer1 + 24</code> in your code (even accounting for my answer below).  Are you sure you have compiled the latest version of your source?"}, {"owner": {"reputation": 213, "user_id": 7138943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44490df86b28e88d2e34606a77fb2d3?s=128&d=identicon&r=PG&f=1", "display_name": "cloudy_eclispse", "link": "https://stackoverflow.com/users/7138943/cloudy-eclispse"}, "edited": false, "score": 0, "creation_date": 1577225834, "post_id": 59473095, "comment_id": 105125924, "body": "You&#39;re sort of right on this as well, the objdump was from an older version when I was playing around with different offset values."}], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 7138943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44490df86b28e88d2e34606a77fb2d3?s=128&d=identicon&r=PG&f=1", "display_name": "cloudy_eclispse", "link": "https://stackoverflow.com/users/7138943/cloudy-eclispse"}, "edited": false, "score": 0, "creation_date": 1577225698, "post_id": 59473624, "comment_id": 105125894, "body": "Thank you! This was it, it works now. However, could you explain more why 24 would get multiplied by sizeof(int)? Not sure I completely understand that part."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "reply_to_user": {"reputation": 213, "user_id": 7138943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44490df86b28e88d2e34606a77fb2d3?s=128&d=identicon&r=PG&f=1", "display_name": "cloudy_eclispse", "link": "https://stackoverflow.com/users/7138943/cloudy-eclispse"}, "edited": false, "score": 0, "creation_date": 1577225954, "post_id": 59473624, "comment_id": 105125940, "body": "@cloudy_eclispse: Normal C pointer arithmetic, see <a href=\"https://stackoverflow.com/a/394777/634919\">stackoverflow.com/a/394777/634919</a>"}], "tags": [], "owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "is_accepted": true, "score": 5, "last_activity_date": 1577225545, "last_edit_date": 1577225545, "creation_date": 1577223895, "answer_id": 59473624, "question_id": 59473095, "link": "https://stackoverflow.com/questions/59473095/smashing-the-stack-trouble-finding-return-address/59473624#59473624", "title": "Smashing the Stack - Trouble finding return address", "body": "<p>Not sure if this is your main problem, but I'm looking at</p>\n\n<pre><code>   ret = (int *) buffer1 + 24;\n</code></pre>\n\n<p>Cast has higher precedence than binary <code>+</code>, so this is <code>((int *)buffer1) + 24</code>.  The effect is that <code>ret</code> is set to an address which is 96 bytes higher than that of <code>buffer1</code>, since <code>sizeof(int) == 4</code>.</p>\n\n<p>You probably meant to write</p>\n\n<pre><code>   ret = (int *)(buffer1 + 24);\n</code></pre>\n\n<p>Also, the return address is 64 bits, and <code>int</code> is 32 bits.  So you probably wanted to declare <code>ret</code> as <code>unsigned long *</code> instead of <code>int *</code>, and change the cast accordingly, so that your <code>*ret += 7</code> is a 64-bit add.  It's unlikely to actually make a difference because of alignments, but still it will look more correct.</p>\n"}], "owner": {"reputation": 213, "user_id": 7138943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44490df86b28e88d2e34606a77fb2d3?s=128&d=identicon&r=PG&f=1", "display_name": "cloudy_eclispse", "link": "https://stackoverflow.com/users/7138943/cloudy-eclispse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 59473624, "answer_count": 1, "score": 2, "last_activity_date": 1577225545, "creation_date": 1577218696, "last_edit_date": 1577223122, "question_id": 59473095, "link": "https://stackoverflow.com/questions/59473095/smashing-the-stack-trouble-finding-return-address", "title": "Smashing the Stack - Trouble finding return address", "body": "<p>I've been reading <a href=\"https://www.eecs.umich.edu/courses/eecs588/static/stack_smashing.pdf\" rel=\"nofollow noreferrer\">\"Smashing the Stack for Fun and Profit\"</a> and seem to be encountering a problem similar to what others have run into the past; however I cannot figure out why my code is still not working.</p>\n\n<p><strong>What I'm trying to do:</strong></p>\n\n<p>Consider the code below:</p>\n\n<pre><code>void function1(int a, int b, int c){\n    char buffer1[8];\n    // char buffer2[10];\n    int *ret;\n\n    ret = (int *) buffer1 + 24;\n    (*ret) += 7; \n}\n\nvoid main() {\n    int x;\n\n    x = 0;\n    function1(1,2,3);\n    x = 1;\n    printf(\"%d\\n\", x);\n}\n</code></pre>\n\n<p>The goal of the example is to overwrite the return address of *function1\n* and skip the line x = 1 in main. So, the program should output 0 instead of 1. However, my output is still 1. So I'm not sure where I'm going wrong. </p>\n\n<p><strong>Using gdb to calculate the return address and the offsets</strong></p>\n\n<p>From an objdump of the assembly:</p>\n\n<pre><code>00000000000006db &lt;main&gt;:\n 6db:   55                      push   %rbp\n 6dc:   48 89 e5                mov    %rsp,%rbp\n 6df:   48 83 ec 10             sub    $0x10,%rsp\n 6e3:   c7 45 fc 00 00 00 00    movl   $0x0,-0x4(%rbp)\n 6ea:   ba 03 00 00 00          mov    $0x3,%edx\n 6ef:   be 02 00 00 00          mov    $0x2,%esi\n 6f4:   bf 01 00 00 00          mov    $0x1,%edi\n 6f9:   e8 b2 ff ff ff          callq  6b0 &lt;function1&gt;\n 6fe:   c7 45 fc 01 00 00 00    movl   $0x1,-0x4(%rbp)\n 705:   8b 45 fc                mov    -0x4(%rbp),%eax\n 708:   89 c6                   mov    %eax,%esi\n 70a:   48 8d 3d 93 00 00 00    lea    0x93(%rip),%rdi        # 7a4 &lt;_IO_stdin_used+0x4&gt;\n 711:   b8 00 00 00 00          mov    $0x0,%eax\n 716:   e8 45 fe ff ff          callq  560 &lt;printf@plt&gt;\n 71b:   90                      nop\n 71c:   c9                      leaveq \n 71d:   c3                      retq   \n 71e:   66 90                   xchg   %ax,%ax\n</code></pre>\n\n<p>Since I'm trying to skip <code>x = 1;</code>, 0x705 - 0x6fe = 0x7, which I'm confident is correct.\nFor determining the offset between buffer1 and the return address on the call stack, I inspect gdb:</p>\n\n<pre><code>Breakpoint 1, function1 (a=1, b=2, c=3) at example3.c:12\n12      ret = (int *) buffer1 + 24;\n(gdb) p $rbp\n$1 = (void *) 0x7fffffffea80\n(gdb) p &amp;buffer1\n$2 = (char (*)[8]) 0x7fffffffea70\n</code></pre>\n\n<p>The distance between buffer1 and the return address should then be: 0x7fffffffea80 - 0x7fffffffea70 + 8 = 24</p>\n\n<p>I've also verified that the word size is 8 (using <code>arch</code> I know it's x86_64). </p>\n\n<p>My guess is the return address offset might be different due to something like a stack canary, but how would I find the actual return address then?</p>\n\n<p>EDIT:</p>\n\n<p>The disassembly for function1:</p>\n\n<pre><code>00000000000006b0 &lt;function1&gt;:\n 6b0:   55                      push   %rbp\n 6b1:   48 89 e5                mov    %rsp,%rbp\n 6b4:   89 7d ec                mov    %edi,-0x14(%rbp)\n 6b7:   89 75 e8                mov    %esi,-0x18(%rbp)\n 6ba:   89 55 e4                mov    %edx,-0x1c(%rbp)\n 6bd:   48 8d 45 f0             lea    -0x10(%rbp),%rax\n 6c1:   48 83 c0 44             add    $0x44,%rax\n 6c5:   48 89 45 f8             mov    %rax,-0x8(%rbp)\n 6c9:   48 8b 45 f8             mov    -0x8(%rbp),%rax\n 6cd:   8b 00                   mov    (%rax),%eax\n 6cf:   8d 50 07                lea    0x7(%rax),%edx\n 6d2:   48 8b 45 f8             mov    -0x8(%rbp),%rax\n 6d6:   89 10                   mov    %edx,(%rax)\n 6d8:   90                      nop\n 6d9:   5d                      pop    %rbp\n 6da:   c3                      retq   \n</code></pre>\n"}, {"tags": ["c", "sdl-2"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1577218055, "post_id": 59473007, "comment_id": 105124497, "body": "Render to an offscreen buffer and only draw what&#39;s different."}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577218218, "post_id": 59473007, "comment_id": 105124522, "body": "Im very new to this kind of programmation and im not sure what is a offscreen buffer."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1577219163, "post_id": 59473007, "comment_id": 105124700, "body": "@Hazel Normally you shouldn&#39;t see the effects you&#39;re talking about. Can you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates them?"}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1577219661, "post_id": 59473007, "comment_id": 105124796, "body": "@HolyBlackCat I added more context and a specific question."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1577219737, "post_id": 59473007, "comment_id": 105124810, "body": "<i>&quot;where should i put render_Arc(struct Game *game)&quot;</i> In your main loop (<code>while (GameRunning)</code>), outside of the event loop."}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1577220074, "post_id": 59473007, "comment_id": 105124870, "body": "@HolyBlackCat i still see it appear and disappear super fast. its not a big issue but im wondering if there is a way to avoid that lol"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1577220362, "post_id": 59473007, "comment_id": 105124926, "body": "Do you see any flickering if you don&#39;t use SDL_gfx?"}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "edited": false, "score": 0, "creation_date": 1577220601, "post_id": 59473007, "comment_id": 105124966, "body": "I dont know i never tried, my teacher told us to use that to draw stuff in our screen and also, i dont know how i can draw without gfx (using spritesheets is too much for just an arc)."}, {"owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "edited": false, "score": 0, "creation_date": 1577221846, "post_id": 59473007, "comment_id": 105125224, "body": "Its fine once I animate it, i dont see visible flickering."}], "owner": {"reputation": 99, "user_id": 12459158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrHwd.jpg?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/12459158/lynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577219594, "creation_date": 1577217670, "last_edit_date": 1577219594, "question_id": 59473007, "link": "https://stackoverflow.com/questions/59473007/how-to-avoid-visible-refresh-in-sdl2", "title": "How to avoid visible refresh in sdl2", "body": "<p>In a situation like this one:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void Game_run(struct Game *game)\n{\n    //Previous rendering are cleared.\n    SDL_RenderClear(game-&gt;renderer);\n    //We are payng\n    game-&gt;state = PLAYING;\n    SDL_Event event;\n    SDL_bool GameRunning = SDL_TRUE;\n\n    render_basic_elements(game);\n\n    while (GameRunning) //while the player didnt loose, the game is running\n    {\n        while (SDL_PollEvent(&amp;event))\n        {\n            switch (event.type)\n            {\n            //when a key is pressed\n            case SDL_KEYDOWN:\n                                //Detecting the pressed key\n                                switch (event.key.keysym.sym)\n                                {\n                                case SDLK_LEFT:\n\n                                    printf(\"Left key pressed\\n\");\n                                    Move_Cursor_Left(game);\n                                    break;\n                                case SDLK_RIGHT:\n                                    printf(\"Right key pressed\\n\");\n                                    Move_Cursor_Right(game);\n                                    break;\n\n                                default:\n                                    break;\n                                }\n                break;\n            //when a key is unpressed\n            case SDL_KEYUP:\n                                switch (event.key.keysym.sym)\n                                {\n                                case SDLK_LEFT:\n                                    printf(\"Left key up\\n\");\n                                    break;\n                                case SDLK_RIGHT:\n                                    printf(\"Right key up\\n\");\n                                    break;\n\n                                default:\n                                    break;\n                                }\n                break;\n            //if the user quit the game\n            case SDL_QUIT:\n                //The game is over\n                GameRunning = SDL_FALSE;\n                game-&gt;state = GAME_OVER;\n                break;\n\n            default:\n                break;\n            }\n        }\n    }\n}\nvoid render_Arc(struct Game *game){\n        //refresh\n        SDL_RenderClear(game-&gt;renderer);\n        //i render the background again\n        Spritesheet_render(game-&gt;background, BACKGROUND_X, BACKGROUND_Y, 255, 0);\n        // i am drawing an arc\n        arcRGBA(game-&gt;renderer, SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2, 100, 0, 80, 255, 255, 255, 255);\n        //i render my stuff\n        SDL_RenderPresent(game-&gt;renderer);\n};\n</code></pre>\n\n<p>How can i render stuff (refresh the screen with new elements or just static elements using sdl_gfx) without seeing it appear and disappear very fast?</p>\n\n<p>I normally use</p>\n\n<p><code>SDL_RenderClear(game-&gt;renderer);</code></p>\n\n<p>Draw my stuff and then</p>\n\n<p><code>SDL_RenderPresent(game-&gt;renderer);</code></p>\n\n<p>But i dont like the refreshing effect.\nAm I doing something wrong or thats something normal?</p>\n\n<p><strong>Update</strong>:\nwhere should i put <code>render_Arc(struct Game *game)</code> to always be rendered without seeing it come and go fast when there is an event for example?</p>\n"}, {"tags": ["c", "arrays", "data-structures", "segmentation-fault", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1577216390, "post_id": 59472858, "comment_id": 105124168, "body": "Which line of code is causing the segfault?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 3, "creation_date": 1577216499, "post_id": 59472858, "comment_id": 105124183, "body": "The line <code>land arr[1000][1000];</code> looks a bit suspect, to me. You are asking to create an automatic  variable of size &gt;= 24 million bytes - on the stack!! If that don&#39;t cause Stack Overflow, I&#39;m not sure what will. (You <i>could</i> try moving out of <code>main</code> and making it <code>static</code> - not the best code, I agree, but it may help diagnosis.)"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 2, "creation_date": 1577217168, "post_id": 59472858, "comment_id": 105124311, "body": "When compiled with MSVC (VS2019) I get this warning (along with quite a few others): <b>warning C6262: Function uses &#39;24000112&#39; bytes of stack:  exceeds /analyze:stacksize &#39;16384&#39;.  Consider moving some data to heap.</b>"}, {"owner": {"reputation": 118, "user_id": 9037569, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F3AKAgU1H7M/AAAAAAAAAAI/AAAAAAAAFlQ/4F8jN8_uyRg/photo.jpg?sz=128", "display_name": "Anurag B.", "link": "https://stackoverflow.com/users/9037569/anurag-b"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1577217872, "post_id": 59472858, "comment_id": 105124461, "body": "@AdrianMole Thank you so much for your feedback! At least now I know which lines are causing problems. In college, we have barely started data structures (finished only arrays). This means that I know nothing about stacks and heaps hehe, and I should probably try a simpler method to solve the problem. Just out of curiosity though, I would love to see what this code would like after it has been corrected."}], "answers": [{"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 1, "last_activity_date": 1577218664, "creation_date": 1577218664, "answer_id": 59473089, "question_id": 59472858, "link": "https://stackoverflow.com/questions/59472858/2-d-array-of-structures-unable-to-fix-a-segmentation-fault/59473089#59473089", "title": "2-D Array of structures -&gt; unable to fix a segmentation fault :(", "body": "<p>Your line: <code>land arr[1000][1000];</code> declares <code>arr</code> as an <strong>automatic</strong> variable, which means that space is allocated to it from the <em>stack</em>. Put simply, this <em>stack</em> is memory assigned for local use when a function is called (and <code>main</code> is really just a function called by the operating system when you run the program).</p>\n\n<p>Typically, the amount of space available on the stack is limited - typically 16 - 64 kilobytes. However, your <code>arr</code> variable (assuming 8 bytes for a <code>long long int</code> and 8 bytes for a pointer) will require <strong>more than 24 megabytes</strong>. This is almost certainly what is causing your \"Stack Overflow!\"</p>\n\n<p>A 'quick fix' to this problem is to declare the variable <code>static</code>. This means that space is allocated at compile time (or, more likely, at link time) and is 'locked' into memory while the program is running. (You may notice that the size of your executable file increases by 24 MB after you do this - depending on your platform!)</p>\n\n<p>Here is a slightly modified version of your code, with this correction, along with a couple of other suggested improvements (all marked with the \"///\" comment delimiter:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define ll long long \n\nint main() {\n    ll int N;\n    scanf(\"%lld\", &amp;N); /// The plain \"%d\" format expects an \"int\" argument - use \"%lld\" for \"long long int\"\n    ll int i, j, a, b;\n    ll int TOTAL = 0;  /// If you don't INITIALIZE \"TOTAL\" it could start off with ANY value whatsoever!\n\n    typedef struct {\n        ll int flag;\n        ll int count;\n        // int fc[N]; // farmer cost OR cost for farmer i\n        ll int* fc;\n    } land;\n\n    // check whether all of them have been\n    // initialised to 0\n    // printf(\"%d \", arr[2][2].count);\n    // yes\n\n    static land arr[1000][1000]; /// Without \"static\" this array (~ 24 Megabytes) will overflow the stack!\n    for (i = 0; i &lt; 1000; i++) {\n        for (j = 0; j &lt; 1000; j++) {\n            arr[i][j].fc = (ll int*)calloc(N, sizeof(ll int));\n        }\n    }\n\n    ll int x1, y1, x2, y2, c;\n    ll int ta, tb; // temp a // temp b\n    for (i = 0; i &lt; N; i++) {\n        scanf(\"%lld %lld %lld %lld %lld\", &amp;x1, &amp;y1, &amp;x2, &amp;y2, &amp;c);\n        // the array index starts from 0\n        // so to match the inputs to the correct indices\n        // the inputs must be reduced by one\n        for (a = x1; a &lt;= x2; a++) {\n            for (b = y1; b &lt;= y2; b++) {\n                ta = a - 1;\n                tb = b - 1;\n\n                arr[ta][tb].count++;\n                if (arr[ta][tb].count &gt;= 2)\n                    arr[ta][tb].flag = 1;\n\n                arr[ta][tb].fc[i] = c;\n            }\n        }\n    }\n\n    ll int k;\n    for (i = 0; i &lt; 1000; i++) {\n        for (j = 0; j &lt; 1000; j++) {\n            if (arr[i][j].flag == 1) {\n                for (k = 0; k &lt; N; k++)\n                    TOTAL += arr[i][j].fc[k];\n            }\n        }\n    }\n\n    printf(\"%lld\", TOTAL);\n    return 0;\n}\n</code></pre>\n\n<p>Feel free to ask for further clarification and/or explanation.</p>\n"}], "owner": {"reputation": 118, "user_id": 9037569, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F3AKAgU1H7M/AAAAAAAAAAI/AAAAAAAAFlQ/4F8jN8_uyRg/photo.jpg?sz=128", "display_name": "Anurag B.", "link": "https://stackoverflow.com/users/9037569/anurag-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 59473089, "answer_count": 1, "score": 0, "last_activity_date": 1577218664, "creation_date": 1577216203, "last_edit_date": 1577217456, "question_id": 59472858, "link": "https://stackoverflow.com/questions/59472858/2-d-array-of-structures-unable-to-fix-a-segmentation-fault", "title": "2-D Array of structures -&gt; unable to fix a segmentation fault :(", "body": "<p>SO (pun intended) I want to solve this question from HackerEarth: <a href=\"https://www.hackerearth.com/practice/data-structures/arrays/multi-dimensional/practice-problems/algorithm/the-wealthy-landlord/\" rel=\"nofollow noreferrer\">https://www.hackerearth.com/practice/data-structures/arrays/multi-dimensional/practice-problems/algorithm/the-wealthy-landlord/</a></p>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define ll long long \n\nint main () {\n    ll int N;\n    scanf(\"%d\", &amp;N);\n    ll int i, j, a, b;\n    ll int TOTAL;\n\n    typedef struct {\n        ll int flag;\n        ll int count;\n        // int fc[N]; // farmer cost OR cost for farmer i\n        ll int *fc;\n    } land;\n\n    // check whether all of them have been\n    // initialised to 0\n    // printf(\"%d \", arr[2][2].count);\n    // yes\n\n    land arr[1000][1000];\n    for(i=0; i&lt;1000; i++) {\n        for(j=0; j&lt;1000; j++) {\n            arr[i][j].fc = (ll int *)calloc(N, sizeof(ll int));\n        }\n    }\n\n    ll int x1, y1, x2, y2, c;\n    ll int ta, tb; // temp a // temp b\n    for(i=0; i&lt;N; i++) {\n        scanf(\"%lld %lld %lld %lld %lld\", &amp;x1, &amp;y1, &amp;x2, &amp;y2, &amp;c);\n        // the array index starts from 0\n        // so to match the inputs to the correct indices\n        // the inputs must be reduced by one\n        for(a=x1; a&lt;=x2; a++) {\n            for (b=y1; b&lt;=y2; b++) {\n                ta = a-1;\n                tb = b-1;\n\n                arr[ta][tb].count++;\n                if(arr[ta][tb].count &gt;= 2)\n                    arr[ta][tb].flag = 1;\n\n                arr[ta][tb].fc[i] = c;\n            }\n        }\n    }\n\n    ll int k;\n    for(i=0; i&lt;1000; i++) {\n        for(j=0; j&lt;1000; j++) {\n            if (arr[i][j].flag == 1) {\n                for(k=0; k&lt;N; k++)\n                    TOTAL += arr[i][j].fc[k];\n            }\n        }\n    }\n\n    printf(\"%lld\", TOTAL);\n    return 0;\n}\n</code></pre>\n\n<p>RESULT: Runtime Error (SIGSEGV)</p>\n\n<p>Compilation Log:\nCompiled Successfully</p>\n\n<blockquote>\n  <p>Execution Log: Execution failed.<br>Segmentation Fault : This occurs\n  because of an out-of-scope array index that is causing a buffer\n  overflow, an incorrectly initialized pointer, etc. A signal is\n  generated when a program either tries to read or write outside the\n  memory that is allocated for it or to write memory that can only be\n  read. For example, you are accessing a[-1] in a language that does not\n  support negative indices for an array.</p>\n</blockquote>\n\n<p>I've edited this code multiple times and fixed various issues by looking at various SO questions. Now it is so close to working, but it just makes a straight face and says segmentation fault. The worst kind of fault that gives you little to no hints on how it should be fixed. I am out of ideas!</p>\n\n<p>ALSO - There probably is a better method to solve this problem which does not involve arrays inside a 2-D array of structures, but I would love to learn how to fix this segmentation fault.</p>\n"}, {"tags": ["c", "loops", "pointers", "while-loop", "c-strings"], "comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1577214855, "post_id": 59472660, "comment_id": 105123825, "body": "It is called pointer dereference. It &quot;returns&quot; a value at memory address pointed to by <code>p</code>. Later in while block you also increase <code>p</code> with <code>p++</code> statement. Essentially your code goes through the string and waits for <code>NULL</code> termination. <a href=\"https://en.wikipedia.org/wiki/Null-terminated_string\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Null-terminated_string</a>"}, {"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 3, "creation_date": 1577214909, "post_id": 59472660, "comment_id": 105123838, "body": "while(*p) doing loop body until meet &#39;\\0&#39; - end of a string"}, {"owner": {"reputation": 97, "user_id": 7905035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcWAF.jpg?s=128&g=1", "display_name": "immukul", "link": "https://stackoverflow.com/users/7905035/immukul"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1577215030, "post_id": 59472660, "comment_id": 105123878, "body": "as @tilz0R mentioned, you are simply dereferencing the pointer *p that you assigned to a char earlier, and using it inside a while loop parentheses as a check."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1577215715, "post_id": 59472660, "comment_id": 105124020, "body": "<code>while(*p)</code> is the same as <code>while (*p != 0)</code>. When does <code>*p</code> equal zero? Or, in the context of strings and characters, <code>&#39;\\0&#39;</code>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1577219301, "post_id": 59472660, "comment_id": 105124723, "body": "@machine_1 Dereferencing &quot;pointer to X&quot; yields &quot;X&quot;  , in this case X is an array of 20 char. So <code>p = *ptr;</code> is correct. <code>*ptr</code> is an array of 20 char, so the array-pointer decay conversion applies and <code>p</code> points to the first element of that array."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577219684, "post_id": 59472660, "comment_id": 105124802, "body": "@M.M oops, you&#39;re right."}], "answers": [{"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": false, "score": 2, "last_activity_date": 1577216139, "creation_date": 1577216139, "answer_id": 59472846, "question_id": 59472660, "link": "https://stackoverflow.com/questions/59472660/how-to-understand-strings-with-pointers/59472846#59472846", "title": "How to understand strings with pointers", "body": "<p>The variable <code>p</code> in your code is defined as a <em>pointer</em> to a <code>char</code>. The get the <em>actual</em> <code>char</code> value that <code>p</code> points to, you need to <em>dereference</em> the pointer, using the <code>*</code> operator.</p>\n\n<p>So, the expression in your <code>while</code> loop, <code>*p</code> evaluates - at the beginning of each loop - to the <code>char</code> variable that <code>p</code> is <strong><em>currently</em></strong> pointing to. Inside the loop, the <code>putchar</code> call also uses this <em>dereference</em> operator <strong>but then increments the pointer's value</strong> so, after sending that character to the output, the <em>pointer</em> is incremented (the <code>++</code> operator) and it then points to the <em>next</em> character in the string.</p>\n\n<p>Conventionally (in fact, virtually always), character strings in <code>C</code> are <code>NUL</code>-terminated, meaning that the end of the string is signalled by having a character with the value of zero at the end of the string.</p>\n\n<p>When the <code>while</code> loop in your code reaches this <code>NUL</code> terminator, the value of the expression <code>*p</code> will thus be ZERO. And, as ZERO is equivalent to a logical \"false\" in <code>C</code> (any non-zero value is considered \"true\"), the <code>while</code> loop will end.</p>\n\n<p>Feel free to ask for further clarification and/or explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1577216681, "last_edit_date": 1577216681, "creation_date": 1577216327, "answer_id": 59472871, "question_id": 59472660, "link": "https://stackoverflow.com/questions/59472660/how-to-understand-strings-with-pointers/59472871#59472871", "title": "How to understand strings with pointers", "body": "<p>From the C Standard (6.8.5 Iteration statements)</p>\n\n<blockquote>\n  <p>4 An iteration statement causes a statement called the loop body to be\n  executed repeatedly until the controlling expression compares equal to\n  0.</p>\n</blockquote>\n\n<p>In this part of the program</p>\n\n<pre><code>p = *ptr;\nwhile(*p)\n//\u2026\n</code></pre>\n\n<p>the pointer <code>p</code> points to the first character of a current string. String in C is a sequence of characters terminated by the zero character <code>'\\0'</code>.</p>\n\n<p>So let's for example the pointer initially points to the first character of the string <code>\"ola\"</code>. The string is represented in the corresponding character array like</p>\n\n<pre><code>{ 'o', 'l', 'a', '\\0' }\n</code></pre>\n\n<p>The condition in the loop</p>\n\n<pre><code>while(*p)\n</code></pre>\n\n<p>may be rewritten like</p>\n\n<pre><code>while(*p != 0 )\n</code></pre>\n\n<p>So the loop will be executed for all characters of the string except the last zero-terminated character and there will be outputted the first three characters of the string.</p>\n\n<p>Pay attention to that (6.5.9 Equality operators)</p>\n\n<blockquote>\n  <p>3 The == (equal to) and != (not equal to) operators are analogous to\n  the relational operators except for their lower precedence.108) <strong>Each\n  of the operators yields 1 if the speci\ufb01ed relation is true and 0 if it\n  is false.</strong> The result has type int. For any pair of operands, exactly\n  one of the relations is true.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 12592630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b93ea33e55489782f0e467ec12ab0ca4?s=128&d=identicon&r=PG&f=1", "display_name": "sergio95", "link": "https://stackoverflow.com/users/12592630/sergio95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1577701304, "creation_date": 1577214626, "last_edit_date": 1577701304, "question_id": 59472660, "link": "https://stackoverflow.com/questions/59472660/how-to-understand-strings-with-pointers", "title": "How to understand strings with pointers", "body": "<p>I have been studying the C language for the last few months. I'm using a book and I have this exercise:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char vector[N_STRINGS][20] = {\"ola\", \"antonio\", \"susana\"};\nchar (*ptr)[20] = vector;\nchar *p;\n\nwhile(ptr-vector&lt;N_STRINGS)\n{\n    p = *ptr;\n    while(*p)\n        putchar(*p++);\n    putchar('\\n');\n    ptr++;\n}\n</code></pre>\n\n<p>I understand everything expect the <code>while(*p)</code>! I can't figure out what the <code>while(*p)</code> is doing.</p>\n"}, {"tags": ["c", "arrays", "sorting", "char"], "comments": [{"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 0, "creation_date": 1577214337, "post_id": 59472603, "comment_id": 105123700, "body": "<code>int rpt_letter(char *word, char c)</code> how to define length of word?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 3, "creation_date": 1577214446, "post_id": 59472603, "comment_id": 105123724, "body": "<code>i</code> is not set in rpt_letter"}, {"owner": {"reputation": 357, "user_id": 11805611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e29dac1699fd306834e9a2d4eb0ff86a?s=128&d=identicon&r=PG&f=1", "display_name": "Katie Melosto", "link": "https://stackoverflow.com/users/11805611/katie-melosto"}, "edited": false, "score": 0, "creation_date": 1577214699, "post_id": 59472603, "comment_id": 105123785, "body": "Thank you so much, that was a very beginner mistake!"}, {"owner": {"reputation": 357, "user_id": 11805611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e29dac1699fd306834e9a2d4eb0ff86a?s=128&d=identicon&r=PG&f=1", "display_name": "Katie Melosto", "link": "https://stackoverflow.com/users/11805611/katie-melosto"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577214899, "post_id": 59472603, "comment_id": 105123836, "body": "@stark I fixed the issue with i, but still not sure why its still not finding the letters correctly"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1577216005, "post_id": 59472603, "comment_id": 105124090, "body": "The <code>while</code> loop in <code>rpt_letter</code> doesn&#39;t stop when it gets to the end of <code>word</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "is_accepted": true, "score": 4, "last_activity_date": 1577216033, "creation_date": 1577216033, "answer_id": 59472834, "question_id": 59472603, "link": "https://stackoverflow.com/questions/59472603/comparing-a-char-to-a-string-in-c/59472834#59472834", "title": "comparing a char to a string in C", "body": "<p>You are getting this issue because in your code <code>rpt_letter()</code> the while loop has a terminating condition <code>count &gt;= 2</code>. Now consider input <code>apple</code> and character <code>a</code>. As <code>a</code> appears in <code>apple</code> only once, the count after traversing the whole word remains 1. But the loop doesn't terminate. So, the index <code>i</code> becomes greater than the length of string and tries to check the character appearing after that.</p>\n\n<p>The loop terminates eventually when it gets another <code>a</code> this way. You need to add a check for the terminating null character in your loop so that it doesn't cross the length of the string .</p>\n\n<p>Change the while loop condition to something like -\n<code>while((count &lt; 2) &amp;&amp; (word[i] != '\\0'))</code></p>\n"}], "owner": {"reputation": 357, "user_id": 11805611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e29dac1699fd306834e9a2d4eb0ff86a?s=128&d=identicon&r=PG&f=1", "display_name": "Katie Melosto", "link": "https://stackoverflow.com/users/11805611/katie-melosto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 59472834, "answer_count": 1, "score": -2, "last_activity_date": 1577216033, "creation_date": 1577214132, "last_edit_date": 1577214839, "question_id": 59472603, "link": "https://stackoverflow.com/questions/59472603/comparing-a-char-to-a-string-in-c", "title": "comparing a char to a string in C", "body": "<p>I'm quite new to C and I'm wondering why in the code below, the char I'm comparing to each letter of the string word is showing that it's equal everytime.\nFor example</p>\n\n<p>If I've inputted the word </p>\n\n<blockquote>\n  <p>apple</p>\n</blockquote>\n\n<p>and I'm looking for any repeating char in \"apple\" my function. I pass in to the function each char of apple such as a, p, p etc. It should return 1 when I pass in p since it's repeated, but instead, for every char of apple, my function says a == word[0], a == word[1] even though word[1] for \"apple\" is 'p'. \nI know char is ASCII, so each char has a number value, but I'm not sure why this is not working. Perhaps, I'm using the pointer *word in the functions arguments incorrectly? </p>\n\n<p>My code is below for my function, rpt_letter:</p>\n\n<pre><code>\nint rpt_letter(char *word, char c)\n{\n\n    int i;\n    int count = 0;\n    i = 0;\n\n    printf(\"This is the WORD %s\\n\", word);\n\n\n    while(count &lt; 2)\n    {\n        if(word[i] == c)\n        {\n            count++;\n            printf(\"the count is %d\\n the char is %c and the string is %c\\n\", count, c, word[i]);\n        }\n        i++;\n    }\n\n    if (count&lt;2) \n    {\n       // printf(\"letter %c was not found in the array. \\n\", c);\n        return 0;\n    } \n    else\n    {\n        //printf(\"letter %c was found at index %d in the array.\\n\", c, mid);\n        repeats[rpt_counter] = c;\n        rpt_counter++;\n        return 1;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I'll include the main method just in case -- but I believe the main method is working well</p>\n\n<pre><code>int main(void) \n{\n    //! showArray(list, cursors=[ia, ib, mid])\n    //int n = 51;\n    char word[51]; \n    scanf(\"%s\", word);\n\n    //length of string\n    for (n=0; word[n] != '\\0'; n++); //calculate length of String\n    printf(\"Length of the string: %i\\n\", n);\n\n    int count = 0;\n\n    //sort words\n\n    int i;\n    char swap = ' '; \n\n    for(int k = 0; k &lt; n; k++)\n    {\n    for (i=0; i&lt;n-1; i++)\n    {\n\n        //if prev char bigger then next char\n        if (word[i] &gt; word[i+1]) \n        {\n\n            //make swap = prev char\n            swap = word[i];\n\n            //switch prev char  with next char\n            word[i] = word[i+1];\n\n            //make next letter char\n            word[i+1] = swap;\n        }\n    }\n    }\n    printf(\"%s\\n\", word);\n\n    for (i=0; i&lt;n-1; i++) \n    {\n     int rpt = rpt_letter(word, word[i]);  \n     if(rpt == 1)\n     {\n         count++;\n     }\n    }\n\n    printf(\"%d\", count);\n\n return 0;   \n}\n\n</code></pre>\n\n<p>I've tried a number of things such as using the operator !=, also &lt;, > but it gives me the same result that each word[ia] == c.</p>\n"}, {"tags": ["c", "arduino", "embedded", "microcontroller", "microchip"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1577213887, "post_id": 59472548, "comment_id": 105123561, "body": "We have no idea about your hardware or software. How can we possibly answer this?"}, {"owner": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 5, "creation_date": 1577213961, "post_id": 59472548, "comment_id": 105123588, "body": "The answer greatly depends on your microcontroller and I/O you are using. Some controllers and I/O ports allow interrupt on any change, so you would be able to efficiently detect the key up just as the key down."}, {"owner": {"reputation": 1, "user_id": 12358228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61ac85b15172120418c2b3faf953c81?s=128&d=identicon&r=PG&f=1", "display_name": "A. Ali", "link": "https://stackoverflow.com/users/12358228/a-ali"}, "reply_to_user": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1577214445, "post_id": 59472548, "comment_id": 105123722, "body": "@daShier Thanks. The problem is how can I know it&#39;s falling or raising edge change interrupt while the interrupt will just execute the same ISR for both?"}, {"owner": {"reputation": 1487, "user_id": 607434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b458e94231d885c11b9d87773264bd?s=128&d=identicon&r=PG", "display_name": "andy mango", "link": "https://stackoverflow.com/users/607434/andy-mango"}, "edited": false, "score": 2, "creation_date": 1577217990, "post_id": 59472548, "comment_id": 105124488, "body": "If the Input port is capable of generating an interrupt upon any change, then I would think that reading the value of the Input port in the interrupt handler would give you its current state. But much depends upon the specifics of your hardware."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 2, "creation_date": 1577218096, "post_id": 59472548, "comment_id": 105124505, "body": "IME scanning a matrix keyboard doesn\u2019t use edge-triggered interrupts but instead reads the states of the switches on one or more input ports - so the code can detect whether a key is pressed or released by storing its previous state and comparing the new state. There are often more complex things needed like debouncing so you don\u2019t get false release/press when switch contacts bounce - this can sometimes be done by scanning e.g. every 10ms and requiring a press or release to have been present for two or more scans before deciding that a key press or release has definitely been detected."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1577267194, "post_id": 59472548, "comment_id": 105131615, "body": "You most likely want the sampling to be in a timer based interrupt, and the foreground task delivers the key state changes through whatever mechanism a uart or special bus or whatever.   This ideally allows for even sampling of the inputs while still being able to report state changes."}, {"owner": {"reputation": 315, "user_id": 9470194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c03b3b31ebf2766d49ac83663a14d757?s=128&d=identicon&r=PG", "display_name": "Joe Thomas", "link": "https://stackoverflow.com/users/9470194/joe-thomas"}, "edited": false, "score": 0, "creation_date": 1577918157, "post_id": 59472548, "comment_id": 105281683, "body": "So there are a few things to take into consideration.  To be robust against multi key presses, you should configure one pin as an output, while the 7 others are inputs with pull-up resistors enabled.  Read both row and column inputs to detect a key press.  If someone presses #1, and then presses #2 (either on purpose or accident) without releasing #1, what are you going to do?  If #2 is released, you can detect that change by saving the previous value and scanning until change, but should you react to that?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12575879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3880533c8f7b4decac1ad38e22810c86?s=128&d=identicon&r=PG&f=1", "display_name": "hapedo", "link": "https://stackoverflow.com/users/12575879/hapedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1577291100, "last_edit_date": 1577291100, "creation_date": 1577228227, "answer_id": 59473987, "question_id": 59472548, "link": "https://stackoverflow.com/questions/59472548/how-to-detect-the-release-of-a-switch-in-a-keyboard-matrix-using-a-microcontroll/59473987#59473987", "title": "How to detect the release of a switch in a keyboard matrix using a microcontroller?", "body": "<p>Matrix keyboard scanning does not require any interrupt. You should create scanning function that will be called periodically. The best way is to store each key as a bit in some variable - you have 4x4 keyboard so uint16_t will perfetly fit. XOR operator is perfect for key change detection. Also don't forget to implement some key debouncing functionality.</p>\n\n<p>I'd suggest following \"pseudo\" code or something similar (I hope there is no bug in it):</p>\n\n<pre><code>#define ROW_COUNT         4\n#define COL_COUNT         4\n#define DEBOUNCE_TIMEOUT  10   // In milliseconds\n\ntypedef uint16_t KeyState;\n\n// This function returns current keyboard state and\n// fills upKeys with keys that were pressed and downKeys with keys that were released\n// It expects that key down is logic H, up is logic L\nKeyState KeyboardState(KeyState* upKeys, KeyState* downKeys)\n{\n  static KeyState lastState = 0;\n  static KeyState lastValidState = 0;\n  static Timestamp lastTimestamp = 0;\n  KeyState currentState = 0;\n  uint8_t x, y;\n\n  // Set defaults\n  if (upKeys)\n    *upKeys = 0;\n  if (downKeys)\n    *downKeys = 0;\n\n  for(y = 0; y &lt; ROW_COUNT; y++)\n  {\n    // Set appropriate row pin to H\n    SetRowPinH(y);\n    // Just to be sure that any parasitic capacitance gets charged\n    SleepMicro(10);\n    for(x = 0; x &lt; COL_COUNT; x++)\n    {\n      // Check key pressed\n      if (IsColPinSet(x))\n        currentState |= 1 &lt;&lt; ((y * COL_COUNT) + x);\n    }\n    // And don't forget to set row pin back to L\n    SetRowPinL(y);\n  }\n\n  // Now lets do debouncing - this is important for good functionality\n  // Matrix state should not change for some time to accept result\n  if (lastState == currentState)\n  {\n    // Check if time has passed\n    if ((TimestampNowMilli() - lastTimestampMilli) &gt;= DEBOUNCE_TIMEOUT)\n    {\n      // Let's detect up/down changes first - it's easy, just use XOR for change detection\n      if (upKeys)\n        *upKeys = currentState &amp; (lastValidState ^ currentState);\n      if (downKeys)\n        *downKeys = (~currentState) &amp; (lastValidState ^ currentState);\n      lastValidState = currentState;\n    }\n  }\n  else\n  {\n    // Current state differs from previous - reset timer\n    lastTimestampMilli = TimestampNowMilli();\n  }\n  lastState = currentState;\n\n  return lastValidState;\n}\n\nint main()\n{\n  KeyState upKeys;\n  KeyState downKeys;\n  KeyState currentKeys;\n  while(1)\n  {\n    currentKeys = KeyboardState(&amp;upKeys, &amp;downKeys);\n    if (upKeys &amp; 0x0001)\n      printf(\"Key 1 pressed\\n\");\n    if (downKeys &amp; 0x0001)\n      printf(\"Key 1 released\\n\");\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12358228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61ac85b15172120418c2b3faf953c81?s=128&d=identicon&r=PG&f=1", "display_name": "A. Ali", "link": "https://stackoverflow.com/users/12358228/a-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578485510, "creation_date": 1577213739, "last_edit_date": 1578485510, "question_id": 59472548, "link": "https://stackoverflow.com/questions/59472548/how-to-detect-the-release-of-a-switch-in-a-keyboard-matrix-using-a-microcontroll", "title": "How to detect the release of a switch in a keyboard matrix using a microcontroller?", "body": "<p>I want to detect the release of a switch in a matrix of keys. Consider a 4*4 keys matrix, a scan by a microcontroller can easily be done to detect a key PRESS. However, I want to detect also the releases when they occur. \nIs there a more efficient way to do so than just doing another scan on each state change interrupt for the unpressed ones? </p>\n"}, {"tags": ["c", "recursion", "multidimensional-array", "linked-list"], "comments": [{"owner": {"reputation": 141, "user_id": 7286877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fbaa62b70fa90d716a1ff1ecc32468?s=128&d=identicon&r=PG&f=1", "display_name": "vsh", "link": "https://stackoverflow.com/users/7286877/vsh"}, "edited": false, "score": 0, "creation_date": 1577210514, "post_id": 59472083, "comment_id": 105122685, "body": "<code>new_node-&gt;pos.x</code> trying to access not initialized memory"}, {"owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "edited": false, "score": 0, "creation_date": 1577250167, "post_id": 59472083, "comment_id": 105128710, "body": "What do you mean by <code>return  *search(cell *grid, position pos, position goal, int rows, int columns);</code>. You are calling the function, not defining it. Also, can you show the <code>search()</code> function body?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577250224, "post_id": 59472083, "comment_id": 105128717, "body": "Your basic structure setup looks wrong. From what you describe, your <code>struct node</code> should contain <code>cell</code> and <code>next</code> instead of just <code>pos</code> and <code>next</code>. That way you will have the remaining information for <code>ch</code> and <code>visited</code> available. Otherwise, you have no correlation between the current position and <code>visited</code> and <code>ch</code>. Keeping two separate lists seems to unnecessarily complicate things."}, {"owner": {"reputation": 5, "user_id": 12567472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb83ebd361eb16ed8a16a84dbd240982?s=128&d=identicon&r=PG&f=1", "display_name": "Thedonor", "link": "https://stackoverflow.com/users/12567472/thedonor"}, "reply_to_user": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "edited": false, "score": 0, "creation_date": 1577265707, "post_id": 59472083, "comment_id": 105131295, "body": "@kuro i edited the problem,  i hope it will be more useful now the explenation"}, {"owner": {"reputation": 5, "user_id": 12567472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb83ebd361eb16ed8a16a84dbd240982?s=128&d=identicon&r=PG&f=1", "display_name": "Thedonor", "link": "https://stackoverflow.com/users/12567472/thedonor"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577265812, "post_id": 59472083, "comment_id": 105131312, "body": "@DavidC.Rankin  i edited the problem, i hope it will be more useful now the explenation"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577266505, "post_id": 59472083, "comment_id": 105131461, "body": "Okay, I&#39;m still a little unclear, but if I understand your edit, you will have either an <i>array of struct cell</i> which defines the board, which char is in the cell and if it has been visited. You then need a linked list of <code>node</code> that successfully navigates through your collection of cells and exits at 18,19. What is it that holds the collection of cells? Array of struct? Do you have the code that declares and initializes that object? That would be helpful to know how to traverse it to fill your list of <code>node</code>."}, {"owner": {"reputation": 5, "user_id": 12567472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb83ebd361eb16ed8a16a84dbd240982?s=128&d=identicon&r=PG&f=1", "display_name": "Thedonor", "link": "https://stackoverflow.com/users/12567472/thedonor"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577269372, "post_id": 59472083, "comment_id": 105132071, "body": "@DavidC.Rankin the collection of cells is inside cell grid that is a array of struct yes i thave that code if is helpful ill edit the post to make it more clear"}], "answers": [{"tags": [], "owner": {"reputation": 1706, "user_id": 7207993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e89e4b9002e8beffad23e668cb04d1?s=128&d=identicon&r=PG&f=1", "display_name": "C.Gochev", "link": "https://stackoverflow.com/users/7207993/c-gochev"}, "is_accepted": true, "score": 0, "last_activity_date": 1577227894, "creation_date": 1577227894, "answer_id": 59473965, "question_id": 59472083, "link": "https://stackoverflow.com/questions/59472083/searching-in-a-linked-list/59473965#59473965", "title": "Searching in a linked list", "body": "<p>This is pretty much exactly what you need I took the code from <a href=\"https://en.wikipedia.org/wiki/Maze_generation_algorithm\" rel=\"nofollow noreferrer\">here</a>! \nbut slightly modified it to draw the maze to a test.txt file as you needed.I hope it helps.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;time.h&gt;\n    #include &lt;string.h&gt;\n\n    typedef struct\n       {\n        int x, y; \n        void *parent; //Pointer to parent node\n        char c; //Character to be displayed\n        char dirs; //Directions that still haven't been explored\n       } Node;\n       Node *nodes; \n       int width, height; //Maze dimensions\n\n\n     int init( )\n{\n    int i, j;\n    Node *n;\n\n    //Allocate memory for maze\n    nodes = calloc( width * height, sizeof( Node ) );\n    if ( nodes == NULL ) return 1;\n\n    //Setup crucial nodes\n    for ( i = 0; i &lt; width; i++ )\n    {\n        for ( j = 0; j &lt; height; j++ )\n        {\n            n = nodes + i + j * width;\n            if ( i * j % 2 ) \n            {\n                n-&gt;x = i;\n                n-&gt;y = j;\n                n-&gt;dirs = 15; //Assume that all directions can be explored (4 youngest bits set)\n                n-&gt;c = ' '; \n            }\n            else n-&gt;c = '#'; //Add walls between nodes\n        }\n    }\n    return 0;\n}\n\nNode *link( Node *n )\n{\n    //Connects node to random neighbor (if possible) and returns\n    //address of next node that should be visited\n\n    int x, y;\n    char dir;\n    Node *dest;\n\n    //Nothing can be done if null pointer is given - return\n    if ( n == NULL ) return NULL;\n\n    //While there are directions still unexplored\n    while ( n-&gt;dirs )\n    {\n        //Randomly pick one direction\n        dir = ( 1 &lt;&lt; ( rand( ) % 4 ) );\n\n        //If it has already been explored - try again\n        if ( ~n-&gt;dirs &amp; dir ) continue;\n\n        //Mark direction as explored\n        n-&gt;dirs &amp;= ~dir;\n\n        //Depending on chosen direction\n        switch ( dir )\n        {\n            //Check if it's possible to go right\n            case 1:\n                if ( n-&gt;x + 2 &lt; width )\n                {\n                    x = n-&gt;x + 2;\n                    y = n-&gt;y;\n                }\n                else continue;\n                break;\n\n            //Check if it's possible to go down\n            case 2:\n                if ( n-&gt;y + 2 &lt; height )\n                {\n                    x = n-&gt;x;\n                    y = n-&gt;y + 2;\n                }\n                else continue;\n                break;\n\n            //Check if it's possible to go left \n            case 4:\n                if ( n-&gt;x - 2 &gt;= 0 )\n                {\n                    x = n-&gt;x - 2;\n                    y = n-&gt;y;\n                }\n                else continue;\n                break;\n\n            //Check if it's possible to go up\n            case 8:\n                if ( n-&gt;y - 2 &gt;= 0 )\n                {\n                    x = n-&gt;x;\n                    y = n-&gt;y - 2;\n                }\n                else continue;\n                break;\n        }\n\n        //Get destination node into pointer (makes things a tiny bit faster)\n        dest = nodes + x + y * width;\n\n        //Make sure that destination node is not a wall\n        if ( dest-&gt;c == ' ' )\n        {\n            //If destination is a linked node already - abort\n            if ( dest-&gt;parent != NULL ) continue;\n\n            //Otherwise, adopt node\n            dest-&gt;parent = n;\n\n            //Remove wall between nodes\n            nodes[n-&gt;x + ( x - n-&gt;x ) / 2 + ( n-&gt;y + ( y - n-&gt;y ) / 2 ) * width].c = ' ';\n\n            //Return address of the child node\n            return dest;\n        }\n    }\n\n    //If nothing more can be done here - return parent's address\n    return n-&gt;parent;\n}\n\nvoid draw(FILE *fp)\n{\n    int i, j;\n\n    //Outputs maze to terminal - nothing special\n    for ( i = 0; i &lt; height; i++ )\n    {\n        for ( j = 0; j &lt; width; j++ )\n        {\n            fprintf(fp, \"%c\", nodes[j + i * width].c );\n        }\n        fprintf(fp, \"\\n\" );\n    }\n}\n\nint main( int argc, char **argv )\n{\n    Node *start, *last;\n\n    //Check argument count\n    if ( argc &lt; 3 )\n    {\n        fprintf( stderr, \"%s: please specify maze dimensions!\\n\", argv[0] );\n        exit( 1 );\n    }\n\n    //Read maze dimensions from command line arguments\n    if ( sscanf( argv[1], \"%d\", &amp;width ) + sscanf( argv[2], \"%d\", &amp;height ) &lt; 2 )\n    {\n        fprintf( stderr, \"%s: invalid maze size value!\\n\", argv[0] );\n        exit( 1 );\n    }\n//Allow only odd dimensions\n    if ( !( width % 2 ) || !( height % 2 ) )\n    {\n        fprintf( stderr, \"%s: dimensions must be odd!\\n\", argv[0] );\n        exit( 1 );\n    }\n\n\n\n    //Do not allow negative dimensions\n    if ( width &lt;= 0 || height &lt;= 0 )\n    {\n        fprintf( stderr, \"%s: dimensions must be greater than 0!\\n\", argv[0] );\n        exit( 1 );\n    }\n\n    //Seed random generator\n    srand( time( NULL ) );\n\n    //Initialize maze\n    if ( init( ) )\n    {\n        fprintf( stderr, \"%s: out of memory!\\n\", argv[0] );\n        exit( 1 );\n    }\n\n    //Setup start node\n    start = nodes + 1 + width;\n    start-&gt;parent = start;\n      last = start;\n      FILE *fptr;\n      // use appropriate location if you are using MacOS or Linux\n      fptr = fopen(\"./test.txt\",\"w\");   \n      //Connect nodes until start node is reached and can't be left\n      while ( ( last = link( last ) ) != start );\n      draw(fptr);\n   }\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12567472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb83ebd361eb16ed8a16a84dbd240982?s=128&d=identicon&r=PG&f=1", "display_name": "Thedonor", "link": "https://stackoverflow.com/users/12567472/thedonor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 59473965, "answer_count": 1, "score": 0, "last_activity_date": 1577270611, "creation_date": 1577210183, "last_edit_date": 1577270611, "question_id": 59472083, "link": "https://stackoverflow.com/questions/59472083/searching-in-a-linked-list", "title": "Searching in a linked list", "body": "<p>First I want to thank all of you that will answer this problem.</p>\n\n<p><strong>the problems are on edit</strong></p>\n\n<p>The problem is this, I have to create a C program that generates a maze from a .txt file, inside the .txt file we have the number of rows and columns and the labyrinth scheme (I will append a file as a reference here).</p>\n\n<p>20  // number of rows</p>\n\n<p>20  // number of columns</p>\n\n<p>labyrinth scheme <strong>that can change</strong></p>\n\n<pre><code>XXXXXXXXXXXXXXXXXXXX\nX     X    X       X\nX XXXXX XXXX XXX XXX\nX       X      X X X\nX XXXXXXXXXXXX X X X\nX X   X        X X X\nX XXX XXXXXX XXXXX X\nX XXX    X X X     X\nX    XXX       XXXXX\nX XXX   XXXXXX     X\nX   XXX X X    X X X\nXXX XXX X X XXXX X X\nX     X X   XX X X X\nXXXXX     XXXX X XXX\nX     X XXX    X   X\nX XXXXX X XXXX XXX X\nX X     X  X X     X\nX X XXXXXX X XXXXX X\nX X                X\nXXXXXXXXXXXXXXXXXX X\n</code></pre>\n\n<p>The X's are walls.</p>\n\n<p>The player is * and <strong>it starts in position (1,1) and the exit is always in (18,19)</strong></p>\n\n<p>Inside the code there are 3 structures:</p>\n\n<ol>\n<li>Position represents a position inside the labyrinth grid</li>\n<li>The cell is a structure that describes which character is present in\nposition pos of the grid. The structure makes available the visited\nBoolean variable useful when searching for the exit path from the\nmaze, the variable expresses the fact that the search has already\nvisited or not that particular position of the grid.</li>\n<li>The node structure must be used to create the linked list that\ncontains a viable road to exit the maze.</li>\n</ol>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct{\n    int x, y;\n} position;\n\ntypedef struct{     \n    pos;\n    char ch;\n    bool visited;\n} cell;\n\ntypedef struct {\n    position pos;\n    struct node *next;\n} node;\n</code></pre>\n\n<p>This is the function where I found some problems.</p>\n\n<pre><code>node *search(cell *grid, position pos, position goal, int rows, int columns)\n</code></pre>\n\n<p>This function has to search recursively a viable road to the exit that is in (18,19) using also a function <code>bool isEmpty</code> to see if a node is empty</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>bool isEmpty(node *list) {\n    if(list -&gt;  next== NULL) {\n        return true;\n    } else {\n        return false;\n    }\n}\n</code></pre>\n\n<p>I thought that this function may be like this</p>\n\n<pre><code>node *search(cell *grid, position pos, position goal, int rows, int columns){\n node* new_node = (node)malloc(sizeof(node));\n\n //if the last element equals goal position the search finishes\n if (new_node-&gt;pos.x == goal.x &amp;&amp; new_node-&gt;pos.y == goal.y ) {\n    return new_node;\n } else {\n    return  *search(cell *grid, position pos, position goal, int rows, int columns);\n }\n}\n</code></pre>\n\n<p>But when I run the program it crashes. How can I fix this search?</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>First of all i cant change the structures because is a project specification.</p>\n\n<p>The function</p>\n\n<pre><code>node *search(cell *grid, position pos, position goal, int rows, int columns)\n</code></pre>\n\n<p>has to a recursive algorithm to identify the road to the cell (18,19) //the exit\nThis funtion has to return a linked list of positions that the player (*) must visit in order to exit. The return value (which will be suitably saved in the main) will therefore be the head node of this linked list this funtion uses 2 more funtions:</p>\n\n<p>1)</p>\n\n<pre><code>bool isEmpty(node\u2217 list) \n</code></pre>\n\n<p>this funtion returns true if the list is empty otherwise false</p>\n\n<p>2)</p>\n\n<pre><code> node\u2217 push_list (node\u2217 list , position pos) \n</code></pre>\n\n<p>this is a classic push function for the managment of the list. It adds in the head of the list a new node that contains the position pos</p>\n\n<p>Down here there is the code that i have made</p>\n\n<pre><code>node *search(cell *grid, position pos, position goal, int rows, int columns)\n{\n\n//base case\n    if(pos.x == goal.x &amp;&amp; pos.y == goal.y)\n    {\n        //dont know how to return the position cause im in a multidimentional array\n\n    }\n\n}\n\n\n   bool isEmpty(node *list)\n{\n\n    if(list -&gt;  next== NULL)\n    {\n        return true;\n\n    }else{\n\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>this is how i save the maze </p>\n\n<pre><code>cell *read_grid(char *filename, int *rows, int *columns)\n</code></pre>\n\n<p>{</p>\n\n<pre><code>int i,j;\n\n//steam file\nFILE *fp;\n\n\n\n\nfp = fopen(\"grid.txt\", \"r+\");\n\n\nfscanf(fp, \"%d\\n%d\\n\", rows, columns);\nfprintf(stdout, \"%d\\n%d\\n\", *rows, *columns);\n\ncell grid[*rows][*columns];\ncell *temp = (cell*)malloc(sizeof(cell));\n\nassert(*grid != NULL);\n\nif(fp == NULL)\n{\n\n    printf(\"error\\n\");\n    exit(EXIT_FAILURE);\n\n}\n\n\n\n\nfor(i = 0; i &lt; *rows; i++)\n{\n\n    for(j = 0; j &lt; *columns; j++)\n    {\n        fscanf(fp, \"%c\", &amp;(grid[i][j]).ch);\n        grid[i][j].pos.x =i;\n        grid[i][j].pos.y =j;\n\n    }\n    fscanf(fp, \"\\n\");\n}\n\n\n\n\nfclose(fp);\n\ntemp = *grid;\nreturn temp;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "linux", "zxspectrum"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577210259, "post_id": 59472058, "comment_id": 105122608, "body": "Try preprocessing it and see what you get; something about the <code>h</code> variable appears to be confusing the heck out of the compiler."}, {"owner": {"reputation": 67, "user_id": 8208853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52ef7a0b7c3a21a91f0d5a06b6dbccba?s=128&d=identicon&r=PG&f=1", "display_name": "A. Jetman", "link": "https://stackoverflow.com/users/8208853/a-jetman"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577210676, "post_id": 59472058, "comment_id": 105122728, "body": "@LightnessRacesBY-SA3.0 Would you mind giving me a quick snippet of what you mean? I&#39;m unsure of what I need to define."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1577215561, "post_id": 59472058, "comment_id": 105123982, "body": "In function <code>clear_screen</code> you use an undefined type <code>Bat</code>. Then you define a pointer <code>bat</code> but when you access the fields of that unknown struct, you use <code>.</code> instead of <code>-&gt;</code>. This cannot compile."}, {"owner": {"reputation": 67, "user_id": 8208853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52ef7a0b7c3a21a91f0d5a06b6dbccba?s=128&d=identicon&r=PG&f=1", "display_name": "A. Jetman", "link": "https://stackoverflow.com/users/8208853/a-jetman"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1577217023, "post_id": 59472058, "comment_id": 105124276, "body": "@Gerhardh Thank you, that worked. I really need to get some syntax checking installed into Atom."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1577238860, "post_id": 59472058, "comment_id": 105127560, "body": "@Gerhardh Strange compiler segfaulting on that though"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1577238881, "post_id": 59472058, "comment_id": 105127563, "body": "@Gerhardh Also when you have a solution to the problem please post it in the answer section not in the comments"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577358332, "post_id": 59472058, "comment_id": 105149768, "body": "@LightnessRacesBY-SA3.0 as the error description does not point into the direction I mentioned, I did not expect it to be the solution but just &quot;one more bug to fix&quot;. Therefore I didn&#39;t put it in an answer initially."}], "answers": [{"tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": true, "score": 2, "last_activity_date": 1577358276, "creation_date": 1577358276, "answer_id": 59487511, "question_id": 59472058, "link": "https://stackoverflow.com/questions/59472058/sccz80-lib-main-c-l16-warning14expected-sccz80-lib-main-c-l16/59487511#59487511", "title": "sccz80:&quot;../lib/main.c&quot; L:16 Warning:#14:Expected &#39;,&#39; sccz80:&quot;../lib/main.c&quot; L:16 Error:#28:Segmentation fault", "body": "<p>You have 2 errors in your program:</p>\n\n<pre><code>void clear_screen(Bat* bat)\n{\n    undrawb(bat.x, bat.y, bat.w, bat.h);\n}\n</code></pre>\n\n<p>There is no type <code>Bat</code> defined in your code. Only <code>struct Bat</code>.\nThen <code>bat</code> is of type \"pointer to struct\". This means you cannot access the struct members using <code>.</code> operator but you need to dereference via <code>-&gt;</code>.</p>\n\n<p>It is really strange that your compiler provides an error message that does not contain any of these errors but instead mentions a line (assuming <code>L:16</code> indicates line 16) and some reason that do not match the code.</p>\n"}], "owner": {"reputation": 67, "user_id": 8208853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52ef7a0b7c3a21a91f0d5a06b6dbccba?s=128&d=identicon&r=PG&f=1", "display_name": "A. Jetman", "link": "https://stackoverflow.com/users/8208853/a-jetman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59487511, "answer_count": 1, "score": 1, "last_activity_date": 1577358276, "creation_date": 1577210034, "last_edit_date": 1577354992, "question_id": 59472058, "link": "https://stackoverflow.com/questions/59472058/sccz80-lib-main-c-l16-warning14expected-sccz80-lib-main-c-l16", "title": "sccz80:&quot;../lib/main.c&quot; L:16 Warning:#14:Expected &#39;,&#39; sccz80:&quot;../lib/main.c&quot; L:16 Error:#28:Segmentation fault", "body": "<p>I'm getting the following error on compilation of the code below:</p>\n\n<pre><code>sccz80:\"../lib/main.c\" L:16 Warning:#14:Expected ','\nsccz80:\"../lib/main.c\" L:16 Error:#28:Segmentation fault\n</code></pre>\n\n<pre><code>/*\n * A test game of Pong using the Z88dk\n */\n\n#include &lt;spectrum.h&gt;\n#include &lt;graphics.h&gt;\n#include &lt;sprites/sp1.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct Bat {\n    int x;\n    int y;\n    int w;\n    int h;\n};\n\nvoid clear_screen(Bat* bat)\n{\n    undrawb(bat.x, bat.y, bat.w, bat.h);\n}\n\nint main()\n{\n    struct Bat bat;\n    bat.x = 0;\n    bat.y = 0;\n    bat.w = 8;\n    bat.h = 24;\n\n    while(1)\n    {\n        zx_border(INK_GREEN);\n        clear_screen(&amp;bat);\n        drawb(bat.x, bat.y, bat.w, bat.h);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Any suggestions on what might be the issue? I'm using the z88dk to create a test ZX Spectrum program. Unfortunately, I don't have a high enough score to add a 'z88dk' tag. Apologies for that.</p>\n"}, {"tags": ["c", "pointers", "free"], "comments": [{"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1577209867, "post_id": 59471958, "comment_id": 105122515, "body": "One way to find out is to always NULL out any pointer just after you free it. Ex: <code>free(words[j]); words[j] = NULL;</code>  Then any improper reuse will fail sooner."}, {"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 1, "creation_date": 1577209946, "post_id": 59471958, "comment_id": 105122532, "body": "... but if only <code>words[n]</code> is obtained from allocated memory, why are you freeing <code>words[i][j+1]</code>? This doesn&#39;t look like it was malloc&#39;d at all."}, {"owner": {"reputation": 29, "user_id": 12423940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fec8308e4f1f5aa37df7f97af4d46909?s=128&d=identicon&r=PG&f=1", "display_name": "iSkullmao", "link": "https://stackoverflow.com/users/12423940/iskullmao"}, "reply_to_user": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1577210248, "post_id": 59471958, "comment_id": 105122603, "body": "@SteveFriedl notice that the words[i] points at (max_str_len + 1) sized array. im using free to get rid of unused memory by the malloc and it happens if j &lt; max_str_len. which means that i didnt get a max_str_len word. i think this is what you asked about"}, {"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 3, "creation_date": 1577210454, "post_id": 59471958, "comment_id": 105122666, "body": "that&#39;s not how it works: the ONLY pointer you can provide to <code>free()</code> is a pointer you got from <code>malloc()</code> or <code>realloc()</code> - you can&#39;t go to (say) byte 80 and say &quot;I don&#39;t want that byte any more&quot;.  You can use <code>realloc()</code> to resize an array up or down, but it must always operate on the original pointer from the allocator."}, {"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "reply_to_user": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1577210969, "post_id": 59471958, "comment_id": 105122794, "body": "@SteveFriedl to be pedantic you can also <code>free</code> a pointer returned by <code>calloc</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "is_accepted": true, "score": 2, "last_activity_date": 1577210867, "creation_date": 1577210867, "answer_id": 59472171, "question_id": 59471958, "link": "https://stackoverflow.com/questions/59471958/im-doing-free-of-invalid-pointer-but-cant-detect-the-error/59472171#59472171", "title": "Im doing free() of invalid pointer, but can&#39;t detect the error", "body": "<p>I see what's going on here; you're allocating a large buffer, reading into it, and if you didn't need all that space for the word, then you want to give back the memory. That makes sense.</p>\n\n<p>You can't tell the allocator: free starting from position  but we can do almost the same thing with <code>realloc()</code>, which takes a pointer and resizes the array, possibly moving it to a new location. In your case of shortening an array, it should work really well.</p>\n\n<p>Instead of </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>if (j &lt; max_str_len)\n    free(&amp;words[i][j+1]); // INVALID\n</code></pre>\n\n<p>try</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>if (j &lt; max_str_len)\n    words[i] = realloc(words[i], j+1);   // +1 for the NUL byte\n</code></pre>\n\n<p>This should do what you're looking for.</p>\n"}], "owner": {"reputation": 29, "user_id": 12423940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fec8308e4f1f5aa37df7f97af4d46909?s=128&d=identicon&r=PG&f=1", "display_name": "iSkullmao", "link": "https://stackoverflow.com/users/12423940/iskullmao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 59472171, "answer_count": 1, "score": 0, "last_activity_date": 1577210867, "creation_date": 1577209284, "last_edit_date": 1577210271, "question_id": 59471958, "link": "https://stackoverflow.com/questions/59471958/im-doing-free-of-invalid-pointer-but-cant-detect-the-error", "title": "Im doing free() of invalid pointer, but can&#39;t detect the error", "body": "<p>I get an error that I free an invalid pointer.</p>\n\n<p>consider size as 100 (maximum number of words), and <code>max_str_len</code> as 50 (max number of letters in a word, doesn't contain '\\0'. the function is set to scan a sentence and store every word in words array.</p>\n\n<pre><code>int read_words(char* words[], int size, int max_str_len){\n    int wordsCounter = 0;\n\n    for (int i = 0; i &lt;size; ++i) {\n        words[i]=(char*)malloc(sizeof(char)*(max_str_len+1));\n        if(words[i]==NULL){\n            //in case of failure it frees every word.\n            for (int j = 0; j &lt;i ; ++j) {\n                free(words[j]);\n            }\n            return MALLOCERROR;\n        }\n\n        for (int j = 0; j &lt;max_str_len+1; ++j) {\n            if(scanf(\"%c\", &amp;words[i][j])==EOF){\n                wordsCounter++;\n                words[i][j]='\\0';\n                if(j&lt;max_str_len)\n                    free(&amp;words[i][j+1]);\n                return wordsCounter;\n                }\n            if (words[i][j]==' ') {\n                words[i][j] = '\\0';\n                if(j&lt;max_str_len)\n                    free(&amp;words[i][j+1]);\n                break;\n            }\n        }\n        wordsCounter++;\n\n    }\n    return wordsCounter;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "strcmp", "strcpy"], "comments": [{"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 0, "creation_date": 1577209247, "post_id": 59471876, "comment_id": 105122365, "body": "When you say &quot;the computer throws me out&quot; what exactly do you mean? Is there a seg fault? What error message do you receive?"}, {"owner": {"reputation": 29, "user_id": 12404333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAq9tOd0PNboKtx3RBAPinAwDssvZTN-qj0sYA8Iw=k-s128", "display_name": "Kfir Bilu", "link": "https://stackoverflow.com/users/12404333/kfir-bilu"}, "reply_to_user": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 0, "creation_date": 1577209414, "post_id": 59471876, "comment_id": 105122408, "body": "Exception thrown at 0x0102EE72 (ucrtbased.dll) in 11111.exe: 0xC0000005: Access violation writing location 0x00000000."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 12404333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAq9tOd0PNboKtx3RBAPinAwDssvZTN-qj0sYA8Iw=k-s128", "display_name": "Kfir Bilu", "link": "https://stackoverflow.com/users/12404333/kfir-bilu"}, "edited": false, "score": 0, "creation_date": 1577219333, "post_id": 59472162, "comment_id": 105124733, "body": "Thanks!! All the problems are gone, but im not getting the result i need. how do i print the new array after the changes?"}], "tags": [], "owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "is_accepted": false, "score": 1, "last_activity_date": 1577211798, "last_edit_date": 1577211798, "creation_date": 1577210775, "answer_id": 59472162, "question_id": 59471876, "link": "https://stackoverflow.com/questions/59471876/comparing-string-to-words-in-an-array/59472162#59472162", "title": "comparing string to words in an array", "body": "<p>In calling <code>strcpy</code> with <code>newArr[k]</code> as an argument you're dereferencing a <code>NULL</code> pointer.</p>\n\n<p>Recall that we allocate <code>newArr</code> as follows:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char** newArr= (char**)calloc(size_arr, sizeof(char));\n</code></pre>\n\n<p>There's actually multiple errors here. The first is that we <code>calloc</code> with <code>sizeof(char)</code> when we in fact want a region of <code>char*</code>s. So corrected<sup>1</sup> \nwe have</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char** newArr= calloc(size_arr, sizeof(char*));\n</code></pre>\n\n<p>As we've <code>calloc</code>'d this piece of memory, all of it is zeroed. Thus when <code>strcpy</code> internally accesses <code>newArr[k]</code> (itself of type <code>char*</code>) it points to memory address 0, which is likely reversed by the OS, and in any case, not a valid address in the context of our program.</p>\n\n<p>In order to resolve this, we need to allocate for each string. For instance, one might do</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>newArr[k] = malloc(strlen(arr[i]) + 1); // The +1 is for the \\0 termination character\n</code></pre>\n\n<p>the line before we <code>strcpy</code>.</p>\n\n<p>You also have a bug with <code>size_res</code> as you just treat it as an <code>int</code> instead of an <code>int*</code> as you need to dereference it when you want to change or read the value to which it points.</p>\n\n<p><sup>1</sup> See <a href=\"https://stackoverflow.com/a/605858/12521158\">here</a> for why I've removed the cast.</p>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 10911242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d36edcc94a17d299b872b1e38afecd?s=128&d=identicon&r=PG&f=1", "display_name": "risbo", "link": "https://stackoverflow.com/users/10911242/risbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1577222372, "last_edit_date": 1577222372, "creation_date": 1577220541, "answer_id": 59473287, "question_id": 59471876, "link": "https://stackoverflow.com/questions/59471876/comparing-string-to-words-in-an-array/59473287#59473287", "title": "comparing string to words in an array", "body": "<p>You should scan <code>newArr</code> and print all strings inside, something like:</p>\n\n<pre><code>for (int i = 0; i &lt; *size_res; i++) // !\n{\n   printf(\"%s\\n\",newArr[i]);\n}\n</code></pre>\n\n<p>(!) 'size_res' is passed to the function as a pointer to int,    </p>\n"}], "owner": {"reputation": 29, "user_id": 12404333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAq9tOd0PNboKtx3RBAPinAwDssvZTN-qj0sYA8Iw=k-s128", "display_name": "Kfir Bilu", "link": "https://stackoverflow.com/users/12404333/kfir-bilu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1577222372, "creation_date": 1577208733, "question_id": 59471876, "link": "https://stackoverflow.com/questions/59471876/comparing-string-to-words-in-an-array", "title": "comparing string to words in an array", "body": "<p>I got an assignment from my teacher to write a code that compares a given word to a bunch of words located in an array of strings.\nIf the word in the array is lexicography smaller than the word given, I need to put it inside a new array.\nelse, I'm moving to the next word.\nfor example;\ngiven word: hello\narr=bus, alpha, world, java.\nnew array=bus,alpha.\nI wrote a code that does that using STRCMP, but the computer throws me out when it gets to the strcpy part.\nthis is my code</p>\n\n<pre><code>char** LowerSTR(char* arr[], int size_arr, char* str, int* size_res)\n\nsize_res = 0;\nchar** newArr= (char**)calloc(size_arr, sizeof(char));\nfor (int i = 0; i &lt; size_arr; i++)\n{\n    if (strcmp(str, arr[i])==1)\n    {\n        for (int k = 0; k &lt;size_arr;k++)\n        {\n            strcpy(newArr[k], arr[i]);\n        }\n        size_res++;\n    }\n}\nif (size_res == 0)\n    return NULL;\nelse return newArr;}\n</code></pre>\n\n<p>maybe I should use STRCAT instead?</p>\n\n<p>please help :\\</p>\n"}, {"tags": ["c", "file", "scanf", "fopen"], "comments": [{"owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "edited": false, "score": 0, "creation_date": 1577208929, "post_id": 59471862, "comment_id": 105122295, "body": "In the condition for the while loop, the call to <code>sscanf</code> has too many arguments for the specifiers. When you add <code>nn</code> later its just a garbage value."}, {"owner": {"reputation": 21, "user_id": 6929189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dd4d349a7762a5b1333f8c8ab31609?s=128&d=identicon&r=PG&f=1", "display_name": "HKK", "link": "https://stackoverflow.com/users/6929189/hkk"}, "edited": false, "score": 0, "creation_date": 1577209653, "post_id": 59471862, "comment_id": 105122455, "body": "Thanks user312102. My code works now."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6929189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dd4d349a7762a5b1333f8c8ab31609?s=128&d=identicon&r=PG&f=1", "display_name": "HKK", "link": "https://stackoverflow.com/users/6929189/hkk"}, "is_accepted": true, "score": 0, "last_activity_date": 1577209766, "creation_date": 1577209766, "answer_id": 59472027, "question_id": 59471862, "link": "https://stackoverflow.com/questions/59471862/how-to-read-all-the-double-numbers-from-a-string-using-sscanf-in-c/59472027#59472027", "title": "How to read all the double numbers from a string using sscanf in c?", "body": "<p>I modified the code as below to output all the numbers in the line.</p>\n\n<pre><code>FILE *fptr;\nif ((fptr = fopen(\"raw_data_IEEE_68.raw\",\"r\")) == NULL){\n   fprintf(mapFile,\"Error! opening file\");\n}\nint line=0;\nchar input[512];\nint total_n = 0;\ndouble ii;\nint nn;\nwhile( fgets( input, 512,fptr)){\n    line++;\n        total_n = 0;\n        while (1 == sscanf(input + total_n, \"%lf%*[,' ]%n\", &amp;ii, &amp;nn)){\n            total_n += nn;\n            printf(\": %lf\\n\", ii);\n        }\n}\nprintf(\"\\n\\nEnd of Program\\n\");\nfclose(fptr);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6929189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dd4d349a7762a5b1333f8c8ab31609?s=128&d=identicon&r=PG&f=1", "display_name": "HKK", "link": "https://stackoverflow.com/users/6929189/hkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 2, "accepted_answer_id": 59472027, "answer_count": 1, "score": 1, "last_activity_date": 1577209766, "creation_date": 1577208600, "question_id": 59471862, "link": "https://stackoverflow.com/questions/59471862/how-to-read-all-the-double-numbers-from-a-string-using-sscanf-in-c", "title": "How to read all the double numbers from a string using sscanf in c?", "body": "<p>I have a text file which contains lines in different formats. I want to read all the numbers in this text file using c. And I want to read the numbers as a double precision number. The content of the text file is below:</p>\n\n<pre><code> 1,'            ',  13.8000,2,     0.000,     0.000,   1,   1,1.04500,  11.3183,   1\n 2,'            ',  13.8000,2,     0.000,     0.000,   1,   1,0.98000,  19.9495,   1\n 17,'1 ',1,   1,   1,  6000.000,   300.000,     0.000,     0.000,     0.000,     0.000,   1\n 16,'16',  4000.000,   401.887,  9999.000, -9999.000,1.00000,  0,   200.000,   0.00000, 0.00550\n</code></pre>\n\n<p>I used fopen to read the file and used sscanf to scan the content in a single line. The code I have so far is below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nFILE *fptr;\nif ((fptr = fopen(\"rggs.raw\",\"r\")) == NULL){\n   fprintf(mapFile,\"Error! opening file\");\n}\nint line=0;\nchar input[512];\nint total_n = 0;\ndouble ii;\nint nn;\nwhile( fgets( input, 512,fptr)){\n    line++;\n        total_n = 0;\n        while (1 == sscanf(input + total_n, \"%lf\", &amp;ii, &amp;nn)){\n            total_n += nn;\n            printf(\": %lf\\n\", ii);\n        }\n}\nprintf(\"\\n\\nEnd of Program\\n\");\nfclose(fptr);\n</code></pre>\n\n<p>The output of the code is</p>\n\n<pre><code>: 1.000000\n: 2.000000\n: 17.000000\n: 1.000000\n: 0.000000\n: 0.000000\n: 0.000000\n: 16.000000\n: 0.000000\n: 9.000000\n: 0.000000\n: 0.000000\n: 550.000000\n\n\nEnd of Program\n</code></pre>\n\n<p>and it doesn't contain all the numbers in my text file. </p>\n"}, {"tags": ["python", "c", "sockets", "encoding", "winsock2"], "comments": [{"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 4, "creation_date": 1577207728, "post_id": 59471692, "comment_id": 105121990, "body": "You&#39;re sending the full <code>char</code> buffer, including the junk after the NUL byte. Try <code>send(clientSocket, cwd, strlen(cwd) + 1, 0);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11943180"}, "reply_to_user": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1577208060, "post_id": 59471692, "comment_id": 105122079, "body": "Now it gives me this error: ConnectionResetError: [Errno 104] Connection reset by peer"}, {"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1577208668, "post_id": 59471692, "comment_id": 105122230, "body": "Is the Connection Reset coming from the python program (as I expect), or from the sending program in C?"}, {"owner": {"reputation": 1638, "user_id": 1037293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycPs2.jpg?s=128&g=1", "display_name": "Andrii", "link": "https://stackoverflow.com/users/1037293/andrii"}, "edited": false, "score": 1, "creation_date": 1577208993, "post_id": 59471692, "comment_id": 105122314, "body": "You should <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winsock2/nf-winsock2-closesocket\" rel=\"nofollow noreferrer\">close</a> <code>clientSocket</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11943180"}, "edited": false, "score": 0, "creation_date": 1577213519, "post_id": 59472011, "comment_id": 105123465, "body": "This sounds like a possible solution. So in the C code, when I add a null terminator on the end of the string, does it add it onto the end of the memory section or just the end of the valid characters? I thought it would add the 0 at the end of the garbage data, so I would have actual data, garbage data and the nul terminator on the end."}, {"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 0, "creation_date": 1577215963, "post_id": 59472011, "comment_id": 105124083, "body": "@dekotu - When you add a NUL byte, it goes into <i>one position</i> inside the character array, immediately after the character you care about (<code>&#47;home&#47;steve&#47;myproject&#47;</code>), but everything after the NUL byte is unknown and probably junk."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1577222632, "post_id": 59472011, "comment_id": 105125382, "body": "It is not trying to read a full 1024 characters. It will stop at whatever has been read."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11943180"}, "edited": false, "score": 0, "creation_date": 1577273076, "post_id": 59472011, "comment_id": 105132894, "body": "I managed to solve it. I dynamically allocated cwd and then reallocated it to its strlen()."}], "tags": [], "owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "is_accepted": false, "score": -1, "last_activity_date": 1577209655, "creation_date": 1577209655, "answer_id": 59472011, "question_id": 59471692, "link": "https://stackoverflow.com/questions/59471692/how-do-you-send-a-programs-current-working-directory-in-c-using-the-winsock2-lib/59472011#59472011", "title": "How do you send a programs current working directory in C using the winsock2 library?", "body": "<p>I don't know Python but believe I see what's going on here: it appears to be an impedance mismatch between two different ways of handling strings. This will take a few steps.</p>\n\n<p>On the C side, it's a buffer of characters:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char cwd[1024];\ngetcwd(cwd, sizeof cwd);\nsend(clientSocket, cwd, sizeof(cwd), 0);\n</code></pre>\n\n<p>and the contents of the <code>cwd</code> buffer <em>after</em> the current directory string are going to be a NUL byte plus random trash from the stack, and this whole buffer is being sent across the network to the Python program.</p>\n\n<p>My initial proposal was to send only as much of the data as was valid:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>send(clientSocket, cwd, strlen(cwd), 0);  // don't do this after all\n</code></pre>\n\n<p>which sends no trash, but now we find the other problem: the receiving side is expecting a full 1024 bytes:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>cwd = clientSocket.recv(1024).decode(\"utf-8\").strip()\n</code></pre>\n\n<p>The problem is, the sender is transmitting far less bytes (the length of <code>/home/steve/myproject</code> or whatever), and since a TCP socket doesn't honor message boundaries, it's still trying to read a full 1024.</p>\n\n<p>I suspect that the Connection Reset is because your C program exits after sending, which closes the socket, and the Python side observes this closure before it was done receiving everything.</p>\n\n<p>The proper way to fix this likely involves timeouts and buffering on the receiving side, but this looks like a lot of work, so I'll change direction a bit.</p>\n\n<p>Now we'll go back to sending a fixed-size buffer (the 1024 as you suggest), which means both sides agree on the data size, but you'll have to modify the Python side to extract only the interesting part of the string, ignoring the NUL byte and what's beyond it.</p>\n\n<p>On the Python side, you'll still do the <code>cwd = clientSocket.read(1024)</code> but then you'll have to do buffer manipulation to find out where the first NUL byte is, and only use up to (but not including) that character in the buffer.</p>\n\n<p>The resulting subset (say, 47 bytes) will be a string that you should be able to decode and use.</p>\n\n<p>Your results may vary depending on how Python allows you to manipulate buffers and turn them into strings; I don't know.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11943180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577272800, "creation_date": 1577207244, "last_edit_date": 1577272800, "question_id": 59471692, "link": "https://stackoverflow.com/questions/59471692/how-do-you-send-a-programs-current-working-directory-in-c-using-the-winsock2-lib", "title": "How do you send a programs current working directory in C using the winsock2 library?", "body": "<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n\n#pragma comment(lib, \"ws2_32.lib\")\n\nint main(){\n    WSADATA wsa;\n    WSAStartup(MAKEWORD(2, 2), &amp;wsa);\n\n    SOCKET serverSocket = socket(AF_INET, SOCK_STREAM, 0);\n    struct sockaddr_in serverAddr, clientAddr;\n    serverAddr.sin_family = AF_INET;\n    serverAddr.sin_port = htons(6969);\n    serverAddr.sin_addr.s_addr = INADDR_ANY;\n    bind(serverSocket, (struct sockaddr *)&amp;serverAddr, sizeof(serverAddr));\n    listen(serverSocket, 1);\n\n    int s_size = sizeof(struct sockaddr_in);\n    SOCKET clientSocket = accept(serverSocket, (struct sockaddr *)&amp;clientAddr, &amp;s_size);\n\n    char cwd[1024];\n    getcwd(cwd, 1024);\n\n    printf(cwd);\n\n    send(clientSocket, cwd, sizeof(cwd), 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>It is meant to send the cwd of the program to a python script but whenever I run the python script it gives me this error when it recieves the cwd:</p>\n\n<pre><code>cwd = clientSocket.recv(1024).decode(\"utf-8\").strip()\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xd4 in position 44: invalid continuation byte\n</code></pre>\n\n<p>Whenever I print the cwd on the C program it prints without any problem.\nI have tried null terminating the string like this:</p>\n\n<pre><code>cwd[strlen(cwd)] = 0;\n</code></pre>\n\n<p>It didn't change anything.</p>\n\n<p>My best guess is that the data between the actual path and the null terminator is what's causing the encoding error on the python scripts end, but I cant allocate just enough memory for the path because I can't know the length of the path before allocating memory, so I chose 1024 as I felt it was a sensible value.</p>\n\n<p>Anyone know how I can fix this?</p>\n\n<p>EDIT:\n I solved it. The cwd string had a lot of garbage in it along with the actual string because of the large buffer size (1024). I managed to allocate memory for cwd instead and reallocate it to its strlen().</p>\n\n<pre><code>char *cwd = malloc(1024*sizeof(char));\ngetcwd(cwd, 1024);\nrealloc(cwd, strlen(cwd));\n\nprintf(cwd);\n\nsend(clientSocket, cwd, strlen(cwd), 0);\n</code></pre>\n\n<p>This worked for me.</p>\n"}, {"tags": ["c", "integer", "language-lawyer", "conversion-rank"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1577207096, "post_id": 59471627, "comment_id": 105121818, "body": "These are typedefs, not the actual types."}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1577207115, "post_id": 59471627, "comment_id": 105121820, "body": "@Barmar Most likely, but it is not defined by the Standard AFAIK."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1577207446, "creation_date": 1577207446, "answer_id": 59471714, "question_id": 59471627, "link": "https://stackoverflow.com/questions/59471627/signed-integer-type-and-its-corresponding-unsigned-integer-type/59471714#59471714", "title": "Signed integer type and its corresponding unsigned integer type", "body": "<p>The header in the Standard \"7.20.1.5 Greatest-width integer types\" and the description under the header where the two types are described in a pair assume that <code>uintmax_t</code> is defined as an unsigned type corresponding to the type <code>intmax_t</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "edited": false, "score": 0, "creation_date": 1577207835, "post_id": 59471722, "comment_id": 105122027, "body": "Can&#39;t we make the same assumptions for types defined in <code>&lt;stddef.h&gt;</code>?"}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "edited": false, "score": 0, "creation_date": 1577207928, "post_id": 59471722, "comment_id": 105122046, "body": "I mean that <code>size_t</code>, <code>ptrdiff_t</code> are <code>typedef</code>s."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "edited": false, "score": 0, "creation_date": 1577212271, "post_id": 59471722, "comment_id": 105123136, "body": "Yes, although I don&#39;t see what it has to do with the question. These don&#39;t come in both signed and unsigned variants."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1577207490, "creation_date": 1577207490, "answer_id": 59471722, "question_id": 59471627, "link": "https://stackoverflow.com/questions/59471627/signed-integer-type-and-its-corresponding-unsigned-integer-type/59471722#59471722", "title": "Signed integer type and its corresponding unsigned integer type", "body": "<p>According to 7.20(4) these are typedef names, not the underlying types.</p>\n\n<blockquote>\n  <p>For each type described herein that the implementation provides,261) <code>&lt;stdint.h&gt;</code> shall declare that typedef name and define the associated macros. </p>\n</blockquote>\n\n<p>And 7.20.1(1) says:</p>\n\n<blockquote>\n  <p>When typedef names differing only in the absence or presence of the initial u are defined, they shall denote corresponding signed and unsigned types as described in 6.2.5;</p>\n</blockquote>\n\n<p>So I believe these are required to follow the same default conversion rules as the basic integer types are.</p>\n"}, {"tags": [], "owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "is_accepted": false, "score": 2, "last_activity_date": 1577207787, "creation_date": 1577207787, "answer_id": 59471756, "question_id": 59471627, "link": "https://stackoverflow.com/questions/59471627/signed-integer-type-and-its-corresponding-unsigned-integer-type/59471756#59471756", "title": "Signed integer type and its corresponding unsigned integer type", "body": "<p>The <code>intN_t</code> and <code>uintN_t</code> fixed width types weren't introduced until C99, so that may be why the standard you're referencing lacks information about them.</p>\n"}], "owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 59471722, "answer_count": 3, "score": 2, "last_activity_date": 1577207787, "creation_date": 1577206744, "question_id": 59471627, "link": "https://stackoverflow.com/questions/59471627/signed-integer-type-and-its-corresponding-unsigned-integer-type", "title": "Signed integer type and its corresponding unsigned integer type", "body": "<p>For each signed integer type the Standard guarantees existence of a <em>corresponding</em> unsigned integer type. <code>6.2.5 p6</code>:</p>\n\n<blockquote>\n  <p>For each of the signed integer types, there is a corresponding (but\n  different) unsigned integer type (designated with the keyword <code>unsigned</code>\n  ) that uses the same amount of storage (including sign information)\n  and has the same alignment requirements.</p>\n</blockquote>\n\n<p>The phrase <em>designated with the keyword <code>unsigned</code></em> got me confused and I consulted with earlier versions of the Standard to understand if it was presented there. <a href=\"http://port70.net/~nsz/c/c89/c89-draft.html#3.1.2.5\" rel=\"nofollow noreferrer\">C89/3.2.1.5</a> provides exactly the same wording:</p>\n\n<blockquote>\n  <p>For each of the signed integer types, there is a corresponding (but\n  different) unsigned integer type (designated with the keyword\n  <code>unsigned</code>) that uses the same amount of storage (including sign\n  information) and has the same alignment requirements.</p>\n</blockquote>\n\n<p>Now consider <code>uintptr_t</code> and <code>intptr_t</code>; <code>uintmax_t</code> and <code>intmax_t</code>; etc... (which are optional, but in case an implementation defines those types).</p>\n\n<p><strong>QUESTION:</strong> According to the definition I cited above isn't <code>uintptr_t</code> a corresponding unsigned integer type for <code>intptr_t</code> and <code>uintmax_t</code> is a corresponding unsigned integer type for <code>intmax_t</code>?</p>\n\n<p>I'm concerned about it because Usual arithmetic conversion uses the term <code>6.3.1.8 p1</code>:</p>\n\n<blockquote>\n  <p>Otherwise, both operands are converted to the unsigned integer type\n  corresponding to the type of the operand with signed integer type</p>\n</blockquote>\n\n<p>So I'm trying to understand the semantic of the usual arithmetic conversion applied to, say, <code>uintptr_t</code> and <code>intptr_t</code>.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1577206571, "post_id": 59471587, "comment_id": 105121701, "body": "This declaration  int matrix[][] is invalid."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1577206587, "post_id": 59471587, "comment_id": 105121705, "body": "<code>int matrix[][]</code> isn&#39;t legal C. And when next posting a question about an error, include the full, verbatim error message in your question, <i>and</i> mark the line on which it occurs in your source list."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1577206587, "post_id": 59471587, "comment_id": 105121707, "body": "I see multiple declaration of <code>left()</code> here. Why this <code>int left();</code> ? Remove it, as you are declaring inside one function."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1577206844, "post_id": 59471587, "comment_id": 105121768, "body": "There are lots of problems here. Braces aren&#39;t balanced, you have a function defined inside another function."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1577214567, "last_edit_date": 1577214567, "creation_date": 1577214223, "answer_id": 59472610, "question_id": 59471587, "link": "https://stackoverflow.com/questions/59471587/subscripted-value-is-neither-array-nor-pointer-nor-vector-in-c-language/59472610#59472610", "title": "subscripted value is neither array nor pointer nor vector in C language", "body": "<p>Rather than</p>\n\n<pre><code>int left(int matrix[][], int sz);\n</code></pre>\n\n<p>Pass the size information first.  This uses a <em>variable length array</em>, available in C99, optional in C11, C17.</p>\n\n<pre><code>int left(int sz, int matrix[sz][sz])\n</code></pre>\n\n<p>Or better yet, pass both dimensions and use <code>size_t</code></p>\n\n<pre><code>int left(size_t rows, size_t cols, int matrix[rows][cols]);\n\nint play(size_t sz, int matrix[sz][sz], char play_user[1]) {\n  if (play_user[0] == 'a') {\n    return left(sz, sz, matrix);\n  }\n  return 0;\n}\n\nint left(size_t rows, size_t cols, int matrix[rows][cols]) {\n  for (size_t r = 0; r &lt; rows; ++r) {\n    for (size_t c = 0; c &lt; cols; ++c) {\n      printf(\"%d\\t\", matrix[r][c]);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>See also <a href=\"https://stackoverflow.com/q/14548753/2410359\">Passing a multidimensional variable length array to a function</a></p>\n"}], "owner": {"reputation": 13, "user_id": 12592124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa4043a2ad4811be630266d4345fe0f?s=128&d=identicon&r=PG&f=1", "display_name": "stuck", "link": "https://stackoverflow.com/users/12592124/stuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59472610, "answer_count": 1, "score": 0, "last_activity_date": 1577214567, "creation_date": 1577206421, "last_edit_date": 1577214331, "question_id": 59471587, "link": "https://stackoverflow.com/questions/59471587/subscripted-value-is-neither-array-nor-pointer-nor-vector-in-c-language", "title": "subscripted value is neither array nor pointer nor vector in C language", "body": "<p>I have an issue. I want to use the size defined by user in the matrix, but I have that error...</p>\n\n<p>Any idea?</p>\n\n<p>I'm using the C Language</p>\n\n<pre><code>int play(int matrix[][],int sz, char play_user[1]){\n    if (play_user[0] =='a'){\n        int left();\n        left(matrix[sz][sz],sz);\n    }\n\n\nint left(int matrix[][], int sz){\n    for(int i=0;i&lt;sz;++i){                    \n        for(int j=0;j&lt;sz;++j){\n            printf(\"%d\\t\", matrix[i][j]);\n        }\n        printf(\"\\n\");\n    }  \n</code></pre>\n"}, {"tags": ["c", "for-loop", "scanf"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1577205654, "post_id": 59471471, "comment_id": 105121454, "body": "It will read them in a different order. Which one is correct depends on what order the input is in."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577205827, "post_id": 59471471, "comment_id": 105121510, "body": "Try <code>printf(&quot;enter Alice&#39;s value #%d\\n&quot;, i); scanf(&quot;%d&quot;, &amp;alice[i]);</code> <code>printf(&quot;enter Bob&#39;s value #%d\\n&quot;, i); scanf(&quot;%d&quot;, &amp;bob[i]); </code>"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1577205816, "creation_date": 1577205816, "answer_id": 59471502, "question_id": 59471471, "link": "https://stackoverflow.com/questions/59471471/what-happen-when-multiple-scanfs-are-included-in-a-single-for-loop/59471502#59471502", "title": "What happen when multiple scanf()s are included in a single for loop", "body": "<p>The first version reads three values for <code>alice</code> and then three values for <code>bob</code>.  The second version reads one value for <code>alice</code>, then one for <code>bob</code>, and repeats that 3 times.</p>\n\n<p>If the entered numbers are 1, 2, 3, 4, 5, 6, then in the first example, <code>alice</code> gets 1, 2, 3 while <code>bob</code> gets 4, 5, 6; in the second example, <code>alice</code> gets 1, 3, 5 while <code>bob</code> gets 2, 4, 6.  Quite different results.</p>\n"}], "owner": {"reputation": 1, "user_id": 12591985, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD4zSc7fqoJ0LP_1YE7KIS3wFdFp-XPD4Y4scbb=k-s128", "display_name": "niranjana srinivasaragavan", "link": "https://stackoverflow.com/users/12591985/niranjana-srinivasaragavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1577205816, "creation_date": 1577205540, "question_id": 59471471, "link": "https://stackoverflow.com/questions/59471471/what-happen-when-multiple-scanfs-are-included-in-a-single-for-loop", "title": "What happen when multiple scanf()s are included in a single for loop", "body": "<p>I have written a code for comparing the triplet problem.The problem statement is\nInput: 2 arrays of size 3\nTask is to find their comparison points by comparing a[0] with b[0],a[1] with b[1], and a[2] with b[2].\nIf a[i]>b[i],then Alice is awarded point. If a[i] &lt; b[i] then Bob is awarded the point. If a[i]=b[i] then neither person receives the point. Comparison points is the total points the person earned.Given a and b determine their respective comparison points.\nThe code I wrote is </p>\n\n<pre><code> #include&lt;stdio.h&gt;\n void main(){   \n       int i, alice[3], bob[3];\n       int a = 0;\n       int b = 0;\n\n       for(i=0; i&lt;3; i++){\n                 scanf(\"%d\", &amp;alice[i]);\n       }\n       for(i=0; i&lt;3; i++){\n                 scanf(\"%d\", &amp;bob[i]); \n       }\n       for(i=0; i&lt;3; i++){ \n                if(alice[i] &gt; bob[i])  \n                       a++; \n                else if (alice[i] &lt; bob[i]) \n                        b++;\n       }   \n      printf(\"%d %d\", a, b);\n } \n</code></pre>\n\n<p>But when I put the two scanf()s in one line, </p>\n\n<pre><code>  for(i=0; i&lt;3; i++){    \n             scanf(\"%d\", &amp;alice[i]); \n             scanf(\"%d\", &amp;bob[i]); \n  }\n</code></pre>\n\n<p>The output is like 2 1 or 1 2 for all the inputs. Is it wrong to put two scanf()s in a single for loop?I couldn't understand what is the reason behind this problem? Would someone kindly explain the reason?</p>\n"}, {"tags": ["c++", "c", "file", "initialization", "character"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1577206757, "post_id": 59471459, "comment_id": 105121752, "body": "See Wikipedia on <a href=\"https://en.wikipedia.org/wiki/Shift_JIS\" rel=\"nofollow noreferrer\">Shift-JIS</a> for a discussion of a character set with shift states.  It basically means that a byte such as 0x40 has different meanings depending on the prior context (whether the data is in the shift state or not)."}], "answers": [{"tags": [], "owner": {"reputation": 952, "user_id": 12521158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e745b4953a3ecbe3a1f7147089a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "kopecs", "link": "https://stackoverflow.com/users/12521158/kopecs"}, "is_accepted": false, "score": 1, "last_activity_date": 1577206000, "creation_date": 1577206000, "answer_id": 59471535, "question_id": 59471459, "link": "https://stackoverflow.com/questions/59471459/what-is-the-initial-shift-state/59471535#59471535", "title": "What is the &quot;initial shift state&quot;?", "body": "<p>A shift state refers to a state which informs the interpretation of some byte sequence as characters, this is encoding dependent.</p>\n\n<p>From <a href=\"https://www.gnu.org/software/libc/manual/html_node/Shift-State.html\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/libc/manual/html_node/Shift-State.html</a></p>\n\n<blockquote>\n  <p>In some multibyte character codes, the meaning of any particular byte\n  sequence is not fixed; it depends on what other sequences have come\n  earlier in the same string. Typically there are just a few sequences\n  that can change the meaning of other sequences; these few are called\n  shift sequences and we say that they set the shift state for other\n  sequences that follow.</p>\n  \n  <p>To illustrate shift state and shift sequences, suppose we decide that\n  the sequence 0200 (just one byte) enters Japanese mode, in which pairs\n  of bytes in the range from 0240 to 0377 are single characters, while\n  0201 enters Latin-1 mode, in which single bytes in the range from 0240\n  to 0377 are characters, and interpreted according to the ISO Latin-1\n  character set. This is a multibyte code that has two alternative shift\n  states (\u201cJapanese mode\u201d and \u201cLatin-1 mode\u201d), and two shift sequences\n  that specify particular shift states.</p>\n</blockquote>\n\n<p>The initial shift state is just the shift state initially, i.e. at the start of processing; in the example above it would be whichever of ISO Latin-1 or Japanese the sequence in question begins in.</p>\n"}], "owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1577206364, "creation_date": 1577205449, "last_edit_date": 1577206364, "question_id": 59471459, "link": "https://stackoverflow.com/questions/59471459/what-is-the-initial-shift-state", "title": "What is the &quot;initial shift state&quot;?", "body": "<p>In the standard, the term of the \"initial shift state\" is often cited, also seemingly in various contexts, such as multibyte characters(strings) and files. But the standard missed an explanation of what this exactly shall be.</p>\n\n<p>What is that? And what is a \"shift\" here in general?</p>\n\n<p>Also:</p>\n\n<p>Because of the term for me seems to be used in different contexts( in the context of characters, in the context of strings and in the context of files), I will point to a few text phrases from the standard (especially ISO/IEC:9899/2018 (C18)) which include the term of \"initial shift state\": </p>\n\n<blockquote>\n  <p>\u00a7 5.2.1.2 - Multibyte characters</p>\n  \n  <p>\u2014 A multibyte character set may have a state-dependent encoding, wherein each sequence of multibyte characters begins in an <strong>initial shift state</strong> and enters other locale-specific shift states when specific multibyte characters are encountered in the sequence.</p>\n  \n  <p>\u2014 An identifier, comment, string literal, character constant, or header name shall begin and end in the <strong>initial shift state</strong>. </p>\n  \n  <hr>\n  \n  <p>\u00a7 7.21.3 - Files</p>\n  \n  <p>\"\u2014 A file need not begin nor end in the <strong>initial shift state</strong>.274)\"</p>\n  \n  <p>\"274)Setting the file position indicator to end-of-file, as with fseek(file, 0, SEEK_END), has undefined behavior for a binary stream (because of possible trailing null characters) or for any stream with state-dependent encoding that does not assuredly end in the <strong>initial shift state</strong>.\"</p>\n  \n  <hr>\n  \n  <p>\u00a77.21.6.2 - The fscanf function </p>\n  \n  <p>For the <code>s</code> conversion specifier:</p>\n  \n  <p>\"If an l length modifier is present, the input shall be a sequence of multibyte characters that begins in the <strong>initial shift state</strong>.\"</p>\n</blockquote>\n\n<ul>\n<li>What is meant by the \"inital shift state\"? What is that? </li>\n<li>What is a \"shift\" in context?</li>\n<li>Is it in the context of strings the double quotation mark <code>\"</code> which is the beginning and end of a format string?</li>\n</ul>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "output"], "comments": [{"owner": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 1, "creation_date": 1577205734, "post_id": 59471456, "comment_id": 105121473, "body": "I don&#39;t know if you notice btw, if you remove the 0 (\\101), you get the desired output"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 1, "creation_date": 1577205793, "post_id": 59471456, "comment_id": 105121495, "body": "@user3121023 Octal <i>escape</i> sequences. The octal literals don&#39;t have this restriction."}, {"owner": {"reputation": 260, "user_id": 8540212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpVoN.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/8540212/archer"}, "reply_to_user": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 0, "creation_date": 1577205804, "post_id": 59471456, "comment_id": 105121500, "body": "@AlexanderSantos Yeah it works, but then how do we specify that the input is octal ?"}, {"owner": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 1, "creation_date": 1577205841, "post_id": 59471456, "comment_id": 105121516, "body": "@Archer unsigned char c2 = 0101 works"}, {"owner": {"reputation": 260, "user_id": 8540212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpVoN.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/8540212/archer"}, "reply_to_user": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 0, "creation_date": 1577205910, "post_id": 59471456, "comment_id": 105121536, "body": "but unsigned char c2 = x41 doesn&#39;t work @AlexanderSantos"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1577205934, "post_id": 59471456, "comment_id": 105121541, "body": "Because the syntax is <code>0x41</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1577206046, "post_id": 59471456, "comment_id": 105121569, "body": "Note that in <code>&#39;\\xA74129&#39;</code>, there are three bytes worth of hex; unlike octal, there is no limit on the number of hex characters that make up a hex escape <code>\\xXXX</code>.  Nor is there a requirement that the number of characters  in a hex escape is even.  See C11 <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.4.4.4\" rel=\"nofollow noreferrer\">&#167;6.4.4.4 Character constants</a> where the one to three octal digits and unrestricted hex are both clearly specified."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1577206378, "post_id": 59471456, "comment_id": 105121653, "body": "Note that <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.4.4.4p11\" rel=\"nofollow noreferrer\">&#182;11</a> states: <i>The value of an integer character constant containing more than one character (e.g., &#39;ab&#39;), or containing a character or escape sequence that does not map to a single-byte execution character, is implementation-defined.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1577206196, "post_id": 59471503, "comment_id": 105121604, "body": "See <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.4.4.4\" rel=\"nofollow noreferrer\">&#167;6.4.4.4 Character constants</a> for the standard specification."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 8, "last_activity_date": 1577206402, "last_edit_date": 1577206402, "creation_date": 1577205821, "answer_id": 59471503, "question_id": 59471456, "link": "https://stackoverflow.com/questions/59471456/why-doesnt-the-octal-sequence-0101-equal-65-decimal/59471503#59471503", "title": "Why doesn&#39;t the octal sequence &#39;\\0101&#39; equal 65 decimal?", "body": "<p>The escape sequence for a character in octal format is a backslash followed by up to three digits, meaning the last digit is not part of the escape sequence.  This is specified in section 6.4.4.4p1 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> regarding \"Character constants\":</p>\n\n<blockquote>\n<pre><code>octal-escape-sequence:\n  \\ octal-digit\n  \\ octal-digit  octal-digit\n  \\ octal-digit  octal-digit  octal-digit\n</code></pre>\n</blockquote>\n\n<p>So <code>'\\0101'</code> is actually a multi-byte character constant: the first is <code>\\010</code> which is the value 8, and the second is the character <code>'1'</code>.</p>\n\n<p>A leading <code>0</code> is used to specify a <em>numeric</em> octal constant, not a <em>character</em> octal constant, so you don't need the leading 0 in this case:</p>\n\n<pre><code>unsigned char c2 = '\\101';\n</code></pre>\n\n<p>If you did want to use a numeric octal constant, you would do this:</p>\n\n<pre><code>unsigned char c2 = 0101;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": -1, "last_activity_date": 1577206191, "creation_date": 1577206191, "answer_id": 59471561, "question_id": 59471456, "link": "https://stackoverflow.com/questions/59471456/why-doesnt-the-octal-sequence-0101-equal-65-decimal/59471561#59471561", "title": "Why doesn&#39;t the octal sequence &#39;\\0101&#39; equal 65 decimal?", "body": "<p>This <code>'\\0101'</code> is a multibyte integer character constant. It has the type <code>int</code>. Its internal representation is implementation-defined. So internally it can be represented like</p>\n\n<pre><code>0x00000849\n</code></pre>\n\n<p>In this declaration </p>\n\n<pre><code>unsigned char c2 = '\\0101';\n</code></pre>\n\n<p>the constant was truncated to <code>0x49</code> (the least significant byte) and is assigned to the variable <code>c2</code>.</p>\n\n<p>So this value <code>0x49</code> is outputted as a character and as an integer in the <code>printf</code> call.</p>\n"}], "owner": {"reputation": 260, "user_id": 8540212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpVoN.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/8540212/archer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1577316466, "creation_date": 1577205436, "last_edit_date": 1577206058, "question_id": 59471456, "link": "https://stackoverflow.com/questions/59471456/why-doesnt-the-octal-sequence-0101-equal-65-decimal", "title": "Why doesn&#39;t the octal sequence &#39;\\0101&#39; equal 65 decimal?", "body": "<p>Consider this C program: </p>\n\n<pre><code>unsigned char c2 = '\\0101';\nprintf(\"%c, %d\\n\", c2, c2);\n</code></pre>\n\n<p>I believe that the output should be: <strong>A 65</strong> but the actual output is <strong>1 49</strong>.</p>\n\n<p>Reasoning: 0 as prefix in character constant declares it in octal format and octal value of 101 is 65. Then the ASCII value corresponding to 65 is A. Can someone tell me where I am going wrong? I tried the same code for hexadecimal as '\\x41' and it gave the desired output. </p>\n"}, {"tags": ["c", "linux", "linux-kernel", "system-calls", "kernel-module"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1577205112, "post_id": 59471172, "comment_id": 105121327, "body": "Most likely there is an error in your copy_from_user call."}, {"owner": {"reputation": 11, "user_id": 12182473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ulCd.png?s=128&g=1", "display_name": "chip32", "link": "https://stackoverflow.com/users/12182473/chip32"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577208264, "post_id": 59471172, "comment_id": 105122124, "body": "Thank you for the reply, my current implementation:  strncpy_from_user(buffer, path, strnlen_user(path, PATH_MAX+1)) seems to copy the memory correctly, but strings are of the nature: \\xab\\xe1\\xaa\\xff\\xff\\xff\\xff..."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1577208442, "post_id": 59471172, "comment_id": 105122171, "body": "Please edit enough of your code in the question to show the problem."}, {"owner": {"reputation": 11, "user_id": 12182473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ulCd.png?s=128&g=1", "display_name": "chip32", "link": "https://stackoverflow.com/users/12182473/chip32"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577208699, "post_id": 59471172, "comment_id": 105122238, "body": "my apologies, added code for the trampoline"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577210306, "post_id": 59471172, "comment_id": 105122620, "body": "Note that the 3rd param of <code>strncpy_from_user</code> must always be the size of the dest, not the source."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577210380, "post_id": 59471172, "comment_id": 105122643, "body": "Maybe check its return code."}, {"owner": {"reputation": 11, "user_id": 12182473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ulCd.png?s=128&g=1", "display_name": "chip32", "link": "https://stackoverflow.com/users/12182473/chip32"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577210815, "post_id": 59471172, "comment_id": 105122761, "body": "I am receiving  -EFAULT, which seems to be related to user space access. I had assumed that kernel modules always have access to user space memory"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577211487, "post_id": 59471172, "comment_id": 105122942, "body": "Please add the caller code.  Also, is caller 32 or 64-bit?"}, {"owner": {"reputation": 11, "user_id": 12182473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ulCd.png?s=128&g=1", "display_name": "chip32", "link": "https://stackoverflow.com/users/12182473/chip32"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1577212464, "post_id": 59471172, "comment_id": 105123190, "body": "Since the trampoline is running in a hooked context, the caller will be any userspace region that makes use of the access syscall. Thus the caller could potentially be both 32/64 bit. I also managed to find a stackoverflow post very similar to mine <a href=\"https://stackoverflow.com/questions/53131457/unreadable-content-of-pathname-parameter-in-mkdir-system-call-after-inline\" title=\"unreadable content of pathname parameter in mkdir system call after inline\">stackoverflow.com/questions/53131457/&hellip;</a> but with no conclusive answer."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1577216200, "post_id": 59471172, "comment_id": 105124125, "body": "Are you sure that you correctly grab the original syscall&#39;s arguments? See <a href=\"https://stackoverflow.com/questions/59346208/arguments-in-syscall-intercept-using-loadable-kernel-module-seem-to-be-broken\">that question</a> about proper way for grab syscall arguments in newer Linux kernels."}, {"owner": {"reputation": 11, "user_id": 12182473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ulCd.png?s=128&g=1", "display_name": "chip32", "link": "https://stackoverflow.com/users/12182473/chip32"}, "edited": false, "score": 0, "creation_date": 1577220109, "post_id": 59471172, "comment_id": 105124878, "body": "Thank you Tsyvarev, the information in that post seemed to solve my problem! I&#39;ll update my post to include the solution for others."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1577221326, "post_id": 59471172, "comment_id": 105125129, "body": "Just for future reference, there shouldn&#39;t be any <i>non</i>-human-readable version of pathnames anywhere - they are just plain ASCII null-terminated strings.  So if you&#39;re getting something that doesn&#39;t look like the pathname, you&#39;re almost certainly just looking at the wrong address."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12182473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ulCd.png?s=128&g=1", "display_name": "chip32", "link": "https://stackoverflow.com/users/12182473/chip32"}, "is_accepted": true, "score": 0, "last_activity_date": 1577221560, "last_edit_date": 1577221560, "creation_date": 1577220943, "answer_id": 59473343, "question_id": 59471172, "link": "https://stackoverflow.com/questions/59471172/linux-x86-64-syscall-hooking-path-names-garbled/59473343#59473343", "title": "Linux x86-64 syscall hooking, path names garbled", "body": "<p>As Tsyvarev alluded to, the manner in which syscall parameters are passed has changed for newer kernel versions (<strong>> 4.17</strong>) and requires that the intercepting trampoline have the following signature:</p>\n\n<pre><code>asmlinkage __type__ sys_foobar(const struct pt_regs * regs).\n</code></pre>\n\n<p>Individual parameters are then accessed via the respective registers, i.e (x86_64)</p>\n\n<pre><code>        arg1   arg2   arg3   arg4    arg5   arg6 \nregs-&gt;  (di)   (si)   (dx)   (r10)   (r8)   (r9)\n</code></pre>\n\n<p>So to get the path string for the access syscall, you would use <code>regs-&gt;di</code>.</p>\n\n<pre><code>asmlinkage int sys_access_trampoline(const struct pt_regs * regs)\n{\n    char buffer[STR_MAX];\n    strncpy_from_user(buffer, regs-&gt;di, strnlen_user(path, PATH_MAX+1));\n    printk(buffer);  \n    STUB_ORIGIN();\n    return sys_access(path, mode);\n}\n</code></pre>\n\n<p>I now receive the correct ASCII path name.</p>\n\n<p>Thank you to everyone for helping!</p>\n"}], "owner": {"reputation": 11, "user_id": 12182473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ulCd.png?s=128&g=1", "display_name": "chip32", "link": "https://stackoverflow.com/users/12182473/chip32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "closed_date": 1577378551, "accepted_answer_id": 59473343, "answer_count": 1, "score": 1, "last_activity_date": 1577221560, "creation_date": 1577203489, "last_edit_date": 1577208658, "question_id": 59471172, "link": "https://stackoverflow.com/questions/59471172/linux-x86-64-syscall-hooking-path-names-garbled", "closed_reason": "Duplicate", "title": "Linux x86-64 syscall hooking, path names garbled", "body": "<p>I've been experimenting with Linux syscall hooking on a x86_64 Linux system, following the standard procedure of patching the <code>sys_call_table</code> method table as found in <code>/proc/kallsyms</code>.</p>\n\n<p>However in my trampoline, specifically for syscalls that parse a file path such as openat, makedir I seem to be retrieving non human readable file paths as a result of <code>printk(path)</code>, where path is the exact formal parameter passed to the syscall that is intercepted.</p>\n\n<p><img src=\"https://i.stack.imgur.com/gD2BH.png\" alt=\"as seen here\"> </p>\n\n<p>Could someone explain why I am not able to intercept the human readable path name from a syscall? e.g. <code>/usr/home/file.txt</code>.</p>\n\n<p>Problem detour:</p>\n\n<pre><code>asmlinkage int sys_access_trampoline(const char __user *path, int mode)\n{\n    char buffer[STR_MAX];\n    strncpy_from_user(buffer, path, strnlen_user(path, PATH_MAX+1));\n    printk(buffer);  // prints \\xe1\\xaa\\xff\\xff\\ etc...\n    STUB_ORIGIN();\n    return sys_access(path, mode);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "c99", "restrict-qualifier"], "answers": [{"comments": [{"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1578895535, "post_id": 59690085, "comment_id": 105574068, "body": "Thanks for sharing your thought.  I think your example has undefined behavior because <code>int * restrict p1</code> and <code>int * restrict p2</code> means that they are not aliased to any integer.  Hence, it means p1, p2 and p can&#39;t be pointed to the same memory location.  No?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1578932364, "post_id": 59690085, "comment_id": 105591116, "body": "@HCSF: What is necessary is that within the lifetime of <code>p2</code>, the set of things accessed by it or pointers based upon it is disjoint from the set of things accessed via other ways.  If <code>p2</code> were within an inner block, there would be no problem.  I don&#39;t think there should have been any problem with having the Standard accommodate the above construct by saying that objects&#39; lifetime ends in the opposite order of declaration, and that active restrictions start when a <code>restrict</code>-qualified pointer first gets a value, but the &quot;formal&quot; definition of <code>restrict</code> is rather sloppy, and this..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1578932914, "post_id": 59690085, "comment_id": 105591430, "body": "...issue is minor compared to its other problems, such as the fact that the lvalue <code>p[1]</code> isn&#39;t always based upon <code>p</code>."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1578697543, "creation_date": 1578697543, "answer_id": 59690085, "question_id": 59470972, "link": "https://stackoverflow.com/questions/59470972/restriction-on-child-pointer-of-a-restricted-pointer/59690085#59690085", "title": "Restriction on child pointer of a restricted pointer?", "body": "<p>From what I can tell, the authors of the Standard started by deciding what optimizations they wanted <code>restrict</code> to facilitate, and then tried to write rules that would classify as Undefined Behavior all situations where those optimizations would be observable. \n Unfortunately, the rules as written end up being much more complicated than a description of the allowable optimizations would be, while simultaneously failing to handle corner cases in reasonable--or even meaningful fashion.  For example, the way the Standard defines \"based upon\", the expression <code>(p1 == p2) ? p3 : p4</code> would be \"based upon\" <code>p1</code> if <code>p1==p2</code> and <code>p3!=p4</code>, since replacing <code>p1</code> with a pointer to identical data would change the value of the expression.  Somewhat more bizarrely, the Standard may be interpreted (and clang and gcc interpret it this way!) as saying that the lvalue expression <code>p[1]</code> isn't always based upon <code>p</code>.</p>\n\n<p>If instead of looking at what programs are \"allowed\" to do, one were to describe the implementations of <code>restrict</code> in terms of sequencing, that would simplify things. Operations using lvalues which are at least potentially derived from a <code>restrict</code>-qualified pointer and occur within its lifetime are sequenced with regard to each other and the beginning and end of that lifetime, and operations in its lifetime that occur using lvalues which might not be derived from it are sequenced with regard to each other and with regard to the beginning and end of that lifetime, but operations in the two groups may be arbitrarily interleaved.  If two pointers are declared in the same block, the ends of their lifetimes are not sequenced, then a compiler given:</p>\n\n<pre><code>void test(int *p)\n{\n  int * restrict p1 = p;\n  *p1 = 1;\n  int * restrict p2 = p1;\n  *p2 = 2;\n}\n</code></pre>\n\n<p>could transform it into:</p>\n\n<pre><code>void test(int *p)\n{\n  // Start lifetime of p1\n  int p1_temp = *p; // Copy everything that will be accessed via p1\n  int * restrict p1 = &amp;p1_temp;\n\n  *p1 = 1;\n\n  // Start lifetime of p2\n  int p2_temp = *p1; // Copy everything that will be accessed via p2\n  int * restrict p2 = &amp;p2_temp;\n\n  *p2 = 2;\n\n  // End lifetime of p2\n  *p1 = p2_temp; // Copy data back to *p1\n\n  // End lifetime of p1\n  *p = p1_temp; // Copy data back to *p\n}\n</code></pre>\n\n<p>which would work, but because the ending of the lifetimes of p1 and p2 are not sequenced, the last two statements could be transposed, breaking the code.</p>\n\n<p>I think the intention of the Standard here is that the lifetime of a function's arguments extend past the lifetime of any other automatic objects, effectively behaving as though such objects are within a nested block.  Given that clang and gcc seem to try to exploit some of the nonsensical corner cases of the Standard's definition of \"restrict\", however, it would be dangerous to expect them to behave sensibly in cases where the Standard is even remotely ambiguous.</p>\n"}], "owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1578697543, "creation_date": 1577202224, "last_edit_date": 1577379778, "question_id": 59470972, "link": "https://stackoverflow.com/questions/59470972/restriction-on-child-pointer-of-a-restricted-pointer", "title": "Restriction on child pointer of a restricted pointer?", "body": "<p>The <a href=\"https://cellperformance.beyond3d.com/articles/2006/05/demystifying-the-restrict-keyword.html\" rel=\"nofollow noreferrer\">article</a> mentions:</p>\n\n<blockquote>\n  <p>Restricted pointers can be copied from one to another to create a hierarchy of pointers. However there is one limitation defined in the C99 standard. The child pointer must not be in the same block-level scope as the parent pointer. The result of copying restricted pointers in the same block-level scope is undefined.   </p>\n</blockquote>\n\n<p>And then it provides an example:</p>\n\n<pre><code>{\n  vector3* restrict position   = &amp;obj_a-&gt;position;\n  float*   restrict position_x = &amp;position-&gt;x; &lt;-- UNDEFINED\n  {\n    float* restrict position_y = &amp;position-&gt;y; &lt;-- VALID\n  }\n}\n</code></pre>\n\n<p>Tho, later on, it has another example:</p>\n\n<pre><code>void\nmove( vector3* restrict velocity, \n      vector3* restrict position, \n      vector3* restrict acceleration, \n      float             time_step,  \n      size_t            count, \n      size_t            stride )\n{\n  float* restrict acceleration_x = &amp;acceleration-&gt;x;\n  float* restrict velocity_x     = &amp;velocity-&gt;x;\n  float* restrict position_x     = &amp;position-&gt;x;\n</code></pre>\n\n<p>I thought now the restricted parent pointer <code>position</code> is in the same scope as its child pointer  <code>position_x</code>, no?  Isn't it not allowed according to the paragraph I quoted at the beginning of this post?</p>\n"}, {"tags": ["c", "memory-management", "struct", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 53, "user_id": 10466656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dK4Vl.jpg?s=128&g=1", "display_name": "Serghey Hmeli", "link": "https://stackoverflow.com/users/10466656/serghey-hmeli"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1577201971, "post_id": 59470813, "comment_id": 105120435, "body": "@chux-ReinstateMonica is it good enough now?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10466656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dK4Vl.jpg?s=128&g=1", "display_name": "Serghey Hmeli", "link": "https://stackoverflow.com/users/10466656/serghey-hmeli"}, "edited": false, "score": 0, "creation_date": 1577202505, "post_id": 59470855, "comment_id": 105120596, "body": "Thank you for casting advice. When I try to deallocate memory like that only the &quot;title&quot; field of first structure is deallocated, but the rest are still in memory and could be printed to the screen."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 53, "user_id": 10466656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dK4Vl.jpg?s=128&g=1", "display_name": "Serghey Hmeli", "link": "https://stackoverflow.com/users/10466656/serghey-hmeli"}, "edited": false, "score": 0, "creation_date": 1577203244, "post_id": 59470855, "comment_id": 105120843, "body": "@SergheyHmeli - you are confusing <code>free</code>ing the memory (telling the compiler it can reuse the memory) and whether values still exist at that location because they have not been overwritten yet. After you <code>free</code> memory, any attempt to access the values invokes <i>Undefined Behavior</i> -- you no longer own that memory. There is no guarantee what will be at those addresses. If there have been no further allocations, all the original values may still be there -- but you cannot make use of that memory anymore -- for that reason -- there is no guarantee what will be there."}], "tags": [], "owner": {"reputation": 1468, "user_id": 10332049, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b85YaqT-DmE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rmt7ZG1JNW3HMFwSmbw7iYxcGZTw/mo/photo.jpg?sz=128", "display_name": "Saucy Goat", "link": "https://stackoverflow.com/users/10332049/saucy-goat"}, "is_accepted": false, "score": 0, "last_activity_date": 1577201817, "last_edit_date": 1577201817, "creation_date": 1577201573, "answer_id": 59470855, "question_id": 59470813, "link": "https://stackoverflow.com/questions/59470813/how-to-deallocate-array-of-pointers-to-structures-in-c/59470855#59470855", "title": "How to deallocate array of pointers to structures in C?", "body": "<p>The code would look like this:</p>\n\n<pre><code>struct Book *booksList = NULL;\nallocList(&amp;booksList, booksAmount);\n\nvoid allocList(struct Book **myArray, int booksAmount) {\n    *myArray = malloc(sizeof(struct Book) * booksAmount);\n    printf(\"memory for %d books was allocated \\n\", booksAmount);\n}\n</code></pre>\n\n<p>Now to free the allocated memory. You allocated memory <em>once</em> for the array of books, thus you'll need exactly one <code>free</code>:</p>\n\n<pre><code>free(booksList);\n</code></pre>\n\n<p>Also, note that I removed the cast from <code>malloc</code>. <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\"><code>This post</code></a> has very good points on why you should not cast it.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 6722113, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH1DIr-5NkE/AAAAAAAAAAI/AAAAAAAAABw/pJM5nXfMfIs/photo.jpg?sz=128", "display_name": "Avinash Yadav", "link": "https://stackoverflow.com/users/6722113/avinash-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1577212014, "last_edit_date": 1577212014, "creation_date": 1577211700, "answer_id": 59472263, "question_id": 59470813, "link": "https://stackoverflow.com/questions/59470813/how-to-deallocate-array-of-pointers-to-structures-in-c/59472263#59472263", "title": "How to deallocate array of pointers to structures in C?", "body": "<p>Your approach to allocate memory is not correct. As you are using    structure for each book. You should allocate memory separately for each record.  Because you may not store all book record at once.  For Example: You have maximum no. of books as 100, but now you have information of 10 books. With your approach memory for 90 books will be wasted. </p>\n\n<pre><code>void allocList(struct Book **myArray, int booksAmount) {\n        int i;\n        for(i = 0;i &lt; booksAmount; i ++) {\n            *myArray = (struct Book*) malloc(sizeof(struct Book));\n        }\n}\n</code></pre>\n\n<p>Dellaocate memory:</p>\n\n<pre><code>for (i = 0; i &lt; booksAmount; i ++) { \n    free(myArray[i]); \n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10466656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dK4Vl.jpg?s=128&g=1", "display_name": "Serghey Hmeli", "link": "https://stackoverflow.com/users/10466656/serghey-hmeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1577220104, "creation_date": 1577201238, "last_edit_date": 1577220104, "question_id": 59470813, "link": "https://stackoverflow.com/questions/59470813/how-to-deallocate-array-of-pointers-to-structures-in-c", "title": "How to deallocate array of pointers to structures in C?", "body": "<p>I need to dynamically allocate array of structs and perform some operations on it, then deallocate the memory. When I try to deallocate memory like that</p>\n\n<pre><code>for (int i = 0; i &lt; booksAmount; i++) {\n    free(myArray[i])\n}\n</code></pre>\n\n<p>Here is the link to code</p>\n\n<p><a href=\"https://repl.it/@Xyrolle/Structures\" rel=\"nofollow noreferrer\">https://repl.it/@Xyrolle/Structures</a></p>\n\n<p>I need to make so printList function will not print books array after deallocation.</p>\n\n<p>Also, do you have any suggestions on how to manage memory more efficiently?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "arrays", "pointers", "char", "memcpy"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1577200908, "post_id": 59470742, "comment_id": 105120109, "body": "If <code>i</code> is <code>strlen(temp)</code> then you allocate one too little (for the terminating null) and you copy one too little (that terminating null)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12591754"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1577201221, "post_id": 59470742, "comment_id": 105120207, "body": "temp&#39;s size is 3000 but only i-1 fileds have values. the strlen comment return me 3000 and I dont want that.."}, {"owner": {"reputation": 284, "user_id": 12571460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCfdmLEtpNndCH3GzEC7Pps5wv1KvzZiwCtjEHs=k-s128", "display_name": "Lxer Lx", "link": "https://stackoverflow.com/users/12571460/lxer-lx"}, "edited": false, "score": 0, "creation_date": 1577201866, "post_id": 59470742, "comment_id": 105120407, "body": "If <code>temp</code> is a string, use <code>strcpy(result, temp)</code> instead of <code>memcpy</code> and make sure <code>i &gt; strlen(temp)</code>. Also, do not cast the pointer returned by <code>malloc</code> in C programs."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577202633, "post_id": 59470742, "comment_id": 105120631, "body": "<code>if (result == NULL) free(result);</code> FYI: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.3.3\" rel=\"nofollow noreferrer\"><code>free(NULL)</code> is a no-op</a>, maybe better: <code>if (result == NULL) { fprintf(stderr, &quot;malloc error\\n&quot;); exit(EXIT_FAILURE); }</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577204243, "post_id": 59470742, "comment_id": 105121130, "body": "<code>char* result = (char*)malloc(i*sizeof(char));</code> allocates 1-byte of memory. The only string you can store there is the <i>empty-string</i> (single <code>&#39;\\0&#39;</code> char -- not very useful)"}, {"owner": {"reputation": 284, "user_id": 12571460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCfdmLEtpNndCH3GzEC7Pps5wv1KvzZiwCtjEHs=k-s128", "display_name": "Lxer Lx", "link": "https://stackoverflow.com/users/12571460/lxer-lx"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577218766, "post_id": 59470742, "comment_id": 105124623, "body": "@DavidC.Rankin it allocates <code>i</code> bytes of memory (assuming it is successful)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12591754"}, "edited": false, "score": 0, "creation_date": 1577255514, "post_id": 59470807, "comment_id": 105129396, "body": "I tried this one at the begining and it didnt work, but now suddenly it works! thanks:)"}, {"owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "edited": false, "score": 0, "creation_date": 1577256060, "post_id": 59470807, "comment_id": 105129469, "body": "@Ran121 great !"}], "tags": [], "owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1577201190, "creation_date": 1577201190, "answer_id": 59470807, "question_id": 59470742, "link": "https://stackoverflow.com/questions/59470742/copy-char-array-to-char-in-c/59470807#59470807", "title": "copy char array to char* in C", "body": "<p>Instead of printing like this: <code>printf(\"%s\", result);</code></p>\n\n<p>you should be printing only indexes which are initialized and contains value:</p>\n\n<pre><code>for(int k=0;k&lt;i;k++){\n  printf(\"%c\", s[k]);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12591754"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577202622, "creation_date": 1577200778, "last_edit_date": 1577202622, "question_id": 59470742, "link": "https://stackoverflow.com/questions/59470742/copy-char-array-to-char-in-c", "title": "copy char array to char* in C", "body": "<p>I have a char array that I need to define in a function and return a char pointer, so i defined MAX which is the biggest size my char array can be according to my assigment and after I append part of it I want to copy it to char pointer so I can return it.\nthe size of the part of the array that is full is i and I did malloc to with this size, then I did memcpy to copy only the part I want(strcpy copied also the ampty fields), but it still put in my result more weird stuff, how do I get rid of this?</p>\n\n<p>Code:</p>\n\n<pre><code>char* result = (char*)malloc(i*sizeof(char));\n\nif (result == NULL)\n    free(result);\n\nmemcpy(result, temp, i);\n\nprintf(\"%s\", result);\nreturn result;\n</code></pre>\n\n<p>Result of printf:</p>\n\n<pre><code>ccbcc\u00b2\u00b2\u00b2\u00b2U\u2524\n</code></pre>\n\n<p>while the result should be only \"ccbcc\".</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 2, "creation_date": 1577201021, "post_id": 59470725, "comment_id": 105120147, "body": "Because your project/IDE is badly configured: no compiler."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1577201053, "post_id": 59470725, "comment_id": 105120153, "body": "Your code looks right (apart from treating <code>return</code> as a function) so the reason is in the parts that you don&#39;t show here. Guessing from the error, you haven&#39;t created an actual project that could be compiled."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1577201192, "post_id": 59470725, "comment_id": 105120201, "body": "@UlrichEckhardt: <code>return(0)</code> is valid in C."}, {"owner": {"reputation": 449, "user_id": 11465123, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dfwJVME0fwY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reCEL_wBOZuW5Xj2sJEhS1-o4N13A/mo/photo.jpg?sz=128", "display_name": "Benoit F", "link": "https://stackoverflow.com/users/11465123/benoit-f"}, "edited": false, "score": 0, "creation_date": 1577201202, "post_id": 59470725, "comment_id": 105120204, "body": "In codeblocks, you must first create a project, then select that project in the tree on the left, then you can make a new file, select &quot;console application&quot;, follow the menus, select &quot;C&quot; and the name of the program, you will then see it appear with a &quot;hello world&quot; template code, replace it with your current code, then run it"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1577201286, "post_id": 59470725, "comment_id": 105120233, "body": "The brackets are superfluous, @machine_1, which is what I&#39;m taking offence at. Of course, that doesn&#39;t make the code invalid in any way but it&#39;s a bad habit IMHO."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1577201479, "post_id": 59470725, "comment_id": 105120284, "body": "@UlrichEckhardt: For the record, those are &quot;<i>parenthesis</i>&quot;"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1577202569, "post_id": 59470725, "comment_id": 105120611, "body": "<code>ld.exe||cannot open output file G:\\document\\C++ and C\\Add and Input.exe Permission denied|</code>  Your program did compile, but you set up your IDE to write the compiled program to a bad location."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1577202738, "post_id": 59470725, "comment_id": 105120665, "body": "There <i>is</i> a problem with your code, but it&#39;s not a problem that makes it fail to compile.  <a href=\"https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf\"><code>scanf</code> should not be used to read input interactively</a>.  (I would go farther and say that none of the <code>scanf</code> functions should ever be used at all.)"}, {"owner": {"reputation": 141, "user_id": 11560211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7fc1a97d1da453c16cf7bcddef83c9f?s=128&d=identicon&r=PG&f=1", "display_name": "kile", "link": "https://stackoverflow.com/users/11560211/kile"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1577237267, "post_id": 59470725, "comment_id": 105127384, "body": "@zwol There are so many alternatives. what do you recommend for replacing <code>scanf</code>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577239707, "post_id": 59470725, "comment_id": 105127634, "body": "Don&#39;t use <code>+</code> in a directory name in Microsoft OS"}, {"owner": {"reputation": 141, "user_id": 11560211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7fc1a97d1da453c16cf7bcddef83c9f?s=128&d=identicon&r=PG&f=1", "display_name": "kile", "link": "https://stackoverflow.com/users/11560211/kile"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577239990, "post_id": 59470725, "comment_id": 105127658, "body": "@M.M, You mean this G:\\document\\C <code>++</code> and C\\Add?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577440816, "post_id": 59470725, "comment_id": 105170760, "body": "If you can create it in Explorer, it is probably a valid path, @M.M. At least that&#39;s what I would assume. It may well be that some programs are buggy, like that they can&#39;t handle paths with spaces. I&#39;m very confident the OS is capable of handling valid paths, speaking from XP being the last version I used."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1577443375, "post_id": 59470725, "comment_id": 105171677, "body": "@UlrichEckhardt can all 3rd party tools handle it though?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577444706, "post_id": 59470725, "comment_id": 105172177, "body": "I meant exactly that, @M.M: &quot;It may well be that some programs are buggy&quot; BTW: That also implies that if a change to the directory name causes the thing to suddenly compile without problems, then it&#39;s a bug in one of the used programs and deserves a bug ticket."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1577474186, "post_id": 59470725, "comment_id": 105182622, "body": "@kile The discussion I linked to gives several good suggestions for avoiding <code>scanf</code>."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 11560211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7fc1a97d1da453c16cf7bcddef83c9f?s=128&d=identicon&r=PG&f=1", "display_name": "kile", "link": "https://stackoverflow.com/users/11560211/kile"}, "edited": false, "score": 0, "creation_date": 1577238430, "post_id": 59471211, "comment_id": 105127515, "body": "I can&#39;t find there is a project. It&#39;s just a c file. I write this with &quot;Ctrl-Shift-New&quot;. Anyway, thank you for your answer."}], "tags": [], "owner": {"reputation": 354, "user_id": 8467526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b8314397bd54de94709d208447f42ed?s=128&d=identicon&r=PG&f=1", "display_name": "Saif Faidi", "link": "https://stackoverflow.com/users/8467526/saif-faidi"}, "is_accepted": false, "score": 0, "last_activity_date": 1577203749, "creation_date": 1577203749, "answer_id": 59471211, "question_id": 59470725, "link": "https://stackoverflow.com/questions/59470725/why-can-i-not-build-and-run-this-in-code-blocks/59471211#59471211", "title": "Why can I not build and run this in Code blocks?", "body": "<p>Follow these steps to configure your project with CodeBlocks (in my case the project name is \"containers\").</p>\n\n<p><strong>1 - right click on your project icon :</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/f6Na0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f6Na0.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>2 - select \"build options for debug or/and release:\"</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/dRlUN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dRlUN.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>3- select \"compiler settings\" and then check the box corresponding to your option :</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/4cyJg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4cyJg.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 141, "user_id": 11560211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7fc1a97d1da453c16cf7bcddef83c9f?s=128&d=identicon&r=PG&f=1", "display_name": "kile", "link": "https://stackoverflow.com/users/11560211/kile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577238478, "creation_date": 1577200699, "last_edit_date": 1577238478, "question_id": 59470725, "link": "https://stackoverflow.com/questions/59470725/why-can-i-not-build-and-run-this-in-code-blocks", "title": "Why can I not build and run this in Code blocks?", "body": "<p><a href=\"https://i.stack.imgur.com/SemNn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SemNn.png\" alt=\"enter image description here\"></a><strong>Here is my code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int a;\n    int b = 9;\n    printf(\"input a integer: \");\n    scanf(\"%d\",&amp;a);\n    printf(\"%d + %d = %d\\n\",a,b,a+b);\n    return(0);\n}\n</code></pre>\n\n<p><em>Build message:</em></p>\n\n<pre><code>||=== Build file: \"no target\" in \"no project\" (compiler: unknown) ===|\nld.exe||cannot open output file G:\\document\\C++ and C\\Add and Input.exe Permission denied|\n||error: ld returned 1 exit status|\n||=== Build failed: 2 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n\n<p>I think my code is right. But I can't get it right to run smoothly.</p>\n"}, {"tags": ["c", "arrays", "c-strings"], "comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1577200542, "post_id": 59470642, "comment_id": 105119975, "body": "It has to be <code>char *arr[] = {&quot;hello, &quot;world&quot;};</code> Then you may refer to the strings as <code>arr[0]</code> and <code>arr[1]</code>."}, {"owner": {"reputation": 29, "user_id": 12404333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAq9tOd0PNboKtx3RBAPinAwDssvZTN-qj0sYA8Iw=k-s128", "display_name": "Kfir Bilu", "link": "https://stackoverflow.com/users/12404333/kfir-bilu"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1577200879, "post_id": 59470642, "comment_id": 105120096, "body": "great, you helped me a lot! thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 1145, "user_id": 11783812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFwV3.jpg?s=128&g=1", "display_name": "cocool97", "link": "https://stackoverflow.com/users/11783812/cocool97"}, "is_accepted": false, "score": 1, "last_activity_date": 1577202020, "last_edit_date": 1577202020, "creation_date": 1577200759, "answer_id": 59470740, "question_id": 59470642, "link": "https://stackoverflow.com/questions/59470642/comparing-given-word-with-a-string-in-an-array/59470740#59470740", "title": "comparing given word with a string in an array", "body": "<p>You can't do that. Indeed, when you try compiling your code you receive this king of error <br/></p>\n\n<pre><code>test.c:2:22: error: excess elements in char array initializer\n    2 | char arr[]={\"hello\", \"world\"};\n      |                      ^~~~~~~\ntest.c:2:22: note: (near initialization for \u2018arr\u2019)\n</code></pre>\n\n<p>It means you have declared an array of 1 block, bit that you are trying to initialize it with more than 1 block (2 in that case). <br/>\nYou need to change your declaration by :</p>\n\n<pre><code>char *arr[] = {\"hello\", \"world\");\n</code></pre>\n\n<p>and everything should be fine ! </p>\n"}], "owner": {"reputation": 29, "user_id": 12404333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAq9tOd0PNboKtx3RBAPinAwDssvZTN-qj0sYA8Iw=k-s128", "display_name": "Kfir Bilu", "link": "https://stackoverflow.com/users/12404333/kfir-bilu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577202020, "creation_date": 1577200259, "last_edit_date": 1577200584, "question_id": 59470642, "link": "https://stackoverflow.com/questions/59470642/comparing-given-word-with-a-string-in-an-array", "title": "comparing given word with a string in an array", "body": "<p>I'm trying to find a way to compare a given word to an array of strings and eventually insert the \"biggest\" word (according to ASCII table) into a new array.</p>\n\n<p>My question is; can I refer to a string inside the array as a regular location?\nfor example</p>\n\n<pre><code>char arr[]={\"hello\", \"world\"};\n</code></pre>\n\n<p>can I refer to \"hello\" as <code>arr[0]</code> and \"world\" as <code>arr[1]</code>?</p>\n"}, {"tags": ["c", "cryptography"], "comments": [{"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 2, "creation_date": 1577200194, "post_id": 59470591, "comment_id": 105119872, "body": "The value of a 32-bit integer will <b>always</b> be less than 10000000000 (ten billion)"}, {"owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "edited": false, "score": 1, "creation_date": 1577200472, "post_id": 59470591, "comment_id": 105119952, "body": "Also, <code>printf</code> requires <code>%lld</code> to print a <code>long long</code>."}, {"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 0, "creation_date": 1577200655, "post_id": 59470591, "comment_id": 105120021, "body": "Sorry, I misread."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1577201744, "post_id": 59470591, "comment_id": 105120366, "body": "Note: <code>b * gen</code> can readily overflow.  I think <code>b = (b * gen)%a;</code> would be useful"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1577201977, "post_id": 59470591, "comment_id": 105120438, "body": "Confusing that code uses <code>a,b,c,i</code> when the goal is expressed in <code>X, Y, Z</code>."}, {"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1577219855, "post_id": 59470591, "comment_id": 105124830, "body": "If you are starting to Cryptography with C, you should start using gnu gmp"}], "answers": [{"comments": [{"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 1, "creation_date": 1577220928, "post_id": 59470902, "comment_id": 105125037, "body": "add a statement before if - <code>b = b % a</code> and use <code>b == c</code>"}], "tags": [], "owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "is_accepted": false, "score": 0, "last_activity_date": 1577201849, "creation_date": 1577201849, "answer_id": 59470902, "question_id": 59470591, "link": "https://stackoverflow.com/questions/59470591/el-gamal-exponent-finding-algorithm/59470902#59470902", "title": "El Gamal exponent finding algorithm", "body": "<p>Several issues:</p>\n\n<p>1) The comparison with 10000000000 will always be true because the maximum value of a 32-bit signed integer is a bit over 4 billion, so it's always going to be less than 10 billion. Using <code>long long i</code> will make it a 64-bit integer on many platforms.</p>\n\n<p>2) Printing the result requires <code>%lld</code> so <code>printf()</code> knows to find a <code>long long</code> value</p>\n\n<p>3) The 64-bit value <code>long long b</code> will overflow after 14 trips around the loop, so the other 10 billion loops are working with wrapped-around integers.  Unless the El Gamal algorithm is designed around modulo arithmetic - I don't know one way or another - I don't see how this is ever going to work.</p>\n\n<p>In the code below, I've added a check for when <code>b</code> went negative, which would indicate overflow; I don't know if this is the best way to do this in practice.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int a = 607;\n\n    int gen = 28;\n    long long b = 28;\n\n    int c = 597;\n    long long i = 1;      // formerly int\n    while (b &gt; 0  &amp;&amp;  i &lt; 10000000000)\n    {\n        b *= gen;\n        if ((b % a) == c)\n        {\n            printf(\"%lld\\n\", b);       // Formerly %ld\n            return i;\n        }\n        i++;\n    }\n    printf(\"Fell off bottom: i=%lld\\n\", i);\n\n    return 0;\n}\n</code></pre>\n\n<p>And then running it on my system:</p>\n\n<blockquote>\n  <p>Fell off bottom: i = 14</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "is_accepted": false, "score": 1, "last_activity_date": 1577233511, "last_edit_date": 1577233511, "creation_date": 1577232620, "answer_id": 59474293, "question_id": 59470591, "link": "https://stackoverflow.com/questions/59470591/el-gamal-exponent-finding-algorithm/59474293#59474293", "title": "El Gamal exponent finding algorithm", "body": "<p>It's unfortunate your description and your code share no variable names in common. You made small mistakes and one big one: you did not take the intermediate result mod a. Here is my code with the few modifications:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main(int argc, char** argv) {\n    int a = 607;\n\n    int gen = 28;\n    int b = 1;\n\n    int c = 597;\n    int i = 1;\n    while (i &lt; a)\n    {\n        b = (b * gen) % a;\n        // invariant: b == (gen**i) % a\n        if (b == c)\n        {\n            printf(\"%d\\n\", i);\n            return i;\n        }\n        i++;\n    }\n}\n</code></pre>\n\n<p>You will need to be more careful when doing arithmetic; it is surprisingly brittle to the new programmer. Overflow lurks around every corner, and for floating types underflow is also a predator. Never trust a+b, a-b, a/b, or a*b to always produce what mathematics says it should.</p>\n"}], "owner": {"reputation": 85, "user_id": 12355197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4ac4f12f43b5f32aa0a9d8b3f74491?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Tusk", "link": "https://stackoverflow.com/users/12355197/mister-tusk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577233511, "creation_date": 1577199952, "question_id": 59470591, "link": "https://stackoverflow.com/questions/59470591/el-gamal-exponent-finding-algorithm", "title": "El Gamal exponent finding algorithm", "body": "<p>I am trying to find the exponent of a number Z whose modulo X will give Y.\nThis is my code:</p>\n\n<pre><code>int main()\n{\n\n    int a = 607;\n\n    int gen = 28;\n    long long b = 28;\n\n    int c = 597;\n    int i = 1;\n    while (i &lt; 10000000000)\n    {\n        b = b * gen;\n        if ((b % a) == c)\n        {\n            printf(\"%ld\\n\", b);\n            return i;\n        }\n        i++;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>This code implements the El Gamal algorithm of calculating the exponent. \nThe program should return 153, but instead, it goes over and iterates until the end. Can anyone shed some light on this for me, please?</p>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 2, "creation_date": 1577199558, "post_id": 59470509, "comment_id": 105119651, "body": "Sure thing they can be added and subtracted."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1577199585, "post_id": 59470509, "comment_id": 105119662, "body": "Google for ASCII."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1577199646, "post_id": 59470509, "comment_id": 105119683, "body": "Just an interesting fact: <code>&#39;a&#39;</code>  has a type of <code>int</code>."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 2, "creation_date": 1577199654, "post_id": 59470509, "comment_id": 105119685, "body": "ASCII isn&#39;t really relevant. The code here has the same behavior regardless of character encoding as long as arithmetic on <code>char</code> values can&#39;t overflow <code>int</code>."}, {"owner": {"reputation": 284, "user_id": 12571460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCfdmLEtpNndCH3GzEC7Pps5wv1KvzZiwCtjEHs=k-s128", "display_name": "Lxer Lx", "link": "https://stackoverflow.com/users/12571460/lxer-lx"}, "edited": false, "score": 0, "creation_date": 1577201063, "post_id": 59470509, "comment_id": 105120157, "body": "Yes. <code>char</code> is an integer type and all operators that can be applied to integer types  can be applied to <code>char</code> operands as well."}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 2, "last_activity_date": 1577199617, "creation_date": 1577199617, "answer_id": 59470535, "question_id": 59470509, "link": "https://stackoverflow.com/questions/59470509/can-two-characters-be-added-or-subtracted/59470535#59470535", "title": "Can two characters be added or subtracted?", "body": "<p>They can be added and subtracted because they're integers. Assuming no overflow (which doesn't happen here) the commutative law applies and, <code>Ch+'a'-'A'</code> is <code>Ch-'A'+'a'</code>, and thus <code>0+'a'</code> or just <code>'a'</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user379888"}, "is_accepted": false, "score": 0, "last_activity_date": 1577200345, "creation_date": 1577200345, "answer_id": 59470662, "question_id": 59470509, "link": "https://stackoverflow.com/questions/59470509/can-two-characters-be-added-or-subtracted/59470662#59470662", "title": "Can two characters be added or subtracted?", "body": "<p>You can do that by knowing ASCII code of each. Math operations happen on the ASCII values.</p>\n"}, {"tags": [], "owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1577200629, "creation_date": 1577200629, "answer_id": 59470713, "question_id": 59470509, "link": "https://stackoverflow.com/questions/59470509/can-two-characters-be-added-or-subtracted/59470713#59470713", "title": "Can two characters be added or subtracted?", "body": "<p>Yes they can be added and subtracted. For example considering capital alphabets A-Z their ASCII values ranges from <strong>65(A)</strong> to <strong>90(Z)</strong>. So if you write: <code>printf(\"%c\",'A'+ 2)</code> it will give you result as <code>C</code> what happens is it adds <strong>2</strong> to the ASCII value of <code>A</code> i.e. <strong>65</strong> so it becomes <strong>67</strong> which is the ASCII value of <code>C</code> so the result produced is <code>C</code>.</p>\n\n<p>Now coming to your case <code>printf(\"%c\",Ch+'a'-'A');</code>. Here ASCII values of <code>A</code> is <strong>65</strong> and <code>a</code> is <strong>97</strong>. So what your above statement becomes is <strong>(65+97-65) = (97)</strong> and since you have written <code>\"%c\"</code> it will print character value of <strong>97</strong> i.e. <code>a</code> </p>\n"}, {"comments": [{"owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1577201681, "post_id": 59470777, "comment_id": 105120350, "body": "You did not mention the ASCII table to relate the character to their respective integer values. Was that intentional? Are there other platforms (even if theoretically) where &#39;A&#39; -for example- would have a different value than 65?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 3, "creation_date": 1577201835, "post_id": 59470777, "comment_id": 105120391, "body": "@AdamZahran For example IBM mainframes use the EBCDIC coding table."}, {"owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1577202109, "post_id": 59470777, "comment_id": 105120485, "body": "Wow, never heard of that. Thanks!"}, {"owner": {"reputation": 284, "user_id": 12571460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCfdmLEtpNndCH3GzEC7Pps5wv1KvzZiwCtjEHs=k-s128", "display_name": "Lxer Lx", "link": "https://stackoverflow.com/users/12571460/lxer-lx"}, "reply_to_user": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1577203413, "post_id": 59470777, "comment_id": 105120896, "body": "@AdamZahran The C standard does not even guarantee that the letter characters <code>&#39;a&#39;</code> .. <code>&#39;z&#39;</code> (or uppercase letters) have contiguous codes. Only the decimal digits (<code>&#39;0&#39;</code> .. <code>&#39;9&#39;</code>) are guaranteed to have contiguous codes by the Standard."}, {"owner": {"reputation": 79, "user_id": 12582632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246d9a1483dbe98d9aad5a33ccacec16?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit", "link": "https://stackoverflow.com/users/12582632/sumit"}, "edited": false, "score": 0, "creation_date": 1577268341, "post_id": 59470777, "comment_id": 105131836, "body": "@Vlad from Moscow  Thank you for the great explanation!"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1577201776, "last_edit_date": 1577201776, "creation_date": 1577201001, "answer_id": 59470777, "question_id": 59470509, "link": "https://stackoverflow.com/questions/59470509/can-two-characters-be-added-or-subtracted/59470777#59470777", "title": "Can two characters be added or subtracted?", "body": "<p>From the C Standard (6.2.5 Types)</p>\n\n<blockquote>\n  <p>17 <strong>The type char</strong>, the signed and unsigned integer types, and the\n  enumerated types <strong>are collectively called integer types</strong>. The\n  integer and real \ufb02oating types are collectively called real types.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>18 <strong>Integer and \ufb02oating types are collectively called arithmetic\n  types</strong>. Each arithmetic type belongs to one type domain: the real\n  type domain comprises the real types, the complex type domain\n  comprises the complex types.</p>\n</blockquote>\n\n<p>and (6.5.6 Additive operators)</p>\n\n<blockquote>\n  <p>2 <strong>For addition, either both operands shall have arithmetic type</strong>,\n  or one operand shall be a pointer to a complete object type and the\n  other shall have integer type. (Incrementing is equivalent to adding\n  1.)</p>\n</blockquote>\n\n<p>So in this expression </p>\n\n<pre><code>Ch+'a'-'A'\n</code></pre>\n\n<p>all operands have arithmetic types. The object Ch has the type <code>char</code>  that in this expression is converted implicitly to the type <code>int</code> due to the integer promotions. The character integer constants <code>'a'</code> and <code>'A'</code> have the type <code>int</code>.</p>\n\n<p>So the expression is evaluated using internal representations of the character constants and of the object <code>Ch</code> converted to the type int. Then the result of the expression is outputted as a character object using the gotten value as an internal representation of an object of the type <code>char</code></p>\n\n<p>To make it more clear consider the following demonstration program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    char Ch = 'A';\n\n    printf( \"%c = %d, \"\n            \"%c = %d, \"\n            \"%c + %c - %c = %d  + %d - %d =&gt; \"\n            \"%d = %c\\n\",\n            Ch, Ch, \n            'a', 'a', \n            Ch, 'a', 'A', Ch,  'a', 'A', \n            Ch + 'a' - 'A', Ch + 'a' - 'A' );\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>A = 65, a = 97, A + a - A = 65  + 97 - 65 =&gt; 97 = a\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 12582632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246d9a1483dbe98d9aad5a33ccacec16?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit", "link": "https://stackoverflow.com/users/12582632/sumit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1577201776, "creation_date": 1577199457, "question_id": 59470509, "link": "https://stackoverflow.com/questions/59470509/can-two-characters-be-added-or-subtracted", "title": "Can two characters be added or subtracted?", "body": "<p>I came across this snippet of code which outputs the following. I need to know that can two characters be added or subtracted from each other and how?</p>\n\n<pre><code>char Ch = 'A'; \n printf(\"%c\",Ch+'a'-'A'); \n\n</code></pre>\n\n<p><code>Output : a</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1577199082, "post_id": 59470430, "comment_id": 105119522, "body": "If you are intending to do anything with <code>correctpass</code>, it is likely to fail, as it is not null-terminated. And please, switch to something from this millennium, as you seem to use TurboC or something...."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1577199362, "post_id": 59470430, "comment_id": 105119591, "body": "You write: <code>printf(&quot;\\b&quot;);                 printf(&quot; &quot;);                 printf(&quot;\\b&quot;);</code> \u2014 you could write <code>printf(&quot;\\b \\b&quot;);</code> and might benefit from <code>fflush(stdout)</code> after it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1577199447, "post_id": 59470430, "comment_id": 105119618, "body": "Don&#39;t do the backing up if <code>f == 0</code>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1577199465, "post_id": 59470430, "comment_id": 105119622, "body": "You initialise <code>correctpass[10]</code> with an 11 byte initialiser. Did your compiler never not warn of that error?!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1577199701, "post_id": 59470430, "comment_id": 105119709, "body": "@Clifford: In C, it isn&#39;t an error \u2014 but it is very ill-advised. C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p14\" rel=\"nofollow noreferrer\">&#167;6.7.9 Initialization &#182;14</a>: <i>An array of character type may be initialized by a character string literal or UTF-8 string literal, optionally enclosed in braces. Successive bytes of the string literal (including the terminating null character if there is room or if the array is of unknown size) initialize the elements of the array.</i> . When there isn&#39;t room for the terminating null character, what is created is not a string but just a byte array (which is why it is a bad idea)."}, {"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 0, "creation_date": 1577199970, "post_id": 59470430, "comment_id": 105119794, "body": "You should also perform a check on <code>password</code> maximum length otherwise... well <i>funny</i> things will happen."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1577201244, "post_id": 59470430, "comment_id": 105120216, "body": "@JonathanLeffler : You think he&#39;s using C11?!  It is nonetheless a <i>semantic error</i> (i.e. was not done intentionally and does not do what the programmer intended).  I am using &quot;error&quot; in a broader - more useful -  sense than merely the language definition - not all code that compiles with defined behaviour is error free."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1577201578, "post_id": 59470430, "comment_id": 105120319, "body": "@Clifford \u2014 The verbiage I quote is from C11; the requirements are the same in pre-standard C, C89, C90, C94, C99, C11, C18.  It&#39;s part of C.  It is a bad idea; the compiler can warn about it.  Under normal circumstances, it can&#39;t refuse to compile it as it is standard-conformant C code.  I 100% agree that the array definition should be fixed (lose the explicit array size is simplest).  But there are reasons why a compiler in default mode may not warn about that problem \u2014 especially older compilers."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1577202937, "post_id": 59470430, "comment_id": 105120724, "body": "I know.  I am not arguing the language definition, rather what constitutes an <i>error</i>.  You have taken an unhelpfully narrow &quot;language lawyer&quot; view of &quot;error&quot;.  The lack of null termination that results is a semantic error (probably - since the variable is not subsequently used in this fragment, I&#39;ll concede that it may not be - but seems unlikely)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577265562, "post_id": 59470430, "comment_id": 105131260, "body": "Similar question (for Linux) with answer <a href=\"https://stackoverflow.com/questions/6856635/hide-password-input-on-terminal/32421674?r=SearchResults&amp;s=1|47.8984#32421674\">Hide password input on terminal</a> but the backspace and conditional logic to prevent backing up before the beginning of the string is the same"}], "answers": [{"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1577264783, "last_edit_date": 1577264783, "creation_date": 1577202653, "answer_id": 59471042, "question_id": 59470430, "link": "https://stackoverflow.com/questions/59470430/how-to-manage-password-bug-in-my-program-in-c/59471042#59471042", "title": "how to manage password bug in my program in C?", "body": "<p>Simply don't backspace past the beginning the <code>password</code> array.  i.e. do not decrement <code>f</code> is <code>f</code> is already zero.  </p>\n\n<p>Equally, you should add a check to prevent incrementing <code>f</code> past the end of the <code>password</code> array less one character of the terminating NUL.</p>\n\n<p>To support input redirection and prevent getting stuck in an endless loop, it is useful to also check for end-of-file.</p>\n\n<pre><code>    char password[25] ;\n    int f = 0 ;\n    int ch = 0 ;\n\n    printf(\"Enter the password : \");\n    for(;;)\n    {\n        ch  = getch();\n        if( ch == EOF || ch == '\\n' )\n        {\n            password[f] = '\\0' ;\n            break ; \n        }\n        else if( ch == '\\b' )\n        {\n            if( f &gt; 0 )\n            {\n                printf(\"\\b \\b\");\n                f--;\n            }\n        }\n        else if( f &lt; sizeof(password) - 1 )\n        {\n            password[f] = ch ;\n            printf( \"*\" ) ;\n            f++;\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12547089, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAkfHdsQyZOJiWff0SL15hOltHdsgZKiITpnvvo=k-s128", "display_name": "Saumya Bhandari", "link": "https://stackoverflow.com/users/12547089/saumya-bhandari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577264783, "creation_date": 1577199012, "last_edit_date": 1577231893, "question_id": 59470430, "link": "https://stackoverflow.com/questions/59470430/how-to-manage-password-bug-in-my-program-in-c", "title": "how to manage password bug in my program in C?", "body": "<p>So what happens is, when I enter a backspace in this program, that a letter gets erased back. But if I keep pressing backspace for a longer time, -1 starts to get printed...</p>\n\n<p>What is the reason for this and how can I fix this?  </p>\n\n<pre><code>system(\"cls\");\n\nchar password[25], temp;\nchar correctpass[10]=\"basket@123\";\nint f=0; \n\nlabel:\ndrawBorder(5,3,100,24);\ngotoxy(40,12);\nprintf(\"Enter the password : \");\n\nwhile (1) {\n    temp = getch();\n    if (temp == 13)\n        break;\n    else if(f&lt;0){\n        printf(\"%d\",f);     \n    }\n    else if (temp == 8){\n        printf(\"\\b\");\n        printf(\" \");\n        printf(\"\\b\");\n        f--;  \n    }\n    else{\n        password[f] = temp;\n        printf(\"*\");\n        f++;\n    }\n}\npassword[f] = '\\0';\n</code></pre>\n"}, {"tags": ["c", "arrays", "malloc", "realloc"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 7, "creation_date": 1577195880, "post_id": 59469847, "comment_id": 105118560, "body": "<code>if (i = limit)</code> ==&gt; <code>if (i == limit)</code> ... Oh! <b>and turn on the warnings</b> and <b>MIND THE WARNINGS!</b>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 2, "creation_date": 1577196074, "post_id": 59469847, "comment_id": 105118625, "body": "The return value from <code>scanf_s</code> is an integer count, so is not going to be equal to the character values <code>&#39;1&#39;</code> or <code>&#39;0&#39;</code>.  You need to use <code>ans</code> to get the value entered by the user."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1577196752, "post_id": 59469847, "comment_id": 105118818, "body": "Note that <code>realloc()</code> can fail, which it indicates by returning a null pointer.  It is unlikely that your program will run into that in practice with moderate numbers of entries, but well-engineered code checks for such errors and handles the situation appropriately when it occurs."}, {"owner": {"reputation": 1000, "user_id": 1971401, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/df7643e9c292928550d0bc5130917d90?s=128&d=identicon&r=PG", "display_name": "mschuurmans", "link": "https://stackoverflow.com/users/1971401/mschuurmans"}, "edited": false, "score": 1, "creation_date": 1577197305, "post_id": 59469847, "comment_id": 105119004, "body": "If you use <code>gcc</code> you can compile with <code>-Wall -Werror</code> to enable warning."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1577198342, "post_id": 59469847, "comment_id": 105119308, "body": "<code>if (scanf_s(&quot;%d&quot;, &amp;ans) == &#39;1&#39;)..else if (scanf_s(&quot;%d&quot;, &amp;ans) == &#39;0&#39;)...</code> You only need to <code>scanf</code> once and only check <code>ans</code> in the else-part."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1577198522, "post_id": 59469847, "comment_id": 105119351, "body": "Note that <code>ptr = (int*)realloc(ptr, limit * sizeof(int));</code> leaks memory if the reallocation fails.  Always use <code>void *new_ptr = realloc(old_ptr, new_size); if (new_ptr == NULL) { \u2026deal with failed reallocation\u2026 } old_ptr = new_ptr; old_size = new_size;</code> or equivalent (you might record a number of items rather than the byte size; that&#39;s fine)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1577259397, "post_id": 59469847, "comment_id": 105130057, "body": "OT: regarding: <code>ptr = (int*)malloc(limit * sizeof(int));</code> and similar statements:  1) in C, the returned type is <code>void*</code> which can be assigned to any pointer.  casting just clutters the code, suggest removing that cast.  2) when calling any of the heap allocation functions: <code>malloc()</code>, <code>calloc()</code>, <code>realloc()</code>, always check (!=NULL) the returned value.  If not successful, then call <code>perror( &quot;malloc failed&quot; );</code> then cleanup, then call <code>exit( EXIT_FAILURE );</code>  Note: <code>exit()</code> and EXIT_FAILURE are exposed via the statement: <code>#include &lt;stdlib.h&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": true, "score": 2, "last_activity_date": 1577197778, "last_edit_date": 1577197778, "creation_date": 1577196787, "answer_id": 59470044, "question_id": 59469847, "link": "https://stackoverflow.com/questions/59469847/reallocating-the-size-of-the-array-by-exceeding-the-limit-of-it/59470044#59470044", "title": "Reallocating the size of the array by exceeding the limit of it", "body": "<p>The <code>if</code> statement in your code:</p>\n\n<pre><code>if (i = limit)\n</code></pre>\n\n<p>does not compare <code>i</code> to <code>limit</code>. Instead, it assigns the value of <code>limit</code> to <code>i</code> then it checks if the result of this expression is non-zero. If it is, the block is entered, otherwise it will be skipped.</p>\n\n<p><code>=</code> is the assignment operator. Use the equality operator <code>==</code> to compare two operands.</p>\n\n<pre><code>if (i == limit)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6495237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97e5418c197a69db1daf9b135a149842?s=128&d=identicon&r=PG&f=1", "display_name": "  Bogdan Khamelyuk", "link": "https://stackoverflow.com/users/6495237/bogdan-khamelyuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59470044, "answer_count": 1, "score": 1, "last_activity_date": 1577309681, "creation_date": 1577195717, "last_edit_date": 1577309681, "question_id": 59469847, "link": "https://stackoverflow.com/questions/59469847/reallocating-the-size-of-the-array-by-exceeding-the-limit-of-it", "title": "Reallocating the size of the array by exceeding the limit of it", "body": "<p>I cannot solve the issue. The program has to increase the size of array by the desire of the user. However, it skips the conditions and starts showing the array itself. </p>\n\n<pre><code>int main() {\n    int *ptr;\n    int limit;\n    int sum = 0;\n    int ans;\n\n    printf(\"enter the limit of the array\\n\");\n    scanf_s(\"%d\", &amp;limit);\n    ptr = (int *)malloc(limit * sizeof(int));\n    for (int i = 0; i &lt; limit; i++) {\n        printf(\"enter element %d : \", i + 1);\n        scanf_s(\"%d\", (ptr + i));\n        if (i = limit) {\n            printf(\"do you want to stop entering?\\n\");\n            printf(\"\\t\\t1\\t0\\n\");\n            if (scanf_s(\"%d\", &amp;ans) == '1') {\n                break;\n            } else\n            if (scanf_s(\"%d\", &amp;ans) == '0') {\n                limit += 5;\n                ptr = (int *)realloc(ptr, limit * sizeof(int));\n                printf(\"memory re-allocation is completed succesfully!\\n\");\n            }\n        }\n    }\n    for (int i = 0; i &lt; limit; i++) {\n        printf(\"\\nthis is your %d. element : %d\\n\", i + 1, *(ptr + i));\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "openmp", "openmpi", "gmp"], "comments": [{"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1577196093, "post_id": 59469718, "comment_id": 105118631, "body": "Just a guess: the memory bandwidth shared across the threads..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1577196101, "post_id": 59469718, "comment_id": 105118635, "body": "You need data points for several more iteration counts before it it makes sense to try to interpret them, and it would be best to measure each point multiple times to get an average time."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1577201123, "post_id": 59469718, "comment_id": 105120177, "body": "That&#39;s not that big an overhead. Did you try doing just allocations and deallocations in your loop (no GMP)?"}, {"owner": {"reputation": 95, "user_id": 11020966, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A7g59A28Ddw/AAAAAAAAAAI/AAAAAAAAADQ/m6XAwFOkR5U/photo.jpg?sz=128", "display_name": "Pritam Pallab", "link": "https://stackoverflow.com/users/11020966/pritam-pallab"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1577272272, "post_id": 59469718, "comment_id": 105132696, "body": "@JohnBollinger Actually, the time I have mentioned are average of multiple attempts and the difference is constant. Basically, when the job size is quite large, say for example time is in the scale of months then there are significant difference (several days or months) between two of such scenarios. This small test is performed after facing such difference in larger scale."}, {"owner": {"reputation": 95, "user_id": 11020966, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A7g59A28Ddw/AAAAAAAAAAI/AAAAAAAAADQ/m6XAwFOkR5U/photo.jpg?sz=128", "display_name": "Pritam Pallab", "link": "https://stackoverflow.com/users/11020966/pritam-pallab"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1577272400, "post_id": 59469718, "comment_id": 105132729, "body": "@MarcGlisse Yes, if you replace the GMP segment with simple malloc and free operations it will show such a difference may be in higher scale. I have also tested that. The overhead amplifies significantly when the job size is large."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1577287170, "post_id": 59469718, "comment_id": 105136187, "body": "There are many standalone implementations of malloc available, you could experiment with them and see if one is better suited to your use case. The default one is a compromise for many use cases which is optimal for none."}], "owner": {"reputation": 95, "user_id": 11020966, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A7g59A28Ddw/AAAAAAAAAAI/AAAAAAAAADQ/m6XAwFOkR5U/photo.jpg?sz=128", "display_name": "Pritam Pallab", "link": "https://stackoverflow.com/users/11020966/pritam-pallab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577195017, "creation_date": 1577195017, "question_id": 59469718, "link": "https://stackoverflow.com/questions/59469718/openmp-and-gmp-bottleneck-issue", "title": "OpenMP and GMP Bottleneck Issue", "body": "<p>I have been testing the bottleneck issue of OpenMP and GMP together. I have found some interesting data.</p>\n\n<p>My code is as follows,</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;gmp.h&gt;\n#include&lt;omp.h&gt;\n\nvoid test_fun()\n{\n    mpz_t x;\n    mpz_init(x);\n    mpz_set_ui(x,2);\n    mpz_clear(x);\n    mpz_init(x);\n    mpz_set_ui(x,2);\n    mpz_clear(x);\n    mpz_init(x);\n    mpz_set_ui(x,2);\n    mpz_clear(x);\n    mpz_init(x);\n    mpz_set_ui(x,2);\n    mpz_clear(x);\n}\nint main()\n{\n    long i;\n    double time = omp_get_wtime();\n    #pragma omp parallel for\n    for(i=0;i&lt;100000000;i++)\n    {\n        test_fun();\n    }\n    time = omp_get_wtime() - time;\n    printf(\"Time Taken %lf\\n\", time);\n    return 1;\n}\n</code></pre>\n\n<p>This takes 1.755720 seconds in my quad core i5 processor spawning 4 threads. Now, if I iterate the loop for 25000000 (1/4 th) times, with a single core (no openmp), it takes, 1.555573 seconds. So, surely there is a overhead of using GMP for multiple threads. Can anyone point out the main reason.</p>\n\n<p>N.B. There can be a reason that each mpz_init makes a malloc call internally. As malloc is atomic between all the threads, it might create such a time-gap. Or is there any other reason ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577194166, "post_id": 59469534, "comment_id": 105118014, "body": "Can you provide <i>any</i> information about your &quot;little problem&quot;?  Sample input, expected vs actual output?"}, {"owner": {"reputation": 3, "user_id": 12591168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f305e6be9e73a86456001cf420e72f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Nimrod", "link": "https://stackoverflow.com/users/12591168/nimrod"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577194362, "post_id": 59469534, "comment_id": 105118070, "body": "@ScottHunter sample file input is the value inside my textfile while Output is the final output of my code"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577197258, "post_id": 59469534, "comment_id": 105118987, "body": "What is your problem?  What is in the file?  What is the <i>expected</i> output?"}, {"owner": {"reputation": 3, "user_id": 12591168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f305e6be9e73a86456001cf420e72f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Nimrod", "link": "https://stackoverflow.com/users/12591168/nimrod"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577201530, "post_id": 59469534, "comment_id": 105120300, "body": "@ScottHunter I already inputted the values inside of my textfile and my expected output. you can see it at the last part of my code."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577202605, "post_id": 59469534, "comment_id": 105120621, "body": "No one else can reproduce the problem w/o the <i>contents</i> of the input file; no one else can tell how the code needs to change if they don&#39;t know what it is <i>supposed</i> to produce for output."}, {"owner": {"reputation": 3, "user_id": 12591168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f305e6be9e73a86456001cf420e72f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Nimrod", "link": "https://stackoverflow.com/users/12591168/nimrod"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577233096, "post_id": 59469534, "comment_id": 105126893, "body": "this is the content of my file. 2 - NUMBER OF TEST CASE(T) 7 - TOTAL NUMBER OF VALUES(N) 4 5 2 77 18 3 6 - INTEGER VALUES(NUM) 6 - TOTAL NUMBER OF VALUES(N) 34 3 2 0 6 4 - INTEGER VALUES(NUM)    .  You can see it at the last part of my code"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1577277231, "post_id": 59469534, "comment_id": 105133878, "body": "What.  Is.  The.  Problem. ?"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 12591451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8872d026b04ee93fccb0ad8b29e64b2d?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12591451/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1577278245, "creation_date": 1577278245, "answer_id": 59478569, "question_id": 59469534, "link": "https://stackoverflow.com/questions/59469534/file-handling-bst-in-c/59478569#59478569", "title": "File handling BST in c", "body": "<p>You must have a condition to separate your 1st and 2nd set, and create a multiple BST. You must have  this condition that when (i==n) break;  to create another BST for the 2nd set and so on.</p>\n"}], "owner": {"reputation": 3, "user_id": 12591168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f305e6be9e73a86456001cf420e72f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Nimrod", "link": "https://stackoverflow.com/users/12591168/nimrod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 3, "accepted_answer_id": 59478569, "answer_count": 1, "score": -1, "last_activity_date": 1577278245, "creation_date": 1577194069, "last_edit_date": 1577205310, "question_id": 59469534, "link": "https://stackoverflow.com/questions/59469534/file-handling-bst-in-c", "title": "File handling BST in c", "body": "<p>Please see the code below. All input is read from file. The first line contains <code>X</code> denoting the number of test case. Each test case contains 2 lines. The first line contains <code>N</code> distinct integers (space separated). The second line contains integer <code>NUM</code>. In this code I need to display every test case in a separate <code>inorder</code> BST.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nFILE *fp=fopen(\"file.txt\",\"r\");\nstruct btnode\n{\n    int value;\n    struct btnode *l;\n    struct btnode *r;\n}*root = NULL, *temp = NULL, *t2, *t1;\n\nvoid insert();\nvoid inorder(struct btnode *t);\nvoid create();\nvoid s(struct btnode *t);\nint flag = 1;\n\nvoid insert()\n{\n    create();\n    if (root == NULL) \n        root = temp;\n    else    \n        s(root);\n}\n\nvoid create()\n{\n    int data;\n    fscanf(fp,\"%d\", &amp;data);\n    temp = (struct btnode *)malloc(1*sizeof(struct btnode));\n    temp-&gt;value = data;\n    temp-&gt;l = temp-&gt;r = NULL;\n}\n\nvoid inorder(struct btnode *t)\n{\n    if (root == NULL)\n    {\n        printf(\"No elements in a tree to display\");\n        return;\n    }\n    if (t-&gt;l != NULL)    \n        inorder(t-&gt;l);\n        printf(\"%d -&gt; \", t-&gt;value);\n    if (t-&gt;r != NULL)    \n        inorder(t-&gt;r);\n}\n\nvoid s(struct btnode *t)\n{\n    if ((temp-&gt;value &gt; t-&gt;value) &amp;&amp; (t-&gt;r != NULL))\n        s(t-&gt;r);\n    else if ((temp-&gt;value &gt; t-&gt;value) &amp;&amp; (t-&gt;r == NULL))\n        t-&gt;r = temp;\n    else if ((temp-&gt;value &lt; t-&gt;value) &amp;&amp; (t-&gt;l != NULL))\n        s(t-&gt;l);\n    else if ((temp-&gt;value &lt; t-&gt;value) &amp;&amp; (t-&gt;l == NULL))\n        t-&gt;l = temp;\n}\n\nint main()\n{\n    int ch,n,x;\n    if(fp==NULL)\n    {\n        printf(\"File Missing\");\n        exit(0);\n    }\n    else\n    {\n        fscanf(fp,\"%d\",&amp;x);\n        for(int j=0;j&lt;x;j++)\n        {\n            fscanf(fp,\"%d\",&amp;n);\n            for(int i=0;i&lt;n;i++)\n            {\n                insert();\n            }\n            printf(\"Set %d: \",j+1);\n            inorder(root);\n            printf(\"\\n\");\n        }\n    }\n}\nSample file input:\n2\n7\n4 5 2 77 18 3 6\n6\n34 3 2 0 6 4\n\nOutput:\nSet 1: 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6 -&gt; 18 -&gt; 77 -&gt;\nSet 2: 0 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 6 -&gt; 34 -&gt;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577194411, "post_id": 59469489, "comment_id": 105118090, "body": "C and C++ are different languages. What works in one does not necessarily work in the other (just like what a british person says does not necessarily get understood by an american person) and vice-versa."}, {"owner": {"reputation": 41, "user_id": 12572356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a04ee81f88161eb634cedde0960412?s=128&d=identicon&r=PG&f=1", "display_name": "Nimbostratus", "link": "https://stackoverflow.com/users/12572356/nimbostratus"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577194707, "post_id": 59469489, "comment_id": 105118165, "body": "@pmg yes but it gets confusing because there isnt a proper full code in c for full linked list code and the codes i tried like this does not work even i got the codes from a c lesson video"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1577195196, "post_id": 59469489, "comment_id": 105118321, "body": "I believe the c lesson video you watched is worth less than what you paid for it. I would try to get my money back..."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 12572356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a04ee81f88161eb634cedde0960412?s=128&d=identicon&r=PG&f=1", "display_name": "Nimbostratus", "link": "https://stackoverflow.com/users/12572356/nimbostratus"}, "edited": false, "score": 0, "creation_date": 1577195729, "post_id": 59469736, "comment_id": 105118513, "body": "Well this was helpful , plus i fortunately didn&#39;t pay anything for the video ;)"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 41, "user_id": 12572356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a04ee81f88161eb634cedde0960412?s=128&d=identicon&r=PG&f=1", "display_name": "Nimbostratus", "link": "https://stackoverflow.com/users/12572356/nimbostratus"}, "edited": false, "score": 0, "creation_date": 1577196160, "post_id": 59469736, "comment_id": 105118650, "body": "hehe that makes the video have negative value! :D If you want to learn C (or any subject), don&#39;t watch negative valued videos!!"}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 1, "last_activity_date": 1577195106, "creation_date": 1577195106, "answer_id": 59469736, "question_id": 59469489, "link": "https://stackoverflow.com/questions/59469489/linked-list-code-below-gives-interesting-errors-can-you-check-that/59469736#59469736", "title": "Linked list code below gives interesting errors,can you check that?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n struct node {\n    int data;\n    struct node *next;\n};\n</code></pre>\n\n<p>created type <code>struct node</code></p>\n\n<pre><code>struct node *root = (node*)malloc(sizeof(struct node));\n</code></pre>\n\n<p>You cannot have code outside a function. The above line does not belong here, hanging out of any function like that.<br>\nBesides that, it tries to convert the return value of the <code>malloc()</code> function (of <code>void*</code> type) to a pointer to a type that does not exist (type <code>node</code> does not exist; type <code>struct node</code> exists).<br>\nAnd also, it is, at best redundant and at worse an error, wrong to cast the return value of <code>malloc()</code> in C.</p>\n\n<pre><code>*root-&gt;next = NULL;\n</code></pre>\n\n<p>Again, a statement hanging out of any function. Illegal in C.</p>\n\n<pre><code>void print (node*abc)\n</code></pre>\n\n<p>Type <code>node</code> does not exist, you can't use pointers to types that do not exist.</p>\n\n<pre><code>{\n    while(abc!=NULL)\n    {\n        printf (\"%d\",abc-&gt;data);\n        abc = abc-&gt;next;\n    }\n}\nvoid addTail (node*abc)\n</code></pre>\n\n<p>Type <code>node</code> does not exist, you can't use pointers to types that do not exist.</p>\n\n<pre><code>{\n    while (abc-&gt;next!=NULL);\n    abc-&gt;next = ( node*)malloc(sizeof(struct node));\n}\nint main ()\n{\nprintf (\"dd\");\n}\n</code></pre>\n\n<p>Have fun!</p>\n"}], "owner": {"reputation": 41, "user_id": 12572356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a04ee81f88161eb634cedde0960412?s=128&d=identicon&r=PG&f=1", "display_name": "Nimbostratus", "link": "https://stackoverflow.com/users/12572356/nimbostratus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 59469736, "answer_count": 1, "score": 0, "last_activity_date": 1577195106, "creation_date": 1577193814, "last_edit_date": 1577194524, "question_id": 59469489, "link": "https://stackoverflow.com/questions/59469489/linked-list-code-below-gives-interesting-errors-can-you-check-that", "title": "Linked list code below gives interesting errors,can you check that?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n struct node {\n    int data;\n    struct node *next;\n};\nstruct node *root = (node*)malloc(sizeof(struct node));\n*root-&gt;next = NULL;\nvoid print (node*abc)\n{\n    while(abc!=NULL)\n    {\n        printf (\"%d\",abc-&gt;data);\n        abc = abc-&gt;next;\n    }\n}\nvoid addTail (node*abc)\n{\n    while (abc-&gt;next!=NULL);\n    abc-&gt;next = ( node*)malloc(sizeof(struct node));\n}\nint main ()\n{\nprintf (\"dd\");\n}\n</code></pre>\n\n<p>The errors i get here are:</p>\n\n<p>7   22      [Error] 'node' undeclared here (not in a function)</p>\n\n<p>7   27      [Error] expected expression before ')' token</p>\n\n<p>8   5       [Error] expected '=', ',', ';', 'asm' or '<strong>attribute</strong>' before '->' token</p>\n\n<p>In function 'addTail':\n23  20  [Error] expected expression before ')' token</p>\n\n<p>In function 'addHead':\n28  28      [Error] expected expression before ')' token</p>\n"}, {"tags": ["c", "string", "numbers", "c-strings", "data-conversion"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1577193060, "post_id": 59469287, "comment_id": 105117671, "body": "Either use a big-integer library like GMP, or write it yourself using the long addition algorithm you learned in elementary school."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1577213638, "last_edit_date": 1577213638, "creation_date": 1577196048, "answer_id": 59469905, "question_id": 59469287, "link": "https://stackoverflow.com/questions/59469287/how-can-i-make-an-addition-to-two-strings-that-contain-a-long-number-in-c/59469905#59469905", "title": "How can I make an addition to two strings that contain a long number? In C", "body": "<p>We, beginners, should help each other.:)</p>\n\n<p>Here are my five cents.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint is_overflow( const char *s1, size_t n1, const char *s2, size_t n2 )\n{\n    const int Base = 10;\n\n    int overflow = 0;\n\n    while ( n1 != 0 &amp;&amp; n2 != 0 )\n    {\n        overflow = !( overflow + ( s1[--n1] - '0' ) + ( s2[--n2] - '0' ) &lt; Base );\n    }\n\n    while ( overflow &amp;&amp; n1 != 0 )\n    {\n        overflow = !( overflow + ( s1[--n1] - '0' ) &lt; Base );\n    }\n\n    while ( overflow &amp;&amp; n2 != 0 )\n    {\n        overflow = !( overflow + ( s2[--n2] - '0' ) &lt; Base );\n    }\n\n    return overflow;\n}\n\nchar * add_strings_as_numbers( char *s1, size_t n1, \n                               const char *s2, size_t n2,\n                               const char *s3, size_t n3 )\n{\n    const int Base = 10;\n\n    int overflow = 0;\n\n    while ( n2 != 0 &amp;&amp; n3 != 0 )\n    {\n        char c = overflow + ( s2[--n2] - '0' ) + ( s3[--n3] - '0' );\n        overflow = !( c &lt; Base );\n        s1[--n1] = c % Base + '0';\n    }\n\n    while ( n2 != 0 )\n    {\n        char c = overflow + ( s2[--n2] - '0' );\n        overflow = !( c &lt; Base );\n        s1[--n1] = c % Base + '0';\n    }\n\n    while ( n3 != 0 )\n    {\n        char c = overflow + ( s3[--n3] - '0' );\n        overflow = !( c &lt; Base );\n        s1[--n1] = c % Base + '0';\n    }\n\n    if ( overflow ) s1[--n1] = overflow + '0';\n\n    return s1;\n}\n\nint main(void) \n{\n    const char *s1 = \"5880391469248794735212\";\n    const char *s2 = \"1234567890231\";\n//  const char *s1 = \"1\";\n//  const char *s2 = \"999\";\n    const size_t N1 = strlen( s1 );\n    const size_t N2 = strlen( s2 );\n\n    size_t n = ( N1 &lt; N2 ? N2 : N1 ) + is_overflow( s1, N1, s2, N2 ) + 1;\n\n    char *result = calloc( n, sizeof( char ) );\n\n    add_strings_as_numbers( result, n - 1, s1, N1, s2, N2 );\n\n    printf(  \"\\\"%s\\\" + \\\"%s\\\" = \\\"%s\\\"\\n\", s1, s2, result );\n\n    free( result );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>\"5880391469248794735212\" + \"1234567890231\" = \"5880391470483362625443\"\n</code></pre>\n\n<p>Or it will be better to allocate a new string directly in the function <code>add_strings_as_numbers</code> how it is shown in the demonstrative program below.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstatic int is_overflow( const char *s1, size_t n1, const char *s2, size_t n2 )\n{\n    const int Base = 10;\n\n    int overflow = 0;\n\n    while ( n1 != 0 &amp;&amp; n2 != 0 )\n    {\n        overflow = !( overflow + ( s1[--n1] - '0' ) + ( s2[--n2] - '0' ) &lt; Base );\n    }\n\n    while ( overflow &amp;&amp; n1 != 0 )\n    {\n        overflow = !( overflow + ( s1[--n1] - '0' ) &lt; Base );\n    }\n\n    while ( overflow &amp;&amp; n2 != 0 )\n    {\n        overflow = !( overflow + ( s2[--n2] - '0' ) &lt; Base );\n    }\n\n    return overflow;\n}\n\nchar * add_strings_as_numbers( const char *s1, size_t n1,\n                               const char *s2, size_t n2 )\n{\n    const int Base = 10;\n\n    size_t n = ( n1 &lt; n2 ? n2 : n1 ) + is_overflow( s1, n1, s2, n2 );\n\n    char *result = calloc( n + 1, sizeof( char ) );\n\n    if ( result != NULL )\n    {\n        int overflow = 0;\n\n        while ( n1 != 0 &amp;&amp; n2 != 0 )\n        {\n            char c = overflow + ( s1[--n1] - '0' ) + ( s2[--n2] - '0' );\n            overflow = !( c &lt; Base );\n            result[--n] = c % Base + '0';\n        }\n\n        while ( n1 != 0 )\n        {\n            char c = overflow + ( s1[--n1] - '0' );\n            overflow = !( c &lt; Base );\n            result[--n] = c % Base + '0';\n        }\n\n        while ( n2 != 0 )\n        {\n            char c = overflow + ( s2[--n2] - '0' );\n            overflow = !( c &lt; Base );\n            result[--n] = c % Base + '0';\n        }\n\n        if ( overflow ) result[--n] = overflow + '0';\n\n    }\n\n    return result;\n}\n\nint main(void) \n{\n    const char *s1 = \"5880391469248794735212\";\n    const char *s2 = \"1234567890231\";\n//  const char *s1 = \"1\";\n//  const char *s2 = \"999\";\n    const size_t N1 = strlen( s1 );\n    const size_t N2 = strlen( s2 );\n\n\n    char *result = add_strings_as_numbers( s1, N1, s2, N2 );\n\n    printf(  \"\\\"%s\\\" + \\\"%s\\\" = \\\"%s\\\"\\n\", s1, s2, result );\n\n    free( result );\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": false, "score": 0, "last_activity_date": 1577198495, "creation_date": 1577198495, "answer_id": 59470342, "question_id": 59469287, "link": "https://stackoverflow.com/questions/59469287/how-can-i-make-an-addition-to-two-strings-that-contain-a-long-number-in-c/59470342#59470342", "title": "How can I make an addition to two strings that contain a long number? In C", "body": "<p>You should use a big number library like <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">GMP</a>, but you can also try the following code if you like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar *add(char *x, char *y);\n\nint main(void)\n{\n    char *a = \"5880391469248794735212\";\n    char *b = \"1234567890231\";\n\n    char *c = add(a, b);\n\n    printf(\"z: %s\\n\", c);\n\n    free(c);\n    return 0;\n}\n\nvoid reverseString(char *buf)\n{\n    char *ptr = buf + strlen(buf) - 1;\n\n    while (buf &lt; ptr) {\n        char tmp = *buf;\n        *buf++ = *ptr;\n        *ptr-- = tmp;\n    }\n}\n\nchar *add(char *a, char *b)\n{\n    size_t xlen = strlen(a);\n    size_t ylen = strlen(b);\n\n    size_t n = 0;\n\n    int val;\n    int r = -1;\n\n    char *p1, *p2;\n    char *t1, *t2;\n\n    char *c = NULL;\n\n    if (xlen &gt;= ylen) {\n        p1 = a + xlen - 1;  t1 = a;\n        p2 = b + ylen - 1;  t2 = b;\n        c = (char *)malloc(xlen + 2);\n    }\n    else {\n        p1 = b + ylen - 1;  t1 = b;\n        p2 = a + xlen - 1;  t2 = a;\n        c = (char *)malloc(ylen + 2);\n    }\n    if (!c) {\n        fputs(\"error: memory allocation failed.\\n\", stderr);\n        return NULL;\n    }\n\n    while (p2 &gt;= t2)\n    {\n        if (r == -1) {\n            val = (*p1-- - '0') + (*p2-- - '0');\n        }\n        else {\n            val = (*p1-- - '0') + (*p2-- - '0') + 1;\n        }\n        if (val &gt; 9) {\n            r = val - 10;\n            c[n++] = r + '0';\n        }\n        else {\n            c[n++] = val + '0';\n            r = -1;\n        }\n    }\n\n    while (p1 &gt;= t1)\n    {\n        if (r == -1) {\n            c[n++] = *p1--;\n        }\n        else {\n            val = (*p1-- - '0') + 1;\n            if (val &gt; 9) {\n                r = val - 10;\n                c[n++] = r + '0';\n            }\n            else {\n                c[n++] = val + '0';\n                r = -1;\n            }\n        }\n    }\n    if (r != -1) {\n        c[n++] = '1';\n    }\n    c[n] = '\\0';\n    reverseString(c);\n    return c;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12527432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9fdea78eb3c2303c92c02c4f07c248?s=128&d=identicon&r=PG&f=1", "display_name": "Shimon Cohen", "link": "https://stackoverflow.com/users/12527432/shimon-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1577213638, "creation_date": 1577192783, "last_edit_date": 1577196112, "question_id": 59469287, "link": "https://stackoverflow.com/questions/59469287/how-can-i-make-an-addition-to-two-strings-that-contain-a-long-number-in-c", "title": "How can I make an addition to two strings that contain a long number? In C", "body": "<pre><code>char* a = \"5880391469248794735212\"\nchar* b = \"1234567890231\"\n</code></pre>\n\n<p>I need to make a calculation of addition and put the new number in a string.<br>\nI tried to convert each number into an integer, add them together and convert the result into a string, but the maximum value of a number is <code>unsigned long long</code> which can't contain the numbers I showed.</p>\n\n<p>Thank you for any help!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1577192553, "post_id": 59469086, "comment_id": 105117516, "body": "Your question states &quot;in C language&quot; but you also tagged C#. Is it one or the other? That will change the answer(s) you receive."}, {"owner": {"reputation": 1599, "user_id": 9948091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JANyt.png?s=128&g=1", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/9948091/hal9000"}, "edited": false, "score": 0, "creation_date": 1577206213, "post_id": 59469086, "comment_id": 105121610, "body": "No need to use <code>fgets()</code> and <code>sscanf()</code>. Just use <code>fscanf()</code> directly."}], "answers": [{"tags": [], "owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "is_accepted": true, "score": 0, "last_activity_date": 1577192359, "creation_date": 1577192359, "answer_id": 59469203, "question_id": 59469086, "link": "https://stackoverflow.com/questions/59469086/how-can-i-read-numbers-from-a-file/59469203#59469203", "title": "How can i read numbers from a file", "body": "<p>If I understand you right, you want to <em>obtain the numbers</em> which you can do with a help of <code>string.Split</code> and <em>Linq</em>:</p>\n\n<pre><code>  int[] numbers = File\n    .ReadLines(@\"c:\\MyFile.txt\")\n    .SelectMany(line =&gt; line.Split(\n       new char[] { ' ', '\\t', '\\r', '\\n' }, \n       StringSplitOptions.RemoveEmptyEntries))\n    .Select(item =&gt; int.Parse(item))\n    .ToArray();\n</code></pre>\n\n<p>If tiy want to store the numbers in a file:</p>\n\n<pre><code> File\n   .WriteAllLines(@\"c:\\SomeOtherFile.txt\", numbers);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72, "user_id": 9724375, "user_type": "registered", "profile_image": "https://graph.facebook.com/1536924173071860/picture?type=large", "display_name": "Burak Ko&#231;yi\u011fit", "link": "https://stackoverflow.com/users/9724375/burak-ko%c3%a7yi%c4%9fit"}, "is_accepted": false, "score": 0, "last_activity_date": 1577192965, "last_edit_date": 1577192965, "creation_date": 1577192637, "answer_id": 59469257, "question_id": 59469086, "link": "https://stackoverflow.com/questions/59469086/how-can-i-read-numbers-from-a-file/59469257#59469257", "title": "How can i read numbers from a file", "body": "<pre><code>TextFieldParser datReader = new TextFieldParser(Application.StartupPath + @\"write here your file address\");\n        datReader.SetDelimiters(new string[] { \" \" });\n        datReader.HasFieldsEnclosedInQuotes = true;\n        string colFields = datReader.ReadToEnd();\n        List&lt;string&gt; lineOrder = new List&lt;string&gt;();\n\n        using (StringReader sr = new StringReader(colFields))\n        {\n            string line;\n            while ((line = sr.ReadLine()) != null)\n            {\n                lineOrder.Add(line);\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12570653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD9SkgnJCxeoNNin7BM1fYdbKC698-4rtULvDgQ_Q=k-s128", "display_name": "Laga San", "link": "https://stackoverflow.com/users/12570653/laga-san"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 59469203, "answer_count": 2, "score": -4, "last_activity_date": 1577214926, "creation_date": 1577191736, "last_edit_date": 1577192905, "question_id": 59469086, "link": "https://stackoverflow.com/questions/59469086/how-can-i-read-numbers-from-a-file", "title": "How can i read numbers from a file", "body": "<p>at first glance this may look a dumb question but am really stuck and in a hurry....\nI have a file that countain an X number of numbers stocked in a file.\nI can stock the numbers in the file in this way</p>\n\n<pre><code>22 56 102 9 302 \n</code></pre>\n\n<p>in a single ligne with a space between each number.</p>\n\n<p>Or i can stock them this way in one colone </p>\n\n<pre><code>22 \n56 \n102 \n9 \n302\n</code></pre>\n\n<p>either way i coudln't find an easy way to retrieve those number and stock them in a table to use them later on. Because one of the problem i don't know how many digit in each number (can be only one digit or even 5) so i can't use <code>sscanf</code>.</p>\n\n<p>So can anyone of you help me how to add those numbers to a table (whether the number in a single line or single colone, which ever easy). (in C language)</p>\n\n<p>(really sorry if this question seems kinda dumb, but i'm really in a rush )</p>\n\n<p>editt:: the number of numbers in the file han be really high</p>\n\n<p>edit 2:\nthis what i tried to do (in case the number are in a single colonne)</p>\n\n<pre><code>  int i=0,k;\nchar buffer[500];\n\nfd=fopen(\"Fdonne.txt\", \"r\");   //fd global variable\n\n\n fgets(buffer,300, fd);\nwhile(feof(fd) == 0)\n      {\n     sscanf(buffer,\"%d\",tb[i]); //tb already declared also\n     i++;\n     fgets(buffer,300, fd);\n       }\n\nfor (k=0; k&lt;(count+1); k++) // count is my X here \n    printf(\"%d \",tb[k]);\n</code></pre>\n\n<p>this seemed the most logical thing but, reading ligne by ligne and usse the sscanf but smh when i run the program nothing show (so there is a problem somewhere)</p>\n"}, {"tags": ["c", "assembly", "nasm", "shellcode"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1577192155, "post_id": 59469029, "comment_id": 105117374, "body": "You left out the 3 zero bytes of the first instruction. shellcode like this should not have zero bytes but that doesn&#39;t mean you can simply leave them out. You need to write code that doesn&#39;t have them. You can just do <code>push $0x68</code> instead of the first two instructions. PS: you used <code>rax</code> without initializing it that&#39;s unlikely to work reliably."}, {"owner": {"reputation": 391, "user_id": 12081291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OhHvy.png?s=128&g=1", "display_name": "BitFriends", "link": "https://stackoverflow.com/users/12081291/bitfriends"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1577192752, "post_id": 59469029, "comment_id": 105117573, "body": "@Jester thank you for the tip. But when i run the shellcode with strace i got this. <code>execve(&quot;&#47;bin&#47;bash&quot;, [&quot;&#47;bin&#47;bash&quot;], 0x7ffcdcd335eastrace: umoven: short read (6 &lt; 8) @0x7ffcdcd33ffa  &#47;* 322 vars, unterminated *&#47;) = -1 EFAULT (Ung&#252;ltige Adresse) --- SIGSEGV {si_signo=SIGSEGV, si_code=SI_KERNEL, si_addr=NULL} --- +++ killed by SIGSEGV +++</code>"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1577193181, "post_id": 59469029, "comment_id": 105117698, "body": "You may wish to look at this answer which eliminates the NUL (0) bytes by using different instructions and executes <code>&#47;bin&#47;sh</code> (you can amend it to use <code>&#47;bin&#47;bash</code> :  <a href=\"https://stackoverflow.com/a/57295376/3857942\">stackoverflow.com/a/57295376/3857942</a> . It also presents a mechanism to generate the shellcode string automatically rather than copying info from objdump by hand."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 3, "creation_date": 1577193414, "post_id": 59469029, "comment_id": 105117769, "body": "Your code doesn&#39;t zero out RDX (which is the last parameter)."}], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 2, "last_activity_date": 1577192159, "creation_date": 1577192159, "answer_id": 59469167, "question_id": 59469029, "link": "https://stackoverflow.com/questions/59469029/how-to-convert-an-assembler-program-to-shellcode-correctly/59469167#59469167", "title": "How to convert an assembler program to shellcode correctly?", "body": "<p>You are omitting the zero bytes here:</p>\n\n<pre><code>\\xbb\\x68\\x53\\x48\\xbb\\x2f\\x62\\x69\\x6e\\x2f\\x62\\x61\\x73\\x53\\x48\\x89\\xe7\\x50\\x57\\x48\\x89\\xe6\\xb0\\x3b\\x0f\\x05\n</code></pre>\n\n<p>as opposed to</p>\n\n<pre><code>  401000:   bb 68 00 00 00          mov    $0x68,%ebx\n</code></pre>\n\n<p>The zero bytes are part of the instructions and cannot be skipped. So you have to include them.</p>\n\n<p>The problem is, however, that the zero bytes would terminate the argument string and hence have to be avoided. It is your duty as shellcode designer to construct it in a way, that it does not include byte values that may not occur. In many cases this means no zero bytes, because the shellcode is injected as a C string, but other values may be problematic in other situations, too.</p>\n"}], "owner": {"reputation": 391, "user_id": 12081291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OhHvy.png?s=128&g=1", "display_name": "BitFriends", "link": "https://stackoverflow.com/users/12081291/bitfriends"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 59469167, "answer_count": 1, "score": 2, "last_activity_date": 1577240643, "creation_date": 1577191449, "question_id": 59469029, "link": "https://stackoverflow.com/questions/59469029/how-to-convert-an-assembler-program-to-shellcode-correctly", "title": "How to convert an assembler program to shellcode correctly?", "body": "<p>I programmed a program in nasm (x64) which should execute <code>/bin/bash</code>, and that works fine. Then i ran the program with <code>objdump -D</code> and i wrote down the machine code like this: <code>\\xbb\\x68\\x53\\x48\\xbb\\x2f\\x62\\x69\\x6e\\x2f\\x62\\x61\\x73\\x53\\x48\\x89\\xe7\\x50\\x57\\x48\\x89\\xe6\\xb0\\x3b\\x0f\\x05</code>. Then i ran this with <code>./shell $(python -c 'print \"\\xbb\\x68\\x53\\x48\\xbb\\x2f\\x62\\x69\\x6e\\x2f\\x62\\x61\\x73\\x53\\x48\\x89\\xe7\\x50\\x57\\x48\\x89\\xe6\\xb0\\x3b\\x0f\\x05\"')</code> and i got an illegal instruction. But the assembler program worked fine! Can someone help?</p>\n\n<p>shell.c:</p>\n\n<pre><code>int main(int argc, char **argv) {\n    int (*func)();\n    func = (int (*)()) argv[1];\n    (int)(*func)();\n}\n</code></pre>\n\n<p>bash.asm:</p>\n\n<pre><code>section .text\nglobal start\nstart:\n    mov rbx, 0x68\n    push rbx\n    mov rbx, 0x7361622f6e69622f\n    push rbx\n    mov rdi, rsp\n    push rax\n    push rdi\n    mov rsi, rsp\n    mov al, 59\n    syscall\n\n</code></pre>\n\n<p>objdump:</p>\n\n<pre><code>./bash:     file format elf64-x86-64\n\n\nDisassembly of section .text:\n\n0000000000401000 &lt;start&gt;:\n  401000:   bb 68 00 00 00          mov    $0x68,%ebx\n  401005:   53                      push   %rbx\n  401006:   48 bb 2f 62 69 6e 2f    movabs $0x7361622f6e69622f,%rbx\n  40100d:   62 61 73 \n  401010:   53                      push   %rbx\n  401011:   48 89 e7                mov    %rsp,%rdi\n  401014:   50                      push   %rax\n  401015:   57                      push   %rdi\n  401016:   48 89 e6                mov    %rsp,%rsi\n  401019:   b0 3b                   mov    $0x3b,%al\n  40101b:   0f 05                   syscall\n</code></pre>\n"}, {"tags": ["android", "c++", "ios", "c", "tensorflow-lite"], "answers": [{"tags": [], "owner": {"reputation": 1818, "user_id": 10345402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VmYAKhOYmOM/AAAAAAAAAAI/AAAAAAAABFQ/AkCHLmBTtHM/photo.jpg?sz=128", "display_name": "Afsar edrisy", "link": "https://stackoverflow.com/users/10345402/afsar-edrisy"}, "is_accepted": false, "score": 2, "last_activity_date": 1578580374, "creation_date": 1578580374, "answer_id": 59666245, "question_id": 59468514, "link": "https://stackoverflow.com/questions/59468514/use-tf-lite-c-api-for-both-android-and-ios/59666245#59666245", "title": "Use tf-lite C++ API for both Android and iOS", "body": "<p>Google has recently released <a href=\"https://github.com/google/mediapipe\" rel=\"nofollow noreferrer\">Mediapipe</a> which is cross platform &amp; its calculators are written in C &amp; C++. But this framework is useful in Video analytics with tflite. \nIf you want to use tflite for other purpose you can modify <a href=\"https://github.com/google/mediapipe\" rel=\"nofollow noreferrer\">mediapipe</a> implementation at calculators levels which are written in native (C &amp; C++) only.</p>\n"}], "owner": {"reputation": 51, "user_id": 6167402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BPd--uJQgow/AAAAAAAAAAI/AAAAAAAAADw/F01klI_gWyA/photo.jpg?sz=128", "display_name": "Rishabh", "link": "https://stackoverflow.com/users/6167402/rishabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1578580374, "creation_date": 1577188758, "question_id": 59468514, "link": "https://stackoverflow.com/questions/59468514/use-tf-lite-c-api-for-both-android-and-ios", "title": "Use tf-lite C++ API for both Android and iOS", "body": "<p>I am a mobile developer, using C++ to build portable parts of my apps that work on both Android and iOS.\n<br>\nHere is my workflow:</p>\n\n<ul>\n<li>For portable parts, I code a cross-platform library on macOS, build/unit-test it on macOS</li>\n<li>then, build/unit-test it on Linux</li>\n<li>create android and ios builds of the library using the respective toolchains, and integrate it into the mobile apps</li>\n</ul>\n\n<p>While exploring tflite, I can see multiple APIs: C, C++, Obj-C, Swift, Java.\n<br>\nTo write portable code, Obj-C/Swift/Java APIs are out of picture.\n<br>\nIs there any common API (C or C++) which can be used to evaluate tf-lite models on macOS, Linux, Android and iOS? If yes, what are the bazel targets to build?</p>\n"}, {"tags": ["c", "function", "methods", "attributes", "dereference"], "comments": [{"owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "edited": false, "score": 1, "creation_date": 1577187483, "post_id": 59468231, "comment_id": 105115743, "body": "<code>MsgQs_t mq</code>is pass by value make it as a pointer to have a change in the caller function"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12585851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AtHX3U_t3Nc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reshE-JYnxehn2u8a4u_swAi8VHRQ/photo.jpg?sz=128", "display_name": "Legit Jelly", "link": "https://stackoverflow.com/users/12585851/legit-jelly"}, "edited": false, "score": 0, "creation_date": 1577374264, "post_id": 59468318, "comment_id": 105155064, "body": "Sorry to ask but im relatively new to C. How do i change the parameters where u wrote &quot;^^^^^^ Here&quot; to make it pass-by-pointer cause i thought adding the * made it pass-by-pointer"}, {"owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "reply_to_user": {"reputation": 1, "user_id": 12585851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AtHX3U_t3Nc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reshE-JYnxehn2u8a4u_swAi8VHRQ/photo.jpg?sz=128", "display_name": "Legit Jelly", "link": "https://stackoverflow.com/users/12585851/legit-jelly"}, "edited": false, "score": 0, "creation_date": 1577377362, "post_id": 59468318, "comment_id": 105156100, "body": "Please <a href=\"https://www.geeksforgeeks.org/difference-between-call-by-value-and-call-by-reference/amp/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a> this for more information"}], "tags": [], "owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "is_accepted": false, "score": 1, "last_activity_date": 1577377059, "last_edit_date": 1577377059, "creation_date": 1577187865, "answer_id": 59468318, "question_id": 59468231, "link": "https://stackoverflow.com/questions/59468231/issue-passing-struct-through-method-function-in-c/59468318#59468318", "title": "Issue passing struct through method/function in c", "body": "<p>In function  <code>createQ</code> argument <code>MsgQs_t mq</code> used as <code>pass-by-value</code> and hence caller component will not have any changes upon editing in <code>mq</code></p>\n\n<p>Change code to <code>pass-by-reference</code> something like,</p>\n\n<pre><code> void createQ(MsgQs_t *mq, int ident){\n//                    ^^^^^^ Here\n        int taken=0;\n        for(int i=0;i&lt;3;i++){\n            if(mq-&gt;queue[i].id==ident){\n  //           ^^^^^^ Here change dot(.) to this (-&gt;) for access\n                    printf(\"That Queue Id is already taken\\n\");\n                    taken=1;\n                }\n            }\n            if(taken==0){\n            mq-&gt;queue[qCounter].id=ident;\n            printf(\"THE INNER ID IS %d and the qCounter is %d\\n\", mq-&gt;queue[qCounter].id, qCounter);\n            qCounter++;\n            }\n        }\n</code></pre>\n\n<p>While calling the function send the address as follows,</p>\n\n<pre><code>createQ(&amp;mq, indent_value);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12585851, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AtHX3U_t3Nc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reshE-JYnxehn2u8a4u_swAi8VHRQ/photo.jpg?sz=128", "display_name": "Legit Jelly", "link": "https://stackoverflow.com/users/12585851/legit-jelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577377059, "creation_date": 1577187335, "last_edit_date": 1577188713, "question_id": 59468231, "link": "https://stackoverflow.com/questions/59468231/issue-passing-struct-through-method-function-in-c", "title": "Issue passing struct through method/function in c", "body": "<p>I am having issues with the following method. It supposed to change the value of <code>mq.queue[qCounter].id</code> to that found in <code>ident</code> and it does this but the value is not retained outside after the method is done. It only seems to change while in the method. I tried de-referencing the attribute <code>mq</code> but and there were no compilation errors but the program stopped running whenever it got to the method. Any ideas how I can fix it/ achieve the same thing using a method/function?</p>\n\n<pre><code>void createQ(MsgQs_t mq, int ident){\n    int taken=0;\n    for(int i=0;i&lt;3;i++){\n        if(mq.queue[i].id==ident){\n            printf(\"That Queue Id is already taken\\n\");\n            taken=1;\n        }\n    }\n    if(taken==0){\n    mq.queue[qCounter].id=ident;\n    printf(\"THE INNER ID IS %d and the qCounter is %d\\n\", mq.queue[qCounter].id, qCounter);\n    qCounter++;\n    }\n}\n</code></pre>\n\n<p>The following is the struct im using aka \"MsgQs mq\" above:</p>\n\n<pre><code>typedef struct MessQ {//A single message queue\n    char message[MQS][MLN];\n    int id;\n}MessQ_t;\n\ntypedef struct MsgQs {//An array of message queues\n    MessQ_t queue[MQA];\n}MsgQs_t;\n</code></pre>\n"}]