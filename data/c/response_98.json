[{"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1479944817, "post_id": 40775958, "comment_id": 68775675, "body": "What is <code>Leaf</code>?"}, {"owner": {"reputation": 1125, "user_id": 5672740, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c16baffcdc08015ed0b3f9dcfd424751?s=128&d=identicon&r=PG&f=1", "display_name": "SenselessCoder", "link": "https://stackoverflow.com/users/5672740/senselesscoder"}, "edited": false, "score": 0, "creation_date": 1479944858, "post_id": 40775958, "comment_id": 68775689, "body": "What do you mean &quot;does my code what I want&quot;? How can we know, test it debug it etc."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1479945267, "post_id": 40775958, "comment_id": 68775785, "body": "We can have no idea what it does, or should do. Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem. Show some examples of the input, the expected output, and the actual output. Does your opinion extend to hard facts?"}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 2, "creation_date": 1479945319, "post_id": 40775958, "comment_id": 68775801, "body": "what do you want? This function may produce a stackoverflow because the recursive call ` return a += acc(v);` is performed with the exact same argument."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479945519, "post_id": 40775958, "comment_id": 68775845, "body": "Why do you use <code>double</code> if all the functions return <code>int</code>? is <code>Leaf</code> a <code>double</code> too, and comparing floating point value causes your problems? We can only speculate."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1479945672, "post_id": 40775958, "comment_id": 68775873, "body": "UmNyobe is right. If <code>bf(0) &lt; 1</code> is false, then you do <code>a += acc(v);</code>. If <code>bf(0) &lt; 1</code> is still false, then you do <code>a += acc(v);</code> again. This continues until you&#39;ve overflowed your stack or until <code>bf(0) &lt; 1</code> is true. Hopefully <code>cf()</code> and <code>df()</code> don&#39;t call <code>acc(v)</code>?"}, {"owner": {"reputation": 2437, "user_id": 3861775, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Ij1Eg.jpg?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/3861775/samuel"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479945890, "post_id": 40775958, "comment_id": 68775923, "body": "@WeatherVane Thats also a function. I corrected it"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1479945898, "post_id": 40775958, "comment_id": 68775926, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your code and accurately describe the problem. The code you posted does not reproduce the problem, and you&#39;ve failed to specify the problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479946123, "post_id": 40775958, "comment_id": 68775995, "body": "@Samuel so it is not even your code. Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem. Show some examples of the input, the expected output, and the actual output."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1479953967, "post_id": 40775958, "comment_id": 68777779, "body": "Note that <code>double acc(v)</code> is an K&amp;R-style (non-prototype) function definition \u2014 and a sloppy one at that since it could be <code>double acc(v) int v; { \u2026 }</code> to be explicit about the type of <code>v</code>.  Such code should not be written by anyone these days.  It is extremely poor form."}], "answers": [{"comments": [{"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1479953763, "post_id": 40776166, "comment_id": 68777734, "body": "The result of the recursive call is added to <code>a</code> and returned.  <code>a</code> may also be incremented by the results of <code>cf()</code> and <code>df()</code>.  There is no need to make <code>a</code> global to make recursion work."}], "tags": [], "owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "is_accepted": false, "score": 1, "last_activity_date": 1479946004, "creation_date": 1479946004, "answer_id": 40776166, "question_id": 40775958, "link": "https://stackoverflow.com/questions/40775958/sum-in-recursive-function/40776166#40776166", "title": "Sum in recursive function", "body": "<p>Your problem is that a is defined inside the recursive function. If you want to count events inside the recursion, declare a outside of acc().</p>\n"}], "owner": {"reputation": 2437, "user_id": 3861775, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Ij1Eg.jpg?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/3861775/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1479946004, "creation_date": 1479944519, "last_edit_date": 1479945857, "question_id": 40775958, "link": "https://stackoverflow.com/questions/40775958/sum-in-recursive-function", "title": "Sum in recursive function", "body": "<p>I have a recursive function which I call <code>acc</code>. If a specific condition is fulfilled I call the function again. If not, I want do add a number to the variable <code>a</code>.</p>\n\n<p>In my opinion it does not what it should. Can someone have a look on this:</p>\n\n<pre><code>double acc(v)\n{\n    double a = 0;\n    for(int q=0; q&lt;v; q++)\n    {\n            if(bf(q) &lt; 1)\n            {\n                if(ef() == 0)\n                {           \n                    a += cf();\n                }\n                else\n                {\n                    a += df();\n                }\n            }\n            else\n            {\n                return a += acc(v);\n            }\n    }   \n    return a;\n}\n</code></pre>\n\n<p>I tried to simplify it as good as I can. <code>v</code>is a variable. <code>bf()</code>, <code>cf()</code>, <code>ef()</code> and <code>df()</code> are functions which return an integer value. Now I want that <code>a</code> gets incremented every time a specific condition is fulfilled during the whole recursive process. Does my code what I want? I don't see it at the moment.</p>\n"}, {"tags": ["c", "networking", "ip-fragmentation"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1479947179, "post_id": 40775939, "comment_id": 68776222, "body": "Those aren&#39;t the same packets. The first screen shot was for a packet with 175 bytes, but the second one is 1442 bytes."}, {"owner": {"reputation": 1513, "user_id": 2556354, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d17ecb069c4cf3205de82341203f9525?s=128&d=identicon&r=PG", "display_name": "madz", "link": "https://stackoverflow.com/users/2556354/madz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479949057, "post_id": 40775939, "comment_id": 68776641, "body": "Yes your right, they are not the same. That is why I wanted to check ipv4 ID filed to check for identical packets and found it 0! all packets including larger packets at the server side have don&#39;t fragment set."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1479949205, "post_id": 40775939, "comment_id": 68776670, "body": "Don&#39;t post images of text!"}, {"owner": {"reputation": 1513, "user_id": 2556354, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d17ecb069c4cf3205de82341203f9525?s=128&d=identicon&r=PG", "display_name": "madz", "link": "https://stackoverflow.com/users/2556354/madz"}, "edited": false, "score": 0, "creation_date": 1479950098, "post_id": 40775939, "comment_id": 68776847, "body": "Posted second sample as text"}], "owner": {"reputation": 1513, "user_id": 2556354, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d17ecb069c4cf3205de82341203f9525?s=128&d=identicon&r=PG", "display_name": "madz", "link": "https://stackoverflow.com/users/2556354/madz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 933, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480082015, "creation_date": 1479944412, "last_edit_date": 1480082015, "question_id": 40775939, "link": "https://stackoverflow.com/questions/40775939/sending-dont-fragment-udp-packets-at-the-server-and-receiving-fragmented-packet", "title": "Sending don&#39;t fragment UDP packets at the server and receiving fragmented packets at the client", "body": "<p>I've created a program in C that sends data with UDP packets.</p>\n\n<p>Socket is made don't fragment using</p>\n\n<pre><code>int optval = IP_PMTUDISC_DO;\nif(setsockopt(sd,IPPROTO_IP,IP_MTU_DISCOVER,&amp;optval,sizeof(int))!=0)\n{\n    perror(\"setsocketopt()\");\n    return 0;\n}\n</code></pre>\n\n<p>Checking with TSHARK at the server (debian 8 KVM virtualizied), for all packets don't fragment has been set:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qsgZu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qsgZu.png\" alt=\"server sniffier\"></a></p>\n\n<p>But at the client, large packets receiving fragmented!!</p>\n\n<p><a href=\"https://i.stack.imgur.com/1zQNA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1zQNA.png\" alt=\"client side wireshark\"></a></p>\n\n<p>Then I figured something more wired. The IPv4 ID field has been set to 0!</p>\n\n<p>I thought it might be because of the don't fragment effect (because no packet is going to be fragmented).</p>\n\n<p>Then I started Openvpn program and sniffed its packets at the server but the packets had IPv4 ID != 0 while don't fragment was set.</p>\n\n<p>Do you guys have any idea that why is this happening to me?!</p>\n\n<p>Edit: Here is another sample of a large packet at server copy and pasted from tshark result. </p>\n\n<pre><code>Frame 1049: 1514 bytes on wire (12112 bits), 1514 bytes captured (12112 bits) on interface 0\nEthernet II, Src: server_mac, Dst: gateway_mac\nInternet Protocol Version 4, Src: server_ip, Dst: client_ip\nVersion: 4\nHeader Length: 20 bytes\nDifferentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))\n    0000 00.. = Differentiated Services Codepoint: Default (0x00)\n    .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)\nTotal Length: 1500\nIdentification: 0x0000 (0)\nFlags: 0x02 (Don't Fragment)\n    0... .... = Reserved bit: Not set\n    .1.. .... = Don't fragment: Set\n    ..0. .... = More fragments: Not set\nFragment offset: 0\nTime to live: 64\nProtocol: UDP (17)\nHeader checksum: 0xa52d [validation disabled]\n    [Good: False]\n    [Bad: False]\nSource: server_ip\nDestination: client_ip\n[Source GeoIP: Unknown]\n[Destination GeoIP: Unknown]\nUser Datagram Protocol, Src Port: 7554 (7554), Dst Port: 45376 (45376)\nData (1472 bytes)   \n</code></pre>\n\n<p>Like you see, don't fragment has been set, while all packets larger than PMTU are receiving fragmented to client side.</p>\n\n<p>This is a packet trace example of openvpn on the same server. like you see it at least has IPv4 ID calculated!</p>\n\n<pre><code>Frame 3749: 1455 bytes on wire (11640 bits), 1455 bytes captured (11640 bits) on interface 0\nEthernet II, Src: SERVER_MAC, Dst: GATEWAY_MAC\nInternet Protocol Version 4, Src: SERVER_IP, Dst: CLIENT_IP\nVersion: 4\nHeader Length: 20 bytes\nDifferentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))\n    0000 00.. = Differentiated Services Codepoint: Default (0x00)\n    .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)\nTotal Length: 1441\nIdentification: 0xcc96 (52374)\nFlags: 0x02 (Don't Fragment)\n    0... .... = Reserved bit: Not set\n    .1.. .... = Don't fragment: Set\n    ..0. .... = More fragments: Not set\nFragment offset: 0\nTime to live: 64\nProtocol: UDP (17)\nHeader checksum: 0xe252 [validation disabled]\n    [Good: False]\n    [Bad: False]\nSource: SERVER_IP\nDestination: CLIENT_IP\n[Source GeoIP: Unknown]\n[Destination GeoIP: Unknown]\nUser Datagram Protocol, Src Port: 19234 (19234), Dst Port: 46921 (46921)\nData (1413 bytes)\n</code></pre>\n"}, {"tags": ["c", "mips"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1479944820, "post_id": 40775937, "comment_id": 68775678, "body": "<code>char a, c;</code> Make that <code>int</code>. But your (eof) logic is still incorrect ..."}, {"owner": {"reputation": 11, "user_id": 6248900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1715108047cbe1a906c547d56e4871?s=128&d=identicon&r=PG&f=1", "display_name": "carlough", "link": "https://stackoverflow.com/users/6248900/carlough"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1479945286, "post_id": 40775937, "comment_id": 68775792, "body": "I fixed the char to be int (Thanks for that), but what do you mean by the end of file is incorrect? when I run the program it outputs nothing and creates no files, I dont really understand what you mean."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1479948281, "post_id": 40775937, "comment_id": 68776479, "body": "Well, your logic is not incorrect, it is a bit <i>unusual</i>. You maintain a two-character memory by means of getc/ungetc. Normally you could maintain state (count number of consecutive &#39;\\n&#39; s ...) Also the <code>if(lineNum &gt; 9)                  fprintf(output, &quot;%d  &quot;, ++lineNum);             else                  fprintf(output, &quot;%d   &quot;, ++lineNum);</code> looks kind of weird. And most people would use a <code>while(){...}</code> loop instead of your <code>do{...} while();</code> loop"}], "owner": {"reputation": 11, "user_id": 6248900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1715108047cbe1a906c547d56e4871?s=128&d=identicon&r=PG&f=1", "display_name": "carlough", "link": "https://stackoverflow.com/users/6248900/carlough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479944405, "creation_date": 1479944405, "question_id": 40775937, "link": "https://stackoverflow.com/questions/40775937/trouble-with-c-program-that-reads-a-mips-instructions-outputs-file-with-line-nu", "title": "Trouble with C program that reads a MIPS instructions, outputs file with line number, and summary", "body": "<p>The problem: Use a c program to read a MIPS instruction file, output it to a second file (both are command line arguments) which contains the contents of the MIPS file, with line numbers. The second half is supposed to display a cross reference table, which details the identifier, the definition(a number), and the usage of that identifier, by line number, for any identifier used more than once.</p>\n\n<p>Unfortunately, I've run aground, and the program not only doesnt seem to actually print anything, but it doesnt seem to make any files either. This is a bit of a last ditch effort, to see if anyone else can help me out. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n/*Func line takes in a file, and places a line number at the beginning of every\nnon blank line */\n\nvoid line(FILE *input, FILE *output) {  \n    char a, c;\n    int lineNum = 0;\n    int startOfLine = 1;\n    char ch;\n    fprintf(output, \"%d  \", ++lineNum);\n\n    //copy the contents of the input file into the output file\n    do {\n        a = fgetc(input);\n        fputc(a, output);\n        c = getc(input);\n        if(a == '\\n' &amp;&amp; c != '\\n') {\n            if(lineNum &gt; 9) \n                fprintf(output, \"%d  \", ++lineNum);\n            else \n                fprintf(output, \"%d   \", ++lineNum);\n        }\n        ungetc(c, input);\n    } while (a != EOF);\n    printf(\"ran line: \\n\");\n}\n\n/* Func cross takes in a file, and finds each identifier, marks its definition, and every\nuse and returns that in the output file */\n\nvoid cross(FILE *input, FILE *output) { \n    FILE *temp = fopen(\"temp.txt\", \"a+\"); \n    int lineNum = 0;\n    int startOfLine = 1;\n    char identifier[20][10];\n    char a, c, i;\n    int j, k, p;\n    int size=0;\n    int def[20];\n    int use[20][50];\n    char tempstr[80];\n    fprintf(output, \"Identifier\\tDefinition\\t  Use\\n\");\n\n    fprintf(temp, \"%d   \", ++lineNum);\n    //copy contents of input into a temp file\n    do {\n        a = fgetc(input);\n        fputc(a, temp);\n        c = getc(input);\n        if(a == '\\n' &amp;&amp; c != '\\n') {\n            if(lineNum &gt; 9) \n                fprintf(temp, \"%d  \", ++lineNum);\n            else \n                fprintf(temp, \"%d   \", ++lineNum);\n        }\n        ungetc(c, input);\n    } while (a != EOF);\n\n    fclose(temp);\n    fopen(\"temp.txt\", \"r\");\n\n    j=0;\n\n    //checks to see if current line has an Identifier and if so saves it to an array\n    //along with the line number it was defined on\n    while(fgets(tempstr, 80, temp)) {\n        if(isalpha(tempstr[4]) || tempstr[4] == '_') {\n            sscanf(tempstr, \"%d   %[0-9_A-Z_a-z_]\", &amp;def[j], identifier[j]);\n            j++;\n            size++;\n        }\n    }\n\n    fclose(temp);\n    fopen(\"temp.txt\", \"r\");\n\n    //checks for each identifier, on every line whether or not that identifier is used \n    while(fgets(tempstr, 80, temp)) {\n        char *tempNum;\n        sscanf(tempstr, \"%s\", tempNum);\n        int tempN = atoi(tempNum);\n        int n;\n        p=0;\n        for(n=0; n&lt;size; n++) {\n            if(strstr(tempstr, identifier[n]) &amp;&amp; tempN &gt; def[n] &amp;&amp; tempstr[4] != '#') { \n                use[n][p] = tempN;\n                p++;\n            }\n        }\n    }\n\n    //writes the identifier, definition, and uses to the file\n    for(k=0;k&lt;size;k++) {\n        fprintf(output, \"%s\\t\\t   %d\\t\\t  \", identifier[k], def[k]);\n        for(p=0; p&lt;50; p++) {\n            if(use[k][p] != NULL &amp;&amp; use[k][p] &lt; lineNum &amp;&amp; use[k][p] &gt; def[k])\n                fprintf(output,\"%d \", use[k][p]);\n        }\n        fprintf(output, \"\\n\");\n    }\n    printf(\"ran cross: \\n\");\n} \n\n/*Func both returns the file with numbered lines and a cross reference table at the bottom of the file */\n\nvoid both(FILE *input, FILE *output, char *outputName) {    \n    FILE *lineFile = fopen(\"line.txt\", \"a+\");\n    FILE *crossFile = fopen(\"cross.txt\", \"a+\");\n    char ch;\n    line(input, lineFile);\n    cross(input, crossFile);\n    while( (ch = fgetc(lineFile)) != EOF)\n        fputc(ch, output);\n    fprintf(output, \"\\n\\t\\t\\tCross Reference Table\\n\");\n    while( (ch = fgetc(crossFile)) != EOF)\n        fputc(ch, output);\n    fclose(output);\n    printf(\"ran both: \\n\");\n} \n\nint main(int argc, char * argv[]) {\n    FILE *input, *output;\n    output = fopen(argv[4], \"a+\"); \n    char outputName[50];\n    strcpy(outputName, argv[4]);\n\n    //Error testing\n    if(argc &gt; 5)\n        exit(1);\n    if(strcmp(argv[2], \"-l\") != 0 &amp;&amp; strcmp(argv[2], \"-c\") != 0 &amp;&amp; strcmp(argv[2], \"-b\") != 0) { \n        printf(\"Incorrect flag syntax... Exiting\\n\");\n        exit(1);\n    }\n    if((input = fopen(argv[3], \"r+\")) == NULL) { \n        printf(\"Input file could not be opened... Exiting\\n\");\n        exit(1);\n    }\n    else {\n        if(strcmp(argv[2], \"-l\") == 0) {\n            line(input, output);\n        }\n        else if(strcmp(argv[2], \"-c\") == 0) \n            cross(input, output);\n        else {\n            both(input, output, outputName);\n        }\n    } \n    printf(\"ran main: \\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 1, "creation_date": 1479945069, "post_id": 40775912, "comment_id": 68775746, "body": "For Linux and most other systems, you&#39;d want to use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/nftw.html\" rel=\"nofollow noreferrer\"><code>nftw()</code></a>. You can use the <code>fn</code> argument to refer to a function that, if the name matches your filename, operates on the file."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1479945753, "post_id": 40775912, "comment_id": 68775893, "body": "If you want to make it by yourself iterate through directories (<code>opendir</code>, <code>readdir</code>, <code>closedir</code>) and parse the metadata of links (<code>stat</code>)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1479947139, "post_id": 40776215, "comment_id": 68776215, "body": "Of course, you&#39;d validate the return value of <code>strstr()</code> to ensure that you&#39;re not dealing with <i>ifindMe.txt</i> or <i>dont_findMe.txt</i>. :-)"}, {"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 0, "creation_date": 1479960548, "post_id": 40776215, "comment_id": 68779357, "body": "@ChronoKitsune Error checking is indeed important! ...and left out of most of my SO answers :S"}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1479966741, "post_id": 40776215, "comment_id": 68781166, "body": "It was merely a comment to inform the OP that the code presented was merely a demonstration of how to use <code>nftw()</code> to achieve a simpler goal, not a criticism. :-)"}], "tags": [], "owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "is_accepted": true, "score": 1, "last_activity_date": 1479946367, "creation_date": 1479946367, "answer_id": 40776215, "question_id": 40775912, "link": "https://stackoverflow.com/questions/40775912/how-do-i-find-instances-of-a-file-in-directory-sub-directories-in-c/40776215#40776215", "title": "How do I find instances of a file in directory/sub-directories in C?", "body": "<p>Here's an example with <code>ntfw()</code>.</p>\n\n<pre><code>#define _XOPEN_SOURCE 500\n#include &lt;ftw.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n\nstatic int display_info(const char *fpath, const struct stat *sb, int tflag, struct FTW *ftwbuf){\n    char *fileName = \"findMe.txt\";\n    /* fpath holds the full path of the file from the specified starting directory */\n    if ( strstr(fpath, fileName) ){\n        printf(\"Match found!\\n\");\n    }\n    return 0;\n}\n\nint main(int argc, char **argv){\n    /* If a starting directory isn't specified, use the current dir */\n    if (nftw((argc &lt; 2) ? \".\" : argv[1], display_info, 20, 0) == -1) {\n        perror(\"nftw\");\n        exit(EXIT_FAILURE);\n    }\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5469576"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 40776215, "answer_count": 1, "score": 0, "last_activity_date": 1479946367, "creation_date": 1479944275, "question_id": 40775912, "link": "https://stackoverflow.com/questions/40775912/how-do-i-find-instances-of-a-file-in-directory-sub-directories-in-c", "title": "How do I find instances of a file in directory/sub-directories in C?", "body": "<p>So I have a program, and with a passed filename, I need to find/open all files with that name that exist in the current directory and all sub-directories.</p>\n\n<p>I do not know the names of the subdirectories. I do not care about their names or any other files, I just need to be able to open all files with the passed name.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "file", "file-io"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1479943261, "post_id": 40775722, "comment_id": 68775197, "body": "Why do you replace the filename <i>after</i> opening the file?  Your program may be creating a file somewhere, but w/o knowing how <code>streamNodeList</code> is called, can&#39;t say where."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1479943370, "post_id": 40775722, "comment_id": 68775229, "body": "Why open a file in <code>getLinkedListsize</code> when there is absolutely no IO operation therein. And you leak the <code>FILE*</code> returned from the <code>fopen</code> as well, which isn&#39;t good either, and probably part of your problem."}, {"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479943435, "post_id": 40775722, "comment_id": 68775248, "body": "The reason was so i can track back from the name of the text file which i&#39;m assigning to the file ptr."}, {"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479943587, "post_id": 40775722, "comment_id": 68775305, "body": "@WhozCraig- thank you i&#39;ll do that."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1479943787, "post_id": 40775722, "comment_id": 68775377, "body": "This won&#39;t &quot;print to the text file&quot; either when everything is finally fixed. That <code>fwrite</code> will write the memory backdrop of whatever your structure looks like to the file. I that structure contains pointers, that certainly isn&#39;t going to bode well. And if it contains scalars, their platform-dependent byte ordering will be written. I&#39;m not convinced <code>fwrite</code> is your friend for this task."}, {"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479944412, "post_id": 40775722, "comment_id": 68775547, "body": "@WhozCraig- ok how about fprintf?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479953396, "post_id": 40775722, "comment_id": 68777654, "body": "<code>FILE* fp = fopen(filename,&quot;r+&quot;);</code> requires the file to exist, does it not?  Does the file exist?  You don&#39;t check whether the <code>fopen()</code> succeeds or not.  However, that&#39;s mostly tangential since you don&#39;t read from that file (but if it is opened, you leak the file stream \u2014 you should check that the open was successful and close before return if it was successful).  Your size calculation is not going to be useful. You don&#39;t show the structure, but the <code>fwrite()</code> isn&#39;t going to honour string lengths. If the elements are arrays, the whole array will be written; if pointers, just the pointer."}, {"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1480081509, "post_id": 40775722, "comment_id": 68833619, "body": "@jonathan Leffler- In my edited code I have fopen, checked for file and then the closed file. Then deleted getLinkListSize funcion, size_t stram from stramNodeList and fwrite then used sprintf, fprintf. As a result it creates the file but don&#39;t write to it. The file contains some garbage value."}], "owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479953135, "creation_date": 1479943069, "last_edit_date": 1479953135, "question_id": 40775722, "link": "https://stackoverflow.com/questions/40775722/write-doubly-linked-list-to-a-file", "title": "write doubly linked list to a file", "body": "<p>I am trying to write a doubly linked list to a textfile.txt\nI'm not getting any errors but it is not creating the text file either. The file should simply print in the text file. </p>\n\n<pre><code>int getLinkedListsize(char *filename, struct student_record_node* head)\n{\n      FILE* fp = fopen(filename,\"r+\");\n      struct student_record_node* hit=head;\n      int size=0;\n      char buffer[2000];\n\n      while(hit!=NULL)\n      {\n        size += sizeof(head-&gt;record_-&gt;student_id_) +\n                sizeof(head-&gt;record_-&gt;student_age_) +\n                strlen(head-&gt;record_-&gt;first_name_) +\n                strlen(head-&gt;record_-&gt;last_name_);\n        hit=hit-&gt;next_;\n      }\n      return size;\n}\n\nvoid streamNodeList(char *fileName, struct student_record_node* head)\n{\n\n      struct student_record_node* iteration= head;\n      size_t stream_size=getLinkedListsize(fileName,head);\n\n      FILE* fp = fopen(fileName , \"wb\");\n      fileName=\"sort_age.txt\";\n      fwrite(&amp;stream_size,1,sizeof(size_t),fp);\n      while(iteration !=NULL)\n      {\n              fwrite(&amp;(iteration-&gt;record_),1,sizeof(iteration-&gt;record_),fp);\n              iteration =(iteration-&gt;next_);\n      }\n\n      fclose(fp);\n}\n</code></pre>\n"}, {"tags": ["c", "sum"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479942610, "post_id": 40775530, "comment_id": 68775000, "body": "What does this have to do with the Expect scripting tool?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1479942610, "post_id": 40775530, "comment_id": 68775001, "body": "<code>sum_even_cubes_rec(n)</code> in <code>sum_even_cubes_rec(n)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "is_accepted": false, "score": 0, "last_activity_date": 1479944880, "last_edit_date": 1479944880, "creation_date": 1479944496, "answer_id": 40775956, "question_id": 40775530, "link": "https://stackoverflow.com/questions/40775530/c-check-expect-i-and-segmentation-fault-core-dumped/40775956#40775956", "title": "C - Check_expect_i and segmentation fault (core dumped)", "body": "<p>I'm not entirely sure what the objective is of this program, but a really easy way to write successful programs is to work with a solid foundation and build upon it.</p>\n\n<p>Below is a program that iteratively calculates the cube of a number. You could also simply return the number multiplied by itself 3 times or <code>(x*x*x)</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint simpleCube(int x){\n    return (x*x*x);\n}\n\nint iterativeCube(int x, int n){\n    int i, total = 1;\n    for (i = 0; i &lt; n; i++){\n        total *= x;\n    }\n    return total;\n}\n\nint main(){\n    printf(\"2 Cubed is %d\\n\", iterativeCube(2, 3));\n    return 0;\n}\n</code></pre>\n\n<p>Here is a program that calculates the cube of a number using <code>math.h</code>'s <code>pow()</code> function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(){\n    int base = 2, exponent = 3, result;\n    result = pow(base, exponent);\n    printf(\"%d^%d = %d\\n\", base, exponent, result);\n    return 0;\n}\n</code></pre>\n\n<p>If you want to sum up all of the cubes from 1 to n:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(){\n    int i, n = 10, result, totalEven = 0, totalOdd = 0;\n    for (i = 1; i &lt; n; i++){\n        if (i % 2 == 0){\n            /* The number is even */\n            result = pow(i, 3);\n            totalEven += result;\n        } else {\n            /* The number is odd */\n            result = pow(i, 3);\n            totalOdd += result;\n        }\n    }\n    printf(\"The sum of all even cubes from 1 to %d is %d.\\n\", n, totalEven);\n    printf(\"The sum of all odd cubes from 1 to %d is %d.\\n\", n, totalOdd);\n    printf(\"The sum of all cubes from 1 to %d is %d.\\n\", n, totalEven+totalOdd);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5697920, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a0a342c1306a96e03a00f5187c128104?s=128&d=identicon&r=PG&f=1", "display_name": "Olscream", "link": "https://stackoverflow.com/users/5697920/olscream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1480117598, "creation_date": 1479941912, "last_edit_date": 1480117598, "question_id": 40775530, "link": "https://stackoverflow.com/questions/40775530/c-check-expect-i-and-segmentation-fault-core-dumped", "title": "C - Check_expect_i and segmentation fault (core dumped)", "body": "<p>I tried to do a short a program in <strong>C</strong> in order to create functions to calculate a sum of cube of numbers (like 2*2*2 for example) but I got this message when I tried to launch the program:</p>\n\n<blockquote>\n  <p>\"segmentation default (core dumped)\"</p>\n  \n  <p>sum_even_cubes.c, line 14: check passed sum_even_cubes.c, line 15:\n  check passed sum_even_cubes.c, line 16: check passed sum_even_cubes.c,\n  line 17: check passed sum_even_cubes.c, line 18: check passed</p>\n  \n  <p>sum_even_cubes.c, line 56: check passed sum_even_cubes.c, line 57:\n  check passed Segmentation fault (core dumped)</p>\n</blockquote>\n\n<p>Below my program in <strong>C</strong> : (the bug occurs probably at the function sum_even_cubes_rec() )</p>\n\n<pre><code>#include \"base.h\"\n\nint sum_even_cubes(int n);\n\nvoid sum_even_cubes_test(void) {\n// a)\n\ncheck_expect_i(sum_even_cubes(0), 0);\ncheck_expect_i(sum_even_cubes(1), 0);\ncheck_expect_i(sum_even_cubes(2), 8);\ncheck_expect_i(sum_even_cubes(3), 8);\ncheck_expect_i(sum_even_cubes(4), 72);\n}\nint sum_even_cubes(int n) {\n  // b)\n\n int sum_even_cubes = 0 ;\n\nif(n%2==0){\n    for(int i=0 ; i&lt;=n ; i+=2){\n        sum_even_cubes = ( sum_even_cubes + ( i*i*i ) );\n    }\n\n    return sum_even_cubes;\n   }\n\nif(n%2!=0){\n\n    for(int i=0 ; i&lt;=(n-1) ; i+=2){\n        sum_even_cubes = ( sum_even_cubes + ( i*i*i ) );\n    }\n\n    return sum_even_cubes;\n\n}\n\nreturn 404;\n}\nint sum_even_cubes_rec(int n);\n\nvoid sum_even_cubes_rec_test(void) {\n// a)\n\ncheck_expect_i(sum_even_cubes_rec(0), 0);\ncheck_expect_i(sum_even_cubes_rec(1), 0);\ncheck_expect_i(sum_even_cubes_rec(2), 8);\ncheck_expect_i(sum_even_cubes_rec(3), 8);\ncheck_expect_i(sum_even_cubes_rec(4), 72);} \n\n   int sum_even_cubes_rec(int n) {\n    // c)\n\n\n\nif(n%2==0){\n\n    if(n==0){return 0;}\n\n    if(n!=0){return ( sum_even_cubes_rec(n) + sum_even_cubes_rec((n-2))         )         ;}\n\n}\n\nif(n%2!=0){\n\n    if(n==1){return 0;}\n\n    if(n!=1){return ( sum_even_cubes_rec((n-1)) + sum_even_cubes_rec((n-3)) ) ;}\n\n}\n\nreturn 404;\n   }\n   int sum_even_cubes_rec2(int n, int acc);\n\n   void sum_even_cubes_rec2_test(void) {\n// a)\ncheck_expect_i(sum_even_cubes_rec2(0,0), 0);\ncheck_expect_i(sum_even_cubes_rec2(1,0), 0);\ncheck_expect_i(sum_even_cubes_rec2(2,0), 8);\ncheck_expect_i(sum_even_cubes_rec2(3,0), 8);\ncheck_expect_i(sum_even_cubes_rec2(4,0), 72);\n  }\n\n  int sum_even_cubes_rec2(int n, int acc) {\n// d)\n\nif(n%2==0){\n\n    if(n==0){return acc;}\n\n    if(n!=0){return ( sum_even_cubes_rec2(n-2, acc + n*n*n) );}\n\n}\n\nif(n%2!=0){\n    if(n==1){return acc;}\n\n    if(n!=1){return ( sum_even_cubes_rec2(n-2, acc + (n-1)*(n-1)*(n-1)) )        ;}\n\n}\n\nreturn 404;\n    }\n\n\nint main(void) {\nsum_even_cubes_test();\nprintf(\"\\n\");\nsum_even_cubes_rec_test();\nprintf(\"\\n\");\nsum_even_cubes_rec2_test();\n    }\n</code></pre>\n\n<p>Sorry for the source code, I didn't get how to highlight it completely as <strong>C</strong> programming source code.</p>\n"}, {"tags": ["c", "algorithm", "sorting", "linked-list", "mergesort"], "comments": [{"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1479942596, "post_id": 40775226, "comment_id": 68774996, "body": "You know there&#39;s a difference between swapping the first and last element and swapping them... You should define whether you&#39;re talking about swapping two elements in a circular list or rotating a list, which would mean moving <b>all</b> elements in the list."}, {"owner": {"reputation": 19, "user_id": 7202516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbe3150407efdbf15c9c1dc3bcaf6ea?s=128&d=identicon&r=PG&f=1", "display_name": "Hector Hansen", "link": "https://stackoverflow.com/users/7202516/hector-hansen"}, "reply_to_user": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1479943014, "post_id": 40775226, "comment_id": 68775133, "body": "@Paul I have updated my message, thanks"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1479947032, "post_id": 40775226, "comment_id": 68776203, "body": "You don&#39;t list any logic among the operations available, nor any operations for maintaining auxiliary storage.  If you have auxiliary storage and can perform arbitrary logic, then the operations you describe are sufficient to perform a merge sort.  If your alternatives are more limited, on the other hand, then you have not provided enough information to answer the question."}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1479952289, "post_id": 40775226, "comment_id": 68777398, "body": "@HectorHansen I&#39;d highly recommend you use Bubble-Sort for a simple reason: your data-structure doesn&#39;t provide RAM-behavior. You can of course emulate swaps between random positions in the list and other RAM-behavior, but the inefficiency that is caused by this can&#39;t be compensated by any algorithm, as efficient as it might be. Bubble-Sort would require <code>O(n ^ 2)</code> swaps and same amount of rotations. I&#39;m dreaded by the thought of calculating the complexity of Merge-Sort in these terms. Merge-Sort is just extremely complicated to implement and even slower than Bubble-Sort here!!!"}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1479952836, "post_id": 40775226, "comment_id": 68777553, "body": "It&#39;s a bit late, I&#39;ll post sample-implementations of both algorithms tomorrow."}, {"owner": {"reputation": 19, "user_id": 7202516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbe3150407efdbf15c9c1dc3bcaf6ea?s=128&d=identicon&r=PG&f=1", "display_name": "Hector Hansen", "link": "https://stackoverflow.com/users/7202516/hector-hansen"}, "reply_to_user": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1480032532, "post_id": 40775226, "comment_id": 68813971, "body": "@Paul Why linked list isn&#39;t not optimized for merge sort ? And how I can use bubblesort with the best time complexity ?"}], "owner": {"reputation": 19, "user_id": 7202516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbe3150407efdbf15c9c1dc3bcaf6ea?s=128&d=identicon&r=PG&f=1", "display_name": "Hector Hansen", "link": "https://stackoverflow.com/users/7202516/hector-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479962671, "creation_date": 1479940287, "last_edit_date": 1479942849, "question_id": 40775226, "link": "https://stackoverflow.com/questions/40775226/use-merge-sort-to-sort-a-list-with-only-swap-and-rotation-and-one-another-list", "title": "Use merge sort to sort a list with only swap and rotation and one another list", "body": "<p>I have two list : list A containing a set of random numbers and list B empty. I have to sort the list A.</p>\n\n<p>I can make limited operations on these two lists like : </p>\n\n<ul>\n<li>move the first element of list A or B at the beginning of the list B or A</li>\n<li>swap the two first elements of list A or B like <code>32 41 8 9</code> become <code>41 32 8 9</code> </li>\n<li>make the last element of list A or B become the first in this list (rotation) like <code>32 41 8 9</code> become <code>9 32 41 8</code></li>\n<li>make the first element of list A or B become the last one in this list (rotation) like <code>32 41 8 9</code> become <code>41 8 9 32</code></li>\n</ul>\n\n<p>I have already set up an algorithm to sort the list A using the list B as the stack and the set of allowed operations, but it takes time when the list becomes large (more than 1000 elements) and is therefore not performing at all.</p>\n\n<p>So I looked on the side of the merge sort which is very nice for its performance with the linked lists that I use.</p>\n\n<p>The problem is that the use of this one needs to cut lists into other sublists, but in my case I have the right only has two lists and the operations that I explained.</p>\n\n<p>Is it possible to make a effective merge sort according to the guidelines? How to make this algorithm?</p>\n"}, {"tags": ["c", "string", "memory", "alphabetical", "lexicographic"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1479939492, "post_id": 40774974, "comment_id": 68773957, "body": "You do not save the input string into  array of <code>str</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1479939810, "post_id": 40774974, "comment_id": 68774076, "body": "In addition, <code>abc</code> is uninitalised the first time the <code>while</code> loop runs. Turn up your compiler warnings and fix all of them before posting a question. And learn to use a debugger. The problems should be clear if you had used a debugger."}, {"owner": {"reputation": 1424, "user_id": 3241487, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/45b267006bb15bc14c8b3e892cbe2f03?s=128&d=identicon&r=PG&f=1", "display_name": "DIMMSum", "link": "https://stackoverflow.com/users/3241487/dimmsum"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1479941692, "post_id": 40774974, "comment_id": 68774715, "body": "@WhozCraig Was that sarcasm really necessary? Also, &#39;datum&#39; is not correct in your sentence. It should be the plural &#39;data&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 7201722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbc8240def064dac57c671f913cec88?s=128&d=identicon&r=PG&f=1", "display_name": "Nuggets10", "link": "https://stackoverflow.com/users/7201722/nuggets10"}, "edited": false, "score": 0, "creation_date": 1479947792, "post_id": 40776096, "comment_id": 68776371, "body": "Thank you for going over my mess! I appreciate it, will fix up all the problems!"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1479945484, "creation_date": 1479945484, "answer_id": 40776096, "question_id": 40774974, "link": "https://stackoverflow.com/questions/40774974/sorting-user-input-in-lexicographical-returning-memory-characters/40776096#40776096", "title": "Sorting user input in lexicographical returning memory characters?", "body": "<p>The code has the following serious issues:  </p>\n\n<ul>\n<li>the <code>str</code> array of string is not initialized. It may contain full garbage, including strings with no null terminator. </li>\n<li>later statements iterate through all these garbage strings, which might (and does in general) not end so well... </li>\n<li>your \"lowering\" loop as you don't processes the array of strings as if it was a single string.  </li>\n<li>you read a lot of strings in a temporary variable, but you don't do anything with them.  </li>\n</ul>\n\n<p>To solve this, you need to keep track of the number of items in your arrays and iterate only through the valid strings:  </p>\n\n<pre><code>int n=0;\nwhile (scanf(\"%24s\", abc)&gt;0 &amp;&amp; strncmp(abc, \"stop\", 5) != 0) {\n    strncpy (str[n++], abc, 25); \n}\n\nfor (i = 0; i &lt; n; ++i)\n     for (k = i + 1; k &lt; n; ++k) {\n         ...\n     }\n     ...\n}\nfor (i =0; i&lt;n; i++) \n    for (p = str[i]; *p != '\\0'; p++)\n        *p = (char) tolower(*p);\n...\nfor (i = 0; i &lt; n; ++i) {\n        puts(str[i]);\n}\n...\n</code></pre>\n\n<p>Here an <a href=\"http://ideone.com/TKZR3O\" rel=\"nofollow noreferrer\">online demo</a></p>\n"}], "owner": {"reputation": 81, "user_id": 7201722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbc8240def064dac57c671f913cec88?s=128&d=identicon&r=PG&f=1", "display_name": "Nuggets10", "link": "https://stackoverflow.com/users/7201722/nuggets10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 40776096, "answer_count": 1, "score": 0, "last_activity_date": 1479945484, "creation_date": 1479939041, "last_edit_date": 1479939231, "question_id": 40774974, "link": "https://stackoverflow.com/questions/40774974/sorting-user-input-in-lexicographical-returning-memory-characters", "title": "Sorting user input in lexicographical returning memory characters?", "body": "<p>I am attempting to alphabetically sort user input with a maximum of 10,000 words and a max length of 25 words. I am using 'stop' to end user input prematurely which is running me into some issues. The current program results in the following as output when I try to input hello stop</p>\n\n<pre><code> \u2592l\u2592\n0\u2592l\u2592\nA{\u2592\ne\u2592\n\n\n\n\u2592&amp;\n\u2592\u2592\n\u2592\u2592\n\u2592\u2592\n\u2592\u2592\n\u2592l\u2592\n\u2592l\u2592\n\u2592\u2592;\n\u2592Se\u2592\n\u2592\n\u2592\n\u2592\n\u2592\n\n\n\n\n\n\u2592!\n\u040cl\u2592\n\u2592\n\u2592\n\u2592\n\u2592.X\n\n\u2592\n</code></pre>\n\n<p>I am assuming this has to do with my memory allocation but I am not too sure and couldn't find some answers regarding this. Any help would be appreciated, the following is my code (feel free to ignore the lowercase pointer, still working on getting the output to turn into lowercases!)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n//for using tolower\n#include &lt;ctype.h&gt;\nint main() {\n    int i, k, j;\n    char abc[25];\n    const char *stop = \"stop\";\n    char *p; //using for lowercase\n    //using 2d array for max of 10,000 words, max size of words 25\n    char str[10000][25], temp[25];\n\n    printf(\"Enter up to 10000 words, type stop to enter the current words:\\n\");\n    while (strncmp(abc, \"stop\", 5) != 0) {\n        scanf(\"%s\", abc);\n    }\n        //for (i = 0; i &lt; 10000; ++i)\n            //scanf(\"%s[^\\n]\", str[i]);\n\n        for (i = 0; i &lt; 10000; ++i)\n            for (k = i + 1; k &lt; 10000; ++k) {\n                //comparing two strings using strcmp() function is used\n                //using strcpy() to copy string to a temp\n                if (strcmp(str[i], str[k]) &gt; 0) {\n                    strcpy(temp, str[i]);\n                    strcpy(str[i], str[k]);\n                    strcpy(str[k], temp);\n                }\n            }\n\n        //using pointer to converting to lowercase\n        //src: https://www.daniweb.com/programming/software-development/threads/57296/how-does-one-tolower-an-entire-string\n        for (p = str; *p != '\\0'; p++)\n            *p = (char) tolower(*p);\n\n        //printing words in lexi order\n        printf(\"\\nWords in lexicographical order: \\n\");\n        for (i = 0; i &lt; 10000; ++i) {\n            puts(str[i]);\n        }\n        printf(\"WARNING: Words longer than 25 in length were ignored. \\n\");\n\n        return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "sqlite", "char", "calloc"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1479938766, "post_id": 40774835, "comment_id": 68773707, "body": "Just use <a href=\"http://stackoverflow.com/documentation/sqlite/5456/sqlite3-stmt-prepared-statement-c-api/19406/reading-data-from-a-cursor\">cursors</a>."}, {"owner": {"reputation": 13, "user_id": 3434584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BjxAY.jpg?s=128&g=1", "display_name": "TimmyG", "link": "https://stackoverflow.com/users/3434584/timmyg"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1479944501, "post_id": 40774835, "comment_id": 68775582, "body": "@CL. I&#39;m not sure that I understand what you mean by cursors. Like I said in my post I can switch to the <code>step()</code> type method like in your example but my issue of storing is still there."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1479973411, "post_id": 40774835, "comment_id": 68784244, "body": "What does the query return? One row or multiple rows? And are the values strings or numbers?"}], "owner": {"reputation": 13, "user_id": 3434584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BjxAY.jpg?s=128&g=1", "display_name": "TimmyG", "link": "https://stackoverflow.com/users/3434584/timmyg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479938436, "creation_date": 1479938436, "question_id": 40774835, "link": "https://stackoverflow.com/questions/40774835/storing-the-result-of-a-select-statement-in-single-string-using-sqlite3-in-c", "title": "Storing the result of a SELECT statement in single string using SQLite3 in C", "body": "<p>I'm curious if you can store the result of a SQL statement as a single \"string\" in C. I'm working on a networks project where I need to be able to query the number of available seats in a plane and have the server return it to the client in a single string. I'm a Java programmer and the lack of strings in C is really stressing me out. </p>\n\n<pre><code>static int callback(void *NotUsed, int argc, char **argv, char **azColName) {\n    printf(\"%s \", argv[0]);\n    return 0;\n}\n\nstatic void querySeatsAvailable(sqlite3 *db, int flightNumber) {\n    char *zErrMsg = 0;\n    int  dbCheck;\n    char *sql;\n\n    switch(flightNumber) {\n        case 1: \n            sql = \"BEGIN TRANSACTION;\" \\\n                \"SELECT seat_number FROM plane1 WHERE is_available=1;\";\n            break;      \n    }\n\n    // Execute SQL statement \n    dbCheck = sqlite3_exec(db, sql, callback, 0, &amp;zErrMsg);\n    if( dbCheck != SQLITE_OK &amp;&amp; dbCheck != SQLITE_BUSY){\n        printf(\"SQL error: %s\\n\", zErrMsg);\n        sqlite3_free(zErrMsg);\n    } else {\n        printf(\"SQL executed successfully\\n\");\n    }\n}\n</code></pre>\n\n<p>I'm currently using the <code>sqlite3_exec</code> on a SQL query string and wanting to use the <code>callback</code> function to do my dirty work, but I can easily move things around to use <code>prepare</code> and <code>step</code>. Callback is currently printing to the screen exactly what I would like put into a string to return to the client, that is `1 2 3 4 5'. </p>\n\n<p>The better and more solid idea I have is as follows:</p>\n\n<p>Create a <code>char *str</code> pointer as a global variable and when I set <code>sql</code>, set the size of the array to the known number of seats in the plane like so: <code>str = (char*)calloc(4, sizeof(char));</code>, then assign each call of callback to an space in <code>str</code>. Callback would change as follows:</p>\n\n<pre><code>    int tick = 0;\n    static int callback(void *NotUsed, int argc, char **argv, char **azColName){\n        str[tick] = argv[0];\n        tick++;\n        return 0; }\n</code></pre>\n\n<p>However I'm getting the following warning: <code>warning: assignment makes integer from pointer without a cast [-Wint-conversion]\n      str[tick] = argv[0];\n            ^</code></p>\n\n<p>My other idea is to use sprintf to print to a buffer and somehow get that buffer back to the client. However, I don't know how to make a <code>char</code> buffer or translate that to a string and I can't find anything to help.</p>\n\n<p>ANYWHO, some assistance would be awesome. I'm beating my head against a wall here.</p>\n"}, {"tags": ["c", "arrays", "rotation"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1479938976, "post_id": 40774788, "comment_id": 68773778, "body": "Since the only thing that matters is the output from the program, you don&#39;t even need to rotate the contents of the array. Just print from <code>k</code> to <code>n-1</code>, and then print from <code>0</code> to <code>k-1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6253817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d229953a77de799338ce34dca30c1c99?s=128&d=identicon&r=PG&f=1", "display_name": "qazwsx123", "link": "https://stackoverflow.com/users/6253817/qazwsx123"}, "edited": false, "score": 0, "creation_date": 1479939315, "post_id": 40774870, "comment_id": 68773898, "body": "I still don&#39;t understand. Why can&#39;t I use the same index for both loops, it references the same array"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 9, "user_id": 6253817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d229953a77de799338ce34dca30c1c99?s=128&d=identicon&r=PG&f=1", "display_name": "qazwsx123", "link": "https://stackoverflow.com/users/6253817/qazwsx123"}, "edited": false, "score": 0, "creation_date": 1479939483, "post_id": 40774870, "comment_id": 68773953, "body": "@qazwsx123 In the outer loop the index should be changed from like 0, 1 and so on/  However after executing the inner loop you will not get that the next value of the index for the outer loop was increased by one."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1479938968, "last_edit_date": 1479938968, "creation_date": 1479938616, "answer_id": 40774870, "question_id": 40774788, "link": "https://stackoverflow.com/questions/40774788/arrays-left-rotation-in-c/40774870#40774870", "title": "Arrays: Left Rotation in C", "body": "<p>If you have an array with <code>n</code> elements then the valid range of indices to access elements of the array is <code>[0, n-1]</code>.</p>\n\n<p>Thus the loops in your program in most cases use invalid ranges of indices.</p>\n\n<p>Also you are using the same variable <code>a_i</code> for two nested loops that will give incorrect index for the outer loop</p>\n\n<pre><code>for(a_i = 0; a_i &lt;= k; a_i++){\n    temp = a[0];\n    for(a_i = 0; a_i &lt; n-1; a_i++) {\n        a[a_i] = a[a_i+1];\n    }\n    a[a_i] = temp;   \n}\n</code></pre>\n\n<p>Also this statement</p>\n\n<pre><code>for(a_i = 0; a_i &lt;= k; a_i++){\n</code></pre>\n\n<p>sets <code>k + 1</code> iterations instead of <code>k</code> iterations.</p>\n"}, {"comments": [{"owner": {"reputation": 7441, "user_id": 1575353, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rvz3i.png?s=128&g=1", "display_name": "S\u1d00\u1d0d On\u1d07\u1d0c\u1d00", "link": "https://stackoverflow.com/users/1575353/s%e1%b4%80%e1%b4%8d-on%e1%b4%87%e1%b4%8c%e1%b4%80"}, "edited": false, "score": 0, "creation_date": 1501079189, "post_id": 42623536, "comment_id": 77621324, "body": "Please try to avoid just dumping code as an answer and try to explain what it does and why. Your code might not be obvious for people who do not have the relevant coding experience. Please edit your answer to include <a href=\"https://stackoverflow.com/help/how-to-answer\">clarification, context and try to mention any limitations, assumptions or simplifications in your answer.</a>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1505134055, "post_id": 42623536, "comment_id": 79273939, "body": "This is C question. This is not C answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 7641175, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cpz0f1NSqyA/AAAAAAAAAAI/AAAAAAAACFM/6Y-qBXR0vgU/photo.jpg?sz=128", "display_name": "Ashishkumar Teotia", "link": "https://stackoverflow.com/users/7641175/ashishkumar-teotia"}, "is_accepted": false, "score": -1, "last_activity_date": 1501079127, "last_edit_date": 1501079127, "creation_date": 1488797099, "answer_id": 42623536, "question_id": 40774788, "link": "https://stackoverflow.com/questions/40774788/arrays-left-rotation-in-c/42623536#42623536", "title": "Arrays: Left Rotation in C", "body": "<pre><code>public class Solution {\n\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        int arrSize = in.nextInt();\n        int rotation = in.nextInt();\n\n\n        int arr[] = new int[arrSize];\n\n        for(int arr_i=0; arr_i &lt; arrSize; arr_i++){\n            arr[arr_i] = in.nextInt();\n        }\n\n        int temp = 0;\n\n        for(int i = 0; i &lt; rotation; i++){\n            temp=arr[0];\n            for(int j = 0; j &lt; arrSize-1; j++){\n                arr[j] = arr[j+1];        \n            }\n            arr[arrSize-1] = temp;\n\n        }\n\n         for(int arr_i=0; arr_i &lt; arrSize; arr_i++){\n            System.out.println(arr[arr_i]);\n        }   \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7441, "user_id": 1575353, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rvz3i.png?s=128&g=1", "display_name": "S\u1d00\u1d0d On\u1d07\u1d0c\u1d00", "link": "https://stackoverflow.com/users/1575353/s%e1%b4%80%e1%b4%8d-on%e1%b4%87%e1%b4%8c%e1%b4%80"}, "edited": false, "score": 0, "creation_date": 1501079020, "post_id": 45329197, "comment_id": 77621140, "body": "Please try to avoid just dumping code as an answer and try to explain what it does and why. Your code might not be obvious for people who do not have the relevant coding experience. Please edit your answer to include <a href=\"https://stackoverflow.com/help/how-to-answer\">clarification, context and try to mention any limitations, assumptions or simplifications in your answer.</a>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1505134063, "post_id": 45329197, "comment_id": 79273946, "body": "This is C question. This is not C answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 8370493, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioKkgnhQRmA/AAAAAAAAAAI/AAAAAAAAEtM/CDalBRTdxcE/photo.jpg?sz=128", "display_name": "user228490", "link": "https://stackoverflow.com/users/8370493/user228490"}, "is_accepted": false, "score": -1, "last_activity_date": 1501078945, "last_edit_date": 1501078945, "creation_date": 1501077711, "answer_id": 45329197, "question_id": 40774788, "link": "https://stackoverflow.com/questions/40774788/arrays-left-rotation-in-c/45329197#45329197", "title": "Arrays: Left Rotation in C", "body": "<pre><code>using System;\nclass Solution\n{\n\n    static void Main(String[] args)\n    {\n        string[] tokens_n = Console.ReadLine().Split(' ');\n        int n = Convert.ToInt32(tokens_n[0]);\n        int k = Convert.ToInt32(tokens_n[1]);\n        string[] a_temp = Console.ReadLine().Split(' ');\n        int[] a = Array.ConvertAll(a_temp, Int32.Parse);\n        int num = 0;\n        int length = a.Length;\n        int templength = length - (n - k);\n        Console.WriteLine(a[templength]);\n        num = templength + 1;\n        if (num &gt;= length)\n            num = 0;\n        for (int i = 1; i &lt; length; i++)\n        {\n            Console.WriteLine(a[num]);\n            num = num + 1;\n            if (num &gt;= length)\n                num = 0;\n\n        }\n        Console.ReadLine();\n\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8194964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d244a25a89c13e05355fd29cf2ff0390?s=128&d=identicon&r=PG", "display_name": "user8194964", "link": "https://stackoverflow.com/users/8194964/user8194964"}, "is_accepted": false, "score": 0, "last_activity_date": 1505133154, "creation_date": 1505133154, "answer_id": 46155890, "question_id": 40774788, "link": "https://stackoverflow.com/questions/40774788/arrays-left-rotation-in-c/46155890#46155890", "title": "Arrays: Left Rotation in C", "body": "<p>Your loop be like that</p>\n\n<pre><code>   for(a_i=0; a_i&lt;k; a_i++)\n{\n\n    int temp=a[0];\n        for(a_j=0; a_j&lt;n-1; a_j++)\n        {\n        a[a_j] = a[a_j+1];\n         }\n    a[n-1] = temp;\n\n   }\n   for(a_i=0 ; a_i&lt;n ; a_i++)\n   {\n\n    printf(\"%d \",a[a_i]);\n\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7361642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd66e745cadf8f9d170e691c55692722?s=128&d=identicon&r=PG&f=1", "display_name": "Asif Bilakhiya", "link": "https://stackoverflow.com/users/7361642/asif-bilakhiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1513257212, "creation_date": 1513257212, "answer_id": 47814260, "question_id": 40774788, "link": "https://stackoverflow.com/questions/40774788/arrays-left-rotation-in-c/47814260#47814260", "title": "Arrays: Left Rotation in C", "body": "<p><strong>Try This code for for rotating array to left by d times\ni things this one help you!!</strong></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Scanner;\n/**\n *\n * @author Bilakhiya\n */\npublic class LeftRotate {\n\n    /**\n     * @param args the command line arguments\n     */\n\n    static ArrayList&lt;Integer&gt; leftarray(ArrayList&lt;Integer&gt;A1,int n,int d)\n    {\n        for(int j=0;j&lt;d;j++)\n        {\n           leftby1(A1,n);\n\n        }\n        return A1;\n    }\n    static ArrayList&lt;Integer&gt; leftby1(ArrayList&lt;Integer&gt;A1,int n)\n    {\n        int i,temp;\n        temp=A1.get(0);\n        for(i=0;i&lt;n-1;i++)\n        {\n            A1.set(i,A1.get(i+1) );\n        }\n        A1.set(i,temp);\n        return A1;\n    }\n    public static void main(String[] args) {\n        // TODO code application logic here\n      ArrayList&lt;Integer&gt; A=new ArrayList&lt;&gt;();\n      Scanner sc=new Scanner(System.in);\n      int n=sc.nextInt();\n      int d=sc.nextInt();\n      for(int i=0;i&lt;n;i++)\n      {\n          A.add(sc.nextInt());\n      } \n      ArrayList&lt;Integer&gt; B=leftarray(A,n,d);\n      for(int i=0;i&lt;n;i++)\n      {\n          System.out.print(B.get(i)+\" \");\n      }      \n    }   \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9610349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QJNICoPVqU4/AAAAAAAAAAI/AAAAAAAAAEg/PtRTQUsljVs/photo.jpg?sz=128", "display_name": "Abhishek sisodiya", "link": "https://stackoverflow.com/users/9610349/abhishek-sisodiya"}, "is_accepted": false, "score": -1, "last_activity_date": 1523075375, "creation_date": 1523075375, "answer_id": 49703844, "question_id": 40774788, "link": "https://stackoverflow.com/questions/40774788/arrays-left-rotation-in-c/49703844#49703844", "title": "Arrays: Left Rotation in C", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nint i,j,arr[100000],n,d;\nscanf(\"%d\\t%d\",&amp;n,&amp;d);\nfor(i=0;i&lt;n;i++)\n    scanf(\"%d\",&amp;arr[i]);\nfor(i=0;i&lt;d;i++)\n{ \n    int first=arr[0];\n    for(j=0;j&lt;n;j++)\n    {\n        arr[j]=arr[j+1];\n    }\n    arr[n-1]=first;\n}\nfor(i=0;i&lt;n;i++)\n{\n    printf(\"%d\\t\",arr[i]);\n}\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14473461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-h1kxQJ82D5Q/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnqzCYoocjAY5HZFf-fASOcQUdVHA/s96-c/photo.jpg?sz=128", "display_name": "Souda Fathima Kurnool", "link": "https://stackoverflow.com/users/14473461/souda-fathima-kurnool"}, "is_accepted": false, "score": 0, "last_activity_date": 1603875403, "last_edit_date": 1603875403, "creation_date": 1603871547, "answer_id": 64568556, "question_id": 40774788, "link": "https://stackoverflow.com/questions/40774788/arrays-left-rotation-in-c/64568556#64568556", "title": "Arrays: Left Rotation in C", "body": "<p>You may try this:</p>\n<pre><code>int i, result[a_count]; //i --&gt; index\n// a_count --&gt; len of array 'a'\n\nfor(i=0;i&lt;a_count;i++){//d --&gt; number of shifts/characters_to_skip \n\n    result[i]=a[(i+d)%a_count];  //Rotate and save the rotational values in new array\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6253817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d229953a77de799338ce34dca30c1c99?s=128&d=identicon&r=PG&f=1", "display_name": "qazwsx123", "link": "https://stackoverflow.com/users/6253817/qazwsx123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6947, "favorite_count": 0, "answer_count": 7, "score": 0, "last_activity_date": 1603875403, "creation_date": 1479938230, "question_id": 40774788, "link": "https://stackoverflow.com/questions/40774788/arrays-left-rotation-in-c", "title": "Arrays: Left Rotation in C", "body": "<p><a href=\"https://www.hackerrank.com/challenges/ctci-array-left-rotation\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/ctci-array-left-rotation</a></p>\n\n<p>A left rotation operation on an array of size n shifts each of the array's elements   1 unit to the left. For example, if 2 left rotations are performed on array [1,2,3,4,5] , then the array would become [3,4,5,1,2]</p>\n\n<p>Perform k number of rotations and print. </p>\n\n<p>Here's what I got so far but it only goes through one interaction, don't see what I am doing wrong </p>\n\n<pre><code>int main(){\n   int n; //size\n   int k; //number of rotations\n   int a_i; //index\n   scanf(\"%d %d\",&amp;n,&amp;k);\n   int *a = malloc(sizeof(int) * n); //input array\n   for(a_i = 0; a_i &lt;= n; a_i++){\n      scanf(\"%d\",&amp;a[a_i]);\n   }\n\nint temp;\nfor(a_i = 0; a_i &lt;= k; a_i++){\n    temp = a[0];\n    for(a_i = 0; a_i &lt; n-1; a_i++) {\n        a[a_i] = a[a_i+1];\n    }\n    a[a_i] = temp;   \n}\n\nfor(a_i = 0; a_i &lt; n; a_i++){\n    printf(\"%d \", a[a_i]);\n}\n\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "parsing", "segmentation-fault", "token", "memcpy"], "comments": [{"owner": {"reputation": 611, "user_id": 1956727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4995da9fb92c65fbdd49362aee35a8b8?s=128&d=identicon&r=PG", "display_name": "NickStoughton", "link": "https://stackoverflow.com/users/1956727/nickstoughton"}, "edited": false, "score": 0, "creation_date": 1479937095, "post_id": 40774391, "comment_id": 68772998, "body": "Neither <code>token1</code> noir <code>token2</code> is initialized ... they point to random places. Thus when you <code>memcpy</code> to them, you are copying to a random locaion, and you segfault."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479937108, "post_id": 40774391, "comment_id": 68773004, "body": "<code>memcpy(token1, inputBuffer, 4);</code> has no memory allocated to <code>token</code>."}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 1956727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4995da9fb92c65fbdd49362aee35a8b8?s=128&d=identicon&r=PG", "display_name": "NickStoughton", "link": "https://stackoverflow.com/users/1956727/nickstoughton"}, "edited": false, "score": 0, "creation_date": 1479937358, "post_id": 40774580, "comment_id": 68773107, "body": "<code>getline</code> returns the number of characters read, but not including the terminating null byte (&#39;\\0&#39;). So you should add one to the space allocated with malloc() to hold that string terminator."}], "tags": [], "owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "is_accepted": true, "score": 1, "last_activity_date": 1479937538, "last_edit_date": 1479937538, "creation_date": 1479937160, "answer_id": 40774580, "question_id": 40774391, "link": "https://stackoverflow.com/questions/40774391/segfault-in-parsing-char-into-tokens/40774580#40774580", "title": "Segfault in parsing char* into tokens", "body": "<p>You most likely need to allocate memory for token1.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    char *input = NULL;\n\n    size_t len = 0;\n    ssize_t read;\n\n    /* Read in the line \"Hello world\" */\n    read = getline(&amp;input, &amp;len, stdin);\n    printf(\"Retrieved line of length %zu :\\n\", read);\n    printf(\"%s\", input);\n\n    /* Allocate memory for both parts of the string */\n    char *token1 = malloc((read+1) * sizeof(char *));\n    char *token2 = malloc((read+1) * sizeof(char *));\n\n    memcpy(token1, input, 6);\n    printf(\"token: %s\\n\", token1); //prints \"Hello\"\n\n    memcpy(token2, (input+6), 5);\n    printf(\"token: %s\\n\", token2); //prints \"world\"\n\n    free(input);\n    return 0;\n}\n</code></pre>\n\n<p>Read in the line, allocate memory for each string part, and then copy the part you want into your s</p>\n"}], "owner": {"reputation": 157, "user_id": 2512544, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ab33a8a67fe981d389548a747227fd6?s=128&d=identicon&r=PG", "display_name": "Yoink", "link": "https://stackoverflow.com/users/2512544/yoink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 40774580, "answer_count": 1, "score": -1, "last_activity_date": 1479937538, "creation_date": 1479936265, "question_id": 40774391, "link": "https://stackoverflow.com/questions/40774391/segfault-in-parsing-char-into-tokens", "title": "Segfault in parsing char* into tokens", "body": "<p>I'm trying to parse a string around an arbitrary index. In my simplest test program I could come up with I have an input string I read the input into and then do memcpy to parse the string.</p>\n\n<p>For testing this I am typing in \"this text\" as input. readInput is a function where I just have it calling getline(&amp;input, &amp;size, stdnin) and return the input pointer.</p>\n\n<pre><code>int main(){\n    char *input;\n    input = readInput();\n\n    int parseAround = 4;\n    char *token1;\n    char *token2;\n\n    memcpy(token1, inputBuffer, 4);\n    printf(\"token: %s\\n\", token1); //prints \"this\"\n\n    memcpy(token1, inputBuffer + (parseAround+1), 4);\n    //when changed to memcpy(token2,...); segfaults\n    printf(\"token: %s\\n\", token1); //prints \"text\"\n\n\n    free(input);\n    return 0;\n}\n</code></pre>\n\n<p>However when I change the second memcpy to use token2 rather than token1, I get a segmentation fault. Why is this?</p>\n"}, {"tags": ["c", "bcd"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479936133, "post_id": 40774310, "comment_id": 68772568, "body": "Do you know about <a href=\"https://msdn.microsoft.com/en-us/library/w4z2wdyc.aspx\" rel=\"nofollow noreferrer\"><code>strtol</code></a>?"}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479936345, "post_id": 40774310, "comment_id": 68772652, "body": "If @WeatherVane&#39;s comment doesn&#39;t help you, please include a Minimal Complete Verifiable Example (<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>) including the hint, what exactly you do expect from the code."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1479938172, "post_id": 40774310, "comment_id": 68773475, "body": "To convert from decimal to BCD, start with zero result and multiplier 1. In a loop, divide the decimal value by ten, but take the remainder first. Multiply the remainder with the multiplier, and add to result. Multiply multiplier by 16. Repeat loop as long as the decimal value is greater than zero. To convert from BCD to decimal, you do the same, except you divide the BCD value by 16, and multiply the multiplier by 10."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1479938546, "post_id": 40774310, "comment_id": 68773625, "body": "<a href=\"http://stackoverflow.com/questions/1408361/unsigned-integer-to-bcd-conversion\" title=\"unsigned integer to bcd conversion\">stackoverflow.com/questions/1408361/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7186318"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1479940606, "post_id": 40774310, "comment_id": 68774385, "body": "@M.M your link helps :) Thank you so much."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7186318"}, "edited": false, "score": 1, "creation_date": 1479936358, "post_id": 40774346, "comment_id": 68772660, "body": "The code is meant to convert 0x based numbers, For example, BCD(0x1991) which will give you the answer of 6545 . However, I have no clue how to convert 1991 to 0x1991"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1479943119, "post_id": 40774346, "comment_id": 68775153, "body": "@xTiraMissU: That&#39;s not what you asked, even if it is what you meant to ask.  Regardless, what I wrote still applies."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7186318"}, "edited": false, "score": 1, "creation_date": 1479948895, "post_id": 40774346, "comment_id": 68776607, "body": "Thanks. I already fixed that :) Thank you for correcting my mistakes"}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 2, "last_activity_date": 1479936110, "creation_date": 1479936110, "answer_id": 40774346, "question_id": 40774310, "link": "https://stackoverflow.com/questions/40774310/converting-an-integer-to-0x-equivalent-hex/40774346#40774346", "title": "Converting an integer to 0x equivalent (Hex)", "body": "<p>You are using <code>ui</code> as the input and storing the result in <code>result</code>, but then returning <code>value</code>; you should be using <code>value</code> as the input and returning <code>result</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "is_accepted": false, "score": 6, "last_activity_date": 1479936491, "creation_date": 1479936491, "answer_id": 40774434, "question_id": 40774310, "link": "https://stackoverflow.com/questions/40774310/converting-an-integer-to-0x-equivalent-hex/40774434#40774434", "title": "Converting an integer to 0x equivalent (Hex)", "body": "<pre><code>const int input = 1991;\nint i = input;\nint f = 1;\nint result = 0x0;\nwhile( i &gt; 0 )\n{\n    int d = i % 10;\n    result += d * f;\n    f *= 16; \n    i /= 10;\n}\n\nprintf(\"0x%x\", result ); // 0x1991\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 1, "last_activity_date": 1479943154, "creation_date": 1479943154, "answer_id": 40775735, "question_id": 40774310, "link": "https://stackoverflow.com/questions/40774310/converting-an-integer-to-0x-equivalent-hex/40775735#40775735", "title": "Converting an integer to 0x equivalent (Hex)", "body": "<p>Build a string with the 0x prefix, then scan that.</p>\n\n<pre><code>int var, value = 1991;\nchar tmp[100];\nsprintf(tmp, \"0x%d\", value);\nif (sscanf(tmp, \"%i\", &amp;var) != 1) /* error */;\nprintf(\"%d ==&gt; %s ==&gt; %d\\n\", value, tmp, var);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7186318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1479943154, "creation_date": 1479935918, "question_id": 40774310, "link": "https://stackoverflow.com/questions/40774310/converting-an-integer-to-0x-equivalent-hex", "title": "Converting an integer to 0x equivalent (Hex)", "body": "<p>I have an integer input of 1991. How do I convert the input to 0x1991 instead of 7C7? I already wrote the code to convert the hex to decimal(the answer will be 6545)</p>\n\n<pre><code>int ui = 0x202;\nint BCD(int value) //Converting 0xhex to decimal \n{\n    int result = 0;\n    result &lt;&lt;= 4;\n    result |= ui % 10;\n    ui /= 10;\n\n    return value;\n}\n</code></pre>\n"}, {"tags": ["c", "netmask"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1479935485, "post_id": 40774120, "comment_id": 68772267, "body": "Aside: I don&#39;t have an answer but please get into the habit of placing the <code>newline</code> at the <i>end</i> of each <code>printf</code> expression, not at the beginning. What you have is not idiomatic and will mislead you when printing debugging cues."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1479935536, "post_id": 40774120, "comment_id": 68772290, "body": "would something like <code>htonl()</code> or <code>htons()</code> be of any help to you?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479935617, "post_id": 40774120, "comment_id": 68772333, "body": "Your loops seem to be unaware that arrays in C are indexed between <code>0</code> and <code>LEN-1</code> although you have not graced us with the array definitions."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479935887, "post_id": 40774120, "comment_id": 68772452, "body": "There are a lot of &quot;magic numbers&quot; in the code. Can you relate each to some kind of central reference? One thing, <code>numar2!=11111111</code> is not comparing to a binary number!"}, {"owner": {"reputation": 17, "user_id": 4671966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_7AwljbwGNA/AAAAAAAAAAI/AAAAAAAAABE/Z5eLOgE9Q9Q/photo.jpg?sz=128", "display_name": "Dafuq", "link": "https://stackoverflow.com/users/4671966/dafuq"}, "edited": false, "score": 0, "creation_date": 1479935906, "post_id": 40774120, "comment_id": 68772462, "body": "I have no idea what htonl is,internet is not helping me either."}, {"owner": {"reputation": 17, "user_id": 4671966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_7AwljbwGNA/AAAAAAAAAAI/AAAAAAAAABE/Z5eLOgE9Q9Q/photo.jpg?sz=128", "display_name": "Dafuq", "link": "https://stackoverflow.com/users/4671966/dafuq"}, "edited": false, "score": 0, "creation_date": 1479936178, "post_id": 40774120, "comment_id": 68772579, "body": "added comments , numar2!=11111111 is becasue when you check if an element is 1 this code will check for the latest 1,which can be in the first/second/third octet ,that means this code will add a 10^8 after that 11111111 . Anyway,like I said,the code is a mess,I am looking for simpler answers :D"}, {"owner": {"reputation": 17, "user_id": 4671966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_7AwljbwGNA/AAAAAAAAAAI/AAAAAAAAABE/Z5eLOgE9Q9Q/photo.jpg?sz=128", "display_name": "Dafuq", "link": "https://stackoverflow.com/users/4671966/dafuq"}, "edited": false, "score": 0, "creation_date": 1479936284, "post_id": 40774120, "comment_id": 68772622, "body": "the arrays go up to 33 :) I know arrays are indexed between 0 and LEN-1,I kept it like this just to keep track of the elements easier"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479936489, "post_id": 40774120, "comment_id": 68772723, "body": "Yeah and <a href=\"https://en.wikipedia.org/wiki/Up_to_eleven\" rel=\"nofollow noreferrer\"><i>ours go up to 11</i></a>!"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1479937586, "post_id": 40774120, "comment_id": 68773214, "body": "I just answered <a href=\"http://stackoverflow.com/a/40774610/1475978\">here</a> how to use <code>uint32_t</code> (with first octet in dotted-decimal notation in most significant bits) for this. Is .. is this homework?"}, {"owner": {"reputation": 17, "user_id": 4671966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_7AwljbwGNA/AAAAAAAAAAI/AAAAAAAAABE/Z5eLOgE9Q9Q/photo.jpg?sz=128", "display_name": "Dafuq", "link": "https://stackoverflow.com/users/4671966/dafuq"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1479937761, "post_id": 40774120, "comment_id": 68773292, "body": "@NominalAnimal It is a homework but it is not mine,some friends have this homework ( I am not learning c in school , so I am  trying  to learn by myself ) :D"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4671966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_7AwljbwGNA/AAAAAAAAAAI/AAAAAAAAABE/Z5eLOgE9Q9Q/photo.jpg?sz=128", "display_name": "Dafuq", "link": "https://stackoverflow.com/users/4671966/dafuq"}, "edited": false, "score": 0, "creation_date": 1479936910, "post_id": 40774429, "comment_id": 68772921, "body": "So if my addr=4 , that for will add 4 1s at the beginind of the mask and the | 0x80000000  will create a 32-bit integer like 11110000.00000000.00000000.00000000 ?"}, {"owner": {"reputation": 126, "user_id": 4413134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29859daf0ae2cdf0ba8c7c3c7f262995?s=128&d=identicon&r=PG&f=1", "display_name": "Razbit", "link": "https://stackoverflow.com/users/4413134/razbit"}, "reply_to_user": {"reputation": 17, "user_id": 4671966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_7AwljbwGNA/AAAAAAAAAAI/AAAAAAAAABE/Z5eLOgE9Q9Q/photo.jpg?sz=128", "display_name": "Dafuq", "link": "https://stackoverflow.com/users/4671966/dafuq"}, "edited": false, "score": 0, "creation_date": 1479938323, "post_id": 40774429, "comment_id": 68773533, "body": "Yeah, first it sets the 31st bit using bitwise-or (mask = mask | 0x80000000), then on the next iteration of the loop it moves all the bits to the right (mask = mask &gt;&gt; 1) so then only the 30th bit is set. After that it sets bit number 31 again (so bits 31 and 30 are set). You just have to make sure that the int type can hold 32 bits (4 bytes), maybe include stdint.h and use uint32_t"}], "tags": [], "owner": {"reputation": 126, "user_id": 4413134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29859daf0ae2cdf0ba8c7c3c7f262995?s=128&d=identicon&r=PG&f=1", "display_name": "Razbit", "link": "https://stackoverflow.com/users/4413134/razbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1479938498, "last_edit_date": 1479938498, "creation_date": 1479936446, "answer_id": 40774429, "question_id": 40774120, "link": "https://stackoverflow.com/questions/40774120/how-to-convert-an-address-into-a-netmaskdecimal/40774429#40774429", "title": "How to convert an address into a netmask(decimal)", "body": "<p>Using a loop and some bitwise operators:</p>\n\n<pre><code>int mask = 0;\nint addr; // get this from the user or something\nfor (int i = 0; i &lt; addr; i++) {\n    mask = mask &gt;&gt; 1; // move bits to the right\n    mask = mask | 0x80000000; // hexadecimal notation, set the 31st bit\n}\n</code></pre>\n\n<p>Now, mask is a (32-bit) integer with appropriate number of bits set. Now, converting it to decimal is easy. For example:</p>\n\n<pre><code>int fourth = mask &amp; 0xff; // take the rightmost byte\nint third = (mask &gt;&gt; 8) &amp; 0xff; // move to the right by one byte, take the new rightmost byte\nint second = (mask &gt;&gt; 16) &amp; 0xff; // move by two bytes\nint first = (mask &gt;&gt; 24) &amp; 0xff;\n</code></pre>\n\n<p>Now, the mask is first.second.third.fourth</p>\n\n<p>Hope this clears it up, take look at bitwise operators and try to wrap your head around them :)</p>\n"}], "owner": {"reputation": 17, "user_id": 4671966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_7AwljbwGNA/AAAAAAAAAAI/AAAAAAAAABE/Z5eLOgE9Q9Q/photo.jpg?sz=128", "display_name": "Dafuq", "link": "https://stackoverflow.com/users/4671966/dafuq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479938498, "creation_date": 1479934986, "last_edit_date": 1479936043, "question_id": 40774120, "link": "https://stackoverflow.com/questions/40774120/how-to-convert-an-address-into-a-netmaskdecimal", "title": "How to convert an address into a netmask(decimal)", "body": "<p>So I did this thing like this :</p>\n\n<pre><code>for(i=1;i&lt;=MASK;i++) // MASK IS THE ADDRESS\n{\n    MASKBINARY[i]=1; // CREATE AN ARRAY WITH 1s and 0s\n}\nfor(i=8;i&gt;0;i--)\n{\n\n    if(MASKBINARY[i-1]==1 &amp;&amp; MASKBINARY[i]==0) // check if the next element is 1\n    {\n        k=i-1; // get the position to the first 1\n        numar1=numar1 + powl(10,i-1);\n    }\n    if(MASKBINARY[i]==1 &amp;&amp; i!=(8-k)) // check if your element is 1 and different from the first 1\n    {\n        numar1=numar1 + powl(10,8-i);\n    }\n\n}\nprintf(\"\\n %d\",numar1);\nfor(i=16;i&gt;8;i--)\n{\n\n    if(MASKBINARY[i-1]==1 &amp;&amp; MASKBINARY[i]==0 &amp;&amp; numar1!=11111111)\n    {\n        k=i-9;\n        numar2=numar2 + powl(10,17-i);\n    }\n    if(MASKBINARY[i]==1 &amp;&amp; i!=k+8)\n    {\n        numar2=numar2 + powl(10,16-i);\n    }\n\n}\nprintf(\"\\n %d\",numar2);\nfor(i=24;i&gt;16;i--)\n{\n\n    if(MASKBINARY[i-1]==1 &amp;&amp; MASKBINARY[i]==0 &amp;&amp; numar2!=11111111)\n    {\n        k=i-17;\n        numar3=numar3 + powl(10,25-i);\n    }\n    if(MASKBINARY[i]==1 &amp;&amp; i!=k+16)\n    {\n        numar3=numar3 + powl(10,24-i);\n    }\n\n}\nprintf(\"\\n %d\",numar3);\nfor(i=32;i&gt;24;i--)\n{\n\n    if(MASKBINARY[i-1]==1 &amp;&amp; MASKBINARY[i]==0 &amp;&amp; numar3!=11111111)\n    {\n        k=i-25;\n        numar4=numar4 + powl(10,33-i);\n    }\n    if(MASKBINARY[i]==1 &amp;&amp; i!=k+24)\n    {\n        numar4=numar4 + powl(10,32-i);\n    }\n\n}\n</code></pre>\n\n<p>Basically what I did you take the address ( let's say it's 4 ) and I created an array with 1s and 0s ( made it a netmask binary ) . Then I converted that array into 4 variables ( numar1,2,3,4 ) which I transformed to base 10 ( from 2 ).\nSo if my address is 4 the output will be 240.0.0.0,exactly like here : <a href=\"https://www.iplocation.net/subnet-mask\" rel=\"nofollow noreferrer\">https://www.iplocation.net/subnet-mask</a>\nThe problem is this code is a real mess and VERY inneficient.\nHow can I transform that address into a netmask (decimal) efficiently ? Can I somehow work with the bits ? Something like , take the first 8 bits,convert them to base 10,take the next 8 bits convert them,take the next ... etc ?\nOr I don't know,something that is not that ... bad</p>\n\n<p>I am a noob,I know this is a mess </p>\n"}, {"tags": ["c", "networking", "cidr", "netmask"], "comments": [{"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1479943649, "post_id": 40774074, "comment_id": 68775333, "body": "There are only two current IPs: IPv4 and IPv6. I think you mean IP addresses, not IPs (Internet Protocols)."}, {"owner": {"reputation": 47, "user_id": 6389542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CZoW5.jpg?s=128&g=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6389542/john-doe"}, "reply_to_user": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1479950183, "post_id": 40774074, "comment_id": 68776867, "body": "@Ron Maupin yes thats what I meant. Edited for clarity"}], "answers": [{"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 2, "last_activity_date": 1479971899, "last_edit_date": 1479971899, "creation_date": 1479937306, "answer_id": 40774610, "question_id": 40774074, "link": "https://stackoverflow.com/questions/40774074/all-ips-in-a-subnet-c/40774610#40774610", "title": "All IP&#39;s in a subnet (C)", "body": "<p>First, pack your IPv4 address into an <code>uint32_t</code> (defined in <code>&lt;stdint.h&gt;</code>), putting the leftmost octet in dotted-decimal notation into the most significat bits. For example,</p>\n\n<pre><code>uint32_t ipv4_pack(const uint8_t octet1,\n                   const uint8_t octet2,\n                   const uint8_t octet3,\n                   const uint8_t octet4)\n{\n    return (((uint32_t)octet1) &lt;&lt; 24)\n         | (((uint32_t)octet2) &lt;&lt; 16)\n         | (((uint32_t)octet3) &lt;&lt;  8)\n         |  ((uint32_t)octet4);\n}\n</code></pre>\n\n<p>and its inverse,</p>\n\n<pre><code>unsigned char *ipv4_unpack(unsigned char *addr, const uint32_t packed)\n{\n    addr[3] = (uint8_t)(packed);\n    addr[2] = (uint8_t)(packed &gt;&gt; 8);\n    addr[1] = (uint8_t)(packed &gt;&gt; 16);\n    addr[0] = (uint8_t)(packed &gt;&gt; 24);\n    return addr;\n}\n</code></pre>\n\n<p>An address like <code>128.64.32.16</code> is packed into <code>0x80402010</code> (128 == 80<sub>16</sub>, 64 == 40<sub>16</sub>, 32 == 20<sub>16</sub>, and 16 == 10<sub>16</sub>).</p>\n\n<hr>\n\n<p>You need to also convert the <a href=\"https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing\" rel=\"nofollow noreferrer\">CIDR</a> prefix size (1 to 32) into a binary mask of that many highest bits set:</p>\n\n<pre><code>uint32_t ipv4_mask(const int prefix_size)\n{\n    if (prefix_size &gt; 31)\n        return (uint32_t)0xFFFFFFFFU;\n    else\n    if (prefix_size &gt; 0)\n        return ((uint32_t)0xFFFFFFFFU) &lt;&lt; (32 - prefix_size);\n    else\n        return (uint32_t)0U;\n}\n</code></pre>\n\n<p>Prefix 24 corresponds to a mask of 11111111111111111111111100000000 in binary, and 0xFFFFFF00 in hexadecimal.</p>\n\n<p>Prefix 28 corresponds to a mask of 11111111111111111111111111110000 in binary, and 0xFFFFFFF0 in hexadecimal.</p>\n\n<p>For address <code>addr1.addr2.addr3.addr4/prefix</code>, the first address in a range (typically the gateway address for said range) is</p>\n\n<pre><code>uint32_t first = ipv4_pack(addr1, addr2, addr3, addr4) &amp; ipv4_mask(prefix);\n</code></pre>\n\n<p>and the last address (typically the broadcast address for said range) is</p>\n\n<pre><code>uint32_t last = ipv4_pack(addr1, addr2, addr3, addr4) | (~ipv4_mask(prefix));\n</code></pre>\n\n<p>In all cases, <code>first &lt;= last</code>, and iterating from <code>first</code> to <code>last</code>, inclusive, and calling <code>ipv4_unpack()</code> to unpack the value into dotted-decimal notation), yields all IPv4 addresses within the range.</p>\n\n<hr>\n\n<p>The same would work for IPv6, but requires something like an <code>uint128_t</code> type. (It can be emulated with smaller unsigned integer types, of course, taking a few more instructions, but the logic stays the same.)</p>\n"}], "owner": {"reputation": 47, "user_id": 6389542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CZoW5.jpg?s=128&g=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6389542/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 40774610, "answer_count": 1, "score": 0, "last_activity_date": 1479971899, "creation_date": 1479934800, "last_edit_date": 1479950197, "question_id": 40774074, "link": "https://stackoverflow.com/questions/40774074/all-ips-in-a-subnet-c", "title": "All IP&#39;s in a subnet (C)", "body": "<p>Does someone have a good example of a way I could take a IP address with a CIDR such as <code>192.168.1.1/24</code> and return all the ip addresses inside of that range such as <code>192.168.1.1, 192.168.1.2, 192.168.1.3 ...</code> </p>\n\n<p>I'm fine with it being returned in a array of <code>unsigned long</code>, a <code>char</code> or just something like </p>\n\n<pre><code>/* Pseudocode */\nwhile(currnetip &lt;= finalip) { \n    print(currnetip); \n    currnetip++; \n}\n</code></pre>\n\n<p>As long as I can understand it its fine.</p>\n\n<p>Feel free to comment a link to a post if you think it could help me.</p>\n\n<p>Edit: Probably worth mentioning I've found lots of stuff that calculated the broadcast address ect I'm just not sure how to link all those functions together.</p>\n"}, {"tags": ["c", "memory", "memory-management", "bsd", "getrusage"], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 1, "last_activity_date": 1479936329, "creation_date": 1479936329, "answer_id": 40774400, "question_id": 40773924, "link": "https://stackoverflow.com/questions/40773924/units-of-ru-maxrss-on-bsd/40774400#40774400", "title": "Units of `ru_maxrss` on BSD?", "body": "<p>On FreeBSD it's in kilobytes, as evidenced by the source in kern_clock.c:</p>\n\n<pre><code>/* Update resource usage integrals and maximums. */\nMPASS(p-&gt;p_vmspace != NULL);\nvm = p-&gt;p_vmspace;\nru = &amp;td-&gt;td_ru;\nru-&gt;ru_ixrss += pgtok(vm-&gt;vm_tsize) * cnt;\nru-&gt;ru_idrss += pgtok(vm-&gt;vm_dsize) * cnt;\nru-&gt;ru_isrss += pgtok(vm-&gt;vm_ssize) * cnt;\nrss = pgtok(vmspace_resident_count(vm));\nif (ru-&gt;ru_maxrss &lt; rss)\n    ru-&gt;ru_maxrss = rss;\n</code></pre>\n\n<p><code>pgtok()</code> computes kb from page size.</p>\n\n<p>But who would believe the kernel source? Lets run a program:</p>\n\n<pre><code>$ cat x.c\n#include &lt;sys/types.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    struct rusage r;\n\n    if (getrusage( RUSAGE_SELF, &amp;r) == 0) {\n       printf (\"ru_maxrss=%lu\\n\", (unsigned long)r.ru_maxrss);\n    }\n    return 0;\n}\n$ ./a.out\nru_maxrss=5824\n$ ./a.out\nru_maxrss=0\n$ ./a.out\nru_maxrss=216\n$ ./a.out\nru_maxrss=1880\n</code></pre>\n\n<p>These numbers aren't multiples of 1024, so can't be bytes.</p>\n"}], "owner": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 40774400, "answer_count": 1, "score": 2, "last_activity_date": 1479936329, "creation_date": 1479934183, "last_edit_date": 1492086984, "question_id": 40773924, "link": "https://stackoverflow.com/questions/40773924/units-of-ru-maxrss-on-bsd", "title": "Units of `ru_maxrss` on BSD?", "body": "<p><code>getrusage</code> returns a struct containing</p>\n\n<pre><code>long ru_maxrss;       /* max resident set size */\n</code></pre>\n\n<p>What are the units of <code>ru_maxrss</code>, on BSD operating systems?  Is this value in bytes, or in kilobytes?  By \"BSD\", I mean FreeBSD, OpenBSD, but not Mac OS X / Darwin.</p>\n\n<p>The <a href=\"https://www.freebsd.org/cgi/man.cgi?query=getrusage&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD+10.3-RELEASE+and+Ports&amp;arch=default&amp;format=html\" rel=\"nofollow noreferrer\">FreeBSD man page</a> and <a href=\"http://man.openbsd.org/getrusage.2\" rel=\"nofollow noreferrer\">OpenBSD man page</a> say the units are in kilobytes:</p>\n\n<pre><code> ru_maxrss    the maximum resident set size utilized (in kilobytes).\n</code></pre>\n\n<p>However, I know that on Darwin / Mac OS X, the units are in bytes (even though online man pages claim otherwise), and I have also found some statements online that claim on BSD <code>ru_maxrss</code> is also returned in bytes (see e.g. <a href=\"https://unix.stackexchange.com/questions/30940/getrusage-system-call-what-is-maximum-resident-set-size#comment552809_30940\">here</a>).  Which is correct?</p>\n"}, {"tags": ["c", "arrays", "iteration"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1479934369, "post_id": 40773862, "comment_id": 68771759, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1479939359, "post_id": 40773862, "comment_id": 68773911, "body": "<code>if (max &lt; map[])</code> where are your indices? (i.e. what element should this compare to?)"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934018, "creation_date": 1479934018, "answer_id": 40773884, "question_id": 40773862, "link": "https://stackoverflow.com/questions/40773862/returning-the-largest-element-in-an-array/40773884#40773884", "title": "Returning the largest element in an array", "body": "<p><code>map[]</code> is not valid syntax.  You need to index the array properly.</p>\n\n<pre><code>    if (max &lt; map[i][j]) {\n        max = map[i][j];\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 1, "last_activity_date": 1479934026, "creation_date": 1479934026, "answer_id": 40773885, "question_id": 40773862, "link": "https://stackoverflow.com/questions/40773862/returning-the-largest-element-in-an-array/40773885#40773885", "title": "Returning the largest element in an array", "body": "<p>Your map lookups don't seem to have subscripts, and you're missing a semicolon on the declaration of <code>max</code>. There's also a risk that the maximum value in the array is less than 0, in which case your function will return 0 instead of the true maximum. You can fix this by either redefining max to take on some default value (say, <code>map[0][0]</code> or negative infinity).</p>\n\n<p>Otherwise, provided that the array dimensions are <code>size</code> by <code>size</code>, yes, this will find the maximum value.</p>\n"}, {"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934034, "creation_date": 1479934034, "answer_id": 40773889, "question_id": 40773862, "link": "https://stackoverflow.com/questions/40773862/returning-the-largest-element-in-an-array/40773889#40773889", "title": "Returning the largest element in an array", "body": "<p>It won't if every array element is less than zero.</p>\n\n<p>You can initialize <code>max</code> with <code>map[0][0]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "is_accepted": false, "score": 0, "last_activity_date": 1479938507, "creation_date": 1479938507, "answer_id": 40774849, "question_id": 40773862, "link": "https://stackoverflow.com/questions/40773862/returning-the-largest-element-in-an-array/40774849#40774849", "title": "Returning the largest element in an array", "body": "<p>To step through a 2d array, you need two for loops as you did. The proper syntax to return the value of row i, column j from 2d array map is <code>map[i][j]</code>.</p>\n\n<pre><code>/* return the largest element in map[size][size] */\ndouble map_max(size_t size, double **map) {\n    double max = 0;\n    for (int i = 0; i &lt; size; i++) {\n        for (int j = 0; j &lt; size; j++) {\n            if (map[i][j] &gt; max) {\n                max = map[i][j];\n            }\n         }\n    }\n    return max;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7096915, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209162256706073/picture?type=large", "display_name": "Nolan Bradshaw", "link": "https://stackoverflow.com/users/7096915/nolan-bradshaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1479938507, "creation_date": 1479933917, "last_edit_date": 1479937959, "question_id": 40773862, "link": "https://stackoverflow.com/questions/40773862/returning-the-largest-element-in-an-array", "title": "Returning the largest element in an array", "body": "<pre><code>/* return the largest element in map[size][size] */\ndouble map_max(size_t size, double **map) {\ndouble max = 0;\nfor (int i = 0; i &lt; size; i++) {\n    for (int j = 0; j &lt; size; j++) {\n        if (max &lt; map[]) {\n                max = map[];\n          }\n       }\n   }\n\n    return max;\n}\n</code></pre>\n\n<p>would this work to return the largest element in map[][]? (would also do the same thing but for the smallest element)</p>\n"}, {"tags": ["c", "kernighan-and-ritchie", "putchar"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1479934006, "post_id": 40773845, "comment_id": 68771593, "body": "Use another book - that book is far far far outdated."}, {"owner": {"reputation": 1050, "user_id": 483421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fb2ffc399dbb9bec5567d4a63dc0a4c?s=128&d=identicon&r=PG", "display_name": "iolo", "link": "https://stackoverflow.com/users/483421/iolo"}, "edited": false, "score": 0, "creation_date": 1479937879, "post_id": 40773845, "comment_id": 68773342, "body": "Why would anyone read K&amp;R? c11, c++14, whatever but not K&amp;R!"}, {"owner": {"reputation": 3, "user_id": 5069215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d36022502f0010ef366622ef0c2a06?s=128&d=identicon&r=PG&f=1", "display_name": "blender28", "link": "https://stackoverflow.com/users/5069215/blender28"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1480098074, "post_id": 40773845, "comment_id": 68841639, "body": "@KevinDTimm any recommendations?,@iolo This is the book handed to us by the academic institution I enrolled to."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1479934869, "post_id": 40774014, "comment_id": 68771991, "body": "The funny thing that <code>int i = &#39;\\260&#39;</code> will consider the rhs constant as char and yield <code>i= -80</code> by sign-extending it (on the <code>signed char</code> platform of course...) <a href=\"https://ideone.com/YdV6Dz\" rel=\"nofollow noreferrer\">ideone.com/YdV6Dz</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1479936945, "post_id": 40774014, "comment_id": 68772934, "body": "@EugeneSh.: Correct conclusion, incorrect reasoning. Character constants are of type <code>int</code>. The sign of the value of a character constant outside the range of 0 .. <code>CHAR_MAX</code> is determined by the signedness of type <code>char</code>. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">N1570</a> 6.4.4.4p10."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1479937350, "post_id": 40774014, "comment_id": 68773105, "body": "@KeithThompson Thanks. It says it is implementation defined. <i>&quot;..containing a character or escape sequence that does not map to a single-byte execution character, is implementation-defined.&quot;</i>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1479937365, "post_id": 40774014, "comment_id": 68773112, "body": "The web site shows an image of the supposed output of the program. I don&#39;t know what character set the author is using -- apparently one in which 0xb0, 0xb1, and 0xb2 are suitable for use in a histogram, but in both Unicode and Windows-1252 those characters are DEGREE SIGN, PLUS-MINUS SIGN, and SUPERSCRIPT TWO, respectively."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1479937687, "post_id": 40774014, "comment_id": 68773255, "body": "@EugeneSh.: Ah, but in the previous paragraph it says that an octal or hexadecimal escape sequence is constrained to be in the range of <code>unsigned char</code>. But the result (for <code>CHAR_BIT==8, plain </code>char` signed) of converting <code>176</code> from <code>unsigned char</code> to <code>char</code> is implementation-defined. Ick."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1479934556, "creation_date": 1479934556, "answer_id": 40774014, "question_id": 40773845, "link": "https://stackoverflow.com/questions/40773845/add-an-integer-to-a-char-in-c/40774014#40774014", "title": "Add an integer to a char in C", "body": "<p><code>'\\260'</code> is the character represented by the octal number <code>260</code>, which is <code>176</code> in decimal.</p>\n\n<p>Use of <code>putchar('\\260' + 2);</code> relies on the graphical representation of a non-ASCII character represented by the integer value <code>178</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 5069215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d36022502f0010ef366622ef0c2a06?s=128&d=identicon&r=PG&f=1", "display_name": "blender28", "link": "https://stackoverflow.com/users/5069215/blender28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 40774014, "answer_count": 1, "score": -2, "last_activity_date": 1479934556, "creation_date": 1479933832, "last_edit_date": 1479933969, "question_id": 40773845, "link": "https://stackoverflow.com/questions/40773845/add-an-integer-to-a-char-in-c", "title": "Add an integer to a char in C", "body": "<p>I'm learning C from the K&amp;R book, I found a suggested solution online to a task in the book.The  task and suggested answer can be found here (the last solution on that page)\n<a href=\"http://clc-wiki.net/wiki/K%26R2_solutions:Chapter_1:Exercise_13\" rel=\"nofollow noreferrer\">http://clc-wiki.net/wiki/K%26R2_solutions:Chapter_1:Exercise_13</a></p>\n\n<p>Where there is this line of code :</p>\n\n<pre><code>putchar('\\260' + (MIN(wl[j]-i, 2)));\n</code></pre>\n\n<p>So for example ,if the function MIN returned  2   ,we add it to '\\260'</p>\n\n<pre><code>putchar('\\260' + 2);\n</code></pre>\n\n<p>What is this method of adding an int to a char? what is this '\\260' value?</p>\n"}, {"tags": ["c", "apache", "httprequest", "apache-modules"], "comments": [{"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 1, "creation_date": 1479934398, "post_id": 40773646, "comment_id": 68771773, "body": "Please check the return of <code>fopen</code>, you might not have writing rights."}, {"owner": {"reputation": 771, "user_id": 4448477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2cee793a02980f5f918fbf5c3a73025b?s=128&d=identicon&r=PG&f=1", "display_name": "weefwefwqg3", "link": "https://stackoverflow.com/users/4448477/weefwefwqg3"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1479934400, "post_id": 40773646, "comment_id": 68771774, "body": "Hello, I already pasted my code too. The picture is just for the purpose of easier to see the code."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 1, "creation_date": 1479934561, "post_id": 40773646, "comment_id": 68771847, "body": "yepp, I&#39;m too slow, I know ;-) But insisting on pure text is intentional: you can easily c&amp;p it to compile it and a picture is of not much worth for the programmers here who cannot see it."}, {"owner": {"reputation": 771, "user_id": 4448477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2cee793a02980f5f918fbf5c3a73025b?s=128&d=identicon&r=PG&f=1", "display_name": "weefwefwqg3", "link": "https://stackoverflow.com/users/4448477/weefwefwqg3"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1479934587, "post_id": 40773646, "comment_id": 68771858, "body": "According to this tutorial: <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fopen.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/c_standard_library/c_function_fopen.htm</a>  My fopen() is supposed to created a file &quot;params_text.file&quot; if it&#39;s not there yet, and append it if the file is already there."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 1, "creation_date": 1479934631, "post_id": 40773646, "comment_id": 68771882, "body": "Yes, but do you have the necessary rights to make it and write to it?"}, {"owner": {"reputation": 771, "user_id": 4448477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2cee793a02980f5f918fbf5c3a73025b?s=128&d=identicon&r=PG&f=1", "display_name": "weefwefwqg3", "link": "https://stackoverflow.com/users/4448477/weefwefwqg3"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1479934786, "post_id": 40773646, "comment_id": 68771962, "body": "Oh, actually it&#39;s a good point about the permission. Do you have any idea how can I set the permission of the flight? Or at least to Apache so that it can write down the file for me?"}, {"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 1, "creation_date": 1479937899, "post_id": 40773646, "comment_id": 68773347, "body": "@\u533f\u540d\u67f4\u68cd Use this to check if the user has permission to read/write to the directory - <a href=\"https://stackoverflow.com/questions/7087958/file-stat-vs-access-to-check-permissions-on-a-directory\" title=\"file stat vs access to check permissions on a directory\">stackoverflow.com/questions/7087958/&hellip;</a>"}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 1, "creation_date": 1479939891, "post_id": 40773646, "comment_id": 68774109, "body": "When writing Apache modules, you should use APR (Apache Portable Runtime) functions instead of local functions... so instead of fopen() you should use apr_file_open(), and fprintf() use apr_file_printf().  Look here for APR file routines:  <a href=\"http://apr.apache.org/docs/apr/1.5/group__apr__file__io.html#gabda14cbf242fb4fe99055434213e5446\" rel=\"nofollow noreferrer\">apr.apache.org/docs/apr/1.5/&hellip;</a>"}, {"owner": {"reputation": 771, "user_id": 4448477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2cee793a02980f5f918fbf5c3a73025b?s=128&d=identicon&r=PG&f=1", "display_name": "weefwefwqg3", "link": "https://stackoverflow.com/users/4448477/weefwefwqg3"}, "reply_to_user": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1479940229, "post_id": 40773646, "comment_id": 68774235, "body": "@tonyB, yep. That was what I am asking, I am don&#39;t know how to use APR to write the code to archive the same thing that I am doing with fopen(). Could you please tell me how can I re-write that 4 lines of code using APR instead of fopen(). I am stuck with the pointers arguments of those APR functions, because the APR website does not show any sample usage code for those function."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 1, "creation_date": 1479941654, "post_id": 40773646, "comment_id": 68774697, "body": "You should look at the documentatilon (which I pointed you to above) or some of the sources in Apache&#39;s HTTP server itself (i.e. download apache&#39;s source and search for uses of apr_file_open() and others....)  The newest stable Apache source is located at:  <a href=\"http://httpd.apache.org/download.cgi\" rel=\"nofollow noreferrer\">httpd.apache.org/download.cgi</a> )  ADDITIONIALLY, your handler should return OK if it is handling the request and DECLINED if not... your are always returning DECLINED... Here&#39;s a link to writing a handler:  <a href=\"https://httpd.apache.org/docs/2.4/developer/modguide.html\" rel=\"nofollow noreferrer\">httpd.apache.org/docs/2.4/developer/modguide.html</a>  If you continue having problems, then post an update."}, {"owner": {"reputation": 771, "user_id": 4448477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2cee793a02980f5f918fbf5c3a73025b?s=128&d=identicon&r=PG&f=1", "display_name": "weefwefwqg3", "link": "https://stackoverflow.com/users/4448477/weefwefwqg3"}, "reply_to_user": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1479943909, "post_id": 40773646, "comment_id": 68775414, "body": "@tonyB, thank you so much for your detail comment. I will download the doc to study more. For the DECLINED and OK, I thought that because I put APR_HOOK_REALLY_FIRST, my module will always process the HTTPrequest first, and by DECLINED it is then released to be processed by other available modules. Isn&#39;t it? Please correct me if I am wrong. Regards."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1479945399, "post_id": 40773646, "comment_id": 68775816, "body": "The code you provided was a slight modification of the example from the first link I provided you... You will notice that original version  always returns &quot;OK&quot; (other than if it fails the test for the r-&gt;handler not being equal to &quot;example-handler&quot;, which you commented out)."}], "owner": {"reputation": 771, "user_id": 4448477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2cee793a02980f5f918fbf5c3a73025b?s=128&d=identicon&r=PG&f=1", "display_name": "weefwefwqg3", "link": "https://stackoverflow.com/users/4448477/weefwefwqg3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1479934347, "creation_date": 1479932984, "last_edit_date": 1479934347, "question_id": 40773646, "link": "https://stackoverflow.com/questions/40773646/how-can-i-write-read-and-append-parameter-value-pairs-of-http-request-to-a-file", "title": "How can I write, read and append parameter-value pairs of HTTP request to a file at Apache&#39;s server side?", "body": "<p>I am a newbie, and I'm writing an Apache module to handle http request. I want to store all of the http requests' parameters and their values to a txt file. And, here is my code, but it didn't succeeded.\n<a href=\"https://i.stack.imgur.com/KibKe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KibKe.png\" alt=\"enter image description here\"></a>\nWhenever, I tried to put some parameters in the URL, the page crashed. In the error.log of apache, it shows <code>\"Segmentation Fault (core dumped)\"</code>. I am aware that there is API of APR_FILE_() <a href=\"http://apr.apache.org/docs/apr/1.5/group__apr__file__io.html\" rel=\"nofollow noreferrer\">here</a> instead of using standard C library. But I am so dump to understand all of pointers of those functions and the API does not have any sample usage of the apr_file_() functions, thus being stuck with file I/O. So I would be really thankful if someone could help me with the problem.</p>\n\n<p>For your ready reference: I paste my code here to:</p>\n\n<pre><code>#include \"httpd.h\"\n#include \"http_config.h\"\n#include \"http_protocol.h\"\n#include \"ap_config.h\"\n/* The sample content handler */\nstatic int learning_handler(request_rec *r)\n{\n    /* First off, we need to check if this is a call for the \"example-handler\" handler.\n     * If it is, we accept it and do our things, if not, we simply return DECLINED,\n     * and the server will try somewhere else.\n     */\n    //if (!r-&gt;handler || strcmp(r-&gt;handler, \"example-handler\")) return (DECLINED);\n\n    /* Set the appropriate content type */\n    ap_set_content_type(r, \"text/html\");\n\n    /* Print out the IP address of the client connecting to us: */\n    ap_rprintf(r, \"&lt;h2&gt;Hello, %s!&lt;/h2&gt;\", r-&gt;useragent_ip);\n\n    /* If we were reached through a GET or a POST request, be happy, else sad. */\n    if ( !strcmp(r-&gt;method, \"POST\") || !strcmp(r-&gt;method, \"GET\") ) {\n        ap_rputs(\"You used a GET or a POST method, that makes us happy!&lt;br/&gt;\", r);\n    }\n    else {\n        ap_rputs(\"You did not use POST or GET, that makes us sad :(&lt;br/&gt;\", r);\n    }\n\n    /* Lastly, if there was a query string, let's save it file */\n    if (r-&gt;args) {\n        ap_rprintf(r, \"Your query string was: %s\", r-&gt;args);\n\n        FILE * fp;\n        fp = fopen (\"params_file.txt\", \"w+\");\n        fprintf(fp, \"%s\",r-&gt;args);\n        fclose(fp);\n    }\n    return DECLINED;\n}\n\nstatic void learning_register_hooks(apr_pool_t *p)\n{\n    ap_hook_handler(learning_handler, NULL, NULL, APR_HOOK_REALLY_FIRST);\n}\n\n/* Dispatch list for API hooks */\nmodule AP_MODULE_DECLARE_DATA learning_module = {\n    STANDARD20_MODULE_STUFF,\n    NULL,                  /* create per-dir    config structures */\n    NULL,                  /* merge  per-dir    config structures */\n    NULL,                  /* create per-server config structures */\n    NULL,                  /* merge  per-server config structures */\n    NULL,                  /* table of config file commands       */\n    learning_register_hooks  /* register hooks                      */\n};\n</code></pre>\n"}, {"tags": ["c", "vector", "crash"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1479932813, "post_id": 40773584, "comment_id": 68771052, "body": "Is there any rule telling it <i>should</i> crash?"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 2, "creation_date": 1479932815, "post_id": 40773584, "comment_id": 68771053, "body": "There are many, many questions like this already here on SO, the answer is always: undefined behavior permits anything to happen, including the program not crashing."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1479932830, "post_id": 40773584, "comment_id": 68771058, "body": "Because it didn&#39;t. A better question would be to ask why something <i>did</i> crash."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1479933010, "post_id": 40773584, "comment_id": 68771143, "body": "It might not crash now, but it might crash later. And in 5 hours, it might not crash again. Later, when the sun burns out, it miraculously runs on its own, and it doesn&#39;t crash, except it won&#39;t stop running. In other words, <a href=\"http://stackoverflow.com/q/2397984/539810\">see <i>Undefined, unspecified and implementation-defined behavior</i></a>"}], "owner": {"reputation": 305, "user_id": 1600400, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9008b7ef714b02d9737a9fc687ce7d51?s=128&d=identicon&r=PG", "display_name": "joan2404", "link": "https://stackoverflow.com/users/1600400/joan2404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1479933201, "answer_count": 0, "score": 0, "last_activity_date": 1479932715, "creation_date": 1479932715, "question_id": 40773584, "link": "https://stackoverflow.com/questions/40773584/why-this-code-doesnt-crash-during-execution", "closed_reason": "Duplicate", "title": "Why this code doesn&#39;t crash during execution", "body": "<p>I've been using C for a while and this code surprised me.</p>\n\n<pre><code>int main(void) {\n    int array[] = {100};\n    int i;\n    for (i = 0; i&lt;100; i++){\n        printf(\"%d \\n\",array[i]);\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>When I execute this program, it doesn't crash. In the for loop, where is the number 100 put any value that you want. Beyond the array[0] position, the program outputs random numbers. I hope that someone could help me with that.</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1479933156, "post_id": 40773342, "comment_id": 68771214, "body": "<code>begin</code> and <code>end</code> are indexes, why are you comparing them with <code>value</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479966186, "post_id": 40773342, "comment_id": 68780971, "body": "There are lots of binary search algorithms available here on SO (there are bound to be, and a fair number of them will be related to CS50, too). You should look at some of those to see that your code is vastly over-complicated as well as incorrect. For instance, there is useful code in <a href=\"http://stackoverflow.com/questions/35147784/\">First and last occurrence for binary search in C</a>, which deals with some more complex cases than you need, but also contains the code you need. You could look at <a href=\"http://stackoverflow.com/questions/38468878/\">if statement not recognizing true conditions</a> too."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1481510457, "post_id": 40773342, "comment_id": 69391710, "body": "@aknys: you can accept one of the answers by clicking on the grey checkmark below its score."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6794537"}, "is_accepted": false, "score": 0, "last_activity_date": 1479960912, "creation_date": 1479960912, "answer_id": 40777953, "question_id": 40773342, "link": "https://stackoverflow.com/questions/40773342/stuck-in-a-while-loop-in-cs50-pset3-binary-search/40777953#40777953", "title": "Stuck in a while loop in cs50 pset3 binary search", "body": "<p>Why you are doing this?</p>\n\n<pre><code>if (values[0]==value)\n    {\n        return true;\n    }\n    if (begin == value)\n    {\n        return true;\n    }\n    if (end == value)\n    {\n        return true;\n    }\n    if (end == (begin+1) || end == begin)\n    {\n        if (end == value || begin == value)\n        {\n        return true;\n        } \n        else\n        {\n        return false;\n        }\n    }\n</code></pre>\n\n<p>They are not necessary. You can do just like below</p>\n\n<pre><code>while(end&gt;beg+1 &amp;&amp; values[center]!=value)\n     {\n     if ((values[center])&gt;value)\n        end = center-1;\n    else if (values[center]&lt;value)\n        begin = center+1;\n    center=(end+begin)/2;\n     }\n     if(values[center]==value)\n           return true;\n     else return false;\n    }\n</code></pre>\n\n<p>And i don't understand why you used <code>sort(values,n);</code>\nIf it is a C++ code then use it as <code>sort(values,values+n);</code>\nand if it is a C code then sort the array using any <strong>algorithm</strong> according to your array <strong>size</strong> and <em>time</em>.\nThank you.</p>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 5738730, "user_type": "registered", "profile_image": "https://graph.facebook.com/1512490685748177/picture?type=large", "display_name": "Sanjay-sopho", "link": "https://stackoverflow.com/users/5738730/sanjay-sopho"}, "is_accepted": false, "score": 0, "last_activity_date": 1480290665, "creation_date": 1480290665, "answer_id": 40835298, "question_id": 40773342, "link": "https://stackoverflow.com/questions/40773342/stuck-in-a-while-loop-in-cs50-pset3-binary-search/40835298#40835298", "title": "Stuck in a while loop in cs50 pset3 binary search", "body": "<p>You are unnecessarily overcomplicating this simple thing.\nYou can just remove all the extra stuff in your code and use this</p>\n\n<pre><code>   `if ((values[center])==value)\n    {\n        return true;\n    }\n    else if ((values[center])&gt;value)\n    {\n        end = center-1;\n    }\n    else if ((values[center])&lt;value)\n    {\n        begin = center+1;\n    }\n</code></pre>\n\n<p>`</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1480291622, "last_edit_date": 1480291622, "creation_date": 1480291312, "answer_id": 40835374, "question_id": 40773342, "link": "https://stackoverflow.com/questions/40773342/stuck-in-a-while-loop-in-cs50-pset3-binary-search/40835374#40835374", "title": "Stuck in a while loop in cs50 pset3 binary search", "body": "<p>Your code is too complicated. Here are some hints:</p>\n\n<ul>\n<li><p>You should use a range with the left index included and the right index excluded, this is idiomatic in C and leads to simpler algorithms.</p></li>\n<li><p>You should compute <code>center = start + (end - start) / 2;</code> instead of <code>center = (start + end) / 2;</code> to avoid the potential integer overflow if <code>start</code> and <code>end</code> are very large.</p></li>\n<li><p>The array size should have type <code>size_t</code>, potentially larger than <code>int</code>.</p></li>\n<li><p>compare the value with that of the element at the middle of the range:</p>\n\n<ul>\n<li>if equal, the value was found, return true.</li>\n<li>if smaller, reduce the range to the left part, center excluded.</li>\n<li>otherwise reduce the range to the right part, center excluded.</li>\n</ul></li>\n<li><p>if the range is empty, the value was not found, return false.</p></li>\n</ul>\n\n<p>Here is a simpler version:</p>\n\n<pre><code>bool search(int value, int values[], size_t n) {\n    // Assuming values is sorted before calling this function\n    //sort(values, n);\n\n    size_t begin = 0;\n    size_t end = n;\n\n    while (begin &lt; end) {\n        size_t center = begin + (end - begin) / 2;\n        if (value == values[center]) {\n            return true;\n        }\n        if (value &lt; values[center]) {\n            end = center;\n        } else {\n            begin = center + 1;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7201423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c3b8049d11a4084f6051a45419a5d1?s=128&d=identicon&r=PG&f=1", "display_name": "aksnys", "link": "https://stackoverflow.com/users/7201423/aksnys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1480291622, "creation_date": 1479931870, "last_edit_date": 1480290877, "question_id": 40773342, "link": "https://stackoverflow.com/questions/40773342/stuck-in-a-while-loop-in-cs50-pset3-binary-search", "title": "Stuck in a while loop in cs50 pset3 binary search", "body": "<p>I am trying to implement a binary search using a <code>while</code> loop.  It seems to work when the <code>int</code> I am looking for is in the array; however, when the <code>int</code> I am searching for is not there, the program seems to get stuck in the loop, without returning false.  I have been using the gdb, but I still can't seem to figure out the bug.  As you can see, I have maybe added a bunch of extra if statements, etc. trying to figure this out.</p>\n\n<pre><code>bool search(int value, int values[], int n) {\n    sort(values, n);\n\n    int begin = 0;\n    int end = (n - 1);\n\n    if (n &lt; 1) {\n        return false;\n    }\n    while (end &gt; begin + 1) {\n        int center = ((begin + end) / 2);\n        if (values[0] == value) {\n            return true;\n        }\n        if (begin == value) {\n            return true;\n        }\n        if (end == value) {\n            return true;\n        }\n        if (end == (begin + 1) || end == begin) {\n            if (end == value || begin == value) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        if ((values[center]) == value) {\n            return true;\n        } else\n        if ((values[center]) &gt; value) {\n            end = center;\n        } else\n        if ((values[center]) &lt; value) {\n            begin = center;\n        } else {\n            return false;\n        }\n    }\n    // TODO: implement a searching algorithm\n    return false;\n}\n</code></pre>\n"}, {"tags": ["c", "matrix"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6026442, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36a97ccc2fdca1009169ad44f7a31262?s=128&d=identicon&r=PG&f=1", "display_name": "Dane Parchment", "link": "https://stackoverflow.com/users/6026442/dane-parchment"}, "edited": false, "score": 0, "creation_date": 1479931646, "post_id": 40773271, "comment_id": 68770442, "body": "Ok thank you, will give it a try when I get home. Thanks for the advice, is there a good article or tutorial where I can read up on shallow and deep copies? Also if you are willing to answer, does my C code look good, or are there so very obvious bad practices in there."}, {"owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "reply_to_user": {"reputation": 25, "user_id": 6026442, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36a97ccc2fdca1009169ad44f7a31262?s=128&d=identicon&r=PG&f=1", "display_name": "Dane Parchment", "link": "https://stackoverflow.com/users/6026442/dane-parchment"}, "edited": false, "score": 0, "creation_date": 1479931791, "post_id": 40773271, "comment_id": 68770509, "body": "You can find some info in <a href=\"http://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy\">this</a> SO post. Your code looks fine to me, except for code formating sometimes."}], "tags": [], "owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "is_accepted": true, "score": 1, "last_activity_date": 1479931671, "last_edit_date": 1479931671, "creation_date": 1479931527, "answer_id": 40773271, "question_id": 40773212, "link": "https://stackoverflow.com/questions/40773212/c-working-but-not-as-intended-my-determinate-method-is-editing-the-provided-m/40773271#40773271", "title": "C: (Working But Not As Intended) My determinate method is editing the provided matrix (as a parameter) but I just want it to provide the determinate", "body": "<p>What you did is called <code>shallow copy</code>. \nHere: <code>double **temp = m.matrix;</code> you just assigned pointer to memory that hold your matrix's elements to the <code>temp</code> matrix, so when you edit it, it edits the data that your original matrix holds as well. That's because the original elements only exist a t one place, and poth <code>temp</code> and <code>m</code> pointers are pointed to it.</p>\n\n<p>In order to do it the way you want it, you have to create a <code>deep copy</code>. You have to allocate new memory for the <code>temp</code> matrix and copy every single element from the original one into it. Don't forget to <code>free()</code> the memory, if you will allocate it dynamically, once you are done with it.</p>\n"}], "owner": {"reputation": 25, "user_id": 6026442, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36a97ccc2fdca1009169ad44f7a31262?s=128&d=identicon&r=PG&f=1", "display_name": "Dane Parchment", "link": "https://stackoverflow.com/users/6026442/dane-parchment"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 40773271, "answer_count": 1, "score": 1, "last_activity_date": 1479931671, "creation_date": 1479931319, "question_id": 40773212, "link": "https://stackoverflow.com/questions/40773212/c-working-but-not-as-intended-my-determinate-method-is-editing-the-provided-m", "title": "C: (Working But Not As Intended) My determinate method is editing the provided matrix (as a parameter) but I just want it to provide the determinate", "body": "<p>Here is my code for the determinate function:</p>\n\n<pre><code>double getDeterminate(Matrix m) {\n    //We don't want to change the given matrix, just\n    //find it's determinate so use a temporary matrix\n    //instead for the calculations\n    double **temp = m.matrix;\n    int rows = m.rows, cols = m.cols;\n    //If the matrix is not square then the derminate does not exist\n    if(rows == cols) {\n        //If the matrix is 2x2 matrix then the\n        //determinate is ([0,0]x[1,1]) - ([0,1]x[1,0])\n        if(rows == 2 &amp;&amp; cols == 2) {\n            return (temp[0][0] * temp[1][1]) - (temp[0][1] * temp[1][0]);\n        }\n        //Otherwise if it is n*n...we do things the long way\n        //we will be using a method where we convert the \n        //matrix into an upper triangle, and then the det\n        //will simply be the multiplication of all diagonal\n        //indexes\n        int i, j, k;\n        double ratio;\n        for(i = 0; i &lt; rows; i++){\n        for(j = 0; j &lt; cols; j++){\n            if(j&gt;i){\n                ratio = temp[j][i]/temp[i][i];\n                for(k = 0; k &lt; rows; k++) {\n                    temp[j][k] -= ratio * temp[i][k];\n                }\n            }\n        }\n    }\n    double det = 1; //storage for determinant\n    for(i = 0; i &lt; rows; i++) {\n        det *= temp[i][i];\n    }\n        return det;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And here is my struct for the Matrix (in an external header file):</p>\n\n<pre><code>#ifndef MATRIX_H\n#define MATRIX_H\n\ntypedef struct Matrix {\n    int rows;\n    int cols;\n    double ** matrix;\n} Matrix;\n\n/** Build/Destroy/Display Methods\n-------------------------------------------*/\nMatrix buildMatrix(int r, int c);\n\nMatrix displayMatrix(Matrix m);\n\n/** Matrix Get and Set\n-------------------------------------------*/\nvoid setValue(Matrix m, double val, int r, int c);\n\ndouble getValue(Matrix m, int r, int c);\n\n/** Matrix Multiplication\n-------------------------------------------*/\nMatrix multByValue(double val, Matrix m);\n\nMatrix multByMatrix(Matrix mat1, Matrix mat2);\n\n/** Matrix Inversion\n-------------------------------------------*/\nMatrix invertMatrix(Matrix m);\n\n/** Matrix Determinate\n-------------------------------------------*/\ndouble getDeterminate(Matrix m);\n\n/** Matrix Transpose\n-------------------------------------------*/\nMatrix transpose(Matrix m);\n\n#endif\n</code></pre>\n\n<p>Currently it is doing exactly what I want it to do, finding the determinate by turning the matrix into an upper triangle. However, when I run the determinate method, it still changes the matrix I provided as a parameter, even though I believe I used temporary variables to do the calculations without messing with given Matrix. </p>\n\n<p>Example In my main.c I have this:</p>\n\n<pre><code>Matrix mat2 = buildMatrix(3, 3);\nsetValue(mat2, 12, 0, 0); setValue(mat2, 4, 0, 1); setValue(mat2, 3, 0, 2);\nsetValue(mat2, 4, 1, 0); setValue(mat2, 13, 1, 1); setValue(mat2, 25, 1, 2);\nsetValue(mat2, 78, 2, 0); setValue(mat2, 8, 2, 1); setValue(mat2, 9, 2, 2);\ndisplayMatrix(mat2);\nprintf(\"Determinate of mat2 is %4.2f\", getDeterminate(mat2));\nMatrix mat4 = transpose(mat2);\ndisplayMatrix(mat4);\n</code></pre>\n\n<p>And when I run it I get:</p>\n\n<pre><code>Mat2 Before Transpose\n|    12.00    4.00    3.00|\n|     4.00   13.00   25.00|\n|    78.00    8.00    9.00|\n\nDeterminate of mat2 is 3714.00\n\nMat4 After Transpose of Mat2\n|    12.00    0.00    0.00|\n|     4.00   11.67    0.00|\n|     3.00   24.00   26.53|\n</code></pre>\n\n<p>As you can see the transpose function is doing it's job correctly, but mat2 has been changed by the determinate method. I don't want that to occur, so what have I done to cause this to happen, and what can I do to fix it? I think it has something to do with pointer, I am new to C, so I don't really know what to do.</p>\n"}, {"tags": ["c", "linux", "module", "linux-kernel", "keyboard"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1479930974, "post_id": 40772970, "comment_id": 68770069, "body": "you do it in the user space. e.g. you do <code>xinput float</code> on your input hardware to disconnect it from your desktop system, then write a program to read input from it, translate it to another event, then pass it to <code>uinput</code>. You use <code>uinput </code> to create a virtual input device to inject the translated input event back into the system. referencd: <a href=\"http://thiemonge.org/getting-started-with-uinput\" rel=\"nofollow noreferrer\">thiemonge.org/getting-started-with-uinput</a>"}, {"owner": {"reputation": 162, "user_id": 4746861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b02d093c0e7e10074b7d572396022657?s=128&d=identicon&r=PG&f=1", "display_name": "mmichal10", "link": "https://stackoverflow.com/users/4746861/mmichal10"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1479931205, "post_id": 40772970, "comment_id": 68770194, "body": "I would love to do it in user space, but i must be a kernel modul."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1479931865, "post_id": 40772970, "comment_id": 68770540, "body": "That&#39;s a ill-formed requirement."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1479951377, "post_id": 40772970, "comment_id": 68777150, "body": "@user3528438 His teacher asked him so it looks more like a task to learn from as opposed to something that&#39;s going to run in production or have some utility other than writing a kernel module etc."}], "owner": {"reputation": 162, "user_id": 4746861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b02d093c0e7e10074b7d572396022657?s=128&d=identicon&r=PG&f=1", "display_name": "mmichal10", "link": "https://stackoverflow.com/users/4746861/mmichal10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479930438, "creation_date": 1479930438, "last_edit_date": 1495539958, "question_id": 40772970, "link": "https://stackoverflow.com/questions/40772970/linux-kernel-replace-keys", "title": "Linux kernel replace keys", "body": "<p>I have to write a linux kernel module, which change character printed on the screen after pressing a key (let's say - I want 'a' to be printed when I press 'b' on keyboard). What is the best way to do it? I'he thought that good idea is to create module for keyboard. I did some research, i saw few keyloggers (as kernel modules) but all of them where able only to listen what key was pressed, and any change of scancode was imposible (which is pretty obvious in keyloggers). I read 3rd chapter from Linux Device Drivers, and i started to read 6th, but they are talking only about virtual devices, when i want to connect my module with the real device. I saw also this <a href=\"https://stackoverflow.com/questions/33836541/linux-kernel-how-to-capture-a-key-press-and-replace-it-with-another-key\" title=\"this\">https://stackoverflow.com/questions/33836541/linux-kernel-how-to-capture-a-key-press-and-replace-it-with-another-key</a>, but it wasn't working. My teacher said there is much eaysier way than using interrupts, but I have no idea how to do it (neither using interrupts and any other way). </p>\n\n<p>What should I do? just read next chapters of LDD? Or any other book? Or maybe just lie down and cry? </p>\n"}, {"tags": ["c", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 21022, "user_id": 348081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fc6e3adc850c07248a46aaadc05fa59b?s=128&d=identicon&r=PG", "display_name": "JuanPablo", "link": "https://stackoverflow.com/users/348081/juanpablo"}, "edited": false, "score": 0, "creation_date": 1479991754, "post_id": 40773016, "comment_id": 68796183, "body": "works with gcc because <code>({..})</code> is a gnu stament expression <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html</a> ... now I know"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 0, "last_activity_date": 1479932768, "last_edit_date": 1479932768, "creation_date": 1479930634, "answer_id": 40773016, "question_id": 40772958, "link": "https://stackoverflow.com/questions/40772958/macro-in-visual-studio-2015-expected-an-expression/40773016#40773016", "title": "macro in visual studio 2015: expected an expression", "body": "<p>I don't know why it works with gcc (now I know after following the duplicate link), but it's really overcomplex. A simpler expression does the same and is obviously more portable.</p>\n\n<p>So drop the curly braces and the semi-colon.</p>\n\n<p>That will work:</p>\n\n<pre><code>#define _timer() ((double)(clock())/CLOCKS_PER_SEC)\n</code></pre>\n\n<p>or create a real function</p>\n\n<pre><code>double _timer() { return ((double)(clock()))/CLOCKS_PER_SEC; }\n</code></pre>\n\n<p>but not a mix of the 2 constructs</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1479931431, "creation_date": 1479931431, "answer_id": 40773243, "question_id": 40772958, "link": "https://stackoverflow.com/questions/40772958/macro-in-visual-studio-2015-expected-an-expression/40773243#40773243", "title": "macro in visual studio 2015: expected an expression", "body": "<p>Please try this</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n\n#define TIMER (((double)clock()) / CLOCKS_PER_SEC)\n\nint main() {\n    int i, j;\n    double timer = TIMER;\n    for (i = 0; i &lt; 1000; i++) {\n        for (j = 0; j &lt; 10000; j++) {\n            i*j;\n        }\n    }\n    printf(\"%f\", TIMER - timer);\n    return 0;\n}\n</code></pre>\n\n<p>Program output</p>\n\n<pre><code>0.018000\n</code></pre>\n\n<p>Please note that I use UPPERCASE name for a macro. And by putting the semicolon <code>;</code> and braces <code>{}</code> in the macro, it cannot be used as part of an expression.</p>\n"}], "owner": {"reputation": 21022, "user_id": 348081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fc6e3adc850c07248a46aaadc05fa59b?s=128&d=identicon&r=PG", "display_name": "JuanPablo", "link": "https://stackoverflow.com/users/348081/juanpablo"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2108, "favorite_count": 0, "closed_date": 1479931540, "accepted_answer_id": 40773016, "answer_count": 2, "score": 0, "last_activity_date": 1479932768, "creation_date": 1479930379, "question_id": 40772958, "link": "https://stackoverflow.com/questions/40772958/macro-in-visual-studio-2015-expected-an-expression", "closed_reason": "Duplicate", "title": "macro in visual studio 2015: expected an expression", "body": "<p>I have this code</p>\n\n<pre><code>// show_time.c\n#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n\n#define _timer() ({((double)(clock()))/CLOCKS_PER_SEC;})\n\nint main() {\n\n    int i, j;\n\n    double timer = _timer();\n\n    for (i = 0; i &lt; 1000; i++)\n        for (j = 0; j &lt; 10000; j++)\n            i*j;\n\n    printf(\"%f\", _timer() - timer);\n    return 0;\n}\n</code></pre>\n\n<p>with <code>gcc</code> work fine, I get the time. But in Visual Studio 2015, <code>_timer</code> is marked and I get the message <code>expected an expression</code>,</p>\n"}, {"tags": ["c", "makefile", "internationalization"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1479933355, "post_id": 40773600, "comment_id": 68771302, "body": "Would an alternative possibility be to use some shell code and <code>$(MAKE) conditional-target</code> manually on systems where it&#39;s required? Not ideal since you&#39;re still using shell code, but it&#39;s at least more portable than the <code>!=</code> construct."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1479934502, "post_id": 40773600, "comment_id": 68771822, "body": "I&#39;m not sure I understand what you&#39;re suggesting.  I suppose you could leave the conditional prerequisite out of the <code>all_dep</code> variable entirely, then in the recipe to build <code>target</code> you could first run <code>test -n &quot;$(cflags)&quot; &amp;&amp; $(MAKE) $(conditional_dep)</code> before you actually run the link command.  Is that what you had in mind?  If the author were willing to use a completely different variable, not <code>cflags</code>, as the trigger for including things then it could be done pretty straightforwardly with recursive macros."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1479934589, "post_id": 40773600, "comment_id": 68771860, "body": "Yes, that&#39;s the idea I had. Sorry I wasn&#39;t clearer in my intent. Would there be any issues with such a solution? Since <code>test</code> is already being used, I see the idea as a potential portable solution, but I might be blind to some problems that might arise."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1479935263, "post_id": 40773600, "comment_id": 68772167, "body": "If by &quot;any issue&quot; you mean, would it be POSIXly correct, I see no reason why not.  You will have to also set a local shell variable to include, or not, the object file in the link line so it&#39;s not quite as simple as in my comment."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1479937473, "post_id": 40773600, "comment_id": 68773163, "body": "I see what you mean... The idea doesn&#39;t make sense if you can&#39;t link the object file as necessary. For such a small makefile, it&#39;s a small obstacle, but for larger ones, I could see it being a problem. Thanks for pointing that out. :-)"}, {"owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "edited": false, "score": 0, "creation_date": 1479985203, "post_id": 40773600, "comment_id": 68791814, "body": "I also prefer space separated tokens, but this is just the way the existing Makefile of Lua is written. I just take a &quot;follow the project convention&quot; approach here."}, {"owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "edited": false, "score": 0, "creation_date": 1479985568, "post_id": 40773600, "comment_id": 68792098, "body": "What I would like is a solution as portable as possible which let the user just comment a variable in the makefile (or let it assigned to empty) to disable everything related to the feature. This doesn&#39;t have to be the <code>FEATURE_CFLAG</code> variable. This one can also depends on the <code>FEATURE</code> variable, why not. I would be interested in a working example using the suggested <code>$(MAKE) conditional-target</code> which is said more portable."}], "tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": false, "score": 1, "last_activity_date": 1479998020, "last_edit_date": 1479998020, "creation_date": 1479932755, "answer_id": 40773600, "question_id": 40772835, "link": "https://stackoverflow.com/questions/40772835/is-there-a-portable-way-to-make-portable-optionnal-dependency-in-makefile/40773600#40773600", "title": "Is there a portable way to make portable optionnal dependency in Makefile?", "body": "<p><code>!=</code> is only available in GNU make 4.0 and above.  Also it's not POSIX; it was added to GNU make for portability with BSD make and it was proposed for inclusion in the POSIX spec, but it's not been accepted as of now.</p>\n\n<p>I'm not aware of any way using only purely portable make (POSIX) to change the prerequisites of a target based on the contents of a make macro.</p>\n\n<p>If you're willing to assume GNU make, then (at least for now) it's more portable to use <code>$(shell ...)</code> than <code>!=</code>.  Although if you assume GNU make there are better ways to handle this that don't require the shell at all.  If you want to use <code>!=</code> to get portability with BSD make, be sure to add a note to your docs that you require GNU make 4.0 or above.</p>\n\n<p>N.B., it's usually a really bad idea to not put whitespace between the variable name and the assignment operator in a makefile; e.g. it's better to write <code>FOO != bar</code>, instead of <code>FOO!=bar</code> or <code>FOO!= bar</code>.</p>\n\n<p><em>EDIT</em></p>\n\n<p>One option as discussed by Chrono Kitsune would be to use a bit of recursion; it would look something like this:</p>\n\n<pre><code>cflag= -D CODE_SWITCH\n\nconditional_dep= additional_dep.c\nmandatory_dep= dep0.c dep1.c\n\nall_dep= $(mandatory_dep)\nall: target\n        @echo building code with flag $(cflag) \n        @echo ${SHELL}\ntarget: $(mandatory_dep)\n        @all_dep='$^'; if test -n \"$(cflag)\"; then \\\n            all_dep='$^ $(conditional_dep)'; \\\n            $(MAKE) $(conditional_dep); \\\n         fi; \\\n        echo building $@ which depends on $$all_dep\ndep0.c:\n        @echo building dep0.c\ndep1.c:\n        @echo building dep1.c\nadditional_dep.c:\n        @echo building $@\n</code></pre>\n\n<p>Another alternative, if you don't have to have things depend on commenting out <code>cflag</code> itself, would be to use recursive variable naming; that would look something like this:</p>\n\n<pre><code>SWITCH = enabled\n\nenabled_cflag = -D CODE_SWITCH\nenabled_dep = additional_dep.c\n\nmandatory_dep = dep0.c dep1.c\n\ncflag = $($(SWITCH)_cflag)\nall_dep = $(mandatory_dep) $($(SWITCH)_dep)\n\nall: target\n        @echo building code with flag $(cflag) \n        @echo ${SHELL}\ntarget: $(all_dep)\n        echo building $@ which depends on $(all_dep)\ndep0.c:\n        @echo building dep0.c\ndep1.c:\n        @echo building dep1.c\nadditional_dep.c:\n        @echo building $@\n</code></pre>\n\n<p>Now if you comment out the <code>SWITCH</code> setting, or set it to empty on the <code>make</code> command line, then those elements will be turned off (because <code>$($(SWITCH)_cflag)</code> will expand the non-existent/empty variable <code>_cflag</code> not <code>enabled_cflag</code>).  Recursive variable naming is supported by most versions of make (but not all).</p>\n"}], "owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479998020, "creation_date": 1479929865, "question_id": 40772835, "link": "https://stackoverflow.com/questions/40772835/is-there-a-portable-way-to-make-portable-optionnal-dependency-in-makefile", "title": "Is there a portable way to make portable optionnal dependency in Makefile?", "body": "<p>Working on <a href=\"https://github.com/psychoslave/lua-i18n\" rel=\"nofollow noreferrer\">Lua-i18n</a>, I'm trying to change the Makefile so user can compile the project with the facilities they are interested in, that is the Makefile define some C macro that will disable the corresponding code. Defining that in the Makefile is straight forward, but getting rid of unnecessary compilation dependencies linked to the feature thus defined is less trivial when portability is targeted. Indeed, the project aims at modifying the original code as few as possible, and add as few dependencies as possible (possibly none).</p>\n\n<p>So here are some relevant links found in the process</p>\n\n<ul>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/utilities/make.html\" rel=\"nofollow noreferrer\">http://pubs.opengroup.org/onlinepubs/009695399/utilities/make.html</a></li>\n<li><a href=\"http://www.netbsd.org/docs/pkgsrc/makefile.html\" rel=\"nofollow noreferrer\">http://www.netbsd.org/docs/pkgsrc/makefile.html</a></li>\n<li><a href=\"http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-5.0.1+i386\" rel=\"nofollow noreferrer\">http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-5.0.1+i386</a></li>\n<li><a href=\"http://gallium.inria.fr/blog/portable-conditionals-in-makefiles/\" rel=\"nofollow noreferrer\">http://gallium.inria.fr/blog/portable-conditionals-in-makefiles/</a></li>\n<li><a href=\"https://docs.google.com/document/d/1oUR7iMnaNzkeT3TTOS-Gwul6_V3TE8caIDAd1FwPyNc/edit#\" rel=\"nofollow noreferrer\">https://docs.google.com/document/d/1oUR7iMnaNzkeT3TTOS-Gwul6_V3TE8caIDAd1FwPyNc/edit#</a></li>\n<li><a href=\"https://www.gnu.org/software/make/manual/html_node/Conditional-Syntax.html\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/make/manual/html_node/Conditional-Syntax.html</a></li>\n<li><a href=\"https://www.mkssoftware.com/docs/man5/makefile.5.asp\" rel=\"nofollow noreferrer\">https://www.mkssoftware.com/docs/man5/makefile.5.asp</a></li>\n</ul>\n\n<p>Here is a solution which seems to work on a Fedora 24 desktop with GNU Make. However I would like to know if such a solution would work with any (reasonably modern) make implementation out there.<br>\n</p>\n\n<pre><code>cflag= -D CODE_SWITCH\nresolved_conditional_cflag!= test -n \"$(cflag)\" &amp;&amp; echo \"$(cflag)\"\nconditional_dep= additional_dep.c\nmandatory_dep= dep0.c dep1.c\nresolved_conditional_dep!= test -n \"$(cflag)\" &amp;&amp; echo \"$(conditional_dep)\"\nall_dep= $(mandatory_dep) $(resolved_conditional_dep)\nall: target\n    @echo building code with flag $(resolved_conditional_cflag) \n    @echo ${SHELL}\ntarget: $(all_dep)\n    @echo building $@ which depends on $(all_dep)\ndep0.c:\n    @echo building dep0.c\ndep1.c:\n    @echo building dep1.c\nadditional_dep.c:\n    @echo building $@\n</code></pre>\n\n<p>The idea is that the user comment the line <code>cflag= -D CODE_SWITCH</code>, and that's all, the compiler won't treat related dependencies. So, would such a solution be portable? It relies on the shell expansion <code>!=</code> and the <code>test</code> command. I think the last one might be POSIX, but I may be wrong. More generally, their might be portability issues I'm not aware here.</p>\n\n<p>Note that for this specific demand, \"using CMake, autotools or other\" is not an desired answer.</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1479929636, "post_id": 40772607, "comment_id": 68769430, "body": "Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem. Show some examples of the input, the expected output, and the actual output."}], "answers": [{"tags": [], "owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "is_accepted": false, "score": 1, "last_activity_date": 1479931030, "last_edit_date": 1479931030, "creation_date": 1479929377, "answer_id": 40772707, "question_id": 40772607, "link": "https://stackoverflow.com/questions/40772607/c-2d-array-changes-2-elements-at-the-same-time/40772707#40772707", "title": "C 2D Array changes 2 elements at the same time", "body": "<p>Your array ranges from 0 to 78 in the first dimension and 0 to 23 in the second dimension. As you are trying to access element that is out of bounds of your array, the behaviour is not defined and anything can happen. This is what might cause your problem. If you want to access index [x][24], you array has to be declared like this: <code>int myarray[79][25]</code>.</p>\n\n<p>The \"mirroring\" apparently occurs, because in the memory, the array elements are allocated next to each other, you can imagine it like a very long line. So right after index for example <code>[1][23]</code> is (probably) index <code>[2][0]</code>. It's (probably) not guaranteed though, so it's not a good idea to use such a construct. And even if it was defined, it is very confusing.</p>\n"}, {"tags": [], "owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "is_accepted": true, "score": 3, "last_activity_date": 1479931416, "last_edit_date": 1479931416, "creation_date": 1479929744, "answer_id": 40772806, "question_id": 40772607, "link": "https://stackoverflow.com/questions/40772607/c-2d-array-changes-2-elements-at-the-same-time/40772806#40772806", "title": "C 2D Array changes 2 elements at the same time", "body": "<p><strong>Specification: <a href=\"http://open-std.org/JTC1/SC22/WG14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">6.5.2.1 Array subscripting</a></strong></p>\n\n<blockquote>\n  <p>Successive subscript operators designate an element of a multidimensional array object.\n  If E is an n-dimensional array (n \u2265 2) with dimensions i \u00d7 j \u00d7 ... \u00d7 k, then E (used as\n  other than an lvalue) is converted to a pointer to an (n \u2212 1)-dimensional array with\n  dimensions j \u00d7 ... \u00d7 k. If the unary * operator is applied to this pointer explicitly, or\n  implicitly as a result of subscripting, the result is the referenced (n \u2212 1)-dimensional\n  array, which itself is converted into a pointer if used as other than an lvalue. It follows\n  from this that arrays are stored in row-major order (last subscript varies fastest).</p>\n</blockquote>\n\n<p>C is a language which allows the programmer to do a lot. For example, there is no <code>IndexOutOfBoundsError</code>. An array is just a pointer to the first cell and then it has reservation for array length next cells.</p>\n\n<p>When you declare int[79][24] it makes a reservation for 79*24 cells. They go one by one. If the array dimensions are 79x24, you have indexes from 0-78 in the first dimension and 0-23 in the second. The cell at the adress 34,24 is actually one after 34,23 which is 35,0 in the memory.</p>\n\n<p>Let's have an example on array of size 6x4:</p>\n\n<pre><code>Your array represented as expected by you with values:\n+---+---+---+---+---+---+---+\n|   | 0 | 1 | 2 | 3 | 4 | 5 |\n+---+---+---+---+---+---+---+\n| 0 | 0 | 0 | 0 | 0 | 0 | 0 |\n+---+---+---+---+---+---+---+\n| 1 | 0 | 0 | 0 | 0 | 0 | 0 |\n+---+---+---+---+---+---+---+\n| 2 | 0 | 0 | 0 | 0 | 0 | 0 |\n+---+---+---+---+---+---+---+\n| 3 | 0 | 0 | 0 | 0 | 0 | 0 |\n+---+---+---+---+---+---+---+\n\nYour array with cell adresses (where start is the adress of cell 0,0):\n+---+------------+------------+------------+------------+------------+------------+\n|   | 0          | 1          | 2          | 3          | 4          | 5          |\n+---+------------+------------+------------+------------+------------+------------+\n| 0 | start      | start + 1  | start + 2  | start + 3  | start + 4  | start + 5  |\n+---+------------+------------+------------+------------+------------+------------+\n| 1 | start + 6  | start + 7  | start + 8  | start + 9  | start + 10 | start + 11 |\n+---+------------+------------+------------+------------+------------+------------+\n| 2 | start + 12 | start + 13 | start + 14 | start + 15 | start + 16 | start + 17 |\n+---+------------+------------+------------+------------+------------+------------+\n| 3 | start + 18 | start + 19 | start + 20 | start + 21 | start + 22 | start + 23 |\n+---+------------+------------+------------+------------+------------+------------+\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1479930399, "post_id": 40772854, "comment_id": 68769781, "body": "I think it&#39;s quite defined as <code>myarray[34][24]</code> reserves 34 spaces for 24 cells and then those 24 cells match the allocated space. Might work differently on memory page switch but I don&#39;t think so. I&#39;ll look for documentation."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1479930571, "post_id": 40772854, "comment_id": 68769888, "body": "@xenteros sorry, I should have been clearer. <code>int myarray[79][24]</code> followed by <code>int n = myarray[34][24]</code>  is strictly out of bounds."}, {"owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1479930760, "post_id": 40772854, "comment_id": 68769981, "body": "It&#39;s defined behavior according to <a href=\"http://open-std.org/JTC1/SC22/WG14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">open-std.org/JTC1/SC22/WG14/www/docs/n1570.pdf</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 1, "creation_date": 1479930853, "post_id": 40772854, "comment_id": 68770015, "body": "@xenteros the clause, please."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1479932246, "post_id": 40772854, "comment_id": 68770757, "body": "@xenteros that seems good, although another answer saying effectively the same as mine has been upvoted. I found it interesting that in this case, you say that array overflow behaviour is <i>guaranteed</i> to be good - except the unmentioned <code>int n = myarray[78][24];</code>. BTW I can only upvote you once."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1479932519, "post_id": 40772854, "comment_id": 68770898, "body": "Do you think that is <i>good</i> behaviour? My question is duplicitous."}, {"owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1479932612, "post_id": 40772854, "comment_id": 68770945, "body": "I&#39;ve shown you something you didn&#39;t know and was sure is not true. Waste of time."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1479932655, "post_id": 40772854, "comment_id": 68770967, "body": "I actually did say it will overflow to the next row. You have become obnoxiously arrogant."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1479930763, "last_edit_date": 1479930763, "creation_date": 1479929955, "answer_id": 40772854, "question_id": 40772607, "link": "https://stackoverflow.com/questions/40772607/c-2d-array-changes-2-elements-at-the-same-time/40772854#40772854", "title": "C 2D Array changes 2 elements at the same time", "body": "<p>The memory for the array is contiguous, so although you define say</p>\n\n<pre><code>int myarray[79][24];\n</code></pre>\n\n<p>accessing </p>\n\n<pre><code>int n = myarray[34][24];\n</code></pre>\n\n<p>is strictly out of bounds.</p>\n\n<p>It might access <code>myarray[35][0]</code> but that behaviour is undefined.</p>\n"}], "owner": {"reputation": 65, "user_id": 6873692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d06fbd3982cdeec53e52578382b2c340?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/6873692/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "closed_date": 1479959755, "accepted_answer_id": 40772806, "answer_count": 3, "score": 0, "last_activity_date": 1479931416, "creation_date": 1479929037, "question_id": 40772607, "link": "https://stackoverflow.com/questions/40772607/c-2d-array-changes-2-elements-at-the-same-time", "closed_reason": "Not suitable for this site", "title": "C 2D Array changes 2 elements at the same time", "body": "<p>This is my 2D array <code>int myarray[79][24];</code> Whenever I change an element at row 0, it changes another element row 24 at the same time and vice versa.</p>\n\n<p>For example, <code>myarray[35][0] = 'X';</code> changes <code>myarray[35][0]</code> and  <code>myarray[34][24]</code> to X at the same time. And when I tried <code>myarray[40][24] = 'X';</code> it changes <code>myarray[40][24]</code> and <code>myarray[41][0]</code> at the same time.</p>\n\n<p>It seems like the first and last row are mirroring each other. How can I stop this from happening?</p>\n"}, {"tags": ["c", "io"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1479928515, "post_id": 40772463, "comment_id": 68768879, "body": "Try <code>EOF</code> instead of <code>&#39;\\0&#39;</code>"}, {"owner": {"reputation": 53, "user_id": 2574852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58cc1e26e118ec877c6d3268f8cae8c4?s=128&d=identicon&r=PG", "display_name": "Archit", "link": "https://stackoverflow.com/users/2574852/archit"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1479928721, "post_id": 40772463, "comment_id": 68768996, "body": "Replacing &#39;\\0&#39; with    EOF     works the same."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1479928963, "post_id": 40772463, "comment_id": 68769109, "body": "What happens if you test against <code>&#39;\\n&#39;</code>?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1479929081, "post_id": 40772463, "comment_id": 68769164, "body": "The first snippet works fine for me with <code>EOF</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1479929378, "post_id": 40772463, "comment_id": 68769306, "body": "Ask <b><i>one</i></b> question, not two unrelated ones. Please do not add a third question, ask a new one."}, {"owner": {"reputation": 317, "user_id": 5504999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l6HUN.jpg?s=128&g=1", "display_name": "Imtiaz Raqib", "link": "https://stackoverflow.com/users/5504999/imtiaz-raqib"}, "edited": false, "score": 0, "creation_date": 1479929685, "post_id": 40772463, "comment_id": 68769451, "body": "Try using <code>\\n</code> instead of <code>\\0</code>. It&#39;s better practice to use new line character than null terminator."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1479930281, "post_id": 40772463, "comment_id": 68769720, "body": "<code>a=46.43253;</code> This is not Right. What is <code>a</code> and what is <code>46.43253</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1479930200, "post_id": 40772562, "comment_id": 68769671, "body": "<code>a=46.43253;</code> This is not right because <code>a</code> is FLOAT. What is <code>46.43253</code> ?"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1479930644, "post_id": 40772562, "comment_id": 68769924, "body": "@Michi Sorry? didn&#39;t follow you."}, {"owner": {"reputation": 317, "user_id": 5504999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l6HUN.jpg?s=128&g=1", "display_name": "Imtiaz Raqib", "link": "https://stackoverflow.com/users/5504999/imtiaz-raqib"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1479933796, "post_id": 40772562, "comment_id": 68771498, "body": "@Michi Are you saying <code>46.43253</code> is not a float?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1479963877, "post_id": 40772562, "comment_id": 68780249, "body": "What&#39;s the difference between 46.43253 and 46.43253f?"}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 3, "last_activity_date": 1505360125, "last_edit_date": 1592644375, "creation_date": 1479928840, "answer_id": 40772562, "question_id": 40772463, "link": "https://stackoverflow.com/questions/40772463/code-output-explanation/40772562#40772562", "title": "Code output explanation", "body": "<blockquote>\n<p>Output-  536870912</p>\n<p>46.432529</p>\n</blockquote>\n<p>In general using incorrect format specifier triggers <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> - which is what you have when you use <code>%d</code> in printf for printing float. In this case, you can expect any output usually.</p>\n<p>However, it may also be the case that since you have specified to read the float number as integer (e.g. by using <code>%d</code> specifier), it simply interpreted the result as integer - hence the strange number (since floats and integers are stored differently).</p>\n<p>If you are interested why the second printf prints a number slightly different from yours, <a href=\"https://stackoverflow.com/questions/16839658/printf-width-specifier-to-maintain-precision-of-floating-point-value\">this</a> may help you.</p>\n"}, {"tags": [], "owner": {"reputation": 355, "user_id": 7086420, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8d07eca88cdffbddbdf954601eea3448?s=128&d=identicon&r=PG&f=1", "display_name": "Jevon", "link": "https://stackoverflow.com/users/7086420/jevon"}, "is_accepted": false, "score": 0, "last_activity_date": 1479931838, "creation_date": 1479931838, "answer_id": 40773339, "question_id": 40772463, "link": "https://stackoverflow.com/questions/40772463/code-output-explanation/40773339#40773339", "title": "Code output explanation", "body": "<p>This block is fine:</p>\n\n<pre><code>float a;\na=46.43253;\n</code></pre>\n\n<p>This block is also fine: </p>\n\n<pre><code>printf(\"\\n%f\",a);\n</code></pre>\n\n<p>The problem is with this block:</p>\n\n<pre><code>printf(\"\\n%d\",a);\n</code></pre>\n\n<p>Particularly this part:</p>\n\n<pre><code>\"\\n%d\"\n</code></pre>\n\n<p>Please keep in mind you declared a float and using the integer syntax to output it. That's why you are getting the negative output\nIf it is a case where you don't want to change the \"%d,\" then simply cast it as a float before output</p>\n"}], "owner": {"reputation": 53, "user_id": 2574852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58cc1e26e118ec877c6d3268f8cae8c4?s=128&d=identicon&r=PG", "display_name": "Archit", "link": "https://stackoverflow.com/users/2574852/archit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1479948187, "accepted_answer_id": 40772562, "answer_count": 2, "score": 0, "last_activity_date": 1505360125, "creation_date": 1479928406, "last_edit_date": 1479937138, "question_id": 40772463, "link": "https://stackoverflow.com/questions/40772463/code-output-explanation", "closed_reason": "Needs more focus", "title": "Code output explanation", "body": "<p><strong>Question 1.</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n\n  int c;\n  while((c=getchar())!='\\0')\n   {\n     putchar(c);\n   } \n}\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<blockquote>\n  <p>Hello C.</p>\n  \n  <p>Tell me about you.</p>\n</blockquote>\n\n<p><strong>Output</strong></p>\n\n<blockquote>\n  <p>Hello C.</p>\n  \n  <p>Tell me about you.</p>\n  \n  <p>\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff</p>\n</blockquote>\n\n<p>and it continues with status-time limit exceeded.</p>\n\n<p><strong>Question 2.</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n  float a;\n  a=46.43253;\n  printf(\"\\n%d\",a);\n  printf(\"\\n%f\",a);\n  return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<blockquote>\n  <p>536870912</p>\n  \n  <p>46.432529</p>\n</blockquote>\n"}, {"tags": ["c", "file", "sorting", "compilation", "stdin"], "comments": [{"owner": {"reputation": 273, "user_id": 3722559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ae714cac6c3fe6897729aca735eaea?s=128&d=identicon&r=PG&f=1", "display_name": "schil227", "link": "https://stackoverflow.com/users/3722559/schil227"}, "edited": false, "score": 2, "creation_date": 1479926456, "post_id": 40771945, "comment_id": 68767828, "body": "Should the malloc call for sentence be multiplied by 1000 instead of 100?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1479926549, "post_id": 40771945, "comment_id": 68767875, "body": "Dont&#39;post images of text but post the text."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1479926601, "post_id": 40771945, "comment_id": 68767896, "body": "The code aside (multiple things in there will eventually need fixing) your build system (or build command, which you didn&#39;t share with us) is broken. <a href=\"http://coliru.stacked-crooked.com/a/e2d337b637a7adf1\" rel=\"nofollow noreferrer\">Your code compiles</a> (which by no means indicates it is &quot;correct&quot;)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1479926902, "post_id": 40771945, "comment_id": 68768050, "body": "@JonnyHenly oh, I see it now, you can delete this comment now, I deleted mine."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479926951, "post_id": 40771945, "comment_id": 68768082, "body": "It compiles and links here too."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 7201722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbc8240def064dac57c671f913cec88?s=128&d=identicon&r=PG&f=1", "display_name": "Nuggets10", "link": "https://stackoverflow.com/users/7201722/nuggets10"}, "edited": false, "score": 0, "creation_date": 1479938693, "post_id": 40774224, "comment_id": 68773678, "body": "Hi, thank you so much for your input! I ended doing a bit more research and am using fseek over fgets now and have my code working as intended! Thank you for pointing out constants + free memory allocation, completely overlooked that!"}, {"owner": {"reputation": 972, "user_id": 2253719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6fvu.jpg?s=128&g=1", "display_name": "WPomier", "link": "https://stackoverflow.com/users/2253719/wpomier"}, "reply_to_user": {"reputation": 81, "user_id": 7201722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbc8240def064dac57c671f913cec88?s=128&d=identicon&r=PG&f=1", "display_name": "Nuggets10", "link": "https://stackoverflow.com/users/7201722/nuggets10"}, "edited": false, "score": 0, "creation_date": 1479944059, "post_id": 40774224, "comment_id": 68775459, "body": "I think my post answered your original question, could you please accept it?"}, {"owner": {"reputation": 81, "user_id": 7201722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbc8240def064dac57c671f913cec88?s=128&d=identicon&r=PG&f=1", "display_name": "Nuggets10", "link": "https://stackoverflow.com/users/7201722/nuggets10"}, "edited": false, "score": 0, "creation_date": 1479946626, "post_id": 40774224, "comment_id": 68776107, "body": "Will do! Sorry first time using stackoverflow!"}], "tags": [], "owner": {"reputation": 972, "user_id": 2253719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6fvu.jpg?s=128&g=1", "display_name": "WPomier", "link": "https://stackoverflow.com/users/2253719/wpomier"}, "is_accepted": true, "score": 0, "last_activity_date": 1479935524, "creation_date": 1479935524, "answer_id": 40774224, "question_id": 40771945, "link": "https://stackoverflow.com/questions/40771945/c-sorting-order-from-file-input-receiving-an-abundance-of-compilation-error/40774224#40774224", "title": "C: Sorting order from file input, receiving an abundance of compilation error", "body": "<p>There are a few observations:</p>\n\n<ul>\n<li>max size of sentence is smaller than max size of a word. Better use constants or macros to avoid typos like this.</li>\n<li>You're using <code>argv[1]</code> (command line parameters) but nothing guarantees that the user will send a filename as parameter. Better validate this with a appropriate message (argc is the parameter count).</li>\n<li><code>fopen</code> tries to open the file, if it cannot do it, returns NULL, your code must do the  verification.</li>\n<li>The code allocates sentence, word and maxW for each line, but that's incorrect, so move these allocations to the top of main code.</li>\n<li><code>word</code> is just a pointer over <code>sentence</code>, so it doesn't need have memory allocated at all.</li>\n<li>Your program only reads the first line and then stops, that's because it has a <code>return 0;</code> inside <code>while</code>.</li>\n<li>Always <code>free</code> the memory that you allocates with <code>malloc</code>/<code>calloc</code>.</li>\n</ul>\n\n<p>Apart from those observations, your code is almost there.</p>\n\n<p>Reorganizing your code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n// Using constants avoid typos\n#define MAX_SIZE    1000\n\nint main(int argc, char** argv) {\n    // Tokens not considered as part of a word\n    const char tokens[] = \" \\t\\n\\r,/:[]=().&lt;&gt;\";\n    int maxlen = 0;\n    // calloc(a,b) == malloc(a*b)\n    char *sentence = (char *) malloc(MAX_SIZE * sizeof(char)); \n    char *maxW     = (char *) calloc(MAX_SIZE, sizeof(char));\n    char *word;\n    // try open and validate\n    FILE *file     = fopen(argv[1], \"rt\"); \n    if(file == NULL){\n        printf(\"file '%s' cannot be opened!\\n\", argv[1]);\n        return 1; // !=0 means error to OS\n    }\n\n    while (fgets(sentence, MAX_SIZE, file) != NULL) {\n        word = strtok(sentence, tokens);  \n        while (word != NULL) {\n            if (strlen(word) &gt; maxlen) {\n                maxlen = strlen(word);\n                strcpy(maxW, word);\n            }\n            word = strtok(NULL, tokens);\n        }\n    }\n    printf(\"Max word='%s' (len=%d)\\n\", maxW, maxlen); \n\n    // Don't forget free memory allocated with malloc/calloc\n    free(sentence);\n    free(maxW);\n\n    return 0;\n }\n</code></pre>\n\n<p>And executing over the same program file:</p>\n\n<pre><code>$ gcc program.c\n$ ./program program.c\nMax word='considered' (len=10)\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 7201722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbc8240def064dac57c671f913cec88?s=128&d=identicon&r=PG&f=1", "display_name": "Nuggets10", "link": "https://stackoverflow.com/users/7201722/nuggets10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 40774224, "answer_count": 1, "score": 1, "last_activity_date": 1479939140, "creation_date": 1479926209, "last_edit_date": 1479939140, "question_id": 40771945, "link": "https://stackoverflow.com/questions/40771945/c-sorting-order-from-file-input-receiving-an-abundance-of-compilation-error", "title": "C: Sorting order from file input, receiving an abundance of compilation error", "body": "<p>This is my first time working with file input and pointers so I'm sorry if my code seems like a mess. I was looking at other Stack Overflow solutions as a reference. My code is meant to find the longest word in a file where I can assume that the input text will not have a word longer than 1000 characters.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n// main() must return an integer\nint main(int argc, char** argv) {\n    FILE *file; //open an existing file\n    file = fopen(argv[1], \"r\"); //using argv as a pointer to an array of pointers to arrays of characters\n    char *sentence = (char *) malloc(100 * sizeof(char)); //memory allocation, unsure what to use for size*\n\n\n    //fgets - reads a line from the specified stream and stores it into the string pointed to\n    //max amount set to 1000\n    while (fgets(sentence, 1000, file) != NULL) {\n        char *word;\n        int maxlen = 0;\n        char *maxW;\n        //max size of 1000 characters\n        maxW = (char *) calloc(1000, sizeof(char));\n        word = (char *) calloc(1000, sizeof(char));\n        word = strtok(sentence, \" \");  //using strtok to break sentance to token\n\n        //checking size of word with maxlen\n        while (word != NULL) {\n            if (strlen(word) &gt; maxlen) {\n                maxlen = strlen(word);\n                strcpy(maxW, word);\n            }\n            word = strtok(NULL, \" \");\n        }\n        printf(\"%s\\n\", maxW); //printing the max sized word\n        maxlen = 0; //reset\n\n        return 0;\n    }\n}\n</code></pre>\n\n<p>I've only been using command line in windows to compile my code using gcc and I tried to use CLion but I can't figure out how to use CLion at the moment.</p>\n\n<p>Edit: oops removed the image.</p>\n"}, {"tags": ["c", "rust"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 7, "creation_date": 1479924234, "post_id": 40771335, "comment_id": 68766622, "body": "That&#39;s not a constant, but a preprocessor macro. C does not have symbolic constants other than <i>enum-constants</i>."}, {"owner": {"reputation": 507073, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1523907979, "post_id": 40771335, "comment_id": 86745574, "body": "See also <a href=\"https://stackoverflow.com/q/33529030/1048572\">Convert simple C #define&#39;s into Rust constants</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16513, "user_id": 95642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/36cf75fa7751ef674df65ab65cecd255?s=128&d=identicon&r=PG", "display_name": "Drew LeSueur", "link": "https://stackoverflow.com/users/95642/drew-lesueur"}, "edited": false, "score": 0, "creation_date": 1479927163, "post_id": 40771725, "comment_id": 68768208, "body": "Thank you for the answer. &quot;The best and simplest option is copy the value into your program.&quot; That&#39;s what I was thinking, I wanted to make sure I wasn&#39;t missing anything."}], "tags": [], "owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "is_accepted": true, "score": 4, "last_activity_date": 1479925426, "last_edit_date": 1495542270, "creation_date": 1479925426, "answer_id": 40771725, "question_id": 40771335, "link": "https://stackoverflow.com/questions/40771335/how-do-i-access-a-c-constant-in-rust/40771725#40771725", "title": "How do I access a C constant in Rust?", "body": "<p>I'm no Gopher, but <strong>Go</strong> doesn't understand C <code>#define</code>s either. Instead, <a href=\"https://dave.cheney.net/2016/01/18/cgo-is-not-go\" rel=\"nofollow noreferrer\"><strong>cgo</strong> does</a> (at least <a href=\"https://stackoverflow.com/q/28442524/155423\">some subsets of them</a>).</p>\n\n<p>The best and simplest option is copy the value into your program. Note that you <em>have to define a size</em>:</p>\n\n<pre><code>const INT_CANCEL: u8 = 2;\n</code></pre>\n\n<p>You could also create a macro if you really needed to be able to wait for the type to be decided at runtime, but that's not common.</p>\n\n<p>You could also create <a href=\"http://doc.crates.io/build-script.html\" rel=\"nofollow noreferrer\">a build script</a> that <a href=\"https://crates.io/crates/gcc\" rel=\"nofollow noreferrer\">compiles some C code</a> that includes the header and prints out the appropriate Rust code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"myheader.h\"\n\nint main(int argc, char *argv[]) {\n  printf(\"const INT_CANCEL: u8 = %d;\\n\", INT_CANCEL);\n\n  return 0;\n}\n</code></pre>\n\n<p>That Rust code can then be included back into your project.</p>\n\n<hr>\n\n<p>You may also try to modify <a href=\"https://github.com/Yamakaky/rust-bindgen\" rel=\"nofollow noreferrer\">rust-bindgen</a> so that does something similar to cgo and attempts to automatically create these constants.</p>\n"}], "owner": {"reputation": 16513, "user_id": 95642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/36cf75fa7751ef674df65ab65cecd255?s=128&d=identicon&r=PG", "display_name": "Drew LeSueur", "link": "https://stackoverflow.com/users/95642/drew-lesueur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 40771725, "answer_count": 1, "score": -1, "last_activity_date": 1479925426, "creation_date": 1479923955, "last_edit_date": 1479924358, "question_id": 40771335, "link": "https://stackoverflow.com/questions/40771335/how-do-i-access-a-c-constant-in-rust", "title": "How do I access a C constant in Rust?", "body": "<p>I am trying to use a C constant in Rust. Here is a portion of the C code:</p>\n\n<pre><code>#define INT_CANCEL 2\n</code></pre>\n\n<p>In Go, I can do something like this:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>return C.INT_CANCEL\n</code></pre>\n\n<p>How would I do something similar in Rust?</p>\n\n<p>I've tried something like</p>\n\n<pre><code>#[link(name = \"name_of_lib\")]\nextern {\n    int INT_CANCEL\n}\n</code></pre>\n\n<p>But that doesn't compile.</p>\n"}, {"tags": ["c", "arrays", "string", "memset"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 3, "creation_date": 1479923554, "post_id": 40771189, "comment_id": 68766216, "body": "That first program <a href=\"http://ideone.com/2Zy1hx\" rel=\"nofollow noreferrer\">doesn&#39;t compile</a> for the same reason that the second one doesn&#39;t. Are you sure that that&#39;s the source you were using?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 1, "creation_date": 1479923678, "post_id": 40771189, "comment_id": 68766290, "body": "Also, you can&#39;t apply ++ to arrays. :-)"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 3, "creation_date": 1479923782, "post_id": 40771189, "comment_id": 68766364, "body": "Rather, <code>dest++</code> is not legal C code if <code>dest</code> is an array."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1479928000, "post_id": 40771189, "comment_id": 68768621, "body": "&quot;I aim to copy dest string to source string.&quot;  I assume you mean the opposite of that."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1479995869, "post_id": 40771189, "comment_id": 68798993, "body": "this line: <code>memset(dest, &#39;\\0&#39;, 6*sizeof(dest));</code> is setting 36 bytes.  All bytes after the first 6 are beyond the end of the array.  This is undefined behavior and can lead to a seg fault event."}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 7055370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24168bcc90865b8c743cd014093dbb3a?s=128&d=identicon&r=PG&f=1", "display_name": "C. Frugal", "link": "https://stackoverflow.com/users/7055370/c-frugal"}, "edited": false, "score": 0, "creation_date": 1479927489, "post_id": 40771347, "comment_id": 68768377, "body": "Care to explain the downvoting?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1479928129, "post_id": 40771347, "comment_id": 68768684, "body": "I didn&#39;t downvote, but <code>strncpy</code> is not just a safer version of <code>strcpy</code>.  It actually does some very surprising things for historic reasons, and thus it probably isn&#39;t what you want in many cases."}, {"owner": {"reputation": 102, "user_id": 7055370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24168bcc90865b8c743cd014093dbb3a?s=128&d=identicon&r=PG&f=1", "display_name": "C. Frugal", "link": "https://stackoverflow.com/users/7055370/c-frugal"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1479929163, "post_id": 40771347, "comment_id": 68769211, "body": "As far as I remember the downside of strncpy is that it does not add the &#39;\\0&#39; byte if the max size is reached, but it was not a problem here, since he was using uninitialized data, and seemed to me to just try and manipulate pointers and memory."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1479930018, "post_id": 40771347, "comment_id": 68769593, "body": "It also pads the destination buffer if the source string is too short."}], "tags": [], "owner": {"reputation": 102, "user_id": 7055370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24168bcc90865b8c743cd014093dbb3a?s=128&d=identicon&r=PG&f=1", "display_name": "C. Frugal", "link": "https://stackoverflow.com/users/7055370/c-frugal"}, "is_accepted": false, "score": -1, "last_activity_date": 1479924021, "creation_date": 1479924021, "answer_id": 40771347, "question_id": 40771189, "link": "https://stackoverflow.com/questions/40771189/memset-and-characters/40771347#40771347", "title": "Memset and characters", "body": "<p><code>strcpy</code> is not a safe function, prefer using <code>strncpy</code>.</p>\n\n<p>The error is due to the fact that you try to increment the array, which is an rvalue (i.e. a constant, you can not put it to the left side of a sign <code>=</code>).  </p>\n\n<p>The common approach to iterate over an array is to use a pointer like so:  </p>\n\n<pre><code>char *p = dest;\nwhile (*p) { printf(\"%c\",*p++); }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1479998410, "post_id": 40771357, "comment_id": 68800492, "body": "this line: <code>memset(source, &#39;\\0&#39;, 6*sizeof(source));</code> is NOT correct. <code>sizeof(source)</code> is 6, 6*6 is 36, so this would clear 36 bytes, with after the first 6 is beyond the end of the array boundary.  The result is undefined behavior and can lead to a seg fault event.  Suggest removing the <code>6*</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1479999292, "post_id": 40771357, "comment_id": 68801043, "body": "@user3629249 Did you read the entire post before writing your comment?:)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1480000385, "post_id": 40771357, "comment_id": 68801702, "body": "yes, I did read the whole post AND your answer.  Your answer is propagating one of the problems with the OPs posted code."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1480000461, "post_id": 40771357, "comment_id": 68801769, "body": "@user3629249 I am sorry but all these your comments do not make sense relative to my answer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1480000706, "post_id": 40771357, "comment_id": 68801912, "body": "the first thing in your answer is to use: <code>memset(source, &#39;\\0&#39;, 6*sizeof(source));</code>  which will clear 36 bytes to <code>&#39;\\0&#39;</code>  which will overrun the source buffer, which is only 6 bytes long"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1480001008, "post_id": 40771357, "comment_id": 68802078, "body": "@user3629249 One more please read the whole answer. There is written all clearly."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1479924976, "last_edit_date": 1479924976, "creation_date": 1479924061, "answer_id": 40771357, "question_id": 40771189, "link": "https://stackoverflow.com/questions/40771189/memset-and-characters/40771357#40771357", "title": "Memset and characters", "body": "<p>For starters it is the source array that shall be zero terminated if you are going to copy it in another character arrays using the standard C function strcpy. So instead of this statement</p>\n\n<pre><code>memset(dest, '\\0', 6*sizeof(dest)); \n</code></pre>\n\n<p>you should at least write</p>\n\n<pre><code>memset(source, '\\0', 6*sizeof(source));\n       ^^^^^^                ^^^^^^^\n</code></pre>\n\n<p>However even this statement is wrong because it overwrites the memory allocated for the array. <code>sizeof( source )</code> is already equal to 6 bytes as it is followed from the array declaration</p>\n\n<pre><code>char source[6];\n</code></pre>\n\n<p>Thus you have to write</p>\n\n<pre><code>memset(source, '\\0', sizeof(source));\n                     ^^^^^^^^^^^^^\n</code></pre>\n\n<p>In fact there was enough to write either like</p>\n\n<pre><code>char source[6] = { '\\0' };\n</code></pre>\n\n<p>or like</p>\n\n<pre><code>char source[6] = \"\";\n</code></pre>\n\n<p>or like</p>\n\n<pre><code>char source[6];\nsource[0] = '\\0';\n</code></pre>\n\n<p>Arrays are non-modifiable lvalues. Thus you may not write for example the following way</p>\n\n<pre><code>while (*dest) { printf(\"%c\",*dest++); }\n</code></pre>\n\n<p>Instead of this statement you could write</p>\n\n<pre><code>for ( char *p = dest; *p; ++p ) { printf(\"%c\", *p); }\n</code></pre>\n\n<p>Take into account that nothing will be outputted because the array contains an empty string. You could initialize the source array with some non-empty string literal.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1479997878, "creation_date": 1479997878, "answer_id": 40788946, "question_id": 40771189, "link": "https://stackoverflow.com/questions/40771189/memset-and-characters/40788946#40788946", "title": "Memset and characters", "body": "<p>the following code cleanly compiles, and performs the desired operation.</p>\n\n<p>The differences between the posted code and this are commented.</p>\n\n<pre><code>#include &lt;stdio.h&gt;  // printf()\n#include &lt;string.h&gt; // strcpy()\n\nint main(void) \n{\n    char dest[6];  // declared, containing garbage\n    char source[6] = \"12345\"; // declared, containing the string \"12345\\0\"\n\n    strcpy(dest,source); \n    // now both arrays contain the string \"12345\\0\"\n\n    // best to use a 'for()' statement for indexing through an array\n    for( size_t i=0; dest[i];   i++ )  { printf(\"%c\", dest[i]);  }\n    printf( \"\\n\" );  // output the buffered data to the terminal\n    for( size_t i=0; source[i]; i++ )  { printf(\"%c\", source[i]);}\n    printf( \"\\n\" );  // output the buffered data to the terminal\n\n    // note, the following lines contain a precedence problem in\n    // the increment expressions and \n    // the address of an array declaration cannot be incremented\n    //while (*dest) { printf(\"%c\",*dest++); }\n    //while (*source) {printf(\"%c\",*source++); }\n\n    //return 0;// with modern C compilers, \n             // this line is not necessary in a 'main()' function\n             // when returning 0\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 669, "user_id": 5076511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WubM0.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/5076511/fabulous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 40771357, "answer_count": 3, "score": 2, "last_activity_date": 1479997878, "creation_date": 1479923421, "last_edit_date": 1592644375, "question_id": 40771189, "link": "https://stackoverflow.com/questions/40771189/memset-and-characters", "title": "Memset and characters", "body": "<p>I aim to copy <code>source</code> string to <code>dest</code> string. If i compile the following program:</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char dest[6];\n    char source[6];\n    \n    strcpy(dest,source);\n    \n    while (*dest) { printf(&quot;%c&quot;,*dest++); }\n    while (*source) {printf(&quot;%c&quot;,*source++); }\n    \n    return 0;\n}\n</code></pre>\n<p>I get a runtime error. I suspect it is because <code>strcpy</code> copies from source to destination till it encounters <code>\\0</code>. It did not,however,encounter the null character and kept on copying from the buffer till the runtime error occurred. To solve this problem, i modified the code as follows:</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char dest[6];\n    char source[6];\n    \n    \n    memset(dest, '\\0', 6*sizeof(dest)); //trying to set dest to '/0'\n    strcpy(dest,source);\n    \n    while (*dest) { printf(&quot;%c&quot;,*dest++); }\n    while (*source) {printf(&quot;%c&quot;,*source++); }\n    \n    return 0;\n}\n</code></pre>\n<p>i get the following errors:</p>\n<blockquote>\n<p>prog.c:11:38: error: lvalue required as increment operand</p>\n<pre><code> while (*dest) { printf(&quot;%c&quot;,*dest++); }\n                                  ^\n</code></pre>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>prog.c:11:38: error: lvalue required as increment operand</p>\n<pre><code> while (*dest) { printf(&quot;%c&quot;,*source++); }\n                                    ^\n</code></pre>\n</blockquote>\n<p>Why does this happen?</p>\n"}, {"tags": ["c", "file", "io", "fgets"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1479923459, "post_id": 40771162, "comment_id": 68766142, "body": "<i>All</i> of these questions can be answered by looking at <code>man fgets</code>."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1479923487, "post_id": 40771162, "comment_id": 68766174, "body": "@fangio  Please read the function description before using it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479923546, "post_id": 40771162, "comment_id": 68766212, "body": "(1) The buffer doesn&#39;t get filled.  (2) There&#39;s only one buffer shown; we can&#39;t possibly guess how the code interacts with <code>buffer1</code> and <code>buffer2</code>.  (3) There&#39;s a null byte at the end, probably preceded by a newline.  There could be null bytes in the middle of a line; there&#39;s no way to spot that reliably.  If you need to know the length reliably, use POSIX function <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a> because it reports the length it read (and will manage memory for you too)."}, {"owner": {"reputation": 611, "user_id": 1956727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4995da9fb92c65fbdd49362aee35a8b8?s=128&d=identicon&r=PG", "display_name": "NickStoughton", "link": "https://stackoverflow.com/users/1956727/nickstoughton"}, "edited": false, "score": 0, "creation_date": 1479923710, "post_id": 40771162, "comment_id": 68766313, "body": "Note also that <code>fgets</code> stops reading when it encounters a newline. If you are trying to read whole files, look at <code>fread</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 1476, "user_id": 4301564, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3983c5773e51a5f05aa92a1dac77a711?s=128&d=identicon&r=PG&f=1", "display_name": "fangio", "link": "https://stackoverflow.com/users/4301564/fangio"}, "edited": false, "score": 0, "creation_date": 1479923879, "post_id": 40771269, "comment_id": 68766417, "body": "So if the file is for example &quot;hello&quot; and the buffersize is 100, than the buffer will contain &quot;hello&quot; and buffer[5] = &#39;\\0&#39; or am I wrong?"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "reply_to_user": {"reputation": 1476, "user_id": 4301564, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3983c5773e51a5f05aa92a1dac77a711?s=128&d=identicon&r=PG&f=1", "display_name": "fangio", "link": "https://stackoverflow.com/users/4301564/fangio"}, "edited": false, "score": 0, "creation_date": 1479923929, "post_id": 40771269, "comment_id": 68766446, "body": "You are correct. If the file is &quot;hello\\nblabla&quot; you will have two iterations etc."}], "tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": false, "score": 1, "last_activity_date": 1479976293, "last_edit_date": 1479976293, "creation_date": 1479923709, "answer_id": 40771269, "question_id": 40771162, "link": "https://stackoverflow.com/questions/40771162/c-fgets-buffersize/40771269#40771269", "title": "C fgets buffersize", "body": "<p>As the comments suggest, the <code>man</code> can help here, or google... From <a href=\"http://en.cppreference.com/w/cpp/io/c/fgets\" rel=\"nofollow noreferrer\">cppreference</a></p>\n\n<blockquote>\n  <p>Reads at most count - 1 characters from the given file stream and stores them in the character array pointed to by str. Parsing stops if end-of-file occurs or a newline character is found, in which case str will contain that newline character. If no errors occur, writes a null character at the position immediately after the last character written to str. </p>\n</blockquote>\n\n<p>and also:</p>\n\n<blockquote>\n  <p>Return value: str on success, null pointer on failure.</p>\n</blockquote>\n\n<p>Basically the number is the amount of chars you read+1. Usually you don't gobble the whole line but only some of it. In any case the buffer has a null terminator and you can keep reading until EOF.</p>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 7083585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/im60o.png?s=128&g=1", "display_name": "\u90ed\u6625\u6797", "link": "https://stackoverflow.com/users/7083585/%e9%83%ad%e6%98%a5%e6%9e%97"}, "is_accepted": true, "score": 2, "last_activity_date": 1479980914, "creation_date": 1479980914, "answer_id": 40782909, "question_id": 40771162, "link": "https://stackoverflow.com/questions/40771162/c-fgets-buffersize/40782909#40782909", "title": "C fgets buffersize", "body": "<p>To answer your questions, firstly you must understand fgets(3). It reads a line at once, fgets() returns after newline or EOF is reached. And a '\\0' is appended to terminate the string. I answer to your question as followings...</p>\n\n<ol>\n<li>Normally fgets() takes a line of string at a time not the entire file. In your code, it means the line has maximum length of 65535 + '\\0' makes 65536, which is considered too long. To read a text file, normally you have to put fgets() in for () or while () loop until EOF is reached (buffer == NULL).</li>\n<li>If it reads a line, which is longer than the length of buffer, it will read only buffer length - 1 chars, then append '\\0'.</li>\n<li>strlen(3) will give you the length of the string.</li>\n</ol>\n"}], "owner": {"reputation": 1476, "user_id": 4301564, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3983c5773e51a5f05aa92a1dac77a711?s=128&d=identicon&r=PG&f=1", "display_name": "fangio", "link": "https://stackoverflow.com/users/4301564/fangio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2917, "favorite_count": 1, "accepted_answer_id": 40782909, "answer_count": 2, "score": 0, "last_activity_date": 1479980914, "creation_date": 1479923336, "question_id": 40771162, "link": "https://stackoverflow.com/questions/40771162/c-fgets-buffersize", "title": "C fgets buffersize", "body": "<p>I have a program in C, which reads in a file with buffers:</p>\n\n<pre><code>char buffer[65536];\nwhile(fgets(buffer,65536,inputFile)){...}\n</code></pre>\n\n<p>Now I have some questions:</p>\n\n<ol>\n<li>What happens if the filesize is smaller than buffersize?</li>\n<li>Does fgets() overwrite the full buffer, so if previous buffer (buffer1) was full, and the next one (buffer2) for example size 10 isn't, will the buffer still have the chars of buffer1 in it for example at buffer2[20] = buffer1[20] because it didn't overwrite?</li>\n<li>How to know how many chars are inside the buffer, so you can backward loop the buffer</li>\n</ol>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1479923641, "post_id": 40770881, "comment_id": 68766260, "body": "Try stepping through with a debugger."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479924015, "post_id": 40770881, "comment_id": 68766500, "body": "If you had a &#39;syntax issue&#39;, the compiler would reject the code.  If you&#39;re running it in GDB, then the problem is not the syntax but the logic."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479924438, "post_id": 40770881, "comment_id": 68766747, "body": "It&#39;s not particularly efficient, but the code sorts in descending order for me on arrays of size 3 and 5.  (Why not efficient?  Well, amongst other things, it compares a number with itself, and if the number is equal to itself, swaps the value with itself, which doesn&#39;t tend to change things very much.)"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479924527, "post_id": 40770935, "comment_id": 68766789, "body": "I think your rewrite of the loops is an efficiency issue, not a technical necessity.  At least, for the (not yet very stringent) tests I&#39;ve run, the code in the question works as is.  Similarly with the comparisons."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479926804, "post_id": 40770935, "comment_id": 68768000, "body": "@JonathanLeffler: are you sure ? With the original loops elements will be swapped when j &lt; k and when j &gt; k, so the final ordering should still be somewhat random. It may just be that you got lucky with whatever input data you used ?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479926973, "post_id": 40770935, "comment_id": 68768092, "body": "Well, I&#39;ve run it on arrays of size 3, 5, 9, with 5 random permutations of the array of size 5 and 9 random permutations of the array of size 9 and the data was sorted each time.  The code keeps on comparing already sorted data, but that&#39;s not a problem except for performance."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479927186, "post_id": 40770935, "comment_id": 68768221, "body": "That&#39;s very odd. Do you see what I mean about testing and swapping when j &lt; k and j &gt; k ? Surely half of those swaps should be incorrect ?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479927665, "post_id": 40770935, "comment_id": 68768462, "body": "I&#39;ve not (yet) instrumented at the &#39;per swap&#39; level \u2014 it wouldn&#39;t be hard to do that, though I&#39;d want to upgrade the array print code to take a &#39;tag&#39; string to identify when it is called, and I&#39;d ensure that tag identified what swap occurred.  I make zero claims that the sort is efficient \u2014 it isn&#39;t.  Empirically though, it seems to end up working.  I&#39;d be curious to see your counter-demo."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479928366, "post_id": 40770935, "comment_id": 68768797, "body": "Yes, there is unnecessary swapping going on, but the net result is still correctly sorted. Here&#39;s one shorter trace (using <code>SWP</code> instead of <code>Swap</code> gave nicely aligned output on my screen \u2014 not so much in a comment): <code>Seed: 753593906</code> \u2014 <code>Before 5:  6 0 5 2 1</code> \u2014 <code>SWP(0,0):  6 0 5 2 1</code> \u2014 <code>SWP(0,1):  0 6 5 2 1</code> \u2014 <code>SWP(1,0):  6 0 5 2 1</code> \u2014 <code>SWP(1,1):  6 0 5 2 1</code> \u2014 <code>SWP(2,1):  6 5 0 2 1</code> \u2014 <code>SWP(2,2):  6 5 0 2 1</code> \u2014 <code>SWP(3,2):  6 5 2 0 1</code> \u2014 <code>SWP(3,3):  6 5 2 0 1</code> \u2014 <code>SWP(4,3):  6 5 2 1 0</code> \u2014 <code>SWP(4,4):  6 5 2 1 0</code> \u2014 <code>After  5:  6 5 2 1 0</code>. Yes, the sort is sub-optimal. It does work, though."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479930162, "post_id": 40770935, "comment_id": 68769652, "body": "@JonathanLeffler: wow, that&#39;s really interesting - I think this would make a great teaching example, i.e. how you can implement an algorithm incorrectly, test it and it appears to work, and yet underneath it&#39;s not correct (or is at least inefficient). I&#39;ll have a play and see if I can find any edge cases where it fails. I&#39;d also like to understand why it actually appears to work too, as it seems like it really shouldn&#39;t, at least from a cursory analysis."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479975690, "post_id": 40770935, "comment_id": 68785421, "body": "@JonathanLeffler: I&#39;ve spent some time testing various edge cases now, and I have yet to find anything which causes the original code to fail. Note however that it does produce results in descending order, for some reason, whereas the fixed code produces output in ascending order. I still don&#39;t fully understand why it works, but it makes for an interesting novelty."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1479975524, "last_edit_date": 1495535418, "creation_date": 1479922576, "answer_id": 40770935, "question_id": 40770881, "link": "https://stackoverflow.com/questions/40770881/cs50-pset3-sort-function/40770935#40770935", "title": "cs50 pset3 sort function", "body": "<p>You are close, but your loops are not quite right - change:</p>\n\n<pre><code>for (int k = 0; k &lt; n; k++)\n{\n    for (int j = 0; j &lt; n; j++)\n    {\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>for (int k = 0; k &lt; n - 1; k++)\n{\n    for (int j = k + 1; j &lt; n; j++)\n    {\n</code></pre>\n\n<p>To understand why you need to make this change, consider that the inner loop (<code>j</code>) need only compare elements <em>above</em> index <code>k</code> with the current element at index <code>k</code>. So the outer loop (<code>k</code>) needs to iterate from <code>0</code> to <code>n - 2</code> (one less than the last element), and for each outer loop iteration the inner loop needs to iterate from <code>k + 1</code> (first element above <code>k</code>) to <code>n - 1</code> (the last element).</p>\n\n<blockquote>\n  <p><strong>NOTE</strong>: by pure chance it seems that the original code <em>does</em> appear to work correctly, even though it appears at first glance that it shouldn't. I have tested it with various edge cases and even though it performs many redundant swaps, the final result always seems to be sorted (suprisingly though the output is in <em>descending order</em> whereas the fixed code generates results in <em>ascending</em> order, as expected). Credit to <a href=\"https://stackoverflow.com/users/15168/jonathan-leffler\">Jonathan Leffler</a> for spotting this - see his <a href=\"https://stackoverflow.com/a/40772238/253056\">answer and demo program</a>.</p>\n</blockquote>\n\n<hr>\n\n<p>One other minor point -- this test:</p>\n\n<pre><code>        if (values[k] &gt;= values[j])\n</code></pre>\n\n<p>should really just be:</p>\n\n<pre><code>        if (values[k] &gt; values[j])\n</code></pre>\n\n<p>It's not incorrect as it stands (the code will still work), but there is no point in swapping elements that are equal, so it's somewhat inefficient as written.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1479927410, "last_edit_date": 1495542400, "creation_date": 1479927410, "answer_id": 40772238, "question_id": 40770881, "link": "https://stackoverflow.com/questions/40770881/cs50-pset3-sort-function/40772238#40772238", "title": "cs50 pset3 sort function", "body": "<p>I took your code and converted into a complete program.  It's larger than an MCVE because it has support code for shuffling arrays, and for printing results, as well as a <code>main()</code> that exercises these, of course.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic int rand_int(int n)\n{\n    int limit = RAND_MAX - RAND_MAX % n;\n    int rnd;\n\n    while ((rnd = rand()) &gt;= limit)\n        ;\n    return rnd % n;\n}\n\nstatic void shuffle(int *array, int n)\n{\n    for (int i = n - 1; i &gt; 0; i--)\n    {\n        int j = rand_int(i + 1);\n        int tmp = array[j];\n        array[j] = array[i];\n        array[i] = tmp;\n    }\n}\n\nstatic void print_array(int n, int a[n])\n{\n    for (int i = 0; i &lt; n; i++)\n        printf(\" %d\", a[i]);\n    putchar('\\n');\n}\n\nstatic void sort(int values[], int n)\n{\n    for (int k = 0; k &lt; n; k++)\n    {\n        for (int j = 0; j &lt; n; j++)\n        {\n            if (values[k] &gt;= values[j])\n            {\n                 int temp = values[k];\n                 values[k] = values[j];\n                 values[j] = temp;\n            }\n        }\n    }\n}\n\nint main(int argc, char **argv)\n{\n    if (argc &gt; 1)\n    {\n        long l = strtol(argv[1], 0, 0);\n        unsigned u = (unsigned)l;\n        printf(\"Seed: %u\\n\", u);\n        srand(u);\n    }\n\n    int data3[3] = { 3, 1, 2 };\n    print_array(3, data3);\n    sort(data3, 3);\n    print_array(3, data3);\n\n    int data5[5] = { 0, 2, 6, 1, 5, };\n    for (int i = 0; i &lt; 5; i++)\n    {\n        shuffle(data5, 5);\n        print_array(5, data5);\n        sort(data5, 5);\n        print_array(5, data5);\n    }\n\n    int data9[] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n    for (int i = 0; i &lt; 9; i++)\n    {\n        shuffle(data9, 9);\n        print_array(9, data9);\n        sort(data9, 9);\n        print_array(9, data9);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The shuffle code implements a <a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow noreferrer\">Fisher-Yates shuffle</a>, and is \nbased on code from an <a href=\"https://stackoverflow.com/a/3348142\">answer</a> by <a href=\"https://stackoverflow.com/users/225757/roland-illig\">Roland Illig</a>.  If invoked without a seed argument, it generates the same output each time.</p>\n\n<p>Code compiled and tested on macOS Sierra 10.12.1 with GCC 6.2.0.</p>\n\n<p>An example output:</p>\n\n<pre><code>Seed: 123456789\n 3 1 2\n 3 2 1\n 6 0 1 5 2\n 6 5 2 1 0\n 0 6 1 2 5\n 6 5 2 1 0\n 0 1 2 6 5\n 6 5 2 1 0\n 5 0 6 1 2\n 6 5 2 1 0\n 1 6 5 2 0\n 6 5 2 1 0\n 0 4 8 3 7 5 1 6 2\n 8 7 6 5 4 3 2 1 0\n 7 4 0 5 6 8 3 2 1\n 8 7 6 5 4 3 2 1 0\n 1 2 7 5 0 8 3 6 4\n 8 7 6 5 4 3 2 1 0\n 3 8 7 5 2 1 0 6 4\n 8 7 6 5 4 3 2 1 0\n 1 4 2 6 3 0 7 5 8\n 8 7 6 5 4 3 2 1 0\n 2 3 7 4 8 0 5 6 1\n 8 7 6 5 4 3 2 1 0\n 3 4 5 8 6 2 0 7 1\n 8 7 6 5 4 3 2 1 0\n 3 6 7 4 8 2 5 1 0\n 8 7 6 5 4 3 2 1 0\n 0 8 7 3 4 6 5 1 2\n 8 7 6 5 4 3 2 1 0\n</code></pre>\n\n<p>This shows the data being sorted in descending order every time, despite different randomized inputs.</p>\n"}], "owner": {"reputation": 15, "user_id": 7201423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c3b8049d11a4084f6051a45419a5d1?s=128&d=identicon&r=PG&f=1", "display_name": "aksnys", "link": "https://stackoverflow.com/users/7201423/aksnys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1103, "favorite_count": 1, "closed_date": 1479957580, "accepted_answer_id": 40770935, "answer_count": 2, "score": -1, "last_activity_date": 1479975524, "creation_date": 1479922368, "last_edit_date": 1479922879, "question_id": 40770881, "link": "https://stackoverflow.com/questions/40770881/cs50-pset3-sort-function", "closed_reason": "Not suitable for this site", "title": "cs50 pset3 sort function", "body": "<p>I am having trouble with implementing the sort function on pset3.  I have used the GDB and found that my sort function does not sort anything.  I am not sure if there is a syntax issue, or if the logic is a bit screwed up.</p>\n\n<pre><code>void sort(int values[], int n)\n{\n    for (int k = 0; k &lt; n; k++)\n    {\n        for (int j = 0; j &lt; n; j++)\n        {\n            if (values[k] &gt;= values[j])\n            {\n                 int temp = values[k];\n                 values[k] = values[j];\n                 values[j] = temp;\n            }\n        }\n    }\n} \n</code></pre>\n"}, {"tags": ["c", "windows", "go"], "answers": [{"tags": [], "owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "is_accepted": false, "score": 1, "last_activity_date": 1479927819, "last_edit_date": 1479927819, "creation_date": 1479927128, "answer_id": 40772167, "question_id": 40770786, "link": "https://stackoverflow.com/questions/40770786/go-vgo-robotgo-library-build-error/40772167#40772167", "title": "&quot;go-vgo/robotgo&quot; library build error", "body": "<p>Apparently it's an error in the library.</p>\n\n<p>From <a href=\"https://github.com/go-vgo/robotgo/blob/master/mouse/mouse_c.h#L116\" rel=\"nofollow noreferrer\">https://github.com/go-vgo/robotgo/blob/master/mouse/mouse_c.h#L116</a></p>\n\n<pre><code>...\nINPUT mouseInput;\nmouseInput.type = INPUT_MOUSE;\nmouseInput.mi.dx = point.x;\n...\n</code></pre>\n\n<p>The errors <code>unknown type name 'INPUT'</code>, <code>'INPUT_MOUSE' undeclared</code>, <code>error: request for member 'mi'</code>, suggest that those types aren't known in that file.</p>\n\n<p>From <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646270(v=vs.85).aspx\" rel=\"nofollow noreferrer\">docs</a>, these types are defined in <code>windows.h</code>, which that file doesn't include.</p>\n\n<p>Maybe open an issue and wait for an answer from the devs.</p>\n"}], "owner": {"reputation": 103, "user_id": 2210247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1b34d4d3e1650a0e6a4a5a9cad9727?s=128&d=identicon&r=PG", "display_name": "Mehedee Hassan", "link": "https://stackoverflow.com/users/2210247/mehedee-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484922891, "creation_date": 1479921999, "last_edit_date": 1479927139, "question_id": 40770786, "link": "https://stackoverflow.com/questions/40770786/go-vgo-robotgo-library-build-error", "title": "&quot;go-vgo/robotgo&quot; library build error", "body": "<p>I was trying to build \"<a href=\"https://github.com/go-vgo/robotgo\" rel=\"nofollow noreferrer\">go-vgo/robotgo</a>\" library .</p>\n\n<p>I have followed each step like downloading \"mingw\"(32bit) and adding \"zlib,pnglib\" from \n<a href=\"https://github.com/go-vgo/Mingw32\" rel=\"nofollow noreferrer\">zlib&amp;libpng Windows32 GCC's Course</a> as stated.\nbut when i try to get it from cmd using this command,</p>\n\n<p><code>go get github.com/go-vgo/robotgo</code> </p>\n\n<p>it shows a enormous list of error.</p>\n\n<p>Can anyone help me please.\nI am using windows 10 (64 bit) and go 1.7.3 (x86).</p>\n\n<p>Errors copied from the cmd is given below, </p>\n\n<pre><code>&gt; G:\\ProgramFiles\\Go32&gt;go get github.com/go-vgo/robotgo \\#\n&gt; github.com/go-vgo/robotgo In file included from\n&gt; ./mouse/goMouse.h:12:0,\n&gt;                  from src\\github.com\\go-vgo\\robotgo\\robotgo.go:24: ./mouse/mouse_c.h: In function 'moveMouse': ./mouse/mouse_c.h:116:2:\n&gt; error: unknown type name 'INPUT' ./mouse/mouse_c.h:117:12: error:\n&gt; request for member 'type' in something not a structure or union\n&gt; ./mouse/mouse_c.h:117:20: error: 'INPUT_MOUSE' undeclared (first use\n&gt; in this function) ./mouse/mouse_c.h:117:20: note: each undeclared\n&gt; identifier is reported only once for each function it appears in\n&gt; ./mouse/mouse_c.h:118:12: error: request for member 'mi' in something\n&gt; not a structure or union ./mouse/mouse_c.h:119:12: error: request for\n&gt; member 'mi' in something not a structure or union\n&gt; ./mouse/mouse_c.h:120:12: error: request for member 'mi' in something\n&gt; not a structure or union ./mouse/mouse_c.h:121:12: error: request for\n&gt; member 'mi' in something not a structure or union\n&gt; ./mouse/mouse_c.h:122:12: error: request for member 'mi' in something\n&gt; not a structure or union ./mouse/mouse_c.h:123:12: error: request for\n&gt; member 'mi' in something not a structure or union ./mouse/mouse_c.h:\n&gt; In function 'scrollMouse': ./mouse/mouse_c.h:249:3: error: unknown\n&gt; type name 'INPUT' ./mouse/mouse_c.h:293:19: error: request for member\n&gt; 'type' in something not a structure or union ./mouse/mouse_c.h:293:27:\n&gt; error: 'INPUT_MOUSE' undeclared (first use in this function)\n&gt; ./mouse/mouse_c.h:294:19: error: request for member 'mi' in something\n&gt; not a structure or union ./mouse/mouse_c.h:295:19: error: request for\n&gt; member 'mi' in something not a structure or union\n&gt; ./mouse/mouse_c.h:296:19: error: request for member 'mi' in something\n&gt; not a structure or union ./mouse/mouse_c.h:297:19: error: request for\n&gt; member 'mi' in something not a structure or union\n&gt; ./mouse/mouse_c.h:298:19: error: request for member 'mi' in something\n&gt; not a structure or union ./mouse/mouse_c.h:299:19: error: request for\n&gt; member 'mi' in something not a structure or union In file included\n&gt; from ./key/keypress.h:6:0,\n&gt;                  from ./key/keypress_c.h:1,\n&gt;                  from ./key/goKey.h:14,\n&gt;                  from src\\github.com\\go-vgo\\robotgo\\robotgo.go:25: ./key/keycode.h: At top level: ./key/keycode.h:249:24: error:\n&gt; 'VK_VOLUME_MUTE' undeclared here (not in a function)\n&gt; ./key/keycode.h:250:24: error: 'VK_VOLUME_DOWN' undeclared here (not\n&gt; in a function) ./key/keycode.h:251:22: error: 'VK_VOLUME_UP'\n&gt; undeclared here (not in a function) ./key/keycode.h:252:17: error:\n&gt; 'VK_MEDIA_PLAY_PAUSE' undeclared here (not in a function)\n&gt; ./key/keycode.h:253:17: error: 'VK_MEDIA_STOP' undeclared here (not in\n&gt; a function) ./key/keycode.h:255:17: error: 'VK_MEDIA_PREV_TRACK'\n&gt; undeclared here (not in a function) ./key/keycode.h:256:17: error:\n&gt; 'VK_MEDIA_NEXT_TRACK' undeclared here (not in a function) In file\n&gt; included from ./key/goKey.h:14:0,\n&gt;                  from src\\github.com\\go-vgo\\robotgo\\robotgo.go:25: ./key/keypress_c.h: In function 'win32KeyEvent':\n&gt; ./key/keypress_c.h:57:39: error: 'MAPVK_VK_TO_VSC' undeclared (first\n&gt; use in this function) ./key/keypress_c.h:86:8: error:\n&gt; 'VK_BROWSER_BACK' undeclared (first use in this function)\n&gt; ./key/keypress_c.h:87:8: error: 'VK_BROWSER_FORWARD' undeclared (first\n&gt; use in this function) ./key/keypress_c.h:88:8: error:\n&gt; 'VK_BROWSER_REFRESH' undeclared (first use in this function)\n&gt; ./key/keypress_c.h:89:8: error: 'VK_BROWSER_STOP' undeclared (first\n&gt; use in this function) ./key/keypress_c.h:90:8: error:\n&gt; 'VK_BROWSER_SEARCH' undeclared (first use in this function)\n&gt; ./key/keypress_c.h:91:8: error: 'VK_BROWSER_FAVORITES' undeclared\n&gt; (first use in this function) ./key/keypress_c.h:92:8: error:\n&gt; 'VK_BROWSER_HOME' undeclared (first use in this function)\n&gt; ./key/keypress_c.h:93:8: error: 'VK_LAUNCH_MAIL' undeclared (first use\n&gt; in this function) In file included from ./event/goEvent.h:29:0,\n&gt;                  from src\\github.com\\go-vgo\\robotgo\\robotgo.go:27: ./event/hook/windows/input_c.h: At top level:\n&gt; ./event/hook/windows/input_c.h:31:27: error: 'VK_OEM_MINUS' undeclared\n&gt; here (not in a function) ./event/hook/windows/input_c.h:32:27: error:\n&gt; 'VK_OEM_PLUS' undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:70:24: error: 'VK_OEM_COMMA' undeclared\n&gt; here (not in a function) ./event/hook/windows/input_c.h:71:24: error:\n&gt; 'VK_OEM_PERIOD' undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:183:28: error: 'VK_LAUNCH_APP2'\n&gt; undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:200:30: error: 'VK_BROWSER_HOME'\n&gt; undeclared here (not in a function) In file included from\n&gt; ./event/goEvent.h:29:0,\n&gt;                  from src\\github.com\\go-vgo\\robotgo\\robotgo.go:27: ./event/hook/windows/input_c.h:251:32: error: 'VK_BROWSER_SEARCH'\n&gt; undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:252:30: error: 'VK_BROWSER_FAVORITES'\n&gt; undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:253:30: error: 'VK_BROWSER_REFRESH'\n&gt; undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:254:30: error: 'VK_BROWSER_STOP'\n&gt; undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:255:30: error: 'VK_BROWSER_FORWARD'\n&gt; undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:256:30: error: 'VK_BROWSER_BACK'\n&gt; undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:258:30: error: 'VK_LAUNCH_APP1'\n&gt; undeclared here (not in a function)\n&gt; ./event/hook/windows/input_c.h:259:30: error: 'VK_LAUNCH_MEDIA_SELECT'\n&gt; undeclared here (not in a function) In file included from\n&gt; ./event/goEvent.h:30:0,\n&gt;                  from src\\github.com\\go-vgo\\robotgo\\robotgo.go:27: ./event/hook/windows/hook_c.h: In function 'initialize_modifiers':\n&gt; ./event/hook/windows/hook_c.h:90:18: error: 'VK_XBUTTON1' undeclared\n&gt; (first use in this function) ./event/hook/windows/hook_c.h:91:18:\n&gt; error: 'VK_XBUTTON2' undeclared (first use in this function)\n&gt; ./event/hook/windows/hook_c.h: In function 'mouse_hook_event_proc':\n&gt; ./event/hook/windows/hook_c.h:509:8: error: 'WM_XBUTTONDOWN'\n&gt; undeclared (first use in this function)\n&gt; ./event/hook/windows/hook_c.h:510:8: error: 'WM_NCXBUTTONDOWN'\n&gt; undeclared (first use in this function)\n&gt; ./event/hook/windows/hook_c.h:511:37: error: 'XBUTTON1' undeclared\n&gt; (first use in this function) ./event/hook/windows/hook_c.h:515:42:\n&gt; error: 'XBUTTON2' undeclared (first use in this function)\n&gt; ./event/hook/windows/hook_c.h:551:8: error: 'WM_XBUTTONUP' undeclared\n&gt; (first use in this function) ./event/hook/windows/hook_c.h:552:8:\n&gt; error: 'WM_NCXBUTTONUP' undeclared (first use in this function) In\n&gt; file included from ./event/goEvent.h:30:0,\n&gt;                  from src\\github.com\\go-vgo\\robotgo\\robotgo.go:27: ./event/hook/windows/hook_c.h: In function 'win_hook_event_proc':\n&gt; ./event/hook/windows/hook_c.h:616:8: error: 'EVENT_OBJECT_NAMECHANGE'\n&gt; undeclared (first use in this function) ./event/hook/windows/hook_c.h:\n&gt; In function 'hook_run': ./event/hook/windows/hook_c.h:684:4: error:\n&gt; 'EVENT_OBJECT_NAMECHANGE' undeclared (first use in this function)\n&gt; ./event/hook/windows/hook_c.h:688:4: error: 'WINEVENT_OUTOFCONTEXT'\n&gt; undeclared (first use in this function)\n&gt; ./event/hook/windows/hook_c.h:688:28: error: 'WINEVENT_SKIPOWNPROCESS'\n&gt; undeclared (first use in this function)\n&gt; ./event/hook/windows/hook_c.h:688:26: error: invalid operands to\n&gt; binary | (have 'const uint16_t (*)[2]' and 'const uint16_t (*)[2]') In\n&gt; file included from ./event/goEvent.h:31:0,\n&gt;                  from src\\github.com\\go-vgo\\robotgo\\robotgo.go:27: ./event/hook/windows/event_c.h: In function 'hook_post_event':\n&gt; ./event/hook/windows/event_c.h:57:2: error: unknown type name 'INPUT'\n&gt; ./event/hook/windows/event_c.h:57:32: error: 'INPUT' undeclared (first\n&gt; use in this function) ./event/hook/windows/event_c.h:57:39: error:\n&gt; invalid operands to binary * (have 'const uint16_t (*)[2]' and 'int')\n&gt; ./event/hook/windows/event_c.h:63:24: error: request for member 'type'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:63:32: error: 'INPUT_KEYBOARD'\n&gt; undeclared (first use in this function)\n&gt; ./event/hook/windows/event_c.h:64:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:64:27: error: request for member 'wVk'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:65:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:65:27: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:66:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:66:27: error: request for member 'time'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:73:22: error: request for member 'type'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:73:30: error: 'INPUT_MOUSE' undeclared\n&gt; (first use in this function) ./event/hook/windows/event_c.h:74:22:\n&gt; error: request for member 'mi' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:74:25: error: request for member 'dx'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:75:22: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:75:25: error: request for member 'dy'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:76:22: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:76:25: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:77:22: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:77:25: error: request for member 'time'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:80:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:80:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:84:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:84:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:88:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:88:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:92:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:92:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:92:39: error: 'XBUTTON1' undeclared\n&gt; (first use in this function) ./event/hook/windows/event_c.h:93:23:\n&gt; error: request for member 'mi' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:93:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:93:40: error: 'MOUSEEVENTF_XDOWN'\n&gt; undeclared (first use in this function)\n&gt; ./event/hook/windows/event_c.h:97:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:97:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:97:39: error: 'XBUTTON2' undeclared\n&gt; (first use in this function) ./event/hook/windows/event_c.h:98:23:\n&gt; error: request for member 'mi' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:98:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:107:23: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:107:26: error: request for member 'wVk'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:108:27: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:108:30: error: request for member 'wVk'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:109:24: error: request for member\n&gt; 'type' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:110:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:110:27: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:111:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:111:27: error: request for member\n&gt; 'wScan' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:112:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:112:27: error: request for member\n&gt; 'time' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:123:23: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:123:26: error: request for member 'wVk'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:124:27: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:124:30: error: request for member 'wVk'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:125:24: error: request for member\n&gt; 'type' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:126:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:126:27: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:127:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:127:27: error: request for member 'wVk'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:128:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:128:27: error: request for member\n&gt; 'wScan' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:129:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:129:27: error: request for member\n&gt; 'time' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:141:23: error: request for member\n&gt; 'type' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:142:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:142:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:146:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:146:28: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:150:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:150:28: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:154:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:154:28: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:158:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:158:28: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:162:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:162:28: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:168:26: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:168:29: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:172:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:172:26: error: request for member 'dx'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:173:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:173:26: error: request for member 'dy'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:175:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:175:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:176:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:176:26: error: request for member\n&gt; 'time' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:182:23: error: request for member\n&gt; 'type' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:183:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:183:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:183:37: error: 'MOUSEEVENTF_XUP'\n&gt; undeclared (first use in this function)\n&gt; ./event/hook/windows/event_c.h:187:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:187:28: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:191:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:191:28: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:195:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:195:28: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:199:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:199:28: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:203:25: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:203:28: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:209:26: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:209:29: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:213:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:213:26: error: request for member 'dx'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:214:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:214:26: error: request for member 'dy'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:216:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:216:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:217:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:217:26: error: request for member\n&gt; 'time' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:223:23: error: request for member\n&gt; 'type' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:224:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:224:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:227:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:227:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:229:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:229:26: error: request for member 'dx'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:230:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:230:26: error: request for member 'dy'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:232:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:232:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:233:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:233:26: error: request for member\n&gt; 'time' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:242:23: error: request for member\n&gt; 'type' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:243:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:243:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:245:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:245:26: error: request for member 'dx'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:246:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:246:26: error: request for member 'dy'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:248:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:248:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:249:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:249:26: error: request for member\n&gt; 'time' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:274:24: error: request for member\n&gt; 'type' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:275:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:275:27: error: request for member 'wVk'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:276:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:276:27: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:277:24: error: request for member 'ki'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:277:27: error: request for member\n&gt; 'time' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:284:22: error: request for member\n&gt; 'type' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:285:22: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:285:25: error: request for member 'dx'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:286:22: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:286:25: error: request for member 'dy'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:287:22: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:287:25: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:288:22: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:288:25: error: request for member\n&gt; 'time' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:294:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:294:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:298:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:298:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:302:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:302:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:306:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:306:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:307:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:307:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:311:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:311:26: error: request for member\n&gt; 'mouseData' in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:312:23: error: request for member 'mi'\n&gt; in something not a structure or union\n&gt; ./event/hook/windows/event_c.h:312:26: error: request for member\n&gt; 'dwFlags' in something not a structure or union\n&gt; \n&gt; G:\\ProgramFiles\\Go32&gt;go get github.com/go-vgo/robotgo\n</code></pre>\n"}, {"tags": ["c", "large-files", "fseek"], "comments": [{"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 1, "creation_date": 1479922022, "post_id": 40770673, "comment_id": 68765314, "body": "<code>fseeko</code> is in Posix,  not standard C"}, {"owner": {"reputation": 611, "user_id": 1956727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4995da9fb92c65fbdd49362aee35a8b8?s=128&d=identicon&r=PG", "display_name": "NickStoughton", "link": "https://stackoverflow.com/users/1956727/nickstoughton"}, "edited": false, "score": 1, "creation_date": 1479922218, "post_id": 40770673, "comment_id": 68765418, "body": "Assuming that <code>MemoryAllocator.h</code> defines mem_alloc(x) as malloc(x), and FSEEK as fseeko, then this program compiles fine on a POSIX platform. However, if you are trying to build on Windows, it will not work."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479922639, "post_id": 40770673, "comment_id": 68765662, "body": "What exactly is the compiler command line you are using?  Have you set <code>_XOPEN_SOURCE</code> or <code>_POSIX_C_SOURCE</code> to an appropriate value before including any headers?"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1479924683, "post_id": 40770673, "comment_id": 68766883, "body": "<code>__USE_LARGEFILE64</code>, <code>_LARGEFILE_SOURCE</code>, and <code>_LARGEFILE64_SOURCE</code> are all incorrect. Read the documentation rather than cargo-culting random stuff. <code>-D_FILE_OFFSET_BITS=64</code> is what you&#39;re looking for, but it&#39;s independent of the reason why <code>fseeko</code> is not visible."}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 4, "last_activity_date": 1479924885, "creation_date": 1479924885, "answer_id": 40771576, "question_id": 40770673, "link": "https://stackoverflow.com/questions/40770673/implicit-declaration-of-function-fseeko/40771576#40771576", "title": "Implicit declaration of function fseeko", "body": "<p>If you're using one of the <code>-std</code> options like <code>-std=c99</code> or <code>-std=c11</code>, these request a fully conforming standard C environment where POSIX interfaces are not exposed by default (exposing them would be non-conforming because they're in the namespace reserved for the application). You need to define <code>_POSIX_C_SOURCE</code> or <code>_XOPEN_SOURCE</code> to an appropriate value to get them. <code>-D_POSIX_C_SOURCE=200808L</code> on the command line, or</p>\n\n<pre><code>#define _POSIX_C_SOURCE 200808L\n</code></pre>\n\n<p>in your source file before including any headers, would be the way to do this.</p>\n\n<p>Also, while this is not your immediate problem, note that <code>__USE_LARGEFILE64</code>, <code>_LARGEFILE_SOURCE</code>, and <code>_LARGEFILE64_SOURCE</code> are all incorrect. The only thing you need to do to get 64-bit <code>off_t</code> is <code>-D_FILE_OFFSET_BITS=64</code> on the command line or <code>#define _FILE_OFFSET_BITS 64</code> in your source file before including any headers.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4424299"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1257, "favorite_count": 0, "accepted_answer_id": 40771576, "answer_count": 1, "score": 2, "last_activity_date": 1479924885, "creation_date": 1479921652, "last_edit_date": 1479922604, "question_id": 40770673, "link": "https://stackoverflow.com/questions/40770673/implicit-declaration-of-function-fseeko", "title": "Implicit declaration of function fseeko", "body": "<p>I'm trying to use the <code>fseeko</code> function in combination with the GCC-compiler in order to work with files that are larger than 4GiB in C. Now, everything works and I am able to work with files of over 4GiB, but GCC keeps complaining that the <code>fseeko</code> function is implicitly declared. This is a minimal working example of the the source code that generates this message:</p>\n\n<pre><code>#define __USE_LARGEFILE64\n#define _LARGEFILE_SOURCE\n#define _LARGEFILE64_SOURCE\n\n#include \"MemoryAllocator.h\"\n\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/stat.h&gt;\n\ntypedef struct BlockReader {\n    char* fileName;\n    // Total filesize of the file with name fileName in bytes.\n    unsigned long long fileSize;\n    // Size of one block in bytes.\n    unsigned int blockSize;\n    // Defines which block was last read.\n    unsigned int block;\n    // Defines the total amount of blocks\n    unsigned int blocks;\n} BlockReader;\n\nunsigned char* blockreader_read_raw_block(BlockReader* reader, long startPos, unsigned int length, size_t* readLength) {\n    FILE* file = fopen(reader-&gt;fileName, \"rb\");\n\n    unsigned char* buffer = (unsigned char*) mem_alloc(sizeof(unsigned char) * (length + 1));\n\n    FSEEK(file, startPos, 0);\n    fclose(file);\n\n    // Terminate buffer\n    buffer[length] = '\\0';\n    return buffer;\n}\n</code></pre>\n\n<p>I cannot find anywhere what header I have to include to fix this warning. The exact warning that GCC gives is this:</p>\n\n<pre><code>src/BlockReader.c: In function \u2018blockreader_read_block\u2019:\nsrc/BlockReader.c:80:2: warning: implicit declaration of function \u2018fseeko\u2019 [-Wimplicit-function-declaration]\n  FSEEK(file, reader-&gt;blockSize * reader-&gt;block, 0);\n</code></pre>\n"}, {"tags": ["python", "c", "contiki"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7210316, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/b35615c2ea55f0c0e02323c4ec755c7b?s=128&d=identicon&r=PG", "display_name": "O.A.", "link": "https://stackoverflow.com/users/7210316/o-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1480086565, "creation_date": 1480086565, "answer_id": 40807895, "question_id": 40770631, "link": "https://stackoverflow.com/questions/40770631/antelope-contiki-os/40807895#40807895", "title": "Antelope contiki-OS", "body": "<p>Contiki contains an Antelope example that automatically inserts a user-specified number of tuples into a database. See the file examples/antelope/netdb/netdb-server.c in the Contiki source code.</p>\n\n<p>Notice also that there are several typos in the commands and queries listed in your question, which may cause of some the problems.</p>\n"}], "owner": {"reputation": 746, "user_id": 4172765, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/10b586f5dd0d04b071bac89fa5a777b1?s=128&d=identicon&r=PG&f=1", "display_name": "nistelrooy41001662", "link": "https://stackoverflow.com/users/4172765/nistelrooy41001662"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1480086565, "creation_date": 1479921539, "last_edit_date": 1479924209, "question_id": 40770631, "link": "https://stackoverflow.com/questions/40770631/antelope-contiki-os", "title": "Antelope contiki-OS", "body": "<p>I just started studying Contiki-OS. \nAnd I am interested in Contiki - Antelope.\nI try to the AQL (Antelope Query Language) to create relation, attribute and insert tuples in  serial Cooja simulation. Like this:</p>\n\n<pre><code>create relation simple;\ncreate attribute id domain int in sample;\ncreate attribute temp domain int in sample;\ninsert (1,1) into sample;\ninsert (2.2) into sample;\n....\n</code></pre>\n\n<p>But, I don't know how to insert auto about 1000 tuples?\nI can't do this manual like:</p>\n\n<pre><code>insert (1,1) into sample;\ninsert (2.2) into sample;\n.....\ninser (1000,1000) into sample;\n</code></pre>\n\n<p>How to add 1000 tuples automatically?</p>\n"}, {"tags": ["c", "macos", "avr", "avr-gcc", "avrdude"], "comments": [{"owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1479923835, "post_id": 40770283, "comment_id": 68766392, "body": "You have linker error. Add the your make file and the header files in which <code>lcd_putc</code> and <code>lcd_init</code> are declared and the .c files as well."}, {"owner": {"reputation": 1, "user_id": 7201277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2a84516c2ab81b7686a05e465973c3?s=128&d=identicon&r=PG&f=1", "display_name": "P. Blang", "link": "https://stackoverflow.com/users/7201277/p-blang"}, "reply_to_user": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1479923929, "post_id": 40770283, "comment_id": 68766445, "body": "How do I go about doing this?"}, {"owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1479924209, "post_id": 40770283, "comment_id": 68766606, "body": "In the directory where you run avr-gcc, should be a file named Makefile. You can edit the question and add it. Also the linker does not find the <code>lcd_putc</code> and <code>lcd_init</code> (functions?) so add your source codes/files where you call, declare and implement these."}, {"owner": {"reputation": 1, "user_id": 7201277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2a84516c2ab81b7686a05e465973c3?s=128&d=identicon&r=PG&f=1", "display_name": "P. Blang", "link": "https://stackoverflow.com/users/7201277/p-blang"}, "reply_to_user": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1479924528, "post_id": 40770283, "comment_id": 68766791, "body": "I&#39;m pretty new to all of this, is there any way you can give a step by step?"}, {"owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1479924743, "post_id": 40770283, "comment_id": 68766923, "body": "Add the content of lab7.c into your question first, and lab7.h as well."}, {"owner": {"reputation": 1, "user_id": 7201277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2a84516c2ab81b7686a05e465973c3?s=128&d=identicon&r=PG&f=1", "display_name": "P. Blang", "link": "https://stackoverflow.com/users/7201277/p-blang"}, "edited": false, "score": 0, "creation_date": 1479926280, "post_id": 40770283, "comment_id": 68767761, "body": "lab7.c I have but not lab7.h"}, {"owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1479927082, "post_id": 40770283, "comment_id": 68768166, "body": "<code>#include &quot;lcd.h&quot;</code> find lcd.h and lcd.c and add them as well please."}, {"owner": {"reputation": 1, "user_id": 7201277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2a84516c2ab81b7686a05e465973c3?s=128&d=identicon&r=PG&f=1", "display_name": "P. Blang", "link": "https://stackoverflow.com/users/7201277/p-blang"}, "reply_to_user": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1480356361, "post_id": 40770283, "comment_id": 68918008, "body": "I don&#39;t have a file named lcd.c"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7201277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2a84516c2ab81b7686a05e465973c3?s=128&d=identicon&r=PG&f=1", "display_name": "P. Blang", "link": "https://stackoverflow.com/users/7201277/p-blang"}, "edited": false, "score": 0, "creation_date": 1480356323, "post_id": 40773253, "comment_id": 68917990, "body": "I don&#39;t have a file named lcd.o, I only have a file named lcd.h"}], "tags": [], "owner": {"reputation": 7997, "user_id": 66363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd2a69d2d8c93796e3f4a55d70db00d?s=128&d=identicon&r=PG", "display_name": "uncleO", "link": "https://stackoverflow.com/users/66363/uncleo"}, "is_accepted": false, "score": 1, "last_activity_date": 1479932192, "last_edit_date": 1479932192, "creation_date": 1479931477, "answer_id": 40773253, "question_id": 40770283, "link": "https://stackoverflow.com/questions/40770283/how-can-i-make-a-o-file-to-elf-file/40773253#40773253", "title": "How can I make a .o file to .elf file?", "body": "<p>The object file lab7.o only has the code from one of the c files. It is only part of the whole executable.</p>\n\n<p>To create the executable, you need to link together all the parts. From the code you show, it looks like you are missing the parts with the LCD functions. Do you have a file called lcd.o? Try</p>\n\n<pre><code>avr-gcc -mmcu=atmega324a -o lab7.elf lab7.o lcd.o\n</code></pre>\n\n<p>It may also be that the LCD functions are in a library or archive file. In that case, you will need to link it in some other way, but it still needs to be part of the gcc command.</p>\n\n<p>If you have all the source files (.c and .h), you could compile from source all the way to .elf with one gcc command.</p>\n\n<pre><code>avr-gcc -mmcu=atmega324a -o lab7.elf lab7.c lcd.c lcd.h\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7201277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2a84516c2ab81b7686a05e465973c3?s=128&d=identicon&r=PG&f=1", "display_name": "P. Blang", "link": "https://stackoverflow.com/users/7201277/p-blang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "closed_date": 1479979114, "answer_count": 1, "score": -2, "last_activity_date": 1480358328, "creation_date": 1479920409, "last_edit_date": 1480358328, "question_id": 40770283, "link": "https://stackoverflow.com/questions/40770283/how-can-i-make-a-o-file-to-elf-file", "closed_reason": "Duplicate", "title": "How can I make a .o file to .elf file?", "body": "<p>I have a file named lab7.c and when I compile to make it a .o file everything is fine. However then I go to make it a .elf file with    </p>\n\n<pre><code>avr-gcc -mmcu=atmega324a -o lab7.elf lab7.o\n</code></pre>\n\n<p>I get the error message of</p>\n\n<pre><code>    lab7.o:(.data+0x8): undefined reference to `lcd_putc'\n    lab7.o: In function `main':\n    lab7.c:(.text.startup+0x0): undefined reference to `lcd_init'\n    collect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I have looked everywhere to try and fix this and cant find anything. all I am trying to do is upload this code to my breadboard. I am using terminal on macOS Sierra writing in C.</p>\n\n<p>lab7.c</p>\n\n<pre><code>#include &lt;avr/io.h&gt;     \n#include &lt;stdio.h&gt;  \n#include \"lcd.h\"\n\nstatic FILE lcd_stdout=FDEV_SETUP_STREAM(lcd_putc,NULL,_FDEV_SETUP_WRITE);\n\n#define PUSHED 1\n#define RIGHT_BUTTON ((PINA&amp;_BV(PIN3)) &gt;&gt; 3)\n#define LEFT_BUTTON ((PINA&amp;_BV(PIN0)) &gt;&gt; 0)\n\n#define LEFTMOST 0b10000000\n#define RIGHTMOST 0b00000001\n\nint main(void) {\nenum states { left_serve, right_serve, moving_left, moving_right};\n\n\n\n// Include the following variable declarations here \nchar state;     // This variable holds the current state \nchar leds;      // Current \"court\" --- inverse of PORTC\n\nlcd_init();     // If you want to write to the LCD\nstdout=&amp;lcd_stdout;\n\n// Required setup for I/O pins  \nDDRD = 0xFF;        // All PORTD pins are outputs\nDDRA = 0x10;        // PORTA pin 4 is an output, rest inputs\nPORTA |= 0x10;      // Only pin 4 is important - should be 1\n\n// Initialize \"state\" to \"left_serve\" here  \nstate=left_serve;\n\nif (LEFT_BUTTON == PUSHED) { \n    if (leds == LEFTMOST) {\n        state = moving_right;\n    }\n    else \n    {\n        state = right_serve;\n    }\n}\nif (RIGHT_BUTTON == PUSHED){\n    if (leds == RIGHTMOST) {\n        state = moving_left;\n    }\n    else \n    {\n        state = left_serve;\n    }\n}\nif (RIGHT_BUTTON != PUSHED &amp;&amp; LEFT_BUTTON != PUSHED &amp;&amp; leds == 0x00) {\n    if (state == moving_right) {\n        state = left_serve;\n    }\n    else\n    {\n        state = right_serve;\n    }\n}\nswitch (state) {\n\n    case moving_left:\n    leds = leds &lt;&lt; 1;\n    break;\n\n    case moving_right:\n    leds = leds &gt;&gt; 1;\n    break;\n\n    case right_serve:\n    leds = RIGHTMOST;\n    break;\n\n    case left_serve:\n    leds = LEFTMOST;\n    break;\n}       \nvoid setLEDs(int leds) {\nPORTD= (leds ^ 0x00FF);\nPORTC= (((~leds)&gt;&gt;8)&amp;0x0003)+(PORTC&amp;0xFFFC);\n}\n\n}       \n</code></pre>\n\n<p>lcd.h</p>\n\n<pre><code>#ifndef __LCD_H__\n#define __LCD_H__\n\n// A. Sheaff 1/10/2008\n// 4 bit LCD interface.\n\n// Define LCD type. Choose one.\n// #define LCD_1LINE\n// #define LCD_2LINE\n #define LCD_4LINE\n// End choice.\n\n// Set line length\n#define LCD_LINELEN 16\n// Set New line address\n#define LCD_LINE2A 0x40\n\n// Register select, Read/Write, Clock\n#define LCD_RS PIN4\n#define LCD_RW PIN6\n#define LCD_E  PIN7\n// Code assumes lower 4 bits are for data.\n#define LCD_DATW PORTB\n#define LCD_DATR PINB\n\n// LCD commands\n#define LCD_CLR     0x01    // LCD Clear\n#define LCD_HOME    0x02    // LCD Home\n#define LCD_SETDD   0x80    // LCD Set Data Address\n#define LCD_SHIFT   0x10    // Shift\n#define LCD_SCURS   0x00    // Shift Cursor\n#define LCD_SDISP   0x08    // Shift Dislay\n#define LCD_SRGHT   0x04    // Shift Right\n#define LCD_SLEFT   0x00    // Shift Left\n\n// LCD initialization\nvoid lcd_init(void);\n\n// Wait for LCD to finish current operation.  Returnds DD RAM address.\nunsigned char lcd_busy_wait(void);\n\n// Write character data to LCD\nvoid lcd_dwrite(unsigned char d);\nint lcd_putc(char c, struct __file * f);\n\n// Write instruction data to LCD\nvoid lcd_iwrite(unsigned char d);\n\n// Read data memory\nunsigned char lcd_dread(void);\n#endif // __LCD_H__\n</code></pre>\n\n<p>lcd.h was given to me by my teacher, therefore I don't have a file named lcd.c</p>\n"}, {"tags": ["c", "encryption", "random"], "comments": [{"owner": {"reputation": 36301, "user_id": 50447, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8c8779a33adeec01e05d5a480c7cd3c3?s=128&d=identicon&r=PG", "display_name": "Rowland Shaw", "link": "https://stackoverflow.com/users/50447/rowland-shaw"}, "edited": false, "score": 1, "creation_date": 1479919536, "post_id": 40769915, "comment_id": 68763838, "body": "so you&#39;re actually after <a href=\"https://ericlippert.com/2013/05/02/producing-permutations-part-six/\" rel=\"nofollow noreferrer\">an algorithm for pemutations</a>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479919788, "post_id": 40769915, "comment_id": 68764019, "body": "See <a href=\"http://stackoverflow.com/questions/7343833/srand-why-call-it-only-once/\"><code>srand()</code> \u2014 why call it only once</a>.  Since you only generate one random string, you won&#39;t observe the problem.  If you try to generate a second one, you will."}, {"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479919915, "post_id": 40769915, "comment_id": 68764106, "body": "yes actually i want encrypt a plaintext and i need random character key. i posted as an answer my code."}, {"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 0, "creation_date": 1479920459, "post_id": 40769915, "comment_id": 68764446, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6127503/shuffle-array-in-c\">Shuffle array in C</a>"}, {"owner": {"reputation": 689, "user_id": 6217179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633461a7b7bd893feebbc9285d0fb049?s=128&d=identicon&r=PG&f=1", "display_name": "sapanoia", "link": "https://stackoverflow.com/users/6217179/sapanoia"}, "edited": false, "score": 0, "creation_date": 1479933051, "post_id": 40769915, "comment_id": 68771160, "body": "Just as a sidenote, when you say &quot;encryption&quot;, I hope this is just for fun and games, since that kind of encryption can be cracked very easily."}, {"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479933130, "post_id": 40769915, "comment_id": 68771204, "body": "just for learning C language."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479919687, "post_id": 40769995, "comment_id": 68763950, "body": "yes actually i encrypted a plaintext and i need random character key and yes i need shuffle. Ok i will write my codes as answer:"}], "tags": [], "owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "is_accepted": true, "score": 7, "last_activity_date": 1479919541, "creation_date": 1479919541, "answer_id": 40769995, "question_id": 40769915, "link": "https://stackoverflow.com/questions/40769915/generate-random-letters-in-c/40769995#40769995", "title": "Generate random letters in C", "body": "<p>The operation you are looking for is called a <em>shuffle</em> or a <em>permutation</em>. It is not sufficient to call a random-letter function 26 times, since, as you see, you can generate duplicates.</p>\n\n<p>Instead, start with the string <code>\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"</code> and perform a shuffle operation. If you want to learn by doing such things from scratch, I recommend reading about the <a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow noreferrer\">Fisher-Yates Shuffle</a> then crafting an implementation on your own.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479920796, "post_id": 40770251, "comment_id": 68764657, "body": "thank you Eliot i changed but now i got errors this line <code>scanf (&quot;%[^\\n]&quot;, msg);</code> <b>format specified type &#39;char*&#39; but the argument has type &#39;char</b>&#39;** and this line <code>encryption(msg);</code> <b>incompatible pointer types passing &#39;char *[255]&#39; to parameter of type &#39;char *&#39;</b>"}], "tags": [], "owner": {"reputation": 142, "user_id": 6617881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7efe47d8a33ea94fd882010825bd87?s=128&d=identicon&r=PG", "display_name": "Eliot B.", "link": "https://stackoverflow.com/users/6617881/eliot-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1479920910, "last_edit_date": 1479920910, "creation_date": 1479920341, "answer_id": 40770251, "question_id": 40769915, "link": "https://stackoverflow.com/questions/40769915/generate-random-letters-in-c/40770251#40770251", "title": "Generate random letters in C", "body": "<p><strong>// why program get errors this line? (unused variable cipher_text)</strong></p>\n\n<pre><code>char *cipher_text, msg[255]; \n</code></pre>\n\n<p>You declare cipher_text but you only use msg.</p>\n\n<p>You could declare only:</p>\n\n<pre><code>char msg[255];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479920951, "post_id": 40770273, "comment_id": 68764740, "body": "weather thank you so much, but i got errors this line: <code>unsigned poolsize = strlen(pool);</code> <b>implicit conversion loses integer precision: &#39;unsigned long&#39; to &#39;unsigned int&#39;</b> and i couldnt implement inside in your code, not yet :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479921128, "post_id": 40770273, "comment_id": 68764827, "body": "Well just change the types appropriately. <code>strlen</code> actually returns <code>size_t</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479921261, "post_id": 40770273, "comment_id": 68764914, "body": "I have changed the types to <code>size_t</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479921810, "post_id": 40770273, "comment_id": 68765188, "body": "Didn&#39;t you get the same thing with your own <code>i &lt;strlen(cipher_text); </code>?"}, {"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479921941, "post_id": 40770273, "comment_id": 68765259, "body": "actually i was asking now how could i implement you code? i mean in my code inside :D"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479922634, "post_id": 40770273, "comment_id": 68765657, "body": "I don&#39;t understand you: this is an alteration to the code you posted in the question, which now does what you asked: no duplicate letters. If you want a key of 3 letters, change to <code>#define LENGTH 3</code>."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1479923789, "last_edit_date": 1479923789, "creation_date": 1479920385, "answer_id": 40770273, "question_id": 40769915, "link": "https://stackoverflow.com/questions/40769915/generate-random-letters-in-c/40770273#40770273", "title": "Generate random letters in C", "body": "<p>You can do this by having a pool of available characters, and taking one from the pool. Please note that your target string was too short to accomodate the string terminator. Similar to Fisher Yates shuffle.</p>\n\n<p>Edit: changed the types to <code>size_t</code>.</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define LENGTH  26                       // the cipher key length\n\nvoid random_string(char * string, size_t length)\n{\n    char pool[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    size_t poolsize = strlen(pool);\n    size_t index;\n    size_t i;\n\n    srand((unsigned)time(NULL));\n\n    for(i = 0; i &lt; length &amp;&amp; poolsize &gt; 0; ++i)\n    {\n        index = rand() % poolsize;       // a random index into the pool\n        string[i] = pool[index];         // take that character\n        pool[index] = pool[--poolsize];  // replace it with the last pool ...\n    }                                    // ... element and shorten the pool\n\n    string[i] = '\\0';\n}\n\nint main(void)\n{\n    char s[LENGTH + 1];                  // adequate length\n    random_string(s, LENGTH);\n    printf(\"%s\\n\", s);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>QYMUSFALIZCXGONBJRETHPVKDW\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 569, "user_id": 4181430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1488320649/picture?type=large", "display_name": "jurhas", "link": "https://stackoverflow.com/users/4181430/jurhas"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479922610, "post_id": 40770865, "comment_id": 68765642, "body": "sorry for my bad english, but I cannot understand what you are asking for.  If you do not get the answer, because may be I let something in my head. It means that in C and C++ the function srand() gives ever the same sequence. To avoid it you should call srand() with a random value, for trivial useses the function time() does his job perfectly. than you call rand(). And you are getting a nice random sequence"}], "tags": [], "owner": {"reputation": 569, "user_id": 4181430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1488320649/picture?type=large", "display_name": "jurhas", "link": "https://stackoverflow.com/users/4181430/jurhas"}, "is_accepted": false, "score": 0, "last_activity_date": 1479922320, "creation_date": 1479922320, "answer_id": 40770865, "question_id": 40769915, "link": "https://stackoverflow.com/questions/40769915/generate-random-letters-in-c/40770865#40770865", "title": "Generate random letters in C", "body": "<p>Copy paste from cplusplus.com/reference</p>\n\n<blockquote>\n  <p>The pseudo-random number generator is initialized using the argument\n  passed as seed.</p>\n  \n  <p>For every different seed value used in a call to srand, the\n  pseudo-random number generator can be expected to generate a different\n  succession of results in the subsequent calls to rand.</p>\n  \n  <p>Two different initializations with the same seed will generate the\n  same succession of results in subsequent calls to rand.</p>\n  \n  <p>If seed is set to 1, the generator is reinitialized to its initial\n  value and produces the same values as before any call to rand or\n  srand.</p>\n  \n  <p>In order to generate random-like numbers, srand is usually initialized\n  to some distinctive runtime value, like the value returned by function\n  time (declared in header ). This is distinctive enough for most\n  trivial randomization needs.</p>\n\n<pre><code>/* srand example */\n#include &lt;stdio.h&gt;      /* printf, NULL */\n#include &lt;stdlib.h&gt;     /* srand, rand */\n#include &lt;time.h&gt;       /* time */\nint main ()\n{\n  printf (\"First number: %d\\n\", rand()%100);\n  srand (time(NULL));\n  printf (\"Random number: %d\\n\", rand()%100);\n  srand (1);\n  printf (\"Again the first number: %d\\n\", rand()%100);\n\n  return 0;\n}\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3202, "favorite_count": 0, "accepted_answer_id": 40769995, "answer_count": 4, "score": 2, "last_activity_date": 1479923789, "creation_date": 1479919343, "last_edit_date": 1479919581, "question_id": 40769915, "link": "https://stackoverflow.com/questions/40769915/generate-random-letters-in-c", "title": "Generate random letters in C", "body": "<p>here is my code. I am trying generate random alphabet but i see same letters.\nexample: (<strong>Y</strong>HTGDHFBSHXCHF<strong>Y</strong>FUXZWDYKLXI) How can i fix it? just i need mixed alphabet not same letters. Thank you so much.</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid random_string(char * string, unsigned length)\n{\n    /* Seed number for rand() */\n    srand((unsigned int) time(0));\n\n\n    int i;\n    for (i = 0; i &lt; length; ++i)\n    {\n        string[i] = rand() % 26 + 'A';\n    }\n\n    string[i] = '\\0';\n}\n\nint main(void)\n{\n    char s[26];\n    random_string(s, 26);\n    printf(\"%s\\n\", s);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "time", "timeout", "libevent", "timeval"], "comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1479918987, "post_id": 40769718, "comment_id": 68763488, "body": "I&#39;m quite sure that <code>static</code> is definitely not what you want there. And it happens to be what the compiler is complaining about."}, {"owner": {"reputation": 125, "user_id": 2692992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c68565ac1ebef9ab11e4fea47cbd9765?s=128&d=identicon&r=PG&f=1", "display_name": "MOH", "link": "https://stackoverflow.com/users/2692992/moh"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1479919158, "post_id": 40769718, "comment_id": 68763597, "body": "@Art, thanks you were right, now it works"}, {"owner": {"reputation": 125, "user_id": 2692992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c68565ac1ebef9ab11e4fea47cbd9765?s=128&d=identicon&r=PG&f=1", "display_name": "MOH", "link": "https://stackoverflow.com/users/2692992/moh"}, "reply_to_user": {"reputation": 273, "user_id": 3722559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ae714cac6c3fe6897729aca735eaea?s=128&d=identicon&r=PG&f=1", "display_name": "schil227", "link": "https://stackoverflow.com/users/3722559/schil227"}, "edited": false, "score": 2, "creation_date": 1479919605, "post_id": 40769718, "comment_id": 68763880, "body": "@schil227: my int size is 4 bytes, it will cover that"}, {"owner": {"reputation": 273, "user_id": 3722559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ae714cac6c3fe6897729aca735eaea?s=128&d=identicon&r=PG&f=1", "display_name": "schil227", "link": "https://stackoverflow.com/users/3722559/schil227"}, "edited": false, "score": 0, "creation_date": 1479919659, "post_id": 40769718, "comment_id": 68763929, "body": "Ah -  forgive my assumption."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479919915, "post_id": 40769718, "comment_id": 68764105, "body": "@MOH: Relying unnecessarily on implementation-specifics if bad style. Use a type with guanteed minimum or fixed width like <code>int_least32_t</code> or <code>int32_t</code>. If not anything else, you document that you thought about the required range."}, {"owner": {"reputation": 125, "user_id": 2692992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c68565ac1ebef9ab11e4fea47cbd9765?s=128&d=identicon&r=PG&f=1", "display_name": "MOH", "link": "https://stackoverflow.com/users/2692992/moh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479940673, "post_id": 40769718, "comment_id": 68774408, "body": "@Olaf: thanks for the advice"}], "owner": {"reputation": 125, "user_id": 2692992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c68565ac1ebef9ab11e4fea47cbd9765?s=128&d=identicon&r=PG&f=1", "display_name": "MOH", "link": "https://stackoverflow.com/users/2692992/moh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1479918807, "creation_date": 1479918807, "question_id": 40769718, "link": "https://stackoverflow.com/questions/40769718/how-to-set-timeval-to-a-random-time", "title": "How to set timeval to a random time", "body": "<p>I am using libevent to do some tasks after some timeouts, timeouts are randomly selected, and each time they change. The problem is I cannot set timeval variable to a random time.</p>\n\n<pre><code>int TIMEOUT = 2000000; // 2 millions micro seconds, which is 2 seconds\nint mytimeout = (rand() % TIMEOUT) + 1; // a random time between 0 and 2 seconds\nint mysec = mytime/1000000; // the number of seconds\nint myMicroSec = mytime -  mysec * 1000000; // the number of micro seconds\nstatic struct timeval poll_interval_tv = {mysec, myMicroSec};\n\nmyevent = event_new(libevent_get_base(), -1,EV_TIMEOUT,\n                        mycallback_function, arg);\n</code></pre>\n\n<p>It returns these errors:\nerror: initializer element is not constant\nerror: (near initialization for \u2018poll_interval_tv.tv_sec\u2019)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 5, "creation_date": 1479918001, "post_id": 40769383, "comment_id": 68762813, "body": "(1) <a href=\"https://stackoverflow.com/questions/1694036/\">Never use <code>gets</code></a>. (2) <code>strcpy</code> does not do what you think it does. (3) Read &quot;<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to Debug Small Programs</a>.&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1479918246, "post_id": 40769383, "comment_id": 68762960, "body": "<code>for (i = 0; i &lt;= lenstr; i++) { revstr[i] = inputstr[lenstr - i]; } revstr[i] = 0;</code> would work better. Otherwise, what are you doing with <code>i</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479919675, "post_id": 40769383, "comment_id": 68763941, "body": "The compiler should be complaining about your call to <code>strcpy()</code>.  If it isn&#39;t, you need to get a better compiler.  If it is, you need to heed it; C compilers don&#39;t spend their time warning about &#39;might be a problem&#39;; they warn only about things that are clearly problems.  At this stage in your career, the compiler is ominscient; it is right, unconditionally; if it warns, you&#39;ve got a bug in your code.  Ignoring compiler warnings means your program is likely to crash.  (It may crash even if the compiler gives no warnings; but if the compiler warns, the crash is much more likely.)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479920345, "post_id": 40769383, "comment_id": 68764370, "body": "@JonathanLeffler Might be good to mention that <code>gcc -Wall</code> is a much better compiler than <code>gcc</code> in that sense."}], "answers": [{"tags": [], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "is_accepted": false, "score": 1, "last_activity_date": 1479922693, "last_edit_date": 1479922693, "creation_date": 1479918462, "answer_id": 40769582, "question_id": 40769383, "link": "https://stackoverflow.com/questions/40769383/reversing-a-string-in-c-results-in-segmentation-fault/40769582#40769582", "title": "Reversing a string in c results in segmentation fault", "body": "<blockquote>\n  <p>I am trying to reverse a string in c but i get segmentation</p>\n</blockquote>\n\n<p><code>strcpy()</code> is used to copy a string into destination string. So the arguments are <code>char*</code> and <code>const char*</code>. But here in your code you are sending a <code>char</code> as the second argument of <code>strcpy()</code> function.</p>\n\n<p>You need not use <code>strcpy()</code> function at all for reversing the string, just a <code>for</code> loop is enough to achieve reversing the string.</p>\n\n<p>Example for <code>for</code> loop:</p>\n\n<pre><code>for (i = 0; i &lt;= lenstr; i++) \n{ \n    revstr[i] = inputstr[lenstr - i]; \n} \nrevstr[i] = '\\0';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1479920562, "post_id": 40769722, "comment_id": 68764505, "body": "Downvoted just for <i>mentioning</i> the XOR trick, which gives the wrong answer in some circumstances (in particular, in this case it will mangle any string containing an odd number of characters), and on modern CPUs is <i>slower</i> than a temp variable."}], "tags": [], "owner": {"reputation": 569, "user_id": 4181430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1488320649/picture?type=large", "display_name": "jurhas", "link": "https://stackoverflow.com/users/4181430/jurhas"}, "is_accepted": false, "score": -1, "last_activity_date": 1479918815, "creation_date": 1479918815, "answer_id": 40769722, "question_id": 40769383, "link": "https://stackoverflow.com/questions/40769383/reversing-a-string-in-c-results-in-segmentation-fault/40769722#40769722", "title": "Reversing a string in c results in segmentation fault", "body": "<p>what should do strcpy()?</p>\n\n<p>Here my version of reverse:</p>\n\n<pre><code>void reverse(char * s, int len)\n{\n    char c,*end =s+len-1;\n    while (s&lt;end)\n    {\n       c=*s;\n       *s++=*end;\n       *end--=c;\n     }\n}\n</code></pre>\n\n<p>With XOR  you can avoid to declare the temporary c variable... but it is not redeable, and I am quite curious to know if gives some performances improvments... I choosed to pass the len, rather than compute it inside, since you can reverse also substrings, or because the length is already availabe</p>\n"}], "owner": {"reputation": 1998, "user_id": 1906494, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e8a3f8e284442e0649c804fcb3aa24d2?s=128&d=identicon&r=PG&f=1", "display_name": "vijay shanker", "link": "https://stackoverflow.com/users/1906494/vijay-shanker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479922693, "creation_date": 1479917873, "last_edit_date": 1479918312, "question_id": 40769383, "link": "https://stackoverflow.com/questions/40769383/reversing-a-string-in-c-results-in-segmentation-fault", "title": "Reversing a string in c results in segmentation fault", "body": "<p>I am trying to reverse a string in c but i get segmentation fault, core dumped error, couldn figure out the error.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nvoid main(){\n    char inputstr[100];\n    int i = 0;\n    char revstr[100];\n\n    printf(\"Give me something to reverse!!:\\t\");\n    gets(inputstr);\n    printf(\"You entered %s\\n\", inputstr);\n\n    int lenstr = strlen(inputstr) - 1;\n\n\n    while(lenstr &gt;= i){\n        strcpy(revstr, inputstr[lenstr]);\n        lenstr = lenstr -1; \n    }\n\n    printf(\"%s\\n\", revstr);\n}\n</code></pre>\n"}, {"tags": ["c", "pipe", "stdin"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1479915216, "post_id": 40768381, "comment_id": 68760901, "body": "In the parent, don&#39;t wait for the child to finish before you read from the pipe. It might work in this case because you probably don&#39;t write enough to fill the pipes buffer, but if it is filled then the writer will block and you have a deadlock."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1479915254, "post_id": 40768381, "comment_id": 68760930, "body": "Also, what version of the <code>gets</code> function do you have that take a buffer size? Are you using some variant of <code>gets_s</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479915504, "post_id": 40768381, "comment_id": 68761093, "body": "There are also some other problems with your parent program. Like for example it should not compile cleanly."}, {"owner": {"reputation": 401, "user_id": 3238070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/06bd132f3d8b962f20a56983b105edb6?s=128&d=identicon&r=PG&f=1", "display_name": "faku", "link": "https://stackoverflow.com/users/3238070/faku"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479916788, "post_id": 40768381, "comment_id": 68761989, "body": "I&#39;m coding the user space of <a href=\"https://en.wikipedia.org/wiki/Not_Another_Completely_Heuristic_Operating_System\" rel=\"nofollow noreferrer\">nachOS</a> so the only version of <code>gets</code> I have is <code>gets(char* s, int maxlength)</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479921018, "post_id": 40768381, "comment_id": 68764766, "body": "Whoa!  That&#39;s a highly non-standard interface to <code>gets()</code>.  (A far better interface, but completely non-standard and therefore completely confusing.)  That complicates life \u2014 are any of the other standard-looking functions the same as the actual standard functions?  How can we guess the behaviour of all the other functions that look as if they might be POSIX functions?"}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 3238070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/06bd132f3d8b962f20a56983b105edb6?s=128&d=identicon&r=PG&f=1", "display_name": "faku", "link": "https://stackoverflow.com/users/3238070/faku"}, "edited": false, "score": 0, "creation_date": 1479916964, "post_id": 40768647, "comment_id": 68762100, "body": "Thank you for the answer. Unfortunately, I can&#39;t rethink the design since I&#39;m asked to do it as I explained. But maybe my approach isn&#39;t good and I have to rethink that. I&#39;ll keep you updated!"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1479916286, "last_edit_date": 1479916286, "creation_date": 1479915848, "answer_id": 40768647, "question_id": 40768381, "link": "https://stackoverflow.com/questions/40768381/how-to-pipe-stdin-from-child-to-parent/40768647#40768647", "title": "How to pipe stdin from child to parent?", "body": "<p>Besides the problems mentioned in my comments, the problem you are experiencing is a <em>deadlock</em>. You get that because the parent process waits for the child process to exit. But the child process is waiting for input that never arrives.</p>\n\n<p>That's because in the child process you say that the input should come from the <em>pipe</em>.</p>\n\n<p>Furthermore in the parent process you attempt to <em>read</em> from the write-end of the pipe.</p>\n\n<p>Finally, your program will never work as long as the child process is wanting to read user-input, because all user-input will go to the <em>parent</em> process.</p>\n\n<p>To make it all work, you need to rethink your design, and to make the <em>parent</em> process the one that reads input from the user, and writes to the pipe. And the child process should read from the pipe and print to (the non-piped) standard output. Or you close the (normal, non-piped) standard input in the parent, and in the child you write to the pipe (as standard output).</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1479921198, "creation_date": 1479921198, "answer_id": 40770517, "question_id": 40768381, "link": "https://stackoverflow.com/questions/40768381/how-to-pipe-stdin-from-child-to-parent/40770517#40770517", "title": "How to pipe stdin from child to parent?", "body": "<p>Your code has several problems:</p>\n\n<ul>\n<li>you mix integer (low level) file descriptors, and (high level) FILE * constants.</li>\n<li>you invert stdin and stdout as well as the order of the descriptors obtained through <code>pipe</code></li>\n<li>you write a message on stdout when you intend to redirect it (should use stderr)</li>\n</ul>\n\n<p>Here is a fixed version (I changed your gets by fgets, as well as your exec with execl to have everything to compile):</p>\n\n<p>parent.c:</p>\n\n<pre><code>int main(int argc, char **argv) {\n    int fd[2];\n    char line[80];\n\n    pipe(fd);\n\n    pid_t pid = (pid_t)fork();\n\n    if(pid &gt; 0) {\n        waitpid(pid, NULL, 0);\n        close(fd[1]);\n        int size = read(fd[0], line, 79);\n        close(fd[0]);\n        line[size] = '\\0';\n        printf(\"[parent] Received \\\"%s\\\", size = %d\\n\", line, size);\n    }\n    else {\n        close(fd[0]);\n        close(1);\n        dup2(fd[1], 1);\n        close(fd[1]);\n        execl(\"./child\", NULL);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>child.c</p>\n\n<pre><code>int main(int argc, char **argv) {\n    char line[80];\n\n    fprintf(stderr, \"[child] Enter message: \");\n    fgets(line, 80, stdin);\n    printf(\"[child] line = %s\\n\", line);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 3238070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/06bd132f3d8b962f20a56983b105edb6?s=128&d=identicon&r=PG&f=1", "display_name": "faku", "link": "https://stackoverflow.com/users/3238070/faku"}, "is_accepted": true, "score": 0, "last_activity_date": 1480526451, "creation_date": 1480526451, "answer_id": 40894438, "question_id": 40768381, "link": "https://stackoverflow.com/questions/40768381/how-to-pipe-stdin-from-child-to-parent/40894438#40894438", "title": "How to pipe stdin from child to parent?", "body": "<p>I've found a workaround. My actual goal was to pass information between parent and child. My error was to <code>dup2</code> on <code>stdin</code>. By doing this, I couldn't enter anything when the program asked. So I passed the value of the file descriptors in the <code>argv</code> and my problem was solved.</p>\n\n<p>Thanks again for your help !</p>\n"}], "owner": {"reputation": 401, "user_id": 3238070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/06bd132f3d8b962f20a56983b105edb6?s=128&d=identicon&r=PG&f=1", "display_name": "faku", "link": "https://stackoverflow.com/users/3238070/faku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 0, "accepted_answer_id": 40894438, "answer_count": 3, "score": 0, "last_activity_date": 1480526451, "creation_date": 1479914985, "question_id": 40768381, "link": "https://stackoverflow.com/questions/40768381/how-to-pipe-stdin-from-child-to-parent", "title": "How to pipe stdin from child to parent?", "body": "<p>I'm trying to <code>exec()</code>a child process from a parent process. In this child process, I ask the user to enter a message so it can be printed out by the parent process but I can't find a way to do it...</p>\n\n<p>So far, my code is :</p>\n\n<p><strong>parent.c</strong></p>\n\n<pre><code>int main(int argc, char **argv) {\n    int fd[2];\n    char line[80];\n\n    pipe(fd);\n\n    pid_t pid = (pid_t)fork();\n\n    if(pid &gt; 0) {\n        waitpid(pid, NULL, 0);\n        close(fd[0]);\n        int size = read(fd[1], line, 79);\n        close(fd[1]);\n        line[size] = '\\0';\n        printf(\"[parent] Received \\\"%s\\\", size = %d\\n\", line, size);\n    }\n    else {\n        close(fd[1]);\n        close(stdin);\n        dup2(fd[0], stdin);\n        close(fd[0]);\n        exec(\"./child\", 0, NULL);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>child.c</strong></p>\n\n<pre><code>int main(int argc, char **argv) {\n    char line[80];\n\n    printf(\"[child] Enter message: \");\n    gets(line, 80);\n    printf(\"[child] line = %s\\n\", line);\n\n    return 0;\n}\n</code></pre>\n\n<p>When I launch the parent process, it displays <code>[child] Enter message:</code> but when I try to type something, nothing appears, even if I hit the return key.</p>\n\n<p>Do you know how can I make it work ?</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["mysql", "c", "makefile"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479915388, "post_id": 40768360, "comment_id": 68761020, "body": "If you run <code>make</code> after cleaning, what is the output? What are the commands <code>make</code> call doing? Please post that output. In fact, please post the <i>full</i> output of building the program."}], "answers": [{"tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": true, "score": 0, "last_activity_date": 1479916680, "creation_date": 1479916680, "answer_id": 40768965, "question_id": 40768360, "link": "https://stackoverflow.com/questions/40768360/add-mysql-to-my-makefile-gives-problems/40768965#40768965", "title": "Add MySQL to my Makefile gives problems", "body": "<p>If you'd shown us the output of the compiler, or examine it yourself, you'll immediately see that what you're running on the command line is not the same at all as what make is running: in particular make is not adding the <code>-I/usr/include/mysql</code> flag to the command line.</p>\n\n<p>That's because in your makefile you set:</p>\n\n<pre><code>INC = -I/usr/include/mysql\n</code></pre>\n\n<p>but nowhere in your makefile (as you've shown it) is the variable <code>INC</code> actually used, so this is essentially a no-op.</p>\n\n<p>Since you're using the standard GNU make compilation rules, you should be setting standard GNU make variables:</p>\n\n<pre><code>CPPFLAGS = -I/usr/include/mysql\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 3679027, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/bM6mn.jpg?s=128&g=1", "display_name": "Lubron", "link": "https://stackoverflow.com/users/3679027/lubron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 40768965, "answer_count": 1, "score": 0, "last_activity_date": 1479916680, "creation_date": 1479914935, "question_id": 40768360, "link": "https://stackoverflow.com/questions/40768360/add-mysql-to-my-makefile-gives-problems", "title": "Add MySQL to my Makefile gives problems", "body": "<p>I have a problem with my C project built under Debian Jessie. After doing some stuffs now I need to work with MySQL so i download the library and try to update my Makefile. </p>\n\n<p>This is my <strong>Makefile</strong> right now </p>\n\n<pre><code>CC = gcc\nCFLAGS = -Wall -Wextra \nLDFLAGS = -lbluetooth -lpthread -lmysqlclient\nLFLAGS = -lm\nINC = -I/usr/include/mysql\n\nSOURCES = stb.c btscan.c and.c gima.c database.c\nOBJECTS = $(SOURCES:.c=.o)\nEXECUTABLE = stb\n\n$(EXECUTABLE): $(OBJECTS)\n    $(CC) $(CFLAGS) $(OBJECTS) -o $@ $(LFLAGS) $(LDFLAGS)\n\nstb.o: btscan.h and.h gima.h database.h\n\nbtscan.o: btscan.h\n\nand.o: and.h\n\ngima.o: gima.h\n\ndatabase.o: database.h\n\nclean:\n    @rm -f *.o *.out stb\n</code></pre>\n\n<p>and this is the files where I want to use the library</p>\n\n<p><strong>stb.c</strong></p>\n\n<pre><code>    #include \"btscan.h\"\n    #include \"and.h\"\n    #include \"gima.h\"\n    #include \"database.h\"\n\n    struct device* bt_devices; \n    struct device* ble_devices;     \n\n    int main(void) {\n\n        //-------------------------------- DATABASE CONNECTION ----------------\n\n        //MYSQL *con = mysql_init(NULL);\n\n....... }\n</code></pre>\n\n<p>and finally <strong>database.h</strong></p>\n\n<pre><code>#ifndef _DATABASE_H\n#define _DATABASE_H\n\n#include &lt;my_global.h&gt;\n#include &lt;mysql.h&gt;\n\n#endif\n</code></pre>\n\n<p>When I try to make i receive \"Fatal error : my_global.h No such file or directory\". However if i try MySQL on a single test file and compiling it with</p>\n\n<pre><code>gcc -o test test.c -I/usr/include/mysql -lmysqlclient\n</code></pre>\n\n<p>it works. Where I made a mistake? </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 1, "creation_date": 1479915167, "post_id": 40768337, "comment_id": 68760873, "body": "Can&#39;t you use the compiler? E.g. g++ -H  ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1479915321, "post_id": 40768337, "comment_id": 68760976, "body": "You could try to parse the <code>line</code> directives in the preprocessor output, because the hierarchy depends on preprocessing anyway."}, {"owner": {"reputation": 43, "user_id": 7157667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/941e8b2fed7b4fd09a2cec464eadfcd9?s=128&d=identicon&r=PG&f=1", "display_name": "Link42", "link": "https://stackoverflow.com/users/7157667/link42"}, "reply_to_user": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1479915432, "post_id": 40768337, "comment_id": 68761048, "body": "@stijn many thanks, that what I wanted! I just didn&#39;t know that there is such feature."}, {"owner": {"reputation": 43, "user_id": 7157667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/941e8b2fed7b4fd09a2cec464eadfcd9?s=128&d=identicon&r=PG&f=1", "display_name": "Link42", "link": "https://stackoverflow.com/users/7157667/link42"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479916146, "post_id": 40768337, "comment_id": 68761526, "body": "@Olaf I don&#39;t understand why my question is too broad or opinionated. I knew that I could do this by a script or some other tool. Question was about possibility to do it with the help of language itself. Help of the compiler is also OK since I don&#39;t need to use third-party tools."}, {"owner": {"reputation": 43, "user_id": 7157667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/941e8b2fed7b4fd09a2cec464eadfcd9?s=128&d=identicon&r=PG&f=1", "display_name": "Link42", "link": "https://stackoverflow.com/users/7157667/link42"}, "reply_to_user": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1479917131, "post_id": 40768337, "comment_id": 68762198, "body": "@stijn I didn&#39;t ask where a header file is included from, I asked about their hierarchy. In other words what is the chain of inclusions between c file and particular header file."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479920472, "post_id": 40768337, "comment_id": 68764454, "body": "You have to know where the headers are included from because you have to read the included headers to determine the hierarchy. If you don&#39;t think you have to worry about <code>#ifdef SOME_OBSCURE_CONDITION</code> / <code>#define HEADER_FILE &quot;header_001.h&quot;</code> / <code>#else</code> / <code>#define HEADER_FILE &quot;sys&#47;pink-grey.h&quot;</code> / <code>#endif</code> / <code>#include HEADER_FILE</code> then you may be able to get away with a crude parsing of the C file to find <code>#include</code> lines and then find the headers and apply the same scan to them in turn, etc. However, there&#39;s apt to be conditional code (especially in system headers) which makes it hard to do well."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1479920531, "post_id": 40768337, "comment_id": 68764486, "body": "Using the C compiler is probably best.  Failing that, you&#39;ll probably need to go to something like the LLVM project and use their tools.  It is 100% non-trivial \u2014 see you in a few months (6-36?) with the completed project."}, {"owner": {"reputation": 1934, "user_id": 4373992, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xgw9p.jpg?s=128&g=1", "display_name": "jha-G", "link": "https://stackoverflow.com/users/4373992/jha-g"}, "edited": false, "score": 0, "creation_date": 1479922326, "post_id": 40768337, "comment_id": 68765475, "body": "Yeah, someone has to generate entire inclusion graph, and do the topological sorting to provide the required output. So, GCC &amp; Python will do I think."}], "owner": {"reputation": 43, "user_id": 7157667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/941e8b2fed7b4fd09a2cec464eadfcd9?s=128&d=identicon&r=PG&f=1", "display_name": "Link42", "link": "https://stackoverflow.com/users/7157667/link42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "closed_date": 1479948378, "answer_count": 0, "score": 2, "last_activity_date": 1479918044, "creation_date": 1479914863, "last_edit_date": 1495540888, "question_id": 40768337, "link": "https://stackoverflow.com/questions/40768337/how-can-i-print-headers-hierarchy", "closed_reason": "Duplicate", "title": "How can I print headers hierarchy?", "body": "<p>I'm trying to figure out if it is possible to print headers hierarchy using just the C language itself (like in quines). The goal is to get a set of trees where root is a <code>.c</code> file and leafs are the basement headers which doesn't include any other headers. The possible output:</p>\n\n<pre><code>start: header1.h-&gt;header2.h-&gt;header3.h;header1.h-&gt;header4.h; end\n</code></pre>\n\n<p>which means for example that <code>header1.h</code> includes two headers: <code>header2.h</code> and <code>header4.h</code>.</p>\n\n<p>It looks like my attempt to do this <a href=\"https://stackoverflow.com/questions/40746822/print-headers-hierarchy\">Print headers hierarchy</a> doesn't work at all. But is there some way using preprocessor or any other language feature to print headers hierarchy? Or should I just use Python script?</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>The solution proposed by @stijn in comments to use compiler option <code>-H</code> actually doesn't do the full job since it doesn't print headers twice. So for headers included later the hierarchy will be partial.</p>\n\n<p>The question <a href=\"https://stackoverflow.com/questions/5834778/how-to-tell-where-a-header-file-is-included-from\">How to tell where a header file is included from?</a> is about absolute paths of headers and where compiler actually finds on disk the particular header. My question is about headers inclusion hierarchy - which header does include which headers? So it doesn't matter where on disk headers lie.</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 2678, "user_id": 3387223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/370iy.png?s=128&g=1", "display_name": "CodeMonkey", "link": "https://stackoverflow.com/users/3387223/codemonkey"}, "edited": false, "score": 2, "creation_date": 1479914344, "post_id": 40768032, "comment_id": 68760323, "body": "Please format your code properly. Also you probably want (n+1)*sizeof(double). Your main should also be int main."}, {"owner": {"reputation": 13, "user_id": 4922505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eecceee1bf1fba9cfdb6cf99ae06b79?s=128&d=identicon&r=PG&f=1", "display_name": "byj", "link": "https://stackoverflow.com/users/4922505/byj"}, "reply_to_user": {"reputation": 2678, "user_id": 3387223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/370iy.png?s=128&g=1", "display_name": "CodeMonkey", "link": "https://stackoverflow.com/users/3387223/codemonkey"}, "edited": false, "score": 0, "creation_date": 1479914692, "post_id": 40768032, "comment_id": 68760540, "body": "@CodeMonkey Oh wow, I feel stupid for missing that all the time... Thanks alot, now everything works great! Is there any way to select your comment as an answer?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479914788, "post_id": 40768032, "comment_id": 68760620, "body": "@byj there are other problems as well, see answers below."}, {"owner": {"reputation": 13, "user_id": 4922505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eecceee1bf1fba9cfdb6cf99ae06b79?s=128&d=identicon&r=PG&f=1", "display_name": "byj", "link": "https://stackoverflow.com/users/4922505/byj"}, "edited": false, "score": 0, "creation_date": 1479916052, "post_id": 40768032, "comment_id": 68761457, "body": "Got it now, thanks a lot for the help everyone! Me setting the h[x] values made me miss that x was out of the h array, since there is no error message^^"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1479914593, "creation_date": 1479914593, "answer_id": 40768237, "question_id": 40768032, "link": "https://stackoverflow.com/questions/40768032/unable-to-properly-use-struct-pointers-in-c/40768237#40768237", "title": "Unable to properly use struct pointers in C", "body": "<p>Your allocation is wrong, you have to group the <code>n</code> and the <code>1</code> like you do it on paper so. Not that the expression you have <code>n + 1 * sizeof(double)</code>  means the same as <code>n + sizeof(double)</code>.</p>\n\n<pre><code>X-&gt;entry = malloc((n + 1) * sizeof(*X-&gt;entry));\n</code></pre>\n\n<p>would be the right way!</p>\n\n<p>As it was, your code invokes undefined behavior and once possible consequence is for the program to crash. Most likely because trying to access memory out of it's memory space so a segmentation fault occurs.</p>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 6518225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea46517b92807a7fa8b5a869c5e3ec9?s=128&d=identicon&r=PG&f=1", "display_name": "Chandrakant Tripathi", "link": "https://stackoverflow.com/users/6518225/chandrakant-tripathi"}, "is_accepted": false, "score": 3, "last_activity_date": 1479914693, "last_edit_date": 1479914693, "creation_date": 1479914640, "answer_id": 40768257, "question_id": 40768032, "link": "https://stackoverflow.com/questions/40768032/unable-to-properly-use-struct-pointers-in-c/40768257#40768257", "title": "Unable to properly use struct pointers in C", "body": "<p>Problem seem to be in function</p>\n\n<pre><code>Vector *newVector(int n)\n{\n    int i = 0;\n    Vector *X = NULL;\n    assert(n &gt; 0);\n    X = malloc(sizeof(Vector));\n    assert(X != NULL);\n    X-&gt;n = n;\n    X-&gt;entry = malloc(n+1*sizeof(double));\n    assert(X-&gt;entry != NULL);\n    X-&gt;entry[0] = 0;\n    for (i=1; i&lt;n+1; ++i) {\n        scanf(\"%lf\",&amp;X-&gt;entry[i]);\n    }\n    return X;\n}\n</code></pre>\n\n<p>In above statement, you are allocating <code>X-&gt;entry</code> with <code>n + sizeof(double)</code> but as per your requirement you should allocated <code>(n + 1) * sizeof(double)</code></p>\n\n<p>You should allocate memory for <code>X-&gt;entry</code> as </p>\n\n<pre><code>X-&gt;entry = malloc((n + 1) * sizeof(double));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 7200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e060423965c93355a79e8d18b0161626?s=128&d=identicon&r=PG", "display_name": "pi_pi3", "link": "https://stackoverflow.com/users/7200545/pi-pi3"}, "is_accepted": true, "score": 6, "last_activity_date": 1479914691, "creation_date": 1479914691, "answer_id": 40768271, "question_id": 40768032, "link": "https://stackoverflow.com/questions/40768032/unable-to-properly-use-struct-pointers-in-c/40768271#40768271", "title": "Unable to properly use struct pointers in C", "body": "<p>Let's just focus on the setVectorLength function</p>\n\n<pre><code>void setVectorLength(Vector *X, int k)\n{\n    assert(X != NULL);\n    assert(k&gt;0);\n    delVector(X);\n    printf(\"so far.\\n\");\n    X = newVector(k);\n}\n</code></pre>\n\n<p>Here, Vector *X is a local variable that only exists in this function. It points to some location in memory, but using it you can't modify the original pointer. So there are two ways around it.\n1. You don't delete and recreate the vector. Instead do something like this</p>\n\n<pre><code>void setVectorLength(Vector *X, int k)\n{\n    X-&gt;entry = realloc(X-&gt;entry, k*sizeof(double)); // frees X-&gt;entry and allocates it to a new heap array\n    X-&gt;k = k;\n}\n</code></pre>\n\n<p>2. Use a pointer pointer. Do note, that this will be slower and is unnecessary. Go for the 1 solution.</p>\n\n<pre><code>void setVectorLength(Vector **X, int k)\n{\n    assert(*X != NULL);\n    assert(k&gt;0);\n    delVector(*X);\n    printf(\"so far.\\n\");\n    *X = newVector(k);\n}\n</code></pre>\n\n<p>The variable Vector **X points to the original variable, so you can modify it.</p>\n"}, {"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 0, "last_activity_date": 1479914733, "last_edit_date": 1495542621, "creation_date": 1479914733, "answer_id": 40768287, "question_id": 40768032, "link": "https://stackoverflow.com/questions/40768032/unable-to-properly-use-struct-pointers-in-c/40768287#40768287", "title": "Unable to properly use struct pointers in C", "body": "<pre><code>void setVectorLength(Vector *X, int k)\n{\n    assert(X != NULL);\n    assert(k&gt;0);\n    delVector(X);\n    printf(\"so far.\\n\");\n    X = newVector(k);\n}\n</code></pre>\n\n<p>In this function, <code>X</code> is a copy of the pointer variable the caller passes in. It contains a copy of the address. Modifying a function parameter doesn't change the caller's value. Just as doing <code>k = 0</code> would have no effect on the caller, reassigning <code>X</code> is a local change that is invisible to the caller.</p>\n\n<p>If you want the caller to see the result of <code>newVector(k)</code>, you have a couple options. You could change <code>setVectorLength()</code> to work like <code>newVector()</code> and <em>return</em> the new pointer.</p>\n\n<pre><code>Vector *setVectorLength(Vector *X, int k) {\n    ...\n    printf(\"so far.\\n\");\n    return newVector(k);\n}\n\nint main() {\n    ...\n    h = setVectorLength(h, 6);\n}\n</code></pre>\n\n<p>Or you could add another layer of indirection&mdash;make <code>X</code> a pointer to a pointer. That would require the caller to pass the address of the variable they want changed. Instead of passing <code>h</code> you'd pass <code>&amp;h</code>.</p>\n\n<pre><code>void setVectorLength(Vector *X, int k) {\n    ...\n    printf(\"so far.\\n\");\n    *X = newVector(k);\n}\n\nint main() {\n    ...\n    setVectorLength(&amp;h, 6);\n}\n</code></pre>\n\n<p>By the way, the way you've written <code>setVectorLength()</code>, it will destroy any existing data in the vector. You may want to copy the data from the old vector to the new one. (Or, <a href=\"https://stackoverflow.com/a/40768271/68587\">as @pi_pi3 suggests</a>, modify the vector in place instead of destroying it and creating a new one.)</p>\n"}], "owner": {"reputation": 13, "user_id": 4922505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eecceee1bf1fba9cfdb6cf99ae06b79?s=128&d=identicon&r=PG&f=1", "display_name": "byj", "link": "https://stackoverflow.com/users/4922505/byj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 40768271, "answer_count": 4, "score": 0, "last_activity_date": 1479915230, "creation_date": 1479913981, "last_edit_date": 1479914228, "question_id": 40768032, "link": "https://stackoverflow.com/questions/40768032/unable-to-properly-use-struct-pointers-in-c", "title": "Unable to properly use struct pointers in C", "body": "<p>I am a beginner with C and currently struggling with using structs in functions. Even tho I give my functions the pointer to my struct and use that to change their values it seems like my functions are unable to change the value of the pointer themselves</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;assert.h&gt;\n\ntypedef struct Vector\n{\n    int n;\n    double *entry;\n}Vector; \n\n//defining the struct vector with n for its length and entry as a pointer which will become an array for its values\nVector *newVector(int n)\n{\n    int i = 0;\n    Vector *X = NULL;\n    assert(n &gt; 0);\n    X = malloc(sizeof(Vector));\n    assert(X != NULL);\n    X-&gt;n = n;\n    X-&gt;entry = malloc(n+1*sizeof(double));\n    assert(X-&gt;entry != NULL);\n    X-&gt;entry[0] = 0;\n    for (i=1; i&lt;n+1; ++i) {\n        scanf(\"%lf\",&amp;X-&gt;entry[i]);\n    }\n    return X;\n}\n\n//making  a new vector struct from the size given and returning its pointer (the array is made so it goes from 1-n instead of 0-(n-1)\nvoid delVector(Vector *X)\n{\n    assert(X != NULL);\n    assert(X-&gt;entry != NULL);\n    free(X-&gt;entry);\n    free(X);\n    X = NULL;\n}\n\nint getVectorLength (Vector *X)\n{\n    assert(X != NULL);\n    return X-&gt;n;\n}\n\nvoid setVectorLength(Vector *X, int k)\n{\n    assert(X != NULL);\n    assert(k&gt;0);\n    delVector(X);\n    printf(\"so far.\\n\");\n    X = newVector(k);\n} //deleting the vector and then replacing it with the new sized vector\n\ndouble getVectorEntry (Vector *X, int h)\n{\n    return X-&gt;entry[h];\n}\n\nvoid setVectorEntry (Vector *X, int h)\n{\n    printf(\"Value %d.\\n\",h);\n    scanf(\"%lf\",&amp;X-&gt;entry[h]);\n}\n\nmain()\n{\n    Vector *h = NULL;\n    h = newVector(3);\n    printf(\"%f\\n\",h-&gt;entry[1]);\n    printf(\"%f\\n\",getVectorEntry(h,1));\n    setVectorEntry(h,1);\n    printf(\"%f\\n\",getVectorEntry(h,1));\n    printf(\"%d\\n\",getVectorLength(h));\n    setVectorLength(h,6);\n    printf(\"%f\\n\",getVectorEntry(h,6));\n    setVectorEntry(h,6);\n    printf(\"so far.\\n\");\n    printf(\"%f\\n\",getVectorEntry(h,6));\n}\n</code></pre>\n\n<p>Running the code would make it crash once it reaches delVector. If I were to comment the delVector out it would crash at <code>X = newVector(k);</code> for a reason I also cannot find out (it starts the function newVector, but crashes before I can input). So what is causing the errors?\nThanks a lot in advance!</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 383, "user_id": 3317285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/961e92b0d78599d98eeadf724a0e5be8?s=128&d=identicon&r=PG&f=1", "display_name": "theKunz", "link": "https://stackoverflow.com/users/3317285/thekunz"}, "edited": false, "score": 1, "creation_date": 1479913756, "post_id": 40767906, "comment_id": 68759912, "body": "As a side note, it&#39;s usually considered bad form to do <code>void main()</code> rather than <code>int main()</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1479913834, "post_id": 40767906, "comment_id": 68759969, "body": "Don&#39;t use <code>void *</code> without need. And don&#39;t cast to or from <code>void *</code>."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 7, "last_activity_date": 1479913722, "creation_date": 1479913722, "answer_id": 40767947, "question_id": 40767906, "link": "https://stackoverflow.com/questions/40767906/cannot-convert-to-a-pointer-type-with-accessing-struct-via-pointer/40767947#40767947", "title": "&quot;cannot convert to a pointer type&quot; with accessing struct via pointer", "body": "<p>You are missing an ampersand (<code>&amp;</code>):</p>\n\n<pre><code> firstfunction(&amp;onedata-&gt;c, &amp;twodata.c,2);\n               ^\n</code></pre>\n\n<p>(I removed the needless casts).</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1479913729, "creation_date": 1479913729, "answer_id": 40767951, "question_id": 40767906, "link": "https://stackoverflow.com/questions/40767906/cannot-convert-to-a-pointer-type-with-accessing-struct-via-pointer/40767951#40767951", "title": "&quot;cannot convert to a pointer type&quot; with accessing struct via pointer", "body": "<p>You want this:</p>\n\n<pre><code>void secondfunction(struct two *onedata)\n{\n  struct two twodata;\n  firstfunction(&amp;onedata-&gt;c, &amp;twodata.c, 2);\n}\n</code></pre>\n\n<p>You just forgot the <code>&amp;</code> operator.</p>\n\n<p>BTW: there is no need to cast to <code>(void*)</code> here.</p>\n"}], "owner": {"reputation": 15, "user_id": 7200742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lNoVB.jpg?s=128&g=1", "display_name": "Art Navsegda", "link": "https://stackoverflow.com/users/7200742/art-navsegda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12872, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479913729, "creation_date": 1479913590, "question_id": 40767906, "link": "https://stackoverflow.com/questions/40767906/cannot-convert-to-a-pointer-type-with-accessing-struct-via-pointer", "title": "&quot;cannot convert to a pointer type&quot; with accessing struct via pointer", "body": "<pre><code>gcc -g -O2    struct.c   -o struct\nstruct.c: In function \u2018secondfunction\u2019:\nstruct.c:19:2: error: cannot convert to a pointer type\n  firstfunction((void *)onedata-&gt;c,(void *)&amp;twodata.c,2);\n  ^~~~~~~~~~~~~\n&lt;builtin&gt;: recipe for target 'struct' failed\nmake: *** [struct] Error 1\n</code></pre>\n\n<p>I'm trying to use pointer when copying contents of of struct to another struct via memcpy. But when I transfer pointer to the struct into function I cannot cast it into the void. </p>\n\n<pre><code>struct one {\n    char a;\n    char b;\n};\n\nstruct two {\n    struct one c;\n    struct one d;\n};\n\nvoid firstfunction(void *source, void *dest, int size)\n{\n    //memcpy(dest,source,size)\n}\n\nvoid secondfunction(struct two *onedata)\n{\n    struct two twodata;\n    firstfunction((void *)onedata-&gt;c,(void *)&amp;twodata.c,2);\n}\n\nvoid main()\n{\n    struct two onedata;\n    secondfunction(&amp;onedata);\n}\n</code></pre>\n"}, {"tags": ["c", "gtk3"], "comments": [{"owner": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "edited": false, "score": 0, "creation_date": 1479917963, "post_id": 40767868, "comment_id": 68762792, "body": "I could detect the key-release itself, and override the behavior from that point, but that seems a bit &quot;kludgy.&quot;  Am hoping for a better solution than that, but if necessary I can pursue it."}, {"owner": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "edited": false, "score": 0, "creation_date": 1480431793, "post_id": 40767868, "comment_id": 68953664, "body": "I suppose another option would be to somehow inspect the event-queue when processing the <code>delete-range</code> to determine whether it is immediately followed by an <code>insert-text</code> event.  Any pointers to make that work?"}], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "edited": false, "score": 0, "creation_date": 1480350189, "post_id": 40835775, "comment_id": 68914395, "body": "Unfortunately this won&#39;t work, as the quote shortcut is just one example of many custom actions that could be triggered by various keystrokes.  The goal was to contain all of the logic in a separate C library, that can then be referenced from any text handling &quot;widget&quot; -- NSTextStorage on Mac, GTKTextBuffer, etc."}, {"owner": {"reputation": 51182, "user_id": 172999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b2014c8170f4d16a313cfa79071fd861?s=128&d=identicon&r=PG", "display_name": "ptomato", "link": "https://stackoverflow.com/users/172999/ptomato"}, "reply_to_user": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "edited": false, "score": 0, "creation_date": 1480387288, "post_id": 40835775, "comment_id": 68930299, "body": "But couldn&#39;t you make <code>GActions</code> for each of those, in the GTK part of your code, which call into the separate logic library?"}, {"owner": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "edited": false, "score": 0, "creation_date": 1480431168, "post_id": 40835775, "comment_id": 68953210, "body": "In theory yes, but that would require manually updating the GTK code for each change in the library, defeating the purpose of isolating that code in the library in the first place."}], "tags": [], "owner": {"reputation": 51182, "user_id": 172999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b2014c8170f4d16a313cfa79071fd861?s=128&d=identicon&r=PG", "display_name": "ptomato", "link": "https://stackoverflow.com/users/172999/ptomato"}, "is_accepted": false, "score": 1, "last_activity_date": 1480295118, "creation_date": 1480295118, "answer_id": 40835775, "question_id": 40767868, "link": "https://stackoverflow.com/questions/40767868/how-to-detect-when-text-is-replaced-in-gtktextbuffer-instead-of-delete-followed/40835775#40835775", "title": "How to detect when text is replaced in GtkTextBuffer instead of delete followed by insert?", "body": "<p>Instead of trying to correlate the delete and insert events, I would suggest creating a <code>GAction</code> for your desired action (e.g. toggle quotes around the selected text) and setting its shortcut key to <kbd>\"</kbd> using <code>gtk_application_set_accels_for_action()</code>.</p>\n\n<p>For more information, check out this <a href=\"https://developer.gnome.org/GAction/\" rel=\"nofollow noreferrer\">HowDoI</a> wiki page.</p>\n"}, {"comments": [{"owner": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "edited": false, "score": 0, "creation_date": 1547391037, "post_id": 41486828, "comment_id": 95168895, "body": "I have recently revisited my toy GTK project with a new version of the underlying library that includes more functionality.  In testing, I discovered that while this approach still works when typing a new character, it doesn&#39;t work when selecting existing text and then pasting new text in from the clipboard.  I don&#39;t think I tested that functionality before.  The error I get is &quot; Gtk-WARNING **: Invalid text buffer iterator: either the iterator is uninitialized, or the characters/pixbufs/widgets in the buffer have been modified since the iterator was created.&quot;  Will have to dig further."}, {"owner": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "edited": false, "score": 0, "creation_date": 1547391663, "post_id": 41486828, "comment_id": 95169063, "body": "Turns out that I was doing some &quot;clean up&quot; to the GtkTextBuffer during the delete portion.  I migrated that to a callback on end-user-action instead, and that solved the problem"}], "tags": [], "owner": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "is_accepted": true, "score": 1, "last_activity_date": 1483624391, "creation_date": 1483624391, "answer_id": 41486828, "question_id": 40767868, "link": "https://stackoverflow.com/questions/40767868/how-to-detect-when-text-is-replaced-in-gtktextbuffer-instead-of-delete-followed/41486828#41486828", "title": "How to detect when text is replaced in GtkTextBuffer instead of delete followed by insert?", "body": "<p>No answers over the last month, so I kept brainstorming and digging around.  I finally came up with this, which works, but is not quite as elegant as I had hoped.</p>\n\n<ol>\n<li><p>Handle <code>delete-range</code> signal as before, but keep track of the the deleted text for later (e.g. in <code>char * deletedText</code>).</p></li>\n<li><p>Handle the <code>insert-text</code> signal as before, but if we have a string in <code>deletedText</code> then change the behavior to perform a replacement instead of an insertion.  In my case, this actually meant inserting the deleted text back in, and then performing the replacement.</p></li>\n<li><p>Add a callback for the <code>end-user-action</code> signal, which indicates that all delete/inserts associated with a particular action are complete.  In this callback, free <code>deletedText</code> from above and set to <code>NULL</code> (to indicate that everything has been handled).</p></li>\n</ol>\n\n<p>Again -- this works, but feels a bit inelegant.  And depending on how complex your delete/insert routines are, it may slow the performance slightly since some steps have to be duplicated.  A better solution would be to detect during the <code>delete-range</code> callback that there is a pending <code>insert-text</code> callback and handle both steps at once.  I have thus far not been able to do that.</p>\n"}], "owner": {"reputation": 220, "user_id": 1400908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4598ba438864b52a2f25645d798cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Fletcher T. Penney", "link": "https://stackoverflow.com/users/1400908/fletcher-t-penney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "accepted_answer_id": 41486828, "answer_count": 2, "score": 2, "last_activity_date": 1483624391, "creation_date": 1479913499, "question_id": 40767868, "link": "https://stackoverflow.com/questions/40767868/how-to-detect-when-text-is-replaced-in-gtktextbuffer-instead-of-delete-followed", "title": "How to detect when text is replaced in GtkTextBuffer instead of delete followed by insert?", "body": "<p>I have worked a great deal with the text system in Objective-C for macOS/iOS (e.g. NSTextView, NSTextStorage, etc.)  I am now experimenting with GTK3 to see how well I can translate my project for use on Linux, etc.</p>\n\n<p>I am brand new to using GTK, but after a few days of Google time and experimenting, I have a working text editor prototype with my custom code plugged in.</p>\n\n<p>The problem is this -- I need to be able to detect when a user highlights a section of text, and then replaces it with other text (e.g. a keystroke).  This is distinct from highlighting a section of text, hitting the delete key, and then typing the new text.  A specific use example would be highlighting a word, then typing a double quote character in order to wrap the word in quotes (e.g. <code>foo</code> becomes <code>\"foo\"</code>).</p>\n\n<p>In Cocoa, one would receive <code>replaceCharactersInRange:</code> that indicates the range originally selected, as well as the new string to replace it with. I can then detect the presumed intent of the user based on the information received.</p>\n\n<p>In GTK, it seems that we receive a <code>delete-range</code> signal, followed by a separate <code>insert-text</code> signal.  Because of this separation, the code in the \"insert\" section has no way of knowing that the user intended to replace text, not insert new text.</p>\n\n<p>I used the following to receive the signals above:</p>\n\n<pre><code>g_signal_connect(buffer, \"insert-text\", G_CALLBACK(insert_text_cb), NULL);\ng_signal_connect(buffer, \"delete-range\", G_CALLBACK(delete_range_cb), NULL);\n</code></pre>\n\n<p>Is there something else I can do in order to tell that there is a delete, followed by an insert as part of the same user action?</p>\n\n<p>Thanks for any pointers offered!</p>\n"}, {"tags": ["c", "ubuntu", "ffmpeg", "ubuntu-14.04", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1479913123, "post_id": 40767518, "comment_id": 68759469, "body": "You should profile your code and understand which part exactly causing this delta. Your OS can have different settings than the previous one. For example the RAM swapping settings."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1479913466, "post_id": 40767518, "comment_id": 68759708, "body": "I don&#39;t see what the problem is. Who would expect two different versions of an OS or programs to provide exactly the same timing? Also you don&#39;t even provide how you measure the &quot;running time&quot;, nor do you define what you mean with &quot;running time&quot;."}, {"owner": {"reputation": 1, "user_id": 7200616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e95b2408fc08f55c6cd68242e2ea40?s=128&d=identicon&r=PG&f=1", "display_name": "marinag", "link": "https://stackoverflow.com/users/7200616/marinag"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479914405, "post_id": 40767518, "comment_id": 68760361, "body": "@Olaf I am asking because I dont have nothing to expect. If I was an expert, i would not be here. Apart from this, &quot;running time&quot; is measured by ffmpeg. After coding an image or video, it gives you a &quot;speed&quot; parameter. This parameter returns the same result when an image is coded with JPEG in both Ubuntu 14 and 16. However, my codec is slower."}, {"owner": {"reputation": 1, "user_id": 7200616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e95b2408fc08f55c6cd68242e2ea40?s=128&d=identicon&r=PG&f=1", "display_name": "marinag", "link": "https://stackoverflow.com/users/7200616/marinag"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1479914555, "post_id": 40767518, "comment_id": 68760444, "body": "@Eugene Sh. Thank you, I will check RAM settings but I have not changed nothing. I am using default settings."}, {"owner": {"reputation": 85949, "user_id": 1109017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX561.png?s=128&g=1", "display_name": "llogan", "link": "https://stackoverflow.com/users/1109017/llogan"}, "edited": false, "score": 0, "creation_date": 1479932133, "post_id": 40767518, "comment_id": 68770686, "body": "How can we reproduce the issue?"}], "owner": {"reputation": 1, "user_id": 7200616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e95b2408fc08f55c6cd68242e2ea40?s=128&d=identicon&r=PG&f=1", "display_name": "marinag", "link": "https://stackoverflow.com/users/7200616/marinag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479913347, "creation_date": 1479912448, "last_edit_date": 1479913347, "question_id": 40767518, "link": "https://stackoverflow.com/questions/40767518/ubuntu-14-04-and-ubuntu-16-04-different-running-time-in-ffmpeg", "title": "Ubuntu 14.04 and Ubuntu 16.04 different running time in ffmpeg?", "body": "<p>I am developing a new codec in FFmpeg (<a href=\"https://github.com/magonzalezc/LHE\" rel=\"nofollow noreferrer\">https://github.com/magonzalezc/LHE</a> branch lhe_develop). I have upgraded to Ubuntu 16.04 recently and I have realized that my running time has increased. I have not changed anything but the OS. However, JPEG is still running in the same time.  My guess is that my codec is using big arrays of data with precalculated data and, somehow, RAM access is slower in Ubuntu 16.04. Other reason can be that OpenMP, which is used by my codec, is not working as well as it did with Ubuntu 14.04. </p>\n\n<p>Have you noticed this issue with your programs in Ubuntu 16.04? Any idea of what is exactly happening?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "ld", "relocation", "position-independent-code"], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1479913799, "post_id": 40767755, "comment_id": 68759944, "body": "@MarkYisri Yes, that&#39;s in the GCC documentation link above, and I also mention it now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6754053"}, "edited": false, "score": 0, "creation_date": 1479916230, "post_id": 40767755, "comment_id": 68761593, "body": "okay, so is there a way to be position independent and not need relocation code. &#39;Cuz I want to do this on a non-MMU board and run apps seperate from my homemade kernel."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1479913212, "last_edit_date": 1479913212, "creation_date": 1479913089, "answer_id": 40767755, "question_id": 40767469, "link": "https://stackoverflow.com/questions/40767469/what-is-the-difference-between-pic-code-and-ld-r/40767755#40767755", "title": "What is the difference between PIC code and `ld -r`?", "body": "<p>For starters, they are options to different parts of the toolchain:</p>\n\n<ul>\n<li><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html#index-fpic-1247\" rel=\"nofollow noreferrer\"><code>-fpic</code> and <code>-fPIC</code></a> are GCC options that generates position-independent code. This affects the actual instructions chosen, to make the code run regardless of where it is located in memory. This requires support by the operating system's dynamic loader to actually make it runnable once loaded.</li>\n<li><a href=\"https://sourceware.org/binutils/docs/ld/Options.html#index-g_t_002d_002drelocatable-95\" rel=\"nofollow noreferrer\"><code>-r</code></a> is a linker option that makes it emit relocatable code, i.e. code that can be linked again later on. It's part of ld's support for incremental linking.</li>\n</ul>\n\n<p>I think their usage doesn't overlap, you can create relocatable (library) code without using <code>ld -r</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6754053"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 40767755, "answer_count": 1, "score": 2, "last_activity_date": 1479913212, "creation_date": 1479912288, "last_edit_date": 1479912587, "question_id": 40767469, "link": "https://stackoverflow.com/questions/40767469/what-is-the-difference-between-pic-code-and-ld-r", "title": "What is the difference between PIC code and `ld -r`?", "body": "<p>I know both are used to make code that can be placed in different locations, but how does each work, and why?</p>\n"}, {"tags": ["c", "encryption"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1479911876, "post_id": 40767233, "comment_id": 68758592, "body": "you can&#39;t nest functions.."}, {"owner": {"reputation": 273, "user_id": 3722559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ae714cac6c3fe6897729aca735eaea?s=128&d=identicon&r=PG&f=1", "display_name": "schil227", "link": "https://stackoverflow.com/users/3722559/schil227"}, "edited": false, "score": 0, "creation_date": 1479912312, "post_id": 40767233, "comment_id": 68758883, "body": "if you want to generate a random alphabet, look into using the <code>rand()</code> function - you would want to generate a random number and mod it by 26, then add 97 to it, and store the variable in a <code>char</code>. See <a href=\"http://www.asciitable.com/index/asciifull.gif\" rel=\"nofollow noreferrer\">asciitable.com/index/asciifull.gif</a> for why we add 97"}, {"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479916622, "post_id": 40767233, "comment_id": 68761868, "body": "<code>srand((unsigned int) time(NULL) ); char key = rand( ) % 26 + &#39;a&#39;;</code>  i added this lines for random generate alphabet but i got an error :    <code>cipher_text[i]=key[j];</code> subscripted value is not an array, pointer or vector. How can i fix it?"}], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 6617881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7efe47d8a33ea94fd882010825bd87?s=128&d=identicon&r=PG", "display_name": "Eliot B.", "link": "https://stackoverflow.com/users/6617881/eliot-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1479913339, "last_edit_date": 1479913339, "creation_date": 1479911875, "answer_id": 40767295, "question_id": 40767233, "link": "https://stackoverflow.com/questions/40767233/mono-alphabetic-cipher-doesnt-work-correctly/40767295#40767295", "title": "Mono alphabetic cipher doesnt work correctly", "body": "<p>You cannot define a function inside another one. encryption is defined in main :/</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479913437, "post_id": 40767338, "comment_id": 68759692, "body": "thanks but i still got errors (using Xcode in OS X )  <code>char *cipher_text, msg[255];</code> (not c_text btw) this line says: unused variable ciphertext. program is working but just i entered the plaintext then program exit. :/ it didn&#39;t encrypt. Thank you so much."}, {"owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479913647, "post_id": 40767338, "comment_id": 68759842, "body": "Well, you have to call the function from main. I&#39;ve just added it to the code i posted."}, {"owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479914152, "post_id": 40767338, "comment_id": 68760190, "body": "Are you sure you copied the code exactly? With the line almost at the end with the function call (<code>encryption(msg);</code>)? It works for me."}, {"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479914521, "post_id": 40767338, "comment_id": 68760430, "body": "ok, now working but i got errors about values :/ thank you so much. i will checked this encryption is true or false."}, {"owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479914611, "post_id": 40767338, "comment_id": 68760481, "body": "No problem. You can accept this answer, if it answered your question."}, {"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479915052, "post_id": 40767338, "comment_id": 68760786, "body": "ok, thank you so much Honza. and can i ask a question for decryption after i write codes? how can i contact with you? :)"}, {"owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479915225, "post_id": 40767338, "comment_id": 68760909, "body": "I don&#39;t think there are private messages here on SO, so I suggest you ask in a new question."}, {"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479916531, "post_id": 40767338, "comment_id": 68761796, "body": "One last question: <code>srand((unsigned int) time(NULL) ); char key = rand( ) % 26 + &#39;a&#39;;</code>  i added this lines for random generate alphabet but i got an error :    <code>cipher_text[i]=key[j];</code> subscripted value is not an array, pointer or vector. How can i fix it?"}, {"owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "reply_to_user": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479916718, "post_id": 40767338, "comment_id": 68761930, "body": "You are trying to acces single <code>char</code> <code>key</code> as an array using <code>[]</code> operator. Try it like this: <code>cipher_text[i]=key;</code>"}, {"owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "edited": false, "score": 0, "creation_date": 1479917037, "post_id": 40767338, "comment_id": 68762147, "body": "i added new answer you see the my whole code, then i will delete."}], "tags": [], "owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "is_accepted": false, "score": 0, "last_activity_date": 1479913602, "last_edit_date": 1495540798, "creation_date": 1479911972, "answer_id": 40767338, "question_id": 40767233, "link": "https://stackoverflow.com/questions/40767233/mono-alphabetic-cipher-doesnt-work-correctly/40767338#40767338", "title": "Mono alphabetic cipher doesnt work correctly", "body": "<p>In C, you cannot declare a function inside another function, like you did. \nHere is your code that will compile:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nchar *encryption (char []);\nvoid *decryption (char []);\nchar alpha [26]={'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};\nchar key[26];\n\n\nchar *encryption (char cipher_text[]) {\nint i, val, j;\nprintf(\"enter the unique KEY of 26 character:\");\nscanf(\"%s\", key);\nprintf(\"\\n abcdefghijklmnopqrstuvwxyz \\n\");\nprintf (\"%s\", key);\n\nfor (i=0; i &lt;strlen(cipher_text); i++) \n{\n    for (j=0; j&lt;26; j++)\n    {\n        if (alpha[j]== cipher_text[i]) {\n            cipher_text[i]=key[j];\n            break;\n        }\n    }\n}\n\nprintf (\"your message enc: %s\", cipher_text);\nreturn cipher_text; \n}\n\nint main ()\n{\n    int i, key, choice, flag=0;\n    char *c_text, msg[255];\n    printf(\"\\n Enter plain text:\");\n    scanf (\"%[^\\n]\", msg);\n    encryption(msg);\n    return 0;\n}\n</code></pre>\n\n<p>How to generate random characters is answered <a href=\"https://stackoverflow.com/questions/19724346/generate-random-characters-in-c\">here</a>.</p>\n"}], "owner": {"reputation": 47, "user_id": 7171775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c84a8c6cc00da5a9d43a6b66d97975c?s=128&d=identicon&r=PG&f=1", "display_name": "misshyde", "link": "https://stackoverflow.com/users/7171775/misshyde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1479985207, "creation_date": 1479911669, "last_edit_date": 1479985207, "question_id": 40767233, "link": "https://stackoverflow.com/questions/40767233/mono-alphabetic-cipher-doesnt-work-correctly", "title": "Mono alphabetic cipher doesnt work correctly", "body": "<p>Here is my code. Substitution Cipher in C. But i got an error this line:   <code>char *encryption (char cipher_text[]) {</code> <strong>function definition is not allowed here</strong>. I think probably \"main\" function place not right. How can i fix it?\nAnd by the way how can i generate random alphabet for this code? Thank you so much.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n\nchar *encryption (char cipher_text[]) {\n            int i, val, j;\n            printf(\"\\n abcdefghijklmnopqrstuvwxyz \\n\");  \n</code></pre>\n"}, {"tags": ["c", "bash", "shell"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479911457, "post_id": 40767120, "comment_id": 68758317, "body": "One typically uses <i>arguments</i> to pass information to programs. Can you modify the programs? For example to accept a special argument to specify the location?"}, {"owner": {"reputation": 3546, "user_id": 1987319, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Z7vhG.jpg?s=128&g=1", "display_name": "prabodhprakash", "link": "https://stackoverflow.com/users/1987319/prabodhprakash"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479911630, "post_id": 40767120, "comment_id": 68758440, "body": "No I cannot. For sake of this question, it would be safe to assume that C program cannot accept and arguments"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1479911644, "post_id": 40767120, "comment_id": 68758450, "body": "Why do you think it would be cleaner to somehow access a certain shared location in memory than to read it from a certain file in a common location?"}, {"owner": {"reputation": 3546, "user_id": 1987319, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Z7vhG.jpg?s=128&g=1", "display_name": "prabodhprakash", "link": "https://stackoverflow.com/users/1987319/prabodhprakash"}, "edited": false, "score": 0, "creation_date": 1479911707, "post_id": 40767120, "comment_id": 68758490, "body": "Because, while in memory, it would be more difficult for others to easily access the temporary location. If I create a file, it can still be seen."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1479911863, "post_id": 40767120, "comment_id": 68758579, "body": "Well, you could write the file to be only readable by a certain user and/or group and use that as an authentication mechanism, whereas if the memory was just accessible to anyone (who knows its location) it would only be more obscure, not more secure. Of course you can encrypt either the memory or the file."}, {"owner": {"reputation": 3546, "user_id": 1987319, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Z7vhG.jpg?s=128&g=1", "display_name": "prabodhprakash", "link": "https://stackoverflow.com/users/1987319/prabodhprakash"}, "edited": false, "score": 0, "creation_date": 1479911995, "post_id": 40767120, "comment_id": 68758687, "body": "Yes, it would be more obscure and that should just work for me."}, {"owner": {"reputation": 3546, "user_id": 1987319, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Z7vhG.jpg?s=128&g=1", "display_name": "prabodhprakash", "link": "https://stackoverflow.com/users/1987319/prabodhprakash"}, "edited": false, "score": 0, "creation_date": 1479912192, "post_id": 40767120, "comment_id": 68758812, "body": "But, even if its file with encryption, please could you provide me some lead?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1479912255, "post_id": 40767120, "comment_id": 68758854, "body": "Since you specify Mac (presumably running macOS), you could also consider keychain or user defaults instead of file."}, {"owner": {"reputation": 3546, "user_id": 1987319, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Z7vhG.jpg?s=128&g=1", "display_name": "prabodhprakash", "link": "https://stackoverflow.com/users/1987319/prabodhprakash"}, "edited": false, "score": 0, "creation_date": 1479912318, "post_id": 40767120, "comment_id": 68758886, "body": "I&#39;m not sure how to access user defaults. Do you have any idea around it? Now exploring keychain option as you suggested."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1479912452, "post_id": 40767120, "comment_id": 68758979, "body": "<a href=\"https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/UserDefaults/AboutPreferenceDomains/AboutPreferenceDomains.html#//apple_ref/doc/uid/10000059i-CH2-SW8\" rel=\"nofollow noreferrer\">developer.apple.com/library/content/documentation/Cocoa/&hellip;</a>"}, {"owner": {"reputation": 3546, "user_id": 1987319, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Z7vhG.jpg?s=128&g=1", "display_name": "prabodhprakash", "link": "https://stackoverflow.com/users/1987319/prabodhprakash"}, "edited": false, "score": 0, "creation_date": 1479912653, "post_id": 40767120, "comment_id": 68759115, "body": "This looks awesome, please reply this in answer and I&#39;ll accept it as answer, if no one else provides a more relevant answer suited to my case, i.e. related to memory"}], "answers": [{"tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": true, "score": 1, "last_activity_date": 1479916562, "creation_date": 1479916562, "answer_id": 40768909, "question_id": 40767120, "link": "https://stackoverflow.com/questions/40767120/communicating-between-shell-script-and-c/40768909#40768909", "title": "Communicating between shell script and C", "body": "<p>There are various ways to share the information. Personally I don't find saving to a file to be a problem, since you can use the filesystem's access control to limit access, and/or encrypt the file.</p>\n\n<p>However, specifically on macOS there are some other ways, such as <a href=\"https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/UserDefaults/AboutPreferenceDomains/AboutPreferenceDomains.html#//apple_ref/doc/uid/10000059i-CH2-SW8\" rel=\"nofollow noreferrer\">User Defaults</a> (accessible from command-line with <code>defaults</code>), and Keychain (accessible from command-line with <code>security</code>).</p>\n\n<p>Saving to user defaults is effectively saving to a file (accessible by that user), so for security (other than through obscurity) you would still need to encrypt the data. Meanwhile Keychain is built for storing things securely, but setting up access to it is more difficult (and you may inadvertently grant your shell interpreter permanent access).</p>\n\n<p>Still, it may be worthwhile to try something like:</p>\n\n<pre><code>security add-generic-password -a myUserName -s myService -w '/foo/bar/baz'\n\nsecurity find-generic-password -g -a myUserName -s myService\n</code></pre>\n"}], "owner": {"reputation": 3546, "user_id": 1987319, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Z7vhG.jpg?s=128&g=1", "display_name": "prabodhprakash", "link": "https://stackoverflow.com/users/1987319/prabodhprakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 40768909, "answer_count": 1, "score": 0, "last_activity_date": 1479916562, "creation_date": 1479911311, "question_id": 40767120, "link": "https://stackoverflow.com/questions/40767120/communicating-between-shell-script-and-c", "title": "Communicating between shell script and C", "body": "<p>I've a shell script file which randomly generates a location and copy some files to this randomly generated location.</p>\n\n<p>I also have a different C code that needs to access this randomly generated location to access the copied files. </p>\n\n<p>However, both shell script and C code work independently (in order of shell script and C code). The C code is called by a third application, so it is impossible to pass the location data to C.</p>\n\n<p>How can I securely save this \"randomly generated location\" data somewhere that C code can access. </p>\n\n<p>I am running these scripts on Mac and would prefer a solution that helps keep these data into memory or does not make file at a common location (like /tmp, /var/tmp etc)</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 3, "creation_date": 1479910961, "post_id": 40766959, "comment_id": 68757980, "body": "read line by line??"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1479910972, "post_id": 40766959, "comment_id": 68757988, "body": "Read about <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> and <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"nofollow noreferrer\"><code>strcmp</code></a>. Do note that <code>fgets</code> can add the newline in the buffer."}, {"owner": {"reputation": 9, "user_id": 7168185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcf453189318783207c48a4807fc32ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/7168185/ashish"}, "edited": false, "score": 0, "creation_date": 1479911029, "post_id": 40766959, "comment_id": 68758019, "body": "Haven&#39;t studied strcmp"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1479911054, "post_id": 40766959, "comment_id": 68758038, "body": "is the input source a <b>file</b>?"}, {"owner": {"reputation": 176, "user_id": 4805077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37Y4Z.jpg?s=128&g=1", "display_name": "saeleko", "link": "https://stackoverflow.com/users/4805077/saeleko"}, "edited": false, "score": 1, "creation_date": 1479911064, "post_id": 40766959, "comment_id": 68758048, "body": "Then it&#39;s a good time to learn how to use it, because you&#39;ll need it fairly often when dealing with strings."}, {"owner": {"reputation": 890, "user_id": 7140484, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6e365fa8c41c25d3a9832ac39a66cc97?s=128&d=identicon&r=PG&f=1", "display_name": "user7140484", "link": "https://stackoverflow.com/users/7140484/user7140484"}, "edited": false, "score": 1, "creation_date": 1479911475, "post_id": 40766959, "comment_id": 68758338, "body": "The 3 asterisks are alone in one line or we can have something lile this: &#39;asasasas***rtrtrtrtr&#39; ?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479911866, "post_id": 40766959, "comment_id": 68758581, "body": "@Ashish <i>Haven&#39;t studied strcmp</i>. So what are you waiting ? Study it, it&#39;s not hard."}], "answers": [{"tags": [], "owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "is_accepted": false, "score": 1, "last_activity_date": 1479910990, "creation_date": 1479910990, "answer_id": 40767007, "question_id": 40766959, "link": "https://stackoverflow.com/questions/40766959/how-to-read-multiple-lines-in-string-until-specified-character-in-c/40767007#40767007", "title": "How to read multiple lines in string until specified character in C", "body": "<p>The way I would do this is read one line at a time (with a funcion such as <code>fgets</code> instead of scanf) and then see if the line that you last read is equal to <code>***</code>. You can use use <code>strcmp</code> to do that but you can also do it by hand if you are not allowed to use strcmp for some reason.</p>\n"}], "owner": {"reputation": 9, "user_id": 7168185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcf453189318783207c48a4807fc32ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/7168185/ashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1479923801, "answer_count": 1, "score": -2, "last_activity_date": 1479934583, "creation_date": 1479910826, "last_edit_date": 1479910904, "question_id": 40766959, "link": "https://stackoverflow.com/questions/40766959/how-to-read-multiple-lines-in-string-until-specified-character-in-c", "closed_reason": "Needs details or clarity", "title": "How to read multiple lines in string until specified character in C", "body": "<p>Need to read everything until say *** comes up:</p>\n\n<p>Input:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Hey there\nhow are\nyou\n***\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Hey there\nhow are\nyou\n</code></pre>\n\n<p>Would have used <code>scanf(\"%[^***]s)</code> but can't read all lines at once.\nOnly having basic C knowledge</p>\n"}, {"tags": ["c", "dynamic-allocation"], "comments": [{"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 1, "creation_date": 1479910413, "post_id": 40766726, "comment_id": 68757573, "body": "why arent u able to use malloc?"}, {"owner": {"reputation": 1242, "user_id": 6448768, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92c7e7f2c6e7a8ea428c84f93ec49baa?s=128&d=identicon&r=PG&f=1", "display_name": "Fitzwilliam Bennet-Darcy", "link": "https://stackoverflow.com/users/6448768/fitzwilliam-bennet-darcy"}, "edited": false, "score": 6, "creation_date": 1479910427, "post_id": 40766726, "comment_id": 68757584, "body": "&quot;check all cells untill I get SEGFAULT&quot;. That looks very dodgy to me. How can you guarantee a SEGFAULT?"}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 1, "creation_date": 1479910499, "post_id": 40766726, "comment_id": 68757644, "body": "@CherubimAnand Editted."}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479910529, "post_id": 40766726, "comment_id": 68757658, "body": "@Someprogrammerdude There is no crash at the moment, I get all the values, but I don&#39;t know how to get size of allocated mem."}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 1242, "user_id": 6448768, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92c7e7f2c6e7a8ea428c84f93ec49baa?s=128&d=identicon&r=PG&f=1", "display_name": "Fitzwilliam Bennet-Darcy", "link": "https://stackoverflow.com/users/6448768/fitzwilliam-bennet-darcy"}, "edited": false, "score": 0, "creation_date": 1479910592, "post_id": 40766726, "comment_id": 68757706, "body": "@FitzwilliamBennet-Darcy I guess I could check all the cells in &#39;array&#39; for last to first, and than when i get SEGFAULT I know I reach the memory which is not allocated to me? But that was just my guess."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1479910830, "post_id": 40766726, "comment_id": 68757878, "body": "The length will be the length you asked for (<code>input</code>), unless this couldn&#39;t be satisfied, in which case it will return <code>MAP_FAILED</code> (=-1)."}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1479910925, "post_id": 40766726, "comment_id": 68757950, "body": "@TripeHound How to check how much memory it costs for like 5 int numbers?"}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 0, "creation_date": 1479910947, "post_id": 40766726, "comment_id": 68757966, "body": "Note that the SEGFAULT will only occur after you try to access a page that does not belong to you. It does not have fine enough resolution to stop at a byte. This assumption would break when, for example, two memory allocations used nearby chunks of memory, which is perfectly valid."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 0, "creation_date": 1479911005, "post_id": 40766726, "comment_id": 68758011, "body": "You would then think that the whole page was allocated for your array and would end up overwriting the other allocation, or worse, some of its metadata used by <code>free()</code> and friends."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 5, "creation_date": 1479911223, "post_id": 40766726, "comment_id": 68758162, "body": "XY problem and very wrong approach. Not clear what you try to solve, but provoking undefined behaviour is definitively wrong. It&#39;s like trying to find electrical wires in a wall by hammering nails into the wall until you get sparks. Don&#39;t follow that path any further! What is the problem allocationg the memory with <code>malloc</code>? You should provide more details and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479912570, "post_id": 40766726, "comment_id": 68759053, "body": "@F.Mark the <i>actual</i> size of memory allocated by <code>malloc</code> in bytes is the number you provided as parameter to <code>malloc</code> plus  a certain non specified number of bytes used for internal bookkeeping by the memory manager (typically 8 to 16 bytes or so). But I&#39;m still not sure what you actually are asking or what you are trying to achieve."}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479912962, "post_id": 40766726, "comment_id": 68759351, "body": "@MichaelWalz I&#39;m not using malloc."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479912998, "post_id": 40766726, "comment_id": 68759377, "body": "@F.Mark but you should. Why do you need to use <code>mmap</code>?"}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479913249, "post_id": 40766726, "comment_id": 68759571, "body": "@MichaelWalz Answered below."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479926545, "post_id": 40766726, "comment_id": 68767869, "body": "You should check the return value from <code>mmap()</code>.  You should show how you set <code>fd</code> \u2014 when using MAP_ANONYMOUS, the value should be <code>-1</code> for maximum portability."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 0, "creation_date": 1479911402, "post_id": 40766907, "comment_id": 68758282, "body": "So using mmap I can&#39;t check how much memory was allocated? Beter void using mmap? Or is possible to solve this using mmap?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 0, "creation_date": 1479911752, "post_id": 40766907, "comment_id": 68758515, "body": "@F.Mark <code>mmap</code> or <code>malloc</code> the problem is the same. When you allocate memory <i>you</i> know how much you did allocate, just keep track of that number. That&#39;s it. Period."}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479911874, "post_id": 40766907, "comment_id": 68758590, "body": "@MichaelWalz So this could be solved by storing the default size of memory and than compare it with the size after allocating? Because I want my program to print out like &quot;You allocated 5MB of memory&quot;."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 0, "creation_date": 1479912183, "post_id": 40766907, "comment_id": 68758804, "body": "@F.Mark I don&#39;t understand your question. The quantity of memory allocated is in the <code>input</code> variable. What do you mean by <i>default size of memory</i> ? There is no such thing."}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479912477, "post_id": 40766907, "comment_id": 68758992, "body": "@MichaelWalz Yes, if I input 5, than what would be stored in array? 1, 2, 3, 4, 5? If yes, than I want to know how much MB is that, or I want my program to display how much memory was allocated to it."}, {"owner": {"reputation": 1156, "user_id": 4772791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9e0e4bd022920a359eac1b22749ca6?s=128&d=identicon&r=PG&f=1", "display_name": "arsv", "link": "https://stackoverflow.com/users/4772791/arsv"}, "edited": false, "score": 0, "creation_date": 1479912482, "post_id": 40766907, "comment_id": 68758993, "body": "For mmap, there&#39;s /proc/self/maps but I can&#39;t think of a situation when parsing it would be preferable to just saving the size somewhere."}, {"owner": {"reputation": 159, "user_id": 7200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e060423965c93355a79e8d18b0161626?s=128&d=identicon&r=PG", "display_name": "pi_pi3", "link": "https://stackoverflow.com/users/7200545/pi-pi3"}, "reply_to_user": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 1, "creation_date": 1479912699, "post_id": 40766907, "comment_id": 68759152, "body": "@F.Mark If you input 5, you&#39;ve just allocated 5 bytes, which is roughly 0.000005 MB. What you store in the array doesn&#39;t matter for the size"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 0, "creation_date": 1479912920, "post_id": 40766907, "comment_id": 68759323, "body": "@F.Mark (forget about <code>mmap</code>, you need <code>malloc</code>). If your input is 5 (for storing 5 <code>int</code>s) and you use <code>int* arr = malloc(input * sizeof (int));</code> the system allocates 20 bytes (assuming 32 bit ints) plus an undetermined (but small) number of  bytes for of bookkepping."}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 0, "creation_date": 1479913042, "post_id": 40766907, "comment_id": 68759403, "body": "@pi_pi3 So if I input 2^8 elements, than I allocated 256 bytes?"}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479913120, "post_id": 40766907, "comment_id": 68759465, "body": "@MichaelWalz Well that exactly is the problem. I know how to use malloc, because we have been learning this for the past month. But now we are at mmap and working with it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 0, "creation_date": 1479913614, "post_id": 40766907, "comment_id": 68759819, "body": "@F.Mark you mmap <code>input</code> bytes. So I suppose the <i>actual</i> size used size is <code>input</code> rounded up the the next page boudary (typically 4K), but who cares ?. Still not sure what your actual problem is."}, {"owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479913925, "post_id": 40766907, "comment_id": 68760044, "body": "@MichaelWalz So if I input 100 then I mmaped 100 bytes? The problem is I should input the size of array and than my program should return how much memory was allocated."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 0, "creation_date": 1479914036, "post_id": 40766907, "comment_id": 68760116, "body": "@F.Mark sorry, I&#39;dont get what your <i>actual</i> problem is, nor did anybody else who was dealing your question. I&#39;m giving up."}, {"owner": {"reputation": 159, "user_id": 7200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e060423965c93355a79e8d18b0161626?s=128&d=identicon&r=PG", "display_name": "pi_pi3", "link": "https://stackoverflow.com/users/7200545/pi-pi3"}, "reply_to_user": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "edited": false, "score": 0, "creation_date": 1479914131, "post_id": 40766907, "comment_id": 68760175, "body": "@F.Mark If you input 100, then you&#39;ve mmaped 100 bytes. An int is 4 bytes wide, so you&#39;re gonna have to multiply your input by 4, or rather sizeof(int) to be portable.     int* arr = mmap(0, input*sizeof(int), PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, fd, 0);"}], "tags": [], "owner": {"reputation": 159, "user_id": 7200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e060423965c93355a79e8d18b0161626?s=128&d=identicon&r=PG", "display_name": "pi_pi3", "link": "https://stackoverflow.com/users/7200545/pi-pi3"}, "is_accepted": true, "score": 6, "last_activity_date": 1479910707, "creation_date": 1479910707, "answer_id": 40766907, "question_id": 40766726, "link": "https://stackoverflow.com/questions/40766726/checking-size-of-allocated-memory/40766907#40766907", "title": "Checking size of allocated memory", "body": "<p>You can't check the amount of allocated space in C or check the size of arrays. You need to save it as a variable explicitly by yourself.</p>\n"}], "owner": {"reputation": 33, "user_id": 7080332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a68797c4ecbde187b4c6c93aae047c7?s=128&d=identicon&r=PG&f=1", "display_name": "F. Mark", "link": "https://stackoverflow.com/users/7080332/f-mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1403, "favorite_count": 0, "accepted_answer_id": 40766907, "answer_count": 1, "score": 1, "last_activity_date": 1479913561, "creation_date": 1479910243, "last_edit_date": 1479913561, "question_id": 40766726, "link": "https://stackoverflow.com/questions/40766726/checking-size-of-allocated-memory", "title": "Checking size of allocated memory", "body": "<p>I'm writing a program which accepts the size of an array as an argument which should then dynamically allocate memory for that size.</p>\n\n<p>I want my program to return the size of the memory which was allocated.\nCurrently I'm using <code>argv</code> to read the input value and then <code>mmap</code> for the dynamic allocation. I also use a for loop to display what number is saved in each index of the array.</p>\n\n<p>I know allocating could be done with <code>malloc</code>, but I'm not able to use it.\nI guess I need to start at the last element and check all cells until I get a SEGFAULT signal.</p>\n\n<p>Thanks for your help.</p>\n\n<p>EDIT: \nShort code without libraries etc...</p>\n\n<pre><code>input = (atoi(argv[1]));\nint* arr = mmap(0, input, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, fd, 0);\n\nfor (i = 0; i &lt; input; i++) {\n    arr[i] = i + 1; \n}\n</code></pre>\n"}, {"tags": ["c++", "c", "inline", "extern"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1479909218, "post_id": 40766329, "comment_id": 68756783, "body": "C is not C++ is not C. Don&#39;t add unrelated tags!"}, {"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479909370, "post_id": 40766329, "comment_id": 68756880, "body": "@olaf like you saw, i am not using c++ features. extern &quot;C&quot;  is something that i am using often in my code. <code>foo()</code> most probably will end up using it also. I was talking about c++ because meaby c++ can solve this problem while c can not"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479909458, "post_id": 40766329, "comment_id": 68756941, "body": "Please provide a reference to the C standard where this construct is specified. You also don&#39;t show this in your code. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 5, "creation_date": 1479909464, "post_id": 40766329, "comment_id": 68756946, "body": "The definition of an inline function must be present in the translation unit where it is accessed"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1479909574, "post_id": 40766329, "comment_id": 68757009, "body": "why you don&#39;t want to put <code>func_a</code> <code>func_b</code> into header?"}, {"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1479909582, "post_id": 40766329, "comment_id": 68757013, "body": "@appleapple Right now i am sick of header-only files. And i spend last 3 days just to rewrite my whole project from header-only to .h + .cpp / .c"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1479909655, "post_id": 40766329, "comment_id": 68757066, "body": "isn&#39;t your current code doing it?"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1479909733, "post_id": 40766329, "comment_id": 68757125, "body": "BTW, you can put <code>func_a</code> <code>func_b</code> into some (maybe nested) namespace so the current namespace will not have these two function."}, {"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "edited": false, "score": 0, "creation_date": 1479909751, "post_id": 40766329, "comment_id": 68757134, "body": "sory, i have edited my comment.  Thats the case, i have no idea. If it is doing it, why am i still getting warning : <code>warning : extern inline function &quot;foo&quot; was referenced but not defined</code>"}, {"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "edited": false, "score": 0, "creation_date": 1479909855, "post_id": 40766329, "comment_id": 68757203, "body": "i did not think about namespaces..."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1479910405, "post_id": 40766329, "comment_id": 68757565, "body": "<a href=\"http://stackoverflow.com/q/29796264/1782465\">Related question</a>"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1479911906, "post_id": 40766329, "comment_id": 68758610, "body": "<b>[basic.def.odr]</b> says (paragraph 4) &quot;An inline function shall be defined in every translation unit in which it is odd-used.&quot; You cannot use it in one translation unit but define it in another."}], "answers": [{"comments": [{"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "edited": false, "score": 0, "creation_date": 1479910756, "post_id": 40766760, "comment_id": 68757830, "body": "Thank you very much. I was hoping that i could leave my function definition inside src file. Therefore is there any way to make <code>func_a()</code> and <code>func_b()</code> visible to the <code>foo()</code> from src file ?  BTW this code will end up with <code>__forceinline__</code> not <code>inline</code> key-word soo i will be able to force my compiler to inline it everywhere."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "edited": false, "score": 0, "creation_date": 1479910946, "post_id": 40766760, "comment_id": 68757963, "body": "@cukier9a7b5 Can you simply declare (not define) the functions in the header file?"}, {"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "edited": false, "score": 0, "creation_date": 1479911179, "post_id": 40766760, "comment_id": 68758124, "body": "I will end up then with header-only library. And i dont like it. Also i will declare many symbols, that i will not use therefor they should not be visible outside of <code>file.cpp</code>, I am thinking here about code - encapsulation."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 3, "last_activity_date": 1479914193, "last_edit_date": 1479914193, "creation_date": 1479910350, "answer_id": 40766760, "question_id": 40766329, "link": "https://stackoverflow.com/questions/40766329/extern-inline-function-was-referenced-but-not-defined/40766760#40766760", "title": "extern inline function was referenced but not defined", "body": "<p>In C++, the <code>inline</code> keyword means this:</p>\n\n<ul>\n<li>The function's body <em>must</em> be present in every source file which uses that function.</li>\n<li>The function's \"bodies\" in all source files must be token-by-token and entity-by-entity identical.</li>\n<li>The compiler&amp;linker must make sure they're fine with the function having these \"multiple bodies\"</li>\n</ul>\n\n<p>That's all that it does. In practice, this means that it enables <em>and forces</em> you to put the function body into a header file.</p>\n\n<p>The keyword itself has nothing to do with function inlining, per se. It's just that if the <em>compiler</em> wants to be able to inline the function's body, it must have access to it when compiling the calling code; in other words, the function's body must be in the same source file or in a header file included by that source file.</p>\n\n<p>If you want to enable the <em>compiler</em> to inline the function in all call sites, and these call sites happen in more than one source file, you have to put the function into a header file (and mark it as <code>inline</code>).</p>\n\n<p>On the other hand, it is also possible for the <em>linker</em> to do inlining, called Link-Time Code Generation or Whole Program Optimisation or something similar (depending on your toolchain's vendor). Enabling this will</p>\n\n<ol>\n<li>extend your build times, and</li>\n<li>allow the linker to inline functions into call sites <em>across source files</em></li>\n</ol>\n\n<p>So to inline the function, you have two options. Either put the function into a header file, or enable and rely on link-time optimisation to inline it for you.</p>\n\n<hr>\n\n<p>In your particular case, to use <code>__forceinline__</code>, you'll have define <code>foo</code> in a header file. This requires the definition of <code>foo</code> to see declarations of <code>func_a</code> and <code>func_b</code>. To prevent namespace polution, you can declare these functions within the scope of <code>foo</code>:</p>\n\n<pre><code>inline void foo(int a, double b) { // function definition\n    int func_a(int, int, int);\n    double func_b(double, double, double);\n\n    //...\n    int myInt = func_a(a, 2, 3);\n    //...\n    double myDouble = func_b(1.5f, b, 3.5f);\n    //...\n}\n</code></pre>\n"}], "owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3426, "favorite_count": 0, "accepted_answer_id": 40766760, "answer_count": 1, "score": 1, "last_activity_date": 1479917436, "creation_date": 1479909144, "last_edit_date": 1495540379, "question_id": 40766329, "link": "https://stackoverflow.com/questions/40766329/extern-inline-function-was-referenced-but-not-defined", "title": "extern inline function was referenced but not defined", "body": "<p>I have a function (lets call it <code>void foo(void) {}</code>) that I wish to be inline.But I defined it inside .cpp file.<br>\nI can not move the function to the header because it is using other functions from .cpp. </p>\n\n<p><br> <Br>\n<strong>EDIT:</strong> <br>\ncode below just like real one is not using c++ features. I can clearly add: </p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\"\n#endif\n</code></pre>\n\n<p>If i would like to convert code below to c99 i need only to change my project properties (or makefile if you like) <strong>NOT THE CODE</strong>. I am asking also about c++ because meaby it can solve my problem while c99 can not. <br>\n<strong>therefore C and C++ tags in my question are justified. the code is portable</strong> <br> \nsee: <a href=\"https://stackoverflow.com/questions/1292138/when-to-use-extern-c-in-c\">When to use extern &quot;C&quot; in C++?</a></p>\n\n<p><br> <Br>\n<strong>EDIT #2</strong> <Br>\nOk i understand that i must put <code>foo()</code> definition inside header file. How can I call <code>func_a()</code> and <code>func_b()</code> from <code>foo()</code> without moving them to the header file? Is there any workaround?</p>\n\n<p><br> <Br>\nExample <Br>\n<strong>file.c / .cpp:</strong></p>\n\n<pre><code>int    func_a (int a,    int b,    int c)    {/*...*/};\ndouble func_b (double a, double b, double c) {/*...*/};\n\nvoid   foo    (int a, double b) { // unction definition\n    //...\n    int myInt = func_a(a, 2, 3);\n    //...\n    double myDouble = func_b(1.5f, b, 3.5f);\n    //...\n}\n</code></pre>\n\n<p><strong>file.h:</strong></p>\n\n<pre><code>// Something before.\n\nvoid foo (int a, double b); // function declaration\n\n// Something after.\n</code></pre>\n\n<p><br> <br>\n<strong>I want to point out:</strong></p>\n\n<ul>\n<li>I am working with Visual Studio 2015.</li>\n<li>I am writing relatively big project ( ~ 7000 Lines Of Code ). It is simulation of physical system.</li>\n<li><code>file.h</code> is included to many other compilation units.</li>\n<li><code>foo(int, double)</code> is small and it calls other functions from <code>file.cpp</code></li>\n<li>I want to make <code>foo(int, double)</code> inline because of optimization reasons ( I will end up using <code>__forceinline__</code>) </li>\n<li>I am calling <code>foo()</code> many, many times across my program. Also it is used inside few while loops ( 100k + iterations each ) so it is expansive to let this symbol <code>foo()</code> be not inline.</li>\n<li>I am sick of header-only libraries. </li>\n</ul>\n\n<p><br><br>\n<strong>I tried to:</strong> <Br>\n<strong>file.c / .cpp:</strong></p>\n\n<pre><code>extern inline\nvoid   foo    (int a, double b) {\\*...*\\}; // Definition\n</code></pre>\n\n<p><strong>file.h:</strong></p>\n\n<pre><code>extern inline\nvoid   foo    (int a, double b); // Declaration\n</code></pre>\n\n<p>but I keep getting an warning: <br></p>\n\n<pre><code>warning : extern inline function \"foo\" was referenced but not defined\n</code></pre>\n\n<p>And i do not understand why i am getting this warning.</p>\n\n<p><br><br>\n<strong>Is there any way to:</strong> </p>\n\n<ul>\n<li>keep definition of <code>foo()</code> inside my .cpp file ? But still make it inline</li>\n<li>move <code>foo()</code> to the <code>file.h</code>, keep <code>func_a()</code> and <code>func_b()</code> inside     <code>file.cpp</code>, but make <code>func_a()</code> and <code>func_b()</code> symbols \"visible\" to the <code>foo()</code> ( ! and only to the <code>foo()</code> ! ) from <code>file.cpp</code></li>\n<li>any other workaround?</li>\n</ul>\n\n<p><br>\nSory I am still learning cpp and I dont know if my question is clear, or is it even possible to make function inline from .cpp file.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 2307, "user_id": 1264727, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a1fbb1447f3c3c2bc500e2b744ee6c9?s=128&d=identicon&r=PG", "display_name": "DUman", "link": "https://stackoverflow.com/users/1264727/duman"}, "edited": false, "score": 2, "creation_date": 1479909115, "post_id": 40766249, "comment_id": 68756717, "body": "You should be showing your code in the question, not just asking for examples. Do you have a page with the execute permissions? What is the code of &quot;some binary&quot; you&#39;re trying to run? What happens when you try to run it? Nothing, segfault? Please add considerably more details."}, {"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1479909297, "post_id": 40766249, "comment_id": 68756835, "body": "Is it necessary to be done like this? The normal way to start a program from another process would be to use one of the functions of the exec() family ..."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1479919507, "post_id": 40766249, "comment_id": 68763822, "body": "If you are trying to write a program that takes &quot;plug-ins&quot;, the C library has you covered: build the plugins as shared objects rather than executables, then use <a href=\"https://linux.die.net/man/3/dlopen\" rel=\"nofollow noreferrer\"><code>dlopen</code> and <code>dlsym</code></a> to load and call them. If you are trying to generate machine code on the fly and execute it (a &quot;just-in-time&quot; compiler or similar), you&#39;re probably running foul of the <a href=\"https://en.wikipedia.org/wiki/W%5EX\" rel=\"nofollow noreferrer\">W^X policy</a>; you have to write the code into memory and then use <a href=\"https://linux.die.net/man/2/mprotect\" rel=\"nofollow noreferrer\"><code>mprotect</code></a> to make it executable. The C library won&#39;t help with that."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1479919620, "post_id": 40766249, "comment_id": 68763891, "body": "And if you want to write your own executable loader by hand, you need to read &quot;<a href=\"https://www.goodreads.com/book/show/1103509.Linkers_and_Loaders\" rel=\"nofollow noreferrer\">Linkers and Loaders</a>.&quot;  That&#39;s an entire book, and it&#39;s only a starting point."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1480001308, "post_id": 40766249, "comment_id": 68802257, "body": "the <code>mmap()</code> function can only allocate memory pages with a readable and/or writable attributes, not executable attribute. So, naturally, cannot execute anything in that <code>mmap</code>d memory area"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1480101703, "post_id": 40766249, "comment_id": 68842869, "body": "@user3629249 That&#39;s not true, <code>PROT_READ|PROT_EXEC</code> works just fine.  The dynamic linker does it all the time.  Run <code>strace &#47;bin&#47;ls</code> and see for yourself.  (On current-generation kernels the call will fail if you ask for <i>write</i> and execute privileges simultaneously, but that&#39;s a recently-added security restriction.)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1480114416, "post_id": 40766249, "comment_id": 68846484, "body": "@zwol,  Your correct about PROT_EXEC.  I have never used that particular parameter, so had forgotten about it."}], "answers": [{"comments": [{"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 0, "creation_date": 1479920075, "post_id": 40767066, "comment_id": 68764197, "body": "Does that actually work? I&#39;ve never tried but my guess would be it would die at the first relocation (which may be needed well before even calling <code>main()</code>)."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 0, "creation_date": 1479920285, "post_id": 40767066, "comment_id": 68764323, "body": "@TheVee It would be necessary to do all of the work normally done by <code>ld.so</code>, yes."}, {"owner": {"reputation": 2307, "user_id": 1264727, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a1fbb1447f3c3c2bc500e2b744ee6c9?s=128&d=identicon&r=PG", "display_name": "DUman", "link": "https://stackoverflow.com/users/1264727/duman"}, "reply_to_user": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 0, "creation_date": 1479990300, "post_id": 40767066, "comment_id": 68795175, "body": "@TheVee It will probably succeed on something as simple as a statically-linked Hello World. In general, it&#39;s going to segfault very soon though."}], "tags": [], "owner": {"reputation": 2307, "user_id": 1264727, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a1fbb1447f3c3c2bc500e2b744ee6c9?s=128&d=identicon&r=PG", "display_name": "DUman", "link": "https://stackoverflow.com/users/1264727/duman"}, "is_accepted": false, "score": 3, "last_activity_date": 1479911162, "creation_date": 1479911162, "answer_id": 40767066, "question_id": 40766249, "link": "https://stackoverflow.com/questions/40766249/how-to-exec-mmaped-binary-code-right-from-the-allocated-memory/40767066#40767066", "title": "How to exec mmaped binary/code right from the allocated memory", "body": "<p>While your question remains confusing even after the edit, I think you've said enough to identify what you're doing wrong.</p>\n\n<blockquote>\n  <p>any binary(c hello world)</p>\n</blockquote>\n\n<p>You cannot execute a <code>mmap</code>ed binary file in the same way that the OS executes it. You're running on Linux so your hello world is likely a binary in the ELF format. Linux knows how to read and execute ELF binaries, your program doesn't. The ELF <a href=\"http://man7.org/linux/man-pages/man5/elf.5.html\" rel=\"nofollow noreferrer\">starts with a header</a> and so your memory-mapped data also starts with the header. Which is not executable code. The header starts with <code>0x7F</code>, which corresponds to the <code>jg</code> instruction on x86, so attempting to 'execute' an ELF header as executable code would possibly (depending on the status of your flags) immediately jump to a garbage address built up of the next bytes of the header.</p>\n\n<p>If you want to run code like this, you'll need to parse the ELF file, find its entry point (or, likely, the <code>.init</code> section first) and start executing code from there. You should certainly feel free to do this as an exercise, for learning purposes, but that is not the normal way of executing another program from your own. A typical approach would be to use the <code>fork</code> and <code>exec</code> calls instead. That lets Linux handle the technicalities of launching the program.</p>\n"}, {"tags": [], "owner": {"reputation": 1156, "user_id": 4772791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9e0e4bd022920a359eac1b22749ca6?s=128&d=identicon&r=PG&f=1", "display_name": "arsv", "link": "https://stackoverflow.com/users/4772791/arsv"}, "is_accepted": false, "score": 1, "last_activity_date": 1479911748, "last_edit_date": 1479911748, "creation_date": 1479911358, "answer_id": 40767136, "question_id": 40766249, "link": "https://stackoverflow.com/questions/40766249/how-to-exec-mmaped-binary-code-right-from-the-allocated-memory/40767136#40767136", "title": "How to exec mmaped binary/code right from the allocated memory", "body": "<p>It's next to impossible to exec into an arbitrary memory image.\nELF files must be mmaped in a particular way in the process address space, almost never as a contiguous image of the underlying file.</p>\n\n<p>The closest workable approach I can think of is saving the image into a (possibly nameless) file and exec'ing that file via <code>execveat(fd, \"\", ...)</code>. Check execveat(2) around where they talk about empty pathname, and open(2) on O_TMPFILE.</p>\n\n<p>A named temp file and a regular execve(2) would work as well, as long as the gap between close/munmap and execve when the file may be changed is not an issue.</p>\n\n<p>Another idea would be to do ELF loading completely in userspace, setting up the proper address space for the new process, calling LD and such. Definitely not easy. Does not require any execve(2) call, just fork and work from there. Because execve(2) won't be used, certain things like O_CLOEXEC handling and un-mmaping extra memory will require non-trivial workarounds.</p>\n"}], "owner": {"reputation": 129, "user_id": 7200348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1400cd8c5aff064db13e15a70725f518?s=128&d=identicon&r=PG&f=1", "display_name": "D. Snow", "link": "https://stackoverflow.com/users/7200348/d-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1231, "favorite_count": 1, "closed_date": 1479994902, "answer_count": 2, "score": 0, "last_activity_date": 1479911748, "creation_date": 1479908901, "last_edit_date": 1479909928, "question_id": 40766249, "link": "https://stackoverflow.com/questions/40766249/how-to-exec-mmaped-binary-code-right-from-the-allocated-memory", "closed_reason": "Not suitable for this site", "title": "How to exec mmaped binary/code right from the allocated memory", "body": "<p>I have some binary, I use mmap() to write it into memory. Then i try to exec it right from the allocated memory, but till now it is no results. Can anyone help? Examples are appreciated)\nI am on Ubuntu,\nany binary(c hello world), its size file_size, its descriptor fd and then:</p>\n\n<pre><code>addr = mmap(NULL, file_size, PROT_READ | PROT_EXEC, MAP_PRIVATE, fd, pa_offset);\n           if (addr == MAP_FAILED)\n               handle_error(\"mmap\");\n</code></pre>\n\n<p>so i dont know how to exec it</p>\n"}, {"tags": ["c", "sorting", "swap", "doubly-linked-list"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479908538, "post_id": 40766060, "comment_id": 68756329, "body": "Don&#39;t add unrelated tags!"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479908544, "post_id": 40766060, "comment_id": 68756334, "body": "Did you try using the debugger?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1479908557, "post_id": 40766060, "comment_id": 68756346, "body": "Can you fix the formatting, please? There&#39;s even a preview before you post."}, {"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479908724, "post_id": 40766060, "comment_id": 68756458, "body": "Yes i tried to debug this but I couldn&#39;t find the error."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1479909472, "post_id": 40766060, "comment_id": 68756950, "body": "Your <code>swap</code> function needs to deal with the special cases when <code>node1</code> and <code>node2</code> are adjacent."}, {"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479909777, "post_id": 40766060, "comment_id": 68757153, "body": "Yes i was doing that initially but i changed it because node 2 wansn&#39;t updating."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1479915063, "post_id": 40766060, "comment_id": 68760795, "body": "Slightly unrelated to your problem, but you could simplify the interface to <code>swap</code> by passing pointers to the nodes, rather than pointers to pointers to the nodes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479929129, "post_id": 40766060, "comment_id": 68769188, "body": "For swapping two arbitrary nodes in a doubly-linked list, see <a href=\"http://stackoverflow.com/q/32578455\">SO 32578455</a>.  It is at least addressing the same question.  I have an answer for that that I didn&#39;t submit.  I concluded that you have to ensure that code swaps A and B correctly in the following list variants: P1 -&gt; A -&gt; P2 -&gt; B -&gt; P3; P1 -&gt; A -&gt; B -&gt; P2; P1 -&gt; A -&gt; B; A -&gt; B -&gt; P2; A -&gt; B (where each Pn can be an arbitrarily long (but non-empty) lists of nodes)."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479916236, "post_id": 40767687, "comment_id": 68761596, "body": "Thank you i&#39;m working on it. If i got stuck i&#39;ll ask for example."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479919504, "post_id": 40767687, "comment_id": 68763819, "body": "@AlexSmith - I updated my answer to show a diagram for how this works. The diagram doesn&#39;t show where the temp pointers are needed."}, {"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479921143, "post_id": 40767687, "comment_id": 68764837, "body": "@rcgldr- I&#39;ve updated my code as well. If you can take a look give me some guide line please."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479929889, "post_id": 40767687, "comment_id": 68769533, "body": "@AlexSmith - I updated my answer. I didn&#39;t test the example code, but it should work."}, {"owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "edited": false, "score": 0, "creation_date": 1479932159, "post_id": 40767687, "comment_id": 68770702, "body": "@ rcgldr- Thankyou i&#39;ll try to do both ways. I aprreciate your help."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 1, "last_activity_date": 1479929594, "last_edit_date": 1479929594, "creation_date": 1479912893, "answer_id": 40767687, "question_id": 40766060, "link": "https://stackoverflow.com/questions/40766060/c-swapping-with-doubly-linked-list/40767687#40767687", "title": "C swapping with doubly linked list", "body": "<p>To handle both the cases where nodes are adjacent or not adjacent with common code, first swap the (external) pointers to the two nodes, then swap the two node's (internal) pointers. This will end up rotating the pointers as needed if the nodes are adjacent, and swapping pairs of pointers if the nodes are not adjacent. Note if the nodes are adjacent, one of the \"external\" pointers will be one of the \"other\" nodes internal pointers, and vice versa, but it still works out: swap \"external\" pointers first, then \"internal\" pointers next.</p>\n\n<p>Be sure to use temporary pointers (technically pointers to node pointers) as needed when doing the swaps, otherwise you overwrite node pointers part way through a swap operation. If stuck, I can update with an example later.</p>\n\n<p><em>update</em> - diagram type example to show what happens, using a single linked list with just next pointers as an example. Assume you start with 5 nodes, 0 to 4:</p>\n\n<pre><code>0-&gt;1-&gt;2-&gt;3-&gt;4\n</code></pre>\n\n<p>swap 1 and 3, 0-> and 2-> are the external pointers, 1-> and 3-> are internal. First swap 0-> and 2-></p>\n\n<pre><code>0-&gt;3\n2-&gt;1\n</code></pre>\n\n<p>then swap 1-> and 3-></p>\n\n<pre><code>1-&gt;4\n3-&gt;2\n</code></pre>\n\n<p>resulting in</p>\n\n<pre><code>0-&gt;3-&gt;2-&gt;1-&gt;4\n</code></pre>\n\n<p>Starting from 0->1->2->3->4 swap 1 and 2, 0-> and 1-> are external, 1-> and 2-> are internal. Swap 0-> and 1-></p>\n\n<pre><code>0-&gt;2\n1-&gt;1\n</code></pre>\n\n<p>then swap 1-> and 2-></p>\n\n<pre><code>1-&gt;3\n2-&gt;1\n</code></pre>\n\n<p>resulting in</p>\n\n<pre><code>0-&gt;2-&gt;1-&gt;3-&gt;4\n</code></pre>\n\n<p>Example swap code. This code assume that there is head pointer to point to the first node, and a tail pointer to point to the last node (or NULL).</p>\n\n<pre><code>struct student_record_node *Head = &amp;firstnode;  /* head */\nstruct student_record_node *Tail = &amp;lastnode;   /* tail (NULL is ok) */\n\n/* swap function */\n\nvoid swap(struct student_record_node **Head,\n          struct student_record_node **Tail,\n          struct student_record_node *node1,\n          struct student_record_node *node2)\n{\nstruct student_record_node **en1 /* &amp; external next ptr to 1 */\nstruct student_record_node **en2 /* &amp; external next ptr to 2 */\nstruct student_record_node **ep1 /* &amp; external prev ptr to 1 */\nstruct student_record_node **ep2 /* &amp; external prev ptr to 2 */\nstruct student_record_node  *tmp /* temp node ptr */\n    en1 = (node1-&gt;prev_ != NULL) ? &amp;(node1-&gt;prev_-&gt;next_) : Head;\n    en2 = (node2-&gt;prev_ != NULL) ? &amp;(node2-&gt;prev_-&gt;next_) : Head;\n    ep1 = (node1-&gt;next_ != NULL) ? &amp;(node1-&gt;next_-&gt;prev_) : Tail;\n    ep2 = (node2-&gt;next_ != NULL) ? &amp;(node2-&gt;next_-&gt;prev_) : Tail;\n    /* swap en1, en2 */\n    tmp = *en1;\n    *en1 = *en2;\n    *en2 = tmp;\n    /* swap ep1, ep2 */\n    tmp = *ep1;\n    *ep1 = *ep2;\n    *ep2 = tmp;\n    /* swap n1, n2 next_ */\n    tmp = node1-&gt;next_;\n    node1-&gt;next_ = node2-&gt;next_;\n    node2-&gt;next_ = tmp;\n    /* swap n1, n2 prev_ */\n    tmp = node1-&gt;prev_;\n    node1-&gt;prev_ = node2-&gt;prev_;\n    node2-&gt;prev_ = tmp;\n}\n\n    /* call to swap function */\n    swap(&amp;Head, &amp;Tail, node1, node2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1659, "user_id": 8652920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/424fc9eef2ec4e556d087276249f136b?s=128&d=identicon&r=PG&f=1", "display_name": "notacorn", "link": "https://stackoverflow.com/users/8652920/notacorn"}, "edited": false, "score": 0, "creation_date": 1606156389, "post_id": 40771628, "comment_id": 114870661, "body": "pretty sure this seg faults when a node is head"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 1659, "user_id": 8652920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/424fc9eef2ec4e556d087276249f136b?s=128&d=identicon&r=PG&f=1", "display_name": "notacorn", "link": "https://stackoverflow.com/users/8652920/notacorn"}, "edited": false, "score": 0, "creation_date": 1606165795, "post_id": 40771628, "comment_id": 114874671, "body": "@notacorn Please explain. The output is fine, and the <code>dump</code> function would have indicated any bad links."}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 1, "last_activity_date": 1479925113, "creation_date": 1479925113, "answer_id": 40771628, "question_id": 40766060, "link": "https://stackoverflow.com/questions/40766060/c-swapping-with-doubly-linked-list/40771628#40771628", "title": "C swapping with doubly linked list", "body": "<p>There are two main problems in the original code, and possibly a third:</p>\n\n<ol>\n<li>The <code>swap</code> function does not work when the nodes being swapped are adjacent, but the <code>sort</code> function only swaps adjacent nodes!</li>\n<li>After swapping two nodes <code>ptr1</code> and <code>ptr1-&gt;next_</code>, the <code>sort</code> function checks if the first node being swapped, <code>ptr1</code>, was at the head of the list, and if so makes <code>ptr1-&gt;next_</code> the head of the list. However, the two nodes are now in reverse order, so it should make <code>ptr1-&gt;prev_</code> the head of the list in this case.</li>\n<li>Comparison functions usually return a negative value if the first argument is less than the second argument, zero if they are equal, or a positive value if the first argument is greater than the second argument. The <code>sort</code> function currently seems to expect the comparison function to return 0 if the first argument is less than or equal to the second argument. This may or may not be a bug, but it is unconventional.</li>\n</ol>\n\n<p>Additionally, the interface to the <code>swap</code> function can be simplified as there is no need to pass pointers to pointers to the nodes.</p>\n\n<p>The following example program fixes the above problems:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct student_record_node {\n    struct student_record_node *next_;\n    struct student_record_node *prev_;\n    const char *name;\n    unsigned int age;\n};\n\nvoid swap(struct student_record_node *node1, struct student_record_node *node2)\n{\n    struct student_record_node *ptr1, *ptr2;\n\n    /* Swap the 'next_' pointers, taking adjacency into account. */\n    ptr1 = node1 == node2-&gt;next_ ? node2 : node2-&gt;next_;\n    ptr2 = node2 == node1-&gt;next_ ? node1 : node1-&gt;next_;\n    node1-&gt;next_ = ptr1;\n    node2-&gt;next_ = ptr2;\n    /* Swap the 'prev_' pointers, taking adjacency into account. */\n    ptr1 = node1 == node2-&gt;prev_ ? node2 : node2-&gt;prev_;\n    ptr2 = node2 == node1-&gt;prev_ ? node1 : node1-&gt;prev_;\n    node1-&gt;prev_ = ptr1;\n    node2-&gt;prev_ = ptr2;\n    /* Fix the links from other nodes. */\n    if (node1-&gt;next_) node1-&gt;next_-&gt;prev_ = node1;\n    if (node1-&gt;prev_) node1-&gt;prev_-&gt;next_ = node1;\n    if (node2-&gt;next_) node2-&gt;next_-&gt;prev_ = node2;\n    if (node2-&gt;prev_) node2-&gt;prev_-&gt;next_ = node2;\n}\n\nint compare_ages(const struct student_record_node *a,\n        const struct student_record_node *b)\n{\n    return a-&gt;age &lt; b-&gt;age ? -1 : a-&gt;age &gt; b-&gt;age ? 1 : 0;\n}\n\nint compare_names(const struct student_record_node *a,\n        const struct student_record_node *b)\n{\n    return strcmp(a-&gt;name, b-&gt;name);\n}\n\nvoid sort(struct student_record_node **recordsHead,\n        int(*compare_fcn)(const struct student_record_node *,\n                const struct student_record_node *))\n{\n    int swapped;\n    struct student_record_node *ptr1;\n    struct student_record_node *lptr = NULL;\n\n    if (*recordsHead == NULL)\n        return;\n\n    do\n    {\n        swapped = 0;\n        ptr1 = *recordsHead;\n\n        while (ptr1-&gt;next_ != lptr)\n        {\n            if (compare_fcn(ptr1, ptr1-&gt;next_) &gt; 0)\n            {\n                printf(\"swapping (%s:%u &lt;=&gt; %s:%u)\\n\", ptr1-&gt;name, ptr1-&gt;age,\n                        ptr1-&gt;next_-&gt;name, ptr1-&gt;next_-&gt;age);\n                swap(ptr1, ptr1-&gt;next_);\n                if (ptr1 == *recordsHead)\n                {\n                    /* ptr1 is now the second node. */\n                    (*recordsHead) = ptr1-&gt;prev_;\n                }\n                swapped = 1;\n            }\n            else\n            {\n                ptr1 = ptr1-&gt;next_;\n            }\n        }\n        lptr = ptr1;\n    }\n    while (swapped);\n}\n\nvoid dump(const struct student_record_node *students)\n{\n    const struct student_record_node *prev_ = NULL;\n    unsigned int pos = 0;\n\n    while (students)\n    {\n        if (students-&gt;prev_ != prev_)\n        {\n            printf(\"[%u] ** Bad prev_ link!\\n\", pos);\n        }\n        printf(\"[%u] %s:%u\\n\", pos, students-&gt;name, students-&gt;age);\n        pos++;\n        prev_ = students;\n        students = students-&gt;next_;\n    }\n}\n\nint main(void)\n{\n    static struct student_record_node testdata[] =\n    {\n        { testdata + 1, NULL, \"susan\", 20 },\n        { testdata + 2, testdata + 0, \"bill\", 21 },\n        { testdata + 3, testdata + 1, \"joe\", 18 },\n        { testdata + 4, testdata + 2, \"tom\", 19 },\n        { NULL, testdata + 3, \"karen\", 21 },\n    };\n    struct student_record_node *students = testdata;\n\n    puts(\"Original order:\");\n    dump(students);\n    puts(\"By name:\");\n    sort(&amp;students, compare_names);\n    dump(students);\n    puts(\"By age:\");\n    sort(&amp;students, compare_ages);\n    dump(students);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Original order:\n[0] susan:20\n[1] bill:21\n[2] joe:18\n[3] tom:19\n[4] karen:21\nBy name:\nswapping (susan:20 &lt;=&gt; bill:21)\nswapping (susan:20 &lt;=&gt; joe:18)\nswapping (tom:19 &lt;=&gt; karen:21)\nswapping (susan:20 &lt;=&gt; karen:21)\n[0] bill:21\n[1] joe:18\n[2] karen:21\n[3] susan:20\n[4] tom:19\nBy age:\nswapping (bill:21 &lt;=&gt; joe:18)\nswapping (karen:21 &lt;=&gt; susan:20)\nswapping (karen:21 &lt;=&gt; tom:19)\nswapping (bill:21 &lt;=&gt; susan:20)\nswapping (bill:21 &lt;=&gt; tom:19)\nswapping (susan:20 &lt;=&gt; tom:19)\n[0] joe:18\n[1] tom:19\n[2] susan:20\n[3] bill:21\n[4] karen:21\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6466951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7f804193871bd9cbe7c6399fadcc75?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6466951/alex-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 40771628, "answer_count": 2, "score": 0, "last_activity_date": 1479929594, "creation_date": 1479908401, "last_edit_date": 1479921052, "question_id": 40766060, "link": "https://stackoverflow.com/questions/40766060/c-swapping-with-doubly-linked-list", "title": "C swapping with doubly linked list", "body": "<p>I'm trying to swap the position of nodes in a linked list\nand later on sorting with a sort function. I'm getting a logical error in either one of these functions. When I run the program it goes in infinite loop.</p>\n\n<p>updated code</p>\n\n<pre><code>int adjuctNodes(struct student_record_node** n1, struct student_record_node** n2)\n\n{\n      struct student_record_node* prev_;\n      struct student_record_node* next_;  \n      return((*n1)-&gt;next_==(*n2) &amp;&amp; (*n2)-&gt;prev_ == (*n1))||\n      ( (*n1)-&gt;prev_ ==(*n2) &amp;&amp; (*n2)-&gt;next_ == (*n1) );\n}\n\nvoid updateOuterPointer(struct student_record_node** n)\n\n{\n     struct student_record_node* next_;\n     struct student_record_node* prev_;\n     if((*n)-&gt;next_!=NULL)\n             (*n)-&gt;prev_-&gt;next_=(*n);\n     if((*n)-&gt;next_ !=NULL)\n             (*n)-&gt;next_-&gt;prev_=(*n);\n}\n\n\n/*Swaping */\n\nvoid swap(struct student_record_node** node1, struct student_record_node** node2)\n\n{\n\n\n          struct student_recod_node* prev_;\n          struct student_recod_node* next_;\n          struct student_record_node* ptr=(*node1)-&gt;next_;\n\n             if(adjucntNodes((node1),(node2)))\n     {\n             (node1)-&gt;prev_=pnode2;\n             (node2)-&gt;prev_=pnode0;\n             (node1)-&gt;next_=pnode3;\n             (node2)-&gt;next_=pnode1;\n\n     }else{\n\n             (node1)-&gt;prev_=pnode1;\n             (node2)-&gt;prev_=pnode0;\n             (node1)-&gt;next_=pnode3;\n             (node2)-&gt;next_=pnode2;\n     }\n\n     updateOuterPointer((node1));\n     updateOuterPointer((node2));\n\n} \n /*Sorting linked list*/\n\n\nvoid sort(struct student_record_node**recordsHead,int(*compare_fcn)(struct  \nstudent_record_node*,struct student_record_node*))\n\n {\n\n         int swapped;\n         struct student_record_node *ptr1=*recordsHead;\n         struct student_record_node *lptr = NULL;\n\n         if (ptr1 == NULL)\n                 return;\n\n         do\n         {\n                 swapped = 0;\n                 ptr1 = *recordsHead;\n\n\n                 while (ptr1-&gt;next_ != lptr)\n                 {\n                              if (compare_fcn(ptr1,ptr1-&gt;next_))\n                         {\n                                 printf(\"swapping\\n\");\n                                swap(&amp;ptr1,&amp;ptr1-&gt;next_);\n                                if(ptr1==*recordsHead)\n                                 {\n                                    (*recordsHead)=ptr1-&gt;next_;\n                                 }\n                                 swapped=1;\n\n                         }\n\n                         else ptr1 = ptr1-&gt;next_;\n                 }\n                    lptr = ptr1;\n                         ;\n         }\n         while (swapped);\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "apache", "makefile", "thrift"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1479908547, "post_id": 40766055, "comment_id": 68756338, "body": "<a href=\"http://stackoverflow.com/questions/32944390/what-is-the-rationale-for-not-including-strdup-in-the-c-standard\" title=\"what is the rationale for not including strdup in the c standard\">stackoverflow.com/questions/32944390/&hellip;</a>"}, {"owner": {"reputation": 12067, "user_id": 499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc0612ec9a2b6af96500cc6e4bfdc7c?s=128&d=identicon&r=PG", "display_name": "JensG", "link": "https://stackoverflow.com/users/499466/jensg"}, "edited": false, "score": 0, "creation_date": 1479910807, "post_id": 40766055, "comment_id": 68757867, "body": "Anything related in  config.log?"}, {"owner": {"reputation": 12067, "user_id": 499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc0612ec9a2b6af96500cc6e4bfdc7c?s=128&d=identicon&r=PG", "display_name": "JensG", "link": "https://stackoverflow.com/users/499466/jensg"}, "edited": false, "score": 0, "creation_date": 1479911048, "post_id": 40766055, "comment_id": 68758031, "body": "Is that cygwin environment? Woudl be nice to know ... in that case look at <a href=\"https://issues.apache.org/jira/browse/THRIFT-2800\" rel=\"nofollow noreferrer\">THRIFT-2800</a>"}, {"owner": {"reputation": 12067, "user_id": 499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc0612ec9a2b6af96500cc6e4bfdc7c?s=128&d=identicon&r=PG", "display_name": "JensG", "link": "https://stackoverflow.com/users/499466/jensg"}, "edited": false, "score": 0, "creation_date": 1479911377, "post_id": 40766055, "comment_id": 68758264, "body": "... or use the <a href=\"http://stackoverflow.com/a/40767099/499466\">existing Windows binary</a>."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1479910036, "post_id": 40766163, "comment_id": 68757310, "body": "@TonyTannous Don&#39;t compile C code with a C++ compiler. That being said, there&#39;s no reason why a C++ compiler wouldn&#39;t recognize pointers, more likely it doesn&#39;t recognize <code>&lt;string.h&gt;</code> but gives bad errors."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1479910184, "post_id": 40766163, "comment_id": 68757409, "body": "It is not me, all I did was ./configure &amp;&amp; make as in the instructions. <a href=\"https://thrift.apache.org/tutorial/\" rel=\"nofollow noreferrer\">thrift.apache.org/tutorial</a>"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1479910667, "post_id": 40766163, "comment_id": 68757754, "body": "I reopened the file and the only place I have a strdup is <code>{     pdebug(&quot;TypeAnnotationValue -&gt;&quot;);    $$ = strdup(&quot;1&quot;);     }</code>  I will try to implement it otherway. Thanks though :)"}, {"owner": {"reputation": 12067, "user_id": 499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc0612ec9a2b6af96500cc6e4bfdc7c?s=128&d=identicon&r=PG", "display_name": "JensG", "link": "https://stackoverflow.com/users/499466/jensg"}, "edited": false, "score": 2, "creation_date": 1479910884, "post_id": 40766163, "comment_id": 68757917, "body": "Maybe it solves the actual problem, but it should not be necessary to fiddle with source or make files at all. That&#39;s very likely only a workaround, not the real solution."}, {"owner": {"reputation": 1682, "user_id": 1012022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713ddfe465786d38f356e69f72c942a2?s=128&d=identicon&r=PG", "display_name": "robermann", "link": "https://stackoverflow.com/users/1012022/robermann"}, "edited": false, "score": 2, "creation_date": 1535032198, "post_id": 40766163, "comment_id": 90924259, "body": "I had to add a cast: <code>char* result = (char*) malloc(slen + 1);</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1682, "user_id": 1012022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713ddfe465786d38f356e69f72c942a2?s=128&d=identicon&r=PG", "display_name": "robermann", "link": "https://stackoverflow.com/users/1012022/robermann"}, "edited": false, "score": 0, "creation_date": 1535032296, "post_id": 40766163, "comment_id": 90924331, "body": "@robermann That&#39;s because you are using the wrong compiler. You shouldn&#39;t compile C code on a C++ compiler."}, {"owner": {"reputation": 1682, "user_id": 1012022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713ddfe465786d38f356e69f72c942a2?s=128&d=identicon&r=PG", "display_name": "robermann", "link": "https://stackoverflow.com/users/1012022/robermann"}, "edited": false, "score": 0, "creation_date": 1535050919, "post_id": 40766163, "comment_id": 90934888, "body": "Actually I was trying to compile c++ code  (<a href=\"https://github.com/bitcoin-core/leveldb/blob/bitcoin-fork/db/c.cc\" rel=\"nofollow noreferrer\">this leveldb</a> on Windows + Cygwin); then I got the same OP&#39;s message. After your suggestion, I got:      In function \u2018char* strdup(const char*)\u2019:     error: invalid conversion from \u2018void*\u2019 to \u2018char*\u2019 [-fpermissive]     char* result = malloc(slen + 1);  With the cast worked, but I got other problems (ok, C/C++ is not my main strength :))"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1682, "user_id": 1012022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713ddfe465786d38f356e69f72c942a2?s=128&d=identicon&r=PG", "display_name": "robermann", "link": "https://stackoverflow.com/users/1012022/robermann"}, "edited": false, "score": 2, "creation_date": 1535092172, "post_id": 40766163, "comment_id": 90946389, "body": "@robermann C and C++ are two different languages, incompatible in numerous ways."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 11, "last_activity_date": 1479908984, "last_edit_date": 1479908984, "creation_date": 1479908675, "answer_id": 40766163, "question_id": 40766055, "link": "https://stackoverflow.com/questions/40766055/error-strdup-was-not-declared-in-this-scope/40766163#40766163", "title": "error: &#39;strdup&#39; was not declared in this scope", "body": "<p><code>strdup</code> is not a standard C function. When a compiler is configured to be strict C compliant, it is not allowed to dump its own custom, non-standard functions in standard library headers like <code>&lt;string.h&gt;</code>.</p>\n\n<p>You can resolve this by changing the compiler to compile non-standard C code (for example in gcc, compile with <code>-std=gnu11</code> instead of <code>-std=c11</code>). Or alternatively, stick to pure standard C.</p>\n\n<hr>\n\n<p>... or just implement strdup yourself, it is easy:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar* strdup (const char* s)\n{\n  size_t slen = strlen(s);\n  char* result = malloc(slen + 1);\n  if(result == NULL)\n  {\n    return NULL;\n  }\n\n  memcpy(result, s, slen+1);\n  return result;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 13814170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff9dcc507dd61c1fe7db2e263d99398?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy Nenakhov", "link": "https://stackoverflow.com/users/13814170/evgeniy-nenakhov"}, "is_accepted": false, "score": 2, "last_activity_date": 1593107424, "last_edit_date": 1593107424, "creation_date": 1593103973, "answer_id": 62580433, "question_id": 40766055, "link": "https://stackoverflow.com/questions/40766055/error-strdup-was-not-declared-in-this-scope/62580433#62580433", "title": "error: &#39;strdup&#39; was not declared in this scope", "body": "<p>In my case, in MakeFile by directory <code>/thrift-x.x.x/compiler/cpp/src</code> replace <code>-std=c++11</code> to <code>-std=gnu++11</code></p>\n"}], "owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10226, "favorite_count": 1, "accepted_answer_id": 40766163, "answer_count": 2, "score": 5, "last_activity_date": 1593107424, "creation_date": 1479908395, "question_id": 40766055, "link": "https://stackoverflow.com/questions/40766055/error-strdup-was-not-declared-in-this-scope", "title": "error: &#39;strdup&#39; was not declared in this scope", "body": "<p>I am trying to Build and Install the Apache Thrift compiler and libraries</p>\n\n<p>As shown in instructions run <code>./configure &amp;&amp; make</code></p>\n\n<p>And I get this error:</p>\n\n<pre><code>thrift 0.9.3\n\nBuilding C++ Library ......... : no\nBuilding C (GLib) Library .... : no\nBuilding Java Library ........ : no\nBuilding C# Library .......... : no\nBuilding Python Library ...... : no\nBuilding Ruby Library ........ : no\nBuilding Haxe Library ........ : no\nBuilding Haskell Library ..... : no\nBuilding Perl Library ........ : no\nBuilding PHP Library ......... : no\nBuilding Erlang Library ...... : no\nBuilding Go Library .......... : no\nBuilding D Library ........... : no\nBuilding NodeJS Library ...... : no\nBuilding Lua Library ......... : no\n\nIf something is missing that you think should be present,\nplease skim the output of configure to find the missing\ncomponent.  Details are present in config.log.\nmake  all-recursive\nmake[1]: Entering directory '/c/University/InternetOfThings/thrift-0.9.3'\nMaking all in compiler/cpp\nmake[2]: Entering directory '/c/University/InternetOfThings/thrift-0.9.3/compiler/cpp'\n/bin/sh ../../ylwrap src/thrifty.yy y.tab.c src/thrifty.cc y.tab.h `echo src/thrifty.cc | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output src/thrifty.output -- bison -y -d\nupdating src/thrifty.hh\nmake  all-am\nmake[3]: Entering directory '/c/University/InternetOfThings/thrift-0.9.3/compiler/cpp'\ng++ -DHAVE_CONFIG_H -I. -I../.. -I../../lib/cpp/src/thrift  -I./src  -Wall -Wno-sign-compare -Wno-unused -g -O2 -std=c++11 -MT src/libparse_a-thrifty.o -MD -MP -MF src/.deps/libparse_a-thrifty.Tpo -c -o src/libparse_a-thrifty.o `test -f 'src/thrifty.cc' || echo './'`src/thrifty.cc\nsrc/thrifty.yy: In function 'int yyparse()':\nsrc/thrifty.yy:1311:30: error: 'strdup' was not declared in this scope\nMakefile:912: recipe for target 'src/libparse_a-thrifty.o' failed\nmake[3]: *** [src/libparse_a-thrifty.o] Error 1\nmake[3]: Leaving directory '/c/University/InternetOfThings/thrift-0.9.3/compiler/cpp'\nMakefile:588: recipe for target 'all' failed\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory '/c/University/InternetOfThings/thrift-0.9.3/compiler/cpp'\nMakefile:609: recipe for target 'all-recursive' failed\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory '/c/University/InternetOfThings/thrift-0.9.3'\nMakefile:530: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>I edited thrifty.yy and added <code>#include &lt;string.h&gt;</code> yet I still get the same error that strdup is missing.</p>\n\n<p><code>src/thrifty.yy:1311:30: error: 'strdup' was not declared in this scope</code> (same error as before including string.h)</p>\n\n<p>What am I missing here ?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "edited": false, "score": 4, "creation_date": 1479908405, "post_id": 40766035, "comment_id": 68756234, "body": "What is this even supposed to do? Reverse the string?"}, {"owner": {"reputation": 1560, "user_id": 4303216, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-crjc3oGU_5c/AAAAAAAAAAI/AAAAAAAAADc/BTLu8OHFfRM/photo.jpg?sz=128", "display_name": "sameera sy", "link": "https://stackoverflow.com/users/4303216/sameera-sy"}, "edited": false, "score": 1, "creation_date": 1479908461, "post_id": 40766035, "comment_id": 68756275, "body": "what does twisting in your context mean?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1479908610, "post_id": 40766035, "comment_id": 68756377, "body": "You cannot use <code>printf()</code> without <code>#include &lt;stdio.h&gt;</code>"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1479908665, "post_id": 40766035, "comment_id": 68756422, "body": "@pmg Depends on the C standard being used, its implicit type can be correct (in which case you technically can use it without the header, even though you <i>shouldn&#39;t</i>). Also, we were not shown enough code to know whether the header is included."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 2, "creation_date": 1479908840, "post_id": 40766035, "comment_id": 68756541, "body": "@Arkku: since C89 it&#39;s been <b>UB</b> to call a function with a variable number of arguments without a prototype in scope (I don&#39;t know how calling <code>printf</code> before the Standard worked)."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1479908932, "post_id": 40766035, "comment_id": 68756593, "body": "please post the error message!"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1479909809, "post_id": 40766035, "comment_id": 68757176, "body": "@pmg Interesting, as I don&#39;t actually have the C89 standard, I&#39;ve been assuming from the practical behaviour of compilers I&#39;ve used, and the wording of K&amp;R 2nd ed. (&quot;nothing is assumed about its arguments&quot;), that the implicit type of &quot;takes any arguments, returns <code>int</code>&quot; suffices to call <code>printf</code>. You may well know better. (Anyhow, I still assume the OPs <code>printf</code> calls are for debugging only and not the cause of the error.)"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1479910019, "post_id": 40766035, "comment_id": 68757299, "body": "@Coli As a general comment, I think your variable names are confusing: <code>strt</code> seems unnecessarily abbreviated and is very close to <code>str</code>, while <code>end</code> is apparently not the actual end but &quot;one past the end&quot;. You could either do the <code>- 1</code> when calling, or call it <code>length</code> (or <code>len</code> if you must abbreviate)."}, {"owner": {"reputation": 730, "user_id": 4203811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a498b07c56c73a58a5d7eb0f1bf29531?s=128&d=identicon&r=PG&f=1", "display_name": "Coli", "link": "https://stackoverflow.com/users/4203811/coli"}, "edited": false, "score": 0, "creation_date": 1479910104, "post_id": 40766035, "comment_id": 68757355, "body": "The error is an memory access error. And i can youse printf with int printf(const char * restrict, ...); sry"}, {"owner": {"reputation": 730, "user_id": 4203811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a498b07c56c73a58a5d7eb0f1bf29531?s=128&d=identicon&r=PG&f=1", "display_name": "Coli", "link": "https://stackoverflow.com/users/4203811/coli"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1479910141, "post_id": 40766035, "comment_id": 68757377, "body": "@Arkku maybe, but this does not solve the problem"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1479910187, "post_id": 40766035, "comment_id": 68757412, "body": "@Coli I know, that&#39;s why I made the observations as a comment. I have also posted an answer about the problem itself."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1479908539, "creation_date": 1479908539, "answer_id": 40766109, "question_id": 40766035, "link": "https://stackoverflow.com/questions/40766035/c-twist-char/40766109#40766109", "title": "C: twist char *", "body": "<p>In C all string literals are <em>read-only</em> arrays of characters. It can be stored in memory that is not modifiable, leading to errors such as your when you attempt to modify it. That's why you should always use <code>const char *</code> when referring to string literals.</p>\n\n<p>Use an array instead:</p>\n\n<pre><code>char sol[] = \"hello\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1479909044, "post_id": 40766124, "comment_id": 68756673, "body": "Shouldn&#39;t there be a compiler error on assigning <code>const char*</code> to <code>char*</code>?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1479909312, "post_id": 40766124, "comment_id": 68756843, "body": "@vlad_tepesch Yes (although it is a warning, not an error), but unfortunately string literals, though read-only, do not have the type <code>const char *</code>."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1479909406, "post_id": 40766124, "comment_id": 68756907, "body": "o_O didn&#39;t know this."}, {"owner": {"reputation": 730, "user_id": 4203811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a498b07c56c73a58a5d7eb0f1bf29531?s=128&d=identicon&r=PG&f=1", "display_name": "Coli", "link": "https://stackoverflow.com/users/4203811/coli"}, "edited": false, "score": 0, "creation_date": 1479909945, "post_id": 40766124, "comment_id": 68757254, "body": "Im compiling with -std=c99 -Wall -Wextra -Wpedantic -Werror so yes, const char* to char* gives an error. So, how can I copy it in a char and modify it with a void function. Because I can&#39;t work with while/for loops."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 730, "user_id": 4203811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a498b07c56c73a58a5d7eb0f1bf29531?s=128&d=identicon&r=PG&f=1", "display_name": "Coli", "link": "https://stackoverflow.com/users/4203811/coli"}, "edited": false, "score": 0, "creation_date": 1479910487, "post_id": 40766124, "comment_id": 68757633, "body": "@Coli Like said, it is not clear from the information given how you are allowed to fix it in your assignment, and in any case that is probably the part you should learn. That being said, if you can change things at the call site, create an array of <code>char</code> long enough for the string and copy the contents there. Don&#39;t forget the NUL terminator (<code>&#39;\\0&#39;</code>) at the end."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 730, "user_id": 4203811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a498b07c56c73a58a5d7eb0f1bf29531?s=128&d=identicon&r=PG&f=1", "display_name": "Coli", "link": "https://stackoverflow.com/users/4203811/coli"}, "edited": false, "score": 1, "creation_date": 1479916862, "post_id": 40766124, "comment_id": 68762034, "body": "@Coli Why is it <code>.cpp</code> (C++) when your code (and the tag of this question) is C? Anyway, an interesting recursive way to implement <code>strlen</code> \u2013 unfortunately it will probably not work for arbitrarily long strings, but should not be an issue here. Now you just need to copy the string into a new array. You can either make it <code>static</code> (e.g., just <code>static char buf[512]</code> and you don&#39;t support strings longer than 511 characters + terminator), or <code>malloc(counting(str) + 1)</code>. Note that <code>twisting</code> does not need to return anything, it modifies its argument array."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": true, "score": 2, "last_activity_date": 1479910288, "last_edit_date": 1495540795, "creation_date": 1479908571, "answer_id": 40766124, "question_id": 40766035, "link": "https://stackoverflow.com/questions/40766035/c-twist-char/40766124#40766124", "title": "C: twist char *", "body": "<p>Your <code>char *sol</code> is a pointer to the string <code>\"hello\"</code>. Being a string literal, it is actually read-only, and thus when you pass the pointer to your function, you get an error when you modify the contents of the constant string <code>\"hello\"</code> through the pointer.</p>\n\n<p>Regarding the second part of the question, <code>const char * const</code> (i.e., constant pointer to a constant <code>char</code>) would indeed be a better type for the pointer, as it would convey that the thing pointed to is constant. However, then you cannot pass this pointer to the function (because the function takes a pointer to a non-const <code>char</code>), and it is not clear from the information given how you are \"allowed\" to work around this. One way is to copy the string and modify the copy.</p>\n\n<p>edit: And as pointed out by <a href=\"https://stackoverflow.com/a/40766223/204883\">other</a> <a href=\"https://stackoverflow.com/a/40766214/204883\">answers</a>, your recursive call mixes up the start and end arguments (by using the more logical order of start first).</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 7200393, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c9c9c02c05c8913372c1cddea9d09a55?s=128&d=identicon&r=PG", "display_name": "PMar", "link": "https://stackoverflow.com/users/7200393/pmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1479908794, "creation_date": 1479908794, "answer_id": 40766214, "question_id": 40766035, "link": "https://stackoverflow.com/questions/40766035/c-twist-char/40766214#40766214", "title": "C: twist char *", "body": "<p>I believe the recursive call to 'twstng()' at the bottom of the function has passed the new start and end indexes in the wrong order, given the names in the declaration (or else the declaration has them in the wrong order).</p>\n"}, {"tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": false, "score": 2, "last_activity_date": 1479908824, "creation_date": 1479908824, "answer_id": 40766223, "question_id": 40766035, "link": "https://stackoverflow.com/questions/40766035/c-twist-char/40766223#40766223", "title": "C: twist char *", "body": "<p>You mixed up your arguments.\nYour function declaration says, that the first argument is the <code>end</code> and the second is the <code>strt</code>.</p>\n\n<p>Your recursive call mixes them up.</p>\n"}], "owner": {"reputation": 730, "user_id": 4203811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a498b07c56c73a58a5d7eb0f1bf29531?s=128&d=identicon&r=PG&f=1", "display_name": "Coli", "link": "https://stackoverflow.com/users/4203811/coli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 40766124, "answer_count": 4, "score": 0, "last_activity_date": 1479910288, "creation_date": 1479908333, "question_id": 40766035, "link": "https://stackoverflow.com/questions/40766035/c-twist-char", "title": "C: twist char *", "body": "<p>Note: I can't use any libs or includes!</p>\n\n<p>I have the following Code:</p>\n\n<pre><code>void twstng(char * str, int end, int strt) {\n    if(strt != end &amp;&amp; strt != end-1) {\n            int hlp = str[strt];\n\n            printf(\"strt %d end %d hlp %d\\n\", strt, end, hlp);\n\n            str[strt] = str[end-1];\n\n            printf(\"test\\n\");\n\n            str[end-1] = hlp;\n\n            printf(\"test\\n\");\n\n            twstng(str, strt+1, end-1);\n    }\n}\n</code></pre>\n\n<p>and in the main function:</p>\n\n<pre><code>char * sol = \"hello\";\ntwisting(sol, 5, 0);\n</code></pre>\n\n<p>I want to twist the entire string. But the console shows:</p>\n\n<pre><code>strt 0 end 4 help 104\n</code></pre>\n\n<p>And then comes a memory access error. But why?</p>\n\n<p>My second problem is, that in the original task the given string is a</p>\n\n<pre><code>const char * const str\n</code></pre>\n\n<p>How can I work with it in the twstng function?</p>\n"}, {"tags": ["c", "user-interface", "gtk", "gtk2"], "comments": [{"owner": {"reputation": 51182, "user_id": 172999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b2014c8170f4d16a313cfa79071fd861?s=128&d=identicon&r=PG", "display_name": "ptomato", "link": "https://stackoverflow.com/users/172999/ptomato"}, "edited": false, "score": 0, "creation_date": 1480294386, "post_id": 40766004, "comment_id": 68888727, "body": "By the way, if you are just learning GTK then start with GTK 3! GTK 2 is quite obsolete by now, and GTK 3 is soon going to turn into GTK 4..."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7200195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s2vzM.png?s=128&g=1", "display_name": "vnzstc", "link": "https://stackoverflow.com/users/7200195/vnzstc"}, "edited": false, "score": 0, "creation_date": 1480404751, "post_id": 40835707, "comment_id": 68935849, "body": "First of all thanks for the answer but it still doesn&#39;t work. I used the function that you have suggested but the function has a GtkWidget as a parameter and app-&gt;icon is a GtkPixBuf so i used gtk_widget_hide(gtk_image_new_from_pixbuf(app-&gt;icon)); but nothing happens when gtk_widget_hide is triggered."}, {"owner": {"reputation": 51182, "user_id": 172999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b2014c8170f4d16a313cfa79071fd861?s=128&d=identicon&r=PG", "display_name": "ptomato", "link": "https://stackoverflow.com/users/172999/ptomato"}, "reply_to_user": {"reputation": 19, "user_id": 7200195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s2vzM.png?s=128&g=1", "display_name": "vnzstc", "link": "https://stackoverflow.com/users/7200195/vnzstc"}, "edited": false, "score": 0, "creation_date": 1480493130, "post_id": 40835707, "comment_id": 68980381, "body": "Well, if you create a new widget with <code>gtk_image_new_from_pixbuf()</code> and hide <i>that</i>, then it won&#39;t hide the existing image. You need to save a pointer to your existing <code>GtkImage</code> in your <code>app</code> struct and hide that."}], "tags": [], "owner": {"reputation": 51182, "user_id": 172999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b2014c8170f4d16a313cfa79071fd861?s=128&d=identicon&r=PG", "display_name": "ptomato", "link": "https://stackoverflow.com/users/172999/ptomato"}, "is_accepted": true, "score": 0, "last_activity_date": 1480294455, "creation_date": 1480294455, "answer_id": 40835707, "question_id": 40766004, "link": "https://stackoverflow.com/questions/40766004/gtk2-0-how-can-i-remove-an-attached-widget-to-a-gtktable/40835707#40835707", "title": "Gtk+2.0, How can i remove an attached widget to a GtkTable?", "body": "<p>You should be able to hide the icon with <code>gtk_widget_hide(app-&gt;icon)</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 7200195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s2vzM.png?s=128&g=1", "display_name": "vnzstc", "link": "https://stackoverflow.com/users/7200195/vnzstc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 40835707, "answer_count": 1, "score": 0, "last_activity_date": 1480294455, "creation_date": 1479908209, "question_id": 40766004, "link": "https://stackoverflow.com/questions/40766004/gtk2-0-how-can-i-remove-an-attached-widget-to-a-gtktable", "title": "Gtk+2.0, How can i remove an attached widget to a GtkTable?", "body": "<p>this is my first question on Stack Overflow,so I hope you can be friendly if I will make some mistakes.</p>\n\n<p>I'm trying to learn a little bit of Gtk2.0 mechanisms. I'm a newbie with this library so I'm trying to construct a basic GUI.</p>\n\n<p>I created a 230x150 window, attached a GdkPixbuf icon and learned how to trigger signals, in particular I'm interested on showing/hiding the icon on pressing of an arrow key. </p>\n\n<p>I have achieved the objective of showing the icon but I'm not finding the way to hide this one. I looked at the documentation, but anything seems to be working. </p>\n\n<p>I attach the code below so you can help me better. Thanks in advance for hints.</p>\n\n<p><a href=\"http://pastebin.com/iUJRc6hw\" rel=\"nofollow noreferrer\">http://pastebin.com/iUJRc6hw</a></p>\n"}, {"tags": ["c", "arrays", "algorithm", "search", "binary-search"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1479908308, "post_id": 40765937, "comment_id": 68756168, "body": "Just to make sure that I understand you correctly - you&#39;ve taken this piece of code that you found somewhere, and you&#39;re asking us to explain to you how it is working? Have you done any sort of research yourself? Reading through the code, debugging it with various input, etc? If yes, then please share it . For example, what parts are you able to understand and what parts are you not able to understand?"}, {"owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1479908468, "post_id": 40765937, "comment_id": 68756282, "body": "@barakmanos Not quite. I want to have a binary search that will find the integer &quot;wantToFind&quot;, and if it is not in the array will subtract 1 from wantToFind until it is found. This code doesn&#39;t work currently. Apologies for lack of clarity"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1479908528, "post_id": 40765937, "comment_id": 68756323, "body": "So your code doesn&#39;t work correctly... and? You want us to debug it for you and explain why?"}, {"owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1479908619, "post_id": 40765937, "comment_id": 68756383, "body": "@barakmanos Yes please. I&#39;ve tried several times and this is the closet I have gotten."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1479908752, "post_id": 40765937, "comment_id": 68756475, "body": "Well, I&#39;m afraid that this is not a &#39;debug my code for free&#39; service. Please do it yourself, and come back with a <b>more accurate description</b> of the problem that you&#39;re dealing with (if you still haven&#39;t been able to solve it on your own by then). Don&#39;t just dump your entire code at our faces."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1479910946, "post_id": 40765937, "comment_id": 68757964, "body": "You talk about integers, but have <code>float list[15] = ...</code> in the first line of your code. Very confusing."}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "edited": false, "score": 0, "creation_date": 1479908975, "post_id": 40766156, "comment_id": 68756626, "body": "So if I changed <code>itemFound == false</code> to <code>low &gt;= high</code>, and after the do while  tested <code>if (itemFound == false)</code> then <code>wantToFind--;</code>. And then encase all this in another do while <code>itemFound == false</code>? (Will update code above)"}], "tags": [], "owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "is_accepted": false, "score": 0, "last_activity_date": 1479908646, "creation_date": 1479908646, "answer_id": 40766156, "question_id": 40765937, "link": "https://stackoverflow.com/questions/40765937/modified-binary-search-array/40766156#40766156", "title": "Modified Binary Search Array", "body": "<p>Your exit condition should be <code>low >= high</code>. Then you will find the first value, that's either smaller or bigger than the targeted one (or of course the one, you're actually searching). Then you don't need this if-statement any more: <code>if (current &lt; 0 || current > 14)</code> but you have to check/adjust the result after the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": true, "score": 0, "last_activity_date": 1479910784, "creation_date": 1479910784, "answer_id": 40766938, "question_id": 40765937, "link": "https://stackoverflow.com/questions/40765937/modified-binary-search-array/40766938#40766938", "title": "Modified Binary Search Array", "body": "<p>I can't imagine why you'd want <code>while (low &gt;= high)</code>. This will cause the loop to terminate the first time through. I'm pretty sure you want <code>while (low &lt;= high)</code>. </p>\n\n<p>Also, when the item isn't found, there are three possibilities:</p>\n\n<ol>\n<li><code>wantToFind</code> is smaller than the smallest item in the list.</li>\n<li><code>wantToFind</code> is larger than the largest item in the list.</li>\n<li><code>wantTofind</code> would be located somewhere in the list.</li>\n</ol>\n\n<p>In cases 2 and 3, the value of <code>current</code> when the inner loop exits will be one more than the index that contains the first item smaller than <code>wantToFind</code>. </p>\n\n<p>In case 1 above, <code>current</code> will be equal to 0.</p>\n\n<p>The point is that there's no need for the outer loop. When the binary search fails, the value of <code>current</code> tells you the insertion point.</p>\n\n<p>Also, you probably want to early-out when the item is found.</p>\n\n<p>Finally, do yourself a favor and turn that <code>do...while</code> into a <code>while</code> loop. That is:</p>\n\n<pre><code>while (!itemFound &amp;&amp; low &lt;= high)\n</code></pre>\n\n<p>You'll find that a lot easier to reason about.</p>\n"}], "owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 40766938, "answer_count": 2, "score": 0, "last_activity_date": 1521252661, "creation_date": 1479907998, "last_edit_date": 1521252661, "question_id": 40765937, "link": "https://stackoverflow.com/questions/40765937/modified-binary-search-array", "title": "Modified Binary Search Array", "body": "<p>EDIT: included improved code.</p>\n\n<p>My current logic is incorrect. I want to have a binary search that will find the integer \"wantToFind\", and if it is not in the array will subtract 1 from wantToFind until it is found. </p>\n\n<p>I have subtracted this from a larger program, that guarantees that the 1st item in the array will be the lowest wantToFind (the value we want to find) can ever be.</p>\n\n<p>However, despite following binary search conventions the program is still getting stuck when looking for higher numbers such as 88.</p>\n\n<pre><code>float list[15] = {60,62,64,65,67,69,71,72,74,76,77,79,81,83,84};\n\n// binary search\nint wantToFind = 88; //other tests are 65, 61, 55\nbool itemFound = false;\n\nint current = 0;\nint low = 0;\nint high = 14;\n\ncurrent = (low+high)/2;\n//int previousCurrent = -1;\n\ndo {\n    do {\n        //if 61 &lt; 72\n        if (wantToFind &lt; list[current])\n        {\n            //smaller\n            //previousCurrent = current;\n            high = current - 1;\n            current = (low+high/2);\n        }\n        else if (wantToFind &gt; list[current])\n        {\n            //bigger\n            //previousCurrent = current;\n            low = current + 1;\n            current = (low+high/2);\n        }\n        else{\n            if(wantToFind == list[current])\n            {\n                itemFound = true;\n            }\n        }\n\n    } while (low &gt;= high);\n\n    if (itemFound == false)\n    {\n        wantToFind--;\n    }\n} while (itemFound == false);\n\nprintf(\"\\n%d\", wantToFind); //which will be a number within the list?\n    return 0;\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "driver"], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 2, "last_activity_date": 1479919926, "creation_date": 1479919926, "answer_id": 40770113, "question_id": 40765847, "link": "https://stackoverflow.com/questions/40765847/linux-device-driver-container-of-macro-when-using-arrays/40770113#40770113", "title": "linux device driver container_of macro when using arrays", "body": "<p>You cannot use <code>container_of</code> to go from <code>inner_struct_containing_cdev</code> to <code>outer_struct</code>; you've stated the reason yourself, you don't know which index of the array you're looking at.</p>\n\n<p>You need to organize your data structure like this instead:</p>\n\n<pre><code> struct driver_instance {\n    /* variables shared among all N devices go here */\n };\n\n struct device_instance {\n    struct cdev cdev;\n    /* variables particular to only one device */\n    struct driver_instance *driver;\n };\n</code></pre>\n\n<p>You only use <code>container_of</code> to go from the <code>cdev</code> to the <code>device_instance</code>; then you dereference the <code>driver</code> pointer to get the <code>driver_instance</code>.  You allocate a <code>driver_instance</code> when your driver is initialized, and then when it spins up individual devices it makes each point to that object.  Use the core kernel's reference counting logic to know when to deallocate them.</p>\n\n<p>In addition to the fact that this, y'know, <em>works</em>, it means you don't have to hardwire the number of devices at compile time.</p>\n"}], "owner": {"reputation": 2950, "user_id": 1312871, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c7e105a48afc68fc88adf6a72338da5d?s=128&d=identicon&r=PG", "display_name": "Raj", "link": "https://stackoverflow.com/users/1312871/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 40770113, "answer_count": 1, "score": 2, "last_activity_date": 1479919926, "creation_date": 1479907716, "last_edit_date": 1479907781, "question_id": 40765847, "link": "https://stackoverflow.com/questions/40765847/linux-device-driver-container-of-macro-when-using-arrays", "title": "linux device driver container_of macro when using arrays", "body": "<p>In one of the legacy device driver that I am using, I have a structure format as below - </p>\n\n<pre><code>struct inner_struct_containing_cdev {\n   struct cdev cdev;\n   ....\n   ....\n   /* more variables */\n};\n\nstruct outer_struct {\n    /* because I need 10 devices */\n    struct inner_struct_containing_cdev inner[10];\n    ....\n    ....\n    /* more variables which are common to all the 10 devices. */\n};\n</code></pre>\n\n<p>Now in my init_module I am calling <code>alloc_chrdev_region</code> and other allocation related calls. Now in my <code>open</code> file operation with signature <code>int open(struct inode *inode, struct file *filp)</code> I can get access to the cdev structure and hence the <code>inner_struct_containing_cdev</code>. But I would like to get the pointer to <code>outer_struct</code> instead. In the <code>open</code> call I don't know which array index of the <code>inner_struct_containing_cdev</code> struct I received a pointer to. \nIs it possible to use <code>container_of</code> macro in such a case? Or need to re-design the structures?</p>\n\n<p>Currently I am handling the situation using a global variable. But this prevents me from having multiple instantiation.</p>\n"}, {"tags": ["c", "greedy", "cs50"], "comments": [{"owner": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "edited": false, "score": 5, "creation_date": 1479905986, "post_id": 40765164, "comment_id": 68754567, "body": "Multiply it by 100 and do it like with integers"}, {"owner": {"reputation": 73, "user_id": 5010178, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9b76f8d6032d1e92e743955d9cd4bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Allen M", "link": "https://stackoverflow.com/users/5010178/allen-m"}, "reply_to_user": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "edited": false, "score": 0, "creation_date": 1479906803, "post_id": 40765164, "comment_id": 68755124, "body": "I tried this version and it gives the same error, works with integer numbers and numbers that end in .25, anything else doesnt work."}, {"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 0, "creation_date": 1479906904, "post_id": 40765164, "comment_id": 68755212, "body": "I tried running your code for <code>9.01</code>. It works fine. Gives <code>37</code> coins as ouput."}, {"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 0, "creation_date": 1479907059, "post_id": 40765164, "comment_id": 68755317, "body": "I used <code>scanf</code> instead of <code>GetFloat()</code>."}, {"owner": {"reputation": 73, "user_id": 5010178, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9b76f8d6032d1e92e743955d9cd4bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Allen M", "link": "https://stackoverflow.com/users/5010178/allen-m"}, "edited": false, "score": 0, "creation_date": 1479907206, "post_id": 40765164, "comment_id": 68755414, "body": "Weird, coming from python and ruby, everything is so arcane in C. I&#39;ve used GetFloat because thats what the harvad course that i&#39;m taking is suggestin us to use, i didn&#39;t understand why they wouldn&#39;t just use scanf, maybe because he didn&#39;t cover pointers yet?"}, {"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 0, "creation_date": 1479907512, "post_id": 40765164, "comment_id": 68755605, "body": "Have you tried it with <code>scanf</code>?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1479907644, "post_id": 40765164, "comment_id": 68755701, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency\">Why not use Double or Float to represent currency?</a>"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1479908218, "post_id": 40765164, "comment_id": 68756112, "body": "See <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a>   and  <a href=\"http://docs.sun.com/source/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.sun.com/source/806-3568/ncg_goldberg.html</a>"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1479910895, "post_id": 40765164, "comment_id": 68757930, "body": "@Allen You know Python and Ruby are written primarily in C, right? So they do this under the hood."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1479907892, "post_id": 40765431, "comment_id": 68755887, "body": "You did not explain why his algorithm is incorrect, and why yours isn&#39;t."}, {"owner": {"reputation": 73, "user_id": 5010178, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9b76f8d6032d1e92e743955d9cd4bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Allen M", "link": "https://stackoverflow.com/users/5010178/allen-m"}, "edited": false, "score": 1, "creation_date": 1479908544, "post_id": 40765431, "comment_id": 68756332, "body": "I understand now, mine if it were to work correctly and if for example had an input like 1.20, it would skip the 25 cents coins, and go to the 10 cents and back to the 25 cents again and output 10 coins, even though there was a better way of giving change(7 coins is the correct answer)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479911568, "post_id": 40765431, "comment_id": 68758390, "body": "<i>int coinTypes[] = {0.25, 0.1, 0.05, 0.01};</i> will initalize all values to <code>0</code>, dividing <code>amount</code> by <code>0</code> will yield <code>Infinity</code>, converting that to <code>int</code> invokes undefined behavior (C11 6.3.1.4).  If you make the array <code>float</code>, you will still experience the precision issue."}], "tags": [], "owner": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "is_accepted": false, "score": 1, "last_activity_date": 1479910347, "last_edit_date": 1479910347, "creation_date": 1479906528, "answer_id": 40765431, "question_id": 40765164, "link": "https://stackoverflow.com/questions/40765164/integer-overflow-in-greedy-coin-counting/40765431#40765431", "title": "Integer overflow in greedy coin counting", "body": "<p>Your algorithm is not correct:</p>\n\n<p>For example with 30 cents you can exchange to: 25+5 (2 coins) with your algorithm it would be 10+10+10 (3 coins). So greedy means why it's greater than 25 cents then exchange to 25 cents first.</p>\n\n<pre><code>while (amount != 0) {\n\n    if (amount &gt;= 0.25) {\n        amount = amount - 0.25;\n        coins += 1;\n    }\n\n    else if (amount &gt;= 0.10) {\n        amount = amount - 0.10;\n        coins += 1;\n    }\n\n    else if (amount &gt;= 0.05) {\n        amount = amount - 0.05;\n        coins += 1;\n    }\n\n    else {\n        amount = amount - 0.01;\n        coins += 1;\n    }\n}\n</code></pre>\n\n<p>If you want to do that way. </p>\n\n<p>Better way:</p>\n\n<pre><code>int coinTypes[] = {0.25, 0.1, 0.05, 0.01};\n\nfor (int i = 0; i &lt; 4; i++) {\n   coins += floor(amount / coinTypes[i];\n   amount -= coins * coinsTypes[i];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2668, "user_id": 647254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09869dbd44b7033b209bd38dcf6d7361?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/647254/eugene"}, "is_accepted": false, "score": 0, "last_activity_date": 1479907283, "creation_date": 1479907283, "answer_id": 40765688, "question_id": 40765164, "link": "https://stackoverflow.com/questions/40765164/integer-overflow-in-greedy-coin-counting/40765688#40765688", "title": "Integer overflow in greedy coin counting", "body": "<p>The main problem with your algorithm is invalid usage of <code>fmod</code> function. According to definition the result of <code>fmod(num, denom)</code> is</p>\n\n<pre><code>fmod = num - floor(num/denom) * denom\n</code></pre>\n\n<p>where <code>floor(num/denom)</code> is integer.\nThus, <code>fmod(9.10, 0.25) == 0.1</code>, <code>fmod(9.10, 0.10) == 0.1</code>.</p>\n\n<p>In addition, the manipulation with floating point number rarely gives exact results. so <code>amount</code> is never <code>0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479909926, "post_id": 40765758, "comment_id": 68757241, "body": "It fails for <code>100.10</code>: returns 400 quarters, 1 nickel and 4 pennies."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479910622, "post_id": 40765758, "comment_id": 68757727, "body": "@chqrlie, Yes. I printed amount and it was giving 100.099998. I modified my code to handle this type of errors. Could you please try one more time?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479910642, "post_id": 40765758, "comment_id": 68757737, "body": "Yes, but <code>1000000.10</code> returns 4 million quarters, 1 dime and 3 extra pennies <code>-;)</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479910736, "post_id": 40765758, "comment_id": 68757812, "body": "Rounding with <code>int amountInt = (int)(amount * 100 + 0.5);</code> is much simpler."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479911175, "post_id": 40765758, "comment_id": 68758120, "body": "I tried this. It is giving same problem when input is 1000000.10. I printed float value for 1000000.10, 1000000.11, 1000000.12. They are all stored as 1000000.125000. So it is better to change input to two integer values: dollars and cents."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1479911332, "post_id": 40765758, "comment_id": 68758232, "body": "No, it is better to use <code>double</code> and <code>long long int</code>. Changing the user interface to account for a technical difficulty is an engineer&#39;s temptation you must resist."}], "tags": [], "owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "is_accepted": false, "score": 3, "last_activity_date": 1479911715, "last_edit_date": 1495542827, "creation_date": 1479907462, "answer_id": 40765758, "question_id": 40765164, "link": "https://stackoverflow.com/questions/40765164/integer-overflow-in-greedy-coin-counting/40765758#40765758", "title": "Integer overflow in greedy coin counting", "body": "<p>As Danial Tran said it is better to use int when you do logical operations. Please read  <a href=\"https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency\">Why not use Double or Float to represent currency?</a> Also you can avoid while loop.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;math.h&gt;\n\nint main (void) { \n\n    printf (\"Enter amount: \");\n    //float amount = GetFloat(); //Please refer to chqrlie's comments below.\n    double amount  = 0.0;\n    scanf(\"%lf\",&amp;amount); //I don't know GetFloat() equivalent for double. So using scanf().\n\n    long long int amountInt = (long long int) (amount * 100.0);\n\n    int coins = 0;\n\n    if (25 &lt;= amountInt) {\n        coins += (amountInt/25);\n        amountInt = amountInt % 25;\n    }\n\n    if (10 &lt;= amountInt) {\n        coins += (amountInt/10);\n        amountInt = amountInt % 10;\n    }\n\n    if (5 &lt;= amountInt) {\n        coins += (amountInt/5);\n        amountInt = amountInt % 5;\n    }\n\n    if (1 &lt;= amountInt) {\n        coins += amountInt;\n    }\n\n    printf (\"Coins : %d\\n\", coins);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "is_accepted": false, "score": 1, "last_activity_date": 1479908832, "last_edit_date": 1479908832, "creation_date": 1479908478, "answer_id": 40766088, "question_id": 40765164, "link": "https://stackoverflow.com/questions/40765164/integer-overflow-in-greedy-coin-counting/40766088#40766088", "title": "Integer overflow in greedy coin counting", "body": "<p>It seems that no one has answered the particular question</p>\n\n<blockquote>\n  <p>If i try an amount like 9.10 or 9.01, i get a runtime error,signed integer overflow, i understand what it means, but i don't understand how can the value of coins go so high all of a sudden.</p>\n</blockquote>\n\n<p>so for the sake of completeness, partially as an exercise:</p>\n\n<p>You can find the reason using a <strong>debugger</strong>. I copied your code and found that it runs for very long. Interrupting it a moment after start revealed that the code freezes repeating this check:</p>\n\n<pre><code>if (fmod(amount, 0.25) == 0) {\n    amount = amount - 0.25;\n    coins += 1;\n}\n</code></pre>\n\n<p>At the moment of the interruption <code>amount</code> was about minus 1.2 million and coins almost 5 million. This clearly shows one thing you failed to check: negativity. It can happen easily with floats that you miss the <em>exact</em> zero, as the others have correctly reasoned, no need to repeat that. But if that happens, your program should get worried the moment <code>amount</code> gets negative. Otherwise, under the right conditions, it may as well keep subtracting its way towards negative infinity, and yes, integer overflow will happen in <code>coins</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 243, "user_id": 3162114, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ab7c028a30f6a798b4321f1c09b04ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Exalt", "link": "https://stackoverflow.com/users/3162114/exalt"}, "is_accepted": false, "score": 1, "last_activity_date": 1479910066, "creation_date": 1479910066, "answer_id": 40766656, "question_id": 40765164, "link": "https://stackoverflow.com/questions/40765164/integer-overflow-in-greedy-coin-counting/40766656#40766656", "title": "Integer overflow in greedy coin counting", "body": "<p>This is because the computer represent the decimals in <strong>binary</strong> (power of 2)</p>\n\n<p>For 0.25, the computer can represent it properly in binary. This is because <strong>we can obtain 0.25 exactly using power of 2</strong>'s.</p>\n\n<p>However for 0.10 ( or other denominations mentioned ), they cannot be expressed exactly in powers of 2.</p>\n\n<p>Suppose you try to obtain 0.1 using power of 2's , you won't be able to obtain it exactly. You can just go near it.</p>\n\n<p>0.1 = 0.0625 ( 2^4 ) +  0.03125 ( 2^5 ) + 0.00390625 ( 2^-8) +...</p>\n\n<p>You will approach 0.1 , but you'll never reach 0.1 exactly. </p>\n\n<p>Float, double everyone has a fixed number of bits to represent a decimal. So it will keep only those many bits, whose sum would be slightly less than 0.1</p>\n\n<p>If you want to follow the same approach, you can have 2 possible solutions :-</p>\n\n<blockquote>\n  <ol>\n  <li>Use <strong>(amount > 0)</strong> instead of <strong>(amount != 0)</strong>, or</li>\n  <li>Use currencies which can be expressed easily in <strong>powers of 2</strong> e.g. 0.25, 0.125 , 0.375 , 0.06125.</li>\n  </ol>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1479911224, "last_edit_date": 1479911224, "creation_date": 1479910571, "answer_id": 40766857, "question_id": 40765164, "link": "https://stackoverflow.com/questions/40765164/integer-overflow-in-greedy-coin-counting/40766857#40766857", "title": "Integer overflow in greedy coin counting", "body": "<p>You cannot compute this with the <code>float</code> type.  Amounts that are not exact multiples of 0.25 cannot be represented exactly in either the <code>float</code> or the <code>double</code> type.</p>\n\n<p>You can fix this problem by computing an exact number of cents and dispatch it using integer arithmetics:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nvoid print_coins(int coins, const char *singular, const char *plural) {\n    if (coins &gt; 0)\n        printf(\" %d %s\", coins, coins &gt; 1 ? plural : singular);\n}\n\nint main(void) {\n    for (;;) {\n        double amount;\n        int amountInt, coins, quarters, dimes, nickels, pennies;\n\n        printf(\"Enter amount: \");\n        if (scanf(\"%lf\", &amp;amount) != 1 || amount &lt;= 0)\n            break;\n\n        amountInt = (int)(amount * 100.0 + 0.5);\n\n        quarters = amountInt / 25;\n        amountInt %= 25;\n        dimes = amountInt / 10;\n        amountInt %= 10;\n        nickels = amountInt / 5;\n        amountInt %= 5;\n        pennies = amountInt;\n        amountInt = 0;\n\n        coins = quarters + dimes + nickels + pennies;\n\n        printf(\"coins returned: %d:\", coins);\n        print_coins(quarters, \"quarter\", \"quarters\");\n        print_coins(dimes, \"dime\", \"dimes\");\n        print_coins(nickels, \"nickel\", \"nickels\");\n        print_coins(pennies, \"penny\", \"pennies\");\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Notes: </p>\n\n<ul>\n<li>Using <code>float</code> without the <code>+ 0.5</code>, the change is incorrect for as little as <code>100.10</code>: one penny short.</li>\n<li>Using <code>float</code>, the change is incorrect for <code>1000000.10</code>: 3 extra pennies.</li>\n<li>To handle amounts above 20 million dollars, you need a larger integral type such as <code>long long int</code>.  With that, you can handle amounts exceeding the US national debt.</li>\n</ul>\n"}], "owner": {"reputation": 73, "user_id": 5010178, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9b76f8d6032d1e92e743955d9cd4bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Allen M", "link": "https://stackoverflow.com/users/5010178/allen-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1480806268, "creation_date": 1479905758, "last_edit_date": 1480806268, "question_id": 40765164, "link": "https://stackoverflow.com/questions/40765164/integer-overflow-in-greedy-coin-counting", "title": "Integer overflow in greedy coin counting", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;math.h&gt;\n\nint main (void) { \n\n    printf (\"Enter amount: \");\n    float amount = GetFloat();\n    int coins = 0;\n\n    while (amount != 0) {\n\n        if (fmod(amount, 0.25) == 0) {\n            amount = amount - 0.25;\n            coins += 1;\n        }\n\n        else if (fmod(amount, 0.10) == 0) {\n            amount = amount - 0.10;\n            coins += 1;\n        }\n\n        else if (fmod(amount, 0.05) == 0) {\n            amount = amount - 0.05;\n            coins += 1;\n        }\n\n        else {\n            amount = amount - 0.01;\n            coins += 1;\n        }\n    }\n\n    printf (\"Coins : %d\\n\", coins);\n}\n</code></pre>\n\n<p>I'm trying to implement a small greedy algorithm, in which a user inputs an amount of money ( Ex: 9.25 ) and we output the least amount of coins that it takes for us to exchange it in change( 25 cents, 10 cents, 5 cents and 1 cent only).</p>\n\n<p>This algorithm works with int amounts like 10 or 20 and with amounts that only requires the program to use the 25 cents coins.</p>\n\n<p>If I try an amount like 9.10 or 9.01, I get a runtime error, signed integer overflow. I understand what it means, but I don't understand how can the value of coins go so high all of a sudden.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 71114, "user_id": 567435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zYyZz.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/567435/rahul"}, "edited": false, "score": 1, "creation_date": 1479905696, "post_id": 40765108, "comment_id": 68754357, "body": "an empty array..."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 4, "creation_date": 1479905732, "post_id": 40765108, "comment_id": 68754380, "body": "Does this even compile???"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1479905745, "post_id": 40765108, "comment_id": 68754389, "body": "It is a grammar error. An initialiser list must not be empty."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479908743, "post_id": 40765108, "comment_id": 68756470, "body": "It is an error in C because empty initializers are invalid, but it might mean something in C++..."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 5, "creation_date": 1479905798, "post_id": 40765123, "comment_id": 68754423, "body": "It is not standard C."}], "tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 0, "last_activity_date": 1479905660, "creation_date": 1479905660, "answer_id": 40765123, "question_id": 40765108, "link": "https://stackoverflow.com/questions/40765108/what-does-int-a-mean-in-c/40765123#40765123", "title": "What does int A[]={} mean in C?", "body": "<p>It is defining an empty array of type <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 1, "creation_date": 1479905859, "post_id": 40765163, "comment_id": 68754471, "body": "There are so many compilers out there, written to so many different standards (or no standard at all) that the statement &quot;is illegal in C&quot; makes no practical sense. You at least have to specify the name of a standard. Suggest editing to add in the name of the standard you referred to in the next sentence."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 0, "creation_date": 1479906209, "post_id": 40765163, "comment_id": 68754709, "body": "@T.E.D. The link I added (C11 draft) sufficiently clarifies it (any potential ambiguity), I believe."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 3, "creation_date": 1479906290, "post_id": 40765163, "comment_id": 68754768, "body": "@T.E.D. If question is tagged [c], without mentioning platform or standard version, we assume that question is about lastest version of the C standard."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 0, "creation_date": 1479906348, "post_id": 40765163, "comment_id": 68754807, "body": "@T.E.D.: There is exactly <b>one</b> C standard and exactly <b>one</b> valid version of the standard. So it is very clear what is meant."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 0, "creation_date": 1479906492, "post_id": 40765163, "comment_id": 68754890, "body": "@T.E.D. What is assumed when a question is tagged C is evident from the C tag usage wiki: stackoverflow.com/tags/c/info"}, {"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1479906883, "post_id": 40765163, "comment_id": 68755192, "body": "@Lundin - That&#39;s not in the tag summary, and not clear from skimming the (very long) tag wiki either. So you&#39;re telling me if someone comes in with C code from an old compiler they don&#39;t know much about, tag it as &quot;C&quot; because that&#39;s as specific as they can get, they&#39;re liable to get told their code isn&#39;t really C? Community standards are community standards I guess, but it seems like a situation ripe for confusion. And what&#39;s the point of having a separate C11 tag, if the C tag means the same thing?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 0, "creation_date": 1479906971, "post_id": 40765163, "comment_id": 68755251, "body": "@T.E.D.: That&#39;s why <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> tells users to provide all relevant information. <a href=\"https://en.wikipedia.org/wiki/Ignorantia_juris_non_excusat\" rel=\"nofollow noreferrer\">Ignorantia legis non excusat</a>!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 3, "creation_date": 1479908110, "post_id": 40765163, "comment_id": 68756035, "body": "@T.E.D. It explicitly says that unless a specific standard is mentioned, the latest standard is assumed. Thus non-standard extensions are not assumed. This is not unique to C questions, but pretty much the community consensus for all programming language questions on SO. If you don&#39;t agree with the community, feel free to raise debate on meta."}, {"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1479909291, "post_id": 40765163, "comment_id": 68756832, "body": "@Lundin Fair enough."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 4, "last_activity_date": 1479905749, "creation_date": 1479905749, "answer_id": 40765163, "question_id": 40765108, "link": "https://stackoverflow.com/questions/40765108/what-does-int-a-mean-in-c/40765163#40765163", "title": "What does int A[]={} mean in C?", "body": "<pre><code>int A[]={};\n</code></pre>\n\n<p>is illegal in C. Empty initializers are not valid.\nSee <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9\" rel=\"nofollow noreferrer\">C11 draft, 6.7.9 Initialization</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1479905946, "post_id": 40765184, "comment_id": 68754533, "body": "The empty brackets <code>[]</code> are not the problem here."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1479906244, "post_id": 40765184, "comment_id": 68754731, "body": "Ehm, an empty initialiser is always wrong. Call it a defect in the standard (I think it would be straight-forward and useful), but that&#39;s how it is."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479906397, "post_id": 40765184, "comment_id": 68754832, "body": "@Olaf I truly suck today. Thanks again."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1479906386, "last_edit_date": 1479906386, "creation_date": 1479905818, "answer_id": 40765184, "question_id": 40765108, "link": "https://stackoverflow.com/questions/40765108/what-does-int-a-mean-in-c/40765184#40765184", "title": "What does int A[]={} mean in C?", "body": "<p>You should show some more context, and mention which compiler was being used.</p>\n\n<p>I don't think that code compiles with a standards-compliant compiler, the empty initializer list makes it invalid.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1479906119, "creation_date": 1479906119, "answer_id": 40765288, "question_id": 40765108, "link": "https://stackoverflow.com/questions/40765108/what-does-int-a-mean-in-c/40765288#40765288", "title": "What does int A[]={} mean in C?", "body": "<p>It means nothing, it is not valid C.</p>\n\n<p>C11 6.7.9 states that the two following forms are valid:</p>\n\n<pre><code>{ initializer-list } \n{ initializer-list , }\n</code></pre>\n\n<p>where <code>initializer-list</code> is defined as one of the following:</p>\n\n<pre><code>designationopt initializer\ninitializer-list , designationopt initializer\n</code></pre>\n\n<p>This could either be an assignment expression or a C99 designated initializer. An empty initializer list is not valid syntax.</p>\n"}], "owner": {"reputation": 73, "user_id": 7003386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1cd7ccb7d823a72c9caa3c0b60c9ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Kamoukou", "link": "https://stackoverflow.com/users/7003386/kamoukou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1479917736, "creation_date": 1479905607, "last_edit_date": 1479917736, "question_id": 40765108, "link": "https://stackoverflow.com/questions/40765108/what-does-int-a-mean-in-c", "title": "What does int A[]={} mean in C?", "body": "<p>I came across this piece of code. It doesn't give an error, but what exactly does it mean?</p>\n\n<pre><code>int A[]={};\n</code></pre>\n\n<p>EDIT: I had to edit this post because some of you asked for context, compiler and so on..</p>\n\n<p>I do not know much about compilers but i managed to found the version i'm using \"gcc (tdm-1) 4.9.2\".</p>\n\n<p>I have tried the code myself and it did run correctly, i was also able to read and write on the array. My question is : What exactly happens when i declare such an array ?</p>\n"}, {"tags": ["c", "unix", "pipe"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1479904825, "post_id": 40764814, "comment_id": 68753772, "body": "Doesn&#39;t work???"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479904969, "post_id": 40764814, "comment_id": 68753871, "body": "Please avoid using <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)\" rel=\"nofollow noreferrer\"><i>magic numbers</i></a>. Use predefined macros like <code>STDIN_FILENO</code> and <code>STDOUT_FILENO</code> instead. Also, you are missing a crucial header file inclusion."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479905163, "post_id": 40764814, "comment_id": 68753998, "body": "As for your problem, you need <i>two</i> pipes. You can&#39;t reuse an existing pipe."}, {"owner": {"reputation": 303, "user_id": 6217348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/9c87366e2007e70651720eb980b77fee?s=128&d=identicon&r=PG&f=1", "display_name": "ogarogar", "link": "https://stackoverflow.com/users/6217348/ogarogar"}, "edited": false, "score": 0, "creation_date": 1479906261, "post_id": 40764814, "comment_id": 68754744, "body": "So I edided my first post. Tried using two pipes, same outcome :/ . I thought that maybe me using dup2 with file is bad, but with our without it outcome doesn&#39;t change."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479906526, "post_id": 40764814, "comment_id": 68754912, "body": "Try doing it in smaller steps. First make sure the process with the <code>ls</code> command works as expected, without pipes. Then add a pipe for the output of the <code>ls</code> command, piping to the <i>parent</i> process. Then add another child process which just reads the pipe and outputs it. Then the second child process executes the <code>tr</code> command. And so on. Baby steps. Verifying that each step works as expected before continuing to the next step."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 6217348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/9c87366e2007e70651720eb980b77fee?s=128&d=identicon&r=PG&f=1", "display_name": "ogarogar", "link": "https://stackoverflow.com/users/6217348/ogarogar"}, "edited": false, "score": 0, "creation_date": 1479910483, "post_id": 40766442, "comment_id": 68757629, "body": "Thank you )for answer. So after adding signal(SIGPIPE,SIG_IGN) my program will ingore SIGPIPE signa,right? I added &lt;signal.h&gt;, added this command at the beginning of main(), but sadly nothing changes... Would u mind giving me some more hints how to make my programm work ?"}], "tags": [], "owner": {"reputation": 1380, "user_id": 2165806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2921d9118eb14ea118e5efe367c5203?s=128&d=identicon&r=PG", "display_name": "Vouze", "link": "https://stackoverflow.com/users/2165806/vouze"}, "is_accepted": false, "score": 2, "last_activity_date": 1479909483, "creation_date": 1479909483, "answer_id": 40766442, "question_id": 40764814, "link": "https://stackoverflow.com/questions/40764814/unnamed-pipes-in-c-chaning-stdin-stdout-in-fork/40766442#40766442", "title": "Unnamed pipes in C, chaning stdin,stdout in fork()", "body": "<p>When the other end of the pipe dies, your process receives a SIGPIPE which default to kill your process.</p>\n\n<p>So you should at least ignore it !</p>\n\n<pre><code>signal(SIGPIPE, SIG_IGN);\n</code></pre>\n\n<p>In order to be clean, you should close all pipe ends you won't use in the current process.</p>\n\n<p>For example :</p>\n\n<pre><code>case 0:\n    close(pdesk[0]);\n    close(pipedesk[0]);\n    close(pipedesk[1]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 0, "last_activity_date": 1479950985, "creation_date": 1479950985, "answer_id": 40776753, "question_id": 40764814, "link": "https://stackoverflow.com/questions/40764814/unnamed-pipes-in-c-chaning-stdin-stdout-in-fork/40776753#40776753", "title": "Unnamed pipes in C, chaning stdin,stdout in fork()", "body": "<p>I don't think that signal handling is relevant.  What is relevant is making sure that pipes are closed properly.  Processes won't get EOF on the reading end of a pipe if there's a process with the writing end open.  That includes the current process; if a process has both the reading and writing ends of a pipe open, it will never get EOF on the reading end of the pipe because there is a process that could, in theory, write to it.  Such a process therefore hangs permanently in a <code>read()</code> on the pipe.</p>\n\n<p>This version of your code works fine for me:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void)\n{\n    int pdesk[2];\n    int pipedesk[2];\n    int pid;\n\n    if (pipe(pipedesk) == -1 || pipe(pdesk) == -1)\n    {\n        perror(\"Pipe\");\n        exit(1);\n    }\n    //fprintf(stderr, \"PID %d: controller\\n\", (int)getpid());\n\n    switch (pid = fork())\n    {\n    case -1:\n        perror(\"Creating process\");\n        exit(1);\n    case 0:\n        //fprintf(stderr, \"PID %d: will be 'ls'\\n\", (int)getpid());\n        dup2(pdesk[1], STDOUT_FILENO);\n        close(pdesk[0]);        // JL\n        close(pdesk[1]);\n        close(pipedesk[0]);     // JL\n        close(pipedesk[1]);     // JL\n        execlp(\"ls\", \"ls\", \"-al\", (char *)NULL);\n        perror(\"ls\");\n        exit(1);\n    default:\n        //fprintf(stderr, \"PID %d: ls process PID = %d\\n\", (int)getpid(), pid);\n        if ((pid = fork()) == 0)\n        {\n            //fprintf(stderr, \"PID %d: about to fork 'tr'\\n\", (int)getpid());\n            if ((pid = fork()) == 0)\n            {\n                //fprintf(stderr, \"PID %d: will be 'tr'\\n\", (int)getpid());\n                dup2(pdesk[0], STDIN_FILENO);\n                close(pdesk[0]);\n                close(pdesk[1]);        // JL\n                dup2(pipedesk[1], STDOUT_FILENO);\n                close(pipedesk[0]);     // JL\n                close(pipedesk[1]);\n                execlp(\"tr\", \"tr\", \"a-z\", \"A-Z\", (char *)NULL);\n                perror(\"tr\");\n                exit(1);\n            }\n            //fprintf(stderr, \"PID %d: about to exec 'grep'\\n\", (int)getpid());\n            dup2(pipedesk[0], STDIN_FILENO);\n            close(pdesk[0]);        // JL\n            close(pdesk[1]);        // JL\n            close(pipedesk[0]);\n            close(pipedesk[1]);     // JL\n            int desk = open(\"testing\", O_WRONLY | O_CREAT, 0644);\n            if (desk == -1)\n            {\n                perror(\"opening file\");\n                exit(1);\n            }\n            dup2(desk, STDOUT_FILENO);\n            if (close(desk) == -1)\n            {\n                perror(\"closing file\");\n                exit(1);\n            }\n            execlp(\"grep\", \"grep\", \"X\", (char *)NULL);\n            perror(\"grep\");\n            exit(1);\n        }\n\n        //fprintf(stderr, \"PID %d: closing pipes\\n\", (int)getpid());\n        close(pdesk[0]);        // JL\n        close(pdesk[1]);        // JL\n        close(pipedesk[0]);     // JL\n        close(pipedesk[1]);     // JL\n\n        break;\n    }\n\n    int status;\n    int corpse;\n    while ((corpse = wait(&amp;status)) != -1)\n        fprintf(stderr, \"PID %d: child %d died 0x%.4X\\n\", (int)getpid(), corpse, status);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note all the lines marked <code>// JL</code> which are close operations.  While it is probably true that you can get away without a few of them (the ones for the first child, for example, are probably 'optional'), you should as a matter of routine close all the pipes that you are not using.  Note, in particular, the closes for the original parent process (the last four) \u2014 those are important.</p>\n\n<p>Not closing enough pipe descriptors is one of the most common mistakes when working with multiple pipes.  In general, if you use <code>dup2()</code> (or <code>dup()</code>) to duplicate a pipe descriptor to standard input or output, you should close <em>both</em> ends of the original pipe.  And if your process is not using the pipe descriptors at all, you should close them.</p>\n\n<p>Sample output from program:</p>\n\n<pre><code>$ ./pp61\nPID 35665: child 35666 died 0x0000\nPID 35665: child 35667 died 0x0000\n$\n</code></pre>\n\n<p>Sample contents of <code>testing</code> file:</p>\n\n<pre><code>DRWXR-XR-X   44 JLEFFLER  STAFF   1496 NOV 23 17:28 .\nDRWXR-XR-X  137 JLEFFLER  STAFF   4658 NOV 23 17:28 ..\nDRWXR-XR-X   18 JLEFFLER  STAFF    612 OCT 23 20:00 .GIT\nDR-XR-XR-X    4 JLEFFLER  STAFF    136 AUG 14 23:27 SAFE\nDRWXR-XR-X   35 JLEFFLER  STAFF   1190 NOV 23 09:19 UNTRACKED\n-RW-R--R--    1 JLEFFLER  STAFF     81 NOV 20 20:53 ANIMALS.TXT\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 SEP 12 00:03 DOC\nDRWXR-XR-X    8 JLEFFLER  STAFF    272 NOV 10 20:58 ETC\nDRWXR-XR-X   17 JLEFFLER  STAFF    578 JUL 15 19:06 INC\n-RW-R--R--    1 JLEFFLER  STAFF   1217 NOV 21 21:26 IX37.SQL\nDRWXR-XR-X    5 JLEFFLER  STAFF    170 JUL  9 23:47 LIB\n-RWXR-XR-X    1 JLEFFLER  STAFF   9052 NOV 19 13:01 LL73\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 NOV  6 15:40 LL73.DSYM\n-RWXR-XR-X    1 JLEFFLER  STAFF   8896 NOV  6 10:38 LL83\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 NOV  6 10:10 LL83.DSYM\n-RW-R--R--    1 JLEFFLER  STAFF    108 NOV 20 20:53 NEWANIMAL.TXT\n-RWXR-XR-X    1 JLEFFLER  STAFF   9124 NOV 20 20:38 PD43\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 NOV 20 20:38 PD43.DSYM\n-RWXR-XR-X    1 JLEFFLER  STAFF   9148 NOV 23 17:28 PP61\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 NOV 23 14:11 PP61.DSYM\n-RWXR-XR-X    1 JLEFFLER  STAFF   9016 NOV 23 11:07 RS19\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 NOV 23 10:03 RS19.DSYM\nDRWXR-XR-X  146 JLEFFLER  STAFF   4964 OCT  9 17:06 SRC\n-RWXR-XR-X    1 JLEFFLER  STAFF   8760 NOV 23 13:12 STP83\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 NOV 23 13:04 STP83.DSYM\nDRWXR-XR-X    6 JLEFFLER  STAFF    204 NOV  6 21:52 TMP\n-RWXR-XR-X    1 JLEFFLER  STAFF   8808 NOV 23 10:38 TR37\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 NOV 23 10:38 TR37.DSYM\n-RWXR-XR-X    1 JLEFFLER  STAFF  26772 NOV 21 20:18 XY73\nDRWXR-XR-X    3 JLEFFLER  STAFF    102 NOV 21 20:18 XY73.DSYM\n-RW-R--R--    1 JLEFFLER  STAFF    467 NOV 21 20:18 XY73.L\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1380, "user_id": 2165806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2921d9118eb14ea118e5efe367c5203?s=128&d=identicon&r=PG", "display_name": "Vouze", "link": "https://stackoverflow.com/users/2165806/vouze"}, "is_accepted": false, "score": 0, "last_activity_date": 1480416681, "creation_date": 1480416681, "answer_id": 40863983, "question_id": 40764814, "link": "https://stackoverflow.com/questions/40764814/unnamed-pipes-in-c-chaning-stdin-stdout-in-fork/40863983#40863983", "title": "Unnamed pipes in C, chaning stdin,stdout in fork()", "body": "<p>Here is an implementation which is easy to understand.</p>\n\n<p>One end of a pipe becomes closed when every process did close the other end of the pipe. So this is very important to close every pipes which are useless for the current process.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n\nvoid closeAll(const int * fd_to_close){\n    int i = 0;\n    while(1){\n        int fd = fd_to_close[i];\n        if(fd == -1){\n            break;\n        }\n        close(fd);\n        i++;\n    }\n}\n\npid_t forkExec(int my_stdin, int my_stdout, int my_stderr, char *const argv[], const int* fd_to_close){\n    pid_t child = fork();\n\n    if(child != 0){\n        return child;\n    }\n\n    if(my_stdin != STDIN_FILENO){\n        dup2(my_stdin, STDIN_FILENO);\n    }\n    if(my_stdout != STDOUT_FILENO){\n        dup2(my_stdout, STDOUT_FILENO);\n    }\n    if(my_stderr != STDERR_FILENO){\n        dup2(my_stderr, STDERR_FILENO);\n    }\n\n    closeAll(fd_to_close);\n\n    execvp(argv[0], argv);\n\n    perror(\"Executing \");\n\n    exit(1);\n}\n\nvoid waitFor(pid_t child){\n    int status;\n    pid_t w = waitpid(child, &amp;status, 0);\n    if(w == -1){\n        perror(\"child \");\n    } else {\n        printf(\"Exit status of child %d was %d, killed by signal %d %s\\n\", (int) child, WEXITSTATUS(status), WTERMSIG(status), WCOREDUMP(status) ? \"with coredump\" : \"\");\n    }\n}\n\nvoid main(int argc, char**argv){\n    int pipe1[2];\n    int pipe2[2];\n    int fd_to_close[10];\n\n    signal(SIGPIPE, SIG_IGN);\n\n    if(pipe(pipe1)==-1 || pipe(pipe2)==-1){\n        perror(\"Pipe\");\n        exit(1);\n    }\n\n    fd_to_close[0] = pipe1[0];\n    fd_to_close[1] = pipe1[1];\n    fd_to_close[2] = pipe2[0];\n    fd_to_close[3] = pipe2[1];\n    fd_to_close[4] = -1;\n\n    char* cmd1[] = {\"ls\", \"-al\", NULL};\n    char* cmd2[] = {\"tr\", \"a-z\", \"A-Z\", NULL};\n    char* cmd3[] = {\"grep\", \"X\", NULL};\n\n    pid_t child1 = forkExec(STDIN_FILENO, pipe1[1],      STDERR_FILENO, cmd1, fd_to_close);\n    pid_t child2 = forkExec(pipe1[0],     pipe2[1],      STDERR_FILENO, cmd2, fd_to_close);\n    pid_t child3 = forkExec(pipe2[0],     STDOUT_FILENO, STDERR_FILENO, cmd3, fd_to_close);\n\n    // Very important :\n    closeAll(fd_to_close);\n\n    printf(\"pid of %s is %d\\n\", cmd1[0], (int)child1);\n    printf(\"pid of %s is %d\\n\", cmd2[0], (int)child2);\n    printf(\"pid of %s is %d\\n\", cmd3[0], (int)child3);\n\n    waitFor(child1);\n    waitFor(child2);\n    waitFor(child3);\n}\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 6217348, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/9c87366e2007e70651720eb980b77fee?s=128&d=identicon&r=PG&f=1", "display_name": "ogarogar", "link": "https://stackoverflow.com/users/6217348/ogarogar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 40776753, "answer_count": 3, "score": 2, "last_activity_date": 1480416681, "creation_date": 1479904738, "last_edit_date": 1479906148, "question_id": 40764814, "link": "https://stackoverflow.com/questions/40764814/unnamed-pipes-in-c-chaning-stdin-stdout-in-fork", "title": "Unnamed pipes in C, chaning stdin,stdout in fork()", "body": "<p>I'm trying to write a program that will implement command:</p>\n\n<pre><code>ls -al | tr 'a-z' 'A-Z' | grep X &gt; testing\n</code></pre>\n\n<p>Basically I want to learn how to use piping twice in C. There is a lot of post where we're using only one '|'. I made some attempts based on examples with only one '|' but sadly it doesn't work. There is a code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#define MAX 512\nint main(int argc,char** argv){\n    int pdesk[2];\n    int pipedesk[2];\n    if(pipe(pipedesk)==-1 || pipe(pdesk)==-1){\n        perror(\"Pipe\");\n        exit(1);\n    }\n    switch(fork()){\n        case -1 :\n                perror(\"Creating process\");\n                exit(1);\n        case 0:\n                dup2(pdesk[1],STDOUT_FILENO);\n                close(pdesk[1]);\n                execlp(\"ls\",\"ls\",\"-al\",NULL);\n                perror(\"ls\");\n                exit(1);\n        default: {\n                if(fork()==0){\n                    if(fork()==0){\n                        dup2(pdesk[0],STDIN_FILENO);\n                        close(pdesk[0]);\n                        dup2(pipedesk[1],STDOUT_FILENO);\n                        close(pipedesk[1]);\n                        execlp(\"tr\",\"tr\",\"a-z\",\"A-Z\",NULL);\n                        perror(\"tr\");\n                        exit(1);\n                    }\n                    dup2(pipedesk[0],STDIN_FILENO);\n                    close(pipedesk[0]);\n                    int desk=open(\"testing\",O_WRONLY|O_CREAT,0640);\n                    if(desk==-1){\n                        perror(\"opening file\");\n                        exit(1);\n                    }\n                    dup2(desk,STDOUT_FILENO);\n                    if(close(desk)==-1){\n                        perror(\"closing file\");\n                        exit(1);\n                    }\n                    execlp(\"grep\",\"grep\",\"X\",NULL);\n                    perror(\"grep\");\n                    exit(1);\n                }\n//              wait(NULL);\n\n        }\n        return 0;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "nested", "structure", "typedef"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1479905556, "post_id": 40764786, "comment_id": 68754267, "body": "We are no review or tutoring service. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1479905672, "post_id": 40764786, "comment_id": 68754339, "body": "TypeStudent and TypeStudentConfidential are different structures. You should not store one&#39;s address in a pointer of another type."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1479905935, "post_id": 40764786, "comment_id": 68754520, "body": "<code>Now I&#39;m stuck....</code> is a pretty weak problem-statement. Please described clearly the problem you have, e.g. compile error or runtime error or.... BTW: Storing <code>TypeStudentConfidential</code> in something that expects <code>TypeStudent</code> will not work. Maybe you need a <code>union</code>"}, {"owner": {"reputation": 229, "user_id": 6915288, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/70144e092375f066f0c4f2258b3380f1?s=128&d=identicon&r=PG&f=1", "display_name": "HardCoder", "link": "https://stackoverflow.com/users/6915288/hardcoder"}, "edited": false, "score": 1, "creation_date": 1479906433, "post_id": 40764786, "comment_id": 68754856, "body": "I have updated the snippet."}, {"owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "edited": false, "score": 0, "creation_date": 1479906742, "post_id": 40764786, "comment_id": 68755079, "body": "I believe your snippet is indented incorrectly... Please fix it? Additionally, this is not a <i>minimal working example</i>; please see <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 6915288, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/70144e092375f066f0c4f2258b3380f1?s=128&d=identicon&r=PG&f=1", "display_name": "HardCoder", "link": "https://stackoverflow.com/users/6915288/hardcoder"}, "edited": false, "score": 0, "creation_date": 1479969424, "post_id": 40767799, "comment_id": 68782230, "body": "thankyou. this solves the question from my perspective.   I am using the example with an edit, i.e I have removed <b>.students =</b> and <b>.studentConfs =</b>"}, {"owner": {"reputation": 229, "user_id": 6915288, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/70144e092375f066f0c4f2258b3380f1?s=128&d=identicon&r=PG&f=1", "display_name": "HardCoder", "link": "https://stackoverflow.com/users/6915288/hardcoder"}, "edited": false, "score": 1, "creation_date": 1480940823, "post_id": 40767799, "comment_id": 69157539, "body": "while using something similar using ARM Windows GCC C Compiler, i got an error response saying w.r.t this example: dereferencing pointer to incomplete type for Name in students of type TypeStudent"}], "tags": [], "owner": {"reputation": 383, "user_id": 3317285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/961e92b0d78599d98eeadf724a0e5be8?s=128&d=identicon&r=PG&f=1", "display_name": "theKunz", "link": "https://stackoverflow.com/users/3317285/thekunz"}, "is_accepted": true, "score": 2, "last_activity_date": 1479913205, "creation_date": 1479913205, "answer_id": 40767799, "question_id": 40764786, "link": "https://stackoverflow.com/questions/40764786/nested-structure-usage-in-c/40767799#40767799", "title": "Nested Structure Usage in C", "body": "<pre><code>typedef struct TypeClass {\n    char class_name[20];\n    struct TypeStudent* type;\n} TypeClass;\n</code></pre>\n\n<p>and to access</p>\n\n<pre><code>Typeclass a = {\"classA\", NULL};\nTypeclass b = {\"classB\", NULL};\na.type = &amp;b;\nprintf(\"%s\\n\", a.type-&gt;class_name); //prints b's classname\n</code></pre>\n\n<p>Now if you want XXXXXXXXXX to be either a TypeStudent OR TypeStudentConfidential (as your code snippit seems to suggest) you'll probably need to use a <code>union</code>, like so:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\ntypedef struct TypeClass{\n        char class_name[20];\n        union type {\n                struct TypeStudent* students;\n                struct TypeStudentConfidential* studentConfs;\n        } type;\n} TypeClass;\n\ntypedef struct TypeStudent {\n        int age;\n        int RollNo;\n        int Rank;\n        char Name[10];\n} TypeStudent;\n\ntypedef struct TypeStudentConfidential {\n        int Code;\n        int ParentCode;\n} TypeStudentConfidential;\n\nint main() {\n        //TypeClass a[2] = {{\"C0\", {NULL}}, {\"C1\", {NULL}}};\n\n        TypeStudent studs[2]  = {{10, 10, 10, \"Joe\"}, {5, 5, 5, \"Bob\"}};\n        TypeStudentConfidential confs[2]  = {{1, 2}, {3, 4}};\n\n        TypeClass a[2] = {{\"C0\", {.students = studs}}, {\"C1\", {.studentConfs = confs}}};\n\n        //a[0].type.students = studs;\n        //a[1].type.studentConfs = confs;\n\n        printf(\"%s, %s\\n\", a[0].type.students-&gt;Name, (a[0].type.students + 1)-&gt;Name);\n        printf(\"%i, %i\\n\", a[1].type.studentConfs-&gt;Code, (a[1].type.studentConfs + 1)-&gt;Code);\n        return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 6915288, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/70144e092375f066f0c4f2258b3380f1?s=128&d=identicon&r=PG&f=1", "display_name": "HardCoder", "link": "https://stackoverflow.com/users/6915288/hardcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 40767799, "answer_count": 1, "score": 2, "last_activity_date": 1479969115, "creation_date": 1479904645, "last_edit_date": 1479969115, "question_id": 40764786, "link": "https://stackoverflow.com/questions/40764786/nested-structure-usage-in-c", "title": "Nested Structure Usage in C", "body": "<p>From the below given snippet. </p>\n\n<pre><code>            typedef struct {\n                int Code;\n                int ParentCode;\n            }TypeStudentConfidential;\n\n            typedef struct {\n                int age;\n                int RollNo;\n                int Rank;\n                char Name[10];\n            }TypeStudent;\n\n            typedef struct {\n                char class_name[20];\n                //XXXXXXXXXXXXXXXXX //How could I declare the TypeClass element here?\n            }TypeClass;\n\n            int main()\n            {\n\n               const TypeStudent  Stu_Details[] = {\n                 { 3,   1,  18, \"Mahesh\"},\n                 { 3,   1,   7,  \"Kumar\"}\n               };\n\n               const TypeStudentConfidential Conf_Details[] = {\n                 { 761, 814},\n                 { 124, 562}\n               };\n\n               const TypeClass Class_Details[]= {\n                 { \"Class 10\",     Stu_Details},  //struct TypeStudent data\n                 { \"Class 8\",     Conf_Details}   //struct TypeStudentConfidential data\n               };\n\n               return 0;\n            }\n</code></pre>\n\n<p>Questions:</p>\n\n<p>1) How to define the <strong><em>XXXXXX</em></strong> marked typedef struct element</p>\n\n<p>2) How to access the <strong><em>XXXXXX</em></strong> marked element from <strong><em>Class_Details</em></strong></p>\n"}, {"tags": ["c", "gcc", "time", "clang", "strptime"], "comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1479903712, "post_id": 40764356, "comment_id": 68753096, "body": "What&#39;s the return value of strptime() on OSX? What happens when you initialize <code>t</code> with a valid date before calling strptime()?"}, {"owner": {"reputation": 31746, "user_id": 1428, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/aafff1b0212211023ce91659a1b0504c?s=128&d=identicon&r=PG", "display_name": "lindelof", "link": "https://stackoverflow.com/users/1428/lindelof"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1479904227, "post_id": 40764356, "comment_id": 68753407, "body": "I&#39;ve updated the program according to @Jens&#39;s suggestion."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1479904343, "post_id": 40764356, "comment_id": 68753455, "body": "It gives 0 for me on OS X.  <code>clang-700.1.81</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479935673, "post_id": 40764356, "comment_id": 68772362, "body": "Taking your code verbatim and running on macOS Sierra 10.12.1 (using either GCC 6.2.0 or Clang from XCode 8.0), I get the result 6.  I added two lines: <code>time_t rt = mktime(&amp;t);</code> after the call to <code>strptime()</code> and <code>printf(&quot;%lld\\n&quot;, (long long)rt);</code> and the result changed to 0.  Now, for that, I have no explanation!"}, {"owner": {"reputation": 31746, "user_id": 1428, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/aafff1b0212211023ce91659a1b0504c?s=128&d=identicon&r=PG", "display_name": "lindelof", "link": "https://stackoverflow.com/users/1428/lindelof"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479935772, "post_id": 40764356, "comment_id": 68772401, "body": "@JonathanLeffler right, I can confirm that following the call to <code>strptime()</code> with a call to <code>mktime()</code> is a usable workaround for me. But I am at a loss to explain the observed behaviour."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1481569576, "post_id": 40764356, "comment_id": 69419814, "body": "Use <code>struct tm t = {0};       tm.tm_isdst = -1;</code> <i>before</i> using <code>&amp;t</code> in later code."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1479952694, "creation_date": 1479952694, "answer_id": 40776943, "question_id": 40764356, "link": "https://stackoverflow.com/questions/40764356/why-doesnt-strptime-set-tm-wday-properly-in-this-example/40776943#40776943", "title": "Why doesn&#39;t strptime() set tm_wday properly in this example?", "body": "<p>Following on from the observation in the comments, here's a program derived from your code which illustrates, even if it does not explain, what is going on:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic void dump_struct_tm(const char *tag, const struct tm *t)\n{\n    printf(\"%s:\\n\", tag);\n    printf(\"  Time: %.2d:%.2d:%.2d  \", t-&gt; tm_hour, t-&gt;tm_min, t-&gt;tm_sec);\n    printf(\"  Date: %.4d-%.2d-%.2d\\n\", t-&gt;tm_year + 1900, t-&gt;tm_mon + 1, t-&gt;tm_mday);\n    printf(\"  Wday: %d Yday: %.3d (DST %d Zone [%s] offset %ld)\\n\", \n           t-&gt;tm_wday, t-&gt;tm_yday, t-&gt;tm_isdst, t-&gt;tm_zone, t-&gt; tm_gmtoff);\n}\n\nint main(void)\n{\n    time_t epoch = 0;\n    struct tm t;\n    char *ret;\n    t = *localtime(&amp;epoch);\n    dump_struct_tm(\"Epoch\", &amp;t);\n    putchar('\\n');\n\n    ret = strptime(\"2015-04-19 12:00:00\", \"%F %T\", &amp;t);\n    dump_struct_tm(\"strptime()\", &amp;t);\n    time_t rt = mktime(&amp;t);\n    dump_struct_tm(\"mktime()\", &amp;t);\n    printf(\"Weekday: %d\\n\", t.tm_wday);\n    printf(\"strptime() returned %p (%d)\\n\", ret, *ret);\n    printf(\"Unix time: %lld\\n\\n\", (long long)rt);\n\n    t.tm_isdst = -1;\n    ret = strptime(\"2015-04-19 12:00:00\", \"%F %T\", &amp;t);\n    dump_struct_tm(\"strptime()\", &amp;t);\n    rt = mktime(&amp;t);\n    dump_struct_tm(\"mktime()\", &amp;t);\n    printf(\"Weekday: %d\\n\", t.tm_wday);\n    printf(\"strptime() returned %p (%d)\\n\", ret, *ret);\n    printf(\"Unix time: %lld\\n\\n\", (long long)rt);\n\n    return 0;\n}\n</code></pre>\n\n<p>This analyzes the <code>struct tm</code> (as defined by the manual page on macOS Sierra) at different points.  Note how the setting of <code>tm_isdst</code> alters the behaviour.</p>\n\n<pre><code>Epoch:\n  Time: 16:00:00    Date: 1969-12-31\n  Wday: 3 Yday: 364 (DST 0 Zone [PST] offset -28800)\n\nstrptime():\n  Time: 12:00:00    Date: 2015-04-19\n  Wday: 6 Yday: 108 (DST 0 Zone [(null)] offset -28800)\nmktime():\n  Time: 13:00:00    Date: 2015-04-19\n  Wday: 0 Yday: 108 (DST 1 Zone [PDT] offset -25200)\nWeekday: 0\nstrptime() returned 0x100c82f0c (0)\nUnix time: 1429473600\n\nstrptime():\n  Time: 12:00:00    Date: 2015-04-19\n  Wday: 6 Yday: 108 (DST -1 Zone [(null)] offset -25200)\nmktime():\n  Time: 12:00:00    Date: 2015-04-19\n  Wday: 0 Yday: 108 (DST 1 Zone [PDT] offset -25200)\nWeekday: 0\nstrptime() returned 0x100c82f0c (0)\nUnix time: 1429470000\n</code></pre>\n\n<p>I'm still not clear why <code>strptime()</code> mispopulates the <code>tm_wday</code> field, especially since it seems to get the <code>tm_yday</code> field correct.  The 19th of April is day 108 of the year when the 1st of January is day 0.</p>\n"}, {"tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 1, "last_activity_date": 1481573280, "last_edit_date": 1495539943, "creation_date": 1481567751, "answer_id": 41107319, "question_id": 40764356, "link": "https://stackoverflow.com/questions/40764356/why-doesnt-strptime-set-tm-wday-properly-in-this-example/41107319#41107319", "title": "Why doesn&#39;t strptime() set tm_wday properly in this example?", "body": "<p>I think the reason is simply that, by design, <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strptime.html\" rel=\"nofollow noreferrer\">the <code>strptime</code> function only sets the fields that appear in the format</a>.  Essentially, <code>strptime(3)</code> just parses fields from a given string using a supplied format into a referenced structure and performs no other computation or logic.  Since your code uses the format <code>%F %T</code> then only the fields corresponding to <code>%Y-%m-%d</code> and <code>%H:%M:%S</code> (namely <code>tm_{year,mon,mday,hour,min,sec}</code>) are modified.</p>\n\n<p>You can experiment by explicitly setting <code>t.tm_wday</code> to some known value that shouldn't by set by <code>strptime</code> (e.g. 123) and verify that it is not changed by that call.  Note that you should probably initialize your <code>struct tm</code> before playing with it since any of those fields may contain random values, e.g. <code>struct tm t; memset((void *) &amp;t, 0, sizeof(t));</code>.</p>\n\n<p>Moreover, this <a href=\"http://man7.org/linux/man-pages/man3/strptime.3.html\" rel=\"nofollow noreferrer\">Linux <code>strptime(3)</code> man page</a> contains the following note which leads me to believe that the special behavior it describes is non-standard (though obviously desirable):</p>\n\n<blockquote>\n  <p>The glibc implementation does not touch those fields which are not explicitly specified, except that it recomputes the <code>tm_wday</code> and <code>tm_yday</code> field if any of the year, month, or day elements changed.</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/a/6054071/244128\">This answer shows how</a> you can use the trio of <code>strptime/mktime/localtime</code> (or <code>gmtime</code>) to populate the <code>tm.tm_wday</code> field for dates after the UNIX epoch.</p>\n"}], "owner": {"reputation": 31746, "user_id": 1428, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/aafff1b0212211023ce91659a1b0504c?s=128&d=identicon&r=PG", "display_name": "lindelof", "link": "https://stackoverflow.com/users/1428/lindelof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1481573280, "creation_date": 1479903463, "last_edit_date": 1479915649, "question_id": 40764356, "link": "https://stackoverflow.com/questions/40764356/why-doesnt-strptime-set-tm-wday-properly-in-this-example", "title": "Why doesn&#39;t strptime() set tm_wday properly in this example?", "body": "<p>I'm using <code>strptime(3)</code> to parse a string representing a date:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n\nint main () {\n  struct tm t;\n  strptime(\"2015-04-19 12:00:00\", \"%F %T\", &amp;t); /* Sunday */\n  printf(\"%d\\n\", t.tm_wday); /* Should print 0 */\n  return 0;\n}\n</code></pre>\n\n<p>That date is a Sunday, according to the output of <code>cal -y 2015</code>. But when I compile this on OSX (presumably with clang) it prints <code>6</code>:</p>\n\n<pre><code>$ gcc timetest.c ; ./a.out\n6\n</code></pre>\n\n<p>whereas on Debian it prints the (correct) <code>0</code>:</p>\n\n<pre><code>$ gcc timetest.c ; ./a.out\n0\n</code></pre>\n\n<p>Any explanation for the difference?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is the same program, except that <code>t</code> is initialised with a valid time and I'm reporting the return value of <code>strptime()</code>:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n\nint main () {\n  time_t epoch = 0;\n  struct tm t;\n  char *ret;\n  t = *localtime(&amp;epoch);\n  ret = strptime(\"2015-04-19 12:00:00\", \"%F %T\", &amp;t); /* Sunday */\n  printf(\"%d\\n\", t.tm_wday); /* Should print 0 */\n  printf(\"strptime() returned %p (%d)\\n\", ret, *ret);\n  return 0;\n}\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>$ gcc timetest.c ; ./a.out\n6\nstrptime() returned 0x10c72af83 (0)\n</code></pre>\n\n<p>Here is the <code>clang</code> version I use:</p>\n\n<pre><code>$ clang -v\nApple LLVM version 8.0.0 (clang-800.0.42.1)\nTarget: x86_64-apple-darwin16.1.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1479902519, "post_id": 40763984, "comment_id": 68752268, "body": "Should be EOF, right?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1479902557, "post_id": 40763984, "comment_id": 68752301, "body": "Check if the file size is zero?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1479902630, "post_id": 40763984, "comment_id": 68752348, "body": "Also, it would help if you could tell us what you&#39;re actually <i>doing</i>! Preferably by creating a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>. Also include the actual contents of the file, if there is any. And lastly please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a> if you haven&#39;t done it yet."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1479902664, "post_id": 40763984, "comment_id": 68752376, "body": "A text file contains characters which are <b>integers</b> in C. <code>NULL</code> is a macro with a <i>null <b>pointer</b> constant</i>. =&gt; A text file cannot contain <code>NULL</code>!"}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 2119, "user_id": 1151769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce80befdbc36cc292575c63dc2ac6cc5?s=128&d=identicon&r=PG", "display_name": "Chandana Kumara", "link": "https://stackoverflow.com/users/1151769/chandana-kumara"}, "edited": false, "score": 1, "creation_date": 1479902822, "post_id": 40763984, "comment_id": 68752486, "body": "@ChandanaKumara: Tip: C is not C++."}, {"owner": {"reputation": 2119, "user_id": 1151769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce80befdbc36cc292575c63dc2ac6cc5?s=128&d=identicon&r=PG", "display_name": "Chandana Kumara", "link": "https://stackoverflow.com/users/1151769/chandana-kumara"}, "reply_to_user": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "edited": false, "score": 0, "creation_date": 1479902978, "post_id": 40763984, "comment_id": 68752583, "body": "@Bodo Thiesen:  I removed Duplicate flag. But I think it may duplicate."}], "answers": [{"tags": [], "owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "is_accepted": false, "score": 1, "last_activity_date": 1479903806, "creation_date": 1479903806, "answer_id": 40764492, "question_id": 40763984, "link": "https://stackoverflow.com/questions/40763984/how-can-i-know-text-file-is-empty-or-notin-c/40764492#40764492", "title": "How can I know text file is empty or not?(in C)", "body": "<p>If you're under Linux, you can use <a href=\"https://linux.die.net/man/2/stat\" rel=\"nofollow noreferrer\"><code>stat</code> or <code>fstat</code></a>:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\nint stat(const char *path, struct stat *buf);\nint fstat(int fd, struct stat *buf);\nint lstat(const char *path, struct stat *buf);\n</code></pre>\n\n<p>Will give you this information:</p>\n\n<pre><code>struct stat {\n    dev_t     st_dev;     /* ID of device containing file */\n    ino_t     st_ino;     /* inode number */\n    mode_t    st_mode;    /* protection */\n    nlink_t   st_nlink;   /* number of hard links */\n    uid_t     st_uid;     /* user ID of owner */\n    gid_t     st_gid;     /* group ID of owner */\n    dev_t     st_rdev;    /* device ID (if special file) */\n    off_t     st_size;    /* total size, in bytes */\n    blksize_t st_blksize; /* blocksize for file system I/O */\n    blkcnt_t  st_blocks;  /* number of 512B blocks allocated */\n    time_t    st_atime;   /* time of last access */\n    time_t    st_mtime;   /* time of last modification */\n    time_t    st_ctime;   /* time of last status change */\n};\n</code></pre>\n\n<p>To check for the size using <code>stat</code>:</p>\n\n<pre><code>struct stat info;\n\nif(stat(filepath, &amp;info) &lt; 0) {\n    /* error */\n}\n\nif(info.st_size == 0) { \n    /* file is empty */\n}\n</code></pre>\n\n<p>Or using <code>fstat</code>:</p>\n\n<pre><code>int fd = open(filepath, O_RDONLY);\nstruct stat info;\n\nif(fstat(fd, &amp;info) &lt; 0) {\n    /* error */\n}\n\nif(info.st_size == 0) { \n    /* file is empty */\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1479903836, "creation_date": 1479903836, "answer_id": 40764501, "question_id": 40763984, "link": "https://stackoverflow.com/questions/40763984/how-can-i-know-text-file-is-empty-or-notin-c/40764501#40764501", "title": "How can I know text file is empty or not?(in C)", "body": "<p>If the file was successfully open for read, as per <code>fopen(filename, \"r\")</code>, you can verify if it is empty before any read operation this way:</p>\n\n<pre><code>int is_empty_file(FILE *fp) {\n    int c = getc(fp);\n    if (c == EOF)\n        return 1;\n    ungetc(c, fp);\n    return 0;\n}\n</code></pre>\n\n<p><code>ungetc()</code> is guaranteed to work for at least one character.  The above function will return <code>1</code> if the file is empty or if it cannot be read, due to an I/O error.  You can tell which by testing <code>ferr(fp)</code> or <code>feof(fp)</code>.</p>\n\n<p>If the file is a stream associated to a device or a terminal, the test code will block until at least one byte can be read, or end of file is signaled.</p>\n\n<p>If the file is a regular file, you could also use a system specific API to determine the file size, such as <code>stat</code>, <code>lstat</code>, <code>fstat</code> (on Posix systems).</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1479904752, "post_id": 40764701, "comment_id": 68753724, "body": "3 problems: <code>ftell()</code> might not return the file size on text streams, it might fail on streams where seeking is not supported such as the terminal, and it might return <code>0</code> if type <code>int</code> is too small for the actual file size, for example if the file is exactly 4GB."}, {"owner": {"reputation": 973, "user_id": 2681245, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b94bf2509faa4d8e67e99fc550722f04?s=128&d=identicon&r=PG&f=1", "display_name": "Rocoder", "link": "https://stackoverflow.com/users/2681245/rocoder"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479906985, "post_id": 40764701, "comment_id": 68755262, "body": "@chqrlie yes, It has limitations. but it still satisfy the answer as asker wanted to know the file has some data or not. Didn&#39;t assume these cases. Thanks for pointing out."}], "tags": [], "owner": {"reputation": 973, "user_id": 2681245, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b94bf2509faa4d8e67e99fc550722f04?s=128&d=identicon&r=PG&f=1", "display_name": "Rocoder", "link": "https://stackoverflow.com/users/2681245/rocoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1479904379, "creation_date": 1479904379, "answer_id": 40764701, "question_id": 40763984, "link": "https://stackoverflow.com/questions/40763984/how-can-i-know-text-file-is-empty-or-notin-c/40764701#40764701", "title": "How can I know text file is empty or not?(in C)", "body": "<p>you can do using <code>ftell</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint get_file_size (char *filename) {\n   FILE *fp;\n   int len;\n\n   fp = fopen(filename, \"r\");\n   if( fp == NULL )  {\n      perror (\"Error opening file\");\n      return(-1);\n   }\n   fseek(fp, 0, SEEK_END);\n\n   len = ftell(fp);\n   fclose(fp);\n\n   return(len);\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 1965141, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b48f3a29bf805f21a43fc85e5b8befc3?s=128&d=identicon&r=PG", "display_name": "Square", "link": "https://stackoverflow.com/users/1965141/square"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 1, "accepted_answer_id": 40764501, "answer_count": 3, "score": 1, "last_activity_date": 1479904379, "creation_date": 1479902413, "question_id": 40763984, "link": "https://stackoverflow.com/questions/40763984/how-can-i-know-text-file-is-empty-or-notin-c", "title": "How can I know text file is empty or not?(in C)", "body": "<p>I'm trying to detect text file is empty or not in C.\n(values are initialized in NULL)\nWhenever read first in value(using fscanf), it always returns file has zero,\neven if it has value \"0\" or \"empty\".</p>\n\n<p>How can I know the target text file is empty or not?\n(it should be distinguished even it has \"0\" in first letter)</p>\n"}, {"tags": ["objective-c", "c", "macos"], "comments": [{"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1479909587, "post_id": 40763978, "comment_id": 68757018, "body": "I doubt it. That&#39;s not information the kernel knows about a process. It&#39;s specific to the user session and is probably managed by the Window Server. An app can query the Window Server for information that&#39;s not available via system calls. At first it won&#39;t seem relevant, but read through <a href=\"https://developer.apple.com/library/content/technotes/tn2083/_index.html\" rel=\"nofollow noreferrer\">this</a> for some useful info."}, {"owner": {"reputation": 1797, "user_id": 880837, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4068f6775d1b8a1b672c05d23bbf6f87?s=128&d=identicon&r=PG", "display_name": "Tiago", "link": "https://stackoverflow.com/users/880837/tiago"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1479923987, "post_id": 40763978, "comment_id": 68766483, "body": "@KenThomases Thanks, that&#39;s interesting. I&#39;ve been looking at APIs that interact with the window server. One seems to be CGWindowListCopyWindowInfo, for which apple have a sample: <a href=\"https://developer.apple.com/library/content/samplecode/SonOfGrab/\" rel=\"nofollow noreferrer\">developer.apple.com/library/content/samplecode/SonOfGrab</a> doesn&#39;t look like it exposes whether or not an app or window is the one in front. If you have ideas, they&#39;re appreciated."}, {"owner": {"reputation": 1797, "user_id": 880837, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4068f6775d1b8a1b672c05d23bbf6f87?s=128&d=identicon&r=PG", "display_name": "Tiago", "link": "https://stackoverflow.com/users/880837/tiago"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1479924025, "post_id": 40763978, "comment_id": 68766504, "body": "Alternatives to the above might end up more intensive that just using the NSRunningApplication APIs, in which case I won&#39;t transition. Need to keep digging."}], "owner": {"reputation": 1797, "user_id": 880837, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4068f6775d1b8a1b672c05d23bbf6f87?s=128&d=identicon&r=PG", "display_name": "Tiago", "link": "https://stackoverflow.com/users/880837/tiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479902394, "creation_date": 1479902394, "question_id": 40763978, "link": "https://stackoverflow.com/questions/40763978/running-nsrunningapplication-isactive-using-raw-libproc", "title": "Running NSRunningApplication isActive using raw libproc", "body": "<p>In Objective-C, it's possible to get a list of all running processes using the shared NSWorkspace, e.g:\nNSRunningApplication *currApp in [[NSWorkspace sharedWorkspace] runningApplications]</p>\n\n<p>You can then loop through each individual NSRunningApplication, and check if a specific process is currently the active one (directly being used by the user) using the NSRunningApplication isActive method. If you're currently browsing the web in chrome, the active process would be the one used by that chrome instance.</p>\n\n<p>In a similar way, you can loop through all the currently active processes using libproc, via proc_listpids. I see that libproc provides access to low level process information, such as process name, number of threads, CPU usage, task priority, etc. Much like what activity monitor shows in OSX.</p>\n\n<p>Is there a way of seeing via libproc if a specific process is the currently active one? I assume that the NSRunningApplication isActive call uses this API in some way, would anyone know how? I'm trying to do this in plain C on OSX/MacOS.</p>\n"}, {"tags": ["c", "structure"], "comments": [{"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1479902698, "post_id": 40762824, "comment_id": 68752400, "body": "@StoryTeller: Tip: C is not C++."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "edited": false, "score": 0, "creation_date": 1479902817, "post_id": 40762824, "comment_id": 68752478, "body": "@BodoThiesen Tip: Forward declarations work pretty much the same."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1479903059, "post_id": 40762824, "comment_id": 68752639, "body": "Peter, I also second what Bodo mentions in his answer. Don&#39;t typdef everything. Your <code>struct</code>s are a heavy thing, and I subscribe to the <a href=\"http://yarchive.net/comp/linux/typedefs.html\" rel=\"nofollow noreferrer\">school of thought that it should stand out in code</a>."}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1479903477, "post_id": 40762824, "comment_id": 68752919, "body": "@StoryTeller: Yes, however a beginner may not be able to understand, what he would have to do in his own code based on what he read there."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "edited": false, "score": 0, "creation_date": 1479903572, "post_id": 40762824, "comment_id": 68752992, "body": "@BodoThiesen, now you see, if you had just said <i>that</i> over the snarky tip, I&#39;d have been swayed right away."}], "answers": [{"comments": [{"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "edited": false, "score": 0, "creation_date": 1479901773, "post_id": 40762947, "comment_id": 68751802, "body": "tHTable is not a struct"}], "tags": [], "owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "is_accepted": true, "score": 0, "last_activity_date": 1479899655, "creation_date": 1479899655, "answer_id": 40762947, "question_id": 40762824, "link": "https://stackoverflow.com/questions/40762824/structure-containing-element-which-array-contains-same-structures/40762947#40762947", "title": "Structure containing element which array contains same structures", "body": "<p>You should use forward declarations.</p>\n\n<p>Before your iSymbol structure declaration, declare the other structure:</p>\n\n<pre><code>struct tHTable;\n</code></pre>\n\n<p>You do not have to write all of it's properties, as this is only a forward declaration.</p>\n"}, {"tags": [], "owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "is_accepted": false, "score": 1, "last_activity_date": 1479901745, "creation_date": 1479901745, "answer_id": 40763723, "question_id": 40762824, "link": "https://stackoverflow.com/questions/40762824/structure-containing-element-which-array-contains-same-structures/40763723#40763723", "title": "Structure containing element which array contains same structures", "body": "<p>Consider not using <code>typedef</code> at all.</p>\n\n<p>If you really want to use <code>typedef</code>s, consider defining the <code>struct</code>s and <code>typedef</code>s independently, like so:</p>\n\n<pre><code>struct a { ... }; [...] typedef struct a a_t;\n</code></pre>\n\n<p>In case of forward declarations, that you need here, you have to do this split anyway.</p>\n\n<pre><code>struct Hash_table;\n\nstruct Sym_item {\n    char *name;\n    symbolType type;\n    char *data;\n    bool fce;\n    TList *args;\n    bool init;\n    Hash_item *ptr_loctable[Hash_table_size];\n    char *class_name;\n    bool isstatic;\n    struct Sym_item *nextptr;\n};\n\nstruct Hash_table {\n    struct Sym_item *ptr;\n};\n\ntypedef struct Sym_item iSymbol;\ntypedef struct Hash_table Hash_item;\ntypedef Hash_item tHTable[Hash_table_size];\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7079962, "user_type": "registered", "profile_image": "https://graph.facebook.com/1449419358420053/picture?type=large", "display_name": "Peter Prista\u0161", "link": "https://stackoverflow.com/users/7079962/peter-prista%c5%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1479903510, "accepted_answer_id": 40762947, "answer_count": 2, "score": -1, "last_activity_date": 1479902072, "creation_date": 1479899355, "last_edit_date": 1479902072, "question_id": 40762824, "link": "https://stackoverflow.com/questions/40762824/structure-containing-element-which-array-contains-same-structures", "closed_reason": "Duplicate", "title": "Structure containing element which array contains same structures", "body": "<pre><code>typedef struct Sym_item{\n                        char       *name;                       \n                        symbolType       type;              \n                        char            *data;                      \n                        bool             fce;                           \n                        TList           *args;                  \n                        bool             init;\n                        tHTable         *ptr_loctable;  // .. this is conflicting\n                        char            *class_name;                \n                        bool             isstatic;                  \n                        struct Sym_item *nextptr;\n}iSymbol;\n\n\ntypedef struct Hash_table{\n                        iSymbol         *ptr;\n}Hash_item;\n\n\ntypedef Hash_item tHTable[Hash_table_size]; // .............. this is conflicting\n</code></pre>\n\n<p>I am using this structure <strong><code>iSymbol</code></strong> which contains a <strong><code>tHTable</code></strong> which is defined lately, but I need it that contains also the array of the symbols as this structure. </p>\n\n<p>This says compiler: </p>\n\n<blockquote>\n<pre><code>error: unknown type name \u2018tHTable\u2019&lt;br&gt;\n  tHTable *ptr_loctable;\n</code></pre>\n</blockquote>\n"}, {"tags": ["c", "arrays", "dynamic"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1479898230, "post_id": 40762360, "comment_id": 68749156, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1479898312, "post_id": 40762360, "comment_id": 68749216, "body": "Even if it works, performance will be on very lower side, reallocation for each element...."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1479898345, "post_id": 40762360, "comment_id": 68749245, "body": "<code>i&lt;sizeof(ptr)</code> is very wrong..."}, {"owner": {"reputation": 169, "user_id": 6720612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5804babc6f9ec9bad0c9f82f26e40964?s=128&d=identicon&r=PG&f=1", "display_name": "Habi Sheriff", "link": "https://stackoverflow.com/users/6720612/habi-sheriff"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1479898736, "post_id": 40762360, "comment_id": 68749569, "body": "Thanks Sourav Ghosh for your points, will modify it."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 1, "creation_date": 1479901388, "post_id": 40763007, "comment_id": 68751551, "body": "<code>sizeof 2</code> works fine, but <code>sizeof int</code> fails to compile. You can only omit parentheses for expressions, not types."}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "edited": false, "score": 0, "creation_date": 1479902143, "post_id": 40763007, "comment_id": 68752028, "body": "Anyway, now I know, why people just stick to writing parentheses all the time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 1, "creation_date": 1479903136, "post_id": 40763007, "comment_id": 68752690, "body": "There&#39;s also another reason for the parentheses: <code>sizeof 2 * 3 + 4</code> is a bit more difficult to read than <code>sizeof(2) * 3 + 4</code> or the equivalent <code>4 + 3 * sizeof(2)</code>. Now imagine all of those numbers are expressions themselves. For example, I&#39;d write <code>arr-&gt;cap * 2 * sizeof(*arr-&gt;data)</code> in the growth implementation for my own reusable dynamic array types."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1479904217, "post_id": 40763007, "comment_id": 68753401, "body": "@ChronoKitsune It&#39;s perhaps easier explained that to compute the size of a type, the argument to <code>sizeof</code> is a cast expression to that type. Both <code>2</code> and <code>(int)</code> are expressions, but only the latter is a cast, and of course casts are written with parentheses. I also strongly suggest having a space between <code>sizeof</code> and its argument, since <i>it&#39;s not a function</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1479906077, "post_id": 40763007, "comment_id": 68754624, "body": "@unwind Very true, though a cast expression is typically used to convert data to a different type, so it&#39;s strange to think of an operation as having a size outside of computer science courses... You&#39;re also correct that there should be a space between <code>sizeof</code> and its argument. That&#39;s actually a by-product of the way I think about allocation. To me, the size of each item being allocated is the visual equivalent of background noise: necessary but requiring less attention. I&#39;m allocating N items, and that&#39;s the important part. Perhaps this is wrong of me, but it hasn&#39;t failed me yet! :-)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1479906242, "post_id": 40763007, "comment_id": 68754728, "body": "@ChronoKitsune Well yes, the size of the cast is not what is being computed, the cast is used to name a type in an expression."}], "tags": [], "owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "is_accepted": false, "score": -1, "last_activity_date": 1479902082, "last_edit_date": 1479902082, "creation_date": 1479899787, "answer_id": 40763007, "question_id": 40762360, "link": "https://stackoverflow.com/questions/40762360/dynamic-array-creation-in-c-using-pointers-with-answer/40763007#40763007", "title": "Dynamic Array Creation in C using pointers with Answer", "body": "<p>Ok, you got a few problems here, let me dig through them step by step.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nconst int MAX_LENGTH_INC=1;\n</code></pre>\n\n<p>While there is a const keyword in C, I would suggest not using it to define constants like this. Instead, just use a #define like so:</p>\n\n<pre><code>#define MAX_LENGTH_INC 1\n</code></pre>\n\n<p>However, <code>const int MAX_LENGTH_INC = 1;</code> is not wrong, so you may keep it if you like it.</p>\n\n<pre><code>int main(void)\n{\n</code></pre>\n\n<p>Correct. Alternative: <code>int main(int argc, char * argv[]) {</code>. This way, callers of your program can pass command line arguments. In his program, obviously you don't need it, so <code>void</code> is fine.</p>\n\n<pre><code>    int *ptr,i;\n    int maximum_array_size = 1;\n</code></pre>\n\n<p>So, keep in mind: This is your <em>current</em> size of the array. You actually wanted to start out with <code>MAX_LENGTH_INC</code>, I guess, so better write:</p>\n\n<pre><code>    int maximum_array_size = MAX_LENGTH_INC;\n</code></pre>\n\n<p>This way, if you increase <code>MAX_LENGTH_INC</code>, you also increase the size of your first allocation, not only of subsequent ones.</p>\n\n<pre><code>    int index=0;\n    ptr = (int*) malloc(MAX_LENGTH_INC * sizeof(int));\n</code></pre>\n\n<p>A comment already noted: Don't cast return value of malloc. Also: You should use variable <code>maximum_array_size</code> here so:</p>\n\n<pre><code>    ptr = malloc(maximum_array_size * sizeof(int));\n</code></pre>\n\n<p>using <code>sizeof(int)</code> is pretty common style in C<s>, just to note it here: <code>sizeof</code> is not a function but an operator. So <code>sizeof int</code> would be valid, too</s>. /edit: see comment</p>\n\n<pre><code>    printf(\"Address of previously allocated memory: \");\n    for(i = 0; i &lt; 8; ++i)\n    {\n        //printf(\"\\n Pointer is:%u\\t\",ptr + i);\n        //printf(\"\\nindex is: %d\",index);\n        ptr[index] = i*2; \n        //printf(\"\\nValue :%d\\t\",ptr[index]);\n\n        index++;\n        if(index == maximum_array_size)\n        {\n             //printf(\"\\n Array reached its limit\");\n</code></pre>\n\n<p>And here comes your logic problem:</p>\n\n<pre><code>             ptr=(int *)realloc(ptr,sizeof(int)*MAX_LENGTH_INC);\n             maximum_array_size = maximum_array_size + MAX_LENGTH_INC;\n</code></pre>\n\n<p>You always <code>realloc</code> the array to hold <code>MAX_LENGTH_INC</code> elements. You remember then, that it should have grown, but you don't actually grow it. So, first, swap the two lines and then like above in the <code>malloc</code> call, use the variable in the <code>realloc</code> call.</p>\n\n<pre><code>             maximum_array_size = maximum_array_size + MAX_LENGTH_INC;\n             ptr = realloc(ptr, maximum_array_size * sizeof(int));\n</code></pre>\n\n<p>The addition <code>maximum_array_size = maximum_array_size + MAX_LENGTH_INC;</code> can be written as <code>maximum_array_size += MAX_LENGTH_INC;</code>. This actually helps reading the code, because now it's immediately clear, the value <code>MAX_LENGTH_INC</code> will be added to <code>maximum_array_size</code>.</p>\n\n<p>And then you should decide, whether you want to write <code>sizeof(int) * num</code> or <code>num * sizeof(int)</code>. I believe, <code>num * sizeof(int)</code> is more logical, because you have 20 ints and not int 20s ;)</p>\n\n<p>Now the other suggestion from a comment was: Incrementing by 1 each iteration would be really slow for long loops. So better double the buffer size each iteration:</p>\n\n<pre><code>             maximum_array_size *= 2;\n             ++maximum_array_size; // not exactly needed, I like it this way\n</code></pre>\n\n<p>Now, you may waste a bit of buffer, but you will at most waste 50%. Of course, you should add a new variable: <code>num_array_elements</code>, because <code>maximum_array_size</code> doesn't count the number of elements any more.</p>\n\n<pre><code>        }\n    }\n    for(i=0;i&lt;sizeof(ptr);i++)\n        printf(\"\\n Array Value is %d \",ptr[i]);\n</code></pre>\n\n<p>Again a comment already told it: <code>sizeof(ptr)</code> is definitively wrong here. The reason is: <code>ptr</code> is a pointer. And the size of the pointer is always the same (i.e. 8 bytes), regardless of the size of the memory block it points to. You would want to use the new variable <code>num_array_elements</code> here.</p>\n\n<p>Then, even for one liner statements like here, you should add curly brackets. The time comes, you add another line and forget to add the curly brackets then, yielding really hard to find bugs. So:</p>\n\n<pre><code>    for (i = 0; i &lt; num_array_elements; i++) {\n        printf(\"\\n Array Value is %d \", ptr[i]);\n    }\n</code></pre>\n\n<p>Also, as you can see, I added some spaces. Spaces make it easier to read your code. Control flow keywords like <code>for</code> and <code>if</code> typically are written with a following space, functions calls without. The language doesn't care, but it is widely adopted style.</p>\n\n<pre><code>    free(ptr);\n\n    return 0;\n}\n</code></pre>\n\n<p>Rest seems fine. So, yet to do for you: Actually add and implement the variable <code>num_array_elements</code> and maybe rename <code>maximum_array_size</code> to either <code>array_size</code> or <code>maximum_array_elements</code>. Also, writing <code>max</code> instead of <code>maximum</code> is widely adopted style as well, like writing <code>num</code> instead of <code>number</code>.</p>\n"}], "owner": {"reputation": 169, "user_id": 6720612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5804babc6f9ec9bad0c9f82f26e40964?s=128&d=identicon&r=PG&f=1", "display_name": "Habi Sheriff", "link": "https://stackoverflow.com/users/6720612/habi-sheriff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479902082, "creation_date": 1479898204, "last_edit_date": 1479899623, "question_id": 40762360, "link": "https://stackoverflow.com/questions/40762360/dynamic-array-creation-in-c-using-pointers-with-answer", "title": "Dynamic Array Creation in C using pointers with Answer", "body": "<p>Here is the sample code to create dynamic array in C. I was searching for simple dynamic array, could n't get find the simple one. Implemented my own version.Any suggestions are welcome.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nconst int MAX_LENGTH_INC=5;\n\nint main(void)\n{\n\n    int *ptr,i;\n    int maximum_array_size = 1;\n    int index=0;\n    ptr = malloc(MAX_LENGTH_INC * sizeof(int));\n\n    printf(\"Address of previously allocated memory: \");\n    for(i = 0; i &lt; 8; i++) // incrementing upto maximum of size 8\n    {\n       //printf(\"\\n Pointer is:%u\\t\",ptr + i);\n       //printf(\"\\nindex is: %d\",index);\n       ptr[index] = i*2; \n       //printf(\"\\nValue :%d\\t\",ptr[index]);\n\n       index++;\n       if(index == maximum_array_size)\n       {\n            //printf(\"\\n Array reached its limit\");\n            ptr= realloc(ptr,sizeof(int)*MAX_LENGTH_INC);\n            maximum_array_size = maximum_array_size + MAX_LENGTH_INC;\n       }\n    }\n    for(i=0;i&lt;index;i++)\n        printf(\"\\n Array Value is %d \",ptr[i]);\n    free(ptr);\n\n  return 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["java", "android", "c++", "c", "opencv"], "comments": [{"owner": {"reputation": 2323, "user_id": 1910483, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b0af125332a5925cd51c5b693d62e69e?s=128&d=identicon&r=PG", "display_name": "Michel_T.", "link": "https://stackoverflow.com/users/1910483/michel-t"}, "edited": false, "score": 0, "creation_date": 1479895667, "post_id": 40761293, "comment_id": 68747327, "body": "Read about Android NDK - it allows use C/C++ code in android"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1479895678, "post_id": 40761293, "comment_id": 68747342, "body": "C++ code runs natively ."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 3, "creation_date": 1479896085, "post_id": 40761293, "comment_id": 68747626, "body": "The C++ code is not compiled for the VM. It&#39;s compiled for the CPU architecture of the target device (typically ARMv7-a or ARMv8-a). The Java part and the native parts of your app can then interact via the Java Native Interface (JNI)."}], "answers": [{"tags": [], "owner": {"reputation": 461, "user_id": 6518225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea46517b92807a7fa8b5a869c5e3ec9?s=128&d=identicon&r=PG&f=1", "display_name": "Chandrakant Tripathi", "link": "https://stackoverflow.com/users/6518225/chandrakant-tripathi"}, "is_accepted": true, "score": 6, "last_activity_date": 1479896519, "creation_date": 1479896519, "answer_id": 40761682, "question_id": 40761293, "link": "https://stackoverflow.com/questions/40761293/how-is-c-c-code-in-an-android-app-executed/40761682#40761682", "title": "How is C/C++ code in an Android App executed?", "body": "<p>NDK is used for coding in C/C++. It improves application performance. NDK is usually true for many processor-bound applications</p>\n\n<p>Native code(C/C++) is compiled to a binary code and run directly on OS. Java code is translated into Java byte-code to run on JVM.</p>\n\n<p>You can use <a href=\"https://developer.android.com/ndk/index.html\" rel=\"noreferrer\">NDK for programming</a> C/C++ application. You can also use <a href=\"http://doc.qt.io/qt-5/android-support.html\" rel=\"noreferrer\">QT for andriod</a> for developing C/C++ application</p>\n"}], "owner": {"reputation": 133, "user_id": 5336773, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10206384744070045/picture?type=large", "display_name": "Jan Roorda", "link": "https://stackoverflow.com/users/5336773/jan-roorda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 40761682, "answer_count": 1, "score": 3, "last_activity_date": 1479896519, "creation_date": 1479895518, "question_id": 40761293, "link": "https://stackoverflow.com/questions/40761293/how-is-c-c-code-in-an-android-app-executed", "title": "How is C/C++ code in an Android App executed?", "body": "<p>I'm working on an Android app which uses OpenCV to do some intensive computer vision operations. At this point I am wondering if I can get a better performance if I do the vision processing in C/C++ instead of Java. The rest of the App is written in Java using Android Studio.</p>\n\n<p>I am confused how C/C++ code is compiled and runned on Android devices. Since a Java app runs on a JVM on the Android platform I don't quite understand how the C/C++ code is compiled for the JVM and how this code runs. </p>\n\n<p>I'm thinking if the C/C++ code is compiled so that it can run in the JVM, what is the point of using it since its still running in a VM and not directly targetting the devices CPU?</p>\n"}, {"tags": ["c", "memory", "memory-management"], "answers": [{"tags": [], "owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "is_accepted": false, "score": 0, "last_activity_date": 1479897797, "creation_date": 1479897797, "answer_id": 40762198, "question_id": 40760602, "link": "https://stackoverflow.com/questions/40760602/algorithm-for-writing-to-eeprom/40762198#40762198", "title": "Algorithm for writing to EEPROM?", "body": "<p>Not tailored specifically to your examples, completely untested and relying on having \"read 4 bytes from EEPROM\" and \"write 16 bytes to EEPROM\" encapsulated in suitable functions.</p>\n\n<pre><code>void write_to_eeprom(uint32_t start, size_t len, uint8_t *data) {\n  uint32_t eeprom_dst = start &amp; 0xfffffff0;\n  uint8_t buffer[16];\n  ssize_t data_offset;\n\n  for (data_offset = (start - eeprom_dst); data_offset &lt; len; data_offset += 16, eeprom_dst+= 16) {\n    if (data_offset &lt; 0) || ((len - data_offset) &lt; 16) {\n      // we need to fill our buffer with EEPROM data\n      read_from_eeprom(eeprom_dst, buffer); // read 4 bytes, place at ptr\n      read_from_eeprom(eeprom_dst+4, buffer+4);\n      read_from_eeprom(eeprom_dst+8, buffer+8);\n      read_from_eeprom(eeprom_dst+12, buffer+12);\n      for (int buf_ix=0, ssize_t tmp_offset = data_offset; buf_ix &lt; 16; buf_ix++, offset++) {\n        if ((offset &gt;= 0) &amp;&amp; (buf_ix &lt; 16)) {\n          // We want to copy actual data\n          buffer[buf_ix] = data[offset];\n        }\n      }\n    } else {\n      // We don't need to cater for edge cases and can simply shift\n      // 16 bytes into our tmp buffer.\n      for (int ix = 0; ix &lt; 16; ix++) {\n         buffer[ix] = data[data_offset + ix];\n      }\n    }\n    write_to_eeprom(eeprom_dst, buffer);\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1479901338, "creation_date": 1479901338, "answer_id": 40763588, "question_id": 40760602, "link": "https://stackoverflow.com/questions/40760602/algorithm-for-writing-to-eeprom/40763588#40763588", "title": "Algorithm for writing to EEPROM?", "body": "<p>Rather than try to work in 4 or 16-byte units, you could consider using a small (21-byte) static cache for the eeprom. Let's assume you have</p>\n\n<pre><code>void eeprom_read16(uint32_t page, uint8_t *data);\nvoid eeprom_write16(uint32_t page, const uint8_t *data);\n</code></pre>\n\n<p>where <code>page</code> is the address divided by 16, and always operate on 16 byte chunks. The cache itself and its initialization function (you'd call once at power-on) would be</p>\n\n<pre><code>static uint32_t eeprom_page;      /* uint16_t suffices for 2 MiB EEPROM */\nstatic uint8_t  eeprom_cache[16];\nstatic uint8_t  eeprom_dirty;\n\nstatic void eeprom_init(void)\n{\n    eeprom_page  = 0x80000000U; /* \"None\", at 32 GiB */\n    eeprom_dirty = 0;\n}\n\nstatic void eeprom_flush(void)\n{\n    if (eeprom_dirty) {\n        eeprom_write16(eeprom_page, eeprom_cache);\n        eeprom_dirty = 0;\n    }\n}\n</code></pre>\n\n<p>The <code>eeprom_flush()</code> function is only needed if you wish to ensure some data is stored in the EEPROM -- basically, after each complete transaction. You can safely call it at any time.</p>\n\n<p>To access any memory in the EEPROM, you use the accessor functions</p>\n\n<pre><code>static inline uint8_t eeprom_get(const uint32_t address)\n{\n    const uint32_t page = address &gt;&gt; 4;\n    if (page != eeprom_page) {\n        if (eeprom_dirty) {\n            eeprom_write(eeprom_page, eeprom_cache);\n            eeprom_dirty = 0;\n        }\n        eeprom_read(page, eeprom_cache);\n        eeprom_page = page;\n    }\n    return eeprom_cache[address % 0xFU];\n}\n\nstatic inline void eeprom_set(const uint32_t address, const uint8_t value)\n{\n    const uint32_t page = address &gt;&gt; 4;\n    if (page != eeprom_page) {\n        if (eeprom_dirty) {\n            eeprom_write(eeprom_page, eeprom_cache);\n            eeprom_dirty = 0;\n        }\n        eeprom_read(page, eeprom_cache);\n        eeprom_page = page;\n    }\n    eeprom_dirty = 1;\n    eeprom_cache[address % 0xFU] = value;\n}\n</code></pre>\n\n<p>Feel free to omit the <code>inline</code> if you like; it is just an optimization. The <code>static inline</code> above tell a C99 compiler to inline the functions if possible. It might increase a bit your code size, but it should produce faster code (because the compiler can make better optimizations when such small functions are inlined into the code).</p>\n\n<p>Note that you should not use the above in interrupt handlers, because normal code is not prepared for the eeprom page to change mid-operation.</p>\n\n<p>You can mix read and write operations, but that may lead to unnecessary wear on the EEPROM. You can, of course, split the read and write sides to separate caches, if you do mix reads and writes. That would also allow you to safely do EEPROM reads from an interrupt context (although the delay/latency of the I2C access might wreak havoc elsewhere).</p>\n"}], "owner": {"reputation": 63, "user_id": 6868910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1205211399500830/picture?type=large", "display_name": "NitrogenAir", "link": "https://stackoverflow.com/users/6868910/nitrogenair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1479901338, "creation_date": 1479893662, "question_id": 40760602, "link": "https://stackoverflow.com/questions/40760602/algorithm-for-writing-to-eeprom", "title": "Algorithm for writing to EEPROM?", "body": "<p>I have a memory which is a column of 4 byte rows. I can only <strong>write</strong> to it <strong>in 16 bytes</strong> and read is done in 4 bytes (line by line, that is) using I2C.</p>\n\n<p>I am interested in how to write data into the EEPROM: the data that is being written consists of a few different parts of which two can be of variable length. For example, I can have XYYZ or XYYYYZZZZZZZ where each letter is 4 bytes.</p>\n\n<p>My question is, how I should go about this problem to have a general way of writing the message to the memory using 16 byte write that would accommodate the variable nature of the two parts?</p>\n"}, {"tags": ["c", "pointers", "dynamic", "char", "realloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1479893781, "post_id": 40760578, "comment_id": 68746059, "body": "Before you do anything else, you should search for <i>emulating pass by reference in C</i>. What do you think happens to <code>Ats</code> in the <code>Palindromas</code> function when you assign to it? How will that affect the <code>Ats</code> variable in the <code>main</code> function? Think about what you are doing with <code>kiekis</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479893867, "post_id": 40760578, "comment_id": 68746125, "body": "Furthermore, you are writing to <code>Ats[*kiekis]</code> which is <i>out of bounds</i> in the very first iteration of the loop."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1479893934, "post_id": 40760578, "comment_id": 68746163, "body": "Lastly, don&#39;t reassign back to the pointer variable you pass to <code>realloc</code>. If <code>realloc</code> fails it will return <code>NULL</code> and you lose the pointer. And <i>always</i> check for errors (such as <code>malloc</code> or <code>realloc</code> returning <code>NULL</code>)."}, {"owner": {"reputation": 21, "user_id": 7167837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96528873c8417de3e08153a3a2f51fef?s=128&d=identicon&r=PG&f=1", "display_name": "Tukkas", "link": "https://stackoverflow.com/users/7167837/tukkas"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479895135, "post_id": 40760578, "comment_id": 68746973, "body": "Without the last realloc line the program prints exactly what I need... I&#39;m just starting with dynamic memory, so I&#39;m still a newbie..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1479898551, "post_id": 40760578, "comment_id": 68749423, "body": "This would be the reason why you always write identifiers in English: you might at some point have other people to read the code. If you didn&#39;t use English, you are pretty much on your own."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7167837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96528873c8417de3e08153a3a2f51fef?s=128&d=identicon&r=PG&f=1", "display_name": "Tukkas", "link": "https://stackoverflow.com/users/7167837/tukkas"}, "edited": false, "score": 0, "creation_date": 1479977586, "post_id": 40767507, "comment_id": 68786437, "body": "Thank You for Your help and recommendations! I really appreciate it. :)  I&#39;ve already fixed all of Your observations from the time that I&#39;ve posted the main question, however, when reallocating memory the program still crashes... I&#39;ve googled the exact same way like to use it like You&#39;re saying, but the program just crashes when launched. :( I&#39;ll try to play with it, maybe I&#39;ll succeed.  Ats = realloc(Ats, (<i>kiekis+1) * sizeof(char</i>));"}, {"owner": {"reputation": 972, "user_id": 2253719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6fvu.jpg?s=128&g=1", "display_name": "WPomier", "link": "https://stackoverflow.com/users/2253719/wpomier"}, "reply_to_user": {"reputation": 21, "user_id": 7167837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96528873c8417de3e08153a3a2f51fef?s=128&d=identicon&r=PG&f=1", "display_name": "Tukkas", "link": "https://stackoverflow.com/users/7167837/tukkas"}, "edited": false, "score": 0, "creation_date": 1479983542, "post_id": 40767507, "comment_id": 68790579, "body": "It&#39;s <code>Ats = realloc(Ats, (*kiekis+1) * sizeof(char));</code> <i><code>*kiekis+1</code> and not <code>kiekis+1</code></i>"}], "tags": [], "owner": {"reputation": 972, "user_id": 2253719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6fvu.jpg?s=128&g=1", "display_name": "WPomier", "link": "https://stackoverflow.com/users/2253719/wpomier"}, "is_accepted": false, "score": 0, "last_activity_date": 1479912988, "last_edit_date": 1479912988, "creation_date": 1479912403, "answer_id": 40767507, "question_id": 40760578, "link": "https://stackoverflow.com/questions/40760578/how-to-use-realloc-with-double-char-pointer-in-c/40767507#40767507", "title": "How to use realloc with double char pointer in C?", "body": "<p>I had to use google to understand your code, maybe next time you can translate it for us.</p>\n\n<p>I have a few observations:</p>\n\n<ul>\n<li><code>if (Duomenys == NULL)</code> just print an error message, but doesn't stop execution. it should be like the previous validations (and better if returning an error code).</li>\n<li><code>Ats[*kiekis] = malloc(ilgis * sizeof(char));</code> is wrong, it should be <code>Ats[*kiekis] = malloc((ilgis+1) * sizeof(char));</code> because it needs room for null ending char.</li>\n<li><code>if (Zodis[j] != Zodis[ilgis - j - 1]) index = 0;</code> is fine, but better would be <code>if (Zodis[j] != Zodis[ilgis - j - 1]) { index = 0; break; }</code> because in this way the loop will stop at the first different char.</li>\n<li><code>if (index == 1) strcpy(Ats[*kiekis], Zodis);</code> must be <code>if (index == 1) strcpy(Ats[*kiekis], Zodis);else --*kiekis</code> or else your <code>Ats</code> array will contain also not palindrome words.</li>\n<li>And don't forget to free each element of your <code>Ats</code> array before free the array itself with something like <code>for(i=0; i&lt;=kiekis; i++) free(Ats[i]);</code></li>\n</ul>\n\n<p>Finally, answering to your question, to realloc the <code>Ats</code> array just do:</p>\n\n<pre><code>Ats = realloc(Ats, (*kiekis+1) * sizeof(char*));\n</code></pre>\n\n<p>I would reorganize your function like this:</p>\n\n<pre><code>void Palindromas(char* Zodis, char Eilute[E], int *kiekis, char** Ats)\n{\n    int i, l, j, index, ilgis;\n    for(i = 0; 1 == sscanf(Eilute + i, \"%s%n\", Zodis, &amp;l); i = i + l)\n    {\n        index = 1;\n        ilgis = strlen(Zodis);\n        for (j = 0; j &lt; ilgis; j++)\n        {\n            if (Zodis[j] != Zodis[ilgis - j - 1])\n            {\n                index = 0;\n                break;\n            }\n        }\n        if (index == 1)\n        {\n            ++*kiekis;\n            Ats = (char **)realloc(Ats, (*kiekis+1) * sizeof(char*));\n            Ats[*kiekis] = dup(Zodis); // dup == malloc+strcopy\n        } \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7167837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96528873c8417de3e08153a3a2f51fef?s=128&d=identicon&r=PG&f=1", "display_name": "Tukkas", "link": "https://stackoverflow.com/users/7167837/tukkas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 951, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1479954690, "creation_date": 1479893575, "question_id": 40760578, "link": "https://stackoverflow.com/questions/40760578/how-to-use-realloc-with-double-char-pointer-in-c", "title": "How to use realloc with double char pointer in C?", "body": "<p>I'm trying to increase the memory by one row in double char pointer, but for some reason the program crashes, even though I don't get any warnings. I've googled and people keep offering this way to realloc, but it doesn't work for me. Do You know where's the catch? It's in the last line.</p>\n\n<p>Thanks in advance!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#define E 255\n\nvoid Palindromas(char* Zodis, char eilute[E], int *kiekis, char** Ats);\n\nint main()\n{\n    char Eilute [E];\n    int i, kiekis = -1;\n    char** Ats;\n    char* Zodis;\n\n    Zodis = malloc(E * sizeof(char));\n    Ats = malloc(1 * sizeof(char*));\n\n    // Failu aprasymas\n\n    FILE *Duomenys = fopen(\"Duomenys.txt\", \"r\");\n    FILE *Rezultatai = fopen(\"Rezultatai.txt\",\"w\");\n\n    //--------------------------------\n\n    if (Ats == NULL)\n    {\n        printf(\"Atmintis nebuvo paskirta\");\n        exit(0);\n    }\n\n    if (Zodis == NULL)\n    {\n        printf(\"Atmintis nebuvo paskirta\");\n        exit(0);\n    }\n\n    if (Duomenys == NULL) printf(\"Nurodyto duomenu failo nera \\n\");\n\n    while(fgets(Eilute, sizeof(Eilute), Duomenys))\n    {\n        Palindromas(Zodis, Eilute, &amp;kiekis, Ats);\n    }\n\n    for (i = 0; i &lt;= kiekis; i++)\n    {\n        fprintf(Rezultatai, \"%s \", Ats[i]);\n    }\n\n    free(Ats);\n    free(Zodis);\n    fclose(Duomenys);\n    fclose(Rezultatai);\n\n    return 0;\n}\n\nvoid Palindromas(char* Zodis, char Eilute[E], int *kiekis, char** Ats)\n{\n    int i, l, j, index, ilgis, eil;\n\n    for(i = 0; 1 == sscanf(Eilute + i, \"%s%n\", Zodis, &amp;l); i = i + l)\n    {\n\n        *kiekis = *kiekis + 1;\n        index = 1;\n        ilgis = strlen(Zodis);\n\n        Ats[*kiekis] = malloc(ilgis * sizeof(char));\n\n        for (j = 0; j &lt; ilgis; j++)\n        {\n            if (Zodis[j] != Zodis[ilgis - j - 1])\n                index = 0;\n        }\n\n        if (index == 1) strcpy(Ats[*kiekis], Zodis);\n\n        eil = *kiekis + 2;\n        Ats = realloc(Ats, eil * sizeof(char*));\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "compiler-errors", "dependencies"], "comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1479895357, "post_id": 40760550, "comment_id": 68747124, "body": "there&#39;s no #endif in collections.h"}, {"owner": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "reply_to_user": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1479896075, "post_id": 40760550, "comment_id": 68747619, "body": "Forgot it in example, thanks - but it does not solve errors"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1479899471, "post_id": 40760550, "comment_id": 68750112, "body": "Does <code>#include &quot;synt_anal.h&quot;</code> include the same file as <code>#include &quot;headers\\synt_analysis.h&quot;</code>?"}, {"owner": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "edited": false, "score": 0, "creation_date": 1479903914, "post_id": 40760550, "comment_id": 68753209, "body": "Yep, another mistake in example, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "edited": false, "score": 0, "creation_date": 1479898567, "post_id": 40761911, "comment_id": 68749433, "body": "still:  syntax error: identifier Terminal --- syntax error: identifier nttype --- and another 55 errors"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "edited": false, "score": 0, "creation_date": 1479898827, "post_id": 40761911, "comment_id": 68749627, "body": "Can you provide a minimally complete example?"}, {"owner": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "edited": false, "score": 0, "creation_date": 1479904033, "post_id": 40761911, "comment_id": 68753289, "body": "What exactly do you need? I have tried to put <code>typedef struct Terminal Terminal; typedef enum NTType NTType; typedef enum TType TType;</code> to collections.h and <code>typedef struct cStack cStack;</code> to synt_analysis.h  And now I have only 1 error: terminal uses undefined struct Terminal (file collections.h)"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "edited": false, "score": 0, "creation_date": 1479905968, "post_id": 40761911, "comment_id": 68754550, "body": "Which <code>terminal</code> (with a lower-case &#39;t&#39;) gives the error? The <code>terminal</code> member of type <code>cItems</code> in &quot;collections.h&quot;, or the <code>terminal</code> parameter of <code>push_terminal</code> in &quot;synt_analysis.h&quot;, or some other <code>terminal</code>? Make sure you use the same struct/union tags consistently on both the complete and incomplete typedefs."}, {"owner": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "edited": false, "score": 0, "creation_date": 1479906495, "post_id": 40761911, "comment_id": 68754893, "body": "struct Terminal terminal - from union cItemData in collections.h. I have typedef struct Terminal Terminal; in the beginning of the collections.h file. Maybe it lacks the body of that struct Terminal, so it doesn&#39;t know the memory cost of that struct... so I cannot solve circular dependency with forward declaration ?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "edited": false, "score": 1, "creation_date": 1480007860, "post_id": 40761911, "comment_id": 68805869, "body": "Well, I see you managed to solve it. I hope I was of some help, even if I never actually solved your problem!"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 0, "last_activity_date": 1480007692, "last_edit_date": 1480007692, "creation_date": 1479897097, "answer_id": 40761911, "question_id": 40760550, "link": "https://stackoverflow.com/questions/40760550/c-vs-circular-dependency-error-c2061-identifier-syntax-error/40761911#40761911", "title": "C VS Circular dependency? ERROR C2061 - identifier syntax error", "body": "<p><strong>EDIT</strong>: The following doesn't actually solve the problem in this case, but I left it here as a useful technique for solving some circular dependencies.</p>\n\n<p>Since <code>cStack</code> is only used as part of a pointer type within \"synt_analysis.h\", it can be an incomplete type within that header file. In order to make it an incomplete type, you need a tag to refer to it.</p>\n\n<p>In \"collections.h\", add a tag to the <code>struct</code> that is used in the definition of the <code>cStack</code> type:</p>\n\n<pre><code>typedef struct cStack {\n    unsigned cap;\n    unsigned used;\n    cItem *items;\n}cStack;\n</code></pre>\n\n<p>In \"synt_analysis.h\" define the same type as an incomplete type:</p>\n\n<pre><code>typedef struct cStack cStack;\n</code></pre>\n\n<p><strong>EDIT</strong>: As mentioned above, this doesn't actually solve the OP's problem.</p>\n"}, {"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1480006948, "post_id": 40768293, "comment_id": 68805458, "body": "I like this, but what is the <code>#include &quot;lex_analysis.h&quot;</code> for?"}], "tags": [], "owner": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "is_accepted": true, "score": 2, "last_activity_date": 1479914744, "creation_date": 1479914744, "answer_id": 40768293, "question_id": 40760550, "link": "https://stackoverflow.com/questions/40760550/c-vs-circular-dependency-error-c2061-identifier-syntax-error/40768293#40768293", "title": "C VS Circular dependency? ERROR C2061 - identifier syntax error", "body": "<p>Because this problem cannot be simply solved by forward declaration (compiler needs to know size of incomplete struct type - it's used as one option of union), the solution is to create another header file, which will break circular dependency.</p>\n\n<p>New file synt_structures.h</p>\n\n<pre><code>#ifndef SYNT_STRUCTURES_H\n#define SYNT_STRUCTURES_H\n\n#include \"lex_analysis.h\"\n\ntypedef enum {\n    ...\n}NTType;\n\ntypedef enum {\n    ...\n}TType;\n\ntypedef struct {\n    TType type;\n    ...\n}Terminal;\n\n#endif\n</code></pre>\n\n<p>synt_analysis.h includes:</p>\n\n<pre><code>#include \"collections.h\"\n#include \"synt_structures.h\"\n</code></pre>\n\n<p>collections.h includes:</p>\n\n<pre><code>#include \"synt_structures.h\"\n</code></pre>\n\n<p>\u00a0<br>\nThat breaks the cycle.</p>\n"}], "owner": {"reputation": 270, "user_id": 2872536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000302138010/picture?type=large", "display_name": "M&#225;ra Toner", "link": "https://stackoverflow.com/users/2872536/m%c3%a1ra-toner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 40768293, "answer_count": 2, "score": -1, "last_activity_date": 1480007692, "creation_date": 1479893478, "last_edit_date": 1479903122, "question_id": 40760550, "link": "https://stackoverflow.com/questions/40760550/c-vs-circular-dependency-error-c2061-identifier-syntax-error", "title": "C VS Circular dependency? ERROR C2061 - identifier syntax error", "body": "<p>I'm developing small project in C using Visual Studio.\nTo avoid multiple includes I'm using include guards.</p>\n\n<p>I'm getting lot of errors including this one:<br>\nfile: collections.h<br>\nerror: C2061<br>\ndescription: syntax error: identifier 'Terminal'  </p>\n\n<p>synt_analysis.c</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include \"headers\\synt_analysis.h\"\n</code></pre>\n\n<p>synt_analysis.h</p>\n\n<pre><code>#ifndef SYNT_ANALYSIS_H\n#define SYNT_ANALYSIS_H\n\n#include \"collections.h\"\n\ntypedef enum {\n    ...\n}TType;\n\ntypedef enum {\n    ...\n}NTType;\n\ntypedef struct {\n    TType type;\n    ...\n}Terminal;\n\nvoid push_terminal(Terminal terminal, cStack *stack);\n\n#endif\n</code></pre>\n\n<p>collections.h</p>\n\n<pre><code>#ifndef COLLECTIONS_H\n#define COLLECTIONS_H\n\n#include \"synt_analysis.h\"\n\ntypedef union {\n    int error;\n    Terminal terminal;\n    NTType nttype;\n}cItemData;\n\ntypedef struct {\n    char *type;\n    cItemData content;\n}cItem;\n\ntypedef struct {\n    unsigned cap;\n    unsigned used;\n    cItem *items;\n}cStack;\n\n#endif\n</code></pre>\n\n<p>collections provides <code>cStack</code>, which can store <code>Terminal</code> defined by synt_analysis.<br>\nsynt_analysis uses <code>cStack</code> in function <code>push_terminal</code> - which pushes <code>Terminal</code> on the Stack. This function exists to reduce amount of code needed (it creates new <code>Terminal</code> and pushes it on <code>cStack</code>).</p>\n"}, {"tags": ["c", "xml", "libxml2"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1479894528, "post_id": 40760381, "comment_id": 68746548, "body": "I don&#39;t think the XML is valid. It&#39;s well-formed."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1479894731, "post_id": 40760381, "comment_id": 68746683, "body": "Can you provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with code, please? And an exact version number that you&#39;re using."}, {"owner": {"reputation": 351, "user_id": 2932207, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8efe80ed5f74272fadabb3f2d2deee74?s=128&d=identicon&r=PG", "display_name": "Alex  Tiger", "link": "https://stackoverflow.com/users/2932207/alex-tiger"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1479895149, "post_id": 40760381, "comment_id": 68746985, "body": "The provided xml is absolutely valid, by standart and by any validators like <a href=\"http://www.xmlvalidation.com/\" rel=\"nofollow noreferrer\">xmlvalidation.com</a> .  Will try to provide MCV ASAP."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1479895203, "post_id": 40760381, "comment_id": 68747018, "body": "It does not have a DTD or Schema, so it cannot be valid by definition. W3 validator says it&#39;s wellformed."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1479902184, "post_id": 40760381, "comment_id": 68752060, "body": "What do you mean when you say that a node &quot;has a namespace&quot;? Please explain which <i>libxml2</i> API you&#39;re using instead of coming up with a custom description of the parse tree."}, {"owner": {"reputation": 351, "user_id": 2932207, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8efe80ed5f74272fadabb3f2d2deee74?s=128&d=identicon&r=PG", "display_name": "Alex  Tiger", "link": "https://stackoverflow.com/users/2932207/alex-tiger"}, "edited": false, "score": 0, "creation_date": 1479902423, "post_id": 40760381, "comment_id": 68752216, "body": "Here is my MCV: <a href=\"http://pastebin.com/S7tCMAVM\" rel=\"nofollow noreferrer\">pastebin.com/S7tCMAVM</a> here is the output of MCV: <a href=\"http://pastebin.com/KUqqjyFu\" rel=\"nofollow noreferrer\">pastebin.com/KUqqjyFu</a> (compile with <code>gcc test.c -o test.elf -I&#47;usr&#47;include&#47;libxml2 -lxml2 &amp;&amp; .&#47;test.elf</code>) The same thing as I descripted before - two namespaces for first two elements and one for third. By &quot;has a namespace&quot; I mean that tag belongs to some namespace, like <code>de:aaa</code> - tag <code>aaa</code> belongs to namespace <code>de</code>"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1479994464, "post_id": 40760381, "comment_id": 68797988, "body": "I added the code directly to your question. There&#39;s no reason to post code that is essential to answer your question on another site."}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 2932207, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8efe80ed5f74272fadabb3f2d2deee74?s=128&d=identicon&r=PG", "display_name": "Alex  Tiger", "link": "https://stackoverflow.com/users/2932207/alex-tiger"}, "edited": false, "score": 0, "creation_date": 1479999348, "post_id": 40787756, "comment_id": 68801088, "body": "Thank you. I suspected that I only need to get the very first one, but needed someone to confirm it."}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 1, "last_activity_date": 1479994373, "creation_date": 1479994373, "answer_id": 40787756, "question_id": 40760381, "link": "https://stackoverflow.com/questions/40760381/is-xml-tag-could-use-two-namespaces-or-this-is-libxml2-bug/40787756#40787756", "title": "Is xml-tag could use two namespaces or this is libxml2 bug?", "body": "<p>The name of an XML element can obviously only have a single namespace. So you shouldn't think of the <code>ns</code> member in <code>struct _xmlNode</code> as a linked list. It actually points to an <code>nsDef</code> entry of an ancestor element. Use the <code>next</code> pointer only to iterate <code>nsDef</code>. If you change the <code>printf</code> statement in <code>printns</code> to also show the address of the <code>xmlNs</code> struct</p>\n\n<pre><code>printf(\"%*c%s+%s [%p]\\n\", deep * 5 + 1, ' ', marker, ns-&gt;prefix,\n       (void*)ns);\n</code></pre>\n\n<p>the output becomes</p>\n\n<pre><code> aaa\n  d+de [0x9e9aff0]\n  d+fe [0x9e9b1a0]\n      text\n      bbb\n       u+de [0x9e9aff0]  // same as first entry in nsDef of aaa\n       u+fe [0x9e9b1a0]  // should be ignored\n           text\n      text\n      ccc\n       u+de [0x9e9aff0]  // same as first entry in nsDef of aaa\n       u+fe [0x9e9b1a0]  // should be ignored\n           text\n      text\n      ddd\n       u+fe [0x9e9b1a0]  // same as second entry in nsDef of aaa\n           text\n      text\n</code></pre>\n\n<p>Note that <code>ns</code> always points to the correct <code>xmlNs</code> of the element.</p>\n"}], "owner": {"reputation": 351, "user_id": 2932207, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8efe80ed5f74272fadabb3f2d2deee74?s=128&d=identicon&r=PG", "display_name": "Alex  Tiger", "link": "https://stackoverflow.com/users/2932207/alex-tiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 40787756, "answer_count": 1, "score": 0, "last_activity_date": 1479994373, "creation_date": 1479892974, "last_edit_date": 1479993582, "question_id": 40760381, "link": "https://stackoverflow.com/questions/40760381/is-xml-tag-could-use-two-namespaces-or-this-is-libxml2-bug", "title": "Is xml-tag could use two namespaces or this is libxml2 bug?", "body": "<p>I have the following <em>valid</em> XML:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n  &lt;aaa xmlns:de=\"http://www.dolby.com/dcinema/ws/smi/v11/SPL\" atr=\"abc\" xmlns:fe=\"http://somewhere\"&gt;\n   some text\n   &lt;de:bbb atr1=\"abb\" atr2=\"baa\" &gt;aaa&lt;/de:bbb&gt;\n   &lt;de:ccc&gt;aaa&lt;/de:ccc&gt;\n   &lt;fe:ddd&gt;bbb&lt;/fe:ddd&gt;\n   some more text\n  &lt;/aaa&gt;\n</code></pre>\n\n<p>And the following C code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;libxml/xmlreader.h&gt;\n#include &lt;libxml/tree.h&gt;\n\nchar xml_data[] = {\n    \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?&gt;\\n\"\n    \"  &lt;aaa xmlns:de=\\\"http://www.dolby.com/dcinema/ws/smi/v11/SPL\\\" \"\n    \"       atr=\\\"abc\\\"\"\n    \"       xmlns:fe=\\\"http://somewhere\\\"&gt;\\n\"\n    \"   some text\\n\"\n    \"   &lt;de:bbb atr1=\\\"abb\\\"  atr2=\\\"baa\\\" &gt;aaa&lt;/de:bbb&gt;\\n\"\n    \"   &lt;de:ccc&gt;aaa&lt;/de:ccc&gt;\\n\"\n    \"   &lt;fe:ddd&gt;bbb&lt;/fe:ddd&gt;\\n\"\n    \"   some more text\\n\"\n    \"  &lt;/aaa&gt;\"\n};\n\nvoid printns(xmlNsPtr ns, int deep, char * marker)\n{\n    while (ns)\n    {\n        printf(\"%*c%s+%s\\n\", deep * 5 + 1, ' ', marker, ns-&gt;prefix);\n        ns = ns-&gt;next;\n    }\n}\n\nvoid printelem(xmlNodePtr ptr, int deep)\n{\n    printf(\"%*c%s\\n\", deep * 5, ' ', ptr-&gt;name);\n    if (ptr-&gt;type == XML_ELEMENT_NODE) \n    {\n        printns(ptr-&gt;nsDef, deep, \"d\");\n        printns(ptr-&gt;ns,    deep, \"u\");\n    }\n\n    if (ptr-&gt;xmlChildrenNode) printelem(ptr-&gt;xmlChildrenNode, deep+1);\n\n    if (ptr-&gt;next) printelem(ptr-&gt;next, deep);\n}\n\nint main(void)\n{\n    LIBXML_TEST_VERSION\n    xmlInitParser();\n\n    xmlDocPtr doc;\n    doc = xmlReadDoc(BAD_CAST xml_data, NULL, NULL, XML_PARSE_NOBLANKS);\n\n    printelem(doc-&gt;xmlChildrenNode, 1);\n\n    xmlFreeDoc(doc);\n}\n</code></pre>\n\n<p>This produces the following output:</p>\n\n<pre><code> aaa\n  d+de\n  d+fe\n      text\n      bbb\n       u+de\n       u+fe\n           text\n      text\n      ccc\n       u+de\n       u+fe\n           text\n      text\n      ddd\n       u+fe\n           text\n      text\n</code></pre>\n\n<p>As you see, libxml2 says that bbb and ccc have TWO namespaces at once, when ddd have one namespace, as expected. Is this some xml-standart rule which is unknown for me or is this libxml2 bug?</p>\n"}, {"tags": ["c", "embedded", "volatile", "interrupt-handling"], "comments": [{"owner": {"reputation": 628, "user_id": 5493499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1ab3d3090bfcef06b7b2e5831cceaf?s=128&d=identicon&r=PG&f=1", "display_name": "dkolmakov", "link": "https://stackoverflow.com/users/5493499/dkolmakov"}, "edited": false, "score": 1, "creation_date": 1479893103, "post_id": 40760366, "comment_id": 68745627, "body": "The answer is here <a href=\"http://stackoverflow.com/questions/246127/why-is-volatile-needed-in-c\" title=\"why is volatile needed in c\">stackoverflow.com/questions/246127/why-is-volatile-needed-in&zwnj;&#8203;-c</a>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 628, "user_id": 5493499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1ab3d3090bfcef06b7b2e5831cceaf?s=128&d=identicon&r=PG&f=1", "display_name": "dkolmakov", "link": "https://stackoverflow.com/users/5493499/dkolmakov"}, "edited": false, "score": 2, "creation_date": 1479894271, "post_id": 40760366, "comment_id": 68746401, "body": "@dkolmakov : That is a more-or-less duplicate, but crucially perhaps does not address the misunderstanding between the hardware function of <i>cache memory</i> and the software technique of <i>&quot;caching a value in a register&quot;</i>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1479908444, "post_id": 40760366, "comment_id": 68756263, "body": "It isn&#39;t needed if the compiler is good and realizes that it can&#39;t run around and assume things about variables shared with ISRs/callbacks. Many embedded system compilers are not that good, however."}], "answers": [{"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 11, "last_activity_date": 1479893804, "creation_date": 1479893804, "answer_id": 40760655, "question_id": 40760366, "link": "https://stackoverflow.com/questions/40760366/is-volatile-keyword-really-needed-when-variable-changed-in-interrupt-routine/40760655#40760655", "title": "is volatile keyword really needed when variable changed in interrupt routine", "body": "<p>You have a misunderstanding regarding the <code>volatile</code> keyword; specifically it is <em>not</em> related to caching - cache consistency is handled entirely by hardware and <code>volatile</code> has no effect on that.</p>\n\n<p>The purpose of <code>volatile</code> is to prevent the compiler from generating code that assumes the value cannot have changed.  The C language does not provide support to threads of execution, and the code is generated as if there were a single thread; if the compiler can observe within a single thread of execution that a variable has not been explicitly modified, it may remove the explicit read and use an already known value (stored in a register for example).</p>\n\n<p>The code in your <code>main()</code> function is \"unaware\" that the interrupt may occur between reads, and can therefore optimise out the read.  The <code>volatile</code> keyword instructs the compiler to generate code to explicitly read the memory.  It does not matter one way or the other whether that read results in a cache-hit or miss or if there is no cache at all - that is a hardware issue.</p>\n\n<p>You might benefit from reading <em><a href=\"http://www.embedded.com/electronics-blogs/beginner-s-corner/4023801/Introduction-to-the-Volatile-Keyword\" rel=\"noreferrer\">Introduction to the volatile keyword</a></em> on Embedded.com.  It covers <em>exactly</em> this issue.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 7187904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ebc177f2ca9d3a7281e402356c7d05d?s=128&d=identicon&r=PG&f=1", "display_name": "MGpro", "link": "https://stackoverflow.com/users/7187904/mgpro"}, "is_accepted": false, "score": 0, "last_activity_date": 1479904133, "creation_date": 1479904133, "answer_id": 40764609, "question_id": 40760366, "link": "https://stackoverflow.com/questions/40760366/is-volatile-keyword-really-needed-when-variable-changed-in-interrupt-routine/40764609#40764609", "title": "is volatile keyword really needed when variable changed in interrupt routine", "body": "<p>Adding to above comment, most application developer get confused about the validity of following statement. Confusions arises with co existence of volatile and const keyword in the declaration i.e. How can be a variable a const yet volatile?</p>\n\n<p>volatile const char *const ptr = 0x4000;</p>\n\n<p>It is important to understand that volatile indicates that variable can changed outside the scope of the program. Above statement/similar statement is useful for mapping the hardware registers of the device. </p>\n"}], "owner": {"reputation": 798, "user_id": 4838002, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/13678927e03a38773999fe049196977b?s=128&d=identicon&r=PG&f=1", "display_name": "mikmik", "link": "https://stackoverflow.com/users/4838002/mikmik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 0, "accepted_answer_id": 40760655, "answer_count": 2, "score": 2, "last_activity_date": 1479904133, "creation_date": 1479892923, "question_id": 40760366, "link": "https://stackoverflow.com/questions/40760366/is-volatile-keyword-really-needed-when-variable-changed-in-interrupt-routine", "title": "is volatile keyword really needed when variable changed in interrupt routine", "body": "<p>I'm using nrf52 microcontroller (CORTEX 34F) processor. I have a variable check on the main loop which is modified both on the main loop and timer interrupt routine.</p>\n\n<ol>\n<li><p>main loop check if variable is true : </p>\n\n<ul>\n<li><p>execute condition code</p></li>\n<li><p>set variable to false</p></li>\n</ul></li>\n<li>timer interrupt routine set variable to true every 10 ms</li>\n</ol>\n\n<p>without <code>volatile</code> keyword, the code seems not working, but when I set the variable to <code>volatile</code> it seems to work but I'm not convinced because :</p>\n\n<ol>\n<li>first I think cortex M4f doesn't contain data cache memory</li>\n<li>second : this case is handeld by the compiler (arm keil)</li>\n</ol>\n\n<p>any answer please ;</p>\n\n<p>if true execute body code\n 2. List item</p>\n"}, {"tags": ["c", "pointers", "struct", "malloc", "free"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1479892994, "post_id": 40760341, "comment_id": 68745538, "body": "node1 <i>is</i> node2. Just free one of them not both or it will crash."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1479893206, "post_id": 40760341, "comment_id": 68745686, "body": "<code>free</code> just knows about the address. It doesn&#39;t know what variables you have and doesn&#39;t care which points to which memory address"}, {"owner": {"reputation": 67, "user_id": 7179899, "user_type": "registered", "profile_image": "https://graph.facebook.com/221869544910252/picture?type=large", "display_name": "James Real", "link": "https://stackoverflow.com/users/7179899/james-real"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1479893228, "post_id": 40760341, "comment_id": 68745701, "body": "@Jean-Fran&#231;oisFabre. So what u saying is I can also free node1 via free(node2), no?"}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 67, "user_id": 7179899, "user_type": "registered", "profile_image": "https://graph.facebook.com/221869544910252/picture?type=large", "display_name": "James Real", "link": "https://stackoverflow.com/users/7179899/james-real"}, "edited": false, "score": 0, "creation_date": 1479893148, "post_id": 40760396, "comment_id": 68745648, "body": "@JamesReal Yes you can use one of them"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1479893194, "last_edit_date": 1479893194, "creation_date": 1479893005, "answer_id": 40760396, "question_id": 40760341, "link": "https://stackoverflow.com/questions/40760341/c-language-releasing-memory-of-pointers-to-struct/40760396#40760396", "title": "C language: Releasing memory of pointers to struct", "body": "<p>You should pass the address returned by <code>malloc()</code> and family to <code>free()</code> in-order to free the allocated memory.</p>\n\n<p>In your case you are just assigning the returned address to some other pointer and using that in free which is fine.</p>\n\n<p>You shouldn't do</p>\n\n<pre><code>node2 = node1;\nnode2 = node2 +1;\n\nfree(node2);\n</code></pre>\n\n<p>So you can use one of them in your case to free the memory</p>\n\n<p><code>free(node1)</code> and <code>free(node2)</code> are same in your case</p>\n"}, {"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1479893029, "creation_date": 1479893029, "answer_id": 40760404, "question_id": 40760341, "link": "https://stackoverflow.com/questions/40760341/c-language-releasing-memory-of-pointers-to-struct/40760404#40760404", "title": "C language: Releasing memory of pointers to struct", "body": "<p>You release neither <code>node1</code> nor <code>node2</code>. You release the memory they point to.</p>\n\n<p>With that in mind, it should become clear why you should only call <code>free</code> once</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 6, "last_activity_date": 1479893078, "creation_date": 1479893078, "answer_id": 40760418, "question_id": 40760341, "link": "https://stackoverflow.com/questions/40760341/c-language-releasing-memory-of-pointers-to-struct/40760418#40760418", "title": "C language: Releasing memory of pointers to struct", "body": "<p>When you do</p>\n\n<pre><code>node1 = malloc(sizeof(NODE));\n</code></pre>\n\n<p>you have something like</p>\n\n<pre>\n+-------+      +-----------------------------+\n| node1 | ---> | memory for a NODE structure |\n+-------+      +-----------------------------+\n</pre>\n\n<p>After the assignment <code>node2 = node1</code> you have instead this:</p>\n\n<pre>\n+-------+\n| node1 | -\\\n+-------+   \\    +-----------------------------+\n             >-> | memory for a NODE structure |\n+-------+   /    +-----------------------------+\n| node2 | -/\n+-------+\n</pre>\n\n<p>In other words you have <em>two</em> pointers pointing to the <em>same</em> memory.</p>\n\n<p>Attempting to call <code>free</code> using either of the two pointer variable will invalidate <em>both</em> pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "is_accepted": false, "score": 1, "last_activity_date": 1505360188, "last_edit_date": 1505360188, "creation_date": 1479893121, "answer_id": 40760431, "question_id": 40760341, "link": "https://stackoverflow.com/questions/40760341/c-language-releasing-memory-of-pointers-to-struct/40760431#40760431", "title": "C language: Releasing memory of pointers to struct", "body": "<p><code>node1</code> is a pointer, meaning the value of it is the virtual memory address of the allocated struct.</p>\n\n<p>Assigning <code>node2 = node1</code> just copies that address. </p>\n\n<p>As a result <code>free(node1)</code> and <code>free(node2)</code> are equivalent.</p>\n"}], "owner": {"reputation": 67, "user_id": 7179899, "user_type": "registered", "profile_image": "https://graph.facebook.com/221869544910252/picture?type=large", "display_name": "James Real", "link": "https://stackoverflow.com/users/7179899/james-real"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 40760418, "answer_count": 4, "score": 3, "last_activity_date": 1505360188, "creation_date": 1479892849, "question_id": 40760341, "link": "https://stackoverflow.com/questions/40760341/c-language-releasing-memory-of-pointers-to-struct", "title": "C language: Releasing memory of pointers to struct", "body": "<p>Say I have declared a pointer to a struct and assign it with malloc() using this definition</p>\n\n<pre><code>typedef struct node {\n    int info;\n    struct node *next;\n} NODE;\n</code></pre>\n\n<p>Then somewhere in the code I declared two pointers to it</p>\n\n<pre><code>NODE *node1, *node2 = NULL;\n\nnode1 = malloc(sizeof(NODE));\nnode2 = node1;\n</code></pre>\n\n<p>My question, should I use \"free()\" to release node2 just like people always do to node1 via <em>free(node1)</em>. What's exactly the effect of the assignment <em>node2 = node1;</em> </p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1479892712, "post_id": 40760243, "comment_id": 68745343, "body": "<code>strtoll</code> does not return a pointer, but rather a <a href=\"http://en.cppreference.com/w/cpp/string/byte/strtol\" rel=\"nofollow noreferrer\"><code>long long</code></a> value."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479892824, "post_id": 40760243, "comment_id": 68745439, "body": "The variable <code>location_value</code> is a pointer to <i>constant</i> data. I assume that <code>participant-&gt;layout_location</code> is not."}, {"owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "edited": false, "score": 0, "creation_date": 1479893715, "post_id": 40760243, "comment_id": 68746011, "body": "But what do i need to change in my code then?"}, {"owner": {"reputation": 834, "user_id": 7131047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a1cf5eb86c98bcf94e80e722fff20e?s=128&d=identicon&r=PG&f=1", "display_name": "Fefux", "link": "https://stackoverflow.com/users/7131047/fefux"}, "edited": false, "score": 1, "creation_date": 1479893908, "post_id": 40760243, "comment_id": 68746147, "body": "Change <code>const guint64 *user_id_value = strtoll(user_id_string, NULL, 10);</code> to <code>long long int user_id_value = strtoll(user_id_string, NULL, 10);</code> and change <code>user_id_value == NULL</code> to <code>user_id_value == 0LL</code>. And read the doc : <a href=\"http://www.cplusplus.com/reference/cstdlib/strtoll/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/strtoll</a>"}], "owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479892552, "creation_date": 1479892552, "question_id": 40760243, "link": "https://stackoverflow.com/questions/40760243/c-caasc-warnings", "title": "C - Caasc warnings", "body": "<p>C newbie here.</p>\n\n<p>I have following code:</p>\n\n<pre><code>void janus_videoroom_set_layout_location(gchar *text, janus_videoroom_participant *participant, json_t *root) {\n  // Fetch keys\n  const json_t *user_id = json_object_get(root, \"user_id\");\n  const json_t *location = json_object_get(root, \"location\");\n  const gchar *user_id_string = json_string_value(user_id);\n\n  // Fetches values\n  const guint64 *user_id_value = strtoll(user_id_string, NULL, 10);\n  const gchar *location_value = json_string_value(location);\n\n  // Check if location is not NULL\n  if(user_id_value == NULL || location_value == NULL) {\n      JANUS_LOG(LOG_WARN, \"Setting layout location needs location AND user_id parameter. \\n\");\n      g_free(text);\n    return; \n  }\n\n  participant-&gt;layout_location = location_value;\n\n  // Send the layout location to all participants -- Change current one\n    g_slist_foreach(participant-&gt;listeners, janus_videoroom_relay_data_packet, text);\n}\n</code></pre>\n\n<p>And it produces following error:</p>\n\n<pre><code>plugins/janus_videoroom.c: In function 'janus_videoroom_set_layout_location':\nplugins/janus_videoroom.c:2201:34: warning: initialization makes pointer from integer without a cast [-Wint-conversion]\n   const guint64 *user_id_value = strtoll(user_id_string, NULL, 10);\n                                  ^\nplugins/janus_videoroom.c:2211:32: warning: assignment discards 'const' qualifier from pointer target type [-Wdiscarded-qualifiers]\n   participant-&gt;layout_location = location_va\n</code></pre>\n\n<p>Can somebody tell me how to fix this and explain why it is showing these kind of errors? Also what about CR? Is the code looking okey?</p>\n"}, {"tags": ["c", "linux", "gcc", "execl"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1479892554, "post_id": 40760120, "comment_id": 68745234, "body": "What on earth were you <i>expecting</i> this program to do??"}, {"owner": {"reputation": 85, "user_id": 4929705, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/076e26957edb1de76c388924863daac4?s=128&d=identicon&r=PG&f=1", "display_name": "LIMA", "link": "https://stackoverflow.com/users/4929705/lima"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1479892661, "post_id": 40760120, "comment_id": 68745308, "body": "to execute the program in name = &quot;/u/e2014/Desktop/os/Prog.c&quot;"}, {"owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "edited": false, "score": 0, "creation_date": 1479893040, "post_id": 40760120, "comment_id": 68745569, "body": "You have the wrong declaration of <code>main</code>, and the wrong parameters for <code>execl</code>. What parameters are you supposed to pass to that other program?"}, {"owner": {"reputation": 85, "user_id": 4929705, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/076e26957edb1de76c388924863daac4?s=128&d=identicon&r=PG&f=1", "display_name": "LIMA", "link": "https://stackoverflow.com/users/4929705/lima"}, "edited": false, "score": 0, "creation_date": 1479893083, "post_id": 40760120, "comment_id": 68745609, "body": "path of file like: &quot;/u/e2014/Desktop/os/Prog.c&quot; and two integers"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1479893124, "post_id": 40760120, "comment_id": 68745634, "body": "There are so many problems with this code that I&#39;m inclined to close-vote on account of it being too broad. You can&#39;t execute C code directly. It has to be compiled. You can&#39;t mess around with the signature of the <code>main()</code> function. You clearly haven&#39;t read the documentation for <code>execl()</code>...."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 1, "creation_date": 1479895353, "post_id": 40760120, "comment_id": 68747120, "body": "Please read <a href=\"http://meta.stackoverflow.com/questions/285551/why-may-i-not-upload-images-of-code-on-so-when-asking-a-question/285557#285557\">images considered harmful to S.O. postings</a> and refrain from embedding images in your Qs in the future. Good luck."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4929705, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/076e26957edb1de76c388924863daac4?s=128&d=identicon&r=PG&f=1", "display_name": "LIMA", "link": "https://stackoverflow.com/users/4929705/lima"}, "edited": false, "score": 0, "creation_date": 1479893008, "post_id": 40760232, "comment_id": 68745552, "body": "ok, so now its more complicated. i want to pass to main : path of file and two integers. with this signature, i am not see how i can do that... :/"}, {"owner": {"reputation": 85, "user_id": 4929705, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/076e26957edb1de76c388924863daac4?s=128&d=identicon&r=PG&f=1", "display_name": "LIMA", "link": "https://stackoverflow.com/users/4929705/lima"}, "edited": false, "score": 0, "creation_date": 1479893783, "post_id": 40760232, "comment_id": 68746062, "body": "i need to pass two integers to main: this signature its o.k? :    int main( int argc, int argc1,  char **argv)   because i am searching for information about this signature with 2 parameters and i am not find"}], "tags": [], "owner": {"reputation": 7021, "user_id": 4620609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dR89W.jpg?s=128&g=1", "display_name": "Samuel Robert", "link": "https://stackoverflow.com/users/4620609/samuel-robert"}, "is_accepted": false, "score": 1, "last_activity_date": 1479894591, "last_edit_date": 1479894591, "creation_date": 1479892531, "answer_id": 40760232, "question_id": 40760120, "link": "https://stackoverflow.com/questions/40760120/getting-trouble-with-running-program-in-c-on-linux/40760232#40760232", "title": "getting trouble with running program in c on linux", "body": "<p>gcc has 3 different signature for main function</p>\n\n<pre><code>int main(void);\nint main(int argc, char* argv[]);\nint main(int argc, char *argv[], char *envp[]);\n</code></pre>\n\n<p>Your main function doesn't match either of these. therefore compiler error.</p>\n\n<p>For your case you can use the 2nd signature with a small modification.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nint main(int argc, char **argv)\n{\n    char *path;\n    int int1, int2;\n\n    path = argv[1];\n    int1 = atoi(argv[2]);\n    int2 = atoi(argv[3]);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 4929705, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/076e26957edb1de76c388924863daac4?s=128&d=identicon&r=PG&f=1", "display_name": "LIMA", "link": "https://stackoverflow.com/users/4929705/lima"}, "edited": false, "score": 0, "creation_date": 1479893998, "post_id": 40760567, "comment_id": 68746206, "body": "this signature will compiled: int main(int argc, int argc1, char*argv[])  because i need two integers"}, {"owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "reply_to_user": {"reputation": 85, "user_id": 4929705, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/076e26957edb1de76c388924863daac4?s=128&d=identicon&r=PG&f=1", "display_name": "LIMA", "link": "https://stackoverflow.com/users/4929705/lima"}, "edited": false, "score": 0, "creation_date": 1479894176, "post_id": 40760567, "comment_id": 68746339, "body": "@LilachDery no it will not work. if you want to get integer then you have to convert int from **argv as samuel Robert did in 2 answer of your question."}], "tags": [], "owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "is_accepted": false, "score": 0, "last_activity_date": 1479893544, "creation_date": 1479893544, "answer_id": 40760567, "question_id": 40760120, "link": "https://stackoverflow.com/questions/40760120/getting-trouble-with-running-program-in-c-on-linux/40760567#40760567", "title": "getting trouble with running program in c on linux", "body": "<p>First you are passing wrong parameter in int main(). main() has at least 3 args only. </p>\n\n<p>int main(int argc, char*argv[], char *envp[]); </p>\n\n<p>To execute your program you should use execvp() because you passing arrey of char* not command-line arguments via a variable-argument.</p>\n\n<p>difference between execl and execv? </p>\n\n<p>**L vs V: whether you want to pass the parameters to the exec'ed program as</p>\n\n<p>L: individual parameters in the call (variable argument list): execl(), execle(), execlp(), and execlpe()\n     V: as an array of char* execv(), execve(), execvp(), and execvpe()**</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc,char*argv[])\n {\n   char *name = \"/root/a.out\";\n   char *arg0 = \"0\";\n   char *arg1 = \"1\";\n\n   char *my_args[4];\n\n   my_args[0] = name;\n   my_args[1] = arg0;\n   my_args[2] = arg1;\n   my_args[3] = NULL;\n  execvp(my_args[0],my_args);\n\n   return(0);\n  }\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4929705, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/076e26957edb1de76c388924863daac4?s=128&d=identicon&r=PG&f=1", "display_name": "LIMA", "link": "https://stackoverflow.com/users/4929705/lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1479894591, "creation_date": 1479892231, "question_id": 40760120, "link": "https://stackoverflow.com/questions/40760120/getting-trouble-with-running-program-in-c-on-linux", "title": "getting trouble with running program in c on linux", "body": "<p>why I am not succeed</p>\n\n<pre><code> int main(char* name,int arg0,int arg1)\n {\n   name = \"/u/e2014/Desktop/os/Prog.c\";\n   arg0 = 0;\n   arg1 = 1;\n\n   char my_args[3];\n   my_args[0] = arg0;\n   my_args[1] = arg1;\n   my_args[2] = NULL;\n   execl(name,m_args);\n\n   return(0);\n  }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ixYeZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ixYeZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want that my program will execute the program in the path \"name\".\nRight now its do nothing.</p>\n\n<p>I am not understand where is my mistake?\nI program in C on linux, and compile it with gcc</p>\n\n<p>Thanks a lot!!</p>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array"], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 1, "last_activity_date": 1479933823, "creation_date": 1479933823, "answer_id": 40773843, "question_id": 40759973, "link": "https://stackoverflow.com/questions/40759973/correct-subscript-ordering-for-two-dimensional-arrays/40773843#40773843", "title": "Correct Subscript Ordering for Two Dimensional Arrays", "body": "<p>The expression</p>\n\n<pre><code>mat[m][n]\n</code></pre>\n\n<p>is parsed as</p>\n\n<pre><code>(mat[m])[n]\n</code></pre>\n\n<p>which is equivalent to</p>\n\n<pre><code>(*(mat + m))[n]\n</code></pre>\n\n<p>which is in turn equivalent to</p>\n\n<pre><code>*(*(mat + m) + n)\n</code></pre>\n\n<p>so your initial guess is correct.</p>\n\n<p>As for which of these mean rows and which of these mean columns - in some sense, this is up to you to decide. You're the one creating the array and you can assign it any semantics that you'd like.</p>\n\n<p>On the other hand, if you create a 2D array like this:</p>\n\n<pre><code>int mat[A][B];\n</code></pre>\n\n<p>then in memory this will be laid out as</p>\n\n<pre><code>[0, 0][0, 1][0, 2]...[0, B-1][1, 0][1, 1][1, 2]... ... [A-1][B-1]\n</code></pre>\n\n<p>Because of locality of reference, if you read across this in the order shown above (do all of mat[0], then all of mat[1], etc.) than it is to iterate in the reverse order (do mat[0][0], then mat[1][0], then mat[2][0], etc.). In that sense, it's common to treat 2D arrays as having the first component select a row and the second select a column, since that more naturally aligns with how the memory is laid out.</p>\n"}], "owner": {"reputation": 854, "user_id": 2604247, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/3z8rb.jpg?s=128&g=1", "display_name": "Della", "link": "https://stackoverflow.com/users/2604247/della"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 40773843, "answer_count": 1, "score": 1, "last_activity_date": 1479933833, "creation_date": 1479891777, "last_edit_date": 1479933833, "question_id": 40759973, "link": "https://stackoverflow.com/questions/40759973/correct-subscript-ordering-for-two-dimensional-arrays", "title": "Correct Subscript Ordering for Two Dimensional Arrays", "body": "<p>I am talking about a zero-indexed matrix of integers denoted by a pointer to pointer, i.e. </p>\n\n<pre><code>int **mat;\n</code></pre>\n\n<p>Then what is the correct way to represent the mat[m][n] element? Is it </p>\n\n<pre><code>*(*(mat+m)+n)\n</code></pre>\n\n<p>or is it </p>\n\n<pre><code>*(*(mat+n)+m)\n</code></pre>\n\n<p>Also, visually speaking, between m and n, which one is the row index or which one is the column index? Or do terms like row and column make any sense here? I am sure I have some conceptual gap here, and some help will be great. </p>\n"}, {"tags": ["c++", "c", "performance"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 12, "creation_date": 1479891379, "post_id": 40759800, "comment_id": 68744492, "body": "You mean <code>x &amp; 255 == x % 256</code>. And for unsigned arithmetic any compiler worth its salt will produce the same code for both."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1479891388, "post_id": 40759800, "comment_id": 68744501, "body": "Nope. You mean &quot;x % 256&quot;."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1479891402, "post_id": 40759800, "comment_id": 68744512, "body": "I think to a certain degree, your question is contradicting itself. You assume that checking the output of a compiler <i>might</i> only give you insights for <b>one</b> platform/architecture; but at the same time you expect that somebody can give you <i>principle</i> information here. And that doesnt really match up. Either this is platform dependent, or it is note."}, {"owner": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 0, "creation_date": 1479891470, "post_id": 40759800, "comment_id": 68744553, "body": "Without compiler optimization I would think so, since one is a logical bitwise operation and the other requires an integer division which used to be relative slow. Suggestion to measure instead of using this answer blindly."}, {"owner": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 0, "creation_date": 1479891492, "post_id": 40759800, "comment_id": 68744570, "body": "Judging from <a href=\"http://stackoverflow.com/questions/20393373/performance-wise-how-fast-are-bitwise-operator-vs-normal-modulus\">this answer</a> I&#39;d say it does make a speed difference, since compilers do it if they can (if n is static). Doesn&#39;t say much for how significant it is though"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 31, "creation_date": 1479891581, "post_id": 40759800, "comment_id": 68744626, "body": "Never write &quot;optimized&quot; code. Write code that reflect what you want to do and compiler optimization will do their job. Writing such code decreases readability, portability and often breaks optimization of compiler"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 1, "creation_date": 1479891682, "post_id": 40759800, "comment_id": 68744693, "body": "@Garf365 I have a soon to be PHD friend who makes DBMS more energy efficient... he says exactly the opposite.. although I have to say that I am on your side! :)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 13, "creation_date": 1479891821, "post_id": 40759800, "comment_id": 68744765, "body": "Your Phd friend sounds like someone who never had to write code in a group and maintain it for long"}, {"owner": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 2, "creation_date": 1479891890, "post_id": 40759800, "comment_id": 68744808, "body": "@garf365 for <i>most</i> applications, that rule is true. For applications with performance concerns, optimization is a higher priority though and it could be considered more important than that extra 5% readability. It&#39;s just a rule of thumb afterall"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 11, "creation_date": 1479891954, "post_id": 40759800, "comment_id": 68744867, "body": "@Felk, another rule of thumb is to get correct code first, and do benchmarks with optimizations later. It&#39;s harder when the code isn&#39;t clear."}, {"owner": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 2, "creation_date": 1479892010, "post_id": 40759800, "comment_id": 68744916, "body": "@Garf365: this is a good general guideline, but if speed matters one can sacrifice readability for performance. Suggestion not to scatter this in code then, but use a readable inline function like &#39;size_t ModuloFast(size_t n)&#39;"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 0, "creation_date": 1479892160, "post_id": 40759800, "comment_id": 68745006, "body": "@Felk, gast128, you&#39;re right, but this kind of applications is a really special case, in which proability, maintenability and readability come after performance. And in most case only a small part of complete soft has to be optimized, so only a small part of code has to be &quot;optimized&quot;, embeded in well named function (as gast128 as said)  and after benchmark (as said by StoryTeller)"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1479892162, "post_id": 40759800, "comment_id": 68745008, "body": "@StoryTeller sounds like you know him!! :D"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1479892221, "post_id": 40759800, "comment_id": 68745041, "body": "More like I know the type :) Brilliant people, but they seem to misunderstand collaboration in software development is just as important as writing kickass code."}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1479892385, "post_id": 40759800, "comment_id": 68745139, "body": "@StoryTeller sad but true... it is easier to read his dissassembly than to read his actual c++ code... xD but he is a genius though :)"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 4, "creation_date": 1479897474, "post_id": 40759800, "comment_id": 68748595, "body": "As you saw, this should make no difference for performance. Personally I usually prefer the bitwise AND, for me it&#39;s easier to immediately visualize bitstring being truncated than thinking about modular arithmetic and remembering that remainder by a power of two is the special nice case that I can then again visualize as a bitstring being truncated."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1479898160, "post_id": 40759800, "comment_id": 68749096, "body": "How likely is it that you have a system where you do a lot of divisions with an integer constant that&#39;s a multiple of 8? That&#39;s the only case where this makes sense. It would seem to me that divisions with a variable value would be far more common."}, {"owner": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 0, "creation_date": 1479899342, "post_id": 40759800, "comment_id": 68750006, "body": "Sometimes you don\u2019t want to rely on the compiler doing the optimization, but be absolutely sure that the code has the right shape. Besides, while I definitely second that readability is more important than performance, I have to ask why <code>x % 256</code> is deemed more readable than <code>x &amp; 255</code>. All I see, is a variable, a programming language specific operator, and a constant. Neither <code>%</code> nor <code>&amp;</code> are common mathematical operators outside the programming language\u2019s world. Whether the reader understands either depends on the reader\u2019s knowledge about the programming language."}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 0, "creation_date": 1479899442, "post_id": 40759800, "comment_id": 68750089, "body": "@Holger I see your point, but since &amp; is far more universal and powerful than %, I bet most people know what % will do but not what &amp; will... :("}, {"owner": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 2, "creation_date": 1479900205, "post_id": 40759800, "comment_id": 68750665, "body": "Well, I think programming with care for the hypothetical least educated reader leads to nowhere. There is a difference between code relying on some tricky side effect and code using functions or operators, which might be lesser known than others, right in the intended way. If you stumble over the <code>&amp;</code> operator and don\u2019t know what it does, you can read about it and every documentation there is will be sufficient for understanding the meaning of <code>x &amp; 255</code>. This is not a special corner case of the <code>&amp;</code> operator."}, {"owner": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 0, "creation_date": 1479900234, "post_id": 40759800, "comment_id": 68750688, "body": "I\u2019ve also seen the opposite, where the reader had to understand that <code>%</code> or <code>&#47;</code> with a power of two is actually meaning masking or right shifting\u2026"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479905568, "post_id": 40759800, "comment_id": 68754276, "body": "<i>it is easier to read his dissassembly than to read his actual c++ code</i>: if that was actually true for you, you would already know that <a href=\"http://stackoverflow.com/questions/40354978/why-is-this-c-code-faster-than-my-hand-written-assembly-for-testing-the-collat/40355466#40355466\">AND is much faster than DIV</a>, and that any compiler worth its salt would try hard to avoid using an actual DIV instruction for <code>%</code> or <code>&#47;</code> operations.  :P  (% or / by a compile-time constant compiles to a shift or AND, or for non-power-of-2 to a modular multiplicative inverse)."}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1479905793, "post_id": 40759800, "comment_id": 68754418, "body": "@PeterCordes I never said that it is true for me and this was a joke.. no reason to be mean"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479905946, "post_id": 40759800, "comment_id": 68754534, "body": "I was also trying to be funny, sorry it didn&#39;t work out :/  But mostly I just wanted to post a link where I explained <i>exactly</i> how slow a DIV instruction is on Intel Haswell, compared to AND or SHR.  Not necessarily relevant here, since an important part of this question is whether the compiler needs this help, not what&#39;s fast in asm."}, {"owner": {"reputation": 1369, "user_id": 5771399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c801f6ed43d6b594cfe250a6bf05333?s=128&d=identicon&r=PG&f=1", "display_name": "v7d8dpo4", "link": "https://stackoverflow.com/users/5771399/v7d8dpo4"}, "edited": false, "score": 1, "creation_date": 1479906290, "post_id": 40759800, "comment_id": 68754769, "body": "You should change <code>x &amp; 255 == x % 256</code> to <code>(x &amp; 255) == x % 256</code> because <code>x &amp; 255 == x % 256</code> means <code>x &amp; (255 == x % 256)</code>."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1479907195, "post_id": 40759800, "comment_id": 68755404, "body": "Note that intent of the code is important: if you need to get mathematical result, then prefer <code>%</code>,  but if you need to have 8 lowest bits, then use always <code>&amp;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 3, "creation_date": 1479891676, "post_id": 40759868, "comment_id": 68744686, "body": "If it&#39;s <b>signed</b>, something is difference."}, {"owner": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 2, "creation_date": 1479891735, "post_id": 40759868, "comment_id": 68744717, "body": "The compiler can&#39;t optimize it with <code>n</code> not being static though"}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "reply_to_user": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 2, "creation_date": 1479891783, "post_id": 40759868, "comment_id": 68744742, "body": "@Jonas Fixed that typo"}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "reply_to_user": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 1, "creation_date": 1479891836, "post_id": 40759868, "comment_id": 68744775, "body": "@Felk If we don&#39;t know it statically, we can&#39;t change it to bitwise and though! If we choose to compare and branching, I don&#39;t think it&#39;s good"}, {"owner": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 0, "creation_date": 1479892118, "post_id": 40759868, "comment_id": 68744982, "body": "@Danh yes, but OP said in his case n will be suitable for this optimization at runtime"}, {"owner": {"reputation": 560, "user_id": 4604776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cXKU6.jpg?s=128&g=1", "display_name": "Nonanon", "link": "https://stackoverflow.com/users/4604776/nonanon"}, "edited": false, "score": 0, "creation_date": 1479893255, "post_id": 40759868, "comment_id": 68745716, "body": "Even if this optimization would not happen, I would consider the CARP rule (the computer is really powerful). If you don&#39;t know the speed differences between an &amp; and a %, then you shouldn&#39;t really switch one for the other."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1479903050, "post_id": 40759868, "comment_id": 68752630, "body": "MSVC also makes the optimizations as depicted here. (Although it does emit slightly different code for <code>mod_signed</code>, it is logically equivalent and would have no significant differences in performance.)  I point this out because MSVC&#39;s output is not available through Godbolt&#39;s Compiler Explorer."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "reply_to_user": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 0, "creation_date": 1479903244, "post_id": 40759868, "comment_id": 68752752, "body": "@felk I don&#39;t understand what you are trying to say. First of all, I don&#39;t see the identifier <code>n</code> anywhere here, so I assume you mean the input to the function, <code>i</code>. And <code>i</code> absolutely does not have to be &quot;static&quot; (by which I suppose you mean a compile-time constant?) in order for the compiler to optimize it. Danh has shown the object code that the compiler will emit for these four functions. If they get inlined, then that code will be inlined. There may be <i>further</i> optimizations made in that case if the function input is a compile-time constant, but you&#39;ll <i>always</i> get these transformations."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1479909927, "post_id": 40759868, "comment_id": 68757243, "body": "I did some <a href=\"https://godbolt.org/g/ocAjsY\" rel=\"nofollow noreferrer\">further testing</a> based on your example, and it looks like both GCC and Clang are also smart enough to optimize <code>i % (1 &lt;&lt; k)</code> into the equivalent of <code>i &amp; ((1 &lt;&lt; k) - 1)</code> if <code>i</code> is unsigned. For signed <code>i</code>, however, both fall back to using <code>idiv</code> for <code>%</code> even if the modulus is guaranteed to be a power of 2!"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 2, "creation_date": 1479912556, "post_id": 40759868, "comment_id": 68759046, "body": "For anyone who&#39;s curious, the code generated for <code>mod_signed</code> is equivalent to: <code>int d = i &lt; 0 ? 255 : 0; return ((i + d) &amp; 255) - d;</code>"}], "tags": [], "owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "is_accepted": true, "score": 46, "last_activity_date": 1479956973, "last_edit_date": 1495541351, "creation_date": 1479891448, "answer_id": 40759868, "question_id": 40759800, "link": "https://stackoverflow.com/questions/40759800/in-special-cases-is-faster-than/40759868#40759868", "title": "In special cases: Is &amp; faster than %?", "body": "<p>If your integral type is unsigned, the compiler will optimize it, and the result will be the same. If it's signed, something is different...</p>\n\n<p>This program:</p>\n\n<pre><code>int mod_signed(int i) {\n  return i % 256;\n}\nint and_signed(int i) {\n  return i &amp; 255;\n}\nunsigned mod_unsigned(unsigned int i) {\n  return i % 256;\n}\nunsigned and_unsigned(unsigned int i) {\n  return i &amp; 255;\n}\n</code></pre>\n\n<p>will be compiled (<a href=\"https://godbolt.org/g/K18anM\" rel=\"nofollow noreferrer\">by GCC 6.2 with -O3; Clang 3.9 produces very similar code</a>) into:</p>\n\n<pre><code>mod_signed(int):\n        mov     edx, edi\n        sar     edx, 31\n        shr     edx, 24\n        lea     eax, [rdi+rdx]\n        movzx   eax, al\n        sub     eax, edx\n        ret\nand_signed(int):\n        movzx   eax, dil\n        ret\nmod_unsigned(unsigned int):\n        movzx   eax, dil\n        ret\nand_unsigned(unsigned int):\n        movzx   eax, dil\n        ret\n</code></pre>\n\n<p>The result assembly of <code>mod_signed</code> is different because </p>\n\n<blockquote>\n  <p>If both operands to a multiplication, division, or modulus expression have the same sign, the result is positive. Otherwise, the result is negative. The result of a modulus operation's sign is implementation-defined.</p>\n</blockquote>\n\n<p>and AFAICT, most of implementation decided that the result of a modulus expression is always the same as the sign of the first operand. See <a href=\"https://msdn.microsoft.com/en-us/library/ty2ax9z9.aspx\" rel=\"nofollow noreferrer\">this documentation</a>.</p>\n\n<p>Hence, <code>mod_signed</code> is optimized to (from <a href=\"https://stackoverflow.com/users/1956010/nwellnhof\">nwellnhof</a>'s comment):</p>\n\n<pre><code>int d = i &lt; 0 ? 255 : 0;\nreturn ((i + d) &amp; 255) - d;\n</code></pre>\n\n<hr>\n\n<p>Logically, we can prove that <code>i % 256 == i &amp; 255</code> for all unsigned integers, hence, we can trust the compiler to do its job.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 3, "creation_date": 1479905841, "post_id": 40762576, "comment_id": 68754461, "body": "For / and %, this is only true with unsigned.  You won&#39;t lose <i>much</i> performance, but implementing signed division by a constant power of 2 takes more than just an arithmetic right shift (to handle the difference in rounding for negative numbers).  Similarly, it takes extra work to use a modular multiplicative inverse for div or mod by a non-power-of-2 on a signed integer."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479910471, "post_id": 40762576, "comment_id": 68757618, "body": "@PeterCordes however the compiler is clever enough to know that &quot;(a % b + b) % b&quot; and can be turned into a bit operation. I haven&#39;t found an optimizable expression that can turn division into shifting though."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1479938784, "post_id": 40762576, "comment_id": 68773713, "body": "@Random832: I meant for division by a compile-time constant."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 2, "last_activity_date": 1479899100, "last_edit_date": 1495540406, "creation_date": 1479898754, "answer_id": 40762576, "question_id": 40759800, "link": "https://stackoverflow.com/questions/40759800/in-special-cases-is-faster-than/40762576#40762576", "title": "In special cases: Is &amp; faster than %?", "body": "<p>I did some measurements with gcc, and \nif the argument of a <code>/</code> or <code>%</code> is a compiled time constant that's a power of 2, gcc can  turn it into the corresponding bit operation.</p>\n\n<p>Here are some of my benchmarks for divisions \n<a href=\"https://stackoverflow.com/questions/12977050/what-has-a-better-performance-multiplication-or-division/38857588#38857588\">What has a better performance: multiplication or division?</a> and as you can see, the running times with divisors that are statically known powers of two are noticably lower than with other statically known divisors.</p>\n\n<p>So if <code>/</code> and <code>%</code> with statically known power-of-two arguments describe your algorithm better than bit ops, feel free to prefer <code>/</code> and <code>%</code>.\nYou shouldn't lose any performance with a decent compiler.</p>\n"}], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3320, "favorite_count": 4, "accepted_answer_id": 40759868, "answer_count": 2, "score": 40, "last_activity_date": 1480023389, "creation_date": 1479891236, "last_edit_date": 1495542299, "question_id": 40759800, "link": "https://stackoverflow.com/questions/40759800/in-special-cases-is-faster-than", "title": "In special cases: Is &amp; faster than %?", "body": "<p>I saw the chosen <a href=\"https://stackoverflow.com/a/40751824/1788806\">answer</a> to this <a href=\"https://stackoverflow.com/questions/40751662/is-a-b-255-255-the-same-as-a-b-255\">post</a>.</p>\n\n<p>I was suprised that <code>(x &amp; 255) == (x % 256)</code> if x is an unsigned integer, I wondered if it makes sense to always replace <code>%</code> with <code>&amp;</code> in <code>x % n</code> for <code>n = 2^a (a = [1, ...])</code> and x being a positive integer. </p>\n\n<p>Since this is a special case in which I as a human can decide because I know with which values the program will deal with and the compiler does not. <strong>Can I gain a significant performance boost if my program uses a lot of modulo operations?</strong></p>\n\n<p>Sure, I could just compile and look at the dissassembly. But this would only answer my question for one compiler/architecture. I would like to know if this is in principle faster.</p>\n"}, {"tags": ["c", "recursion", "linked-list"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479892407, "post_id": 40759707, "comment_id": 68745150, "body": "The <code>sort_ll</code> function modifies <code>head</code> (indirectly) but you don&#39;t emulate &quot;pass by reference&quot;. I assume you do it because the function returns a <code>Node *</code>, but the problem is that <code>sort_ll</code> will <i>always</i> return <code>NULL</code>. Use a debugger, and step through the code line by line."}, {"owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479892496, "post_id": 40759707, "comment_id": 68745198, "body": "@Someprogrammerdude I was also experimenting with this signature <code>Node* sort_ll(Node** head)</code> but didn&#39;t get any better results, only different type of wrong behavior. Can you explain further please? Or provide an example?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1479892653, "post_id": 40759707, "comment_id": 68745302, "body": "You have three return statements in <code>sort_ll</code>. One is <code>return NULL;</code> and the two others are both <code>return sort_ll(...);</code> How can it ever return a non-NULL?"}, {"owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "edited": false, "score": 0, "creation_date": 1479892789, "post_id": 40759707, "comment_id": 68745411, "body": "My plan was that <code>return NULL</code> line executes only when sorting is finished, however I admit to not being very good with recursion techniques. Can you provide an example of working code please?"}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "edited": false, "score": 0, "creation_date": 1479900166, "post_id": 40762758, "comment_id": 68750630, "body": "Works like a charm! Thanks a lot! I guess what confused me was this last part, and returning <code>to_move</code> node... Thanks again!"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "edited": false, "score": 0, "creation_date": 1479900363, "post_id": 40762758, "comment_id": 68750790, "body": "max_node-&gt;next = sort(rest of unsorted_list); return max_node;"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 2, "last_activity_date": 1479899831, "last_edit_date": 1479899831, "creation_date": 1479899212, "answer_id": 40762758, "question_id": 40759707, "link": "https://stackoverflow.com/questions/40759707/c-recursive-sorting-of-linked-list/40762758#40762758", "title": "C: Recursive sorting of linked list", "body": "<p>fix like this</p>\n\n<pre><code>Node *sort_ll(Node* head){\n    if(head == NULL || head-&gt;next == NULL)\n        return head;//There is no need for processing\n\n    int max = head-&gt;data;\n    Node *prev = head;\n    Node *to_move = NULL;\n    Node *tmp = head-&gt;next;\n\n    //find maximum value in rest(head-&gt;next)\n    while(tmp != NULL) {\n        if(tmp-&gt;data &gt; max) {\n            max = tmp-&gt;data;\n            to_move = prev;//save previous node for remove link\n        }\n        prev = tmp;\n        tmp = tmp-&gt;next;\n    }\n\n    if(to_move == NULL) {//not find in rest\n        head-&gt;next = sort_ll(head-&gt;next);\n        return head;\n    }\n\n    prev = to_move;\n    to_move = prev-&gt;next;//max node\n    prev-&gt;next = prev-&gt;next-&gt;next;//max node remove from link\n    to_move-&gt;next = sort_ll(head);\n    return to_move;\n}\n</code></pre>\n"}], "owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2206, "favorite_count": 1, "accepted_answer_id": 40762758, "answer_count": 1, "score": 1, "last_activity_date": 1479899831, "creation_date": 1479890960, "question_id": 40759707, "link": "https://stackoverflow.com/questions/40759707/c-recursive-sorting-of-linked-list", "title": "C: Recursive sorting of linked list", "body": "<p>I'm trying to implement a recursive sorting algorithm for linked list structure. C language.</p>\n\n<p>My algorithm is this:\n1) find max value in list\n2) remove it from the list and insert it at Head node\n3) start algorithm again from next node\n4) run until you reach end of list</p>\n\n<p>I have something, but it doesn't 'remember' my list. I realize I'm making a mistake somewhere (probably recursive calls), but I can't understand how to fix it.</p>\n\n<pre><code>typedef struct Node{\nint data;\nstruct Node* next;\n} Node;\n\nvoid insert(Node** head, int val)\n{\n        //insert at top\n        Node* to_insert = (Node*)malloc(sizeof(Node));\n        to_insert-&gt;data = val;\n        to_insert-&gt;next = (*head);\n        (*head) = to_insert;\n}\n\nNode* sort_ll(Node* head)\n{\n    //base case, iterated trough entire list\n    if(head == NULL)\n        return NULL;\n\n    int max = 0;\n    Node* tmp = head;\n    Node* to_move = tmp;\n\n    //find maximum value\n    while(tmp != NULL) {\n        if(tmp-&gt;data &gt; max) {\n            max = tmp-&gt;data;\n            to_move = tmp;\n        }\n        tmp = tmp-&gt;next;\n    }\n\n    //if its currently top, leave it there\n    if(to_move == head) {\n        return sort_ll(head-&gt;next);\n    }\n\n    //find node with max value\n    tmp = head;\n    while(tmp-&gt;next != to_move) {\n        tmp = tmp-&gt;next;\n    }\n\n    //cut it out from the list\n    tmp-&gt;next = tmp-&gt;next-&gt;next;\n    free(to_move);\n\n    //insert value at the head of the list\n    insert(&amp;head, max);\n\n    return sort_ll(head-&gt;next);\n}\n\nint main()\n{\n    Node* list = NULL;\n\n    insert(&amp;list, 3);\n    insert(&amp;list, 6);\n    insert(&amp;list, 7);\n    insert(&amp;list, 2);\n    insert(&amp;list, 1);\n    insert(&amp;list, 5);\n    insert(&amp;list, 4);\n\n    list = sort_ll(list);\n\n    Node* tmp = list;\n\n    while(tmp != NULL) {\n        printf(\"%d\\n\", tmp-&gt;data);\n        tmp = tmp-&gt;next;\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 4, "creation_date": 1479890859, "post_id": 40759629, "comment_id": 68744141, "body": "What&#39;s important is how much precision you need. Is an approximation enough?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1479891036, "post_id": 40759629, "comment_id": 68744259, "body": "@Garf365 those are <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#IntegerLog10\" rel=\"nofollow noreferrer\">integer log10</a> which might not be what the OP wants"}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 1, "creation_date": 1479891064, "post_id": 40759629, "comment_id": 68744281, "body": "FWIW x86 (assuming that&#39;s your target) has some log instructions (log2 mostly, not log10, unfortunately). If you really need bleeding performance then you could put together some assembly code using those instructions (and do log base conversion yourself)."}, {"owner": {"reputation": 1444, "user_id": 7105378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcC0z.jpg?s=128&g=1", "display_name": "alpereira7", "link": "https://stackoverflow.com/users/7105378/alpereira7"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1479891193, "post_id": 40759629, "comment_id": 68744368, "body": "@L\u01b0uV\u0129nhPh&#250;c Yes, approximation can be OK, i&#39;m not sure how much precision is needed for now, I will have to make some tests."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1479892479, "post_id": 40759629, "comment_id": 68745184, "body": "<a href=\"http://www.machinedlearnings.com/2011/06/fast-approximate-logarithm-exponential.html\" rel=\"nofollow noreferrer\">Fast Approximate Logarithm, Exponential, Power, and Inverse Root</a>, <a href=\"http://www.ebaytechblog.com/2015/05/01/fast-approximate-logarithms-part-i-the-basics/\" rel=\"nofollow noreferrer\">Fast Approximate Logarithms</a>, <a href=\"https://github.com/herumi/fmath\" rel=\"nofollow noreferrer\">fast log and exp functions for x86/x64 SSE</a>, <a href=\"http://gruntthepeon.free.fr/ssemath/\" rel=\"nofollow noreferrer\">Simple SSE and SSE2 (and now NEON) optimized sin, cos, log and exp</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1479892783, "post_id": 40759629, "comment_id": 68745406, "body": "@Dai only x87 has instructions for <code>log</code>, but those are very slow compared to optimized SIMD version. There&#39;s no <code>log</code> in SSE/AVX. But if one has <code>log2</code>, it&#39;s very easy to obtain <code>log10(x)</code> which is <code>log2(x)&#47;log2(10)</code>"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 1, "creation_date": 1479973434, "post_id": 40759629, "comment_id": 68784261, "body": "what platform is this for? what does it mean faster? do you have some code for  comparison with measured times?  In most cases in a rookie code the bottleneck is elsewhere like heap/stack trashing , reallocations , CACHE problems etc... What kind of numbers are you dealing with IEEE floats (32/64/80 bits) or something else (as you have no math.h then it could be anything like fixed point)?  Not sure LUT is the way for log due to precision problems."}, {"owner": {"reputation": 1444, "user_id": 7105378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcC0z.jpg?s=128&g=1", "display_name": "alpereira7", "link": "https://stackoverflow.com/users/7105378/alpereira7"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1480090513, "post_id": 40759629, "comment_id": 68838532, "body": "@L\u01b0uV\u0129nhPh&#250;c, do the implementations described on your links need special libraries ?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1480477932, "post_id": 40759629, "comment_id": 68974605, "body": "I don&#39;t see any reason they should use an external library. Those are their own custom libraries which implement their specific calculations without any special types needed. But to be sure why don&#39;t just look at their implementations? math.h&#39;s <code>log10</code> calculates the full precision <code>log</code>, therefore it&#39;s always slower than approximations. So as I said what&#39;s important is how many bits of precision you need. Because a 10-bit approximation will be faster than a 20-bit approximation (example: <a href=\"http://stackoverflow.com/q/1528727/995714\"><code>rsqrt</code> vs <code>sqrt</code></a>)"}], "answers": [{"tags": [], "owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "is_accepted": false, "score": 2, "last_activity_date": 1479893333, "creation_date": 1479893333, "answer_id": 40760495, "question_id": 40759629, "link": "https://stackoverflow.com/questions/40759629/quicker-log10-function-without-using-math-h/40760495#40760495", "title": "Quicker log10 function without using math.h", "body": "<p>What about a lookup table. There is no faster \"calculation\". </p>\n\n<p>You should provide more details about your problem. Do you neet a generic log10 function? Is there a fixed value range? Do you neet it for floating point numbers or integer arithmetic?</p>\n\n<p>If you need a generic aproach function for floating points it will be quite hard to be faster than the log10 function in the standard library. Maybe fixed point arithmetic is an alternative? There are plenty of free fixed point implementations out there.</p>\n\n<p>This side provides a nice overview of ways to calculate a logarithmic function numerically: <a href=\"http://yacas.sourceforge.net/Algochapter5.html#c5s3\" rel=\"nofollow noreferrer\">http://yacas.sourceforge.net/Algochapter5.html#c5s3</a></p>\n"}], "owner": {"reputation": 1444, "user_id": 7105378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcC0z.jpg?s=128&g=1", "display_name": "alpereira7", "link": "https://stackoverflow.com/users/7105378/alpereira7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1479896544, "creation_date": 1479890703, "last_edit_date": 1479896544, "question_id": 40759629, "link": "https://stackoverflow.com/questions/40759629/quicker-log10-function-without-using-math-h", "title": "Quicker log10 function without using math.h", "body": "<p>I have some problems with the log10 function and the importing of math.h. The usage of this function is likely critical for now and I need to reduce their consumption.</p>\n\n<p>Is there a way to use a quicker log10 function that will not need to include math.h library ?</p>\n\n<p><em>Some precisions : I need a log algorithm on real values (from -100. to 100.) and returning real values. An approximation table with interpolations between steps can be accepted if it is faster than log10.</em></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 889, "user_id": 1521241, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/01090d621800a51df9188fc8cdb28178?s=128&d=identicon&r=PG", "display_name": "macroland", "link": "https://stackoverflow.com/users/1521241/macroland"}, "edited": false, "score": 0, "creation_date": 1479890686, "post_id": 40759555, "comment_id": 68744029, "body": "you need a second argument to your <code>hello</code>, such as <code>string filename</code>"}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1479890961, "post_id": 40759555, "comment_id": 68744214, "body": "Your code is pure C, I removed the C++ tag. C and C++ are <b>not</b> the same language"}, {"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 4, "creation_date": 1479891285, "post_id": 40759555, "comment_id": 68744425, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/766893/how-do-i-modify-a-pointer-that-has-been-passed-into-a-function-in-c\">How do I modify a pointer that has been passed into a function in C?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1170, "user_id": 771451, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/be0b359becd3d11206ab659fcef3ac0a?s=128&d=identicon&r=PG", "display_name": "Aymanadou", "link": "https://stackoverflow.com/users/771451/aymanadou"}, "reply_to_user": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1479892059, "post_id": 40759641, "comment_id": 68744946, "body": "<a href=\"http://stackoverflow.com/questions/8441059/what-happens-to-file-pointer-after-file-is-closed\" title=\"what happens to file pointer after file is closed\">stackoverflow.com/questions/8441059/&hellip;</a> fp is null after fclose , fopen givs a new fp"}, {"owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "edited": false, "score": 0, "creation_date": 1479894273, "post_id": 40759641, "comment_id": 68746402, "body": "Erm, no, <code>fclose</code> does not change <code>*fp</code>, so &quot;is it NULL` is merely a convention."}], "tags": [], "owner": {"reputation": 1170, "user_id": 771451, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/be0b359becd3d11206ab659fcef3ac0a?s=128&d=identicon&r=PG", "display_name": "Aymanadou", "link": "https://stackoverflow.com/users/771451/aymanadou"}, "is_accepted": false, "score": 0, "last_activity_date": 1479892122, "last_edit_date": 1479892122, "creation_date": 1479890756, "answer_id": 40759641, "question_id": 40759555, "link": "https://stackoverflow.com/questions/40759555/updating-file-pointer-via-other-function/40759641#40759641", "title": "updating file pointer via other function", "body": "<p>you should close the file before reopning it</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid hello(FILE ** fp)\n{ \n fclose(*fp);\nif( ( *fp = fopen(\"log\",\"r\") ) == NULL)\n  printf(\"%s\", \"Error opening file\");    \n}\n\nvoid main()\n{\n char p;\n FILE *sf=fopen(\"prac.txt\",\"r\");\n hello(&amp;sf);\n\n p=fgetc(sf);\n printf(\"%c\",p);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 6914841, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/327e7771744ce8cd83ea58181403e79a?s=128&d=identicon&r=PG&f=1", "display_name": "enamel", "link": "https://stackoverflow.com/users/6914841/enamel"}, "edited": false, "score": 0, "creation_date": 1479891728, "post_id": 40759712, "comment_id": 68744715, "body": "thank you ..... why we require this fclose(fp)? ............ i was trying to update the &#39;sf&#39; pointer address by call by reference"}, {"owner": {"reputation": 834, "user_id": 7131047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a1cf5eb86c98bcf94e80e722fff20e?s=128&d=identicon&r=PG&f=1", "display_name": "Fefux", "link": "https://stackoverflow.com/users/7131047/fefux"}, "reply_to_user": {"reputation": 81, "user_id": 6914841, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/327e7771744ce8cd83ea58181403e79a?s=128&d=identicon&r=PG&f=1", "display_name": "enamel", "link": "https://stackoverflow.com/users/6914841/enamel"}, "edited": false, "score": 0, "creation_date": 1479892244, "post_id": 40759712, "comment_id": 68745051, "body": "Read the answer of Adam Rosenfield for fclose : <a href=\"http://stackoverflow.com/questions/8175827/what-happens-if-i-dont-call-fclose-in-a-c-program\" title=\"what happens if i dont call fclose in a c program\">stackoverflow.com/questions/8175827/&hellip;</a>. Another point, here you don&#39;t update the sf pointer address, you update directly a copy of the sf pointer. When you call by reference, you have to send the address of your variable. If your variable is a pointer, you have to send a pointer of pointer. Here sf is <code>FILE*</code> and it address type is <code>FILE**</code> (see Vatine&#39;s solution)"}], "tags": [], "owner": {"reputation": 834, "user_id": 7131047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a1cf5eb86c98bcf94e80e722fff20e?s=128&d=identicon&r=PG&f=1", "display_name": "Fefux", "link": "https://stackoverflow.com/users/7131047/fefux"}, "is_accepted": false, "score": 2, "last_activity_date": 1479891319, "last_edit_date": 1479891319, "creation_date": 1479890973, "answer_id": 40759712, "question_id": 40759555, "link": "https://stackoverflow.com/questions/40759555/updating-file-pointer-via-other-function/40759712#40759712", "title": "updating file pointer via other function", "body": "<p>In <code>void hello(FILE *fp)</code>, <code>fp</code> only exists in the scope of the function <code>hello</code> (the value of the pointer is copied when you call the function and it's destroyed at the end of the func).</p>\n\n<p>This works: </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nFILE* hello(FILE * fp)\n{ \n    fclose(fp);\n    if( ( fp = fopen(\"log\",\"r\") ) == NULL) {\n        printf(\"%s\", \"Error opening file\");\n        return NULL;\n    }\n    return fp;\n}\n\nvoid main()\n{\n    char p;\n    FILE *sf=fopen(\"prac.txt\",\"r\");\n    sf = hello(sf);\n\n    if (sf != NULL) \n    {\n        p=fgetc(sf);\n        printf(\"%c\",p);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 6914841, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/327e7771744ce8cd83ea58181403e79a?s=128&d=identicon&r=PG&f=1", "display_name": "enamel", "link": "https://stackoverflow.com/users/6914841/enamel"}, "edited": false, "score": 0, "creation_date": 1479891843, "post_id": 40759720, "comment_id": 68744777, "body": "why closing is required?"}, {"owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "reply_to_user": {"reputation": 81, "user_id": 6914841, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/327e7771744ce8cd83ea58181403e79a?s=128&d=identicon&r=PG&f=1", "display_name": "enamel", "link": "https://stackoverflow.com/users/6914841/enamel"}, "edited": false, "score": 0, "creation_date": 1479894156, "post_id": 40759720, "comment_id": 68746321, "body": "@enamel Couple of reasons. Data that has been &quot;written&quot; (but is still buffered by the program) may get lost. &quot;Open files&quot; is a very limited resource, so you should not waste them. And if you over-write a FILE* like that, you have absolutely no way of being able to close it, or flush it, afterwards."}], "tags": [], "owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "is_accepted": false, "score": 3, "last_activity_date": 1479894421, "last_edit_date": 1479894421, "creation_date": 1479890998, "answer_id": 40759720, "question_id": 40759555, "link": "https://stackoverflow.com/questions/40759555/updating-file-pointer-via-other-function/40759720#40759720", "title": "updating file pointer via other function", "body": "<p>If you want to change what the <code>FILE*</code> points to, you need to pass a <code>FILE**</code>. Before you change it, you need to ensure that any file it happens to be pointing to is closed. This also relies on you always setting <code>FILE*</code> variables to NULL after <code>fclose</code> (this, alas, does not happen automatically), so there's a decent chance careless use of this function would call <code>fclose</code> on an already-closed <code>FILE*</code>. But this is probably still better than willfully leaking file descriptors and not flushing files.</p>\n\n<pre><code>void hello(FILE **fp)\n{\n  // This is actually a horrible test. And in general, this is not\n  // something you should do, but it is better than leaking open\n  // file descriptors, so, yeah, \n  if (*fp != NULL) {\n    fclose(*fp);\n    *fp = NULL;\n    printf(\"Closed file.\");\n  }\n  if( (*fp = fopen(\"log\",\"r\") == NULL) {\n    printf(\"%s\", \"Error opening file\");\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6224, "user_id": 3994824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hU1H.jpg?s=128&g=1", "display_name": "Thomas Pinetz", "link": "https://stackoverflow.com/users/3994824/thomas-pinetz"}, "is_accepted": false, "score": 0, "last_activity_date": 1479891028, "creation_date": 1479891028, "answer_id": 40759726, "question_id": 40759555, "link": "https://stackoverflow.com/questions/40759555/updating-file-pointer-via-other-function/40759726#40759726", "title": "updating file pointer via other function", "body": "<p>This is because you copy arguments. You do not override the content of the file pointer only the local copy of the address. </p>\n\n<p>The file pointer itself is not updated. To archive this either pass a pointer to a pointer to the function and dereference accordingly or return the new file pointer and override the old one. Anyways care for closing the file.</p>\n"}, {"tags": [], "owner": {"reputation": 4831, "user_id": 1336087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UtRb6.png?s=128&g=1", "display_name": "ani627", "link": "https://stackoverflow.com/users/1336087/ani627"}, "is_accepted": false, "score": 0, "last_activity_date": 1479892333, "creation_date": 1479892333, "answer_id": 40760149, "question_id": 40759555, "link": "https://stackoverflow.com/questions/40759555/updating-file-pointer-via-other-function/40760149#40760149", "title": "updating file pointer via other function", "body": "<pre><code>#include&lt;stdio.h&gt;\n// Use double pointer since fp is getting address of a pointer variable\nvoid hello(FILE ** fp)\n{ \n    // If the file is already pointing to some file then close that file\n    if(*fp != NULL)\n    {\n        fclose(*fp); \n        *fp = NULL;\n    }\n    if( ( *fp = fopen(\"log\",\"r\") ) == NULL)\n        printf(\"%s\", \"Error opening file\");\n}\n\nint main()\n{\n    char p;\n    FILE *sf=fopen(\"prac.txt\",\"r\");\n    // While sending the file pointer you need to send the address of the file pointer\n    hello(&amp;sf);\n\n    p=fgetc(sf);\n    printf(\"%c\",p);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6914841, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/327e7771744ce8cd83ea58181403e79a?s=128&d=identicon&r=PG&f=1", "display_name": "enamel", "link": "https://stackoverflow.com/users/6914841/enamel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1479894421, "creation_date": 1479890527, "last_edit_date": 1479891139, "question_id": 40759555, "link": "https://stackoverflow.com/questions/40759555/updating-file-pointer-via-other-function", "title": "updating file pointer via other function", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nvoid hello(FILE * fp)\n{ \n    if( ( fp = fopen(\"log\",\"r\") ) == NULL)\n        printf(\"%s\", \"Error opening file\");\n}\n\nvoid main()\n{\n    char p;\n    FILE *sf=fopen(\"prac.txt\",\"r\");\n    hello(sf);\n\n    p=fgetc(sf);\n    printf(\"%c\",p);\n}\n</code></pre>\n\n<p>I wanted to change the file pointer <code>sf</code> to point to file <code>log</code> via <code>hello</code> function but <code>printf</code> is still printing the content of <code>prac.txt</code> file.</p>\n"}, {"tags": ["mysql", "c", "database"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479890170, "post_id": 40759399, "comment_id": 68743754, "body": "When you create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us, it&#39;s important that it&#39;s actually <i>verifiable</i>, i.e. that it builds (unless you&#39;re asking about build errors of course)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479890355, "post_id": 40759399, "comment_id": 68743840, "body": "As for your problem, remember that <code>row</code> (in your program) is an array of <i>strings</i>. The value you get, <code>49</code>, happens to be the <a href=\"http://en.cppreference.com/w/c/language/ascii\" rel=\"nofollow noreferrer\">ASCII value</a> of the character <code>&#39;1&#39;</code>."}, {"owner": {"reputation": 1, "user_id": 7198673, "user_type": "registered", "profile_image": "https://graph.facebook.com/1333093760043219/picture?type=large", "display_name": "Marijn Stam", "link": "https://stackoverflow.com/users/7198673/marijn-stam"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479890649, "post_id": 40759399, "comment_id": 68744005, "body": "So instead of using an int to hold the value should I make a char array to hold it? Follow up question, since I need to use this value in further programs to give the system instructions, how do I make the value an actual integer?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479891020, "post_id": 40759399, "comment_id": 68744248, "body": "You already <i>have</i> a &quot;char array&quot;: <code>row[0]</code>. Use a function such as <code>strtol</code> to convert it to an integer."}, {"owner": {"reputation": 1, "user_id": 7198673, "user_type": "registered", "profile_image": "https://graph.facebook.com/1333093760043219/picture?type=large", "display_name": "Marijn Stam", "link": "https://stackoverflow.com/users/7198673/marijn-stam"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479891615, "post_id": 40759399, "comment_id": 68744646, "body": "Nice, it worked! Thanks a bunch man."}], "owner": {"reputation": 1, "user_id": 7198673, "user_type": "registered", "profile_image": "https://graph.facebook.com/1333093760043219/picture?type=large", "display_name": "Marijn Stam", "link": "https://stackoverflow.com/users/7198673/marijn-stam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479889933, "creation_date": 1479889933, "question_id": 40759399, "link": "https://stackoverflow.com/questions/40759399/having-trouble-displaying-a-single-field-from-database-using-mysql-api-in-c", "title": "Having trouble displaying a single field from database using MySQL API in C", "body": "<p>I'm working on a school project at the moment and I need to fetch values from a database to a Raspberry PI which then needs to act accordingly (turn on light, open door etc..) depending on the values.</p>\n\n<p>I've finished my Java programming course but I'm still very much a beginner in C (started a week ago). There might be very obvious problems with the code that I'm just not seeing.</p>\n\n<p>I've been using the MySQL API in C to update the values in the database but I'm having problems fetching values. \nHere's the code I'm using:</p>\n\n<pre><code>#include &lt;my_global.h&gt;\n#include &lt;mysql.h&gt;\n#include &lt;stdio.h&gt;\n\n\nint main()\n{      \nMYSQL *conn;\n\nconn = mysql_init(NULL);\n\nif (!mysql_real_connect(conn, \"localhost\", \"user\", \"password\", \n      \"testdb\", 0, NULL, 0)) \n{\n  fprintf(stderr, \"%s\\n\", mysql_error(conn));\nexit(1);\n}    \n\nif (mysql_query(con, \"SELECT sensorwaarde FROM Sensordata WHERE  samplenummer = 4\")) \n{\n  exit(1);\n}\n\nMYSQL_RES *result = mysql_store_result(con);\n\nif (result == NULL) \n{\n  exit(1);\n}\n\nint num_fields = mysql_num_fields(result); \nint value;\nMYSQL_ROW row;\n\nwhile ((row = mysql_fetch_row(result))) \n{ \n  value = *row[0] \n}\nprintf(\"%d\", value);\nmysql_free_result(result);\nmysql_close(con);\n\nreturn 0;\n}\n</code></pre>\n\n<p>The database I'm connecting to holds the table \"Sensordata\" which I'm fetching from. It has 3 columns and 2 rows, I'm trying to retrieve the value which is held in the 3rd column and the 1st row (holds value 10). I checked to see if there's a way to simply fetch data from a single field in the table but there seems to be no simple way to do this. </p>\n\n<p>This code compiles properly but it prints the value 49, which is nowhere in my database.</p>\n\n<p>Can anyone help me out on this one?</p>\n\n<p>Thanks a bunch!</p>\n"}, {"tags": ["c", "standards", "wchar-t", "widechar", "c-standard-library"], "comments": [{"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1479890670, "post_id": 40759266, "comment_id": 68744018, "body": "There is no standard that mentions wint_t."}], "answers": [{"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479890491, "post_id": 40759469, "comment_id": 68743913, "body": "But returning <code>(-1)</code> to an <code>unsigned short</code> is equivalent to 0xFFFF which would be a valid character in unicode, or am I forgetting something?"}, {"owner": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "edited": false, "score": 0, "creation_date": 1479891353, "post_id": 40759469, "comment_id": 68744472, "body": "You seem to have confused UTf-8 and codepoint in your middle paragraph, in UTF-8 the octet 255 is not valid, and <code>L&#39;&#255;&#39;</code> in UTF-8 is encoded as two octets, C3 BF."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "edited": false, "score": 0, "creation_date": 1479900913, "post_id": 40759469, "comment_id": 68751195, "body": "@PeteKirkham: I rephrased the answer for clarity, the charset and the file encoding are 2 different matters, we are not concerned about the encoding, as long as it is correct and properly configured."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479901115, "post_id": 40759469, "comment_id": 68751332, "body": "@KamiKaze: <code>0xFFFF</code> is actually an invalid Unicode code-point, but if <code>wchar_t</code> is unsigned, it would be a valid <code>wchar_t</code> value, and it would make sense that it be different from <code>WEOF</code>, which can be achieved by defining <code>WEOF</code> as <code>(-1)</code> and <code>wint_t</code> as <code>int</code>."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1479900755, "last_edit_date": 1479900755, "creation_date": 1479890193, "answer_id": 40759469, "question_id": 40759266, "link": "https://stackoverflow.com/questions/40759266/how-to-cast-to-wint-t-and-to-wchar-t/40759469#40759469", "title": "How to cast to `wint_t` and to `wchar_t`?", "body": "<p>On the environment you describe, <code>wchar_t</code> cannot accurately describe the BMP: <code>L'\\uFEFF'</code> exceeds the range of <code>wchar_t</code> as its type is the <strong>unsigned</strong> equivalent to <code>wchar_t</code>. (C11 <strong>6.4.4.4 Character constants p9</strong>). Storing it to <code>wchar_t</code> defined as <code>signed short</code>, assuming 16-bit shorts, changes its value.</p>\n\n<p>On the other hand, if the charset used for the source code is Unicode and the compiler is properly configured to parse its encoding correctly, <code>L'\u00ff'</code> has the value <code>255</code> with an unsigned type, so the code in the second example is perfectly defined and unambiguous.</p>\n\n<p>If <code>int</code> is 32-bit wide and <code>short</code> 16-bit wide, it seems much more consistent to define <code>wchar_t</code> as either <code>int</code> or <code>unsigned short</code>.  <code>WEOF</code> can then be defined as <code>(-1)</code>, a value different from all values of <code>wchar_t</code> or at least all values representing Unicode code-points.</p>\n"}], "owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 40759469, "answer_count": 1, "score": 2, "last_activity_date": 1479900755, "creation_date": 1479889486, "last_edit_date": 1495541373, "question_id": 40759266, "link": "https://stackoverflow.com/questions/40759266/how-to-cast-to-wint-t-and-to-wchar-t", "title": "How to cast to `wint_t` and to `wchar_t`?", "body": "<p>Are the standards saying that casting to <code>wint_t</code> and to <code>wchar_t</code> in the following two programs is guaranteed to be correct?</p>\n\n<pre><code>#include &lt;locale.h&gt;\n#include &lt;wchar.h&gt;\nint main(void)\n{\n  setlocale(LC_CTYPE, \"\");\n  wint_t wc;\n  wc = getwchar();\n  putwchar((wchar_t) wc);\n}\n</code></pre>\n\n<p>--</p>\n\n<pre><code>#include &lt;locale.h&gt;\n#include &lt;wchar.h&gt;\n#include &lt;wctype.h&gt;\nint main(void)\n{\n  setlocale(LC_CTYPE, \"\");\n  wchar_t wc;\n  wc = L'\u00ff';\n  if (iswlower((wint_t) wc)) return 0;\n  return 1;\n}\n</code></pre>\n\n<p>Consider the case where <code>wchar_t</code> is <code>signed short</code> (this\nhypothetical implementation is limited to the BMP), <code>wint_t</code> is <code>signed int</code>, and <code>WEOF == ((wint_t)-1)</code>.  Then <code>(wint_t)U+FFFF</code> is\nindistinguishable from <code>WEOF</code>.  Yes, <code>U+FFFF</code> is a reserved codepoint, but\nit's still wrong for it to collide.</p>\n\n<p>I would not want to swear that this never happens in real life without\nan exhaustive audit of existing implementations.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/40757681/may-wchar-t-be-promoted-to-wint-t\">May wchar_t be promoted to wint_t?</a></p>\n"}, {"tags": ["c", "linux", "unix", "pipe", "fork"], "answers": [{"comments": [{"owner": {"reputation": 1588, "user_id": 6082851, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b14f3cd864bc266a401eca07b4153602?s=128&d=identicon&r=PG", "display_name": "12431234123412341234123", "link": "https://stackoverflow.com/users/6082851/12431234123412341234123"}, "edited": false, "score": 0, "creation_date": 1479888687, "post_id": 40758874, "comment_id": 68742959, "body": "fflush only affect the stdio buffer (fwrite and others), which he not use."}], "tags": [], "owner": {"reputation": 1, "user_id": 6810296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/956619ce763abd30ef9e6b5ff321f116?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/6810296/andre"}, "is_accepted": false, "score": 0, "last_activity_date": 1479887947, "creation_date": 1479887947, "answer_id": 40758874, "question_id": 40758681, "link": "https://stackoverflow.com/questions/40758681/getting-2-outputs-for-the-same-code/40758874#40758874", "title": "Getting 2 outputs for the same code", "body": "<p>Linux buffers your write into the pipe and at some point it flushes the buffer and the read fork reads everything in one go. You should be able to change this by doing a fflush() after the write.</p>\n"}, {"tags": [], "owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "is_accepted": false, "score": 0, "last_activity_date": 1479888542, "creation_date": 1479888542, "answer_id": 40759042, "question_id": 40758681, "link": "https://stackoverflow.com/questions/40758681/getting-2-outputs-for-the-same-code/40759042#40759042", "title": "Getting 2 outputs for the same code", "body": "<p>Why are you using array of character to print only single char? Don't use stdio buffer to print character.</p>\n\n<p>i have modified you declaration form char buf[80] to buf. </p>\n\n<pre><code>while ((n = read(pfds[0], &amp;buf, 1)) &gt; 0)\n{\n write(1, &amp;buf, n);\n write(1, \"-\", 1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1479889642, "creation_date": 1479889642, "answer_id": 40759310, "question_id": 40758681, "link": "https://stackoverflow.com/questions/40758681/getting-2-outputs-for-the-same-code/40759310#40759310", "title": "Getting 2 outputs for the same code", "body": "<p>A pipe is a stream. It means that you will get on one end all the characters sent from the other and in same order. But the <em>packets</em> are not preserved. Race conditions allow one read to get everything or only one char at a time, or everythin in between...</p>\n\n<p>If you want to process on char at a time (and get <code>1-2-3-4-5-</code>)</p>\n\n<pre><code>while ((n = read(pfds[0], buf, 1)) &gt; 0) \n{\n write(1, buf, n);\n write(1, \"-\", 1);\n}\n</code></pre>\n\n<p>If you prefere to process everything on a whole (and get <code>12345-</code>):</p>\n\n<pre><code>int tot = 0\nwhile ((n = read(pfds[0], buf+tot, sizeof(buf)-tot)) &gt; 0) tot += n; /* gather everything */\nwrite(1, buf, tot);\nwrite(1, \"-\", 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1588, "user_id": 6082851, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b14f3cd864bc266a401eca07b4153602?s=128&d=identicon&r=PG", "display_name": "12431234123412341234123", "link": "https://stackoverflow.com/users/6082851/12431234123412341234123"}, "is_accepted": false, "score": 0, "last_activity_date": 1479890449, "creation_date": 1479890449, "answer_id": 40759537, "question_id": 40758681, "link": "https://stackoverflow.com/questions/40758681/getting-2-outputs-for-the-same-code/40759537#40759537", "title": "Getting 2 outputs for the same code", "body": "<p>When you call read(), the function will read so many chars as available till there are no more left or hit count.</p>\n\n<p>When you run it with sizeof(buf), you may read 1,2..5 chars, if there was allready 5 chars in the pipe as in your a run, you read all chars, output a \"-\" and the next read return 0, because the pipe is empty and no one write to it anymore.</p>\n\n<p>If there is only 1 char in the pipe, as in your b run, then you read only one char, output \"-\" and then read and wait till the child write more to the buffer. That there are only one is because you child was scheduled after write one char.</p>\n"}], "owner": {"reputation": 31, "user_id": 7144690, "user_type": "registered", "profile_image": "https://graph.facebook.com/1642372692700612/picture?type=large", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7144690/naeem-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "answer_count": 4, "score": -1, "last_activity_date": 1479891291, "creation_date": 1479887089, "last_edit_date": 1479891291, "question_id": 40758681, "link": "https://stackoverflow.com/questions/40758681/getting-2-outputs-for-the-same-code", "title": "Getting 2 outputs for the same code", "body": "<p>I am using linux\\unix os. When I ran below code I am getting 2 outputs. Mentioned below:</p>\n\n<p>a)  12345-\nb)  1-2-3-4-5-</p>\n\n<p>Can anyone let me know why and how the above 2 outputs are coming?</p>\n\n<pre><code>int main() \n{\n int i, n, pfds[2];\n char c, buf[80];\n\n pipe(pfds);\n if (fork() == 0) \n {\n   for (c='1'; c&lt;='5'; c++) \n     write(pfds[1], &amp;c, 1);\n } \n else \n {\n   close(pfds[1]);\n   while ((n = read(pfds[0], buf, sizeof(buf))) &gt; 0) \n   {\n    write(1, buf, n);\n    write(1, \"-\", 1);\n   }\n }\n return 0;\n} \n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 4, "creation_date": 1479885822, "post_id": 40758285, "comment_id": 68741461, "body": "Shortest answer: third one is an index of matrices of dimension <code>[3][3]</code>. BTW tons of info on the web....<a href=\"https://www.google.it/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=c+3d+array\" rel=\"nofollow noreferrer\">c 3D array</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1479886274, "last_edit_date": 1479886274, "creation_date": 1479885950, "answer_id": 40758370, "question_id": 40758285, "link": "https://stackoverflow.com/questions/40758285/how-the-multidimensional-array-works/40758370#40758370", "title": "How the multidimensional array works?", "body": "<p>To start with the second question first, you have an array of arrays of arrays of (small) <em>integers</em>. How do you print an <em>integer</em> using <code>printf</code>? You (can) use the <code>\"%d\"</code> format. You are confused (I guess) because strings (which are printed with <code>\"%s\"</code>) are arrays of characters. But you are not printing an array, you are printing individual <code>int</code> values.</p>\n\n<p>As for the first question, part of the answer is in the above paragraph. You have an array of three arrays of three arrays of three (small) integers. Rows and columns are just labels, and for a \"3d\" array they don't make much sense.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6869850, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/e64mT.jpg?s=128&g=1", "display_name": "Kawsar_Ahmed", "link": "https://stackoverflow.com/users/6869850/kawsar-ahmed"}, "edited": false, "score": 0, "creation_date": 1479897148, "post_id": 40758404, "comment_id": 68748368, "body": "My dear friend thank you for your answer.I know char[3] would be assign 3 character one by one.But what is the char[3][3][3] means?Is it means 9 character one by one.I am a new learner.                                                                             Have a good day :)"}], "tags": [], "owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "is_accepted": true, "score": 4, "last_activity_date": 1479897958, "last_edit_date": 1479897958, "creation_date": 1479886072, "answer_id": 40758404, "question_id": 40758285, "link": "https://stackoverflow.com/questions/40758285/how-the-multidimensional-array-works/40758404#40758404", "title": "How the multidimensional array works?", "body": "<p><code>char[3]</code> filled with ones would look like:</p>\n\n<pre><code>+---+---+---+\n| 1 | 1 | 1 |\n+---+---+---+\n</code></pre>\n\n<p><code>char[3][3]</code> filled with ones would look like:</p>\n\n<pre><code>+---+---+---+\n| 1 | 1 | 1 |\n+---+---+---+\n| 1 | 1 | 1 |\n+---+---+---+\n| 1 | 1 | 1 |\n+---+---+---+\n</code></pre>\n\n<p><code>char[3][3][3]</code> filled with ones would be three above square arrays one over one. There will be a cube.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VZl7r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VZl7r.png\" alt=\"enter image description here\"></a></p>\n\n<p>On the above picture, each small cube will represent single cell so there are 27 cells in total.</p>\n\n<p>I'm glad you didn't ask about <code>char[3][3][3][3]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 468, "user_id": 1602876, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc6925f81ce5d5c7d7c12c18ea06af7e?s=128&d=identicon&r=PG", "display_name": "Wassim Gr", "link": "https://stackoverflow.com/users/1602876/wassim-gr"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1479886717, "post_id": 40758439, "comment_id": 68741958, "body": "I posted a picture to show the content of the array which I cant align using code."}, {"owner": {"reputation": 4755, "user_id": 18665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXnTw.gif?s=128&g=1", "display_name": "jwpfox", "link": "https://stackoverflow.com/users/18665/jwpfox"}, "edited": false, "score": 0, "creation_date": 1479888097, "post_id": 40758439, "comment_id": 68742676, "body": "Perhaps learn the basics of using the site before announcing what is and is not possible. If posting as code did not allow the indentation of code then it wouldn&#39;t be much use at all. Again, as you have been asked, please post code not pictures of code."}], "tags": [], "owner": {"reputation": 468, "user_id": 1602876, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc6925f81ce5d5c7d7c12c18ea06af7e?s=128&d=identicon&r=PG", "display_name": "Wassim Gr", "link": "https://stackoverflow.com/users/1602876/wassim-gr"}, "is_accepted": false, "score": -1, "last_activity_date": 1479888038, "last_edit_date": 1479888038, "creation_date": 1479886233, "answer_id": 40758439, "question_id": 40758285, "link": "https://stackoverflow.com/questions/40758285/how-the-multidimensional-array-works/40758439#40758439", "title": "How the multidimensional array works?", "body": "<p><code>%d</code> is for decimal, <code>%s</code>is for string.\nHere's a representation of a 3D array, the third dimension is the \"depth\" or in other words, the content of row i and column j (which in a 2d array would be an element but in a 3D array is an array)</p>\n\n<pre><code>int myFirst3DArray [3][4][2] = \n{\n  {{10,11},{12,13},{14,15},{16,17}},\n  {{18,19},{20,21},{22,23},{24,25}},\n  {{26,27},{28,29},{30,31},{32,33}}\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 1630056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ca35e9d84377b8d8f8196b91895a45?s=128&d=identicon&r=PG&f=1", "display_name": "panda", "link": "https://stackoverflow.com/users/1630056/panda"}, "is_accepted": false, "score": 0, "last_activity_date": 1479886702, "creation_date": 1479886702, "answer_id": 40758572, "question_id": 40758285, "link": "https://stackoverflow.com/questions/40758285/how-the-multidimensional-array-works/40758572#40758572", "title": "How the multidimensional array works?", "body": "<p>Regarding the question of the array[3][3][3], this is a 3 dimension table. You can think of it as three 2-dimension tables.\ntable 0: 3x3\ntable 1: 3x3\ntable 2: 3x3</p>\n\n<p>Rows and Columns are descriptions we use to better understand the concept of 2 dimension elements. The array can have more dimensions - if it helps you, you can think of it as list of ( list(of list(..)))</p>\n\n<p>Regarding the char question and the integer representation, chars and ints can be used in the same way in C. chars are essentially ASCII characters represented by the character's index in the ASCII table. ie. 'a' is 97. </p>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 2003269, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c5817c8e377470a991d915c2701f2285?s=128&d=identicon&r=PG", "display_name": "lukai", "link": "https://stackoverflow.com/users/2003269/lukai"}, "is_accepted": false, "score": 0, "last_activity_date": 1479891003, "creation_date": 1479891003, "answer_id": 40759721, "question_id": 40758285, "link": "https://stackoverflow.com/questions/40758285/how-the-multidimensional-array-works/40759721#40759721", "title": "How the multidimensional array works?", "body": "<p>Let's think about book. A single line on a page of the book is a 1d array. The whole page is a 2d array. The whole book is a 3d array. Let's assume, the book is in a box, then the box represents a 4d array. A set of boxes is a 5d array. So, you can think more of this. So, We will represent the first element of the first page of the first book of the first box as [0][0][0][0][0].</p>\n\n<pre><code>%s - Take the next argument and print it as a string\n%d - Take the next argument and print it as an int\n</code></pre>\n\n<p>Here, your array elements are integer. Your code prints the array element one by one.</p>\n"}], "owner": {"reputation": 55, "user_id": 6869850, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/e64mT.jpg?s=128&g=1", "display_name": "Kawsar_Ahmed", "link": "https://stackoverflow.com/users/6869850/kawsar-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 40758404, "answer_count": 5, "score": 0, "last_activity_date": 1479897958, "creation_date": 1479885674, "last_edit_date": 1479885925, "question_id": 40758285, "link": "https://stackoverflow.com/questions/40758285/how-the-multidimensional-array-works", "title": "How the multidimensional array works?", "body": "<p>In this program an array has 3 sizes. First size refers to row, second refers to column, but what the third do? I have another question, array refers <code>%s</code> to print.But in this program array printed by <code>%d</code>.Since array assign to <code>x</code> value. Which is <code>int</code> data type, but we print array. So how it would be <code>%d</code>?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void) {\n    char array[3][3][3];\n    int i,j,k;\n\n    int x = 1;\n\n    for(i=0; i&lt;3; i++){\n        for(j=0; j&lt;3; j++){\n           for(k=0; k&lt;3; k++){\n                array[i][j][k] = x;\n                printf(\"%d\\n\", array[i][j][k]);\n                x++;\n           }\n\n        }\n\n    }\n    return 0; }\n</code></pre>\n"}, {"tags": ["c", "gcc", "llvm", "x86-64"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1479885346, "post_id": 40757959, "comment_id": 68741237, "body": "SSE4.1 <a href=\"http://www.felixcloutier.com/x86/MOVNTDQA.html\" rel=\"nofollow noreferrer\">MOVNTDQA</a> is a load with a non-temporal <i>hint</i> which may give you that behaviour even on normal &quot;write-back&quot; memory regions.  It&#39;s not guaranteed to behave any differently from a normal vector load, though.  Using it to read your data directly, or to copy into a small buffer if you want to use non-vector code on it, should be better than nothing.  (I recommend using the C intrinsic for MOVNTDQA, not writing inline asm.)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1479885558, "post_id": 40757959, "comment_id": 68741342, "body": "<a href=\"http://stackoverflow.com/q/10323420/995714\"><code>__builtin_prefetch</code></a>?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479885559, "post_id": 40757959, "comment_id": 68741343, "body": "Also, if you&#39;re running on Intel IvyBridge or newer, <a href=\"http://blog.stuffedcow.net/2013/01/ivb-cache-replacement/\" rel=\"nofollow noreferrer\">it&#39;s L3 cache uses an adaptive replacement policy to minimize cache pollution from looping over huge amounts of memory</a>.  Either way, unless you use a memory type other than WB (e.g. WC which is weakly-ordered), your data will have to go into cache, but hopefully it can only pollute one &quot;way&quot; of each set in the L3, L2, and L1 caches."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1479885658, "post_id": 40757959, "comment_id": 68741389, "body": "<a href=\"http://stackoverflow.com/q/28684812/995714\">How to write or read memory without touching cache</a>, <a href=\"http://stackoverflow.com/q/37070/995714\">What is the meaning of \u201cnon temporal\u201d memory accesses in x86</a>, <a href=\"http://stackoverflow.com/q/1265469/995714\">How can I load values from memory without polluting the cache?</a>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1479885659, "post_id": 40757959, "comment_id": 68741391, "body": "@L\u01b0uV\u0129nhPh&#250;c: that&#39;s a good point, NT prefetch should hopefully do whatever is possible to minimize cache pollution while still making it ready.  It&#39;s harder to tune than MOVNTDQA, though."}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 0, "creation_date": 1479886054, "post_id": 40757959, "comment_id": 68741577, "body": "An excellent discussion of this topic by Ulrich Drepper: <a href=\"https://lwn.net/Articles/255364/\" rel=\"nofollow noreferrer\">lwn.net/Articles/255364</a>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1479886251, "post_id": 40757959, "comment_id": 68741675, "body": "@L\u01b0uV\u0129nhPh&#250;c: most of those answers are actually talking about stores, and pretty much ignore NT loads (because SSE4.1 MOVNTDQA loads are still strongly-ordered on WB memory, and AFAIK there isn&#39;t much info on exactly how different microarchitectures implement the NT hint).  <a href=\"http://stackoverflow.com/questions/32103968/non-temporal-loads-and-the-hardware-prefetcher-do-they-work-together\">This is what I&#39;ve been able to find</a>, with links to other stuff for more details on various aspects.  AFAIK, PREFETCHNTA and MOVNTDQA might help, but there&#39;s no guarantee other than changing memory type."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1479887971, "post_id": 40757959, "comment_id": 68742599, "body": "It is controlled by the D bit in the page directory entry (cache Disabled).  What knob you&#39;ll need to tell your OS about it is hard to guess.  On MSVC++ it can be done with #pragma section, using the nocache attribute.  Gcc/posix ought to have something similar, I&#39;d guess at the ld script."}, {"owner": {"reputation": 7371, "user_id": 1510211, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4acda0216d7fd2ea07c31c0cfc53a714?s=128&d=identicon&r=PG", "display_name": "Shachar Shemesh", "link": "https://stackoverflow.com/users/1510211/shachar-shemesh"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479911068, "post_id": 40757959, "comment_id": 68758054, "body": "@PeterCordes, I don&#39;t have a problem with the data going into the cache, as long as it doesn&#39;t overstay its welcome. I mostly want it not to push my internal data structures out."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479938881, "post_id": 40757959, "comment_id": 68773748, "body": "Yeah, that&#39;s what I thought.  You should try with/without PREFETCHNTA or MOVNTDQA, and see if it affects the cache miss-rate for the data that does get reused and should ideally be staying hot in cache."}], "owner": {"reputation": 7371, "user_id": 1510211, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4acda0216d7fd2ea07c31c0cfc53a714?s=128&d=identicon&r=PG", "display_name": "Shachar Shemesh", "link": "https://stackoverflow.com/users/1510211/shachar-shemesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1479884407, "creation_date": 1479884407, "question_id": 40757959, "link": "https://stackoverflow.com/questions/40757959/single-use-and-the-cpu-data-cache", "title": "Single use and the CPU data cache", "body": "<p>I am working on an application that has quite a few internal data structures, but also processes huge amounts of user data. During this processing, I need to have the CPU look at the data just once (the rest of the processing is done via zero copies and DMA, so the CPU need not touch the data at all).</p>\n\n<p>I am searching for a way to process the user data (even if it means copying it to a temporary buffer) without having it evict the internal structures from the CPU's data cache. In other words, I'm looking for a way to tell the CPU \"give me this data, but I'm never going to need it again\".</p>\n\n<p>I seem to recall that <code>gcc</code> had an intrinsic to do it, but going over the list, I seem to have misremembered (or otherwise couldn't find it). Either way, assembly solution (Intel) would work fine for my purposes.</p>\n\n<p>Logic states that there must be a way to do this, as it is necessary to do this before sending data to (or receiving from) DMA buffers.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479884228, "post_id": 40757897, "comment_id": 68740691, "body": "Can you please rewrite your explanation it is not very descriptive and I have a hard time understanding what you want to say."}, {"owner": {"reputation": 830, "user_id": 2165524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xg2Jb.jpg?s=128&g=1", "display_name": "&#181;tex", "link": "https://stackoverflow.com/users/2165524/%c2%b5tex"}, "edited": false, "score": 0, "creation_date": 1479884426, "post_id": 40757897, "comment_id": 68740790, "body": "Include front as well in your insert function, as initially for first element it should be set to 0."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479884652, "post_id": 40757897, "comment_id": 68740871, "body": "I don&#39;t see what your program tries to accomplish. You just count up front and rear, so after max 10 calls to <code>insert</code> you would not be able to add another one because you never decrease rear in delete you just count up front... also you if you delete something a will be set to the first value again. So the next added value will be the one you deleted. Is this intended?"}, {"owner": {"reputation": 405, "user_id": 3857670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/542831519/picture?type=large", "display_name": "Shay Gold", "link": "https://stackoverflow.com/users/3857670/shay-gold"}, "edited": false, "score": 0, "creation_date": 1479884666, "post_id": 40757897, "comment_id": 68740881, "body": "You are incrementing rear, but print out icounter"}, {"owner": {"reputation": 5, "user_id": 6375491, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-qP_izlx-LD0/AAAAAAAAAAI/AAAAAAAAAHE/gHGicPoK1oY/photo.jpg?sz=128", "display_name": "diniebee", "link": "https://stackoverflow.com/users/6375491/diniebee"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479884897, "post_id": 40757897, "comment_id": 68740994, "body": "@KamiKaze i want it to insert the last number it stop. not reset the number to initial."}, {"owner": {"reputation": 5, "user_id": 6375491, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-qP_izlx-LD0/AAAAAAAAAAI/AAAAAAAAAHE/gHGicPoK1oY/photo.jpg?sz=128", "display_name": "diniebee", "link": "https://stackoverflow.com/users/6375491/diniebee"}, "reply_to_user": {"reputation": 405, "user_id": 3857670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/542831519/picture?type=large", "display_name": "Shay Gold", "link": "https://stackoverflow.com/users/3857670/shay-gold"}, "edited": false, "score": 0, "creation_date": 1479884977, "post_id": 40757897, "comment_id": 68741030, "body": "@ShayGold oh i just want to display that the number already can line up on that particular counter."}], "answers": [{"tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1479884974, "creation_date": 1479884974, "answer_id": 40758121, "question_id": 40757897, "link": "https://stackoverflow.com/questions/40757897/why-the-array-not-continue-where-the-last-number-insert/40758121#40758121", "title": "Why the array not continue where the last number insert?", "body": "<p>Your delete function take the address of <code>a</code> and writes the deleted value into it. So it will get set to the value you deleted.</p>\n\n<p>You could just remove \n<code>*value = queue[*front];</code> \nand change </p>\n\n<p><code>printf(\"\\n%d left counter 1\",*value);</code> \nto </p>\n\n<p><code>printf(\"\\n%d left counter 1\",queue[*front]);</code> </p>\n\n<p>and also remove the whole parameter and then I think it does what you want it to do.</p>\n"}, {"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479885763, "post_id": 40758166, "comment_id": 68741434, "body": "there is no need to pass value at all, because it will never be used"}, {"owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479886305, "post_id": 40758166, "comment_id": 68741706, "body": "@KamiKaze yes we can do also without it. But i want to show what wrong he was doing."}], "tags": [], "owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "is_accepted": false, "score": 0, "last_activity_date": 1479885203, "creation_date": 1479885203, "answer_id": 40758166, "question_id": 40757897, "link": "https://stackoverflow.com/questions/40757897/why-the-array-not-continue-where-the-last-number-insert/40758166#40758166", "title": "Why the array not continue where the last number insert?", "body": "<p>your delete() function pass a as pass by reference that's why you did not get what you want</p>\n\n<pre><code>delete(queue,&amp;front,rear,&amp;a);\n</code></pre>\n\n<p>For your design you should pass a as pass by value</p>\n\n<pre><code>delete(queue,&amp;front,rear,a);\nvoid delete(int queue[], int *front, int rear, int value)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6375491, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-qP_izlx-LD0/AAAAAAAAAAI/AAAAAAAAAHE/gHGicPoK1oY/photo.jpg?sz=128", "display_name": "diniebee", "link": "https://stackoverflow.com/users/6375491/diniebee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479889816, "creation_date": 1479884141, "last_edit_date": 1479889816, "question_id": 40757897, "link": "https://stackoverflow.com/questions/40757897/why-the-array-not-continue-where-the-last-number-insert", "title": "Why the array not continue where the last number insert?", "body": "<p>My idea is to make this program to first queue the number (start from 1001)until 10 loop.But at the same time every twice loop. i want it to delete the first number insert.Then it continue insert number after the last number insert. For example. (0) insert 1001,(1) insert 1002,(2) delete 1001,(3) insert 1003,(4) insert 1004,(5)delete 1002. This is what i imagine and the desire output. But now. When it delete it reset to the initial number. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX 10 /* The maximum size of the queue */\n#include &lt;stdlib.h&gt;\n\nvoid insert(int queue[], int *rear, int value)\n{\n    if(*rear &lt; MAX-1)\n    {\n        *rear= *rear +1;\n        queue[*rear] = value;\n        printf(\"\\n%d queue at counter 1\",value);\n    }\n    else\n    {\n        printf(\"\\nThe queue is full can not insert a value\\n\");\n        exit(0);\n    }\n}\nvoid delete(int queue[], int *front, int rear, int * value)\n{\n    if(*front == rear)\n    {\n        printf(\"\\nThe queue is empty can not delete a value\\n\");\n        exit(0);\n    }\n    *front = *front + 1;\n    *value = queue[*front];\n    printf(\"\\n%d left counter 1\",*value);\n}\n\nint main()\n{\n    int queue[MAX];\n    int iCounter,front,rear,loop=0,a,b,c;\n    front=rear=-1;\n    a=1001;\n\n    do{\n        printf(\"\\n------------------------------\");\n        printf(\"\\n\\tWelcome!!\\n\");\n        printf(\"\\n------------------------------\");\n        printf(\"\\nPress which counter you prefer\");\n        printf(\"\\n1-Pay bill\");\n        printf(\"\\n2-Check up\");\n        printf(\"\\n3-QnA\");\n        printf(\"\\n------------------------------\\n\");\n        scanf(\" %d\",&amp;iCounter);\n        loop++;\n\n        switch(iCounter)\n        {\n            case 1:\n                insert(queue,&amp;rear,a);\n                a++;\n                break;\n            default:\n                printf(\"\\nError input!\");\n                break;\n        }\n\n        while(loop==2)\n        {\n            delete(queue,&amp;front,rear,&amp;a);\n            loop=0;\n        }\n\n    }while(rear&lt;MAX-1);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "standards", "wchar-t", "widechar", "c-standard-library"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1479883946, "post_id": 40757681, "comment_id": 68740559, "body": "The first word is &quot;if&quot;, so this only applies when it is that way. It is not bound to be."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479884031, "post_id": 40757681, "comment_id": 68740599, "body": "@KamiKaze But if the statements contradict at least on one case, this is a problem."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479884135, "post_id": 40757681, "comment_id": 68740653, "body": "I can&#39;t see any contradiction at all. What do you mean?"}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479884353, "post_id": 40757681, "comment_id": 68740748, "body": "@KamiKaze Let&#39;s consider the case when <code>wchar_t</code> is defined as <code>char</code> and <code>wint_t</code> is defined as <code>int</code>. Now, the first extract says that parameter promotion will be enabled, while the second extract says that it will not."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479884811, "post_id": 40757681, "comment_id": 68740955, "body": "mhhh I also considered this to be when int and long are used, but you may have a point there."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479885322, "post_id": 40757681, "comment_id": 68741227, "body": "AMD1 has been irrelevant since 1999 when the C99 standard superseded it (and that has been superseded by C11).  If you find the relevant wording in C11, then there&#39;s some point, perhaps, in discussing the issue.  Otherwise, there&#39;s very little point.  Note that we&#39;ve previously discussed the relationship of <code>wchar_t</code> and <code>wint_t</code>, and established that <code>wint_t</code> is the type that <code>wchar_t</code> is promoted to when passed in the variable argument portion of the argument list of a function like <code>printf()</code> \u2014 you had relevant parts of the standard quoted to you."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479885462, "post_id": 40757681, "comment_id": 68741285, "body": "@JonathanLeffler &quot;<code>wint_t</code> is the type that <code>wchar_t</code> is promoted to&quot; - where this is written in the standard? Is it worth to ask it as a separate question?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479885474, "post_id": 40757681, "comment_id": 68741293, "body": "The standard neither requires nor prohibits <code>wint_t</code> to be a promoted version of <code>wchar_t</code>. Indeed it mentions that <code>wchar_t</code> and <code>wint_t</code> can be the same type. The wording explains why there&#39;s no such requirement."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479885526, "post_id": 40757681, "comment_id": 68741324, "body": "Also, note that the &quot;Hence&quot; clause applies to an old implementation (prior to AMD1) where <code>wchar_t</code> and <code>wint_t</code> do not follow the rules laid down by AMD1.  It says that &quot;if the implementation does not follow the standard rules, the standard rules won&#39;t apply&quot;."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1479885536, "post_id": 40757681, "comment_id": 68741331, "body": "@JonathanLeffler &quot;and established that wint_t is the type that wchar_t is promoted to&quot; --- where? The standard doesn&#39;t say anything like that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1479885637, "post_id": 40757681, "comment_id": 68741377, "body": "Pay attention to the stuff I&#39;ve been typing at you for the last .... N days where N is depressingly close to a week.  I&#39;ve provided quotes from the standard previously.  I am off to bed; I am not going to find the x-refs now, but they are in answers and/or comments (or most likely both) to your last M questions (or, at least, the last M questions of yours where I&#39;ve felt obliged to try to explain to you the ways of the world)."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479885762, "post_id": 40757681, "comment_id": 68741432, "body": "@n.m. what Jonathan refers to is written in the comments to this:  <a href=\"http://stackoverflow.com/a/40712469/1487773/\">stackoverflow.com/a/40712469/1487773</a>"}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479885821, "post_id": 40757681, "comment_id": 68741459, "body": "@n.m. &quot;the standard neither requires nor prohibits <code>wint_t</code> to be a promoted version of <code>wchar_t</code>&quot; - does this mean that to make code portable, explicit typecasting must always be done?"}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479886010, "post_id": 40757681, "comment_id": 68741552, "body": "@n.m. <code>int w; if (iswlower((unsigned int) w) ....</code> are the standards saying that casting to <code>unsigned int</code> here is guaranteed to be correct? (see examples in OP)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479886671, "post_id": 40757681, "comment_id": 68741933, "body": "@IgorLiferenko &quot;explicit typecasting must always be done?&quot; -- yes, and the standard shows such cast it in an example of using %lc conversion."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479886952, "post_id": 40757681, "comment_id": 68742086, "body": "No, the standard doesn&#39;t even require <code>int</code> to be able to hold a wide character."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479887096, "post_id": 40757681, "comment_id": 68742161, "body": "@n.m. I&#39;m considering one implementation - the glibc one. There <code>wchar_t</code> is <code>int</code> and <code>wint_t</code> is <code>unsigned int</code>. Considering this, is the typecasting in the examples in OP guaranteed to be correct?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479887853, "post_id": 40757681, "comment_id": 68742532, "body": "You don&#39;t need to cast a function argument as long as there&#39;s a no-varargs prototype in scope, so these casts are redundant at best. I have no idea whether they are correct."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1479888196, "post_id": 40757681, "comment_id": 68742724, "body": "Are you aware that the type of <code>L&#39;&#255;&#39;</code> is not necessarily <code>wchar_t</code>, but <i>the unsigned type corresponding to <code>wchar_t</code></i>. For all UTF-8 locales, its value is 255 with an unsigned type."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479888799, "post_id": 40757681, "comment_id": 68743007, "body": "@n.m. these casts are required if you want to avoid compiler warnings such as <code>warning: conversion to \u2018wint_t {aka unsigned int}\u2019 from \u2018wchar_t {aka int}\u2019 may change the sign of the result</code> if <code>-Wconversion</code> gcc option is used. I will ask this as a separate question."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1479889058, "post_id": 40757681, "comment_id": 68743148, "body": "@chqrlie &quot;Are you aware that the type of L&#39;&#255;&#39; is not necessarily wchar_t, but the unsigned type corresponding to wchar_t&quot; - I do not understand what you mean by this, but in glibc <code>wchar_t</code> is the <i>signed type</i>. &quot;For all UTF-8 locales, its value is 255 with an unsigned type.&quot; - I&#39;m unsure what you mean here, but I agree that <code>&#255;</code> is <code>U+00FF</code> in Unicode"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1479890908, "post_id": 40757681, "comment_id": 68744169, "body": "The standard does not require a cast here. An implementation may warn you about 100% legal standard-compliant code if it wants to, it&#39;s a separate issue. In any case, your replacement of <code>wint_t</code> and <code>wchar_t</code> is inexplicable as far as the standard is concerned. Use <code>wint_t</code> and <code>wchar_t</code> if you want to talk about the standard."}], "owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1479887246, "creation_date": 1479883252, "last_edit_date": 1479887246, "question_id": 40757681, "link": "https://stackoverflow.com/questions/40757681/may-wchar-t-be-promoted-to-wint-t", "title": "May wchar_t be promoted to wint_t?", "body": "<p>I see one contradiction of glibc reference and Amendment 1 to C90.</p>\n\n<p>The quote from glibc reference says that wchar_t may be promoted to wint_t:</p>\n\n<blockquote>\n  <p>if wchar_t is defined as char the type wint_t must be defined as int due to the parameter promotion</p>\n</blockquote>\n\n<p>But AMD1 says this:</p>\n\n<blockquote>\n  <p>Currently, an existing implementation could have wchar_t be int and wint_t be\n   long, and default promotions would not change int to long.\n  Basically, this is due\n   to wchar_t and wint_t being typedefs. Hence, we will not now have wchar_t be\n   promoted to wint_t.</p>\n</blockquote>\n\n<p>Does anybody know which one is correct?</p>\n\n<p>Are the standards saying that casting to unsigned int and to int in the following two programs is guaranteed to be correct? (I just replaced <code>wint_t</code> and <code>wchar_t</code> to their actual meaning in glibc)\n(I just replaced <code>wint_t</code> and <code>wchar_t</code> to their actual meaning in glibc)</p>\n\n<pre><code>#include &lt;locale.h&gt;\n#include &lt;wchar.h&gt;\nint main(void)\n{\n  setlocale(LC_CTYPE, \"en_US.UTF-8\");\n  unsigned int wc;\n  wc = getwchar();\n  putwchar((int) wc);\n}\n</code></pre>\n\n<p>--</p>\n\n<pre><code>#include &lt;locale.h&gt;\n#include &lt;wchar.h&gt;\n#include &lt;wctype.h&gt;\nint main(void)\n{\n  setlocale(LC_CTYPE, \"en_US.UTF-8\");\n  int wc;\n  wc = L'\u00ff';\n  if (iswlower((unsigned int) wc)) return 0;\n  return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479883786, "post_id": 40757631, "comment_id": 68740482, "body": "why should child be first? As parent starts before child it is likely that it will reach the <code>if(childpid == 0)</code> first. You need to make him wait for the child."}, {"owner": {"reputation": 31, "user_id": 7144690, "user_type": "registered", "profile_image": "https://graph.facebook.com/1642372692700612/picture?type=large", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7144690/naeem-khan"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1479886410, "post_id": 40757631, "comment_id": 68741767, "body": "how can i use 2 pipes and 2 chidren within the program"}], "answers": [{"tags": [], "owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "is_accepted": false, "score": 2, "last_activity_date": 1479887318, "creation_date": 1479887318, "answer_id": 40758725, "question_id": 40757631, "link": "https://stackoverflow.com/questions/40757631/why-parent-process-reads-first-from-pipe-in-linux/40758725#40758725", "title": "Why parent process reads first from pipe in LINUX", "body": "<p>For you queries :-</p>\n\n<p><strong><em>The parent process reads first then child process writes. i want to know why this is happening</em></strong>?</p>\n\n<p>After fork() both process work independently, so which process will be scheduled first, it's depend on scheduler.</p>\n\n<p><strong><em>How can i use two pipes in this program?</em></strong></p>\n\n<p>open two pipe, one for parents and one for child process. because pipe are unidirectional. </p>\n\n<pre><code>int fd[2];\nint fd1[2];\n\nparents will write on fd[1]  child will read from fd[0]\nchild will write on fd1[1] parents will read from fd1[0]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7144690, "user_type": "registered", "profile_image": "https://graph.facebook.com/1642372692700612/picture?type=large", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7144690/naeem-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1479887318, "creation_date": 1479883027, "question_id": 40757631, "link": "https://stackoverflow.com/questions/40757631/why-parent-process-reads-first-from-pipe-in-linux", "title": "Why parent process reads first from pipe in LINUX", "body": "<p>i have run this code and found out that the parent process reads first then child process writes. i want to know why this is happening? <br> Additionally i also want to know how can i use two pipes in this program.i just want the concept, any code will be appreciated.Thanks</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;sys/types.h&gt;\n\n    main()\n    {\n            int     fd[2];\n            pid_t   childpid;\n\n            pipe(fd);\n\n            if((childpid = fork()) == -1)\n            {\n                    perror(\"fork\");\n\n            }\n\n            if(childpid == 0)\n            {\n                    /* Child process closes up input side of pipe */\n                    close(fd[0]);\n        printf(\"\\nChild writes\\n\\n\");\n            }\n            else\n            {\n                    /* Parent process closes up output side of pipe */\n                    close(fd[1]);\n        printf(\"parent reads\\n\\n\");\n            }\n            return 0;\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "edited": false, "score": 2, "creation_date": 1479882509, "post_id": 40757370, "comment_id": 68739975, "body": "Because you are calling function count() recursively. So count is 3, this program will make 3 stack frame ( count will call three times itself like 3 2 1) and then will print 1 2 3."}], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 6575260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OGzzviSc_n4/AAAAAAAAAAI/AAAAAAAAArI/JVtThd5YD3c/photo.jpg?sz=128", "display_name": "Thamizhselvan", "link": "https://stackoverflow.com/users/6575260/thamizhselvan"}, "is_accepted": false, "score": 1, "last_activity_date": 1479882205, "creation_date": 1479882205, "answer_id": 40757430, "question_id": 40757370, "link": "https://stackoverflow.com/questions/40757370/how-to-work-function-in-c-language-anyone-can-explain-please/40757430#40757430", "title": "how to work function in c language anyone can explain please", "body": "<p>In the code given, function is recursive. Count(n-1) calls the function again and again until the condition if(n>1) fails. So if you are passing 5 to the count function. It prints 5 times.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 962625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87a10e93906d15effde9ea227fd49e0?s=128&d=identicon&r=PG", "display_name": "prateekhalwe", "link": "https://stackoverflow.com/users/962625/prateekhalwe"}, "is_accepted": false, "score": 1, "last_activity_date": 1479883211, "creation_date": 1479883211, "answer_id": 40757670, "question_id": 40757370, "link": "https://stackoverflow.com/questions/40757370/how-to-work-function-in-c-language-anyone-can-explain-please/40757670#40757670", "title": "how to work function in c language anyone can explain please", "body": "<p>For count(n) your code will print something like this:</p>\n\n<pre>\nn,n-1,n-2....1 Integer value is 1<br>\nInteger value is 2<br>\nInteger value is 3<br>\n....<br>\n....<br>\nInteger value is n<br>\n</pre>\n\n<p>Now let's look at the reason, find the recursive call for count(3) for illustration: <br></p>\n\n<p>count(3)--print(3)<br>\n&emsp;&emsp;&emsp;&emsp; (3>1) is true---count(2)--print(2)<br>\n   &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;(2>1) is true---count(1)--print(1)<br>\n&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;(1>1) is false exec prev func call <br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;print(Integer value is 2) \n                                      return 2<br>\n            &emsp;&emsp;&emsp;&emsp; print(Integer value is 3)<br>\n           &emsp;&emsp;&emsp;&emsp; return 3 <br> \nIn the recursion tree see where the code is printing the values.</p>\n\n<pre>\nInput: count(3)<br>\nOutput: <br>\n321Integer value is 1<br>\nInteger value is 2<br>\nInteger value is 3<br></pre>\n"}, {"comments": [{"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "reply_to_user": {"reputation": 361, "user_id": 4427519, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/cw8sL.png?s=128&g=1", "display_name": "Dhara Patel", "link": "https://stackoverflow.com/users/4427519/dhara-patel"}, "edited": false, "score": 0, "creation_date": 1479899699, "post_id": 40757699, "comment_id": 68750301, "body": "You&#39;re welcome. Please mark the answer as correct, if so."}], "tags": [], "owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "is_accepted": false, "score": 0, "last_activity_date": 1479883352, "creation_date": 1479883352, "answer_id": 40757699, "question_id": 40757370, "link": "https://stackoverflow.com/questions/40757370/how-to-work-function-in-c-language-anyone-can-explain-please/40757699#40757699", "title": "how to work function in c language anyone can explain please", "body": "<p>It prints out 6 times. This is, because the program is told so. Let's insert the function call into the main code:</p>\n\n<pre><code>int count(3) // call with 3\n{\n  print(\"%d\" , 3);                      // prints 3\n  if(3&gt;1)\n  {\n    count(3-1);\n  }\n  print(\"Integer value is %d\\n\" , n);   // prints 3\n  return n;\n}\n</code></pre>\n\n<p>Again, insert the call:</p>\n\n<pre><code>int count(3) // call with 3\n{\n  print(\"%d\" , 3);                          // prints 3\n  if(3&gt;1)\n  {\n    // count(3-1)\n    {\n      print(\"%d\" , 2);                      // prints 2\n      if(2&gt;1)\n      {\n        count(2-1);\n      }\n      print(\"Integer value is %d\\n\" , 2);   // prints 2\n      return 2;\n    }\n  }\n  print(\"Integer value is %d\\n\" , 3);       // prints 3\n  return 3;\n}\n</code></pre>\n\n<p>Again:</p>\n\n<pre><code>int count(3) // call with 3\n{\n  print(\"%d\" , 3);                          // prints 3\n  if(3&gt;1)\n  {\n    // count(3-1)\n    {\n      print(\"%d\" , 2);                      // prints 2\n      if(2&gt;1)\n      {\n        // count(2-1);\n        {\n          print(\"%d\" , 1);                      // prints 1\n          if(1&gt;1)                            // is false, no recursion any more\n          {\n            // count(1-1);\n          }\n          print(\"Integer value is %d\\n\" , 1);   // prints 1\n          return 1;\n        }\n      }\n      print(\"Integer value is %d\\n\" , 2);   // prints 2\n      return 2;\n    }\n  }\n  print(\"Integer value is %d\\n\" , 3);       // prints 3\n  return 3;\n}\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 4427519, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/cw8sL.png?s=128&g=1", "display_name": "Dhara Patel", "link": "https://stackoverflow.com/users/4427519/dhara-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1495519847, "creation_date": 1479881965, "last_edit_date": 1495519847, "question_id": 40757370, "link": "https://stackoverflow.com/questions/40757370/how-to-work-function-in-c-language-anyone-can-explain-please", "title": "how to work function in c language anyone can explain please", "body": "<p>In this code why n prints n times anyone have can explain please why prints call n times</p>\n\n<pre><code> int count(int n){\n        print(\"%d\" , n);\n             if(n&gt;1){\n                  count(n-1);\n              }\n        print(\"Integer value is %d\\n\" , n);\n     return n;\n    }\n   int main(){\n     count(3);\n  }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1479882794, "post_id": 40757349, "comment_id": 68740087, "body": "Your <code>fopen</code> looks okay to me - are you sure the file exists? Are you using a case-sensitive filesystem?"}, {"owner": {"reputation": 47, "user_id": 6595582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154355634602351/picture?type=large", "display_name": "Pyth0nPr0grammer", "link": "https://stackoverflow.com/users/6595582/pyth0npr0grammer"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1479882913, "post_id": 40757349, "comment_id": 68740132, "body": "Sorry, I dont believe I am and yes my friend it is on the desktop along with my code file. @Dai"}, {"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1479883403, "post_id": 40757349, "comment_id": 68740324, "body": "What&#39;s the input you give it and what is the output you see?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6595582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154355634602351/picture?type=large", "display_name": "Pyth0nPr0grammer", "link": "https://stackoverflow.com/users/6595582/pyth0npr0grammer"}, "edited": false, "score": 0, "creation_date": 1479883472, "post_id": 40757678, "comment_id": 68740351, "body": "Thank you my friend"}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 0, "last_activity_date": 1479883236, "creation_date": 1479883236, "answer_id": 40757678, "question_id": 40757349, "link": "https://stackoverflow.com/questions/40757349/using-fgets-in-two-ways/40757678#40757678", "title": "Using Fgets in two ways", "body": "<p>The array <code>temp[]</code> is uninitialized, and you attempt to find <code>strlen(temp)</code>. You don't even know if there is a <code>NUL</code> stored in the array. Try doing:</p>\n\n<pre><code>#define MAXLINE 1000\n</code></pre>\n\n<p>and changing your calls to <code>fgets()</code>:</p>\n\n<pre><code>fgets(temp, MAXLINE, user_file);\n...\nfgets(temp, MAXLINE, stdin);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 6595582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154355634602351/picture?type=large", "display_name": "Pyth0nPr0grammer", "link": "https://stackoverflow.com/users/6595582/pyth0npr0grammer"}, "edited": false, "score": 0, "creation_date": 1479883563, "post_id": 40757680, "comment_id": 68740384, "body": "I really appreciate the in-depth explanation, I will work on this right away. Have a wonderful night my friend and stay blessed. @Dai"}], "tags": [], "owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "is_accepted": true, "score": 0, "last_activity_date": 1479883708, "last_edit_date": 1479883708, "creation_date": 1479883245, "answer_id": 40757680, "question_id": 40757349, "link": "https://stackoverflow.com/questions/40757349/using-fgets-in-two-ways/40757680#40757680", "title": "Using Fgets in two ways", "body": "<p>Your code has multiple problems.</p>\n\n<p>Here's the first problem:</p>\n\n<pre><code>char temp[1000];\n</code></pre>\n\n<p>Your buffer declaration does not initialize the buffer's contents - so the value of each char value will be whatever was in the raw memory previously. In C most strings are \"null-terminated\" so having a terminating <code>NULL</code> (<code>0</code> - zero) is important otherwise you can run into buffer-overruns.</p>\n\n<p>The \"best\" approach is to zero-out (zero-initialize) the array/buffer before you use it, like so (in C99):</p>\n\n<pre><code>char temp[1000] = {0};\n</code></pre>\n\n<p>...this way <code>temp</code> will contain all <code>0</code> values (<code>NULL</code>) so anything written to it (provided it's no longer than 999 bytes) will automatically have a null-terminator (though <code>fgets</code> will append a terminating <code>0</code> value, but not every function in C does this).</p>\n\n<p>The second problem is related to the first: you're using the <em>runtime</em> string-length function <code>strlen</code> to get the size of the <code>strlen</code> buffer. This is incorrect as the buffer sized is fixed at compile-time to 1000. The <code>strlen</code> will return the index of the first <code>0</code> (<code>NULL</code>) char value, which is undefined behavior at this point because you haven't zero-initialized the buffer anyway (so it could return <code>0</code> immediately if the buffer's original raw data contained a zero, or it could overrun 1000 because there was never any zero value.</p>\n\n<p>...thus you need to re-use the buffer-length, like so:</p>\n\n<pre><code>#define TEMP_LENGTH 1000\n\nchar temp[ TEMP_LENGTH ];\n\n...\n\nfgets( temp, TEMP_LENGTH, user_file );\n</code></pre>\n\n<p>Finally, you're making the same mistake when you call <code>fgets( temp, ..., stdin )</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "is_accepted": false, "score": 0, "last_activity_date": 1479883379, "creation_date": 1479883379, "answer_id": 40757706, "question_id": 40757349, "link": "https://stackoverflow.com/questions/40757349/using-fgets-in-two-ways/40757706#40757706", "title": "Using Fgets in two ways", "body": "<p>Here problem is in your code, instead of passed numerical value in second argument you passed strlen(temp).</p>\n\n<pre><code>fgets(temp,strlen(temp),user_file);\n</code></pre>\n\n<p>right way is :-</p>\n\n<pre><code>fgets(temp,1000,user_file);\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6595582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154355634602351/picture?type=large", "display_name": "Pyth0nPr0grammer", "link": "https://stackoverflow.com/users/6595582/pyth0npr0grammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 40757680, "answer_count": 3, "score": 0, "last_activity_date": 1479883708, "creation_date": 1479881917, "last_edit_date": 1479882734, "question_id": 40757349, "link": "https://stackoverflow.com/questions/40757349/using-fgets-in-two-ways", "title": "Using Fgets in two ways", "body": "<p>I looked through some \"FGETS\" questions before posting, and what i gathered is it may be a new line character thats causing the issue for the manual input.</p>\n\n<pre><code>    int main ( int argc, char *argv[] ){\n\n    char temp[1000];\n    FILE *user_file;\n\n    printf(\"Starting....\\n\"); //Used for user visual. \n\n\n    if(argc == 2){ //open file\n        user_file = fopen(argv[1],\"r\");\n        if( user_file == NULL ){\n            printf(\"No file was found.\");\n            exit(2);\n        }else{\n            fgets(temp,strlen(temp),user_file); \n        }\n    }else if( argc &gt; 2 ){ // Will exit if arguments are greater than 2.\n        printf(\"Maximum args 2.\\n\");\n        exit(1);\n    }else{ \n        printf(\"File was not provided, please enter the text to convert.\\n\"); //If the user doesnt provide a file allow manual input.\n        fgets(temp,strlen(temp),stdin);\n    }\n\n    printf(\"%s\\n\",temp);\n\n\n    return 0;\n}//End main\n</code></pre>\n\n<p>Questions: </p>\n\n<ol>\n<li><p>Why is fgets not opening the txt file I provide it with on the cmd line, and storing it to the temp array?</p></li>\n<li><p>Why is Fgets being skipped over in the \"else\" statment if the file is not provided?</p></li>\n<li>Why is print being skipped over in both instances?</li>\n</ol>\n\n<p>Hey and by the way thank you very much for the assistance.\nIf you know a similar question that has been asked, can you post it in the comments so I can read it. </p>\n"}, {"tags": ["c", "multithreading", "pthreads", "semaphore"], "comments": [{"owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "edited": false, "score": 0, "creation_date": 1479884316, "post_id": 40757091, "comment_id": 68740737, "body": "Can i know why do you need to block consumer only?"}, {"owner": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "reply_to_user": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "edited": false, "score": 0, "creation_date": 1479890414, "post_id": 40757091, "comment_id": 68743869, "body": "@SumitGemini when there&#39;s a lot of traffic, the consumer should run slower than the producer, since the producer talks to hardware. This is just one possible approach I&#39;m looking at, it could be that the implicit CAS loops actually make it worse."}, {"owner": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "reply_to_user": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "edited": false, "score": 0, "creation_date": 1480041036, "post_id": 40757091, "comment_id": 68815630, "body": "@SumitGemini just came across a proposal for native C++ semaphores that explains it better: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2043.html#SemaphoreTypes\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2006/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "edited": false, "score": 0, "creation_date": 1479889977, "post_id": 40759375, "comment_id": 68743659, "body": "You are right, but isn&#39;t this easily fixed by sacrificing one location in the buffer, i.e. ensure val &lt; SIZE-1?"}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "reply_to_user": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "edited": false, "score": 0, "creation_date": 1479890325, "post_id": 40759375, "comment_id": 68743829, "body": "@wds No. You might face this issue at any time. Example (head=3, tail=3,sem_val=SOMTHING). Even in this case if the above sequence of operation leads to corruption of buffer."}, {"owner": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "edited": false, "score": 0, "creation_date": 1479890814, "post_id": 40759375, "comment_id": 68744113, "body": "dequeue can only read from a location in the buffer after enqueue has &quot;published&quot; it by posting on the semaphore. I don&#39;t see how the situation you allude to can ever exist."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "reply_to_user": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "edited": false, "score": 0, "creation_date": 1479891028, "post_id": 40759375, "comment_id": 68744251, "body": "If after sem_wait(), before tail value update thread switch happens, you will endup with this issue."}, {"owner": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "edited": false, "score": 0, "creation_date": 1479892633, "post_id": 40759375, "comment_id": 68745291, "body": "Can you spell this out for me with an example? There is only one reader, so why is the value of tail an issue?"}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "reply_to_user": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "edited": false, "score": 0, "creation_date": 1479893071, "post_id": 40759375, "comment_id": 68745594, "body": "@wds Sorry. You are right. Making that change in if(val &lt;..) solves this issue. But you can fill SIZE-1 items. You can go ahead with that logic. If you want to fill SIZE number of items you can take the edits I have made in your code."}, {"owner": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "edited": false, "score": 1, "creation_date": 1480041456, "post_id": 40759375, "comment_id": 68815705, "body": "your solution suffers from the same issue. If the buffer is full, then you can have <code>h=0, t=1, rem=size</code>, execute <code>sem_wait</code>, now <code>enqueue()</code> will write to <code>ar[1]</code> while <code>dequeue()</code> might be reading from it."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "reply_to_user": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "edited": false, "score": 0, "creation_date": 1480048748, "post_id": 40759375, "comment_id": 68817382, "body": "@wds Oh yes. I am wrong again. I removed it. I think your solution of checking if (val &lt; SIZE - 1)  is the only one which works. But only problem is you can not have SIZE=1."}], "tags": [], "owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "is_accepted": false, "score": 2, "last_activity_date": 1480048608, "last_edit_date": 1480048608, "creation_date": 1479889857, "answer_id": 40759375, "question_id": 40757091, "link": "https://stackoverflow.com/questions/40757091/single-producer-consumer-circular-buffer-which-only-blocks-consumer/40759375#40759375", "title": "Single producer/consumer circular buffer which only blocks consumer", "body": "<p>I can see one problem in this implementation. Consider the following sequence.</p>\n\n<ol>\n<li>Assume buffer is full, but consumer is not yet started. So (head=0, tail=0, sem_val=SIZE).</li>\n<li>dequeue() is called from consumer thread. sem_wait() succeeds. So just at that instance (head=0, tail=0, sem_val=SIZE-1). Consumer starts reading ar[0].</li>\n<li>Now there is a thread switch. enqueue() is called from producer thread. sem_getvalue() would return SIZE-1. So producer writes at ar[0].</li>\n</ol>\n\n<p>Basically I think you need mutex protection for reading and writing operations. But adding mutex might block the threads. So I am not sure whether you get expected behavior from this logic.</p>\n"}], "owner": {"reputation": 30092, "user_id": 10098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/01bb891a03442bf5494b7e35804c6dc1?s=128&d=identicon&r=PG", "display_name": "wds", "link": "https://stackoverflow.com/users/10098/wds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 826, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1480048608, "creation_date": 1479880725, "last_edit_date": 1479890198, "question_id": 40757091, "link": "https://stackoverflow.com/questions/40757091/single-producer-consumer-circular-buffer-which-only-blocks-consumer", "title": "Single producer/consumer circular buffer which only blocks consumer", "body": "<p>I'd like to implement a buffer with single producer and a single consumer, where only the consumer may be blocked. Important detail here is that the producer can drop the update if the queue is full.</p>\n\n<p>I've considered converting a wait-free implementation, but at first glance there seems to be no easy way to notify the consumer new data has arrived without losing notifications. So I settled on the very simple approach below, using a counting semaphore (some error handling details omitted for clarity):</p>\n\n<pre><code>Object ar[SIZE];\nint head = 0, tail = 0;\nsem_t semItems; // initialized to 0\n\nvoid enqueue(Object o) {\n    int val;\n    sem_getvalue(&amp;semItems, &amp;val);\n    if (val &lt; SIZE - 1) {\n        ar[head] = o;\n        head = (head + 1) % SIZE;\n        sem_post(&amp;semItems);\n    }\n    else {\n       // dropped\n    }\n}\nObject dequeue(void) {\n    sem_wait(&amp;semItems);\n    Object o = ar[tail];\n    tail = (tail + 1) % SIZE;\n    return o;\n}\n</code></pre>\n\n<p>Are there any safety issues with this code? I was surprised not to see an implementation like it anywhere in the popular literature. An additional question is whether <code>sem_post()</code> would ever block (calls <code>futex_wake()</code> under the hood in linux). Simpler solutions are also welcome of course.</p>\n\n<p>edit: edited code to leave a space between reader and writer (see Mayurk's response).</p>\n"}, {"tags": ["c", "recursion", "linked-list"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1479879248, "post_id": 40756736, "comment_id": 68738776, "body": "<code>while((curr-&gt;next != NULL) )</code> If <code>curr-&gt;next</code> doesn&#39;t change inside the loop (and yours looks like it doesn&#39;t) then of course it is an infinite loop. I&#39;m not really sure what you are asking..."}, {"owner": {"reputation": 603, "user_id": 3291639, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/777fc86473207d1010f34448d8aa7014?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Sourav", "link": "https://stackoverflow.com/users/3291639/himanshu-sourav"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1479880121, "post_id": 40756736, "comment_id": 68739094, "body": "I thought I could use some downvotes to get clear idea on using while inside recursion :D"}], "answers": [{"tags": [], "owner": {"reputation": 14730, "user_id": 6120338, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0865ba5a8a6f29ef80937137f7869026?s=128&d=identicon&r=PG", "display_name": "Ritwick Dey", "link": "https://stackoverflow.com/users/6120338/ritwick-dey"}, "is_accepted": false, "score": 1, "last_activity_date": 1479882090, "last_edit_date": 1479882090, "creation_date": 1479879355, "answer_id": 40756811, "question_id": 40756736, "link": "https://stackoverflow.com/questions/40756736/using-while-in-recursive-function/40756811#40756811", "title": "using while in recursive function", "body": "<pre><code>int display(node *curr)\n{\n       while (curr)\n      {\n\n         printf(\"%d\",curr-&gt;data);\n         curr = curr-&gt;next;\n\n     }\n\n}\n</code></pre>\n\n<p>Simple......</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7185529, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2HzUSHS1Gpw/AAAAAAAAAAI/AAAAAAAAACQ/HFl33gFS1iI/photo.jpg?sz=128", "display_name": "Mauricio Irace", "link": "https://stackoverflow.com/users/7185529/mauricio-irace"}, "is_accepted": false, "score": -1, "last_activity_date": 1479880506, "creation_date": 1479880506, "answer_id": 40757047, "question_id": 40756736, "link": "https://stackoverflow.com/questions/40756736/using-while-in-recursive-function/40757047#40757047", "title": "using while in recursive function", "body": "<p>You get an infinite loop because you never advance the in the list, that's: l = l->next(); so, you never reach null</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 7197642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/686d85461d784f1598435a9c3a95ba3d?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Hazel", "link": "https://stackoverflow.com/users/7197642/joseph-hazel"}, "is_accepted": true, "score": 1, "last_activity_date": 1479880542, "creation_date": 1479880542, "answer_id": 40757054, "question_id": 40756736, "link": "https://stackoverflow.com/questions/40756736/using-while-in-recursive-function/40757054#40757054", "title": "using while in recursive function", "body": "<p>The reason why you cannot use the <code>while(curr-&gt;next != NULL)</code> loop to index through and print the list is because for each call of the function <code>display()</code>, the value of <code>curr-&gt;next</code> is constant. This seems like it will successfully print the data in your linked list, and then infnitely print the second to last data point, as the comparison for the last data point will continually fail.</p>\n\n<p>as suggested by Ritwick Dey, using </p>\n\n<pre><code>int display(node *curr) \n{ \n    while (curr) \n    {\n        printf(\"%d\",curr-&gt;data);\n        curr = curr-&gt;next;\n    }\n}\n</code></pre>\n\n<p>should work for you; by changing the pointer of the current node, you modify the conditional of the <code>while</code> loop every iteration. a value of <code>NULL</code> will cause this check to fail, so you can print the final data point without issue. this implementation has the added benefit of avoiding the cost of the recursive function call.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 962625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87a10e93906d15effde9ea227fd49e0?s=128&d=identicon&r=PG", "display_name": "prateekhalwe", "link": "https://stackoverflow.com/users/962625/prateekhalwe"}, "is_accepted": false, "score": 1, "last_activity_date": 1479881633, "creation_date": 1479881633, "answer_id": 40757291, "question_id": 40756736, "link": "https://stackoverflow.com/questions/40756736/using-while-in-recursive-function/40757291#40757291", "title": "using while in recursive function", "body": "<p>Though the question is not fully clear, I think you are asking why the code is working after changing the 'while' statement to 'if'. The explanation is below:</p>\n\n<p>1.)You are not advancing your next pointer.</p>\n\n<p>2.)Let's assume you have advanced your next pointer even then your code will run infinitely.</p>\n\n<p>A simple dry run should be enough for this:</p>\n\n<p>Let's take an example suppose your Singly link list of positive integers looks like this:</p>\n\n<pre>8-->9-->7-->NULL </pre>\n\n<p>Then following will be your recursion tree which illustrates on which condition your code is running infinitely.</p>\n\n<p>display(8)<br>\n while(8->next)->display(9)<br>\n  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; while(9->next)->display(7)<br>\n&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;while(7->next)->display(NULL)--return</p>\n\n<p>After returning from display(NULL) this will run infinitely for this case: <br> <pre>while(7->next)---->display(NULL)</pre> and it will continue to loop around the same.</p>\n\n<p>The correct function to display the link list is already pointed out in the Ritwick's answer.</p>\n"}], "owner": {"reputation": 603, "user_id": 3291639, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/777fc86473207d1010f34448d8aa7014?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Sourav", "link": "https://stackoverflow.com/users/3291639/himanshu-sourav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "accepted_answer_id": 40757054, "answer_count": 4, "score": -2, "last_activity_date": 1479882090, "creation_date": 1479879022, "question_id": 40756736, "link": "https://stackoverflow.com/questions/40756736/using-while-in-recursive-function", "title": "using while in recursive function", "body": "<p>to display a linked list, I am using a recursive function. which was running infinite loop thanks to while loop.\nwhen replaced with \"if\" the program worked without any issues.</p>\n\n<p>looking for expert opinion on usage of </p>\n\n<blockquote>\n  <p>while</p>\n</blockquote>\n\n<p>inside a recursive function.</p>\n\n<hr>\n\n<p>recursive function with while</p>\n\n<pre><code>     int display(node *curr){\n             if((curr-&gt;next != NULL) ){ //&lt;--replace \"if\" with \"while\" and it runs infinite loop\n             printf(\"%d :: \",curr-&gt;data);\n             display(curr-&gt;next);\n             }\n             return 0;\n      }\n</code></pre>\n\n<hr>\n\n<p>complete code with create and display function</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct node {\n        int data;\n        struct node *next;\n};\n\ntypedef struct node node;\n\nint create(node *head);\nint display(node *head);\n\nint main(int argc, char *argv[]){\n        int ch,n=0;\n\n        node *head,*tail,*current;\n        head=(node*)malloc(sizeof(node));\n        create(head);\n        printf(\"\\n\");\n        display(head);\n\n        return 0;\n}\n\nint create(node *curr){\n            int data;\n            node *next;\n            printf(\"Enter the Data Value (Enter -1 to Finish): \");\n            scanf(\"%d\",&amp;data);\n                    curr-&gt;data=data;\n            if(data == -1)\n            {\n                    curr-&gt;next=NULL;\n\n                    //return curr;\n            }\n            else\n            {\n                    curr-&gt;next=(node*)malloc(sizeof(node));\n                    create(curr-&gt;next);\n            }\n\n            return 0; }\n\n    int display(node *curr){\n            if((curr-&gt;next != NULL) ){\n                    printf(\"%d :: \",curr-&gt;data);\n                    display(curr-&gt;next);\n            }\n            return 0; }\n</code></pre>\n"}, {"tags": ["c", "function", "gcc", "memory-address", "built-in"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1479878732, "post_id": 40756632, "comment_id": 68738607, "body": "That&#39;s not what &quot;return address&quot; means, and what you want is impossible, sorry. Just continue passing the destination pointer as an argument; it&#39;s quite standard."}, {"owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1480380276, "post_id": 40756632, "comment_id": 68928497, "body": "After trying out a few different implementations, it seems like this really is the best way to accomplish what I want. Thanks for the advice."}], "answers": [{"comments": [{"owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "edited": false, "score": 0, "creation_date": 1479934648, "post_id": 40757241, "comment_id": 68771897, "body": "Good suggestion. I just implemented it and included varargs so that it only needs the extra argument if it is updating. Still not as clean as I would like, and there&#39;s still a possibility of losing the pointer."}], "tags": [], "owner": {"reputation": 33, "user_id": 7187904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ebc177f2ca9d3a7281e402356c7d05d?s=128&d=identicon&r=PG&f=1", "display_name": "MGpro", "link": "https://stackoverflow.com/users/7187904/mgpro"}, "is_accepted": false, "score": 0, "last_activity_date": 1479882608, "last_edit_date": 1479882608, "creation_date": 1479881404, "answer_id": 40757241, "question_id": 40756632, "link": "https://stackoverflow.com/questions/40756632/getting-the-return-address-of-a-function-in-c/40757241#40757241", "title": "Getting the return address of a function in C", "body": "<p>Other possible solution could be to have following definition:-</p>\n\n<pre><code>double* my_function(double* input, bool alloc)\n{\n   double* output = input;\n\n   if(alloc)\n   {\n       //allocate new memory\n       double* output = ( double*)malloc(...);\n   }\n   //else work with input memory\n\n   //do modifications here\n\n   return output;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1479882855, "post_id": 40757438, "comment_id": 68740109, "body": "I think that the second function should still return the pointer. Apart from that two functions is the best solution because it is known at compile time what the programmer wants."}], "tags": [], "owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "is_accepted": false, "score": 1, "last_activity_date": 1479924513, "last_edit_date": 1479924513, "creation_date": 1479882230, "answer_id": 40757438, "question_id": 40756632, "link": "https://stackoverflow.com/questions/40756632/getting-the-return-address-of-a-function-in-c/40757438#40757438", "title": "Getting the return address of a function in C", "body": "<p>The cleanest solution is to have two separate functions:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid compute_inplace(double *data) {\n    data[0] *= 2;\n}\n\ndouble *compute_copying(const double *input) {\n    double *output = malloc(sizeof *output * N);\n    if (output == NULL)\n        return NULL;\n\n    memcpy(output, input, sizeof *output * N);\n    compute_inplace(output);\n    return output;\n}\n</code></pre>\n\n<p>Note that the copying function takes its argument as a <em>pointer to const</em>, which helps if you accidentally pass a read-only memory area to it.</p>\n"}], "owner": {"reputation": 958, "user_id": 7197899, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e94ddcfe62e826b39972ce8f9c822961?s=128&d=identicon&r=PG&f=1", "display_name": "KindaTechy", "link": "https://stackoverflow.com/users/7197899/kindatechy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6422, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1479924513, "creation_date": 1479878566, "question_id": 40756632, "link": "https://stackoverflow.com/questions/40756632/getting-the-return-address-of-a-function-in-c", "title": "Getting the return address of a function in C", "body": "<p>I have some C code that essentially looks something like</p>\n\n<pre><code>double* my_function(double* input) {\n    double* output = (double*) malloc(...);\n    // Do some stuff to output based on input\n    return output;\n}\n</code></pre>\n\n<p>Assuming that I have already built an array called <em>my_var_in</em>, my main code has something like</p>\n\n<pre><code>double* my_var_out = my_function(my_var_in);\n</code></pre>\n\n<p>This creates <em>new</em> memory, which <em>my_var_out</em> points to; most of the time that's exactly what I want to happen. However, sometimes I just want to <em>update</em> the already existing memory. If I write</p>\n\n<pre><code>double* my_var = ... ; // allocate and fill my_var as desired\nmy_var = my_function(my_var);\n</code></pre>\n\n<p>Then I lose the pointer to the previously existing memory since <em>my_var</em> now points to the newly allocated memory. I've played around with several different ideas for how to get around this.</p>\n\n<p>1) I know I can get this to work by changing the function style to something like</p>\n\n<pre><code>void my_function(double* destination, double* source) {\n    // Check if destination == source and update based on this\n</code></pre>\n\n<p>I've previously developed with this style of passing the destination pointer as an input argument and updating it there; it works great functionally, but I like the style of outputting pointers better and want to keep developing with it.</p>\n\n<p>2) Based on <a href=\"https://stackoverflow.com/questions/8094024/how-to-know-the-return-address-of-a-function\">here</a> and <a href=\"https://stackoverflow.com/questions/23818282/how-to-find-the-return-address-of-a-function-in-c/\">here</a>, it seems that the <strong>__builtin_return_address</strong> function could be of some use. I think I can use this function to compare the input address with the output address and allocate/update based on that. After reading the documentation <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.6.2/gcc/Return-Address.html\" rel=\"nofollow noreferrer\">here</a>, I wrote the following test</p>\n\n<pre><code>int* just_testing(int* in) {\n    void* ptr = __builtin_return_address(0); // the return address of just_testing\n    printf(\"Input address: %p\\n\", in);\n    printf(\"From function: %p\\n\", ptr);\n\n    return in;\n}\n\nint main(int argc, char** argv) {\n\n    int* out = (int*) malloc(sizeof(int));\n    out[0] = 2;\n    printf(\"From main before call: %p\\n\", out);\n    out = just_testing(out);\n    printf(\"From main after call: %p\\n\", out);\n\n    return 0;\n}\n</code></pre>\n\n<p>This gives me the output</p>\n\n<pre><code>From main before call: 0x19b2010\nInput address: 0x19b2010\nFrom function: 0x4011f1\nFrom main after call: 0x19b2010\n</code></pre>\n\n<p>Unfortunately, the results from <strong>__builtin_return_address</strong> don't match the address of the variable that receives the return from the function, which I did not expect.</p>\n\n<p>Why aren't the addresses the same? I also welcome any constructive suggestions on a different approach besides the two I've listed here.</p>\n"}, {"tags": ["c", "encryption"], "comments": [{"owner": {"reputation": 4396, "user_id": 1043773, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a5453bbc3f198ebef8e8d44253a1503?s=128&d=identicon&r=PG", "display_name": "bashrc", "link": "https://stackoverflow.com/users/1043773/bashrc"}, "edited": false, "score": 2, "creation_date": 1479878553, "post_id": 40756583, "comment_id": 68738553, "body": "You will need to provide more details to get help. For eg You may want to add an example"}, {"owner": {"reputation": 1, "user_id": 7198062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5350d0b9662b5739d2435b40fc78a339?s=128&d=identicon&r=PG&f=1", "display_name": "serhatbalik", "link": "https://stackoverflow.com/users/7198062/serhatbalik"}, "reply_to_user": {"reputation": 4396, "user_id": 1043773, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a5453bbc3f198ebef8e8d44253a1503?s=128&d=identicon&r=PG", "display_name": "bashrc", "link": "https://stackoverflow.com/users/1043773/bashrc"}, "edited": false, "score": 0, "creation_date": 1479878842, "post_id": 40756583, "comment_id": 68738647, "body": "Lets say i took an input from the user; &quot;aer&quot;. The integer value of this char array would be 97, 101, 114 in ASCII format. I want to be able to group these chars in a way like &quot;97101114&quot; and use them in a computation for encryption to something else, then decrypt again into the same number and same char array eventually. I can encrypt them by using atoi, strtol, etc. But i don&#39;t know how to decrypt again by splitting them into their old values."}, {"owner": {"reputation": 4396, "user_id": 1043773, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a5453bbc3f198ebef8e8d44253a1503?s=128&d=identicon&r=PG", "display_name": "bashrc", "link": "https://stackoverflow.com/users/1043773/bashrc"}, "edited": false, "score": 0, "creation_date": 1479879225, "post_id": 40756583, "comment_id": 68738770, "body": "Add this as part of your question."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1479890834, "post_id": 40757696, "comment_id": 68744123, "body": "Shouldn&#39;t OP use fixed-width hexadecimal instead? I think this only further overcomplicates the solution."}, {"owner": {"reputation": 1404, "user_id": 1867076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SfVUT.jpg?s=128&g=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/1867076/prometheus"}, "edited": false, "score": 0, "creation_date": 1479891040, "post_id": 40757696, "comment_id": 68744261, "body": "At least it is an option to take, I didn&#39;t say it is the &quot;best&quot; way, I just provided an option. @Rhymoid"}, {"owner": {"reputation": 1385, "user_id": 1806914, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5aca45344a65147ad98643427a00d4f6?s=128&d=identicon&r=PG", "display_name": "Utku Soyta\u015f", "link": "https://stackoverflow.com/users/1806914/utku-soyta%c5%9f"}, "edited": false, "score": 1, "creation_date": 1479897290, "post_id": 40757696, "comment_id": 68748469, "body": "you can find lots of questions and automatically answers in the websites like codechef etc."}], "tags": [], "owner": {"reputation": 1404, "user_id": 1867076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SfVUT.jpg?s=128&g=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/1867076/prometheus"}, "is_accepted": false, "score": 1, "last_activity_date": 1479889606, "last_edit_date": 1479889606, "creation_date": 1479883336, "answer_id": 40757696, "question_id": 40756583, "link": "https://stackoverflow.com/questions/40756583/text-letters-to-number-in-c/40757696#40757696", "title": "Text (letters) to number in C", "body": "<p>You can use a basic algorithm in your grouped ASCII numbers. \nAs you said: </p>\n\n<p><em>\"a\" is going to be \"97\"</em></p>\n\n<p><em>\"e\" is going to be \"101\"</em></p>\n\n<p><em>\"r\" is going to be \"114\"</em></p>\n\n<p>Since you already know the ASCII provisions of your chars, you can find out how many digits of this char's ASCII provisioned number, and use it as your guidance while you are solving the equation. Let me give you an example:</p>\n\n<p>97 is 2 digits</p>\n\n<p>101 is 3 digits</p>\n\n<p>114 is 3 digits</p>\n\n<p>So your new cipher will be: <strong>2</strong>97<strong>3</strong>101<strong>3</strong>114</p>\n\n<p>When you read this number's first element, you are going to understand that you need to read next two numbers and turn it into a character. Then when you read next number as \"3\", you are going to understand that next three elements are going to be handled together, etc.</p>\n"}], "owner": {"reputation": 1, "user_id": 7198062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5350d0b9662b5739d2435b40fc78a339?s=128&d=identicon&r=PG&f=1", "display_name": "serhatbalik", "link": "https://stackoverflow.com/users/7198062/serhatbalik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1479889606, "creation_date": 1479878316, "last_edit_date": 1479879966, "question_id": 40756583, "link": "https://stackoverflow.com/questions/40756583/text-letters-to-number-in-c", "title": "Text (letters) to number in C", "body": "<p>i'm trying to create an RSA algorithm for study purposes. </p>\n\n<p>Lets say i took an input from the user; \"aer\". The integer value of this char array would be 97, 101, 114 in ASCII format. I want to be able to group these chars in a way like \"97101114\" and use them in a computation for encryption to something else, then decrypt again into the same number and same char array eventually. </p>\n\n<p>I can encrypt them by using atoi, strtol, etc. But i don't know how to decrypt again by splitting them into their old values.</p>\n\n<p>Edit: While searching through the web i came an across a idea where they map each character to some kind of number as globally. Similar to ASCII mapping. But that gave me the idea to map every character to \"three digit\" number, so i can split them by this criteria after decryption of the whole decimal number. Is there a better solution you can provide?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 2, "creation_date": 1479878139, "post_id": 40756510, "comment_id": 68738432, "body": "your lack of braces makes it really painful to read. While loop without braces only considers first statement after the loop declaration unless you are using commas(PLEASE DO NOT USE COMMAS THOUGH). It&#39;s hard to tell what your intent is as is since the indenting is misleading. As it stands your program should be spamming you with &quot;printf(&quot;Press &#39;y&#39; to play or &#39;n&#39; to quit: &quot;);&quot; since that&#39;s the only statement while loop sees."}, {"owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 1, "creation_date": 1479878301, "post_id": 40756510, "comment_id": 68738474, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/38913603/how-can-i-exit-a-while1-based-on-a-user-input\">How can I exit a while(1) based on a user input?</a>"}, {"owner": {"reputation": 406, "user_id": 6422468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8622bb1b203d0548d5938c30588f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Sanghvi", "link": "https://stackoverflow.com/users/6422468/hardik-sanghvi"}, "edited": false, "score": 0, "creation_date": 1479878700, "post_id": 40756510, "comment_id": 68738598, "body": "you can use &quot;break&quot; to end a while loop instead of changing the value of a variable"}, {"owner": {"reputation": 793, "user_id": 5588347, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/698d1bb15afba911198810b3add51c74?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Srivastava", "link": "https://stackoverflow.com/users/5588347/ashish-srivastava"}, "edited": false, "score": 0, "creation_date": 1479878803, "post_id": 40756510, "comment_id": 68738626, "body": "you should use <code>else if (playornot==&#39;y&#39;)</code>."}, {"owner": {"reputation": 406, "user_id": 6422468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8622bb1b203d0548d5938c30588f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Sanghvi", "link": "https://stackoverflow.com/users/6422468/hardik-sanghvi"}, "edited": false, "score": 1, "creation_date": 1479878840, "post_id": 40756510, "comment_id": 68738646, "body": "also, you don&#39;t require <b>&quot;keep_playing&quot;</b> variable for looping. You can simply use  <code>while (playornot == &#39;y&#39;)</code> and declare <code>char playornot;</code> outside while loop"}, {"owner": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "edited": false, "score": 0, "creation_date": 1479879631, "post_id": 40756510, "comment_id": 68738894, "body": "@Dmity I normally program in python so maybe that is why. I also am new to C as I stated. I tried putting in the code of what xenteros said and it still doesn&#39;t work like I want it to after the user presses y or n. What is going on? I kinda understand but still very confused. &quot;While loop without braces only considers first statement after the loop declaration unless you are using commas&quot; that was confusing."}], "answers": [{"tags": [], "owner": {"reputation": 7082, "user_id": 98636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e73eaf09b8cb5de02dc2077f7ab0259?s=128&d=identicon&r=PG", "display_name": "Elemental", "link": "https://stackoverflow.com/users/98636/elemental"}, "is_accepted": false, "score": 2, "last_activity_date": 1479878300, "creation_date": 1479878300, "answer_id": 40756579, "question_id": 40756510, "link": "https://stackoverflow.com/questions/40756510/programming-in-c-ending-a-while-loop/40756579#40756579", "title": "Programming in C, ending a while loop", "body": "<p>You have 2 basic problems: </p>\n\n<ul>\n<li>when using a while and you need to repeat a whole lot of lines of code you need to use braces {} around all the code that is going to be repeated.</li>\n<li>when you write int var you are <em>declaring</em> the variable - this tells the compiler what kind of variable it is and what it is called. Later changes to this value do not require a re-declaration as you are doing.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "edited": false, "score": 0, "creation_date": 1479879331, "post_id": 40756649, "comment_id": 68738806, "body": "Ok, I think I understand but it is still not working like I want it to. After the user presses y for yes, it should print ok."}, {"owner": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "edited": false, "score": 0, "creation_date": 1479879715, "post_id": 40756649, "comment_id": 68738935, "body": "I did, lol. It just sits there instead of exiting or print ok."}, {"owner": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "edited": false, "score": 0, "creation_date": 1479879832, "post_id": 40756649, "comment_id": 68738984, "body": "Yes, thanks. What was different from last time?"}, {"owner": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "edited": false, "score": 0, "creation_date": 1479879912, "post_id": 40756649, "comment_id": 68739019, "body": "I just wanted to know and yes I know."}, {"owner": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "edited": false, "score": 0, "creation_date": 1479880496, "post_id": 40756649, "comment_id": 68739228, "body": "I thought up votes were checking the green check mark?"}, {"owner": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "edited": false, "score": 0, "creation_date": 1479880816, "post_id": 40756649, "comment_id": 68739334, "body": "Ok I think I upvoted?"}, {"owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "reply_to_user": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "edited": false, "score": 0, "creation_date": 1479881399, "post_id": 40756649, "comment_id": 68739551, "body": "@Sean.D the tick is acceptance - it&#39;s used for marking a solution. Upvoting is for marking good answers at all. I strongly recommend <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - interesting articles on how <a href=\"https://stackoverflow.com\">Stack Overflow</a> works."}], "tags": [], "owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "is_accepted": true, "score": 1, "last_activity_date": 1479879993, "last_edit_date": 1479879993, "creation_date": 1479878649, "answer_id": 40756649, "question_id": 40756510, "link": "https://stackoverflow.com/questions/40756510/programming-in-c-ending-a-while-loop/40756649#40756649", "title": "Programming in C, ending a while loop", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main() {\n    printf(\"Welcome to rock paper scissors!\\n\");\n    int keep_playing=5;\n    while (keep_playing==5) {\n        printf(\"Press 'y' to play or 'n' to quit: \");\n        char playornot;\n        scanf(\"%c\",&amp;playornot);\n        if (playornot=='y') {\n            printf(\"Ok.\\n\");\n        } else if (playornot=='n') {\n            keep_playing=4;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Is how your code should look like. In your case, there was an infinite loop because the only line which was repeated was <code>printf(\"Press 'y' to play or 'n' to quit: \");</code>. This was caused by the luck of curly braces.</p>\n\n<p>Then, you had a typo I would say - redundant <code>int</code> in <code>int keep_playing=4</code>. This declared another variable, visible only in this scope. Actually it should have caused the error when there were no curly braces, as it was the same scope at that moment.</p>\n\n<p>And there was a third bug which noone mentioned before. If the entered character wasn't <code>y</code> it should have been <code>n</code>. Otherwise you should ask for another input or somehow decide how to deal with it.</p>\n\n<p>And the fourth one was that yoou tried to scan two characters to <code>char playornot</code>. Removed <code>\\n</code> from <code>scanf</code>.</p>\n"}], "owner": {"reputation": 97, "user_id": 6563389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/202263430a61c31ecba4f860355dcfaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sean.D", "link": "https://stackoverflow.com/users/6563389/sean-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "closed_date": 1479890186, "accepted_answer_id": 40756649, "answer_count": 2, "score": 0, "last_activity_date": 1479879993, "creation_date": 1479877952, "question_id": 40756510, "link": "https://stackoverflow.com/questions/40756510/programming-in-c-ending-a-while-loop", "closed_reason": "Not suitable for this site", "title": "Programming in C, ending a while loop", "body": "<p>I am new to C and I found 1 forum in C for ending a while loop and that one did not really help as with the break it still does not work. It gives me a \"expected ; before break\" or \"int keep_playing=4\" to end the loop. This is a simple rock paper scissors game and I am just working on the loop and going to soon worry about the logic portion. Here is my code. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n    printf(\"Welcome to rock paper scissors!\\n\");\n    int keep_playing=5;\n    while (keep_playing==5)\n        printf(\"Press 'y' to play or 'n' to quit: \");\n        char playornot;\n        scanf(\"%c\\n\",&amp;playornot);\n        if (playornot=='y')\n            printf(\"Ok.\\n\");\n        else (playornot=='y')\n            int keep_playing=4;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "for-loop", "matrix"], "answers": [{"comments": [{"owner": {"reputation": 406, "user_id": 6422468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8622bb1b203d0548d5938c30588f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Sanghvi", "link": "https://stackoverflow.com/users/6422468/hardik-sanghvi"}, "edited": false, "score": 0, "creation_date": 1479911096, "post_id": 40767023, "comment_id": 68758067, "body": "This is just from a first look at the code. To understand more you can use a debugger and execute line by line"}], "tags": [], "owner": {"reputation": 406, "user_id": 6422468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8622bb1b203d0548d5938c30588f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Sanghvi", "link": "https://stackoverflow.com/users/6422468/hardik-sanghvi"}, "is_accepted": false, "score": 1, "last_activity_date": 1479911018, "creation_date": 1479911018, "answer_id": 40767023, "question_id": 40756368, "link": "https://stackoverflow.com/questions/40756368/undestanding-c-program-gauss-jordan-elimination/40767023#40767023", "title": "undestanding c program gauss-jordan elimination", "body": "<p>Take an example augmented matrix</p>\n\n<pre><code> 1 1 1 | 5\n 2 3 5 | 8\n 4 0 5 | 2\n</code></pre>\n\n<p>The main aim is to make all the elements of matrix 0 except the elements at position where i==j.</p>\n\n<p>so in the second for loop,when the if condition is true for the first time i=2 j=1,A[2][1]=2\nSo to make A[2][1]=0 we have to subtract 2.This 2 we get from <code>c=A[i][j]/A[j][j];</code> Hence we will perform <strong>R2-2R1</strong> (row2-2*row1) operation <code>A[i][k]=A[i][k]-c*A[j][k];</code></p>\n\n<p>Similarly operations are performed for all the rows.</p>\n"}], "owner": {"reputation": 1, "user_id": 5984224, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/36eddc3514f70b2faada5acdfeba9c51?s=128&d=identicon&r=PG&f=1", "display_name": "rees", "link": "https://stackoverflow.com/users/5984224/rees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2842, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479911018, "creation_date": 1479877085, "question_id": 40756368, "link": "https://stackoverflow.com/questions/40756368/undestanding-c-program-gauss-jordan-elimination", "title": "undestanding c program gauss-jordan elimination", "body": "<p>i know i sound stupid but i really need to understand the gauss-jordan elimination c program. i already try to understand the coding but it's still confusing for to read the code line by line.Especially the  for(j=1; j&lt;=n; j++) loop.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nint i,j,k,n;\nfloat A[20][20],c,x[10];\nprintf(\"\\nEnter the size of matrix: \");\nscanf(\"%d\",&amp;n);\nprintf(\"\\nEnter the elements of augmented matrix row-wise:\\n\");\nfor(i=1; i&lt;=n; i++)\n{\n    for(j=1; j&lt;=(n+1); j++)\n    {\n        printf(\" A[%d][%d]:\", i,j);\n        scanf(\"%f\",&amp;A[i][j]);\n    }\n}\n\nfor(j=1; j&lt;=n; j++)\n{\n    for(i=1; i&lt;=n; i++)\n    {\n        if(i!=j)\n        {\n            c=A[i][j]/A[j][j];\n            for(k=1; k&lt;=n+1; k++)\n            {\n                A[i][k]=A[i][k]-c*A[j][k];\n            }\n        }\n    }\n}\nprintf(\"\\nThe solution is:\\n\");\nfor(i=1; i&lt;=n; i++)\n{\n    x[i]=A[i][n+1]/A[i][i];\n    printf(\"\\n x%d=%f\\n\",i,x[i]);\n}\nreturn(0);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "linker", "attributes", "weak"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6217567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leu0v.jpg?s=128&g=1", "display_name": "dingcurie", "link": "https://stackoverflow.com/users/6217567/dingcurie"}, "edited": false, "score": 0, "creation_date": 1480032565, "post_id": 40756760, "comment_id": 68813977, "body": "But that&#39;s the way GCC actually behaves, so it could be said that that&#39;s expected by the authors of GCC, too. It&#39;s also implemented in IAR, as its manual explicitly says: &quot;The linker will not ..., nor will the lack of a definition for a weak reference result in an error. If no definition is included, the address of the object will be zero.&quot;"}, {"owner": {"reputation": 2742, "user_id": 10314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20cf40f15981c94eb92341e8cdf98e85?s=128&d=identicon&r=PG", "display_name": "James Antill", "link": "https://stackoverflow.com/users/10314/james-antill"}, "reply_to_user": {"reputation": 91, "user_id": 6217567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leu0v.jpg?s=128&g=1", "display_name": "dingcurie", "link": "https://stackoverflow.com/users/6217567/dingcurie"}, "edited": false, "score": 0, "creation_date": 1482103833, "post_id": 40756760, "comment_id": 69626686, "body": "No, if that&#39;s what they expected it to always do they&#39;d document it as doing that. That&#39;s what undocumented/undefined means, it still does <i>something</i> and that thing might be useful to you ... but it might not always do that."}], "tags": [], "owner": {"reputation": 2742, "user_id": 10314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20cf40f15981c94eb92341e8cdf98e85?s=128&d=identicon&r=PG", "display_name": "James Antill", "link": "https://stackoverflow.com/users/10314/james-antill"}, "is_accepted": false, "score": 0, "last_activity_date": 1479879140, "creation_date": 1479879140, "answer_id": 40756760, "question_id": 40756326, "link": "https://stackoverflow.com/questions/40756326/gcc-weak-attribute-on-variable-declaration/40756760#40756760", "title": "GCC weak attribute on variable declaration", "body": "<p>I'm don't think I'd expect that, I'd assume GCC would do the same thing as if the weak attribute wasn't present. The documentation is:</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#Common-Function-Attributes\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#Common-Function-Attributes</a></p>\n\n<p>...so this looks like undocumented/undefined behaviour.</p>\n"}], "owner": {"reputation": 91, "user_id": 6217567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leu0v.jpg?s=128&g=1", "display_name": "dingcurie", "link": "https://stackoverflow.com/users/6217567/dingcurie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 780, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479879140, "creation_date": 1479876883, "question_id": 40756326, "link": "https://stackoverflow.com/questions/40756326/gcc-weak-attribute-on-variable-declaration", "title": "GCC weak attribute on variable declaration", "body": "<p>In GCC, If a variable is declared with <em>weak</em> attribute, and, in (static) linking time, no definition is found, the variable will have address <strong>zero</strong>, i.e., if a pointer is initialized with the address of the variable, the pointer will be <strong>NULL</strong>, as the following code snippets illustrate:</p>\n\n<p><em>foobar.c</em>:</p>\n\n<pre><code>extern int foo __attribute__((weak));\nextern int bar;\n\nint *a[] = {&amp;foo, &amp;bar};\n</code></pre>\n\n<p><em>main.c</em>:</p>\n\n<pre><code>#include &lt;diag/Trace.h&gt;\n\n//int foo;\nint bar;\nextern int *a[];\n\nint main(void) {\n    trace_printf(\"%p, %p\", a[0], a[1]);\n    return 0;\n}\n</code></pre>\n\n<p>The output is: <strong>0, 0x20000120</strong>\n(I'm using arm-none-eabi-gcc 5.4.1)</p>\n\n<p>The question is: although the behavior is expected, no document mentioned it. Could anyone point me to any material explaining this behavior? Thanks!</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1479879034, "post_id": 40756297, "comment_id": 68738712, "body": "Change <code>*p++ = scanf(&quot;%c&quot;, &amp;count);</code> to <code>scanf(&quot;%c&quot;, &amp;p[i]);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1479878568, "post_id": 40756552, "comment_id": 68738557, "body": "I don&#39;t know why I am not able to format my code :( Sorry."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1479878878, "post_id": 40756552, "comment_id": 68738660, "body": "because SO markdown has a bug that prevents code blocks to work with bullets/numbering"}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "reply_to_user": {"reputation": 3596, "user_id": 4635388, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7b32fa670c38de0c71d4aa0ae127e652?s=128&d=identicon&r=PG", "display_name": "Rohan Khude", "link": "https://stackoverflow.com/users/4635388/rohan-khude"}, "edited": false, "score": 0, "creation_date": 1479879371, "post_id": 40756552, "comment_id": 68738818, "body": "@Rohan, How did you do it?!"}, {"owner": {"reputation": 3596, "user_id": 4635388, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7b32fa670c38de0c71d4aa0ae127e652?s=128&d=identicon&r=PG", "display_name": "Rohan Khude", "link": "https://stackoverflow.com/users/4635388/rohan-khude"}, "edited": false, "score": 1, "creation_date": 1479881032, "post_id": 40756552, "comment_id": 68739401, "body": "I did two edit, In first i used combination of <code>blockquote</code> and <code>{ }</code>. In second i used combination of  grave accent (<code>) and </code>&lt;br/&gt;&#39;."}], "tags": [], "owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "is_accepted": true, "score": 1, "last_activity_date": 1479880859, "last_edit_date": 1479880859, "creation_date": 1479878190, "answer_id": 40756552, "question_id": 40756297, "link": "https://stackoverflow.com/questions/40756297/how-to-get-char-input-from-user-and-place-in-a-certain-memory-location/40756552#40756552", "title": "How to get char input from user, and place in a certain memory location?", "body": "<p>There are following issues.</p>\n\n<ol>\n<li><p>I assume you want to store characters in memory pointed by ptr. Why are you allocating 27 bytes? You should allocate for 9 characters.</p>\n\n<p><code>ptr = malloc(sizeof(char)*(9+1));// 1 for '\\0'</code><br/>\n<code>if(0 == ptr)</code><br/>\n    <code>return;</code></p></li>\n<li><p>Scanf returns number of characters read. So you should write scanf like below.</p>\n\n<p><code>scanf(\"%c\", p++);</code></p></li>\n<li><p>If you want to enter string using scanf, you can use \"%s\". Loop is not actually required.</p>\n\n<p><code>scanf(\"%9[^\\n]\",p);</code></p></li>\n</ol>\n\n<p>Make these changes. It should work.</p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 6810200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qO85n.jpg?s=128&g=1", "display_name": "Aravind vijayan", "link": "https://stackoverflow.com/users/6810200/aravind-vijayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1479878917, "creation_date": 1479878917, "answer_id": 40756710, "question_id": 40756297, "link": "https://stackoverflow.com/questions/40756297/how-to-get-char-input-from-user-and-place-in-a-certain-memory-location/40756710#40756710", "title": "How to get char input from user, and place in a certain memory location?", "body": "<p>scanf(\" %c\", &amp;count), a space before %c,  will help you to skip newline</p>\n"}], "owner": {"reputation": 45, "user_id": 6720691, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/93a3a551339d2513d49fcc6efcf800a8?s=128&d=identicon&r=PG&f=1", "display_name": "user6720691", "link": "https://stackoverflow.com/users/6720691/user6720691"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 40756552, "answer_count": 2, "score": -1, "last_activity_date": 1479880859, "creation_date": 1479876705, "question_id": 40756297, "link": "https://stackoverflow.com/questions/40756297/how-to-get-char-input-from-user-and-place-in-a-certain-memory-location", "title": "How to get char input from user, and place in a certain memory location?", "body": "<p>I would like to know why my code isn't working if thats ok. Whats supposed to happen is it is supposed to get 9 chars from the user and put them into allocated memory locations.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main(){\nchar count, *ptr, *p;\n\nptr = malloc(27);\n\np = ptr;\n\n\nfor(int i = 0; i &lt; 9; i++)\n{\n  *p++ = scanf(\"%c\", &amp;count);\n }\n\n  *p = '\\0';\n  puts(ptr);\n  free(ptr);\n\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6158501, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-L_1YiyasHlE/AAAAAAAAAAI/AAAAAAAA_LU/T__7YvKFrhw/photo.jpg?sz=128", "display_name": "Alex Sorkin", "link": "https://stackoverflow.com/users/6158501/alex-sorkin"}, "edited": false, "score": 0, "creation_date": 1479874894, "post_id": 40755956, "comment_id": 68737510, "body": "Hmm, that didn&#39;t do the trick. Now I get a write access violation when the program gets to the first scanf"}, {"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "reply_to_user": {"reputation": 43, "user_id": 6158501, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-L_1YiyasHlE/AAAAAAAAAAI/AAAAAAAA_LU/T__7YvKFrhw/photo.jpg?sz=128", "display_name": "Alex Sorkin", "link": "https://stackoverflow.com/users/6158501/alex-sorkin"}, "edited": false, "score": 0, "creation_date": 1479874935, "post_id": 40755956, "comment_id": 68737526, "body": "@AlexSorkin See Jay Kumar R&#39;s answer."}], "tags": [], "owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "is_accepted": false, "score": 2, "last_activity_date": 1479874715, "creation_date": 1479874715, "answer_id": 40755956, "question_id": 40755919, "link": "https://stackoverflow.com/questions/40755919/using-function-to-put-values-into-struct-in-c/40755956#40755956", "title": "Using function to put values into struct in C", "body": "<p>You've got undefined behavior all over. The problem is that there is no actual space for the <code>AC</code> struct you're populating. It's a simple change. Replace <code>AC *ac;</code> with <code>AC ac;</code>. That changes <code>ac</code> from a pointer to an actual struct with backing memory.</p>\n"}, {"comments": [{"owner": {"reputation": 517, "user_id": 5293991, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rm6r_TBDf0M/AAAAAAAAAAI/AAAAAAAAN3c/_0hdeN0P3K8/photo.jpg?sz=128", "display_name": "Jay Kumar R", "link": "https://stackoverflow.com/users/5293991/jay-kumar-r"}, "reply_to_user": {"reputation": 43, "user_id": 6158501, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-L_1YiyasHlE/AAAAAAAAAAI/AAAAAAAA_LU/T__7YvKFrhw/photo.jpg?sz=128", "display_name": "Alex Sorkin", "link": "https://stackoverflow.com/users/6158501/alex-sorkin"}, "edited": false, "score": 0, "creation_date": 1479875158, "post_id": 40755966, "comment_id": 68737572, "body": "Alex , it may have helped you, but to understand you have to read more and understand and take baby steps. good luck."}], "tags": [], "owner": {"reputation": 517, "user_id": 5293991, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rm6r_TBDf0M/AAAAAAAAAAI/AAAAAAAAN3c/_0hdeN0P3K8/photo.jpg?sz=128", "display_name": "Jay Kumar R", "link": "https://stackoverflow.com/users/5293991/jay-kumar-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1479875759, "last_edit_date": 1479875759, "creation_date": 1479874797, "answer_id": 40755966, "question_id": 40755919, "link": "https://stackoverflow.com/questions/40755919/using-function-to-put-values-into-struct-in-c/40755966#40755966", "title": "Using function to put values into struct in C", "body": "<p>use &amp; .\nLike <code>scanf_s(\" %i\", &amp;ac-&gt;day)</code>;</p>\n\n<p>A string is character array ( char * or char [] ) So it does not require &amp;. But non-arrays require it.</p>\n\n<p>Also you should declare <code>AC ac;</code> (as Michael Arbers pointed out first) then pass the address <code>( &amp;ac)</code> when calling the function call. That is because you are passing address and declared the function to take pointer to AC (AC *ac).</p>\n\n<p>In C language, when you declare an address variable (pointer) you use * . When fetching the address you use &amp;  .</p>\n"}], "owner": {"reputation": 43, "user_id": 6158501, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-L_1YiyasHlE/AAAAAAAAAAI/AAAAAAAA_LU/T__7YvKFrhw/photo.jpg?sz=128", "display_name": "Alex Sorkin", "link": "https://stackoverflow.com/users/6158501/alex-sorkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479875759, "creation_date": 1479874398, "question_id": 40755919, "link": "https://stackoverflow.com/questions/40755919/using-function-to-put-values-into-struct-in-c", "title": "Using function to put values into struct in C", "body": "<p>Assignment requires using a function to input data into a struct</p>\n\n<pre><code>typedef struct AC {\n    char code[4];\n    double cost;\n    unsigned day;\n} AC;\n</code></pre>\n\n<p>My function so far is</p>\n\n<pre><code>int main(){\nAC *ac;\ninput(&amp;ac);\n}\n\nvoid input(AC * ac)\n{\n    printf_s(\"Input code (3 characters), cost, and day (0 = Sun 6 = Sat) separated by spaces: \\n\");\n\n    gets(ac-&gt;code);\n    printf_s(\"\\nCode: %s\\n\", ac-&gt;code);\n\n    scanf_s(\" %lf\", ac-&gt;cost);\n    printf_s(\"\\nCost: %.2lf\\n\", ac-&gt;cost);\n\n    scanf_s(\" %i\", ac-&gt;day);\n    printf_s(\"\\nDay: %i\\n\", ac-&gt;day);\n}\n</code></pre>\n\n<p>The gets for the airport code works fine, but the scanf for cost and day don't seem to do anything; using breakpoints, it seems like the function isn't placing the values scanf gets into the struct. Instead, cost just remains garbage code after that part is done.</p>\n\n<p>Don't worry about error checking or anything, I'm just interested in how to make the function properly take the input values and put them in the struct.</p>\n"}]