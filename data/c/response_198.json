[{"tags": ["c", "reverse", "bubble-sort"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1540423674, "post_id": 52979205, "comment_id": 92864959, "body": "If your <i>compiler stops and goes no further</i>, it gives you compiler errors that tell you why it stopped. Why aren&#39;t those messages in your post?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 1, "creation_date": 1540424013, "post_id": 52979205, "comment_id": 92865056, "body": "What makes you think you need <code>a[i] = a[i]&amp;&amp;0</code>? Why can&#39;t you just do <code>a[i] = 0</code>?"}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1540424132, "post_id": 52979205, "comment_id": 92865094, "body": "@KenWhite most likely a terminology error.  If the compiler stopped, then there wouldn&#39;t be a program to execute, making entry of the numbers impossible.  I suspect he meant the program stopped, which is a far more likely outcome all things considered."}, {"owner": {"reputation": 3, "user_id": 10485409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6906660f9a146a30979357586b10e959?s=128&d=identicon&r=PG&f=1", "display_name": "George M.", "link": "https://stackoverflow.com/users/10485409/george-m"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1540424344, "post_id": 52979205, "comment_id": 92865138, "body": "@KenWhite i use xcode. it shows this: 122334455667788990243546(lldb) and stops worling"}], "answers": [{"tags": [], "owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "is_accepted": false, "score": 1, "last_activity_date": 1540423673, "creation_date": 1540423673, "answer_id": 52979264, "question_id": 52979205, "link": "https://stackoverflow.com/questions/52979205/reverse-bubble-sort-biggest-to-the-left-doesnt-seem-to-work/52979264#52979264", "title": "Reverse bubble sort (biggest to the left) doesn&#39;t seem to work", "body": "<p>Your array <code>int array[11];</code> isn't doing what you think it is.  That declares an array of 11 ints, indexed from 0 to 10 inclusive.  There is no <code>array[11]</code> therefore trying to access this will lead to undefined behavior.</p>\n\n<p>You've got the correct form of your <code>for</code> loop, it'll correctly iterate over 12 members of the array, numbered 0 to 11 inclusive.  However you need to declare the array as <code>int array[12];</code> to get it big enough to work.</p>\n\n<p>Also, you're passing the array to the two functions using <code>&amp;array[11]</code>.  You just need to say <code>array</code> and it'll pass in the array correctly.  What you're doing will cause the two functions to write over random memory, which definitely won't help.</p>\n\n<p>Try fixing these and see what changes.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540424057, "post_id": 52979265, "comment_id": 92865067, "body": "I recommend adding to this answer why you think this and how will it help the Asker. This will make a more complete answer."}], "tags": [], "owner": {"reputation": 52, "user_id": 10554799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UZKkwGHaatc/AAAAAAAAAAI/AAAAAAAAAI0/kfF9vZGnGwA/photo.jpg?sz=128", "display_name": "Eric Groppe", "link": "https://stackoverflow.com/users/10554799/eric-groppe"}, "is_accepted": false, "score": -2, "last_activity_date": 1540433132, "last_edit_date": 1540433132, "creation_date": 1540423675, "answer_id": 52979265, "question_id": 52979205, "link": "https://stackoverflow.com/questions/52979205/reverse-bubble-sort-biggest-to-the-left-doesnt-seem-to-work/52979265#52979265", "title": "Reverse bubble sort (biggest to the left) doesn&#39;t seem to work", "body": "<p>I think you forgot to include the stdio.h library in your code</p>\n"}, {"tags": [], "owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "is_accepted": false, "score": 1, "last_activity_date": 1540444178, "creation_date": 1540444178, "answer_id": 52981723, "question_id": 52979205, "link": "https://stackoverflow.com/questions/52979205/reverse-bubble-sort-biggest-to-the-left-doesnt-seem-to-work/52981723#52981723", "title": "Reverse bubble sort (biggest to the left) doesn&#39;t seem to work", "body": "<p>First of all, You should include <code>stdio.h</code> header file in order to use <code>printf()</code> and <code>scanf()</code></p>\n\n<p>You are dealing with 12 integers. Then Why did you declare an array of 11 integers???</p>\n\n<pre><code>int array[11]; //declaring an integer array;  &lt;-------- change the size to 12 from 11\n</code></pre>\n\n<p>The purpose of the <code>array_clean();</code> is to initialize each number with 0. You can simply put 0 instead of <code>a[i]&amp;&amp;0;</code></p>\n\n<p>Here you are passing the address of 12th element.</p>\n\n<pre><code>array_clean(&amp;array[11]); //&lt;---------------------\n</code></pre>\n\n<p>You should pass the address of the <code>base element(1st)</code>.\nYou can do this by two ways. </p>\n\n<pre><code> array_clean(&amp;array[0]); \n Or,\n array_clean(array);\n</code></pre>\n\n<p><strong>When an array is used as a value, its name represents the address of the first element.</strong></p>\n\n<p>And finally, please check your <code>bubble</code> sort logic.</p>\n\n<pre><code>    for(int j=0; j&lt;12; j++)\n            {\n                if(a[j]&lt;a[j+1])\n                    {place=a[j]; //&lt;-----curly braces missing in the body of if \n                    a[j] = a[j+1];  //&lt;----error\n                    a[j+1] = place;\n                    }\n\n            }\n</code></pre>\n\n<p>For j=11, your code will try to access 12th index and that will give you a <code>segmentation fault</code>. Enclose the body of <code>if</code> with <code>curly braces</code>.</p>\n\n<p>Here is the modified code</p>\n\n<pre><code>#include&lt;math.h&gt;\n#include&lt;stdio.h&gt; // &lt;---------- include this header file \n\nvoid array_clean(int a[12]) //just an array cleaner\n  {\n       for(int i=0; i&lt;12; i++)\n    {\n       a[i] = 0; // smth &amp;&amp; 0 = 0 anyway\n    }\n\n  }\n\nvoid axe_sort(int a[12]) //drowning-axe sort function\n{\n  int i,j;\n\n    for(i=0; i&lt;11; i++)\n    {\n        for(j=0; j&lt;11-i; j++)  //&lt;-------- see the logic carefully\n        {\n            if(a[j] &lt; a[j+1])   //&lt;-----put curly braces\n                {int place=a[j];\n                a[j] = a[j+1];\n                a[j+1] = place;}\n        }\n    }\n\n}\n\n    int main(void)\n     {\n        int array[12]; //declaring an integer array;\n        array_clean(&amp;array[0]); // &lt;---------------- pass the base address\n        printf(\"Enter 12 random integers you'd like to sort: \");\n        for(int m=0; m&lt;12; m++)\n        {\n            scanf(\"%d\", &amp;array[m]); //letting user to fill an array\n        }\n         axe_sort(&amp;array[0]); // &lt;---------------- pass the base address\n        for(int m=0; m&lt;12; m++)\n        {\n            printf(\"%d \", array[m]); //printing the sorted array\n        }\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10485409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6906660f9a146a30979357586b10e959?s=128&d=identicon&r=PG&f=1", "display_name": "George M.", "link": "https://stackoverflow.com/users/10485409/george-m"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1540447647, "answer_count": 3, "score": -4, "last_activity_date": 1540444494, "creation_date": 1540423204, "last_edit_date": 1540444494, "question_id": 52979205, "link": "https://stackoverflow.com/questions/52979205/reverse-bubble-sort-biggest-to-the-left-doesnt-seem-to-work", "closed_reason": "Not suitable for this site", "title": "Reverse bubble sort (biggest to the left) doesn&#39;t seem to work", "body": "<p>I want to sort 12 integers using a \"reverse bubble sort\" (We call it \"the drowning axe sort\", whatever). My function looks good to me but something goes wrong. </p>\n\n<p>Error: having typed my 12 random numbers I don't get the result printed, instead my compiler stops and does not proceed any further. </p>\n\n<p>Can anyone help?</p>\n\n<p>Code:</p>\n\n<pre><code>#include&lt;math.h&gt;\n#include&lt;math.h&gt;\n\nvoid array_clean(int a[11]) //just an array cleaner\n{\n  for(int i=0; i&lt;12; i++)\n  {\n     a[i] = a[i]&amp;&amp;0; // smth &amp;&amp; 0 = 0 anyway\n  }\n}\n\nvoid axe_sort(int a[11]) //drowning-axe sort function\n{\n    int place = 0;\n    for(int i=0; i&lt;12; i++)\n    {\n        for(int j=0; j&lt;12; j++)\n        {\n            if(a[j]&lt;a[j+1])\n                place=a[j];\n                a[j] = a[j+1];\n                a[j+1] = place;\n        }\n    }\n}\n\nint main(void)\n{\n    int array[11]; //declaring an integer array;\n    array_clean(&amp; array[11]); // giving user-filed array to a cleaner function\n    printf(\"Enter 12 random integers you'd like to sort: \");\n    for(int m=0; m&lt;12; m++)\n    {\n        scanf(\"%d\", &amp;array[m]); //letting user to fill an array\n    }\n    axe_sort(&amp;array[11]); //sorting an array via our axe_sort function\n    for(int m=0; m&lt;12; m++)\n    {\n        printf(\"%d\", array[m]); //printing the sorted array\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "go", "zlib"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1540422523, "post_id": 52979075, "comment_id": 92864655, "body": "Isn&#39;t the answer in the question you linked to ? i.e. no you can&#39;t guarentee that the compressed data is similar   - there&#39;s differences in the implementation details  (though  the data compressed in one of them can still be decompressed with the other)"}, {"owner": {"reputation": 15, "user_id": 3657578, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208129906823429/picture?type=large", "display_name": "dante2702", "link": "https://stackoverflow.com/users/3657578/dante2702"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1540422645, "post_id": 52979075, "comment_id": 92864696, "body": "the decompression in golang for something compressed in C doesn&#39;t seem to work, it exits saying it encountered an EOF"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1540424620, "post_id": 52979075, "comment_id": 92865195, "body": "the pigz command can&#39;t decompress your first array without an error, neither can gzip if I prepend a gzip header, there is something wrong with the output from your C program.  (Note, some programs will decompress it, e.g. <code>openssl zlib</code> or the <code>zlib-flate</code> command, but they have a rather loose handling of errors from zlib)."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1540441916, "post_id": 52979075, "comment_id": 92868917, "body": "This is a duplicate of <a href=\"https://stackoverflow.com/questions/52767214/compressed-output-differs-from-go-to-ruby-implementation\">Compressed output differs from Go to Ruby Implementation</a> - ruby uses the same zlib library you use in C."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3657578, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208129906823429/picture?type=large", "display_name": "dante2702", "link": "https://stackoverflow.com/users/3657578/dante2702"}, "edited": false, "score": 0, "creation_date": 1540505437, "post_id": 52979347, "comment_id": 92902213, "body": "that sounds reasonable, i&#39;ll check my C code for zlib compression"}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 3, "last_activity_date": 1540424312, "creation_date": 1540424312, "answer_id": 52979347, "question_id": 52979075, "link": "https://stackoverflow.com/questions/52979075/how-do-i-use-zlib-to-compress-in-c-and-uncompress-in-golang/52979347#52979347", "title": "how do I use zlib to compress in C and uncompress in golang", "body": "<p>Comparing compressed data tells you nothing. Different compressors, or different versions of the same compressor, or the same version used with different settings, can all give different compressed output for the same input. What actually matters for a lossless compressor is whether you can decompress to the original data.</p>\n\n<p>The problem with your first example is that it is not complete. (The second example is complete and correct.) The first example ends in the middle of a deflate block. There is an error in your usage of zlib, either in managing the resulting data or not properly requesting the completion of the compression.</p>\n"}], "owner": {"reputation": 15, "user_id": 3657578, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208129906823429/picture?type=large", "display_name": "dante2702", "link": "https://stackoverflow.com/users/3657578/dante2702"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 1, "accepted_answer_id": 52979347, "answer_count": 1, "score": 1, "last_activity_date": 1540424312, "creation_date": 1540422181, "question_id": 52979075, "link": "https://stackoverflow.com/questions/52979075/how-do-i-use-zlib-to-compress-in-c-and-uncompress-in-golang", "title": "how do I use zlib to compress in C and uncompress in golang", "body": "<p>So I have been trying to convert some data from C to be compressed and sent to a library which is in golang where it will be decompressed.\nonly issue is, they seem to be slightly different implementations from each other.</p>\n\n<p>What i did was to use \"zlib.h\" library from C to compress the string \"hello\" which resulted in bytes of </p>\n\n<pre><code>[120 156 203 72 205 201 201 103 32 5]\n</code></pre>\n\n<p>while in golang for the same string \"hello\" results in an array of </p>\n\n<pre><code>[120 156 202 72 205 201 201 7 4 0 0 255 255 6 44 2 21]\n</code></pre>\n\n<p>My question is if there is a way to make these outputs similar , what is it? or at the very least can a compressed data in C be decompressed in zlib?</p>\n\n<p>I've also looked at <a href=\"https://stackoverflow.com/questions/27852940/how-can-i-use-zlib-in-golang-to-cooperate-with-zlib-in-c\">How can I use zlib in golang to cooperate with zlib in c?</a> but i'm looking for something more specific like an example.</p>\n"}, {"tags": ["c", "memory", "overflow"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 5, "creation_date": 1540422391, "post_id": 52979073, "comment_id": 92864616, "body": "You are doing out-of-bounds access on the array <code>LA</code> which is <b>undefined behaviour</b>. Arrays don&#39;t <i>expand</i> automatically in C when you append more values."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 4, "creation_date": 1540422567, "post_id": 52979073, "comment_id": 92864669, "body": "Specifically, the first time you execute <code>LA[j+1] = LA[j];</code> <code>j</code> is <code>n</code>, so both sided are out of range."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540427832, "post_id": 52979073, "comment_id": 92865855, "body": "Undefined behaviour is uninteresting; there is no way to explain why it does work (it&#39;s an accident) or doesn&#39;t work (it&#39;s not surprising)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1540427875, "post_id": 52979073, "comment_id": 92865860, "body": "I&#39;m voting to close this question as off-topic because speculating about what undefined behaviour should or should not do is futile.  Anything is permissible."}], "owner": {"reputation": 33, "user_id": 8015395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a9736f1098ec354688aecdd52e4a2?s=128&d=identicon&r=PG&f=1", "display_name": "D Adalid", "link": "https://stackoverflow.com/users/8015395/d-adalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540422176, "creation_date": 1540422176, "question_id": 52979073, "link": "https://stackoverflow.com/questions/52979073/local-variable-is-modifying-the-value-of-an-unrelated-variable", "title": "Local variable is modifying the value of an unrelated variable", "body": "<p>I've been working with a little code to add a member into one array, when I try to make some changes to the code, I realized that the expected output was not correct (the modified array is not showing out). Debugging I saw that the declaration of the <code>int i</code> as a global variable instead of within the <code>for</code>loop do the expected output.</p>\n\n<p>However, I found the problem was related to the variable <code>n</code> for some reason is modify inside the <code>while (j &gt;= k)</code> when the variable <code>int i</code> is declared as the initialization of the for loop; but I can't figure it out why this is happening. If someone can help me to understand what and why is this happening, I'll be very thankful</p>\n\n<p>This is my code which does the expected output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int LA[] = {1,3,5,7,8};\n    int item = 10, k = 3, n = sizeof(LA)/sizeof(LA[0]);\n    int j = n;\n    int i;\n\n    printf(\"n  = %d\\n\",n);\n    printf(\"The original array elements are :\\n\");\n\n    for(i = 0; i&lt;n; i++) {\n        printf(\"LA[%d] = %d \\n\", i, LA[i]);\n    }\n    printf(\"n  = %d\\n\",n);\n    n = n + 1;\n    printf(\"n  = %d\\n\",n);\n    while( j &gt;= k) {\n        LA[j+1] = LA[j];\n        j = j - 1;\n    }\n    printf(\"n  = %d\\n\",n);\n    LA[k] = item;\n\n    printf(\"The array elements after insertion :\\n\");\n    printf(\"n = %d\\n\",n);\n    for(i = 0; i&lt;n; i++) {\n        printf(\"LA[%d] = %d \\n\", i, LA[i]);\n    }\n}\n</code></pre>\n\n<p>This is my expected output:</p>\n\n<pre><code>n  = 5\nThe original array elements are :\nLA[0] = 1\nLA[1] = 3\nLA[2] = 5\nLA[3] = 7\nLA[4] = 8\nn  = 5\nn  = 6\nn  = 6\nThe array elements after insertion :\nn = 6\nLA[0] = 1\nLA[1] = 3\nLA[2] = 5\nLA[3] = 10\nLA[4] = 7\nLA[5] = 8\n</code></pre>\n\n<p>This is my code which does NOT the expected output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int LA[] = {1,3,5,7,8};\n    int item = 10, k = 3, n = sizeof(LA)/sizeof(LA[0]);\n    int j = n;\n\n    printf(\"n  = %d\\n\",n);\n    printf(\"The original array elements are :\\n\");\n\n    for(int i = 0; i&lt;n; i++) {\n        printf(\"LA[%d] = %d \\n\", i, LA[i]);\n    }\n    printf(\"n  = %d\\n\",n);\n    n = n + 1;\n    printf(\"n  = %d\\n\",n);\n    while( j &gt;= k) {\n        LA[j+1] = LA[j];\n        j = j - 1;\n    }\n    printf(\"n  = %d\\n\",n);\n    LA[k] = item;\n\n    printf(\"The array elements after insertion :\\n\");\n    printf(\"n = %d\\n\",n);\n    for(int i = 0; i&lt;n; i++) {\n        printf(\"LA[%d] = %d \\n\", i, LA[i]);\n    }\n}\n</code></pre>\n\n<p>This is my unexpected output:</p>\n\n<pre><code>n  = 5\nThe original array elements are :\nLA[0] = 1\nLA[1] = 3\nLA[2] = 5\nLA[3] = 7\nLA[4] = 8\nn  = 5\nn  = 6\nn  = 0\nThe array elements after insertion :\nn = 0\n</code></pre>\n\n<p>Why the variable <code>n</code> is been modified depending on the declaration of <code>int i</code>?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1540422449, "post_id": 52978972, "comment_id": 92864633, "body": "@paulsm4 pointer b points to address a which only holds zero, pointer b is then assigned the value of a + 2, I&#39;m not sure why that updates a itself when nothing specifically was assigned to a."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1540422761, "post_id": 52978972, "comment_id": 92864724, "body": "@The_Senate <code>*b = ...</code> updates the value <code>b</code> is pointing to. <code>b = ...</code> updates the value of <code>b</code>."}, {"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 2, "creation_date": 1540422815, "post_id": 52978972, "comment_id": 92864737, "body": "The important thing to note is that <code>a + 2</code> is assigned to <code>*b</code> (not simply <code>b</code>), which is b dereferenced, or in other words, what b is pointing to, which in this case is a."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1540423712, "post_id": 52978972, "comment_id": 92864974, "body": "Pointer b is never assigned. It is initialized to the address of a, and <i>its referent</i> is then assigned the value a + 2."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540422798, "post_id": 52979117, "comment_id": 92864733, "body": "What would happen if I never assigned &amp;a to *b and just assigned a to *b?"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423004, "post_id": 52979117, "comment_id": 92864780, "body": "@The_Senate you didn&#39;t assign <code>&amp;a</code> to <code>*b</code>, you assigned it to <code>b</code>. But I know what you mean. What value did you assign to <code>b</code> in this hypothetical case?"}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423178, "post_id": 52979117, "comment_id": 92864823, "body": "a = 9999, so b would just equal 9999 in that case, because I didn&#39;t assign the address."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423212, "post_id": 52979117, "comment_id": 92864829, "body": "Can you post the two lines of code here? I&#39;m quite sure what you mean."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423261, "post_id": 52979117, "comment_id": 92864841, "body": "With what you just told me about pointers I&#39;m surprised that nobody uses He who fights monsters as a reference for newbies when it comes to pointers. My professor didn&#39;t even explain how pointers worked in this context, and this seems PRETTY important."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423342, "post_id": 52979117, "comment_id": 92864867, "body": "Okay, so if I write a =9999; and *b = a; then I do *b = a + 9999; and then do printf(&quot; a is : %d&quot;, a); Since I didn&#39;t assign the address a to b, but just the variable a, a will not update, right?"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423470, "post_id": 52979117, "comment_id": 92864897, "body": "in that case you&#39;ll either write <code>9999</code> to a random spot in memory, or cause a segfault, depending on what <code>b</code> is pointing to. I can&#39;t tell what b is pointing to from your code snippet though."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 1, "creation_date": 1540423541, "post_id": 52979117, "comment_id": 92864918, "body": "If By He Who Fights Monsters you mean the Nietzsche quote, I&#39;m not sure how that&#39;s relevant to pointers."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423621, "post_id": 52979117, "comment_id": 92864943, "body": "@The_Senate from your code sample, I can&#39;t see what b is pointing to, because you&#39;ve only shown me <code>*b = a</code>. <code>int *b = ...</code> is the same as <code>int *b; b = ...</code>. I need to see <code>b = ...</code> to tell you where b is pointing."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423669, "post_id": 52979117, "comment_id": 92864957, "body": "He who fights monsters runs the risk of becoming a monster himself, once you gaze into the abyss, the abyss gazes back. Think about how you make a = 90; assign *b = &amp;a; but when you do *b = a +2 and print the updated version of a, you get 92 instead. The abyss was the pointer, and a gazed into the abyss and became a pointer itself (not a pointer but the value assigned TO the pointer)"}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423763, "post_id": 52979117, "comment_id": 92864988, "body": "okay, b = a + 9999; but it doesn&#39;t work, the compiler won&#39;t take it."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540424146, "post_id": 52979117, "comment_id": 92865096, "body": "@The_Senate and what does that tell you?"}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540424338, "post_id": 52979117, "comment_id": 92865137, "body": "That you cannot just declare b once it has been established that it is a pointer."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540424403, "post_id": 52979117, "comment_id": 92865155, "body": "What do you mean declare b? you seem to be confused on C terminology. <code>int *b</code> is a declaration. <code>b = a + 9999</code> is an assignment."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540424893, "post_id": 52979117, "comment_id": 92865255, "body": "I&#39;m not confused on any terminology, I know what an assignment and a declaration are. . . .I have just been studying all day and words tend to slip. . . ."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540424935, "post_id": 52979117, "comment_id": 92865265, "body": "It tells me you can&#39;t just assign a + 9999 to b when b has to be typecasted as a pointer, better?"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540425293, "post_id": 52979117, "comment_id": 92865331, "body": "@The_Senate No worries, I&#39;m tired after studying all day too.  I think what you mean is you cannot assign <code>a + 9999</code> to <code>b</code> because <code>b</code> has been declared as a pointer."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540425426, "post_id": 52979117, "comment_id": 92865362, "body": "If b was declared as a simple then it shouldn&#39;t matter if I assigned a +9999 to b, what matters is that I&#39;m using b without its proper typecast which was pointer, and since pointers are different from ints, floats, doubles, chars, or other variables, I can&#39;t just use b without its pointer."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540425730, "post_id": 52979117, "comment_id": 92865434, "body": "@The_Senate what do you mean by &quot;a simple&quot;? Also, what do you mean by &quot;b&#39;s pointer&quot;? b <i>is</i> a pointer, it doesn&#39;t <i>have</i> a pointer."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540464269, "post_id": 52979117, "comment_id": 92879979, "body": "Dude, if b is declared as a double can you just use b again without having double next to it, this isn&#39;t the case for pointers, pointers remain next to the variables they are declared next to in order to maintain pointer status, you can&#39;t reduce b from pointer status, without *b b is just b, the compiler knows this."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540496920, "post_id": 52979117, "comment_id": 92898928, "body": "Pointer to int is a type, just like double. <code>int *b;</code> declares b as a variable with type pointer to integer. I can then use <code>b = ...</code> to make b point to a different integer, or <code>*b = ...</code> to update the value of the integer b is pointing to."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540497024, "post_id": 52979117, "comment_id": 92898978, "body": "I&#39;m not sure what you mean by &quot;pointers remain next to the variable variables they are declared next to in order to maintain pointer status&quot;, or what you think the compiler knows."}], "tags": [], "owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "is_accepted": true, "score": 1, "last_activity_date": 1540422439, "creation_date": 1540422439, "answer_id": 52979117, "question_id": 52978972, "link": "https://stackoverflow.com/questions/52978972/when-a-pointer-is-assigned-an-address-does-the-assigning-of-the-address-update/52979117#52979117", "title": "When a pointer is assigned an address, does the assigning of the address UPDATE the address itself?", "body": "<p><code>b</code> is storing the address of <code>a</code>. So when you make changes to <code>*b</code>, you're really making changes to <code>a</code>.</p>\n\n<p>When you update the value <code>b</code> points to (<code>*b = a + 2</code>), you update <code>a</code> to <code>a + 2</code>, which is 2 in this case since <code>a</code> was 0 before.</p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540422534, "post_id": 52979119, "comment_id": 92864657, "body": "Another example as to why reputation doesn&#39;t mean jack. Thank you, Eric."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 1, "creation_date": 1540422559, "post_id": 52979119, "comment_id": 92864664, "body": "If you do this you&#39;re going to set <code>b</code> to <code>2</code>. When you dereference <code>b</code> you&#39;re probably gonna segfault."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540422719, "post_id": 52979119, "comment_id": 92864716, "body": "segfault? I&#39;m not familiar with that concept, elaborate?"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540422906, "post_id": 52979119, "comment_id": 92864758, "body": "@The_Senate When you try to deference an invalid pointer, you get what&#39;s called a segfault. Basically it just crashes your whole program. Try running  <code>int main(void) { int *b = NULL; int a = *b; }</code> for an example of a program that will segfault."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1540423121, "post_id": 52979119, "comment_id": 92864805, "body": "That sounds painful. Yeesh."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1540843798, "post_id": 52979119, "comment_id": 93005690, "body": "If you do <code>b = a + 2;</code> you&#39;ll have an invalid program."}], "tags": [], "owner": {"reputation": 52, "user_id": 10554799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UZKkwGHaatc/AAAAAAAAAAI/AAAAAAAAAI0/kfF9vZGnGwA/photo.jpg?sz=128", "display_name": "Eric Groppe", "link": "https://stackoverflow.com/users/10554799/eric-groppe"}, "is_accepted": false, "score": 1, "last_activity_date": 1540422450, "creation_date": 1540422450, "answer_id": 52979119, "question_id": 52978972, "link": "https://stackoverflow.com/questions/52978972/when-a-pointer-is-assigned-an-address-does-the-assigning-of-the-address-update/52979119#52979119", "title": "When a pointer is assigned an address, does the assigning of the address UPDATE the address itself?", "body": "<p>The concept of the pointer itself is only have the address of a variable. All the content changes you do to a pointer, the effects will be made in the variable that the pointer is pointing to. If you made instead:</p>\n\n<pre><code>b = a + 2;  \n</code></pre>\n\n<p>The variable a would still remain with the same content. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7895715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ba242dbb24d2f6f4521196af4d590f?s=128&d=identicon&r=PG", "display_name": "Sanjay Tripathi", "link": "https://stackoverflow.com/users/7895715/sanjay-tripathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1540464760, "creation_date": 1540464760, "answer_id": 52987532, "question_id": 52978972, "link": "https://stackoverflow.com/questions/52978972/when-a-pointer-is-assigned-an-address-does-the-assigning-of-the-address-update/52987532#52987532", "title": "When a pointer is assigned an address, does the assigning of the address UPDATE the address itself?", "body": "<p>@The_Senate :</p>\n\n<p>1) <strong>int *b=&a;</strong>==>This implies that b is a pointer to integer that has the address of var a </p>\n\n<p>2)  <strong>*b = a + 2;</strong>==> This implies that you are modifying the value of address at b which is a. So by doing this you are actually modifying the  value of a.</p>\n\n<p>Hope this will answer your question.</p>\n"}], "owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 52979117, "answer_count": 3, "score": -3, "last_activity_date": 1540994180, "creation_date": 1540421477, "last_edit_date": 1540994180, "question_id": 52978972, "link": "https://stackoverflow.com/questions/52978972/when-a-pointer-is-assigned-an-address-does-the-assigning-of-the-address-update", "title": "When a pointer is assigned an address, does the assigning of the address UPDATE the address itself?", "body": "<pre><code>#include &lt;stdio.h&gt; \nmain() \n{   \n   int a=0;\n   int *b=&amp;a;  \n   *b = a + 2;  \n   printf(\"%d\", a); \n} \n</code></pre>\n\n<p><strong>Why am I asking this question? It's been asked 1000 times before, right?</strong> </p>\n\n<p>Not exactly. . . .See, I've checked the questions of this nature asked on this site so far. They answer SOME questions about pointers, but they don't answer the question of what a pointer does to a value that is assigned to it. </p>\n\n<p><strong>What DOES a pointer do to the value assigned to it?</strong></p>\n\n<p>So, I have this code in C that has a simple function, then the b pointer is assigned the address of a. The b pointer is updated with the value a+2, oddly enough after this a also updates by 2. </p>\n\n<p>I was under the assumption that pointers were variables like any other, yet assigning a variable seems to change not only the pointer, but the variable assigned TO it as well. </p>\n\n<p><strong><em>I'm a rookie and this is not typical to what I have learned so far:</em></strong></p>\n\n<p>Why is me being a rookie relevant?</p>\n\n<p><strong>Well, pointers are VERY hard for new programmers to grasp usually, I believe that this question will bring value to newbies on how pointers work if they do not want to be distracted by google search or cannot pay 50+ dollars for a book.</strong></p>\n\n<p><strong><em>What I THINK the answer is:</em></strong> </p>\n\n<p>I think that since pointers are different, that in addition to being assigned the variable's value, it also gives the value BACK and updates the value it is being given as well. I do not know why, and I cannot prove why without proper evidence. </p>\n"}, {"tags": ["c", "performance", "processing-efficiency"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1540421416, "post_id": 52978935, "comment_id": 92864344, "body": "Compilers have at least three different ways to implement <code>switch</code> statements and will pick the best one based on the range and density of the numbers used in the <code>case</code> statements. So worst case, it&#39;s the same as multiple <code>if</code> statements, but usually performs better."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1540421535, "post_id": 52978935, "comment_id": 92864375, "body": "Usually either into the equivalent of nested ifs or into a jump table whatever looks better to the compiler. It&#39;s pretty much certain to be quite a bit faster than a trivial function call (much faster compared to a relatively expensive fn call such as a call to printf) If you&#39;re worried about it benchmark it. A bit of well-crafted benchmarking code will give you much better performance-related answers than human speculators on the internet will."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 2, "creation_date": 1540421575, "post_id": 52978935, "comment_id": 92864387, "body": "An effective optimizing compiler would be able to treat these pieces of code just the same, IIANM. (Of course assuming you haven&#39;t overloaded <code>operator==</code> or other such trickery)."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1540421883, "post_id": 52978935, "comment_id": 92864482, "body": "@einpoklum That&#39;s a safe assumption to make because C doesn&#39;t have overloading :)"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1540422566, "post_id": 52978935, "comment_id": 92864667, "body": "@P.P.: Sorry, I&#39;m too used to C++ nitpickers telling you &quot;Oh, but what if I&#39;ve overloaded <code>operator,</code> ?&quot; Or &quot;But what if my <code>operator==</code> has side-effects?`&quot;  - I just instinctively deflect..."}, {"owner": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1540461060, "post_id": 52978935, "comment_id": 92878021, "body": "Trust me, if you were working on a project where the bottleneck was a &quot;pick a branch&quot;, you&#39;d either already know which one is faster or your project is complete mess and should be destroyed physically with the whole hard drive itself. As for @einpoklum, maybe you should stop talking to skids, because the difference is negligible whether you overloaded the operator or not? If your project is so perfect that the only way you can optimize it is to remove operator overload and rewrite if ladder to switch statement,  then congratulations, your company has a perfect programmer team."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 0, "creation_date": 1540468510, "post_id": 52978935, "comment_id": 92882393, "body": "@PurpleIce: That&#39;s also quite true. It sounds like this is premature optimization - which, as <a href=\"https://en.wikiquote.org/wiki/Donald_Knuth\" rel=\"nofollow noreferrer\">Donald Knuth tells us, is the root of all evil</a>."}, {"owner": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 0, "creation_date": 1540475447, "post_id": 52978935, "comment_id": 92887168, "body": "This is worse than premature optimization, it&#39;s opmization where&#39;s nothing to optimize. This reminds me of things like &quot;is it better to use <code>i++</code> or <code>++i</code>&quot;, &quot;should I bitshift to multiply or just multiply?&quot;, &quot;should I divide by <code>2</code> or should I multiply by <code>0.5</code>&quot; and the likes... By the way, correct answer is &quot;whichever one is more readable, use up to date compiler for your platform and use <code>-O1</code> or greater&quot;."}], "owner": {"reputation": 361, "user_id": 10411012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9cc323ac690a548a3c28054b7b54b9?s=128&d=identicon&r=PG&f=1", "display_name": "wispi", "link": "https://stackoverflow.com/users/10411012/wispi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "closed_date": 1540421323, "answer_count": 0, "score": 0, "last_activity_date": 1540421223, "creation_date": 1540421223, "question_id": 52978935, "link": "https://stackoverflow.com/questions/52978935/cost-of-switch-in-c", "closed_reason": "Duplicate", "title": "Cost of switch() in C", "body": "<p>Is using a switch() statement more or less efficient then several if() statements in C? Does switch() compile to multiple if() statements? For example:</p>\n\n<pre><code>int a = 5;\nswitch(a) {\n    case 5:\n        printf(\"Number 5\\n\");\n        break;\n    case 3:\n        printf(\"Number 3\\n\");\n        break;\n    default:\n        printf(\"Other\\n\");\n        break;\n}\n</code></pre>\n\n<p>versus:</p>\n\n<pre><code>int a = 5;\nif (a == 5) {\n    printf(\"Number 5\\n\");\n}\nif (a == 3) {\n    printf(\"Number 3\\n\");\n}\nif (a != 5 &amp;&amp; a != 3) {\n    printf(\"Other\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "powershell", "batch-file", "cmd", "scripting"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1540420147, "post_id": 52978701, "comment_id": 92863939, "body": "Hi there.  I notice this question is tagged with the C language.  Are you looking for a solution in C?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "edited": false, "score": 0, "creation_date": 1540420566, "post_id": 52978701, "comment_id": 92864066, "body": "That sounds ambiguous to me, you want to copy files from a list and <b>then move</b> them? To a directory build from part of the file name/another list? If the 1st list is in fact something like a dir output, it would be much easier to process the dir with a <code>for &#47;f</code> and another one parsing the part bewtween the underscore(s) and the dot for a batch solution. Or similarly for powershell."}, {"owner": {"reputation": 11858, "user_id": 1417694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adedbee0609fe9349993fedfd446acdc?s=128&d=identicon&r=PG", "display_name": "Squashman", "link": "https://stackoverflow.com/users/1417694/squashman"}, "edited": false, "score": 1, "creation_date": 1540420782, "post_id": 52978701, "comment_id": 92864134, "body": "No point in having a list of directories.  If the folder name is part of the filename, the filename can be parsed to get the directory name."}, {"owner": {"reputation": 3388, "user_id": 5552766, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10154591217663849/picture?type=large", "display_name": "Drew", "link": "https://stackoverflow.com/users/5552766/drew"}, "edited": false, "score": 0, "creation_date": 1540423509, "post_id": 52978701, "comment_id": 92864911, "body": "The hardest part would be the regex, the rest you could do with PowerShell fairly easily with a <code>Get-Content</code> and a <code>Foreach</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 33825, "user_id": 9898643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9f303fda4c69e9c9ce6b84a6268402?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/9898643/theo"}, "edited": false, "score": 0, "creation_date": 1540462043, "post_id": 52979823, "comment_id": 92878696, "body": "I would suggest adding <code>if (!(Test-Path -Path $dir -PathType Container)) { New-Item -ItemType Directory -Force -Path $dir }</code> above the <code>Move-Item</code> comand to ensure the output directory is created if it does not exist."}], "tags": [], "owner": {"reputation": 179, "user_id": 8544276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6a75.png?s=128&g=1", "display_name": "Ed Callahan", "link": "https://stackoverflow.com/users/8544276/ed-callahan"}, "is_accepted": false, "score": 0, "last_activity_date": 1540428659, "creation_date": 1540428659, "answer_id": 52979823, "question_id": 52978701, "link": "https://stackoverflow.com/questions/52978701/how-do-i-copy-files-based-on-a-list-into-their-corresponding-folders-which-are/52979823#52979823", "title": "How do I copy files based on a list, into their corresponding folders which are also created based on a list?", "body": "<p>In PowerShell, Move-Item will move the files. Then you just need regular expressions to determine the path and new file name, similar to:</p>\n\n<pre><code>$txt = \"file3_AB12_autoc.pdf\nfile3_AB12.jpeg\nfile1_AB12.png\nfile3_CD34_autoc.pdf\nfile3_CD34.jpeg\nfile1_CD34.png\nbadfilename.txt\"\n\nforeach ($orig_file in $txt -split '\\r\\n') {\n\n    if ( $orig_file -match '^([^_]*)_([^_.]*)(.*)\\.(.*)$' ) {\n        $dir = $matches[2]\n        $new_file = '{0}{1}.{2}' -f $matches[1], $matches[3], $matches[4]\n\n        'Moving {0} to {1}\\{2}' -f $orig_file, $dir, $new_file\n\n        Move-Item -Path $orig_file -Destination ('{0}\\{1}' -f $dir, $new_file)\n\n    }\n    else {\n        '{0} not processed' -f $orig_file        \n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10554596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/797c211bab52d92b7bc34b3ddcbfc2ae?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzeb Malik", "link": "https://stackoverflow.com/users/10554596/shahzeb-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 937, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540428659, "creation_date": 1540419685, "question_id": 52978701, "link": "https://stackoverflow.com/questions/52978701/how-do-i-copy-files-based-on-a-list-into-their-corresponding-folders-which-are", "title": "How do I copy files based on a list, into their corresponding folders which are also created based on a list?", "body": "<p>So, I'm completely new to scripting and batch files. </p>\n\n<p>I'm looking to copy files based on a list of the files to copy. I have a text file for the list of files to copy and I want the script to copy all these files line by line from a source directory.</p>\n\n<p>For example I have over a 1000 files to copy, and there are 3 files for each folder I want to create and put them into. Below is an example of how the files names are formatted:</p>\n\n<pre><code>file3_AB12_autoc.pdf\nfile3_AB12.jpeg\nfile1_AB12.png\n\nfile3_CD34_autoc.pdf\nfile3_CD34.jpeg\nfile1_CD34.png\n\n...etc...\n</code></pre>\n\n<p>Once these are copied, I want to move them into folders that I created using a text file and the command: </p>\n\n<pre><code>FOR /F %i in (folders_list.txt) do md %i\n</code></pre>\n\n<p>Now, with my script, I want to move the files it copies into their corresponding folders. Basically if the file name contains the folder name, then they should move into the folder. For example: </p>\n\n<pre><code>C:\\AB12                          THIS FOLDER SHOULD HAVE ALL THE FOLLOWING FILES\n     file3_AB12.jpeg\n     file3_AB12_autoc.pdf\n     file1_AB12.png\n\nC:\\CD34                          THIS FOLDER SHOULD HAVE ALL THE FOLLOWING FILES\n     file3_CD34.jpeg\n     file3_CD34_autoc.pdf\n     file1_CD34.png\n</code></pre>\n\n<hr>\n\n<p>I have looked up other similar questions but nothing seems to work for what I want to do. I believe the links below are useful but I do not know how to put them together.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/52956840/how-do-i-copy-files-into-folders-based-on-the-file-containing-the-folder-name\">How do I copy files into folders based on the file containing the folder name?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/51906622/copy-files-based-on-a-list-stored-in-txt-file\">Copy files based on a list stored in .txt file</a></p>\n"}, {"tags": ["c", "pipe", "exec"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1540420647, "post_id": 52978677, "comment_id": 92864088, "body": "You&#39;ve got an extra <code>waitpid</code> that seems unfortunate.  If <code>ls</code> fills the pipe and blocks on a write, the waitpid will never return."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1540420183, "creation_date": 1540420183, "answer_id": 52978775, "question_id": 52978677, "link": "https://stackoverflow.com/questions/52978677/process-gets-stuck-when-im-trying-to-recreate-pipe-forking-a-new-process/52978775#52978775", "title": "Process gets stuck when I&#39;m trying to recreate pipe/forking a new process", "body": "<p>You need to close all the pipe FDs in the parent process as well. Otherwise, <code>cat</code> will never read EOF from its input pipe.</p>\n\n<p>Add:</p>\n\n<pre><code>close(pipefd[0]);\nclose(pipefd[1]);\n</code></pre>\n\n<p>before:</p>\n\n<pre><code>waitpid(pid1, &amp;stat_loc, WUNTRACED);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9330101, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jDaAo0hvqsU/AAAAAAAAAAI/AAAAAAAAAwc/o0En4BPyXfY/photo.jpg?sz=128", "display_name": "Fu Hong", "link": "https://stackoverflow.com/users/9330101/fu-hong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 52978775, "answer_count": 1, "score": 1, "last_activity_date": 1540420183, "creation_date": 1540419525, "question_id": 52978677, "link": "https://stackoverflow.com/questions/52978677/process-gets-stuck-when-im-trying-to-recreate-pipe-forking-a-new-process", "title": "Process gets stuck when I&#39;m trying to recreate pipe/forking a new process", "body": "<p>I'm trying to recreate pipe for a homemade shell and I can make the pipe work in this case:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main()\n{\n    int stat_loc;\n    int pipefd[2];\n    pipe(pipefd);\n\n    pid_t pid = fork();\n    if(pid != 0)\n    {\n        waitpid(pid, &amp;stat_loc, WUNTRACED);\n        close(pipefd[1]);\n        dup2(pipefd[0], 0);\n        close(pipefd[0]);\n        execlp(\"cat\", \"cat\", \"-e\", NULL);\n    }\n    else\n    {\n        close(pipefd[0]);\n        dup2(pipefd[1], 1);\n        close(pipefd[1]);\n        execlp(\"ls\", \"ls\", NULL);\n    }\n    //do something else\n    printf(\"out to parent\");\n    return 0;\n}\n</code></pre>\n\n<p>I would use the functional one above but I need to keep the parent process working.</p>\n\n<p>But when I add one more fork, and the process gets stuck in</p>\n\n<pre><code>execlp(\"cat\", \"cat\", \"-e\", NULL);\n</code></pre>\n\n<p>This is the full attempt that gets stuck:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main()\n{\n    int stat_loc;\n    int pipefd[2];\n    pipe(pipefd);\n\n    pid_t pid1 = fork();\n    if (pid1 == 0)\n    {\n        pid_t pid = fork();\n        if(pid != 0)\n        {\n            waitpid(pid, &amp;stat_loc, WUNTRACED);\n            close(pipefd[1]);\n            dup2(pipefd[0], 0);\n            close(pipefd[0]);\n            execlp(\"cat\", \"cat\", \"-e\", NULL);\n        }\n        else\n        {\n            close(pipefd[0]);\n            dup2(pipefd[1], 1);\n            close(pipefd[1]);\n            execlp(\"ls\", \"ls\", NULL);\n        }\n    }\n    waitpid(pid1, &amp;stat_loc, WUNTRACED);\n    //do something else\n    printf(\"out to parent\");\n    return 0;\n}\n</code></pre>\n\n<p>Thanks for the help!!</p>\n"}, {"tags": ["c", "linux", "timer", "linux-kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 7954, "user_id": 6899896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxVjz.jpg?s=128&g=1", "display_name": "M.Ricciuti", "link": "https://stackoverflow.com/users/6899896/m-ricciuti"}, "edited": false, "score": 0, "creation_date": 1540420266, "post_id": 52978660, "comment_id": 92863968, "body": "please provide an extract of your code which is not working."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10501054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0adc14f59c37b19fb2d43e00d637473?s=128&d=identicon&r=PG&f=1", "display_name": "test", "link": "https://stackoverflow.com/users/10501054/test"}, "edited": false, "score": 0, "creation_date": 1540420895, "post_id": 52978896, "comment_id": 92864176, "body": "My Linux version of timer.h file, that setup_timer is deprecated."}, {"owner": {"reputation": 11, "user_id": 10501054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0adc14f59c37b19fb2d43e00d637473?s=128&d=identicon&r=PG&f=1", "display_name": "test", "link": "https://stackoverflow.com/users/10501054/test"}, "edited": false, "score": 0, "creation_date": 1540421522, "post_id": 52978896, "comment_id": 92864371, "body": "That fixed the issue."}], "tags": [], "owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "is_accepted": false, "score": 2, "last_activity_date": 1540421334, "last_edit_date": 1540421334, "creation_date": 1540420861, "answer_id": 52978896, "question_id": 52978660, "link": "https://stackoverflow.com/questions/52978660/linux-timer-setup-function/52978896#52978896", "title": "Linux timer_setup function", "body": "<p>I think, you want to use <code>setup_timer()</code>, not <code>timer_setup()</code> which has a prototype of</p>\n\n<pre><code>static inline void timer_setup(struct timer_list *timer,\n                               void (*callback)(struct timer_list *),\n                               unsigned int flags)\n</code></pre>\n\n<p>or change your timer function to</p>\n\n<pre><code>void my_timer_callback(struct timer_list  *timer)\n{\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10501054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0adc14f59c37b19fb2d43e00d637473?s=128&d=identicon&r=PG&f=1", "display_name": "test", "link": "https://stackoverflow.com/users/10501054/test"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2961, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540441293, "creation_date": 1540419404, "last_edit_date": 1540441293, "question_id": 52978660, "link": "https://stackoverflow.com/questions/52978660/linux-timer-setup-function", "title": "Linux timer_setup function", "body": "<p>When I try to call the timer_setup() function I get the following error</p>\n\n<pre><code> error: passing argument 2 of \u2018init_timer_key\u2019 from incompatible pointer type   [-Werror=incompatible-pointer-types]\n  init_timer_key((_timer), (_fn), (_flags), NULL, NULL)\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>/* ... */\n#include &lt;linux/timer.h&gt;\n\nstatic struct timer_list my_timer;\n\nvoid my_timer_callback(unsigned long data)\n{\n    pr_info(\"%s called (%ld).\\n\", __FUNCTION__, jiffies);\n}\n\nstatic int __init my_init(void)\n{\n    timer_setup(&amp;my_timer, my_timer_callback, 0);\n    return 0;\n}\n\nstatic void my_exit(void)\n{\n    return;\n}\n\nmodule_init(my_init);\nmodule_exit(my_exit);\n/* ... */\n</code></pre>\n\n<p>How can I fix the error?</p>\n"}, {"tags": ["c", "keil"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1540419780, "post_id": 52978649, "comment_id": 92863842, "body": "The initializer must be a <i>constant expression</i> which is a stronger condition than just a variable with <code>const</code> qualification.   In fact a variable is never a constant expression."}, {"owner": {"reputation": 53, "user_id": 7612569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c6a60f62b4177c9a881ac85b02acb3?s=128&d=identicon&r=PG&f=1", "display_name": "ched", "link": "https://stackoverflow.com/users/7612569/ched"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1540421658, "post_id": 52978649, "comment_id": 92864411, "body": "can you give me an example of what you mean for clarity @M.M I could do something like this <code>#define profile1 (myProfile){.....} </code> what other options do I have?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540428109, "post_id": 52978649, "comment_id": 92865905, "body": "Be wary of using <code>const</code> in a typedef (you&#39;re braver than I am using it there).  You could use <code>myProfile *profiles[1] = &amp;profile1;</code>, initializing the pointer in the array with the constant address the other profile.  This might get you a result you can live with; you might add <code>const</code> qualifiers to the pointers."}, {"owner": {"reputation": 53, "user_id": 7612569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c6a60f62b4177c9a881ac85b02acb3?s=128&d=identicon&r=PG&f=1", "display_name": "ched", "link": "https://stackoverflow.com/users/7612569/ched"}, "edited": false, "score": 0, "creation_date": 1540538429, "post_id": 52978649, "comment_id": 92910876, "body": "Thank you Jonathan, you are right. But in this case, the profiles are meant to be constant anyway."}], "answers": [{"tags": [], "owner": {"reputation": 659, "user_id": 5812729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b314a693cd31c875b840d62ef3cb31cd?s=128&d=identicon&r=PG&f=1", "display_name": "DRz", "link": "https://stackoverflow.com/users/5812729/drz"}, "is_accepted": true, "score": 0, "last_activity_date": 1540424928, "last_edit_date": 1540424928, "creation_date": 1540424388, "answer_id": 52979353, "question_id": 52978649, "link": "https://stackoverflow.com/questions/52978649/c-ignoring-const-qualifier-infront-of-structure/52979353#52979353", "title": "C ignoring const qualifier infront of structure", "body": "<p>The error occurs because you try to initialize the array with a variable, which is not a constant (= a fixed value known at compile time), as M.M mentioned in the comments.</p>\n\n<p>If you want to create a default value for your structure, you could do as shown <a href=\"https://stackoverflow.com/a/13716957\">here</a>.</p>\n\n<p>Building on that answer, you would initialize a table with:</p>\n\n<pre><code>MyStruct instances[2] = {MyStruct_default, MyStruct_default};\n</code></pre>\n\n<p>Which is a shortcut for:</p>\n\n<pre><code>MyStruct instances[2] = { {.id = 3}, {.id = 3} };\n</code></pre>\n\n<p>Note that for a structure composed of multiple members, you can leave some blank and they should be set to 0 most of the time.</p>\n"}], "owner": {"reputation": 53, "user_id": 7612569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c6a60f62b4177c9a881ac85b02acb3?s=128&d=identicon&r=PG&f=1", "display_name": "ched", "link": "https://stackoverflow.com/users/7612569/ched"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52979353, "answer_count": 1, "score": 0, "last_activity_date": 1540424928, "creation_date": 1540419326, "last_edit_date": 1540419378, "question_id": 52978649, "link": "https://stackoverflow.com/questions/52978649/c-ignoring-const-qualifier-infront-of-structure", "title": "C ignoring const qualifier infront of structure", "body": "<p>I am trying to create an array of const structs, but i Keep getting</p>\n\n<pre><code>error initializer element is not a compile time constant\n</code></pre>\n\n<p>I am using keil IDE.\nthis is strange because my struct is a const, here is an example:</p>\n\n<pre><code>typedef const struct{\n     CRGB color;  // CRGB is another struct\n     void (*myfunc)(int);\n}myProfile;\n\n\nmyProfile profile1 = { ....... }; // initialized struct\n\nmyProfile profiles[1] = { profile1 }; // error occurs here\n</code></pre>\n\n<p>even if I use\n<code>const myProfile profile1 = { ..... };\n</code>\nto initialize the struct, i still get the same errors.</p>\n\n<p>I can find my way around it but I really want to understand what is going on. Thanks.</p>\n"}, {"tags": ["c", "eclipse", "debugging", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7164287, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gVV2T-MDkpU/AAAAAAAAAAI/AAAAAAAAADU/iSAcgzFaEOQ/photo.jpg?sz=128", "display_name": "Caleb lee", "link": "https://stackoverflow.com/users/7164287/caleb-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1540435123, "last_edit_date": 1540435123, "creation_date": 1540419367, "answer_id": 52978654, "question_id": 52978613, "link": "https://stackoverflow.com/questions/52978613/debugging-in-eclipse-for-c-program-cant-find-command-line-argument-file/52978654#52978654", "title": "Debugging in Eclipse for C program can&#39;t find command line argument file", "body": "<p>Found the error, I used export SHELL=/bin/sh in a separate directory and I fixed this by going to the home directory and executing the same command</p>\n"}], "owner": {"reputation": 43, "user_id": 7164287, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gVV2T-MDkpU/AAAAAAAAAAI/AAAAAAAAADU/iSAcgzFaEOQ/photo.jpg?sz=128", "display_name": "Caleb lee", "link": "https://stackoverflow.com/users/7164287/caleb-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540435123, "creation_date": 1540419178, "question_id": 52978613, "link": "https://stackoverflow.com/questions/52978613/debugging-in-eclipse-for-c-program-cant-find-command-line-argument-file", "title": "Debugging in Eclipse for C program can&#39;t find command line argument file", "body": "<p>So I'm using Eclipse to debug a program of mine, and I set everything up, and under the arguments tab in the Debug Configuration I have an .in file used in my program. Whenever I try and run \"Debug\" I get the following error</p>\n\n<p>&amp;\"Cannot exec bin/bash -c exec /nfshome/calzy8/eclipse-workspace/Lab4/Debug/Lab4 'testPipelineDataHazards1.in'.\\n\"</p>\n\n<p>&amp;\"Error: No such file or directory\\n\"</p>\n\n<p>I'm using the gdb debugger and the program runs fine whenever I click Run but whenever I try \"Debug\" it doesn't work</p>\n\n<p>Can anyone help me out with this? I've read this post as well and it didn't help \n<a href=\"https://stackoverflow.com/questions/42273489/eclipse-debug-error-no-such-file-or-directory-n\">Eclipse Debug Error: No such file or directory\\n</a></p>\n"}, {"tags": ["c", "data-structures", "difference", "recursive-datastructures", "set-difference"], "owner": {"reputation": 73, "user_id": 7276564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a460e716c1ec1064566b5eac96dfc3fc?s=128&d=identicon&r=PG&f=1", "display_name": "PSP CODER", "link": "https://stackoverflow.com/users/7276564/psp-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540420322, "creation_date": 1540418837, "last_edit_date": 1540420322, "question_id": 52978556, "link": "https://stackoverflow.com/questions/52978556/how-to-itteratively-or-recursively-diff-a-structure-such-as-a-c-c-structure-as", "title": "how to itteratively or recursively diff a structure such as a C/C++ structure as it changes", "body": "<p>this might seem like an overly complex or overly simple question,</p>\n\n<p>but how would one go about diffing a C or C++ structure or similar, looking for values that either change or do not change, taking into account the existance of sub structures and pointers to sub structures such as <code>struct b substruct[5];</code></p>\n\n<p>basically mimicking the classic \"search memory addresses x to y and log each address according to a condition then repeat\" approach of searching for reliable/unreliable addresses for values, except applied to a structure instead</p>\n\n<p>the structure can be obtained (usually) via any good debugger such as <code>gdb</code>'s <code>p</code> option or the python api in <code>gdb</code></p>\n\n<p>or <code>radare2</code> but i have no idea how to do that with a binary file's struct</p>\n\n<p>the closest i have is</p>\n\n<pre><code>[0x000051c0]&gt; \"td struct foo {char* a; int b;}\"\n[0x000051c0]&gt; tp foo\n</code></pre>\n\n<p>but that does not print the files internal struct itself like <code>gdb</code>'s <code>p</code>, only the one declared in <code>radare2</code></p>\n\n<p>or via the source code itself</p>\n\n<p>note i can obtain the structure via gdb (with some bugs such as direct and indirect recursion loops due to something such as this):</p>\n\n<p>NOTE: all following structures are generated via the gdb python api unless stated otherwise</p>\n\n<p>an obvious example:</p>\n\n<pre><code>struct a {\n    struct a b;\n} a; // not generated\na.b = a; // a.b now loops back to self resulting in a direct recursion loop, a.b == a thus a.b.a.b.a.b.a.b == a\n</code></pre>\n\n<p>and a more complex example:</p>\n\n<pre><code>struct a{\n    int val1;\n    int val2;\n    struct a * next;\n    char * string\n}; // not generated\nstruct a * linked_list;\nlinked_list = malloc(1*sizeof(struct a));\n*linked_list = (struct a) {20,20,NULL,\"HI\"};\n(*linked_list).next = malloc(1*sizeof(struct a));\n*(*linked_list).next = (struct a) {5,5,NULL,\"HI\"};\n(*(*linked_list).next).next = malloc(1*sizeof(struct a));\n*(*(*linked_list).next).next = (struct a) {5,5,NULL,\"HI\"};\n</code></pre>\n\n<p>which would produce</p>\n\n<pre><code>struct a {\n    int val1 = 20;\n    int val2 = 20;\n    struct a {\n        int val1 = 5;\n        int val2 = 5;\n        struct a {\n            int val1 = 5;\n            int val2 = 5;\n            struct a * next = NULL;\n            char * string = 0x555555554b94 \"HI\";\n        }  next;\n        char * string = 0x555555554b94 \"HI\";\n    } * next;\n    char * string = 0x555555554b94 \"HI\";\n} * linked_list;\n</code></pre>\n\n<p>however if we change</p>\n\n<pre><code>*(*(*linked_list).next).next = (struct a) {5,5,NULL,\"HI\"};\n</code></pre>\n\n<p>to</p>\n\n<pre><code>*(*(*linked_list).next).next = (struct a) {5,5,linked_list,\"HI\"};\n</code></pre>\n\n<p>we then get</p>\n\n<pre><code>struct a {\n    int val1 = 20;\n    int val2 = 20;\n    struct a {\n        int val1 = 5;\n        int val2 = 5;\n        struct a {\n            int val1 = 5;\n            int val2 = 5;\n            struct a {\n                /* loops back to struct a { ... } * linked_list; thus entering indirect infinite recursion */\n            } * next // not generated as script does not handle recursion yet\n            char * string = 0x555555554b94 \"HI\";\n        }  next;\n        char * string = 0x555555554b94 \"HI\";\n    } * next;\n    char * string = 0x555555554b94 \"HI\";\n} * linked_list;\n</code></pre>\n\n<p>but this is not really about preventing recursion though it helps to know where and how it can occur in a structure or similar so the diff does not enter a infinite recursion itself depending on how it will work whether by tracing, analysis or other means</p>\n\n<p>in theory a diff'd structure should look something like this</p>\n\n<p>considering the following structure changes of <code>struct a</code> declared in the complex example:</p>\n\n<pre><code>struct a {\n  int val1 = 5;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} A;\nstruct a {\n  int val1 = 20;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} * A_PTR_ONE_STAR;\nstruct a {\n  int val1 = 21;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} ** A_PTR_TWO_STAR;\nstruct a {\n  int val1 = 22;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} *** A_PTR_THREE_STAR;\nstruct a {\n  int val1 = 20;\n  struct a {\n    int val1 = 5;\n    struct a * next = NULL;\n    int val2 = 0;\n    char * string = 0x555555554b44 \"HI\";\n  } * next;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} * linked_list;\n</code></pre>\n\n<p>a diff should produce the following</p>\n\n<p>we shall not impose strict conditions such as a value must not occur more than once as that would be unfair tho could be used for testing for values that are unique in that they never occur more than once</p>\n\n<p>we shall use the following initial struct for both conditions to avoid duplication in both examples</p>\n\n<pre><code>original:\nstruct a {\n  int val1 = 5;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} A;\n\ndiff:\nstruct a {\n  int val1 = 5;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} A;\n</code></pre>\n\n<p>if condition is values that have changed:</p>\n\n<pre><code>original:\nstruct a {\n  int val1 = 20;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} * A_PTR_ONE_STAR;\n\ndiff:\nstruct a {\n  int val1 = 20;\n  NULL\n  NULL\n  NULL\n} * A_PTR_ONE_STAR; // not generated\n\noriginal:\nstruct a {\n  int val1 = 21;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} ** A_PTR_TWO_STAR;\n\ndiff:\nstruct a {\n  int val1 = 21;\n  NULL\n  NULL\n  NULL\n} ** A_PTR_TWO_STAR; // not generated\n\noriginal:\nstruct a {\n  int val1 = 22;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} *** A_PTR_THREE_STAR;\n\ndiff:\nstruct a {\n  int val1 = 22;\n  NULL\n  NULL\n  NULL\n} *** A_PTR_THREE_STAR; // not generated\n\noriginal:\nstruct a {\n  int val1 = 20;\n  struct a {\n    int val1 = 5;\n    struct a * next = NULL;\n    int val2 = 0;\n    char * string = 0x555555554b44 \"HI\";\n  } * next;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} * linked_list;\n\ndiff:\nstruct a {\n  int val1 = 20;\n  NULL\n  NULL\n  NULL\n} * linked_list; // not generated\n</code></pre>\n\n<p>and for the condition that values must not change:</p>\n\n<pre><code>original:\nstruct a {\n  int val1 = 20;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} * A_PTR_ONE_STAR;\n\ndiff:\nstruct a {\n  NULL\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} * A_PTR_ONE_STAR; // not generated\n\noriginal:\nstruct a {\n  int val1 = 21;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} ** A_PTR_TWO_STAR;\n\ndiff:\nstruct a {\n  NULL\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} ** A_PTR_TWO_STAR; // not generated\n\noriginal:\nstruct a {\n  int val1 = 22;\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} *** A_PTR_THREE_STAR;\n\ndiff:\nstruct a {\n  NULL\n  struct a * next = NULL;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} *** A_PTR_THREE_STAR; // not generated\n\noriginal:\nstruct a {\n  int val1 = 20;\n  struct a {\n    int val1 = 5;\n    struct a * next = NULL;\n    int val2 = 0;\n    char * string = 0x555555554b44 \"HI\";\n  } * next;\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} * linked_list;\n\ndiff:\nstruct a {\n  NULL\n  NULL\n  int val2 = 0;\n  char * string = 0x555555554b44 \"HI\";\n} * linked_list; // not generated\n</code></pre>\n"}, {"tags": ["c", "linux", "environment"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1540418090, "post_id": 52978421, "comment_id": 92863358, "body": "Depends on whether the code you write is portable or not."}, {"owner": {"reputation": 15, "user_id": 9683857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc1fa19206c83f096e03f4a4c0785256?s=128&d=identicon&r=PG&f=1", "display_name": "Urist_mcDwarf", "link": "https://stackoverflow.com/users/9683857/urist-mcdwarf"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1540418305, "post_id": 52978421, "comment_id": 92863422, "body": "I&#39;m not sure if this project will be portable or not.. I&#39;m just going to download a Linux environment. It&#39;s a Lossy Compression Problem."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1540418702, "post_id": 52978421, "comment_id": 92863533, "body": "You will save yourself a ton of trouble by downloading a Linux environment. You can still use Visual Studio for editing if you want, but it will be much easier for you if you compile and run it on the target platform"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1540419590, "post_id": 52978421, "comment_id": 92863780, "body": "I read it as &quot;If I write, compile, and run a program on Windows in VS, will the same program compile&amp;run for someone else who uses Linux/Unix?&quot;."}, {"owner": {"reputation": 15, "user_id": 9683857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc1fa19206c83f096e03f4a4c0785256?s=128&d=identicon&r=PG&f=1", "display_name": "Urist_mcDwarf", "link": "https://stackoverflow.com/users/9683857/urist-mcdwarf"}, "edited": false, "score": 0, "creation_date": 1540421689, "post_id": 52978421, "comment_id": 92864419, "body": "that other guy has it right, I&#39;ve downloaded a utility for VS to allow me to simulate the linux environment. appreciate the comments though guys."}], "answers": [{"tags": [], "owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "is_accepted": false, "score": 2, "last_activity_date": 1540565041, "last_edit_date": 1540565041, "creation_date": 1540418650, "answer_id": 52978521, "question_id": 52978421, "link": "https://stackoverflow.com/questions/52978421/will-a-program-written-in-visual-studios-2017-run-in-a-linux-or-unix-environment/52978521#52978521", "title": "Will a program written in visual studios 2017 run in a linux or unix environment?", "body": "<p>There isn't a short answer to your question. Consider:</p>\n\n<ul>\n<li>Visual Studio 2017's C++ toolchain, by default, only generates <a href=\"https://en.wikipedia.org/wiki/Portable_Executable\" rel=\"nofollow noreferrer\">Win32 PE executable files</a> (<code>*.exe</code>, <code>*.dll</code>, etc) which only run on Windows Vista or later (Windows XP support requires an optional VS component).</li>\n<li>Linux cannot run these Win32 PE executables by default, though you can install Wine to attempt to run them on Linux installations on the same CPU instruction set. Wine enables Linux to run Win32 PE executables and also provides a Windows-like runtime environment (registry, simulated <code>C:\\Windows</code> path, etc) for them to run in: <a href=\"https://www.winehq.org/\" rel=\"nofollow noreferrer\">https://www.winehq.org/</a></li>\n<li>Visual Studio 2017 can cross-compile to Linux, macOS, iOS and other operating systems using two different approaches:\n\n<ul>\n<li>Visual Studio 2017's preferred method is to use remote build-servers: you would have a Linux or Macintosh computer on your local network that runs a build agent process which then builds the software on that remote machine, keeping the build toolchain on the Linux/Mac, and even debugging support by running the program on the remote machine with a remote debugger attached.\n\n<ul>\n<li>Microsoft's C++ team wrote a blog post demonstrating how to target Linux using this approach here: <a href=\"https://blogs.msdn.microsoft.com/vcblog/2017/04/11/linux-development-with-c-in-visual-studio/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/vcblog/2017/04/11/linux-development-with-c-in-visual-studio/</a></li>\n</ul></li>\n<li>The other approach is to use a custom <code>makefile</code> using a cross-compilation toolchain running on your local machine. You may need an environment like Cygwin or MINGW installed.</li>\n</ul></li>\n<li>Excepting Wine, all other options assume your C++ code is actually portable: that you don't use any platform-specific APIs (i.e. you stick to the C++ standard library) or that you are using platform-specific APIs with conditional compilation.</li>\n<li>Also remember that \"Linux\" is not a single platform: a binary executable built for Ubuntu 16.0 x64 might not work on RedHat x64, and especially won't work on FreeBSD or OpenBSD (which are not Linux, but a form of Unix).</li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 9683857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc1fa19206c83f096e03f4a4c0785256?s=128&d=identicon&r=PG&f=1", "display_name": "Urist_mcDwarf", "link": "https://stackoverflow.com/users/9683857/urist-mcdwarf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540565041, "creation_date": 1540417978, "question_id": 52978421, "link": "https://stackoverflow.com/questions/52978421/will-a-program-written-in-visual-studios-2017-run-in-a-linux-or-unix-environment", "title": "Will a program written in visual studios 2017 run in a linux or unix environment?", "body": "<p>I'm currently very confused about something. I'm currently programming in C, and I'm confused about whether or not that counts as a Unix or Linux environment. Do I actually need to download a port of linux or am I good to use visual studios? The problem is the program I write will be graded via linux/unix.</p>\n"}, {"tags": ["c", "arrays", "file-io", "char", "fgets"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 2, "creation_date": 1540417221, "post_id": 52978059, "comment_id": 92863087, "body": "&quot;<code>while (!feof(source))</code>&quot; <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is &quot;while(!feof(file))&quot; always wrong?</a> tl;dr: use <code>int ch; while((ch = fgetc(source)) != EOF) &#47;* do stuff *&#47;;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 2, "creation_date": 1540417393, "post_id": 52978059, "comment_id": 92863147, "body": "&quot;<code>while(!feof(numFile)) { fscanf(numFile, &quot;%d&quot;, &amp;currentNum);</code>&quot; ==&gt; <code>while(fscanf(numFile, &quot;%d&quot;, &amp;currentNum) == 1) &#47;* do stuff*&#47; ;</code>"}, {"owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "edited": false, "score": 0, "creation_date": 1540469283, "post_id": 52978059, "comment_id": 92882847, "body": "instead of const char use char * filename as parameter."}], "owner": {"user_type": "does_not_exist", "display_name": "user10000467"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540416038, "creation_date": 1540416038, "question_id": 52978059, "link": "https://stackoverflow.com/questions/52978059/passing-a-file-name-to-a-function-as-a-char-array-in-c", "title": "Passing a file name to a function as a char array in C", "body": "<p>I am trying pass a char array to a function. The array is initialized by the user's input. The input is a file name that will be opened and read in the function to determine how many of the integers in the file match the user's target integer (the file only contains integers). I am getting the user's input with fgets(). But when I pass the char array with the user's file name to the function, I get a NULL file pointer, even though the file I've tried to pass is in the same directory as my executable file.</p>\n\n<p>Also, I am trying to get two more file name inputs from the user for another function. The first file is a source file, and the second file is the destination file where the contents of the first file will be copied to. I'm using fgets() for this as well, but my output that is asking the user for the second file name is being read by the first fgets() that is trying to read the first file name.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint countOccurrences (const char* filename, const int target);\nint copyFile(const char* src_file, const char* dest_file);\n\nmain()\n{\n    printf(\"**********countOccurrences Test**********\\n\");\n    char buffer[15];\n    int userTarget;\n\n    printf(\"Enter input file name: \");\n    fgets(buffer, 15, stdin);\n\n    printf(\"Enter target: \");\n    scanf(\"%d\", &amp;userTarget);\n\n    int count = countOccurrences(buffer, userTarget);\n    printf(\"Occurrences of %d in \\\"%s\\\": %d\\n\", userTarget, buffer, count);\n\n    printf(\"\\n**********copyFile Test**********\\n\");\n    char source[15];\n    char destination[15];\n\n    printf(\"Enter source file name: \");\n    fgets(source, 15, stdin);\n\n    printf(\"\\nEnter destination file name: \");\n    fgets(destination, 15, stdin);\n\n    copyFile(source, destination);\n    return 0;\n}\n\nint countOccurrences (const char* filename, const int target)\n{\n    FILE * numFile;\n\n    numFile = fopen(filename, \"r\");\n\n    if(numFile == NULL)\n    {\n        printf(\"Error opening file.\\n\");\n        exit(0);\n    }\n\n    int currentNum;\n    int targetCount = 0;\n\n    while(!feof(numFile))\n    {\n        fscanf(numFile, \"%d\", &amp;currentNum);\n        if(currentNum == target)\n        {\n            targetCount++;\n        }\n    }\n\n    fclose(numFile);\n\n    return targetCount;\n}\n\nint copyFile(const char* src_file, const char* dest_file)\n{\n    FILE *source, *destination;\n    char c;\n\n    source = fopen(src_file, \"r\");\n    destination = fopen(dest_file, \"w\");\n\n    if((source == NULL) || (destination == NULL))\n    {\n        printf(\"Error opening file.\\n\");\n        return 0;\n    }\n\n    while(!feof(source))\n    {\n        c = fgetc(source);\n        fputc(c, destination);\n    }\n\n    fclose(source);\n    fclose(destination);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1540416290, "post_id": 52977972, "comment_id": 92862756, "body": "Instead of <code>if (cond) continue; ...</code> write <code>if (!cond) { ... }</code>. Instead of <code>if (cond) { ... }</code> write <code>while (cond) { ... break; }</code>."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540416471, "post_id": 52977972, "comment_id": 92862808, "body": "And there&#39;s always the <code>?:</code> operator."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1540416592, "post_id": 52977972, "comment_id": 92862853, "body": "Can you explain how this program was able to output <code>There was only 1 8 </code>?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1540417108, "post_id": 52977972, "comment_id": 92863042, "body": "<code>if(array[i]!=-1) array[i]=-1;</code> -- This unconditionally leaves <code>array[i]</code> equal to <code>-1</code>, so that&#39;s one <code>if</code> you can easily get rid of."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1540417877, "post_id": 52977972, "comment_id": 92863297, "body": "Are you supposed to you switch statements or something else?  Are you not supposed to use any branching statements?"}], "answers": [{"tags": [], "owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "is_accepted": true, "score": 4, "last_activity_date": 1540416650, "last_edit_date": 1540416650, "creation_date": 1540416343, "answer_id": 52978112, "question_id": 52977972, "link": "https://stackoverflow.com/questions/52977972/c-programming-replacing-if-statements/52978112#52978112", "title": "C programming: Replacing if statements", "body": "<p>You'll understand the algorithm from comments:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n//time.h is needed for time()\n#include &lt;time.h&gt;\n\nint main()\n{\n    int i, array[30] = {0};\n    srand(time(NULL));\n\n    //generate and print 30 random numbers\n    for(i = 0; i &lt; 30; i++){\n        array[i] = rand() % 10;\n        printf(\"%d \", array[i]);\n    }\n\n    puts(\"\\n\\n\");\n\n    //print these numbers backwards\n    for(i = 29; i &gt;= 0; i--)\n        printf(\"%d \",array[i]);\n\n    puts(\"\\n\\n\");\n\n    // print out a count of how many times each number\n    // between 0 and 9 appeared in the sequence.\n    int count[10] = {0};\n\n    for(i = 0; i &lt; 30; i++)\n        count[array[i]]++;\n\n    //output the count for each number\n    for(i = 0; i &lt; 10; i++)\n        printf(\"There were %d %d's\\n\",count[i], i);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>9 2 3 9 8 4 3 8 1 3 6 4 3 2 5 3 2 3 0 1 9 0 3 5 1 3 3 8 2 0\n\n0 2 8 3 3 1 5 3 0 9 1 0 3 2 3 5 2 3 4 6 3 1 8 3 4 8 9 3 2 9\n\nThere were 3 0's\nThere were 3 1's\nThere were 4 2's\nThere were 9 3's\nThere were 2 4's\nThere were 2 5's\nThere were 1 6's\nThere were 0 7's\nThere were 3 8's\nThere were 3 9's\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1540427347, "post_id": 52978803, "comment_id": 92865774, "body": "@Bob__ there aren&#39;t any copy paste errors in the code. the <code>int main_01(void)</code> is because this is a function in a C source file that was called from the <code>main()</code> in a Visual Studio C++ file. Not sure what you see wrong with the <code>match &gt;= 0 &amp;&amp; printf(&quot;There were %d %d&#39;s\\n&quot;, count, match);</code> as that is from the source file and is perfectly good C. What do you see wrong with that? I suppose I should change the <code>main_01()</code> function name though. Thanks for that."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1540449087, "post_id": 52978803, "comment_id": 92871251, "body": "Ah, now I understand. Thanks for replying."}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 0, "last_activity_date": 1540427958, "last_edit_date": 1540427958, "creation_date": 1540420356, "answer_id": 52978803, "question_id": 52977972, "link": "https://stackoverflow.com/questions/52977972/c-programming-replacing-if-statements/52978803#52978803", "title": "C programming: Replacing if statements", "body": "<p>The following is a simplification of your original source while removing the <code>if</code> statements. There are implied <code>if</code> statements in several places where a logical expression is used as part of a source code statement.</p>\n\n<p>For instance <code>for(j = 0; j &lt; 30 &amp;&amp; match &gt;= 0; j++)</code> has several logical expressions but no <code>if</code> appears in this statement. The logical expressions are <code>j &lt; 30</code> and <code>match &gt;= 0</code> and the complete expression of <code>j &lt; 30 &amp;&amp; match &gt;= 0</code>.</p>\n\n<p>This example uses a logical expression and the evaluation short circuit behavior of the C compiler (see <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">Short-circuit evaluation</a> in Wikipedia) in the statement <code>array[j] == match &amp;&amp; ++count &amp;&amp; (array[j] = -1);</code> so that if the logical expression <code>array[j] == match</code> evaluates to false then the rest of the statement will not be executed.</p>\n\n<p>We also depend on the preincrement operator with the <code>++count</code> to increment count and then take the resulting value to check if it is false (zero) or true (non-zero). Since the variable <code>count</code> is initialized to zero and when incremented will always be non-zero then the next logical expression in the statement is evaluated the <code>(array[j] = -1)</code>. We put the assignment statement within parenthesis to enforce the order of evaluation. We want the variable <code>array[j]</code> to be assigned the value of -1 and for the result to then be used in the logical statement. Since this is the last logical expression of the entire logical statement, whether it evaluates to false (zero) or true (non-zero) doesn't matter as what we want is the side effect of assigning the value of -1 to the array element.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;time.h&gt;\n\nint main()\n{\n    int i, array[30] = {0};\n\n    srand(time(NULL));\n    for(i = 0; i &lt; 30; i++)\n        array[i] = rand() % 10;\n\n    for(i = 0; i &lt; 30; i++)\n        printf(\"%d \", array[i]);\n    printf(\"\\n\\n\");\n\n    for(i = 29; i &gt;= 0; i--)\n        printf(\"%d \",array[i]);\n    printf(\"\\n\\n\");\n\n    for(i = 0; i &lt; 30; i++){\n        int j;\n        int count = 0;\n        int match = array[i];\n        for(j = 0; j &lt; 30 &amp;&amp; match &gt;= 0; j++){\n            array[j] == match &amp;&amp; ++count &amp;&amp; (array[j] = -1);\n            // replaces the following if as value of count is\n            // tested after it is incremented so will always be nonzero.\n            //   if (array[j] == match) {\n            //       count++; array[j] = -1;\n            //   }\n        }\n\n        // if this is a valid array element value we are trying to match\n        // then print the count and the value being matched. printf()\n        // is a function that returns an int indicating number of character written.\n        match &gt;= 0 &amp;&amp; printf(\"There were %d %d's\\n\", count, match);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>An example output.</p>\n\n<pre><code>8 2 4 0 8 0 8 1 1 4 6 9 3 9 7 6 3 9 0 1 0 7 1 2 4 0 3 0 2 3\n\n3 2 0 3 0 4 2 1 7 0 1 0 9 3 6 7 9 3 9 6 4 1 1 8 0 8 0 4 2 8\n\nThere were 3 8's\nThere were 3 2's\nThere were 3 4's\nThere were 6 0's\nThere were 4 1's\nThere were 2 6's\nThere were 3 9's\nThere were 4 3's\nThere were 2 7's\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10438762, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3w_mOC8QerY/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqBKDcCpug3betOpVEt-ioYwfQ_g/mo/photo.jpg?sz=128", "display_name": "Code365", "link": "https://stackoverflow.com/users/10438762/code365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 52978112, "answer_count": 2, "score": 1, "last_activity_date": 1540427958, "creation_date": 1540415556, "last_edit_date": 1540416772, "question_id": 52977972, "link": "https://stackoverflow.com/questions/52977972/c-programming-replacing-if-statements", "title": "C programming: Replacing if statements", "body": "<p>Hello a beginner here who needs some of your help. My C program is good and does what it is supposed to do only that it is not supposed to use any kind of if statements. I wrote it that way as I saw it would be easier so that I can then replace the if statements. I have been trying to replace the if statements but am now stuck. What can I use instead of the if statement to still produce the same output. </p>\n\n<p>The program is supposed to generate a sequence of thirty random integers between 0 and 9 and then print out the sequence both forward and backwards. Then print out a count of how many times each number between 0 and 9 appeared in the sequence. </p>\n\n<p><strong>This is the output</strong></p>\n\n<pre><code>Here is a sequence of 30 random numbers between 0 and 9:\n 3 6 7 5 3 5 6 2 9 1 2 7 0 9 3 6 0 6 2 6 1 8 7 9 2 0 2 3 7 5\n\nPrinting them backwards, that's:\n  5 7 3 2 0 2 9 7 8 1 6 2 6 0 6 3 9 0 7 2 1 9 2 6 5 3 5 7 6 3\n\nThere were 3 0's\nThere were 2 1's\nThere were 5 2's\nThere were 4 3's\nThere were no 4's\nThere were 3 5's\nThere were 5 6's\nThere were 4 7's\nThere was only 1 8 \nThere were 3 9's   \n</code></pre>\n\n<p><strong>This is my C program</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main()\n{\n    int i, j, array[30]={0}, count=0,check;\n    srand(time(NULL));\n    for(i=0;i&lt;30;i++)\n        array[i]=rand()%10;\n    for(i=0;i&lt;30;i++)\n        printf(\"%d \",array[i]);\n    printf(\"\\n\\n\");\n\n    for(i=29;i&gt;=0;i--)\n        printf(\"%d \",array[i]);\n    printf(\"\\n\\n\");\n\n    for(i=0;i&lt;30;i++){\n        check=array[i];\n        if(array[i]!=-1)\n            array[i]=-1;\n\n        if(check == -1)\n            continue;\n\n        count =1;\n\n        for(j=0;j&lt;30;j++){\n            if((i==j) || (array[j]==-1))\n                continue;\n\n            if(check==array[j]){\n                count++;\n                array[j]=-1;\n            }\n        }\n\n        printf(\"There were %d %d's\\n\",count,check);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 342, "user_id": 7980533, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7c7f9593b3f3fa1cde338fe8a5c95894?s=128&d=identicon&r=PG&f=1", "display_name": "HKC72", "link": "https://stackoverflow.com/users/7980533/hkc72"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1540446071, "post_id": 52977469, "comment_id": 92870064, "body": "Correct, Eold and Ealt are the same variables"}], "answers": [{"tags": [], "owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "is_accepted": false, "score": 0, "last_activity_date": 1540413782, "last_edit_date": 1540413782, "creation_date": 1540413194, "answer_id": 52977529, "question_id": 52977469, "link": "https://stackoverflow.com/questions/52977469/how-to-store-global-values-from-a-function/52977529#52977529", "title": "How to store global values from a function?", "body": "<p>If you're attempting to <code>return</code> the address of your global variables, you'll need a pointer to pointer:</p>\n\n<pre><code>void ConPI(float Target, float Value, float Esum, float Ealt, float **p, float **q)\n{\n      E = Target - Value;\n      Esum = Esum + E;\n      *p = &amp;Esum;\n\n      Eold = E;\n      *q = &amp;Eold;\n}\n</code></pre>\n\n<p>You would call <code>ConPI</code> like this:</p>\n\n<pre><code>float *copy1, *copy2;\n\nConPI(..., ..., ..., ..., &amp;copy1, &amp;copy2);\n</code></pre>\n\n<p>You do have (potential) issues in your code however:</p>\n\n<ol>\n<li><p>Having a global and local variable named <code>Esum</code> creates what is called variable shadowing.  In <code>ConPI</code>, <code>Esum</code> refers to the local copy (i.e. not the global <code>Esum</code>).  </p></li>\n<li><p><code>return</code>ing the address of this variable to the caller results in undefined behavior.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": true, "score": 1, "last_activity_date": 1540413463, "creation_date": 1540413463, "answer_id": 52977572, "question_id": 52977469, "link": "https://stackoverflow.com/questions/52977469/how-to-store-global-values-from-a-function/52977572#52977572", "title": "How to store global values from a function?", "body": "<p>You should do something like this, based on your first function definition:</p>\n\n<pre><code>void ConPI(float Target, float Value, float *Esum, float *Ealt){\n    E = Target - Value;\n    *Esum = *Esum + E;\n    *Ealt = E;\n}\n</code></pre>\n\n<p>This way you pass in pointers to Esum and Ealt.  And you use the dereference operator when using them in the function.  Then you can call <code>ConPI</code> like this:</p>\n\n<pre><code>float Target, Value, Esum, Ealt;\n...\nConPi(Target, Value, &amp;Esum, &amp;Ealt);\n</code></pre>\n\n<p>Now, each time that you call ConPi, Esum and Ealt get updated.</p>\n"}], "owner": {"reputation": 342, "user_id": 7980533, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7c7f9593b3f3fa1cde338fe8a5c95894?s=128&d=identicon&r=PG&f=1", "display_name": "HKC72", "link": "https://stackoverflow.com/users/7980533/hkc72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52977572, "answer_count": 2, "score": 0, "last_activity_date": 1540446033, "creation_date": 1540412906, "last_edit_date": 1540446033, "question_id": 52977469, "link": "https://stackoverflow.com/questions/52977469/how-to-store-global-values-from-a-function", "title": "How to store global values from a function?", "body": "<p>In my function I calculate two different values (Esum and Eold) which I want to us global (out of the function). \nI want to work with pointers to store the values but I'm not used to this technique.</p>\n\n<p>This is what my function looks like but cant store values global....Does NOT store Esum and Eold global... Not good !</p>\n\n<pre><code>float Eold = 0.0f;\nfloat Esum = 0.0f;\n\nvoid ConPI(float Target, float Value, float Esum, float Eold){\n  E = Target - Value;\n  Esum = Esum + E;\n  Eold = E;\n}\n</code></pre>\n\n<p>Now I am looking for a solution to use pointers for Esum and Eold to store the values global. I'm not used to work with pointers and need help for my function:</p>\n\n<pre><code>void ConPI(float Target, float Value, float Esum, float Eold, float *p, float *q){\n  E = Target - Value;\n  Esum = Esum + E;\n  p = &amp;Esum;\n\n  Eold = E;\n  q = &amp;Eold;\n\n}\n</code></pre>\n\n<p>This does actually not work. After jumping out of the function Eold and Esum becom 0.000 .... \nMaybe someone can help me to understand why this happens.</p>\n\n<p>Thanks a lot !</p>\n"}, {"tags": ["c", "for-loop", "conditional"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1540412949, "post_id": 52977465, "comment_id": 92861365, "body": "Which part exactly is confusing to you? The &quot;middle part&quot; is always an expression that evaluates to true or false"}, {"owner": {"reputation": 121, "user_id": 8686415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ab7b79b0957e14399b0e01ca84d9b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeyo", "link": "https://stackoverflow.com/users/8686415/mandeyo"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1540413043, "post_id": 52977465, "comment_id": 92861408, "body": "What values does this for loop go through? It doesn&#39;t have a range it seems. It goes from j to true/false ?? for example for(j=0 ; j&lt;5 ; j++) makes a lot of sence."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540413081, "post_id": 52977465, "comment_id": 92861423, "body": "The first sets up the initial conditions, the second the part that must evaluate to true before each iteration or the loop will terminate, the final part is what happens after each loop and before the next."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1540413112, "post_id": 52977465, "comment_id": 92861436, "body": "It loops until either <code>j</code> reaches 0 or the value of <code>temp</code> is bigger or equal than <code>v[j-1]</code>, whichever happens first"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1540413556, "post_id": 52977465, "comment_id": 92861632, "body": "<code>for</code> loops in C are pretty general: the one you know iterates from 0 to 4. But you can also decrement and count down from some value to 0. Or you can double (<code>j = j * 2</code>) or halve (<code>j = j &#47; 2</code>) or ..."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540414147, "post_id": 52977465, "comment_id": 92861900, "body": "It&#39;s worth noting that <code>j&gt;0 &amp;&amp; temp&lt;v[j-1]</code> does <i>short circuit evaluation</i>. This means that if we have <code>cond1_expr &amp;&amp; cond2_expr</code>, if <code>cond1_expr</code> evaluates to <i>false</i>, then <code>cond2_expr</code> will <i>not</i> be evaluated. <i>Without</i> that, the sequence would be: evaluate <code>cond1_expr</code>, evaluate <code>cond2_expr</code>, logically AND them. This is relevant because without the short circuit, <code>v[j-1]</code> would be evaluated with a <code>j</code> of 0, which means <code>v[-1]</code> which might be undefined behavior. Likewise for logical OR: <code>A || B</code>. If <code>A</code> evaluates to true, <code>B</code> is <i>not</i> evaluated."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540414384, "post_id": 52977465, "comment_id": 92862005, "body": "In other words, short circuit evaluation of <code>if (A &amp;&amp; B) do_something;</code> is like: <code>if (A) { if (B) do_something; }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2660286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b3402b778424e566ce04fd463b9c7a9?s=128&d=identicon&r=PG", "display_name": "Gorik", "link": "https://stackoverflow.com/users/2660286/gorik"}, "is_accepted": false, "score": 2, "last_activity_date": 1540414475, "last_edit_date": 1540414475, "creation_date": 1540413386, "answer_id": 52977558, "question_id": 52977465, "link": "https://stackoverflow.com/questions/52977465/what-does-this-for-loop-condition-mean-in-c/52977558#52977558", "title": "What does this for loop condition mean in C?", "body": "<p>This line is pretty simple:\n Iterate <code>'i'</code> elements of array <code>'v'</code> in backward direction while values are less than 'temp'.\n When value appear as more or equal than 'temp' or <code>'j'</code> went to zero then exit the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "is_accepted": false, "score": 0, "last_activity_date": 1540413620, "creation_date": 1540413620, "answer_id": 52977604, "question_id": 52977465, "link": "https://stackoverflow.com/questions/52977465/what-does-this-for-loop-condition-mean-in-c/52977604#52977604", "title": "What does this for loop condition mean in C?", "body": "<p>Execute the body of the <code>for</code> loop while both conditions <code>j&gt;0</code> and <code>temp&lt;v[j-1]</code> are <code>true</code>.</p>\n\n<p><strong>Here j=i,i-1,.......,2,1,0</strong> </p>\n"}, {"tags": [], "owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "is_accepted": false, "score": 0, "last_activity_date": 1540414309, "creation_date": 1540414309, "answer_id": 52977746, "question_id": 52977465, "link": "https://stackoverflow.com/questions/52977465/what-does-this-for-loop-condition-mean-in-c/52977746#52977746", "title": "What does this for loop condition mean in C?", "body": "<ol>\n<li>Set initial value of <code>j</code> to <code>i</code></li>\n<li>Check <code>j</code> to see if it is greater than <code>0</code> and check <code>temp</code> to see if it is less than value of element in array <code>v</code> at index <code>j - 1</code>. If both cases are true, proceed to step 3; if either case is false, proceed to step 5.</li>\n<li>Perform body of <code>for</code> loop. At end, decrement <code>j</code> by <code>1</code></li>\n<li>Repeat step 2</li>\n<li>Exit Loop</li>\n</ol>\n"}], "owner": {"reputation": 121, "user_id": 8686415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ab7b79b0957e14399b0e01ca84d9b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeyo", "link": "https://stackoverflow.com/users/8686415/mandeyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1540414475, "creation_date": 1540412897, "question_id": 52977465, "link": "https://stackoverflow.com/questions/52977465/what-does-this-for-loop-condition-mean-in-c", "title": "What does this for loop condition mean in C?", "body": "<p>I have a problem with figuring out what the following loop means as i'm new to C.\nI have some value of temp and an array v. Middle part evaluates to true or false, so i am really confused.</p>\n\n<pre><code>for( j=i ; j&gt;0 &amp;&amp; temp&lt;v[j-1] ; j--){...}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1540412661, "post_id": 52977412, "comment_id": 92861253, "body": "Leaking resources."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1540412663, "post_id": 52977412, "comment_id": 92861255, "body": "<code>f = NULL</code> does not close the file handle, it throws it away"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1540412677, "post_id": 52977412, "comment_id": 92861258, "body": "c has no garbage collector."}, {"owner": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 0, "creation_date": 1540465128, "post_id": 52977412, "comment_id": 92880433, "body": "To clarify &quot;leaking resources&quot; part - file descriptors are a finite resource, if your program has a long enough lifetime on the system, it might eventually deprive entire system of file descriptors, because there can be only so many files opened at once, meaning that it will block any other program from doing IO operations as it can&#39;t open any other file as ones that were opened were never closed, until the program exits, or in worst case, until the OS reboots (realtime OS or some OS from 90&#39;s will probably not release them after the program exits, bleh)."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1540412776, "creation_date": 1540412776, "answer_id": 52977440, "question_id": 52977412, "link": "https://stackoverflow.com/questions/52977412/what-are-the-downsides-to-saying-a-file-is-null-instead-of-closing-it/52977440#52977440", "title": "What are the downsides to saying a file is NULL instead of closing it?", "body": "<p>If you set <code>f</code> to NULL, all it does is overwrite the value of the variable <code>f</code>, losing the reference to the <code>FILE</code> object it pointed to.  </p>\n\n<p>The resources used by the <code>FILE</code> object don't get cleaned up as <code>fclose</code> is never called.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 6, "last_activity_date": 1540413225, "last_edit_date": 1540413225, "creation_date": 1540412854, "answer_id": 52977454, "question_id": 52977412, "link": "https://stackoverflow.com/questions/52977412/what-are-the-downsides-to-saying-a-file-is-null-instead-of-closing-it/52977454#52977454", "title": "What are the downsides to saying a file is NULL instead of closing it?", "body": "<p>as opposed to languages with a garbage collector (like <code>python</code>), setting the file pointer to <code>NULL</code> just loses the reference on the file handle, but it does <em>not</em> close the file.</p>\n\n<p>Which leads to potential bugs, like buffers not flushed, locked files, reaching the \"too many open files per process\" limit... depending on the open mode and the platform you're on.</p>\n\n<p>On \"modern\" systems supporting ressource tracking, the file is still closed on exit (still you may lose some buffers), but some legacy systems will retain the file open until you reboot (and if your code is a plugin of some bigger tool, resource tracking doesn't apply until the bigger tool is closed)</p>\n\n<p>Which is considered as good practice is to set the handle to <code>NULL</code> <em>after</em> having closed the file so no risk of calling <code>fclose</code> again on a closed file (it <em>reduces</em> the risk but there could be copies of the handle, so it's not 100% safe):</p>\n\n<pre><code>if (f!=NULL)\n{\n  fclose(f);\n  f = NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 52977454, "answer_count": 2, "score": 2, "last_activity_date": 1540413225, "creation_date": 1540412603, "last_edit_date": 1540413061, "question_id": 52977412, "link": "https://stackoverflow.com/questions/52977412/what-are-the-downsides-to-saying-a-file-is-null-instead-of-closing-it", "title": "What are the downsides to saying a file is NULL instead of closing it?", "body": "<p>If I've defined and opened a file I've decided to call <code>f</code>, what are the consequences of simply saying <code>f = NULL</code> as opposed to properly closing the file, with <code>fclose()</code>? </p>\n\n<p>Or does <code>f = NULL</code> not even work?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1540412170, "post_id": 52977256, "comment_id": 92861031, "body": "What is the question here?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1540412279, "post_id": 52977256, "comment_id": 92861087, "body": "Move <code>printf(&quot;%d&quot;,maxi);</code> to after the <code>for</code> loop?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540415755, "post_id": 52977256, "comment_id": 92862550, "body": "You could do an integer-arithmetic Newton-Raphson approximation: X(n+1) = (X(n) + X / X(n)) / 2; and see whether that gets there quicker than simply iterating over 1..N.  If your numbers are larger (say one million or more), that should outperform iteration.  For smaller numbers (say 100 or less), there may not be any advantage."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540418490, "post_id": 52977398, "comment_id": 92863472, "body": "2 corner problems.  When <code>n</code> is near <code>INT_MAX</code>, <code>i*i</code> overflows and is UB, which can be an infinite loop in this case.  With <code>n==0</code>, this reports <code>1</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1540412544, "creation_date": 1540412544, "answer_id": 52977398, "question_id": 52977256, "link": "https://stackoverflow.com/questions/52977256/read-from-the-standard-input-a-natural-number-n-find-the-greatest-perfect-squa/52977398#52977398", "title": "Read from the standard input a natural number, n. Find the greatest perfect square that is less than or equal to n", "body": "<p>You only need a single loop here.  Check if <code>i*i &lt;= n</code>.  If so, set <code>maxi</code> to <code>i*i</code> and increment <code>i</code>:</p>\n\n<pre><code>int n, i = 1, sq = 1;\n\nprintf(\"\\n Introduce the number:\\n\");\nscanf(\"%d\", &amp;n);\n\nwhile (i*i &lt;= n) {\n    sq = i*i;\n    i++;\n}\n\nprintf(\"sq=%d\\n\", sq);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1540418767, "post_id": 52978202, "comment_id": 92863547, "body": "Minor corner: When <code>n</code> is near <code>INT_MAX</code>, <code>int</code> math overflows --&gt; UB."}, {"owner": {"reputation": 49387, "user_id": 1428679, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3eba7f8f9195a30d49bdbbdd594b1e4?s=128&d=identicon&r=PG", "display_name": "LSerni", "link": "https://stackoverflow.com/users/1428679/lserni"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540423022, "post_id": 52978202, "comment_id": 92864783, "body": "Good catch; I&#39;ve added a check of sorts."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540429538, "post_id": 52978202, "comment_id": 92866210, "body": "I use to think as &quot;possible overflow will show it as being negative&quot; - yet found that <a href=\"https://codereview.stackexchange.com/questions/37177/simpler-method-to-detect-int-overflow\">not robust</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540430126, "post_id": 52978202, "comment_id": 92866315, "body": "I <i>think</i> <code>for (i = 0, sq = 0; 2*i &lt; n - sq; i++) {     sq += 2*i + 1; } &#47;&#47; sq is your answer;</code> will work (no OF) using your nifty exploit."}], "tags": [], "owner": {"reputation": 49387, "user_id": 1428679, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3eba7f8f9195a30d49bdbbdd594b1e4?s=128&d=identicon&r=PG", "display_name": "LSerni", "link": "https://stackoverflow.com/users/1428679/lserni"}, "is_accepted": false, "score": 0, "last_activity_date": 1540423006, "last_edit_date": 1540423006, "creation_date": 1540416775, "answer_id": 52978202, "question_id": 52977256, "link": "https://stackoverflow.com/questions/52977256/read-from-the-standard-input-a-natural-number-n-find-the-greatest-perfect-squa/52978202#52978202", "title": "Read from the standard input a natural number, n. Find the greatest perfect square that is less than or equal to n", "body": "<p>This minimizes the number of multiplications: it looks for the first square which is larger than n, meaning that the perfect square immediately before was the solution.</p>\n\n<pre><code>for (i = 1; i &lt;= n; i++) {\n    if (i*i &gt; n) {\n        break;\n    }\n}\ni--;\n// i*i is your answer\n</code></pre>\n\n<p>On some platforms it might be useful to exploit the fact that <code>(i+1)*(i+1) = i*i + 2*i + 1</code>, or in other words, if you already have i^2, (i+1)^2 is obtained by adding i to it twice, and incrementing by 1; and at the beginning, 0^2 is 0 to prime the cycle.</p>\n\n<pre><code>for (i = 0, sq = 0; i &lt; n; i++) {\n    sq += i; // Or on some platforms sq += i&lt;&lt;1 instead of two sums\n    sq += i; // Some compilers will auto-optimize \"sq += 2*i\" for the platform\n    sq++;    // Or even sq += ((2*i)|1) as adding 1 to even numbers is OR'ing 1\n    if (sq &gt; n) {\n        break;\n    }\n    // if sq is declared as signed integer, a possible overflow will\n    // show it as being negative. This way we can still get a \"correct\" result\n    // with i the smallest root that does not overflow.\n    // In 16-bit arithmetic this is 181, root of 32761; next square would be\n    // 33124 which cannot be represented in signed 16-bit space.\n    if (sq &lt; 0) {\n        break;\n    }\n}\n// (i*i) is your answer\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1540422148, "last_edit_date": 1540422148, "creation_date": 1540417878, "answer_id": 52978394, "question_id": 52977256, "link": "https://stackoverflow.com/questions/52977256/read-from-the-standard-input-a-natural-number-n-find-the-greatest-perfect-squa/52978394#52978394", "title": "Read from the standard input a natural number, n. Find the greatest perfect square that is less than or equal to n", "body": "<blockquote>\n  <p>Find the greatest perfect square that is less than or equal to n</p>\n</blockquote>\n\n<p>For <code>n&gt;=0</code>, this is akin to finding the <em>integer</em> square root of <code>n</code>.  </p>\n\n<pre><code>unsigned greatest_perfect_square(unsigned x) {\n  unsigned root = usqrt(x);\n  return root * root;\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>if you have any other ideas on how to solve it I'd like to hear them.</p>\n</blockquote>\n\n<p>The order of complexity to find the square root is O(bit-width-of-type-n).  e.g. 16 iterations.</p>\n\n<pre><code>#include &lt;limits.h&gt;\nunsigned usqrt(unsigned x) {\n  unsigned y = 0;\n  unsigned xShifted = 0;\n\n  const unsigned MSBit = UINT_MAX - UINT_MAX/2;\n  // This  constant relies on no padding and bit width even\n  const unsigned TwoBitCount_N = sizeof(x) * CHAR_BIT / 2;\n  for (unsigned TwoBitCount = TwoBitCount_N; TwoBitCount &gt; 0; TwoBitCount--) {\n    // Shift `xShifted` 2 places left while shifting in the 2 MSbits of x\n    xShifted &lt;&lt;= 1;\n    if (x &amp; MSBit) {\n      xShifted |= 1;\n    }\n    x &lt;&lt;= 1;\n    xShifted &lt;&lt;= 1;\n    if (x &amp; MSBit) {\n      xShifted |= 1;\n    }\n    x &lt;&lt;= 1;\n    // Shift the answer 1 bit left\n    y &lt;&lt;= 1;\n    // Form test value as y*2 + 1\n    unsigned Test = (y &lt;&lt; 1) | 1;\n    // If xShifted big enough ...\n    if (xShifted &gt;= Test) {\n      xShifted -= Test;\n      // Increment answer\n      y |= 1;\n    }\n  }\n  return y;\n}\n</code></pre>\n\n<hr>\n\n<p>OP's method is far far slower.  Even the inner loop takes O(sqrt(n)) time.</p>\n\n<p>Note:<br>\nOP's code: <code>j == i * i</code> is subject to overflow and leads to the incorrect answer when <code>j</code> is larger.<br>\n<code>j/i == i</code> performs a like test without overflow.</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/questions/52977256/read-from-the-standard-input-a-natural-number-n-find-the-greatest-perfect-squa/52978394#comment92862550_52977256\">@Jonathan Leffler</a> suggested a <a href=\"https://en.wikipedia.org/wiki/Newton%27s_method\" rel=\"nofollow noreferrer\">Newton-Raphson approximation</a> approach.  Some lightly tested code below works quite fast, often taking only a few iterations.<br>\nI suspect this is <code>O(log(bit-width-of-type-n))</code> for the main part, yet of course still <code>O(log(bit-width-of-type-n))</code> for <code>bit_width()</code>.<br>\nBoth of the functions could be improved.</p>\n\n<pre><code>unsigned bit_width(unsigned x) {\n  unsigned width = 0;\n  while (x) {\n    x /= 2;\n    width++;\n  }\n  return width;\n}\n\nunsigned usqrt_NR(unsigned x) {\n  if (x == 0) {\n    return 0;\n  }\n  unsigned y = 1u &lt;&lt; bit_width(x)/2;\n  unsigned y_previous;\n  unsigned diff;\n  unsigned diff1count = 0;;\n  do {\n    y_previous = y;\n    y = (y + x/y)/2;\n    diff = y_previous &lt; y ? y - y_previous : y_previous - y;\n    if (diff == 1) diff1count++;\n  } while (diff &gt; 1 || (diff == 1 &amp;&amp; diff1count &lt;= 1));\n  y = (y_previous + y)/2;\n  return y;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10554167, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0R5BgZv-yaw/AAAAAAAAAAI/AAAAAAAAAV4/zQfYg93oeT0/photo.jpg?sz=128", "display_name": "The Virtuoso", "link": "https://stackoverflow.com/users/10554167/the-virtuoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1540423006, "creation_date": 1540411917, "last_edit_date": 1540414870, "question_id": 52977256, "link": "https://stackoverflow.com/questions/52977256/read-from-the-standard-input-a-natural-number-n-find-the-greatest-perfect-squa", "title": "Read from the standard input a natural number, n. Find the greatest perfect square that is less than or equal to n", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n  int i, j, n, maxi = 0;\n  printf(\"\\n Introduce the number:\\n\");\n  scanf(\"%d\", &amp;n);\n\n  for (j = 1; j &lt;= n; j++)\n  {\n    i = 0;\n    while (i &lt; j) {\n      i++;\n\n      if (j == i * i) {\n        if (j &gt; maxi) {\n          maxi = j;\n          printf(\"%d\", maxi);\n        }\n      }\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>I have to find the greatest perfect square smaller than than a number <code>n</code>, I succeeded in finding all the perfect squares that are smaller than the number <code>n</code> but because each time it finds a perfect square it displays it I couldn't think of any way to compare all the perfect square that were found (or at least that's what I think the problem is) so I would appreciate some help.  I already know that you could also solve this problem using a more simpler method ( like the one below ) and if you have any other ideas on how to solve it I'd like to hear them.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n  int n,j;\n  printf(\"\\n Your number:\\n\");\n  scanf(\"%d\",&amp;n);\n  j=(int)sqrt(n);\n  printf(\"%d\",j*j);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "floating-point", "infinite-loop"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1540411899, "post_id": 52977229, "comment_id": 92860893, "body": "<a href=\"//stackoverflow.com/q/588004\">Is floating point math broken?</a>"}, {"owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "edited": false, "score": 0, "creation_date": 1540412072, "post_id": 52977229, "comment_id": 92860977, "body": "Just to add to the above, you&#39;d want to use an inequality comparison when dealing with those scenarios, so <code>while (x &lt; 1.1) {...}</code> might be a bit better, but once <code>x</code> is close to <code>1.1</code>, it may or may not iterate one more time."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1540412143, "post_id": 52977229, "comment_id": 92861016, "body": "<code>0.1</code> <i>cannot</i> be represented exactly in any floating point format; the closest representable value is a little above that.  So after 10 additions, what you have in <code>x</code> is not <code>1.1</code>.  Since <code>x</code> is never exactly equal to <code>1.1</code>, the loop never terminates."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1540412200, "post_id": 52977229, "comment_id": 92861044, "body": "<i>Using a floating number as a loop counter</i> -- don&#39;t."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1540412280, "post_id": 52977229, "comment_id": 92861089, "body": "don&#39;t compare for equality with floating point numbers - it&#39;s a recipe for disaster.  You can use &lt; and &gt; where that makes sense."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1540412510, "post_id": 52977229, "comment_id": 92861189, "body": "@JohnBode I am not sure, but wouldn&#39;t the <code>1.1</code> constant &quot;rounded&quot; by the compiler towards the closest representable one (representable in <code>double</code>, though, but still)?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1540412949, "post_id": 52977229, "comment_id": 92861366, "body": "@JohnBode: 0.1 can be represented exactly in a decimal floating-point format, such as the ones specified in IEEE-754. \u201cFloating point\u201d does not mean \u201cbinary\u201d; it means the point floats (<i>i.e.</i>, the value is scaled by a power of some base). Intel and IBM make compilers and processors with support for decimal floating-point, and there are software decimal floating-point implementations in various applications."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1540413125, "post_id": 52977229, "comment_id": 92861438, "body": "@EugeneSh.: <code>1.1</code> in source code is (usually) converted to <code>double</code> by rounding to the nearest representable value. But the result of adding eleven instances of <code>0.1</code> is different. First <code>0.1</code> is converted to the nearest representable value, and then ten additions are performed. In each addition, the mathematical result is rounded to the nearest representable value. Sometimes these produce roundings up, sometimes down, sometimes none. The final result may differ from the result of converting <code>1.1</code> to the nearest representable value."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540413367, "post_id": 52977229, "comment_id": 92861533, "body": "@EricPostpischil Yeah, this is what I meant, to point that the problem is originating from the addition rather than from the comparison only."}], "owner": {"reputation": 101, "user_id": 9205665, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209058435453162/picture?type=large", "display_name": "Foivos Allayiotis", "link": "https://stackoverflow.com/users/9205665/foivos-allayiotis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1540412693, "answer_count": 0, "score": 0, "last_activity_date": 1540411807, "creation_date": 1540411807, "question_id": 52977229, "link": "https://stackoverflow.com/questions/52977229/c-using-a-floating-number-as-a-loop-counter", "closed_reason": "Duplicate", "title": "C - Using a floating number as a loop counter", "body": "<p>i'm following a course of Computer Architecture and our teacher gave us the code below and told us to execute it, so we can comment on it together in class, but, I can't understand why it creates an endless loop. I would love if someone more experienced could help. Thank you!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\nfloat x = 0.1;\n\nwhile (x!=1.1) {\n   printf(\"x = %f\\n\", x);\n   x = x + 0.1;\n}\n\nreturn 1;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 4, "creation_date": 1540411664, "post_id": 52977103, "comment_id": 92860775, "body": "Each <code>DebugPointer(p)</code> invocation is a compound statement that allocates on the stack and then frees a temporary variable <code>p1</code>, so all the different <code>p1</code> instances re-use the same location. (Nit: C doesn&#39;t formally require a stack, but in practice all implementations use the stack for <code>auto</code> variables.)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1540411767, "post_id": 52977103, "comment_id": 92860823, "body": "this macro smells bad practice all the way. Special mention to free(tmp) which will free the memory pointed by the passed argument (in your case it&#39;s NULL so it has no effect)."}, {"owner": {"reputation": 19680, "user_id": 562222, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jgGXb.jpg?s=128&g=1", "display_name": "qed", "link": "https://stackoverflow.com/users/562222/qed"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1540415540, "post_id": 52977103, "comment_id": 92862477, "body": "@jxh No it didn&#39;t, I just checked."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1540416796, "post_id": 52977103, "comment_id": 92862928, "body": "@qed: Oh, I misread it then. Thanks."}, {"owner": {"reputation": 19680, "user_id": 562222, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jgGXb.jpg?s=128&g=1", "display_name": "qed", "link": "https://stackoverflow.com/users/562222/qed"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1540459076, "post_id": 52977103, "comment_id": 92876794, "body": "@jxh. No problem. It shouldn&#39;t matter that much. My guess is that if <code>tmp</code> is fed to <code>asprintf</code>, then <code>write_to</code> should be <code>free</code>ed."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1540411725, "creation_date": 1540411725, "answer_id": 52977208, "question_id": 52977103, "link": "https://stackoverflow.com/questions/52977103/two-pointers-residing-at-the-same-address-but-pointing-at-different-things/52977208#52977208", "title": "Two pointers residing at the same address but pointing at different things", "body": "<p>The issue is in your printing routine:</p>\n\n<pre><code>#define DebugPointer(p)                                         \\\n    {                                                           \\\n        __typeof__(p) p1 = p;                                   \\\n        printf(\"%8s %20s: %p\\n\", #p, \"address\", (void*)&amp;(p1));  \\\n        printf(\"%8s %20s: %p\\n\", #p, \"points to\", (void*)(p1)); \\\n    }\n</code></pre>\n\n<p>You're declaring a new variable called <code>p1</code> and printing the address of <strong>that</strong> variable.  In this case, it happens to work out that this variable has the same address each time it goes into scope.</p>\n\n<p>Get rid of the extra variable to print the address of the actual variable you're interested in.</p>\n\n<pre><code>#define DebugPointer(p)                                        \\\n    {                                                          \\\n        printf(\"%8s %20s: %p\\n\", #p, \"address\", (void*)&amp;(p));  \\\n        printf(\"%8s %20s: %p\\n\", #p, \"points to\", (void*)(p)); \\\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1540413423, "post_id": 52977217, "comment_id": 92861564, "body": "The purpose of  <code>p1</code> is so that you can apply <code>&amp;</code> operator to it."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1540413504, "post_id": 52977217, "comment_id": 92861599, "body": "@dasblinkenlight: I surmised from the question that this was not what the OP intended to do."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1540413713, "post_id": 52977217, "comment_id": 92861699, "body": "OP lifted the code from a book, he is not sure what <code>p1</code> is all about. Essentially, it&#39;s a guard against compile errors when the macro is invoked with a pointer expression that is not a variable, e.g. <code>DebugPointer(tmp+1)</code>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1540413850, "post_id": 52977217, "comment_id": 92861761, "body": "@dasblinkenlight: The <a href=\"https://github.com/b-k/21st-Century-Examples/blob/master/sasprintf.c\" rel=\"nofollow noreferrer\"><code>Sasprintf</code></a> is what was lifted. I believe the OP wrote <code>DebugPointer</code> to try to understand the need for the temporary variable, but mimic&#39;d the usage of the temporary for their own macro."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 2, "last_activity_date": 1540418169, "last_edit_date": 1540418169, "creation_date": 1540411751, "answer_id": 52977217, "question_id": 52977103, "link": "https://stackoverflow.com/questions/52977103/two-pointers-residing-at-the-same-address-but-pointing-at-different-things/52977217#52977217", "title": "Two pointers residing at the same address but pointing at different things", "body": "<pre><code>#define DebugPointer(p)                                         \\\n    {                                                           \\\n        __typeof__(p) p1 = p;                                   \\\n        printf(\"%8s %20s: %p\\n\", #p, \"address\", (void*)&amp;(p1));  \\\n        printf(\"%8s %20s: %p\\n\", #p, \"points to\", (void*)(p1)); \\\n    }\n</code></pre>\n\n<p>So, you are printing the address of <code>p1</code>, which is local to each invocation of <code>DebugPointer</code>, so it is allowed to be the same each time it is called.</p>\n\n<p>The purpose of <code>p1</code> seems to be to avoid multiplie evaluations of the macro parameter <code>p</code>. To accomplish your print goal, you can change your macro to take the address up front.</p>\n\n<pre><code>#define DebugPointer(p)                                         \\\n    do {                                                        \\\n        __typeof__(&amp;(p)) p1 = &amp;(p);                             \\\n        void *p2 = *p1;                                         \\\n        printf(\"%8s %20s: %p\\n\", #p, \"address\", (void*)p1);     \\\n        printf(\"%8s %20s: %p\\n\", #p, \"points to\", p2);          \\\n    } while(0)\n</code></pre>\n\n<hr>\n\n<p>Here is the <code>Sasprintf</code> definition I found <a href=\"https://github.com/b-k/21st-Century-Examples/blob/master/sasprintf.c\" rel=\"nofollow noreferrer\">online</a>:</p>\n\n<pre><code>#define Sasprintf(write_to,  ...) {           \\\n    char *tmp_string_for_extend = (write_to); \\\n    asprintf(&amp;(write_to), __VA_ARGS__);       \\\n    free(tmp_string_for_extend);              \\\n}\n</code></pre>\n\n<p>It is using the temporary to store the original pointer that was supposed to be allocated by the previous call to <code>Sasprintf</code> (or initialized to <code>NULL</code>). The <code>asprintf</code> call may change where this is pointing. Now, the macro can call <code>free</code> on the original pointer.</p>\n\n<p>To avoid multiple evaluations of the <code>write_to</code> parameter, its address can be obtained up front.</p>\n\n<pre><code>#define Sasprintf(write_to,  ...) do { \\\n    char **dest = &amp;(write_to);         \\\n    free(*dest);                       \\\n    asprintf(dest, __VA_ARGS__);       \\\n} while(0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1540414275, "last_edit_date": 1540414275, "creation_date": 1540411763, "answer_id": 52977219, "question_id": 52977103, "link": "https://stackoverflow.com/questions/52977103/two-pointers-residing-at-the-same-address-but-pointing-at-different-things/52977219#52977219", "title": "Two pointers residing at the same address but pointing at different things", "body": "<p>Two pointers, <code>tmp</code> and <code>s</code>, do share the same location; however, they do so at different times.</p>\n\n<p>The reason for the above is this declaration:</p>\n\n<pre><code>__typeof__(p) p1 = p;\n</code></pre>\n\n<p>It makes a copy of <code>p</code> into <code>p1</code>, which is a variable local to the enclosing block of code. The <code>DebugPointer</code> macro gets expanded two times, each time creating a new local variable called <code>p1</code> inside temporary scope.</p>\n\n<p>Compiler notices that two variables <code>p1</code> never exist together at the same time, so it reuses the space of the first instance of <code>p1</code> to store the value of the second instance of <code>p1</code>.</p>\n\n<p><strong>Note:</strong> Now you are probably wondering why you need <code>p1</code> in the first place. The reason for it is that you are applying the address-of <code>&amp;</code> operator to it. You could write <code>&amp;(p)</code> instead, but such macro would be fragile: it would work in your example (<a href=\"https://ideone.com/6iiAEw\" rel=\"nofollow noreferrer\">demo</a>), but calling, say, <code>DebugPointer(tmp+1)</code> would cause a compile error.</p>\n"}], "owner": {"reputation": 19680, "user_id": 562222, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jgGXb.jpg?s=128&g=1", "display_name": "qed", "link": "https://stackoverflow.com/users/562222/qed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 52977217, "answer_count": 3, "score": 2, "last_activity_date": 1540418169, "creation_date": 1540411278, "question_id": 52977103, "link": "https://stackoverflow.com/questions/52977103/two-pointers-residing-at-the-same-address-but-pointing-at-different-things", "title": "Two pointers residing at the same address but pointing at different things", "body": "<p>Here is the code:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdarg.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define DebugPointer(p)                                         \\\n    {                                                           \\\n        __typeof__(p) p1 = p;                                   \\\n        printf(\"%8s %20s: %p\\n\", #p, \"address\", (void*)&amp;(p1));  \\\n        printf(\"%8s %20s: %p\\n\", #p, \"points to\", (void*)(p1)); \\\n    }\n\n\n// memory-safe asprintf, implemented as a macro\n#define Sasprintf(write_to, ...)            \\\n    {                                       \\\n        char* tmp = (write_to);             \\\n        printf(\"==== before asprintf\\n\");   \\\n        DebugPointer(tmp);                  \\\n        DebugPointer(write_to);             \\\n        asprintf(&amp;(write_to), __VA_ARGS__); \\\n        printf(\"==== after  asprintf\\n\");   \\\n        DebugPointer(tmp);                  \\\n        DebugPointer(write_to);             \\\n        free(tmp);                          \\\n    }\n\nint main() {\n    char* s = NULL;\n    int n = 0;\n    Sasprintf(s, \"%s\", \"aa\\n\");\n    Sasprintf(s, \"%s%s\", s, \"bb\\n\");\n    Sasprintf(s, \"%s%s\", s, \"cc\\n\");\n    printf(\"string: %s\\n\", s);\n    free(s);\n}\n</code></pre>\n\n<p>The <code>Sasprintf</code> macro is taken from the 21st century c book. I am trying to understand how it works. The results looks a bit strange:</p>\n\n<pre><code>==== before asprintf\n     tmp              address: 0x7ffe8b767cd8\n     tmp            points to: (nil)\n       s              address: 0x7ffe8b767cd8\n       s            points to: (nil)\n==== after  asprintf\n     tmp              address: 0x7ffe8b767cd8\n     tmp            points to: (nil)\n       s              address: 0x7ffe8b767cd8\n       s            points to: 0x560969cae6e0\n==== before asprintf\n     tmp              address: 0x7ffe8b767cd8\n     tmp            points to: 0x560969cae6e0\n       s              address: 0x7ffe8b767cd8\n       s            points to: 0x560969cae6e0\n==== after  asprintf\n     tmp              address: 0x7ffe8b767cd8\n     tmp            points to: 0x560969cae6e0\n       s              address: 0x7ffe8b767cd8\n       s            points to: 0x560969cae700\n==== before asprintf\n     tmp              address: 0x7ffe8b767cd8\n     tmp            points to: 0x560969cae700\n       s              address: 0x7ffe8b767cd8\n       s            points to: 0x560969cae700\n==== after  asprintf\n     tmp              address: 0x7ffe8b767cd8\n     tmp            points to: 0x560969cae700\n       s              address: 0x7ffe8b767cd8\n       s            points to: 0x560969cae6e0\nstring: aa\nbb\ncc\n</code></pre>\n\n<p>It looks like the two pointers <code>tmp</code> and <code>s</code> are residing at the same address but pointing at different things. Why?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540411606, "post_id": 52976961, "comment_id": 92860753, "body": "I tried this an got another error of error: invalid type argument of \u2018-&gt;\u2019 (have \u2018Room\u2019)"}, {"owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "reply_to_user": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540412477, "post_id": 52976961, "comment_id": 92861175, "body": "where does this <code>printf</code> appear.  In that context, what is <code>x</code>?"}, {"owner": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540413022, "post_id": 52976961, "comment_id": 92861397, "body": "It in in a function where I was trying to print out the name member variable of the Room structs in outboundConnections. Here is the function: <code>void testConnections(Room x) { \tint i; \tfor(i=0; i&lt;6; i++) \t{ \t\tprintf(&quot;Connection %i: %s&quot;, i, x-&gt;outboundConnections[i]-&gt;name); \t} }</code>"}], "tags": [], "owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "is_accepted": false, "score": 1, "last_activity_date": 1540410941, "last_edit_date": 1540410941, "creation_date": 1540410787, "answer_id": 52976961, "question_id": 52976922, "link": "https://stackoverflow.com/questions/52976922/accessing-values-in-array-of-pointer-inside-of-a-struct/52976961#52976961", "title": "Accessing values in array of pointer inside of a struct", "body": "<p><code>outboundConnections</code> is an array of pointers, so <code>outboundConnections[i]</code> is a <code>Room *</code>. Also, <code>x</code> is a pointer as well.  You should use <code>-&gt;</code> (as opposed to <code>.</code>) to access its members: </p>\n\n<pre><code>x-&gt;outboundConnections[i]-&gt;name\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540411851, "post_id": 52976968, "comment_id": 92860867, "body": "I tried this an got another error of error: invalid type argument of \u2018-&gt;\u2019 (have \u2018Room\u2019)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540412013, "post_id": 52976968, "comment_id": 92860948, "body": "I don&#39;t understand that. <code>x</code> is <code>Room*</code>, not <code>Room</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540412075, "post_id": 52976968, "comment_id": 92860979, "body": "You didn&#39;t do <code>temp-&gt;</code>, did you? <code>temp</code> is a structure, not a pointer."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540412132, "post_id": 52976968, "comment_id": 92861010, "body": "You need to go back to your textbook or tutorial and review the sections on structures and pointers, so you know when to use <code>.</code> or <code>-&gt;</code>."}, {"owner": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540413354, "post_id": 52976968, "comment_id": 92861526, "body": "I did not use <code>temp</code> to try to access.  And I am reviewing those sections/lectures, I am just having issues because I have not done something like this in the C language."}, {"owner": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540413626, "post_id": 52976968, "comment_id": 92861660, "body": "It was in a function I wrote just to test accessing the <code>outboundConnection</code> array, but I just moved it into <code>main</code> and used: <code>printf(&quot;Connection 1: %s&quot;, gameRooms[1]-&gt;outboundConnections[1]-&gt;name);</code> I am still getting the same error here. <code>gameRooms</code> is a global array of Room structs."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540413728, "post_id": 52976968, "comment_id": 92861708, "body": "What is the declaration of <code>gameRooms</code>? Is it <code>Room *gameRooms[]</code> or <code>Room GameRooms[]</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540413830, "post_id": 52976968, "comment_id": 92861752, "body": "If it&#39;s an array of <code>Room</code> structs then it should be <code>gameRooms[1].outboundConnections[1]-&gt;name</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540413843, "post_id": 52976968, "comment_id": 92861758, "body": "You use <code>.</code> with structs, you use <code>-&gt;</code> with pointers to structs."}, {"owner": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540414118, "post_id": 52976968, "comment_id": 92861891, "body": "The declaration is <code>Room gameRooms[7]</code> which makes sense that I would use <code>gameRooms[1].outboundConnections[1]-&gt;name</code> instead of <code>-&gt;</code> notation. But now I am getting <code>error: dereferencing pointer to incomplete type</code> on the <code>-&gt;name</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 1, "creation_date": 1540414162, "post_id": 52976968, "comment_id": 92861912, "body": "You don&#39;t have <code>struct Room</code> declared anywhere."}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1540414595, "post_id": 52976968, "comment_id": 92862096, "body": "Recommend not <code>typedef</code>ing <code>stuct</code>s; it&#39;s confusing; (see <a href=\"https://www.kernel.org/doc/html/v4.10/process/coding-style.html#typedefs\" rel=\"nofollow noreferrer\">kernel.org/doc/html/v4.10/process/coding-style.html#typedefs</a>&zwnj;&#8203;)."}, {"owner": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "edited": false, "score": 0, "creation_date": 1540414661, "post_id": 52976968, "comment_id": 92862132, "body": "Yes, that was the issue, I did not know I also needed to place the name of the struct after the <code>typedef struct</code>.  So now I just need to use <code>.</code> notation for accessing the <code>outboundConnections</code> array and <code>-&gt;</code> notation for accessing the member variables of the Rooms in the array.  Thank you very much."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1540414242, "last_edit_date": 1540414242, "creation_date": 1540410817, "answer_id": 52976968, "question_id": 52976922, "link": "https://stackoverflow.com/questions/52976922/accessing-values-in-array-of-pointer-inside-of-a-struct/52976968#52976968", "title": "Accessing values in array of pointer inside of a struct", "body": "<p><code>outboundConnections</code> is an array of pointers, so you have to dereference the pointer to get to the <code>name</code> member.</p>\n\n<pre><code>printf(\"Connection %i: %s\", i, x-&gt;outboundConnections[i]-&gt;name);\n</code></pre>\n\n<p>In all cases where you write <code>(*x).something</code> you can simplify that to <code>x-&gt;something</code>.</p>\n\n<p>Another problem is in the declaration of the structure itself. You have:</p>\n\n<pre><code>struct Room *outboundConnections[6]; \n</code></pre>\n\n<p>but you've never declared <code>struct Room</code>. You declared an anonymous structure and then gave it a <code>typedef Room</code>. You need to change the declaration to:</p>\n\n<pre><code>typedef struct Room\n{\n    char* name; //Name of the room\n    char type; //Type of room\n    int numOutboundConnections; //Number of rooms connected\n    int isSelected;; // 0 means not selected, 1 means selected \n    struct Room *outboundConnections[6]; //Pointers to rooms connected\n} Room;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "is_accepted": false, "score": 1, "last_activity_date": 1540412176, "creation_date": 1540412176, "answer_id": 52977318, "question_id": 52976922, "link": "https://stackoverflow.com/questions/52976922/accessing-values-in-array-of-pointer-inside-of-a-struct/52977318#52977318", "title": "Accessing values in array of pointer inside of a struct", "body": "<p>First off, replace the <code>(*x).</code> notation with <code>x-&gt;</code> as others have pointed out.</p>\n\n<p>But more importantly, when you do this:</p>\n\n<pre><code>(*x).outboundConnections[(*x).numOutboundConnections] = malloc(sizeof(Room));\n(*x).outboundConnections[(*x).numOutboundConnections] = y;\n</code></pre>\n\n<p>You just leaked <code>sizeof(Room)</code> bytes. The <code>malloc</code> call is unnecessary if you're storing pointers to <code>Room</code>. You would only need it if you were storing a <em>copy</em> of <code>Room</code>. So your code should look like this if you're storing pointers:</p>\n\n<pre><code>x-&gt;outboundConnections[x-&gt;numOutboundConnections] = y;\n</code></pre>\n\n<p>Or this if you're storing a copy of <code>Room</code>:</p>\n\n<pre><code>x-&gt;outboundConnections[x-&gt;numOutboundConnections] = malloc(sizeof(Room));\n*x-&gt;outboundConnections[x-&gt;numOutboundConnections] = *y;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8947039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1e076f081e12543fdfafa2db338285?s=128&d=identicon&r=PG&f=1", "display_name": "Teastruction", "link": "https://stackoverflow.com/users/8947039/teastruction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 52976968, "answer_count": 3, "score": 1, "last_activity_date": 1540414242, "creation_date": 1540410623, "question_id": 52976922, "link": "https://stackoverflow.com/questions/52976922/accessing-values-in-array-of-pointer-inside-of-a-struct", "title": "Accessing values in array of pointer inside of a struct", "body": "<p>I am trying to access the values of struct members inside an array of struct pointers inside of a struct.  So I have a struct Room that contains an array of pointers to other Rooms called outboundConnection[].  I keep getting the error </p>\n\n<blockquote>\n  <p>error: request for member \u2018name\u2019 in something not a structure or union\n  printf(\"Connection %i: %s\", i, x.outboundConnections[i].name);</p>\n</blockquote>\n\n<p>My struct is set up like this:</p>\n\n<pre><code>typedef struct\n{\n    char* name; //Name of the room\n    char type; //Type of room\n    int numOutboundConnections; //Number of rooms connected\n    int isSelected;; // 0 means not selected, 1 means selected \n    struct Room *outboundConnections[6]; //Pointers to rooms connected\n} Room;\n// Room constructor used for filling roomBank\nRoom room_init(char* name, int s, int c)\n{\n    Room temp;\n    temp.name = calloc(16, sizeof(char));\n    strcpy(temp.name, name);\n    temp.isSelected = s;\n    temp.numOutboundConnections = c;\n    return temp;\n}\n</code></pre>\n\n<p>I am adding connections  to the outboundConnections array using this function:</p>\n\n<pre><code>void ConnectRoom(Room *x, Room *y)\n{\n    (*x).outboundConnections[(*x).numOutboundConnections] = malloc(sizeof(Room));\n    (*x).outboundConnections[(*x).numOutboundConnections] = y;\n    (*x).numOutboundConnections++;\n    (*y).outboundConnections[(*y).numOutboundConnections] = malloc(sizeof(Room));\n    (*y).outboundConnections[(*y).numOutboundConnections] = x;\n    (*y).numOutboundConnections++;\n}\n</code></pre>\n\n<p>I am having issues with getting the name struct member in the outboundConnections array.</p>\n\n<pre><code>printf(\"Connection %i: %s\", i, x.outboundConnections[i].name);\n</code></pre>\n\n<p>I have tried using ->name and (*x.outboundConnections[i]).name. I am wondering if I am even correctly assigning Rooms to the outboundConnections array or if my issue is how I am trying to access the member variable.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1540408796, "post_id": 52976416, "comment_id": 92859451, "body": "It looks like <code>mod</code> was a function in the other language. So <code>%(year - 1, 100)</code> becomes <code>(year - 1) % 100</code>, etc"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540408802, "post_id": 52976416, "comment_id": 92859456, "body": "You can&#39;t simply replace a function call with <code>%</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10553962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa714759be667bc895e1bdcea721fd8?s=128&d=identicon&r=PG&f=1", "display_name": "OrkiZMajorki", "link": "https://stackoverflow.com/users/10553962/orkizmajorki"}, "edited": false, "score": 0, "creation_date": 1540409477, "post_id": 52976543, "comment_id": 92859782, "body": "Thank you! I was just reading a link and figured out something similiar to this, minus some of the brackets that you included"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "is_accepted": true, "score": 1, "last_activity_date": 1540409086, "creation_date": 1540409086, "answer_id": 52976543, "question_id": 52976416, "link": "https://stackoverflow.com/questions/52976416/calculating-the-day-of-the-week-using-gauss-algorithm/52976543#52976543", "title": "Calculating the day of the week using Gauss Algorithm", "body": "<p>Gauss'</p>\n\n<blockquote>\n  <p>R(1 + 5R(A - 1, 4) + 4R(A - 1, 100) + 6R(A - 1, 400), 7)</p>\n</blockquote>\n\n<p>should be equivalent to</p>\n\n<pre><code>int week_day = (1 + 5 * (year - 1) % 4) + 4 * ((year - 1) % 100) + 6 * ((year - 1) % 400) % 7;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10553962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa714759be667bc895e1bdcea721fd8?s=128&d=identicon&r=PG&f=1", "display_name": "OrkiZMajorki", "link": "https://stackoverflow.com/users/10553962/orkizmajorki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 52976543, "answer_count": 1, "score": -4, "last_activity_date": 1540409086, "creation_date": 1540408526, "question_id": 52976416, "link": "https://stackoverflow.com/questions/52976416/calculating-the-day-of-the-week-using-gauss-algorithm", "title": "Calculating the day of the week using Gauss Algorithm", "body": "<p>I'm trying to create a program which will calculate the same date in three different ways. I'm currently stuck on calculating the day of the week, as I need this to calculate the ISO week day. I've got an algorithm that I can use, and it is the one which I've got in my code, with the only difference being that the % sign in my code is replaced by the word \"mod\" in the algorithm.</p>\n\n<p>When I run this, I get an error saying \"Expected expression before % token\". I've looked this up but didn't find any results. I've also tried to look at other ways of doing it, and found the Sakomoto Algorithm, but I don't exactly understand how that works. For a possible solution, I was thinking that I maybe need to create a function called mod, but I'm not entirely sure what I would need to put in there.</p>\n\n<pre><code>int day_of_the_week(int year)\n{\nint week_day;\nweek_day = %(1+5 * %(year - 1, 4) + 4 * %(year - 1, 100) + 6 * %(year-1, \n400), 7);\nprintf(\"The day of the week is %d\\n\", week_day);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "texas-instruments"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540410456, "post_id": 52976314, "comment_id": 92860252, "body": "Redefine as follows (e.g.): <code>#define x3(offset_) ADC0_read[offset_]</code> and I think that will work. Likewise, for your other macros."}, {"owner": {"reputation": 1, "user_id": 10553915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579f57f04cebfe8b7e1b939b7a8d6a78?s=128&d=identicon&r=PG&f=1", "display_name": "Luiz Arthur Tarralo Passatuto", "link": "https://stackoverflow.com/users/10553915/luiz-arthur-tarralo-passatuto"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540419227, "post_id": 52976314, "comment_id": 92863679, "body": "@CraigEstey now he gives the follow error in expression <code>y0_aux = y0_aux + *x3(i);</code> <i>operand of &quot;*&quot; must be a pointer</i> . I have changed to a pointer but nothing happens, what I have to do?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540424186, "post_id": 52976314, "comment_id": 92865102, "body": "Follow [original] instructions :-). That is, I said change the <code>#define</code> but <i>not</i> anything else. Your original equation was <code>y0_aux = y0_aux + x3(i)</code>. With that, and my suggested <code>#define</code> change, it would have worked. But, also, you [incorrectly] added back a <code>*</code> by doing <code>y0_aux = y0_aux + *x3(i)</code>. Please understand that to dereference a pointer with offset, you can do: <code>*(ptr + (off))</code> OR [and this is often preferable]: <code>ptr[off]</code>. Your second attempt was the equivalent of <code>*ptr[off]</code>, which is not the same. So, just remove the extra <code>*</code>"}, {"owner": {"reputation": 1, "user_id": 10553915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579f57f04cebfe8b7e1b939b7a8d6a78?s=128&d=identicon&r=PG&f=1", "display_name": "Luiz Arthur Tarralo Passatuto", "link": "https://stackoverflow.com/users/10553915/luiz-arthur-tarralo-passatuto"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540427177, "post_id": 52976314, "comment_id": 92865733, "body": "I have follow your original instructions :) But not worked :( This is why I have made the change. However, even adopting what you said, the error still persists."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540427824, "post_id": 52976314, "comment_id": 92865852, "body": "At this point, I&#39;d edit your question and post [more of] your complete code, including the definition(s) of <code>ADC0_read</code>, etc. My assumption was that it was something like <code>#define ADC0_read 0x8010</code>. And, the definitions of <code>y0_aux</code>, etc. Along with that, post the exact error messages as well"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540427915, "post_id": 52976314, "comment_id": 92865866, "body": "Also, note that <code>^</code> is the XOR operator [and <i>not</i> &quot;raise to a power&quot;]. So, if you&#39;re trying to square a number, <code>y_1 = sqrt(ya1^2 + yb1^2)</code> while syntactically correct is probably suspect and should be <code>y_1 = sqrt((ya1 * ya1) + (yb1 * yb1))</code>. <code>ya1 * ya1</code> is probably faster than (e.g.) <code>pow(ya1,2)</code>"}, {"owner": {"reputation": 1, "user_id": 10553915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579f57f04cebfe8b7e1b939b7a8d6a78?s=128&d=identicon&r=PG&f=1", "display_name": "Luiz Arthur Tarralo Passatuto", "link": "https://stackoverflow.com/users/10553915/luiz-arthur-tarralo-passatuto"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540435531, "post_id": 52976314, "comment_id": 92867508, "body": "@CraigEstey I followed your instructions and edited the question as requested, I hope to be clearer and I thank you heartily for the help. The only error in the control code is now in the line of the first calculation of y0_aux, that you can see in the code. Thank you one more time!!"}], "answers": [{"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1540437539, "creation_date": 1540437539, "answer_id": 52980847, "question_id": 52976314, "link": "https://stackoverflow.com/questions/52976314/call-must-have-pointer-problem-with-ccs/52980847#52980847", "title": "Call must have pointer - problem with CCS", "body": "<p><em>Caveat:</em> This may be incomplete as I'm not sure about your final result, but we can get the compilation errors out. I had to take a slight liberty to add a <code>main</code> function so I could get something compilable.</p>\n\n<p>Here is a reindented version of your latest program [which has errors]:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;math.h&gt;\n\n// declaration of pointers to PIN read\n#define F_SAMPLE   2000\n#define  x0    *ADC3_read\n#define  x1    *ADC2_read\n#define  x2     *ADC1_read\n#define  x3     *ADC0_read\n#define  x4     *ADC4_read\n\nint\nmain(void)\n{\n\n    // declaration of variables\n    int PI = 3.14159;\n    int teste = 0;\n    float y_0,\n     ya1,\n     yb1,\n     y_1;\n    float y0_aux,\n     ya1_aux,\n     yb1_aux;\n    int alfa,\n     i,\n     j;\n\n    // declaration of PIN read\n    uint32_t ADC_read[5];\n    uint32_t *ADC0_read = &amp;ADC_read[0];\n    uint32_t *ADC1_read = &amp;ADC_read[1];\n    uint32_t *ADC2_read = &amp;ADC_read[2];\n    uint32_t *ADC3_read = &amp;ADC_read[3];\n    uint32_t *ADC4_read = &amp;ADC_read[4];\n\n    // control code\n    for (i = 0; i &lt;= 12000; i++) {\n        alfa = alfa + (2 * PI / 200);\n        if (alfa &gt;= 2 * PI)\n            alfa = alfa - 2 * PI;\n        j++;\n\n        // error = identifier \"x3\" is undefined\n        y0_aux = y0_aux + x3[i];\n        ya1_aux = ya1_aux + x3[i] * sin(alfa);\n        yb1_aux = yb1_aux + x3[i] * cos(alfa);\n\n        if (j == 200) {\n            y_0 = y0_aux / 200;\n            ya1 = ya1_aux / 200;\n            yb1 = yb1_aux / 200;\n\n            y_1 = sqrt((ya1 * ya1) + (yb1 * yb1));\n\n            y0_aux = 0;\n            ya1_aux = 0;\n            yb1_aux = 0;\n            j = 0;\n        }\n    }\n}\n</code></pre>\n\n<p>This is the <code>gcc</code> error output:</p>\n\n<pre><code>fix1.c: In function \u2018main\u2019:\nfix1.c:9:17: error: invalid type argument of unary \u2018*\u2019 (have \u2018uint32_t {aka unsigned int}\u2019)\n #define  x3     *ADC0_read\n                 ^\nfix1.c:46:21: note: in expansion of macro \u2018x3\u2019\n   y0_aux = y0_aux + x3[i];\n                     ^~\nfix1.c:9:17: error: invalid type argument of unary \u2018*\u2019 (have \u2018uint32_t {aka unsigned int}\u2019)\n #define  x3     *ADC0_read\n                 ^\nfix1.c:47:23: note: in expansion of macro \u2018x3\u2019\n   ya1_aux = ya1_aux + x3[i] * sin(alfa);\n                       ^~\nfix1.c:9:17: error: invalid type argument of unary \u2018*\u2019 (have \u2018uint32_t {aka unsigned int}\u2019)\n #define  x3     *ADC0_read\n                 ^\nfix1.c:48:23: note: in expansion of macro \u2018x3\u2019\n   yb1_aux = yb1_aux + x3[i] * cos(alfa);\n                       ^~\n</code></pre>\n\n<p>Here is one way to change things [this compiles cleanly]:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;math.h&gt;\n\n// declaration of pointers to PIN read\n#define F_SAMPLE   2000\n#define  x0    ADC3_read\n#define  x1    ADC2_read\n#define  x2    ADC1_read\n#define  x3    ADC0_read\n#define  x4    ADC4_read\n\nint\nmain(void)\n{\n\n    // declaration of variables\n    int PI = 3.14159;\n    int teste = 0;\n    float y_0,\n     ya1,\n     yb1,\n     y_1;\n    float y0_aux,\n     ya1_aux,\n     yb1_aux;\n    int alfa,\n     i,\n     j;\n\n    // declaration of PIN read\n    uint32_t ADC_read[5];\n    uint32_t *ADC0_read = &amp;ADC_read[0];\n    uint32_t *ADC1_read = &amp;ADC_read[1];\n    uint32_t *ADC2_read = &amp;ADC_read[2];\n    uint32_t *ADC3_read = &amp;ADC_read[3];\n    uint32_t *ADC4_read = &amp;ADC_read[4];\n\n    // control code\n    for (i = 0; i &lt;= 12000; i++) {\n        alfa = alfa + (2 * PI / 200);\n        if (alfa &gt;= 2 * PI)\n            alfa = alfa - 2 * PI;\n        j++;\n\n        // error = identifier \"x3\" is undefined\n        y0_aux = y0_aux + x3[i];\n        ya1_aux = ya1_aux + x3[i] * sin(alfa);\n        yb1_aux = yb1_aux + x3[i] * cos(alfa);\n\n        if (j == 200) {\n            y_0 = y0_aux / 200;\n            ya1 = ya1_aux / 200;\n            yb1 = yb1_aux / 200;\n\n            y_1 = sqrt((ya1 * ya1) + (yb1 * yb1));\n\n            y0_aux = 0;\n            ya1_aux = 0;\n            yb1_aux = 0;\n            j = 0;\n        }\n    }\n}\n</code></pre>\n\n<p>Here is an alternate way to code it [this also compiles cleanly]:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;math.h&gt;\n\n// declaration of pointers to PIN read\n#define F_SAMPLE   2000\n#define  x0(o)    ADC3_read[o]\n#define  x1(o)    ADC2_read[o]\n#define  x2(o)    ADC1_read[o]\n#define  x3(o)    ADC0_read[o]\n#define  x4(o)    ADC4_read[o]\n\nint\nmain(void)\n{\n\n    // declaration of variables\n    int PI = 3.14159;\n    int teste = 0;\n    float y_0,\n     ya1,\n     yb1,\n     y_1;\n    float y0_aux,\n     ya1_aux,\n     yb1_aux;\n    int alfa,\n     i,\n     j;\n\n    // declaration of PIN read\n    uint32_t ADC_read[5];\n    uint32_t *ADC0_read = &amp;ADC_read[0];\n    uint32_t *ADC1_read = &amp;ADC_read[1];\n    uint32_t *ADC2_read = &amp;ADC_read[2];\n    uint32_t *ADC3_read = &amp;ADC_read[3];\n    uint32_t *ADC4_read = &amp;ADC_read[4];\n\n    // control code\n    for (i = 0; i &lt;= 12000; i++) {\n        alfa = alfa + (2 * PI / 200);\n        if (alfa &gt;= 2 * PI)\n            alfa = alfa - 2 * PI;\n        j++;\n\n        // error = identifier \"x3\" is undefined\n        y0_aux = y0_aux + x3(i);\n        ya1_aux = ya1_aux + x3(i) * sin(alfa);\n        yb1_aux = yb1_aux + x3(i) * cos(alfa);\n\n        if (j == 200) {\n            y_0 = y0_aux / 200;\n            ya1 = ya1_aux / 200;\n            yb1 = yb1_aux / 200;\n\n            y_1 = sqrt((ya1 * ya1) + (yb1 * yb1));\n\n            y0_aux = 0;\n            ya1_aux = 0;\n            yb1_aux = 0;\n            j = 0;\n        }\n    }\n}\n</code></pre>\n\n<p>But, indexing off from <code>ADC0_read</code> doesn't make sense to me. Your <code>for</code> loop goes to 12000, but <code>ADC_read</code> has only 5 elements, so <em>either</em> variant above will probably segfault because you're going way past the end of the array.</p>\n\n<p>More likely, you may want something like:</p>\n\n<pre><code>uint32_t ADC_read[12000];\n\n#define x3(o)   ADC_read[(o) + 0]\n#define x2(o)   ADC_read[(o) + 1]\n...\n</code></pre>\n\n<p>Honestly, I don't see how the individual pointers (<code>ADC3_read</code>, etc.) fit in [well]</p>\n"}], "owner": {"reputation": 1, "user_id": 10553915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579f57f04cebfe8b7e1b939b7a8d6a78?s=128&d=identicon&r=PG&f=1", "display_name": "Luiz Arthur Tarralo Passatuto", "link": "https://stackoverflow.com/users/10553915/luiz-arthur-tarralo-passatuto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540437539, "creation_date": 1540408157, "last_edit_date": 1540435389, "question_id": 52976314, "link": "https://stackoverflow.com/questions/52976314/call-must-have-pointer-problem-with-ccs", "title": "Call must have pointer - problem with CCS", "body": "<p>I am newbie here but have a problem without answer. I'm working with a TM4C1294 from Texas and in code there are countless errors. But  at first, I have this code. How you can see, x3 have the read from PIN ADC0, but the error give to me in the lane is (obs. ignore asterick before # and the code is not complete because the rest of the body in the CCS is too large). Thanks for the attention!! </p>\n\n<pre><code> %declaration of pointers to PIN read\n #define F_SAMPLE   2000    \n #define  x0    *ADC3_read  \n #define  x1    *ADC2_read  \n #define  x2     *ADC1_read  \n #define  x3     *ADC0_read  \n #define  x4     *ADC4_read\n\n %declaration of variables\n int PI = 3.14159;\n int teste = 0;\n float y_0, ya1, yb1, y_1;\n float y0_aux, ya1_aux, yb1_aux;\n int alfa, i, j;\n\n %declaration of PIN read\n uint32_t ADC_read[5];              \n uint32_t *ADC0_read=&amp;ADC_read[0];  \n uint32_t *ADC1_read=&amp;ADC_read[1];  \n uint32_t *ADC2_read=&amp;ADC_read[2];   \n uint32_t *ADC3_read=&amp;ADC_read[3];   \n uint32_t *ADC4_read=&amp;ADC_read[4];\n\n%control code\n   for( i=0; i &lt;= 12000; i++)\n{\n    alfa = alfa + (2*PI/200);\n   if (alfa &gt;= 2*PI)\n      alfa = alfa - 2*PI;\nj++;\ny0_aux = y0_aux + x3[i]; %error=identifier \"x3\" is undefined \nya1_aux = ya1_aux + x3[i]*sin(alfa); \nyb1_aux = yb1_aux + x3[i]*cos(alfa); \nif(j==200){\n   y_0 = y0_aux/200;\n   ya1 = ya1_aux/200;\n   yb1 = yb1_aux/200;\n\n  y_1 = sqrt((ya1 * ya1) + (yb1 * yb1)); \n\n  y0_aux = 0;\n  ya1_aux = 0;\n  yb1_aux = 0;\n  j = 0;\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1540406891, "post_id": 52975975, "comment_id": 92858559, "body": "Are you restricted to those structs for a reason?  Putting head and tail in every node is pretty horrible\u2026 much better to have one pointer to each in a container or global variable.  With your existing strucutres you&#39;ll have to iterate through the entire list to update pointers every time you modify the list\u2026"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540407118, "post_id": 52975975, "comment_id": 92858659, "body": "To achieve &quot;the goal is to add an item&quot; <i>to</i> &quot;a singularly linked list with a head and tail.&quot; only takes a <code>typedef struct myNode{      struct myNode* next;     CarObjects* data; } MyList;</code>.  Aside from adding to the list, what other functions are needed?"}, {"owner": {"reputation": 21, "user_id": 10434548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec8b77148b07ecd13d3edcf17255ccc?s=128&d=identicon&r=PG&f=1", "display_name": "decentProgrammer", "link": "https://stackoverflow.com/users/10434548/decentprogrammer"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540407477, "post_id": 52975975, "comment_id": 92858856, "body": "@chux there isnt much functions needed, all im trying to do is just add an item to to the linked list, and checking if we&#39;re adding an item at the beginning or middle or end of a list with head and tail"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540407811, "post_id": 52975975, "comment_id": 92858988, "body": "&quot;just add an item to to the linked list,&quot; differs from &quot;Add an element ... by ascending order of the cars names&quot;.  Does the add function need to maintain the sort?"}, {"owner": {"reputation": 21, "user_id": 10434548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec8b77148b07ecd13d3edcf17255ccc?s=128&d=identicon&r=PG&f=1", "display_name": "decentProgrammer", "link": "https://stackoverflow.com/users/10434548/decentprogrammer"}, "edited": false, "score": 0, "creation_date": 1540408159, "post_id": 52975975, "comment_id": 92859152, "body": "yeah the add function should maintain the sort, it should know when its adding the car object, that this car that is being added, is in alphabetic ascending order"}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1540408238, "post_id": 52975975, "comment_id": 92859194, "body": "You would generally want them to be globals, so that <code>insertElementByTitle</code> would have access to them.  Or, better yet, <code>typedef struct CarNode_s { CarNode* head; CarNode* tail; } CarList</code>, <code>typedef struct CarNode_s { struct CarNode_s* next; CarObject* car; } CarNode;</code>, <code>void insertElementByTitle(CarList* someList, CarObject* someCar);</code>."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1540408339, "post_id": 52975975, "comment_id": 92859238, "body": "I&#39;d also think about getting rid of the pointer for <code>CarObject</code> in <code>CarNode</code>, too (just make it a <code>CarNode</code> instead of a <code>CarNode*</code>, that way you have one less slice of memory to worry about.  Whether that&#39;s the right option or not depends on how you plan to use it, though\u2026"}, {"owner": {"reputation": 21, "user_id": 10434548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec8b77148b07ecd13d3edcf17255ccc?s=128&d=identicon&r=PG&f=1", "display_name": "decentProgrammer", "link": "https://stackoverflow.com/users/10434548/decentprogrammer"}, "edited": false, "score": 0, "creation_date": 1540408620, "post_id": 52975975, "comment_id": 92859370, "body": "I&#39;m lost xd, I&#39;m sure what to do no more."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1540408930, "post_id": 52975975, "comment_id": 92859511, "body": "Does your list need to be sorted?  If so, by what?"}, {"owner": {"reputation": 21, "user_id": 10434548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec8b77148b07ecd13d3edcf17255ccc?s=128&d=identicon&r=PG&f=1", "display_name": "decentProgrammer", "link": "https://stackoverflow.com/users/10434548/decentprogrammer"}, "edited": false, "score": 0, "creation_date": 1540409267, "post_id": 52975975, "comment_id": 92859685, "body": "yes my list needs to be sorted by a car&#39;s name in alphabetic order, for example  toyota is added first to the list and then Honda. so the list should be re-ordered and Honda should be first then toyota"}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "reply_to_user": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1540416914, "post_id": 52975975, "comment_id": 92862970, "body": "What algorithms and data structures do you want? It sounds like you are keeping a singly-linked list ordered on insertion, O(n). You will probably need a comparison function of the form <code>int compare(const struct Car *, const struct Car *)</code> which is called by the insertion function. The tail on a singly linked list is probably useless. Probably a good idea to simplify according to @nemequ and don&#39;t use <code>typedef struct</code>, it&#39;s confusing, <code>struct Car { char ... struct Car *next; };</code> is all you need."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 10532809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-T50rPCN2dr0/AAAAAAAAAAI/AAAAAAAAAA8/WD7Z3fMixIo/photo.jpg?sz=128", "display_name": "Pintu Choudhary", "link": "https://stackoverflow.com/users/10532809/pintu-choudhary"}, "is_accepted": false, "score": -1, "last_activity_date": 1540409800, "creation_date": 1540409800, "answer_id": 52976711, "question_id": 52975975, "link": "https://stackoverflow.com/questions/52975975/singly-linked-list-head-and-tail-method/52976711#52976711", "title": "singly linked list head and tail method?", "body": "<p>At first properly define your structure. </p>\n\n<pre><code>typedef struct car{\nchar car_model[32],car_name[32];\n};\n\ntypedef struct myList{\nmyList * next;\ncar * carObject;\n};\n</code></pre>\n\n<p>Now, you are trying to insert as the Insertion Sort technique.</p>\n\n<pre><code>void insertElementByTitle(MyList* someList, CarObjects* someCar){\n\\\\I assume someList is pointing the head of the linked list\n\\\\One more assumption that, the Linked List is already sorted and need to inset\n\\\\someCar in the correct position.\nMyList *secondPointer = someList-&gt;next;\nwhile(secondPointer != null)\n{\n     if(ifCarIsInBetweenSomeListAndSecondPointer(someList,secondPointer,someCar))\n     {\n      someList-&gt;next = newNode(someCar);\n      someList-&gt;next-&gt;next=secondPointer;\n      break;\n     }\n  someList = secondPointer; secondPointer = secondPointer-&gt;next;\n}\nif(secondPointer == null)\n{\n     someList-&gt;next = newNode(someCar);\n}\n}\n</code></pre>\n\n<p>Now, you need two function</p>\n\n<pre><code>myNode* newNode(car * someCar);\nbool ifCarIsInBetweenSomeListAndSecondPointer(myNode *someList,myNode *secondPointer,car *someCar);\n\nmyNode* newNode(car * someCar){\nmyNode * t =(struct myNode*)malloc(sizeof(struct myNode));\nt-&gt;carObject = someCar;\nt-&gt;next= null;\nreturn t;\n}\n\nbool ifCarIsInBetweenSomeListAndSecondPointer(myNode *someList,myNode *secondPointer,car *someCar){\nif( (strcmp(someList-&gt;carObject-&gt;car_name,someCar-&gt;carObject)&lt;0) &amp;&amp;(strcmp(someCar-&gt;carObject,secondPointer-&gt;carObject-&gt;car_name)&lt;0))\n          return true;\nreturn false;\n}\n</code></pre>\n\n<p>Refer online reference such as <a href=\"https://www.geeksforgeeks.org/linked-list-set-1-introduction/\" rel=\"nofollow noreferrer\">geeksforgeeks-linked list</a>, to get better understanding. </p>\n"}], "owner": {"reputation": 21, "user_id": 10434548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec8b77148b07ecd13d3edcf17255ccc?s=128&d=identicon&r=PG&f=1", "display_name": "decentProgrammer", "link": "https://stackoverflow.com/users/10434548/decentprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 715, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540409800, "creation_date": 1540406677, "last_edit_date": 1540409668, "question_id": 52975975, "link": "https://stackoverflow.com/questions/52975975/singly-linked-list-head-and-tail-method", "title": "singly linked list head and tail method?", "body": "<p>I'm relatively new to c programming language, and was playing around to get familiar with it, but I'm not sure how to actually implement a linked list with the following structs and data I'm trying to do(below). Basically the goal is to add an item from a singly linked list with a head and tail.</p>\n\n<p>Update: I tried to do write some code in my add function, haven't sorted it but is that how it would look like?</p>\n\n<p><strong>CODE SOURCE</strong></p>\n\n<pre><code>typedef struct {\n    char car_model[32],car_name[32];\n\n} CarObjects;\n\ntypedef struct myNode{\n\n    struct myNode* next;\n    CarObjects* data;\n\n} MyList;\n\n//initialize list\nvoid declareList(MyList* someList){\n    someList-&gt;next = NULL;\n}\n\nvoid insertElementByTitle(MyList* someList, CarObjects* someCar){\n\n    //first case adding to an empty list.\n    if(someList == NULL){\n        someList = malloc(sizeof(MyList));\n        someList-&gt;data = someCar;\n        someList-&gt;next = NULL;\n    }\n//END OF first case adding to an empty list.\n\n//make thee list's head and tail node, point to the first element since its an empty list\n    someList-&gt;head = someList;\n    someList-&gt;tail = someList-&gt;head;\n\n\n    while(someList-&gt;next != NULL)\n       someList = someList-&gt;next;\n\n    someList-&gt;next = malloc(sizeof(MyList));\n    someList = someList-&gt;next;\n    someList-&gt;data = newBook;\n    someList-&gt;next = NULL;\n\n\n}\n\n\nint main(){\n\n\n   MyList* listHead= NULL;\n   MyList* listTail= NULL;\n\n\n   //Somehow add an element to the list\n\n\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1540406633, "post_id": 52975949, "comment_id": 92858434, "body": "Because <code>a</code> is an array, but <code>b</code> is not"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1540406704, "creation_date": 1540406704, "answer_id": 52975978, "question_id": 52975949, "link": "https://stackoverflow.com/questions/52975949/why-is-modification-of-array-b-possible/52975978#52975978", "title": "Why is modification of array b possible?", "body": "<p>When you declare an argument such as <code>int b[][3]</code>, what the compiler really translates it as is <code>int (*b)[3]</code>. That is, <code>b</code> is a <em>pointer</em> and not an array.</p>\n\n<p>Note that this translation only happens for function arguments, and only for the <em>first</em> \"dimension\".</p>\n"}], "owner": {"reputation": 25, "user_id": 10536094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4125d9abbdf4f14a7511534dbc857608?s=128&d=identicon&r=PG&f=1", "display_name": "xehob", "link": "https://stackoverflow.com/users/10536094/xehob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1540406700, "answer_count": 1, "score": 0, "last_activity_date": 1540406704, "creation_date": 1540406577, "question_id": 52975949, "link": "https://stackoverflow.com/questions/52975949/why-is-modification-of-array-b-possible", "closed_reason": "Duplicate", "title": "Why is modification of array b possible?", "body": "<p>a and b are both array name. why is ++b is permitted while ++a is not.</p>\n\n<pre><code>int main(void)\n{\nint a[3][3] = { 0 };\n\nfoo(a);\n\nreturn 0;\n}\nvoid foo(int b[][3])\n{\n++b;\n\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "compiler-errors"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1540406502, "post_id": 52975905, "comment_id": 92858374, "body": "You&#39;ve written out of bounds of some <b>previously</b> allocated object."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1540406570, "post_id": 52975905, "comment_id": 92858405, "body": "Compile with <code>-fsanitize=undefined</code> or run with <code>valgrind .&#47;a.out</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1540406591, "post_id": 52975905, "comment_id": 92858410, "body": "&quot;heap-buffer-overflow in criaNoObservador&quot;"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1540406599, "post_id": 52975905, "comment_id": 92858413, "body": "<code>(Observadores *)malloc(sizeof(Observadores *))</code> is a likely candidate for your problem. Compare <code>sizeof(Observadores *)</code> against <code>sizeof(Observadores)</code>."}], "owner": {"reputation": 35, "user_id": 9221443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22fd602acfc1f155f47af2a75eac4b1a?s=128&d=identicon&r=PG", "display_name": "user48571", "link": "https://stackoverflow.com/users/9221443/user48571"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "closed_date": 1540406827, "answer_count": 0, "score": 0, "last_activity_date": 1540406887, "creation_date": 1540406365, "question_id": 52975905, "link": "https://stackoverflow.com/questions/52975905/c-i-dont-understand-why-return-this-error", "closed_reason": "Duplicate", "title": "C - i don&#39;t understand why return this error", "body": "<p>I got this code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\ntypedef struct Est{\n    int id;\n    struct Est *nant;\n    struct Est *nseg;\n}Estrelas;\n\ntypedef struct ObsEst{\n    Estrelas *E;\n    struct ObsEst *nant;\n    struct ObsEst *nseg;\n}ObservadoresEstrelas;\n\ntypedef struct Obs{\n    int id;\n    ObservadoresEstrelas *OE;\n    struct Obs *nseg;\n    struct Obs *nant;\n}Observadores;\n\n\nObservadores* criaNoObservador();\nEstrelas* criaNoEstrela();\nObservadores *insertLastO(Observadores *L,Observadores *nv);\nEstrelas *insertLastE(Estrelas *L,Estrelas *nv);\n\n\nvoid mostralistaO(Observadores *L);\nvoid mostralistaOE(ObservadoresEstrelas *L);\nvoid mostralistaE(Estrelas *L);\nint main(int argc, const char * argv[]) {\n    int viEstrelas[5]={1,2,3,4,5};\n    int viObservadores[6]={12,23,34,41,53,74};\n\n    int i;\n    Observadores * Eles=NULL,*ListaO=NULL;\n    Estrelas * Elas =NULL,*ListaE=NULL;\n    for (i=0; i&lt;6; i++) {\n        Eles=criaNoObservador();\n        Eles-&gt;id=viObservadores[i];\n        ListaO=insertLastO(ListaO, Eles);\n    }\n    for (i=0; i&lt;5; i++) {\n        Elas=criaNoEstrela();\n        Elas-&gt;id=viEstrelas[i];\n        ListaE=insertLastE(ListaE, Elas);\n    }\n\n    mostralistaO(ListaO);\n    mostralistaE(ListaE);\n    return 0;\n}\nObservadores * criaNoObservador(){\n    Observadores *nv= (Observadores *)malloc(sizeof(Observadores *));\n    nv-&gt;id =0;\n    nv-&gt;OE=NULL;//ponteiro para no ObservadorEstrela\n    nv-&gt;nant=NULL;\n    nv-&gt;nseg=NULL;\n    return nv;\n}\nEstrelas * criaNoEstrela(){\n    Estrelas *nv= (Estrelas *)malloc(sizeof(Estrelas *));\n    nv-&gt;id =0;\n    nv-&gt;nant=NULL;\n    nv-&gt;nseg=NULL;\n    return nv;\n}\n\n\nObservadores * insertLastO(Observadores *L,Observadores *nv){\n    Observadores * aux =L;\n    if (L==NULL) {\n        return nv;\n    }\n    while (L-&gt;nseg!=NULL) {\n        L=L-&gt;nseg;\n    }\n    L-&gt;nseg=nv;\n    nv-&gt;nant=L;\n    return aux;\n}\nEstrelas *insertLastE(Estrelas *L,Estrelas *nv){\n    Estrelas * aux =L;\n    if (L==NULL) {\n        return nv;\n    }\n    while (L-&gt;nseg!=NULL) {\n        L=L-&gt;nseg;\n    }\n    L-&gt;nseg=nv;\n    nv-&gt;nant=L;\n    return aux;\n}\n\n\n\nvoid mostralistaO(Observadores *L){\n    if (L==NULL) {\n        printf(\"Nao tenho elementos!\\n\");\n    }\n    while (L!=NULL) {\n        if (L-&gt;nseg==NULL) {\n            printf(\"%d -&gt; NULL \\n\",L-&gt;id);\n            break;\n        }\n        printf(\"%d -&gt; \",L-&gt;id);\n        L=L-&gt;nseg;\n    }\n}\nvoid mostralistaE(Estrelas *L){\n    if (L==NULL) {\n        printf(\"Nao tenho elementos!\\n\");\n    }\n    while (L!=NULL) {\n        if (L-&gt;nseg==NULL) {\n            printf(\"%d -&gt; NULL \\n\",L-&gt;id);\n            break;\n        }\n        printf(\"%d -&gt; \",L-&gt;id);\n        L=L-&gt;nseg;\n    }\n}\n</code></pre>\n\n<p>I try compile the code on <a href=\"https://repl.it\" rel=\"nofollow noreferrer\">https://repl.it</a> but return this:</p>\n\n<blockquote>\n  <p>main: malloc.c:2406: sysmalloc: Assertion `(old_top == initial_top (av) &amp;&amp; old_size == 0) || ((unsigned long) (old_size) >= MINSIZE &amp;&amp; prev_inuse (old_top) &amp;&amp; ((unsigned long) old_end &amp; (pagesize - 1)) == 0)' failed.</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "accelerometer", "i2c", "gyroscope", "magnetometer"], "answers": [{"comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 1, "creation_date": 1540411667, "post_id": 52977069, "comment_id": 92860777, "body": "Hey, that&#39;s a really nice small library. Kudos!"}, {"owner": {"reputation": 1, "user_id": 10488756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b41d05ecd6364b65164b3868f2a8198?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy Kunnen", "link": "https://stackoverflow.com/users/10488756/eddy-kunnen"}, "edited": false, "score": 0, "creation_date": 1540547472, "post_id": 52977069, "comment_id": 92915820, "body": "Thanks for the swift feedback. I&#39;m studying it. It seems that it all happens in the line with the ioctl, with I2C_RDWR of which I find more information on <a href=\"https://elixir.bootlin.com/linux/v4.1/source/include/uapi/linux/i2c-dev.h#L49\" rel=\"nofollow noreferrer\">elixir.bootlin.com/linux/v4.1/source/include/uapi/linux/&hellip;</a>. I learn here that the structure you define i2c_rdwr_ioctl_data is mentionned. So, do I understand correctly that it should be kind of uniquely defined? Next I&#39;m still puzzled with the variable &quot;cnt&quot; in my examply, that tells me how much bytes should be written/read."}, {"owner": {"reputation": 1780, "user_id": 9973881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f098a1718e634370611ccc2cbf5bde4?s=128&d=identicon&r=PG", "display_name": "Michael Powers", "link": "https://stackoverflow.com/users/9973881/michael-powers"}, "edited": false, "score": 0, "creation_date": 1540558141, "post_id": 52977069, "comment_id": 92921635, "body": "I expanded my answer to hopefully cover your additional questions."}, {"owner": {"reputation": 1, "user_id": 10488756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b41d05ecd6364b65164b3868f2a8198?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy Kunnen", "link": "https://stackoverflow.com/users/10488756/eddy-kunnen"}, "edited": false, "score": 0, "creation_date": 1542101391, "post_id": 52977069, "comment_id": 93437570, "body": "Thank you very much for your help. It is indeed a journey that needs good luck. I&#39;m now able to communicate with the chip allowing me a further understanding/building."}], "tags": [], "owner": {"reputation": 1780, "user_id": 9973881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f098a1718e634370611ccc2cbf5bde4?s=128&d=identicon&r=PG", "display_name": "Michael Powers", "link": "https://stackoverflow.com/users/9973881/michael-powers"}, "is_accepted": false, "score": 2, "last_activity_date": 1540558108, "last_edit_date": 1540558108, "creation_date": 1540411175, "answer_id": 52977069, "question_id": 52975817, "link": "https://stackoverflow.com/questions/52975817/setup-i2c-reading-and-writing-in-c-language/52977069#52977069", "title": "Setup I2C reading and writing in c language", "body": "<p>I recently wrote a <a href=\"https://github.com/swedishborgie/libmma8451\" rel=\"nofollow noreferrer\">library similar to what you're describing</a> for the MMA8451 i2c accelerometer.</p>\n\n<p>Essentially i2c controllers in Linux get assigned a device node (e.g. <code>/dev/i2c-1</code>). You'll open this device node as a file <a href=\"https://github.com/swedishborgie/libmma8451/blob/master/mma8451.c#L31\" rel=\"nofollow noreferrer\">like this</a>:</p>\n\n<pre><code>int file = open(path, O_RDWR); //path = /dev/i2c-1\n</code></pre>\n\n<p>Once you have your file handle you can read and write i2c registers using <a href=\"https://en.wikipedia.org/wiki/Ioctl\" rel=\"nofollow noreferrer\">ioctl's</a>. The i2c kernel module supports the I2C_RDWR ioctl which lets you interact with i2c registers. </p>\n\n<p>To read a register you do <a href=\"https://github.com/swedishborgie/libmma8451/blob/master/mma8451.c#L958\" rel=\"nofollow noreferrer\">something like this</a>:</p>\n\n<pre><code>int mma8451_get_i2c_register(int file, unsigned char addr, unsigned char reg, unsigned char *val) {\n    unsigned char inbuf, outbuf;\n    struct i2c_rdwr_ioctl_data packets;\n    struct i2c_msg messages[2];\n\n    outbuf = reg;\n    messages[0].addr  = addr;\n    messages[0].flags = 0;\n    messages[0].len   = sizeof(outbuf);\n    messages[0].buf   = &amp;outbuf;\n\n    messages[1].addr  = addr;\n    messages[1].flags = I2C_M_RD;\n    messages[1].len   = sizeof(inbuf);\n    messages[1].buf   = &amp;inbuf;\n\n    packets.msgs      = messages;\n    packets.nmsgs     = 2;\n    if(ioctl(file, I2C_RDWR, &amp;packets) &lt; 0) {\n        return 0;\n    }\n    *val = inbuf;\n\n    return 1;\n}\n</code></pre>\n\n<p>To write a register you do <a href=\"https://github.com/swedishborgie/libmma8451/blob/master/mma8451.c#L935\" rel=\"nofollow noreferrer\">something like this</a>:</p>\n\n<pre><code>int mma8451_set_i2c_register(int file, unsigned char addr, unsigned char reg, unsigned char value) {\n    unsigned char outbuf[2];\n    struct i2c_rdwr_ioctl_data packets;\n    struct i2c_msg messages[1];\n\n    messages[0].addr  = addr;\n    messages[0].flags = 0;\n    messages[0].len   = sizeof(outbuf);\n    messages[0].buf   = outbuf;\n\n    outbuf[0] = reg;\n    outbuf[1] = value;\n\n    packets.msgs  = messages;\n    packets.nmsgs = 1;\n    if(ioctl(file, I2C_RDWR, &amp;packets) &lt; 0) {\n        return 0;\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p>Edit: The <code>I2C_RDWR</code> ioctl takes a <code>i2c_rdwr_ioctl_data</code> structure as an argument. It's <a href=\"http://the-cains-group.net/2017_Workshops/Mar17/5_struct_i2c_msg.html\" rel=\"nofollow noreferrer\">described like this</a>:</p>\n\n<blockquote>\n  <p>Another common data structure is <code>struct i2c_rdwr_ioctl_data</code></p>\n  \n  <p>This is the structure as used in the I2C_RDWR ioctl call</p>\n  \n  <p><code>struct i2c_rdwr_ioctl_data {\n     struct i2c_msg __user *msgs; /* pointers to i2c_msgs */\n     __u32 nmsgs; /* number of i2c_msgs */\n  };</code></p>\n  \n  <p>(Defined in linux/i2c-dev.h)\n  This structure points to the array of i2c_msg to process and defines the number of i2c_msg in the array.</p>\n  \n  <p>Usage:\n  If the program is to write one byte (example - the index byte), followed by\n  reading one byte, two struct i2c_msg data structures will be needed.\n  One for the write, and another for the read. These two data structures should be declared as an array of two i2c_msg data structures. They will be processed in the order they appear in the array.</p>\n</blockquote>\n\n<p>The <code>i2c_rdwr_ioctl_data</code> structure contains a pointer to an array of <code>i2c_msg</code> structures. These structures contain the actual messages you want to send or receive. For for example my accelerometer in order to read a register I first needed to write the register I wanted to read to the device and then I could read it (hence why there's two <code>i2c_msg</code>'s in my read function). If I was simply writing a register I only needed one.</p>\n\n<p>You'll want to refer to the <a href=\"https://cdn-shop.adafruit.com/datasheets/BST_BNO055_DS000_12.pdf\" rel=\"nofollow noreferrer\">data sheet for your BNO055</a> to figure out exactly which registers do what.</p>\n\n<p>As for your example, it looks like it comes from <a href=\"https://github.com/BoschSensortec/BNO055_driver/blob/master/bno055_support.c\" rel=\"nofollow noreferrer\">bno055_support.c</a>. It looks like this is just a set of stubs you're meant to implement. It looks like it's basically a mock for a real interface. So what's important is the interface, not the actual code (so don't worry about <code>cnt</code>). The important bits are here:</p>\n\n<pre><code>s8 I2C_routine(void)\n{\n    bno055.bus_write = BNO055_I2C_bus_write;\n    bno055.bus_read = BNO055_I2C_bus_read;\n    bno055.delay_msec = BNO055_delay_msek;\n    bno055.dev_addr = BNO055_I2C_ADDR1;\n\n    return BNO055_INIT_VALUE;\n}\n</code></pre>\n\n<p>This sets the function pointers on your device structure to the write functions you're going to define and sets the address of your device and delay. From there you need to implement functions that match this interface:</p>\n\n<pre><code>#define BNO055_BUS_WRITE_FUNC(dev_addr, reg_addr, reg_data, wr_len)\\\n    bus_write(dev_addr, reg_addr, reg_data, wr_len)\n\n\n#define BNO055_BUS_READ_FUNC(dev_addr, reg_addr, reg_data, r_len)\\\n    bus_read(dev_addr, reg_addr, reg_data, r_len)\n</code></pre>\n\n<p>The functions I gave you above should be pretty close stand-ins. Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6314355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7114408eceb100ea4934a02ba35c0a04?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0422\u044e\u043b\u044f\u0435\u0432", "link": "https://stackoverflow.com/users/6314355/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%a2%d1%8e%d0%bb%d1%8f%d0%b5%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1594707213, "creation_date": 1594707213, "answer_id": 62889069, "question_id": 52975817, "link": "https://stackoverflow.com/questions/52975817/setup-i2c-reading-and-writing-in-c-language/62889069#62889069", "title": "Setup I2C reading and writing in c language", "body": "<p>For example</p>\n<pre><code>s8 BNO055_I2C_bus_read(u8 dev_addr, u8 reg_addr, u8 *reg_data, u8 cnt)\n{\n    u8 array[I2C_BUFFER_LEN] = { BNO055_INIT_VALUE };\n    array[BNO055_INIT_VALUE] = reg_addr;\n    \n    if (write(file, array, 1) != 1) {\n        return -1;\n    }\n    std::this_thread::sleep_for(std::chrono::milliseconds(50));\n    s8 res = read(file, reg_data, cnt);\n\n    if (res &gt; 0) return 0;\n    else return -1;\n\n}\ns8 BNO055_I2C_bus_write(u8 dev_addr, u8 reg_addr, u8 *reg_data, u8 cnt)\n{\n    char buf[1 + cnt];\n    buf[0] = reg_addr;\n    memcpy(&amp;buf[1], reg_data, cnt);\n\n    if (write(file, buf, cnt+1) != cnt+1) {\n        return -1;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10488756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b41d05ecd6364b65164b3868f2a8198?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy Kunnen", "link": "https://stackoverflow.com/users/10488756/eddy-kunnen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6172, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1594707213, "creation_date": 1540406000, "question_id": 52975817, "link": "https://stackoverflow.com/questions/52975817/setup-i2c-reading-and-writing-in-c-language", "title": "Setup I2C reading and writing in c language", "body": "<p>First I'm noob in this stuff, but learning and really want to get this working. I bought a raspberrypi and a bno055 bosch accelerometer. It comes with a bno055.c, bno055.h and a bno055_support.c file. After getting into programming and c and  studying/trying out it seems somehow I need to define how to do I2C read and write.  It needs to be setup so you can define the amount of bytes read/written. Below you can find the two functions as predefined :</p>\n\n<pre><code>/*  \\Brief: The API is used as I2C bus write\n *  \\Return : Status of the I2C write\n *  \\param dev_addr : The device address of the sensor\n *  \\param reg_addr : Address of the first register,\n *   will data is going to be written\n *  \\param reg_data : It is a value hold in the array,\n *      will be used for write the value into the register\n *  \\param cnt : The no of byte of data to be write\n */\ns8 BNO055_I2C_bus_write(u8 dev_addr, u8 reg_addr, u8 *reg_data, u8 cnt)\n{\n    s32 BNO055_iERROR = BNO055_INIT_VALUE;\n    u8 array[I2C_BUFFER_LEN];\n    u8 stringpos = BNO055_INIT_VALUE;\n\n    array[BNO055_INIT_VALUE] = reg_addr;\n    for (stringpos = BNO055_INIT_VALUE; stringpos &lt; cnt; stringpos++)\n        array[stringpos + BNO055_I2C_BUS_WRITE_ARRAY_INDEX] =\n            *(reg_data + stringpos);\n    }\n    /*\n    * Please take the below APIs as your reference for\n    * write the data using I2C communication\n    * \"BNO055_iERROR = I2C_WRITE_STRING(DEV_ADDR, ARRAY, CNT+1)\"\n    * add your I2C write APIs here\n    * BNO055_iERROR is an return value of I2C read API\n    * Please select your valid return value\n    * In the driver BNO055_SUCCESS defined as 0\n    * and FAILURE defined as -1\n    * Note :\n    * This is a full duplex operation,\n    * The first read data is discarded, for that extra write operation\n    * have to be initiated. For that cnt+1 operation done\n    * in the I2C write string function\n    * For more information please refer data sheet SPI communication:\n    */\n    return (s8)BNO055_iERROR;\n}\n\n /* \\Brief: The API is used as I2C bus read\n *  \\Return : Status of the I2C read\n *  \\param dev_addr : The device address of the sensor\n *  \\param reg_addr : Address of the first register,\n *  will data is going to be read\n *  \\param reg_data : This data read from the sensor,\n *   which is hold in an array\n *  \\param cnt : The no of byte of data to be read\n */\ns8 BNO055_I2C_bus_read(u8 dev_addr, u8 reg_addr, u8 *reg_data, u8 cnt)\n{\n    s32 BNO055_iERROR = BNO055_INIT_VALUE;\n    u8 array[I2C_BUFFER_LEN] = {BNO055_INIT_VALUE};\n    u8 stringpos = BNO055_INIT_VALUE;\n\n    array[BNO055_INIT_VALUE] = reg_addr;\n\n    /* Please take the below API as your reference\n     * for read the data using I2C communication\n     * add your I2C read API here.\n     * \"BNO055_iERROR = I2C_WRITE_READ_STRING(DEV_ADDR,\n     * ARRAY, ARRAY, 1, CNT)\"\n     * BNO055_iERROR is an return value of SPI write API\n     * Please select your valid return value\n     * In the driver BNO055_SUCCESS defined as 0\n     * and FAILURE defined as -1\n     */\n    for (stringpos = BNO055_INIT_VALUE; stringpos &lt; cnt; stringpos++)\n        *(reg_data + stringpos) = array[stringpos];\n    return (s8)BNO055_iERROR;\n}\n</code></pre>\n\n<p>My question is there somebody out, that can coach me through this challenge?\nI'm learning about, <a href=\"https://www.kernel.org/doc/Documentation/i2c/dev-interface\" rel=\"nofollow noreferrer\">https://www.kernel.org/doc/Documentation/i2c/dev-interface</a>, but stuck here for the moment. Thx in advance for reading / replying. </p>\n"}, {"tags": ["c", "windows", "codeblocks", "infinite-loop", "fread"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1540405637, "post_id": 52975608, "comment_id": 92857985, "body": "Try and have complete examples. Here <code>appoggio</code> is never defined, so it&#39;s of unknown type. You&#39;ll also want to check for errors on each operation, not just some of them."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1540407223, "post_id": 52975608, "comment_id": 92858720, "body": "<code>fread</code> has a return value that you <b>must</b> check. If it is not equal to what you pass as the <code>nmemb</code>, <i>then</i> you <b>must</b> check <code>errno</code> or <code>ferror</code> to find out if an error occurred."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1540405735, "last_edit_date": 1540405735, "creation_date": 1540405237, "answer_id": 52975651, "question_id": 52975608, "link": "https://stackoverflow.com/questions/52975608/fread-doesnt-change-the-pointer-value-in-a-function-cause-infinite-loop-with/52975651#52975651", "title": "fread doesn&#39;t change the pointer value in a function ( Cause infinite Loop with a feof ) - C", "body": "<p>the problem is that you call <code>fclose(xp)</code> in your loop.</p>\n\n<p>Do first iteration works okay, but next <code>fread</code> call fails (you should check what <code>fread</code> returns BTW, it's supposed to return the number of elements read, so if it doesn't and returns 0 or -1 there's a problem), and so does <code>feof</code> on that handle (well, actually it's undefined behaviour as stated here: <a href=\"https://stackoverflow.com/questions/179543/what-is-the-return-value-of-feof-on-a-closed-file\">What is the return value of feof() on a closed file?</a>)</p>\n\n<p>You mean to call <code>fclose(xp)</code> <em>outside</em> the loop or you get an infinite loop (unless the file is smaller that the size of the struct, which is another functional error)</p>\n\n<p>Aside: <code>xp</code> is a pointer on <code>FILE</code> opaque structure. It doesn't change even with multiple <code>fread</code>. Which changes is some hidden <code>offset</code> value. But you cannot get that information unless you call <code>ftell</code> on the handle.</p>\n"}], "owner": {"reputation": 11, "user_id": 10553693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fe4504c10ca770d6338e3a0cc6e956?s=128&d=identicon&r=PG&f=1", "display_name": "BarbOn", "link": "https://stackoverflow.com/users/10553693/barbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 52975651, "answer_count": 1, "score": 0, "last_activity_date": 1540405735, "creation_date": 1540405087, "question_id": 52975608, "link": "https://stackoverflow.com/questions/52975608/fread-doesnt-change-the-pointer-value-in-a-function-cause-infinite-loop-with", "title": "fread doesn&#39;t change the pointer value in a function ( Cause infinite Loop with a feof ) - C", "body": "<pre><code>int ricerca_copia(int x,int xf)\n{\n\nFILE *xp;\nint conf;\nint f;\nint xeof;\n\nf=0;\n// file was already written and closed before this function\nxp=fopen(\"prenotazioni_copy.dat\",\"rb\");\nif(xp)\n{\n  xeof=0;\n\n  while(xeof==0)\n  {\n    //Never changes xp value\n    fread(&amp;appoggio,sizeof(appoggio),1,xp);\n    if(feof(xp))\n    {\n     //never enters here\n\n        xeof=1;\n    }\n    else\n    {\n            //other stuff\n    }\n    fclose(xp);\n\n  }\n}\nprintf(\"\\nValore %d\",f);\nreturn f;\n}\n</code></pre>\n\n<p>fread doesn't change pointer (xp) value,so the xeof value remains 0 and the loop restarts</p>\n\n<p>I have tested already to use this part of code externally of this function and it works,so the problem is this.</p>\n\n<p>I don't really know how to solve,so there are any solution?</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 21, "user_id": 10553583, "user_type": "registered", "profile_image": "https://graph.facebook.com/2083108791710256/picture?type=large", "display_name": "Jeppe Holt", "link": "https://stackoverflow.com/users/10553583/jeppe-holt"}, "edited": false, "score": 0, "creation_date": 1540404467, "post_id": 52975430, "comment_id": 92857374, "body": "point function = printf*"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1540404685, "post_id": 52975430, "comment_id": 92857493, "body": "If you want to clarify something in your question, please update the question rather than posting a comment."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1540404935, "post_id": 52975430, "comment_id": 92857634, "body": "You would need to pass a pointer-to-pointer. Probably alot simpler to create a typedef, and/or have <code>promt_user_input</code> return a function pointer."}, {"owner": {"reputation": 739, "user_id": 1655400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2c5ce3d00189fe5ee6a526fce0d474?s=128&d=identicon&r=PG", "display_name": "gregb212", "link": "https://stackoverflow.com/users/1655400/gregb212"}, "edited": false, "score": 0, "creation_date": 1540404942, "post_id": 52975430, "comment_id": 92857637, "body": "Is this variable &#39;fn&#39; being passed by reference or passed by value? If its passed by value, then in prompt_user_input you are just changing the local variable &quot;fn&quot; to point to a function, which then goes out of scope when prompt_user_input returns."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1540407335, "post_id": 52975430, "comment_id": 92858775, "body": "When you call <code>some_function(42)</code>, <code>42</code> usually doesn&#39;t change. When you call <code>some_function(some_integer_variable)</code>, <code>some_integer_variable</code> usually doesn&#39;t change. When you call <code>some_function(printf)</code>, <code>printf</code> usually doesn&#39;t change.  When you call <code>some_function(some_variable_of_type_pointer_to_function)</code>... you get the idea."}], "answers": [{"tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 0, "last_activity_date": 1540406174, "last_edit_date": 1540406174, "creation_date": 1540405472, "answer_id": 52975702, "question_id": 52975430, "link": "https://stackoverflow.com/questions/52975430/assigning-a-function-pointer-to-a-function-inside-another-function/52975702#52975702", "title": "Assigning a function pointer to a function inside another function", "body": "<p>Since C is pass by value, you need to pass a pointer-to-pointer to the <code>promt_user_input</code> function:</p>\n\n<pre><code>int main(void)\n{\n    double (*fn)(void);\n\n    promt_user_input(&amp;fn);\n    printf(\"het %lf\",fn());\n}\n\nvoid promt_user_input(double (**fn)(void))\n{\n    int coice;\n    printf(\"Enter 1 or 2\\n\");\n\n    scanf(\" %d\", &amp;coice);\n\n    switch(coice){\n        case 1: *fn = print_1; printf(\"you typed 1\\n\"); break;\n        case 2: *fn = print_2; printf(\"you typed 2\\n\"); break;\n        default: printf(\"INVALID INPUT\"); break; \n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Things become easier to understand if you create a typedef:</p>\n\n<pre><code>typedef double (*func)(void);\nvoid promt_user_input(func *fn);\n\nint main(void)\n{\n    func fn;\n\n    promt_user_input(&amp;fn);\n    printf(\"het %lf\", fn());\n}\n\nvoid promt_user_input(func *fn)\n{\n    // Same as above....\n</code></pre>\n\n<hr>\n\n<p>Then you can avoid the pointer-to-pointer by having the function return a value:</p>\n\n<pre><code>typedef double (*func)(void);\nfunc promt_user_input();\n\nint main(void)\n{\n    func fn = promt_user_input();\n    if (NULL != fn) {\n        printf(\"het %lf\", fn());\n    }\n}\n\nfunc promt_user_input()\n{\n    int coice;\n    printf(\"Enter 1 or 2\\n\");\n\n    scanf(\" %d\", &amp;coice);\n\n    switch(coice){\n        case 1:\n            printf(\"you typed 1\\n\");\n            return print_1;\n        case 2: \n            printf(\"you typed 2\\n\");\n            return print_2;\n        default: \n            printf(\"INVALID INPUT\");\n            return NULL; \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10553583, "user_type": "registered", "profile_image": "https://graph.facebook.com/2083108791710256/picture?type=large", "display_name": "Jeppe Holt", "link": "https://stackoverflow.com/users/10553583/jeppe-holt"}, "edited": false, "score": 0, "creation_date": 1540413294, "post_id": 52975749, "comment_id": 92861499, "body": "Thank you very much :D. I finally got it to work. I think it&#39;s incredible that people like you actually take time out of your day to answer a noobie like me. ;)"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1540414677, "post_id": 52975749, "comment_id": 92862136, "body": "Alternately have <code>prompt_user_input</code> <i>return</i> the function pointer rather than taking an argument.  Arguments should be for inputs to the function; use the return value for outputs."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1540426348, "post_id": 52975749, "comment_id": 92865559, "body": "@ChrisDodd Right. I also mentioned it in my answer."}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 1, "last_activity_date": 1540426621, "last_edit_date": 1540426621, "creation_date": 1540405692, "answer_id": 52975749, "question_id": 52975430, "link": "https://stackoverflow.com/questions/52975430/assigning-a-function-pointer-to-a-function-inside-another-function/52975749#52975749", "title": "Assigning a function pointer to a function inside another function", "body": "<p>In the <code>main()</code> function you define uninitialized pointer to function <code>fn</code> and you pass it (by <strong>value</strong>) to another function <code>promt_user_input</code> which initializes it <em>internally</em> by either <code>print_1</code> or <code>print_2</code> based on the user input...</p>\n\n<p>But when the flow goes back to the <code>main()</code>, the <code>fn</code> inside <code>main()</code> remained initialized. Dereferencing it causes <em>undefined behavior</em>. In order to initialize <code>fn</code> properly, you need to pass its <strong>address</strong> to <code>promt_user_input</code> and of course its signature has to be updated properly (input argument should be of type <strong>pointer to pointer</strong> to function or make it return the function pointer, whatever you prefer).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ndouble print_2 (void);\ndouble print_1 (void);\n\nvoid promt_user_input(double (**fn)(void));\n\nint main(void)\n{\n  double result;\n  double (*fn)(void);\n\n  fn = NULL;    \n  promt_user_input(&amp;fn);\n\n  if (fn)\n  {\n    printf(\"het %lf\",(fn)());\n  }\n\n  return 0;\n}\n\nvoid promt_user_input(double (**fn)(void))\n{\n  unsigned int coice;\n  int res;\n\n  printf(\"Enter 1 or 2\\n\");\n\n  res = scanf(\"%u\",&amp;coice);\n  if (res != 1 || !coice || coice &gt; 2)\n  {\n      printf(\"Invalid input!\\n\");\n      return;\n  }\n\n  switch(coice)\n  {\n    case 1: *fn = print_1; printf(\"you typed 1\\n\"); break;\n    case 2: *fn = print_2; printf(\"you typed 2\\n\"); break;\n  }\n\n  printf(\"hi %lf\\n\",(*fn)());\n}\n\ndouble print_1 (void)\n{\n  printf(\"This is option 1\\n\");\n  return 1.0;\n}\n\ndouble print_2 (void)\n{\n  printf(\"This is option 2\\n\");\n  return 2.0;\n}\n</code></pre>\n\n<p>Few additional remarks:</p>\n\n<ol>\n<li>You have to check for the return value of <code>scanf</code> to take care of invalid input.</li>\n<li>Due to invalid input, the <code>fn</code> will remain <em>uninitialized</em> so you <strong>must not</strong> dereference it in such case. You need either initialize the <code>fn</code> to some invalid value and then check if it has a valid value before using it or make <code>promt_user_input</code> return a status which will indicate if the input argument was initialized successfully.</li>\n<li><code>double</code> constants must have <em>floating</em> point: 1--><code>int</code>, 1.0 --> <code>double</code></li>\n<li>Prefer using unsigned types when negative values have no meaning (like <code>coice</code>).</li>\n<li><code>int main(void)</code> should return an <code>int</code> value at the end of the flow.</li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 10553583, "user_type": "registered", "profile_image": "https://graph.facebook.com/2083108791710256/picture?type=large", "display_name": "Jeppe Holt", "link": "https://stackoverflow.com/users/10553583/jeppe-holt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 52975702, "answer_count": 2, "score": -1, "last_activity_date": 1540426621, "creation_date": 1540404405, "last_edit_date": 1540406886, "question_id": 52975430, "link": "https://stackoverflow.com/questions/52975430/assigning-a-function-pointer-to-a-function-inside-another-function", "title": "Assigning a function pointer to a function inside another function", "body": "<p>I am currently trying to make a little user prompt were a function pointer gets assigned. My problem is that I can't get the now assigned function pointer out in <code>main</code> again.\nThe code looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\ndouble print_2 (void);\n\ndouble print_1 (void);\n\nvoid promt_user_input(double (*fn)(void));\n\n//program to test funtion pointers inside funtions\n\n//proof of consept\n\nint    main(void) {\n  double result;\n  double (*fn)(void);\n\n  promt_user_input(fn);\n  //result = *fn;\n  printf(\"het %lf\",(fn)());\n  //This will not print no matter what i do.\n}\n\nvoid promt_user_input(double (*fn)(void)) {\n  int coice;\n  printf(\"Enter 1 or 2\\n\");\n\n  scanf(\" %d\",&amp;coice);\n\n  switch(coice) {\n    case 1: *(&amp;fn) = print_1; printf(\"you typed 1\\n\"); break;\n    case 2: *(&amp;fn) = print_2; printf(\"you typed 2\\n\"); break;\n    default: printf(\"INVALID INPUT\"); break; \n  }\n  printf(\"hi %lf\\n\",(fn)());\n}\n\ndouble print_1 (void){\n  printf(\"This is option 1\\n\");\n  return 1;\n}\n\ndouble print_2 (void){\n  printf(\"This is option 2\\n\");\n  return 2;\n}\n</code></pre>\n\n<p>It compiles just fine, and the function is assigned correctly, because of the <code>printf</code> inside the <code>prompt_user_input</code> function prints the correct values. But outside of that function, it seems like it doesn't work. The <code>printf</code> function won't even run. </p>\n"}, {"tags": ["c", "linux", "sockets", "udp"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540405365, "post_id": 52975339, "comment_id": 92857853, "body": "Consider this: <code>printf(&quot;%hd\\n&quot;, htons(41000));</code>. And after copying your code and getting it compiling, I get <code>0.0.0.0 - 41000</code> as expected. Are you sure your real code is using <code>ntohs()</code> when displaying the address and port?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1540406104, "post_id": 52975339, "comment_id": 92858201, "body": "Minor nit -- 0 is a perfectly valid return value from <code>socket</code>. The check should be if <code>udpFd != -1</code>. (In practice, you&#39;ll only get a zero back if the process has no stdin descriptor.)"}, {"owner": {"reputation": 766, "user_id": 9158613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdc7af72ee7dd5897b002474701d285?s=128&d=identicon&r=PG&f=1", "display_name": "asinix", "link": "https://stackoverflow.com/users/9158613/asinix"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540408043, "post_id": 52975339, "comment_id": 92859102, "body": "@Shawn That is my real code... I mean I trimmed a few error checks.  printf(&quot;%hd\\n&quot;, htons(41000)) outputs 10400. At least I got the relationship. Thanks...  Any length of structure issue?"}, {"owner": {"reputation": 766, "user_id": 9158613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdc7af72ee7dd5897b002474701d285?s=128&d=identicon&r=PG&f=1", "display_name": "asinix", "link": "https://stackoverflow.com/users/9158613/asinix"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1540408456, "post_id": 52975339, "comment_id": 92859301, "body": "@DavidSchwartz  Yes. U r right. Thanks for the info though not related to the problem directly."}, {"owner": {"reputation": 766, "user_id": 9158613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdc7af72ee7dd5897b002474701d285?s=128&d=identicon&r=PG&f=1", "display_name": "asinix", "link": "https://stackoverflow.com/users/9158613/asinix"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540408835, "post_id": 52975339, "comment_id": 92859465, "body": "@Shawn  My sincere apologies... While trimming the code, I made a mistake... just realized it. I had missed the ntohs(...)  If u post this as an answer, I will be happy to accept it."}], "owner": {"reputation": 766, "user_id": 9158613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdc7af72ee7dd5897b002474701d285?s=128&d=identicon&r=PG&f=1", "display_name": "asinix", "link": "https://stackoverflow.com/users/9158613/asinix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540404047, "creation_date": 1540404047, "question_id": 52975339, "link": "https://stackoverflow.com/questions/52975339/unable-to-set-udp-source-address-in-bind", "title": "Unable to set UDP source address in bind", "body": "<p>I am trying to set the source UDP port for a new socket. I use bind to do so. Here is my code:</p>\n\n<pre><code>struct sockaddr_in udpAddr, udpAssignedAddr;\nsocklen_t sizeOfSockAddr;\nstruct newSocket _newSocket, errorSocket;\nsocklen_t  udpAddrLen;\n\nint udpFd = socket(AF_INET, SOCK_DGRAM|SOCK_NONBLOCK, 0);  \nif (udpFd &gt; 0) {\n  udpAddr.sin_family = AF_INET;\n  udpAddr.sin_addr.s_addr = htonl(INADDR_ANY);\n  udpAddr.sin_port = htons(41000);\n  udpAddrLen = sizeof(udpAddr); \n\n  if (bind(udpFd, (struct sockaddr *)&amp;udpAddr, udpAddrLen) &lt; 0) \n    perror(\"Error\");\n\n  sizeOfSockAddr =  sizeof(udpAssignedAddr);\n  getsockname(udpFd, (struct sockaddr *)&amp;udpAssignedAddr, &amp;udpAddrLen);\n\n  printf(\"%s - %d \\n\", inet_ntoa(udpAssignedAddr.sin_addr), \n                       ntohs(udpAssignedAddr.sin_port) );\n}\n</code></pre>\n\n<p>I get the same port number (10400) displayed which is NOT what is assigned, no matter how many times I run it. However, if I set to 0 instead of 41000, then a different port number is displayed each time the program is executed. </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1540403907, "post_id": 52975293, "comment_id": 92857055, "body": "Local arrays are allocated on stack. Stack is limited."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1540404378, "post_id": 52975293, "comment_id": 92857321, "body": "Can you show the error/return value you&#39;re getting? Although I suspect this is a stack overflow."}, {"owner": {"reputation": 21, "user_id": 10553600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/am9gJ.jpg?s=128&g=1", "display_name": "sruizbon", "link": "https://stackoverflow.com/users/10553600/sruizbon"}, "edited": false, "score": 0, "creation_date": 1540404854, "post_id": 52975293, "comment_id": 92857587, "body": "i get -1.073.741.571 I solved it declaring it globally as suggested in the post above"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 1, "creation_date": 1540404995, "post_id": 52975293, "comment_id": 92857661, "body": "I&#39;m not sure if this is a duplicate. OP asked for an explanation of what&#39;s going on, <i>not</i> a way to declare and use a huge array in C. In my mind, a good answer to this question would explain a way for OP to see what stack size was used, showing him that the error is from a stack overflow, then mention workarounds (not declaring the array on the stack)."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540405800, "post_id": 52975293, "comment_id": 92858051, "body": "Finish your drinks, everyone. It&#39;s a Stack Overflow"}], "owner": {"reputation": 21, "user_id": 10553600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/am9gJ.jpg?s=128&g=1", "display_name": "sruizbon", "link": "https://stackoverflow.com/users/10553600/sruizbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1540404355, "answer_count": 0, "score": 2, "last_activity_date": 1540403876, "creation_date": 1540403876, "question_id": 52975293, "link": "https://stackoverflow.com/questions/52975293/problem-with-array-declaration-of-large-size-in-c", "closed_reason": "Duplicate", "title": "Problem with array declaration of large size in C", "body": "<p>When trying to define 5 1d arrays, the following code gives me an unexpected return value:</p>\n\n<pre><code>#define N 100000\nint main()\n{\n   double a1[N];\n   double a2[N];\n   double a3[N];\n   double a4[N];\n   double a5[N];\n   return 0;\n}\n</code></pre>\n\n<p>If a swich N to be 10, 100, 1000 or even 10000 it works just fine.\nCan someone explain to me what is going on?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540403777, "post_id": 52975233, "comment_id": 92856993, "body": "Why not just malloc a buffer of the requested size if you&#39;re worried about a VLA causing a stack overflow?"}, {"owner": {"reputation": 9, "user_id": 3494378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec1c92034289d55f8a87bcec84867bbb?s=128&d=identicon&r=PG&f=1", "display_name": "rolind", "link": "https://stackoverflow.com/users/3494378/rolind"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540404079, "post_id": 52975233, "comment_id": 92857136, "body": "@Shawn because then I would still be limited by the heap and my program wouldn&#39;t be able to read big enough files, i think"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540404312, "post_id": 52975233, "comment_id": 92857280, "body": "It&#39;s.... extremely unlikely that you won&#39;t be able to malloc 1048576 bytes."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540406791, "post_id": 52975233, "comment_id": 92858501, "body": "Why read into <code>&amp;buffer[i]</code> and not <code>&amp;buffer[0]</code>?"}, {"owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "edited": false, "score": 0, "creation_date": 1540412685, "post_id": 52975233, "comment_id": 92861262, "body": "error handling is missing which will cause endless busy loops in common cases ((<code>EAGAIN</code>, <code>ENOSPC</code>, <code>EPIPE</code>, ...). The <code>write()</code> code does not work correctl on partial writes.  Does not matter here, but datatypes are wrong (<code>read()</code>/<code>write()</code> return <code>ssize_t</code>, not  <code>int</code>).  Comments are confusing."}], "answers": [{"tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 0, "last_activity_date": 1540410431, "creation_date": 1540410431, "answer_id": 52976856, "question_id": 52975233, "link": "https://stackoverflow.com/questions/52975233/read-n-bytes-from-a-file-and-print-it-using-read-and-write/52976856#52976856", "title": "Read N bytes from a file and print it using read() and write()", "body": "<p>Below is a revised version of your loop that compiles (and probably works) followed by some notes.  </p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid run_hd_n (int n, int fd, int BSIZE) {\n  int res_read;\n  char buffer[BSIZE];\n\n  // can only get up to 1048576\n  assert(BSIZE &lt;= 1048576);\n\n  for( int read_bytes=0; read_bytes &lt; n; read_bytes += res_read ) {\n    if( (res_read = read(fd, buffer, BSIZE)) &lt; BSIZE ) { \n      if( res_read == 0 ) return; // EOF or error\n    }\n    if( write(STDOUT_FILENO, buffer, res_read) &lt; res_read ) return;\n  }\n}\n</code></pre>\n\n<ul>\n<li>I changed <code>b</code> to <code>n</code> out of convention. </li>\n<li>Stick close to the standard.  <strong>read</strong>(2) and <strong>write</strong>(2) take <code>size_t</code>, not <code>int</code>.  How will your program react if called with <code>n == -1</code>?  </li>\n<li>If you have a known imposed constraint, include it somewhere.  You asserted a maximum size for BSIZE; I used <code>assert</code> to enforce it.  </li>\n<li>I couldn't tell if your question was about allocating the space or copying the data. I chose to address the latter. </li>\n<li>It's not an error to read less than the full size of the buffer.  No need to putz with <code>count</code>.  Just read and see if you got anything.  </li>\n<li>You've written an I/O function with a <code>void</code> return type.  How will the caller learn what happened?  I would return <code>res_read</code> and let the caller test if he read as many as requested, else consult <code>errno</code>.  </li>\n</ul>\n"}], "owner": {"reputation": 9, "user_id": 3494378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec1c92034289d55f8a87bcec84867bbb?s=128&d=identicon&r=PG&f=1", "display_name": "rolind", "link": "https://stackoverflow.com/users/3494378/rolind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540410431, "creation_date": 1540403652, "question_id": 52975233, "link": "https://stackoverflow.com/questions/52975233/read-n-bytes-from-a-file-and-print-it-using-read-and-write", "title": "Read N bytes from a file and print it using read() and write()", "body": "<p>I'm trying to read a program that reads N bytes from a file using read() and prints them in STDOUT using write(). The thing is, the user can also especify the blocksize, by default it's 1024 and can only get up to 1048576. I have to store what I read in a buffer, but that buffer can't be the same size as the bytes that I have to read because, otherwise, I could potentially create a buffer too large for the stack size. Therefore, I create a buffer as large as the blocksize so I just read until it's full, write and then read again to the beginning of the buffer.</p>\n\n<p>The problem with all this is that it definetely doesn't work as intended and I'm pretty sure there's gotta be an easier way to do this.</p>\n\n<p>Relevant code:</p>\n\n<pre><code>void run_hd_b (int b, int fd, int BSIZE){\n    int res_read; //result from write\n    int res_write; //result from read\n    int read_bytes = 0;\n    char buffer[BSIZE];\n    int i = 0;\n\n    int count = 0;\n    if (b &lt; BSIZE) count = b;\n    else count = BSIZE;\n\n    while (read_bytes &lt; b &amp;&amp; (res_read = read(fd, &amp;buffer[i], count)) != 0){ \n        if (res_read == BSIZE){\n            i = 0;\n        }\n        else i = res_read;\n\n        read_bytes += res_read;\n        while((res_write = write(1, buffer, res_read)) &lt; res_read);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540403124, "post_id": 52975051, "comment_id": 92856636, "body": "I don&#39;t think you can do it in the macro itself, since some callers use the result. Maybe you can write <code>(void)STC_ASSERT(1, &quot;&quot;);</code> in <code>main()</code>."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540403497, "post_id": 52975051, "comment_id": 92856823, "body": "Clang <a href=\"https://wandbox.org/permlink/oGw0XHUxQ7Nz8nNf\" rel=\"nofollow noreferrer\">doesn&#39;t</a> generate a warning (if someone can be inspired by this and help OP with GCC). @Barmar&#39;s suggestion doesn&#39;t generate a warning in GCC."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540403677, "post_id": 52975051, "comment_id": 92856923, "body": "@Barmar I don&#39;t doubt that. It&#39;s the reason the question says &quot;inside the STC_ASSERT _Static_assert wrapper&quot;.  I&#39;ve basically given up on -Wunused-result with clang after encountering this <a href=\"https://bugs.llvm.org/show_bug.cgi?id=39367\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=39367</a>. If I can&#39;t make this example work with gcc, then I&#39;m giving up on it on gcc too. I like the warning, but outside of functions expl. marked with the warn_unused_result attribute, it seems to lack a clear concept regarding where it should be generated, how it can be elicited (e.g., for macros based on expr. statements) and how it can be suppressed (e.g., here))."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "edited": false, "score": 0, "creation_date": 1540403779, "post_id": 52975051, "comment_id": 92856995, "body": "sorry, but a side question. You use <code>!!sizeof(struct{char STC_ASSERT;...})</code> in your <code>STC_ASSERT</code> to create a 0 or 1 result from your assert function? Cannot find any other reason for it."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540403946, "post_id": 52975051, "comment_id": 92857067, "body": "gcc 8.2 tells me it&#39;s <code>-Wunused-value</code> not -Wunused-result"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "edited": false, "score": 0, "creation_date": 1540404050, "post_id": 52975051, "comment_id": 92857122, "body": "@Afshin The idea is to turn <code>_Static_assert</code> into an expression so it can be used like it is in <code>C</code> (thereby tightly coupling the static assertion with the macro definition) while keeping <code>C</code> an integer constant expression (so it can be used, e.g., to define the <code>c</code> enumerator constant)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540404091, "post_id": 52975051, "comment_id": 92857142, "body": "Could you define two macros, one intended to be used as an expression, the other as a statement?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540404322, "post_id": 52975051, "comment_id": 92857284, "body": "@KamilCuk Thanks for noticing. It should have said -Wunused-value (it does now)."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1540404777, "post_id": 52975051, "comment_id": 92857543, "body": "sidenote: you can shorten this macro with an unnamed bitfield. <code>sizeof(struct { int :1; _Static_assert((X), Msg &quot;&quot; ); })</code>. Also <code>BUILD_BUG_ON_ZERO</code> also generates this warning. Anyway, I would go with two macros - that&#39;s why in kernel thers <code>BUILD_BUG_ON</code> with <code>((void)sizeof(...))</code> and <code>BUILD_BUG_ON_ZERO</code> which is evaulated in expression."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "edited": false, "score": 0, "creation_date": 1540405376, "post_id": 52975051, "comment_id": 92857856, "body": "But I still don&#39;t get why you need to turn <code>_Static_assert</code> into expression. Because if assert happens, code will not compile (static assert), and if not, you will always have 1 as <code>C</code>. So I still cannot understand need of converting <code>_Static_assert</code> into expression. or I&#39;m missing something obvious."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540405428, "post_id": 52975051, "comment_id": 92857885, "body": "@KamilCuk Thanks! I love the unnamed bitfield idea."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "edited": false, "score": 0, "creation_date": 1540406057, "post_id": 52975051, "comment_id": 92858181, "body": "@Afshin It&#39;s about tightly coupling the static assertion with the definition of a value macro (the <code>C</code> macro in the code above) that possibly evaluates to an integer constant expression. I&#39;m doing it mainly because if nicely fits into my error handling framework which somewhat resembles C++&#39;s exceptions+RAII. In light of that you can sort of think of the C macro as <code>{ if(A&lt;B) compile_time_throw; else return A-B; }</code>."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "edited": false, "score": 0, "creation_date": 1540406370, "post_id": 52975051, "comment_id": 92858312, "body": "Aha, got it. Thanks a lot for info."}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1540404217, "creation_date": 1540402904, "last_edit_date": 1540404217, "question_id": 52975051, "link": "https://stackoverflow.com/questions/52975051/suppressing-wunused-value-with-gcc", "title": "Suppressing -Wunused-value with gcc", "body": "<p>Considering this piece of code:</p>\n\n<pre><code>#define STC_ASSERT(X,Msg) \\\n     (!!sizeof(struct{char STC_ASSERT;_Static_assert((X),Msg \"\");}))\n#define A 43\n#define B 42\n#define C (STC_ASSERT(A-B&gt;=0,\"\")?(A-B):0)\nenum { c = C };\nint main()\n{\n    STC_ASSERT(1,\"\"); //can this not generate a warning on gcc?\n}\n</code></pre>\n\n<p>Is there anything I can do <em>inside</em> the <code>STC_ASSERT</code> <code>_Static_assert</code> wrapper to prevent the line in <code>main</code> from generating an <code>-Wunused-value</code> warning when compiling with <code>gcc -Wall -Wextra</code>?</p>\n\n<p>(<code>_Pragma</code> with <code>GCC diagnostic push/pop</code> doesn't work here. For a macro like <code>#define FOO 42</code>, embracing it in an expression statement ( <code>({ 42; })</code> ) would do the trick but that would prevent the macro from being used in contexts where an Integer Constant Expression is required (such as the <code>enum</code> definition)) </p>\n"}, {"tags": ["c", "arrays", "function", "parameters", "ansi"], "comments": [{"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1540402959, "post_id": 52975032, "comment_id": 92856553, "body": "Are you aware that sizeof is not the same as len, right?"}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "edited": false, "score": 2, "creation_date": 1540402981, "post_id": 52975032, "comment_id": 92856565, "body": "See <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\" title=\"what is array decaying\">stackoverflow.com/questions/1461432/what-is-array-decaying</a>"}, {"owner": {"reputation": 2025, "user_id": 1440764, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ukUvD.jpg?s=128&g=1", "display_name": "RightmireM", "link": "https://stackoverflow.com/users/1440764/rightmirem"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1540411997, "post_id": 52975032, "comment_id": 92860941, "body": "@dbush I ask that you remove the duplicate status, since that link doesn&#39;t address my problem. It discusses using ` (sizeof(nlist)) / sizeof(nlist[0])` to determine the number of elements in an array. <b>However</b> my question is why does <code>(sizeof(nlist)) &#47; sizeof(nlist[0])</code> <b>STOP working after the array has been passed to a function</b>. Thanks!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1540412150, "post_id": 52975032, "comment_id": 92861023, "body": "@RightmireM The second answer in the post addresses your issue.  You need to explicitly send the size."}, {"owner": {"reputation": 2025, "user_id": 1440764, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ukUvD.jpg?s=128&g=1", "display_name": "RightmireM", "link": "https://stackoverflow.com/users/1440764/rightmirem"}, "reply_to_user": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1540412290, "post_id": 52975032, "comment_id": 92861096, "body": "@norok2 &quot;Are you aware that sizeof is not the same as len&quot;. Sort of. I know that, functionally, the <code>(sizeof(nlist)) &#47; sizeof(nlist[0])</code> pragmatically returns the <code>len</code> of the array (in <code>main()</code>). Googling, as well as the link above, show that there is no <code>len</code> command in <code>ansi c</code>. Is there a better way to determine the number of items in an array?"}, {"owner": {"reputation": 2025, "user_id": 1440764, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ukUvD.jpg?s=128&g=1", "display_name": "RightmireM", "link": "https://stackoverflow.com/users/1440764/rightmirem"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1540412408, "post_id": 52975032, "comment_id": 92861147, "body": "@dbush Thanks for the response. In fact, I had seen that technique - but was trying to avoid it - if possible. The link does do a nice job of explaining the problem. As I mentioned, I&#39;m new to <code>c</code>. Is there no way to avoid sending the length as a parameter?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1540412601, "post_id": 52975032, "comment_id": 92861231, "body": "@RightmireM There is not.  An array decays into a pointer to the first element when passed to a function, so inside the function <code>sizeof</code> gives you the size of a pointer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1540414712, "post_id": 52975032, "comment_id": 92862151, "body": "See <a href=\"https://stackoverflow.com/a/10349610/1505939\">this answer</a> on the linked thread"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1540680500, "post_id": 52975032, "comment_id": 92955585, "body": "Detail: &quot;why that stops working after the array has been passed to a function&quot; --&gt; In <code>isItemInIntArray(int value, int arr[])</code>, <code>int arr[]</code> is not an <i>array</i>, but a pointer.  Thus <code>sizeof(arr)</code> is the size of a pointer.  There are alternatives to sending the array size as a separate argument, yet they likely do not meet your coding goals."}], "owner": {"reputation": 2025, "user_id": 1440764, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ukUvD.jpg?s=128&g=1", "display_name": "RightmireM", "link": "https://stackoverflow.com/users/1440764/rightmirem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1540402957, "answer_count": 0, "score": 1, "last_activity_date": 1540411874, "creation_date": 1540402823, "last_edit_date": 1540411874, "question_id": 52975032, "link": "https://stackoverflow.com/questions/52975032/passing-array-to-function-changes-function-sizeofarray", "closed_reason": "Duplicate", "title": "Passing array to function changes function &#39;sizeof(array)&#39;", "body": "<p><strong>EDIT:</strong> I believe this question is different from <a href=\"https://stackoverflow.com/questions/37538/how-do-i-determine-the-size-of-my-array-in-c\">How do I determine the size of my array in C?</a>, because that link discusses how to use <code>sizeof(nlist)) / sizeof(nlist[0])</code> to determine the number of items in an array. </p>\n\n<p><strong>My</strong> question is asking why that stops working after the array has been passed to a function. </p>\n\n<p>===</p>\n\n<p>I'm new to ansi C, coming from Python. </p>\n\n<p>I have a function that parses an <code>int</code> array. The iteration through the array is dependent on <code>sizeof(nlist)) / sizeof(nlist[0])</code> to determine the size of the array. </p>\n\n<p>However, while this works in <code>main()</code>, it fails when the array is passed to a function. </p>\n\n<p><strong>In main file</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"arrayTools.h\"\n\nint main() {\n\n    // Fill with data for testing\n    int nlist[500];\n    for (int i=1; i&lt;501; i++ ) {\n        nlist[i] = i;\n    }\n\n    // This successfully iterates through all 500 items\n    for( size_t i = 1; i &lt;= (sizeof(nlist)) / sizeof(nlist[0]); i++)\n    {   \n        printf(isItemInIntArray(i, nlist) ? \"true\\n\" : \"false\\n\");\n    }\n</code></pre>\n\n<p><strong>arrayTools.h</strong></p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n\nbool isItemInIntArray(int value, int arr[]){\n    // This only iterates twice (i = 1, then i = 2) and then ends\n    for( size_t i = 1; i &lt;= (sizeof(arr)) / sizeof(arr[0]); i++) {\n        if (value == arr[i]) { return true; }\n    }\n    return false;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 7, "creation_date": 1540402773, "post_id": 52974997, "comment_id": 92856448, "body": "<code>scanf(&quot;%d,&amp;arr[i]&quot;);</code> -- That didn&#39;t produce a warning? The closing quote should go after the <code>%d</code>."}, {"owner": {"reputation": 1846, "user_id": 3134181, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b4b3f1301af98ad83aa4bb36092d80a6?s=128&d=identicon&r=PG&f=1", "display_name": "LordTitiKaka", "link": "https://stackoverflow.com/users/3134181/lordtitikaka"}, "edited": false, "score": 0, "creation_date": 1540402903, "post_id": 52974997, "comment_id": 92856530, "body": "Please share more info, are you seeing any prints , have you tried to debug it, Where is it breaking, what input are you giving"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540403235, "post_id": 52974997, "comment_id": 92856686, "body": "Tip: When you get a strange looking error number like -1073741819, convert it to hexadecimal to see if it is more recognizable. -1073741819 converts to C0000005 which results in many search engine hits as the Microsoft error code for invalid memory access. While not necessarily not immediately helpful, this narrows down the search area for the bug to where you are using pointers."}, {"owner": {"reputation": 1, "user_id": 10553528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--zzk1Rbi59E/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAPwq_-dIKfrlHlUiELvTkTOMHwXQ/mo/photo.jpg?sz=128", "display_name": "Pankaj Chaudhary", "link": "https://stackoverflow.com/users/10553528/pankaj-chaudhary"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1540403407, "post_id": 52974997, "comment_id": 92856772, "body": "@MOehm Thank You so much Sir it is working now"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1540403534, "post_id": 52974997, "comment_id": 92856841, "body": "I&#39;m glad it works now. If you didn&#39;t get a warning, you should probably enable them (or more of them). They can help you to catch such simple errors. (Unfortunately, many C compilers don&#39;t enable warnings by default.)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540403715, "post_id": 52974997, "comment_id": 92856951, "body": "To turn on more/better compiler messages in the big three compiler families in use today you want to turn on <code>&#47;W4</code> in Visual Studio&#39;s project properties dialogues or add the likes of <code>-pedantic -Wall -Wextra -Werror</code> to the clang or GCC command line. How this is done on your particular development environment or with a less-commonly used compiler varies too wildly to cover here. Check your tool&#39;s documentation."}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 1, "last_activity_date": 1540403430, "creation_date": 1540403430, "answer_id": 52975193, "question_id": 52974997, "link": "https://stackoverflow.com/questions/52974997/my-c-program-process-terminated-with-status-1073741819-0-minutes-8-seconds/52975193#52975193", "title": "My C Program Process terminated with status -1073741819 (0 minute(s), 8 second(s))", "body": "<p>This line is wrong:</p>\n\n<pre><code>scanf(\"%d,&amp;arr[i]\");\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code> scanf(\"%d\",&amp;arr[i]);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10553528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--zzk1Rbi59E/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAPwq_-dIKfrlHlUiELvTkTOMHwXQ/mo/photo.jpg?sz=128", "display_name": "Pankaj Chaudhary", "link": "https://stackoverflow.com/users/10553528/pankaj-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1024, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1540403430, "creation_date": 1540402696, "last_edit_date": 1540402885, "question_id": 52974997, "link": "https://stackoverflow.com/questions/52974997/my-c-program-process-terminated-with-status-1073741819-0-minutes-8-seconds", "title": "My C Program Process terminated with status -1073741819 (0 minute(s), 8 second(s))", "body": "<p>After I execute the program I get this error :</p>\n\n<p>Process terminated with status -1073741819 (0 minute(s), 8 second(s))</p>\n\n<p>Please also note that I get 0 warnings after compiling</p>\n\n<p>Thank you very much for helping</p>\n\n<p>Here is the full code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nint summation(int arr[],int n);\nint main()\n{\n    int arr[5],sum=0;\n    printf(\"enter the elements\");\n    for(int i=0;i&lt;5;i++)\n    {\n        scanf(\"%d,&amp;arr[i]\");\n    }\n    printf(\"The sum of\");\n    sum=summation(arr,5);\n    printf(\"%d\",sum);\n    getch();\n    return 0;\n}\nint summation(int arr[],int n)\n{\n    int sum=0;\n    for(int i=0;i&lt;n;i++)\n    {\n        sum=sum+arr[i];\n    }\n    return sum;\n}   \n</code></pre>\n"}, {"tags": ["c", "algorithm", "palindrome"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540402410, "post_id": 52974793, "comment_id": 92856231, "body": "The problem with these questions that say &quot;I submitted my code to a judge system and it said the answers were wrong&quot; is that, we don&#39;t know what the test case is, what the expected output was, or what the actual output was. All of those are normally required when putting up a &quot;why isn&#39;t my code working?&quot; question. I would ask the OP to run some tests and try to spot some incorrect answers."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1540402483, "post_id": 52974793, "comment_id": 92856269, "body": "The programming challenges in online judges want you to find an efficient algorithm. Looping over all numbers and then checking both palindromity and primality isn&#39;t very efficient. Try to find a way to generate palindromes and then check for primality (or vice versa). Also, these questions usually tell you the range of possible inputs. Yu could share them here, so that we can see whether you run into numerical overflow."}, {"owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "edited": false, "score": 0, "creation_date": 1540403421, "post_id": 52974793, "comment_id": 92856784, "body": "@M Oehm I don&#39;t know the test cases. It is only known that base is from 2 to 20. Nothing is known except that the final answer will not exceed 1E7. I think the question has 4 second time limit. my whole primecheck from 0 to 1E7 is done in 1.4 seconds in my PC."}, {"owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1540403517, "post_id": 52974793, "comment_id": 92856833, "body": "@user3386109 I said I cannot use array at the Note before the Code. It would be much simpler if array was allowed. The Judge will give runtime error if I use of array or strings or vectors because the question purpose is mostly algorithm."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1540403592, "post_id": 52974793, "comment_id": 92856866, "body": "The other thing about programming competitions is that they are intended to measure <i>your</i> programming abilities, not ours. And programming is not just typing into a text editor; it includes more important skills including algorithmic design and debugging. You will learn quite a lot more by sitting back and thinking about your problem than by searching the internet for copyable solutions or begging for help on online forums. Even if you fail to find the answer, the practice at analytic thinking will help make you a better programmer."}, {"owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1540403723, "post_id": 52974793, "comment_id": 92856959, "body": "@rici It is not from a competition. It is a question of a course in a persian language hackerrank-like- site."}, {"owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 0, "creation_date": 1540404001, "post_id": 52974793, "comment_id": 92857096, "body": "primeCheck works fine, counts correct number of primes from 1 to 10^7"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1540404681, "post_id": 52974793, "comment_id": 92857492, "body": "@titansarus: Then my point about learning stands but here&#39;s a hint: how many base-k palindromes are there which are less than k to the power of 2d? Answer: 2k^d, because every d-digit number generates two unique palindromes , one of even length and one of odd length. (I&#39;ll leave you to extend that observation to odd-length ranges). But the count isn&#39;t important (although it implies that there are only a few thousand palindromes less than 1E7); what&#39;s important is how that thought leads you to enumerating them in order."}, {"owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 1, "creation_date": 1540405499, "post_id": 52974793, "comment_id": 92857905, "body": "hint: palindrome(56, 3) gives wrong answer"}], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "edited": false, "score": 0, "creation_date": 1540407847, "post_id": 52975921, "comment_id": 92859007, "body": "The issue was with something like 101111. My method was ignoring the 0 but your method works fine. Thanks you very much."}], "tags": [], "owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "is_accepted": true, "score": 2, "last_activity_date": 1540406426, "creation_date": 1540406426, "answer_id": 52975921, "question_id": 52974793, "link": "https://stackoverflow.com/questions/52974793/finding-the-n-th-prime-number-that-is-palindrome-in-base-k/52975921#52975921", "title": "Finding the n-th prime number that is palindrome in base K", "body": "<p>Solution: change palindrome to</p>\n\n<pre><code>int palindrome ( int n,int base)\n    {\n        int isTrue = 1;\n        int digitCount = digitCountBase(n,base);\n        int power = intPow(base,digitCount-1);\n\n        int original = n;\n        while (n&gt;0&amp;&amp; digitCount &gt;0)\n        {\n\n            if (n%base != (original/power) % base &amp;&amp;digitCount!=1)\n            {\n                isTrue =0;\n                return 0;\n\n            }\n            n=n/base;\n            power = power /base;\n            digitCount=digitCount-2;\n        }\n\n        return isTrue;\n\n    }\n</code></pre>\n\n<p>How did I find the error:</p>\n\n<ul>\n<li>You are doing only 2 things, primality testing and palindrome testing, so makes sense to check if these are working fine.</li>\n<li>Primality testing is easy, count primes from 1 to 10^7 and compare to known values on google. In this case, this works</li>\n<li>To test palindrome, pick a working solution from the internet (even if you can\u00b4t submit their solution that uses arrays/strings, you can test with them!). Then iterate from 1 to 10^7 in a certain base and check that both functions return the same. </li>\n<li>Testing with base 3, quickly saw that 56 was not giving same output. And the incorrect one was yours. </li>\n<li>Then its a matter of fixing your function, which you now know which one is the problem and even have an example of where its not working</li>\n</ul>\n"}], "owner": {"reputation": 136, "user_id": 6039992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d03f3fe488565366252857a3c60709?s=128&d=identicon&r=PG&f=1", "display_name": "titansarus", "link": "https://stackoverflow.com/users/6039992/titansarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 52975921, "answer_count": 1, "score": -4, "last_activity_date": 1540406426, "creation_date": 1540401865, "question_id": 52974793, "link": "https://stackoverflow.com/questions/52974793/finding-the-n-th-prime-number-that-is-palindrome-in-base-k", "title": "Finding the n-th prime number that is palindrome in base K", "body": "<p>I recently asked a question about finding whether a number is palindrome in base K or not and I get my answer.\n<a href=\"https://stackoverflow.com/questions/52973157/checking-if-a-number-is-palindrome-in-arbitrary-base-k-without-array?noredirect=1#comment92853725_52973157\">My Recent Question</a></p>\n\n<p>Now I have a more complicated question, We will get two numbers n and k, and we must find the n-th prime number that is palindrome in base K.</p>\n\n<p>For example if we get 8 and 10, we have 2 3 5 7 11 101 131 151 which are palindrome and prime and so the answer is 151. Another example is 4 2 we have 3 5 7 17 respectively 11 101 111 10001 in base 2 which are prime and palindrome in base so the answer is 17.</p>\n\n<p>n and k are given such that the answer is at most, 1E7.</p>\n\n<p>I submit my program in a judge system and It gave wrong answer in some cases and also Time Limit error in one case. I don't know which part of my algorithm is wrong and what part of it is not optimised.</p>\n\n<p>Note that I am not allowed to use array,vector and strings and also I cannot use libraries more than stdio.h and math.h. It is my program, Can anyone find any problems in it: (I defined intPow because the pow function in math, gives a float and sometime it causes problems)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nint primeCheck ( int n);\nint palindrome ( int n,int base);\nint digitCountBase (int n , int base);\nint intPow (int a , int b);\nint main()\n{\n    int n;\n    int base;\n    scanf(\"%d %d\",&amp;n,&amp;base);\n    int counter = 0;\n    int i =2;\n    int firstRound =1;\n    while (counter!=n)\n    {\n\n        if (primeCheck(i))\n        {\n            if (palindrome (i,base))\n            {\n                counter++;\n            }\n        }\n        if (counter ==n)\n        {\n            break;\n        }\n        if (firstRound)\n        {\n            i++;\n            firstRound=0;\n        }\n        else{i+=2;}\n\n    }\n    printf(\"%d\",i);\n    return 0;\n}\nint primeCheck ( int n)\n{\n    if (n&lt;2)\n    {\n        return 0;\n    }\n    if (n==4)\n    {\n        return 0;\n    }\n    else if (n&lt;=5)\n    {\n        return 1;\n    }\n\n    if (n%2 ==0 || n%3 ==0 || n% 5 ==0)\n    {\n\n        return 0;\n    }\n     int i =5;\n     int limit = sqrt(n)+2;\n    for (int i =5;i&lt;=limit;i+=6)\n    {\n        if (n%i==0||n%(i+2)==0)\n        {\n            return 0;\n        }\n    }\n    return 1;\n}\n\nint palindrome ( int n,int base)\n{\n    int isTrue = 1;\n    int digitCount = digitCountBase(n,base);\n\n    int power = intPow(base,digitCount-1);\n    while (n&gt;0&amp;&amp; digitCount &gt;0)\n    {\n\n        if (n%base != (n/power)&amp;&amp;digitCount!=1)\n        {\n            isTrue =0;\n            return 0;\n\n        }\n        n = n- power;\n        n=n/base;\n        power = power /base;\n        power = power /base;\n        digitCount=digitCount-2;\n    }\n\n    return isTrue;\n\n}\nint digitCountBase (int n , int base)\n{\n    int digits=0;\n    while (n)\n    {\n        digits++;\n        n = n / base;\n    }\nreturn digits;\n\n}\n\nint intPow (int a , int b)\n{\n    int result = 1;\n    for (int i=1;i&lt;=b;i++)\n    {\n        result = result * a;\n    }\n    return result;\n\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540401383, "post_id": 52974641, "comment_id": 92855695, "body": "How about <code>if(num &lt; 0) num *= -1;</code>?"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1540401549, "post_id": 52974641, "comment_id": 92855774, "body": "How about using the function <code>abs(num)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 4, "last_activity_date": 1540401446, "creation_date": 1540401446, "answer_id": 52974667, "question_id": 52974641, "link": "https://stackoverflow.com/questions/52974641/how-would-i-go-about-multiplying-a-number-by-a-1-in-c/52974667#52974667", "title": "How would i go about multiplying a number by a -1 in C?", "body": "<p>There's a function called <a href=\"https://en.cppreference.com/w/c/numeric/math/abs\" rel=\"nofollow noreferrer\"><code>abs</code></a> that gives you that:</p>\n\n<pre><code>int x = -1;\nint y = abs(x);\n</code></pre>\n\n<p>It effectively gives you the number without the sign, or the <a href=\"https://en.wikipedia.org/wiki/Absolute_value\" rel=\"nofollow noreferrer\">\"absolute value\"</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10553461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xh0KWtHesTo/AAAAAAAAAAI/AAAAAAAAADE/aC0qxP4JyZY/photo.jpg?sz=128", "display_name": "TheoPrograms", "link": "https://stackoverflow.com/users/10553461/theoprograms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1540401804, "creation_date": 1540401343, "question_id": 52974641, "link": "https://stackoverflow.com/questions/52974641/how-would-i-go-about-multiplying-a-number-by-a-1-in-c", "title": "How would i go about multiplying a number by a -1 in C?", "body": "<p>i want to do this because i don't want to output a negative number. So i'd like to multiply it by -1 to make it positive. Thanks in advance.</p>\n"}, {"tags": ["c", "file", "encryption", "fopen"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1540401140, "post_id": 52974572, "comment_id": 92855582, "body": "The only way to get a valid <code>FILE *</code> is to use <code>fopen</code>.  Why don&#39;t you just return the decrypted contents in a byte array?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1540401169, "post_id": 52974572, "comment_id": 92855596, "body": "You already &quot;converted&quot; your <code>const char*</code> to a <code>FILE*</code> when you called <code>fopen</code>."}, {"owner": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "edited": false, "score": 0, "creation_date": 1540401297, "post_id": 52974572, "comment_id": 92855658, "body": "sure, my decrypter code will process the file content and return it as char*, but i need to convert it to FILE* again without saving it."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1540401315, "post_id": 52974572, "comment_id": 92855672, "body": "<code>return (the decrypted file as FILE*).</code> then you have to create a new file that is decrypted and write to it close it, then open it  again for reading. Seems like a weird requirement or at least an insecure one."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1540401351, "post_id": 52974572, "comment_id": 92855684, "body": "Why?  What purpose does it serve to have a <code>FILE *</code>?  What&#39;s wrong with getting a <code>char *</code> pointing to the decrypted data?"}, {"owner": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "edited": false, "score": 0, "creation_date": 1540401436, "post_id": 52974572, "comment_id": 92855725, "body": "i need FILE* and not char* because im using a thirdparty code that require FILE* to do other processes. :("}, {"owner": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "edited": false, "score": 0, "creation_date": 1540401566, "post_id": 52974572, "comment_id": 92855780, "body": "i do not want to create a new temporary file since the encrypted data are precious :\\"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 2, "creation_date": 1540401758, "post_id": 52974572, "comment_id": 92855882, "body": "If you are on a POSIX compliant system you can use <code>fmemopen()</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540402036, "post_id": 52974572, "comment_id": 92856036, "body": "Cross platform: <a href=\"https://github.com/Snaipe/fmem\" rel=\"nofollow noreferrer\">github.com/Snaipe/fmem</a>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1540402052, "post_id": 52974572, "comment_id": 92856043, "body": "Same question: <a href=\"https://stackoverflow.com/q/24683052/3002139\">stackoverflow.com/q/24683052/3002139</a>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1540402142, "post_id": 52974572, "comment_id": 92856093, "body": "Possible dupes: <a href=\"https://stackoverflow.com/q/5135854/3002139\">stackoverflow.com/q/5135854/3002139</a> <a href=\"https://stackoverflow.com/q/539537/3002139\">stackoverflow.com/q/539537/3002139</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540402473, "post_id": 52974774, "comment_id": 92856261, "body": "What happens if the decrypted data is larger than the pipe&#39;s buffer?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540402656, "post_id": 52974774, "comment_id": 92856386, "body": "@Shawn You&#39;ll get a write error if that happens.  Linux defaults to 64K, but that can be increased via <code>fcntl</code> using the <code>F_SETPIPE_SZ</code> option."}, {"owner": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "edited": false, "score": 0, "creation_date": 1540414778, "post_id": 52974774, "comment_id": 92862182, "body": "Thank you all for these answers in such a short time @dbush i have tried your code, and it works but seems it works only if the char* doesnt contain spaces. if the data contains a space, the program keep alive without doing anything."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "edited": false, "score": 0, "creation_date": 1540414865, "post_id": 52974774, "comment_id": 92862222, "body": "@Giuseppe glad I could help.  Feel free to [accept this answer[(<a href=\"https://stackoverflow.com/help/accepted-answer\">stackoverflow.com/help/accepted-answer</a>) if you found it useful."}, {"owner": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "edited": false, "score": 0, "creation_date": 1540415046, "post_id": 52974774, "comment_id": 92862296, "body": "sorry, not spaces but returns char like &quot;\\n&quot;"}, {"owner": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "edited": false, "score": 0, "creation_date": 1540415608, "post_id": 52974774, "comment_id": 92862501, "body": "I&#39;ll explain for example: if i set data = &quot;helloworld&quot; and len = 10 it works perfectly. but if data is = &quot;hello world&quot; and len = 11 the program keep alive doing nothing; but if len is = 5 (to the &quot;o&quot; of &quot;hello&quot;) it works by writing only &quot;hello&quot; word. what&#39;s wrong?"}, {"owner": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "edited": false, "score": 0, "creation_date": 1540417003, "post_id": 52974774, "comment_id": 92863004, "body": "i fixed by replacing pipe(p) with _pipe(p, len, O_BINARY)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1540401810, "creation_date": 1540401810, "answer_id": 52974774, "question_id": 52974572, "link": "https://stackoverflow.com/questions/52974572/cast-char-to-file-without-saving-the-file/52974774#52974774", "title": "cast char* to FILE* without saving the file", "body": "<p>After decrypting the data, you can create a pipe to feed the decrypted data into, then you can return the read end of the pipe to read the data.</p>\n\n<pre><code>FILE *decrypt(){\n    FILE *cryptedfile = fopen(\"file.ext\", \"rb\");\n\n    char *data;\n    int len;\n    // load decrypted data into \"data\" and length info \"len\"\n\n    int p[2];\n    if (pipe(p) == -1) {\n        perror(\"pipe failed\");\n        return NULL;\n    }\n\n    int rval;\n    if ((rval = write(p[1], data, len)) == -1) {\n        perror(\"write failed\");\n        close(p[0]);\n        close(p[1]);\n        return NULL;\n    } else if (rval &lt; len) {\n        printf(\"write failed, wrote %d, expected %d\\n\", rval, len);\n        close(p[0]);\n        close(p[1]);\n        return NULL;\n    }\n\n    return fdopen(p[0], \"r\");\n}\n</code></pre>\n\n<p>Alternately, you can also use <code>fmemopen</code>:</p>\n\n<pre><code>FILE *decrypt(){\n    FILE *cryptedfile = fopen(\"file.ext\", \"rb\");\n\n    char *data;\n    int len;\n    // load decrypted data into \"data\" and length info \"len\"\n\n    return fmemopen(data, len, \"rb\");\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10553340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6e855136a8d7ca987a53444af78be3?s=128&d=identicon&r=PG&f=1", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/10553340/giuseppe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52974774, "answer_count": 1, "score": -1, "last_activity_date": 1540401810, "creation_date": 1540401092, "last_edit_date": 1540401309, "question_id": 52974572, "link": "https://stackoverflow.com/questions/52974572/cast-char-to-file-without-saving-the-file", "title": "cast char* to FILE* without saving the file", "body": "<p>im trying to open an existing file in \"rb\" mode and i need to decrypt returning a new FILE* without overwrite the original file or creating new temporary one.\nin short words, i need something like this:</p>\n\n<pre><code>FILE *decrypt(){\n    FILE *cryptedfile = fopen(\"file.ext\", \"rb\");\n\n    //... my decrypter code\n\n    return (the decrypted file as FILE*).\n}\n</code></pre>\n\n<p>so, there is a way to do something like \"cast char* to FILE*\"?</p>\n\n<p>i have tried many different solutions without success, i have also tried to create a new tmpfile() but the result seems do not work properly and i do not want to create a tmpfile anyway, but just keep it into the memory.</p>\n\n<p><strong>thanks</strong> <strong>:)</strong></p>\n"}, {"tags": ["c", "windows", "fibers"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1540400727, "post_id": 52974453, "comment_id": 92855382, "body": "It&#39;s important to ask one specific question at a time. You&#39;ve opened up three very broad subjects here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540400780, "post_id": 52974453, "comment_id": 92855407, "body": "@tadman I though because they are all related, I should just combine them. But, sorry. I can edit and remove the last two if you want."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1540400830, "post_id": 52974453, "comment_id": 92855438, "body": "Each one is probably fine on its own, but this is asking a lot to cover in one shot. What&#39;s the goal here? Understanding fibers more thoroughly, or do you have a specific problem you&#39;re trying to solve and you think fibers might help?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540402118, "post_id": 52974742, "comment_id": 92856075, "body": "Thanks for the information.  1) So, basically we always need two threads when using a fiber, so we can switch between them? 2) My question is just, whether there are some functions or anything that I can call, which can tell me, yes there is a fiber running at the moment, or yes, this fiber is active. 3) Yes that&#39;s what I&#39;m asking, are there any methods or anything to get the stack address of the fiber?"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1540402349, "post_id": 52974742, "comment_id": 92856196, "body": "You don&#39;t strictly need multiple threads to use fibers. Fibers are essentially alternate stacks for a thread - possibly the main thread. When you switch fibers you essentially switch stacks. And, as mentioned above, when a fiber is executing it has access to its own stack in the normal way."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540402540, "post_id": 52974742, "comment_id": 92856304, "body": "Aha I see. Thanks for clarification. So, basically if one fiber is active, and then I declare a local variable at that moment, the variable will be written on the stack of this fiber, right? And afterwards if I switch to another fiber, it won&#39;t be in the stack of this second fiber, or?"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1540402614, "post_id": 52974742, "comment_id": 92856352, "body": "Correct. Each fiber has its own stack, hence its own copy of local variables."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540402711, "post_id": 52974742, "comment_id": 92856418, "body": "\u201ccopy of local variables\u201d, can we make sure that some data is only in one stack and not the other, something like private to one?"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1540402979, "post_id": 52974742, "comment_id": 92856564, "body": "Since each fiber has its own stack, each fiber has its own copy of local variables, not visible to other fibers (unless you explicitly create pointers to them and pass those around)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540409057, "post_id": 52974742, "comment_id": 92859586, "body": "But, how can I get the total size of the fiber stack? I can get the low and high addresses using <code>GetCurrentThreadStackLimits</code> once the fiber is active."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1540410576, "post_id": 52974742, "comment_id": 92860297, "body": "You specify that yourself when you create the fiber."}], "tags": [], "owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "is_accepted": true, "score": 1, "last_activity_date": 1540401724, "creation_date": 1540401724, "answer_id": 52974742, "question_id": 52974453, "link": "https://stackoverflow.com/questions/52974453/whats-the-proper-usage-of-fibers-in-windows-for-c/52974742#52974742", "title": "What&#39;s the proper usage of Fibers in Windows for C?", "body": "<p>(Disclaimer: I've only written a few test programs that use fibers in order to verify that they were working properly while running under a performance profiler that I was working on at the time.)</p>\n\n<p>1) As you say, a fiber does not run by itself. It only runs when another thread explicitly switches to it by calling <code>SwitchToFiber</code>. Execution then continues on that fiber until <em>it</em> calls <code>SwitchToFiber</code> and switches back to the original thread or another fiber.</p>\n\n<p>2) It's unclear to me what you are asking here. If the fiber is the only one calling a particular function it can set some variable or call a function and you'll know it was there. If multiple fibers are calling the same function, maybe they could record their thread id and you'd be able to infer which fiber called the function. What's the use case here?</p>\n\n<p>3) If the fiber is executing, it has access to its stack/registers in the normal way. I am not aware of a way to arbitrarily access the stack of a fiber that isn't currently scheduled to run on a thread, but I suppose you could record the address of the stack from within the fiber itself.</p>\n\n<p>For what it's worth, I don't think the fiber support in Windows API is used much.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 52974742, "answer_count": 1, "score": 1, "last_activity_date": 1540401724, "creation_date": 1540400644, "last_edit_date": 1540400973, "question_id": 52974453, "link": "https://stackoverflow.com/questions/52974453/whats-the-proper-usage-of-fibers-in-windows-for-c", "title": "What&#39;s the proper usage of Fibers in Windows for C?", "body": "<p>I have been recently interested about Fibers in Windows, but I have hard time using it. The documentation involves function definitions and some example, but still some stuff are not clear to me. I see that <code>CreateFiber</code> definition is defined as:</p>\n\n<pre><code>LPVOID CreateFiber(\n  SIZE_T                dwStackSize,\n  LPFIBER_START_ROUTINE lpStartAddress,\n  LPVOID                lpParameter\n);\n</code></pre>\n\n<p>So, we specify the stack size, the function for the fiber and possibly a parameter for the function. Now, my questions are:</p>\n\n<p>1) Once fiber is created, I assume the provided functions execution doesn't immediately start, right? I believe one needs to call <code>ConvertThreadToFiber</code> first. But are there any other stuff needed to be done? I mean in the simplest case, how does defining, initiating, running and deleting a simple fiber looks like?</p>\n\n<p>2) Is it possible somehow to check whether we are actually in the fiber? I mean whether fiber is executing inside some other part of the app? If yes, how?</p>\n\n<p>3) Is it possible to get the memory location of the fiber's stack and the actual content of the fiber's stack at any moment we wish? If yes, how?</p>\n"}, {"tags": ["c", "macos", "gcc"], "comments": [{"owner": {"reputation": 523, "user_id": 10028727, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1Y9Oj2m20LM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qNVXWmqD8ILmSmKsgDQ0QULiEHwA/mo/photo.jpg?sz=128", "display_name": "Bilal Saleem", "link": "https://stackoverflow.com/users/10028727/bilal-saleem"}, "edited": false, "score": 2, "creation_date": 1540400559, "post_id": 52974321, "comment_id": 92855278, "body": "I ran the program you pasted above and it ran fine for me. However, when I changed <code>stdio.h</code> to <code>_stdio.h</code>, I got the same error. I would just double check and make sure you didn&#39;t have a typo over there. If that&#39;s not the issue then it has to do with with some bug in the compiler. Try installing a different one?"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1540400775, "post_id": 52974321, "comment_id": 92855403, "body": "I think you have to start the Xcode GUI at least once after upgrading to Mojave and do updates then it works."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 523, "user_id": 10028727, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1Y9Oj2m20LM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qNVXWmqD8ILmSmKsgDQ0QULiEHwA/mo/photo.jpg?sz=128", "display_name": "Bilal Saleem", "link": "https://stackoverflow.com/users/10028727/bilal-saleem"}, "edited": false, "score": 1, "creation_date": 1540407397, "post_id": 52974321, "comment_id": 92858802, "body": "@BilalSaleem: This issue is not caused by a typo, as is evident from the error message that shows the attempt to include <code>_stdio.h</code> comes from <code>stdio.h</code> in some installation path, not a source or header file in the usual user path. This is evidence of a broken compiler installation."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1540407615, "post_id": 52974321, "comment_id": 92858908, "body": "Not sure this is a duplicate, but see these potential originals: <a href=\"https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave\">1</a>, <a href=\"https://stackoverflow.com/questions/19580758/gcc-fatal-error-stdio-h-no-such-file-or-directory\">2</a>."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1540410359, "post_id": 52974321, "comment_id": 92860207, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave\">Can&#39;t compile C program on a Mac after upgrade to Mojave</a>"}], "answers": [{"comments": [{"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1540410160, "post_id": 52976753, "comment_id": 92860110, "body": "At first glance, I thought this might be a typo in your source code.  Then I noticed Eric Postpischil&#39;s comment: the compiler is correctly finding `&quot;stdio.h&quot; ... but stdio.h is looking for &quot;_stdio.h&quot; ... which was missing.  Glad you got it figured out, and thank you for posting the solution!"}, {"owner": {"reputation": 141, "user_id": 2504891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78fdaa3160404c1b095cc220941360b2?s=128&d=identicon&r=PG", "display_name": "Vesal", "link": "https://stackoverflow.com/users/2504891/vesal"}, "edited": false, "score": 0, "creation_date": 1541452314, "post_id": 52976753, "comment_id": 93214931, "body": "Thank you so much for finding this! Installing gcc-8 with homebrew has the same issue and this solution is the only thing that worked."}, {"owner": {"reputation": 1417, "user_id": 2430555, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OenB4.jpg?s=128&g=1", "display_name": "Pedro Paulo Amorim", "link": "https://stackoverflow.com/users/2430555/pedro-paulo-amorim"}, "edited": false, "score": 0, "creation_date": 1584010384, "post_id": 52976753, "comment_id": 107307171, "body": "This file does not exist on macOS Mojave."}], "tags": [], "owner": {"reputation": 3833, "user_id": 906357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/456c9cf9b7e6c61a7037bd5a604769ca?s=128&d=identicon&r=PG", "display_name": "user906357", "link": "https://stackoverflow.com/users/906357/user906357"}, "is_accepted": true, "score": 3, "last_activity_date": 1540409968, "creation_date": 1540409968, "answer_id": 52976753, "question_id": 52974321, "link": "https://stackoverflow.com/questions/52974321/compiling-with-gcc-in-macos-mojave/52976753#52976753", "title": "Compiling with gcc in macOS Mojave", "body": "<p>I figured out how to fix it. I went to </p>\n\n<pre><code>/Library/Developer/CommandLineTools/Packages/\n</code></pre>\n\n<p>then opened and installed macOS_SDK_headers_for_macOS_10.14.pkg.</p>\n"}], "owner": {"reputation": 3833, "user_id": 906357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/456c9cf9b7e6c61a7037bd5a604769ca?s=128&d=identicon&r=PG", "display_name": "user906357", "link": "https://stackoverflow.com/users/906357/user906357"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 0, "accepted_answer_id": 52976753, "answer_count": 1, "score": 2, "last_activity_date": 1540409968, "creation_date": 1540400083, "question_id": 52974321, "link": "https://stackoverflow.com/questions/52974321/compiling-with-gcc-in-macos-mojave", "title": "Compiling with gcc in macOS Mojave", "body": "<p>Before updating to Mojave I was compiling C programs just fine. I used an older version of gcc, 7.3, that I installed using the instructions found <a href=\"http://hpc.sourceforge.net\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Then I updated to Mojave and tried compiling the simple program that follows with gcc main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n    printf(\"Hello World\\n\");\n    return 0;}\n</code></pre>\n\n<p>This results in the following error:</p>\n\n<pre><code>/usr/local/lib/gcc/x86_64-apple-darwin17.5.0/7.3.0/include-fixed/stdio.h:78:10: fatal error: _stdio.h: No such file or directory\n #include &lt;_stdio.h&gt;\n      ^~~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>If I remove the include it will compile with implicit declaration warnings for printf, but will still compile and run properly, printing Hello World. Does anyone know the issue and how I can fix it?</p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1540400810, "post_id": 52974314, "comment_id": 92855421, "body": "What is <code>char x = 0xf3;</code> here?"}, {"owner": {"reputation": 143, "user_id": 8231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986c8488dfa7aefa585a38bc26a90b33?s=128&d=identicon&r=PG&f=1", "display_name": "user8231110", "link": "https://stackoverflow.com/users/8231110/user8231110"}, "reply_to_user": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1540400999, "post_id": 52974314, "comment_id": 92855512, "body": "it&#39;s the hex value of 243"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1540401185, "post_id": 52974314, "comment_id": 92855604, "body": "I&#39;m not sure what you mean by &quot;This computation returns a char consisting of 4.&quot; Is that a char with value 4, or is it 4 chars, or something else?"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1540401302, "post_id": 52974314, "comment_id": 92855663, "body": "check this assignment carefully---------&gt; <code>char s[10] = x;</code>"}, {"owner": {"reputation": 143, "user_id": 8231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986c8488dfa7aefa585a38bc26a90b33?s=128&d=identicon&r=PG&f=1", "display_name": "user8231110", "link": "https://stackoverflow.com/users/8231110/user8231110"}, "edited": false, "score": 0, "creation_date": 1540401347, "post_id": 52974314, "comment_id": 92855683, "body": "it consists of 4 chars.."}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1540401450, "post_id": 52974314, "comment_id": 92855730, "body": "How are you storing those characters in <code>char</code> type variable?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540401556, "post_id": 52974314, "comment_id": 92855776, "body": "Where are these four characters? You&#39;re not composing a valid NUL-terminated C string here. You need to do that first."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1540402104, "post_id": 52974314, "comment_id": 92856072, "body": "<code>char x</code> declares x as single variable for a character value (a single letter, like <code>&#39;a&#39;</code> or <code>&#39;b&#39;</code>). <code>&quot;0xf3&quot;</code> is a string of characters, it&#39;s: <code>{ &#39;0&#39;, &#39;x&#39;, &#39;f&#39;, &#39;3&#39; &#39;\\0&#39; }</code>, 5 characters including the terminating null byte. <code>char s[10]</code> is a char array for 10 characters. <code>char  x = &quot;0xf3&quot;</code> and <code>char s[10] = x</code> is just invalid and comes from not understanding pointers. You can <code>char x[] = &quot;0xf3&quot;</code> and <code>char *s = x</code>. or <code>char s[10]; strcpy(s, x);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 8231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986c8488dfa7aefa585a38bc26a90b33?s=128&d=identicon&r=PG&f=1", "display_name": "user8231110", "link": "https://stackoverflow.com/users/8231110/user8231110"}, "edited": false, "score": 0, "creation_date": 1540403655, "post_id": 52975014, "comment_id": 92856909, "body": "0xf3 is hexadecimal value. I tried to save char x = &#39;0xf3&#39;, but it gives me error. with short words: I have 0xf3 (it is hexadecimal) and I want to store it is in array s[], so that should be like s[] = {0,x,f,3}."}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "reply_to_user": {"reputation": 143, "user_id": 8231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986c8488dfa7aefa585a38bc26a90b33?s=128&d=identicon&r=PG&f=1", "display_name": "user8231110", "link": "https://stackoverflow.com/users/8231110/user8231110"}, "edited": false, "score": 0, "creation_date": 1540403991, "post_id": 52975014, "comment_id": 92857089, "body": "@user8231110 you have to store &quot;oxf3&quot; in a char array as I did. Now s[] is storing &quot;oxf3&quot;."}, {"owner": {"reputation": 143, "user_id": 8231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986c8488dfa7aefa585a38bc26a90b33?s=128&d=identicon&r=PG&f=1", "display_name": "user8231110", "link": "https://stackoverflow.com/users/8231110/user8231110"}, "edited": false, "score": 0, "creation_date": 1540404139, "post_id": 52975014, "comment_id": 92857165, "body": "I do understand that, but the problem is that the char I have to store in the array is computed in another function, namely by the substitution (S-Box from crypto)"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "reply_to_user": {"reputation": 143, "user_id": 8231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986c8488dfa7aefa585a38bc26a90b33?s=128&d=identicon&r=PG&f=1", "display_name": "user8231110", "link": "https://stackoverflow.com/users/8231110/user8231110"}, "edited": false, "score": 0, "creation_date": 1540404672, "post_id": 52975014, "comment_id": 92857488, "body": "@user8231110 then store the return value of that function in <code>char x[]</code>"}], "tags": [], "owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "is_accepted": false, "score": 0, "last_activity_date": 1540403095, "last_edit_date": 1540403095, "creation_date": 1540402740, "answer_id": 52975014, "question_id": 52974314, "link": "https://stackoverflow.com/questions/52974314/how-to-count-non-zero-occurrences-of-a-char-in-c/52975014#52975014", "title": "How to count non-zero occurrences of a char in C?", "body": "<blockquote>\n  <p><strong>This computation returns a char consisting of 4</strong>.</p>\n</blockquote>\n\n<p>You are saying your computation returns a character which consists of 4 characters. Is it possible???</p>\n\n<p>I guess your computation returns a string that consists of 4 characters. Example <code>0xf3</code></p>\n\n<p>You can not store a <code>string literal</code> in <code>char</code> type variable. </p>\n\n<pre><code>char x = \"0xf3\";  //&lt;---------------------\n</code></pre>\n\n<p>You can store them in a character array like <code>char x[] = \"0xf3\";</code> </p>\n\n<p>Here is the modified code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;string.h&gt;  //&lt;---- for strlen() and strcpy()\n\nint main()\n{\n\n    char x[] = \"0xf3\";  //&lt;----store in a char array\n\n    char s[10];\n\n    strcpy(s, x);  //&lt;----copy in another array \n\n    int lingh = strlen(s); \n\n    for (int i = 0; i&lt;lingh;i++) {\n\n        printf(\"%c\\n\", s[i] );\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 8231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986c8488dfa7aefa585a38bc26a90b33?s=128&d=identicon&r=PG&f=1", "display_name": "user8231110", "link": "https://stackoverflow.com/users/8231110/user8231110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540403095, "creation_date": 1540400061, "last_edit_date": 1540401892, "question_id": 52974314, "link": "https://stackoverflow.com/questions/52974314/how-to-count-non-zero-occurrences-of-a-char-in-c", "title": "How to count non-zero occurrences of a char in C?", "body": "<p>I am new in C programming. I would like to ask how I can store a char in a char array? The reason why I want to do it is because I get a char from a computation I make. This computation returns a char consisting of 4. I want to look through every character of the 4 and check if they are \"0\". If not, then I will increment by one. This is an example of a substitution: \"0xf3\"- I am trying to compute the Hamming Weight of a substitution. This is how I try to count how many non-zero the char consists of: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n\n    char x = \"0xf3\";\n\n    char s[10] = x;\n\n    int lingh = strlen(s); \n\n    for (int i = 0; i&lt;lingh;i++) {\n\n        printf(\"%c\\n\", s[i] );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>the output I expect is something like s[] = {0,x,f,3}</p>\n"}, {"tags": ["c", "arrays", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1540400024, "post_id": 52974272, "comment_id": 92855011, "body": "Also in C we do not cast the result of <code>malloc</code>, because doing so has only drawbacks and no advantage. <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540400054, "post_id": 52974272, "comment_id": 92855024, "body": "Why? Where do local variables get allocated? What limits are imposed on the size of those variables? What lifetime to locally allocated variables have?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1540400367, "post_id": 52974272, "comment_id": 92855193, "body": "One important difference (apart from the fact that one is an array and the other is a pointer) is that the memory allocated by <code>malloc</code> needs to be <code>free</code>d to avoid a memory leak."}], "owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "closed_date": 1540400340, "answer_count": 0, "score": 0, "last_activity_date": 1540399871, "creation_date": 1540399871, "question_id": 52974272, "link": "https://stackoverflow.com/questions/52974272/c-dynamic-allocation-w-pointers", "closed_reason": "Duplicate", "title": "C Dynamic Allocation w/Pointers", "body": "<p>Why do we use pointers and malloc/calloc when we use dynamic sized arrays instead of giving the size of the array as a variable?</p>\n\n<pre><code>int *array = (int*)malloc(sizeof(int) * (n));\nfor (int i = 0; i &lt; n; i++ ) array[i] = 1;\n\n// What are their differences?\n\nint array[n];\nfor (int i = 0; i &lt; n; i++ ) array[i] = 1;\n</code></pre>\n"}, {"tags": ["c", "microcontroller", "pic", "microchip", "mplab"], "comments": [{"owner": {"reputation": 487, "user_id": 2766387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b93034102fea1e1d793b2fef66e69b?s=128&d=identicon&r=PG", "display_name": "Oleg Mazurov", "link": "https://stackoverflow.com/users/2766387/oleg-mazurov"}, "edited": false, "score": 0, "creation_date": 1540399685, "post_id": 52973834, "comment_id": 92854832, "body": "For one, the timer needs to be initialized and run, per section 14.1.2 of the datasheet. There may be other errors as well, get the timer running and come back with results."}, {"owner": {"reputation": 1, "user_id": 8962200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Tv8fSAfmBM4/AAAAAAAAAAI/AAAAAAAAAh0/RKP43JmhE9E/photo.jpg?sz=128", "display_name": "Fabio", "link": "https://stackoverflow.com/users/8962200/fabio"}, "reply_to_user": {"reputation": 487, "user_id": 2766387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b93034102fea1e1d793b2fef66e69b?s=128&d=identicon&r=PG", "display_name": "Oleg Mazurov", "link": "https://stackoverflow.com/users/2766387/oleg-mazurov"}, "edited": false, "score": 0, "creation_date": 1540401514, "post_id": 52973834, "comment_id": 92855763, "body": "Sorry, I wrote a part of the code but there is also the initialization of the timer:     <code>&#47;&#47; TIMER1 settings      &#47;&#47;FOSC source     T1CONbits.TMR1CS1 = 0;     T1CONbits.TMR1CS0 = 1;         &#47;&#47;prescaler 1:1     T1CONbits.T1CKPS1 = 0;     T1CONbits.T1CKPS0 = 0;     T1CONbits.T1RD16 = 1; &#47;&#47;enables read&#47;write register in one 16 bit operation     TMR1 = 0x00;   &#47;&#47;Clear contents of the timer1 register     T1CONbits.TMR1ON = 1; </code>"}, {"owner": {"reputation": 487, "user_id": 2766387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b93034102fea1e1d793b2fef66e69b?s=128&d=identicon&r=PG", "display_name": "Oleg Mazurov", "link": "https://stackoverflow.com/users/2766387/oleg-mazurov"}, "edited": false, "score": 0, "creation_date": 1540407638, "post_id": 52973834, "comment_id": 92858919, "body": "This is not readable."}, {"owner": {"reputation": 1, "user_id": 8962200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Tv8fSAfmBM4/AAAAAAAAAAI/AAAAAAAAAh0/RKP43JmhE9E/photo.jpg?sz=128", "display_name": "Fabio", "link": "https://stackoverflow.com/users/8962200/fabio"}, "reply_to_user": {"reputation": 487, "user_id": 2766387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b93034102fea1e1d793b2fef66e69b?s=128&d=identicon&r=PG", "display_name": "Oleg Mazurov", "link": "https://stackoverflow.com/users/2766387/oleg-mazurov"}, "edited": false, "score": 1, "creation_date": 1540407854, "post_id": 52973834, "comment_id": 92859013, "body": "Resolved! I forgot to set the PEIE and GIE bits! Now it works."}], "owner": {"reputation": 1, "user_id": 8962200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Tv8fSAfmBM4/AAAAAAAAAAI/AAAAAAAAAh0/RKP43JmhE9E/photo.jpg?sz=128", "display_name": "Fabio", "link": "https://stackoverflow.com/users/8962200/fabio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540398282, "creation_date": 1540398282, "question_id": 52973834, "link": "https://stackoverflow.com/questions/52973834/configuration-of-the-input-capture-functionality-of-pic18f46k22", "title": "Configuration of the input capture functionality of PIC18F46K22", "body": "<p>I'am using a PIC18F46K22 to measure time that elapses between two event (rising edges of a square wave) using the input capture mode. I configured the related registers but I don't know because the code doesn't work; I'll show you a summary of my code. This is the part of code in the main function that configures the input capture:</p>\n\n<pre><code>//IC configuration\n    //Input Capture is RC1 (pin 12), TMR1 is used\nTRISCbits.RC1 = 1;\nCCPTMRS0bits.C2TSEL1 = 0;\nCCPTMRS0bits.C2TSEL0 = 0;\n\nPIE2bits.CCP2IE = 1;\nPIR2bits.CCP2IF = 0;\n    //IC on every rising edge\nCCP2CONbits.CCP2M3 = 0;\nCCP2CONbits.CCP2M2 = 1;\nCCP2CONbits.CCP2M1 = 0;\nCCP2CONbits.CCP2M0 = 1;\n</code></pre>\n\n<p>And this is the ISR code:</p>\n\n<pre><code>void interrupt ISR(void) {    \n    if(PIR2bits.CCP2IF) {\n        PIR2bits.CCP2IF = 0;\n\n       //code...\n    }    \n}\n</code></pre>\n\n<p>What's wrong or missing in the configuration?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "disassembly", "objdump"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1540397971, "post_id": 52973678, "comment_id": 92853846, "body": "What&#39;s the purpose of this exercise?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1540398119, "post_id": 52973678, "comment_id": 92853934, "body": "SO works best for specific questions. The solution to <i>&quot;hard to understand what each instruction is doing&quot;</i> is to look up an assembly tutorial and read it."}, {"owner": {"reputation": 573, "user_id": 8168483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c739c33f9cbd40c31fed10707f1a8e88?s=128&d=identicon&r=PG&f=1", "display_name": "kerrytazi", "link": "https://stackoverflow.com/users/8168483/kerrytazi"}, "edited": false, "score": 1, "creation_date": 1540399454, "post_id": 52973678, "comment_id": 92854682, "body": "your program does not swap number btw. use pointers to <code>n1</code> and <code>n2</code> like for <code>scanf</code>"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540402416, "post_id": 52973678, "comment_id": 92856236, "body": "How to read it? Carefully. And visit <a href=\"http://godbolt.com\" rel=\"nofollow noreferrer\">godbolt.com</a>  And remember the compiler may optimize your code altogether and leave only statements with side effects, so there may not be any swapping code in assembly."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10540693"}, "is_accepted": true, "score": 1, "last_activity_date": 1540401395, "creation_date": 1540401395, "answer_id": 52974653, "question_id": 52973678, "link": "https://stackoverflow.com/questions/52973678/how-to-read-assembly-code-output-from-objdump/52974653#52974653", "title": "How to read assembly code output from objdump", "body": "<p>To get started with the assembly language you can check the following link:</p>\n\n<p><a href=\"http://patshaughnessy.net/2016/11/26/learning-to-read-x86-assembly-language\" rel=\"nofollow noreferrer\">http://patshaughnessy.net/2016/11/26/learning-to-read-x86-assembly-language</a></p>\n"}], "owner": {"reputation": 1859, "user_id": 5260872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e08272816864f87e6b904fb63758f5bf?s=128&d=identicon&r=PG", "display_name": "Nish\u0101n Wickramarathna", "link": "https://stackoverflow.com/users/5260872/nish%c4%81n-wickramarathna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1354, "favorite_count": 0, "closed_date": 1540402292, "accepted_answer_id": 52974653, "answer_count": 1, "score": 1, "last_activity_date": 1588094663, "creation_date": 1540397737, "last_edit_date": 1588094663, "question_id": 52973678, "link": "https://stackoverflow.com/questions/52973678/how-to-read-assembly-code-output-from-objdump", "closed_reason": "Needs more focus", "title": "How to read assembly code output from objdump", "body": "<p>I have a <code>C</code> code that swaps two numbers.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid swap(int,int);        \nvoid main( )\n{\n    int n1,n2;\n    printf(\"Enter the two numbers to be swapped\\n\");\n    scanf(\"%d%d\",&amp;n1,&amp;n2);\n    printf(\"\\nThe values of n1 and n2 in the main function before calling the swap function are n1=%d n2=%d\",n1,n2);\n    swap(n1,n2);                                          \n    printf(\"\\nThe values of n1 and n2 in the main function after calling the swap function are n1=%d n2=%d\",n1,n2);}\n\nvoid swap(int n1,int n2)                           \n{ \n    int temp;\n    temp=n1;\n    n1=n2;\n    n2=temp;\n    printf(\"\\nThe values of n1 and n2 in the swap function after swapping are n1=%d n2=%d\",n1,n2);\n}\n</code></pre>\n\n<p>I have disassembled it using <code>objdump</code> and been trying to find out how the swap operation happens in machine level. I think this is the swap function.</p>\n\n<pre><code>000006b4 &lt;swap&gt;:\n 6b4:   55                      push   %ebp\n 6b5:   89 e5                   mov    %esp,%ebp\n 6b7:   53                      push   %ebx\n 6b8:   83 ec 14                sub    $0x14,%esp\n 6bb:   e8 37 00 00 00          call   6f7 &lt;__x86.get_pc_thunk.ax&gt;\n 6c0:   05 0c 19 00 00          add    $0x190c,%eax\n 6c5:   8b 55 08                mov    0x8(%ebp),%edx\n 6c8:   89 55 f4                mov    %edx,-0xc(%ebp)\n 6cb:   8b 55 0c                mov    0xc(%ebp),%edx\n 6ce:   89 55 08                mov    %edx,0x8(%ebp)\n 6d1:   8b 55 f4                mov    -0xc(%ebp),%edx\n 6d4:   89 55 0c                mov    %edx,0xc(%ebp)\n 6d7:   83 ec 04                sub    $0x4,%esp\n 6da:   ff 75 0c                pushl  0xc(%ebp)\n 6dd:   ff 75 08                pushl  0x8(%ebp)\n 6e0:   8d 90 c0 e8 ff ff       lea    -0x1740(%eax),%edx\n 6e6:   52                      push   %edx\n 6e7:   89 c3                   mov    %eax,%ebx\n 6e9:   e8 72 fd ff ff          call   460 &lt;printf@plt&gt;\n 6ee:   83 c4 10                add    $0x10,%esp\n 6f1:   90                      nop\n 6f2:   8b 5d fc                mov    -0x4(%ebp),%ebx\n 6f5:   c9                      leave  \n 6f6:   c3                      ret   \n</code></pre>\n\n<p>I want to know how swap operation is happening inside registers, I know it has to be something like this.</p>\n\n<pre><code>push eax\nmov eax, ebx\npop ebx\n</code></pre>\n\n<p>But I can't see anything similar to this. Since I'm new to these things, can someone please help me how to understand how this is happening. <a href=\"https://drive.google.com/file/d/1FlHIHQnExy-SuXMxHBhIxZb7MdaXkQgZ/view?usp=sharing\" rel=\"nofollow noreferrer\">Full output of the <code>objdump</code> is here.</a> </p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540399344, "post_id": 52973164, "comment_id": 92854624, "body": "Just so I&#39;m clear, you have a list of filenames and you want to store the contents of those files in a table?"}, {"owner": {"reputation": 55, "user_id": 6594466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f1b75d4edbb85a18a68b5a6538d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "t_P", "link": "https://stackoverflow.com/users/6594466/t-p"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540399834, "post_id": 52973164, "comment_id": 92854913, "body": "Yes I have a list of filenames and I want to store the content of each file from the list in separate table, the table name should be from the variable subpath"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540401231, "post_id": 52973164, "comment_id": 92855621, "body": "You should explain (In the question, not a comment!) precisely how to derive the table names and what the contents of the files you want to import look like, with example data exactly as it would it appear in the files."}, {"owner": {"reputation": 55, "user_id": 6594466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f1b75d4edbb85a18a68b5a6538d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "t_P", "link": "https://stackoverflow.com/users/6594466/t-p"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540416812, "post_id": 52973164, "comment_id": 92862934, "body": "I did it now .."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540420771, "post_id": 52973164, "comment_id": 92864129, "body": "Much better, thanks. - Does this <i>have</i> to be in C? It&#39;s a few lines of shell, and while doing it in C isn&#39;t difficult, it is tedious and more work."}, {"owner": {"reputation": 55, "user_id": 6594466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f1b75d4edbb85a18a68b5a6538d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "t_P", "link": "https://stackoverflow.com/users/6594466/t-p"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540449689, "post_id": 52973164, "comment_id": 92871539, "body": "Well, since I get all the paths and variables in C so I&#39;d prefer if it can be in C too so I can just do it in the same script file, but if there&#39;s any other way that can be efficient (because URL files are relatively large) it would also be good. Thnx"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6594466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f1b75d4edbb85a18a68b5a6538d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "t_P", "link": "https://stackoverflow.com/users/6594466/t-p"}, "edited": false, "score": 0, "creation_date": 1540824447, "post_id": 52991429, "comment_id": 92995670, "body": "Man I really appreciate your effort, this is amazing what you replied to me with. And you&#39;re right, I&#39;m not experienced with C, and the reason I use <code>fgets()</code> followed by <code>fscanf()</code> is that I couldn&#39;t find a way to assign the path into a variable and a single word from the path in another variable. And what alternative you can suggest for solving that ? (if you can answer of course). And now I&#39;m honestly confused, should I proceed with C and continue with the solution you gave me or switch to bash script. And thank you so much again."}, {"owner": {"reputation": 55, "user_id": 6594466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f1b75d4edbb85a18a68b5a6538d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "t_P", "link": "https://stackoverflow.com/users/6594466/t-p"}, "edited": false, "score": 0, "creation_date": 1540985751, "post_id": 52991429, "comment_id": 93061649, "body": "Problems are all solved now, the code is perfectly working as you suggested. Thank you for your help :))"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1540476704, "creation_date": 1540476704, "answer_id": 52991429, "question_id": 52973164, "link": "https://stackoverflow.com/questions/52973164/import-multiple-files-using-paths-stored-in-variables-into-sqlite-tables-in-c/52991429#52991429", "title": "Import multiple files using paths stored in variables into SQLite tables in C", "body": "<p>Assuming you haven't gotten it working yet, looking at that bit of code in your question makes me suspect you're not that strong at C yet, because there's some strange bits that don't really make any sense (Why are you reading a line with <code>fgets()</code> and then immediately using <code>fscanf()</code> to read a single word into the same variable you just read a line into? Especially when your input seems to have one filename per line? And that memcpy() will break badly if you try using files in different directories.)</p>\n\n<p>That's why I suggested using a shell script. With all your information in files, it's just so much easier even if you're fluent in C.</p>\n\n<p>Here's a bash-specific one:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/bash\ndatabase=test.db\ndomainsfile=domainlist.txt\ncoproc sqlite3 -batch -list \"$database\"\necho \"PRAGMA journal_mode = TRUNCATE;\" &gt;&amp;${COPROC[1]}\nwhile read filename; do\n    d=$(dirname \"$filename\")\n    tablename=$(basename \"$d\")\n    cat &gt;&amp;${COPROC[1]} &lt;&lt;EOF\nBEGIN TRANSACTION;\nCREATE TABLE IF NOT EXISTS \"$tablename\"(url TEXT);\n.import \"$filename\" \"$tablename\"\nCOMMIT;\nEOF\ndone &lt;$domainsfile\necho .quit &gt;&amp;${COPROC[1]}\nwait $COPROC_PID\n</code></pre>\n\n<p>and a less efficient (Because it runs a new instance of the sqlite3 shell per table, instead of using a single one for all of them) but more generic portable sh version:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/sh\ndatabase=test.db\ndomainsfile=domainlist.txt\nwhile read filename; do\n    d=$(dirname \"$filename\")\n    tablename=$(basename \"$d\")\n    sqlite3 -batch -list \"$database\" &lt;&lt;EOF\nCREATE TABLE IF NOT EXISTS \"$tablename\"(url TEXT);\n.import \"$filename\" \"$tablename\"\nEOF\ndone &lt;$domainsfile\n</code></pre>\n\n<p>However, some hints for a C version:</p>\n\n<p>For each filename in domainlist.txt, extract the table name portion (The POSIX <code>dirname()</code> and <code>basename()</code> functions would be useful). Then create the table with something like:</p>\n\n<pre><code>char *errmsg;\nchar *table_stmt = sqlite3_mprintf(\"CREATE TABLE \\\"%s\\\"(url TEXT);\", tablename);\nif (sqlite3_exec(db, table_stmt, NULL, NULL, &amp;errmsg) != SQLITE_OK) {\n  // Error handling\n}\nsqlite3_free(table_stmt);\n</code></pre>\n\n<p>and import the contents of the current file with something like:</p>\n\n<pre><code>char *insert_stmt = sqlite3_mprintf(\"INSERT INTO \\\"%s\\\"(url) VALUES (?)\", tablename);\nsqlite3_stmt *stmt;\nif (sqlite3_prepare_v2(db, insert_stmt, -1, &amp;stmt, NULL) != SQLITE_OK) {\n  // Error handling\n}\n\n// Open the current file\n// In a loop that reads each line in it:\nsqlite3_bind_text(stmt, 1, line, -1, SQLITE_STATIC);\nif (sqlite3_step(stmt) != SQLITE_DONE) {\n  // Error handling\n}\nsqlite3_reset(stmt);\n\n// After importing the file:\nsqlite3_finalize(stmt);\n</code></pre>\n\n<p>You'll probably want to wrap each table import in a transaction, as in the bash example, or even the entire thing, for performance reasons.</p>\n"}], "owner": {"reputation": 55, "user_id": 6594466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f1b75d4edbb85a18a68b5a6538d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "t_P", "link": "https://stackoverflow.com/users/6594466/t-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 52991429, "answer_count": 1, "score": 0, "last_activity_date": 1540476704, "creation_date": 1540396056, "last_edit_date": 1540416766, "question_id": 52973164, "link": "https://stackoverflow.com/questions/52973164/import-multiple-files-using-paths-stored-in-variables-into-sqlite-tables-in-c", "title": "Import multiple files using paths stored in variables into SQLite tables in C", "body": "<p>I have the following code:</p>\n\n<pre><code>char const* const fileName = argv[1]; \nFILE* file = fopen(\"/home/tariq/Desktop/domainlist.txt\", \"r\"); \n  char path[256] ;\n  char subpath[128];\n\n  while (fgets(path, sizeof(path), file)) {\n        if (fscanf(file,\"%s\" ,path)==1){\n            memcpy(subpath, &amp;path[23], 30);\n            subpath[strlen(subpath)-8] = '\\0';\n          printf(\"Path %s ***** SubPath %s\\n\", path, subpath);\n\n        }\n  }\n</code></pre>\n\n<p>As you can see, the while loops on the domainlist.txt file (which contains a list of other text files). in the variable path I store each path from the domainlist.txt and in the variable subpath I store some text from the original path. My question is that I want (instead of the printf line) to create SQLite table with a name from variable the subpath and import the data from the file in variable path.\nThe SQLite database is already created and a connection is open, I just want to create tables and import data into them. I tried to use termsql but all I could do is to create separate database from each file, which I don't want, I want one DB but different tables.</p>\n\n<p>I hope I could describe my case correctly.</p>\n\n<p>Thanks</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The content of the files to be added to the db tables are just a list of URLs. Example below:</p>\n\n<p>the file (domainlist.txt) contains a list of paths,</p>\n\n<p>Example of a path:\nPath (which will be in the path variable):\n/home/tariq/Desktop/BL/ads/domains.txt</p>\n\n<p>Subpath variable (which I want to be the table name):\nads</p>\n\n<p>Content of file \"domains.txt\" in the path above is just a list of URLs.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1540395700, "post_id": 52973013, "comment_id": 92852408, "body": "Read. Combine. Write. Which part is the problem?"}, {"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "edited": false, "score": 5, "creation_date": 1540395782, "post_id": 52973013, "comment_id": 92852463, "body": "What have you tried? Please give the code and describe how it fails."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540396372, "post_id": 52973013, "comment_id": 92852848, "body": "&quot;  I try to write a code that generates output of [x,y,z] triples, or [w,x,y,z] quadruples up to 10 million ...&quot; --&gt; post that code."}, {"owner": {"reputation": 162, "user_id": 10395587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b548dbfa2977701ebe0b35d9ed8207?s=128&d=identicon&r=PG&f=1", "display_name": "manoliar", "link": "https://stackoverflow.com/users/10395587/manoliar"}, "edited": false, "score": 0, "creation_date": 1540397365, "post_id": 52973013, "comment_id": 92853521, "body": "Give us the algorithm, then your code that implements that algorithm and I am sure that someone will help you and make your code run."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540397428, "post_id": 52973013, "comment_id": 92853556, "body": "It&#39;s okay for you to post code that doesn&#39;t compile, or doesn&#39;t work. In fact, that&#39;s what you <i>should</i> do. Otherwise, how can we help fix it?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540397884, "post_id": 52973013, "comment_id": 92853800, "body": "If you&#39;ve got the list of primes and you want to generate all the maximal sequences where the successive primes differ by 6, you don&#39;t have to generate pairs and then create triples from the pairs, and so on.  You can simply start at a number (5, say), and check all the primes that different by 6 (11, 17, 23, 29)  and simply print those; then return to 7 and print 13, 19; then 11\u2026do you want to print 11 again, or do you skip it?  You probably skip it, so you mark &#39;used&#39; primes (set them to 0, for example), and continue through the list until you find the triple [31, 37, 43], etc."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540397950, "post_id": 52973013, "comment_id": 92853834, "body": "Once you&#39;ve got the list of primes, generating the maximal sets of &#39;gap of 6&#39; should be barely over O(N) complexity."}, {"owner": {"reputation": 103, "user_id": 10552971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32e19a607efb2224761ac9d89d4abc8?s=128&d=identicon&r=PG&f=1", "display_name": "user601206", "link": "https://stackoverflow.com/users/10552971/user601206"}, "edited": false, "score": 0, "creation_date": 1540403968, "post_id": 52973013, "comment_id": 92857077, "body": "Updated my code in the original post."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540405141, "post_id": 52973013, "comment_id": 92857741, "body": "Can you post a peak of <code>primes.txt</code>? Is <code>numberArray</code> correctly read?"}], "owner": {"reputation": 103, "user_id": 10552971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32e19a607efb2224761ac9d89d4abc8?s=128&d=identicon&r=PG&f=1", "display_name": "user601206", "link": "https://stackoverflow.com/users/10552971/user601206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540455529, "creation_date": 1540395599, "last_edit_date": 1540403945, "question_id": 52973013, "link": "https://stackoverflow.com/questions/52973013/given-a-list-of-prime-ordered-pairs-combine-two-lines-with-like-terms-to-create", "title": "Given a list of prime ordered pairs, combine two lines with like terms to create an ordered triplet", "body": "<p>Using C, I have generated a list of prime numbers to 10 million and from that list created another list consisting of ordered pairs [x,y] such that the difference of x and y is six. </p>\n\n<p>However, when I try to write a code that generates an output of [x,y,z] triples, or [w,x,y,z] quadruple up to 10 million, my computer simply isn't powerful enough to finish the job in a reasonable amount of time.</p>\n\n<p>My idea is to write a code that opens the text file of ordered pairs, recognizes a repeat number on two separate lines and combines those lines like so:</p>\n\n<pre><code>[5, 11]\n\n[11, 17]\n\n[17, 23]\n\n[23, 29]\n</code></pre>\n\n<p>would turn into [5, 11, 17, 23, 29]</p>\n\n<p>How can I do this in C?</p>\n\n<p>edit: Here's my code to generate progressions of 5 numbers that differ by 6:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\nfreopen(\"test.txt\", \"w+\", stdout);\n    FILE *twinPrimes;\n    twinPrimes = fopen(\"primes.txt\", \"r\");\n\n    //read file into array\n    int numberArray[664579];\n    int i;\n    int j;\n    int k;\n    int l;\n    int m;\n\n    for (i = 0; i &lt; 664579; i++)\n    {\n        fscanf(twinPrimes, \"%d\", &amp;numberArray[i]);\n    }\n\n    for(i = 0; i &lt; 664579; i++) {       \n    for(j = i+1; j &lt; i+6; j++) {\n    for(k = j+1; k &lt; j+6; k++) {\n    for(l = k+1; l &lt; k+6; l++) {\n    for(m = l+1; m &lt; l+6; m++) {\n    if(abs(numberArray[i] - numberArray[j]) == 6) {\n    if(abs(numberArray[j] - numberArray[k]) == 6) {\n    if(abs(numberArray[k] - numberArray[l]) == 6) {\n    if(abs(numberArray[l] - numberArray[m]) == 6) {\n        printf(\"[%d, %d, %d, %d, %d]\\n\", numberArray[i], numberArray[j], numberArray[k], numberArray[l], numberArray[m]);} } } } } }     }\n\n        }\n    }\n}\n</code></pre>\n\n<p>However, the problem i'm still having is that I can't generate larger progressions without it slowing down my computer or taking extremely long to finish processing.</p>\n\n<p>I have a text file, however, with a list of ordered pairs of primes that differ by 6. I think a MUCH more efficient code can be made by telling it to take the union of the two lines with a common element as shown above. However, I have no clue where to start with this code. Any help is appreciated.</p>\n"}, {"tags": ["c", "sockets", "get"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 9244482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d7b669febe05cbae5385ba36cd692e?s=128&d=identicon&r=PG&f=1", "display_name": "shobhit", "link": "https://stackoverflow.com/users/9244482/shobhit"}, "edited": false, "score": 0, "creation_date": 1540396056, "post_id": 52973102, "comment_id": 92852648, "body": "Can you explain how can I read Content-Length header also I think sometime those are missing(I am not sure correct me if I am wrong)."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 95, "user_id": 9244482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d7b669febe05cbae5385ba36cd692e?s=128&d=identicon&r=PG&f=1", "display_name": "shobhit", "link": "https://stackoverflow.com/users/9244482/shobhit"}, "edited": false, "score": 0, "creation_date": 1540396264, "post_id": 52973102, "comment_id": 92852779, "body": "@shobhit After a read, search the buffer for &quot;Content-Length&quot; using <code>strstr</code>.  If the header is not there then look for the end of headers (a double newline) and read until you see <code>&lt;&#47;html&gt;</code>."}, {"owner": {"reputation": 95, "user_id": 9244482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d7b669febe05cbae5385ba36cd692e?s=128&d=identicon&r=PG&f=1", "display_name": "shobhit", "link": "https://stackoverflow.com/users/9244482/shobhit"}, "edited": false, "score": 0, "creation_date": 1540396575, "post_id": 52973102, "comment_id": 92852991, "body": "Ok so what you mean is that the result I am getting is expected and I have to edit my file(output) to utilise contents I want."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 95, "user_id": 9244482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d7b669febe05cbae5385ba36cd692e?s=128&d=identicon&r=PG&f=1", "display_name": "shobhit", "link": "https://stackoverflow.com/users/9244482/shobhit"}, "edited": false, "score": 0, "creation_date": 1540396628, "post_id": 52973102, "comment_id": 92853021, "body": "@shobhit Correct"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1540395847, "creation_date": 1540395847, "answer_id": 52973102, "question_id": 52972990, "link": "https://stackoverflow.com/questions/52972990/recieving-multiple-html-content-while-calling-recv-function/52973102#52973102", "title": "Recieving multiple html content while calling recv() function?", "body": "<p>TCP is a stream based protocol, which means a single read can correspond to multiple messages or to a partial message.</p>\n\n<p>You need to read the Content-Length header to know how many bytes you are supposed to read.  If you happen to get more bytes then you asked for, you need to buffer those bytes and save them for the next message you read.</p>\n"}], "owner": {"reputation": 95, "user_id": 9244482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d7b669febe05cbae5385ba36cd692e?s=128&d=identicon&r=PG&f=1", "display_name": "shobhit", "link": "https://stackoverflow.com/users/9244482/shobhit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 52973102, "answer_count": 1, "score": 1, "last_activity_date": 1540395847, "creation_date": 1540395534, "question_id": 52972990, "link": "https://stackoverflow.com/questions/52972990/recieving-multiple-html-content-while-calling-recv-function", "title": "Recieving multiple html content while calling recv() function?", "body": "<p>I am writing a http client to receive html from website.</p>\n\n<p>this is the code:<em>I am just adding the piece of code that contains the logic related to socket and hence the initialization of strings(char[]) and functions are missing</em></p>\n\n<pre><code>scanf(\"%s\",&amp;URL);\nint c_socket = socket(AF_INET, SOCK_STREAM, 0);\n\nstruct sockaddr_in urladdress;\nurladdress.sin_family = AF_INET;\nurladdress.sin_port = htons(PORT);\nurladdress.sin_addr.s_addr = inet_addr(URL);\n\nconnect(c_socket, (struct sockaddr*) &amp;urladdress, sizeof(urladdress));\n\nchar REQUEST[] = \"GET / HTTP/1.1\\r\\n\\r\\n\";\nchar response[512];\nint size_recv,total_recv = 0;\nstd::string content = \" \";\nsend(c_socket, REQUEST, sizeof(REQUEST), 0);\n\nwhile((size_recv = recv(c_socket, response, sizeof(response), 0)) &gt; 0 &amp;&amp; content[content.length()]!='\\n')\n{\n    content += response;\n    memset(response ,0 , sizeof(response));\n}\nclose(c_socket);\nprintf(\"%s\",content.c_str());\n</code></pre>\n\n<p>while receiving html I get multiple html content that after html code is completed I again get some part of the same html again and it is mostly not complete ,seems like the server is sending more than one file.</p>\n\n<p>Something like this:</p>\n\n<pre><code>&lt;!-- header --&gt;\n&lt;html&gt; something &lt;/html&gt;\n&lt;!-- header --&gt;\n&lt;html&gt; someth\n</code></pre>\n\n<p>I think it is due to successive calls made to <code>recv()</code> function to get all data needed.As you can see I have put in place the condition in while loop to automatically stop receiving data anymore when it reaches the end but it is not stopping.</p>\n\n<p>I don't know whether it is expected or not, and I have to put some other logic in place to stop more calls to <code>recv()</code> and if yes then what logic.\nIs it that I have to write something to format data so that it contains only one html body like deleting everything after <code>&lt;/html&gt;</code> tag is found.</p>\n\n<p>All the posts that I have found till now explains that it is expected that all data is not received at once so I am compelled to call <code>recv()</code> multiple times.But they don't seem to say anything about receiving more than one html body and writing some logic to stop.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1540395709, "post_id": 52972983, "comment_id": 92852417, "body": "Just escape them with backslashes."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1540397024, "post_id": 52972983, "comment_id": 92853295, "body": "Why would you use <code>system()</code> to call <code>echo</code>? Just use C&#39;s built-in output functions."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540397067, "post_id": 52972983, "comment_id": 92853318, "body": "That command won&#39;t work, it has mismatched quotes."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6579274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f7c84676d3eafe0c68fe6ba23763cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jkt44", "link": "https://stackoverflow.com/users/6579274/jkt44"}, "edited": false, "score": 0, "creation_date": 1540404912, "post_id": 52973035, "comment_id": 92857620, "body": "Well, acording to your solution it prints &quot;-e \\E[1;3mHello!&quot; instead of &quot;Hello!&quot; with specific graphic functions called."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 43, "user_id": 6579274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f7c84676d3eafe0c68fe6ba23763cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jkt44", "link": "https://stackoverflow.com/users/6579274/jkt44"}, "edited": false, "score": 0, "creation_date": 1540405249, "post_id": 52973035, "comment_id": 92857795, "body": "@MateuszTrzeciak It looks like it was calling the internal &quot;echo&quot; command for /bin/sh, while it&#39;s the internal &quot;echo&quot; for /bin/bash that supports this.  Updated to specifically call out <code>bash</code>."}, {"owner": {"reputation": 43, "user_id": 6579274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f7c84676d3eafe0c68fe6ba23763cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jkt44", "link": "https://stackoverflow.com/users/6579274/jkt44"}, "edited": false, "score": 0, "creation_date": 1540405569, "post_id": 52973035, "comment_id": 92857936, "body": "Thanks, now it works perfectly. Woudn&#39;t have guessed it without you."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 43, "user_id": 6579274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f7c84676d3eafe0c68fe6ba23763cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jkt44", "link": "https://stackoverflow.com/users/6579274/jkt44"}, "edited": false, "score": 0, "creation_date": 1540405647, "post_id": 52973035, "comment_id": 92857992, "body": "@MateuszTrzeciak Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1540405181, "last_edit_date": 1540405181, "creation_date": 1540395672, "answer_id": 52973035, "question_id": 52972983, "link": "https://stackoverflow.com/questions/52972983/how-to-pass-command-with-quotes-to-system/52973035#52973035", "title": "How to pass command with quotes to system()?", "body": "<p>Double quotes need to be escaped in strings, as do backslashes:</p>\n\n<pre><code>system(\"bash -c 'echo -e \\\"\\\\E[1;3mHello!\\\"'\");\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6579274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f7c84676d3eafe0c68fe6ba23763cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jkt44", "link": "https://stackoverflow.com/users/6579274/jkt44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 52973035, "answer_count": 1, "score": -1, "last_activity_date": 1540405181, "creation_date": 1540395501, "last_edit_date": 1540395667, "question_id": 52972983, "link": "https://stackoverflow.com/questions/52972983/how-to-pass-command-with-quotes-to-system", "title": "How to pass command with quotes to system()?", "body": "<p>I have no idea how to pass command like:</p>\n\n<pre><code>echo -e \\\"\\E[1;3mHello!\"\n</code></pre>\n\n<p>to <code>system()</code>, since I have to put it in quotation marks cause it's <code>const char</code>, any help?</p>\n"}, {"tags": ["c", "pointers", "scanf", "point"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10445266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VLWMIAM17kA/AAAAAAAAAAI/AAAAAAAAABk/0o8RN4GwWnE/photo.jpg?sz=128", "display_name": "federico rovere", "link": "https://stackoverflow.com/users/10445266/federico-rovere"}, "edited": false, "score": 0, "creation_date": 1540395903, "post_id": 52972989, "comment_id": 92852548, "body": "Solved. Thanks."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1540395528, "creation_date": 1540395528, "answer_id": 52972989, "question_id": 52972846, "link": "https://stackoverflow.com/questions/52972846/segmentation-fault-using-scanf/52972989#52972989", "title": "Segmentation fault using scanf()", "body": "<p>Three problems here.  First</p>\n\n<pre><code>scanf(ifp,\"%lf %lf\\n\",&amp;theta,&amp;Cla);\n</code></pre>\n\n<p>You're calling <code>scanf</code> when you look like you want to use <code>fscanf</code>:</p>\n\n<pre><code>fscanf(ifp,\"%lf %lf\\n\",&amp;theta,&amp;Cla);\n</code></pre>\n\n<p>Second is the file you're opening:</p>\n\n<pre><code>ifp=fopen(argv[0],\"r\");\n</code></pre>\n\n<p><code>argv[0]</code> is the name of the running executable, which is probably not what you want.  If you want the first argument passed in, use <code>argv[1]</code></p>\n\n<pre><code>ifp=fopen(argv[1],\"r\");\n</code></pre>\n\n<p>Last is the definition of <code>main</code>:</p>\n\n<pre><code>double main( char *argv[]){\n</code></pre>\n\n<p>This is not a valid definition, as it should return an <code>int</code> and have both <code>argc</code> and <code>argv</code> or neither of them:</p>\n\n<pre><code>int main( int argc, char *argv[]){\n</code></pre>\n\n<p>You should also check that an argument was passed:</p>\n\n<pre><code>if (argc &lt; 2) {\n    printf(\"missing argument\\n\");\n    exit(1);\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10445266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VLWMIAM17kA/AAAAAAAAAAI/AAAAAAAAABk/0o8RN4GwWnE/photo.jpg?sz=128", "display_name": "federico rovere", "link": "https://stackoverflow.com/users/10445266/federico-rovere"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1540455406, "accepted_answer_id": 52972989, "answer_count": 1, "score": -5, "last_activity_date": 1540395528, "creation_date": 1540395127, "question_id": 52972846, "link": "https://stackoverflow.com/questions/52972846/segmentation-fault-using-scanf", "closed_reason": "Needs details or clarity", "title": "Segmentation fault using scanf()", "body": "<p>the code below compile well, but when i use it returns segmentation fault. </p>\n\n<p>I was searching some similar errors in other topics, but i have not found much. </p>\n\n<p>in case, thanks for help. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\ndouble main( char *argv[]){\n        FILE *ifp;\n        double e,e_a,e_b,a,ct,b,sigma,tol;\n        double Cla, theta;\n        int n, nmax;\n\n        ifp=fopen(argv[0],\"r\");\n        scanf(ifp,\"%lf %lf\\n\",&amp;theta,&amp;Cla);\n\n        a=0.002;\n        b=0.1;\n        nmax=1000;\n        ct=(a+b)/2;\n        tol=0.00000001;\n\n        sigma=0.14066;\n        e_a=theta-(a*6/(sigma*Cla)+3/2*sqrt(a/2));\n        e_b=theta-(b*6/(sigma*Cla)+3/2*sqrt(b/2));\n        n=0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "arm", "interrupt", "bare-metal"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1540395368, "post_id": 52972838, "comment_id": 92852194, "body": "Don&#39;t perform a lot of calculations in the interrupt."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1540395455, "post_id": 52972838, "comment_id": 92852251, "body": "Define (in your question) what should happen when an interrupt comes again while handling of the previous interrupt is still running. Otherwise your question is unclear, since incomplete"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 2, "creation_date": 1540396387, "post_id": 52972838, "comment_id": 92852858, "body": "Normally interrupts are locked out while in an interrupt routine, so the code ends up falling behind in responding to later interrupts. You could do something like a foreground / background &quot;kernel&quot;, where the interrupt routine queues up requests for calculations, then exits to the queue handler, which does the calculations and then returns back to the main level code when the queue is emptied. This could also be done with a preemptive kernel. If you run out of the pool used for the queue, you need to speed up the calculations."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 1, "creation_date": 1540402364, "post_id": 52972838, "comment_id": 92856206, "body": "Clear an interrupt flag immediately. At the endow the routine, test it. If it is set, you are taking too long. But, as was said, don&#39;t do a lot of calculations in the ISR."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1540404717, "post_id": 52972838, "comment_id": 92857510, "body": "(what Eugene and user58697 said, and adding:) is that your actual C source? Then you need also to make <code>isWorking</code> atomic (old sources often abused <code>volatile</code>, which may be correct enough on some architectures) ... maybe check the interrupt disassembly to see if it was compiled as expected and the test is not optimized out somehow or reordered wrongly."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 1, "creation_date": 1540414426, "post_id": 52972838, "comment_id": 92862021, "body": "Does &#39;doing a lot of calculations&#39; include calling a lot of &#39;C&#39; or &#39;C++&#39; library routines?  You maybe blowing up your stack or calling non-reentrant functions which fluke working.  Instead of what you have, can you grab a timer-tick to a local and then add a delta to a global at the end?  You should run a disassembler on the ISR when developing a routine to see what the compiler is generating."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1540420777, "post_id": 52972838, "comment_id": 92864131, "body": "Ratatax: have a look at Linux&#39;s top half / bottom half interrupt handler design.  I think it&#39;s similar to what @rcgldr described: the actual ISR that runs with further interrupts disabled is very light-weight, and just queues work for the bottom half.  The bottom half is scheduled like other tasks."}, {"owner": {"reputation": 83, "user_id": 8140834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9249e5c78308015f7a1c4a160535ed7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ratatax", "link": "https://stackoverflow.com/users/8140834/ratatax"}, "edited": false, "score": 0, "creation_date": 1540470658, "post_id": 52972838, "comment_id": 92883776, "body": "Thanks for your answers. The Work load is user-configurable so the goal of this is to raise an alert when there is too much processing, instead of crashing or creating incorrect results. When the load is too high, the interrupt would return instead of processing things, so it can keep the rythm of interrupts without accumulating more and more delay."}], "answers": [{"tags": [], "owner": {"reputation": 1469, "user_id": 2105592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e0660c06174e5479ed2c6dcda818d0f?s=128&d=identicon&r=PG", "display_name": "Sean Houlihane", "link": "https://stackoverflow.com/users/2105592/sean-houlihane"}, "is_accepted": false, "score": 0, "last_activity_date": 1540471823, "creation_date": 1540471823, "answer_id": 52989717, "question_id": 52972838, "link": "https://stackoverflow.com/questions/52972838/arm-detect-when-an-interrupt-is-taking-too-much-cpu-time/52989717#52989717", "title": "ARM Detect when an interrupt is taking too much CPU time", "body": "<p>One approach would be to measure the time between finishing the interrupt processing, and starting the subsequent interrupt. This means that rather than trying to detect the 'overload' condition, you can get a measure for how near to the limit you are.</p>\n\n<p>If you have an idle thread, you can try to count progress there too (against a timer), which would mean that you avoid adding any overhead in the exception code. Here you would measure idle time only when there were spare cycles to do that measuring.</p>\n"}], "owner": {"reputation": 83, "user_id": 8140834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9249e5c78308015f7a1c4a160535ed7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ratatax", "link": "https://stackoverflow.com/users/8140834/ratatax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540471823, "creation_date": 1540395089, "last_edit_date": 1540470630, "question_id": 52972838, "link": "https://stackoverflow.com/questions/52972838/arm-detect-when-an-interrupt-is-taking-too-much-cpu-time", "title": "ARM Detect when an interrupt is taking too much CPU time", "body": "<p>I have an interrupt in bare metal ARM C code, occuring several times per second, which needs to perform a lot of calculations.\nI want to be able to detect if those calculations are taking too much cpu time (the current interrupt hasn't finished when the next occurs).</p>\n\n<p>I've tried this sort of algorithm but it doesn't work :</p>\n\n<pre><code>bool isWorking=false;\n\nvoid interrupt()\n{\nif(isWorking) errorCpuLoad();\n\nisWorking = true;\n\n... do the work...\n\nisWorking = false;\n\n}\n</code></pre>\n\n<p>Do you know why it doesn't work, and what better strategy I could use ? Is there a specific way of doing it in ARM C/assembly ?</p>\n\n<p>EDIT : The Work load is user-configurable so the goal of this is to raise an alert when there is too much processing, instead of crashing or creating incorrect results. When the load is too high, the interrupt would return instead of processing things, so it can keep the rythm of interrupts without accumulating more and more delay</p>\n"}, {"tags": ["c", "assembly", "automation", "macros", "linker"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1540394394, "post_id": 52972564, "comment_id": 92851566, "body": "Even if you come up with some preprocessor magic to solve it, it will break half a dozen other <i>golden rules</i>. Use script if you must."}], "owner": {"reputation": 15, "user_id": 6388149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ku4b4.jpg?s=128&g=1", "display_name": "Mikael Henriksson", "link": "https://stackoverflow.com/users/6388149/mikael-henriksson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540394193, "creation_date": 1540394193, "question_id": 52972564, "link": "https://stackoverflow.com/questions/52972564/getting-symbol-names-into-c", "title": "Getting symbol names into C", "body": "<p>I have successfully produced an assembler macro which I use to instantiate 32 <em>independent</em> routines in a assembly source file. The routines follow the target system ABI. Their exported symbol names are all practically identical, except for a trailing number suffix. Here is an symbol extract from the assembled object file (ellipsis indicating continuing pattern).</p>\n\n<pre><code>$ nm default_handler.o | sort\n...\n00000058 T exception_default_handler_5\n0000005f T exception_default_handler_6\n00000066 T exception_default_handler_7\n0000006d T exception_default_handler_8\n00000072 T exception_default_handler_9\n00000079 T exception_default_handler_10\n0000007e T exception_default_handler_11\n00000083 T exception_default_handler_12\n00000088 T exception_default_handler_13\n...\n</code></pre>\n\n<p>I also have a C program in which I need to reference each of these individual routines. In some parts of the C program, I need to reference all of the assembly routines at once, to store a pointer of each in an array. Here is the necessary code needed to understand my problem (with ellipsis to indicate a continuing pattern). This code preforms the task stated above.</p>\n\n<pre><code>{\n    ...\n    extern void exception_default_handler_5(void);\n    extern void exception_default_handler_6(void);\n    extern void exception_default_handler_7(void);\n    ...\n\n    ...\n    array[5] = exception_default_handler_5;\n    array[6] = exception_default_handler_6;\n    array[7] = exception_default_handler_7;\n    ...\n}\n</code></pre>\n\n<p>With 64 lines of this approach; the <em>coding golden rule</em>, to always write readable and maintainable code, have obviously been broken. What I would like is a way to automize this process of making an extern forward declaration and putting an instance of it in the array, to minimize the errors that are bound to happen when code is duplicated.</p>\n\n<p>I am thinking that perhaps it's a job for the C-macros, but I cannot figure out a way to do it with them.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c", "pointers", "malloc", "free"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540393398, "post_id": 52972257, "comment_id": 92850858, "body": "Turn your idea into some code."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1540393446, "post_id": 52972257, "comment_id": 92850896, "body": "The problem probably has more to do with how you&#39;re writing to the file.  Please update your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem."}, {"owner": {"reputation": 69, "user_id": 10500064, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GevBX3_SiyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWw6I8FT_oQOlAxTTPbPutVTKVUag/mo/photo.jpg?sz=128", "display_name": "wolverine", "link": "https://stackoverflow.com/users/10500064/wolverine"}, "edited": false, "score": 0, "creation_date": 1540393744, "post_id": 52972257, "comment_id": 92851107, "body": "I uploaded my code now. see above"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1540393878, "post_id": 52972257, "comment_id": 92851202, "body": "Yes, it can be reused. But not after <code>free(temp);</code>"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 3, "creation_date": 1540393880, "post_id": 52972257, "comment_id": 92851206, "body": "<code>sizeof(temp)</code> is wrong - that gives you the size of the pointer. For this case you probably want <code>strlen(temp)</code>."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540394075, "post_id": 52972257, "comment_id": 92851334, "body": "If you get &quot;nollo&quot; it&#39;s because when you put &quot;no&quot; into your buffer your didn&#39;t also put in a terminating zero."}, {"owner": {"reputation": 2882, "user_id": 6943197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbce82fcea72325bc7cc3f874b5cf3ab?s=128&d=identicon&r=PG", "display_name": "Hogstrom", "link": "https://stackoverflow.com/users/6943197/hogstrom"}, "edited": false, "score": 1, "creation_date": 1540394181, "post_id": 52972257, "comment_id": 92851400, "body": "Rather than free what you would prefer to do is to clear the buffer.  Something like memset(temp, 0, MAX_OUTPUT);  And free at the end.  free does not clear the buffer, it simply releases the storage for other uses"}, {"owner": {"reputation": 69, "user_id": 10500064, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GevBX3_SiyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWw6I8FT_oQOlAxTTPbPutVTKVUag/mo/photo.jpg?sz=128", "display_name": "wolverine", "link": "https://stackoverflow.com/users/10500064/wolverine"}, "edited": false, "score": 0, "creation_date": 1540394355, "post_id": 52972257, "comment_id": 92851531, "body": "got it!! thanks a lot!!"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10500064, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GevBX3_SiyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWw6I8FT_oQOlAxTTPbPutVTKVUag/mo/photo.jpg?sz=128", "display_name": "wolverine", "link": "https://stackoverflow.com/users/10500064/wolverine"}, "edited": false, "score": 0, "creation_date": 1540394655, "post_id": 52972519, "comment_id": 92851752, "body": "thanks for the advice! I will use fprintf from now on. for the parts with no need to format temp: can i also use fprintf over there?  Like for example here: strcpy(temp, &quot;  &quot;); fwrite(temp, sizeof(char), strlen(temp), output);"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 69, "user_id": 10500064, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GevBX3_SiyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWw6I8FT_oQOlAxTTPbPutVTKVUag/mo/photo.jpg?sz=128", "display_name": "wolverine", "link": "https://stackoverflow.com/users/10500064/wolverine"}, "edited": false, "score": 1, "creation_date": 1540394840, "post_id": 52972519, "comment_id": 92851858, "body": "@wolverine Yes, just use <code>fprintf(output, &quot; &quot;)</code>"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1540394076, "creation_date": 1540394076, "answer_id": 52972519, "question_id": 52972257, "link": "https://stackoverflow.com/questions/52972257/temp-pointers-correct-malloc-and-free/52972519#52972519", "title": "Temp Pointers: Correct malloc and free", "body": "<p>When you <code>free</code> memory that a pointer points to, it is no longer valid to use.  You would need to call <code>malloc</code> again to get a valid block of memory.  But even if you did that, the real problem is that you're not writing the proper amount.</p>\n\n<p>All of your writes look like this:</p>\n\n<pre><code>fwrite(temp, sizeof(char), sizeof(temp), output);\n</code></pre>\n\n<p>Here, <code>sizeof(temp)</code> is <strong>not</strong> the length of the string contained in <code>temp</code>, but the size of <code>temp</code>, which is a pointer and most likely either 4 or 8.</p>\n\n<p>Use <code>strlen</code> instead, which gives you the length of the string:</p>\n\n<pre><code>fwrite(temp, sizeof(char), strlen(temp), output);\n</code></pre>\n\n<p>Or better yet, just to <code>fprint</code> to write to the file instead of <code>sprintf</code> followed by <code>fwrite</code>.  For example, change this:</p>\n\n<pre><code>sprintf(temp, \"%06x : \", offset);\nfwrite(temp, sizeof(char), sizeof(temp), output);\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>fprintf(output, \"%06x : \", offset);\n</code></pre>\n\n<p>Then you can get rid of <code>temp</code> and the associated <code>malloc</code> and <code>free</code> calls entirely.</p>\n"}, {"tags": [], "owner": {"reputation": 467, "user_id": 9950378, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bMztUomG68Y/AAAAAAAAAAI/AAAAAAAAABE/FcXN1FGD0cQ/photo.jpg?sz=128", "display_name": "Jean-Marc Zimmer", "link": "https://stackoverflow.com/users/9950378/jean-marc-zimmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1540394345, "creation_date": 1540394345, "answer_id": 52972612, "question_id": 52972257, "link": "https://stackoverflow.com/questions/52972257/temp-pointers-correct-malloc-and-free/52972612#52972612", "title": "Temp Pointers: Correct malloc and free", "body": "<p>You may want to use <code>realloc()</code> on <code>temp</code>.</p>\n\n<pre><code>char *temp = malloc(size);\n//Do some stuff with temp\ntemp = realloc(temp, newSize);//instead of free(temp);\n//Clear the string (fill it with \\0) if you want to have a proper new string.\n//Do some stuff, and so on until :\nfree(temp);\n//Eventually some more code, WITHOUT using temp\nreturn();\n</code></pre>\n\n<p><code>realloc(ptr, val);</code> is like <code>free(ptr); ptr = malloc(val);</code></p>\n\n<p>Hope it helps you !</p>\n\n<h2>EDIT:</h2>\n\n<p>I know the OP has already been solved, it's just another possible solution.</p>\n"}], "owner": {"reputation": 69, "user_id": 10500064, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GevBX3_SiyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWw6I8FT_oQOlAxTTPbPutVTKVUag/mo/photo.jpg?sz=128", "display_name": "wolverine", "link": "https://stackoverflow.com/users/10500064/wolverine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 52972519, "answer_count": 2, "score": 1, "last_activity_date": 1540394345, "creation_date": 1540393344, "last_edit_date": 1540393719, "question_id": 52972257, "link": "https://stackoverflow.com/questions/52972257/temp-pointers-correct-malloc-and-free", "title": "Temp Pointers: Correct malloc and free", "body": "<p>My idea was to declare a char *temp pointer at the very beginning of my function that can be used over and over again.</p>\n\n<p>At first, I used malloc at the very beginning and free() at the very end. The problem was that the first string I copied to temp was the longest of all the strings. So when I printed the strings that followed the first one the end of the first string was still there:\nE.g.\nFirst string was \"hello\", the next was \"no\"\n-> I wrote temp into a FILE and the result was nollo</p>\n\n<p>To solve the problem I decided to use free() each time after I wrote the string to my file in order to free the storage for the next string. This caused the error \"error for object 0x7fe274801000: pointer being freed was not allocated\".</p>\n\n<p>So neither of my ideas worked... What is the best way to handle this? Thanks!!</p>\n\n<pre><code>void hexdump (FILE *output, char *buffer, int length){\nint offset = 0;\nint rows = (length%16)==0 ? (length/16) : ((length/16)+1);\nchar *temp = (char *)malloc(MAX_OUTPUT);\n\nfor(int j = 0; j&lt;rows; j++){\n    offset = offset + 16;\n    sprintf(temp, \"%06x : \", offset);\n    fwrite(temp, sizeof(char), sizeof(temp), output);\n    printf(\"%06x : \", offset);\n    free(temp);\n    for(int i = 0; i&lt;16; i++){\n        if ((j == rows-1) &amp;&amp; (!buffer[i+(j*16)])){\n            strcpy(temp,\"   \");\n            fwrite(temp, sizeof(char), sizeof(temp), output);\n            printf(\"   \");\n            free(temp);\n        } else {\n        sprintf(temp, \"%02x \", buffer[i+(j*16)]);\n        fwrite(temp, sizeof(char), sizeof(temp), output);\n        printf(\"%02x \", buffer[i+(j*16)]);\n        free(temp);\n        }\n    }\n    strcpy(temp, \"  \");\n    fwrite(temp, sizeof(char), sizeof(temp), output);\n    printf(\"  \");\n    free(temp);\n    for(int n = 0; n&lt;16; n++){\n        if ((j == rows-1) &amp;&amp; (!buffer[n+(j*16)])){\n            strcpy(temp, \" \");\n            fwrite(temp, sizeof(char), sizeof(temp), output);\n            printf(\" \");\n            free(temp);\n        } else {\n                if((buffer[n+(j*16)]&gt;31) &amp;&amp; (buffer[n+(j*16)]&lt;127)){\n                sprintf(temp, \"%c\", buffer[n+(j*16)]);\n                fwrite(temp, sizeof(char), sizeof(temp), output);\n                printf(\"%c\", buffer[n+(j*16)]);\n                free(temp);\n            } else {\n                strcpy(temp, \".\");\n                fwrite(temp, sizeof(char), sizeof(temp), output);\n                printf(\".\");\n                free(temp);\n            }\n        }\n    }\n    strcpy(temp, \"\\n\");\n    fwrite(temp, sizeof(char), sizeof(temp), output);\n    printf(\"\\n\");\n    free(temp);\n\n}\n\n}\n</code></pre>\n\n<p>The printf output works correctly while the output file does not..</p>\n"}, {"tags": ["c", "rtos", "ucos"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540392951, "post_id": 52971984, "comment_id": 92850551, "body": "What do you mean <code>task2</code> doesn&#39;t work? Doesn&#39;t run?"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 2, "creation_date": 1540392992, "post_id": 52971984, "comment_id": 92850581, "body": "<code>OSTimeGet</code> <code>return</code>ing <code>0</code> sounds like your <code>SysTick</code>(or whatever the periodic time interrupt is) interrupt isn&#39;t firing."}, {"owner": {"reputation": 9, "user_id": 10552669, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--peIB_7k-lk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDzFu7AHY6RxsUsBkmCcZS4TBqdeg/mo/photo.jpg?sz=128", "display_name": "Jinho", "link": "https://stackoverflow.com/users/10552669/jinho"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540447344, "post_id": 52971984, "comment_id": 92870530, "body": "Yes, task2 doesn&#39;t run. And task1 printed just once."}, {"owner": {"reputation": 9, "user_id": 10552669, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--peIB_7k-lk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDzFu7AHY6RxsUsBkmCcZS4TBqdeg/mo/photo.jpg?sz=128", "display_name": "Jinho", "link": "https://stackoverflow.com/users/10552669/jinho"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540447696, "post_id": 52971984, "comment_id": 92870672, "body": "CPU_Init(); BSP_Init(); OSInit(); OSTaskCreateExt(TaskStart); OSStart(); =&gt; in main()               / BSP_Tick_Init(); =&gt;in TaskStart         / Can you explain why OSTimeGet returns 0 everytime? thank you for comment :)"}, {"owner": {"reputation": 407, "user_id": 2235468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3811eb9dbd96a4078c61f641545de1a1?s=128&d=identicon&r=PG", "display_name": "Roel Balink", "link": "https://stackoverflow.com/users/2235468/roel-balink"}, "edited": false, "score": 0, "creation_date": 1540535670, "post_id": 52971984, "comment_id": 92909450, "body": "Delays in UCOS are based on the systick interrupt. When this interrupt isn&#39;t running of configured correctly the task switches will not work and the same goes for the delays. Probably the Task1 function will not get passed OSTimeDly(5);"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1540713210, "post_id": 52971984, "comment_id": 92959748, "body": "<code>task1</code> does not return;  <i>&quot;task1 returns &#39;0&#39; everytime&quot;</i> does not make much sense.  Where is the code where the threads are instantiated and the  scheduler initialised and started?  The scheduler is clearly not running, or the tick handler not implemented, or interrupts disabled."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1540714062, "post_id": 52971984, "comment_id": 92959937, "body": "Where, when and how have you called <code>OSInit()</code>, <code>OSTaskCreate()</code> and <code>OSStart()</code>.  Is the uC/OS-II port your own, or provided.  Chances are the error is in the port if your thread and OS initialisation code (not shown) is correct.  As an aside <code>printf()</code> is unlikely to be thread safe; if it is buffered, you are likely to get garbled interleaved output, if it is unbufferd it may have a bigger impact on the thread timing than the delays.  The results will depend greatly on the relative priorities of the two threads."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1540714419, "post_id": 52971984, "comment_id": 92960000, "body": "Do not add clarifications in comments - edit the question to add vital information.  It seems from your output that while <i>&quot;OSTimeGet returns 0 everytime&quot;</i>, it is in fact running only <i>once</i> despite being in a not-terminating loop.  That is the issue at hand - it is returning zero because when it runs that is exactly what the tick value is - of more interest is why is the tick not running - allowing <code>OSDelay</code> to return, and the <code>OSTime</code> to increment?  That is to say you are missing the actual problem and asking about just one of several <i>symptoms</i> that indicate the real issue."}], "answers": [{"tags": [], "owner": {"reputation": 407, "user_id": 2235468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3811eb9dbd96a4078c61f641545de1a1?s=128&d=identicon&r=PG", "display_name": "Roel Balink", "link": "https://stackoverflow.com/users/2235468/roel-balink"}, "is_accepted": false, "score": 0, "last_activity_date": 1540535915, "creation_date": 1540535915, "answer_id": 53002844, "question_id": 52971984, "link": "https://stackoverflow.com/questions/52971984/print-ostime-in-uc-os-ii/53002844#53002844", "title": "Print OSTime in UC/OS-II", "body": "<p>It seems that your Systick function isn't running correctly. As I have no experience in the Chip you are using I cannot give you the full answer.\nBut your systick function should contain something like this.\nThis is code from a LPC17xx but something similliar should happen for you</p>\n\n<pre><code>void  OS_CPU_SysTickHandler (void)\n{\n    CPU_SR_ALLOC();\n\n\n    CPU_CRITICAL_ENTER();\n    OSIntNestingCtr++;                                      /* Tell uC/OS-II that we are starting an ISR             */\n    CPU_CRITICAL_EXIT();\n\n    OSTimeTick();                                           /* Call uC/OS-II's OSTimeTick()                          */\n\n    OSIntExit();                                            /* Tell uC/OS-II that we are leaving the ISR             */\n}\n</code></pre>\n\n<p>The OSTimeTick() is used for your OSTimeDly(), OSTimeGet() and the task switching</p>\n"}], "owner": {"reputation": 9, "user_id": 10552669, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--peIB_7k-lk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDzFu7AHY6RxsUsBkmCcZS4TBqdeg/mo/photo.jpg?sz=128", "display_name": "Jinho", "link": "https://stackoverflow.com/users/10552669/jinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540535915, "creation_date": 1540392581, "question_id": 52971984, "link": "https://stackoverflow.com/questions/52971984/print-ostime-in-uc-os-ii", "title": "Print OSTime in UC/OS-II", "body": "<p>Device : F28335 contorolCRAD and Experimenter's Kit - Delfino F28335.</p>\n\n<p>Ported ucos-II.</p>\n\n<p>I use OSTimeGet() function to get OSTime.</p>\n\n<p>But task1 returns '0' everytime and task2 doesn't  work.</p>\n\n<p>What is the problem?\nHow to fix this?</p>\n\n<pre><code>App_Task1's priority = 6u\nApp_Task2's priority = 7u\n\n\nstatic  void  App_Task1 (void *p_arg)\n{\n   (void)&amp;p_arg;\n   INT32U t;\n\n    while (DEF_TRUE) {\n\n        t = OSTimeGet();\n\n        printf(\"Task1 \\n\");\n        printf(\"OSTime=%lu\\n\",t);\n        OSTimeDly(5);\n    }\n}\n\nstatic  void  App_Task2 (void *p_arg)\n{\n   (void)&amp;p_arg;\n   INT32U t;\n\n    while (DEF_TRUE) {\n\n        t = OSTimeGet();\n\n        printf(\"Task2 \\n\");\n        printf(\"OSTime=%lu\\n\",t);\n        OSTimeDly(10);\n    }\n}\n\n\noutput\nTask1 OSTime=0\n</code></pre>\n"}, {"tags": ["c", "struct"], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1540392907, "post_id": 52971983, "comment_id": 92850524, "body": "@FiddlingBits Nope, could be anywhere. This is the C11 anonymous struct/union feature."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1540392581, "creation_date": 1540392581, "answer_id": 52971983, "question_id": 52971866, "link": "https://stackoverflow.com/questions/52971866/initialize-an-array-inside-a-structure/52971983#52971983", "title": "Initialize an array inside a structure", "body": "<p>First of all, this isn't close to ressembling struct/union initialization syntax. Fix:</p>\n\n<pre><code>const test T = \n{\n  .Value.bytex = { 0x11,0x22,0x33,0x44,0x11,0x22,0x33,0x44 },\n  .cod1 = 0,\n  .cod  = 1,\n};\n</code></pre>\n\n<p>Second, if you have the option to use standard C, you can drop the inner variable name:</p>\n\n<pre><code>typedef struct\n{\n  union {\n    int bytex[8];\n    int bytey[7];\n  };\n  int cod1;\n  int cod;\n} test;\n\nconst test T = \n{\n  .bytex = { 0x11,0x22,0x33,0x44,0x11,0x22,0x33,0x44 },\n  .cod1 = 0,\n  .cod  = 1,\n};\n</code></pre>\n"}], "owner": {"reputation": 808, "user_id": 6644375, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6c70e82e4e69a7ffc24b7e269cbff6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Mouin", "link": "https://stackoverflow.com/users/6644375/mouin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1540392839, "creation_date": 1540392262, "last_edit_date": 1540392839, "question_id": 52971866, "link": "https://stackoverflow.com/questions/52971866/initialize-an-array-inside-a-structure", "title": "Initialize an array inside a structure", "body": "<p>I have this structure:</p>\n\n<pre><code>typedef struct\n{\n    union{\n        int bytex[8];\n        int bytey[7];\n   }Value ;\n   int cod1;\n   int cod;\n} test;\n</code></pre>\n\n<p>and want to initialize the constant <code>test</code> as follow:</p>\n\n<pre><code>const test T{\n.Value.bytex = {0x11,0x22,0x33,0x44,0x11,0x22,0x33,0x44},\n.cod1=0,\n.cod=1,\n};\n</code></pre>\n\n<p>I am getting the following error</p>\n\n<pre><code>Expected primary-expression before '.' token\n</code></pre>\n\n<p>This initialization is however correct:</p>\n\n<pre><code>const test T{\n{0x11,0x22,0x33,0x44,0x11,0x22,0x33,0x44},\n.cod1=0,\n.cod=1,\n};\n</code></pre>\n\n<p>Do you have any Idea ?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 5, "creation_date": 1540391782, "post_id": 52971653, "comment_id": 92849730, "body": "Read the manual. Parent is the one where fork() returns a nonzero value."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1540392003, "post_id": 52971653, "comment_id": 92849873, "body": "...and format your code correctly."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540393297, "post_id": 52971653, "comment_id": 92850795, "body": "Note that some of the eight processes are both a child and a parent process at the same time."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540393543, "post_id": 52971653, "comment_id": 92850975, "body": "Please don&#39;t post text output as an image.  All the information needed to answer the question should be in the question. You can clarify your output by adding the PID of the current process and its parent PID (<code>getpid()</code> and <code>getppid()</code>) to each <code>printf()</code> statement.  Consider using <code>fflush(stdout)</code> after each print too.  You should be more consistent in the way you format your numbers (you have <code>y=%d</code> and <code>y = %d</code> \u2014 choose one and stick with it rigorously; using <code>%5d</code> would make things align better for easier reading)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540393654, "post_id": 52971653, "comment_id": 92851049, "body": "See also <a href=\"https://stackoverflow.com/questions/2530663/printf-anomaly-after-fork\"><code>printf()</code> anomaly after <code>fork()</code></a>."}], "owner": {"reputation": 9, "user_id": 10552299, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-D-lWHPUg8zs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbB-qsWMMzeZYFVx5iwq4ezz9KGp3Q/mo/photo.jpg?sz=128", "display_name": "Zafran Chai", "link": "https://stackoverflow.com/users/10552299/zafran-chai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540406010, "creation_date": 1540391643, "last_edit_date": 1540406010, "question_id": 52971653, "link": "https://stackoverflow.com/questions/52971653/deciding-which-is-a-parent-or-child-process", "title": "Deciding which is a parent or child process", "body": "<p><a href=\"https://i.stack.imgur.com/NLJXL.png\" rel=\"nofollow noreferrer\">Output and Reasoning</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int x=10, y=20, z=30;\n\n    printf(\"Message 0 : x=%d, y = %d, z = %d\\n\", x,y,z);\n    x=fork();\n    y=fork();\n    if (x != 0) printf(\"Message 1 : x=%d, y = %d, z = %d\\n\", x,y,z);\n    if (y != 0) printf(\"Message 2 : x=%d, y = %d, z = %d\\n\", x,y,z);\n\n    z=fork();\n    if ((x&gt;0) || (y&gt;0) || (z&gt;0)) printf (\"Message 3 : x=%d, y=%d, z= %d\\n\", x,y,z);\n\n    if ((x==0) &amp;&amp; (y==0) &amp;&amp; (z!=0)) printf (\"Message 4 : x=%d, y = %d, z=%d\\n\",x,y,z);\n    if ((x!=0) &amp;&amp; (y!=0) &amp;&amp; (z!=0)) printf (\"Message 5 : x=%d, y=%d, z=%d\\n\",x,y,z);\n}\n</code></pre>\n\n<p>Above is a code that I compiled in Unix. The picture I attached is how I see the forks creating the processes.</p>\n\n<p>My question is how do I decide which is a parent process and which is a child process? If there is anything wrong with my picture do tell me too.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540391616, "post_id": 52971616, "comment_id": 92849614, "body": "What does your compiler tell you when you try this?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1540391703, "post_id": 52971616, "comment_id": 92849671, "body": "What have you tried doing and where is the problem?"}, {"owner": {"reputation": 359, "user_id": 6524007, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/XvvNE.png?s=128&g=1", "display_name": "PySerial Killer", "link": "https://stackoverflow.com/users/6524007/pyserial-killer"}, "edited": false, "score": 0, "creation_date": 1540391704, "post_id": 52971616, "comment_id": 92849672, "body": "What have you tried so far?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540391847, "post_id": 52971616, "comment_id": 92849777, "body": "Yes, this is possible. You can either do everything yourself at a low level, looping over individual characters and copying them one at a time, or try using library functions such as <code>strcpy()</code>. Try it. Post your code here, and we&#39;ll help with it"}, {"owner": {"reputation": 47, "user_id": 9919407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d77f261c39724e868b45e9c5128420?s=128&d=identicon&r=PG&f=1", "display_name": "Joha", "link": "https://stackoverflow.com/users/9919407/joha"}, "edited": false, "score": 0, "creation_date": 1540391867, "post_id": 52971616, "comment_id": 92849786, "body": "i tried to assign this like"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1540391955, "post_id": 52971616, "comment_id": 92849853, "body": "Tip: instead of <code>char a[256] = &quot;some text here&quot;</code>, do <code>char a[256];</code> and then <code>strcpy(a, &quot;some text here&quot;);</code>."}, {"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 1, "creation_date": 1540391959, "post_id": 52971616, "comment_id": 92849854, "body": "You should try something first. But as a hint, you may use <code>strtok</code> and <code>strcpy</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1540392004, "post_id": 52971616, "comment_id": 92849875, "body": "Yes, possible. But you will loose the original <code>a</code> &quot;sentence&quot;."}, {"owner": {"reputation": 47, "user_id": 9919407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d77f261c39724e868b45e9c5128420?s=128&d=identicon&r=PG&f=1", "display_name": "Joha", "link": "https://stackoverflow.com/users/9919407/joha"}, "edited": false, "score": 0, "creation_date": 1540398628, "post_id": 52971616, "comment_id": 92854222, "body": "I tried some test but just cant figure it out how  i should  loop here. I always get seg fault. For example i tried a while loop for the array : while(array[i] != &#39;\\0&#41; and in the loop i just go through character in char array and if i found a whitespace i should increase the pointer[i] = &amp;a[i] but it wont get the result i want"}], "owner": {"reputation": 47, "user_id": 9919407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d77f261c39724e868b45e9c5128420?s=128&d=identicon&r=PG&f=1", "display_name": "Joha", "link": "https://stackoverflow.com/users/9919407/joha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1540391935, "answer_count": 0, "score": 0, "last_activity_date": 1540391553, "creation_date": 1540391553, "question_id": 52971616, "link": "https://stackoverflow.com/questions/52971616/is-it-possible-to-assign-char-array-into-char-array", "closed_reason": "Duplicate", "title": "is it possible to assign char array into char* array[]?", "body": "<p>Like the title said is this possible?</p>\n\n<p>For example:</p>\n\n<pre><code>char a[256] = \"some text here\"\nchar* pointer[20];\n</code></pre>\n\n<p>I want to save word for word into pointer array like pointer[0] = some , pointer[1] = text and so on.</p>\n\n<p>Is there a way to do this or is this not possible?</p>\n"}, {"tags": ["c", "linux", "string", "go", "go-interface"], "owner": {"reputation": 11, "user_id": 6044224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/150e404f49b4e2b61306c3c5e7cf3824?s=128&d=identicon&r=PG&f=1", "display_name": "Hemant", "link": "https://stackoverflow.com/users/6044224/hemant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540391361, "creation_date": 1540391361, "question_id": 52971548, "link": "https://stackoverflow.com/questions/52971548/how-to-use-and-implement-empty-golang-interface-in-c-programming", "title": "How to use and implement empty golang interface { } in C programming", "body": "<p>string_operation.go (golang function)</p>\n\n<pre><code>//export AddString\nfunc AddString(str string, v interface{}) bool {\n        somestrings = append(somestrings, str);\n        xyz.Compile(str, v)\n        fmt.Println(\"Added!!\\n\");\n    }\n    return true;\n}\n\n//export SearchString\nfunc SearchString(str string) (v interface{}, ok bool) {\n    v, ok = xyz.Match(str);\n    if ok == true {\n        fmt.Println(\"Found!!\");\n    } else {\n        fmt.Println(\"Not found!!\");\n    }\n    return\n}\n</code></pre>\n\n<p>Above golang file when exported to use in C code</p>\n\n<p>string_operation.h (Exported Header file)    </p>\n\n<pre><code>typedef struct { const char *p; GoInt n; } GoString;\ntypedef struct { void *t; void *v; } GoInterface;\ntypedef struct { void *data; GoInt len; GoInt cap; } GoSlice;\n/* Return type for SearchStringValue */\nstruct SearchString_return {\n    GoInterface r0; /* v */\n    GoUint8 r1; /* ok */\n};\n\nextern struct SearchString_return SearchStringValue(GoString p0);\nextern GoUint8 AddString(GoString p0, GoInterface p1);\n</code></pre>\n\n<p>Now the question is how to implement the empty interface{} in C code?</p>\n"}, {"tags": ["c", "fortran", "autoconf", "automake", "libtool"], "answers": [{"tags": [], "owner": {"reputation": 750, "user_id": 849852, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/auj0r.jpg?s=128&g=1", "display_name": "Edward Hartnett", "link": "https://stackoverflow.com/users/849852/edward-hartnett"}, "is_accepted": false, "score": 0, "last_activity_date": 1543593471, "creation_date": 1543593471, "answer_id": 53560890, "question_id": 52971408, "link": "https://stackoverflow.com/questions/52971408/how-to-use-ac-config-subdir-to-package-c-and-fortran-libraries-together-where-c/53560890#53560890", "title": "How to use AC_CONFIG_SUBDIR to package C and Fortran libraries together, where C depends on Fortran library?", "body": "<p>I did this by adding a new option to the Fortran library build:</p>\n\n<pre><code># When built as part of the combined C/Fortran library distribution,\n# the fortran library needs to be built with\n# --enable-package-build. This tells the fortran library where to find\n# the C library.\nAC_ARG_ENABLE([package-build],\n  [AS_HELP_STRING([--enable-package-build],\n    [Set internally for package builds, should not be used by user.])])\ntest \"x$enable_package_build\" = xyes || enable_package_build=no\nAM_CONDITIONAL([BUILD_PACKAGE], [test \"x$enable_package_build\" = xyes])\n\n# Find the GPTL C library, unless this is a combined C/Fortran library\n# build.\nif test $enable_package_build = no; then\n   AC_CHECK_LIB([gptl], [GPTLinitialize], [],\n                        [AC_MSG_ERROR([Can't find or link to the GPTL C library.])])\nfi\n</code></pre>\n\n<p>When launching this configure from the combined library configure, I add this extra option:</p>\n\n<pre><code># Add this arg for the fortran build, to tell it to use the C library\n# we just built.\nac_configure_args=\"$ac_configure_args --enable-package-build\"\n\n# Build the GPTL Fortran library.\nAC_CONFIG_SUBDIRS([GPTL-fortran])\n</code></pre>\n\n<p>And in the GPTL-fortran test directory Makefile.am I added the following:</p>\n\n<pre><code># For combined C/Fortran builds, find the C library.\nif BUILD_PACKAGE\nLDADD = ${top_builddir}/../GPTL/src/libgptl.la\nendif\n</code></pre>\n\n<p>So when the package build is happening, it looks in ../GPTL/src for the GPTL library, and for non-package builds, the GPTL C library is located in configure.ac.</p>\n"}], "owner": {"reputation": 750, "user_id": 849852, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/auj0r.jpg?s=128&g=1", "display_name": "Edward Hartnett", "link": "https://stackoverflow.com/users/849852/edward-hartnett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1543593471, "creation_date": 1540390962, "question_id": 52971408, "link": "https://stackoverflow.com/questions/52971408/how-to-use-ac-config-subdir-to-package-c-and-fortran-libraries-together-where-c", "title": "How to use AC_CONFIG_SUBDIR to package C and Fortran libraries together, where C depends on Fortran library?", "body": "<p>I have a C library, GPTL, which is built with libtool. (<a href=\"https://github.com/jmrosinski/GPTL\" rel=\"nofollow noreferrer\">https://github.com/jmrosinski/GPTL</a>)</p>\n\n<p>I have a Fortran wrapper library, GPTL-fortran, which calls the C library. (<a href=\"https://github.com/NOAA-GSD/GPTL-fortran\" rel=\"nofollow noreferrer\">https://github.com/NOAA-GSD/GPTL-fortran</a>)</p>\n\n<p>I have a third github repo, GPTL-all. (<a href=\"https://github.com/NOAA-GSD/GPTL-all\" rel=\"nofollow noreferrer\">https://github.com/NOAA-GSD/GPTL-all</a>). I would like to use AC_CONFIG_SUBDIR to have GPTL-all build both the C and the fortran libraries.</p>\n\n<p>The problem is that the Fortran library depends on the C library. When building separately, the C library is built and installed first, then the Fortran library is built with CPPFLAGS and LDFLAGS set to point to the location of the installed C library.</p>\n\n<p>Is there a way to achieve this with a combined package that installs the C and Fortran libraries?</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code># This is the autoconf file for GPTL-all, a combined C and Fortran\n# library distribution.\n\nAC_PREREQ([2.69])\nAC_INIT([GPTL-all], [1.0.0], [edward.ha@noaa.gov])\n\n# Find out about the host we're building on.\nAC_CANONICAL_HOST\n\n# Find out about the target we're building for.\nAC_CANONICAL_TARGET\n\n# Initialize automake.\nAM_INIT_AUTOMAKE([foreign subdir-objects])\n\n# Keep macros in an m4 directory.\nAC_CONFIG_MACRO_DIR([m4])\n\n# Set up libtool.\nLT_PREREQ([2.4])\nLT_INIT()\n\nAC_CONFIG_FILES([Makefile])\n\nAC_CONFIG_SUBDIRS([GPTL\n                   GPTL-fortran])\nAC_OUTPUT\n</code></pre>\n\n<p>But this fails. When I run configure, it runs the C library configure just fine. But the fortran library configure fails because it checks for the presence of the C library:</p>\n\n<pre><code>checking for GPTLinitialize in -lgptl... no\nconfigure: error: Can't find or link to the GPTL C library.\nconfigure: error: ./configure failed for GPTL-fortran\n</code></pre>\n\n<p>How can I get GPTL-fortran to depend on GPTL?</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1540390729, "post_id": 52971288, "comment_id": 92848944, "body": "You need to use <code>strcpy</code> to copy a string. Try <code>strcpy(f[0], &quot;abc&quot;);</code>."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 1, "creation_date": 1540391239, "post_id": 52971288, "comment_id": 92849353, "body": "<code>char b[70]; b=&quot;6id4h&quot;;</code>  you cant do this also. char[] cant be l-value."}, {"owner": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 1, "creation_date": 1540396721, "post_id": 52971288, "comment_id": 92853085, "body": "First of all, you should use linear arrays.   After that, it&#39;s clear how to do it."}], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1540391252, "post_id": 52971417, "comment_id": 92849360, "body": "Using sprintf() instead of strcpy() is all well and good until your input string contains a %s (or similar), and then your program crashes.  (Obviously it doesn\u2019t contain one in this case but if the argument was a macro or variable instead of a string literal, that might not be so obvious anymore).  (strncpy() would be even safer)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1540392853, "post_id": 52971417, "comment_id": 92850488, "body": "<code>sprintf</code> is also most likely some ~100 times less efficient than <code>strcpy</code>."}], "tags": [], "owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "is_accepted": false, "score": 3, "last_activity_date": 1540390996, "creation_date": 1540390996, "answer_id": 52971417, "question_id": 52971288, "link": "https://stackoverflow.com/questions/52971288/how-to-assign-a-string-value-to-two-dimensional-array-in-c/52971417#52971417", "title": "How to assign a string value to two dimensional array in C?", "body": "<p>You could try this.</p>\n\n<pre><code>void main()\n{\n    char f[20][20] = {0};\n    sprintf(f[0], \"abc\"); // or strcpy(f[0], \"abc\"); but I prefer sprintf\n    printf(\"%s\",f[0]);\n}\n</code></pre>\n\n<p>Actually, any beginner's book in <code>C</code> should have told you that arrays (especially strings) are dealt with differently from simple variables such as <code>int</code>, <code>double</code>, etc...\nSo.... Happy reading!</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 4, "last_activity_date": 1540391864, "last_edit_date": 1540391864, "creation_date": 1540391062, "answer_id": 52971438, "question_id": 52971288, "link": "https://stackoverflow.com/questions/52971288/how-to-assign-a-string-value-to-two-dimensional-array-in-c/52971438#52971438", "title": "How to assign a string value to two dimensional array in C?", "body": "<p>This</p>\n\n<pre><code>f[0]=\"abc\"; \n</code></pre>\n\n<p>is wrong as <code>f[0]</code> is <em>char array</em> and by doing <code>f[0]=\"abc\";</code> you are trying to change base address of array <code>f[0]</code> which is not possible. you can understand this simply by considering example of one dimensional char array like</p>\n\n<pre><code>char arr[10] = \"hello\";\n</code></pre>\n\n<p>here <code>arr</code> means <strong>base address of array</strong> &amp; one can't change that as its <strong>constant pointer</strong>. And now if you do</p>\n\n<pre><code>arr = \"bye\"\n</code></pre>\n\n<p>here you are trying to point <code>arr</code> to some other address(<code>bye</code> address) rather than earlier base address.</p>\n\n<p>Correct way is</p>\n\n<pre><code>strcpy(f[0],\"abc\"); \n</code></pre>\n\n<p>And its better to use <code>strncpy()</code> instead of <code>strcpy()</code> as pointed by @Eric <a href=\"https://stackoverflow.com/questions/1258550/why-should-you-use-strncpy-instead-of-strcpy\">here</a>. </p>\n"}], "owner": {"reputation": 63, "user_id": 10375433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c096866d924c7954f631d1c9a6ff7611?s=128&d=identicon&r=PG&f=1", "display_name": "NiPoo", "link": "https://stackoverflow.com/users/10375433/nipoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 1, "closed_date": 1540392796, "accepted_answer_id": 52971438, "answer_count": 2, "score": 1, "last_activity_date": 1540391864, "creation_date": 1540390657, "question_id": 52971288, "link": "https://stackoverflow.com/questions/52971288/how-to-assign-a-string-value-to-two-dimensional-array-in-c", "closed_reason": "Duplicate", "title": "How to assign a string value to two dimensional array in C?", "body": "<p>How to assign a string value to two dimensional array in C?</p>\n\n<p>I have a sample code, but its not working.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\n    char f[20][20];\n\n    f[0]=\"abc\"; //Error Happens Here\n\n    printf(\"%s\",f[0]);\n}\n</code></pre>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1540389875, "post_id": 52970964, "comment_id": 92848332, "body": "Your code shown doesn&#39;t include the definition of a <code>struct ptf_arguments</code> - did you leave it out or should that just be <code>ptf_arguments</code> (without the <code>struct</code>)?"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1540389909, "creation_date": 1540389909, "answer_id": 52971052, "question_id": 52970964, "link": "https://stackoverflow.com/questions/52970964/c-incomplete-element-type-in-array/52971052#52971052", "title": "c incomplete element type in array", "body": "<p>The symbol <code>ptf_arguments</code> is <em>not</em> a structure, it's a typename (a type alias). And as a typename it can be used as any other type (like e.g. <code>int</code>).</p>\n\n<p>To solve your error, drop the <code>struct</code> part of the declaration:</p>\n\n<pre><code>ptf_arguments arguments[num_threads]; // &lt;- HERE\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 1840302, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/9dbe1a767a7ad109cece3406d669a8fd?s=128&d=identicon&r=PG", "display_name": "user1840302", "link": "https://stackoverflow.com/users/1840302/user1840302"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 52971052, "answer_count": 1, "score": 1, "last_activity_date": 1540389956, "creation_date": 1540389663, "last_edit_date": 1540389956, "question_id": 52970964, "link": "https://stackoverflow.com/questions/52970964/c-incomplete-element-type-in-array", "title": "c incomplete element type in array", "body": "<p>Hi i am working on an assignment in which I need to process some images(resizing) using pthreads.</p>\n\n<p>This is the contents of the filename.h</p>\n\n<pre><code>typedef struct {\n    int type;\n    int width;\n    int height;\n    int max_value;\n    int *input;\n    int *output;\n}image;\n\ntypedef struct {\n    int id; // thread id\n    image *in; //input image\n    image *out; // output image\n}ptf_arguments;\n</code></pre>\n\n<p>And this is the contents of filename.c file</p>\n\n<pre><code>    void resize(image *in, image * out) { \n    int i;\n    // printf(\"Type is %d. We have width = %d and height = %d. Max value is %d\\n\", in-&gt;type, in-&gt;width, in-&gt;height, in-&gt;max_value);\n    pthread_t tid[num_threads];\n    struct ptf_arguments arguments[num_threads]; // &lt;- HERE\n    for(i = 0 ; i &lt; num_threads; i++) {\n        arguments[i].id = i;\n        arguments[i].in = in;\n        arguments[i].out = out;\n    }\n    printf(\"First thread should have id = %d. In image of (%d)\\n\", args[0].id, arguments[0].in.width);\n    for(i = 0 ; i &lt; num_threads; i++) {\n        //pthread_create(&amp;(tid[i]), NULL, resize_thread_function, &amp;(args[i]));\n    }\n}\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<pre><code> error: array type has incomplete element type \u2018struct ptf_arguments\u2019\n     struct ptf_arguments arguments[num_threads];\n</code></pre>\n\n<p>at the line marked by the &lt;- HERE comment\nthe compiling command is :</p>\n\n<pre><code>gcc -o filename filname.c -lpthread -Wall -lm\n</code></pre>\n\n<p>What is happening and how can i fix this ? Thank you</p>\n\n<p>EDIT 1: Yes, i did #include \"filename.h\"</p>\n"}, {"tags": ["c", "casting", "pragma-pack"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1540389643, "post_id": 52970894, "comment_id": 92848160, "body": "There&#39;s no risk or danger per se; it&#39;s just unnecessary.  If everything is an array of bytes, there&#39;ll be no padding between the elements anyway, so the pragma is pointless (harmless, but pointless)."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540389718, "post_id": 52970894, "comment_id": 92848214, "body": "The only problem with packing, that I know of, is making unaligned transfers which increase the number of necessary assembly instructions."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540392127, "post_id": 52970894, "comment_id": 92849971, "body": "@FiddlingBits: The alignment requirement of the struct is already 1 on any reasonable ABI, so it&#39;s not going to make any difference."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540392185, "post_id": 52970894, "comment_id": 92850025, "body": "@R Right. Should have mentioned if greater than one byte."}, {"owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "edited": false, "score": 0, "creation_date": 1540394512, "post_id": 52970894, "comment_id": 92851660, "body": "pragma&#39;s and attributes are an abomination, and should only be used when absolutely necessary.   They convert the C Language -- a well enough designed language to mostly survive attacks by standards groups -- into a language of your own design."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1540389882, "post_id": 52970973, "comment_id": 92848337, "body": "This isn&#39;t necessarily true in case of <code>uint8_t x [3]; uint8_t y [n];</code>. The compiler might want to allocate <code>y</code> on an aligned address for better performance, in which case it is free to insert padding between <code>x</code> and <code>y</code>."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1540390574, "post_id": 52970973, "comment_id": 92848840, "body": "@Lundin: Perhaps this is technically true, but it would be a clear sign that the people who designed your compiler hate you, and want to see you fail."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1540392173, "post_id": 52970973, "comment_id": 92850010, "body": "To my knowledge, what @Lundin claimed is not true on any ABI in modern use."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1540392274, "post_id": 52970973, "comment_id": 92850107, "body": "Me neither, it is just one of those theoretical, language-lawyer comments :) Although one need not look far to find the case where the compiler likes to allocate arrays on aligned addresses: just look at local variables."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 4, "last_activity_date": 1540389687, "creation_date": 1540389687, "answer_id": 52970973, "question_id": 52970894, "link": "https://stackoverflow.com/questions/52970894/is-pragma-pack1-risky-dangerous-if-a-struct-contains-only-byte-arrays/52970973#52970973", "title": "Is `#pragma pack(1)` risky/dangerous if a struct contains only byte arrays", "body": "<p>If the structure only contains <code>uint8_t</code>, then <code>#pragma pack(1)</code> will have no effect at all. It simply won\u2019t do anything, because the structure is already packed as tightly as it can be. </p>\n\n<p>Padding will only appear if you have elements which have larger than byte alignment. </p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1540389808, "creation_date": 1540389808, "answer_id": 52971016, "question_id": 52970894, "link": "https://stackoverflow.com/questions/52970894/is-pragma-pack1-risky-dangerous-if-a-struct-contains-only-byte-arrays/52971016#52971016", "title": "Is `#pragma pack(1)` risky/dangerous if a struct contains only byte arrays", "body": "<p>Given that <em>each array</em> has a size which is a multiple of the alignment, <code>#pragma pack</code> won't do anything, as each array will automatically be properly aligned.</p>\n"}], "owner": {"reputation": 1209, "user_id": 2179822, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ec8ebff1de01237c23aa51bff540eb39?s=128&d=identicon&r=PG", "display_name": "K. Biermann", "link": "https://stackoverflow.com/users/2179822/k-biermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 52970973, "answer_count": 2, "score": 0, "last_activity_date": 1540389808, "creation_date": 1540389471, "question_id": 52970894, "link": "https://stackoverflow.com/questions/52970894/is-pragma-pack1-risky-dangerous-if-a-struct-contains-only-byte-arrays", "title": "Is `#pragma pack(1)` risky/dangerous if a struct contains only byte arrays", "body": "<p>Is it dangerous/risky to use <code>#pragma pack(1)</code> on structs that contain byte-arrays only? E.g. this one:</p>\n\n<pre><code>#pragma pack(1)\nstruct RpcMessage {\n    uint8_t proto_info[16];\n    uint8_t message_uuid[16];\n\n    uint8_t arg0[16];\n    uint8_t arg1[16];\n    uint8_t arg2[16];\n    uint8_t arg3[16];\n    uint8_t arg4[16];\n    uint8_t arg5[16];\n    uint8_t arg6[16];\n    uint8_t arg7[16];\n\n    uint8_t payload[65376];\n};\n</code></pre>\n\n<p>(The idea is to cast this struct directly to/from 2^16 raw I/O bytes without any incompatibilities or even faults)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1540389572, "post_id": 52970868, "comment_id": 92848107, "body": "cannot reproduce: <a href=\"https://ideone.com/QYjmYi\" rel=\"nofollow noreferrer\">ideone.com/QYjmYi</a>"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1540389573, "post_id": 52970868, "comment_id": 92848108, "body": "@user3121023 that&#39;s the answer to the question."}, {"owner": {"reputation": 1, "user_id": 6741674, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z4KbYnHXKvk/AAAAAAAAAAI/AAAAAAAAANk/C7p3u_oUbNQ/photo.jpg?sz=128", "display_name": "Maruf Sarkar", "link": "https://stackoverflow.com/users/6741674/maruf-sarkar"}, "edited": false, "score": 0, "creation_date": 1540389589, "post_id": 52970868, "comment_id": 92848116, "body": "Thanks :) It Helped"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1540389591, "creation_date": 1540389591, "answer_id": 52970929, "question_id": 52970868, "link": "https://stackoverflow.com/questions/52970868/why-it-is-asking-for-4-input-instead-of-3/52970929#52970929", "title": "Why it is asking for 4 input instead of 3?", "body": "<p>Lets take your last call to <code>scanf</code>:</p>\n\n<pre><code>scanf(\"%d\\n\",&amp;third);\n</code></pre>\n\n<p>The <code>\"\\n\"</code> at the end of the format string means the <code>scanf</code> function will read and discard any white-space after the input, but it can't know when the white-space ends until there is something which is <em>not</em> a white-space character. That means you need to enter some extra input for <code>scanf</code> to be satisfied.</p>\n\n<p>So the simple solution is to just don't have the newlines in your <code>scanf</code> format strings.</p>\n"}], "owner": {"reputation": 1, "user_id": 6741674, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z4KbYnHXKvk/AAAAAAAAAAI/AAAAAAAAANk/C7p3u_oUbNQ/photo.jpg?sz=128", "display_name": "Maruf Sarkar", "link": "https://stackoverflow.com/users/6741674/maruf-sarkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1540389887, "answer_count": 1, "score": 0, "last_activity_date": 1540389591, "creation_date": 1540389389, "question_id": 52970868, "link": "https://stackoverflow.com/questions/52970868/why-it-is-asking-for-4-input-instead-of-3", "closed_reason": "Duplicate", "title": "Why it is asking for 4 input instead of 3?", "body": "<p>Why it is asking for 4 input instead of  3 ? \nI have used only 3 scanf in my program.\nThis is a program about finding smallest and largest number among 3 variables.\nPlease Help...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n\n{\n    int first, second, third;\n    printf(\"Enter 3 integers for compare:\");\n    scanf(\"%d\\n\",&amp;first);\n    scanf(\"%d\\n\",&amp;second);\n    scanf(\"%d\\n\",&amp;third);\n    if((first&gt;second) &amp;&amp; (first&gt;third))\n        printf(\"First number is the largest\\n\");\n    else if((second&gt;first) &amp;&amp; (second&gt;third))\n        printf(\"Second number is the largest\\n\");\n    else if((third&gt;second) &amp;&amp; (third&gt;first))\n        printf(\"\\nThird number is the largest\\n\");\n\n    if((first&lt;second) &amp;&amp; (first&lt;third))\n        printf(\"First number is smallest\\n\");\n    else if((second&lt;first) &amp;&amp; (second&lt;third))\n        printf(\"Second number is smallest\\n\");\n    else if((third&lt;second) &amp;&amp; (third&lt;first))\n        printf(\"Third number is smallest\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "strstr"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540389450, "post_id": 52970831, "comment_id": 92848004, "body": "Write a function that takes an array of <code>char *</code>."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1540389478, "post_id": 52970831, "comment_id": 92848037, "body": "What do you want to achieve? You want to check if <code>STRING2COMPARE</code> contains the string <code>&quot;AA&quot;</code> or contains <code>&quot;BB&quot;</code> you need to run <code>strstr</code> twice. Ot just write your own function which takes an array of strings to compare and OR-es the comparatison results."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1540389482, "post_id": 52970831, "comment_id": 92848041, "body": "Macros are nothing more than text substitutions - they have no &quot;smarts&quot; to them.  If you need to test against multiple strings, then you need to test against each string individually."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1540401873, "post_id": 52970831, "comment_id": 92855947, "body": "Any way that works would be <i>&quot;a better way&quot;</i>.  Macros are simple text replacements not C code.  Your suggestion resolves to <code>strstr( STRING2COMPARE, &quot;AA&quot; || &quot;BB&quot; )</code> which is not valid C code.  This looks like an X-Y problem - you are asking how to implement an implausible solution to some unknown problem - better to just ask us about the problem."}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 5407027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9308b62e32c5a9dabbcd1002a3b13c08?s=128&d=identicon&r=PG&f=1", "display_name": "DamV", "link": "https://stackoverflow.com/users/5407027/damv"}, "is_accepted": false, "score": 1, "last_activity_date": 1540389850, "creation_date": 1540389850, "answer_id": 52971034, "question_id": 52970831, "link": "https://stackoverflow.com/questions/52970831/define-with-multiple-values-c/52971034#52971034", "title": "#define with multiple values - C", "body": "<p>Mmh first I think your idea was to get in TEST_STRING the concatenation of the two strings.\nIn C, It would be (concatenation is implicit) :</p>\n\n<pre><code>#define TEST_STRING (\"AA\" \"BB\")\n</code></pre>\n\n<p>Second this test will succeed in a lot of cases where it must not : \"A\" \"B\" or \"ABB\" for instance.</p>\n\n<p>Third, the capital letters of STRING2COMPARE often means it is a define. You want to use normal variable don't you ?  </p>\n\n<p>In conclusion, what about this implementation ?</p>\n\n<pre><code>#define TEST_STRING_1 \"AA\"\n#define TEST_STRING_2 \"BB\"\n\nif ( strcmp(str2compare, TEST_STRING_1) == 0\n     || strcmp(str2compare, TEST_STRING_2) == 0 ) {\n    doSomething();\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 10005890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba54ee97219486045c6176419b2ad21c?s=128&d=identicon&r=PG&f=1", "display_name": "DDBE", "link": "https://stackoverflow.com/users/10005890/ddbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540403418, "creation_date": 1540389289, "last_edit_date": 1540403418, "question_id": 52970831, "link": "https://stackoverflow.com/questions/52970831/define-with-multiple-values-c", "title": "#define with multiple values - C", "body": "<p>newbie question :)</p>\n\n<p>How can I define multiple value i.e.: </p>\n\n<pre><code>#define TEST_STRING \"AA\" || \"BB\"\n</code></pre>\n\n<p>The main code should be similar to this:</p>\n\n<pre><code>if ((strstr(STRING2COMPARE, TEST_STRING) != NULL)) {\n    doSomething();}\n</code></pre>\n\n<p>Probably there is a better way.</p>\n\n<p>Thanks in advance :) </p>\n"}, {"tags": ["c", "multidimensional-array", "hashmap"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540389063, "post_id": 52970726, "comment_id": 92847718, "body": "It appears to be dependent on whatever processes are running at the time."}, {"owner": {"reputation": 195, "user_id": 8727518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aCEjckwQYUk/AAAAAAAAAAI/AAAAAAAAAHU/_ibNhrQPhGo/photo.jpg?sz=128", "display_name": "Michael Kro\u010dka", "link": "https://stackoverflow.com/users/8727518/michael-kro%c4%8dka"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540389140, "post_id": 52970726, "comment_id": 92847787, "body": "It runs on an internet tester so it shouldn&#39;t really matter. (i failed to mention this, sorry)."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540389941, "post_id": 52970726, "comment_id": 92848381, "body": "<code>hashArray[hashKey(t[i])] != NULL</code>? How can <code>hashArray[hashKey(t[i])] == NULL</code> ? If <code>hashKey(t[i]) &gt; ARR_SIZE</code> that&#39;s undefined behaviour, but <code>hashArray[hashKey(t[i])]</code> on most platform will return a non-meaningful integer anyway, not equal to NULL. I think you assume, that for any x: <code>0 &lt;= hashKey(x) &lt; ARR_SIZE</code>, that means that for any x: <code>hashArray[hashKey(t[i])] != NULL</code>."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540389998, "post_id": 52970726, "comment_id": 92848427, "body": "<code>hashArray[hashKey(t[i])][j] == NULL</code> ? Why do you compare a pointer value with a integer value? Enable compile warnings and compare ints with ints. <code>hashArray[hashKey(t[i])][j] == 0</code>. NULL is usually defined as <code>((void*)0)</code>. Same with <code>return NULL;</code>."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540390372, "post_id": 52970726, "comment_id": 92848694, "body": "The <code>if (hashArray[hashKey(s[i])][j+1] != NULL)</code> may access hashArray out of bound. On the last loop, when <code>j == ARR_SIZE - 1</code> and <code>i == ns - 1</code> and the first if is false, when <code>hashArray[hashKey(s[i])][j] != s[i]</code>, then <code>j + 1 = ARR_SIZE</code> so the <code>hashArray[...][j+1]</code> will access the <code>hashArray</code> out of bound."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540390681, "post_id": 52970726, "comment_id": 92848916, "body": "<code>hashKey</code> function and in it&#39;s <code>while (data &gt; ARR_SIZE) { data %= ARR_SIZE; }</code> is strange. It is just <code>if (data &gt; ARR_SIZE) { data %= ARR_SIZE; }</code>, but really probably you meant <code>return data % ARR_SIZE;</code>. Can there be a and b integers, so that <code>a MOD b &gt; b</code>? Secondly, <code>hashKey(ARR_SIZE)</code> will return ARR_SIZE, so all <code>hashArray[hashKey(s[i])]</code> may access <code>hashArray</code> out of bound, when <code>s[i] = ARR_SIZE</code>, then <code>hashKey(s[i])</code> will return ARR_SIZE, so it&#39;s <code>hashArray[ARR_SIZE]</code>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1540390793, "post_id": 52970726, "comment_id": 92848995, "body": "@KamilCuk: All that code in the comments is hard to read. If you have so many things to tell, why don&#39;t you make it an answer?"}], "owner": {"reputation": 195, "user_id": 8727518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aCEjckwQYUk/AAAAAAAAAAI/AAAAAAAAAHU/_ibNhrQPhGo/photo.jpg?sz=128", "display_name": "Michael Kro\u010dka", "link": "https://stackoverflow.com/users/8727518/michael-kro%c4%8dka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540388968, "creation_date": 1540388968, "question_id": 52970726, "link": "https://stackoverflow.com/questions/52970726/hashtable-array-optimisation", "title": "HashTable (array) optimisation", "body": "<p>i have made a hasharray program because of school work and i am running into trouble with it not beign fast enough. It should run the school test in 300 ms, while my time ranges from 320 - almost 900ms. I have tried a couple of things and the most viable one would be to implement a dynamic array, potentialy something like **hashArray. I have trouble doing so, so I'm asking either for general help in optimising my code, or how i could implement it using a dynamic double array.</p>\n\n<pre><code> #include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#define ARR_SIZE 44\n\nint hashArray[ARR_SIZE][ARR_SIZE];\n\nint hashKey(int data) {              //i create a hash key here, must be smaller than array max size\n    while (data &gt; ARR_SIZE) {\n        data %= ARR_SIZE;\n    }\n    return data;\n}\n\n// vrati 1 ak 's' je podmnozina 't', inak vrati 0.\nint is_subset(int s[], int ns, int t[], int nt) {\n    int j = 0;\n\n    for (int i = 0; i &lt; nt; i++) {         //here i load numbers from the first array i get from input (the main set)\n        if (hashArray[hashKey(t[i])] != NULL) {\n            for (int j = 0; j &lt; ARR_SIZE; j++) {\n                if (hashArray[hashKey(t[i])][j] == NULL) {\n                    hashArray[hashKey(t[i])][j] = t[i];\n                    break;\n                }\n            }\n        }\n    }\n\n    for (int i = 0; i &lt; ns; i++) {         //and here i am comparing elemnts based on hashKey, if this array is a potential subset array of the previous one\n        for (j = 0; j &lt; ARR_SIZE; j++) {\n            if (hashArray[hashKey(s[i])][j] == s[i]) \n                break;\n            if (hashArray[hashKey(s[i])][j+1] != NULL)\n                continue;\n            else {\n                memset(hashArray, 0, sizeof(hashArray));\n                return NULL;\n            }\n        }\n    }\n    memset(hashArray, 0, sizeof(hashArray));\n    return 1;\n}\n\n// showcase test\nint main(void) {\n    int i, a[44], na, b[44], nb;\n\n    scanf(\"%d\", &amp;na);\n    for (i = 0; i &lt; na; i++)\n        scanf(\"%d\", &amp;a[i]);\n    scanf(\"%d\", &amp;nb);\n    for (i = 0; i &lt; nb; i++)\n        scanf(\"%d\", &amp;b[i]);\n    if (is_subset(a, na, b, nb))\n        printf(\"PODMNOZINA\\n\");\n    else\n        printf(\"NIE\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540388892, "post_id": 52970598, "comment_id": 92847574, "body": "Signals are generally not they way to handle asynchronous events on Windows, and therefore it&#39;s going to be very hard to translate almost anything relating to POSIX signals to Windows (without a POSIX compatibility layer). For a better Windows solution it really depends on what you&#39;re attempting to do, what problem you&#39;re trying to solve, your use-case, but typically Windows message and message loop could possibly be used (you don&#39;t need a GUI app to have a message Windows loop)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540388996, "post_id": 52970598, "comment_id": 92847672, "body": "@Someprogrammerdude Thanks for the info. Like in my code sample, I just want a secret written to some &quot;stack&quot;, which I can later try to erase, and see whether it is actually erased. So, how can I use Windows message and message loop for my case here?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1540392783, "post_id": 52970598, "comment_id": 92850443, "body": "<code>printf(&quot;Test passed\\n&quot;);</code>?  You&#39;re not actually calling <code>printf()</code> in a signal handler, are you?  <code>printf()</code> is not async-signal-safe."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1540393256, "post_id": 52970598, "comment_id": 92850770, "body": "@AndrewHenle There is another function in between, I just tried to put here the relevant segments. But all my printf work correctly. In Linux my signal stack code work nicely. The point is how can I achieve something similar in Windows."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540393787, "post_id": 52970598, "comment_id": 92851135, "body": "signal is a linux(*nix or wtf else) term . Assembler(own OS) doesn&#39;t have it so as windows.on sdk level Windows has <code>hooks</code> for this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540395012, "post_id": 52970598, "comment_id": 92851981, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d Thanks. Code sample would be highly welcome."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540397448, "post_id": 52970598, "comment_id": 92853570, "body": "i didnt catch your goal with handler. For exploit protection may be it&#39;s better to use <code>openssl</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540397686, "post_id": 52970598, "comment_id": 92853701, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d that\u2019s just Linux way of creating a custom stack and executing a function on it. I agree the signal naming is a bit confusing, but it is named so as when the callback function returns it raises a signal so you can clear the newly allocated stack. But the whole idea is call a function on a custom stack. No events triggered or anything."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1540398487, "post_id": 52970598, "comment_id": 92854143, "body": "Deja-vu?   Have you not already asked this question once?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1540398538, "post_id": 52970598, "comment_id": 92854174, "body": "@MartinJames It was slightly different. I made this one so as to include more info and make it more explicit."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540398763, "post_id": 52970598, "comment_id": 92854289, "body": "idk about alternative stack options in windows. cpu may load only one address to sp register anyway , meanwhile alternative stuff would be in heap i guess."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540394966, "post_id": 52972509, "comment_id": 92851953, "body": "I\u2019m testing various secure erasing techniques, so I have a function pointer that iterates through different functions and erases, so I test each of them. I just use a custom stack as not to interfere with the main stack of the app. Can you give a code example as how it would be with fibers?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540395404, "post_id": 52972509, "comment_id": 92852213, "body": "One caveat is that in memzero_test function I make use of the stack_buf array as that is the stack buffer in my Linux code. So somehow fiber stack and stack_buf array should point to same place or I need to somehow restructure the code for a fiber."}, {"owner": {"reputation": 15649, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1540397066, "post_id": 52972509, "comment_id": 92853317, "body": "If I were you I would not use fibers. Write a singleton class or global functions to register &amp; unregister the buffers, keeping pointers to them in a central location. If you use C++, write a RAII class to register/unregister stack allocated or stack owned buffers. This way, when you\u2019ll get the event, you can wipe all buffers allocated by all functions in your app, regardless on where are they.  If your code is multithreaded (e.g. because your event arrives to different thread) you need a mutex in register &amp; unregister functions. It\u2019s also a good idea to wipe buffers when unregistered."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540397382, "post_id": 52972509, "comment_id": 92853532, "body": "I think the signal word that I used above is a bit misleading. There is no events triggering it or something. I simple have the call call_on_stack(memzero_test_correctness_signal_handler) on my main. And what the call_on_stack does that it creates a \u201csignal stack\u201d, and executes the passed function on that new stack. And when the callback function finishes, it just raises a signal that it is finished and clears the newly allocated stacked. So there is no specific event calling the call_on_stack function, it just gets called inside main. It\u2019s just a Linux way of doing things."}, {"owner": {"reputation": 15649, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1540398442, "post_id": 52972509, "comment_id": 92854114, "body": "Windows way is different. You only getting asynchronous events using 3 methods. You can get them explicitly, e.g. when you calls GetMessage or GetQueuedCompletionStatus. Some callbacks arrive while the thread is sleeping on SleepEx or WaitForSingleObjectEx, OS calls your handlers from inside, on the same stack. Or, you can get them on another OS thread, on different stack."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540398918, "post_id": 52972509, "comment_id": 92854379, "body": "<code>on different stack</code>, this is what I need. I think my Linux code confused people more than I thought. Let&#39;s forget it for a moment. Here is what I want to achieve, and from what I read fibers may be a good option. I need to have a custom stack, and that custom stack needs to store <code>secret</code> array. Then, I call the <code>memzero_test</code> function on this custom stack. I check using <code>memmem</code> (I have this, as by default Windows doesn&#39;t have it), which gives where the <code>secret</code> array values begins, I erase that portion from stack, and test whether it was erased. Once test finish, new stack goes away."}, {"owner": {"reputation": 15649, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1540401133, "post_id": 52972509, "comment_id": 92855577, "body": "@terett If it\u2019s just for that single buffer, single stack + heap-allocated buffer is IMO way easier to implement. But if you want secondary stack to be able to wipe <b>all</b> local variables on that stack, fibers might actually work for that. <code>GetCurrentThreadStackLimits</code> API returns correct stack range, here\u2019s a test: <a href=\"https://gist.github.com/Const-me/9c5ea55b1341ffd46cfda16ec891a269\" rel=\"nofollow noreferrer\">gist.github.com/Const-me/9c5ea55b1341ffd46cfda16ec891a269</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540402293, "post_id": 52972509, "comment_id": 92856166, "body": "Thanks for the code sample. How can I write data to the stack of fiber?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "edited": false, "score": 0, "creation_date": 1540404597, "post_id": 52972509, "comment_id": 92857451, "body": "Cool, thanks. One final question is whether one can get reference to the fiber\u2019s stack? Let\u2019s say I want a pointer to point to the same location as fiber\u2019s stack?"}, {"owner": {"reputation": 15649, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1540405641, "post_id": 52972509, "comment_id": 92857989, "body": "From the inside. Call <code>GetCurrentThreadStackLimits</code> API like I have in my sample. If you gonna wipe the whole range, pass that to other fiber and make sure you never switch to the wiped fiber ever again."}, {"owner": {"reputation": 15649, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1540411797, "post_id": 52972509, "comment_id": 92860841, "body": "After SwitchToFiber, the current stack stops running completely. Possibly forever. To get fiber\u2019s stack location, you have to call GetCurrentThreadStackLimits from that another fiber. When you\u2019re done with the fiber, call SwitchToFiber to resume execution of the main stack. To do that, you have to save main fiber pointer (the result of ConvertThreadToFiber() call) somewhere the second fiber can read from, e.g. in a global variable. Also you can\u2019t provide custom buffer for stack, it\u2019s allocated by OS, and is destroyed by DeleteFiber. Finally, the fiber returns void not DWORD."}], "tags": [], "owner": {"reputation": 15649, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": true, "score": 1, "last_activity_date": 1540394048, "creation_date": 1540394048, "answer_id": 52972509, "question_id": 52970598, "link": "https://stackoverflow.com/questions/52970598/does-windows-have-alternatives-for-sigaltstack-and-sigaction/52972509#52972509", "title": "Does Windows have alternatives for sigaltstack and sigaction?", "body": "<p>The supported way of running multiple stacks in Windows is <a href=\"https://docs.microsoft.com/en-us/windows/desktop/ProcThread/fibers\" rel=\"nofollow noreferrer\">fibers</a>.</p>\n\n<p>However I\u2019m not sure this is the right approach for your task. If you want to wipe a secret when you get an event, call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366877%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">SecureZeroMemory</a> from the event handler.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 52972509, "answer_count": 1, "score": 0, "last_activity_date": 1540495597, "creation_date": 1540388586, "last_edit_date": 1540495597, "question_id": 52970598, "link": "https://stackoverflow.com/questions/52970598/does-windows-have-alternatives-for-sigaltstack-and-sigaction", "title": "Does Windows have alternatives for sigaltstack and sigaction?", "body": "<p>For people that don't know Linux <code>sigalstack</code> is used to create an alternate stack, for which you can read more <a href=\"http://man7.org/linux/man-pages/man2/sigaltstack.2.html\" rel=\"nofollow noreferrer\">here</a>. But, the basic idea can be summarized like this:</p>\n\n<ol>\n<li><p>Allocate an area of memory to be used for the alternate signal\n      stack.</p></li>\n<li><p>Use <code>sigaltstack()</code> to inform the system of the existence and\n      location of the alternate signal stack.</p></li>\n<li><p>When establishing a signal handler using <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow noreferrer\">sigaction(2)</a>, inform the\n      system that the signal handler should be executed on the alternate\n      signal stack by specifying the <code>SA_ONSTACK</code> flag.</p></li>\n</ol>\n\n<p>Which I basically use like this for testing a memory zeroing function.</p>\n\n<pre><code>#ifndef _WIN32\n#define MEMZERO_STACK_SIZE              (SIGSTKSZ + sizeof(secret))\n#else\n#define MEMZERO_STACK_SIZE              sizeof(secret) // Maybe we need to add something here?!\n#endif\n\n// The secret that we write out to the stack. \nstatic const char secret[24] = {\n    0x4e, 0x65, 0x76, 0x65, 0x72, 0x20, 0x67, 0x6f,\n    0x6e, 0x6e, 0x61, 0x20, 0x67, 0x69, 0x76, 0x65,\n    0x20, 0x79, 0x6f, 0x75, 0x20, 0x75, 0x70, 0x2c,\n};\n\nstatic char stack_buf[MEMZERO_STACK_SIZE];\n\n#ifndef _WIN32\n// Verify that we are on the custom stack.\nstatic void assert_on_stack(void) {\n    stack_t current_stack;\n    assert(0 == sigaltstack(NULL, &amp;current_stack));\n    assert(SS_ONSTACK == (current_stack.ss_flags &amp; SS_ONSTACK));\n}\n\n// Call the provided signal handler on a custom stack.\nstatic void call_on_stack(void (*fn)(int)) {\n    const stack_t stack = {\n        .ss_sp = stack_buf,\n        .ss_size = sizeof(stack_buf),\n    };\n\n    const struct sigaction action = {\n        .sa_handler = fn,\n        .sa_flags = SA_ONSTACK,\n    };\n\n    stack_t old_stack;\n    struct sigaction old_action;\n\n    // Setup the stack and signal handler.\n    assert(0 == sigaltstack(&amp;stack, &amp;old_stack));\n    assert(0 == sigaction(SIGUSR1, &amp;action, &amp;old_action));\n\n    // Raise a signal. This will only return after the signal handler has returned.\n    assert(0 == raise(SIGUSR1));\n\n    // Restore the previous state, disable our alt stack.\n    sigaction(SIGUSR1, &amp;old_action, NULL);\n    sigaltstack(&amp;old_stack, NULL);\n}\n#endif\n\nstatic char *memzero_test() {\n    char buf[sizeof(secret)];\n    char *result;\n\n    assert_on_stack();\n\n    memcpy(buf, secret, sizeof(secret));\n    result = memmem(stack_buf, MEMZERO_STACK_SIZE, buf, sizeof(buf));\n\n    memset(buf, 0, sizeof(buf));   \n    return result;\n}\n\nstatic void memzero_test_correctness_signal_handler(int arg)\n{\n   // Removed for brevity. It calls memzero_test here, and basically\n   // when this function finishes execution a signal is sent to the \n   // call_on_stack function.\n   char *buf = memzero_test();\n   if (memcmp(buf, secret, sizeof(secret)) != 0) {\n      printf(\"Test passed\\n\");\n    } else {\n      printf(\"Test failed\\n\");\n    }\n}\n\ncall_on_stack(memzero_test_correctness_signal_handler);\n</code></pre>\n\n<p>So, I want to test it also in Windows, but Windows of course does not support these GNU C Library specific data types and constants. Hence, I need another method to rewrite it, more specifically create a custom stack, execute a function on it, and inform when the function finishes, so as to clear it. Any ideas how to do that in Windows?</p>\n"}, {"tags": ["c", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1540387943, "post_id": 52970319, "comment_id": 92846899, "body": "Hey! Check the value of <code>count</code> / <code>kount</code> when you add to the sum!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1540388250, "post_id": 52970319, "comment_id": 92847119, "body": "<code>++kount; ssum += kount;</code> Change the order of these to get for-loop-like behavior."}, {"owner": {"reputation": 65, "user_id": 10552274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c485efc1d6ab64c69c165a2c4a35db56?s=128&d=identicon&r=PG&f=1", "display_name": "ooatman", "link": "https://stackoverflow.com/users/10552274/ooatman"}, "edited": false, "score": 0, "creation_date": 1540388250, "post_id": 52970319, "comment_id": 92847120, "body": "the value of count goes to 11 while  the value of kount in the while code comes out as 12 and i have no idea why?"}, {"owner": {"reputation": 65, "user_id": 10552274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c485efc1d6ab64c69c165a2c4a35db56?s=128&d=identicon&r=PG&f=1", "display_name": "ooatman", "link": "https://stackoverflow.com/users/10552274/ooatman"}, "edited": false, "score": 0, "creation_date": 1540388339, "post_id": 52970319, "comment_id": 92847180, "body": "Changing the order worked! Can you explain why that happens?"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540388423, "post_id": 52970319, "comment_id": 92847247, "body": "<code>for</code> loops perform third statement, <code>count++</code>, after loop has completed (i.e. at end)."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540388574, "post_id": 52970319, "comment_id": 92847363, "body": "An alternative would be to initialize <code>kount</code> to <code>0</code> and change you&#39;re while loop to <code>while(kount &lt; number)</code>."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 3, "creation_date": 1540388582, "post_id": 52970319, "comment_id": 92847372, "body": "<code>for(a;b;c){d;}</code> is broadly equivalent to <code>a;while(b){d;c;}</code> -- note the relative order of <code>c</code> and <code>d</code> inside the while loop."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 10548773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vKJLi.jpg?s=128&g=1", "display_name": "JamesOstmann", "link": "https://stackoverflow.com/users/10548773/jamesostmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1540388451, "creation_date": 1540388451, "answer_id": 52970543, "question_id": 52970319, "link": "https://stackoverflow.com/questions/52970319/difference-between-for-and-while-loops-in-c/52970543#52970543", "title": "Difference between for and while loops in C?", "body": "<p>Inside the body of your while loop try doing</p>\n\n<p><code>ssum += kount;</code> \nbefore you do <code>++kount;</code></p>\n"}, {"comments": [{"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1540388619, "post_id": 52970550, "comment_id": 92847389, "body": "console.log() is not C."}, {"owner": {"reputation": 136, "user_id": 10313621, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cmJqG_Nfxac/AAAAAAAAAAI/AAAAAAAABh0/b5dI2yq9-Wo/photo.jpg?sz=128", "display_name": "Atharva Jawalkar", "link": "https://stackoverflow.com/users/10313621/atharva-jawalkar"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1540388697, "post_id": 52970550, "comment_id": 92847444, "body": "oops i executed this code in node.js so you can replace console.log with printf."}], "tags": [], "owner": {"reputation": 136, "user_id": 10313621, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cmJqG_Nfxac/AAAAAAAAAAI/AAAAAAAABh0/b5dI2yq9-Wo/photo.jpg?sz=128", "display_name": "Atharva Jawalkar", "link": "https://stackoverflow.com/users/10313621/atharva-jawalkar"}, "is_accepted": false, "score": 1, "last_activity_date": 1540388732, "last_edit_date": 1540388732, "creation_date": 1540388469, "answer_id": 52970550, "question_id": 52970319, "link": "https://stackoverflow.com/questions/52970319/difference-between-for-and-while-loops-in-c/52970550#52970550", "title": "Difference between for and while loops in C?", "body": "<p>just add line ++Kount after ssum+=kount and your problem will get solved.</p>\n\n<pre><code>int ssum = 0;\nint kount = 1;\nint number = 11;\nwhile (kount &lt;= number) {\n    ssum += kount;\n    ++kount;\n\n}\nprintf(\"Ssum is: %d \\n\", ssum);\nprintf(\"Kount is %d \\n\", kount);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "edited": false, "score": 0, "creation_date": 1540388965, "post_id": 52970707, "comment_id": 92847645, "body": "edit the x ni the <code>for loop</code>"}], "tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": true, "score": 1, "last_activity_date": 1540388986, "last_edit_date": 1540388986, "creation_date": 1540388929, "answer_id": 52970707, "question_id": 52970319, "link": "https://stackoverflow.com/questions/52970319/difference-between-for-and-while-loops-in-c/52970707#52970707", "title": "Difference between for and while loops in C?", "body": "<p>The basic difference between for and while loop is all three steps initalization, test and increment are written in single line.</p>\n\n<p><strong>For loop:</strong></p>\n\n<pre><code>int a ;\nfor(a= 0; a&lt;10; a++)\n{\n    //do some stuff\n}\n</code></pre>\n\n<hr>\n\n<p><strong>While loop:</strong></p>\n\n<pre><code>int a = 0;     // 1. Initialization step\nwhile (a &lt; 10) // 2. Test step\n{\n    // Do something\n    a++;      // 3.Increment step. a++ is the same as saying a=a+1, \n}\n</code></pre>\n\n<p>Another way of comparing two numbers in while loop:</p>\n\n<pre><code>a=2;\nb=3;\nwhile (a &lt; b)\n{\n    a++;\n    printf(\"%d\\n\",a);\n}\n</code></pre>\n\n<p>You can do this in one-liner using for loop.</p>\n\n<pre><code>for (a=2,b=3; a &lt; b; a++,printf(\"%d\\n\",a));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1540389143, "creation_date": 1540389143, "answer_id": 52970784, "question_id": 52970319, "link": "https://stackoverflow.com/questions/52970319/difference-between-for-and-while-loops-in-c/52970784#52970784", "title": "Difference between for and while loops in C?", "body": "<p>For safety reasons, it is often recommended to use for-loops instead of while. </p>\n\n<p>With for-loops you have an \"automatic\" maximum loop count. When using while this depends on your code in the while-loop.</p>\n\n<p>This is specially important on microcontrollers where your programm will get stuck if you do not leave the loop implementation.</p>\n"}], "owner": {"reputation": 65, "user_id": 10552274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c485efc1d6ab64c69c165a2c4a35db56?s=128&d=identicon&r=PG&f=1", "display_name": "ooatman", "link": "https://stackoverflow.com/users/10552274/ooatman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1540389733, "accepted_answer_id": 52970707, "answer_count": 4, "score": 2, "last_activity_date": 1540389143, "creation_date": 1540387857, "question_id": 52970319, "link": "https://stackoverflow.com/questions/52970319/difference-between-for-and-while-loops-in-c", "closed_reason": "Duplicate", "title": "Difference between for and while loops in C?", "body": "<p>hey so i just started programming (C) and i wanna know the difference between while and for loops, so i did a program to sum natural numbers with a for loop and it worked:</p>\n\n<pre><code>int sum = 0;\nint count;\nint num = 11;\n\nfor (count = 1; count &lt;= num; count++){\n    sum += count;\n}\nprintf(\"Sum of numbers is: %d\\n\", sum);\n</code></pre>\n\n<p>Sum came out as 66 and count comes out as 11, but when i tried it in a while loop it came out wrong:</p>\n\n<pre><code>int kount = 1;\nint ssum = 0;\nint number = 11;\nwhile(kount &lt;= number){\n    ++kount;\n    ssum += kount;\n}\nprintf(\"Ssum is: %d \\n\", ssum);\nprintf(\"Kount is %d \\n\", kount);\n</code></pre>\n\n<p>Here ssum comes out as 77 and kount comes out as 12. Can anyone explain why to a beginner like me?</p>\n"}, {"tags": ["c", "list", "linked-list", "segmentation-fault", "coredump"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1540387083, "post_id": 52970014, "comment_id": 92846300, "body": "This sounds like the right time to learn how to use a debugger, so that you can step through the code yourself and see where it goes wrong"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1540387122, "post_id": 52970014, "comment_id": 92846335, "body": "This article should interess you: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1540387191, "post_id": 52970014, "comment_id": 92846381, "body": "<code>tempcar2</code> in <code>addCarinfo</code> is not initialized (it is still zero upon first use)."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 4, "creation_date": 1540387193, "post_id": 52970014, "comment_id": 92846382, "body": "Please compile your code with warnings enabled. The line <code>if(carbase=NULL)</code> should be a comparison with <code>==</code>, not a assignment with <code>=</code> and the compiler will warn you about it."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1540387305, "post_id": 52970014, "comment_id": 92846476, "body": "You don&#39;t use the return value of the add function."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1540387341, "post_id": 52970014, "comment_id": 92846499, "body": "Indeed, time to learn to use a debugger."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1540387541, "post_id": 52970014, "comment_id": 92846624, "body": "Warning, <code>carbase</code> is a global variable and used as a local variable in many functions..."}], "answers": [{"tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": false, "score": 0, "last_activity_date": 1540388426, "last_edit_date": 1540388426, "creation_date": 1540387894, "answer_id": 52970334, "question_id": 52970014, "link": "https://stackoverflow.com/questions/52970014/segmentation-fault-core-dumped-error-when-making-a-linked-list/52970334#52970334", "title": "Segmentation fault (core dumped) error when making a linked list", "body": "<p>I ran your program in gdb it points to the line 52</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x00000000004007b6 in addCarinfo (carbase=0x0, newcar=0x602010) at so.c:52\n(gdb) bt \n#0  0x00000000004007b6 in addCarinfo (carbase=0x0, newcar=0x602010) at so.c:52\n#1  0x00000000004008e7 in main () at so.c:89\n</code></pre>\n\n<p>Here its mistake, instead of == your using =.</p>\n\n<pre><code>// Your assigning carbase struct pointer to NULL instead of validating pointer is null. \n    if(carbase=NULL){ //change to carbase == NULL\n        carbase = newcar;\n        return carbase;\n    }\n</code></pre>\n\n<hr>\n\n<p><strong>How to debug using GDB:</strong></p>\n\n<ol>\n<li>compile your C code using -g flag if you use gcc.\nexample: <code>gcc -g file.c</code></li>\n<li>gdb ./a.out</li>\n<li>bt(backtrace if will pointout the callstack)</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10552061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uCseqUbPt6c/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCDJi-kcjOeD5K6pvZlJVzqJE1cRg/mo/photo.jpg?sz=128", "display_name": "Paul van Kleunen", "link": "https://stackoverflow.com/users/10552061/paul-van-kleunen"}, "edited": false, "score": 0, "creation_date": 1540390268, "post_id": 52970425, "comment_id": 92848612, "body": "In the createCarinfo function, you remove malloc 2 times, and instead use strdup. Is this to reduce clutter? Or does it have any other usage? Also, why does your version print the data for the Opel Manta twice, while also having added &quot;tempcar2&quot; to carbase?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "reply_to_user": {"reputation": 21, "user_id": 10552061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uCseqUbPt6c/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCDJi-kcjOeD5K6pvZlJVzqJE1cRg/mo/photo.jpg?sz=128", "display_name": "Paul van Kleunen", "link": "https://stackoverflow.com/users/10552061/paul-van-kleunen"}, "edited": false, "score": 0, "creation_date": 1540390755, "post_id": 52970425, "comment_id": 92848960, "body": "@PaulvanKleunen I use <code>strdup</code> because it does the <code>malloc</code> + <code>strcpy</code> in one pass, less code is often less bugs."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "reply_to_user": {"reputation": 21, "user_id": 10552061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uCseqUbPt6c/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCDJi-kcjOeD5K6pvZlJVzqJE1cRg/mo/photo.jpg?sz=128", "display_name": "Paul van Kleunen", "link": "https://stackoverflow.com/users/10552061/paul-van-kleunen"}, "edited": false, "score": 0, "creation_date": 1540390820, "post_id": 52970425, "comment_id": 92849019, "body": "@PaulvanKleunen Opel Manta is printed twice because of a bug I did not see in print <code>printCarbase</code> function, I updated my answer to explain it."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 0, "last_activity_date": 1540390679, "last_edit_date": 1540390679, "creation_date": 1540388123, "answer_id": 52970425, "question_id": 52970014, "link": "https://stackoverflow.com/questions/52970014/segmentation-fault-core-dumped-error-when-making-a-linked-list/52970425#52970425", "title": "Segmentation fault (core dumped) error when making a linked list", "body": "<p>Some problems in your code:</p>\n\n<ul>\n<li>some variable are not initialized (<code>tempcar2</code> for instance, which is global)</li>\n<li>some local and global variable have the same name</li>\n<li>some comparison are done with <code>=</code> instead of <code>==</code> operator</li>\n<li>in your print function, you always print <code>carbase</code> instead of <code>tempprint</code></li>\n<li><code>malloc</code> return is casted, <a href=\"https://stackoverflow.com/q/605845/1212012\">it should not</a></li>\n</ul>\n\n<p>Some problems could have been detected by the compiler: turn on compiler warnings (<code>-Wall</code> for most compilers)</p>\n\n<p>When your code is compiled with warning on, your problems are revealed:</p>\n\n<pre><code>.code.tio.c: In function \u2018addCarinfo\u2019:\n.code.tio.c:46:8: warning: suggest parentheses around assignment used as truth value [-Wparentheses]\n     if(carbase=NULL){\n        ^~~~~~~\n.code.tio.c: At top level:\n.code.tio.c:81:6: warning: return type of \u2018main\u2019 is not \u2018int\u2019 [-Wmain]\n void main(void){\n      ^~~~\n.code.tio.c: In function \u2018main\u2019:\n.code.tio.c:88:24: warning: unused variable \u2018tempcar2\u2019 [-Wunused-variable]\n    struct carinfo_t * tempcar2 = createCarinfo(\"Ford\", \"Focus\", 1999, 350.25);\n                        ^~~~~~~~\n</code></pre>\n\n<p>A corrected version could be: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct carinfo_t\n{\n    char* carbrand;\n    char* carmodel;\n    int caryear;\n    float carvalue;\n    struct carinfo_t * next;\n};\n\nvoid freeCarinfo(struct carinfo_t * carinfo)\n{\n    free(carinfo-&gt;carbrand);\n    free(carinfo-&gt;carmodel);\n    free(carinfo);    \n}\n\nstruct carinfo_t * createCarinfo(char *carbrand, char *carmodel, int caryear, float carvalue)\n{\n    struct carinfo_t * newcar;\n    /* malloc cast is not recommender */\n    newcar = malloc(sizeof (struct carinfo_t));\n\n    /* strdup can be used here */\n    newcar-&gt;carbrand = strdup(carbrand);    \n    newcar-&gt;carmodel = strdup(carmodel);\n\n    newcar-&gt;caryear=caryear;\n    newcar-&gt;carvalue=carvalue;\n\n    newcar-&gt;next= NULL;\n\n    return newcar;\n}\n\nstruct carinfo_t * addCarinfo(struct carinfo_t *carbase, struct carinfo_t *newcar)\n{\n    if(carbase==NULL)\n    {\n        carbase = newcar;\n        return carbase;\n    }\n    else\n    {\n        /* find for the last element */\n        struct carinfo_t * tempcar2 = carbase;\n        while(tempcar2-&gt;next)\n        {\n            tempcar2 = tempcar2-&gt;next;\n        }\n        /* add the new car to the list */\n        tempcar2-&gt;next=newcar;\n\n        return carbase;\n    }\n}\n\nvoid printCarbase(struct carinfo_t *carbase)\n{\n    struct carinfo_t *tempprint = carbase;\n\n    if (carbase == NULL)\n    {\n        printf(\"The database contains no cars\\n\");\n    }\n    else\n    {\n        while (tempprint != NULL)\n        {\n            printf(\"Car:\\n\");\n            printf(\"- brand: %s\\n\", tempprint-&gt;carbrand);\n            printf(\"- model: %s\\n\", tempprint-&gt;carmodel);\n            printf(\"- year: %d\\n\", tempprint-&gt;caryear);\n            printf(\"- value: %7.2f\\n\", tempprint-&gt;carvalue);\n            tempprint = tempprint-&gt;next;\n        }\n    }\n}\n\nint main(void)\n{\n   struct carinfo_t * carbase;\n   carbase = NULL;\n\n   struct carinfo_t * tempcar;\n   tempcar = createCarinfo(\"Opel\", \"Manta\", 1965, 20000);\n\n   struct carinfo_t * tempcar2 = createCarinfo(\"Ford\", \"Focus\", 1999, 350.25);\n   carbase = addCarinfo(carbase, tempcar);\n   carbase = addCarinfo(carbase, tempcar2);\n   printCarbase(carbase);\n\n   return 0;       \n}\n</code></pre>\n\n<p>The result with this code is:</p>\n\n<pre><code>Car: \n- brand: Opel\n- model: Manta\n- year: 1965\n- value: 20000.00\nCar: \n- brand: Ford\n- model: Focus\n- year: 1999\n- value:  350.25\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10552061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uCseqUbPt6c/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCDJi-kcjOeD5K6pvZlJVzqJE1cRg/mo/photo.jpg?sz=128", "display_name": "Paul van Kleunen", "link": "https://stackoverflow.com/users/10552061/paul-van-kleunen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 52970425, "answer_count": 2, "score": 1, "last_activity_date": 1540392610, "creation_date": 1540386981, "last_edit_date": 1540392610, "question_id": 52970014, "link": "https://stackoverflow.com/questions/52970014/segmentation-fault-core-dumped-error-when-making-a-linked-list", "title": "Segmentation fault (core dumped) error when making a linked list", "body": "<p>I'm learing C for school, and one of the assignments was to create a database. Now I'm trying to add some of the inputs I give it to the list, but I keep getting a segmentation error. What am I doing wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct carinfo_t {\n    char* carbrand;\n    char* carmodel;\n    int caryear;\n    float carvalue;\n    struct carinfo_t * next;\n};\n\nstruct carinfo_t * carbase;\n\nstruct carinfo_t * tempcar;\n\nstruct carinfo_t * tempcar2;\n\nstruct carinfo_t * tempprint;\n\nvoid freeCarinfo(struct carinfo_t * carinfo){\n    free(carinfo-&gt;carbrand);\n    free(carinfo-&gt;carmodel);\n    free(carinfo);    \n}\n\nstruct carinfo_t * createCarinfo(char *carbrand, char *carmodel, int caryear, float carvalue){\n    struct carinfo_t * newcar;\n    newcar = (struct carinfo_t *)malloc(sizeof (struct carinfo_t));\n    newcar-&gt;carbrand=(char *)malloc(sizeof(char)*(strlen(carbrand) + 1));\n    strcpy(newcar-&gt;carbrand, carbrand);\n\n    newcar-&gt;carmodel=(char *)malloc(sizeof(char)*(strlen(carmodel) + 1));\n    strcpy(newcar-&gt;carmodel, carmodel);\n\n    newcar-&gt;caryear=caryear;\n\n    newcar-&gt;carvalue=carvalue;\n\n    newcar-&gt;next= NULL;\n\n    return newcar;\n}\n\nstruct carinfo_t * addCarinfo(struct carinfo_t *carbase, struct carinfo_t *newcar){\n    if(carbase=NULL){\n        carbase = newcar;\n        return carbase;\n    }\n\n    else{\n        tempcar2-&gt;next=carbase;\n        carbase=tempcar2;\n        return carbase;\n\n    }\n\n}\n\nvoid printCarbase(struct carinfo_t *carbase){\n\n    struct carinfo_t *tempprint = carbase;\n\n    if (carbase == NULL){\n        printf(\"The database contains no cars\\n\");\n    }\n\n    else{\n        while (tempprint != NULL){\n            printf(\"Car:\\n\");\n            printf(\"- brand: %s\\n\", carbase-&gt;carbrand);\n            printf(\"- model: %s\\n\", carbase-&gt;carmodel);\n            printf(\"- year: %d\\n\", carbase-&gt;caryear);\n            printf(\"- value: %7.2f\\n\", carbase-&gt;carvalue);\n            tempprint = tempprint-&gt;next;\n        }\n    }\n}\n\n\nvoid main(void){\n    struct carinfo_t * carbase;\n    carbase = NULL;\n\n    struct carinfo_t * tempcar;\n    tempcar = createCarinfo(\"Opel\", \"Manta\", 1965, 20000);\n\n    struct carinfo_t * tempcar2 = createCarinfo(\"Ford\", \"Focus\", 1999, 350.25);\n    addCarinfo(carbase, tempcar);\n}\n</code></pre>\n\n<p>Also, if you see any way to improve my code please tell me, I'm very new to programming, and I'd like to be able to do this properly.</p>\n\n<p>edit: Thanks to everyone who responded, I figured out how to use GDB. Now that the original issue is fixed, I got the same error but this time it's \"tempcar2\" that seems to be the issue:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x000000000040072a in addCarinfo (carbase=0x602010, newcar=0x602080)\n    at database.c:56\n56              tempcar2 = tempcar2-&gt;next;\n(gdb) bt\n#0  0x000000000040072a in addCarinfo (carbase=0x602010, newcar=0x602080)\n    at database.c:56\n#1  0x0000000000400869 in main () at database.c:98\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 5, "creation_date": 1540386956, "post_id": 52969972, "comment_id": 92846216, "body": "That is not the same. The second is a pointer. typedefing pointers is discouraged!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540389170, "post_id": 52969972, "comment_id": 92847814, "body": "Note <a href=\"https://stackoverflow.com/questions/750178/is-it-a-good-idea-to-typedef-pointers\">Is it a good idea to typedef pointers</a> \u2014 TL;DR &quot;No&quot;, except perhaps function pointers."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1540387589, "creation_date": 1540387589, "answer_id": 52970216, "question_id": 52969972, "link": "https://stackoverflow.com/questions/52969972/typedef-struct-as-pointer/52970216#52970216", "title": "typedef struct as pointer?", "body": "<p>It will be easy to see the difference if you use the same format for both <code>typedef</code> definitions:</p>\n\n<pre><code>typedef struct Scanner myScanner;\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>typedef struct Scanner *myScanner;\n</code></pre>\n\n<p>Defining a type-alias using <code>typedef</code> is <em>very</em> similar do declaring variables. For <code>typedef</code> the asterisk means \"define as pointer\", just like it does for variables.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1540389263, "post_id": 52970347, "comment_id": 92847871, "body": "Note that you should not, in general, create function, variable, tag or macro names that start with an underscore. Part of <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.1.3\" rel=\"nofollow noreferrer\">C11 &#167;7.1.3 Reserved identifiers</a> says: \u2014 <i>All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use.</i> \u2014 <i>All identifiers that begin with an underscore are always reserved for use as identifiers with file scope in both the ordinary and tag name spaces.</i> See also <a href=\"https://stackoverflow.com/a/1449301\">What does double underscore (<code>__const</code>) mean in C?</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10540693"}, "is_accepted": false, "score": 0, "last_activity_date": 1540387922, "creation_date": 1540387922, "answer_id": 52970347, "question_id": 52969972, "link": "https://stackoverflow.com/questions/52969972/typedef-struct-as-pointer/52970347#52970347", "title": "typedef struct as pointer?", "body": "<p>The type definitions are usually in a header file where no vars are created.\nIn your main(), you are supposed to use this type to create vars. In our example, the newly minted type is 'Scanner'.</p>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct _scanner\n{       // example\n    int a;\n    double b;\n    char c;\n};\ntypedef struct _scanner Scanner;\n\n\nint main()\n{\n    Scanner s;\n    s.a = 10;\n    s.b = 3.14;\n    s.c = 'N';\n    // -------------------\n    // If you want to have a\n    //  pointer p to scanner, then\n\n    Scanner* p = &amp;s;\n\n    p-&gt;a = 20;\n    p-&gt;b = 2.72;\n    p-&gt;c = 'Y';\n\n    printf(\"%d, %.2lf, %c\\n\",\n           s.a, s.b, s.c);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<hr>\n\n<p>Output:<br></p>\n\n<pre>\n20, 2.72, Y\n</pre>\n\n<p>Once the variable is created, you can make a pointer to it, as a pointer must be able to point to something. The output shows that values have been successfully manipulated.</p>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": false, "score": 0, "last_activity_date": 1540389489, "last_edit_date": 1540389489, "creation_date": 1540388337, "answer_id": 52970498, "question_id": 52969972, "link": "https://stackoverflow.com/questions/52969972/typedef-struct-as-pointer/52970498#52970498", "title": "typedef struct as pointer?", "body": "<p><code>typedef struct Scanner *myScanner;</code> \u2014 here you are declaring type pointer to a <code>struct Scanner</code>.</p>\n\n<p><code>typedef struct Scanner myScanner;</code> \u2014 is a declaration of a new type.</p>\n\n<p>What this means is, in the first case, you define a pointer to <code>struct Scanner</code>, for arithmetic calculations etc, the type of element that is pointed to.\nThe size of <code>myScanner</code> will equal size of <code>void*</code> (pointer size on your os).</p>\n\n<p>For the second case, you are defining a new type of element; it's size is<br>\n<code>sizeof(struct Scanner) == size of(myScanner)</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 10552233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d119bc1908f169066d10b532aa0a88?s=128&d=identicon&r=PG&f=1", "display_name": "JoeCode", "link": "https://stackoverflow.com/users/10552233/joecode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1205, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1540389489, "creation_date": 1540386843, "last_edit_date": 1540387342, "question_id": 52969972, "link": "https://stackoverflow.com/questions/52969972/typedef-struct-as-pointer", "title": "typedef struct as pointer?", "body": "<p>I have a question in regards to <strong>typedef struct</strong>'s that I believe I know the answer to but would like some clarification.</p>\n\n<p>Lets say I have:</p>\n\n<pre><code>typedef struct Scanner{\n    //information\n}myScanner;\n</code></pre>\n\n<p>Would that have the same meaning as:</p>\n\n<pre><code>typedef struct Scanner *myScanner; \nstruct Scanner {\n    //information\n};\n</code></pre>\n"}, {"tags": ["c", "for-loop", "sieve-of-eratosthenes", "sieve"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1540386770, "post_id": 52969865, "comment_id": 92846087, "body": "Could you please format your code?"}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1540386820, "post_id": 52969865, "comment_id": 92846125, "body": "You allocate <code>malloc(sizeof(int) * (n-1))</code> but your loop runs while <code>i &lt;= n</code>. You write 2 elements  too much."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1540386859, "post_id": 52969865, "comment_id": 92846156, "body": "Will <code>i*j &lt;= n</code> always be smaller than <code>leange</code>?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1540387002, "post_id": 52969865, "comment_id": 92846242, "body": "From the <code>print_prim</code> function it is obvious that the entries are shifted by 2. Meaning number 2 is at index 0. <code>for (int i = 2; i &lt;= n; i++) {array[i] = 1;}</code> This must be <code>array[i-2]</code> same for all accesses to <code>array</code>."}, {"owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "reply_to_user": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1540388111, "post_id": 52969865, "comment_id": 92847024, "body": "hi @Holger which loop runs 2 elements too much? a specific one or all of them?"}, {"owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540388211, "post_id": 52969865, "comment_id": 92847090, "body": "@Gerhardh sorry no, when I do that, the only output is 2,"}, {"owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "edited": false, "score": 0, "creation_date": 1540388283, "post_id": 52969865, "comment_id": 92847141, "body": "Please, post a question. There is not a question to answer."}], "answers": [{"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 4, "creation_date": 1540388449, "post_id": 52970452, "comment_id": 92847272, "body": "I am not sure that this answers the question. :/"}, {"owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1540388474, "post_id": 52970452, "comment_id": 92847289, "body": "There is no question, anyway."}], "tags": [], "owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "is_accepted": false, "score": -1, "last_activity_date": 1540388210, "creation_date": 1540388210, "answer_id": 52970452, "question_id": 52969865, "link": "https://stackoverflow.com/questions/52969865/sieve-of-eratosthenes-c-language-implementation/52970452#52970452", "title": "Sieve of Eratosthenes - C language implementation", "body": "<h2>Reformatting the code</h2>\n\n<p>A common step to help you is to format to us</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n#include \"input2.h\"\n\nint main ( void )\n{\n  int n = lese_int();\n  int laenge = n - 1; \n  int *array;\n\n  array = malloc( sizeof( int ) * laenge );\n\n  for ( int i = 2; i &lt;= n; i++ )\n  {\n    array[i] = 1;\n  }\n\n  for ( int i = 0; i &lt;= n; i++ )\n  {\n    if ( array[i] == 1 )\n    {\n      for ( int j = i; i * j &lt;= n; j++ )\n      {\n        array[ i * j ] = 0;\n      }\n    }\n  }\n\n  for ( int i = 0; i &lt; laenge; i++ )\n  {\n    printf( \"%d, \", array[i] );\n  }\n\n  printf( \"\\n\" );\n  print_prim( array, laenge );\n  free( array );\n  return ( 0 );\n}\n</code></pre>\n\n<p>And the <code>print_prim</code> function is:</p>\n\n<pre><code>void print_prim ( int *array, int laenge )\n{\n  for ( int i = 0; i &lt; laenge; i++ )\n  {\n    if ( array[i] == 1 )\n    {\n      printf( \"%d, \", i + 2 );\n    }\n  }\n  printf( \"\\n\" );\n}\n</code></pre>\n\n<p>Note: this style is personal and it's not intended to make a religion-like flamming wars using spacing like me, or curl braces down.</p>\n\n<hr>\n\n<h2>Errors found when reading:</h2>\n\n<p>You use C99. Take that into account prior to change something. (<em>know your language</em>)</p>\n\n<p>You make a memory allocation of <code>n - 1</code> elements, but you try to access from the element <code>2</code> to the element <code>n</code>, both including, in the first <code>for</code> loop. (<em>know how memory allocation works</em>)</p>\n\n<p><strong>Arrays start at zero</strong> (<em>insert joke</em>), so, you can't reach the element <code>n</code> nor the element <code>n - 1</code>.</p>\n\n<p><code>print_prim</code> only prints the value plus 2 of the array element that contains 1.\nIn other words: try to locate all the positions in the array which contains 1, and increment that position with 2. (<em>know how to read-debugging</em>)</p>\n\n<hr>\n\n<p>I reccomend you to study how the language works instead of <em>trial'n'error</em> based programming. It will save you lot's of hours and you will learn more.</p>\n"}, {"comments": [{"owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "edited": false, "score": 0, "creation_date": 1540389425, "post_id": 52970601, "comment_id": 92847981, "body": "Thanks Mukul, It&#39;s pretty nice. Can you please explain your approach? I think they are a little bit different."}, {"owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "edited": false, "score": 0, "creation_date": 1540389671, "post_id": 52970601, "comment_id": 92848178, "body": "Inline fors are hard to expand. If you want to add more lines to that code, you will need curl braces, but a novice programmer doesn&#39;t notice it."}, {"owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "reply_to_user": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "edited": false, "score": 0, "creation_date": 1540389756, "post_id": 52970601, "comment_id": 92848245, "body": "@aomerk, The code shifts by two elements just to ensure the <code>print_prim</code> function works as expected."}, {"owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "reply_to_user": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "edited": false, "score": 0, "creation_date": 1540392144, "post_id": 52970601, "comment_id": 92849987, "body": "@Jos&#233;ManuelRamos I don&#39;t think you are as helpful as you think you are. Please help people other than me."}, {"owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "edited": false, "score": 0, "creation_date": 1540392229, "post_id": 52970601, "comment_id": 92850061, "body": "@MukulGupta sorry but the part I couldn&#39;t understand was, I was looping until j * i and so on. Your math is little bit different. i * i , j =i+i and j+= i"}, {"owner": {"reputation": 2184, "user_id": 1112010, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2c06679b27da6bbc84a4bf036da82648?s=128&d=identicon&r=PG", "display_name": "Mukul Gupta", "link": "https://stackoverflow.com/users/1112010/mukul-gupta"}, "reply_to_user": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "edited": false, "score": 0, "creation_date": 1540392997, "post_id": 52970601, "comment_id": 92850584, "body": "@aomerk The math is the same. Instead of multiplication, I&#39;ve used addition. In your case you should have done <code>i*j - 2</code> as you are using values of <code>j</code> from <code>i</code>. In fact, we could also start from <code>i*i</code> in the inner loop in my case. I&#39;ll edit it because it&#39;s more optimal."}], "tags": [], "owner": {"reputation": 2184, "user_id": 1112010, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2c06679b27da6bbc84a4bf036da82648?s=128&d=identicon&r=PG", "display_name": "Mukul Gupta", "link": "https://stackoverflow.com/users/1112010/mukul-gupta"}, "is_accepted": true, "score": 2, "last_activity_date": 1540408589, "last_edit_date": 1540408589, "creation_date": 1540388589, "answer_id": 52970601, "question_id": 52969865, "link": "https://stackoverflow.com/questions/52969865/sieve-of-eratosthenes-c-language-implementation/52970601#52970601", "title": "Sieve of Eratosthenes - C language implementation", "body": "<p>All you need is a normal sieve shifted by 2 elements.</p>\n\n<pre><code>int main() {\n  int n;\n  scanf(\"%d\", &amp;n);\n\n  int *a = (int*)malloc(sizeof(int) * (n - 1));\n  for (int i = 0; i &lt; n - 1; i++ ) a[i] = 1;\n\n  for (int i = 2; i*i &lt;= n; i++) {\n    if (a[i-2] == 1) {\n      for (int j = i * i; j &lt;= n; j+=i ) a[j-2] = 0;\n    }\n  }\n\n  print_prim(a, n - 1);\n\n  free(a);\n  return 0;\n}\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li>Allocate <code>n-1</code> elements to represent numbers from <code>2</code> to <code>n</code> inclusive.</li>\n<li>Initialize all elements with <code>1</code>. Why? Because looking at <code>print_prim</code>, it prints values which are equal to 1. So, all our primes need to be shifted by 2 and its value should be <code>1</code>.</li>\n<li>Starting with 2, we mark all multiples of prime numbers as <code>0</code>. The ones that stay <code>1</code> are primes. See <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes</a> for details.</li>\n<li>Since, <code>print_prim</code> is shifted by <code>2</code>, we need to pass <code>n-1</code> as the second argument for inclusive printing.</li>\n</ul>\n"}], "owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 52970601, "answer_count": 2, "score": 3, "last_activity_date": 1540408589, "creation_date": 1540386482, "last_edit_date": 1540388556, "question_id": 52969865, "link": "https://stackoverflow.com/questions/52969865/sieve-of-eratosthenes-c-language-implementation", "title": "Sieve of Eratosthenes - C language implementation", "body": "<p>I am missing something but I can't find what it is. I have also been given a input2.c file and it has a print_prim function which I am not allowed to change.</p>\n\n<p>For n=10 it is always printing</p>\n\n<pre><code>4, 5, 7, 9, \n</code></pre>\n\n<p>I know there is an i+2 in <strong>print_prim</strong> function but I can't solve it. Again, I am not allowed to change print_prim function. Can anyone see what am i missing?</p>\n\n<hr>\n\n<blockquote>\n  <p>main.c</p>\n</blockquote>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n#include \"input2.h\"\n\nint main() {\n    int n = lese_int();\n    int laenge = n-1; \n    int *array;  \n    array = malloc(sizeof(int) * laenge);  \n    for (int i = 2; i &lt;= n; i++) {\n        array[i] = 1;  \n    }\n\n    for(int i=0;i&lt;=n;i++) {\n        if(array[i] == 1){\n            for(int j = i ; i*j &lt;= n ; j++){\n                array[i*j] = 0;\n            }   \n        } \n    }\n    print_prim(array, laenge);\n    free(array); \n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>print_prim function</p>\n</blockquote>\n\n<pre><code>void print_prim(int *array, int laenge) {\n    for (int i=0; i&lt;laenge; i++) {\n        if (array[i] == 1) {\n            printf(\"%d, \", i+2);\n        }\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2015"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1540385272, "post_id": 52969389, "comment_id": 92844987, "body": "PDB doesn&#39;t get embedded in a lib (or other object file). Without a valid PDB, you cannot put breakpoints at the source level. The fact that it allows it at the braces is perhaps due to recognized entry/exit code."}, {"owner": {"reputation": 52264, "user_id": 264052, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG", "display_name": "smwikipedia", "link": "https://stackoverflow.com/users/264052/smwikipedia"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1540385452, "post_id": 52969389, "comment_id": 92845140, "body": "@Michael Thanks. But for <i>some</i> functions in that lib, the breakpoint can work at locations other than the beginning/ending of the body.  At least seemingly."}, {"owner": {"reputation": 52264, "user_id": 264052, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG", "display_name": "smwikipedia", "link": "https://stackoverflow.com/users/264052/smwikipedia"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1540385529, "post_id": 52969389, "comment_id": 92845205, "body": "@Michael How to generate a PDB file for a lib? And since the lib is statically linked to the executable, can its PDB still be useful?"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1540385612, "post_id": 52969389, "comment_id": 92845271, "body": "The PDB contains only symbols and other stuff needed for debugging. It is not related to static/dynamic linking (all executable formats can have a PDB which is only useful for the debugger, not for running whatsoever). Try the /Zi option."}, {"owner": {"reputation": 52264, "user_id": 264052, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG", "display_name": "smwikipedia", "link": "https://stackoverflow.com/users/264052/smwikipedia"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1540385789, "post_id": 52969389, "comment_id": 92845388, "body": "@Michael According to MSDN (<a href=\"https://msdn.microsoft.com/en-us/library/958x11bc.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/958x11bc.aspx</a>): <i>/Z7: Produces an .obj file <b>containing</b> full symbolic debugging information for use with the debugger.</i>"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1540385817, "post_id": 52969389, "comment_id": 92845412, "body": "I just saw it, but tbh I &#39;ve never used it. Try /Zi"}, {"owner": {"reputation": 52264, "user_id": 264052, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG", "display_name": "smwikipedia", "link": "https://stackoverflow.com/users/264052/smwikipedia"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1540385907, "post_id": 52969389, "comment_id": 92845499, "body": "@Michael <code>.lib</code> just packages a bunch of <code>obj</code>s. So I guess the debugging info are there. Anyway, I will have a try."}], "answers": [{"tags": [], "owner": {"reputation": 52264, "user_id": 264052, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG", "display_name": "smwikipedia", "link": "https://stackoverflow.com/users/264052/smwikipedia"}, "is_accepted": true, "score": 0, "last_activity_date": 1540516314, "last_edit_date": 1540516314, "creation_date": 1540386993, "answer_id": 52970018, "question_id": 52969389, "link": "https://stackoverflow.com/questions/52969389/vs2015-c-debugging-issue-breakpoint-will-not-currently-be-hit-no-executable-co/52970018#52970018", "title": "VS2015 C debugging issue: Breakpoint will not currently be hit. No executable code is associated with this line", "body": "<p>(<strike>This is not an answer <em>yet</em></strike>. <strong>This is an answer now</strong>. I post my investigation here so the original post won't be too long.)</p>\n\n<h2>Try 1</h2>\n\n<p>I tried to use <code>/Zi</code> for my lib. And it produces a <code>vc140.pdb</code> file. (btw, the lib file size is much smaller than the <code>/Z7</code> situation)</p>\n\n<p>Then I debug my application. I tried to put this <code>vc140.pdb</code> file in the symbol file window as below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/imIrC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/imIrC.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it didn't work. (This is kind of expected because how could VS2015 know this pdb file is for the statically linked lib, which is just a part of the executable now.)</p>\n\n<h2>Try 2</h2>\n\n<p>There are 3 similar scenarios where a break-point cannot be hit.</p>\n\n<p>Scenario 1: </p>\n\n<blockquote>\n  <p>The breakpoint will not currently be hit. No executable code of the\n  debugger's target code type is associated with this line.</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/CFGon.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CFGon.png\" alt=\"enter image description here\"></a></p>\n\n<p>Scenario 2:</p>\n\n<blockquote>\n  <p>The breakpoint will not currently be hit. No Symbols have been loaded\n  for this document.</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/BhbPf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BhbPf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Scenario 3:</p>\n\n<blockquote>\n  <p>The breakpoint will not currently be hit. The source code is different\n  from the original version.</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/agDOa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/agDOa.png\" alt=\"enter image description here\"></a></p>\n\n<p>During the investigation, I was lucky enough to encountered all 3 of them.</p>\n\n<p>To fix 2, check here: <a href=\"http://www.wwwlicious.com/2016/02/28/how-to-load-debug-symbols-during-debugging/\" rel=\"nofollow noreferrer\">http://www.wwwlicious.com/2016/02/28/how-to-load-debug-symbols-during-debugging/</a></p>\n\n<p>To fix 3, double check that your file is of correct version.</p>\n\n<p>For 1. Based on the its very description, <strong>I believe the debug symbol must have been loaded in 1, which is not the same as 2.</strong> But somehow, the debug symbol info is corrupted somewhere in the middle, which causes break points for some functions are OK while others are BAD.  </p>\n\n<h2>Try 3</h2>\n\n<p>According to the error description, there can be 2 most likely reasons:</p>\n\n<ul>\n<li>Conditional Compilation</li>\n<li>Compiler Optimization</li>\n</ul>\n\n<p>I focus on Compiler Optimization for now.</p>\n\n<p>I set <code>/Od</code> for <code>cl.exe</code> to <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/od-disable-debug?view=vs-2017\" rel=\"nofollow noreferrer\">disable optimization</a>.</p>\n\n<p>I set <code>/GL-</code> for <code>cl.exe</code> to disable <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/gl-whole-program-optimization?view=vs-2017\" rel=\"nofollow noreferrer\">whole program optimization</a>.</p>\n\n<p>I remove the <code>/LTCG</code> to disable <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/ltcg-link-time-code-generation?view=vs-2017\" rel=\"nofollow noreferrer\">link time code generation</a>, which is also a kind of whole-program optimization.</p>\n\n<p>Seems still not work.</p>\n\n<h2>Try 4  --- Issue Solved!!!</h2>\n\n<p>(<em>Finally, my mom's blessing saved the day!</em>)</p>\n\n<p><strong>The root cause turns out to be the line ending style!</strong></p>\n\n<p>Visual Studio keeps prompting me for the C file which contains the unreachable  break points. As below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/467b4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/467b4.png\" alt=\"enter image description here\"></a></p>\n\n<p>After I normalize the line endings, all break points work fine now!</p>\n\n<p>Below is a previously unreachable break point.</p>\n\n<p><a href=\"https://i.stack.imgur.com/wfRK3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wfRK3.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>BTW, I really didn't expect that Microsoft Visual Studio sticks to the <code>CR LF</code> style so <em>strictly</em>. </p>\n\n<p><em>Does it hurt to be a little bit more benign/intelligent?</em></p>\n"}], "owner": {"reputation": 52264, "user_id": 264052, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG", "display_name": "smwikipedia", "link": "https://stackoverflow.com/users/264052/smwikipedia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 1, "accepted_answer_id": 52970018, "answer_count": 1, "score": 3, "last_activity_date": 1540516314, "creation_date": 1540385142, "last_edit_date": 1540385314, "question_id": 52969389, "link": "https://stackoverflow.com/questions/52969389/vs2015-c-debugging-issue-breakpoint-will-not-currently-be-hit-no-executable-co", "title": "VS2015 C debugging issue: Breakpoint will not currently be hit. No executable code is associated with this line", "body": "<p>I am writing a C program with <strong>Visual Studio 2015</strong>.</p>\n\n<p>My C executable links to a <code>.lib</code> file, <strong>which is built separately from my executable.</strong></p>\n\n<p>The <code>.lib</code> file is also written in C. And it is built with:</p>\n\n<p><strong>cl.exe</strong> flags:</p>\n\n<blockquote>\n  <p>/nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /Od /GL- /Gy /EHs-c- /GR-\n  /GF /Z7 /Gm- /Gw</p>\n</blockquote>\n\n<p><strong>link.exe</strong> flags:</p>\n\n<blockquote>\n  <p>/NOLOGO /LTCG</p>\n</blockquote>\n\n<hr>\n\n<p>My executable is built with:</p>\n\n<p><strong>cl.exe</strong> flags:</p>\n\n<blockquote>\n  <p>/GS- /TC /W4 /Zc:wchar_t Z7 /Gm /O1 /Fd\"C:\\source\\TEST2.pdb\"\n  /Zc:inline /fp:precise /D \"_MBCS\" /errorReport:prompt /WX-\n  /Zc:forScope /Gd /MTd /Fa\"x64\\Debug\\\" /Fo\"C:\\source\\x64\\Debug\\\"\n  /Fp\"x64\\TEST2.pch\"  /c /WX- /GS- /W4 /Gs32768 /D UNICODE /Od  /GL- /Gy\n  /EHs-c- /GR- /GF /Z7 /Gm- /Gw  /wd4054 /wd4477 /U_DEBUG</p>\n</blockquote>\n\n<p><strong>link.exe</strong> flags:</p>\n\n<blockquote>\n  <p>/OUT:\"C:\\source\\x64\\Debug\\TEST2.exe\" /MANIFEST /NXCOMPAT\n  /PDB:\"C:\\source\\x64\\Debug\\TEST2.pdb\" /DYNAMICBASE \"kernel32.lib\"\n  \"user32.lib\" \"gdi32.lib\" \"winspool.lib\" \"comdlg32.lib\" \"advapi32.lib\"\n  \"shell32.lib\" \"ole32.lib\" \"oleaut32.lib\" \"uuid.lib\" \"odbc32.lib\"\n  \"odbccp32.lib\" /DEBUG /MACHINE:X64 /INCREMENTAL:NO\n  /PGD:\"C:\\source\\x64\\Debug\\TEST2.pgd\" /MANIFESTUAC:\"level='asInvoker'\n  uiAccess='false'\"\n  /ManifestFile:\"x64\\Debug\\TEST2.exe.intermediate.manifest\"\n  /ERRORREPORT:PROMPT /NOLOGO /TLBID:1  /NODEFAULTLIB:libc.lib\n  /NODEFAULTLIB:libcmt.lib /NODEFAULTLIB:msvcrt.lib\n  /NODEFAULTLIB:libcd.lib /NODEFAULTLIB:msvcrtd.lib</p>\n</blockquote>\n\n<hr>\n\n<p>When I debug through the whole application, I encountered below error for <strong><em>some</em></strong> breakpoints <strong><em>in the lib</em></strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4kBmy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4kBmy.png\" alt=\"enter image description here\"></a></p>\n\n<p>So I did some experiment.</p>\n\n<p>In the <code>.c</code> file that has above issue, I tried to add break-point pair to the <strong>beginning</strong> curly bracket and <strong>ending</strong> bracket of <strong>all</strong> the C functions within that file.</p>\n\n<p>I noticed that for some functions, the break-point pair <strong><em>can be hit</em></strong>. Like below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wyZNx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wyZNx.png\" alt=\"enter image description here\"></a></p>\n\n<p>But then I encountered a function where the break-point at the ending bracket <strong><em>cannot be hit</em></strong>. Like below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MK3FH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MK3FH.png\" alt=\"enter image description here\"></a></p>\n\n<p>And <strong>all the subsequent functions</strong> suffer from the same issue.</p>\n\n<p>I checked this <a href=\"https://stackoverflow.com/questions/15205750/breakpoint-will-not-currently-be-hit-no-executable-code-associated-with-this-li\">thread</a>.</p>\n\n<p>I tried clean rebuild, no use.</p>\n\n<p>I use the <code>/Z7</code> so there's no PDB files. <em>I guess</em> all debug info are embedded in the lib file. </p>\n\n<p>I had <code>/Od</code> so <em>I guess</em> the optimization is not in my way.</p>\n\n<p>Then what could be wrong?</p>\n\n<p>Could any one shed some light? Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1540384811, "post_id": 52969013, "comment_id": 92844652, "body": "Reading C++ answers isn&#39;t that helpful if you&#39;re learning C."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 1597336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6caaab36aba744826a63d01260acf399?s=128&d=identicon&r=PG", "display_name": "beastboy", "link": "https://stackoverflow.com/users/1597336/beastboy"}, "edited": false, "score": 0, "creation_date": 1540384453, "post_id": 52969088, "comment_id": 92844399, "body": "Why i am getting different result in both the codes int y = 40 , is also like assigning a new value to variable y again."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 153, "user_id": 1597336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6caaab36aba744826a63d01260acf399?s=128&d=identicon&r=PG", "display_name": "beastboy", "link": "https://stackoverflow.com/users/1597336/beastboy"}, "edited": false, "score": 0, "creation_date": 1540384620, "post_id": 52969088, "comment_id": 92844525, "body": "Like I said, you&#39;re simply assigning to <code>y</code>; you&#39;re just changing its value. There&#39;s no new variable. That&#39;s why you see the change in the outer <code>printf</code>."}, {"owner": {"reputation": 153, "user_id": 1597336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6caaab36aba744826a63d01260acf399?s=128&d=identicon&r=PG", "display_name": "beastboy", "link": "https://stackoverflow.com/users/1597336/beastboy"}, "edited": false, "score": 0, "creation_date": 1540384801, "post_id": 52969088, "comment_id": 92844643, "body": "If int y is just a declaration then why as per <a href=\"https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration\" title=\"what is the difference between a definition and a declaration\">stackoverflow.com/questions/1410563/&hellip;</a> int y; is a definition and not declaration"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1540384839, "post_id": 52969088, "comment_id": 92844673, "body": "It would be better to use word <i>definition</i> rather than <i>declaration</i> when speaking of local variables. It&#39;s impossible <i>declare</i> local variable without also <i>defining</i> it."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": false, "score": 2, "last_activity_date": 1540384463, "last_edit_date": 1540384463, "creation_date": 1540384359, "answer_id": 52969088, "question_id": 52969013, "link": "https://stackoverflow.com/questions/52969013/is-declaration-of-variable-in-c-limited-to-extern-keyword-alone-vs-definition/52969088#52969088", "title": "Is Declaration of Variable in C Limited to Extern Keyword Alone Vs Definition", "body": "<pre><code>    { \n        // y is declared again, so outer block y is not accessible \n        // in this block \n        y = 40; \n</code></pre>\n\n<p>Your comment is wrong.  This is not <em>declaring</em> <code>y</code> again. It's simply assigning to it.</p>\n\n<p>It should instead say:</p>\n\n<pre><code>// This changes the value of y in the outer block\n</code></pre>\n\n<blockquote>\n  <p>does this mean by writing data type we reserved a new memory space and created a new variable</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<ul>\n<li><code>int y</code> is a declaration of a new variable.</li>\n<li><code>int y = 40</code> is a declaration <em>and</em> initialization.</li>\n<li><code>y = 40</code> is an assignment to an <em>existing</em> variable.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 1597336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6caaab36aba744826a63d01260acf399?s=128&d=identicon&r=PG", "display_name": "beastboy", "link": "https://stackoverflow.com/users/1597336/beastboy"}, "edited": false, "score": 0, "creation_date": 1540440363, "post_id": 52970262, "comment_id": 92868519, "body": "Very Thanks Tau for the nice explanation.. have one more scenario , what if i declare and initializes int y = 5  outside the main , it will be like a global then"}, {"owner": {"reputation": 153, "user_id": 1597336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6caaab36aba744826a63d01260acf399?s=128&d=identicon&r=PG", "display_name": "beastboy", "link": "https://stackoverflow.com/users/1597336/beastboy"}, "edited": false, "score": 0, "creation_date": 1540440650, "post_id": 52970262, "comment_id": 92868589, "body": "`     int y=5;     int main()      {      {          int x = 10;         int y = 20;          {              printf(&quot;x = %d, y = %d\\n&quot;, x, y);              {                  int y;                   x++;                  y++;                     printf(&quot;x = %d, y = %d\\n&quot;, x, y);              }              printf(&quot;x = %d, y = %d\\n&quot;, x, y);          }      }      return 0;      }  `     I am getting the below result `         x = 10, y = 20     x = 11, y = 32765     <b>x</b> = 11, y = 20 `"}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "reply_to_user": {"reputation": 153, "user_id": 1597336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6caaab36aba744826a63d01260acf399?s=128&d=identicon&r=PG", "display_name": "beastboy", "link": "https://stackoverflow.com/users/1597336/beastboy"}, "edited": false, "score": 0, "creation_date": 1540473518, "post_id": 52970262, "comment_id": 92885723, "body": "@beastboy make sure to give the inner <code>y</code> a value before you use it.  otherwise, you&#39;ll get <b>Undefined Behaviour</b> since the inner <code>y</code> will have garbage data in it before you use it."}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "reply_to_user": {"reputation": 153, "user_id": 1597336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6caaab36aba744826a63d01260acf399?s=128&d=identicon&r=PG", "display_name": "beastboy", "link": "https://stackoverflow.com/users/1597336/beastboy"}, "edited": false, "score": 0, "creation_date": 1540473553, "post_id": 52970262, "comment_id": 92885742, "body": "and yes, if you declare and instantiate <code>y</code> outside of <code>main()</code>, then it will be global."}], "tags": [], "owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "is_accepted": false, "score": 1, "last_activity_date": 1540387711, "creation_date": 1540387711, "answer_id": 52970262, "question_id": 52969013, "link": "https://stackoverflow.com/questions/52969013/is-declaration-of-variable-in-c-limited-to-extern-keyword-alone-vs-definition/52970262#52970262", "title": "Is Declaration of Variable in C Limited to Extern Keyword Alone Vs Definition", "body": "<p><code>extern int y;</code> tells the compiler that <code>y</code> may be declared in another file that is linked to this program, be it library, header file, et cetera, and that if the compiler finds that global variable called <code>y</code>, then it should use its memory address for the <code>y</code> declared in this file.  I.e.:</p>\n\n<pre><code>//Look for a global variable called \"y\" in the included files\n//If it is found, use its memory address\nextern int y;\n</code></pre>\n\n<p><strong>Now, for your first code example...</strong></p>\n\n<p>First, you declare and instantiate two variables, <code>x</code> and <code>y</code>.</p>\n\n<pre><code>int x = 10;\nint y = 20;\n</code></pre>\n\n<p>Then you print them, resulting in <code>x = 10, y = 20</code> being printed.  This makes sense, since <code>x</code> is 10 and <code>y</code> is 20.</p>\n\n<p>Then, you create a new scope using curly brackets and declare a new variable called <code>y</code>.  Since this variable has the same name as a variable in a scope higher than it, it <strong>hides the outer variable called</strong> <code>y</code> until this scope is exited.</p>\n\n<pre><code>{\n    int y = 40;\n</code></pre>\n\n<p>Any changes to <em>this</em> <code>y</code> will not affect the outer <code>y</code>, and the outer <code>y</code> cannot be accessed until the scope of <em>this</em> <code>y</code> has been exited.</p>\n\n<p>Then you increment <code>x</code> and <code>y</code>, and then print the result.  <code>x = 11, y = 41</code> is printed due to the above behaviour.</p>\n\n<p>After printing the above string, the code exits the current scope.  Because of this, the outer <code>y</code> is no longer hidden, and it can now be accessed.</p>\n\n<p>Finally, you print <code>x</code> and <code>y</code> again.  <code>x</code> is 11 because it was incremented earlier, but the outer <code>y</code> <em>was not incremented</em>, thus <code>x = 11, y = 20</code> is printed.</p>\n\n<hr>\n\n<p>Replacing <code>int y = 40</code> with <code>y = 40</code> like you did in your second code example results in only one <code>y</code> variable being declared and instantiated.  Therefore, <code>y</code> ends up being 41 at the third <code>printf()</code> statement.</p>\n"}], "owner": {"reputation": 153, "user_id": 1597336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6caaab36aba744826a63d01260acf399?s=128&d=identicon&r=PG", "display_name": "beastboy", "link": "https://stackoverflow.com/users/1597336/beastboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1540387711, "creation_date": 1540384148, "last_edit_date": 1540384292, "question_id": 52969013, "link": "https://stackoverflow.com/questions/52969013/is-declaration-of-variable-in-c-limited-to-extern-keyword-alone-vs-definition", "title": "Is Declaration of Variable in C Limited to Extern Keyword Alone Vs Definition", "body": "<p>I had a doubt that there is something i am missing seeking for the difference between Declaration and Definition and i found the link\n<a href=\"https://www.geeksforgeeks.org/commonly-asked-c-programming-interview-questions-set-1/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/commonly-asked-c-programming-interview-questions-set-1/</a>\nIts stated here that</p>\n\n<pre><code>// This is only declaration. y is not allocated memory by this statement \n  extern int y; \n\n  // This is both declaration and definition, memory to x is allocated by this statement.\n  int x;\n</code></pre>\n\n<p>Now if I go by the below piece of code </p>\n\n<pre><code>int main() \n{ \n{ \n    int x = 10;\n    int y = 20; \n    { \n        // The outer block contains declaration of x and y, so \n        // following statement is valid and prints 10 and 20 \n        printf(\"x = %d, y = %d\\n\", x, y); \n        { \n            // y is declared again, so outer block y is not accessible \n            // in this block \n            int y = 40; \n\n            x++; // Changes the outer block variable x to 11 \n            y++; // Changes this block's variable y to 41 \n\n            printf(\"x = %d, y = %d\\n\", x, y); \n        } \n\n        // This statement accesses only outer block's variables \n        printf(\"x = %d, y = %d\\n\", x, y); \n    } \n} \nreturn 0; \n} \n</code></pre>\n\n<p><strong>I will get the below result</strong></p>\n\n<pre><code>x = 10, y = 20\nx = 11, y = 41\nx = 11, y = 20\n</code></pre>\n\n<p>If i modify just the <strong>int y = 40</strong> in the innermost block to <strong>y = 40</strong>\nthen the code will look like</p>\n\n<p>//int y;</p>\n\n<pre><code>int main() \n{ \n{ \n    int x = 10;\n    int y = 20; \n    { \n        // The outer block contains declaration of x and y, so \n        // following statement is valid and prints 10 and 20 \n        printf(\"x = %d, y = %d\\n\", x, y); \n        { \n            // y is declared again, so outer block y is not accessible \n            // in this block \n            y = 40; \n\n            x++; // Changes the outer block variable x to 11 \n            y++; // Changes this block's variable y to 41 \n\n            printf(\"x = %d, y = %d\\n\", x, y); \n        } \n\n        // This statement accesses only outer block's variables \n        printf(\"x = %d, y = %d\\n\", x, y); \n    }\n} \nreturn 0; \n} \n</code></pre>\n\n<p>and the result will be</p>\n\n<pre><code>x = 10, y = 20\nx = 11, y = 41\nx = 11, y = 41\n</code></pre>\n\n<p>My friend told me this is because we are declaring a new <strong>y</strong> which is local to the block in the first code and that is not in the second case , i didn't get why as we are only writing the data type in front of the variable a second time , does this mean by writing data type we reserved a new memory space and created a new variable , please explain .</p>\n\n<p>If i go by another article on Stackoverflow on the Link\n<a href=\"https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration\">What is the difference between a definition and a declaration?</a></p>\n\n<p>i see that whenever we say that we are Declaring a Variable, the variable is preceded by the extern keyword and i am speaking strictly related to C and not any other language.</p>\n\n<p>So can we generalize to Declaration of variable as preceded by extern Keyword.</p>\n\n<p>I understand my English might be bad and difficult for you to understand , please bear with me.</p>\n"}, {"tags": ["c", "memory-leaks", "pthreads", "valgrind"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 8006233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wvxaO.png?s=128&g=1", "display_name": "CyberFox", "link": "https://stackoverflow.com/users/8006233/cyberfox"}, "edited": false, "score": 0, "creation_date": 1540403609, "post_id": 52969469, "comment_id": 92856882, "body": "But why doesn&#39;t this crash ? It makes no sense to me."}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "reply_to_user": {"reputation": 303, "user_id": 8006233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wvxaO.png?s=128&g=1", "display_name": "CyberFox", "link": "https://stackoverflow.com/users/8006233/cyberfox"}, "edited": false, "score": 1, "creation_date": 1540649532, "post_id": 52969469, "comment_id": 92947612, "body": "It\u2019s undefined behaviour. Anything could happen. It could crash or you might be lucky and see no problem."}], "tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1540385380, "creation_date": 1540385380, "answer_id": 52969469, "question_id": 52968999, "link": "https://stackoverflow.com/questions/52968999/memory-leaks-and-pointers/52969469#52969469", "title": "Memory leaks and pointers", "body": "<p>Fix your <code>invalid write</code>s before you look for leaks.</p>\n\n<p>Firstly, in <code>createPartitions</code> you allocate memory for <code>partitions</code>, but only enough to store a single <code>wrapper</code></p>\n\n<pre><code>wrapper *partitions = (wrapper *)malloc(sizeof(wrapper));\n</code></pre>\n\n<p>You then have a loop the runs <code>numberOfThreads</code> times (3) and copies into the above array. The 2nd and later writes are outside the bounds of the array, and are causing an <code>invalid write</code>.</p>\n\n<p>You need to allocate more memory for <code>partitions</code>, e.g.,</p>\n\n<pre><code>wrapper *partitions = (wrapper *)malloc(numberOfThreads*sizeof(wrapper));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 8006233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wvxaO.png?s=128&g=1", "display_name": "CyberFox", "link": "https://stackoverflow.com/users/8006233/cyberfox"}, "edited": false, "score": 0, "creation_date": 1540403884, "post_id": 52971948, "comment_id": 92857047, "body": "I really need to pay more attention to allocating stuff. Thank you very much sir!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1540392489, "creation_date": 1540392489, "answer_id": 52971948, "question_id": 52968999, "link": "https://stackoverflow.com/questions/52968999/memory-leaks-and-pointers/52971948#52971948", "title": "Memory leaks and pointers", "body": "<p>There are some memory leaks here, for sure, but the more pressing problem you have is multiple instances of reading / writing past the end of allocated memory and double-frees.</p>\n\n<p>Let's take these one at a time starting from the top:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==4725== Invalid write of size 8\n==4725==    at 0x109505: createPartitions (counter.c:215)\n==4725==    by 0x109550: createThreads (counter.c:238)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61698 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10948F: createPartitions (counter.c:195)\n==4725==    by 0x109550: createThreads (counter.c:238)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n</code></pre>\n\n<p>This is complaining about writing past what was allocated.  Here's the code that does both the allocation and the invalid access:</p>\n\n<pre><code>wrapper *partitions = (wrapper *)malloc(sizeof(wrapper));\n\nfor (int i = 0; i &lt; numberOfThreads; i++)\n{\n    if (i &lt; numberOfThreads - remainder)\n    {\n        partitions[i] = createNormalPartition(last, quotient);\n        last += quotient;\n        continue;\n    }\n    wrapper temp = createOverloadedPartition(last, quotient);\n\n    partitions[i] = temp;\n    last += quotient + 1;\n}\n</code></pre>\n\n<p>You're allocating space for a <em>single</em> instance of <code>wrapper</code>, but writing to it as if it were an array of <code>numberOfThreads</code> instances.  You need to allocate space for this many instances:</p>\n\n<pre><code>wrapper *partitions = malloc(sizeof(wrapper) * numberOfThreads);\n</code></pre>\n\n<p>Next one:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==4725== Invalid write of size 8\n==4725==    at 0x48812C8: pthread_create@@GLIBC_2.2.5 (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x1095A8: createThreads (counter.c:248)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61648 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10972A: run (counter.c:305)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n==4725== Invalid read of size 8\n==4725==    at 0x1095BD: createThreads (counter.c:249)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61648 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10972A: run (counter.c:305)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n</code></pre>\n\n<p>Another invalid write along with an invalid read.  Here's the allocation in <code>run</code>:</p>\n\n<pre><code>pthread_t *threads = (pthread_t *)malloc(sizeof(pthread_t *));\n</code></pre>\n\n<p>And the read / write in <code>createThreads</code>:</p>\n\n<pre><code>for (int i = 0; i &lt; numberOfThreads; i++)\n{\n    pthread_create(&amp;threads[i], NULL, sum_runner, (void *)&amp;partitions[i]);\n    printf(\"    Created thread %lu\\n\", threads[i]);\n}\n</code></pre>\n\n<p>As before, you're allocating space for a <em>single</em> instance, not an array.  Also, you're allocating space for a <code>pthread_t *</code> instead of a <code>pthread_t</code>, which is likely to be too small.  Change the allocation to make space for an array, and use the object type, not the pointer type:</p>\n\n<pre><code>pthread_t *threads = malloc(sizeof(pthread_t) * numberOfThreads);\n</code></pre>\n\n<p>Next:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==4725== Invalid read of size 4\n==4725==    at 0x1091F1: sum_runner (counter.c:52)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Address 0x4a61698 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10948F: createPartitions (counter.c:195)\n==4725==    by 0x109550: createThreads (counter.c:238)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n==4725== Invalid read of size 4\n==4725==    at 0x1091FA: sum_runner (counter.c:53)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Address 0x4a6169c is 4 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10948F: createPartitions (counter.c:195)\n==4725==    by 0x109550: createThreads (counter.c:238)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n</code></pre>\n\n<p>A pair of invalid reads originating from the same allocation and access in adajent lines.  This is the same invalid allocation from the first message, which we've already addressed.  Next one:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==4725== Thread 1:\n==4725== Invalid read of size 8\n==4725==    at 0x10966B: startThreads (counter.c:278)\n==4725==    by 0x109746: run (counter.c:318)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61648 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10972A: run (counter.c:305)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n    Starting thread 98969344\n==4725== Invalid read of size 8\n==4725==    at 0x109696: startThreads (counter.c:279)\n==4725==    by 0x109746: run (counter.c:318)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61648 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10972A: run (counter.c:305)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n</code></pre>\n\n<p>A pair of invalid reads pointing back to the same bad allocation from the second message.  This was also already addressed.  Next:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==4725== Invalid write of size 4\n==4725==    at 0x109777: run (counter.c:331)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a62508 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x109768: run (counter.c:330)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n==4725== Thread 2:\n==4725== Invalid read of size 4\n==4725==    at 0x10926E: results_sum_runner (counter.c:87)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Address 0x4a62508 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x109768: run (counter.c:330)\n==4725==    by 0x10985C: main (counter.c:367)\n</code></pre>\n\n<p>An invalid read and write originating from the same allocation.  Here's the allocation in <code>run</code>:</p>\n\n<pre><code>resultsWrapper *resultData = (resultsWrapper *)malloc(sizeof(resultsWrapper *));\n</code></pre>\n\n<p>The read in <code>results_sum_runner</code>:</p>\n\n<pre><code>resultsWrapper *results = (resultsWrapper *)args;\nint size = results-&gt;size;\n</code></pre>\n\n<p>And the write in <code>run</code>:</p>\n\n<pre><code>resultData-&gt;size = numberOfThreads;\n</code></pre>\n\n<p>Here, you're allocating space for a <em>pointer</em> to <code>resultsWrapper</code>, not an <em>instance</em> of <code>resultsWrapper</code>.  Fix the allocation as follows:</p>\n\n<pre><code>resultsWrapper *resultData = malloc(sizeof(resultsWrapper));\n</code></pre>\n\n<p>Next one:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==4725== Invalid free() / delete / delete[] / realloc()\n==4725==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==4725==    by 0x1097CE: run (counter.c:346)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a62500 is 0 bytes inside a block of size 8 free'd\n==4725==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==4725==    by 0x1092DB: results_sum_runner (counter.c:101)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Block was alloc'd at\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x109768: run (counter.c:330)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n</code></pre>\n\n<p>Here's double free.  The allocation and second <code>free</code> are in <code>run</code>:</p>\n\n<pre><code>resultsWrapper *resultData = (resultsWrapper *)malloc(sizeof(resultsWrapper *));\nresultData-&gt;size = numberOfThreads;\nresultData-&gt;array = results;\n\npthread_create(&amp;summingThread, NULL, results_sum_runner, (void *)resultData);\npthread_join(summingThread, (void *)&amp;finalResult);\n\nfree(threads);\nfree(resultData);\nfree(results);\n</code></pre>\n\n<p>And here's the first <code>free</code> in <code>results_sum_runner</code>:</p>\n\n<pre><code>void *results_sum_runner(void *args)\n{\n    resultsWrapper *results = (resultsWrapper *)args;\n    int size = results-&gt;size;\n    int *array = results-&gt;array;\n    int *sum = (int *)malloc(sizeof(int *));\n    *sum = 0;\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        *sum += array[i];\n    }\n\n    free(results);\n    free(array);\n\n    pthread_exit((void *)sum);\n}\n</code></pre>\n\n<p>Here you're allocating memory for resultData and passing it to the thread function <code>results_sum_runner</code>.  That thread frees the memory, but then so does the calling thread afterward.  Remove either <code>free(resultData)</code> in <code>run</code> or <code>free(results)</code> in <code>results_sum_runner</code>.</p>\n\n<p>Last one:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==4725== Invalid free() / delete / delete[] / realloc()\n==4725==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==4725==    by 0x1097DA: run (counter.c:347)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61b20 is 0 bytes inside a block of size 24 free'd\n==4725==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==4725==    by 0x1092E7: results_sum_runner (counter.c:102)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Block was alloc'd at\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x109638: startThreads (counter.c:269)\n==4725==    by 0x109746: run (counter.c:318)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n</code></pre>\n\n<p>Another double free similar to the last one.  <code>free(results)</code> in <code>run</code> and <code>free(array)</code> in <code>results_sum_runner</code> refer to the same memory, so get rid of one of them.</p>\n\n<p>Now if we compile with these changes and run again under valgrind, we get one more issue:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==24305== Invalid read of size 4\n==24305==    at 0x40090E: sum_runner (x1.c:52)\n==24305==    by 0x4E416B9: start_thread (pthread_create.c:333)\n==24305==  Address 0x54216a8 is 8 bytes inside a block of size 24 free'd\n==24305==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==24305==    by 0x400CEF: createThreads (x1.c:251)\n==24305==    by 0x400E3C: run (x1.c:312)\n==24305==    by 0x400F5C: main (x1.c:367)\n==24305==  Block was alloc'd at\n==24305==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==24305==    by 0x400B98: createPartitions (x1.c:195)\n==24305==    by 0x400C57: createThreads (x1.c:238)\n==24305==    by 0x400E3C: run (x1.c:312)\n==24305==    by 0x400F5C: main (x1.c:367)\n==24305== \n==24305== Invalid read of size 4\n==24305==    at 0x400917: sum_runner (x1.c:53)\n==24305==    by 0x4E416B9: start_thread (pthread_create.c:333)\n==24305==  Address 0x54216ac is 12 bytes inside a block of size 24 free'd\n==24305==    at 0x4C2EDEB: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==24305==    by 0x400CEF: createThreads (x1.c:251)\n==24305==    by 0x400E3C: run (x1.c:312)\n==24305==    by 0x400F5C: main (x1.c:367)\n==24305==  Block was alloc'd at\n==24305==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==24305==    by 0x400B98: createPartitions (x1.c:195)\n==24305==    by 0x400C57: createThreads (x1.c:238)\n==24305==    by 0x400E3C: run (x1.c:312)\n==24305==    by 0x400F5C: main (x1.c:367)\n==24305== \n</code></pre>\n\n<p>Here we have a pair of reads from an already free'ed block of memory.  The reads happen in <code>sum_runner</code>:</p>\n\n<pre><code>wrapper *data = (wrapper *)args;\nint currentIndex = data-&gt;startIndex;\nint endIndex = data-&gt;endIndex;\n</code></pre>\n\n<p>And the free in <code>createThreads</code>:</p>\n\n<pre><code>for (int i = 0; i &lt; numberOfThreads; i++)\n{\n    pthread_create(&amp;threads[i], NULL, sum_runner, (void *)&amp;partitions[i]);\n    printf(\"    Created thread %lu\\n\", threads[i]);\n}\nfree(partitions);\n</code></pre>\n\n<p>Based on your comments elsewhere in the code, you seems to be under the impression that calling <code>pthread_join</code> starts a thread.  This is not the case.  Calling <code>pthread_create</code> actually starts the thread, while <code>pthread_join</code> tells the calling thread to wait for the given thread to finish.  So you end up freeing this memory before the thread has a chance to use it.</p>\n\n<p>So remove this <code>free</code> and change <code>createThreads</code> to return this pointer.  Then in <code>run</code> (where <code>createThreads</code> is called from) and do the free here after the call to <code>startThreads</code> (which should really be renamed to something like <code>waitForThreadsToFinish</code>):</p>\n\n<pre><code>wrapper *createThreads(pthread_t *threads)\n{\n    wrapper *partitions = createPartitions();\n\n    printf(\"Creating threads......\\n\");\n\n    for (int i = 0; i &lt; numberOfThreads; i++)\n    {\n        pthread_create(&amp;threads[i], NULL, sum_runner, (void *)&amp;partitions[i]);\n        printf(\"    Created thread %lu\\n\", threads[i]);\n    }\n    // remove free\n    printf(\"Finished creating threads......\\n\");\n    return partitions;\n}\n\n...\n\nint run() \n{\n    ...\n\n    wrapper *partitions = createThreads(threads);\n    results = startThreads(threads);\n    free(partitions);\n</code></pre>\n\n<p>And that should take care of the invalid accesses.</p>\n\n<p>There are also a few places where you allocate space for an <code>int *</code> (or an array of <code>int *</code>) where you should be allocating space for one or more <code>int</code>.  It doesn't cause a problem on your system because a <code>int *</code> is at least as big as a <code>int</code>, but you should still use the correct type regardless.</p>\n\n<p>Also notice that my proposed changes removed the cast on the return value of <code>malloc</code>.  See <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a> for more details.</p>\n\n<p>There are still a few memory leaks you can find if you pass <code>--leak-check=full</code> to valgrind but I'll leave that as a exercise to the reader.</p>\n"}], "owner": {"reputation": 303, "user_id": 8006233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wvxaO.png?s=128&g=1", "display_name": "CyberFox", "link": "https://stackoverflow.com/users/8006233/cyberfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 1, "accepted_answer_id": 52971948, "answer_count": 2, "score": 3, "last_activity_date": 1540392647, "creation_date": 1540384091, "last_edit_date": 1540392647, "question_id": 52968999, "link": "https://stackoverflow.com/questions/52968999/memory-leaks-and-pointers", "title": "Memory leaks and pointers", "body": "<p>I have implemented a program which adds up the elements of an array using threads. Each thread adds the elements of a portion of the array and puts it inside an array. Finally, another thread sums those up. </p>\n\n<p>This programs seems to work, BUT I have got a ton of memory leaks I cannot seem to be able to fix. I am using valgrind to detected those memory leaks. My bet is that my pointer knowledge is missing some key features.</p>\n\n<p>I have also tried to free struct just before the thread returns, but that dumps the core. I have tried to free wherever I allocated some memory, but valgrind reports more allocations than frees. </p>\n\n<p>Now, for some code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n#define MAX_RAND 100\n/**\n * @brief global variables shared by threads\n *      array -&gt; the array of values\n *      size-&gt; the size of the array\n *      numberOfThreads -&gt; the number of threads used to compute the sum\n * \n */\nint *array;\nint size;\nint numberOfThreads = 3;\n\n/**\n * @brief each thread works on  disjoint segments of an array(i.e. two or more threads shall never work on the same segment). This\n * encapsulates the start and end indexes used by a thread.\n * \n */\ntypedef struct\n{\n    int startIndex;\n    int endIndex;\n} wrapper;\n\n/**\n * @brief this is used by the extra thread and contains the array of sums computed by the previous threads, along the size of the results\n * array\n * \n */\ntypedef struct\n{\n    int *array;\n    int size;\n} resultsWrapper;\n\n/**\n * @brief this computes the sum of a disjoint segment of the shared array\n * \n * @param args \n * @return void* \n */\nvoid *sum_runner(void *args)\n{\n    /**\n     * @brief cast the argument and retrieve the indexes\n     * \n     */\n    wrapper *data = (wrapper *)args;\n    int currentIndex = data-&gt;startIndex;\n    int endIndex = data-&gt;endIndex;\n    int *sum = (int *)malloc(sizeof(int *));\n    *sum = 0;\n\n    /**\n     * @brief iterate that segment and compute the sum\n     * \n     */\n    while (currentIndex &lt; endIndex)\n    {\n        *sum += array[currentIndex];\n        currentIndex++;\n    }\n\n    /**\n     * @brief return the sum\n     * \n     */\n    pthread_exit((void *)sum);\n}\n\n/**\n * @brief this is used by the an extra thread to sum up the elements computed by the previouse threads\n * \n * @param args \n * @return void* \n */\nvoid *results_sum_runner(void *args)\n{\n    /**\n     * @brief cast the arguments and retrieve the array and its size\n     * \n     */\n    resultsWrapper *results = (resultsWrapper *)args;\n    int size = results-&gt;size;\n    int *array = results-&gt;array;\n    int *sum = (int *)malloc(sizeof(int *));\n    *sum = 0;\n\n    /**\n     * @brief sum its elements up\n     * \n     */\n    for (int i = 0; i &lt; size; i++)\n    {\n        *sum += array[i];\n    }\n\n    free(results);\n    free(array);\n\n    /**\n     * @brief return the result\n     * \n     */\n    pthread_exit((void *)sum);\n}\n\n/**\n * @brief populates the given vector with random numbers\n * \n * @param array the target array\n * @param size the size of the array\n */\nvoid populateWithRand(int *array, int size)\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        array[i] = rand() % MAX_RAND;\n    }\n    printf(\"Finished populating vector\\n\");\n}\n\n/**\n * @brief this prints a given array\n * \n * @param array the array to be printed\n * @param size the size of the array\n */\nvoid printArray(int *array, int size)\n{\n    printf(\"Array: \\n\");\n    for (int i = 0; i &lt; size; i++)\n    {\n        printf(\"%d \", array[i]);\n    }\n    printf(\"\\n\");\n}\n\n/**\n * @brief this creates a normal partition, i.e. a partition containing size/threads elements\n * \n * @param index the current index in array  \n * @param quotient the quotient\n * @return wrapper returns a new \"pair\"\n */\nwrapper createNormalPartition(int index, int quotient)\n{\n    wrapper normalPartition;\n    normalPartition.startIndex = index;\n    normalPartition.endIndex = index + quotient - 1;\n    printf(\"    Created normal partition (%d, %d)\\n\", normalPartition.startIndex, normalPartition.endIndex);\n    return normalPartition;\n}\n\n/**\n * @brief this creates an overloaded partition, i.e. a partition containing size/threads+1 elements. We use overloaded partitions to spread\n * the load amongst r threads, where r is size%threads\n * \n * @param index the current index in the array\n * @param quotient the quotient\n * @return wrapper returns a new \"overloaded pair\"\n */\nwrapper createOverloadedPartition(int index, int quotient)\n{\n    wrapper normalPartition;\n    normalPartition.startIndex = index;\n    normalPartition.endIndex = index + quotient;\n    printf(\"    Created normal partition (%d, %d)\\n\", normalPartition.startIndex, normalPartition.endIndex);\n    return normalPartition;\n}\n\n/**\n * @brief core function. Splits the entire array by index to each thread\n * \n * @return wrapper* returns an array of partitions to be used by threads\n */\nwrapper *createPartitions()\n{\n    printf(\"Creating partitions......\\n\");\n    /**\n     * @brief compute the quotient, the remainder and initialize\n     * \n     */\n    int quotient = size / numberOfThreads;\n    int remainder = size % numberOfThreads;\n    int last = 0;\n\n    /**\n     * @brief create the array of partitions\n     * \n     */\n    wrapper *partitions = (wrapper *)malloc(sizeof(wrapper));\n\n    /**\n     * @brief populate the previously created array. If the we have a remainder, the last r threads will have an extra computation to perform.\n     * \n     */\n    for (int i = 0; i &lt; numberOfThreads; i++)\n    {\n        /**\n             * @brief check the current index and create the appropriate partitions\n             * \n             */\n        if (i &lt; numberOfThreads - remainder)\n        {\n            partitions[i] = createNormalPartition(last, quotient);\n            last += quotient;\n            continue;\n        }\n        wrapper temp = createOverloadedPartition(last, quotient);\n\n        partitions[i] = temp;\n        last += quotient + 1;\n    }\n    printf(\"Finished creating partitions......\\n\");\n\n    /**\n     * @brief return the previously-populated partitions\n     * \n     */\n    return partitions;\n}\n\n/**\n * @brief this is a utility function. This creates the threads and assigns them the working partition\n * \n * @param threads the array of threads\n */\nvoid createThreads(pthread_t *threads)\n{\n    /**\n     * @brief create a dummy wrapper to store the pairs at every step\n     * \n     */\n    wrapper *partitions = createPartitions();\n\n    printf(\"Creating threads......\\n\");\n\n    /**\n     * @brief create some threads\n     * \n     */\n    for (int i = 0; i &lt; numberOfThreads; i++)\n    {\n        pthread_create(&amp;threads[i], NULL, sum_runner, (void *)&amp;partitions[i]);\n        printf(\"    Created thread %lu\\n\", threads[i]);\n    }\n    free(partitions);\n    printf(\"Finished creating threads......\\n\");\n}\n\n/**\n * @brief this is a utility function. This performs join in the threads and stores the sums computed\n * \n * @param threads the array of threads\n * @return int* the array of computed sums\n */\nint *startThreads(pthread_t *threads)\n{\n    printf(\"Starting threads...\\n\");\n    /**\n     * @brief initialize local variables\n     * \n     */\n    int *temp;\n    int *results = (int *)malloc(sizeof(int *) * numberOfThreads);\n\n    /**\n     * @brief performs join on threads and store the sums computed\n     * \n     */\n    for (int i = 0; i &lt; numberOfThreads; i++)\n    {\n        temp = (int *)malloc(sizeof(temp));\n        printf(\"    Starting thread %lu\\n\", threads[i]);\n        pthread_join(threads[i], (void **)&amp;temp);\n        results[i] = *temp;\n        free(temp);\n    }\n\n    printf(\"Exiting...\\n\");\n    /**\n     * @brief return the array of computed sums\n     * \n     */\n    return results;\n}\n\n/**\n * @brief this function calls the utility functions and computes the final sum using a separate thread\n * \n * @return int \n */\nint run()\n{\n    /**\n     * @brief create the threads ids array\n     * \n     */\n    int *results;\n    int *finalResult;\n    pthread_t *threads = (pthread_t *)malloc(sizeof(pthread_t *));\n    pthread_t summingThread;\n\n    /**\n     * @brief pass the threads id's to create them\n     * \n     */\n    createThreads(threads);\n\n    /**\n     * @brief get the sums\n     * \n     */\n    results = startThreads(threads);\n\n    /**\n     * @brief print the array \n     * \n     */\n    printArray(results, numberOfThreads);\n\n    /**\n     * @brief create a new thread and let him compute the final sum\n     * \n     */\n    resultsWrapper *resultData = (resultsWrapper *)malloc(sizeof(resultsWrapper *));\n    resultData-&gt;size = numberOfThreads;\n    resultData-&gt;array = results;\n\n    /**\n     * @brief add up the sums computed by the threads\n     * \n     */\n    pthread_create(&amp;summingThread, NULL, results_sum_runner, (void *)resultData);\n    pthread_join(summingThread, (void *)&amp;finalResult);\n\n    /**\n     * @brief return the sum\n     * \n     */\n    free(threads);\n    free(resultData);\n    free(results);\n    return *finalResult;\n}\n\n/**\n * @brief this is the entry point\n * \n * @return int success\n */\nint main()\n{\n    /**\n     * @brief initialize variables, run the program and print the result\n     * \n     */\n    size = 47;\n    array = calloc(sizeof(array), size);\n    populateWithRand(array, size);\n    printArray(array, size);\n    int sum;\n    sum = run();\n    free(array);\n    printf(\"Sum of the array is %d\\n\", sum);\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Finished populating vector\nArray:\n83 86 77 15 93 35 86 92 49 21 62 27 90 59 63 26 40 26 72 36 11 68 67 29 82 30 62 23 67 35 29 2 22 58 69 67 93 56 11 42 29 73 21 19 84 37 98\nCreating partitions......\n    Created normal partition (0, 14)\n    Created normal partition (15, 30)\n    Created normal partition (31, 46)\nFinished creating partitions......\nCreating threads......\n    Created thread 139720910055168\n    Created thread 139720901662464\n    Created thread 139720893269760\nFinished creating threads......\nStarting threads...\n    Starting thread 139720910055168\n    Starting thread 139720901662464\n    Starting thread 139720893269760\nExiting...\nArray:\n875 674 683\nSum of the array is 2232\n</code></pre>\n\n<p>Valgrind's report:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==4725== Memcheck, a memory error detector\n==4725== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.==4725== Using Valgrind-3.14.0.GIT and LibVEX; rerun with -h for copyright info==4725== Command: ./counter\n==4725==Finished populating vector\nArray:\n83 86 77 15 93 35 86 92 49 21 62 27 90 59 63 26 40 26 72 36 11 68 67 29 82 30 62 23 67 35 29 2 22 58 69 67 93 56 11 42 29 73 21 19 84 37 98\nCreating partitions......\n    Created normal partition (0, 14)\n    Created normal partition (15, 30)\n==4725== Invalid write of size 8\n==4725==    at 0x109505: createPartitions (counter.c:215)\n==4725==    by 0x109550: createThreads (counter.c:238)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61698 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10948F: createPartitions (counter.c:195)\n==4725==    by 0x109550: createThreads (counter.c:238)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n    Created normal partition (31, 46)\nFinished creating partitions......\nCreating threads......\n    Created thread 90576640\n==4725== Invalid write of size 8\n==4725==    at 0x48812C8: pthread_create@@GLIBC_2.2.5 (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x1095A8: createThreads (counter.c:248)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61648 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10972A: run (counter.c:305)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n==4725== Invalid read of size 8\n==4725==    at 0x1095BD: createThreads (counter.c:249)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61648 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10972A: run (counter.c:305)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n    Created thread 98969344\n    Created thread 107362048\n==4725== Thread 3:\n==4725== Invalid read of size 4\n==4725==    at 0x1091F1: sum_runner (counter.c:52)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Address 0x4a61698 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10948F: createPartitions (counter.c:195)\n==4725==    by 0x109550: createThreads (counter.c:238)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n==4725== Invalid read of size 4\n==4725==    at 0x1091FA: sum_runner (counter.c:53)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Address 0x4a6169c is 4 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10948F: createPartitions (counter.c:195)\n==4725==    by 0x109550: createThreads (counter.c:238)\n==4725==    by 0x10973A: run (counter.c:312)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\nFinished creating threads......\nStarting threads...\n    Starting thread 90576640\n==4725== Thread 1:\n==4725== Invalid read of size 8\n==4725==    at 0x10966B: startThreads (counter.c:278)\n==4725==    by 0x109746: run (counter.c:318)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61648 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10972A: run (counter.c:305)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n    Starting thread 98969344\n==4725== Invalid read of size 8\n==4725==    at 0x109696: startThreads (counter.c:279)\n==4725==    by 0x109746: run (counter.c:318)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61648 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x10972A: run (counter.c:305)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n    Starting thread 107362048\nExiting...\nArray:\n875 674 683\n==4725== Invalid write of size 4\n==4725==    at 0x109777: run (counter.c:331)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a62508 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x109768: run (counter.c:330)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n==4725== Thread 2:\n==4725== Invalid read of size 4\n==4725==    at 0x10926E: results_sum_runner (counter.c:87)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Address 0x4a62508 is 0 bytes after a block of size 8 alloc'd\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x109768: run (counter.c:330)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n==4725== Thread 1:\n==4725== Invalid free() / delete / delete[] / realloc()\n==4725==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==4725==    by 0x1097CE: run (counter.c:346)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a62500 is 0 bytes inside a block of size 8 free'd\n==4725==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==4725==    by 0x1092DB: results_sum_runner (counter.c:101)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Block was alloc'd at\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x109768: run (counter.c:330)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\n==4725== Invalid free() / delete / delete[] / realloc()\n==4725==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==4725==    by 0x1097DA: run (counter.c:347)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==  Address 0x4a61b20 is 0 bytes inside a block of size 24 free'd\n==4725==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==4725==    by 0x1092E7: results_sum_runner (counter.c:102)\n==4725==    by 0x4880A9C: start_thread (in /usr/lib/libpthread-2.28.so)\n==4725==    by 0x4995B22: clone (in /usr/lib/libc-2.28.so)\n==4725==  Block was alloc'd at\n==4725==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==4725==    by 0x109638: startThreads (counter.c:269)\n==4725==    by 0x109746: run (counter.c:318)\n==4725==    by 0x10985C: main (counter.c:367)\n==4725==\nSum of the array is 2232\n==4725==\n==4725== HEAP SUMMARY:\n==4725==     in use at exit: 1,652 bytes in 8 blocks\n==4725==   total heap usage: 21 allocs, 15 frees, 3,996 bytes allocated\n==4725==\n==4725== LEAK SUMMARY:\n==4725==    definitely lost: 32 bytes in 4 blocks\n==4725==    indirectly lost: 0 bytes in 0 blocks\n==4725==      possibly lost: 0 bytes in 0 blocks\n==4725==    still reachable: 1,620 bytes in 4 blocks\n==4725==         suppressed: 0 bytes in 0 blocks\n==4725== Rerun with --leak-check=full to see details of leaked memory\n==4725==\n==4725== For counts of detected and suppressed errors, rerun with: -v\n==4725== ERROR SUMMARY: 20 errors from 11 contexts (suppressed: 0 from 0)\n</code></pre>\n"}, {"tags": ["php", "c", "php-extension", "php-internals"], "comments": [{"owner": {"reputation": 705, "user_id": 2244274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3390ed56675633d127944a7901f57a79?s=128&d=identicon&r=PG", "display_name": "Jamie_D", "link": "https://stackoverflow.com/users/2244274/jamie-d"}, "edited": false, "score": 0, "creation_date": 1540389400, "post_id": 52968439, "comment_id": 92847962, "body": "[link]<a href=\"http://php.net/manual/en/internals2.variables.arrays.php\" rel=\"nofollow noreferrer\">php.net/manual/en/internals2.variables.arrays.php</a>"}, {"owner": {"reputation": 95639, "user_id": 385378, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b4ec98df44deb80b1576283152670358?s=128&d=identicon&r=PG", "display_name": "NikiC", "link": "https://stackoverflow.com/users/385378/nikic"}, "edited": false, "score": 2, "creation_date": 1540389422, "post_id": 52968439, "comment_id": 92847979, "body": "Is TestUpdateArray declared in arginfo to accept the array by reference? There are two things you need to do: 1. ZVAL_DEREF(zArr) to get to the value of the reference and then 2. SEPARATE_ARRAY(zArr) to make sure the array is not shared."}, {"owner": {"reputation": 43, "user_id": 2120227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H6pRk.jpg?s=128&g=1", "display_name": "Carlo Pastorino", "link": "https://stackoverflow.com/users/2120227/carlo-pastorino"}, "reply_to_user": {"reputation": 95639, "user_id": 385378, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b4ec98df44deb80b1576283152670358?s=128&d=identicon&r=PG", "display_name": "NikiC", "link": "https://stackoverflow.com/users/385378/nikic"}, "edited": false, "score": 0, "creation_date": 1540394557, "post_id": 52968439, "comment_id": 92851685, "body": "@NikiC thank you for your answer. I&#39;ve updated the question and, thanks to your suggestion I was able to achieve what I wanted, hoping I did it correctly. With that said I&#39;m interested in understanding: 1. How was that working on 5.4? 2. What was the difference between passing $arr = []; and $arr = [&#39;test&#39;]. 3. With the new arginfo and PHP 7.3, could I use &#39;z/&#39; in the zend_parse_parameters to achieve the same behavior?"}, {"owner": {"reputation": 95639, "user_id": 385378, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b4ec98df44deb80b1576283152670358?s=128&d=identicon&r=PG", "display_name": "NikiC", "link": "https://stackoverflow.com/users/385378/nikic"}, "edited": false, "score": 1, "creation_date": 1540544932, "post_id": 52968439, "comment_id": 92914340, "body": "1. Through luck it worked in the cases you tested. Arguments have to be accepted by reference if you want to modify them in the function. 2. There is a shared [] array living in RODATA, which is likely mapped as non-writable on your system, causing a segfault. I&#39;d expect the other case to assert if you use a debug build. 3. Yes, that would work as well. I&#39;d avoid it in the interest of forward compatibility."}], "owner": {"reputation": 43, "user_id": 2120227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H6pRk.jpg?s=128&g=1", "display_name": "Carlo Pastorino", "link": "https://stackoverflow.com/users/2120227/carlo-pastorino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540394916, "creation_date": 1540382292, "last_edit_date": 1540394916, "question_id": 52968439, "link": "https://stackoverflow.com/questions/52968439/what-is-the-proper-way-to-add-elements-to-an-empty-array-passed-to-an-extension", "title": "What is the proper way to add elements to an empty array passed to an extension function in PHP 7.3?", "body": "<p>I'm trying to port an old PHP extension of mine working for PHP 5.4 to PHP 7.3 (7.3.0 RC3 more precisely).</p>\n\n<p>I'm building the extension using Visual Studio 2017 on Windows 10 Pro x64, building both for x64 and x86 architectures.</p>\n\n<p>The extension provides a simple function (among others) which takes an array as argument, it returns a boolean value and pushes several strings to the array. \nThe input array is usually empty.</p>\n\n<p>Here is the c code I'm focusing on which targets both PHP 5.x and PHP 7.x:</p>\n\n<pre><code>ZEND_FUNCTION(TestUpdateArray)\n{\n  zval *zArr;\n  zend_bool retVal = FALSE;\n\n  if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"z\", &amp;zArr) != FAILURE)\n  {\n    if (Z_TYPE_P(zArr) == IS_ARRAY)\n    {            \n      char str[256];\n      for (int i = 1; i &lt; 11; i++)\n      {\n        sprintf_s(str, \"This is a test %d\", i);        \n#if PHP_VERSION_ID &gt; 70000\n        add_next_index_string(zArr, str);\n#else \n        add_next_index_string(zArr, str, true);\n#endif\n      }\n      retVal = TRUE;\n    }\n  }\n  RETURN_BOOL(retVal);\n}\n</code></pre>\n\n<p>And this is the simple php script I'm using to try it out:</p>\n\n<pre><code>&lt;?php\n  $arr = [];\n  $retVal = TestUpdateArray($arr);\n  echo \"&lt;pre&gt;\";\n  var_export($retVal);\n  echo \"\\n\";\n  var_export($arr);\n  echo \"&lt;/pre&gt;\";\n</code></pre>\n\n<p>Outputting:</p>\n\n<pre><code>true\narray (\n  0 =&gt; 'This is a test 1',\n  1 =&gt; 'This is a test 2',\n  2 =&gt; 'This is a test 3',\n  3 =&gt; 'This is a test 4',\n  4 =&gt; 'This is a test 5',\n  5 =&gt; 'This is a test 6',\n  6 =&gt; 'This is a test 7',\n  7 =&gt; 'This is a test 8',\n  8 =&gt; 'This is a test 9',\n  9 =&gt; 'This is a test 10',\n)\n</code></pre>\n\n<p>While the functions works fine in PHP 5.4 when</p>\n\n<pre><code>$arr = [];\n</code></pre>\n\n<p>, httpd/php throws an exception then simply crashes on PHP 7.3 with $arr declared like above:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ospSy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ospSy.png\" alt=\"Access violation\"></a></p>\n\n<p>What is interesting to me is that I obtain a completely different behavior on 7.3 if $arr is declared like this:</p>\n\n<pre><code>$arr = ['test'];\n</code></pre>\n\n<p>In that case both on 5.4 and 7.3 the function correctly appends 10 'This is a test x' strings to the array, the end result being:</p>\n\n<pre><code>true\narray (\n  0 =&gt; 'test',\n  1 =&gt; 'This is a test 1',\n  2 =&gt; 'This is a test 2',\n  3 =&gt; 'This is a test 3',\n  4 =&gt; 'This is a test 4',\n  5 =&gt; 'This is a test 5',\n  6 =&gt; 'This is a test 6',\n  7 =&gt; 'This is a test 7',\n  8 =&gt; 'This is a test 8',\n  9 =&gt; 'This is a test 9',\n  10 =&gt; 'This is a test 10',\n)\n</code></pre>\n\n<p>In the light of what I've seen, I'm assuming that, given the differences and optimization introduced with PHP 7, the PHP virtual machine does not actually allocate space for items of the array (when declared empty), but then the add_next_index_string function expects that to be the case (please feel free to correct me on this).</p>\n\n<p>So, what I am asking is, what is the correct way to check and (eventually) initialize an empty array passed to a ZEND_FUNCTION in order to make changes (to the array) available to the calling script? </p>\n\n<p>I've also tried to use the init_array function on the zArr zval but, in this case, the calling script is not getting the appended strings (I guess that the reference to $arr is lost when calling init_array).</p>\n\n<p>EDIT after NikiC comment:</p>\n\n<p>when I added the question this was the function entry declaration:</p>\n\n<pre><code>ZEND_FE(TestUpdateArray, NULL)\n</code></pre>\n\n<p>after NikiC comment I've added the following arginfo:</p>\n\n<pre><code>ZEND_BEGIN_ARG_INFO_EX(arginfo_test_update_array, 0, 0, 1)\nZEND_ARG_ARRAY_INFO(1, update_array, 0)\nZEND_END_ARG_INFO()\n</code></pre>\n\n<p>and updated the function code to:</p>\n\n<pre><code>ZEND_FUNCTION(TestUpdateArray)\n{\n  zval *zArr;\n  zend_bool retVal = FALSE;\n  if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"z\", &amp;zArr) != FAILURE)\n  {                \n    if (Z_ISREF_P(zArr))\n    {\n      ZVAL_DEREF(zArr);      \n      SEPARATE_ARRAY(zArr);\n    }        \n    if (Z_TYPE_P(zArr) == IS_ARRAY)\n    {            \n      char str[256];        \n      for (int i = 1; i &lt; 11; i++)\n      {\n        sprintf_s(str, \"This is a test %d\", i);    \n#if PHP_VERSION_ID &gt; 70000\n        add_next_index_string(zArr, str);\n#else \n        add_next_index_string(&amp;myArr, str, true);\n#endif        \n      }            \n      retVal = TRUE;\n    }\n  }\n  RETURN_BOOL(retVal);\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "gdb"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1540387598, "post_id": 52968377, "comment_id": 92846664, "body": "BTW, you don&#39;t need to cast <code>addr</code> to <code>unsigned long</code>.  You can use an <code>&quot;r&quot;</code> constraint for a <code>void*</code> operand.  (That doesn&#39;t imply that the inline asm dereferences that pointer, so the compiler will still freely optimize loads/stores to that address around the asm, including optimizing them away, unless you use a <code>&quot;memory&quot;</code> clobber, if you were trying to avoid gimping the optimizer.)"}], "answers": [{"comments": [{"owner": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "edited": false, "score": 0, "creation_date": 1540382604, "post_id": 52968460, "comment_id": 92843213, "body": "So I must fork a child and then use ptrace with POKEUSER to set parent&#39;s debug registers accordingly. Is that the only option? My program is running with root privilege."}, {"owner": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "edited": false, "score": 0, "creation_date": 1540382872, "post_id": 52968460, "comment_id": 92843369, "body": "In kgdb.c, I see that code is using similar asm intructions."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "edited": false, "score": 0, "creation_date": 1540383151, "post_id": 52968460, "comment_id": 92843552, "body": "@NeilB: root is still user-space (ring 3), not kernel.  You can&#39;t run privileged instructions.  You still can&#39;t take over the whole machine without making system calls.  (Or accidentally crash it.)  <code>kgdb.c</code> runs in kernel space, doesn&#39;t it?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "edited": false, "score": 0, "creation_date": 1540383463, "post_id": 52968460, "comment_id": 92843751, "body": "@NeilB Typically, you can only debug your direct children with <code>ptrace</code> on Linux as the <code>ptrace_scope</code> sysctl normally forbids this."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1540383493, "post_id": 52968460, "comment_id": 92843767, "body": "@PeterCordes I think you can run privileged instructions if you first execute <code>iopl</code> to elevate yourself to ring 0."}, {"owner": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "edited": false, "score": 0, "creation_date": 1540383974, "post_id": 52968460, "comment_id": 92844096, "body": "@PeterCordes Yes, I just realized that root is not privilege level 0. I am able to program the debug register using ptrace from a child process. However I have many threads in the program and I noticed that I have to set the watchpoint from every thread for it work correctly. Then there are lots of issues when I fork a child process from a thread. and to get rid of that I think I will have to use exec. So to avoid all these I was trying to set the registers from the process itself. Thanks a lot for your prompt response."}, {"owner": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1540384104, "post_id": 52968460, "comment_id": 92844190, "body": "@fuz It seems ptrace is the only option. Actually using ptrace, child process can set registers in it&#39;s parent. Please see <a href=\"https://stackoverflow.com/questions/8941711/is-is-possible-to-set-a-gdb-watchpoint-programatically\" title=\"is is possible to set a gdb watchpoint programatically\">stackoverflow.com/questions/8941711/&hellip;</a>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "edited": false, "score": 0, "creation_date": 1540384723, "post_id": 52968460, "comment_id": 92844593, "body": "@NeilB As I tried to say before: yes, it is possible to do this, if the <code>ptrace_scope</code> sysctl is set to allow this.  Many Linux distributions set up this sysctl to forbid debugging anything but your direct children, so don&#39;t expect this to work on other people&#39;s computers."}, {"owner": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1540384871, "post_id": 52968460, "comment_id": 92844692, "body": "@fuz Thanks Fuz. I wan under the impression that it always works both ways but I will double check before porting it to other products."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1540384906, "post_id": 52968460, "comment_id": 92844712, "body": "@fuz: No, <code>iopl</code> only sets your IO privilege level, allowing <i>some</i> instructions like <code>in</code>/<code>out</code> (to any port number, not just some in the low range which can be enabled in HW without full IOPL) and <a href=\"http://felixcloutier.com/x86/CLI.html\" rel=\"nofollow noreferrer\"><code>cli</code></a>/<code>sti</code>.  It doesn&#39;t put you in ring 0 so you still can&#39;t use other privileged instructions.  (Yes, x86 really has hardware support for allowing IO privilege outside of ring 0 without full privs for system-breaking instructions like <code>invd</code>.)"}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1540387824, "last_edit_date": 1540387824, "creation_date": 1540382343, "answer_id": 52968460, "question_id": 52968377, "link": "https://stackoverflow.com/questions/52968377/segmentation-fault-at-mov-eax-db0/52968460#52968460", "title": "Segmentation fault at &quot; mov %eax,%db0&quot;", "body": "<p><a href=\"http://felixcloutier.com/x86/MOV-2.html\" rel=\"nofollow noreferrer\">http://felixcloutier.com/x86/MOV-2.html</a> (<code>mov</code> to debug register) says:</p>\n\n<blockquote>\n  <p><code>#GP(0)</code>  If the current privilege level is not 0.</p>\n</blockquote>\n\n<p>User-space code runs in ring 3 (privilege level 3).  <code>root</code> privilege is just a software thing; it's still purely ring 3.</p>\n\n<p>A Linux <code>iopl</code> system call can raise the x86 hardware I/O privilege level, but that only affects a few instructions like <code>in</code>/<code>out</code> and <code>cli</code>/<code>sti</code>.  MOV to debug registers isn't one of them.</p>\n\n<hr>\n\n<p>Under Linux, you could either write your own kernel module, or use a <code>ptrace</code> system call to set breakpoints.</p>\n\n<p>Under other OSes, you'll find other APIs that debuggers can use.</p>\n"}], "owner": {"reputation": 324, "user_id": 5420223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1899173098022a1cbaa366f11b7f1afd?s=128&d=identicon&r=PG&f=1", "display_name": "NeilB", "link": "https://stackoverflow.com/users/5420223/neilb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 52968460, "answer_count": 1, "score": 1, "last_activity_date": 1540387824, "creation_date": 1540382100, "question_id": 52968377, "link": "https://stackoverflow.com/questions/52968377/segmentation-fault-at-mov-eax-db0", "title": "Segmentation fault at &quot; mov %eax,%db0&quot;", "body": "<p>I am trying create hardware watchpoint dynamically and for that in my program I am setting debug registers. I am using only dr0 and have chosen length as 3 (4 byte aligned) and type as 1 (break on write). My cpu is intel x86_it. However, in every run, I am seeing segfault whenever I try to write to db0/dr0. The offending function and it's assembly from gdb are shown below. </p>\n\n<pre><code>int watchpoint(void* addr)\n{\n    unsigned long value = (unsigned long) addr;\n    asm(\"mov %0, %%dr0\"     ::\"r\" (0));\n    asm(\"mov %0, %%dr7\"     ::\"r\" (0));\n    asm(\"mov %0, %%dr0\"     ::\"r\" (value));\n    asm(\"mov %0, %%dr7\"     ::\"r\" (851969));\n    return 0;\n}\n\n\n\n   0x0832aa38 &lt;+0&gt;:     push   %ebp\n   0x0832aa39 &lt;+1&gt;:     mov    %esp,%ebp\n   0x0832aa3b &lt;+3&gt;:     sub    $0x10,%esp\n   0x0832aa3e &lt;+6&gt;:     mov    0x8(%ebp),%eax\n   0x0832aa41 &lt;+9&gt;:     mov    %eax,-0x4(%ebp)\n   0x0832aa44 &lt;+12&gt;:    mov    $0x0,%eax\n=&gt; 0x0832aa49 &lt;+17&gt;:    mov    %eax,%db0  &gt;&gt;&gt;&gt;&gt; Crashes here.\n   0x0832aa4c &lt;+20&gt;:    mov    $0x0,%eax\n   0x0832aa51 &lt;+25&gt;:    mov    %eax,%db7\n   0x0832aa54 &lt;+28&gt;:    mov    -0x4(%ebp),%eax\n   0x0832aa57 &lt;+31&gt;:    mov    %eax,%db0\n   0x0832aa5a &lt;+34&gt;:    mov    $0xd0001,%eax\n   0x0832aa5f &lt;+39&gt;:    mov    %eax,%db7\n   0x0832aa62 &lt;+42&gt;:    mov    $0x0,%eax\n   0x0832aa67 &lt;+47&gt;:    leave\n   0x0832aa68 &lt;+48&gt;:    ret\n</code></pre>\n\n<p>Am I writing wrong register? Can someone please help?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "regex", "parsing", "ebnf", "mpc"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1540381693, "post_id": 52967767, "comment_id": 92842602, "body": "What has the word &quot;mathematical&quot; to do with your question? It is just lexical analysis and context free parsing."}, {"owner": {"reputation": 1, "user_id": 10551584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebf6d5c5bdde511b3f4ef405dd20f3d?s=128&d=identicon&r=PG&f=1", "display_name": "db24624", "link": "https://stackoverflow.com/users/10551584/db24624"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1540383250, "post_id": 52967767, "comment_id": 92843609, "body": "2*(3+2) is maths... why so angry?"}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1540382039, "creation_date": 1540382039, "answer_id": 52968360, "question_id": 52967767, "link": "https://stackoverflow.com/questions/52967767/how-to-define-standard-mathematical-notation-with-mpc-parser/52968360#52968360", "title": "How to define standard mathematical notation with mpc parser", "body": "<p>Written as yacc rules, that would be:</p>\n\n<pre><code>expr    : '(' expr ')\n        | expr operator expr\n        | number\n        ;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10551584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebf6d5c5bdde511b3f4ef405dd20f3d?s=128&d=identicon&r=PG&f=1", "display_name": "db24624", "link": "https://stackoverflow.com/users/10551584/db24624"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540402336, "creation_date": 1540380364, "last_edit_date": 1540384587, "question_id": 52967767, "link": "https://stackoverflow.com/questions/52967767/how-to-define-standard-mathematical-notation-with-mpc-parser", "title": "How to define standard mathematical notation with mpc parser", "body": "<p>I am reading a compiler tutorial here <a href=\"http://www.buildyourownlisp.com\" rel=\"nofollow noreferrer\">www.buildyourownlisp.com</a>. It uses a parser combinator called mpc. What I have at the moment will parse polish notation, but I'm trying to work out how to use standard notation with it. I just can't seem to how to do it.\nThe rules of the parser are as follows:</p>\n\n<pre><code>.   Any character is required.\na   The character a is required.\n[abcdef]    Any character in the set abcdef is required.\n[a-f]   Any character in the range a to f is required.\na?  The character a is optional.\na*  Zero or more of the character a are required.\na+  One or more of the character a are required.\n^   The start of input is required.\n$   The end of input is required.\n\"ab\"    The string ab is required.\n'a' The character a is required.\n'a' 'b' First 'a' is required, then 'b' is required.\n'a' | 'b'   Either 'a' is required, or 'b' is required.\n'a'*    Zero or more 'a' are required.\n'a'+    One or more 'a' are required.\n&lt;abba&gt;  The rule called abba is required.\n</code></pre>\n\n<p>The polish notation is written like this:</p>\n\n<pre><code>     \"                                                                                       \\\nnumber:    /-?[0-9]+/'.'?/[0-9]+/ ;                                                \\\noperator:  '+' | '-' | '*' | '/' | '%' | \\\"add\\\" | \\\"sub\\\" | \\\"mul\\\" | \\\"div\\\" ;           \\\nexpr:      &lt;number&gt; | '(' &lt;operator&gt; &lt;expr&gt;+ ')' ;                                            \\\ndlispy:    /^/ &lt;operator&gt; &lt;expr&gt;+ /$/ ;\",\n</code></pre>\n\n<p>I've managed to make it accept decimal numbers by adding <code>'.'?/[0-9]+/</code>, but i can't work out how to restructure it to accept standard notation eg <code>2*(3+2)</code> instead of <code>*2 (+ 3 2)</code>. I know that I'll have to rewrite the expr and the dlispy rules, but I'm new to regex and BNF. Hope you can help, thanks</p>\n"}, {"tags": ["c", "arrays", "string", "structure"], "comments": [{"owner": {"reputation": 1156, "user_id": 6636638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4dc3546ba881a3958a66dbe89f449?s=128&d=identicon&r=PG&f=1", "display_name": "B. Cratty", "link": "https://stackoverflow.com/users/6636638/b-cratty"}, "edited": false, "score": 0, "creation_date": 1540380469, "post_id": 52967758, "comment_id": 92841811, "body": "Do you know what line the error is thrown at? Also what happens if you remove the <code>&amp;</code> from the <code>scanf</code>&#39;s?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1540380561, "post_id": 52967758, "comment_id": 92841888, "body": "One <i>char</i> is a single character. A letter, digit or so. You&#39;ve got <i>20</i> characters worth of space for names of 20 students."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 6, "creation_date": 1540380606, "post_id": 52967758, "comment_id": 92841908, "body": "Make a <code>struct student</code> in singular with <i>one name</i> composed of multiple characters, and one score. Then make an <i>array of student<b>s</i></b>."}, {"owner": {"reputation": 91, "user_id": 10466521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1505e46820b1dadf60546fb63a72d3a?s=128&d=identicon&r=PG&f=1", "display_name": "scylla0120", "link": "https://stackoverflow.com/users/10466521/scylla0120"}, "edited": false, "score": 1, "creation_date": 1540380722, "post_id": 52967758, "comment_id": 92841987, "body": "line 19 and 21."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1540382371, "post_id": 52967758, "comment_id": 92843062, "body": "@scylla0120 - to address a specific comment, you can enter the &quot;@&quot; followed by the users moniker.  eg: <code>@B. Cratty</code> in the comment box and it will flag that user that you have responded."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 5, "last_activity_date": 1540381863, "creation_date": 1540381863, "answer_id": 52968283, "question_id": 52967758, "link": "https://stackoverflow.com/questions/52967758/format-s-expects-argument-of-type-char-but-argument-2-has-type-int/52968283#52968283", "title": "format &#39;%s&#39; expects argument of type &#39;*char&#39; but argument 2 has type &#39;int&#39;", "body": "<p>There are several issues:</p>\n\n<pre><code>printf(\"%s passed the exam\\n\", student.name[i]);\n</code></pre>\n\n<p><code>student.name[i]</code> is a <code>char</code> but the <code>%s</code> format specifier wants a pointer to <code>char</code>.</p>\n\n<p>But the actual problem is that your declaration of students is not what you need. Following structure declares one student whose name can be up to 19 characters long and having 20 scores.</p>\n\n<pre><code>struct students {\n    char name[20];\n    int score[20];\n} student;\n</code></pre>\n\n<p>But you need 20 (or more?) students each of them having one score:</p>\n\n<pre><code>struct student {\n  char name[50];    // name up to 49 characters\n  int score;        // score\n} student;\n\nstruct student students[20];  // array of 20 students\n</code></pre>\n\n<p>Il leave the implementation of the code to the reader as an exercise.\nYou need to get familiar with following concepts:</p>\n\n<ul>\n<li>arrays</li>\n<li>structs</li>\n<li>strings</li>\n<li>basics of <code>scanf</code> and <code>printf</code></li>\n</ul>\n\n<p>All these topics are covered in your C text book.</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 7522194, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155085580417474/picture?type=large", "display_name": "ekchom", "link": "https://stackoverflow.com/users/7522194/ekchom"}, "is_accepted": false, "score": 0, "last_activity_date": 1540381908, "creation_date": 1540381908, "answer_id": 52968304, "question_id": 52967758, "link": "https://stackoverflow.com/questions/52967758/format-s-expects-argument-of-type-char-but-argument-2-has-type-int/52968304#52968304", "title": "format &#39;%s&#39; expects argument of type &#39;*char&#39; but argument 2 has type &#39;int&#39;", "body": "<p>Your code have quite a few issue.\n1) student should be array ( or dynamically memory allocated).\n2) scanf of string needs to be done as </p>\n\n<p><code>scanf(\"%s\", student[i].name)</code></p>\n\n<p>Or </p>\n\n<p><code>scanf(\"%s\", &amp;student[i].name[0])</code></p>\n\n<p>3) Still you would have issue if string length crosses 20 byte (include nul character). </p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1540382098, "creation_date": 1540382098, "answer_id": 52968376, "question_id": 52967758, "link": "https://stackoverflow.com/questions/52967758/format-s-expects-argument-of-type-char-but-argument-2-has-type-int/52968376#52968376", "title": "format &#39;%s&#39; expects argument of type &#39;*char&#39; but argument 2 has type &#39;int&#39;", "body": "<pre><code>char name[20];\n</code></pre>\n\n<p>sets aside space for a <em>single</em> 20-character string, so <code>students.name[i]</code> refers to a single character (which gets promoted to type <code>int</code> in the <code>scanf</code> call).</p>\n\n<p>To define an array of <em>strings</em>, you need a 2D array of <code>char</code>, like</p>\n\n<pre><code>char name[NUMBER_OF_STRINGS][MAX_STRING_LENGTH+1];\n</code></pre>\n\n<p>and you read it as</p>\n\n<pre><code>scanf( \u201c%s\u201d, student.name[i] ); // no &amp; operator here\n</code></pre>\n\n<p>Array expressions \u201cdecay\u201d to pointer expression under most circumstances, so you don\u2019t need the <code>&amp;</code> operator here.</p>\n\n<p>Alternately, you can declare an array of pointers to <code>char</code>, like </p>\n\n<pre><code>char *name[NUMBER_OF_STRINGS];\n</code></pre>\n\n<p>and then allocate memory for each string as you read it:</p>\n\n<pre><code>char buffer[MAX_STRING_LENGTH+1];\n...\nscanf( \u201c%s\u201d, buffer );\nstudent.name[i] = malloc( strlen( buffer ) + 1 );\nif ( student.name[i] )\n  strcpy( student.name[i], buffer );\n</code></pre>\n\n<p>You just need to remember to <code>free</code> each <code>student.name[i]</code> when you\u2019re finished.</p>\n"}, {"tags": [], "owner": {"reputation": 2882, "user_id": 6943197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbce82fcea72325bc7cc3f874b5cf3ab?s=128&d=identicon&r=PG", "display_name": "Hogstrom", "link": "https://stackoverflow.com/users/6943197/hogstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1540382368, "creation_date": 1540382368, "answer_id": 52968468, "question_id": 52967758, "link": "https://stackoverflow.com/questions/52967758/format-s-expects-argument-of-type-char-but-argument-2-has-type-int/52968468#52968468", "title": "format &#39;%s&#39; expects argument of type &#39;*char&#39; but argument 2 has type &#39;int&#39;", "body": "<p>The student name is a singular array of char and needs to be an array of character arrays.</p>\n\n<pre><code>struct students {\n    char name[20][40];\n    int score[20];\n} student;\n</code></pre>\n\n<p>I arbitrarily assumed 40 characters per name was sufficient.</p>\n\n<p>The scanf for the name needs to be changed from:</p>\n\n<pre><code>scanf(\"%s\", &amp;student.name[i]);\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>scanf(\"%s\", student.name[i]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1540383337, "post_id": 52968501, "comment_id": 92843659, "body": "About your very last sentence: If a <code>newline</code> character is present, <code>fgets</code> will <i>retain</i> it, but it does not <i>append</i> a <code>newline</code> character otherwise.  An ASCII NUL byte is the only thing <code>fgets</code> will append to the end of the string it reads."}], "tags": [], "owner": {"reputation": 115, "user_id": 9165579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TumklOJXESM/AAAAAAAAAAI/AAAAAAAAAB8/AgidwoTnRuE/photo.jpg?sz=128", "display_name": "Larry Teischwilly", "link": "https://stackoverflow.com/users/9165579/larry-teischwilly"}, "is_accepted": false, "score": 0, "last_activity_date": 1540382461, "creation_date": 1540382461, "answer_id": 52968501, "question_id": 52967758, "link": "https://stackoverflow.com/questions/52967758/format-s-expects-argument-of-type-char-but-argument-2-has-type-int/52968501#52968501", "title": "format &#39;%s&#39; expects argument of type &#39;*char&#39; but argument 2 has type &#39;int&#39;", "body": "<p><code>scanf(\"%s\", &amp;student.name[i]);</code> You're addressing a single <code>char</code> from the string you declared. I assume you would want an individual object for every student. To do this my advice would be to define your <code>struct</code> like this: </p>\n\n<pre><code>typedef struct students {\n    char name[20];\n    int score;\n}Student;\n</code></pre>\n\n<p>With this you have defined a new data type called <code>Student</code>. Each object of the type <code>Student</code> has a string called <code>name</code> and an <code>int</code> resembling the score. </p>\n\n<p>After you've created this model, you can treat it as just another variable type, e.g. the following is totally valid: </p>\n\n<pre><code>Student student1, student2;\n</code></pre>\n\n<p>Alternatively, you could create an array of <code>Student</code>s: <code>Student group[20]</code> and then have a loop fill it with data: </p>\n\n<pre><code>for(int i = 0; i &lt; n; i++){\n        puts(\"Name of the student: \");\n        fgets(group[i].name, 20, stdin);\n        puts(\"Score of the student: \");\n        scanf(\"%d\", &amp;group[i].score);\n}\n</code></pre>\n\n<p>The deal is per iteration to refer to an individual object of the array of students. \nAlso, I would strongly recommend to use <code>fgets()</code> or at least <code>gets_s()</code> for inputting strings. <code>scanf()</code> has multiple problems, some of which are that it stops input if it encounters a space, tab or a newline and most importantly it doesn't check for array bounds. Consider using a safer variant, just keep in mind that <code>fgets()</code> appends a <code>'\\n'</code> before the terminating null. </p>\n"}], "owner": {"reputation": 91, "user_id": 10466521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1505e46820b1dadf60546fb63a72d3a?s=128&d=identicon&r=PG&f=1", "display_name": "scylla0120", "link": "https://stackoverflow.com/users/10466521/scylla0120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 52968283, "answer_count": 5, "score": 1, "last_activity_date": 1540382461, "creation_date": 1540380330, "question_id": 52967758, "link": "https://stackoverflow.com/questions/52967758/format-s-expects-argument-of-type-char-but-argument-2-has-type-int", "title": "format &#39;%s&#39; expects argument of type &#39;*char&#39; but argument 2 has type &#39;int&#39;", "body": "<p>When I try to compile my program I get the warning message in the title and when I run it after scanning the names and scores it just stops. I encountered this problem a lot of times while practicing working with strings, but I haven't been able to find a solution. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct students {\n    char name[20];\n    int score[20];\n} student;\nint main() {\nint i, n;\n    printf(\"Number of students:\\n\");\n    scanf(\"%d\", &amp;n);\n    for(i=0; i&lt;n; i++) {\n        printf(\"Name of the student:\\n\");\n        scanf(\"%s\", &amp;student.name[i]);\n        printf(\"Score of the student:\\n\");\n        scanf(\"%d\", &amp;student.score[i]);\n    }\nfor(i=0;i&lt;n;i++) {\n    if(student.score[i] &gt;= 15) {\n        printf(\"%s passed the exam\\n\", student.name[i]); }\n    else {\n        printf(\"%s failed the exam\\n\", student.name[i]);\n    }\n    }\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540380928, "post_id": 52967427, "comment_id": 92842114, "body": "<code>int a[][3]</code> is not standard C.  What compiler are you using?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1540384474, "post_id": 52967427, "comment_id": 92844415, "body": "@chux -- looks okay to me; just as in <code>int x[] = { 1, 2, 3 };</code>, where the compiler infers the unspecified dimension from the initializer. <code>int a[][3]</code> is more-or-less the same thing. A long-winded version would look like this: <code>typedef int x[3]; x a[] = { 1, 2, 3, 4, 5, 6 };</code>. I&#39;m not saying this is a good thing to do, just that it&#39;s legal."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1540384706, "post_id": 52967427, "comment_id": 92844583, "body": "@pete fair enough - I do get warning &quot;warning: missing braces around initializer [-Wmissing-braces]&quot;.  Same for <a href=\"https://stackoverflow.com/questions/52967427/why-is-the-ptr-in-printf?noredirect=1#comment92844415_52967427\">your suggestion</a>.  Expect something like <code>int a[][3] = {{1, 2, 3}};</code>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1540384894, "post_id": 52967427, "comment_id": 92844708, "body": "@chux -- yup; the rules say that you don&#39;t need the curly braces, but leaving them out makes it much harder to understand what the initializer means. A fully-braced initializer for this example would be <code>{ { 1, 2, 3 }, { 4, 5, 6 } }</code>, since each element of <code>a</code> is an array of 3 ints. This makes it clearer that there are 2 of those elements."}], "answers": [{"comments": [{"owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540413797, "post_id": 52967472, "comment_id": 92861742, "body": "&quot;<code>ptr</code> is a pointer to that array of arrays.&quot; No. <code>ptr</code> is a pointer to an array"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540460029, "post_id": 52967472, "comment_id": 92877379, "body": "@newacct Right, and that&#39;s exactly what I said."}, {"owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540485501, "post_id": 52967472, "comment_id": 92893409, "body": "You said &quot;<code>ptr</code> is a pointer to that array of arrays&quot;, which sounds like <code>ptr</code> is a pointer to an array of arrays, which is not the right type. <code>ptr</code> is a pointer to an array of <code>int</code>s."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540487965, "post_id": 52967472, "comment_id": 92894647, "body": "@newacct <code>ptr</code> is a pointer to one or more arrays of <code>int</code>s, just like how <code>int*</code> is a pointer to one or more <code>int</code>s. Admittedly this is only one way to spin it due to how weird pointers are. You&#39;re talking about the literal interpretation of the type, whereas I&#39;m talking about semantics. I&#39;d say neither is wrong."}, {"owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540499945, "post_id": 52967472, "comment_id": 92900259, "body": "<code>ptr</code> only points to one array of <code>int</code>. If you know that that array is an element of an array of arrays, then you can use pointer arithmetic to get a pointer to the next element (or previous element, if it&#39;s not the first). But that doesn&#39;t change the fact that <code>ptr</code> only still points to one array of <code>int</code>. The thing it points to may or may not be an element of an array, and it doesn&#39;t know that. Using sloppy language confuses learners; <code>int *</code> is not a &quot;pointer to array of <code>int</code>s&quot;, because that is, say <code>int (*)[42]</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540545541, "post_id": 52967472, "comment_id": 92914703, "body": "@newacct I added in a parenthetical so both interpretations are covered, but I maintain that either interpretation is valid depending on what level of abstraction you&#39;re employing in conversation."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 5, "last_activity_date": 1540545511, "last_edit_date": 1540545511, "creation_date": 1540379440, "answer_id": 52967472, "question_id": 52967427, "link": "https://stackoverflow.com/questions/52967427/why-is-the-ptr-in-printf/52967472#52967472", "title": "Why is the *ptr in printf?", "body": "<p>No.</p>\n\n<ul>\n<li><p><code>a</code> is an array of arrays.</p></li>\n<li><p><code>ptr</code> is a pointer to [the first element of] that array of arrays.</p></li>\n<li><p><code>*ptr</code> is the first element of that array (which is itself an array!).</p>\n\n<ul>\n<li>This can also be written <code>ptr[0]</code> (because <code>*(a+n)</code> is <code>a[n]</code>).</li>\n</ul></li>\n<li><p><code>(*ptr)[1]</code> is the first element in that result.</p>\n\n<ul>\n<li><p>This can also be written <code>ptr[0][1]</code>.</p></li>\n<li><p>It would be more clearly written as <code>a[0][1]</code>.</p></li>\n</ul></li>\n</ul>\n\n<p>Your proposed counter-example of <code>ptr[1]</code> is the <em>next</em> element in the result, still an array.</p>\n\n<p>That declaration is dodgy too; the initializer is technically valid but doesn't do what you think, as it only <em>appears</em> to list a single dimension.</p>\n\n<p>Overall it's not great code.</p>\n"}], "owner": {"reputation": 25, "user_id": 10536094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4125d9abbdf4f14a7511534dbc857608?s=128&d=identicon&r=PG&f=1", "display_name": "xehob", "link": "https://stackoverflow.com/users/10536094/xehob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540545511, "creation_date": 1540379262, "last_edit_date": 1540393950, "question_id": 52967427, "link": "https://stackoverflow.com/questions/52967427/why-is-the-ptr-in-printf", "title": "Why is the *ptr in printf?", "body": "<p>In the below code, should the <code>(*ptr)[1]</code> not be <code>(ptr)[1]</code> instead? As <code>ptr</code> is also a pointer as <code>a</code> is in <code>a[][]</code>.</p>\n\n<pre><code>int a[][3] = {1, 2, 3, 4, 5, 6};\nint (*ptr)[3] = a;\nprintf(\"%d\", (*ptr)[1]);\n</code></pre>\n"}, {"tags": ["c", "modbus"], "answers": [{"tags": [], "owner": {"reputation": 166, "user_id": 8524330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24183e56c9b752dd1b4030953647326?s=128&d=identicon&r=PG&f=1", "display_name": "Clay Raynor", "link": "https://stackoverflow.com/users/8524330/clay-raynor"}, "is_accepted": false, "score": 0, "last_activity_date": 1540385244, "creation_date": 1540385244, "answer_id": 52969422, "question_id": 52967306, "link": "https://stackoverflow.com/questions/52967306/reading-data-from-rs485-modbus-connection-timed-out-using-libmodbus-library/52969422#52969422", "title": "Reading data from RS485 modbus Connection timed out using libmodbus library", "body": "<p>The first thing I would check is the serial communication hardware. Is there any other device you could try connecting to both of the computers to make sure each computer's serial port is working? That would help verify that the serial port is correctly installed and configured on each computer. USB to serial converts are notoriously finicky and difficult to get working. </p>\n\n<p>The next thing I would check is the baud rate and serial port settings on each machine. The RS-232 and RS-485 serial communication protocols do not auto-negotiate / auto-detect the speed of a connection so both devices need to have the same connectivity settings.</p>\n\n<p>You may also want to try a slower baud rate than 115200. While higher baud rates allow for more bandwidth and throughput there is a greater chance for errors. I would start out with the 19200 baud and go from there once you get it working.</p>\n\n<p>Also, what user are you running this program under? You may need to execute the program via sudo or as a user with elevated permissions.</p>\n"}], "owner": {"reputation": 21, "user_id": 9298205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b0e88061f0b3cb0a84ed9acd655568?s=128&d=identicon&r=PG&f=1", "display_name": "Maharudrappa A", "link": "https://stackoverflow.com/users/9298205/maharudrappa-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1346, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1540483670, "creation_date": 1540378874, "last_edit_date": 1540483670, "question_id": 52967306, "link": "https://stackoverflow.com/questions/52967306/reading-data-from-rs485-modbus-connection-timed-out-using-libmodbus-library", "title": "Reading data from RS485 modbus Connection timed out using libmodbus library", "body": "<p>I am new to Modbus protocol I want to read data from RS485. I have written c code to using Libmodbus library but unable to read data getting error connection timed out. I am here using modbus slave running on windows machine from here i am connecting from usb to serial cable from COM port of windows machine. To the RS485 port of Linux machine where i run the below c code there. </p>\n\n<p>`</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdbool.h&gt;\n\n#include &lt;modbus.h&gt;\n\n\nint main()\n{\n  modbus_t *ctx = 0;\n\n  //\n  // create a libmodbus context for RTU\n  // doesn't check if the serial is really there\n  //\n  ctx = modbus_new_rtu(\"/dev/ttyS2\", 115200, 'N', 8, 1);\n\n  if (ctx == 0) {\n\n    fprintf(stderr, \"Unable to create the libmodbus context\\n\");\n    return -1;\n\n  } else {\n    struct timeval old_response_timeout;\n    struct timeval response_timeout;\n\n    // enable debug\n    modbus_set_debug(ctx, true);\n\n    // initialize timeouts with default\n    modbus_get_response_timeout(ctx, &amp;old_response_timeout);\n    response_timeout = old_response_timeout;\n\n    // set the message and charcater timeout to 2 seconds\n    response_timeout.tv_sec = 2;\n    modbus_set_response_timeout(ctx, &amp;response_timeout);\n    modbus_set_byte_timeout(ctx, &amp;response_timeout);\n\n  }\n\n  // try to connet to the first DZT on the line\n  // assume that line address is 1, the default\n  // send nothing on the line, just set the address in the context\n  if(modbus_set_slave(ctx, 1) == -1) {\n    fprintf(stderr, \"Didn't connect to slave/n\");\n    return -1;\n  }\n\n  // establish a Modbus connection\n  // in a RS-485 context that means the serial interface is opened\n  // but nothing is yet sent on the line\n  if(modbus_connect(ctx) == -1) {\n\n    fprintf(stderr, \"Connection failed: %s\\n\", modbus_strerror(errno));\n    modbus_free(ctx);\n    return -1;\n\n  } else {\n\n    int nreg = 0;\n    uint16_t tab_reg[32];\n   // uint16_t\n    fprintf(stderr, \"Connected\\n\");\n\n    //\n    // read all registers in DVT 6001\n    // the function uses the Modbus function code 0x03 (read holding registers).\n    //\n    nreg = modbus_read_registers(ctx,0,5,tab_reg);\n\n    //printf(tab_reg);\n    if (nreg == -1) {\n\n       fprintf(stderr, \"Error reading registers: %s\\n\", modbus_strerror(errno));\n       modbus_close(ctx);\n       modbus_free(ctx);\n\n       return -1;\n\n    } else {\n       int i;\n\n       // dump all registers content\n\n       fprintf (stderr, \"Register dump:\\n\");\n       for(i=0; i &lt; nreg; i++)\n         printf(\"reg #%d: %d\\n\", i, tab_reg[i]);\n\n\n       modbus_close(ctx);\n       modbus_free(ctx);\n\n       return 0;\n    }\n  }\n}\n</code></pre>\n\n<p>`</p>\n\n<p>Error is as follows</p>\n\n<pre><code>Opening /dev/ttyS2 at 115200 bauds (N, 8, 1)\nConnected\n[01][03][00][00][00][05][85][C9]\nWaiting for a confirmation...\nERROR Connection timed out: select\nError reading registers: Connection timed out\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1540378019, "post_id": 52967029, "comment_id": 92840319, "body": "you always need a <code>main</code> function"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1540378041, "post_id": 52967029, "comment_id": 92840339, "body": "Yes, <code>main</code> is mandatory for a normal program that is not a library"}, {"owner": {"reputation": 1, "user_id": 10309971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6df3f03d2985876d660a7d57644d11?s=128&d=identicon&r=PG&f=1", "display_name": "Lordkaxan", "link": "https://stackoverflow.com/users/10309971/lordkaxan"}, "edited": false, "score": 0, "creation_date": 1540378113, "post_id": 52967029, "comment_id": 92840386, "body": "ok, but i still have a issue when i use int main,"}, {"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 2, "creation_date": 1540378256, "post_id": 52967029, "comment_id": 92840470, "body": "<code>printf(&quot;%&quot;,svar);</code>-&gt;<code>printf(&quot;%f&quot;,svar);</code>"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 2, "creation_date": 1540378268, "post_id": 52967029, "comment_id": 92840482, "body": "There is a semicolon missing after <code>tal2=3</code>"}, {"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 2, "creation_date": 1540378339, "post_id": 52967029, "comment_id": 92840516, "body": "Seems like you need to back up a little bit, do a C tutorial, read a C book, take a C programming class?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1540382506, "post_id": 52967029, "comment_id": 92843139, "body": "Also please make it a habit to code in English when you pick variable names and write comments. If you use your native language, it all turns into a mess when you need to include libraries, which will be written in English (called &#39;Swenglish&#39;/&#39;Svengelska&#39; here in Sweden). Plus, you might at some point need to ask help from the people at SO :)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10309971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6df3f03d2985876d660a7d57644d11?s=128&d=identicon&r=PG&f=1", "display_name": "Lordkaxan", "link": "https://stackoverflow.com/users/10309971/lordkaxan"}, "edited": false, "score": 0, "creation_date": 1540378358, "post_id": 52967099, "comment_id": 92840526, "body": "this is the final solution i got:"}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1540378183, "creation_date": 1540378183, "answer_id": 52967099, "question_id": 52967029, "link": "https://stackoverflow.com/questions/52967029/questions-about-my-c-programming-code-compilator-issues/52967099#52967099", "title": "questions about my c-programming code, compilator issues", "body": "<p>You need a <code>main</code> function for a normal program. </p>\n\n<p>The prototype of <code>main</code> for C should be</p>\n\n<pre><code>int main(void)   \n{\n    ...\n    return 0;\n}\n</code></pre>\n\n<p>From C99 onwards it is possible to skip the <code>return 0</code>. The compiler shall automatically infer it.</p>\n"}, {"tags": [], "owner": {"reputation": 50, "user_id": 4118614, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3jOfF6S-93A/AAAAAAAAAAI/AAAAAAAAAA8/lltgD_y8D8U/photo.jpg?sz=128", "display_name": "Rahul Verma", "link": "https://stackoverflow.com/users/4118614/rahul-verma"}, "is_accepted": false, "score": 0, "last_activity_date": 1540405296, "creation_date": 1540405296, "answer_id": 52975659, "question_id": 52967029, "link": "https://stackoverflow.com/questions/52967029/questions-about-my-c-programming-code-compilator-issues/52975659#52975659", "title": "questions about my c-programming code, compilator issues", "body": "<p>Correct code Should be </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    int tal1=8, tal2=3;\n    float svar;\n\n    svar=tal1/tal2;\n    printf(\"%f\",svar);\n    svar=tal1%tal2;\n    printf(\"%f\",svar);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10309971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6df3f03d2985876d660a7d57644d11?s=128&d=identicon&r=PG&f=1", "display_name": "Lordkaxan", "link": "https://stackoverflow.com/users/10309971/lordkaxan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1540405296, "creation_date": 1540377976, "last_edit_date": 1540404421, "question_id": 52967029, "link": "https://stackoverflow.com/questions/52967029/questions-about-my-c-programming-code-compilator-issues", "title": "questions about my c-programming code, compilator issues", "body": "<p>Hey i seem to get issues runnin the code, should i have a int main() or is that not needed in this situation?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n    int tal1=8, tal2=3\n     float svar;\n    svar=tal1/tal2;\n    printf(\"%\",svar);\n    svar=tal1%tal2;\n    printf(\"%f\",svar);\n\n      return 0;\n    }\n</code></pre>\n\n<p>edit: i still have a issue after using int main.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\nint tal1=8, tal2=3\n float svar;\nsvar=tal1/tal2;\nprintf(\"%\",svar);\nsvar=tal1%tal2;\nprintf(\"%f\",svar);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "assembly", "compiler-optimization", "inline-assembly"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 5, "creation_date": 1540375836, "post_id": 52966290, "comment_id": 92838997, "body": "Maybe it is inlined into <code>main</code> which already has a ret instruction. Without seeing the complete result it is hard to guess."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1540375857, "post_id": 52966290, "comment_id": 92839007, "body": "I&#39;m not sure, but note that technically speaking, your entire inline assembly is not really well-defined because you assume that certain registers hold certain values which is not a valid assumption to make."}, {"owner": {"reputation": 96, "user_id": 2863290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bv4lH.png?s=128&g=1", "display_name": "gustavo", "link": "https://stackoverflow.com/users/2863290/gustavo"}, "edited": false, "score": 0, "creation_date": 1540376958, "post_id": 52966290, "comment_id": 92839668, "body": "I assume 64bit..., array in rdi, len in esi."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1540377479, "post_id": 52966290, "comment_id": 92839997, "body": "Look at <a href=\"https://www.godbolt.org/z/i_hcN2\" rel=\"nofollow noreferrer\">this</a>. It is inlined but nevertheless the code for the <code>suma</code> function is generated as well, and there the <code>ret</code> has not been removed. How did you notice that there is no <code>ret</code> with -O3?"}, {"owner": {"reputation": 96, "user_id": 2863290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bv4lH.png?s=128&g=1", "display_name": "gustavo", "link": "https://stackoverflow.com/users/2863290/gustavo"}, "edited": false, "score": 0, "creation_date": 1540377717, "post_id": 52966290, "comment_id": 92840140, "body": "dissasemble with objdump"}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1540377930, "post_id": 52966290, "comment_id": 92840265, "body": "It&#39;s a tail recursion optimisation. <code>suma</code> can just return to where <code>main</code> returns. Haskell compilers are even <i>required</i> to implement it (since there is no iteration)."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1553890852, "post_id": 52966290, "comment_id": 97569047, "body": "make your asm volatile and the optimizer won&#39;t help you."}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 6, "last_activity_date": 1540378930, "last_edit_date": 1540378930, "creation_date": 1540377994, "answer_id": 52967037, "question_id": 52966290, "link": "https://stackoverflow.com/questions/52966290/why-ret-disappear-with-optimization/52967037#52967037", "title": "Why ret disappear with optimization?", "body": "<blockquote>\n  <p>I assume 64bit..., array in rdi, len in esi. </p>\n</blockquote>\n\n<p>You're using <em>inline</em> asm, and not in a <code>__attribute__((naked,noinline))</code> function, so the compiler can use the inline asm template block in any context it wants.  Since you failed to use any input/output constraints, and you clobber registers without telling the compiler, it will just totally break unless you disable optimization.</p>\n\n<p>To answer the main question, the compiler simply inlines <code>suma</code> into <code>main</code>.  It's implicitly <code>volatile</code> (because it's a basic asm statement) so it isn't optimized away.</p>\n\n<p><strong>But execution falls off the end of a non-void function (<code>suma</code>), which is undefined behaviour</strong>, so modern GCC just gives up and omits the <code>ret</code> instruction.  It assumes that execution can never take that path (because of the undefined behaviour), and doesn't bother generating code for it.</p>\n\n<p>If you add a <code>return 0;</code> to the end of <code>suma</code>, then <code>main</code> will end with a <code>ret</code> instruction.</p>\n\n<p>Surprisingly, <a href=\"https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSAbAQwDtRkBSAJgCFufSAZ1QBXYskwgA5HhYEA1IJEBbJhFkEAVPKbFiTAJ6l5G%2BQ0wsAlBwAMAQQ4B2Pvfludg5RG5d38gB4k8twArJhM/sah4f5%2BcW7cAMzyxJhKDARM6KjBiQAi8jbuHCEAwiw%2BtnbxCVy%2B7oHEwVxh6JHNrbE1xVzJeLkFRd0JZRV1Vd0%2BtCBuWejy3i3E%2BKShy5EALJZRLTG1yamCzXz5OnqGJTx4JQUl5ZWuNT5%2BssgdmG3Dk73H/P1fI3u40e8We7mQygADu82qtdoJ/l8kiZcqUzBYOIkAGKTUYPapPOp%2BKgsTDyWgAIwB3wOmEhmAIeCauKBXCqAHp2aCie5UgpqQLBXcxmyQX5rIkXA57JyufE%2BWIWIVMVKnHkqlVTKpZBBrPYnFKXnJ5AA3S60Gw2G4qia8hmKxQqNQm4wWmwS1WOPJSbYMaQhKSkFjSGyB1DSUr8fiKUTiMlJWiBgghn3bADWIESiQAdFm8/mCwA2RjSDaB4NSUOkcNSQOCEA2UjJys%2B0hwWAwRAoVBQvDmMgUCBoXv9kDAAAcXFIADM%2BwRMMR6xAKSnSBTZLoDNJE6Rh8oLAQAPIsBhblukLCqNjmVf4VLIRkmtKrzD%2BTDIETz7eBjSYP1SHcCGIPBlG/X1WHYKNeEYPAKXrSBtlQSFGVQFh6ykABaQ9kgwgB1JgGAYeQMNUcQEExPIECYQQAHc/wYOtYwkOhfX9ctVxrfxx0LDDCw2eRgGQN5x2zXwIFwQgggTYxSh7SE%2BwXZpEloSx5EjXh%2BCTFNLHTTMcwLAy82Lf8y1IUDCy4bMAE4gw46Q6wbJttLbTsICQUQCEhT9yEoYd5NHegPkk4g6FIGj9EhMCSykANbPPGsE3kGjCAQAJuN4/jBOE0StJbHTSAQcIsBC3VotM0DEkcbN6ArKsawcxtm1DfKMyzXNDIM4zpESdj4vspy8pc%2BA3O7EcFx8oc5IUkLkGYNhHEtGc5wXJcV3PdcWE3b9dx7fc5GPU9b0wK9gBvc873fR9n3PV930/SQAJ/OQ/22oCQKiubII06CGFg%2BDSqQlC0OkLCcPwwjiNI5ByPyKjaPoxixGYlToti2qw2kLieL4%2BRZog%2BQqpsbMinE/AiCaaS1Km/slK4VT1L4Xhcua3S2o6gyyt6ur%2BvrRrtNYqQuC5jHawGlnSCfRc8FQkANiAA%3D\" rel=\"noreferrer\">gcc only gives one warning on the Godbolt compiler explorer with -O3 -Wall</a>:</p>\n\n<pre><code>&lt;source&gt;: In function 'int suma(int*, int)':\n&lt;source&gt;:13:1: warning: no return statement in function returning non-void [-Wreturn-type]\n }\n ^\n</code></pre>\n\n<p>The resulting asm output for <code>main</code> is this, which is of course totally broken because RDI is <code>argc</code>; it never reserved space for <code>int v[100]</code> because its unused in the C source or did anything.</p>\n\n<pre><code>main:\n            xor %eax, %eax           # resultado = 0   \n    xor %edx, %edx           # i = 0           \n1:  add (%rdi,%rdx,4), %eax  # res += array[i] \n    inc %edx                 # ++i             \n    cmp %edx,%esi            # i &lt; len?        \n    jne 1b                   # repetir         \n</code></pre>\n\n<p>With a <code>return 0;</code> at the end of <code>suma</code>, it and main end with <code>xorl    %eax, %eax</code> ; <code>ret</code>, but of course <code>main</code> is still totally broken because the inline asm doesn't use any input constraints.</p>\n"}], "owner": {"reputation": 96, "user_id": 2863290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bv4lH.png?s=128&g=1", "display_name": "gustavo", "link": "https://stackoverflow.com/users/2863290/gustavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 52967037, "answer_count": 1, "score": 4, "last_activity_date": 1553882674, "creation_date": 1540375668, "last_edit_date": 1553882674, "question_id": 52966290, "link": "https://stackoverflow.com/questions/52966290/why-ret-disappear-with-optimization", "title": "Why ret disappear with optimization?", "body": "<pre><code>int suma(int* array, int len)\n{\n    asm(\"    xor %eax, %eax           # resultado = 0   \\n\"\n        \"    xor %edx, %edx           # i = 0           \\n\"\n        \"1:  add (%rdi,%rdx,4), %eax  # res += array[i] \\n\"\n        \"    inc %edx                 # ++i             \\n\"\n        \"    cmp %edx,%esi            # i &lt; len?        \\n\"\n        \"    jne 1b                   # repetir         \\n\"\n//      \"    ret                                        \\n\"\n       );\n}\n\nint main()\n{\n    int v[100];\n    return suma(v, 100);\n}\n</code></pre>\n\n<p>Why is it that gcc inserts <code>ret</code> at the end of <code>suma()</code> on <code>-O0</code>, but I have to add it myself on <code>-O3</code>?</p>\n\n<p>From <code>gcc -v</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcc version 8.2.1 20181011 (Red Hat 8.2.1-4) (GCC) \n</code></pre>\n"}, {"tags": ["c", "file", "while-loop", "pipe", "fork"], "answers": [{"tags": [], "owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "is_accepted": false, "score": 0, "last_activity_date": 1540387544, "last_edit_date": 1540387544, "creation_date": 1540385415, "answer_id": 52969482, "question_id": 52964279, "link": "https://stackoverflow.com/questions/52964279/forking-a-process-and-using-pipes-to-transfer-data-from-file-line-by-line-to-ch/52969482#52969482", "title": "Forking a process, and using pipes to transfer data from file line by line to child process", "body": "<p>In the child</p>\n\n<p>you close stdout_pipe_fds[0] twice, and not stderr_pipe_fds[0].</p>\n\n<p>The scanf(\"%s\", buf) will strip the newline from the string; you might not want that.   Stdout, if you started from a terminal, will be line buffered; that is, it will take a newline to trigger an actual write.   Since you snuck in and replaced the underlying FD, it doesn't know that a new buffering strategy may be appropriate.</p>\n\n<p>In the parent:</p>\n\n<p>you treat read and write as if they return a status; they return the number of bytes read or written.   If it reads 0 bytes, the buf will contain the values from the previous read.   I am not sure of the purpose of the read(), I would assume it just messes things up.  I think you need to draw a picture of how the file descriptors are linked.</p>\n\n<p>Suggestions:   There is a generally accepted idiom when using fork:</p>\n\n<pre><code>if ((rc = fork()) == 0) {\n    /* do child stuff */\n} else if (rc != -1) {\n    /* do parent stuff */\n} else {\n    /* do error stuff */\n}\n</code></pre>\n\n<p>Which is mainly followed to avoid warping peoples brains.   It is really hard to read when it is interleaved.  The \"K\" in K&amp;R once quipped that \"... if you're as clever as you can be when you write it, how will you ever debug it?\"</p>\n\n<p>The close(0); dup(); is much better expressed as dup2(fd, 0).   The mere fact that you can compile code on your machine assures that dup2 functions correctly.</p>\n"}], "owner": {"reputation": 1, "user_id": 8384409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea8d07316bdd434a3a57635b8e78a45?s=128&d=identicon&r=PG&f=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8384409/ninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540387544, "creation_date": 1540369760, "last_edit_date": 1540370572, "question_id": 52964279, "link": "https://stackoverflow.com/questions/52964279/forking-a-process-and-using-pipes-to-transfer-data-from-file-line-by-line-to-ch", "title": "Forking a process, and using pipes to transfer data from file line by line to child process", "body": "<p>My project is to fork and then use the parent process to read data from a file line by line and then send each line to the child process, which has to use execve to send the line as an argument for bc, and the output has to go back to the parent process. Right now, I'm just trying to send the data to the child and receive it properly, but it doesn't work. I have to use select to figure out if the child has output for the parent to get.</p>\n\n<p>I have a file with 5 lines on it, and I use a while loop to go through the file. For each line I thought I would get the line back from the child, but it only does one line or two and stops. Then I get the same line twice for some reason.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt; \n#include &lt;sys/time.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;wait.h&gt;\n\n\nint main(int argc, char *argv[])\n{\n    alarm(60);\n\n    fd_set rfds;\n    fd_set r2fds;\n    struct timeval tv;\n    int retval;\n    int retval2;\n\n    int i = argc;\n    int rc;\n    FILE *fp;\n    fp = fopen (argv[1],\"r\");\n\n    char *args[3];\n    int j = 0;\n    while (j &lt; i)\n    {\n        args[j] = argv[j+2];\n        j++;\n    }\n\n    int stdin_pipe_fds[2], stdout_pipe_fds[2], stderr_pipe_fds[2];\n\n    pipe(stdin_pipe_fds);\n    pipe(stdout_pipe_fds);\n    pipe(stderr_pipe_fds);\n\n    rc = fork();\n    if (rc == -1)\n    {\n        while (rc == -1)\n        {\n            rc = fork();\n        }\n    }\n\n    pid_t child;\n    pid_t parent;\n\n    if (rc == 0)\n    {\n        child = getpid();\n\n        close(stdin_pipe_fds[1]);\n        close(stdout_pipe_fds[0]);\n        close(stdout_pipe_fds[0]);\n\n        close(0);\n        dup(stdin_pipe_fds[0]);//, 0);\n        close(stdin_pipe_fds[0]);\n        close(1);\n        dup(stdout_pipe_fds[1]);//,1);\n        close(stdout_pipe_fds[1]);\n        close(2);\n        dup(stderr_pipe_fds[1]);//,2);\n        close(stderr_pipe_fds[1]);\n    }\n\n    if (rc &gt; 0)\n    {\n        parent = getpid();\n\n        close(stdin_pipe_fds[0]);\n        close(stdout_pipe_fds[1]);\n        close(stderr_pipe_fds[1]);\n    }\n\n    char str[100];\n    char buf2[100];\n    char buf[100];\n\n    FD_ZERO(&amp;rfds);\n    FD_SET(stdout_pipe_fds[0], &amp;rfds);\n\n    tv.tv_sec = 1;\n    tv.tv_usec = 0;\n\n\n\n    while ((fgets(str,100,fp)) != NULL)\n    {       \n        if (rc &gt; 0)\n        {   \n            int wstatus;\n            int wsta;\n            int status;\n            wsta = write(stdin_pipe_fds[1],str,strlen(str));\n            retval = select(FD_SETSIZE, &amp;rfds, NULL, NULL, &amp;tv);\n\n            if (FD_ISSET(stdout_pipe_fds[0], &amp;rfds))\n            {\n                wstatus = read(stdout_pipe_fds[0], buf2, 100);\n                printf(\"From child: %s\\n\",buf2);\n                if (wstatus == -1)\n                {\n                    printf(\"read failed\\n\");\n                    //continue;\n                }\n                //wsta = write(stdin_pipe_fds[1],str,strlen(str));\n            }\n\n\n        }\n\n        if (rc == 0)\n        {\n            alarm(60);\n\n            scanf(\"%s\",buf);\n            printf(\"%s\", buf);\n        }       \n    }\n\n    fclose(fp);\n}\n</code></pre>\n"}, {"tags": ["c", "gif"], "comments": [{"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "edited": false, "score": 0, "creation_date": 1540369688, "post_id": 52964204, "comment_id": 92835174, "body": "Please insert the relevant code parts if you want somebody to help you."}, {"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1540827879, "post_id": 52964204, "comment_id": 92997873, "body": "Is using <code>libgd</code> a must? I`ve got a nice little header-only <a href=\"https://github.com/hidefromkgb/gif_load\" rel=\"nofollow noreferrer\">GIF loader</a> that seems to be just what you need: give it a callback, and it`ll get called once every frame, providing the decoded pixel data."}, {"owner": {"reputation": 182, "user_id": 5744481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Fhaw4_ktCok/AAAAAAAAAAI/AAAAAAAAGqM/uo3qqBebVeo/photo.jpg?sz=128", "display_name": "Ian Pringle", "link": "https://stackoverflow.com/users/5744481/ian-pringle"}, "reply_to_user": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1540860742, "post_id": 52964204, "comment_id": 93011072, "body": "@hidefromkgb definitely not a must. I just saw that it had some level of gif support so I thought it ought to work, but per Jose&#39;s comment below it looks like it won&#39;t work the way I want. I will take a look at GIF loader."}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "is_accepted": true, "score": 1, "last_activity_date": 1540371517, "last_edit_date": 1540371517, "creation_date": 1540370953, "answer_id": 52964657, "question_id": 52964204, "link": "https://stackoverflow.com/questions/52964204/manipulating-gifs-frame-by-frame-in-c-with-libgd/52964657#52964657", "title": "Manipulating gifs frame by frame in C with libgd", "body": "<p>If you look carefully to <a href=\"https://github.com/libgd/libgd/blob/master/src/gd_gif_in.c\" rel=\"nofollow noreferrer\">the source code</a>, you can easily find a weak implementation when using animated frames.</p>\n\n<blockquote>\n  <p>The code does not lie: when you call <code>gdImageCreateFromGif(FILE *fdFile)</code> or <code>gdImageCreateFromGifPtr (int size, void *data)</code>, it calls directly to <code>gdImageCreateFromGifCtx(gdIOCtxPtr fd)</code>, so you must <em>read'n'search</em> in that function where is the mess. The documentation has no info about it, because this library is very, very old.</p>\n</blockquote>\n\n<p>In the source code (<em>fd06f7f  on 22 Jun</em>) line 258 (<code>gdImageCreateFromGifCtx(gdIOCtxPtr fd)</code>):</p>\n\n<pre><code>for (;;) {\n    int top, left;\n    int width, height;\n\n    if(!ReadOK(fd, &amp;c, 1)) {\n        return 0;\n    }\n\n    if (c == ';') { /* GIF terminator */\n        goto terminated;\n    }\n\n    if(c == '!') { /* Extension */\n        if(!ReadOK(fd, &amp;c, 1)) {\n            return 0;\n        }\n\n        DoExtension(fd, c, &amp;Transparent, &amp;ZeroDataBlock);\n        continue;\n    }\n\n    if(c != ',') { /* Not a valid start character */\n        continue;\n    }\n\n    /*1.4//++imageCount; */\n\n    if(!ReadOK(fd, buf, 9)) {\n        return 0;\n    }\n\n    useGlobalColormap = !BitSet(buf[8], LOCALCOLORMAP);\n\n    bitPixel = 1 &lt;&lt; ((buf[8] &amp; 0x07) + 1);\n    left = LM_to_uint(buf[0], buf[1]);\n    top = LM_to_uint(buf[2], buf[3]);\n    width = LM_to_uint(buf[4], buf[5]);\n    height = LM_to_uint(buf[6], buf[7]);\n\n    if(((left + width) &gt; screen_width) || ((top + height) &gt; screen_height)) {\n        if(VERBOSE) {\n            printf(\"Frame is not confined to screen dimension.\\n\");\n        }\n        return 0;\n    }\n\n    if(!(im = gdImageCreate(width, height))) {\n        return 0;\n    }\n\n    im-&gt;interlace = BitSet(buf[8], INTERLACE);\n    if(!useGlobalColormap) {\n        if(ReadColorMap(fd, bitPixel, localColorMap)) {\n            gdImageDestroy(im);\n            return 0;\n        }\n\n        ReadImage(im, fd, width, height, localColorMap, BitSet(buf[8], INTERLACE), &amp;ZeroDataBlock);\n    } else {\n        if(!haveGlobalColormap) {\n            gdImageDestroy(im);\n            return 0;\n        }\n\n        ReadImage(im, fd, width, height, ColorMap, BitSet(buf[8], INTERLACE), &amp;ZeroDataBlock);\n    }\n\n    if(Transparent != (-1)) {\n        gdImageColorTransparent(im, Transparent);\n    }\n\n    goto terminated;\n}\n</code></pre>\n\n<p>That <code>goto</code> finishes the loop without attempt to read another frame, even.</p>\n\n<p>That's because this implementation is intended to read <strong>explicitly</strong> one frame from a gif. Only <strong>one</strong>.</p>\n\n<p>I worked with this library. Has other flaws, too. The transparency for PNG files are 7 bits, not 8 bits (one of the main reasons I used it and discard it later).</p>\n\n<p>You can pack <a href=\"https://github.com/libgd/libgd/blob/master/src/gd_gif_out.c\" rel=\"nofollow noreferrer\">animated gifs</a> with <code>gdImageGifAnimBegin(gdImagePtr im, FILE *outFile, int GlobalCM, int Loops)</code></p>\n\n<p><strong>[TL;DR]:</strong> libgd has no multiple frames option when loading. It's not intended to load animated gifs.</p>\n"}], "owner": {"reputation": 182, "user_id": 5744481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Fhaw4_ktCok/AAAAAAAAAAI/AAAAAAAAGqM/uo3qqBebVeo/photo.jpg?sz=128", "display_name": "Ian Pringle", "link": "https://stackoverflow.com/users/5744481/ian-pringle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 52964657, "answer_count": 1, "score": 1, "last_activity_date": 1540371517, "creation_date": 1540369527, "question_id": 52964204, "link": "https://stackoverflow.com/questions/52964204/manipulating-gifs-frame-by-frame-in-c-with-libgd", "title": "Manipulating gifs frame by frame in C with libgd", "body": "<p>I have a program I use to manipulate various image files. Currently it only works with static images. I want to provide support for gifs and I've been looking through the lackluster <a href=\"https://libgd.github.io/manuals/2.2.5/files/gd_gif_in-c.htm\" rel=\"nofollow noreferrer\">doc</a>u<a href=\"https://libgd.github.io/manuals/2.2.5/files/gd_gif_out-c.html\" rel=\"nofollow noreferrer\">ment</a>a<a href=\"https://libgd.github.io/manuals/2.2.5/files/gd-h.html#GifAnim\" rel=\"nofollow noreferrer\">tion</a> but cannot find any reference to how to manipulate gifs frame by frame. </p>\n\n<p>Ideally I'd like to work through the gif one frame at a time, using my other functions to manipulate each of the frames in a file and then repackage the image.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1540368866, "post_id": 52963951, "comment_id": 92834675, "body": "I&#39;m willing to bet the scope of your project includes <i>splitting the function</i> as well. So that there are now two functions, one for reading and one for writing."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1540368896, "post_id": 52963951, "comment_id": 92834691, "body": "You have to refactor your code, a function in C can take either <code>FooRead_s</code> or <code>FooWrite_s</code>, but not both for the same argument. Split de functionality as well."}, {"owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "edited": false, "score": 0, "creation_date": 1540368950, "post_id": 52963951, "comment_id": 92834714, "body": "When I asked the architect for more info he was pretty certain that only one function would remain."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1540369277, "post_id": 52963951, "comment_id": 92834918, "body": "If the architect&#39;s suggestion conflicts with how the language itself works than you should go back and iron out the details with them. Maybe there&#39;s a misunderstanding between you two."}], "answers": [{"comments": [{"owner": {"reputation": 3120, "user_id": 4402721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCNcL.jpg?s=128&g=1", "display_name": "drRobertz", "link": "https://stackoverflow.com/users/4402721/drrobertz"}, "edited": false, "score": 1, "creation_date": 1540371098, "post_id": 52964542, "comment_id": 92835967, "body": "This is IMHO the expected solution. To OP: If at all possible, please go with the tagged union (i.e., put the <code>bool write</code> in the struct) to reduce the risk of caller errors."}, {"owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "reply_to_user": {"reputation": 3120, "user_id": 4402721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCNcL.jpg?s=128&g=1", "display_name": "drRobertz", "link": "https://stackoverflow.com/users/4402721/drrobertz"}, "edited": false, "score": 0, "creation_date": 1540371672, "post_id": 52964542, "comment_id": 92836332, "body": "Yes, it is better to keep tag with union in one object."}], "tags": [], "owner": {"reputation": 1036, "user_id": 8848476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irmYE.jpg?s=128&g=1", "display_name": "ReAl", "link": "https://stackoverflow.com/users/8848476/real"}, "is_accepted": false, "score": 2, "last_activity_date": 1540370971, "last_edit_date": 1540370971, "creation_date": 1540370587, "answer_id": 52964542, "question_id": 52963951, "link": "https://stackoverflow.com/questions/52963951/structs-of-two-different-types-need-to-pass-one-to-a-function-dynamically/52964542#52964542", "title": "Structs of two different types - need to pass one to a function dynamically", "body": "<p>There are no way in C to distinguish between two or more structures without some selector parameter. One can use union of structs <code>FooRead_s</code>, <code>FooWrite_s</code> and operation selector.\nSelector can be passed as separate argument</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef union {\n    FooRead_s rs;\n    FooWrite_s ws;\n} Foo_params;\n\nvoid BarFunction(bool write, Foo_params *foo) {\n     if (write) {\n         // use foo-&gt;ws;\n     }\n     // ...\n}\n</code></pre>\n\n<p>or embedded into structure</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct {\n    bool write;\n    union {\n        FooRead_s rs;\n        FooWrite_s ws;\n    } params;\n} Foo_action;\n\nvoid BarFunction(Foo_action *foo) {\n     if (foo-&gt;write) {\n         // use foo-&gt;params.ws;\n     }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1540374244, "post_id": 52965466, "comment_id": 92837994, "body": "It may be worth pointing out that, unlike the other answer, this is a compile-time solution."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1540374069, "last_edit_date": 1540374069, "creation_date": 1540373167, "answer_id": 52965466, "question_id": 52963951, "link": "https://stackoverflow.com/questions/52963951/structs-of-two-different-types-need-to-pass-one-to-a-function-dynamically/52965466#52965466", "title": "Structs of two different types - need to pass one to a function dynamically", "body": "<p>If we correct your typedefs and write the function to accept a struct passed by pointer, as it ought to be designed, then we end up with this:</p>\n\n<pre><code>typedef struct \n{\n  int x;\n  int y;\n} FooRead_s;\n\ntypedef struct \n{\n  int z;\n} FooWrite_s;\n\nvoid BarFunction_Read (FooRead_s* foo) {\n //logic\n}\n\nvoid BarFunction_Write (FooWrite_s* foo) {\n //logic\n}\n</code></pre>\n\n<p>Now if you have the option to use the standard C language, you can then write the function call with generic programming:</p>\n\n<pre><code>#define BarFunction(foo)                    \\\n  _Generic((foo),                           \\\n           FooRead_s*:  BarFunction_Read,   \\\n           FooWrite_s*: BarFunction_Write)(foo)\n\nint main (void)\n{\n  FooRead_s read = {0};\n  FooWrite_s write = {0};\n\n  BarFunction(&amp;read);\n  BarFunction(&amp;write);\n  //BarFunction(read); compiler error here as we should have\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540374069, "creation_date": 1540368695, "last_edit_date": 1540371340, "question_id": 52963951, "link": "https://stackoverflow.com/questions/52963951/structs-of-two-different-types-need-to-pass-one-to-a-function-dynamically", "title": "Structs of two different types - need to pass one to a function dynamically", "body": "<p>Apologies in advance, I have only begun writing C 2 months ago so this is all quite new to me.</p>\n\n<p>I am working on a codebase which already had a solution implemented that needs to be changed. </p>\n\n<p>Currently, one struct holds all the variables for both read/write functionality. This needs to be modified to be two different structs, one for read, one for write.</p>\n\n<p>Below is the current implementation.</p>\n\n<pre><code>typedef struct Foo_s\n{\n int x;\n int y;\n int z;\n}\n\nBarFunction(Foo_s foo) {\n //logic\n}\n</code></pre>\n\n<p>Here is the changes that I need to do</p>\n\n<pre><code>typedef struct FooRead_s\n{\n int x;\n int y;\n}\n\ntypedef struct FooWrite_s\n{\n int z;\n}\n</code></pre>\n\n<p>The problem occurs when <code>BarFunction(Foo_s foo)</code> is called. It needs to be able to accept either <code>FooRead_s</code> or <code>FooWrite_s</code> at any given time, even though they are different. How do I allow <code>BarFunction</code> to accept both <code>FooRead_s</code> and <code>FooWrite_s</code>?</p>\n"}, {"tags": ["c", "linux", "ubuntu"], "comments": [{"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 1, "creation_date": 1540368643, "post_id": 52963832, "comment_id": 92834564, "body": "I don&#39;t see any <code>parent child</code> relation ship here between your <i>child code</i> and <i>parent code</i> ."}], "answers": [{"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1540370045, "creation_date": 1540370045, "answer_id": 52964374, "question_id": 52963832, "link": "https://stackoverflow.com/questions/52963832/how-can-i-send-a-signal-between-a-child-and-a-parent-processes-in-linux/52964374#52964374", "title": "how can I send a signal between a child and a parent processes in linux", "body": "<p>Your code has several problems:</p>\n\n<ul>\n<li>You try to pass some pid through a file, but you can use the <code>getppid()</code> function (get parent id)</li>\n<li>You have some child code, but it is not called</li>\n<li>no signal is launched</li>\n</ul>\n\n<p>So your code can be corrected this way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;signal.h&gt;\n\nvoid parent_handler(int the_sig)\n{\n    if (the_sig == SIGUSR2){\n        printf(\"sigusr2 received in parent\\n\");            \n    }\n}\n\nvoid child_handler(int the_sig)\n{\n    if (the_sig == SIGUSR1){\n        printf(\"sigusr1 received in child\\n\");\n        kill(getppid(), SIGUSR2);\n        exit(1);\n    }\n}\n\nint child_function()\n{\n    /* prepare to receive signal */\n    sigset(SIGUSR1,child_handler);\n\n    while(1) {\n        printf(\"Waiting..\");\n        fflush(stdout);\n        /* wait for signal */\n        sigpause(SIGUSR1);\n    }\n\n    return 0;\n}\n\nint main()\n{\n    int cpid, ppid;\n    ppid = getpid();\n    printf(\"My process ID is %d\\n\", ppid);\n\n    cpid = fork();\n\n    if ( cpid == 0 ) {\n        printf(\"I am the child  =&gt; PID = %d\\n\", getpid());\n        child_function();\n        return 0;\n    }\n    else\n        printf(\"I am the parent =&gt; PID = %d, child ID = %d\\n\", getpid(), cpid);\n\n    /* child will never reach this point */\n    sleep(1);\n\n    /* prepare parent to received signal */\n    sigset(SIGUSR2, parent_handler);\n\n    /* send signal to child */\n    kill(cpid, SIGUSR1);\n\n    sleep(1);\n\n    return 0;\n}  \n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9645203, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UA8gd6bMyxU/AAAAAAAAAAI/AAAAAAAAAcc/WMlJGmJyKJI/photo.jpg?sz=128", "display_name": "fayez jabra", "link": "https://stackoverflow.com/users/9645203/fayez-jabra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540370045, "creation_date": 1540368288, "last_edit_date": 1540368685, "question_id": 52963832, "link": "https://stackoverflow.com/questions/52963832/how-can-i-send-a-signal-between-a-child-and-a-parent-processes-in-linux", "title": "how can I send a signal between a child and a parent processes in linux", "body": "<p>I have two cods the first one is for the parent which sends a signal (<code>SIGUSER1</code>) to the child and when the child receive it he should print that he received it. </p>\n\n<p>Parent code </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n\nvoid sighand(int);\nint main()\n{\n    int cpid, ppid;\n    ppid = getpid();\n    printf(\"My process ID is %d\\n\", ppid);\n\n    FILE *fp1;\n    fp1 = fopen(\"cpid.txt\", \"w+\");\n\n    cpid = fork();\n\n    if ( cpid == 0 ) {\n        printf(\"I am the child  =&gt; PID = %d\\n\", getpid());\n    }\n    else\n        printf(\"I am the parent =&gt; PID = %d, child ID = %d\\n\", getpid(), cpid);\n\n    fprintf(fp1, \"%d\\n\", cpid);\n    // kill(cpid, SIGUSR1);//id, signal, send\n    sigset(SIGUSR2, sighand);\n\n    return 0;\n}  \n\nvoid sighand(int the_sig){\n    if (the_sig == SIGUSR2){\n        printf(\"sigusr2 received\");\n        exit(1);\n    }\n}\n</code></pre>\n\n<p>Child code </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n\nvoid sighand1(int);\nint main()\n{\n    FILE *fp1;\n    int pid;\n    fp1 = fopen(\"cpid.txt\", \"r\");\n    fscanf(fp1, \"%d,\", &amp;pid);\n\n    sigset(SIGUSR1,sighand1);\n\n    while(1) {\n        printf(\"Waiting..\");\n        sigpause(SIGUSR1);\n    }\n\n    return 0;\n}\n\nvoid sighand1(int the_sig)\n{\n    if (the_sig == SIGUSR1){\n        printf(\"sigusr1 received\");\n        exit(1);\n    }\n}\n</code></pre>\n\n<p>When I start the code it prints that the process (child) was created then when I send a signal it wont do any thing the child stuck  in a loop or the wait and the parent wont do anything can any one tell me where did i go wrong in my code or logic.</p>\n"}, {"tags": ["c", "function-pointers"], "answers": [{"comments": [{"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1540369124, "post_id": 52963867, "comment_id": 92834811, "body": "Great answer, thank you. Yes, I had to do an explicit cast to void* and the other way round to stop the compiler from complaining."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1540369404, "post_id": 52963867, "comment_id": 92834995, "body": "@TomL. - You had to cast <i>to</i> <code>void*</code>? That&#39;s rather odd. That one is an implicit conversion. Or do you mean you had to cast the function pointer? That was risky."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1540369443, "post_id": 52963867, "comment_id": 92835026, "body": "I meant the function pointer, sorry. And yes, that was the reason why I didn&#39;t like it."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1540368376, "creation_date": 1540368376, "answer_id": 52963867, "question_id": 52963814, "link": "https://stackoverflow.com/questions/52963814/function-pointer-with-struct-parameter-inside-struct/52963867#52963867", "title": "Function pointer with struct parameter inside struct", "body": "<p>It's done  by not being remiss and providing a struct tag:</p>\n\n<pre><code>typedef struct hbus_options {\n    uint32_t baudrate;\n    ... some other internally used values here\n    void (*request_received)(struct hbus_options * hbus); \n} hbus_options_t;\n</code></pre>\n\n<p>Besides readability, the compiler will also complain if you pass a pointer to something other than the intended struct type.</p>\n\n<p>Adding a tag also allows for looser coupling of components. One can forward declare a structure, but not a type alias.</p>\n"}], "owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52963867, "answer_count": 1, "score": 2, "last_activity_date": 1540368376, "creation_date": 1540368235, "question_id": 52963814, "link": "https://stackoverflow.com/questions/52963814/function-pointer-with-struct-parameter-inside-struct", "title": "Function pointer with struct parameter inside struct", "body": "<p>I have a struct which currently looks like this (abbreviated to show only the essential parts):</p>\n\n<pre><code>typedef struct {\n    uint32_t baudrate;\n    ... some other internally used values here\n    void (*request_received)(void* hbus); //&lt; this is what I'm talking about\n} hbus_options_t;\n</code></pre>\n\n<p>This works. Basically it contains a function pointer which takes a pointer to a parameter of type void.</p>\n\n<p>What I would actually like is for this to be easier to understand:</p>\n\n<pre><code>typedef struct {\n    uint32_t baudrate;\n    ... some other internally used values here\n    void (*request_received)(hbus_options_t* hbus); //&lt; this doesn't work\n} hbus_options_t;\n</code></pre>\n\n<p>Obviously the compiler needs to know the struct before I can use it. How is this done usually? Using a void pointer works but it's harder to understand.</p>\n"}, {"tags": ["c", "shell", "binary", "hexdump"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1540367907, "post_id": 52963618, "comment_id": 92834148, "body": "Sorry, I don&#39;t understand the question. Can you also post some code to illustrate what you are trying to do?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1540367995, "post_id": 52963618, "comment_id": 92834188, "body": "Please read the <a href=\"http://stackoverflow.com/tour\"><b>About</b></a> page soon and also visit the links describing <a href=\"http://stackoverflow.com/questions/how-to-ask\"><b>How to Ask a Question</b></a> and <a href=\"http://stackoverflow.com/help/mcve\"><b>How to create a Minimal, Complete, and Verifiable example</b></a>. Providing the necessary details, including your code, and associated errors, if any, will allow everyone here to help you with your question."}, {"owner": {"reputation": 105, "user_id": 8064295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605a5080ebf3a877a665fc1ab94d3694?s=128&d=identicon&r=PG&f=1", "display_name": "xksyvone", "link": "https://stackoverflow.com/users/8064295/xksyvone"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1540368725, "post_id": 52963618, "comment_id": 92834614, "body": "@KenY-N I have updated the description with part code."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540369831, "post_id": 52963618, "comment_id": 92835241, "body": "Are you aware that <code>30</code> is hex <code>0x30</code> which is the ascii value of <code>0</code> digit? You receive the initial <code>00000000</code> of your file. I would guess the file is a text file holding a hexdump, not a binary file."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540369883, "post_id": 52963618, "comment_id": 92835274, "body": "BTW: What is your question? Where are you stuck? What did you expect to get?"}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 1, "creation_date": 1540373574, "post_id": 52963618, "comment_id": 92837565, "body": "The showed content seems to be already a hexdump. If you do a hexdump on it, you get a hexdump of a hexdump..."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540382210, "post_id": 52963618, "comment_id": 92842956, "body": "In addition to @Gerhardh: I believe your exposed sample dump has an error: It should be <code>30 30 30 30 30 30 30 30 20 30 34</code> (the <code>20</code> was missing) which would be in ASCII <code>00000000 04</code>..."}, {"owner": {"reputation": 105, "user_id": 8064295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605a5080ebf3a877a665fc1ab94d3694?s=128&d=identicon&r=PG&f=1", "display_name": "xksyvone", "link": "https://stackoverflow.com/users/8064295/xksyvone"}, "edited": false, "score": 0, "creation_date": 1540383535, "post_id": 52963618, "comment_id": 92843791, "body": "I want to get the real binary content 0403 1007 ... I thought i directly get the output of command &#39;hexdump file&#39;, so it is text. I know 30 represents 0 in my binary file, but i don&#39;t want to get them."}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 1, "creation_date": 1540387373, "post_id": 52963618, "comment_id": 92846517, "body": "0403 1007... is no binary content. Thats a hex representation of the binary content."}], "owner": {"reputation": 105, "user_id": 8064295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605a5080ebf3a877a665fc1ab94d3694?s=128&d=identicon&r=PG&f=1", "display_name": "xksyvone", "link": "https://stackoverflow.com/users/8064295/xksyvone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540369145, "creation_date": 1540367631, "last_edit_date": 1540369145, "question_id": 52963618, "link": "https://stackoverflow.com/questions/52963618/how-to-read-binary-file-to-c-program-running-shell-command", "title": "how to read binary file to c program running shell command", "body": "<p>In c program, i need to read a binary file on remote, so need to call SHELL command to get the file content. \nThe binary file content is as follows.</p>\n\n<pre><code>0000000 0403 1007 0000 0000 0000 0600 0067 0000\n0000010 0308 1e00 4946 494e 4153 2052 4f43 5052\n0000020 202e 2020 0000 6590 5446 584c 3538 3137\n0000030 3344 4e42 2d4c 3545 2042 2020 5203 9b00\n0000040 1a00 0000 4a41 3052 3745 2054 2020 2020\n0000050 2020 2020 3031 3231 3731 2020 f068 de03\n0000060 0000 0000 0000 0000 0000 0000 0000 0000\n*\n0000100\n</code></pre>\n\n<p>Then i call SHELL command 'hexdump file', and get the command output, found the output buffer are as follows.</p>\n\n<pre><code>30 30 30 30 30 30 30 30 30 34\n</code></pre>\n\n<p>part code:</p>\n\n<pre><code>int sock_new = setup_vmi();\n...\nrc = write_buf(sock_new, TYPE_COMMAND, 0, cmd, strlen(cmd) + 1); //cmd is hexdump file\n\n...\nrc = read_buf(sock_new, &amp;type, &amp;info, &amp;retbuf, &amp;retbuf_size);//retbuf is the file content\n</code></pre>\n\n<p>And read_buf is calling the follows function.</p>\n\n<pre><code>static __inline ssize_t\npsread(\nint fd,\nchar *buf_base,\nsize_t buf_size)\n{\nssize_t n;\nssize_t buf_done = 0;\n  again:\ndo {\n    n = read(fd, buf_base, buf_size);\n} while (n &lt; 0 &amp;&amp; errno == EINTR);\nif (n &gt; 0) {\n    buf_done += n;\n}\nif (n &gt; 0 &amp;&amp; n &lt; buf_size) {\n    buf_base += n;\n    buf_size -= n;\n    goto again;\n}\nreturn (n &gt;= 0) ? buf_done : n;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "server", "client"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1540367940, "post_id": 52963572, "comment_id": 92834160, "body": "What do you mean by &quot;it is read as 20736&quot; ? How did you conclude that ? Which part of the code is not behaving as you expect ? How is it behaving ? How did you expect it to behave ?"}, {"owner": {"reputation": 11, "user_id": 10506316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7jrd5o0rh5I/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4hw15kB3E7JEp8_z76wGo-eaf6A/mo/photo.jpg?sz=128", "display_name": "Narwatee", "link": "https://stackoverflow.com/users/10506316/narwatee"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1540368167, "post_id": 52963572, "comment_id": 92834302, "body": "My bad I guess I wasn&#39;t clear enough, the printf(&quot;%c&quot;, &amp;receiveString) is printing 20736 in the first server code snippet, when the client is sending the char type variable  &#39;optionSelected&#39; which has the value &#39;Q&#39; which as been input by the user. It should be printing a &#39;Q&#39;. It is also returning true in if statements &#39;if (receiveString == 20736)&#39; and returning false in if statements &#39;if (receiveString == &#39;Q&#39;)."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1540368535, "post_id": 52963572, "comment_id": 92834517, "body": "Be sure to use <code>printf(&quot;%c&quot;, receiveString)</code> - <i>not</i> <code>printf(&quot;%c&quot;, &amp;receiveString)</code>. I.e. <code>printf()</code> expects the <i>value</i> of <code>receiveString</code> - not its address."}, {"owner": {"reputation": 11, "user_id": 10506316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7jrd5o0rh5I/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4hw15kB3E7JEp8_z76wGo-eaf6A/mo/photo.jpg?sz=128", "display_name": "Narwatee", "link": "https://stackoverflow.com/users/10506316/narwatee"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1540368677, "post_id": 52963572, "comment_id": 92834587, "body": "@david I have already tried that but on compile it gives me an error if I&#39;m not pointing to the address. edit: wait sorry I misread that, that was a mistype in the comment and question, you can see in the code I don&#39;t print &amp;receiveString, but just receiveString and still encounter the issue."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1540369150, "post_id": 52963572, "comment_id": 92834827, "body": "The ASCII code for &#39;Q&#39; is 81. (ASCII codes are always between 0 and 255.) A good starting point would be to use a debugger and place a breakpoint after <code>recv()</code>. Then examine the values of both <code>numbytes</code> and <code>receiveString</code> explicitly. It&#39;s possible <code>recv()</code> is returning <code>0</code> - which you are not checking for in your code."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540369589, "post_id": 52963572, "comment_id": 92835117, "body": "A single character can never hold the value 20736. And even if it would hold that value, <code>printf(&quot;%c&quot;);</code> would print a single character."}, {"owner": {"reputation": 11, "user_id": 10506316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7jrd5o0rh5I/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4hw15kB3E7JEp8_z76wGo-eaf6A/mo/photo.jpg?sz=128", "display_name": "Narwatee", "link": "https://stackoverflow.com/users/10506316/narwatee"}, "edited": false, "score": 0, "creation_date": 1540369866, "post_id": 52963572, "comment_id": 92835260, "body": "Thanks david, printing the value of numbytes it prints 1, will the values be different for numbytes and receiveString from what they are actually printing if I use a debugger? If not, then recv() does not seem to be returning 0. Its also worth noting that sending the server letters other than &#39;Q&#39; will print different numbers."}, {"owner": {"reputation": 11, "user_id": 10506316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7jrd5o0rh5I/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4hw15kB3E7JEp8_z76wGo-eaf6A/mo/photo.jpg?sz=128", "display_name": "Narwatee", "link": "https://stackoverflow.com/users/10506316/narwatee"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540370125, "post_id": 52963572, "comment_id": 92835404, "body": "@Gerhardh, I can upload screenshots of the output to the question if you&#39;d like, but I can assure you that it is printing &#39;20736&#39; for Q, and other 5 digit numbers for other letters. You&#39;re right about char not being able to contain this value though, because I cannot compare receiveString to 20736 or &#39;20736&#39; without getting a compile error."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540370259, "post_id": 52963572, "comment_id": 92835494, "body": "There is no use for a screenshot if you can copy&amp;paste text. Did you verify that the &quot;20736&quot; is printed in one call to <code>printf</code>? You might call your function multiple times and only print 1 digit at a time? To verify you could change format string to <code>&quot;%c &quot;</code>."}, {"owner": {"reputation": 11, "user_id": 10506316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7jrd5o0rh5I/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4hw15kB3E7JEp8_z76wGo-eaf6A/mo/photo.jpg?sz=128", "display_name": "Narwatee", "link": "https://stackoverflow.com/users/10506316/narwatee"}, "edited": false, "score": 0, "creation_date": 1540370485, "post_id": 52963572, "comment_id": 92835612, "body": "I have verfied that 20736 is printed in a single printf call, because I have changed it to &quot;%c \\n&quot; while trying to fix the issue, still prints 20736 on a single line."}, {"owner": {"reputation": 271, "user_id": 1150478, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/25f168ab7293f5cc6151896bd7238af9?s=128&d=identicon&r=PG", "display_name": "colin", "link": "https://stackoverflow.com/users/1150478/colin"}, "edited": false, "score": 0, "creation_date": 1540383813, "post_id": 52963572, "comment_id": 92843993, "body": "How did you call <code>playGame</code> function at your server side ? Did you put that function in a loop ? And since you use client - server pattern, how many clients are connecting to your server ? Maybe you have multiple clients, and <code>playGame</code> function at your server side get called more than once, so you have more than one character get printed on the screen ? Did you use blocking IO or non-blocking IO ? Like other people said, it&#39;s impossible for <code>print(&quot;%c&quot;, receivedChar);</code> to print a number like 20736."}], "answers": [{"tags": [], "owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "is_accepted": false, "score": 0, "last_activity_date": 1540375342, "creation_date": 1540375342, "answer_id": 52966196, "question_id": 52963572, "link": "https://stackoverflow.com/questions/52963572/c-client-sending-char-but-server-is-receiving-a-number/52966196#52966196", "title": "c client sending char but server is receiving a number", "body": "<p>The server cannot read 20736, as a <code>char</code> can only have values 0 to 255 or -128 to 127. A <code>char</code> can be signed or unsigned, the c standard allows both. If you require an unsigned one, you must write <code>unsigned char</code> and if you require a signed one, you must write <code>signed char</code>; if you just write <code>char</code>, you leave it up to the compiler to decide that for you. But all the widespread platforms today define a char to be one byte and a byte has 8 bits on all modern platforms and thus a single byte can for sure never be 20736.</p>\n\n<p>Could the problem be, that you are printing multiple numbers? As <code>printf</code> will not add a space after output or a new line. So this code</p>\n\n<pre><code>prinft(\"10\");\nprinft(\"20\");\nprinft(\"30\");\n</code></pre>\n\n<p>will actually print</p>\n\n<pre><code>102030\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10506316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7jrd5o0rh5I/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4hw15kB3E7JEp8_z76wGo-eaf6A/mo/photo.jpg?sz=128", "display_name": "Narwatee", "link": "https://stackoverflow.com/users/10506316/narwatee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1540375342, "creation_date": 1540367498, "last_edit_date": 1540370000, "question_id": 52963572, "link": "https://stackoverflow.com/questions/52963572/c-client-sending-char-but-server-is-receiving-a-number", "title": "c client sending char but server is receiving a number", "body": "<p>for an assignment we are required to make a game with client-server functionality. Currently I am trying to send a single character from the client to the server which is associated with an option. In this case I am sending the character 'Q' which is input by the player using the scanf() function. When input the client is correctly reading the char as a 'Q' but when sent to the server, it is read as 20736 which I'm guessing is the ascii code for the letter Q. </p>\n\n<p>This is extra strange because I send a bunch of characters from the server to client earlier in the code using the same method and it is recieved as a char just fine. Any idea why this is happening in one case and not the other? This is my first experience with using C so there's probably something simple I'm missing.</p>\n\n<p>Below is the code from the client and server where the client is sending an input from the client to the server. Currently the server just prints the received character to see if its working correctly. The GameBoard and GameState types are structs that have a 2d array of chars called tiles, aswell as some other variables.</p>\n\n<p>The printf(\"%c\", receiveString) is printing 20736 in the first server code snippet, when the client is sending the char type variable 'optionSelected' which has the value 'Q' which as been input by the user. It should be printing a 'Q'. It is also returning false in if statements 'if (receiveString == 'Q').</p>\n\n<p>client:</p>\n\n<pre><code>void playGame(int sockfd) {\n    int remainingMines = 10, gameOver = 0;\n    char optionSelected;\n    gameBoard board = receiveBoardState(sockfd);\n\n    while(gameOver == 0) {\n        printf(\"\\n\\n\\nRemaining mines: %d \\n\\n\", remainingMines);\n        displayBoard(board);\n\n        printf(\"\\n\\nChoose an option: \\n&lt;R&gt; Reveal tile\\n&lt;P&gt; Place flag\\n&lt;Q&gt; Quit game \\n\\n Option (R, P, Q):\");\n        scanf(\"%c\", &amp;optionSelected);\n        send(sockfd, &amp;optionSelected, sizeof(char), 0);\n        if (optionSelected == 'Q') {\n            gameOver = 1;\n        }\n    }\n}\n</code></pre>\n\n<p>Server:</p>\n\n<pre><code>void playGame(int new_fd) {\n    char receiveString;\n    int numbytes, gameOver = 0;\n    GameState game = constructGamestate();\n    sendBoard(game, new_fd);\n\n    if ((numbytes=recv(new_fd, &amp;receiveString, sizeof(char), 0)) == -1) {\n        perror(\"recv\");\n        exit(1);\n    }\n    printf(\"%c\", receiveString);    \n}\n</code></pre>\n\n<p>Also here are the snippets of code where the client is correctly receiving and printing a char that was sent to it from the server.</p>\n\n<p>Client:</p>\n\n<pre><code>gameBoard receiveBoardState(int sockfd) {\n\n    gameBoard board;\n    char receiveData;\n    int numbytes;\n\n    for(int i = 0; i &lt; NUM_TILES_X; i++) {\n        for(int j = 0; j &lt; NUM_TILES_Y; j++) {\n            if ((numbytes=recv(sockfd, &amp;receiveData, sizeof(char), 0)) == -1) {\n                perror(\"recv\");\n                exit(1);\n            } else board.tiles[i][j] = receiveData;\n        }\n    }\n    return board;\n}\n</code></pre>\n\n<p>Server:</p>\n\n<pre><code>void sendBoard(GameState game,int new_fd) {\n    char * uiElements = \"ABCDEFGHI\";\n    char sendChar;\n    printf(\"   1 2 3 4 5 6 7 8 9\\n\");\n    printf(\"---------------------\");\n    for(int i = 0; i &lt; 9; i++) {\n        for(int j = -1; j &lt; 9; j++) {\n            if (j == -1) {\n                printf(\"\\n%c |\",uiElements[i]);\n            } else {\n                sendChar = (game.tiles[i][j].adjacent_mines + '0');\n                if (game.tiles[i][j].is_mine == true)\n                    sendChar = '*';\n                printf(\" %c\", sendChar);\n                send(new_fd, &amp;sendChar, sizeof(char), 0);\n            }       \n        }\n    }\n}\n</code></pre>\n\n<p>Thank you all in advance for your help :)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 6, "creation_date": 1540367456, "post_id": 52963371, "comment_id": 92833895, "body": "I reopened the question; the use of prefix increment in the example is well-defined (as opposed to those in the &quot;dupe&quot;). Please, don&#39;t vote-for-close before you have thought things through."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 2, "creation_date": 1540367562, "post_id": 52963371, "comment_id": 92833952, "body": "you might want to read up on <a href=\"https://softwareengineering.stackexchange.com/questions/201896/what-is-short-circuiting-in-c-like-languages\">short-circuit behavior</a> of logical <code>&amp;&amp;</code> and <code>||</code>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10257727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd71810e0965220d7e41071cde4e581f?s=128&d=identicon&r=PG&f=1", "display_name": "Omkar Kadam", "link": "https://stackoverflow.com/users/10257727/omkar-kadam"}, "edited": false, "score": 0, "creation_date": 1540367429, "post_id": 52963519, "comment_id": 92833880, "body": "Shouldn&#39;t  ++b&amp;&amp;++c  be evaluated first ,since precedence of &amp;&amp; is before ||"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 17, "user_id": 10257727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd71810e0965220d7e41071cde4e581f?s=128&d=identicon&r=PG&f=1", "display_name": "Omkar Kadam", "link": "https://stackoverflow.com/users/10257727/omkar-kadam"}, "edited": false, "score": 2, "creation_date": 1540367536, "post_id": 52963519, "comment_id": 92833941, "body": "@OmkarKadam You mixed up the evaluation order (left to right in this example) and operator precedence ( &amp;&amp; ties more than || )."}, {"owner": {"reputation": 143, "user_id": 10058259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10e35ad893c327e0d29441025c49fa2?s=128&d=identicon&r=PG&f=1", "display_name": "SmarthBansal", "link": "https://stackoverflow.com/users/10058259/smarthbansal"}, "edited": false, "score": 0, "creation_date": 1548381782, "post_id": 52963519, "comment_id": 95530733, "body": "Why doesn&#39;t the expression in the braces get evaluated first (the &amp;&amp;)? As far as I know, the c compiler evaluates parenthesis before anything else. (i&#39;m still new)"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 143, "user_id": 10058259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10e35ad893c327e0d29441025c49fa2?s=128&d=identicon&r=PG&f=1", "display_name": "SmarthBansal", "link": "https://stackoverflow.com/users/10058259/smarthbansal"}, "edited": false, "score": 0, "creation_date": 1548414506, "post_id": 52963519, "comment_id": 95542033, "body": "@SmarthBansal There is a special rule for <code>||</code> which specifies the left-hand side is evaluated first (and the right-hand side is not evaluated if the condition was already true, see <a href=\"https://en.cppreference.com/w/c/language/operator_logical\" rel=\"nofollow noreferrer\">short-circuit evaluation</a>). Please also see the links I provided with the answer."}], "tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 3, "last_activity_date": 1540368834, "last_edit_date": 1540368834, "creation_date": 1540367312, "answer_id": 52963519, "question_id": 52963371, "link": "https://stackoverflow.com/questions/52963371/c-operator-precedence-of-operator-and/52963519#52963519", "title": "C operator precedence of operator &amp;&amp; and ||", "body": "<p>Precisely because <a href=\"https://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\"><code>&amp;&amp;</code> has more precedence than <code>||</code></a>, the statement:</p>\n\n<pre><code>d = ++a || ++b &amp;&amp; ++c;\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>d = ++a || (++b &amp;&amp; ++c);\n</code></pre>\n\n<p>Now, <code>++a</code> is evaluated and tested first (due to the rules of <a href=\"https://en.cppreference.com/w/c/language/eval_order\" rel=\"nofollow noreferrer\">evaluation order</a> for operator <code>||</code>). This ends up being <code>-2</code>.</p>\n\n<p>Since it is non-zero, the result is true (<code>1</code>). Therefore, the other part of the expression (<code>++b &amp;&amp; ++c</code>) is <em>not</em> evaluated, due to the shortcut mechanics of the <code>||</code> operator.</p>\n\n<p>Consequently, <code>d</code> gets assigned <code>1</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 10257727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd71810e0965220d7e41071cde4e581f?s=128&d=identicon&r=PG&f=1", "display_name": "Omkar Kadam", "link": "https://stackoverflow.com/users/10257727/omkar-kadam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1540367851, "answer_count": 1, "score": -1, "last_activity_date": 1540368926, "creation_date": 1540366795, "last_edit_date": 1540368926, "question_id": 52963371, "link": "https://stackoverflow.com/questions/52963371/c-operator-precedence-of-operator-and", "closed_reason": "Duplicate", "title": "C operator precedence of operator &amp;&amp; and ||", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{ \n    int a = -3, b = 2, c = 0, d;\n    d = ++a || ++b &amp;&amp; ++c;\n    printf(\"%d %d %d %d\", a, b, c, d);\n    return 0;\n}\n</code></pre>\n\n<p>The output of program is:</p>\n\n<pre><code>-2 2 0 1\n</code></pre>\n\n<p>Compiler is evaluating the OR (<code>||</code>) operator before AND (<code>&amp;&amp;</code>) but the AND (<code>&amp;&amp;</code>) operator comes before OR (<code>||</code>) in operator precedence.</p>\n\n<p>Please do explain why this happens.</p>\n"}, {"tags": ["c", "testing", "input", "scanf"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1540366725, "post_id": 52963330, "comment_id": 92833465, "body": "try <code>if (scanf(....) != 6)</code>."}, {"owner": {"reputation": 71, "user_id": 8585029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d13eb60f466ebadbb315f31deee439?s=128&d=identicon&r=PG&f=1", "display_name": "jirick", "link": "https://stackoverflow.com/users/8585029/jirick"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540367319, "post_id": 52963330, "comment_id": 92833804, "body": "It works, but how can I accomplish the &#39;Wrong input&#39; when the input is not complete? F.e. if I enter only &#39;1 x^2 + 1 x + 1 = 0&#39; it waits for next possible input..."}, {"owner": {"reputation": 137, "user_id": 637466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a6d6eacc75c5000a7e322f72f02f4b?s=128&d=identicon&r=PG", "display_name": "aPhilRa", "link": "https://stackoverflow.com/users/637466/aphilra"}, "edited": false, "score": 0, "creation_date": 1540367908, "post_id": 52963330, "comment_id": 92834149, "body": "You will probably have to start reading user input as a string of characters and parse it yourself."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540368043, "post_id": 52963330, "comment_id": 92834220, "body": "@Ji\u0159&#237;Pa\u0161ek Check my answer it tells you how to handle your use case."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 2, "last_activity_date": 1540370440, "last_edit_date": 1540370440, "creation_date": 1540368008, "answer_id": 52963758, "question_id": 52963330, "link": "https://stackoverflow.com/questions/52963330/c-scanf-input-testing-for-expected-input-format/52963758#52963758", "title": "C Scanf input testing for expected input format", "body": "<blockquote>\n  <p>if I enter only '1 x^2 + 1 x + 1 = 0' it waits for next possible\n  input.</p>\n</blockquote>\n\n<p>In that case read complete input using <code>fgets</code> and parse the values using <code>sscanf</code> as below.</p>\n\n<pre><code>  char buf[100];\n  fgets(buf,sizeof buf,stdin);\n\n  int r = sscanf(buf,\"%f x^2 + %f x + %f = %f x^2 + %f x + %f\", &amp;a, &amp;b, &amp;c, &amp;d, &amp;e, &amp;f);\n  if (r!=6)\n     printf(\"Wrong input\\n\");\n  else\n     printf(\"correct\\n\");\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8585029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d13eb60f466ebadbb315f31deee439?s=128&d=identicon&r=PG&f=1", "display_name": "jirick", "link": "https://stackoverflow.com/users/8585029/jirick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 52963758, "answer_count": 1, "score": 3, "last_activity_date": 1540370440, "creation_date": 1540366625, "last_edit_date": 1540366737, "question_id": 52963330, "link": "https://stackoverflow.com/questions/52963330/c-scanf-input-testing-for-expected-input-format", "title": "C Scanf input testing for expected input format", "body": "<p>I need to make a simple C program which will solve quadratic equation in expected format that needs to be like this: </p>\n\n<blockquote>\n  <p>a x^2 + b x + c = d x^2 + e x + f</p>\n</blockquote>\n\n<p>I'm using scanf to read the input, and it works as expected. But I need to implement some input testing for my scanf reading which is like that right now:</p>\n\n<pre><code>scanf(\"%f x^2 + %f x + %f = %f x^2 + %f x + %f\", &amp;a, &amp;b, &amp;c, &amp;d, &amp;e, &amp;f);\n</code></pre>\n\n<p>I need to <code>printf(\"Wrong input\\n\");</code> for every input like f.e. </p>\n\n<p><em>'abc', '1 x^2 + 1 x + 1 = 0', 'x^3...'</em></p>\n\n<p>I tried the <code>if (scanf() != 1)</code>, but it prints the 'Wrong output' every time.\nAny ideas about how can I accomplish that?   </p>\n"}, {"tags": ["c", "thread-safety", "manpage"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540365495, "post_id": 52962897, "comment_id": 92832748, "body": "The POSIX reference says that the functions doesn&#39;t need to be thread-safe, it&#39;s up to the specific implementations. Also note that the POSIX reference also says that <code>ftw</code> is marked as obsolescent, so please try to avoid using it."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1540373983, "post_id": 52962897, "comment_id": 92837824, "body": "The <i>Attributes</i> section in all man pages in the <a href=\"http://man7.org/linux/man-pages/\" rel=\"nofollow noreferrer\">Linux man pages project</a> refer to the GNU C library implementation, as explained in the <a href=\"http://man7.org/linux/man-pages/man7/attributes.7.html\" rel=\"nofollow noreferrer\">man 7 attributes</a> page explaining that section. So, those attributes apply if you are using the GNU C library."}, {"owner": {"reputation": 340, "user_id": 7066872, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DIBIAsbq4Tk/AAAAAAAAAAI/AAAAAAAAHzM/F-_1T8MeBdc/photo.jpg?sz=128", "display_name": "H. Jang", "link": "https://stackoverflow.com/users/7066872/h-jang"}, "edited": false, "score": 0, "creation_date": 1540446341, "post_id": 52962897, "comment_id": 92870177, "body": "Thanks for your comments and answer. But I still wonder why does the page from man7.org say <code>ftw()</code> is MT-sfae? Is it based on POSIX?"}], "answers": [{"tags": [], "owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "is_accepted": false, "score": 1, "last_activity_date": 1540378018, "creation_date": 1540378018, "answer_id": 52967045, "question_id": 52962897, "link": "https://stackoverflow.com/questions/52962897/questions-about-thread-safety-of-nftw-and-ftw/52967045#52967045", "title": "Questions about thread-safety of nftw() and ftw()", "body": "<p>The fact that POSIX says a function is not multithread-safe only means \"it is not guaranteed to be multithread-safe\", so you cannot expect it to be or rely that it is. However, it does not mean that it is forbidden for implementations to make it multithread-safe. Implementations may always apply stronger guarantees than the standard requires, they just must not apply weaker ones.</p>\n"}], "owner": {"reputation": 340, "user_id": 7066872, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DIBIAsbq4Tk/AAAAAAAAAAI/AAAAAAAAHzM/F-_1T8MeBdc/photo.jpg?sz=128", "display_name": "H. Jang", "link": "https://stackoverflow.com/users/7066872/h-jang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540446363, "creation_date": 1540364986, "last_edit_date": 1540446363, "question_id": 52962897, "link": "https://stackoverflow.com/questions/52962897/questions-about-thread-safety-of-nftw-and-ftw", "title": "Questions about thread-safety of nftw() and ftw()", "body": "<p>I read two man pages(<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/ftw.html\" rel=\"nofollow noreferrer\">ftw</a>, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/nftw.html\" rel=\"nofollow noreferrer\">nftw</a>) from opengroup.org, so I thought <code>ftw()</code> and <code>nftw()</code> do not guarantee thread-safety.</p>\n\n<p>But I've found another <a href=\"http://man7.org/linux/man-pages/man3/nftw.3.html\" rel=\"nofollow noreferrer\">page</a> about these functions from man7.org, which says <code>ftw()</code> is MT-safe and <code>nftw()</code> is <code>MT-safe cwd</code>.</p>\n\n<p>And these functions are in thread-safety exception list, in this <a href=\"http://man7.org/linux/man-pages/man7/pthreads.7.html\" rel=\"nofollow noreferrer\">page</a>.</p>\n\n<p>For now, I still believe these functions don't guarantee thread-safety. But I wonder why does <a href=\"http://man7.org/linux/man-pages/man3/nftw.3.html\" rel=\"nofollow noreferrer\">this</a> say <code>ftw()</code> is MT-safe.</p>\n\n<p>Why does the page from man7.org say <code>ftw()</code> is MT-safe?</p>\n\n<p>Is it based on POSIX standard?</p>\n"}, {"tags": ["c", "gcc-warning"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 6, "creation_date": 1540365043, "post_id": 52962812, "comment_id": 92832478, "body": "In C11, it&#39;s <code>__func__</code>"}, {"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 0, "creation_date": 1540365155, "post_id": 52962812, "comment_id": 92832548, "body": "<code>-Wno-pedantic</code>?"}, {"owner": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1540365463, "post_id": 52962812, "comment_id": 92832724, "body": "@user3386109 <code>__func__</code> does the trick! You should put that in an answer and I will accept it."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1540365570, "post_id": 52962812, "comment_id": 92832782, "body": "@Scooter use backticks ` ` to quote code excerpts in comments (and in posts in general)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1540365635, "post_id": 52962812, "comment_id": 92832819, "body": "@Scooter Ok, let me look up the section in the C11 spec."}, {"owner": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1540365703, "post_id": 52962812, "comment_id": 92832858, "body": "@AnttiHaapala Got it,thanks."}], "answers": [{"comments": [{"owner": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "edited": false, "score": 0, "creation_date": 1540365172, "post_id": 52962873, "comment_id": 92832557, "body": "Thanks, I mistakenly thought that pedantic had some function other than ANSI C compatibility."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1540365503, "post_id": 52962873, "comment_id": 92832756, "body": "It does have functions other than ANSI C compatibility and you would be well served leaving it in your compile string and addressing the error with a preprocessor conditional that provides <code>_FUNCTION_</code> in the event it is not provided by your compiler (you may want to add <code>-Wshadow</code> as well)"}], "tags": [], "owner": {"reputation": 2505, "user_id": 3118401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c066b73af214d8e7cf6b52f6ef75314a?s=128&d=identicon&r=PG", "display_name": "marcolz", "link": "https://stackoverflow.com/users/3118401/marcolz"}, "is_accepted": false, "score": 0, "last_activity_date": 1540364884, "creation_date": 1540364884, "answer_id": 52962873, "question_id": 52962812, "link": "https://stackoverflow.com/questions/52962812/how-to-silence-gcc-pedantic-wpedantic-warning-regarding-function/52962873#52962873", "title": "How to silence GCC pedantic (-Wpedantic) warning regarding __FUNCTION__", "body": "<p>Do no use <code>-Wpedantic</code> unless you try to adhere to the ANSI C standard, which obviously does not support the __FUNCTION__ keyword.</p>\n\n<p>Use <code>-Wall -Wextra</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 9, "last_activity_date": 1540367312, "last_edit_date": 1540367312, "creation_date": 1540365708, "answer_id": 52963090, "question_id": 52962812, "link": "https://stackoverflow.com/questions/52962812/how-to-silence-gcc-pedantic-wpedantic-warning-regarding-function/52963090#52963090", "title": "How to silence GCC pedantic (-Wpedantic) warning regarding __FUNCTION__", "body": "<p>There is no reason to use <code>__FUNCTION__</code>. </p>\n\n<p><code>__func__</code> is the standard one (C99, <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.2.2p1\" rel=\"noreferrer\">C11</a>, C17). C11 6.4.2.2p1:</p>\n\n<blockquote>\n  <ol>\n  <li><p>The identifier <code>__func__</code> shall be implicitly declared by the translator as if, immediately following the opening brace of each function definition, the declaration</p>\n\n<pre><code>static const char __func__[] = \"function-name\";\n</code></pre></li>\n  </ol>\n</blockquote>\n\n<p>From <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Function-Names.html\" rel=\"noreferrer\">GCC documentation</a>:</p>\n\n<blockquote>\n  <p><code>__FUNCTION__</code> is another name for <code>__func__</code>, provided for backward compatibility with old versions of GCC. </p>\n</blockquote>\n\n<p>And if you want to know how old, <code>__func__</code> appeared in <a href=\"https://www.gnu.org/software/gcc/c99status.html\" rel=\"noreferrer\">GCC 2.95</a>, released <strong>July 31, 1999</strong>. Mind you, you do not need <code>__FUNCTION__</code> for <em>anything else</em> but <strong>to support GCC 2.94 or earlier</strong>. If you do, then that warning is probably least of your worries.</p>\n\n<hr>\n\n<p>However, <code>__func__</code> isn't available in C89/90 mode either, so you'd get a warning there. If you care about ISO diagnostics, then you need to use a more recent revision. Modern GCCs default to GNU C11 or C17 already.</p>\n\n<hr>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/4384765/whats-the-difference-between-pretty-function-function-func\"> What's the difference between <code>__PRETTY_FUNCTION__</code>, <code>__FUNCTION__</code>, <code>__func__</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1540365836, "creation_date": 1540365836, "answer_id": 52963129, "question_id": 52962812, "link": "https://stackoverflow.com/questions/52962812/how-to-silence-gcc-pedantic-wpedantic-warning-regarding-function/52963129#52963129", "title": "How to silence GCC pedantic (-Wpedantic) warning regarding __FUNCTION__", "body": "<p>The <code>-Wpedantic</code> option is used to:</p>\n\n<p>Issue all the warnings demanded by strict ISO C and ISO C++; reject all programs that use forbidden extensions, and some other programs that do not follow ISO C and ISO C++. For ISO C, follows the version of the ISO C standard specified by any -std option used. </p>\n\n<p><code>__FUNCTION__</code> is a GCC extension. However <code>__func__</code> is a predefined identifier in C11. I understand this is part of C99 as well.</p>\n\n<p>Committee draft for C11 (N1570) states that:  </p>\n\n<blockquote>\n  <p><strong>6.4.2.2 Predefined identifiers</strong><br>\n  Semantics<br>\n  1. The identifier <code>__func__</code> shall be implicitly declared by the translator as if,\n  immediately following the opening brace of each function definition, the declaration</p>\n\n<pre><code>static const char _ _func_ _[] = \"function-name\";\n</code></pre>\n  \n  <p>appeared, where function-name is the name of the lexically-enclosing function.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 7, "last_activity_date": 1540365950, "creation_date": 1540365950, "answer_id": 52963158, "question_id": 52962812, "link": "https://stackoverflow.com/questions/52962812/how-to-silence-gcc-pedantic-wpedantic-warning-regarding-function/52963158#52963158", "title": "How to silence GCC pedantic (-Wpedantic) warning regarding __FUNCTION__", "body": "<p>The standard compliant function identifier is <code>__func__</code></p>\n\n<p>From \u00a76.4.2.2 of the C11 specification</p>\n\n<blockquote>\n  <p>The identifier <code>__func__</code> shall be implicitly declared by the translator\n  as if, immediately following the opening brace of each function\n  definition, the declaration<br>\n  <code>static const char __func__[] = \"function-name\";</code><br>\n  appeared, where function-name is the name of the lexically-enclosing \n  function.</p>\n</blockquote>\n\n<p>I believe that <code>__func__</code> was added in C99. </p>\n"}], "owner": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2181, "favorite_count": 0, "accepted_answer_id": 52963158, "answer_count": 4, "score": 6, "last_activity_date": 1540367312, "creation_date": 1540364688, "last_edit_date": 1540364922, "question_id": 52962812, "link": "https://stackoverflow.com/questions/52962812/how-to-silence-gcc-pedantic-wpedantic-warning-regarding-function", "title": "How to silence GCC pedantic (-Wpedantic) warning regarding __FUNCTION__", "body": "<p>I am printing out (printf) the name of the function as I enter it by using the \"&lowbar;&lowbar;FUNCTION&lowbar;&lowbar;\" predefined macro (in gcc and clang). However, if I use -Wpedantic, I get this warning:</p>\n\n<blockquote>\n  <p>warning: ISO C does not support \u2018&lowbar;&lowbar;FUNCTION&lowbar;&lowbar;\u2019 predefined identifier\n  [-Wpedantic]</p>\n</blockquote>\n\n<p>How do I silence that warning?</p>\n"}, {"tags": ["c", "compiler-errors", "cryptography", "header-files"], "comments": [{"owner": {"reputation": 1684, "user_id": 1884386, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/706ea69aa579210f2e277a6edb2eb22c?s=128&d=identicon&r=PG", "display_name": "Geek Stocks", "link": "https://stackoverflow.com/users/1884386/geek-stocks"}, "edited": false, "score": 2, "creation_date": 1540363509, "post_id": 52962440, "comment_id": 92831637, "body": "Although the cryptography tag is helpful, you should edit this question and place more tags on it for the language you are writing in and operating system. This will make your question more visible and hopefully get an answer."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1540473566, "post_id": 52962440, "comment_id": 92885752, "body": "There is no such directory as <code>~&#47;Desktop&#47;Alok&#47;home&#47;Mtech&#47;Desktop&#47;Alok&#47;pbc-0.5.14&#47;include&#47;pb&zwnj;&#8203;c&#47;</code>. So change <code>-I home&#47;...</code> to <code>-I &#47;home&#47;...</code>. After that, you will also find that <code>libpcb.so</code> and <code>libpcb.a</code> are not located in <code>&#47;home&#47;Mtech&#47;Desktop&#47;Alok&#47;pbc-0.5.14&#47;include&#47;</code>, where your <code>-L</code> option tells the linker to look for them, but in <code>&#47;home&#47;Mtech&#47;Desktop&#47;Alok&#47;pbc-0.5.14&#47;.libs</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12857175, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vMQP2OrbKys/AAAAAAAAAAI/AAAAAAAAACo/v6FR12NF6j8/photo.jpg?sz=128", "display_name": "dnyaneshwar mogal", "link": "https://stackoverflow.com/users/12857175/dnyaneshwar-mogal"}, "is_accepted": false, "score": 0, "last_activity_date": 1612022516, "creation_date": 1612022516, "answer_id": 65970091, "question_id": 52962440, "link": "https://stackoverflow.com/questions/52962440/pbc-libraries-implementation/65970091#65970091", "title": "PBC libraries implementation", "body": "<p>install gmp library first</p>\n<pre><code>sudo apt-get install libgmp3-dev\n</code></pre>\n<p>install pbc library,pbc uses gmp library<br />\n[download]: <a href=\"https://crypto.stanford.edu/pbc/download.html\" rel=\"nofollow noreferrer\">https://crypto.stanford.edu/pbc/download.html</a> &quot;follow guide for installation&quot;</p>\n<p>for compiling</p>\n<pre><code>gcc &lt;program_name&gt;.c  -lgmp  -lpbc \n</code></pre>\n<p>for c++</p>\n<pre><code>g++ &lt;program_name&gt;.cpp  -lgmp -lgmpxx -lpbc \n\n</code></pre>\n<p>run</p>\n<pre><code>./a.out\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 6487700, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1cf27986b3060e76aff74e6eaa29904b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. A", "link": "https://stackoverflow.com/users/6487700/mr-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1612022516, "creation_date": 1540363193, "last_edit_date": 1540401383, "question_id": 52962440, "link": "https://stackoverflow.com/questions/52962440/pbc-libraries-implementation", "title": "PBC libraries implementation", "body": "<p>I am trying to implement a cryptography code and for that I need to include the pbc libraries into my code the basic code is as follows</p>\n\n<pre><code>#include \"pbc.h\"\n\nint main(void)\n{\n/* call PBC functions */\n    return 0;\n    printf(\"it's there\");\n}\n</code></pre>\n\n<p>and I am working in ubuntu environment and after installing the pbc and gmu I am using this command </p>\n\n<pre><code>gcc -o foo foo.c -I home/Mtech/Desktop/Alok/pbc-0.5.14/include/pbc/ -L home/Mtech/Desktop/Alok/pbc-0.5.14/include/ -l pbc\n</code></pre>\n\n<p>but the system shows me the following error</p>\n\n<pre><code>:~/Desktop/Alok$ gcc -o foo foo.c -I home/Mtech/Desktop/Alok/pbc-0.5.14/include/pbc/ -L home/Mtech/Desktop/Alok/pbc-0.5.14/include/ -l pbc\nfoo.c:1:17: fatal error: pbc.h: No such file or directory\n`enter code here`compilation terminated.\n</code></pre>\n"}, {"tags": ["c", "data-structures", "stack"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540366509, "post_id": 52962431, "comment_id": 92833349, "body": "You got to provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1540366925, "post_id": 52962431, "comment_id": 92833588, "body": "Usually the operator follows the values in UPN and stack calculators.  2, 20, +. Because the stack only takes values, not operators, the values have to come first. With the first operator you need two values on your stack."}, {"owner": {"reputation": 105, "user_id": 7680501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc94a31fa9a97db830ea351213bbdf4?s=128&d=identicon&r=PG&f=1", "display_name": "Sauromayne", "link": "https://stackoverflow.com/users/7680501/sauromayne"}, "edited": false, "score": 0, "creation_date": 1540366972, "post_id": 52962431, "comment_id": 92833622, "body": "Anytime I post anything on stack overflow I get this same response. What do you want me to do? I provided the output that I&#39;m getting. Explained what is happening, described the troubleshooting steps I have gone through. I don&#39;t know how to make the post more &quot;minimal&quot; without taking away from the &quot;complete&quot; portion of this rule."}, {"owner": {"reputation": 105, "user_id": 7680501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc94a31fa9a97db830ea351213bbdf4?s=128&d=identicon&r=PG&f=1", "display_name": "Sauromayne", "link": "https://stackoverflow.com/users/7680501/sauromayne"}, "reply_to_user": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1540367143, "post_id": 52962431, "comment_id": 92833709, "body": "@Holger it needs to be in the order that it is because my instructor wants me to use a stack to evaluate a racket expression like it is done in racket. The way I have it is how it is done in racket. The stack doesn&#39;t need to handle operators because when an operator is reached in the code it pops the stack twice (the values) and applies the operator. There is no part in the code where the operator gets pushed on the stack"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540367389, "post_id": 52962431, "comment_id": 92833848, "body": "@Sauromayne From the given code we will not able to figure out the problem. Problem can be some where else in the not provided code."}, {"owner": {"reputation": 105, "user_id": 7680501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc94a31fa9a97db830ea351213bbdf4?s=128&d=identicon&r=PG&f=1", "display_name": "Sauromayne", "link": "https://stackoverflow.com/users/7680501/sauromayne"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540367752, "post_id": 52962431, "comment_id": 92834061, "body": "@kiran Biradar what is missing from the code that you would like to see? I can paste as much of it as needed. You want to see the push function as well? I tried to paste as minimal as possible because I know people don&#39;t want to waste their time looking through a bunch of code"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540368115, "post_id": 52962431, "comment_id": 92834268, "body": "@Sauromayne We need minimal complete code which produces the same behavior."}, {"owner": {"reputation": 105, "user_id": 7680501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc94a31fa9a97db830ea351213bbdf4?s=128&d=identicon&r=PG&f=1", "display_name": "Sauromayne", "link": "https://stackoverflow.com/users/7680501/sauromayne"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540368740, "post_id": 52962431, "comment_id": 92834624, "body": "@kiranBiradar I edited the post to include more of main and I have included the push function as well. I assure that Node is set up correctly and I have stepped through and confirmed that insertNode() is functioning as intended and it doesn&#39;t play a role in my issue."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540372086, "post_id": 52962431, "comment_id": 92836609, "body": "Why do you need <code>insertNode()</code> function when you have <code>push()</code> function already."}], "answers": [{"comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540372039, "post_id": 52965013, "comment_id": 92836573, "body": "This does not answer the OP&#39;s question."}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540372499, "post_id": 52965013, "comment_id": 92836887, "body": "I think, it does. If you reduce unnessessary compexity, you will get a programm that runs more stable"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540372754, "post_id": 52965013, "comment_id": 92837035, "body": "Using different datastructure to implement the same functionality may have overhead but it comes with its own benefits."}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1540373000, "post_id": 52965013, "comment_id": 92837210, "body": "Hmm, adding every char of a string (including blanks) in a node chain has benefits?  Anyway, thanks for downvoting"}], "tags": [], "owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "is_accepted": false, "score": -1, "last_activity_date": 1540371923, "creation_date": 1540371923, "answer_id": 52965013, "question_id": 52962431, "link": "https://stackoverflow.com/questions/52962431/evaluating-an-expression-using-a-stack-c/52965013#52965013", "title": "Evaluating an expression using a stack (C)", "body": "<p>This looks very complicated in your source.\nYour stack only needs to be an int array with a top-index. And there is no need to split the expression in many nodes.\nI have no compiler at hand, so this is only an <strong>untested sample</strong>.</p>\n\n<p>I think you have to have a look at the correct order of pop() in the call to calculate()</p>\n\n<pre><code>int stack[64], stacktop=-1;\n\nvoid push(int val) {\n    stacktop++;\n    stack[stacktop] = val;\n}\nint pop() {\n    return (stacktop&gt;=0) ? stack[stacktop--] : 0;\n}\n\nint evaluate(char *buf) {\n    char *ptr, *mark, *pcpy, *pcpy2, buf2[256];\n\n    for(ptr=buf; *ptr ; ptr++);    // goto end of buf\n    for(ptr--; ptr&gt;=buf; ptr--) {\n        if(isspace(*ptr)) continue;\n        if(*ptr=='(' || *ptr==')') continue;\n        for(mark=ptr; ptr&gt;=buf &amp;&amp; isdigit(*ptr); ptr--); // test for digits\n        if(ptr!=mark) {                                  // found at least 1 digit\n            ptr++;\n            for(pcpy2=buf2, pcpy=ptr; pcpy&lt;=mark; pcpy++, *pcpy2++)\n                *pcpy2=*pcpy;\n            *pcpy2='\\0';\n            push(atoi(buf2));\n            continue;\n        }\n        if(*ptr=='+' || *ptr=='-' || *ptr=='*' || *ptr=='/') {\n            push(calculate(pop(), *ptr, pop()));\n        }\n    }\n    return pop();\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 7680501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc94a31fa9a97db830ea351213bbdf4?s=128&d=identicon&r=PG&f=1", "display_name": "Sauromayne", "link": "https://stackoverflow.com/users/7680501/sauromayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1566929582, "creation_date": 1540363169, "last_edit_date": 1566929582, "question_id": 52962431, "link": "https://stackoverflow.com/questions/52962431/evaluating-an-expression-using-a-stack-c", "title": "Evaluating an expression using a stack (C)", "body": "<p>I need to make a stack that evaluates expression in the same way it would in racket. Here is an example of working output:</p>\n\n<pre><code>Please enter the racket expression to be evaluated: \n(+ 3 (* 2 20))\n+--TOP OF STACK--+\n|       20        |\n==================\n\n+--TOP OF STACK--+\n|       2        |\n|       20        |\n==================\n\n+--TOP OF STACK--+\n|       40        |\n==================\n\n+--TOP OF STACK--+\n|       3        |\n|       40        |\n==================\n\n+--TOP OF STACK--+\n|       43        |\n==================\n\nThe result is: 43\n\nWould you like to enter another expression (Y/N)?\n</code></pre>\n\n<p>In this instance my pop function is working fine and as intended. When I make the expression a little more complicated though the pop function stops working. I'm confused why though because it is utilizing the same code. Here is an example of output where the pop function isn't working:</p>\n\n<pre><code>Please enter the racket expression to be evaluated: \n(+ (*2 4) (+ 10 2))\n+--TOP OF STACK--+\n|       2        |\n==================\n\n+--TOP OF STACK--+\n|       10        |\n|       2        |\n==================\n\n+--TOP OF STACK--+\n|       12        |\n==================\n\n+--TOP OF STACK--+\n|       4        |\n|       12        |\n==================\n\n+--TOP OF STACK--+\n|       2        |\n|       4        |\n|       12        |\n==================\n\n+--TOP OF STACK--+\n|       8        |\n|       2        |\n|       4        |\n|       12        |\n==================\n\n+--TOP OF STACK--+\n|       10        |\n|       8        |\n|       2        |\n|       4        |\n|       12        |\n==================\n\nThe result is: 10\n\nWould you like to enter another expression (Y/N)?\n</code></pre>\n\n<p>It works fine for the (+ 10 2) part of the expression and the 10 and 2 are popped as expected. Then the 4 and 2 are pushed as expected but when they are popped, they aren't getting popped off the stack and the correct number 8 is getting pushed so I know the pop function has been called. I stepped through and the stack looks fine until it gets to that point where for some reason pop gets called but it doesn't remove the old digits just returns their value.</p>\n\n<p>Here is my pop function:</p>\n\n<pre><code>int pop(Node** top)\n{\n    int pop = (*top)-&gt;digit; //stores the value to be returned.\n    *top = (*top)-&gt;prev; //\"pops\" the top element off the stack.\n\n    return pop; //returns the digit as an integer\n}\n</code></pre>\n\n<p>Here is the push function:</p>\n\n<pre><code>void push(Node** stackEnd, int digit)\n{\n    Node* ptr = *stackEnd;        // used to traverse the list\n\n    // set up new node\n    Node* newNode = (Node*)malloc(sizeof(Node));\n    newNode-&gt;prev = NULL;\n    newNode-&gt;digit = digit;\n    newNode-&gt;next = NULL;\n\n    // add node to linked list\n    if (*stackEnd == NULL)\n            *stackEnd = newNode;           // first node in list\n    else\n    {\n            // find the end of the list\n            while (ptr-&gt;next != NULL)\n                    ptr = ptr-&gt;next;\n\n            // update pointers\n            ptr-&gt;next = newNode;\n            newNode-&gt;prev = ptr;\n    }\n\n    // assign new endPtr\n    *stackEnd = newNode;\n}\n</code></pre>\n\n<p>and here is the part in main I feel is relevant. The pop is called in the else statement at the bottom when an operator is found:</p>\n\n<pre><code>Node* startPtr = NULL;      //nodes for linked list that will be used for the expression\n    Node* endPtr = NULL;\n    Node* stackEnd = NULL;      //node for the stack\n    char expression[SIZE];     //variable to hold the expression the user inputs\n    char again = 'Y';          //to determine if the user wants to input another expression\n    int total = 0;             //used to keep track of total when evaluating the expression.\n    int digit;                 //variable to store the digit that will be pushed on the stack\n\n    //these variables will be used in determining a digit &gt; 9\n    char multDigit[SIZE] = \"\";\n    char digitSwap[SIZE] = \"\";\n    int j = 0;\n    int k;\n\n    do\n    {\n        printf(\"Please enter the racket expression to be evaluated: \\n\");\n        fgets(expression, SIZE, stdin);\n\n        for(int i = 0; i &lt; strlen(expression); i++)        //builds the linked list for the expression using a for loop\n            insertNode(&amp;startPtr, expression[i], &amp;endPtr);\n\n        while(endPtr != NULL)\n        {\n            if(isspace(endPtr-&gt;element))                         //if the last element in the list is a space or new line we move onto the prev node\n                endPtr = endPtr-&gt;prev;\n            else if(endPtr-&gt;element == '(' || endPtr-&gt;element == ')')    //if the last element is a paren we move to the prev node\n                endPtr = endPtr-&gt;prev;\n            else if(isdigit(endPtr-&gt;element) &amp;&amp; !(isdigit(endPtr-&gt;prev-&gt;element))) //if it is a single digit (0-9)\n            {   \n                digit = endPtr-&gt;element - '0';\n                endPtr = endPtr-&gt;prev;\n                push(&amp;stackEnd, digit); //pushes the digit onto the stack\n                printStack(&amp;stackEnd);       //when something is pushed onto the stack we want to display the new stack to the user.\n            }\n            else if(isdigit(endPtr-&gt;prev-&gt;element))     //if the digit is &gt; 9\n            {\n                //puts together a char array of the digit &gt;9                \n                while(isdigit(endPtr-&gt;element))\n                {\n                    multDigit[j] = endPtr-&gt;element;\n                    endPtr = endPtr-&gt;prev;\n                    j++;\n                }\n\n                //reverse it so it is in the proper order\n                k = 0;\n\n                while(j &gt; 0)\n                {\n                    digitSwap[k] = multDigit[j-1];  //we need to use another variable digitSwap to store the reversed char array\n                    k++;\n                    j--;\n                }\n\n                digit = atoi(digitSwap); //translates the char array into an int\n                push(&amp;stackEnd, digit); //pushes the digit onto the stack\n                printStack(&amp;stackEnd);  //when something is pushed onto the stack we want to display the new stack to the user.\n            }\n            else //the element must be an operator(+, -, /, etc)\n            {\n                char operator = endPtr-&gt;element;\n\n                total = (evaluate((pop(&amp;stackEnd)), operator, (pop(&amp;stackEnd)))); //pop the stack twice to evaluate\n                push(&amp;stackEnd, total);    //push the total onto the stack\n                printStack(&amp;stackEnd);       //when something is pushed onto the stack we want to display the new stack to the user.\n                endPtr = endPtr-&gt;prev;\n            }\n        }\n</code></pre>\n\n<p>Edit: in case it is confusing how my code is working. I am using a doubly linked list to traverse the expression which is a character array. I traverse it from the end to the front so for  example: (+ 3 2) </p>\n\n<pre><code>expression[0]  = '(' \nexpression [1] = '+'\nexpression[2] = ' '\n</code></pre>\n\n<p>etc, etc....</p>\n\n<p>I traverse it backwords using <code>endPtr</code> which starts at <code>')'</code> in this example and then I use <code>-&gt; prev</code> to work my way backwords.</p>\n"}, {"tags": ["c", "linux-kernel", "scheduling", "windows-subsystem-for-linux", "affinity"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1540373958, "post_id": 52962351, "comment_id": 92837809, "body": "The threads do next-to-nothing except make printf() I/O calls. The printf() I/O call has a mutex lock to protect the output stream from multiple access.  The lock has a queue for threads waiting for the mutex.   I suspect that the threads may be queueing up on the lock. Forward progress is not constrained or managed by CPU priority in this case.   Not posting this as an answer, though:)"}, {"owner": {"reputation": 77, "user_id": 10550054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe716e5619227df99ec4ed817b6a3cc?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10550054/j-doe"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1540623175, "post_id": 52962351, "comment_id": 92941465, "body": "@MartinJames just wanted to say that I&#39;ve now confirmed it is the WSL. I installed Ubuntu and ran the program. running without sudo gives same behavior as on WSL, running with sudo and, as intended, the program starves and only the thread with priortiy 40 can print"}], "owner": {"reputation": 77, "user_id": 10550054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe716e5619227df99ec4ed817b6a3cc?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10550054/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540362846, "creation_date": 1540362846, "question_id": 52962351, "link": "https://stackoverflow.com/questions/52962351/starvation-in-priority-thread-schedule-by-setting-affinity-to-single-cpu", "title": "Starvation in Priority Thread Schedule by Setting Affinity to Single CPU", "body": "<p>I'm trying to create some code that will simulate starvation of multiple threads based on priority scheduling (FIFO). The code below is supposed to set the program affinity to a single CPU so that no multi-threading can occur, then I spawn all the threads with different priorities and wait a sec to make sure they are all set up and in a waiting state after which I release the mutex and due to the FIFO scheduling policy the thread with the highest priority should be able to proceed and then run forever starving the other 2 threads. Here is my code...</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sched.h&gt;\n#include &lt;unistd.h&gt;\n\n//global variables\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\npthread_cond_t cond = PTHREAD_COND_INITIALIZER;\n\nvoid* tfun(void*n){\n    struct sched_param param;\n    int num_runs = 20;\n\n    //set priority\n    param.sched_priority = (int) n;\n    sched_setscheduler(0, SCHED_FIFO, &amp;param);\n\n    pthread_mutex_lock(&amp;mutex);\n    pthread_cond_wait(&amp;cond, &amp;mutex);\n    pthread_mutex_unlock(&amp;mutex);\n\n    while(num_runs) {\n            printf(\"thread priority: %d\\n\", (int) n);\n            //num_runs = num_runs -1;\n    }\n\n    return NULL;\n}\n\nint main(int argc, char* argv[])       \n{\n    pthread_t tid1, tid2, tid3;\n    cpu_set_t cpus;\n\n    CPU_ZERO(&amp;cpus);\n    CPU_SET(0, &amp;cpus);\n    sched_setaffinity(0, sizeof(cpu_set_t), &amp;cpus);\n\n    pthread_create(&amp;tid1, NULL, tfun, (void *) 40);\n    pthread_create(&amp;tid2, NULL, tfun, (void *) 30);\n    pthread_create(&amp;tid3, NULL, tfun, (void *) 20);\n\n    sleep(1);\n    pthread_mutex_lock(&amp;mutex);\n    pthread_cond_broadcast(&amp;cond);\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_join(tid1, NULL);\n    pthread_join(tid2, NULL);\n    pthread_join(tid3, NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run it, instead of getting my expected behavior of \"thread priority: 40\" printed endlessly, it seems to cycle between all the different threads still and print them out as well.</p>\n\n<p>I'm not sure if there is anything wrong with my code, but I am using the WSL (Windows subsystem for linux) and I was wondering if that was maybe causing my issue as the affinity setting is a linux thing that may not translate correctly in it?</p>\n\n<p>build command<br>\n<code>$gcc -o main main.c -pthread -std=gnu99 -D_GNU_SOURCE</code><br>\nrun command (sudo because changing priorities)<br>\n<code>$sudo ./main</code></p>\n"}, {"tags": ["c", "strlen"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1540361684, "post_id": 52962064, "comment_id": 92830849, "body": "<code>if (len)</code> is a lazy way of writing <code>if (len != 0)</code>.  The point of that is that if <code>len</code> is zero, you do not want to mess with <code>buf[len - 1]</code> (because <code>len</code> is an unsigned type, so <code>len - 1</code> wraps to a huge offset, out of bounds of the array)."}, {"owner": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 0, "creation_date": 1540361754, "post_id": 52962064, "comment_id": 92830869, "body": "The file could simply be empty (empty string in buffer), then Len-1 would become a really big number (underfloow as Len is unsigned)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 0, "creation_date": 1540430469, "post_id": 52962064, "comment_id": 92866382, "body": "@MrTux Had the file been empty, then <code>fgets()</code> would return <code>NULL</code> and the <code>buf[]</code> contents remain unchanged (uninitialized) in <a href=\"https://stackoverflow.com/a/45889789/2410359\">that code</a> and <code>strlen(buf)</code> not encountered."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1540362121, "post_id": 52962101, "comment_id": 92831010, "body": "It is wraparound rather than, or as much as, underflow because <code>size_t</code> is an unsigned integer type.  C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.5p9\" rel=\"nofollow noreferrer\">&#167;6.2.5 Types &#182;9</a>: \u2026 <i>A computation involving unsigned operands can never overflow, because a result that cannot be represented by the resulting unsigned integer type is reduced modulo the number that is one greater than the largest value that can be represented by the resulting type.</i>"}], "tags": [], "owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "is_accepted": false, "score": 2, "last_activity_date": 1540363529, "last_edit_date": 1540363529, "creation_date": 1540361724, "answer_id": 52962101, "question_id": 52962064, "link": "https://stackoverflow.com/questions/52962064/what-is-the-meaning-logic-of-iflen-in-the-following-bit-of-code/52962101#52962101", "title": "What is the meaning/logic of if(len ....) in the following bit of code?", "body": "<p>An empty string has <code>0</code> length.</p>\n\n<p>The following code will result in <code>len</code> being <code>0</code>:</p>\n\n<pre><code>const char * str = \"\";\nsize_t len = strlen(str);\n</code></pre>\n\n<p>So we must check it before accessing <code>str[len-1]</code> to avoid an integer wraparound.</p>\n\n<p>Note that the length of the buffer which holds <code>str</code> is <code>1</code>, because of the trailing <code>'\\0'</code>, so the memory will look like this:</p>\n\n<pre><code>buf --&gt; [ '\\0' ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1439, "user_id": 7396613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7490a33ebc405a244013b37af249ec?s=128&d=identicon&r=PG&f=1", "display_name": "M.K", "link": "https://stackoverflow.com/users/7396613/m-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1540362280, "last_edit_date": 1540362280, "creation_date": 1540361767, "answer_id": 52962110, "question_id": 52962064, "link": "https://stackoverflow.com/questions/52962064/what-is-the-meaning-logic-of-iflen-in-the-following-bit-of-code/52962110#52962110", "title": "What is the meaning/logic of if(len ....) in the following bit of code?", "body": "<pre><code>size_t is the unsigned integer type of the result of sizeof , alignof (since C11) and offsetof, depending on the data model.\n</code></pre>\n\n<p>I think you are right in terms of checking. size_t is the unsigned integer type, so it is checking that condition in order to proceed with the other check and <code>buf[--len]</code></p>\n\n<p><a href=\"https://en.cppreference.com/w/c/types/size_t\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/c/types/size_t</a></p>\n"}, {"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1540362624, "post_id": 52962208, "comment_id": 92831241, "body": "<code>len</code> is a <code>size_t</code> value (which is an <code>unsigned</code> integer type), so if <code>len</code> is zero, <code>len - 1</code> will not be -1, but <code>SIZE_MAX</code>."}], "tags": [], "owner": {"reputation": 758, "user_id": 5349822, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1o0z4Zq3Q48/AAAAAAAAAAI/AAAAAAAAACY/LWY5FHRwd6c/photo.jpg?sz=128", "display_name": "Akhilesh Pandey", "link": "https://stackoverflow.com/users/5349822/akhilesh-pandey"}, "is_accepted": false, "score": 2, "last_activity_date": 1540363000, "last_edit_date": 1540363000, "creation_date": 1540362238, "answer_id": 52962208, "question_id": 52962064, "link": "https://stackoverflow.com/questions/52962064/what-is-the-meaning-logic-of-iflen-in-the-following-bit-of-code/52962208#52962208", "title": "What is the meaning/logic of if(len ....) in the following bit of code?", "body": "<p>You can index an array only when something is greater than zero. So to access <code>buff[len-1]</code> <code>len</code> must be greater than zero otherwise if len is zero then <code>len - 1</code> will be a very large number defined by <code>SIZE_MAX</code> and buff[-1] is an error.\nThe statement <code>if (len &amp;&amp; buff[len-1]=='\\n')</code> combines two conditions:<br>\nFirst checks for <code>len &gt; 0</code> and then the <code>buff[len-1] == '\\n'</code>.<br>\nThe above given <code>if</code> statement simply means the following:\n<code>if( (len &gt; 0)  &amp;&amp; (buff[len-1] == '\\n'))</code></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1540384522, "last_edit_date": 1540384522, "creation_date": 1540383236, "answer_id": 52968751, "question_id": 52962064, "link": "https://stackoverflow.com/questions/52962064/what-is-the-meaning-logic-of-iflen-in-the-following-bit-of-code/52968751#52968751", "title": "What is the meaning/logic of if(len ....) in the following bit of code?", "body": "<pre><code>while (i &lt; 100 &amp;&amp; fgets(buf, sizeof buf, f) != NULL ) {\n  // Lop off the potential tailing '\\n'\n  size_t len = strlen(buf);\n  if (len &amp;&amp; buf[len-1] == '\\n') buf[--len] = '\\0';\n</code></pre>\n\n<blockquote>\n  <p>Is it simply checking if there's actually a non-zero length to whatever's in the buffer </p>\n</blockquote>\n\n<p>Yes.  </p>\n\n<p>Code is testing <code>len != 0</code> before attempting <code>buf[len-1]</code> to prevent accessing <code>buf[]</code> out of range.<br>\n<a href=\"https://stackoverflow.com/questions/52962064/what-is-the-meaning-logic-of-iflen-in-the-following-bit-of-code/52968751#comment92830849_52962064\">@Jonathan Leffler</a></p>\n\n<hr>\n\n<blockquote>\n  <p>(and if so, how can a situation where strlen returns 0 arise?)</p>\n</blockquote>\n\n<p>Defensive coding: The <em>line</em> read may start with a <em>null character</em>.</p>\n\n<p>The prior code has <code>fgets(buf, sizeof buf, f)</code> which reads a <em>line</em> and then forms a <em>string</em>.  In the C standard library<sup>1</sup>, a <em>line</em> of input is the characters up to and including a <code>'\\n'</code>.  The <em>null character</em> has no special significance on input, it is just like another other character.  After a <em>line</em> is read with <code>fgets()</code> and saved in <code>buf[]</code>, a <em>null character</em> is appended.  <code>size_t len = strlen(buf);</code> return the length based on  the first <em>null character</em>, not necessarily the appended one.</p>\n\n<p>If the text file line is</p>\n\n<pre><code>'\\0', 'a', 'b', 'c', '\\n'\n</code></pre>\n\n<p>Then <code>fgets(buf, ...)</code> will result in <code>buf[]</code> as</p>\n\n<pre><code>'\\0', 'a', 'b', 'c', '\\n', '\\0'\n</code></pre>\n\n<p>And <code>len == 0</code>.</p>\n\n<p>ASCII text files uncommonly contain <em>null characters</em>.  Their presence is usually a mistake or nefarious (a hacker exploit).  <em>Null characters</em> are common in UTF-16 text files, yet reading such a file with the code in question has other troubles too.</p>\n\n<hr>\n\n<p><sup>1</sup> \"A text stream is an ordered sequence of characters composed into <em>lines</em>, each line consisting of zero or more characters plus a terminating new-line character. Whether the last line requires a terminating new-line character is implementation-defined.\" C11dr \u00a77.21.2 2</p>\n"}], "owner": {"reputation": 193, "user_id": 10431460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/342ro.png?s=128&g=1", "display_name": "Matvey", "link": "https://stackoverflow.com/users/10431460/matvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 52968751, "answer_count": 4, "score": 1, "last_activity_date": 1540384522, "creation_date": 1540361511, "question_id": 52962064, "link": "https://stackoverflow.com/questions/52962064/what-is-the-meaning-logic-of-iflen-in-the-following-bit-of-code", "title": "What is the meaning/logic of if(len ....) in the following bit of code?", "body": "<p>This is from chux's answer to the question here: <a href=\"https://stackoverflow.com/questions/45889540/how-to-get-the-strings-from-a-file-and-store-in-a-2d-char-array-and-compare-that\">How to get the strings from a file and store in a 2D char array and compare that 2D char array with a string in C?</a> </p>\n\n<blockquote>\n  <p>Lop off the potential tailing '\\n'</p>\n\n<pre><code>size_t len = strlen(buf);\n  if (len &amp;&amp; buf[len-1] == '\\n') buf[--len] = '\\0';\n</code></pre>\n</blockquote>\n\n<p>I understand the second part of the if statement (checking if buf[len-1] == '\\n'), but don't think I understand the if (len) part of it... Is it simply checking if there's actually a non-zero length to whatever's in the buffer (and if so, how can a situation where strlen returns 0 arise?) or is it something else? </p>\n"}, {"tags": ["c", "split"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1540361483, "post_id": 52962040, "comment_id": 92830767, "body": "Do you want any arbitrary element or always second last element?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540361551, "post_id": 52962040, "comment_id": 92830795, "body": "How about an array of pointers that you initialize with your <code>strtok</code> loop? By keeping track of the current element you&#39;re initializing, then you will know the &quot;size&quot; after the loop, and can then access any arbitrary (and valid) element."}, {"owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1540361649, "post_id": 52962040, "comment_id": 92830831, "body": "@MohitJain The second last element will be the most suited element. Although a check would be there to see if this is exactly what I want. But if it is not that desired element, then probably the third last element would do."}, {"owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540361795, "post_id": 52962040, "comment_id": 92830892, "body": "@Someprogrammerdude Will it be helpful if I initialize the array pointer with strtok, and then inside the loop where I print the elements I get, I assign the element with the array pointer with an index. Can this be achieved? That way, the total length of my array would be the number of elements, and then getting any arbitrary element would be possible."}, {"owner": {"reputation": 71, "user_id": 10532460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bHDnn2OSiX0/AAAAAAAAAAI/AAAAAAAAAms/krisa_5CPYc/photo.jpg?sz=128", "display_name": "Oukaasha Habib", "link": "https://stackoverflow.com/users/10532460/oukaasha-habib"}, "edited": false, "score": 0, "creation_date": 1540362517, "post_id": 52962040, "comment_id": 92831190, "body": "I think the answer to this question might be what you are interested in. <a href=\"https://stackoverflow.com/questions/11198604/c-split-string-into-an-array-of-strings/11198645\">link</a>"}], "answers": [{"comments": [{"owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "edited": false, "score": 0, "creation_date": 1540362286, "post_id": 52962119, "comment_id": 92831082, "body": "So, if I create an array of size say [3], the possibility of getting the third last element would be there? Also, is this code specifically to a string that has just 3 elements after splitting or for &#39;n&#39; number of elements after splitting?"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "edited": false, "score": 1, "creation_date": 1540362359, "post_id": 52962119, "comment_id": 92831117, "body": "It will work for <code>&#39;n&#39;</code> number of elements after splitting."}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 2, "last_activity_date": 1540363091, "last_edit_date": 1540363091, "creation_date": 1540361807, "answer_id": 52962119, "question_id": 52962040, "link": "https://stackoverflow.com/questions/52962040/splitting-a-string-and-using-index-to-call-the-desired-element/52962119#52962119", "title": "Splitting a string and using index to call the desired element", "body": "<p>You can store the last two items in an array and print the second last item.</p>\n\n<pre><code>[...]\n    char delim[] = \".\";\n    char *lastElement[2] = {0};  /* 1. To store delimited items */\n\n    char *ptr = strtok(str, delim);\n\n    while(ptr != NULL)\n    {\n        lastElement[0] = lastElement[1];  /* 2. Update */\n        lastElement[1] = ptr;\n        printf(\"'%s'\\n\", ptr);\n        ptr = strtok(NULL, delim);\n    }\n    if(lastElement[0]) {  /* 3. Does second last item exist */\n        printf(\"%s\\n\", lastElement[0]);  /* 4. Second last item */\n    }\n[...]\n</code></pre>\n\n<p><a href=\"https://www.ideone.com/iujh7w\" rel=\"nofollow noreferrer\"><strong>Check on ideone</strong></a></p>\n\n<p>This idea can be extended to get any arbitrary element also.</p>\n"}], "owner": {"reputation": 681, "user_id": 6418023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210108852944510/picture?type=large", "display_name": "Devanshu Misra", "link": "https://stackoverflow.com/users/6418023/devanshu-misra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 52962119, "answer_count": 1, "score": 4, "last_activity_date": 1540363091, "creation_date": 1540361363, "question_id": 52962040, "link": "https://stackoverflow.com/questions/52962040/splitting-a-string-and-using-index-to-call-the-desired-element", "title": "Splitting a string and using index to call the desired element", "body": "<p>Splitting a string with a defined delimiter and then using indexes to call the element required is a pretty easy job in python. Specifically, calling the second last element from a list of variable length(since the string given can have a lot of elements after splitting), is a cakewalk because of the simple syntax.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>str = \"swscan.apple.com\"\nstr_list = str.split(\".\")\nprint(str_list)\nprint(str_list[-2])\n</code></pre>\n\n<p>Output of this would be:</p>\n\n<pre><code>['swscan', 'apple', 'com']\napple\n</code></pre>\n\n<p>But doing the same thing in C is a pretty tedious job. I have to use <code>strtok</code> function for the same, which is further stored in a pointer value, and is then traversed through, which gives us the elements after splitting.</p>\n\n<p>I am able to achieve this, but the thing that really puts me off is the part where I have to access the second last element of the same. Can somebody help me on how this can be achieved? Here is what I have done so far:</p>\n\n<pre><code>int main()\n{\n    char str[] = \"swscan.apple.com\";\n    int init_size = strlen(str);\n    char delim[] = \".\";\n\n    char *ptr = strtok(str, delim);\n\n    while(ptr != NULL)\n    {\n        printf(\"'%s'\\n\", ptr);\n        ptr = strtok(NULL, delim);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The output of this would be:</p>\n\n<pre><code>'swscan'\n'apple'\n'com'\n</code></pre>\n\n<p>But this still does not come in a structured format with which I can access the second last element using the indexes. Any help would be appreciated. Thanks in advance.</p>\n"}, {"tags": ["c", "mplab"], "comments": [{"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 1, "creation_date": 1540360923, "post_id": 52961939, "comment_id": 92830549, "body": "You return a pointer to <code>buffer</code> which gets destroyed at <code>}</code>"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1540360931, "post_id": 52961939, "comment_id": 92830554, "body": "The object <code>buffer</code> is local to <code>ToInt()</code>, i.e. non-static. You&#39;re returning a pointer to it. Dereferencing that pointer would be undefined behavior, so the compiler is warning you."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540361005, "post_id": 52961939, "comment_id": 92830577, "body": "And don&#39;t forget that <code>char</code> strings are really called <b><i>null-terminated</b> byte strings</i>. That <i>null-terminated</i> bit is important, and you need space for that as well."}, {"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1540361022, "post_id": 52961939, "comment_id": 92830583, "body": "What they^ said, also it seems this function would be better named fromInt() or toString()"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1540361084, "post_id": 52961939, "comment_id": 92830604, "body": "moreover <code>buffer[4]</code> can&#39;t store a 4-character string plus the null terminator"}, {"owner": {"reputation": 85, "user_id": 10550010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaffc8d223974260aa18f9b5c12db43?s=128&d=identicon&r=PG&f=1", "display_name": "ddd", "link": "https://stackoverflow.com/users/10550010/ddd"}, "edited": false, "score": 0, "creation_date": 1540361170, "post_id": 52961939, "comment_id": 92830640, "body": "Thank you for the answers,is there any other way to convert my int value to string?"}, {"owner": {"reputation": 85, "user_id": 10550010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaffc8d223974260aa18f9b5c12db43?s=128&d=identicon&r=PG&f=1", "display_name": "ddd", "link": "https://stackoverflow.com/users/10550010/ddd"}, "edited": false, "score": 0, "creation_date": 1540361759, "post_id": 52961939, "comment_id": 92830871, "body": "I will handle numbers bigger than 4 digits but how will convert my integer to string?"}], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 3659239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b6ed436c73d42ba39748209936b7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3659239/sandy"}, "is_accepted": false, "score": 0, "last_activity_date": 1540361098, "creation_date": 1540361098, "answer_id": 52961987, "question_id": 52961939, "link": "https://stackoverflow.com/questions/52961939/integer-to-string-method/52961987#52961987", "title": "integer to string method", "body": "<p>You are trying to return <code>buffer</code> which has been allocated space on the stack.</p>\n\n<p>Stack gets destroyed as soon as the function returns. So the returned value is now just a dangling pointer.</p>\n\n<p>Also, the null terminator is missing.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 10550010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaffc8d223974260aa18f9b5c12db43?s=128&d=identicon&r=PG&f=1", "display_name": "ddd", "link": "https://stackoverflow.com/users/10550010/ddd"}, "edited": false, "score": 0, "creation_date": 1540362445, "post_id": 52962165, "comment_id": 92831159, "body": "Thank you but i&#39;m still getting warning doprnt.c:538: warning: (373) implicit signed to unsigned conversion"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 85, "user_id": 10550010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaffc8d223974260aa18f9b5c12db43?s=128&d=identicon&r=PG&f=1", "display_name": "ddd", "link": "https://stackoverflow.com/users/10550010/ddd"}, "edited": false, "score": 0, "creation_date": 1540365380, "post_id": 52962165, "comment_id": 92832678, "body": "@ddd that&#39;s another question. Please ask a new question."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 1, "last_activity_date": 1540377134, "last_edit_date": 1540377134, "creation_date": 1540362031, "answer_id": 52962165, "question_id": 52961939, "link": "https://stackoverflow.com/questions/52961939/integer-to-string-method/52962165#52962165", "title": "integer to string method", "body": "<p>As it has already been mentioned in comments and other answers, returning a local variable (aka <code>buffer</code>) is something that you shall never do as local variables are destroyed once the function return.</p>\n\n<p>Further you buffer is too small to hold the 4 characters as a string in C requires an extra character to zero terminate the string. So to hold <strong>4</strong> character you'll (at least) need <code>buffer[5]</code>. However,  notice that <code>%04d</code> does not ensure that there will be printed exactly 4 characters. A high int value will produce more characters and result in (more) buffer overflow. So you'll need a buffer that can hold a print of the largest (perhaps negative) integer.</p>\n\n<p>So what can you do instead?</p>\n\n<p>You have two options. 1) Use dynamic memory allocation inside the function or 2) let the caller supply the destination buffer to the function.</p>\n\n<p>It may look something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n// The maximum number of chars required depends on your system - see limits.h\n// Here we just use 64 which should be sufficient on all systems\n#define MAX_CHARS_IN_INT 64\n\nchar* intToMallocedString(int Value)\n{\n    char* buffer = malloc(MAX_CHARS_IN_INT);  // dynamic memory allocation\n    sprintf(buffer, \"%04d\", Value);\n    return buffer;\n}\n\n// This could also be a void function but returning the buffer\n// is often nice so it can be used directly in e.g. printf    \nchar* intToProvidedString(char* buffer, int Value)\n{\n    sprintf(buffer, \"%04d\", Value);\n    return buffer;\n}\n\nint main(void) {\n    int x = 12345678;\n    char str[MAX_CHARS_IN_INT];  // memory for caller provided buffer\n\n    char* pStr = intToMallocedString(x);\n    intToProvidedString(str, x);\n    printf(\"%s - %s\\n\", str, pStr);\n\n    free(pStr);    // dynamic memory must be free'd when done\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>12345678 - 12345678\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 10550010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaffc8d223974260aa18f9b5c12db43?s=128&d=identicon&r=PG&f=1", "display_name": "ddd", "link": "https://stackoverflow.com/users/10550010/ddd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "closed_date": 1540362384, "accepted_answer_id": 52962165, "answer_count": 2, "score": 0, "last_activity_date": 1541159618, "creation_date": 1540360833, "last_edit_date": 1541159618, "question_id": 52961939, "link": "https://stackoverflow.com/questions/52961939/integer-to-string-method", "closed_reason": "Duplicate", "title": "integer to string method", "body": "<p>I'm trying to create an integer (maximum four digits to string).\nHere is my method:</p>\n\n<pre><code>char  *ToInt( int Value)\n{\n    char buffer[4];\n    sprintf(buffer, \"%04d\", Value);\n    return buffer;\n}\n</code></pre>\n\n<p>After that the string is separeted to each byte and send it into a 7 segment LCD.\nThe problem is that i'm taking a warning</p>\n\n<pre><code> warning: (365) pointer to non-static object returned\n</code></pre>\n\n<p>and also all of this errors</p>\n\n<pre><code> C:\\Program Files (x86)\\Microchip\\xc8\\v1.45\\sources\\common\\doprnt.c:538: warning: (373) implicit signed to unsigned conversion\nC:\\Program Files (x86)\\Microchip\\xc8\\v1.45\\sources\\common\\doprnt.c:541: warning: (373) implicit signed to unsigned conversion\nC:\\Program Files (x86)\\Microchip\\xc8\\v1.45\\sources\\common\\doprnt.c:1259: warning: (373) implicit signed to unsigned conversion\nC:\\Program Files (x86)\\Microchip\\xc8\\v1.45\\sources\\common\\doprnt.c:1305: warning: (373) implicit signed to unsigned conversion\nC:\\Program Files (x86)\\Microchip\\xc8\\v1.45\\sources\\common\\doprnt.c:1306: warning: (373) implicit signed to unsigned conversion\n C:\\Program Files (x86)\\Microchip\\xc8\\v1.45\\sources\\common\\doprnt.c:1489: warning: (373) implicit signed to unsigned conversion\nC:\\Program Files (x86)\\Microchip\\xc8\\v1.45\\sources\\common\\doprnt.c:1524: warning: (373) implicit signed to unsigned conversion\n</code></pre>\n"}, {"tags": ["c", "rust", "llvm-codegen"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1540360717, "post_id": 52961867, "comment_id": 92830474, "body": "Besides <code>-O3</code> it&#39;s worth adding <code>-Wall -Wextra</code>"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 6670993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ec09df4f372b78690cfa98729f3330?s=128&d=identicon&r=PG&f=1", "display_name": "Sanhu Li", "link": "https://stackoverflow.com/users/6670993/sanhu-li"}, "edited": false, "score": 0, "creation_date": 1540373211, "post_id": 52961908, "comment_id": 92837353, "body": "Sorry, forgot that part. Really appreciate your help. I have another question: if the compiler optimized away the loops, where do the programs get the numbers? Both programs are printing the same number, and I tried to reduce NUM_LOOP by one and the result is 9223372036854775811 from both programs. Considering the overflow, it makes sense. If the loops are optimized out, how can we get the numbers? I also tried NUM_LOOP=1000000000, which will not produce an overflow, and results from both programs are 499999999500000000 in almost no time. How can the programs do that?"}, {"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "reply_to_user": {"reputation": 167, "user_id": 6670993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ec09df4f372b78690cfa98729f3330?s=128&d=identicon&r=PG&f=1", "display_name": "Sanhu Li", "link": "https://stackoverflow.com/users/6670993/sanhu-li"}, "edited": false, "score": 2, "creation_date": 1540375910, "post_id": 52961908, "comment_id": 92839040, "body": "Actually, I was planning to update my answer.  The loop can be expressed arithmetically in constant time. And compilers are smart enough to do this.  However I tested earlier, and the results are not clear cut on if this optimisation takes place, it depends on compiler version  and the value of the NUM_LOOP constant."}], "tags": [], "owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "is_accepted": false, "score": 7, "last_activity_date": 1540391844, "last_edit_date": 1540391844, "creation_date": 1540360664, "answer_id": 52961908, "question_id": 52961867, "link": "https://stackoverflow.com/questions/52961867/what-optimization-techniques-are-applied-to-rust-code-that-sums-up-a-simple-arit/52961908#52961908", "title": "What optimization techniques are applied to Rust code that sums up a simple arithmetic sequence?", "body": "<p>Since an <code>int</code> can never be as big as your <code>NUM_LOOP</code>, the program will loop eternally.</p>\n\n<pre><code>const uint64_t NUM_LOOP = 18446744073709551615u;\n\nfor (int i = 0; i &lt; NUM_LOOP; ++i) { // Change this to an uint64_t\n</code></pre>\n\n<p>If you fix the int bug, the compiler will optimize away these loops in both cases.</p>\n"}, {"tags": [], "owner": {"reputation": 855, "user_id": 3659239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b6ed436c73d42ba39748209936b7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3659239/sandy"}, "is_accepted": false, "score": 5, "last_activity_date": 1540360678, "creation_date": 1540360678, "answer_id": 52961910, "question_id": 52961867, "link": "https://stackoverflow.com/questions/52961867/what-optimization-techniques-are-applied-to-rust-code-that-sums-up-a-simple-arit/52961910#52961910", "title": "What optimization techniques are applied to Rust code that sums up a simple arithmetic sequence?", "body": "<p>Your code is stuck in an infinite loop.</p>\n\n<p>The comparison <code>i &lt; NUM_LOOP</code> will always return true since <code>int i</code> will wrap around before reaching <code>NUM_LOOP</code></p>\n"}, {"tags": [], "owner": {"reputation": 53967, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "is_accepted": false, "score": 8, "last_activity_date": 1540389611, "last_edit_date": 1540389611, "creation_date": 1540384294, "answer_id": 52969060, "question_id": 52961867, "link": "https://stackoverflow.com/questions/52961867/what-optimization-techniques-are-applied-to-rust-code-that-sums-up-a-simple-arit/52969060#52969060", "title": "What optimization techniques are applied to Rust code that sums up a simple arithmetic sequence?", "body": "<p>Your Rust code (without the prints and timing) compiles down to (<a href=\"https://rust.godbolt.org/z/rHSIgC\" rel=\"noreferrer\">On Godbolt</a>):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>movabs rax, -9223372036854775807\nret\n</code></pre>\n\n<p>LLVM just const-folds the whole function and calculates the final value for you.</p>\n\n<p>Let's make the upper limit dynamic (non constant) to avoid this aggressive constant folding:</p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>pub fn foo(num: u64) -&gt; u64 {\n    let mut sum = 0u64;\n    for i in 0..num {\n        sum += i;\n    }\n\n    sum\n}\n</code></pre>\n\n<p>This results in (<a href=\"https://rust.godbolt.org/z/FJ_IPH\" rel=\"noreferrer\">Godbolt</a>):</p>\n\n<pre><code>  test rdi, rdi            ; if num == 0\n  je .LBB0_1               ; jump to .LBB0_1\n  lea rax, [rdi - 1]       ; sum = num - 1\n  lea rcx, [rdi - 2]       ; rcx = num - 2\n  mul rcx                  ; sum = sum * rcx\n  shld rdx, rax, 63        ; rdx = sum / 2\n  lea rax, [rdx + rdi]     ; sum = rdx + num\n  add rax, -1              ; sum -= 1\n  ret\n.LBB0_1:\n  xor eax, eax             ; sum = 0\n  ret\n</code></pre>\n\n<p>As you can see that optimizer understood that you summed all numbers from 0 to <code>num</code> and replaced your loop with a constant formula: <code>((num - 1) * (num - 2)) / 2 + num - 1</code>. As for the example above: the optimizer probably first optimized the code into this constant formula and did constant folding then.</p>\n\n<h3>Additional notes</h3>\n\n<ul>\n<li>The two other answers already point out your bug in the C program. When fixed, <code>clang</code> <a href=\"https://godbolt.org/z/EGodoe\" rel=\"noreferrer\">generates exactly the same assembly</a> (unsurprisingly). However, GCC doesn't seem to know about this optimization and <a href=\"https://godbolt.org/z/1MlqBE\" rel=\"noreferrer\">generates pretty much the assembly you would expect (a loop)</a>.</li>\n<li>In Rust, an easier and more idiomatic way to write your code would be <code>(0..num).sum()</code>. Despite this using more layers of abstractions (namely, iterators), the compiler generates exactly the same code as above.</li>\n<li>To print a <code>Duration</code> in Rust, you can use the <code>{:?}</code> format specifier. <code>println!(\"{:.2?}\", d);</code> prints the duration in the most fitting unit with a precision of 2. That's a fine way to print the time for almost all kinds of benchmarks.</li>\n</ul>\n"}], "owner": {"reputation": 167, "user_id": 6670993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ec09df4f372b78690cfa98729f3330?s=128&d=identicon&r=PG&f=1", "display_name": "Sanhu Li", "link": "https://stackoverflow.com/users/6670993/sanhu-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1564862559, "creation_date": 1540360395, "last_edit_date": 1564862559, "question_id": 52961867, "link": "https://stackoverflow.com/questions/52961867/what-optimization-techniques-are-applied-to-rust-code-that-sums-up-a-simple-arit", "title": "What optimization techniques are applied to Rust code that sums up a simple arithmetic sequence?", "body": "<p>The code is naive:</p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>use std::time;\n\nfn main() {\n    const NUM_LOOP: u64 = std::u64::MAX;\n    let mut sum = 0u64;\n    let now = time::Instant::now();\n    for i in 0..NUM_LOOP {\n        sum += i;\n    }\n    let d = now.elapsed();\n    println!(\"{}\", sum);\n    println!(\"loop: {}.{:09}s\", d.as_secs(), d.subsec_nanos());\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./test.rs.out\n9223372036854775809\nloop: 0.000000060s\n$ ./test.rs.out\n9223372036854775809\nloop: 0.000000052s\n$ ./test.rs.out\n9223372036854775809\nloop: 0.000000045s\n$ ./test.rs.out\n9223372036854775809\nloop: 0.000000041s\n$ ./test.rs.out\n9223372036854775809\nloop: 0.000000046s\n$ ./test.rs.out\n9223372036854775809\nloop: 0.000000047s\n$ ./test.rs.out\n9223372036854775809\nloop: 0.000000045s\n</code></pre>\n\n<p>The program almost ends immediately. I also wrote an equivalent code in C using for loop, but it ran for a long time. I'm wondering what makes the Rust code so fast.</p>\n\n<p>The C code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdint.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\ndouble time_elapse(struct timespec start) {\n    struct timespec now;\n    clock_gettime(CLOCK_MONOTONIC, &amp;now);\n    return now.tv_sec - start.tv_sec +\n           (now.tv_nsec - start.tv_nsec) / 1000000000.;\n}\n\nint main() {\n    const uint64_t NUM_LOOP = 18446744073709551615u;\n    uint64_t sum = 0;\n    struct timespec now;\n    clock_gettime(CLOCK_MONOTONIC, &amp;now);\n\n    for (int i = 0; i &lt; NUM_LOOP; ++i) {\n        sum += i;\n    }\n\n    double t = time_elapse(now);\n    printf(\"value of sum is: %llu\\n\", sum);\n    printf(\"time elapse is: %lf sec\\n\", t);\n\n    return 0;\n}\n</code></pre>\n\n<p>The Rust code is compiled using <code>-O</code> and the C code is compiled using <code>-O3</code>. The C code is running so slow that it hasn't stopped yet.</p>\n\n<p>After fixing the bug found by visibleman and Sandeep, both programs were printing the same number in almost no time. I tried to reduce <code>NUM_LOOP</code> by one, results seemed reasonable considering an overflow. Moreover, with <code>NUM_LOOP = 1000000000</code>, both programs will not have overflow and produce correct answers in no time. What optimizations are used here? I know we can use simple equations like <code>(0 + NUM_LOOP - 1) * NUM_LOOP / 2</code> to compute the result, but I don't think such computations are done by the compilers with an overflow case...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1540358609, "post_id": 52961537, "comment_id": 92829807, "body": "Did you even READ the error? I really takes less time than posting a question. So compilers also show messages like <i>Did you mean ...</i>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540359078, "post_id": 52961537, "comment_id": 92829975, "body": "How does <code>EXAMPLE.H</code> know what <code>test</code> is?"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540359224, "post_id": 52961592, "comment_id": 92830023, "body": "It may be worth mentioning that care should be taken in understanding the difference between a function <i>declaration</i> and the function <i>definition</i>. (it may not be so obviously apparent to new C programmers)"}, {"owner": {"reputation": 185, "user_id": 5603723, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7133b151393e902980b8bff724fad45b?s=128&d=identicon&r=PG&f=1", "display_name": "user5603723", "link": "https://stackoverflow.com/users/5603723/user5603723"}, "edited": false, "score": 0, "creation_date": 1540359798, "post_id": 52961592, "comment_id": 92830172, "body": "I know the difference between declaration &amp; definition. it was the declaration in the .h file. But I was in wrong assumption that I can declare the struct in .c file. I was wrong. and also missing &quot;struct&quot;. Thank you!"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 4, "last_activity_date": 1540358713, "creation_date": 1540358713, "answer_id": 52961592, "question_id": 52961537, "link": "https://stackoverflow.com/questions/52961537/returning-a-struct-and-passing-a-struct-to-functions/52961592#52961592", "title": "Returning a struct and passing a struct to functions", "body": "<p>Firstly, your struct type is called <code>struct test</code>. Not just <code>test</code>, but <code>struct test</code>. Two words. You used the proper type name in your <code>modify</code> function. You used the proper type name in the declaration of <code>t1</code> and <code>t2</code>. Why did you suddenly shorten it to a mere <code>test</code> in case of <code>calculate</code>?</p>\n\n<p>Secondly, it appears that you are trying to use a yet-undeclared struct type in your function declarations, since the functions are declared in <code>.h</code> file and struct type is declared in <code>.c</code> file. Something like this can be done properly, but this is generally not a good idea (unless you are trying to implement an opaque type). And most likely this is not what you are trying to do. So, why are you declaring your struct type in <code>.c</code> file? A better idea would be to declare it in <code>.h</code> file as well, above your functions.</p>\n"}], "owner": {"reputation": 185, "user_id": 5603723, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7133b151393e902980b8bff724fad45b?s=128&d=identicon&r=PG&f=1", "display_name": "user5603723", "link": "https://stackoverflow.com/users/5603723/user5603723"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52961592, "answer_count": 1, "score": 0, "last_activity_date": 1540359008, "creation_date": 1540358360, "last_edit_date": 1540359008, "question_id": 52961537, "link": "https://stackoverflow.com/questions/52961537/returning-a-struct-and-passing-a-struct-to-functions", "title": "Returning a struct and passing a struct to functions", "body": "<p>I am trying to return a struct which is defined as below: </p>\n\n<pre><code>EXAMPLE.C\nstruct test\n{\n    int x;\n    int y;\n    int z;\n};\nstruct test t1,t2;\n</code></pre>\n\n<p>I don't even have to explain the function, because I am getting error while declaring the function in the header file.</p>\n\n<pre><code>EXAMPLE.H\ntest calculate(int percent,int distance);\nint modify(struct test x1);\n</code></pre>\n\n<p>So I will return the struct <code>t1</code> in the function <code>calculate</code> and i will pass the struct <code>t2</code> into the function <code>modify</code>. I am not sure what am I doing wrong, but I am getting syntax error</p>\n"}, {"tags": ["c", "arrays", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1540354018, "post_id": 52960932, "comment_id": 92828621, "body": "<code>char ** mains;</code> / <code>char *** mains</code> is never set to point to anything before you start playing with it."}, {"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1540354018, "post_id": 52960932, "comment_id": 92828622, "body": "The problem is in the function that calls this one. I bet you are not allocating the <code>mains</code> correctly."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1540354036, "post_id": 52960932, "comment_id": 92828624, "body": "@perreal it is below... scroll down"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1540354087, "post_id": 52960932, "comment_id": 92828638, "body": "Also &quot;2 stars should be enough for everyone&quot;"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1540355298, "post_id": 52960932, "comment_id": 92828906, "body": "Consider returning the main function resilt through <code>return</code> statement, i.e. <code>char** getMains(FILE * file)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "edited": false, "score": 1, "creation_date": 1540354352, "post_id": 52960964, "comment_id": 92828688, "body": "Also the free(token); is certainly wrong -- the value returned by strtok() lies within line..line+256; not something returned by the heap."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1540354585, "post_id": 52960964, "comment_id": 92828743, "body": "No, <code>mains[i]</code> need not be allocated, it&#39;s strduped later."}, {"owner": {"reputation": 11, "user_id": 7720125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vz7qM.jpg?s=128&g=1", "display_name": "fabian", "link": "https://stackoverflow.com/users/7720125/fabian"}, "edited": false, "score": 0, "creation_date": 1540355010, "post_id": 52960964, "comment_id": 92828844, "body": "Thank you so much! I finally got this to work without ending with a segmentation fault! I need to start looking into memory allocation some more after this"}, {"owner": {"reputation": 11, "user_id": 7720125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vz7qM.jpg?s=128&g=1", "display_name": "fabian", "link": "https://stackoverflow.com/users/7720125/fabian"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1540355064, "post_id": 52960964, "comment_id": 92828855, "body": "@n.m. Wait I don&#39;t have to if I use strdup? I&#39;d still have to do it for mains though, correct?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 11, "user_id": 7720125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vz7qM.jpg?s=128&g=1", "display_name": "fabian", "link": "https://stackoverflow.com/users/7720125/fabian"}, "edited": false, "score": 0, "creation_date": 1540355108, "post_id": 52960964, "comment_id": 92828868, "body": "@fabian yes to both"}], "tags": [], "owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "is_accepted": true, "score": 2, "last_activity_date": 1540355850, "last_edit_date": 1540355850, "creation_date": 1540354138, "answer_id": 52960964, "question_id": 52960932, "link": "https://stackoverflow.com/questions/52960932/segmentation-fault-in-accessing-modifying-string-char-array-in-c/52960964#52960964", "title": "Segmentation fault in accessing &amp; modifying string (char*) array in C", "body": "<p>You need to allocate memory for mains, it should look like this:</p>\n\n<pre><code>char ** mains;\nmains = malloc(some number N * sizeof(char*));\n</code></pre>\n\n<p>You need something like this if you don't use strdup, which allocates the memory for you:</p>\n\n<pre><code>for (int i = 0; i &lt; N; ++i) {\n  mains[i] = malloc(some number K);\n}\n</code></pre>\n\n<p>In all cases, do not forget to call <code>free</code> on every pointer you received from <code>malloc</code> or <code>strdup</code>. You can skip this part if the program ends right after you would call <code>free</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 7720125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vz7qM.jpg?s=128&g=1", "display_name": "fabian", "link": "https://stackoverflow.com/users/7720125/fabian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 52960964, "answer_count": 1, "score": -1, "last_activity_date": 1540355850, "creation_date": 1540353840, "question_id": 52960932, "link": "https://stackoverflow.com/questions/52960932/segmentation-fault-in-accessing-modifying-string-char-array-in-c", "title": "Segmentation fault in accessing &amp; modifying string (char*) array in C", "body": "<p>I've been getting segmentation faults (with gdb printing \"??\" on backtraces) on a program I'm trying to compile for a while now and after trying many things (such re-programming a data structure I used which should work now) I still kept getting segfaults although now it gave me a line (which I added a comment onto here).</p>\n\n<p>getMains() is ran multiple times to tokenize different lines from the same file.</p>\n\n<p>I wanted mains to be an array of size 4 but when passing it as \"char * mains[4]\" I  I got a compile error for trying to pass it an array (*)[4] which I've never dealt with beforehand (Just started using C). I'm assuming maybe that could be a problem if I try to access any part that wasn't used, but the problem happens while initializing the indices of the array. </p>\n\n<p>The code I'm trying to get to work, where the \"char *** mains\" argument is taking in a &amp;(char **) from a separate function \"runner\" which I want to be edited so I can look at its contents in \"runner\":</p>\n\n<pre><code>bool getMains(FILE * file, char *** mains)\n{\n    char line[256];\n    int start = 0;\n    char * token;\n    const char * mainDelim = \"\\t \\n\\0\", * commDelim = \"\\n\\t\\0\";\n\n    if(fgets(line, sizeof(line), file) == NULL)\n        return false;\n\n    while(line[0] == '.')\n        if(fgets(line, sizeof(line), file) == NULL);\n            return false;\n\n    if(line[0] == '\\t' || line[0] == ' ')\n    {\n        (*mains)[0] = \" \";\n        start = 1;\n    }\n\n    token = strtok(line, mainDelim);\n    int i;\n    for(i = start; token != NULL; ++i)\n    {\n        (*mains)[i] = strdup(token); // &lt;- gdb: Segmentation Fault occurs here\n\n        if(i % 3 == 2)\n            token = strtok(NULL, commDelim);\n        else\n            token = strtok(NULL, mainDelim);\n     }\n\n     free(token); // Unsure if this was necessary but added in case.\n     return true;\n}\n\n\n/* Snippet of code running it... */\nvoid runner(FILE * file) {\n    char ** mains;\n    if(!getMains(*file, &amp;mains))\n        return;\n    while(strcmp(mains[1], \"END\") != 0){\n        /* do stuff lookinig through indices 0, 1, 2, &amp; 3 */\n        if(!getMains(*file, &amp;mains))\n            break;\n    }\n}\n</code></pre>\n\n<p>Any tips on this or just generally safely modifying arrays through other functions?</p>\n\n<p>Should I change getMains() into \"getMains(FILE * file, char ** mains[4]);\" and pass it a &amp;\"char * mains[4]\") for it to be a set size as wanted? Or would that also produce errors?</p>\n"}]