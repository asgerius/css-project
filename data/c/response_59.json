[{"tags": ["c", "runtime-error", "garbage", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456358075, "post_id": 35615599, "comment_id": 58914709, "body": "You posted quite a lot of related questions last time. Please consider using a different (and more recent - C has evolved a lot since K&amp;R last updated) book and/or tutorial. stack overflow is not a tutorial site."}, {"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 2, "creation_date": 1456358111, "post_id": 35615599, "comment_id": 58914721, "body": "Consider this, in your second loop, you test for null characters in <code>ip</code>. Did you set the null character when you read that in?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1456359323, "post_id": 35615599, "comment_id": 58915120, "body": "You&#39;re reading the entire input into a 1000 byte buffer, without checking whether the input is more that 1000 bytes. You didn&#39;t <code>&#39;\\0&#39;</code> terminate the <code>ip</code> string, yet the <code>x</code> loop looks for <code>ip[x] != &#39;\\0&#39;</code>. And you didn&#39;t put a <code>&#39;\\0&#39;</code> at the end of the <code>rv</code> string, which means that <code>printf</code> will run past the end of the string."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456369205, "post_id": 35615599, "comment_id": 58917992, "body": "strongly suggest only reading a single line at a time to process.  This means the first for() loop needs to be also checking for <code>\\n</code> to find the end of the line.  And that same loop needs to be checking the number of characters in the line so the input buffer is not overflowed."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456369279, "post_id": 35615599, "comment_id": 58918015, "body": "in C, there are only a very few valid signatures for <code>main()</code>  All of them have return type and (unless working on a bare metal machine with no OS, that return type will be <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456369398, "post_id": 35615599, "comment_id": 58918050, "body": "when writing code: 1) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>  2) use meaningful variable names.  I.E. names that indicate usage or content (or better) both."}], "answers": [{"tags": [], "owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "is_accepted": false, "score": 0, "last_activity_date": 1456366274, "creation_date": 1456366274, "answer_id": 35616964, "question_id": 35615599, "link": "https://stackoverflow.com/questions/35615599/kr-exercise-1-19-unexpected-and-inconsistent-output/35616964#35616964", "title": "K&amp;R Exercise 1-19 unexpected and inconsistent output", "body": "<p>If you're doing K &amp; R, I would recommend you to buy the \"C Answer Book\", which has all the answers to it's excercises. </p>\n\n<p>Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_LINE 1024\n\nvoid discardnewline(char s[])\n{\n  int i;\n  for(i = 0; s[i] != '\\0'; i++)\n  {\n    if(s[i] == '\\n')\n      s[i] = '\\0';\n  }\n}\n\nint reverse(char s[])\n{\n  char ch;\n  int i, j;\n\n  for(j = 0; s[j] != '\\0'; j++)\n  {\n  }\n\n  --j;\n\n  for(i = 0; i &lt; j; i++)\n  {\n    ch   = s[i];\n    s[i] = s[j];\n    s[j] = ch;\n    --j;\n  }\n\n  return 0;\n}\n\nint getline(char s[], int lim)\n{\n  int c, i;\n\n  for(i = 0; i &lt; lim - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != '\\n'; ++i)\n  {\n    s[i] = c;\n  }\n\n  if(c == '\\n')\n  {\n    s[i++] = c;\n  }\n\n  s[i] = '\\0';\n\n  return i;\n\n}\n\nint main(void)\n{\n  char line[MAX_LINE];\n\n  while(getline(line, sizeof line) &gt; 0)\n  {\n    discardnewline(line);\n    reverse(line);\n    printf(\"%s\\n\", line);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Some part of it is from the book, but I have even done my own modifications.</p>\n"}], "owner": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456366274, "creation_date": 1456357931, "last_edit_date": 1456358169, "question_id": 35615599, "link": "https://stackoverflow.com/questions/35615599/kr-exercise-1-19-unexpected-and-inconsistent-output", "title": "K&amp;R Exercise 1-19 unexpected and inconsistent output", "body": "<p>Been working on K&amp;R exercise 1-19:</p>\n\n<blockquote>\n  <p>Write a program that reverses its input a line at a time.</p>\n</blockquote>\n\n<p>Wrote the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAXLINE 1000\n\nmain () {\n    int c, x, y, z;\n    char ip[MAXLINE];\n    char ln[MAXLINE];\n    char rv[MAXLINE];\n\n    for (x = 0;(c=getchar()) != EOF; ++x)       \n        ip[x] = c;\n\n    for (x = 0; ip[x] != '\\0'; ++x) {               \n        for (y = 0; ip[x] != '\\n'; ++y) {           \n            ln[y] = ip[x];\n            ++x;\n        }\n\n        for (z = 0; y != -1; ++z) {                 \n            rv[z] = ln[y];\n            --y;\n        }\n        printf(\"%s\\n\", rv);                         \n    }\n}\n</code></pre>\n\n<p>My problem is that this program's output is wildly inconsistent; given the same (multiple line) input, sometimes it will print each line in reverse with an added leading blank space , sometimes it will only reproduce the first line in reverse followed by blank lines, sometimes it prints garbage, and sometimes I just get an error message.  </p>\n\n<p>Has anybody run into this kind of volatility before without changing their code?  How do I fix it?</p>\n"}, {"tags": ["c", "linux", "multithreading", "performance", "linux-kernel"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 3, "creation_date": 1456357427, "post_id": 35615479, "comment_id": 58914511, "body": "&quot;<i>This shows, no matter the no of threads a process have, every process will get equal share of CPU. This shows CPU allocation is done at Process level.</i>&quot; Nonsense. It shows no such thing."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456357844, "post_id": 35615479, "comment_id": 58914632, "body": "I&#39;m quite confident the scheduling algorithms are documented somewhere. At least the source code is available."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1456357902, "post_id": 35615479, "comment_id": 58914647, "body": "@DavidSchwartz, the experimental results show that in Scenario-1 , each process are getting equal share of CPU. I don&#39;t understand why you say &quot;It shows no such thing&quot; ? Can you elaborate ?"}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456358009, "post_id": 35615479, "comment_id": 58914687, "body": "@Olaf, I have downloaded the source code from kernel.org. However, not able to find the function where kernel/CPU scheduler decides the CPU allocation and distinguishing above two Scenario ."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456358278, "post_id": 35615479, "comment_id": 58914784, "body": "@bholanath You&#39;re assuming that both programs keep all their threads ready to run all the time. What is that assumption based on?"}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456358749, "post_id": 35615479, "comment_id": 58914937, "body": "@DavidSchwartz , both the program is CPU intensive processes and no threads are releasing CPU voluntarily."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456359425, "post_id": 35615479, "comment_id": 58915156, "body": "@bholanath Can you post a link to the programs so we can confirm that?"}, {"owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 1, "creation_date": 1456360020, "post_id": 35615479, "comment_id": 58915353, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22090126/understanding-renice\">Understanding renice</a>"}, {"owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1456360204, "post_id": 35615479, "comment_id": 58915415, "body": "@SergeyA: terminal emulators can have multiple tabs, just as web browsers. In particular, each tab will have a different session, which affects scheduling when autogroups are enabled (each session is put into a different control group for scheduling purposes)."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456360257, "post_id": 35615479, "comment_id": 58915434, "body": "@SergeyA tab means gnome terminal. As different tab is causing more confusion, I have replace it by terminal."}, {"owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 2, "creation_date": 1456360508, "post_id": 35615479, "comment_id": 58915520, "body": "Experiment 1 doesn&#39;t &quot;<i>[show] CPU allocation is done at Process level</i>&quot;. In that case, it is actually done at control group level, and inside each control group, it&#39;s then done at thread level."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456360538, "post_id": 35615479, "comment_id": 58915527, "body": "@njnjalj thanks! Now it makes sense."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 0, "creation_date": 1456360688, "post_id": 35615479, "comment_id": 58915568, "body": "@ninjalj, post an answer, so that  i can upvote!"}, {"owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456361289, "post_id": 35615479, "comment_id": 58915751, "body": "@SergeyA: it&#39;s basically a dupe (the other question talks about renice in the title, but both questions are about CPU allocation in 1 vs 2 sessions). I see no reason to repeat myself."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 0, "creation_date": 1456361505, "post_id": 35615479, "comment_id": 58915821, "body": "@ninjalj thanks for good explanation. As per explanation in link pointed by you , Possible duplicate of Understanding renice , in Experiment1  I have 2 control groups (one per session) competing for CPU, and inside each control group processes compete for CPU. Thus Program1 is getting 50% and Program2 is getting 50%. Then each thread is getting equal share(10%) from 50% share of Program1."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 0, "creation_date": 1456362374, "post_id": 35615479, "comment_id": 58916055, "body": "@ninjalj, as per the link (Possible duplicate of Understanding renice), you said by default autogroups is enabled. According to you, in experiment 1 at the top level I have 2 control groups (one per session) competing for CPU, and inside each control group processes compete for CPU. That&#39;s why 50% for Program2, 10% for each thread of Program1. I have checked and found cat /proc/$$/autogroup is /autogroup-127 nice 0 (nexttime /autogroup-131 nice 0). However, in Debian 8 (kernel 3.16.0-4-686-pae) output of cat /proc/$$/autogroup is /autogroup-64 nice 0 ( nextime also /autogroup-64 nice 0)."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1456362760, "post_id": 35615479, "comment_id": 58916167, "body": "Although Ubuntu is based on Debian and in both Ubuntu and Debian autogroup is enabled , still Ubuntu and Debian are behaving differently. I mean in Debian for experiment1, I am getting the same output as experiment2,means Program1 is getting more CPU(83%), Program2-17%. What you say about it ? After executing echo 19 &gt; /proc/$$/autogroup and then running both Program1 and Program2 in two different terminal with nice 19, I am getting 50% for Program1, 50% for Program2."}], "answers": [{"comments": [{"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1456358215, "post_id": 35615596, "comment_id": 58914763, "body": "thanks for commenting. The experimental results show that when a process have more threads it got more CPU (Scenario-2) , whereas in Scenario-1 , CPU allocation is not dependent on no of threads a process has, means every process will get equal share of CPU and that CPU share will be further equally divided among threads of that process."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1456358661, "post_id": 35615596, "comment_id": 58914913, "body": "Why don&#39;t you post your measurement code and test rig. If you look at <code>&#47;proc&#47;&lt;pid&gt;&#47;...</code> for this, a multithread process will report the cumulative for its threads. To see the per-thread, look at <code>&#47;proc&#47;&lt;pid&gt;&#47;task&#47;&lt;tid&gt;&#47;...</code>."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1456358848, "post_id": 35615596, "comment_id": 58914968, "body": "I have checked using top -H and the results shows about all threads."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1456358887, "post_id": 35615596, "comment_id": 58914983, "body": "both the program is CPU intensive processes and no threads are releasing CPU voluntarily."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1456359750, "post_id": 35615596, "comment_id": 58915271, "body": "What do you mean by [running in a] &quot;tab&quot;? I don&#39;t believe I&#39;ve ever heard of this term with regard to process scheduling before."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1456359949, "post_id": 35615596, "comment_id": 58915325, "body": "by tab I mean to say terminal. two different tab means in two different terminal. pstree shows the difference."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 5, "last_activity_date": 1456357925, "creation_date": 1456357925, "answer_id": 35615596, "question_id": 35615479, "link": "https://stackoverflow.com/questions/35615479/how-cpu-allocation-is-done-in-linux-thread-level-or-process-level/35615596#35615596", "title": "How CPU allocation is done in Linux ? Thread level or Process level?", "body": "<p>The linux kernel does <em>not</em> distinguish processes vs. threads in scheduling.</p>\n\n<p>Threads are processes that just happen to share most of their <em>memory</em>. Beyond that, they are treated equally by the scheduler.</p>\n\n<p>You can have 50 processes and 30 threads. That's 80 \"things\" and the kernel will schedule them <em>without</em> regard to whether they are processes or threads</p>\n"}], "owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 1, "closed_date": 1457008124, "answer_count": 1, "score": 7, "last_activity_date": 1456363681, "creation_date": 1456357314, "last_edit_date": 1456363681, "question_id": 35615479, "link": "https://stackoverflow.com/questions/35615479/how-cpu-allocation-is-done-in-linux-thread-level-or-process-level", "closed_reason": "Not suitable for this site", "title": "How CPU allocation is done in Linux ? Thread level or Process level?", "body": "<p>I am trying to understand how CPU is distributed among different processes with different no of threads.I have two programs Program1 and Program2. </p>\n\n<p>Program1 has 5 threads whereas Program2 has ONLY main thread.  </p>\n\n<p>SCENARIO -1 : </p>\n\n<pre><code>terminal-1 :  ./Program1 \nterminal-2 :  ./Program2 \n</code></pre>\n\n<p>When I run Program1 in one terminal and Program2 in another terminal , the CPU allocation is done 50% for Program1 and 50% for Program2. Each thread of Program1 is getting 10% (cumulatively 50% for Program1)</p>\n\n<p>This shows, no matter the no of threads a process have, every process will get equal share of CPU. <strong>This shows CPU allocation is done at Process level.</strong></p>\n\n<p>pstree shows </p>\n\n<pre><code>\u251c\u2500bash\u2500\u2500\u2500P1\u2500\u2500\u25005*[{P1}]\n\u251c\u2500bash\u2500\u2500\u2500P2\u2500\u2500\u2500{P2}\n</code></pre>\n\n<p>SCENARIO -2 : </p>\n\n<pre><code>terminal-1 : ./Program1 &amp;  ./Program2\n</code></pre>\n\n<p>When I run both Program1 and Program2 in SAME terminal , the CPU allocation is done equal for Program1 and all threads of Program2. It means each thread of Program1 is getting almost 17% (cumulatively Program1 is getting 83%) and Program2 is also getting 17%. <strong>This shows CPU allocation is done at Thread level.</strong></p>\n\n<p>pstree shows </p>\n\n<pre><code> \u251c\u2500bash\u2500\u252c\u2500P1\u2500\u2500\u25005*[{P1}]\n \u2502      \u2514\u2500P2\n</code></pre>\n\n<p>I am using Ubuntu 12.04.4 LTS, kernel - config-3.11.0-15-generic. I have also used Ubuntu 14.04.4 , kernel-3.16.x and got similar results.</p>\n\n<p><strong>Can anyone explain how CPU scheduler of LINUX KERNEL distinguishing SCENARIO-1 and SCENARIO-2?</strong> </p>\n\n<p>I think the CPU scheduler is distinguishing both SCENARIO in somewhere before allocating CPU. \nTo understand how CPU scheduler is  distinguishing SCENARIO-1 and SCENARIO-2 ,I have downloaded Linux kernel source code.<br>\n<strong>However, I haven't found in source code where it is distinguishing  SCENARIO-1 and SCENARIO-2.</strong>\nIt will be great if anyone point me the source code or function where the CPU scheduler is distinguishing SCENARIO-1 and SCENARIO-2.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>NOTE : Although Ubuntu is based on Debian,  surprisingly, in Debian 8 (kernel-3.16.0-4-686-pae) in both SCENARIO's CPU allocation is done at Thread level</strong> means each thread of Program1 is getting almost 17% (cumulatively Program1 is getting 83%) and Program2 is also getting 17%.</p>\n\n<p>Here is the code :\nProgram1(with 5 threads)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\n// Let us create a global variable to change it in threads\nint g = 0;\n\n// The function to be executed by all threads\nvoid *myThreadFun(void *vargp)\n{\n\n    // Store the value argument passed to this thread\n    int myid = (int)vargp;\n\n    // Let us create a static variable to observe its changes\n    static int s = 0;\n\n    // Change static and global variables\n    ++s; ++g;\n\n    // Print the argument, static and global variables\n    printf(\"Thread ID: %d, Static: %d, Global: %d\\n\", myid, ++s, ++g);\n\nwhile(1); // Representing CPU Bound Work\n\n}\n\nint main()\n{\n    int i;\n    pthread_t tid[5];\n\n    // Let us create three threads\n    for (i = 0; i &lt; 5; i++)\n        pthread_create(&amp;tid[i], NULL, myThreadFun, (void *)i);\n\n    for (i = 0; i &lt; 5; i++)\n     pthread_join(tid[i],NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>Program2 ( with only main thread)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n while(1);// Representing CPU Bound Work\n}\n</code></pre>\n\n<p>To disable all optimization by gcc, I have used O0 option while compiling the both programs.</p>\n\n<pre><code>gcc -O0 program1.c -o p1 -lpthread\ngcc -O0 program2.c -o p2 \n</code></pre>\n\n<p><strong>UPDATE:</strong> As per explanation of ninjalj , in Scenario-1, CPU allocation is done at control groups level and as I am using two different terminal(means two different session), thus 2 different control groups and each control groups is getting 50% CPU allocation. This is due to reason, autogroup is enabled by default.</p>\n\n<p>As Program2 has ONLY one thread and Program1 has more threads, I want to run \nboth the program in separate terminal(different session) and get more CPU allocation for Program1 ( as in Scenario-2, Program1 is getting 83% CPU allocation compared to 17% of Program2). Is it possible in any way,that CPU allocation of Scenario1 will be same as Scenario-2 in Ubuntu?</p>\n\n<p>Also it is surprising to me although Ubuntu is based on Debian, still Debian and Ubuntu is behaving differently. In case of Debian, Program1 is getting more CPU in both Scenario. </p>\n"}, {"tags": ["c", "bash", "gcc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456357906, "post_id": 35615398, "comment_id": 58914650, "body": "What is a &quot;static link&quot;?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456358844, "post_id": 35615398, "comment_id": 58914966, "body": "&quot;it returns this: <code>bash &#47;home&#47;Embedded&#47;Class2</code>&quot;. What does that mean? is that just the shell prompt? Suggest you paste in the full run log <i>exactly</i>."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1456360704, "post_id": 35615398, "comment_id": 58915571, "body": "For <code>-lbiblioteca</code> to work, the static library should be named <code>libbiblioteca.a</code>, not <code>biblioteca.a</code>.  Or you can just give the path and name of a library file directly, without using <code>-l</code>."}], "answers": [{"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 0, "last_activity_date": 1456360285, "creation_date": 1456360285, "answer_id": 35616006, "question_id": 35615398, "link": "https://stackoverflow.com/questions/35615398/trying-to-make-a-static-link-to-create-a-executable/35616006#35616006", "title": "Trying to make a static link to create a executable", "body": "<p>Don't use <code>&lt;&gt;</code>. These are shell redirections (e.g. <code>cat /etc/passwd &gt; /tmp/out</code>)</p>\n\n<p>Instead of:</p>\n\n<pre><code>gcc -o Staticalc main2.c -L/home/Embedded/Class2 -lbiblioteca\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>gcc -o Staticalc main2.c -L /home/Embedded/Class2 -lbiblioteca\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>gcc -o Staticalc main2.c --library-path=/home/Embedded/Class2 -lbiblioteca\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5977377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ix8-3CkzWgE/AAAAAAAAAAI/AAAAAAAAAMA/HjvzEHWl_L0/photo.jpg?sz=128", "display_name": "Josu&#233; Torres", "link": "https://stackoverflow.com/users/5977377/josu%c3%a9-torres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 35616006, "answer_count": 1, "score": 0, "last_activity_date": 1456360285, "creation_date": 1456356908, "last_edit_date": 1456358300, "question_id": 35615398, "link": "https://stackoverflow.com/questions/35615398/trying-to-make-a-static-link-to-create-a-executable", "title": "Trying to make a static link to create a executable", "body": "<p>I have these libraries: <code>biblioteca.a</code> <code>biblioteca.2</code> <code>main2.c</code> <code>biblioteca.h</code> and <code>biblioteca.c</code>. I recently created a excecutable with the <code>main2.c</code> and <code>biblioteca.c</code>. All the files are from the path <code>/home/Embedded/Class2</code>.</p>\n\n<p>I use the next command line to create a executable with static library.</p>\n\n<pre><code>gcc -o Staticalc main2.c -L&lt;/home/Embedded/Class2&gt; -lbiblioteca\n</code></pre>\n\n<p>and it returns this: <code>bash /home/Embedded/Class2</code></p>\n\n<p>also if I take out these symbols <code>&lt;&gt;</code> from <code>-L</code> and run the following:</p>\n\n<pre><code>gcc -o Staticalc main2.c -L/home/Embedded/Class2 -lbiblioteca\n</code></pre>\n\n<p>it returns: <code>/usr/bin/ld: cannot find -lbiblioteca</code></p>\n"}, {"tags": ["python", "c", "python-2.7", "types", "type-conversion"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456356047, "post_id": 35615184, "comment_id": 58914001, "body": "<code>int16_t</code> or <code>uint16_t</code>? And read the documentation, IIRC, there is a size-correspondance table."}, {"owner": {"reputation": 681, "user_id": 5702056, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/261a195021eb33b763de0b6899500eac?s=128&d=identicon&r=PG&f=1", "display_name": "theQuestionMan", "link": "https://stackoverflow.com/users/5702056/thequestionman"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456362516, "post_id": 35615184, "comment_id": 58916096, "body": "Either. Yes there is, but it doesn&#39;t mention any of the _t types or even the int size types."}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 5916382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084611266351923a4c8398de6a6c1f81?s=128&d=identicon&r=PG&f=1", "display_name": "neerad29", "link": "https://stackoverflow.com/users/5916382/neerad29"}, "is_accepted": false, "score": 0, "last_activity_date": 1456356301, "creation_date": 1456356301, "answer_id": 35615291, "question_id": 35615184, "link": "https://stackoverflow.com/questions/35615184/convert-python-int-into-int16-t-type/35615291#35615291", "title": "Convert python int into int16_t type", "body": "<p>How about <code>ctypes.c_int16</code>? Also supports <code>ctypes.c_uint16</code> if you are looking for that.</p>\n\n<p>Documentation:<br>\n<a href=\"https://docs.python.org/2/library/ctypes.html#ctypes.c_int16\" rel=\"nofollow\">https://docs.python.org/2/library/ctypes.html#ctypes.c_int16</a> and<br>\n<a href=\"https://docs.python.org/2/library/ctypes.html#ctypes.c_uint16\" rel=\"nofollow\">https://docs.python.org/2/library/ctypes.html#ctypes.c_uint16</a></p>\n"}], "owner": {"reputation": 681, "user_id": 5702056, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/261a195021eb33b763de0b6899500eac?s=128&d=identicon&r=PG&f=1", "display_name": "theQuestionMan", "link": "https://stackoverflow.com/users/5702056/thequestionman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6018, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456362532, "creation_date": 1456355731, "last_edit_date": 1456362532, "question_id": 35615184, "link": "https://stackoverflow.com/questions/35615184/convert-python-int-into-int16-t-type", "title": "Convert python int into int16_t type", "body": "<p>I know that python int can be converted into an c int type using ctypes.<br>\n<strong>But how do I convert a python int into an int16_t type?</strong></p>\n\n<p>I have tried:</p>\n\n<pre><code>import ctypes as ct\nmy_c_number = ct.c_int16_t(1)\n#Apparently ctypes library does not have c_int16_t attribute.\n</code></pre>\n"}, {"tags": ["c", "gdb"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1456355195, "post_id": 35614968, "comment_id": 58913692, "body": "If the buffer overflow is caused by <code>strcpy()</code>, or any other string function (excuding <code>strncpy()</code>), you cannot copy more than a single zero-byte, because string functions treat <code>&#39;\\0&#39;</code> as the string terminator. x86-64 virtual addresses must be canonical, so low addresses (normally used for userspace) must have more than one zero-byte."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456355316, "post_id": 35614968, "comment_id": 58913732, "body": "I can teach you all you need to know about buffer overflows:  if you write code that cannot overflow buffers, buffer overflow cannot happen."}, {"owner": {"reputation": 538, "user_id": 3385762, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80d7d884afb2521b1d1e836cf0bfed23?s=128&d=identicon&r=PG&f=1", "display_name": "yasgur99", "link": "https://stackoverflow.com/users/3385762/yasgur99"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456355683, "post_id": 35614968, "comment_id": 58913881, "body": "@EOF That makes a ton of sense but in that article (the example that works) has a 00 copied (both in the example address and on my computer)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456355839, "post_id": 35614968, "comment_id": 58913925, "body": "@yasgur99: Well, you can copy <i>one</i> zero-byte easily. Also, if the function you want to ROP into isn&#39;t too far away from the original return address, you could just reuse the upper zero-bytes of the original address, since x86 is little-endian."}, {"owner": {"reputation": 538, "user_id": 3385762, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80d7d884afb2521b1d1e836cf0bfed23?s=128&d=identicon&r=PG&f=1", "display_name": "yasgur99", "link": "https://stackoverflow.com/users/3385762/yasgur99"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456355936, "post_id": 35614968, "comment_id": 58913959, "body": "@EOF I&#39;m confused. I thought you said I can&#39;t copy a 0x00 because that will terminate the string."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456356138, "post_id": 35614968, "comment_id": 58914040, "body": "@yasgur99: C11 draft standard <code>7.24.2.3 The strcpy function, Section 2 The strcpy function copies the string pointed to by s2 (including the terminating null character) into the array pointed to by s1</code>. The <code>&#39;\\0&#39;</code> that terminates the source is copied into the destination."}, {"owner": {"reputation": 538, "user_id": 3385762, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80d7d884afb2521b1d1e836cf0bfed23?s=128&d=identicon&r=PG&f=1", "display_name": "yasgur99", "link": "https://stackoverflow.com/users/3385762/yasgur99"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456356168, "post_id": 35614968, "comment_id": 58914048, "body": "@EOF ahh Do you mean the 00 between the 4 and the 9"}, {"owner": {"reputation": 538, "user_id": 3385762, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80d7d884afb2521b1d1e836cf0bfed23?s=128&d=identicon&r=PG&f=1", "display_name": "yasgur99", "link": "https://stackoverflow.com/users/3385762/yasgur99"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456356543, "post_id": 35614968, "comment_id": 58914165, "body": "@EOF how would I reuse the upper zero bytes??"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456357009, "post_id": 35614968, "comment_id": 58914360, "body": "@yasgur99: Actually, I have no idea what the problem is. <code>strcpy()</code>ing <code>&#39;\\x09&#39;</code> shouldn&#39;t be a problem, that&#39;s just ASCII <code>\\t</code>, a <code>tab</code>. I&#39;d be more worried about <code>&#39;\\x88&#39;</code>, since that&#39;s not a valid ASCII char, and it&#39;s obviously not part of a valid utf8-char in this case. Anyway, on my system the bytes copy just fine."}, {"owner": {"reputation": 538, "user_id": 3385762, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80d7d884afb2521b1d1e836cf0bfed23?s=128&d=identicon&r=PG&f=1", "display_name": "yasgur99", "link": "https://stackoverflow.com/users/3385762/yasgur99"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456357104, "post_id": 35614968, "comment_id": 58914396, "body": "@EOF yea I was wondering about that null byte issue. The think that is that the 88 copies just fine! what could it be if it works in your system. that is extremely odd"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1456357579, "post_id": 35614968, "comment_id": 58914558, "body": "I bet the tab is interpreted as an argument separator by GDB, so that ` set args $(perl -e &#39;print &quot;A&quot; x 36 . &quot;\\x88\\x09\\x40\\x00&quot;&#39;)` actually has 4 parts - &quot;set&quot;, &quot;args&quot;, &quot;AAAA...\\x88&quot; and &quot;\\x40\\x00&quot;."}, {"owner": {"reputation": 538, "user_id": 3385762, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80d7d884afb2521b1d1e836cf0bfed23?s=128&d=identicon&r=PG&f=1", "display_name": "yasgur99", "link": "https://stackoverflow.com/users/3385762/yasgur99"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1456357686, "post_id": 35614968, "comment_id": 58914593, "body": "@immibis I think you are right because it says I have three as the argc. how can I fix this issue"}], "owner": {"reputation": 538, "user_id": 3385762, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80d7d884afb2521b1d1e836cf0bfed23?s=128&d=identicon&r=PG&f=1", "display_name": "yasgur99", "link": "https://stackoverflow.com/users/3385762/yasgur99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456354742, "creation_date": 1456354742, "question_id": 35614968, "link": "https://stackoverflow.com/questions/35614968/gdb-not-copting-desired-string-buffer-overflow-practice", "title": "GDB not copting desired string (Buffer Overflow Practice)", "body": "<p>Ok so I am trying to learn about buffer overflows and there is this simple program that is vulnerable of a BoF because it copies the first argument into a buffer of 5 characters. In the source code, there is a function called bar that never gets called by the program. My goal was to overflow the buffer and run that function.</p>\n\n<p>So I loaded it up into gdb and I typed disass bar. the first few lines look like this:</p>\n\n<pre><code>(gdb) disas bar\nDump of assembler code for function bar:\n   0x0000000000400988 &lt;+0&gt;: push   %rbp\n</code></pre>\n\n<p>So basically, all I have to do is put the address 0x00400988 into the end of the overflowed buffer. I calculated the return address to be 36 bytes past when I overflow the variable.</p>\n\n<p>So in GDB i used the command set args $(perl -e 'print \"A\" x 36 . \"\\x88\\x09\\x40\\x00\"')</p>\n\n<p>I set a breakpoint right after the strcpy was run and examined what 20 words of rsp looked like:</p>\n\n<pre><code>(gdb) x/40xw $rsp\n0x7fffffffe240: 0xffffe358  0x00007fff  0x00000000  0x00000003\n0x7fffffffe250: 0x41414141  0x41414141  0x41414141  0x41414141\n0x7fffffffe260: 0x41414141  0x41414141  0x41414141  0x41414141\n0x7fffffffe270: 0x41414141  0x00000088  0xf7a54b45  0x00007fff\n0x7fffffffe280: 0x00000000  0x00000000  0xffffe358  0x00007fff\n</code></pre>\n\n<p>My issue is that the return address is not copying correctly. As you can see, it only copies the hex value 88 (and i guess the 00 in the beginning of the buffer.</p>\n\n<p><strong>This is what I have tried so far:</strong>\nI have tried to recompile and check if it was an issue with the address being returned to.</p>\n\n<p>I have tried to change the hex values of the address to random values and that seems to copy. For example, I tried to copy in the values 0x85af4709 into that location and it worked. In fact, I found out that the 09 in the original address is what is causing the issue. For example, I am able to make the address 0x00400788 but it cant be 0x00400788.</p>\n\n<p>That being said, I found out that 07 in ascii is a bell, which can be written as \\a. Even if I did that, i got the original issue. </p>\n\n<p>After that, I tried adjusting the amount of \"A\"s I would copy into the buffer to see if that did anyhting. it didnt.</p>\n\n<p>I even tried to write the string out when typing run in gdb</p>\n\n<p>Then, I googled this issue and found a really good example of exactly what i was trying to do. I used the sample program on page 32 of this article:\n<a href=\"https://engineering.purdue.edu/kak/compsec/NewLectures/Lecture21.pdf\" rel=\"nofollow\">https://engineering.purdue.edu/kak/compsec/NewLectures/Lecture21.pdf</a></p>\n\n<p>To my suprise, exactly what I was doing in my program worked exactly as I intended it to work in the authors sample program.</p>\n\n<p><strong>As a conclusion,</strong> I was wondering if someone would be able to explain why that one position in the address can contain any hex value except the one I want to copy into it. In addition to that, I wan't to know how I can fix this.</p>\n\n<p>If you would like any additional info id be more than happy to give it to you</p>\n"}, {"tags": ["c", "pointers", "multidimensional-array", "struct"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456354874, "post_id": 35614862, "comment_id": 58913553, "body": "<code>struct card **</code> cannot get a 2D array. A pointer is not an array! Use the corect declaration for the argument as the warning implies."}, {"owner": {"reputation": 128, "user_id": 5896026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xfle.jpg?s=128&g=1", "display_name": "Cristian Camilo Cabrera", "link": "https://stackoverflow.com/users/5896026/cristian-camilo-cabrera"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456356551, "post_id": 35614862, "comment_id": 58914169, "body": "@Olaf thats the thing. I dont recall on how to properly declare it. if its  struct card *handArray[] or struct card handArray[][] or something else. I cant seem to find it :/"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456356857, "post_id": 35614862, "comment_id": 58914298, "body": "You noticed I posted quite a comprehensive answer, didn&#39;t you?"}, {"owner": {"reputation": 128, "user_id": 5896026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xfle.jpg?s=128&g=1", "display_name": "Cristian Camilo Cabrera", "link": "https://stackoverflow.com/users/5896026/cristian-camilo-cabrera"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456356943, "post_id": 35614862, "comment_id": 58914336, "body": "No sorry my bad. @Olaf  Im not used to the interface yet."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456357072, "post_id": 35614862, "comment_id": 58914378, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>. As always, you are expected to know how to use SO."}], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 5896026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xfle.jpg?s=128&g=1", "display_name": "Cristian Camilo Cabrera", "link": "https://stackoverflow.com/users/5896026/cristian-camilo-cabrera"}, "edited": false, "score": 0, "creation_date": 1456358436, "post_id": 35615201, "comment_id": 58914838, "body": "Thank you. It compiled successfully. The prototype ends with struct card[][MAXCARDS] and the function is struct card handArray[hands][cards]  I had a small problem with the dealCards function. But now I reread the answer and I realized my mistake. Thank you very much for the information."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 8, "last_activity_date": 1456357005, "last_edit_date": 1456357005, "creation_date": 1456355847, "answer_id": 35615201, "question_id": 35614862, "link": "https://stackoverflow.com/questions/35614862/passing-a-2d-array-of-structs/35615201#35615201", "title": "Passing a 2D array of structs", "body": "<p>The most important thing when passing arrays as function arguments is: <strong>You can't pass an array to/from a function</strong>.</p>\n\n<p>Said that, read the following very carefully. (I'll use <code>int</code> for simplicity, but of course you can use other types, too.)</p>\n\n<p>But you can pass a \"pointer to the first element\" of an array. Luckily, C does the conversion automatically. Even more, for all but three exceptions (<code>sizeof</code>, <code>_Alignof</code>, <code>&amp;</code> operators), C converts the name of an array automatically to such a pointer. This is often called \"the array <em>decays</em> to a pointer to the first element\".</p>\n\n<p>But this decaying is not recursive. So, if you pass a 2D array to a function, it decays to a pointer to a 1D array:</p>\n\n<pre><code>int a[1][2];    // 1 = outer dimension, 2 = inner\n</code></pre>\n\n<p>when passed to a function</p>\n\n<pre><code>void f(int a[1][2]);\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>int (*a)[2]   // pointer to array of inner dimension\n</code></pre>\n\n<p>Alternatively one can explicitly use pointer syntax</p>\n\n<pre><code>void f(int (*a)[2]);\n</code></pre>\n\n<p>The type of <code>a</code> is <code>int (*)[2]</code> for all cases. Mind the parentheses! Which syntax you use is basically personal preference. I do prefer the array syntax with all dimensions, because that documents the intention more clearly.</p>\n\n<p>You always have to pass all sizes, except for the outermost dimension. That is just for documentation and not required (see below for an example).</p>\n\n<p>Inside the function, you use normal index-operator:</p>\n\n<pre><code>int t, i;    // index variable for ouTer, Inner\na[t][i];\n</code></pre>\n\n<p>Note this can be applied to higher dimension arrays. For 1D array, this also applies, actually. Just remove the inner dimension:</p>\n\n<pre><code>int a[1];\n</code></pre>\n\n<p>decays to</p>\n\n<pre><code>int *a;\n</code></pre>\n\n<p>(I just used the constants <code>1</code> and <code>2</code> to number the dimensions; of course you can use the dimensions you want.)</p>\n\n<hr>\n\n<p>If you want to pass an array with variable length (VLA, _variable length array), you have to pass all but the outermost dimension to the function:</p>\n\n<pre><code>f(int inner, a[][inner]);\n</code></pre>\n\n<p>But better for checking, etc. is to pass all dimensions:</p>\n\n<pre><code>f(int outer, int inner, a[outer][inner]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1456363872, "post_id": 35615796, "comment_id": 58916495, "body": "<code>int **</code> is <b>not</b> a 2D array! It is a pointer to pointer - very different data structure (it just happens to have the same syntax to access the elements). It does not match the layout in the picture."}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456388706, "post_id": 35615796, "comment_id": 58925982, "body": "Okay..., wow, I thought that was the case for a long time, since a 2d array could be broken down in to an array of arrays, and as such, a pointer to a pointer. Could you please elaborate?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456401935, "post_id": 35615796, "comment_id": 58935059, "body": "To repeat that: An array is <b>not</b> a pointer. See my answer for correctly passing an array of any number of dimensions. Also do <b>only</b> cast <b>iff</b> 1) they are really required 2) you understand <b>all</b> implications and 3) accept them <b>fully</b>."}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456404561, "post_id": 35615796, "comment_id": 58936976, "body": "@Olaf Uh... So where&#39;s the problem? I know that an array is a contiguous block of data. And passing it is impossible. Infact even using it is impossible. We need pointer arithmetic, and the pointer to the first element. That&#39;s why I said the a 2D array should decay into a pointer to a pointer (a pointer to an array, which in turn decays to pointer to a pointer)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456404898, "post_id": 35615796, "comment_id": 58937235, "body": "Last time repeat: If you read my answer <b>very</b> carefully (I think I wrote that in the answer), you will see where you are wrong. If a <b>specific</b> information is missing, feel free to drop a comment (where appropriate). If you don&#39;t understand the basics there - no offence - , please understand stack overflow is not a tutorial site. In that case you should read a god (and more recent than K&amp;R) C book."}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456421841, "post_id": 35615796, "comment_id": 58950383, "body": "I have a feeling that you&#39;ve misunderstood my post. I never said that an int** is an array, but I&#39;ve used it to define functions as long as I can remember, and also the books I read had the same syntax"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456422341, "post_id": 35615796, "comment_id": 58950688, "body": "No, I have not missunderstood. But just as this is shown in books does not make it a 2D array, nor is it correct. If that makes you feel better: pointers to pointers and multi-dimensional arrays are one of the most missunderstood and confused concepts in C. Btw. you don&#39;t even use that correctly. You basically use a 1D array inside your code with manual indexing. But the object you pass is not even a 1D <code>int</code> array, but - at best - an array of pointers, i.e. <code>int *[]</code>. A 2D array decays to  <code>int (*)[]</code>, though, as I wrote in my answer."}], "tags": [], "owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "is_accepted": false, "score": -2, "last_activity_date": 1456358963, "creation_date": 1456358963, "answer_id": 35615796, "question_id": 35614862, "link": "https://stackoverflow.com/questions/35614862/passing-a-2d-array-of-structs/35615796#35615796", "title": "Passing a 2D array of structs", "body": "<p><p>All of this might be a bit of a pain to understand, but it's pretty easy once you experiment around with it. You see, you can never pass a whole array as an argument (I mean you kinda could, by passing every single element, but that isn't the point). An array is basically sort of a table. If it's 1D, you have a line of boxes. If it's 2D, you have a table of boxes. If it's 3D, you have a cub(e/oid) of boxes. What you could do though is exploit how the numbers are laid out in memory and use pointer arithmetic. It's quite simple. </p><p>Ok, let's go-</p>\n\n<p>Let's say we have a function, set_up_array, which takes a pointer to a 2D array as a parameter.</p>\n\n<pre><code>void set_up_array(int **array, int row_size, int column_size){\n    for(int i = 0; i &lt; row_size; i++){\n        for(int j = 0; j &lt; column_size; j++){\n            *((int*)array + i*row_size + j) = i + j + k;\n        }\n    }\n}\n</code></pre>\n\n<p>That might make you freak out, but stay with me here okay.<p>\nNow, imagine the 2D array you're passing as a table. It's got rows, and then it's got columns. How would you go to the next element in such a table? Well, you have the index of your element, and you find it out, right? That's eactly what we're doing here.<br>\nI'll start of by explaining the reason we're typecasting array to int*. It's quite simple. Whenever we do pointer math, the C compiler tries to ease up our work (like a real bud...), so instead of adding the address to the pointers, we simply add the number of elements, and based on that, the C compiler will automatically figure out the address we want. Now, here's the problem, the C compiler figures that out by finding out the size of the what type the pointer points to. So, in order to make our lives simple, and also to make the C compiler happy, we convert it into a int*, which means, from here on, whatever we add will add to the initial address like it'd with int*s.\nNow let's go back to the table analogy. We know the row number and the column number.<br>\n<a href=\"https://i.stack.imgur.com/uWCCq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uWCCq.png\" alt=\"enter image description here\"></a> <br>One thing you might wanna keep in mind is that this image has the column and row labels reversed<p>To make our lives even more simpler, let's switch to a cartesian view (A graph-ish view, with an x and a y coordinate). Let's say that x is horizontal, while y is vertical. We can then write the arrray as \n<br><code>array[y][x]</code><br>\nWhich means that the element which we want, is the <code>x*row_size + y</code> element.\nWhich we can basically add to the pointer in our function, and the dereference it, like it's been done, just there, we used i and j.</p>\n"}], "owner": {"reputation": 128, "user_id": 5896026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xfle.jpg?s=128&g=1", "display_name": "Cristian Camilo Cabrera", "link": "https://stackoverflow.com/users/5896026/cristian-camilo-cabrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4315, "favorite_count": 3, "accepted_answer_id": 35615201, "answer_count": 2, "score": 3, "last_activity_date": 1456358963, "creation_date": 1456354315, "question_id": 35614862, "link": "https://stackoverflow.com/questions/35614862/passing-a-2d-array-of-structs", "title": "Passing a 2D array of structs", "body": "<p>Im dealing out card type structures from an array. </p>\n\n<pre><code>struct card deck[DECKSIZE];  //The deck is an array of cards structures\n</code></pre>\n\n<p>Im using a 2D array. An array of arrays of card type structures </p>\n\n<pre><code>struct card allHands[hands][cards];\n</code></pre>\n\n<p>Im using this function passing the deck and the array as pointers with the parameters of the array. I also change the location of the deck pointer to simulate the deck losing the card as it is passed to the player.  </p>\n\n<pre><code>void dealHands(struct card *deck, struct card **handArray, int hands, int cards){\n\n    int players;\n    int cardCount;\n    int passCard = 0;\n    struct card * thisDeck;\n\n    thisDeck = deck;\n\n    for(players = 0; players &lt; hands; players++){\n        for(cardCount = 0; cardCount &lt; cards; cardCount++){\n            handArray[players][cardCount] = thisDeck[passCard];\n            passCard++;\n        }   \n    }\n    deck = (deck + passCard);   \n}   \n</code></pre>\n\n<p>Its been a long while that I program in c so I think this is how you do the prototype? </p>\n\n<pre><code>    void dealHands(struct card[], struct card*[], int, int);\n</code></pre>\n\n<p>This is like the skeleton of my main of how Im implementing the function.</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    /* Declare and initialize variables  */\n\n    int hands = atoi(argv[HANDSINPUT]);  //How many players \n    int cards = atoi(argv[CARDSINPUT]);  //How many cards per hand  \n    struct card deck[DECKSIZE];  //The deck is an array of cards structures\n\n    struct card allHands[hands][cards];\n\n    //Builds the deck\n    //Shuffles deck with a RNG and swapping every card\n\n    int players;\n    int cardCount;\n    int passCard = 0;   \n\n\n    dealHands(deck, allHands, hands, cards);\n\n\n}\n</code></pre>\n\n<p>I get the 2 following statements during compilation </p>\n\n<p>warning: passing argument 2 of \u2018dealHands\u2019 from incompatible pointer type [enabled by default]\n  dealHands(deck, allHands, hands, cards);\n  ^</p>\n\n<p>note: expected \u2018struct card **\u2019 but argument is of type \u2018struct card (<em>)[(sizetype)(cards)]\u2019\n void dealHands(struct card[], struct card</em>[], int, int);\n      ^</p>\n\n<p>I always mess up when it comes to pointers and arrays when I need to call them in a function. So Im not sure where my logic is flawed. Where am I passing the address rather than the value or vice versa?</p>\n"}, {"tags": ["c", "json", "parsing", "gps", "gpsd"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1457072915, "post_id": 35614417, "comment_id": 59249190, "body": "I&#39;m not familiar with reading data from GPS, but your threading as posted looks like trouble. In code elsewhere are you calling <code>start_test</code> then <code>test_result</code> on the next line? And what exactly are you trying to do? Read elevation data from GPS satellite 10? I started on an answer but it turned out I had too many questions. Your EDIT1 quoted documentation simply means that calls to <code>gps_waiting()</code> and <code>gps_read()</code> are going to block. If you only have a single thread in your process, this means your entire process will come to a screeching halt until the blocking function call returns. (cont)"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1457073383, "post_id": 35614417, "comment_id": 59249385, "body": "(cont) So if your process is waiting on other input sources, you will lose any data coming in while your single thread is blocking on <code>gps_waiting()</code> and/or <code>gps_read()</code>. This is why it suggests making these calls a separate thread whose sole job is simply to block on these calls and retrieve data from them. Meanwhile, other threads in your process are free for anything else your process may want to do. The mutex for the <code>gps_data</code> structure is recommended to protect access to it in case other threads are modifying and/or reading from it. Mutexes ensure data concurrency and integrity in (cont)"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1457073638, "post_id": 35614417, "comment_id": 59249512, "body": "(cont) multi-threaded environments. If all of this is new to you, then I recommend reading a pthread tutorial. This is a good one: <a href=\"https://computing.llnl.gov/tutorials/pthreads/\" rel=\"nofollow noreferrer\">computing.llnl.gov/tutorials/pthreads</a> . But based on what you&#39;re trying to do here, you may not even need threads. If this is just a test/proof-of-concept that you can in fact read GPS data, I wouldn&#39;t mess with threads. Threads always add complication and open the door for strange bugs if not used correctly. Sorry for the long comment; wish SO had a page for answers and a page for discussion."}, {"owner": {"reputation": 899, "user_id": 4217786, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/83dc20c5a642afe5ee1d6a59b7f678c2?s=128&d=identicon&r=PG&f=1", "display_name": "ogs", "link": "https://stackoverflow.com/users/4217786/ogs"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1457091894, "post_id": 35614417, "comment_id": 59260101, "body": "@yano thank for these information! I am calling <code>start_test</code> and <code>test_result</code> functions in the main of another file (containing only <code>main()</code>), which includes the file defined in the question. Basically, I would like to implement a process which is allowing to the user to call <code>start_test()</code> and getting the result when he wants to by calling <code>test_result()</code>. It could be immediately or few minutes after the first starting request. That why, I would like to return 1 to the user if the test is currently not entirely finished and 3 or 4 otherwise."}, {"owner": {"reputation": 899, "user_id": 4217786, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/83dc20c5a642afe5ee1d6a59b7f678c2?s=128&d=identicon&r=PG&f=1", "display_name": "ogs", "link": "https://stackoverflow.com/users/4217786/ogs"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1457091988, "post_id": 35614417, "comment_id": 59260153, "body": "@yano As you identified, I should be blocked until the blocking function call returns and I will unfortunately loss other input data given by the users... That why I firtly directed my implement to thread usage"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1457109672, "post_id": 35614417, "comment_id": 59272248, "body": "Thanks for the extra info. Yes, if you have other inputs/other things going on in your program, you were correct to use threads. I can post an answer with my 2 cents on how I would implement this with pthreads (maybe not before the bounty deadline, I am at work :( ), but that tutorial I posted should give you good idea how to do it. I can&#39;t speak to the JSON stuff. Is there any indication how big a JSON object is? How many bytes you read back when <code>gps_read()</code> returns? There must be info somewhere that makes it possible to stitch these potentially fragmented JSON objects back together."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1457110675, "post_id": 35614417, "comment_id": 59272939, "body": "I suspect all this info is contained in the <code>struct gps_data_t</code> structure somehow, but I will need to take a look at the definition."}, {"owner": {"reputation": 899, "user_id": 4217786, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/83dc20c5a642afe5ee1d6a59b7f678c2?s=128&d=identicon&r=PG&f=1", "display_name": "ogs", "link": "https://stackoverflow.com/users/4217786/ogs"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1457352601, "post_id": 35614417, "comment_id": 59352164, "body": "@yano As you highlighted, all information are stored in the <code>strct gps_data_t</code> defined in the gps header file. Thean, JSON stuff is not really important. There is no reliable indication about the size (or number of bytes). I guess that&#39;s because NMEA frames might contain different content depending on the signal quality  : <code>http:&#47;&#47;www.catb.org&#47;gpsd&#47;client-howto.html</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2463, "user_id": 596273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecfd95ed7c25b54d6ca64d500cfb73e6?s=128&d=identicon&r=PG", "display_name": "Seth", "link": "https://stackoverflow.com/users/596273/seth"}, "is_accepted": false, "score": 0, "last_activity_date": 1459814194, "creation_date": 1459814194, "answer_id": 36414848, "question_id": 35614417, "link": "https://stackoverflow.com/questions/35614417/libgps-for-extract-data-from-the-gpsd-daemon/36414848#36414848", "title": "libgps for extract data from the gpsd daemon", "body": "<p>Your loop is executing multiple times before returning a full packet because you do not have a sleep condition.  Therefore each time the daemon registers a packet (even when not a full NMEA message), the <code>gps_waiting()</code> function returns.  I'd recommend sleeping at least as long as it takes your GPS to register a full message.</p>\n\n<p>For example, if you expect <code>GPPAT</code> messages, you could reasonably expect to have 12 characters in the message.  Thus at 9600 baud, that would take 1/17.5 seconds or about 57 ms.  In this case, your code could look like this:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;gps.h&gt;\n#include &lt;pthread.h&gt;\n\npthread_t t_thread;\n\nstruct t_args {\n   unsigned int ID;\n};\n\nunsigned int status = 0;\nint elevation;\n\nint p_nmea(void *targs);\n\nvoid start_test(void)\n{\n    struct t_args *args = malloc(sizeof *args);\n    status = 1;\n    args-&gt;ID = 10;\n\n    pthread_attr_t attr;\n\n    pthread_attr_init(&amp;attr);\n    pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);\n    if (pthread_create(&amp;t_thread, &amp;attr, (void *)&amp;p_nmea, args) != 0)\n    {\n        perror(\"create: \\n\");\n    }\n}\n\nint test_result(int * Svalue)\n{\n    int res;\n\n    if(status == 1)\n    {\n        void * t_res;\n        if(pthread_tryjoin_np(t_thread, &amp;t_res) != 0)\n        {\n            status = 1;\n        }\n        else\n        {       \n            if((int)t_res == 1)\n            {\n                res = 3;\n                *Svalue = elevation;\n                elevation = 0;\n            }\n            else\n            {\n                res = 4;            \n            }\n        }\n    }\n    return res;\n}\n\nint p_nmea(void *targs)\n{\n    struct t_args *thread_args = targs;     \n    struct gps_data_t gpsdata;\n    int ret = 0;\n    int count = 10;\n    int i,j;\n\n   if(gps_open((char *)\"localhost\", (char *)DEFAULT_GPSD_PORT, &amp;gpsdata) != 0)\n   {\n        (void)fprintf(stderr, \"cgps: no gpsd running or network error: %d, %s\\n\", errno, gps_errstr(errno));\n        return (-1);\n   }\n   else\n   {\n        (void)gps_stream(&amp;gpsdata, WATCH_ENABLE, NULL);\n        do \n        {\n            ret = 0; // Set this here to allow breaking correctly\n            usleep(50000); // Sleep here to wait for approx 1 msg\n            if(!gps_waiting(&amp;gpsdata, 1000000)) break;\n\n            if(gps_read(&amp;gpsdata) == -1) break;\n\n            if(gpsdata.set &amp; PACKET_SET)\n            {\n              for (i = 0; i &lt; MAXCHANNELS &amp;&amp; !ret; i++)\n              {\n                for (j = 0; j &lt; gpsdata.satellites_visible; j++)\n                {\n                  if(gpsdata.PRN[i] == thread_args.ID) \n                  {\n                     elevation = (int)gpsdata.elevation[i]; // Be sure to not deref structure here\n                     ret = 1;\n                     break;\n                  }       \n                }\n            }\n            --count;\n        }while(count != 0);\n    }\n    (void)gps_stream(&amp;gpsdata, WATCH_DISABLE, NULL);\n    (void)gps_close(&amp;gpsdata);\n    (void)free(thread_args);\n    (void)pthread_exit((void*) ret);\n}\n</code></pre>\n\n<p>Alternatively, you could just set your count higher and wait for the full message.</p>\n"}], "owner": {"reputation": 899, "user_id": 4217786, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/83dc20c5a642afe5ee1d6a59b7f678c2?s=128&d=identicon&r=PG&f=1", "display_name": "ogs", "link": "https://stackoverflow.com/users/4217786/ogs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1428, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1459814194, "creation_date": 1456352593, "last_edit_date": 1456956717, "question_id": 35614417, "link": "https://stackoverflow.com/questions/35614417/libgps-for-extract-data-from-the-gpsd-daemon", "title": "libgps for extract data from the gpsd daemon", "body": "<p>I wanted to use libgps to interface with gpsd daemon. That's why I've implemented a little testing application in order to extract a value from a specific satellite.</p>\n\n<p>The documentation on its HOWTO page tells us that </p>\n\n<blockquote>\n  <p>The tricky part is interpreting what you get from the blocking read.\n  The reason it\u2019s tricky is that you\u2019re not guaranteed that every read\n  will pick up exactly one complete JSON object from the daemon. It may\n  grab one response object, or more than one, or part of one, or one or\n  more followed by a fragment.</p>\n</blockquote>\n\n<p>As recommended the documentation, the <code>PACKET_SET</code> mask bit is checked before doing anything else.</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;gps.h&gt;\n#include &lt;pthread.h&gt;\n\npthread_t t_thread;\n\nstruct t_args {\n   unsigned int ID;\n};\n\nunsigned int status = 0;\nint elevation;\n\nint p_nmea(void *targs);\n\nvoid start_test(void)\n{\n    struct t_args *args = malloc(sizeof *args);\n    status = 1;\n    args-&gt;ID = 10;\n\n    pthread_attr_t attr;\n\n    pthread_attr_init(&amp;attr);\n    pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);\n    if (pthread_create(&amp;t_thread, &amp;attr, (void *)&amp;p_nmea, args) != 0)\n    {\n        perror(\"create: \\n\");\n    }\n}\n\nint test_result(int * Svalue)\n{\n    int res;\n\n    if(status == 1)\n    {\n        void * t_res;\n        if(pthread_tryjoin_np(t_thread, &amp;t_res) != 0)\n        {\n            status = 1;\n        }\n        else\n        {       \n            if((int)t_res == 1)\n            {\n                res = 3;\n                *Svalue = elevation;\n                elevation = 0;\n            }\n            else\n            {\n                res = 4;            \n            }\n        }\n    }\n    return res;\n}\n\nint p_nmea(void *targs)\n{\n    struct t_args *thread_args = targs;     \n    struct gps_data_t gpsdata;\n    int ret = -1;\n    int count = 10;\n    int i,j;\n\n   if(gps_open((char *)\"localhost\", (char *)DEFAULT_GPSD_PORT, &amp;gpsdata) != 0)\n   {\n        (void)fprintf(stderr, \"cgps: no gpsd running or network error: %d, %s\\n\", errno, gps_errstr(errno));\n        return (-1);\n   }\n   else\n   {\n        (void)gps_stream(&amp;gpsdata, WATCH_ENABLE, NULL);\n        do \n        {\n            if(!gps_waiting(&amp;gpsdata, 1000000))\n            {       \n                (void)gps_close(&amp;gpsdata);\n            }\n            else\n            {\n                if(gps_read(&amp;gpsdata) == -1)\n                {\n                    return (-1);\n                }\n                else\n                {\n                    if(gpsdata.set &amp; PACKET_SET)\n                    {\n                       for (i = 0; i &lt; MAXCHANNELS; i++)\n                       {\n                            for (j = 0; j &lt; gpsdata-&gt;satellites_visible; j++)\n                            {\n                                if(gpsdata-&gt;PRN[i] == thread_args.ID) \n                                {\n                                    elevation = (int)gpsdata-&gt;elevation[i];\n                                    ret = 1;\n                                    break;\n                                }       \n                            }\n                            if(gpsdata-&gt;PRN[i] == thread_args.ID)\n                            {\n                                break;\n                            }\n                       }\n                    }\n                }\n            }\n            --count;\n        }while(count != 0);\n    }\n    (void)gps_stream(&amp;gpsdata, WATCH_DISABLE, NULL);\n    (void)gps_close(&amp;gpsdata);\n    (void)free(thread_args);\n    (void)pthread_exit((void*) ret);\n}\n</code></pre>\n\n<p>As recommended in the documentation too, I had a look at cgps and gpxlogger for example codes, but the subtleties of libgps escape me. A while loop has been added before <code>gps_waiting()</code> in order to get, at least, one entire response object. Before introducing pthread, I noted that call the function <code>test_result()</code> just after <code>start_test()</code> take few seconds before returning an answer. By using a thread I thought that <code>3</code> would be imediately returned, then <code>3</code> or <code>4</code> .. but it's not ! I am still losing few seconds. In addition, I voluntarily use <code>pthread_tryjoin_np()</code> because its man page says </p>\n\n<blockquote>\n  <p>The pthread_tryjoin_np() function performs a nonblocking join with the thread</p>\n</blockquote>\n\n<p>Can anybody give me his help, I guess that I understand something wrongly but I am not able to say about which part yet? Basically, why I come into the do while loop at least four times before returning the first value ?</p>\n\n<p>EDIT 1 : </p>\n\n<p>After reading the documentation HOWTO again I highlight the lines :</p>\n\n<blockquote>\n  <p>The fact that the data-waiting check and the read both block means that, if your application has to deal with other input sources than the GPS, you will probably have to isolate the read loop in a thread with a mutex lock on the gps_data structure.</p>\n</blockquote>\n\n<p>I am a little bit confusing. What does it really mean ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1456352283, "post_id": 35614288, "comment_id": 58912393, "body": "That&#39;s the wrong question. The right question is &quot;why can I not assign an integer literal to an <code>int *</code> and why can I also not assign a character literal to a <code>char *</code>&quot;."}, {"owner": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "edited": false, "score": 0, "creation_date": 1456352332, "post_id": 35614288, "comment_id": 58912426, "body": "You need code to demonstrate what you are trying to do. In C you can cast anything to anything."}, {"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "edited": false, "score": 0, "creation_date": 1456352332, "post_id": 35614288, "comment_id": 58912427, "body": "Because what you are referring to as a &quot;string literal&quot; is actually parsed as a constant array of characters. char* var = &quot;string&quot; is the same as char var[] = {&#39;s&#39;,&#39;t&#39;,&#39;r&#39;,&#39;i&#39;,&#39;n&#39;,&#39;g&#39;};"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1456352356, "post_id": 35614288, "comment_id": 58912443, "body": "@KerrekSB: What are you talking about, you can totally do <code>char *foo = &quot;bar&quot;;</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1456352405, "post_id": 35614288, "comment_id": 58912462, "body": "@EOF but &quot;bar&quot; is not a char literal but a string literal."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456352454, "post_id": 35614288, "comment_id": 58912482, "body": "@MichaelWalz: Well, the question talks about &quot;string literal&quot;, so..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456352529, "post_id": 35614288, "comment_id": 58912507, "body": "@EOF the op writes that you <b>can</b> assign a string literal to a char*, (which is of course correct)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1456352602, "post_id": 35614288, "comment_id": 58912544, "body": "@MichaelWalz, I&#39;m just not sure what KerrekSB&#39;s comment is supposed to add to this."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456353579, "post_id": 35614288, "comment_id": 58913026, "body": "You cannot assign string literals (character array) to <code>char*</code>. You can assign <i>a place of</i> string literals to <code>const char*</code>. Integer literals can be assigned to <code>int*</code>, converted by implementation-defined manner."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456353748, "post_id": 35614288, "comment_id": 58913103, "body": "Detail: C does not define &quot;integer literal&quot;.  It does well defined various kinds of &quot;integer constant&quot;.  OTOH, it does define `&quot;string literal&quot;."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1456354221, "post_id": 35614288, "comment_id": 58913307, "body": "@EOF KerrekSB is attempting to correct the asker&#39;s apparent misunderstanding, as the asker appears to believe that a string literal is to <code>char*</code> what an int literal is to <code>int*</code>, which it is not."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5977149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323d4170b9768fee16deb27c477af62?s=128&d=identicon&r=PG", "display_name": "Yamor", "link": "https://stackoverflow.com/users/5977149/yamor"}, "edited": false, "score": 0, "creation_date": 1456353004, "post_id": 35614366, "comment_id": 58912746, "body": "That sounds reasonable, but then why do I remember reading (I think in The C++ Programming Language) that they only allowed an assignment of a string literal to char* because in previous definitions of C the type of a string literal was char*, but today when it&#39;s technically of type char[] it shouldn&#39;t really be allowed (but is for backward compatibility)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456353312, "post_id": 35614366, "comment_id": 58912900, "body": "OP asks about <i>string literal</i> and this answer discusses <i>string</i>.  Similar, but different.   &quot;A string literal need not be a string (see 7.1.1), because a null character may be embedded in it by a \\0 escape sequence.&quot;  C11 footnote 78"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 29, "user_id": 5977149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323d4170b9768fee16deb27c477af62?s=128&d=identicon&r=PG", "display_name": "Yamor", "link": "https://stackoverflow.com/users/5977149/yamor"}, "edited": false, "score": 1, "creation_date": 1456353763, "post_id": 35614366, "comment_id": 58913109, "body": "@Yamor: The C standard is clear that modifications of the resulting array with the literal is undeffined behaviour. Still it is not explicitly <code>const char []</code>, so assignment to a <code>char *</code> is well defined. While I agree this is problematic, it sometimes is a useful feature to provide a default string. It is not allowed in C++. Note that C++ and C are different languages. Porting rules from one to the other is more often a problem than most people expect."}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 1, "last_activity_date": 1456352409, "creation_date": 1456352409, "answer_id": 35614366, "question_id": 35614288, "link": "https://stackoverflow.com/questions/35614288/difference-between-char-and-int/35614366#35614366", "title": "Difference between char* and int*", "body": "<p>A string in C isn't a primitive data type. It is actually a 0 terminated sequence of chars. So <code>char *sp = \"literal\";</code> is actually working with a pointer to a sequence of chars.</p>\n\n<p>An int on the otherhand is a primitive type, so when you use a literal int, it is an int with no tricks to make it look like something else.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456353939, "post_id": 35614378, "comment_id": 58913184, "body": "Good answer aside from &quot;C does not have a string type.&quot; as that confuses the issue and IMO is not needed.  C defines <i>string literal</i> and <i>string</i> but does not define what you mean by a <i>string type</i>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456354460, "post_id": 35614378, "comment_id": 58913399, "body": "@chux: I added a word to clarify. But I think the information is neither confusing, nor unnecessary. Once you accept that it is just an <code>char []</code> and nothing else, things become much more clear. Btw. 6.2.5  describes the concept of types quite well. And the term &quot;string&quot; is only used in context of <i>string-literal</i> or the string handling libraries."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 3, "last_activity_date": 1456354374, "last_edit_date": 1456354374, "creation_date": 1456352464, "answer_id": 35614378, "question_id": 35614288, "link": "https://stackoverflow.com/questions/35614288/difference-between-char-and-int/35614378#35614378", "title": "Difference between char* and int*", "body": "<p>Because a string literal is translated to an array of <code>char</code> (<code>char []</code>) during translation. C does not have a distinct string type.</p>\n\n<p>As every array, it is converted for most usages (except for <code>sizeof</code>, <code>_Alignof</code> and the address-operator <code>&amp;</code>), it is converted (\"decays\") to a pointer to its first element. As this is a <code>char *</code>, there is no problem assigning it to a <code>char *</code> variable or passing as a <code>char *</code> argument.</p>\n\n<p>An <code>int</code>/integer constant (the C standard does not use the term \"literal\" here) OTOH can be converted to a pointer, but that is not what you normally want. Also the conversion is implementation defined. Thus the compiler emits a warning for such an assignment without explicit cast. To emphasise: there are very few cases you want to assign an integer constant to a pointer (e.g. embedded systems). None in typical PC programs.</p>\n\n<p>To get the address of an <code>int</code> <strong>variable</strong>, use the <code>&amp;</code> operator:</p>\n\n<pre><code>int i = 5;\nint *p = &amp;i;\n</code></pre>\n\n<p>If you need something similar to the string literal, qualify the variable <code>const</code>:</p>\n\n<pre><code>const int i = 5;\n</code></pre>\n\n<p>Note that this still is a single integer, so you must not add an offset to the pointer, e.g. <code>p[1]</code> is undefined behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456352667, "post_id": 35614409, "comment_id": 58912576, "body": "This is not exactly correct. An array is not always converted to &quot;a pointer ...&quot;."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456352751, "post_id": 35614409, "comment_id": 58912611, "body": "When can it be used as an r-value without being converted?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456353082, "post_id": 35614409, "comment_id": 58912799, "body": "The C standard does not use the term rvalue at all, but only mentions it once in footnote 64: <i>What is sometimes called &#39;&#39;rvalue&#39;&#39; is in this International Standard described as the &#39;&#39;value of an expression&#39;&#39;</i>. See the corresponding section 6.3.2.1p3 for the exceptions."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456353492, "post_id": 35614409, "comment_id": 58912980, "body": "I&#39;ve reworded and clarified."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456354014, "post_id": 35614409, "comment_id": 58913216, "body": "You can do <code>int *intptr = 123;</code> in C, but can&#39;t in C++. (you may get some warnings) <a href=\"https://ideone.com/owvg2D\" rel=\"nofollow noreferrer\">ideone.com/owvg2D</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456354277, "post_id": 35614409, "comment_id": 58913332, "body": "@MikeCAT: Yes, I covered that in my answer. But actually it is useless for PC-type programs (but very useful for embedded programming)."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1456353482, "last_edit_date": 1456353482, "creation_date": 1456352573, "answer_id": 35614409, "question_id": 35614288, "link": "https://stackoverflow.com/questions/35614288/difference-between-char-and-int/35614409#35614409", "title": "Difference between char* and int*", "body": "<p>In C, a string is an array of characters. When an array is used as a the value of an expression, it's usually automatically converted to a pointer to its first element (there are some exceptions, they're not important here), so you can assign this to a pointer variable.</p>\n\n<p>Other literals are not automatically converted to pointers, so you can't assign them to pointers without casting (and even if you do cast, the result is not portable). So the reason you can't do:</p>\n\n<pre><code>int *intptr = 123;\n</code></pre>\n\n<p>is the same reason you can't do:</p>\n\n<pre><code>char *charptr = 'a';\n</code></pre>\n\n<p>Note that there's nothing special about <code>char*</code>. You can assign an <code>int*</code> from an <code>int</code> array, e.g.</p>\n\n<pre><code>int intarray[] = {1, 2, 3};\nint *intptr = intarray;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 5932855, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/76c3b0f0dc9f0269f7dc7cfe8d581a0e?s=128&d=identicon&r=PG&f=1", "display_name": "RadioRaheem", "link": "https://stackoverflow.com/users/5932855/radioraheem"}, "is_accepted": false, "score": 1, "last_activity_date": 1456352690, "creation_date": 1456352690, "answer_id": 35614445, "question_id": 35614288, "link": "https://stackoverflow.com/questions/35614288/difference-between-char-and-int/35614445#35614445", "title": "Difference between char* and int*", "body": "<p>A C string literal is an array of type char (composed of many chars).\nAn integer is a single item of type int.</p>\n\n<p>This is why the syntax for assigning each to a pointer differs.  </p>\n\n<p>Assigning an array of type char or int to a pointer would use the same syntax, as would assigning a single item of type char or int to a pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456354165, "post_id": 35614613, "comment_id": 58913287, "body": "The standard intentionally does not quailfy the generated array <code>const</code>, but explicitly states that modifications are UB. The consequence is that you can <code>char *p = &quot;Hello&quot;;</code>, while <code>const char a[] = &quot;Hello&quot;; char *p = a;</code> should generate a warning. So you cannot make it equivalent."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456400206, "post_id": 35614613, "comment_id": 58933879, "body": "@Olaf: Sure.  That&#39;s why I said &quot;just <i>about</i> exactly the same&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456403079, "post_id": 35614613, "comment_id": 58935920, "body": "It has different conversion semantic - the most important part, not just a minor difference."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1456353388, "creation_date": 1456353388, "answer_id": 35614613, "question_id": 35614288, "link": "https://stackoverflow.com/questions/35614288/difference-between-char-and-int/35614613#35614613", "title": "Difference between char* and int*", "body": "<p>When you say</p>\n\n<pre><code>char *str = \"Hello\";\n</code></pre>\n\n<p>what happens is just about exactly the same as if you had said</p>\n\n<pre><code>const char tmpstr[] = {'H', 'e', 'l', 'l', 'o', '\\0'};\nchar *str = tmpstr;\n</code></pre>\n\n<p>That is, whenever you write a string constant like \"Hello\", the compiler automatically allocates a little static character array containing your string.  And it's perfectly okay to use this array as the initializer for a character pointer.  (There's actually a potential little discrepancy as to whether the string constant is an array of const char or not, but let's not worry about that for now.)</p>\n\n<p>So if you said</p>\n\n<pre><code>int tmpi[] = {1, 2, 3, 4, 5};\nint *ip = tmpi;\n</code></pre>\n\n<p>that would work perfectly fine, too.</p>\n\n<p>But you can't assign an integer to an <code>int *</code>, because that doesn't make sense:</p>\n\n<pre><code>int *ip2 = 123;    /* WRONG */\n</code></pre>\n\n<p>On the right we have an integer 123, and on the left we have an <code>int *</code>,and you can't assign an integer to a pointer.</p>\n\n<p>(Now, if you really want to, you can try to assign a raw memory address to a pointer, but let's not worry about that for now, either.)</p>\n"}], "owner": {"reputation": 29, "user_id": 5977149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323d4170b9768fee16deb27c477af62?s=128&d=identicon&r=PG", "display_name": "Yamor", "link": "https://stackoverflow.com/users/5977149/yamor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1456354374, "creation_date": 1456352096, "question_id": 35614288, "link": "https://stackoverflow.com/questions/35614288/difference-between-char-and-int", "title": "Difference between char* and int*", "body": "<p>I'm sorry for asking a basic question that has definitely been asked before, but I just couldn't find it!\nWhy in C can you assign a string literal to a char*, but cannot assign an integer literal to an int* ?</p>\n"}, {"tags": ["c", "assembly", "cmp"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456352258, "post_id": 35614265, "comment_id": 58912381, "body": "The <code>cmp</code> subracts <code>0x2</code> (hexadecimal 2 == decimal 2) from the value of <code>%eax</code>, sets the flags accordingly, and leaves <code>%eax</code> unchanged."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1456352262, "post_id": 35614265, "comment_id": 58912385, "body": "Yes, <code>$2</code> is just <code>2</code>. It&#39;s comparing the return value of <code>fscanf</code>, meaning it&#39;s checking whether you entered 2 numbers. Don&#39;t get me wrong, but if you couldn&#39;t even solve this you will run into more trouble later and asking on SO is probably not the right approach."}, {"owner": {"reputation": 269, "user_id": 5517861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ac533628eea7ee7b9fc602f2f77756b?s=128&d=identicon&r=PG&f=1", "display_name": "Lance_P", "link": "https://stackoverflow.com/users/5517861/lance-p"}, "edited": false, "score": 0, "creation_date": 1456352645, "post_id": 35614265, "comment_id": 58912564, "body": "Thanks guys. Appreciate the concern, Jester. I&#39;m also very sure that I am going to run into more trouble. I am just having a hard time finding decent tutorials over assembly on the internet. I lost focus during an important lecture (curse you ADD) and now I&#39;m a bit lost. I just spoke to my professor, but I forgot to ask about that line and didn&#39;t want to bother him again."}, {"owner": {"reputation": 1570, "user_id": 1721073, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5290899a0a228e6b5bb55ef201fee0ba?s=128&d=identicon&r=PG", "display_name": "Vans S", "link": "https://stackoverflow.com/users/1721073/vans-s"}, "edited": false, "score": 0, "creation_date": 1456353327, "post_id": 35614265, "comment_id": 58912904, "body": "I think this is a very valid and good question for learning ASM. Not sure why the downvote. It covers using the stack, calling into api, and opcodes."}], "answers": [{"comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1456354241, "post_id": 35614374, "comment_id": 58913318, "body": "You don&#39;t need to &quot;assume&quot; as we can see their address being passed to <code>fscanf</code>."}, {"owner": {"reputation": 269, "user_id": 5517861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ac533628eea7ee7b9fc602f2f77756b?s=128&d=identicon&r=PG&f=1", "display_name": "Lance_P", "link": "https://stackoverflow.com/users/5517861/lance-p"}, "edited": false, "score": 0, "creation_date": 1456354337, "post_id": 35614374, "comment_id": 58913354, "body": "0 0 does defuse the bomb, but I am still slightly confused. I worked through the assembly on my own, and came to (I think) the same conclusion as you did, but I can&#39;t find any other input that works. I found that if the inputs are named x and y, then if x == y + (y*2^5) then the bomb should be defused, but it doesn&#39;t seem to work. Any idea why?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1456354508, "post_id": 35614374, "comment_id": 58913420, "body": "Shifting by 5 bits and adding the original is just multiplication by 33. As such any pair where the second number is 33 times the first should work. Just checked, it does."}, {"owner": {"reputation": 269, "user_id": 5517861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ac533628eea7ee7b9fc602f2f77756b?s=128&d=identicon&r=PG&f=1", "display_name": "Lance_P", "link": "https://stackoverflow.com/users/5517861/lance-p"}, "edited": false, "score": 0, "creation_date": 1456355050, "post_id": 35614374, "comment_id": 58913622, "body": "Ah, that makes sense. Thanks."}, {"owner": {"reputation": 1570, "user_id": 1721073, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5290899a0a228e6b5bb55ef201fee0ba?s=128&d=identicon&r=PG", "display_name": "Vans S", "link": "https://stackoverflow.com/users/1721073/vans-s"}, "edited": false, "score": 0, "creation_date": 1456358898, "post_id": 35614374, "comment_id": 58914987, "body": "I say assume because we don&#39;t know what fscanf does in this case with 100% certainty (as we do not have the bytecode), it could be redirected to do something else than expected, say via a hook or function body byte manipulation."}], "tags": [], "owner": {"reputation": 1570, "user_id": 1721073, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5290899a0a228e6b5bb55ef201fee0ba?s=128&d=identicon&r=PG", "display_name": "Vans S", "link": "https://stackoverflow.com/users/1721073/vans-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1456352957, "last_edit_date": 1456352957, "creation_date": 1456352452, "answer_id": 35614374, "question_id": 35614265, "link": "https://stackoverflow.com/questions/35614265/rookie-assembly-bomb-defusal-cmp-operator/35614374#35614374", "title": "Rookie Assembly Bomb Defusal cmp Operator", "body": "<p>Common confusion with the JE and related instructions. I would recommend getting a debugger to visualize what the code is doing.</p>\n\n<p>cmp is internally subtracting but really its checking if eax == 2.  If eax == 2 JE (JUMP IF EQUAL) it jumps so EIP register (the next instruction executed) becomes 0x08048743 (the memory address of \"phase_1_of_5+57\").  If eax != 2, it steps over JE ignoring it.</p>\n\n<p>SPOILER DO NOT READ THIS UNTIL YOU PRACTISE YOURSELF AND GET STUCK AGAIN:</p>\n\n<p>So we look at <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fscanf.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/c_standard_library/c_function_fscanf.htm</a>. What fscanf does. We see that a return value of 2 means it expects 2 terms of input. Now we assume we enter two terms and now we follow the JE.</p>\n\n<p>We see (this is why you need a debugger, to visualize this) </p>\n\n<pre><code>mov    0x18(%esp),%eax\n...\ncmp    0x1c(%esp),%eax\n\n0x18 == 6th value on the stack\n0x1c == 7th value on the stack\nsafe to assume these are the two input terms.\n\n0x08048743 &lt;+57&gt;:    mov    0x18(%esp),%eax\n0x08048747 &lt;+61&gt;:    mov    %eax,%edx\n0x08048749 &lt;+63&gt;:    shl    $0x5,%edx\n0x0804874c &lt;+66&gt;:    add    %edx,%eax\n</code></pre>\n\n<p>Here we can assume the way to defuse the bomb is to enter the left shift by 5 of the first term, added to the first term. To the second term.</p>\n\n<p>So 0 0 should defuse it.</p>\n"}], "owner": {"reputation": 269, "user_id": 5517861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ac533628eea7ee7b9fc602f2f77756b?s=128&d=identicon&r=PG&f=1", "display_name": "Lance_P", "link": "https://stackoverflow.com/users/5517861/lance-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 35614374, "answer_count": 1, "score": 1, "last_activity_date": 1456356437, "creation_date": 1456352001, "last_edit_date": 1456356437, "question_id": 35614265, "link": "https://stackoverflow.com/questions/35614265/rookie-assembly-bomb-defusal-cmp-operator", "title": "Rookie Assembly Bomb Defusal cmp Operator", "body": "<p>I'm new to assembly and really have no idea what is going on. </p>\n\n<p>I'm trying to complete a homework assignment in which we have to defuse a bomb by finding out the correct input to five phases of a program.</p>\n\n<p>I've tried looking online for the answer to my question but I really have no idea what to search to find the answer I'm looking for.</p>\n\n<p>I believe I understand everything in the code below from <code>&lt;+0&gt;</code> to <code>&lt;+35&gt;</code>. At <code>&lt;+40&gt;</code> the cmp operator is called to compare the <code>$0x2</code>, and what is stored in the <code>%eax</code> register. At the time of the comparison I believe <code>%eax</code> is still storing a function call to scanf (correct me if I'm wrong).</p>\n\n<p>Through use of gdb I do know that the scanf function was called as follows: \n<code>scanf(\"%d %d\", &amp;x, &amp;y);</code></p>\n\n<p>So what exactly is <code>$0x2</code> referring to in this case (is it just the value 2?) and what is happening when comparing the two items?</p>\n\n<p>I believe this is GAS Syntax.</p>\n\n<pre><code>   0x0804870a &lt;+0&gt;:     sub    $0x2c,%esp\n   0x0804870d &lt;+3&gt;:     lea    0x1c(%esp),%eax\n   0x08048711 &lt;+7&gt;:     mov    %eax,0xc(%esp)\n   0x08048715 &lt;+11&gt;:    lea    0x18(%esp),%eax\n   0x08048719 &lt;+15&gt;:    mov    %eax,0x8(%esp)\n   0x0804871d &lt;+19&gt;:    movl   $0x8048baa,0x4(%esp)\n   0x08048725 &lt;+27&gt;:    mov    0x804b040,%eax\n   0x0804872a &lt;+32&gt;:    mov    %eax,(%esp)\n   0x0804872d &lt;+35&gt;:    call   0x8048480 &lt;__isoc99_fscanf@plt&gt;\n   0x08048732 &lt;+40&gt;:    cmp    $0x2,%eax\n   0x08048735 &lt;+43&gt;:    je     0x8048743 &lt;phase_1_of_5+57&gt;\n   0x08048737 &lt;+45&gt;:    movl   $0x1,(%esp)\n   0x0804873e &lt;+52&gt;:    call   0x80486ef &lt;explode&gt;\n   0x08048743 &lt;+57&gt;:    mov    0x18(%esp),%eax\n   0x08048747 &lt;+61&gt;:    mov    %eax,%edx\n   0x08048749 &lt;+63&gt;:    shl    $0x5,%edx\n   0x0804874c &lt;+66&gt;:    add    %edx,%eax\n   0x0804874e &lt;+68&gt;:    cmp    0x1c(%esp),%eax\n   0x08048752 &lt;+72&gt;:    je     0x8048760 &lt;phase_1_of_5+86&gt;\n   0x08048754 &lt;+74&gt;:    movl   $0x1,(%esp)\n   0x0804875b &lt;+81&gt;:    call   0x80486ef &lt;explode&gt;\n   0x08048760 &lt;+86&gt;:    add    $0x2c,%esp\n   0x08048763 &lt;+89&gt;:    ret\n</code></pre>\n"}, {"tags": ["c", "pointers", "dynamic-allocation"], "comments": [{"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 1, "creation_date": 1456351960, "post_id": 35614204, "comment_id": 58912214, "body": "You try to return <code>int **array</code> in function that returns <code>int *</code>. And then you try to assign this <code>int *</code> returned to <code>int **a</code> pointer. Change your function to return <code>int **</code> and you&#39;ll be fine."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 3, "creation_date": 1456351970, "post_id": 35614204, "comment_id": 58912219, "body": "Count the number of <code>*</code>s. They aren&#39;t just for decoration!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456352003, "post_id": 35614204, "comment_id": 58912238, "body": "<code>int **</code> is not a 2D array! A pointer is not an array (and vice versa). And don&#39;t cast the result of <code>malloc</code> &amp; friends in C."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1456352385, "post_id": 35614204, "comment_id": 58912456, "body": "&quot;assignment from incompatible pointer type&quot; is actually an error;   for some reason gcc writes &quot;warning&quot; instead"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456352963, "post_id": 35614204, "comment_id": 58912727, "body": "Why did he got down voted? Just for missing of *?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 2997092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc4c8ba8b683df586bfdecb1c4cdf62d?s=128&d=identicon&r=PG&f=1", "display_name": "user2997092", "link": "https://stackoverflow.com/users/2997092/user2997092"}, "edited": false, "score": 0, "creation_date": 1456352078, "post_id": 35614274, "comment_id": 58912291, "body": "oh, ok, i got it. Thanks a lot."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456352150, "post_id": 35614274, "comment_id": 58912328, "body": "&quot; two-asterisk pointer&quot; is quite miss leading. Why not use the correct term: &quot;pointer to pointer&quot; (it is even shorter)."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456352268, "post_id": 35614274, "comment_id": 58912389, "body": "@Olaf I used both terms. The colloquial one provides a more graphical description, though."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1456352036, "creation_date": 1456352036, "answer_id": 35614274, "question_id": 35614204, "link": "https://stackoverflow.com/questions/35614204/warning-assignment-from-incompatible-pointer-type/35614274#35614274", "title": "Warning assignment from incompatible pointer type", "body": "<p>You get the warning because the function is declared to return <code>int*</code> (one-asterisk pointer) but you are returning a pointer to pointer <code>int**</code>, a two-asterisk pointer.</p>\n\n<p>You can fix this by declaring the function return type as <code>int**</code>:</p>\n\n<pre><code>int ** int_alloc_2d(unsigned int rows, unsigned int cols){\n    int **array;\n    int i;\n    array = malloc(sizeof(int*)*rows);\n    for(i=0;i&lt;rows;i++)\n        array[i]=malloc(sizeof(int)*cols);\n    return array;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 2997092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc4c8ba8b683df586bfdecb1c4cdf62d?s=128&d=identicon&r=PG&f=1", "display_name": "user2997092", "link": "https://stackoverflow.com/users/2997092/user2997092"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2685, "favorite_count": 0, "accepted_answer_id": 35614274, "answer_count": 1, "score": 0, "last_activity_date": 1456352036, "creation_date": 1456351822, "question_id": 35614204, "link": "https://stackoverflow.com/questions/35614204/warning-assignment-from-incompatible-pointer-type", "title": "Warning assignment from incompatible pointer type", "body": "<p>So I was messing around with dynamic allocation to get a better understanding of it and I encountered the \" warning assignment from incompatible pointer type \" warning twice in my code, and i have no clue why.</p>\n\n<p>Basically what i am trying to do is to dynamically allocate a queue of dynamically allocated 2-dimensional arrays.</p>\n\n<p>First warning:</p>\n\n<pre><code>int * int_alloc_2d(unsigned int rows, unsigned int cols){\n    int **array;\n    int i;\n    array = (int **)malloc(sizeof(int*)*rows);\n    for(i=0;i&lt;rows;i++)\n        array[i]=(int*)malloc(sizeof(int)*cols);\n    return array;\n}\n</code></pre>\n\n<p>The first warning appears at the <code>return array;</code> line. This function is meant to dynamically allocate a 2-dimensional array</p>\n\n<p>Second warning:</p>\n\n<pre><code>int main(int argc, char **argv){\n    QUEUE *queue;\n    queue = (QUEUE *)malloc(sizeof(QUEUE));\n    int **a;\n    a = int_alloc_2d(2,2);\n    return 0;\n}\n</code></pre>\n\n<p>The second warning appears at the <code>a = int_alloc_2d(2,2);</code> line. Here i am just allocating memory for the queue ( just 1 block ) and allocating a 2x2 2-dimensional array in the \"a\" variable.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456351810, "post_id": 35614163, "comment_id": 58912124, "body": "&quot;Hope you have understood my question!&quot; - Which question?"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 4, "creation_date": 1456351880, "post_id": 35614163, "comment_id": 58912167, "body": "That is about as clear an error message as a compiler is ever going to give you!"}, {"owner": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 0, "creation_date": 1456351884, "post_id": 35614163, "comment_id": 58912169, "body": "Its hard to say when we don&#39;t have the Account class. Could you post the code?"}, {"owner": {"reputation": 8483, "user_id": 5318223, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/be47da4995eb4e8dff0ab4637e5773d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kiril S.", "link": "https://stackoverflow.com/users/5318223/kiril-s"}, "edited": false, "score": 1, "creation_date": 1456352544, "post_id": 35614163, "comment_id": 58912516, "body": "you are trying to call a member of struct called &quot;member&quot;, but definition of Account has no field named &quot;member&quot;. You can do <code>reg[j].name</code> <code>reg[j].surname</code> <code>reg[j].number</code> <code>reg[j].balance</code> Or you can do <code>member[j]</code>, since that&#39;s the other argument of your function. But <code>reg[j].member</code> makes no sense"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456352571, "post_id": 35614163, "comment_id": 58912521, "body": "Change <code>sort(Account reg[],int pNrOfAccounts,char member[])</code> to <code>sort(Account reg[],int pNrOfAccounts,size_t offset)</code> where <code>offset</code> is the offset of <code>name</code> or <code>surname</code>.  Then change code use <code>offset</code>, something like <code>strcmp((char*)reg[j] +offset, (char*)reg[j+1] +offset)</code>.  But this in not trivial for a learner."}, {"owner": {"reputation": 11, "user_id": 5977113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GTnnIin_Aik/AAAAAAAAAAI/AAAAAAAAAAA/Fk4M9CbAIno/photo.jpg?sz=128", "display_name": "Nicke Ersson", "link": "https://stackoverflow.com/users/5977113/nicke-ersson"}, "edited": false, "score": 0, "creation_date": 1456352867, "post_id": 35614163, "comment_id": 58912682, "body": "Thank you chux! i think i will just write three seperate sorting functions for the diffrent members."}, {"owner": {"reputation": 2003, "user_id": 2407394, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rVZLV.jpg?s=128&g=1", "display_name": "gyan", "link": "https://stackoverflow.com/users/2407394/gyan"}, "edited": false, "score": 0, "creation_date": 1456425990, "post_id": 35614163, "comment_id": 58952965, "body": "Rephrased the question.."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5977113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GTnnIin_Aik/AAAAAAAAAAI/AAAAAAAAAAA/Fk4M9CbAIno/photo.jpg?sz=128", "display_name": "Nicke Ersson", "link": "https://stackoverflow.com/users/5977113/nicke-ersson"}, "edited": false, "score": 0, "creation_date": 1456352267, "post_id": 35614268, "comment_id": 58912388, "body": "The thing is i want the input char member[] to replace the text member in if (strcmp(reg[j].member, reg[j+1].member)) &gt; 0)"}], "tags": [], "owner": {"reputation": 19466, "user_id": 2666, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aeff0099743dd003da31e22fc33204e3?s=128&d=identicon&r=PG", "display_name": "Jim Buck", "link": "https://stackoverflow.com/users/2666/jim-buck"}, "is_accepted": false, "score": 0, "last_activity_date": 1456352016, "creation_date": 1456352016, "answer_id": 35614268, "question_id": 35614163, "link": "https://stackoverflow.com/questions/35614163/function-for-sorting-struct-array-in-c/35614268#35614268", "title": "Function for sorting struct array in C", "body": "<p><code>Account</code> does not have a field named <code>member</code>. There is not much more to say without seeing full compilable code, but the compiler for sure does not \"see\" <code>member</code> in your struct definition for <code>Account</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1456355139, "last_edit_date": 1456355139, "creation_date": 1456352280, "answer_id": 35614331, "question_id": 35614163, "link": "https://stackoverflow.com/questions/35614163/function-for-sorting-struct-array-in-c/35614331#35614331", "title": "Function for sorting struct array in C", "body": "<p>I dont't think what you want can be done in c as a function. You will have to write a preprocessor macro that generates the code with the proper name for the struct member. This means you are limited to compile time and can not dynamically choose the member via string at runtime. Maybe something like this helps.</p>\n\n<pre><code>/* just a structure so we have something with two members */\nstruct Foo\n{\n    int a;\n    int b;\n};\n\n/** some macros that will generate the function code */\n#define MEMBER(x,y) x.y\n#define PRINT( T, member ) void print_##T##_##member( T f )\\\n{  fprintf(stdout, \"%d\\n\",  MEMBER( f, member) ); }\n\n\n/** create two functions, one with access to Foo.a and one to Foo.b **/\nPRINT( Foo, a )\nPRINT( Foo, b )\n\nint main( int argc, char *argv[] ) \n{\n    Foo foo;\n    foo.a = 1;\n    foo.b = 2;\n\n    /** call the function **/\n    print_Foo_a( foo );\n    print_Foo_b( foo );\n}\n</code></pre>\n\n<p>See working example <a href=\"http://coliru.stacked-crooked.com/a/791ba42eb3739e66\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2003, "user_id": 2407394, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rVZLV.jpg?s=128&g=1", "display_name": "gyan", "link": "https://stackoverflow.com/users/2407394/gyan"}, "is_accepted": true, "score": 1, "last_activity_date": 1456354494, "last_edit_date": 1456354494, "creation_date": 1456354134, "answer_id": 35614811, "question_id": 35614163, "link": "https://stackoverflow.com/questions/35614163/function-for-sorting-struct-array-in-c/35614811#35614811", "title": "Function for sorting struct array in C", "body": "<p>Two issues in your code.</p>\n\n<p>1) You cannot access structure member like that.. compile will not replace member with the actual string value.</p>\n\n<p>2) Your structure contains both number and strings. How can you use strcmp for both.</p>\n\n<p>You can handle it like this:</p>\n\n<pre><code>    if (strcmp(reg[j].member, reg[j+1].member)) &gt; 0) {\n\n    //Change this to:\n\n    if (my_compare(reg[j], reg[j+1], member)) &gt; 0) {\n\n\n    //***Write your custom compare function***\n\n    int compare(Account a,Account b,char member[]){\n\n    if (0==strcmp(member, name))\n        return strcmp(a.name, b.name);\n\n    //..........................................\n\n    //for int:\n\n    if (0==strcmp(member, number))\n        return a.number - b.number;\n\n    //***and so on....***\n    .................................................\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1456355937, "creation_date": 1456355937, "answer_id": 35615215, "question_id": 35614163, "link": "https://stackoverflow.com/questions/35614163/function-for-sorting-struct-array-in-c/35615215#35615215", "title": "Function for sorting struct array in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stddef.h&gt;\n\n#define WORDLENGTH 64\n\ntypedef struct account{\n    char name[WORDLENGTH];\n    char surname[WORDLENGTH];\n    int number;\n    int balance;\n} Account;\n\nint cmp_s(const void *x, const void *y){\n    return strcmp( (char*)x, (char*)y );\n}\nint cmp_i(const void *x, const void *y){\n    int a = *(int *)x;\n    int b = *(int *)y;\n    return (a &gt; b) - (a &lt; b);\n}\n\nvoid sort(Account reg[], int pNrOfAccounts, char member[]){\n    Account tmp;\n    int (*cmp)(const void *, const void *);\n    size_t offset;\n\n    //To determine the comparison function and offset to a member by member name\n    if(strcmp(member, \"name\")== 0){\n        cmp = cmp_s;\n        offset = offsetof(Account, name);\n    } else if(strcmp(member, \"surname\")== 0){\n        cmp = cmp_s;\n        offset = offsetof(Account, surname);\n    } else if(strcmp(member, \"number\")== 0){\n        cmp = cmp_i;\n        offset = offsetof(Account, number);\n    } else if(strcmp(member, \"balance\")== 0){\n        cmp = cmp_i;\n        offset = offsetof(Account, balance);\n    }\n\n    for (int i = 0; i &lt; pNrOfAccounts; i++) {\n        for (int j = 0; j &lt; pNrOfAccounts - 1; j++) {\n            if (cmp((char*)&amp;reg[j] + offset, (char*)&amp;reg[j+1] + offset) &gt; 0) {\n                tmp = reg[j];\n                reg [j] = reg[j+1];\n                reg[j+1] = tmp;\n            }\n        }\n    }\n}\n//test code\nint main(void) {\n    Account reg[] = {\n        { \"Richard\", \"Feynman\" , 55555, 11111 },\n        { \"Albert\" , \"Einstein\", 99999, 88888 },\n        { \"Max\"    , \"Planck\"  , 44444, 77777 },\n    };\n    int n = sizeof(reg)/sizeof(*reg);\n    char *members[] = { \"name\", \"surname\", \"number\", \"balance\", NULL };\n    char **member = members;\n\n    while(*member){\n        sort(reg, n, *member);\n        for(int i = 0; i &lt; n; ++i)\n            printf(\"%s, %s, %d, %d\\n\", reg[i].name, reg[i].surname, reg[i].number, reg[i].balance);\n        puts(\"\");\n        ++member;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5977113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GTnnIin_Aik/AAAAAAAAAAI/AAAAAAAAAAA/Fk4M9CbAIno/photo.jpg?sz=128", "display_name": "Nicke Ersson", "link": "https://stackoverflow.com/users/5977113/nicke-ersson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1456358900, "accepted_answer_id": 35614811, "answer_count": 4, "score": -3, "last_activity_date": 1456425778, "creation_date": 1456351661, "last_edit_date": 1456425778, "question_id": 35614163, "link": "https://stackoverflow.com/questions/35614163/function-for-sorting-struct-array-in-c", "closed_reason": "Needs details or clarity", "title": "Function for sorting struct array in C", "body": "<p>I am trying to create a function for sorting an array of struct. The problem is, I want user to chose by which element of struct sorting should be done:</p>\n\n<p>I create following program to do the job. </p>\n\n<pre><code>void sort(Account reg[],int pNrOfAccounts,char member[]){\n    Account tmp;\n\n    for (int i = 0; i &lt; pNrOfAccounts; i++) {\n        for (int j = 0; j &lt; pNrOfAccounts - 1; j++) {\n            if (strcmp(reg[j].member, reg[j+1].member)) &gt; 0) {\n                tmp = reg[j];\n                reg [j] = reg[j+1];\n                reg[j+1] = tmp;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Parameter \"member\" is user provided, which matches one of the struct elements name. I assume if user input (parameter \"member\") is \"name\" then reg[j].member is same as reg[j].name.</p>\n\n<p>But I got following error.</p>\n\n<pre><code>'Account' has no member named 'member'\n</code></pre>\n\n<p>Account structure:</p>\n\n<pre><code>typedef struct account{\n    char name[WORDLENGTH];\n    char surname[WORDLENGTH];\n    int number;\n    int balance;\n}Account;\n</code></pre>\n\n<p>Please help me in finding what I am doing wrong? </p>\n"}, {"tags": ["c", "algorithm", "sorting", "linked-list", "mergesort"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1456351507, "post_id": 35614098, "comment_id": 58911972, "body": "You haven&#39;t described anything that needs to be fixed in your program."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1456351554, "post_id": 35614098, "comment_id": 58911994, "body": "<code>However, when I run it, it will begin fine but then again without any error.</code> What does this mean? Also nothing about this code is C++."}, {"owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "edited": false, "score": 0, "creation_date": 1456352267, "post_id": 35614098, "comment_id": 58912387, "body": "Your code was pretty difficult to read. I edited it and used the <code>indent</code> program to automatically reformat it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456352921, "post_id": 35614098, "comment_id": 58912705, "body": "You haven&#39;t described what your problem is, how you tested your code or  anything that you found while you were debugging :(("}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1456353190, "post_id": 35614098, "comment_id": 58912846, "body": "<code>tail = first; ...; tail = tail-&gt;next;</code> - what if <code>first</code> was the last entry in the list?"}, {"owner": {"reputation": 23, "user_id": 3558559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6035620b0f675c1c96f6e27b6d70507a?s=128&d=identicon&r=PG&f=1", "display_name": "dream_koala21", "link": "https://stackoverflow.com/users/3558559/dream-koala21"}, "edited": false, "score": 0, "creation_date": 1456360945, "post_id": 35614098, "comment_id": 58915650, "body": "Apologies everyone! After a long day I completely missed putting in the issue here. And thank you for the Edits Kurt, my first time posting to the site so I had a difficult time formatting my code here. But as I&#39;ve corrected above, the program runs but then hangs on &quot;prepared list, now starting sort&quot; and will stay like that indefinitely."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3558559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6035620b0f675c1c96f6e27b6d70507a?s=128&d=identicon&r=PG&f=1", "display_name": "dream_koala21", "link": "https://stackoverflow.com/users/3558559/dream-koala21"}, "edited": false, "score": 0, "creation_date": 1456364378, "post_id": 35614936, "comment_id": 58916621, "body": "Thank you for your help! And after discussing with my professor, he advised that bottom up for linked lists may require a bit more work but he has no preference for whichever.   Also, I was attempting to debug with GDB and when manually closing the program I would receive a message saying that the executable was quit on the loop in my findLength function | while(temp != NULL) |, leading me to believe this is where it hangs? However I am unable to see why this would be"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 23, "user_id": 3558559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6035620b0f675c1c96f6e27b6d70507a?s=128&d=identicon&r=PG&f=1", "display_name": "dream_koala21", "link": "https://stackoverflow.com/users/3558559/dream-koala21"}, "edited": false, "score": 0, "creation_date": 1456370291, "post_id": 35614936, "comment_id": 58918273, "body": "@dream_koala21 - bottom up is simpler. It&#39;s not recursive, doesn&#39;t scan lists, instead using an array of pointers. You could separate the code you have to create a merge two already sorted list function (it would need to handle null inputs), and the main code is shown in this <a href=\"http://en.wikipedia.org/wiki/Merge_sort#Bottom-up_implementation_using_lists\" rel=\"nofollow noreferrer\">wiki example</a> ."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1456370148, "last_edit_date": 1456370148, "creation_date": 1456354625, "answer_id": 35614936, "question_id": 35614098, "link": "https://stackoverflow.com/questions/35614098/implementing-mergesort-on-a-linked-list/35614936#35614936", "title": "Implementing mergesort on a linked list", "body": "<p>Does it have to be a top down merge sort? To get you started, here's a partial fix, didn't check for other stuff. The | if (first != NULL &amp;&amp; second != NULL) | check isn't needed since the prior check for length &lt;= 1 takes care of this, but it won't cause a problem.</p>\n\n<pre><code>    while (first != NULL &amp;&amp; second != NULL)\n    {\n        if (first-&gt;key &lt; second-&gt;key)\n        {\n            tail-&gt;next = first;\n            tail = first;\n            first = first-&gt;next;\n        }\n        else\n        {\n            tail-&gt;next = second;\n            tail = second;\n            second = second-&gt;next;\n        }\n    }\n\n    if (first == NULL)\n    {\n        tail-&gt;next = second;\n    }\n    else\n    {\n        tail-&gt;next = first;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": true, "score": 0, "last_activity_date": 1458264579, "last_edit_date": 1458264579, "creation_date": 1456366355, "answer_id": 35616981, "question_id": 35614098, "link": "https://stackoverflow.com/questions/35614098/implementing-mergesort-on-a-linked-list/35616981#35616981", "title": "Implementing mergesort on a linked list", "body": "<p>You're close, but with some silly errors. Check the append operations in the merge step. They're not doing what you think they are.  And of course you meant <code>temp = temp-&gt;next;</code> in the splitting loop.</p>\n\n<p>If gdb is overwhelming, adding printf's is a perfectly fine way to go about debugging code like this. Actually you want to write a list printing function and print the sublists at each level of recursion plus the results of the merge step. It's fun to watch. Just be neat and delete all that when you're done.</p>\n\n<p>Here's code that works for reference:</p>\n\n<pre><code>struct listnode *sort(struct listnode *lst) {\n  if (!lst || !lst-&gt;next) return lst;\n  struct listnode *q = lst, *p = lst-&gt;next-&gt;next;\n  while (p &amp;&amp; p-&gt;next) {\n    q = q-&gt;next;\n    p = p-&gt;next-&gt;next;\n  }\n  struct listnode *mid = q-&gt;next;\n  q-&gt;next = NULL;\n  struct listnode *fst = sort(lst), *snd = sort(mid);\n  struct listnode rtn[1], *tail = rtn;\n  while (fst &amp;&amp; snd) {\n    if (fst-&gt;key &lt; snd-&gt;key) {\n      tail-&gt;next = fst;\n      tail = fst;\n      fst = fst-&gt;next;\n    } else {\n      tail-&gt;next = snd;\n      tail = snd;\n      snd = snd-&gt;next;\n    }\n  }\n  while (fst) {\n    tail-&gt;next = fst;\n    tail = fst;\n    fst = fst-&gt;next;\n  }\n  while (snd) {\n    tail-&gt;next = snd;\n    tail = snd;\n    snd = snd-&gt;next;\n  }\n  tail-&gt;next = NULL;\n  return rtn-&gt;next;\n}\n</code></pre>\n\n<p>On my old MacBook this sorts 10 million random integers in a bit over 4 seconds, which doesn't seem too bad.</p>\n\n<p>You can also put the append operation in a macro and make this quite concise:</p>\n\n<pre><code>struct listnode *sort(struct listnode *lst) {\n  if (!lst || !lst-&gt;next) return lst;\n  struct listnode *q = lst, *p = lst-&gt;next-&gt;next;\n  while (p &amp;&amp; p-&gt;next) {\n    q = q-&gt;next;\n    p = p-&gt;next-&gt;next;\n  }\n  struct listnode *mid = q-&gt;next;\n  q-&gt;next = NULL;\n  struct listnode *fst = sort(lst), *snd = sort(mid);\n  struct listnode rtn[1], *tail = rtn;\n  #define APPEND(X) do { tail-&gt;next = X; tail = X; X = X-&gt;next; } while (0)\n  while (fst &amp;&amp; snd) if (fst-&gt;key &lt; snd-&gt;key) APPEND(fst); else APPEND(snd);\n  while (fst) APPEND(fst);\n  while (snd) APPEND(snd);\n  tail-&gt;next = NULL;\n  return rtn-&gt;next;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3558559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6035620b0f675c1c96f6e27b6d70507a?s=128&d=identicon&r=PG&f=1", "display_name": "dream_koala21", "link": "https://stackoverflow.com/users/3558559/dream-koala21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1731, "favorite_count": 0, "accepted_answer_id": 35616981, "answer_count": 2, "score": -1, "last_activity_date": 1458264579, "creation_date": 1456351382, "last_edit_date": 1456360688, "question_id": 35614098, "link": "https://stackoverflow.com/questions/35614098/implementing-mergesort-on-a-linked-list", "title": "Implementing mergesort on a linked list", "body": "<p>I was tasked with implementing a merge sort algorithm on a list written in C/C++. I have the general idea down, wrote my code and have successfully compiled it. However, when I run it, it will begin fine but then hang on \"prepared list, now starting sort\" without giving any kind of error. I have tried to look through my code but I am at a complete loss as to what the issue could be. I am also pretty amateurish with debugging, so using gdb to the best of my abilities has lead me no where. Any advice or tips would be a tremendous help, thank you all!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct listnode\n{\n    struct listnode *next;\n    int key;\n};\n\n    //Finds length of listnode\nint\nfindLength (struct listnode *a)\n{\n    struct listnode *temp = a;\n    int i = 0;\n    while (temp != NULL)\n    {\n        i++;\n        temp = temp-&gt;next;\n    }\n    return i;\n}\n\n\nstruct listnode *\nsort (struct listnode *a)\n{\n    // Scenario when listnode is NULL\n    if (findLength (a) &lt;= 1)\n        return a;\n\n    //Find middle\n    int mid = findLength (a) / 2;\n    struct listnode *temp = a;\n    struct listnode *first = a;\n    struct listnode *second;\n\n    for (int i = 0; i &lt; mid - 1; i++)\n    {\n        temp = a-&gt;next;\n    }\n    second = temp-&gt;next;\n    temp-&gt;next = NULL;\n\n    //Recursive calls to sort lists\n    first = sort (first);\n    second = sort (second);\n\n    if (first != NULL &amp;&amp; second != NULL)\n    {\n        if (first-&gt;key &lt; second-&gt;key)\n        {\n            a = first;\n            first = first-&gt;next;\n        }\n        else\n        {\n            a = second;\n            second = second-&gt;next;\n        }\n    }\n\n    struct listnode *head = a;\n    struct listnode *tail = a;\n\n    while (first != NULL &amp;&amp; second != NULL)\n    {\n        if (first-&gt;key &lt; second-&gt;key)\n        {\n            tail = first;\n            first = first-&gt;next;\n            tail = tail-&gt;next;\n        }\n        else\n        {\n            tail = second;\n            second = second-&gt;next;\n            tail = tail-&gt;next;\n        }\n    }\n\n    if (first == NULL)\n    {\n        while (second != NULL)\n        {\n            tail = second;\n            second = second-&gt;next;\n            tail = tail-&gt;next;\n        }\n    }\n\n    while (first != NULL)\n    {\n        tail = first;\n        first = first-&gt;next;\n        tail = tail-&gt;next;\n    }\n\n    return a;\n}\n</code></pre>\n\n<p>Here is the test code provided, written in C:int</p>\n\n<pre><code>main (void)\n{\n    long i;\n    struct listnode *node, *tmpnode, *space;\n    space = (struct listnode *) malloc (500000 * sizeof (struct listnode));\n    for (i = 0; i &lt; 500000; i++)\n    {\n        (space + i)-&gt;key = 2 * ((17 * i) % 500000);\n        (space + i)-&gt;next = space + (i + 1);\n    }\n    (space + 499999)-&gt;next = NULL;\n    node = space;\n    printf (\"\\n prepared list, now starting sort\\n\");\n    node = sort (node);\n    printf (\"\\n checking sorted list\\n\");\n    for (i = 0; i &lt; 500000; i++)\n    {\n        if (node == NULL)\n        {\n            printf (\"List ended early\\n\");\n            exit (0);\n        }\n        if (node-&gt;key != 2 * i)\n        {\n            printf (\"Node contains wrong value\\n\");\n            exit (0);\n        }\n        node = node-&gt;next;\n    }\n    printf (\"Sort successful\\n\");\n    exit (0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "algorithm", "bit-manipulation", "bytearray"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1456349677, "post_id": 35613555, "comment_id": 58910938, "body": "If I understand correctly, you want to repeat every bit in the original array three times?"}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1456349814, "post_id": 35613555, "comment_id": 58911019, "body": "Yes, every bit in the original array needs repeated 3 times."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1456349867, "post_id": 35613555, "comment_id": 58911048, "body": "Show us what you tried, as well as input, expected output, and actual output."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1456350008, "post_id": 35613555, "comment_id": 58911137, "body": "Push each bit through a function that writes to output when it has 8, 32 whatever in its buffer. Then flush anything not written. You don&#39;t need a lookup table."}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "edited": false, "score": 0, "creation_date": 1456350301, "post_id": 35613555, "comment_id": 58911309, "body": "I added my LUT test and its output."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456351203, "post_id": 35613555, "comment_id": 58911799, "body": "On x86 with BMI2 instruction-set extension, a <code>pdep+(shl+or)*2</code> could do this easily."}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456352040, "post_id": 35613555, "comment_id": 58912264, "body": "@EOF unfortunately I&#39;m on ARM Cortex M4"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456460047, "post_id": 35613555, "comment_id": 58967609, "body": "lets start with defining a string of bits for a byte is by using a leading 0B&lt;thebits&gt;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456460235, "post_id": 35613555, "comment_id": 58967667, "body": "you do not need that look up table. a simple loop of shift + and for the 8 bits to select a bit, then output that bit 3 times would do the job very nicely."}], "answers": [{"comments": [{"owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1456352183, "post_id": 35614165, "comment_id": 58912343, "body": "The single bit at the start of <code>b</code> is right when <code>a</code> and <code>c</code> are swapped"}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "edited": false, "score": 1, "creation_date": 1456352624, "post_id": 35614165, "comment_id": 58912556, "body": "As written that doesn&#39;t work. Reversing the order of appending the bytes does work (16, 8, 0)"}, {"owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "edited": false, "score": 0, "creation_date": 1456352717, "post_id": 35614165, "comment_id": 58912593, "body": "Yeah sorry I initially had the values swapped, too... Should be fixed now.. Or do you see a different problem?"}, {"owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1456352902, "post_id": 35614165, "comment_id": 58912695, "body": "@WeatherVane 8 bits expand to 24 bits = 3 bytes. The lookup table expands each possible byte value to the corresponding 3 bytes, stored in an int."}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "edited": false, "score": 0, "creation_date": 1456355179, "post_id": 35614165, "comment_id": 58913683, "body": "Thanks for the help. The system now works as expected."}], "tags": [], "owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "is_accepted": true, "score": 4, "last_activity_date": 1456352636, "last_edit_date": 1456352636, "creation_date": 1456351669, "answer_id": 35614165, "question_id": 35613555, "link": "https://stackoverflow.com/questions/35613555/bit-expand-byte-array/35614165#35614165", "title": "Bit expand byte array", "body": "<p>There is a byte order issue with your table (or how you copy the data):</p>\n\n<p>For the first input byte</p>\n\n<pre><code>10101010\n</code></pre>\n\n<p>your output is </p>\n\n<pre><code>a        b        c\n00111000 10001110 11100011\n</code></pre>\n\n<p>but should be</p>\n\n<pre><code>c        b        a\n11100011 10001110 00111000\n</code></pre>\n\n<p>So the 1st and 3rd byte need to be swapped (and so on)</p>\n\n<p>Instead of changing the table to suit memcpy, I'd just do something like</p>\n\n<pre><code>int j = 0;\nfor (int i = 0; i &lt; 21; i++) {\n  lut_val = bitExpandTable[msg[i]];\n  expanded_msg[j++] = (uint8_t) (lut_val &gt;&gt; 16);\n  expanded_msg[j++] = (uint8_t) (lut_val &gt;&gt; 8);\n  expanded_msg[j++] = (uint8_t) lut_val;\n}\n</code></pre>\n"}], "owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 35614165, "answer_count": 1, "score": 4, "last_activity_date": 1456352636, "creation_date": 1456349483, "last_edit_date": 1495540232, "question_id": 35613555, "link": "https://stackoverflow.com/questions/35613555/bit-expand-byte-array", "title": "Bit expand byte array", "body": "<p>I have a situation where I need to upscale a dynamic sized byte array by 3.</p>\n\n<p>Example:</p>\n\n<pre><code>10101010 11001100\n</code></pre>\n\n<p>to</p>\n\n<pre><code>11100011 10001110 00111000 11111100 00001111 11000000\n</code></pre>\n\n<p>I've used the algorithm here to generate a lookup table.</p>\n\n<p><a href=\"https://stackoverflow.com/a/9044057/280980\">https://stackoverflow.com/a/9044057/280980</a></p>\n\n<pre><code>static const uint32_t bitExpandTable[256] = {\n00000000, 0x000007, 0x000038, 0x00003f, 0x0001c0, 0x0001c7, 0x0001f8, 0x0001ff,\n0x000e00, 0x000e07, 0x000e38, 0x000e3f, 0x000fc0, 0x000fc7, 0x000ff8, 0x000fff,\n0x007000, 0x007007, 0x007038, 0x00703f, 0x0071c0, 0x0071c7, 0x0071f8, 0x0071ff,\n0x007e00, 0x007e07, 0x007e38, 0x007e3f, 0x007fc0, 0x007fc7, 0x007ff8, 0x007fff,\n0x038000, 0x038007, 0x038038, 0x03803f, 0x0381c0, 0x0381c7, 0x0381f8, 0x0381ff,\n0x038e00, 0x038e07, 0x038e38, 0x038e3f, 0x038fc0, 0x038fc7, 0x038ff8, 0x038fff,\n0x03f000, 0x03f007, 0x03f038, 0x03f03f, 0x03f1c0, 0x03f1c7, 0x03f1f8, 0x03f1ff,\n0x03fe00, 0x03fe07, 0x03fe38, 0x03fe3f, 0x03ffc0, 0x03ffc7, 0x03fff8, 0x03ffff,\n0x1c0000, 0x1c0007, 0x1c0038, 0x1c003f, 0x1c01c0, 0x1c01c7, 0x1c01f8, 0x1c01ff,\n0x1c0e00, 0x1c0e07, 0x1c0e38, 0x1c0e3f, 0x1c0fc0, 0x1c0fc7, 0x1c0ff8, 0x1c0fff,\n0x1c7000, 0x1c7007, 0x1c7038, 0x1c703f, 0x1c71c0, 0x1c71c7, 0x1c71f8, 0x1c71ff,\n0x1c7e00, 0x1c7e07, 0x1c7e38, 0x1c7e3f, 0x1c7fc0, 0x1c7fc7, 0x1c7ff8, 0x1c7fff,\n0x1f8000, 0x1f8007, 0x1f8038, 0x1f803f, 0x1f81c0, 0x1f81c7, 0x1f81f8, 0x1f81ff,\n0x1f8e00, 0x1f8e07, 0x1f8e38, 0x1f8e3f, 0x1f8fc0, 0x1f8fc7, 0x1f8ff8, 0x1f8fff,\n0x1ff000, 0x1ff007, 0x1ff038, 0x1ff03f, 0x1ff1c0, 0x1ff1c7, 0x1ff1f8, 0x1ff1ff,\n0x1ffe00, 0x1ffe07, 0x1ffe38, 0x1ffe3f, 0x1fffc0, 0x1fffc7, 0x1ffff8, 0x1fffff,\n0xe00000, 0xe00007, 0xe00038, 0xe0003f, 0xe001c0, 0xe001c7, 0xe001f8, 0xe001ff,\n0xe00e00, 0xe00e07, 0xe00e38, 0xe00e3f, 0xe00fc0, 0xe00fc7, 0xe00ff8, 0xe00fff,\n0xe07000, 0xe07007, 0xe07038, 0xe0703f, 0xe071c0, 0xe071c7, 0xe071f8, 0xe071ff,\n0xe07e00, 0xe07e07, 0xe07e38, 0xe07e3f, 0xe07fc0, 0xe07fc7, 0xe07ff8, 0xe07fff,\n0xe38000, 0xe38007, 0xe38038, 0xe3803f, 0xe381c0, 0xe381c7, 0xe381f8, 0xe381ff,\n0xe38e00, 0xe38e07, 0xe38e38, 0xe38e3f, 0xe38fc0, 0xe38fc7, 0xe38ff8, 0xe38fff,\n0xe3f000, 0xe3f007, 0xe3f038, 0xe3f03f, 0xe3f1c0, 0xe3f1c7, 0xe3f1f8, 0xe3f1ff,\n0xe3fe00, 0xe3fe07, 0xe3fe38, 0xe3fe3f, 0xe3ffc0, 0xe3ffc7, 0xe3fff8, 0xe3ffff,\n0xfc0000, 0xfc0007, 0xfc0038, 0xfc003f, 0xfc01c0, 0xfc01c7, 0xfc01f8, 0xfc01ff,\n0xfc0e00, 0xfc0e07, 0xfc0e38, 0xfc0e3f, 0xfc0fc0, 0xfc0fc7, 0xfc0ff8, 0xfc0fff,\n0xfc7000, 0xfc7007, 0xfc7038, 0xfc703f, 0xfc71c0, 0xfc71c7, 0xfc71f8, 0xfc71ff,\n0xfc7e00, 0xfc7e07, 0xfc7e38, 0xfc7e3f, 0xfc7fc0, 0xfc7fc7, 0xfc7ff8, 0xfc7fff,\n0xff8000, 0xff8007, 0xff8038, 0xff803f, 0xff81c0, 0xff81c7, 0xff81f8, 0xff81ff,\n0xff8e00, 0xff8e07, 0xff8e38, 0xff8e3f, 0xff8fc0, 0xff8fc7, 0xff8ff8, 0xff8fff,\n0xfff000, 0xfff007, 0xfff038, 0xfff03f, 0xfff1c0, 0xfff1c7, 0xfff1f8, 0xfff1ff,\n0xfffe00, 0xfffe07, 0xfffe38, 0xfffe3f, 0xffffc0, 0xffffc7, 0xfffff8, 0xffffff,\n};\n</code></pre>\n\n<p>I've tried looping through the byte array using the LUT to memcpy the first 3 bytes to the new array. However my output never looks correct.</p>\n\n<p>Does anyone have any suggestions on how to efficiently implement this? This will be running on an embedded ARM processor.</p>\n\n<h2>Edit</h2>\n\n<p>LUT test</p>\n\n<pre><code>uint8_t msg[] = { 0xaa, 0x02, 0x43, 0x5a, 0x8d, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0x84, 0xc6, 0x2d, 0x00, 0xb9 };\n\nuint8_t expanded_msg[63] = { 0 };\nuint8_t tmp_val = 0;\nuint32_t lut_val;\nfor (int i = 0; i &lt; 21; i++)\n{\n    tmp_val = *(uint8_t*)(&amp;msg + i);\n    lut_val = bitExpandTable[tmp_val];\n    memcpy(&amp;expanded_msg[(i * 3)], &amp;lut_val, 3);\n}\n\nprint_binary(&amp;msg, 21);\nprint_binary(&amp;expanded_msg, sizeof(expanded_msg));\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>[ 10101010 00000010 01000011 01011010 10001101 00000110 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 11010000 10000100 11000110 00101101 00000000 10111001 ]\n\n[ 00111000 10001110 11100011 00000000 00000000 00000000 11000111 10001111 00000011 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000111 01110000 00011100 00000111 11110000 00000011 11111111 11111111 00011111 11000111 11110001 11100011 00000000 00000000 00000000 11111111 11111111 11111111 11000000 10000001 11100011 00000000 00000000 00000000 00000111 01110000 00011100 00111000 10000000 00011111 11111111 11111111 00011111 11000111 11110001 11100011 00000000 00000000 00000000 11111111 11111111 11111111 ]\n</code></pre>\n"}, {"tags": ["c", "struct", "casting"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1456350411, "post_id": 35613525, "comment_id": 58911367, "body": "Run it in the debugger who will tell you <b>where</b> the crash occurs, which will give you a hint <b>why</b> the programs crashes."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1456357046, "post_id": 35613525, "comment_id": 58914369, "body": "It looks like you are missing several pieces of the puzzle to insert ListB into ListA in sort order. You will first iterate ListA until you find the largest node in ListA that is less than the first node in ListB (say nodeA). You then insert the first node of ListB (nodeB) after nodeA (e.g.  <code>tmp=nodeA-&gt;next;</code> <code>nodeA-&gt;next = nodeB;</code>), then iterate ListB comparing <code>tmp</code> to find the new nodeB and insert <code>tmp</code> in ListB where needed (e.g. <code>tmpB=nodeB-&gt;next;</code> <code>nodeB-&gt;next=tmp;</code>) and then <i>repeat</i> - iterating ListA to find out where <code>tmpB</code> fits). I don&#39;t see that anywhere in your code?"}, {"owner": {"reputation": 11, "user_id": 5976190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PGqnuWlYB_Y/AAAAAAAAAAI/AAAAAAAAAEs/oBgGrGCZ3_E/photo.jpg?sz=128", "display_name": "Jeffrey King", "link": "https://stackoverflow.com/users/5976190/jeffrey-king"}, "edited": false, "score": 0, "creation_date": 1456503952, "post_id": 35613525, "comment_id": 58994042, "body": "I didn&#39;t add my sorting code to the question since it wasn&#39;t my problem. I wanted was just adding ListB into listA."}, {"owner": {"reputation": 11, "user_id": 5976190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PGqnuWlYB_Y/AAAAAAAAAAI/AAAAAAAAAEs/oBgGrGCZ3_E/photo.jpg?sz=128", "display_name": "Jeffrey King", "link": "https://stackoverflow.com/users/5976190/jeffrey-king"}, "edited": false, "score": 0, "creation_date": 1456504030, "post_id": 35613525, "comment_id": 58994108, "body": "Debugger is whole another story. I will get back to this question once I figured out why eclipse doesn&#39;t have GDB --version."}, {"owner": {"reputation": 11, "user_id": 5976190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PGqnuWlYB_Y/AAAAAAAAAAI/AAAAAAAAAEs/oBgGrGCZ3_E/photo.jpg?sz=128", "display_name": "Jeffrey King", "link": "https://stackoverflow.com/users/5976190/jeffrey-king"}, "edited": false, "score": 0, "creation_date": 1456710215, "post_id": 35613525, "comment_id": 59059119, "body": "Well, I got it working now. Thank you for your help."}], "owner": {"reputation": 11, "user_id": 5976190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PGqnuWlYB_Y/AAAAAAAAAAI/AAAAAAAAAEs/oBgGrGCZ3_E/photo.jpg?sz=128", "display_name": "Jeffrey King", "link": "https://stackoverflow.com/users/5976190/jeffrey-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1456349369, "creation_date": 1456349369, "question_id": 35613525, "link": "https://stackoverflow.com/questions/35613525/two-doubly-list-for-c", "title": "Two Doubly list for C", "body": "<p>I am writing a code using Doubly Linked List for C language. I am trying to create two doubly linked list sorted.</p>\n\n<p>The objective is having two list, 'List A' and 'List B'. I need to insert list B into A in a orderly sort.</p>\n\n<pre><code>    if( head2 != NULL)\n{\n    struct ListNode *newnode;\n    //struct ListNode2 *newnode2;\n\n    currentnode = tail;\n    int currentint = currentnode-&gt;list1;\n    printf(\"( %d )\", currentint);\n\n    currentnode2 = tail2;\n    int currentint2 = currentnode2-&gt;list2;\n    printf(\"( %d )\", currentint2);\n\n    newnode = (struct ListNode *)malloc(sizeof(struct ListNode));\n\n    for(i=0;i&lt;6;i++)\n    {\n        if (currentint2 &lt; currentint)\n        {\n            newnode-&gt;list1 = currentint2;\n            addnode(newnode);\n            currentnode2 = currentnode2-&gt;previous2;\n            currentint2 = currentnode2-&gt;list2;\n            printf(\"( %d )\", currentint2);\n\n        }\n        else\n        {\n            currentnode = currentnode-&gt;previous;\n            currentint = currentnode-&gt;list1;\n            printf(\"( %d )\", currentint);\n        }\n    }\n}\n</code></pre>\n\n<p>When I try to insert 'List B' into 'List A' after certain or unknown amount, the program breaks down. (Debugging is another story) \nAny help is appreciated. Note: Just Starting C but already know Java.</p>\n"}, {"tags": ["c", "arrays", "pointers", "command-line"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456349149, "post_id": 35613420, "comment_id": 58910647, "body": "Why are you <code>malloc()</code>ing <code>sizeof(int)</code> when you write <code>char *</code>s to the allocated memory?"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1456349262, "creation_date": 1456349262, "answer_id": 35613496, "question_id": 35613420, "link": "https://stackoverflow.com/questions/35613420/recalling-values-from-dynamically-allocated-arrays/35613496#35613496", "title": "Recalling values from dynamically allocated arrays", "body": "<p>The problem with your approach is that you are assigning <code>argv</code> elements to an <code>int</code> array. Since <code>argv</code> elements are C strings, you need to <em>parse</em> them to obtain <code>int</code>:</p>\n\n<pre><code>for (i = 1; i &lt; argc; i++) {\n    list_nums[i-1] = atoi(argv[i]);\n}\n</code></pre>\n\n<p>Don't forget to <code>free(list_nums)</code> at the end of your program.</p>\n\n<p>Include <code>&lt;stdlib.h&gt;</code> to use <a href=\"http://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow\"><code>atoi</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1456349652, "last_edit_date": 1456349652, "creation_date": 1456349314, "answer_id": 35613510, "question_id": 35613420, "link": "https://stackoverflow.com/questions/35613420/recalling-values-from-dynamically-allocated-arrays/35613510#35613510", "title": "Recalling values from dynamically allocated arrays", "body": "<p>Try the following</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\n    int i;\n    int *list_nums = NULL;\n\n    if ( argc &gt; 1 ) list_nums = malloc( ( argc - 1 ) * sizeof( int ) );\n\n    for ( i = 1; i &lt; argc; i++ ) {\n        list_nums[i-1] = atoi( argv[i] );\n    }\n\n    printf(\"you entered: \");\n    for ( i = 0; i &lt; argc-1; i++ ) {\n        printf( \"%d, \", list_nums[i] );\n    }\n    printf( \"\\n\" );\n\n    free( list_nums );\n\n    return 0;\n}\n</code></pre>\n\n<p>Pay attention that arguments are stored like character arrays. So you have to convert a string containing a number in an object of type int.</p>\n"}, {"tags": [], "owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "is_accepted": true, "score": 1, "last_activity_date": 1456349758, "creation_date": 1456349758, "answer_id": 35613632, "question_id": 35613420, "link": "https://stackoverflow.com/questions/35613420/recalling-values-from-dynamically-allocated-arrays/35613632#35613632", "title": "Recalling values from dynamically allocated arrays", "body": "<p>Always pay attention to your compiler's warnings. If you aren't getting any warnings, check your compiler settings.</p>\n\n<pre><code>$ gcc -Wall -O a.c\na.c: In function \u2018main\u2019:\na.c:6:5: warning: implicit declaration of function \u2018malloc\u2019 [-Wimplicit-function-declaration]\n     list_nums = malloc(argc * sizeof(int));\n     ^\na.c:6:17: warning: incompatible implicit declaration of built-in function \u2018malloc\u2019\n     list_nums = malloc(argc * sizeof(int));\n                 ^\na.c:8:24: warning: assignment makes integer from pointer without a cast\n         list_nums[i-1] = argv[i];\n                        ^\n</code></pre>\n\n<p>The first warning says that <code>malloc</code> isn't declared; you're missing <code>#include &lt;stdlib.h&gt;</code>. On most systems this won't cause an actual problem. The second warning is a consequence of the same problem.</p>\n\n<p>The third warning indicates a real problem. <code>argv</code> is an array of pointers to <code>char</code>, so <code>argv[i]</code> is a pointer to <code>char</code>. <code>list_nums</code> points to an array of integers. So you're assigning a pointer to an integer. The random-looking numbers that you're printing out are the addresses of the arguments in memory.</p>\n\n<p>You can copy an array of strings into an array of strings. In this case, you need to change <code>list_nums</code> to an array of <code>char*</code>, and use the <code>%s</code> specifier for printing.</p>\n\n<p>It seems that you intended to interpret the arguments as integers though. If you want to convert the arguments \u2014\u00a0which are strings \u2014\u00a0to integers, you need to do that explicitly. You can use the <code>atoi</code> function for quick throwaway code, or <code>strtol</code> for robust code (<code>atoi</code> doesn't permit error checking).</p>\n\n<pre><code>long *list_nums = malloc((argc-1) * sizeof(*list_nums));\nchar *end;\nif (list_nums == NULL) {\n    fprintf(stderr, \"Not enough memory\\n\");\n    return EXIT_FAILURE;\n}\nfor (i = 1; i &lt; argc; i++) {\n    list_nums[i-1] = strtol(argv[i], &amp;end, 0);\n    if (*end != 0) {\n        fprintf(stderr, \"Invalid argument: %s\\n\", argv[i]);\n        return EXIT_FAILURE;\n    }\n}\nfor (i = 0; i &lt; argc-1; i++) {\n    printf(\"%ld, \", list_nums[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 469, "user_id": 5645683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-XwpNtcwfsg4/AAAAAAAAAAI/AAAAAAAAAGk/QFbyHHYdJ1c/photo.jpg?sz=128", "display_name": "Sakeeb Hossain", "link": "https://stackoverflow.com/users/5645683/sakeeb-hossain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 35613632, "answer_count": 3, "score": 2, "last_activity_date": 1456349758, "creation_date": 1456349050, "question_id": 35613420, "link": "https://stackoverflow.com/questions/35613420/recalling-values-from-dynamically-allocated-arrays", "title": "Recalling values from dynamically allocated arrays", "body": "<p>I tried writing a program that takes command line inputs (supposed to be numbers) and stores them in a dynamically allocated array, the prints them out by accessing the array. However, it's printing random values instead.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\n    int i;\n    int *list_nums;\n    list_nums = malloc(argc * sizeof(int));\n    for (i = 1; i &lt; argc; i++) {\n        list_nums[i-1] = argv[i];\n    }\n    printf(\"you entered: \");\n    for (i = 0; i &lt; argc-1; i++) {\n        printf(\"%d, \", list_nums[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Originally, I had the print statement in the second for loop as:</p>\n\n<pre><code>        printf(\"%s, \", list_nums[i])  // %s instead of %d\n</code></pre>\n\n<p>since <code>argv[]</code> was set to <code>char</code> but that gives me a Segmentation Fault. What's going on here?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1456349030, "post_id": 35613360, "comment_id": 58910582, "body": "Cannot reproduce. Are you sure this exact code was in a single source file, <i>in this exact order</i>?"}, {"owner": {"reputation": 250, "user_id": 5937424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5870a99ee03e4af8fd990722adfb0149?s=128&d=identicon&r=PG&f=1", "display_name": "Careful Now", "link": "https://stackoverflow.com/users/5937424/careful-now"}, "edited": false, "score": 0, "creation_date": 1456349244, "post_id": 35613360, "comment_id": 58910697, "body": "There shouldn&#39;t be any error if the functions are not called in the main."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1456349433, "post_id": 35613360, "comment_id": 58910798, "body": "This is generally a problem if/when GCC is compiling in <code>-std=c99</code> mode. It usually isn&#39;t by default, but perhaps things have changed in modern GCC (assuming you&#39;re using a recent version). Try adding <code>int avg(int,int);</code> <i>after</i> your initial declaration for <code>avg()</code>."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456349495, "post_id": 35613360, "comment_id": 58910837, "body": "@EOF: More importantly, is he using these <i>exact flags</i>? Because this usually <i>does not</i> compile in C99 or C11 mode."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1456349672, "post_id": 35613360, "comment_id": 58910932, "body": "Addendum: Can you show me what you get with <code>printf(&quot;%ld\\n&quot;, __STDC_VERSION__);</code>, and can you check if <code>__GNUC__</code> is defined?"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 4, "creation_date": 1456349760, "post_id": 35613360, "comment_id": 58910988, "body": "@EOF: Even if you also use the function? (note that without LTO, OP&#39;s <code>math_max()</code> function probably counts as using <code>avg()</code>!). It does not for me, with C99. See <a href=\"http://stackoverflow.com/questions/16245521/c99-inline-function-in-c-file/16245669\">this question</a>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1456349876, "post_id": 35613360, "comment_id": 58911052, "body": "@Tim\u010cas: I&#39;m too used to compile with <code>-O3</code>, which makes this compile..."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456350041, "post_id": 35613360, "comment_id": 58911155, "body": "@EOF: Probably because it removes <code>math_max()</code>, and with it the call to <code>avg()</code>, entirely. Try omitting that. As an experiment, you could try to remove its definition, that is, changing <code>avg()</code> into <code>int avg(int,int);</code> and <b><i>removing</i></b> the <code>inline avg(...){...}</code> part. If it still compiles that way, then it&#39;s compiling <i>only</i> because <code>-O3</code> removes every reference to <code>avg()</code>."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456350993, "post_id": 35613360, "comment_id": 58911682, "body": "@EOF Did you manage to reproduce?"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1456351015, "post_id": 35613360, "comment_id": 58911704, "body": "@Tim\u010cas I updated the information you requested in the post"}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 2, "creation_date": 1456353072, "post_id": 35613360, "comment_id": 58912793, "body": "I think you&#39;ll find here the explanation: <a href=\"http://stackoverflow.com/questions/19068705/undefined-reference-when-calling-inline-function\">undefined-reference-when-calling-inline-function</a>"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1456353222, "post_id": 35613360, "comment_id": 58912858, "body": "Have you tried adding <code>static</code> before <code>inline</code>?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1456354386, "post_id": 35613360, "comment_id": 58913367, "body": "This is the behavior of a language standard and a compiler without a 1-800 support phone number :)  C99 requires you to explicitly state which TU contains the definition of the inline function.  That requires the highly intuitive <code>extern inline int avg(int a, int b);</code> in your source code file."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1456354727, "post_id": 35613360, "comment_id": 58913497, "body": "@HansPassant: So both <code>static inline</code> or <code>extern inline</code> will work, but plain <code>inline</code> is parsed, compiled and ignored?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1456355420, "post_id": 35613360, "comment_id": 58913776, "body": "It is not ignored, that would cause a compile error.  It doesn&#39;t get linked.  This only ever makes sense when you are a member of an ISO committee that finds a compromise by making everybody equally unhappy."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1456356407, "post_id": 35613360, "comment_id": 58914126, "body": "@HansPassant. The body of the plain inline function is ignored, it works just as a prototype for the function. In fact, I&#39;ve replaced the inline function with a function prototype and the generated code is identical."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1456408175, "post_id": 35613360, "comment_id": 58939603, "body": "I accepted the duplicate suggestion as the answer (or at least the confirmation) exists in the proposed DUP, but I really don&#39;t understand the motivation behind this decision, which is actually what I&#39;m asking"}], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "closed_date": 1456393262, "answer_count": 0, "score": 9, "last_activity_date": 1456350938, "creation_date": 1456348824, "last_edit_date": 1456350938, "question_id": 35613360, "link": "https://stackoverflow.com/questions/35613360/inline-definition-causes-unresolved-symbols-in-program", "closed_reason": "Duplicate", "title": "inline definition causes unresolved symbols in program", "body": "<p>So I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX(a,b) (a) &gt; (b) ? a : b\n\nint abs(int a)\n{\n    if (a &gt; 0)\n        return a;\n    else\n        return a*-1;\n}\n\ninline int avg(int a, int b)\n{\n    return (a+b)/2;\n}\n\nint math_max(int a, int b)\n{\n    return (avg(a,b)+abs(avg(a,b)-b));\n}\n\nint main(int argc, char** argv)\n{\n    return 0;\n}\n</code></pre>\n\n<p>When I compile it: <code>gcc -g test.c -o test</code> I get:</p>\n\n<pre><code>/tmp/ccZbHEju.o: In function `math_max':\ntest.c:(.text+0x33): undefined reference to `avg'\ntest.c:(.text+0x44): undefined reference to `avg'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I can fix this by removing the inline notation from avg, but I don't know why I'm getting undefined references if its inline - I thought the compiler was supposed to take care of that</p>\n\n<p>Anyone care to explain?</p>\n\n<p>** <strong>Adding more information</strong> **<br>\nFor those who can't reproduce, I'm using:<br>\n<code>gcc --version gcc (GCC) 5.3.0 Copyright (C) 2015 Free Software\nFoundation, Inc. This is free software; see the source for copying\nconditions.  There is NO warranty; not even for MERCHANTABILITY or\nFITNESS FOR A PARTICULAR PURPOSE.</code></p>\n\n<p>Compiling this code with without linking generates the following:</p>\n\n<pre><code>[ishaypeled@arania test]$ gcc -c test.c -o ./test.o\n[ishaypeled@arania test]$ readelf -s ./test.o\n\nSymbol table '.symtab' contains 13 entries:\n   Num:    Value          Size Type    Bind   Vis      Ndx Name  \n     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND   \n     1: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS test.c  \n     2: 0000000000000000     0 SECTION LOCAL  DEFAULT    1   \n     3: 0000000000000000     0 SECTION LOCAL  DEFAULT    3   \n     4: 0000000000000000     0 SECTION LOCAL  DEFAULT    4  \n     5: 0000000000000000     0 SECTION LOCAL  DEFAULT    6  \n     6: 0000000000000000     0 SECTION LOCAL  DEFAULT    7  \n     7: 0000000000000000     0 SECTION LOCAL  DEFAULT    5  \n     8: 0000000000000000    25 FUNC    GLOBAL DEFAULT    1 abs  \n     9: 0000000000000019    43 FUNC    GLOBAL DEFAULT    1 max  \n    10: 0000000000000044    69 FUNC    GLOBAL DEFAULT    1 math_max  \n    11: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND avg  \n    12: 0000000000000089    18 FUNC    GLOBAL DEFAULT    1 main \n</code></pre>\n\n<p>Which clearly shows avg as NOTYPE and UND - this is why the linker failed... I have no idea why that happens. I also examined the preprocessor output from gcc:</p>\n\n<p>[ishaypeled@arania test]$ gcc test.c -E</p>\n\n<pre><code># 5 \"test.c\"\nint abs(int a)\n{\n    if (a &gt; 0)\n        return a;\n    else\n        return a*-1;\n}\n\nint max(int a, int b)\n{\n    return ((a+b)+abs(a-b))/2;\n}\n\ninline int avg(int a, int b)\n{\n    return (a+b)/2;\n}\n\nint math_max(int a, int b)\n{\n    int avg_calc = avg(a,b);\n    int distance_from_avg = abs(avg_calc-a);\n    int res = avg_calc+distance_from_avg;\n    return res;\n}\n\nint main(int argc, char** argv)\n{\n# 44 \"test.c\"\n    return 0;\n}\n</code></pre>\n\n<p>Looks perfectly fine, avg appears before the usage in math_max.</p>\n\n<p><code>STDC version: 201112\n__GNUC__ defined</code></p>\n"}, {"tags": ["c", "linux", "random", "system", "srand"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1456348740, "post_id": 35613298, "comment_id": 58910413, "body": "Have you searched your error? <a href=\"http://stackoverflow.com/questions/8440816/warning-implicit-declaration-of-function\" title=\"warning implicit declaration of function\">stackoverflow.com/questions/8440816/&hellip;</a>"}, {"owner": {"reputation": 321, "user_id": 3076306, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fccfq.jpg?s=128&g=1", "display_name": "TheAlPaca02", "link": "https://stackoverflow.com/users/3076306/thealpaca02"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1456348851, "post_id": 35613298, "comment_id": 58910478, "body": "I have but I didn&#39;t seem to find anything that related to my problem.."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 3076306, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fccfq.jpg?s=128&g=1", "display_name": "TheAlPaca02", "link": "https://stackoverflow.com/users/3076306/thealpaca02"}, "edited": false, "score": 0, "creation_date": 1456348928, "post_id": 35613343, "comment_id": 58910516, "body": "Is it normal that my script is able to run while I forgot this include? I always assumed that the script wouldn&#39;t even have ran if this was the problem.."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 321, "user_id": 3076306, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fccfq.jpg?s=128&g=1", "display_name": "TheAlPaca02", "link": "https://stackoverflow.com/users/3076306/thealpaca02"}, "edited": false, "score": 1, "creation_date": 1456349500, "post_id": 35613343, "comment_id": 58910839, "body": "@TheAlPaca02 The program will still compile with the mismatched signature.  If the parameters are not of the correct type however, the compiler won&#39;t be able to detect it."}, {"owner": {"reputation": 321, "user_id": 3076306, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fccfq.jpg?s=128&g=1", "display_name": "TheAlPaca02", "link": "https://stackoverflow.com/users/3076306/thealpaca02"}, "edited": false, "score": 0, "creation_date": 1456349686, "post_id": 35613343, "comment_id": 58910943, "body": "Ok understood, thanks! Will run the testscript again tomorrow morning."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 19, "last_activity_date": 1456348782, "creation_date": 1456348782, "answer_id": 35613343, "question_id": 35613298, "link": "https://stackoverflow.com/questions/35613298/implicit-declaration-of-functions-srand-rand-and-system/35613343#35613343", "title": "Implicit declaration of functions srand, rand and system", "body": "<p>You failed to <code>#include &lt;stdlib.h&gt;</code>.  As a result, the functions you called were assumed to accept an unknown number of arguments and return a value of type <code>int</code>.  This causes undefined behavior.</p>\n\n<p>Put <code>#include &lt;stdlib.h&gt;</code> at the top of your file.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1531452838, "post_id": 51316743, "comment_id": 89610548, "body": "So basically you are saying that the other answer solved your problem? You don&#39;t need to post another answer to say that the other answer is good -- you can simply upvote the other answer"}], "tags": [], "owner": {"reputation": 81, "user_id": 6439122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7bb3e234cab96f425779b4785c2453?s=128&d=identicon&r=PG&f=1", "display_name": "Nafi Shahriyar", "link": "https://stackoverflow.com/users/6439122/nafi-shahriyar"}, "is_accepted": false, "score": 1, "last_activity_date": 1531447561, "creation_date": 1531447561, "answer_id": 51316743, "question_id": 35613298, "link": "https://stackoverflow.com/questions/35613298/implicit-declaration-of-functions-srand-rand-and-system/51316743#51316743", "title": "Implicit declaration of functions srand, rand and system", "body": "<p>I had a similar problem. My code was compiled but I got warning message.</p>\n\n<pre><code>// Selection sort\n\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int list[100], i;\n\n    for(i = 0 ; i &lt; 100; i++) {\n        list[i] = ( rand()%99 + 1 );\n        printf(\"%d \", list[i]);\n    } printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>When I compile it,</p>\n\n<pre><code>gcc -o selection_sort selection_sort.c -lm\nselection_sort.c: In function \u2018main\u2019:\nselection_sort.c:11:15: warning: implicit declaration of function \u2018rand\u2019; did you mean \u2018nanl\u2019? [-Wimplicit-function-declaration]\nlist[i] = ( rand()%99 + 1 );\n           ^~~~\n           nanl\n</code></pre>\n\n<p>After adding <code>&lt;stdlib.h&gt;</code> warning message was gone.</p>\n"}], "owner": {"reputation": 321, "user_id": 3076306, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fccfq.jpg?s=128&g=1", "display_name": "TheAlPaca02", "link": "https://stackoverflow.com/users/3076306/thealpaca02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31572, "favorite_count": 0, "accepted_answer_id": 35613343, "answer_count": 2, "score": 9, "last_activity_date": 1531447561, "creation_date": 1456348615, "question_id": 35613298, "link": "https://stackoverflow.com/questions/35613298/implicit-declaration-of-functions-srand-rand-and-system", "title": "Implicit declaration of functions srand, rand and system", "body": "<p>Trying to solve an exercise where I have to print a random temperature value between 35\u00b0C &amp; -10\u00b0C every 5 seconds followed by the date and time. Everything looks to be working as intended, however when I enter the code in a test script I get following errors.</p>\n\n<p><img src=\"https://i.imgur.com/JG1igOL.png\" alt=\"implicit declaration of functions errors\">\nThis is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;time.h&gt;\n#define temp_max 35\n#define temp_min -10\n#define FREQUENCY 5\n\nint main(void)\n{\nsrand(time(NULL));\nwhile(1)\n{\nint number = rand() % (temp_max*100 - temp_min*100) + temp_min*100;\ndouble temperature = (double) number;\ntemperature /= 100;\nprintf(\"Temperature=%1.2f @ \",temperature);\nfflush(stdout); \nsystem(\"date\");\nsleep(FREQUENCY);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>These are my results:</p>\n\n<p><img src=\"https://i.imgur.com/VgSLPmt.png\" alt=\"These are my results\"></p>\n\n<p>This is what the test script checks for:</p>\n\n<p><img src=\"https://i.imgur.com/fry3Fh3.png\" alt=\"This is what the test script checks for\"></p>\n\n<p>As I am unable to see my own mistakes, any help would be greatly appreciated.</p>\n"}, {"tags": ["c", "arrays", "pointers", "malloc"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1456348654, "post_id": 35613079, "comment_id": 58910366, "body": "<code>&amp;(*results + i)-&gt;id</code> and similar should be <code>&amp;(*(results + i))-&gt;id</code> or better <code>&amp;results[i]-&gt;id</code>. <code>i</code> is the index of <code>results</code>, not of <code>*results</code>."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1456348886, "post_id": 35613079, "comment_id": 58910496, "body": "Is the <code>result</code>s array written to the file using <code>fwrite</code>?  If this is the case, <code>fread</code> the file.  For every <code>result</code> you&#39;re able to to read, increment <code>numResults</code>.  <code>malloc</code> memory for what you read and copy each <code>result</code> to a new memory location.  Store read <code>result</code>s in <code>results</code> array."}], "answers": [{"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1456416691, "post_id": 35614544, "comment_id": 58946588, "body": "@FiddlingBits: I don&#39;t ever <i>mean</i> to be that long-winded, it just always comes out that way."}, {"owner": {"reputation": 17, "user_id": 5976826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ca454a285711eb723a502ca430189fb?s=128&d=identicon&r=PG&f=1", "display_name": "Ulysses", "link": "https://stackoverflow.com/users/5976826/ulysses"}, "edited": false, "score": 0, "creation_date": 1457138509, "post_id": 35614544, "comment_id": 59286451, "body": "@JohnBode: You really have outdone yourself. Thank you for helping me understand this and showing me my bad habits."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 1, "last_activity_date": 1456416800, "last_edit_date": 1456416800, "creation_date": 1456353093, "answer_id": 35614544, "question_id": 35613079, "link": "https://stackoverflow.com/questions/35613079/c-programming-using-malloc-pointers-and-arrays/35614544#35614544", "title": "C Programming: Using malloc, pointers and arrays", "body": "<blockquote>\n  <p>When it states that the *result pointer returned by malloc will be stored in the next member of the array *results[], I'm unsure of what to do here or if possibly my syntax is wrong with the previous arrays and pointers.</p>\n</blockquote>\n\n<p>So let's look at your loop where you allocate and read each <code>results[i]</code>:</p>\n\n<pre><code>while (!feof(fptr)) {\n    results[i] = (result*)malloc(sizeof(result));\n\n    fscanf(fptr, \"%d\\t%s\\t%s\\t%c\\t%c\\t%c\\t%c\", &amp;(*results + i)-&gt;id, &amp;(*results + i)-&gt;firstName, &amp;(*results + i)-&gt;lastName, &amp;(*results + i)-&gt;english, &amp;(*results + i)-&gt;maths, &amp;(*results + i)-&gt;french, &amp;(*results + i)-&gt;philosophy);\n\n    numResults++;\n    i++;\n}\n</code></pre>\n\n<p>The <code>malloc</code> call itself is okay, although it can be more cleanly written as</p>\n\n<pre><code>results[i] = malloc( sizeof *results[i] );\n</code></pre>\n\n<p>The cast has not been necessary since C89<sup>1</sup>, and the type of the <em>expression</em> <code>*results[i]</code> is <code>result</code>, so <code>sizeof *results[i]</code> gives the same answer as <code>sizeof (result)</code>.  You should get definitely into the habit of checking the result of any <code>malloc</code> (or <code>calloc</code> or <code>realloc</code>) call, though.</p>\n\n<p>The rest of the loop has a couple of problems.  First, your <code>fscanf</code> call is wonky; instead of <code>&amp;(*results + i)</code> (which is incorrect), just use <code>&amp;results[i]</code> (except for <code>firstName</code> and <code>lastName</code>, which I'll explain in a bit).  It's a bit easier to read and harder to screw up.  Secondly, you don't need the <code>\\t</code> in the format string; the <code>%d</code> and <code>%s</code> conversion specifiers will skip over <em>any</em> leading whitespace, and a single blank space between the <code>%c</code> conversion specifiers will do the same thing.  Taking it all together, that call can (and should) be written as</p>\n\n<pre><code>fscanf( fptr, \"%d %s %s %c %c %c %c\", &amp;results[i]-&gt;id, results[i]-&gt;firstName,\n  results[i]-&gt;lastName, &amp;results[i]-&gt;english, &amp;results[i]-&gt;maths,\n  &amp;results[i]-&gt;french, &amp;results[i]-&gt;philosopy );\n</code></pre>\n\n<p>So why don't we use the <code>&amp;</code> operator for <code>results[i]-&gt;firstName</code> and <code>results[i]-&gt;lastName</code>?  Both the <code>firstName</code> and <code>lastName</code> members are arrays of <code>char</code>; under most circumstances, an expression of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.  The <code>%s</code> conversion specifier expects its corresponding argument to be a pointer to <code>char</code>; the <em>expressions</em> <code>results[i]-&gt;firstName</code> and <code>results[i]-&gt;lastName</code> will have type \"pointer to <code>char</code>\" because of this conversion rule.  </p>\n\n<p>Next, you shouldn't use <code>feof</code> as your loop condition.  EOF won't be signaled until <em>after</em> you try to read past the end of the file, so your loop will wind up executing once too often.  IOW, you don't know you've read the last record until you try to read one more.  </p>\n\n<p>Instead, you should check the status of the last input operation.  <code>fscanf</code> will return EOF if it hits end-of-file before reading anything, otherwise it will return the number of items successfully read. You're expecting to read 7 items from the file at a time, so your loop could be rewritten as</p>\n\n<pre><code>while ( fscanf( ... ) == 7 )\n{\n  // do stuff\n}\n</code></pre>\n\n<p>Except...</p>\n\n<p>What would you <code>fscanf</code> into?  You haven't allocated the <code>results[i]</code> element yet, so you can't read into any of its members.  There are actually several ways to go from here, each with advantages and disadvantages.  </p>\n\n<p>Personally, I'd do the following: read a line from the file as text (as you do in the <code>fgets</code> call, which you never use again), and use <code><strong>s</strong>scanf</code> to read elements from that string:</p>\n\n<pre><code>while ( fgets( line, sizeof line, fptr ) ) // fgets returns NULL on EOF or error\n{                                          // otherwise it returns line\n  results[i] = malloc( sizeof *results[i] );\n  if ( results[i] )\n  {\n    if ( sscanf( line, \"%d %s %s %c %c %c %c\", &amp;results[i]-&gt;id, results[i]-&gt;firstName,\n      results[i]-&gt;lastName, &amp;results[i]-&gt;english, &amp;results[i]-&gt;maths,\n      &amp;results[i]-&gt;french, &amp;results[i]-&gt;philosopy ) &lt; 7 )\n    {\n      // we didn't find all the record elements in the line; either the\n      // input line is longer than we expect, or it's malformed.  \n\n      fprintf( stderr, \"Input line \\\"%s\\\" is bad; exiting...\\n\", line );\n      exit( 0 );\n    }\n    numResults++;\n    i++;\n  }\n  else\n  {\n    // handle memory allocation failure; for this exercise, you'll just\n    // want to print an error message and exit at this point.\n    fprintf( stderr, \"Memory allocation failure...exiting\\n\" );\n    exit( 0 );\n  }\n}\n</code></pre>\n\n<p>There's one critical point that this code doesn't address, though; what if the file contains more than 100 records?  Ideally, you'd like to add a second condition to that loop so that you don't try to read more records than you can store in your array.  Adding that tweak:</p>\n\n<pre><code>while ( numResults &lt; 100 &amp;&amp; fgets( line, sizeof line, fptr ) )\n{\n  results[i] = malloc( sizeof *results[i] );\n  if ( results[i] )\n  {\n    if ( sscanf( line, \"%d %s %s %c %c %c %c\", &amp;results[i]-&gt;id, results[i]-&gt;firstName,\n      results[i]-&gt;lastName, &amp;results[i]-&gt;english, &amp;results[i]-&gt;maths,\n      &amp;results[i]-&gt;french, &amp;results[i]-&gt;philosopy ) &lt; 7 )\n    {\n      // we didn't find all the record elements in the line; either the\n      // input line is longer than we expect, or it's malformed.  \n\n      fprintf( stderr, \"Input line \\\"%s\\\" is bad; exiting...\\n\", line );\n      exit( 0 );\n    }\n    numResults++;\n    i++;\n  }\n  else\n  {\n    // handle memory allocation failure; for this exercise, you'll just\n    // want to print an error message and exit at this point.\n    fprintf( stderr, \"Memory allocation failure...exiting\\n\" );\n    exit( 0 );\n  }\n}\n</code></pre>\n\n<p>Even more ideally, you'd want to create a symbolic constant like <code>MAX_RECORDS</code> so you're not using naked <code>100</code>s<sup>2</sup> all over the place:</p>\n\n<pre><code>#define MAX_RECORDS 100\n...\nresult *results[MAX_RECORDS];\n...\nvoid initialiseResults()\n{\n  int i;\n\n  for (i = 0; i &lt; MAX_RECORDS; i++) {\n    results[i] = NULL;\n  }\n}\n...\nwhile ( numResults &lt; MAX_RECORDS &amp;&amp; fgets( line, sizeof line, fptr )\n{\n  ...\n}\n</code></pre>\n\n<p>It's also not clear to me why you need <em>both</em> <code>i</code> and <code>numResults</code> in <code>readFile</code>.  You could get away with just using <code>numResults</code>.  </p>\n\n<p>You should also get into the habit of calling <code>free</code> on every object you <code>malloc</code> when you're finished with it (in this case, after you've called <code>printResult</code>), but for the purposes of this assignment that's not critical.</p>\n\n<p><strong>Addendum</strong></p>\n\n<p>It's also worth pointing out that since it's declared at <em>file scope</em> (outside of the body of any function)<sup>3</sup>, all of the elements of the <code>results</code> array will be implicitly initialized to <code>NULL</code>, so technically the <code>initializeResults</code> function is redundant.  However, if you want to tweak this code to handle multiple input files, then you probably would want to re-initialize the array before processing the next file.  In that case, you would want to <code>free</code> any previously-allocated elements:</p>\n\n<pre><code>void initialiseResults( void )\n{\n  for ( int i = 0; i &lt; NUM_RECORDS; i++ )\n  {\n    free( results[i] ); // free( NULL ) is a no-op, so calling this on any\n    results[i] = NULL;  // NULL elements of results[i] won't cause a problem\n  }\n}\n</code></pre>\n\n<p><hr>\n<sup>1. It's still necessary for C++, but if you're writing C++ you shouldn't be using <code>malloc</code> anyway.<br>\n2.  Using \"magic\" numbers (literals with special meaning beyond their immediate value) makes code harder to maintain; if you change the size of the array from <code>100</code> to <code>200</code>, then you have to chase down every instance of <code>100</code> in your code, decide if it's being used to indicate the maximum array size, and change it if it is.  Using a symbolic constant such as the <code>MAX_RECORDS</code> macro means you only have to make that change in one place.  <br>\n3.  Ideally, you should not use such \"global\" variables in your code; they wind up creating a lot of maintenance headaches and hinder re-use (you wouldn't be able to use any of those functions in a different program unless it also declared a global \"results\" array). It would be better to declare <code>results</code> in <code>main</code> and pass it as an argument to each of the <code>initialiseResults</code>, <code>readFile</code>, and <code>printResult</code> functions, but I understand you didn't make that decision.  Having said all of that, there <em>are</em> times when globals are the right answer, especially in the embedded world where stack space is extremely limited.<br>\n</sup></p>\n"}], "owner": {"reputation": 17, "user_id": 5976826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ca454a285711eb723a502ca430189fb?s=128&d=identicon&r=PG&f=1", "display_name": "Ulysses", "link": "https://stackoverflow.com/users/5976826/ulysses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 35614544, "answer_count": 1, "score": 0, "last_activity_date": 1456416800, "creation_date": 1456347937, "question_id": 35613079, "link": "https://stackoverflow.com/questions/35613079/c-programming-using-malloc-pointers-and-arrays", "title": "C Programming: Using malloc, pointers and arrays", "body": "<p>I'm a beginner in C programming and was assigned this to complete a few weeks ago but I never figured it out.</p>\n\n<p><a href=\"http://i.stack.imgur.com/oYh5i.png\" rel=\"nofollow\">Assignment Description</a></p>\n\n<p>We were given some skeleton code with comments to guide us but I can't understand one of these comments.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include \"string.h\"\n#include \"stdlib.h\"\n\ntypedef struct\n{\n    char firstName[50];\n    char lastName[50];\n    long id;\n    char english, french, maths, philosophy;\n} result;\n\n// array of pointers to 'result' structures - assuming that there is 100 or less records in the data file\nresult *results[100];\n\n// number of records read from the file\nint numResults = 0;\n\n// read file and populate the results\n// you will need to use malloc to allocate a new 'result' structure for each record read from the file\n// the *result pointer returned by malloc will be stored in the next member of the array *results[]\nint readFile(char *fileName);\n\n// set all the pointers in *results[] to NULL before reading in the file\nvoid initialiseResults();\n\n// function to print an individual member of the *results[] array\nvoid printResult(result *aResult);\n\nint main()\n{\n    char fileName[] = \"D:\\\\results.txt\";\n    int i = 0;\n\n    void initialiseResults();\n\n    if (!readFile(fileName))\n    {\n        printf(\"File could not be opened!\\n\");\n        return 0;\n    }\n\n    printf(\"Surname\\tFirst Name\\tID\\tMaths\\tEnglish\\tFrench\\tPhilosophy\\n\");\n    printf(\"=======\\t==========\\t==\\t=====\\t=======\\t======\\t==========\\n\");\n\n    while (results[i] != NULL)\n    {\n        printResult(results[i]);\n        i++;\n    }\n\n    return 0;\n}\n\nvoid printResult(result *aResult)\n{\n    printf(\"%s\\t%s\\t%d\\t%c\\t%c\\t%c\\t%c\\n\", aResult-&gt;lastName, aResult-&gt;firstName, aResult-&gt;id, aResult-&gt;maths, aResult-&gt;english, aResult-&gt;french, aResult-&gt;philosophy);\n}\n\nvoid initialiseResults()\n{\n    int i;\n\n    for (i = 0; i &lt; 100; i++) {\n        *(results + i) = NULL;\n    }\n}\n\nint readFile(char *fileName)\n{\n    FILE *fptr = fopen(fileName, \"r\");\n\n    int i;\n    char line[100];\n\n    fgets(line, 100, fptr);\n\n    i = 0;\n\n    while (!feof(fptr)) {\n        results[i] = (result*)malloc(sizeof(result));\n\n        fscanf(fptr, \"%d\\t%s\\t%s\\t%c\\t%c\\t%c\\t%c\", &amp;(*results + i)-&gt;id, &amp;(*results + i)-&gt;firstName, &amp;(*results + i)-&gt;lastName, &amp;(*results + i)-&gt;english, &amp;(*results + i)-&gt;maths, &amp;(*results + i)-&gt;french, &amp;(*results + i)-&gt;philosophy);\n\n        numResults++;\n        i++;\n    }\n\n\n    return 1;\n}\n</code></pre>\n\n<p>When it states that the *result pointer returned by malloc will be stored in the next member of the array *results[], I'm unsure of what to do here or if possibly my syntax is wrong with the previous arrays and pointers.</p>\n\n<p>Here is the original skeleton code before I made my attempt at it.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"stdio.h\"\n#include \"string.h\"\n#include \"stdlib.h\"\n\ntypedef struct \n{\n    char firstName[50];\n    char lastName[50];\n    long id;\n    char english, french, maths, philosophy;\n} result;\n\n// array of pointers to 'result' structures - assuming that there is 100 or less records in the data file\nresult *results[100];\n\n// number of records read from the file\nint numResults = 0;\n\n// read file and populate the results\n// you will need to use malloc to allocate a new 'result' structure for each record read from the file\n// the *result pointer returned by malloc will be stored in the next member of the array *results[]\nint readFile(char *fileName);\n\n// set all the pointers in *results[] to NULL before reading in the file\nvoid initialiseResults();\n\n// function to print an individual member of the *results[] array\nvoid printResult(result *aResult);\n\nint main()\n{\n    char fileName[] = \"C:\\\\results.txt\";\n    int i=0;\n\n\n    void initialiseResults();\n\n    if (!readFile(fileName)) \n    {\n        printf( \"File could not be opened !!\\n\" );\n        return 0;\n    } \n\n    while (results[i] != NULL)\n    {\n        printResult(results[i]);\n        i++;\n    }\n\n    return 0;\n}\n\nvoid printResult(result *aResult)\n{\n    // PUT YOUR CODE HERE\n}\n\nvoid initialiseResults()\n{\n    // PUT YOUR CODE HERE\n}\n\nint readFile(char *fileName)\n{\n    // PUT YOUR CODE HERE\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "locking"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1456347658, "post_id": 35612929, "comment_id": 58909836, "body": "Why would it not?  Please explain in detail."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1456347715, "post_id": 35612929, "comment_id": 58909868, "body": "Unsynchronized non-atomic, non-readonly access to <code>y</code> in two threads -&gt; undefined behavior."}, {"owner": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 1, "creation_date": 1456347726, "post_id": 35612929, "comment_id": 58909873, "body": "I&#39;m assuming you&#39;re not consistently getting the same result, but sometimes seeing 2,2 also?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1456347913, "post_id": 35612929, "comment_id": 58909974, "body": "It&#39;s an ersatz, pseudocode homework question - OP has not actually tried it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456348758, "post_id": 35612929, "comment_id": 58910425, "body": "..and once every two billion times round, an increment of y would fail.  &#39;I get my result as y=1 and x=2&#39; is grossly misleading."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456349419, "post_id": 35612929, "comment_id": 58910785, "body": "@MartinJames: Actually, that is an easy race window to hit. Your thread creation just has to run <code>thread2()</code> first, then schedule <code>thread1()</code> when <code>thread2()</code> unlocks the spin-lock. I can imagine a few reasons why this could happen."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456352591, "post_id": 35612929, "comment_id": 58912541, "body": "@EOF there are two chances.  One of the y++ has to be interrupted or their execution has to be overlaid because both threads are running on different cores.  It&#39;s a one-shot deal - there is no loop in the thread function, seeking to demonstrate the issue.  It&#39;s not going to be lock that the problem shows up, (sorry:)."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456353085, "post_id": 35612929, "comment_id": 58912800, "body": "@MartinJames: Take a uniprocessor machine that doesn&#39;t have atomic-read-modify-write. On such a machine, atomicity is often implemented by disabling interrupts. So <code>thread2()</code> is running, disables interrupts in the lock, an interrupt is queued, interrupts are re-enabled in the unlock. Now, on some architectures the &quot;enable interrupts&quot; instruction delays enabling interrupts by one instruction. If <code>thread2()</code> uses that delay-slot for the load of <code>y</code>..."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456355282, "post_id": 35612929, "comment_id": 58913723, "body": "The issue is why you expected <code>y</code> to equal 2. That&#39;s the thing that doesn&#39;t make sense about your question. If you explain why you had this expectation, we can explain where you got things wrong."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456355524, "post_id": 35612929, "comment_id": 58913819, "body": "What threading standard or library are you using? What <i>precisely</i> do the <code>spin_lock</code> and <code>spin_unlock</code> functions do? What memory visibility semantics do they have? You&#39;re going to be very bad answers that are terribly misleading if you don&#39;t include in the question all the assumptions you&#39;re expected to make."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456355665, "post_id": 35612929, "comment_id": 58913875, "body": "@DavidSchwartz: What kind of semantics could <code>spin_lock()&#47;spin_unlock()</code> <i>possibly have</i> that would make concurrent execution of <code>thread1()</code> and <code>thread2()</code> non-racy?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456355754, "post_id": 35612929, "comment_id": 58913899, "body": "@EOF They could have no defined memory visbility semantics, making the functions racy on <code>x</code> as well as <code>y</code>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456374756, "post_id": 35612929, "comment_id": 58919604, "body": "Are you actually getting the results of <code>y=1</code> and <code>x=2</code> on real hardware or is this a hypothetical where someone told you that you got those results? If the former, could you tell us what platform and what type of threads (POSIX, WIN32, etcetera)?"}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1456350179, "post_id": 35613243, "comment_id": 58911234, "body": "You mean <code>y</code>? <code>x</code> is protected by the lock."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1456350259, "post_id": 35613243, "comment_id": 58911284, "body": "Ugh, I got them backwards in my answer!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1456350321, "post_id": 35613243, "comment_id": 58911319, "body": "Oh, not as bad as I thought, I got them right in the list of steps."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456355441, "post_id": 35613243, "comment_id": 58913786, "body": "&quot;<i>This is why locking is needed when you have multiple threads modifying a non-atomic variable.</i>&quot; This doesn&#39;t make sense. Locking is needed if, and only if, the standard for whatever threading model the OP is using says it&#39;s needed. And if the standard says it&#39;s needed, that&#39;s why it&#39;s needed. The OP doesn&#39;t mention any particular platform or standard, so your claim that a lock is needed has no basis. He could be, for example, using a platform where all variables are volatile and all multithreading is cooperative. His CPU might not have registers and do all operations to memory."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456356445, "post_id": 35613243, "comment_id": 58914136, "body": "I included a refutation of your answer in my answer."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456358222, "post_id": 35613243, "comment_id": 58914766, "body": "@DavidSchwartz My answer is based on threading in general. If there are exceptions, they don&#39;t refute the general approach, which is that you have to perform your own mutual exclusion whenever accessing non-atomic variables."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456358377, "post_id": 35613243, "comment_id": 58914819, "body": "@Barmar Right, but you explain incorrectly <i>why</i> you have to perform your own mutual exclusion. That answer has nothing to do with what happens or might happen on any particular hardware. It has everything to do with what the relevant standards say. My answer explains why."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1456350290, "last_edit_date": 1456350290, "creation_date": 1456348436, "answer_id": 35613243, "question_id": 35612929, "link": "https://stackoverflow.com/questions/35612929/spinlocks-running-simultaneously/35613243#35613243", "title": "Spinlocks running simultaneously", "body": "<p>Consider the following order of execution:</p>\n\n<ol>\n<li>thread 2 locks the lock</li>\n<li>thread 2 reads from <code>x</code> into register A</li>\n<li>thread 2 increments register A</li>\n<li>thread 2 writes register A into <code>x</code>, it now contains <code>1</code></li>\n<li>thread 2 unlocks the lock</li>\n<li>thread 2 reads from <code>y</code> into register A</li>\n<li>thread 2 increments register A</li>\n<li>thread 1 reads from <code>y</code> into register B</li>\n<li>thread 2 writes register A to <code>y</code>, it now contains <code>1</code></li>\n<li>thread 1 increments register B</li>\n<li>thread 1 writes register B to <code>y</code>, it now contains <code>1</code></li>\n<li>thread 1 locks the lock</li>\n<li>thread 1 reads from <code>x</code> into register A</li>\n<li>thread 1 increments register A</li>\n<li>thread 1 writes register A to <code>x</code>, it now contains <code>2</code></li>\n<li>thread 1 unlocks the lock</li>\n</ol>\n\n<p>Since there's no lock protecting access to <code>y</code>, the intermixed sequence of operations in steps 6 through 11 results in <code>y</code> only being incremented by <code>1</code> instead of <code>2</code>. This is why locking is needed when you have multiple threads modifying a non-atomic variable.</p>\n\n<p>Incrementing <code>y</code> before the locked region in one thread and after the locked region in the other thread doesn't ensure mutual exclusion, because you can't be sure that thread 1 will try to run before thread 2.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456358394, "post_id": 35615173, "comment_id": 58914827, "body": "Unless you&#39;re tailoring your code to a specific platform and threading model, you have to allow for the possibility that threads may be interleaved in any possible order, and only a mutex can control the interaction between threads. So all I have to do is show a possible order that causes incorrect behavior of the shared variable."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456359375, "post_id": 35615173, "comment_id": 58915140, "body": "@Barmar Sure, threads can interleave in any possible order, but it&#39;s still the compiler/platform&#39;s responsibility not to let that break any code that complies with the relevant standards. So the big question -- can interleaving break this or not -- cannot be answered with reference to particular platforms or hardware but only with reference to the relevant standards. As I show in my answer, you can make this exact same kind of argument to show that valid code can break."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456372566, "post_id": 35615173, "comment_id": 58918941, "body": "Your example can&#39;t fail because C&#39;s sequence point requirements state the order that things must happen within a single thread. But when multithreading is involved, much of that is no longer in force. The only concession C makes to threading is the <code>sig_atomic_t</code> type and the <code>volatile</code> qualifier, which provide very minimal control."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456374051, "post_id": 35615173, "comment_id": 58919374, "body": "@Barmar Exactly. If the standard says it must work, then it must work. If the standard doesn&#39;t say it must work, then it may not work. How it can or can&#39;t fail on actual or hypothetical hardware is irrelevant. The C standard says nothing about threading, so what controls here is the relevant threading standard. We don&#39;t know what that is, but most of them say it&#39;s undefined or unspecified behavior if an object is modified in one thread while another thread is, or might be, accessing it. So that&#39;s the key issue."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456374378, "post_id": 35615173, "comment_id": 58919485, "body": "So how does that explain what happens in the real world to cause a particular result? That&#39;s the point of my answer: it shows a possible execution path, which is allowed by the standard, that gets the result he asked about."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456374653, "post_id": 35615173, "comment_id": 58919578, "body": "@Barmar His issue is not what happens in the real world to cause a particular result. If it was, he would have specified the hardware and platform and the question would have been entirely different. It&#39;s why his expectation wasn&#39;t met, and that&#39;s because his expectation is unwarranted. He could have had precisely the same question even if the code had happened to do what he happened to expect it to do. (Though he says he gets the result <code>1</code> and <code>1</code>, I&#39;m 99.8% certain he really means <i>if</i> he gets those results. Mostly because that&#39;s so unlikely to actually happen. I asked the OP to clarify.)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456375652, "post_id": 35615173, "comment_id": 58919881, "body": "I interpret his question as asking &quot;I expect to get result X, but I got result Y, how did that happen?&quot;. I showed how it&#39;s possible. Your answer doesn&#39;t really explain anything, it just says &quot;You have to follow the standard, otherwise the results are undefined.&quot; That&#39;s a &quot;because I said so&quot; answer, like you would give a child who doesn&#39;t have enough experience to understand why you&#39;re telling them what to do. It doesn&#39;t explain why the standard says what it says."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456375770, "post_id": 35615173, "comment_id": 58919932, "body": "@Barmar You have it precisely backwards. The standard doesn&#39;t say what it says because platforms do what they do. Compilers make code that makes the platform do what they do because the standard says what it says. Your explanation is just <i>wrong</i>. It&#39;s more complex than mine, yes, but the complexity obscures the simple point that you only get guarantees (and justified expectations) when you follow a standard that gives them to you. What platforms actually do it irrelevant because the compiler tells the platform what to do based on the standard."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456376738, "post_id": 35615173, "comment_id": 58920296, "body": "You have it backwards. Standards are not written arbitrarily, they&#39;re based on real world experience. And when they have restrictions, they exist to solve problems that occur in concrete implementations. I&#39;ve worked on a standards committee (ANSI X3J13 Common Lisp), and many decisions were made as concessions to the way implementation actually work. We could have (and sometimes did) decided to force implementations to change to meet our requirements, but mostly we codified and clarified what already existed as the least common denominator in popular implementations."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456376841, "post_id": 35615173, "comment_id": 58920342, "body": "And multi-threading has been around for much longer than the C and POSIX standards. Their requirements are based on how typical multiprocessing systems actually work."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1456356434, "last_edit_date": 1456356434, "creation_date": 1456355690, "answer_id": 35615173, "question_id": 35612929, "link": "https://stackoverflow.com/questions/35612929/spinlocks-running-simultaneously/35615173#35615173", "title": "Spinlocks running simultaneously", "body": "<p>You don't specify what threading model or standard you are using. But typical standards specify that it's undefined (or unspecified) behavior if you access an object in one thread while another thread is, or might be, modifying it. </p>\n\n<p>You clearly do that with <code>y</code>. So there's no reason you should expect any particular outcome -- anything can happen. With some threading standards, it could crash or produce any result at all. With others, the final value of <code>y</code> is unspecified, but the code is otherwise guaranteed to do what you expect.</p>\n\n<p>Do not get trapped into reasoning about what particular hardware (such as caches and registers) could or might do. That's entirely irrelevant to the answer to this question, as it for any question where you're writing code that follows a specification or standard. You cannot show that code is safe by not finding any way it can fail on some particular piece of hardware.</p>\n\n<p>More importantly, you cannot show that code is unsafe by finding a way it can fail on some particular piece of hardware or platform. (This is why Barnar's answer is wrong.) We can always imagine ways code could execute such that it fails -- it's the job of the compiler <em>not</em> to compile code that way unless there's something wrong with the code itself.</p>\n\n<p>For example, consider this code:</p>\n\n<pre><code>int i;\n\nvoid foo()\n{\n    i++;\n    bar();\n    i++;\n}\nvoid bar()\n{\n    i++;\n}\n</code></pre>\n\n<p>It would be totally invalid to argue that <code>foo</code> might only increment <code>i</code> twice because the value of <code>i</code> might be held in a register across the call to <code>bar</code>, losing <code>bar</code>'s change to <code>i</code>. Why? Because the compiler is only allowed to hold <code>i</code> in a register if it can prove that this will not affect the output of the code because the code follows all the standard's rules.</p>\n\n<p>Reasoning about how things might happen such that the code fails only works if the code violates some rule. Otherwise, it's the compiler's job to make the code not fail, whatever that takes.</p>\n\n<p>Barmar's argument applies to the code above just as well, but clearly that code cannot fail. So the argument is invalid. Either the code follows the rules or it does not. If it does not follow the rules, it's broken because it doesn't follow the rules. If it does follow the rules, then it's the job of the compiler and platform to make sure it doesn't somehow fail.</p>\n\n<p>Presumably, the code is broken because it doesn't follow the rules for the threading platform or standard it was coded for. But we can't be sure because you haven't told us what that platform or standard is.</p>\n"}], "owner": {"reputation": 1337, "user_id": 2676875, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e431572659944f579494a0c39356a9ac?s=128&d=identicon&r=PG", "display_name": "Tanishq dubey", "link": "https://stackoverflow.com/users/2676875/tanishq-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1456356434, "creation_date": 1456347405, "last_edit_date": 1456347799, "question_id": 35612929, "link": "https://stackoverflow.com/questions/35612929/spinlocks-running-simultaneously", "title": "Spinlocks running simultaneously", "body": "<p>Suppose we have these global variables:</p>\n\n<pre><code>int x = 0;\nint y = 0;\nspinlock_t* lock;\n</code></pre>\n\n<p>And suppose we have these two threads running at the same time. </p>\n\n<pre><code>void thread1(void)\n{\n    y++;\n    spin_lock(lock);\n    x++;\n    spin_unlock(lock):\n}\n\nvoid thread2(void)\n{\n    spin_lock(lock);\n    x++;\n    spin_unlock(lock);\n    y++;\n}\n</code></pre>\n\n<p>I get my result as <code>y=1</code> and <code>x=2</code> but I expect for both x and y to be equal to 2. Why is this occurring?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456459866, "post_id": 35612877, "comment_id": 58967551, "body": "the <code>&amp;</code> in the <code>if</code> statement is not necessarily correct due to possible bit pattern overlap with other file types.  Suggest not assuming that DT_DIR is unique,  Rather use: <code>if(file-&gt;d_type == DT_DIR){</code>   Then asking if it is not a directory would be: <code>if(file-&gt;d_type != DT_DIR){</code>  I.E. a single character change"}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 4557453, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/98021faf61dfd92a09249c9fb7aad2a1?s=128&d=identicon&r=PG&f=1", "display_name": "TheValars", "link": "https://stackoverflow.com/users/4557453/thevalars"}, "edited": false, "score": 0, "creation_date": 1456348854, "post_id": 35612898, "comment_id": 58910482, "body": "Oh dear that simple. Thank you though."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 6, "last_activity_date": 1456347283, "creation_date": 1456347283, "answer_id": 35612898, "question_id": 35612877, "link": "https://stackoverflow.com/questions/35612877/check-if-file-is-not-directory/35612898#35612898", "title": "Check if file is not directory", "body": "<p>Any boolean expression can be negated with the <em>not</em> operator (<code>!</code>):</p>\n\n<pre><code>if (!(file-&gt;d_type &amp; DT_DIR)) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456348529, "post_id": 35612961, "comment_id": 58910290, "body": "Could you explain <i>why</i>  you&#39;d want to use <i>logical and</i>, rather than <i>bitwise and</i> here?"}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1456348569, "post_id": 35612961, "comment_id": 58910309, "body": "bitwise <code>&amp;</code> operator is different from the logical <code>&amp;&amp;</code>"}, {"owner": {"reputation": 91, "user_id": 4590419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e6d22f4350903b6fc21fe879207935b?s=128&d=identicon&r=PG&f=1", "display_name": "Sharath Manchala", "link": "https://stackoverflow.com/users/4590419/sharath-manchala"}, "edited": false, "score": 0, "creation_date": 1456348935, "post_id": 35612961, "comment_id": 58910526, "body": "So, the code talks about file exists or not, so I assumed d_type and DT_DIR are holding boolean values True or False so I went with logical notation. You could have gone for bitwise too as it is just 0 and 1 but I followed the general method of using logical in an if statement."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456353398, "post_id": 35612961, "comment_id": 58912932, "body": "@Sharath: Maybe you should read the manpage for <code>readdir()</code> on linux?"}], "tags": [], "owner": {"reputation": 91, "user_id": 4590419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e6d22f4350903b6fc21fe879207935b?s=128&d=identicon&r=PG&f=1", "display_name": "Sharath Manchala", "link": "https://stackoverflow.com/users/4590419/sharath-manchala"}, "is_accepted": false, "score": 2, "last_activity_date": 1456437823, "last_edit_date": 1456437823, "creation_date": 1456347513, "answer_id": 35612961, "question_id": 35612877, "link": "https://stackoverflow.com/questions/35612877/check-if-file-is-not-directory/35612961#35612961", "title": "Check if file is not directory", "body": "<p>Regarding your question, you can do it this way:</p>\n\n<pre><code> if(!(file-&gt;d_type &amp; DT_DIR)){} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1456348879, "post_id": 35613125, "comment_id": 58910491, "body": "This is not the same as the question. The OP is about the <code>&amp;</code>."}, {"owner": {"reputation": 2003, "user_id": 2407394, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rVZLV.jpg?s=128&g=1", "display_name": "gyan", "link": "https://stackoverflow.com/users/2407394/gyan"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1456349100, "post_id": 35613125, "comment_id": 58910616, "body": "&amp; will match to DT_SOCK = 12, and DT_WHT = 14  as well ... if to check only directory... should use =="}], "tags": [], "owner": {"reputation": 2003, "user_id": 2407394, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rVZLV.jpg?s=128&g=1", "display_name": "gyan", "link": "https://stackoverflow.com/users/2407394/gyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1456349195, "last_edit_date": 1456349195, "creation_date": 1456348087, "answer_id": 35613125, "question_id": 35612877, "link": "https://stackoverflow.com/questions/35612877/check-if-file-is-not-directory/35613125#35613125", "title": "Check if file is not directory", "body": "<p>Bitwise &amp; will match to DT_SOCK = 12, and DT_WHT = 14 as well ... if to check only directory... should use \"==\"</p>\n\n<pre><code> file = readdir (dir);\n          if(file-&gt;d_type == DT_DIR){\n          \\* some code*\\\n          }\n</code></pre>\n\n<p>Reverse:</p>\n\n<pre><code> file = readdir (dir);\n          if(file-&gt;d_type != DT_DIR){\n          \\* some code*\\\n          }\n</code></pre>\n\n<p>You can put negation on any conditional block to reverse it, you already know now..</p>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": false, "score": 2, "last_activity_date": 1456348397, "creation_date": 1456348397, "answer_id": 35613231, "question_id": 35612877, "link": "https://stackoverflow.com/questions/35612877/check-if-file-is-not-directory/35613231#35613231", "title": "Check if file is not directory", "body": "<p>You can check if the expression evaluates to false:</p>\n\n<pre><code>      file = readdir (dir);\n      if( (file-&gt;d_type &amp; DT_DIR) == 0 ){\n      \\* some code*\\\n      }\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 4557453, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/98021faf61dfd92a09249c9fb7aad2a1?s=128&d=identicon&r=PG&f=1", "display_name": "TheValars", "link": "https://stackoverflow.com/users/4557453/thevalars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 35612898, "answer_count": 4, "score": 2, "last_activity_date": 1456437823, "creation_date": 1456347213, "question_id": 35612877, "link": "https://stackoverflow.com/questions/35612877/check-if-file-is-not-directory", "title": "Check if file is not directory", "body": "<p>I currently have a code that checks whether a file is a directory or not, it goes as follows;</p>\n\n<pre><code>          file = readdir (dir);\n          if(file-&gt;d_type &amp; DT_DIR){\n          \\* some code*\\\n          }\n</code></pre>\n\n<p>I was wondering, what is the if statement for the exact opposite of this. Something along the line \"if file is not directory\".</p>\n"}, {"tags": ["c", "security"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1456348052, "post_id": 35612875, "comment_id": 58910035, "body": "Please explain why any developer would call &#39; printf(0);&#39; ?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1456350235, "post_id": 35612875, "comment_id": 58911262, "body": "I&#39;ve found that <code>*(int*)NULL = 0;</code> can crash any program, you don&#39;t even need <code>printf</code>! Or even simpler, so can <code>abort();</code>!"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1456356477, "post_id": 35612875, "comment_id": 58914147, "body": "<code>printf(0); can crash any program, since there is no format specifier mentioned in argument</code> You are misreading it. If there were no format, then it wouldn&#39;t even compile. There <i>is</i> a format, which happens to be the NULL pointer. That is UB, indeed, but not because the format is missing."}, {"owner": {"reputation": 2168, "user_id": 843021, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f3c6fa71e30cd3d06c6005d3a5acd34?s=128&d=identicon&r=PG&f=1", "display_name": "Dev.K.", "link": "https://stackoverflow.com/users/843021/dev-k"}, "edited": false, "score": 0, "creation_date": 1456371262, "post_id": 35612875, "comment_id": 58918525, "body": "Thanks! Now I got the point. It crashes because NULL DEREFERENCE, Not format specifier."}], "answers": [{"comments": [{"owner": {"reputation": 6536, "user_id": 858968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pVU1w.png?s=128&g=1", "display_name": "josh poley", "link": "https://stackoverflow.com/users/858968/josh-poley"}, "edited": false, "score": 1, "creation_date": 1456360383, "post_id": 35613039, "comment_id": 58915476, "body": "Crashes in general do constitute a security issue in that they can be used to create denial of service attacks."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1456347771, "creation_date": 1456347771, "answer_id": 35613039, "question_id": 35612875, "link": "https://stackoverflow.com/questions/35612875/security-implication-of-printf0-in-cwindows/35613039#35613039", "title": "Security Implication of printf(0) in C(Windows)", "body": "<p>There are no security implications here.  </p>\n\n<p><code>printf(0)</code> is dereferencing a NULL pointer.  While this will likely make the program crash, there's no room for an attacker to inject anything.</p>\n"}], "owner": {"reputation": 2168, "user_id": 843021, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f3c6fa71e30cd3d06c6005d3a5acd34?s=128&d=identicon&r=PG&f=1", "display_name": "Dev.K.", "link": "https://stackoverflow.com/users/843021/dev-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 35613039, "answer_count": 1, "score": 0, "last_activity_date": 1456347771, "creation_date": 1456347210, "question_id": 35612875, "link": "https://stackoverflow.com/questions/35612875/security-implication-of-printf0-in-cwindows", "title": "Security Implication of printf(0) in C(Windows)", "body": "<p>I've noticed in C on Windows platform <strong>printf(0);</strong> can crash any program, since there is no format specifier mentioned in argument. </p>\n\n<p>Usually I've seen it triggers __invoke_watson().</p>\n\n<p>I want to know if there is any security implication associated with this type of scenarios, considering parameter of printf() cannot be controlled attacker.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1752, "user_id": 2029790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655269fb547aed3b52ab6048e9851c3c?s=128&d=identicon&r=PG", "display_name": "Vincent Orback", "link": "https://stackoverflow.com/users/2029790/vincent-orback"}, "edited": false, "score": 0, "creation_date": 1456356652, "post_id": 35612868, "comment_id": 58914214, "body": "I think you need to rephrase your question to make it easier to understand. What exact result are you after?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 2789372, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/942d3775481376bfcba97098a5785cb2?s=128&d=identicon&r=PG&f=1", "display_name": "aaaa", "link": "https://stackoverflow.com/users/2789372/aaaa"}, "edited": false, "score": 0, "creation_date": 1456347543, "post_id": 35612910, "comment_id": 58909780, "body": "so  just do diff= diff/1000 then return diff?"}, {"owner": {"reputation": 2003, "user_id": 2407394, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rVZLV.jpg?s=128&g=1", "display_name": "gyan", "link": "https://stackoverflow.com/users/2407394/gyan"}, "reply_to_user": {"reputation": 23, "user_id": 2789372, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/942d3775481376bfcba97098a5785cb2?s=128&d=identicon&r=PG&f=1", "display_name": "aaaa", "link": "https://stackoverflow.com/users/2789372/aaaa"}, "edited": false, "score": 0, "creation_date": 1456347810, "post_id": 35612910, "comment_id": 58909920, "body": "Yes... but not sure why you want to convert to milli seconds?"}], "tags": [], "owner": {"reputation": 2003, "user_id": 2407394, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rVZLV.jpg?s=128&g=1", "display_name": "gyan", "link": "https://stackoverflow.com/users/2407394/gyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1456347352, "creation_date": 1456347352, "answer_id": 35612910, "question_id": 35612868, "link": "https://stackoverflow.com/questions/35612868/how-to-get-result-to-milliseconds/35612910#35612910", "title": "How to get result to milliseconds", "body": "<p>Divide the result by 1000 to get in milliseconds.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 5120589, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6tg_iNJV-Qs/AAAAAAAAAAI/AAAAAAAAAnA/1Gq0wiQo9qw/photo.jpg?sz=128", "display_name": "Kurokawa Masato", "link": "https://stackoverflow.com/users/5120589/kurokawa-masato"}, "is_accepted": true, "score": 1, "last_activity_date": 1456349082, "creation_date": 1456349082, "answer_id": 35613428, "question_id": 35612868, "link": "https://stackoverflow.com/questions/35612868/how-to-get-result-to-milliseconds/35613428#35613428", "title": "How to get result to milliseconds", "body": "<p>Why you try to use some construction not designed to measure time in seconds or ms. Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\ndouble time_diff(double x , double y);\n\nint main()\n{  \n   int i;\n\n   double before;\n   before = clock();\n\n   //Time taking task\n   for (i=1 ; i &lt;= 100 ; i++)\n   {\n       printf(\"%d %d %d n\",i, i*i, i*i*i);\n   }\n\n    printf(\"\\n\\ntime elapsed : %.8lf\", time_diff(before, clock())); \n\n   return 0;\n }\n\n\ndouble time_diff(double x , double y)\n{\n    return ((y - x)/CLOCKS_PER_SEC) * 100;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2789372, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/942d3775481376bfcba97098a5785cb2?s=128&d=identicon&r=PG&f=1", "display_name": "aaaa", "link": "https://stackoverflow.com/users/2789372/aaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 35613428, "answer_count": 2, "score": 0, "last_activity_date": 1456349082, "creation_date": 1456347191, "question_id": 35612868, "link": "https://stackoverflow.com/questions/35612868/how-to-get-result-to-milliseconds", "title": "How to get result to milliseconds", "body": "<p>This results in microseconds being displayed how would I get it to display in milliseconds? current output is 34.0000?????</p>\n\n<pre><code>double time_diff(struct timeval x , struct timeval y);\n\nint main()\n{  \nint i;\n\nstruct timeval before , after;\ngettimeofday(&amp;before , NULL);\n\n//Time taking task\nfor (i=1 ; i &lt;= 100 ; i++)\n{\n    printf(\"%d %d %d n\",i, i*i, i*i*i);\n}\n\ngettimeofday(&amp;after , NULL);\n\nprintf(\" time elapsed : %.0lf\" , time_diff(before , after) ); \n\nreturn 0;\n }\n\ndouble time_diff(struct timeval x , struct timeval y)\n{\n    double x_ms , y_ms , diff;\n\nx_ms = (double)x.tv_sec*1000000 + (double)x.tv_usec;\ny_ms = (double)y.tv_sec*1000000 + (double)y.tv_usec;\n\ndiff = (double)y_ms - (double)x_ms;\n\nreturn diff;\n }\n</code></pre>\n\n<p>Would I just want to multiply by only 1000???</p>\n"}, {"tags": ["c", "struct", "mpi"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456345661, "post_id": 35611912, "comment_id": 58908720, "body": "<code>MPI_Bcast(&amp;list[0],sizeof(list),MPI_CHAR,...)</code>"}, {"owner": {"reputation": 2147, "user_id": 2136640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d392b830abbaf0d8af1124c1dd371?s=128&d=identicon&r=PG", "display_name": "Timothy Brown", "link": "https://stackoverflow.com/users/2136640/timothy-brown"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456345751, "post_id": 35611912, "comment_id": 58908765, "body": "@user3528438 it&#39;s a struct containing two integers, what are you doing using <code>MPI_CHAR</code>?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 2147, "user_id": 2136640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d392b830abbaf0d8af1124c1dd371?s=128&d=identicon&r=PG", "display_name": "Timothy Brown", "link": "https://stackoverflow.com/users/2136640/timothy-brown"}, "edited": false, "score": 0, "creation_date": 1456345985, "post_id": 35611912, "comment_id": 58908914, "body": "@TimothyBrown It&#39;s just a big piece of memory, isn&#39;t it?"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456388686, "post_id": 35611912, "comment_id": 58925975, "body": "@user3528438, no, it is not. MPI is designed to work in heterogeneous environments too with those being more common nowadays than you might think. Sending &quot;a big piece of memory&quot; simply won&#39;t work in such cases and MPI is all about code portability."}], "owner": {"reputation": 316, "user_id": 5431704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207650762528057/picture?type=large", "display_name": "Zero23ku", "link": "https://stackoverflow.com/users/5431704/zero23ku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1456345766, "answer_count": 0, "score": 0, "last_activity_date": 1456346125, "creation_date": 1456344091, "last_edit_date": 1456346125, "question_id": 35611912, "link": "https://stackoverflow.com/questions/35611912/how-to-send-array-of-struct-in-mpi-to-other-process-in-c", "closed_reason": "Duplicate", "title": "How to send array of struct in MPI to other process in C?", "body": "<p>Im having a hard time with this, I need to use a linked list with MPI to do some common operations over the list (sorting, deleting elements, etc). Anyway, most people I asked for this told me to use an array of struct instead of a linked list, so I did something like this.</p>\n\n<pre><code>struct{\n    int proc; //process is in charge\n    int info; //Information\n};\n\nstruct list[100];\n</code></pre>\n\n<p>So, I want to send it to all process and work with it, anyway, im familiar with pthread but MPI is like another level to me, all I need basically is to share the whole list with all process and keep the changes in the list in all process, but Im not sure how to share the whole array with MPI_BCAST.</p>\n\n<p>I already managed to create the list in the process MASTER, so all what I need to do now is share it with the rest of the process</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456344004, "post_id": 35611785, "comment_id": 58907706, "body": "<code>while(temp2 != NULL) { temp2 = temp2-&gt;next} temp2-&gt;next = temp;</code> What do you think the value of <code>temp2</code> will be after the <code>while</code> loop finishes? Suggest you use a debugger to help you debug problems on your own before posting on SO."}], "answers": [{"tags": [], "owner": {"reputation": 1153, "user_id": 4342958, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7BvhkyZxn_Y/AAAAAAAAAAI/AAAAAAAAGNw/J3BMh2eITDQ/photo.jpg?sz=128", "display_name": "Giedrius D", "link": "https://stackoverflow.com/users/4342958/giedrius-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1456344023, "creation_date": 1456344023, "answer_id": 35611882, "question_id": 35611785, "link": "https://stackoverflow.com/questions/35611785/linked-list-insertion-of-a-node-at-the-end-of-the-list-in-c/35611882#35611882", "title": "Linked list - Insertion of a node at the end of the list in C", "body": "<pre><code>while(temp2 != NULL)\n{\n    temp2 = temp2-&gt;next;\n}\ntemp2-&gt;next = temp;\n</code></pre>\n\n<p>After this loop <code>temp2</code> is always <code>NULL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 47776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d29275dcdd551fcdec541cf355ef85?s=128&d=identicon&r=PG", "display_name": "under_seeg", "link": "https://stackoverflow.com/users/47776/under-seeg"}, "is_accepted": false, "score": 0, "last_activity_date": 1456344858, "creation_date": 1456344858, "answer_id": 35612129, "question_id": 35611785, "link": "https://stackoverflow.com/questions/35611785/linked-list-insertion-of-a-node-at-the-end-of-the-list-in-c/35612129#35612129", "title": "Linked list - Insertion of a node at the end of the list in C", "body": "<p>Perhaps instead of</p>\n\n<pre><code>while(temp2 != NULL)\n{\n    temp2 = temp2-&gt;next;\n}\n</code></pre>\n\n<p>you meant to write</p>\n\n<pre><code>while(temp2-&gt;next != NULL)\n{\n    temp2 = temp2-&gt;next;\n}\n</code></pre>\n\n<p>Also, your head variable is always NULL. You must assign a value such as with an allocation in main:</p>\n\n<pre><code>int main()\n{\n    head = (struct node*)malloc(sizeof(struct node));\n    ...\n}\n</code></pre>\n\n<p>Also, your print function does not iterate through the list so there is an infinite while loop, instead try:</p>\n\n<pre><code>while(temp!=NULL)\n{\n    printf(\"%d\", temp-&gt;data);\n    temp = temp-&gt;next;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5976090, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154100373083394/picture?type=large", "display_name": "Vishal Barkakati", "link": "https://stackoverflow.com/users/5976090/vishal-barkakati"}, "edited": false, "score": 0, "creation_date": 1456348105, "post_id": 35612319, "comment_id": 58910069, "body": "thanks again for the answer. can you tell me what i am doing wrong in my void Insert function by using my approach except for this  while(temp2 != NULL) {     temp2 = temp2-&gt;next; }. if possible can you give the solution."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1, "user_id": 5976090, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154100373083394/picture?type=large", "display_name": "Vishal Barkakati", "link": "https://stackoverflow.com/users/5976090/vishal-barkakati"}, "edited": false, "score": 0, "creation_date": 1456348297, "post_id": 35612319, "comment_id": 58910166, "body": "@VishalBarkakati It is the main problem. You could splict the function body in two parts. The first one checks whether the head is equal to NULL. And the second one uses loop while ( temp2-&gt;next != NULL )"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1456345775, "last_edit_date": 1456345775, "creation_date": 1456345376, "answer_id": 35612319, "question_id": 35611785, "link": "https://stackoverflow.com/questions/35611785/linked-list-insertion-of-a-node-at-the-end-of-the-list-in-c/35612319#35612319", "title": "Linked list - Insertion of a node at the end of the list in C", "body": "<p>After this loop in the function</p>\n\n<pre><code>while(temp2 != NULL)\n{\n    temp2 = temp2-&gt;next;\n}\n</code></pre>\n\n<p>pointer <code>temp2</code> will be equal to <code>NULL</code> because it is the condition when the loop will be interrupted.</p>\n\n<p>Thus this statement after the loop</p>\n\n<pre><code>temp2-&gt;next = temp;\n</code></pre>\n\n<p>results in undefined behaviour of the function.</p>\n\n<p>The function can be written much simpler</p>\n\n<pre><code>void Insert( int data )\n{\n    struct node *temp = malloc( sizeof( struct node ) );\n\n    if ( temp != NULL )\n    {\n        temp-&gt;data = data;\n        temp-&gt;next = NULL;\n\n        struct node **last = &amp;head;\n\n        while ( *last != NULL ) last = &amp;( *last )-&gt;next;\n\n        *last = temp;\n    }\n}\n</code></pre>\n\n<p>Pay attention that you forgot one statement in the function print. It should look like</p>\n\n<pre><code>void print( void )\n           ^^^^^^\n{\n    struct node* temp = head;\n    while(temp!=NULL)\n    {\n        printf(\"%d \", temp-&gt;data);\n                ^^^\n        temp = temp-&gt;next;\n        ^^^^^^^^^^^^^^^^^^\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>And instead of the while loop I would use the following for loop</p>\n\n<pre><code>void print( void )\n{\n    for ( struct node *temp = head; temp != NULL; temp = temp-&gt;next )\n    {\n        printf( \"%d \", temp-&gt;data );\n    }\n    printf( \"\\n\" );\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5976090, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154100373083394/picture?type=large", "display_name": "Vishal Barkakati", "link": "https://stackoverflow.com/users/5976090/vishal-barkakati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1456345775, "creation_date": 1456343738, "question_id": 35611785, "link": "https://stackoverflow.com/questions/35611785/linked-list-insertion-of-a-node-at-the-end-of-the-list-in-c", "title": "Linked list - Insertion of a node at the end of the list in C", "body": "<p>This is the code for insertion of a node at the end. I am not getting any error while running but it shows that the programme has stopped working. please tell me where i have messed it here?</p>\n\n<pre><code>enter code here\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nstruct node{\nint data;\nstruct node* next;\n};\n\nstruct node* head;\n\nvoid Insert(int data)\n{\n    struct node* temp, *temp2;\n    temp=(struct node*)malloc(sizeof(struct node));\n    temp-&gt;data = data;\n    temp2 = head;\n    while(temp2 != NULL)\n    {\n        temp2 = temp2-&gt;next;\n    }\n    temp2-&gt;next = temp;\n    temp-&gt;next = NULL;\n\n}\nvoid print()\n{\n    struct node* temp = head;\n    while(temp!=NULL)\n    {\n        printf(\"%d\", temp-&gt;data);\n    }\n    printf(\"\\n\");\n}\nint main()\n{\n    head = NULL;\n    Insert(1);\n    Insert(2);\n    Insert(3);\n    Insert(4);\n    Insert(5);\n    print();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "xcode", "compiler-errors", "dependencies"], "comments": [{"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1456344661, "post_id": 35611716, "comment_id": 58908105, "body": "Is the file mode set to executable? Did you successfully build your executable? Clean your directory and compile from scratch."}], "owner": {"reputation": 63, "user_id": 5259489, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153279163504635/picture?type=large", "display_name": "Elsa Sl&#228;tteg&#229;rd", "link": "https://stackoverflow.com/users/5259489/elsa-sl%c3%a4tteg%c3%a5rd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 882, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1456343519, "creation_date": 1456343519, "question_id": 35611716, "link": "https://stackoverflow.com/questions/35611716/xcode-c-check-dependencies-and-error-executable-doesnt-exist", "title": "Xcode (C) &quot;Check dependencies&quot; and &quot;Error: Executable doesn&#39;t exist&quot;", "body": "<p>I'm doing a school project in C using xcode. The task is to create a command line application that checks if and how many times a word appears in a text file. So far I've just created the first step of the code, I have set the first argue argument to \"hej\" even though Im not using the word yet, and because of the first filename is not entered and therefore NULL, I have set it to be an existing file called \"hej.txt\", in order to test my code as I go. </p>\n\n<p>This bit worked before:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"string.h\"\n\n\nstruct fileSearch\n{\n    char *inFile;\n    char *outFile;\n    char *searchWord;\n};\n\nint main(int argc, char *argv[])\n{\n\n    int index = 0;\n    struct fileSearch f;\n    f.searchWord = argv[1];\n    FILE *searchFile;\n\n    //For-loop to assign filenames\n    for(index = 0; index &lt; argc ; ++index)\n    {\n        if((strcmp(argv[index], \"-i\") == 0) &amp;&amp; argv[index] != NULL &amp;&amp; strcmp(argv[index + 1], \"-o\") != 0)\n        {\n            f.inFile = argv[index + 1];\n        }\n        if((strcmp(argv[index], \"-o\") == 0) &amp;&amp; argv[index] != NULL &amp;&amp; strcmp(argv[index + 1], \"-c\") != 0)\n        {\n            f.outFile = argv[index + 1];\n        }\n    }\n\n    if (f.searchWord == NULL)\n    {\n        printf(\"You didnt enter a search word\");\n    }\n\n    if (f.inFile == NULL)\n    {\n        f.inFile = \"hej.txt\";\n    }\n\n\n    if (f.outFile == NULL)\n    {\n        f.outFile = \"stdout.txt\";\n    }\n\n    printf(\"%s &amp; %s &amp; %s\", f.searchWord, f.inFile, f.outFile);\n    return 0;\n}\n</code></pre>\n\n<p>It then printed out the search word, the input filename and the output filename.</p>\n\n<p>Then I added the next step of the code where it would open the text file \"hej.txt\" and then read the strings and print them.</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"string.h\"\n\n\nstruct fileSearch\n{\n    char *inFile;\n    char *outFile;\n    char *searchWord;\n};\n\nint main(int argc, char *argv[])\n{\n\n    int index = 0;\n    struct fileSearch f;\n    f.searchWord = argv[1];\n    FILE *searchFile;\n\n    //For-loop to assign filenames\n    for(index = 0; index &lt; argc ; ++index)\n    {\n        if((strcmp(argv[index], \"-i\") == 0) &amp;&amp; argv[index] != NULL &amp;&amp; strcmp(argv[index + 1], \"-o\") != 0)\n        {\n            f.inFile = argv[index + 1];\n        }\n        if((strcmp(argv[index], \"-o\") == 0) &amp;&amp; argv[index] != NULL &amp;&amp; strcmp(argv[index + 1], \"-c\") != 0)\n        {\n            f.outFile = argv[index + 1];\n        }\n    }\n\n    if (f.searchWord == NULL)\n    {\n        printf(\"You didnt enter a search word\");\n    }\n\n    if (f.inFile == NULL)\n    {\n        f.inFile = \"hej.txt\";\n    }\n\n\n    if (f.outFile == NULL)\n    {\n        f.outFile = \"stdout.txt\";\n    }\n\n    printf(\"%s &amp; %s &amp; %s\", f.searchWord, f.inFile, f.outFile);\n\n    //Open file and read\n    char str[60];\n\n    searchFile = fopen(f.inFile, \"r\");\n    if(searchFile = fopen(f.inFile, \"r\") == NULL)\n    {\n        printf(\"Error: There is no file with that name.\");\n        return -1;\n    }\n\n    if(searchFile == NULL)\n    {\n        printf(\"The file is empty\");\n        return -1;\n    }\n\n    while(fgets(str, 60, searchFile) != NULL)\n    {\n        puts(str);\n    }\n\n    fclose(searchFile);\n\n    return 0;\n}\n</code></pre>\n\n<p>However now it builds the code successfully but when I try to run it, I get this error message:</p>\n\n<p>\"error: executable doesn't exist: '/Users/Slattegard/Library/Developer/Xcode/DerivedData/Coursework-chwsqczjjgxcyegnxgysiaigslvq/Build/Products/Debug/Coursework'\nerror: failed to launch '/Users/Slattegard/Library/Developer/Xcode/DerivedData/Coursework-chwsqczjjgxcyegnxgysiaigslvq/Build/Products/Debug/Coursework'\"</p>\n\n<p>and  the Issue Navigator gives me this message:</p>\n\n<p>\"Check dependencies\nwarning: no rule to process file '/Users/Slattegard/Documents/Coursework/Coursework/Find.c' of type sourcecode.c for architecture x86_64\"</p>\n\n<p>Anyone know where I am going wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1456343507, "post_id": 35611671, "comment_id": 58907425, "body": "What specifically is your input and expected output?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456343837, "post_id": 35611671, "comment_id": 58907613, "body": "You really don&#39;t need to store the values into array, you can calculate it on the fly."}, {"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1456344080, "post_id": 35611671, "comment_id": 58907747, "body": "Try initializing <code>inv_res_tot</code>.  And <code>n</code>.  Weird uninitialized values could definitely explain your weird result."}], "answers": [{"tags": [], "owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "is_accepted": false, "score": 0, "last_activity_date": 1456343675, "creation_date": 1456343675, "answer_id": 35611768, "question_id": 35611671, "link": "https://stackoverflow.com/questions/35611671/resistance-calculator/35611768#35611768", "title": "Resistance Calculator", "body": "<p>You did not initialize <code>inv_res_tot</code> and <code>res_tot</code>.</p>\n\n<p>You should do this in each iteration of the <code>while loop</code>.</p>\n\n<p><a href=\"http://ideone.com/Dgv4kJ\" rel=\"nofollow\">http://ideone.com/Dgv4kJ</a></p>\n"}], "owner": {"reputation": 37, "user_id": 5819793, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/954985944548727/picture?type=large", "display_name": "Perry Chapman", "link": "https://stackoverflow.com/users/5819793/perry-chapman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 924, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456343675, "creation_date": 1456343385, "question_id": 35611671, "link": "https://stackoverflow.com/questions/35611671/resistance-calculator", "title": "Resistance Calculator", "body": "<p>So I'm trying to build a program to calculate resistance for either parallel or series circuits. The formula for calculating parallel resistance is:</p>\n\n<pre><code>1/R_t = (1/R_1) + (1/R_2) + (1/R_n)...\n</code></pre>\n\n<p>The problem I'm having is that the program outputs \"-1.#QNAN0\" for parallel resistance calculations. Any suggestions? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\nint n, choice, i;\nchar sel;\nfloat res_tot, inv_res_tot;\n\nprintf(\"This is a program that calculates resistance.\\n\");\n\ndo{\n    printf(\"Enter 1 for parallel or 2 for series: \");\n    scanf(\"%d\", &amp;choice);\n\n    printf(\"How many resistors are there: \");\n    scanf(\"%d\", &amp;n);\n    printf(\"\\n\");\n\n    double r[n];\n\n    for(i=0; i&lt;n; i++) {\n        printf(\"Resistor %d: \", i+1);\n        scanf(\"%lf\", &amp;r[i]);\n    }\n\n    if(choice==1) {\n        for(i=0; i&lt;n; i++){\n            inv_res_tot+=(1/r[i]);\n        }\n\n        res_tot=(1/inv_res_tot);\n    }   \n\n    else if(choice==2) {\n        for(i=0; i&lt;n; i++) {\n            res_tot+=r[i];\n        }   \n    }\n\n    printf(\"\\nThe total resistance is: %f Ohms\\n\", res_tot);\n\n    printf(\"\\nWould you like to calculate another(y/n): \");\n    getchar();\n    scanf(\"%c\", &amp;sel);\n\n} while(sel=='Y' || sel=='y');\n\n\n\nreturn(0);  \n}\n</code></pre>\n"}, {"tags": ["ios", "c", "swift", "llvm-clang", "math.h"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456343196, "post_id": 35611569, "comment_id": 58907215, "body": "C does not support <i>methods</i>. Sure this is not Objective-C only?"}, {"owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456343704, "post_id": 35611569, "comment_id": 58907530, "body": "@Olaf thanks for the reply. I meant to say functions. I just modified the description to make it clearer. Thanks."}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 0, "creation_date": 1456344013, "post_id": 35611569, "comment_id": 58907712, "body": "Why do you want to use the fdlibm implementations instead of the native libm?"}, {"owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "reply_to_user": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 0, "creation_date": 1456344341, "post_id": 35611569, "comment_id": 58907915, "body": "@StephenCanon we are build cross platform apps using the same back end service. We want to make sure the calculation for floating point the same for both iOS and Android. I am not very familiar with the native libraries in iOS. I did see a <code>libm.tbd</code> in iOS earlier but was not sure if that is the same as <code>fdlibm</code>. If it is the same as fdlibm, I definitely want to give it a try. We tried to compare results in fdlibm in android with those in math.h in iOS, the results are not exactly the same. Thanks for pointing it out."}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 2, "creation_date": 1456344618, "post_id": 35611569, "comment_id": 58908080, "body": "It will require more than just using fdlibm to get identical cross-platform results; you&#39;ll need to ensure that, e.g. fma formation is disabled on all platforms, that NEON is either used or not used for floating-point arithmetic uniformly on both platforms, that flush-to-zero is either enabled or disabled uniformly, etc.  You&#39;ll also need a story for x86 if you&#39;re targeting it (specifically, disabling x87 code generation).  This is a complex goal without easy solutions."}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 1, "creation_date": 1456344842, "post_id": 35611569, "comment_id": 58908205, "body": "(And to answer your question, the iOS libm is not the same as fdlibm; they do share some history, but have diverged almost completely over the past 15 years or so)."}, {"owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "reply_to_user": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 0, "creation_date": 1456344996, "post_id": 35611569, "comment_id": 58908304, "body": "@StephenCanon thanks a lot for the information. This is very helpful. Myself is have very little knowledge about this. Our architect made the decision, and I am trying to figure it out to verify. I will definitely pass these information over to our architect. Btw: when you mean native libm, do you mean the ones in <code>math.h</code> or the one in <code>libm.tbd</code> in iOS? I have no idea about what&#39;s in <code>libm.tbd</code>. Really appreciate your replies!"}, {"owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "edited": false, "score": 0, "creation_date": 1456345038, "post_id": 35611569, "comment_id": 58908333, "body": "I see. thanks a lot for the clarification. Appreciate it! :)"}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 0, "creation_date": 1456345040, "post_id": 35611569, "comment_id": 58908335, "body": "libm is the name of the dynamic library; math.h is the name of the header that declares the interfaces.  They are two views of the same thing."}, {"owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "reply_to_user": {"reputation": 27188, "user_id": 1019167, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/juW4C.png?s=128&g=1", "display_name": "AlexWien", "link": "https://stackoverflow.com/users/1019167/alexwien"}, "edited": false, "score": 0, "creation_date": 1456345606, "post_id": 35611569, "comment_id": 58908688, "body": "@AlexWien I guess that&#39;s the case. Thanks for the reply. Have a good day. :)"}, {"owner": {"reputation": 27188, "user_id": 1019167, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/juW4C.png?s=128&g=1", "display_name": "AlexWien", "link": "https://stackoverflow.com/users/1019167/alexwien"}, "edited": false, "score": 1, "creation_date": 1456348055, "post_id": 35611569, "comment_id": 58910037, "body": "From the comments this looks to much work, consider a work around, e.g on server side round all floating points such that the last digit would be removed. (Java once detected a difference in the last digit between two plattforms and decided to calculate all Math in Software)"}, {"owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "reply_to_user": {"reputation": 27188, "user_id": 1019167, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/juW4C.png?s=128&g=1", "display_name": "AlexWien", "link": "https://stackoverflow.com/users/1019167/alexwien"}, "edited": false, "score": 0, "creation_date": 1456349242, "post_id": 35611569, "comment_id": 58910696, "body": "@AlexWien thanks a lot for the advice, I think that&#39;s good alternative solution although our app might not be able to afford that round trip to server. I will bring this up to the team to decide though. For our case, it seems for some situations, it is exactly the difference between last digit. For example <code>sin(40023beb78080000) = 3fe84cb583f88ddc</code> versus <code>sin( 40023beb78080000)  = 3fe84cb583f88ddd</code>. Add the numbers are converted to hex string due to some known iOS swift print bug. Really appreciate your help. We will think about other workaround too if none mentioned here works for us. :)"}], "answers": [{"tags": [], "owner": {"reputation": 27188, "user_id": 1019167, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/juW4C.png?s=128&g=1", "display_name": "AlexWien", "link": "https://stackoverflow.com/users/1019167/alexwien"}, "is_accepted": true, "score": 0, "last_activity_date": 1456349414, "creation_date": 1456349414, "answer_id": 35613534, "question_id": 35611569, "link": "https://stackoverflow.com/questions/35611569/integrate-fdlibm-library-to-ios/35613534#35613534", "title": "Integrate FDLIBM library to iOS", "body": "<p>From the comments this looks to much work, consider a work around, e.g on server side round all floating points such that the last digit would be removed.<br>\nSun (Java) once detected a difference in the last digit between two plattforms and decided to calculate all Math in Software. They called that StrictMath.</p>\n"}, {"comments": [{"owner": {"reputation": 27188, "user_id": 1019167, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/juW4C.png?s=128&g=1", "display_name": "AlexWien", "link": "https://stackoverflow.com/users/1019167/alexwien"}, "edited": false, "score": 0, "creation_date": 1456847062, "post_id": 35713549, "comment_id": 59129233, "body": "this was of my first thoughts, but I gave another answer, +1 since every working solution is usefull."}, {"owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "reply_to_user": {"reputation": 27188, "user_id": 1019167, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/juW4C.png?s=128&g=1", "display_name": "AlexWien", "link": "https://stackoverflow.com/users/1019167/alexwien"}, "edited": false, "score": 0, "creation_date": 1456857687, "post_id": 35713549, "comment_id": 59136373, "body": "Thanks for the help all the same. :)"}], "tags": [], "owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "is_accepted": false, "score": 1, "last_activity_date": 1456798861, "creation_date": 1456798861, "answer_id": 35713549, "question_id": 35611569, "link": "https://stackoverflow.com/questions/35611569/integrate-fdlibm-library-to-ios/35713549#35713549", "title": "Integrate FDLIBM library to iOS", "body": "<p>Just in case this is helpful to other people in the future: we ended up renaming all the conflicting functions and resolve any duplicate declarations. Now it works pretty well although there are a lot of warnings. Later plan is to wrap this into a dynamic framework to consume. Maybe later we can even open source it. </p>\n"}], "owner": {"reputation": 818, "user_id": 117733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0238873d4cef3737f767ad1b5d2a0847?s=128&d=identicon&r=PG", "display_name": "Zhao", "link": "https://stackoverflow.com/users/117733/zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 35613534, "answer_count": 2, "score": 0, "last_activity_date": 1456798861, "creation_date": 1456343113, "last_edit_date": 1456345546, "question_id": 35611569, "link": "https://stackoverflow.com/questions/35611569/integrate-fdlibm-library-to-ios", "title": "Integrate FDLIBM library to iOS", "body": "<p>I am trying to integrate FDLIBM library (<a href=\"http://www.netlib.org/fdlibm/\" rel=\"nofollow\">http://www.netlib.org/fdlibm/</a>) into my Swift based (with some objc and c code too) iOS app. However, some of functions there are conflicting with <code>math.h</code> which is automatically included in iOS, i.e. <code>sin</code>, <code>cos</code>,<code>acos</code>, <code>asin</code>, <code>pow</code>, etc. So the project does not compile. I do need to use these functions in the FDLIBM. </p>\n\n<p>These are some of the functions defined in fdlibm.h (<a href=\"http://www.netlib.org/fdlibm/fdlibm.h\" rel=\"nofollow\">http://www.netlib.org/fdlibm/fdlibm.h</a>) which are duplicate to <code>math.h</code></p>\n\n<pre><code>/*\n * ANSI/POSIX\n */\nextern double acos __P((double));\nextern double asin __P((double));\nextern double atan __P((double));\nextern double atan2 __P((double, double));\nextern double cos __P((double));\nextern double sin __P((double));\nextern double tan __P((double));\n\nextern double cosh __P((double));\nextern double sinh __P((double));\nextern double tanh __P((double));\n\nextern double exp __P((double));\nextern double frexp __P((double, int *));\nextern double ldexp __P((double, int));\nextern double log __P((double));\nextern double log10 __P((double));\nextern double modf __P((double, double *));\n\nextern double pow __P((double, double));\nextern double sqrt __P((double));\n</code></pre>\n\n<p>Does anyone have a solution for this? Any advice and tips will be appreciated. Thanks.</p>\n\n<p><strong>Update:</strong>\nTo give more background about what I am doing, we are building a cross platform app (Android and iOS for now) using the same backend service. There are critical float point calculations we need to make sure the results are the same for both side. Based on our testing, the results of <code>sin()</code>, <code>cos()</code> and some other functions in <code>fdlimb</code> on Android is different from the results of using same functions in <code>math.h</code> in iOS. So I am trying to integrate <code>fdlibm</code> into iOS to see if we can get the same results. </p>\n\n<p>So if there is a way to solve the root problem, which makes the floating point calculation exactly the same for iOS and Android for these functions <code>pow()</code>, <code>sin()</code>, <code>cos()</code>, <code>asin()</code>, <code>acos()</code>, <code>atan2()</code>, I don't have to integrate <code>fdlibm.h</code></p>\n"}, {"tags": ["c", "malloc", "realloc"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1456341647, "post_id": 35611101, "comment_id": 58906332, "body": "Is this c++ or c, they are not the same."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1456341788, "post_id": 35611101, "comment_id": 58906416, "body": "Also please provide a minimal runable example and the line where your problem occurred. Finally, have you stepped through this code with a debugger and checked all your pointer dereferences to ensure you are not going out of bounds on any of these arrays?"}, {"owner": {"reputation": 232, "user_id": 3810906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/bfQ60.jpg?s=128&g=1", "display_name": "Husso", "link": "https://stackoverflow.com/users/3810906/husso"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1456341795, "post_id": 35611101, "comment_id": 58906422, "body": "Its in C, but for simplicity I&#39;ve declared &#39;i&#39; in the for loop which is a C++ practice."}, {"owner": {"reputation": 232, "user_id": 3810906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/bfQ60.jpg?s=128&g=1", "display_name": "Husso", "link": "https://stackoverflow.com/users/3810906/husso"}, "edited": false, "score": 0, "creation_date": 1456342027, "post_id": 35611101, "comment_id": 58906558, "body": "I&#39;m using visual studio c++, and the debugger is not telling me where the problem is, and there is no minimal runnable example. The code isn&#39;t working because of this bug."}, {"owner": {"reputation": 8138, "user_id": 821878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2vRIG.gif?s=128&g=1", "display_name": "Ryan Bemrose", "link": "https://stackoverflow.com/users/821878/ryan-bemrose"}, "edited": false, "score": 0, "creation_date": 1456343545, "post_id": 35611101, "comment_id": 58907451, "body": "@Hossam No, because you never assign the return value of <code>realloc()</code> (you just compare them to <code>NULL</code>).  Actually, after your <code>realloc</code> call, the arrays no longer point to valid memory, which corrupts the heap."}, {"owner": {"reputation": 232, "user_id": 3810906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/bfQ60.jpg?s=128&g=1", "display_name": "Husso", "link": "https://stackoverflow.com/users/3810906/husso"}, "reply_to_user": {"reputation": 8138, "user_id": 821878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2vRIG.gif?s=128&g=1", "display_name": "Ryan Bemrose", "link": "https://stackoverflow.com/users/821878/ryan-bemrose"}, "edited": false, "score": 0, "creation_date": 1456344317, "post_id": 35611101, "comment_id": 58907899, "body": "@RyanBemrose, thanks! Your advice worked!"}], "answers": [{"comments": [{"owner": {"reputation": 232, "user_id": 3810906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/bfQ60.jpg?s=128&g=1", "display_name": "Husso", "link": "https://stackoverflow.com/users/3810906/husso"}, "edited": false, "score": 0, "creation_date": 1456342186, "post_id": 35611220, "comment_id": 58906656, "body": "I allocate for only one int for L and R, but later I do realloc() more space as LSize and RSize increment."}, {"owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "reply_to_user": {"reputation": 232, "user_id": 3810906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/bfQ60.jpg?s=128&g=1", "display_name": "Husso", "link": "https://stackoverflow.com/users/3810906/husso"}, "edited": false, "score": 0, "creation_date": 1456343793, "post_id": 35611220, "comment_id": 58907592, "body": "@Hossam : Sorry, I just noticed. But there is an error - the result of <code>realloc</code> is not assigned back to <code>L</code> and <code>R</code>."}], "tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": false, "score": 2, "last_activity_date": 1456343738, "last_edit_date": 1456343738, "creation_date": 1456341959, "answer_id": 35611220, "question_id": 35611101, "link": "https://stackoverflow.com/questions/35611101/debug-assertion-failed-crtisvalidheappointerblock/35611220#35611220", "title": "Debug assertion failed _crtisValidHeapPointer(block)", "body": "<p>Well, there is allocation only for single <code>int</code> to both variables <code>L</code> and <code>R</code>. But later in the code you assign many integers as the <code>LSize</code> and <code>RSize</code> is incremented. Well, I see <code>realloc</code> is called but the result is not assigned back to <code>L</code> and <code>R</code> so this causes issues.</p>\n\n<p>Anyway the quicksort algorithm may very well work on the original array, there is no reason to allocate new temporary arrays for it.</p>\n"}, {"tags": [], "owner": {"reputation": 8138, "user_id": 821878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2vRIG.gif?s=128&g=1", "display_name": "Ryan Bemrose", "link": "https://stackoverflow.com/users/821878/ryan-bemrose"}, "is_accepted": true, "score": 2, "last_activity_date": 1456343976, "creation_date": 1456343976, "answer_id": 35611861, "question_id": 35611101, "link": "https://stackoverflow.com/questions/35611101/debug-assertion-failed-crtisvalidheappointerblock/35611861#35611861", "title": "Debug assertion failed _crtisValidHeapPointer(block)", "body": "<p>The problem is here:</p>\n\n<pre><code>if( ((int *)realloc(R, (sizeof(int) * (RSize + 2) ))) != NULL )\n    R[RSize++] = A[i];\n</code></pre>\n\n<p>The <code>realloc</code> function <em>returns</em> the new array pointer, which is compared to NULL inside the <code>if</code>, and then discarded.  Then the original (invalid) pointer is dereferenced, corrupting the heap.</p>\n\n<p>To fix, be sure to assign the result of <code>realloc</code> to the pointer.</p>\n\n<pre><code>if( (R = (int *)realloc(R, (sizeof(int) * (RSize + 2) ))) != NULL )\n</code></pre>\n\n<p>You should also include some error checking to abort the loop, in case the allocation fails, in the form of an <code>else</code> statement to this <code>if</code>.  As currently written, if <code>realloc</code> fails then the loop will continue to completion, skipping the array on each iteration, and then return a corrupted result.</p>\n"}], "owner": {"reputation": 232, "user_id": 3810906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/bfQ60.jpg?s=128&g=1", "display_name": "Husso", "link": "https://stackoverflow.com/users/3810906/husso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7291, "favorite_count": 1, "accepted_answer_id": 35611861, "answer_count": 2, "score": 0, "last_activity_date": 1456344807, "creation_date": 1456341540, "last_edit_date": 1456344807, "question_id": 35611101, "link": "https://stackoverflow.com/questions/35611101/debug-assertion-failed-crtisvalidheappointerblock", "title": "Debug assertion failed _crtisValidHeapPointer(block)", "body": "<p>I'm trying to implement quick sort in c/c++ and I keep getting this error, \"Debug assertion failed _crtisValidHeapPointer(block)\" anytime I run the code.</p>\n\n<p>My code is: </p>\n\n<pre><code>void QuickSort(int *A, int size) {\nif (size &lt; 2) return;\nint *L = NULL, *R = NULL, RSize = 0, LSize = 0;\n\nR = (int *)malloc(sizeof(int));\nL = (int *)malloc(sizeof(int));\n\nfor (int i = 0; i &lt; size; i++) {\n    if (A[size - 1] &lt;= A[i]) \n        if( ((int *)realloc(R, (sizeof(int) * (RSize + 2) ))) != NULL )\n            R[RSize++] = A[i];\n    else \n        if ( ((int *)realloc(L, (sizeof(int) * (LSize + 2) ))) != NULL )\n            L[LSize++] = A[i];\n}\n\n    QuickSort(L, LSize);\n    QuickSort(R, RSize);\n    Merge(A, L, R, LSize, RSize);\n    free(L);\n    free(R);\n    return;\n}\n</code></pre>\n\n<p>I know it has to do with the memory allocation of my arrays L and R, but I can't seem to figure out what the problem is exactly.</p>\n\n<p>EDIT: Solution found</p>\n\n<p>Code: </p>\n\n<pre><code>void QuickSort(int *A, int size) {\nif (size &lt; 2) return;\nint *L = NULL, *R = NULL, RSize = 0, LSize = 0;\n\nfor (int i = 0; i &lt; size; i++) {\n    if (A[size - 2] &lt; A[i]) {\n        if ((R = (int *)realloc(R, (sizeof(int) * (RSize + 1)))) != NULL) \n            R[RSize++] = A[i];\n    }\n    else {\n        if ((L = (int *)realloc(L, (sizeof(int) * (LSize + 1)))) != NULL) \n            L[LSize++] = A[i];\n    }\n}\n     QuickSort(L, LSize);\n     QuickSort(R, RSize);\n     Merge(A, L, R, LSize, RSize);\n     free(L);\n     free(R);\n     return;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 1, "creation_date": 1456341009, "post_id": 35610849, "comment_id": 58905957, "body": "<code>p</code> hasn&#39;t been declared. Aside from that, though, I recommend you read about <a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\">sequence points</a>"}, {"owner": {"reputation": 2151, "user_id": 2130104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0JKjv.jpg?s=128&g=1", "display_name": "Mr. Perfectionist", "link": "https://stackoverflow.com/users/2130104/mr-perfectionist"}, "edited": false, "score": 0, "creation_date": 1456341019, "post_id": 35610849, "comment_id": 58905964, "body": "May be your expression is not correct"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456343876, "post_id": 35610849, "comment_id": 58907635, "body": "Nobody cares because of the UB and the general badness and pointlessness of any such code outside homework."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1456344084, "last_edit_date": 1456344084, "creation_date": 1456342208, "answer_id": 35611300, "question_id": 35610849, "link": "https://stackoverflow.com/questions/35610849/how-to-solve-this-expression-taking-in-mind-precedence-and-associativity/35611300#35611300", "title": "how to solve this expression taking in mind precedence and associativity?", "body": "<p>You're reading and writing the variable <code>p</code> multiple times in the same expression without a <a href=\"https://en.wikipedia.org/wiki/Sequence_point\" rel=\"nofollow\">sequence point</a>, which means the compiler is free to evaluate the two sub-expressions in any order.</p>\n\n<p>This results in <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>, meaning the program's behavior is unpredictable.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1456343977, "creation_date": 1456343977, "answer_id": 35611862, "question_id": 35610849, "link": "https://stackoverflow.com/questions/35610849/how-to-solve-this-expression-taking-in-mind-precedence-and-associativity/35611862#35611862", "title": "how to solve this expression taking in mind precedence and associativity?", "body": "<p>Is this a code fragment that actually came up in your work, or is it an assignment someone gave you?</p>\n\n<p>The expression contains two parts:</p>\n\n<pre><code>p=s     /* in this part p's value is assigned */\n\np==s    /* in this part p's value is used */\n</code></pre>\n\n<p>So before we can figure out what the value of the expression is, we have to figure out: does <code>p</code>'s value get set before or after it gets used?</p>\n\n<p>And the answer is -- I'm going to shout a little here -- <strong>WE DO NOT KNOW</strong>.</p>\n\n<p>Let me say that again.  We simply do not know whether <code>p</code>'s value gets set before or after it gets used.  So we have no way of predicting what value this expression will evaluate to.</p>\n\n<p>Now, you might think that precedence will tell you whether <code>p</code> gets set before or after it gets used.  But it turns out that, no, in this case <em>precedence does not tell you whether <code>p</code> gets set before or after it gets used.</em></p>\n\n<p>You might think that associativity will tell you whether <code>p</code> gets set before or after it gets used.  But it turns out that, no, in this case <em>associativity does not tell you whether <code>p</code> gets set before or after it gets used, either.</em></p>\n\n<p>Finally, you might think that I'm wrong, that precedence and/or associativity have to be able to tell you what you need to know, that there has to be a way of figuring out what this expression does.  But it turns out that I'm right: <em>there is no way of figuring out what this expression does.</em></p>\n\n<p>You could compile it and try it, but that will only tell you how the compiler you're using today chooses to evaluate it.  I guarantee you that there's another compiler out there that will evaluate it differently.</p>\n\n<p>You might ask, which compiler is right?  And the answer is, they're both right (or at least, neither of them is wrong).  As far as the C language is concerned, this expression is <em>undefined</em>.  So there's no right answer, and your compiler isn't wrong no matter what it does.</p>\n\n<p>If this is code that came up in your work, please delete it right away, and figure out what you were really trying to do, and figure out some cleaner, well-defined way of expressing it.  And if this code is an assignment, your answer is simply: it's undefined.  (If your instructor believes this expression has a well-defined result, you're in the unfortunate position of having an instructor who doesn't know what he's talking about.)</p>\n"}], "owner": {"reputation": 1, "user_id": 5976395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b85019c16bedd2345338225736cc7d4?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dhawan", "link": "https://stackoverflow.com/users/5976395/sachin-dhawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1456344084, "creation_date": 1456340718, "last_edit_date": 1456342926, "question_id": 35610849, "link": "https://stackoverflow.com/questions/35610849/how-to-solve-this-expression-taking-in-mind-precedence-and-associativity", "title": "how to solve this expression taking in mind precedence and associativity?", "body": "<pre><code>int p=4, s=5;\nint m;\n\nm = (p=s) * (p==s);\nprintf(\"%d\",m);\n</code></pre>\n\n<p>How is this expression evaluated?</p>\n\n<p>What will be the value of <code>m</code>?</p>\n\n<p>How do parenthesis change the precedence of operators in this example?</p>\n\n<p>I am getting m=4 in Turbo C.</p>\n"}, {"tags": ["python", "c", "swig", "graphviz", "networkx"], "comments": [{"owner": {"reputation": 3562, "user_id": 2275418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I70aa.jpg?s=128&g=1", "display_name": "Markku K.", "link": "https://stackoverflow.com/users/2275418/markku-k"}, "edited": false, "score": 0, "creation_date": 1456417274, "post_id": 35610736, "comment_id": 58947046, "body": "Just a shot in the dark, have you tried casting your key to a string: <code>G.add_edge(x,y,key=str(dupedgeind))</code>?"}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "reply_to_user": {"reputation": 3562, "user_id": 2275418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I70aa.jpg?s=128&g=1", "display_name": "Markku K.", "link": "https://stackoverflow.com/users/2275418/markku-k"}, "edited": false, "score": 0, "creation_date": 1456418976, "post_id": 35610736, "comment_id": 58948394, "body": "@MarkkuK. Thanks. Problem persists though."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456816135, "post_id": 35610736, "comment_id": 59109339, "body": "How is this related to C?"}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "reply_to_user": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456822996, "post_id": 35610736, "comment_id": 59112568, "body": "@AshishAhuja Correct me if I&#39;m wrong, but the Graphviz agedge function is written in C (see the <a href=\"http://www.graphviz.org/pdf/cgraph.3.pdf\" rel=\"nofollow noreferrer\">link</a> in the qustion)"}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456823206, "post_id": 35610736, "comment_id": 59112692, "body": "^^ The link you&#39;ve given in the comment isn&#39;t getting loaded. All other sites are working."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456823381, "post_id": 35610736, "comment_id": 59112786, "body": "@atomh33ls, Can you just post the code of the <code>agedge</code> function in your question? Then I might be able to help, but not in the python part, as I don&#39;t know python."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456824794, "post_id": 35610736, "comment_id": 59113659, "body": "@atomh33ls, Thanks, but just now the page also got loaded. I could not find the code of the function, do you have it? Right now you&#39;ve posted the <code>declaration</code>. I mean that <code>agedge (what comes here)</code>"}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "reply_to_user": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456825192, "post_id": 35610736, "comment_id": 59113946, "body": "@AshishAhuja Think I&#39;ve found it at the <a href=\"https://github.com/ellson/graphviz/tree/master/lib\" rel=\"nofollow noreferrer\">Github source repository</a> - edited question."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456828797, "post_id": 35610736, "comment_id": 59116341, "body": "@atomh33ls, yes I see it. I&#39;ll get back to you when I get an answer."}, {"owner": {"reputation": 9694, "user_id": 3239417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QWrO4.png?s=128&g=1", "display_name": "vsminkov", "link": "https://stackoverflow.com/users/3239417/vsminkov"}, "edited": false, "score": 2, "creation_date": 1457047475, "post_id": 35610736, "comment_id": 59241492, "body": "@atomh33ls I believe that you have some weird environment problem. Your code works fine on my computer. I&#39;m using <code>networkx==1.11</code>, <code>pygraphviz==1.3.1</code> and graphviz <code>2.38.0</code>. Did you try running your code in virtual environment?"}, {"owner": {"reputation": 21014, "user_id": 497234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2fa0c08e61c5568e451b7c03579229?s=128&d=identicon&r=PG", "display_name": "Aric", "link": "https://stackoverflow.com/users/497234/aric"}, "edited": false, "score": 2, "creation_date": 1457053922, "post_id": 35610736, "comment_id": 59243817, "body": "I can also verify that the code works for me <code>networkx-1.11</code>, <code>pygraphviz-1.3.1</code> and <code>graphviz-2.38.0</code>.  My OS is Linux.  Perhaps something is miscompiled?"}, {"owner": {"reputation": 9694, "user_id": 3239417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QWrO4.png?s=128&g=1", "display_name": "vsminkov", "link": "https://stackoverflow.com/users/3239417/vsminkov"}, "edited": false, "score": 1, "creation_date": 1457121272, "post_id": 35610736, "comment_id": 59279236, "body": "@atomh33ls Also you can try to get pygraphviz and other libraries  for windows here <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygraphviz\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs/#pygraphviz</a>."}, {"owner": {"reputation": 1434, "user_id": 1988874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe769ae26b50048fb7a1220d682b0ad?s=128&d=identicon&r=PG", "display_name": "Cyrille Pontvieux", "link": "https://stackoverflow.com/users/1988874/cyrille-pontvieux"}, "edited": false, "score": 0, "creation_date": 1457203664, "post_id": 35610736, "comment_id": 59304122, "body": "Did you try to encode your string to bytes? <code>eh = gv.agedge(self.handle, uh, vh, key.encode(&#39;utf-8&#39;) , _Action.create)</code>"}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "reply_to_user": {"reputation": 1434, "user_id": 1988874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe769ae26b50048fb7a1220d682b0ad?s=128&d=identicon&r=PG", "display_name": "Cyrille Pontvieux", "link": "https://stackoverflow.com/users/1988874/cyrille-pontvieux"}, "edited": false, "score": 0, "creation_date": 1457343941, "post_id": 35610736, "comment_id": 59346891, "body": "@CyrillePontvieux Thanks, tried that but it did not work."}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "reply_to_user": {"reputation": 9694, "user_id": 3239417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QWrO4.png?s=128&g=1", "display_name": "vsminkov", "link": "https://stackoverflow.com/users/3239417/vsminkov"}, "edited": false, "score": 0, "creation_date": 1457432554, "post_id": 35610736, "comment_id": 59393430, "body": "@vsminkov Thanks, are you using windows? If so, 64 or 32 bit? I&#39;m not (yet) familiar with virtual environments..."}, {"owner": {"reputation": 21014, "user_id": 497234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2fa0c08e61c5568e451b7c03579229?s=128&d=identicon&r=PG", "display_name": "Aric", "link": "https://stackoverflow.com/users/497234/aric"}, "edited": false, "score": 1, "creation_date": 1458533307, "post_id": 35610736, "comment_id": 59885795, "body": "How about trying the &quot;official CPython distribution&quot; as recommended on <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygraphviz\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs/#pygraphviz</a> where you got the pygraphviz binaries from?"}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "reply_to_user": {"reputation": 21014, "user_id": 497234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2fa0c08e61c5568e451b7c03579229?s=128&d=identicon&r=PG", "display_name": "Aric", "link": "https://stackoverflow.com/users/497234/aric"}, "edited": false, "score": 0, "creation_date": 1458554849, "post_id": 35610736, "comment_id": 59895086, "body": "@Aric - thanks will do. However, I&#39;ve only just noticed the &quot;Chances are they do not work with custom Python distributions included with ... pythonxy...&quot; <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">note</a> :-O"}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "reply_to_user": {"reputation": 21014, "user_id": 497234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2fa0c08e61c5568e451b7c03579229?s=128&d=identicon&r=PG", "display_name": "Aric", "link": "https://stackoverflow.com/users/497234/aric"}, "edited": false, "score": 0, "creation_date": 1458554982, "post_id": 35610736, "comment_id": 59895165, "body": "@Aric - also I&#39;ve since switched to Ubuntu and it works fine. Will be a while before I check above (BIOS issues).."}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "reply_to_user": {"reputation": 21014, "user_id": 497234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2fa0c08e61c5568e451b7c03579229?s=128&d=identicon&r=PG", "display_name": "Aric", "link": "https://stackoverflow.com/users/497234/aric"}, "edited": false, "score": 0, "creation_date": 1462897081, "post_id": 35610736, "comment_id": 61826108, "body": "@Aric Finally tried with the &quot;official CPython distribution&quot;, not using Christoph Gohlke&#39;s binaries at all. I get the same error (on Windows)"}], "answers": [{"comments": [{"owner": {"reputation": 6426, "user_id": 4471715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5026f58744339680af12b163aad259?s=128&d=identicon&r=PG&f=1", "display_name": "A STEFANI", "link": "https://stackoverflow.com/users/4471715/a-stefani"}, "reply_to_user": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "edited": false, "score": 0, "creation_date": 1470330146, "post_id": 35898567, "comment_id": 64918246, "body": "Exact same error here: <a href=\"http://stackoverflow.com/questions/35007046/how-to-draw-parallel-edges-in-networkx-graphviz\" title=\"how to draw parallel edges in networkx graphviz\">stackoverflow.com/questions/35007046/&hellip;</a> look like to be definitly relative to a Microsoft Windows package installation/compilation issue."}, {"owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "edited": false, "score": 0, "creation_date": 1470650360, "post_id": 35898567, "comment_id": 65018366, "body": "Thanks - I also put that link in the question. Can you expand on what the issue might be?"}, {"owner": {"reputation": 6426, "user_id": 4471715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5026f58744339680af12b163aad259?s=128&d=identicon&r=PG&f=1", "display_name": "A STEFANI", "link": "https://stackoverflow.com/users/4471715/a-stefani"}, "reply_to_user": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "edited": false, "score": 0, "creation_date": 1470665457, "post_id": 35898567, "comment_id": 65028191, "body": "The issue looks like to be relative to variable &quot;type&quot; or variable &quot;type conversion&quot; error. Because if you put a real const string argument for key arg in your add_edge func there is no error."}], "tags": [], "owner": {"reputation": 6426, "user_id": 4471715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5026f58744339680af12b163aad259?s=128&d=identicon&r=PG&f=1", "display_name": "A STEFANI", "link": "https://stackoverflow.com/users/4471715/a-stefani"}, "is_accepted": false, "score": 1, "last_activity_date": 1470673090, "last_edit_date": 1470673090, "creation_date": 1457544642, "answer_id": 35898567, "question_id": 35610736, "link": "https://stackoverflow.com/questions/35610736/passing-a-string-to-agedge-in-agraph-py-issue-with-networkx-and-pygraphviz/35898567#35898567", "title": "Passing a string to agedge in agraph.py. Issue with networkx and pygraphviz", "body": "<p>Try changing the variable name from \"key\" to something else like \"temp_key\".  I mean that it is possible that you (or any previously imported module) has declared a non-string type \"key\" variable before...? </p>\n\n<p>Apparently if running :</p>\n\n<pre><code>eh = gv.agedge(self.handle, uh, vh, key , _Action.create)\n</code></pre>\n\n<p>fails but running:</p>\n\n<pre><code>eh = gv.agedge(self.handle, uh, vh, \"key\" , _Action.create)\n</code></pre>\n\n<p>give you no issue, it could only be relative to the \"key\" variable type.. did you try this: </p>\n\n<pre><code>eh = gv.agedge(self.handle, uh, vh, str(key) , _Action.create)\n</code></pre>\n\n<p>or\n<code>eh = gv.agedge(self.handle, uh, vh, unicode(key) , _Action.create)</code></p>\n\n<p>Integrate str()/unicode() in your orginal code give:</p>\n\n<pre><code>import networkx as nx\nG=nx.MultiGraph()\nfromnodes=[0,0,1,1,1,1,1,2,3,4,5,5,5,7,8,9,10]\ntonodes=[1,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]\ndupedgeind=0\nfor x,y in zip(fromnodes,tonodes):\n    if G.has_edge(x,y):\n        dupedgeind=dupedgeind+1\n        G.add_edge(x,y,key=str(dupedgeind))\n        #G.add_edge(x,y,key=unicode(dupedgeind))\n    else:\n        dupedgeind=0\n        G.add_edge(x,y,key=str(dupedgeind))\n        #G.add_edge(x,y,key=unicode(dupedgeind))\n</code></pre>\n\n<p>both (str &amp; unicode version) works fine on Linux.</p>\n\n<p>Best regards</p>\n"}], "owner": {"reputation": 22862, "user_id": 1461850, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7d7a8cd7ff08bbae37ace18cfa057c5b?s=128&d=identicon&r=PG", "display_name": "atomh33ls", "link": "https://stackoverflow.com/users/1461850/atomh33ls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1778, "favorite_count": 7, "answer_count": 1, "score": 29, "last_activity_date": 1496763320, "creation_date": 1456340405, "last_edit_date": 1495541376, "question_id": 35610736, "link": "https://stackoverflow.com/questions/35610736/passing-a-string-to-agedge-in-agraph-py-issue-with-networkx-and-pygraphviz", "title": "Passing a string to agedge in agraph.py. Issue with networkx and pygraphviz", "body": "<p>Given this initial graph:</p>\n\n<pre><code>import networkx as nx\nG=nx.MultiGraph()\nfromnodes=[0,0,1,1,1,1,1,2,3,4,5,5,5,7,8,9,10]\ntonodes=[1,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]\ndupedgeind=0\nfor x,y in zip(fromnodes,tonodes):\n    if G.has_edge(x,y):\n        dupedgeind=dupedgeind+1\n        G.add_edge(x,y,key=dupedgeind)\n    else:\n        dupedgeind=0\n        G.add_edge(x,y,key=dupedgeind)\n</code></pre>\n\n<p>Can anyone recreate this error?</p>\n\n<pre><code>pos=nx.nx_agraph.pygraphviz_layout(G,prog='sfdp')\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python27\\lib\\site-packages\\networkx\\drawing\\nx_agraph.py\", line 262, in pygraphviz_layout\n    A=to_agraph(G)\n  File \"C:\\Python27\\lib\\site-packages\\networkx\\drawing\\nx_agraph.py\", line 155, in to_agraph\n    A.add_edge(u,v,key=str(key),**str_edgedata)\n  File \"C:\\Python27\\lib\\site-packages\\pygraphviz\\agraph.py\", line 484, in add_edge\n    eh = gv.agedge(self.handle, uh, vh, key, _Action.find)\nKeyError: 'agedge: no key'\n</code></pre>\n\n<p>The problem has something to do with the call to graphviz's agedge function, it seems to not like the format of the <code>key</code> parameter; when I change (line 480 of <code>agraph.py</code>):</p>\n\n<pre><code>...\n    eh = gv.agedge(self.handle, uh, vh, key , _Action.create)\n...\n</code></pre>\n\n<p>to</p>\n\n<pre><code>...\n    eh = gv.agedge(self.handle, uh, vh, \"a_string\" , _Action.create)\n...\n</code></pre>\n\n<p>it no longer fails (but loses the key labels).</p>\n\n<p><strong>Is there an obvious way to fix this</strong> (so that <code>key</code> parameter values are retained)<strong>?</strong> - Nothing I try seems to work.</p>\n\n<p><strong>What are the most sensible next debugging steps?</strong></p>\n\n<hr>\n\n<p>From <a href=\"http://www.graphviz.org/pdf/cgraph.3.pdf\" rel=\"nofollow noreferrer\">here</a>, it appears that the <code>c</code> agedge function (which I can't see as it's in a .pyd binary) has the following format:</p>\n\n<pre><code>*agedge(Agraph_t *g, Agnode_t *t, Agnode_t *h, char *name, int createflag)\n</code></pre>\n\n<p>where the <code>char *name</code> is the key.</p>\n\n<p>I cannot work out why it won't accept a <code>str</code> dtype as in the initial error.</p>\n\n<hr>\n\n<p>Note versions:</p>\n\n<p>networkx - 1.11,\npygraphviz - 1.3.1\n (installed from <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygraphviz\" rel=\"nofollow noreferrer\">http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygraphviz</a>)\nPython 2.7 (32bit - isntalled via python(x,y)) on Windows 7 (64-bit), GraphViz - 2.38 </p>\n\n<p>I have also seen this issue crop up in these questions:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/34979125/hierarchical-graph-with-parallel-edges\">Hierarchical graph with parallel edges</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/35007046/how-to-draw-parallel-edges-in-networkx-graphviz\">How to draw parallel edges in Networkx / Graphviz</a></p></li>\n</ul>\n\n<hr>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>I have tried adjusting the <code>key</code> input to the agedge function to a number of variants of char arrays (e.g. <code>(ct.c_char_p * len(key))(key)</code> (ct is ctypes module) based on <a href=\"https://stackoverflow.com/a/16700183/1461850\">this</a>). This changes the error to:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python27\\lib\\site-packages\\networkx\\drawing\\nx_agraph.py\", line 262, in pygraphviz_layout\n    A=to_agraph(G)\n  File \"C:\\Python27\\lib\\site-packages\\networkx\\drawing\\nx_agraph.py\", line 155, in to_agraph\n    A.add_edge(u,v,str(key),**str_edgedata)\n  File \"C:\\Python27\\lib\\site-packages\\pygraphviz\\agraph.py\", line 482, in add_edge\n    eh = gv.agedge(self.handle, uh, vh, (ct.c_char_p * len(key))(key), _Action.create)\nTypeError: in method 'agedge', argument 4 of type 'char *'\n</code></pre>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>I can get it to run (but not return a multigraph) if I do this:</p>\n\n<p>In <code>agraph.py</code> replacing the line</p>\n\n<pre><code>eh = gv.agedge(self.handle, uh, vh, key , _Action.create)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>    try:\n        # new\n        if key==0:\n            eh = gv.agedge(self.handle, uh, vh, str(0), _Action.create)\n        else:\n            eh = gv.agedge(self.handle, uh, vh, str(1), _Action.create)\n</code></pre>\n\n<p>I don't know why just casting to a string <code>str(key)</code> does not work.</p>\n\n<p><strong>UPDATE 3 - EDIT with the function</strong></p>\n\n<p>Found the function here - <a href=\"https://github.com/ellson/graphviz/blob/master/lib/cgraph/edge.c\" rel=\"nofollow noreferrer\">https://github.com/ellson/graphviz/blob/master/lib/cgraph/edge.c</a></p>\n\n<pre><code>Agedge_t *agedge(Agraph_t * g, Agnode_t * t, Agnode_t * h, char *name,\nint cflag)\n{\n    Agedge_t *e;\n    IDTYPE id;\n    int have_id;\n    have_id = agmapnametoid(g, AGEDGE, name, &amp;id, FALSE);\n    if (have_id || ((name == NILstr) &amp;&amp; (NOT(cflag) || agisstrict(g)))) {\n        /* probe for pre-existing edge */\n        Agtag_t key;\n        key = Tag;\n        if (have_id) {\n            key.id = id;\n            key.objtype = AGEDGE;\n        } else {\n            key.id = key.objtype = 0;\n        }\n        /* might already exist locally */\n        e = agfindedge_by_key(g, t, h, key);\n        if ((e == NILedge) &amp;&amp; agisundirected(g))\n            e = agfindedge_by_key(g, h, t, key);\n        if (e)\n            return e;\n        if (cflag) {\n            e = agfindedge_by_key(agroot(g), t, h, key);\n            if ((e == NILedge) &amp;&amp; agisundirected(g))\n                e = agfindedge_by_key(agroot(g), h, t, key);\n            if (e) {\n                subedge(g,e);\n                return e;\n            }\n        }\n}\n</code></pre>\n\n<p><strong>UPDATE 4:</strong></p>\n\n<p>The source of the error is within <a href=\"https://github.com/pygraphviz/pygraphviz/blob/245fc9507a9e40f8c35762dd5073e42edb0388d3/pygraphviz/graphviz_wrap.c\" rel=\"nofollow noreferrer\">this</a> pygraphviz file, graphviz_wrap.c, line 3921:</p>\n\n<pre><code>SWIGINTERN PyObject *_wrap_agedge(PyObject *SWIGUNUSEDPARM(self), PyObject *args) {\n    PyObject *resultobj = 0;\n    Agraph_t *arg1 = (Agraph_t *) 0 ;\n    Agnode_t *arg2 = (Agnode_t *) 0 ;\n    Agnode_t *arg3 = (Agnode_t *) 0 ;\n    char *arg4 = (char *) 0 ;\n    int arg5 ;\n    void *argp1 = 0 ;\n    int res1 = 0 ;\n    void *argp2 = 0 ;\n    int res2 = 0 ;\n    void *argp3 = 0 ;\n    int res3 = 0 ;\n    int res4 ;\n    char *buf4 = 0 ;\n    int alloc4 = 0 ;\n    int val5 ;\n    int ecode5 = 0 ;\n    PyObject * obj0 = 0 ;\n    PyObject * obj1 = 0 ;\n    PyObject * obj2 = 0 ;\n    PyObject * obj3 = 0 ;\n    PyObject * obj4 = 0 ;\n    Agedge_t *result = 0 ;\n\n    if (!PyArg_ParseTuple(args, char*)\"OOOOO:agedge\",&amp;obj0,&amp;obj1,&amp;obj2,&amp;obj3,&amp;obj4)) SWIG_fail; \n    res1 = SWIG_ConvertPtr(obj0, &amp;argp1,SWIGTYPE_p_Agraph_t, 0 | 0 );\n    if (!SWIG_IsOK(res1)) {\n        SWIG_exception_fail(SWIG_ArgError(res1), \"in method '\"\"agedge\" \"', argument \" \"1\"\" of type '\" \"Agraph_t *\"\"'\");\n    }\n    arg1 = (Agraph_t *)(argp1);\n    res2 = SWIG_ConvertPtr(obj1, &amp;argp2,SWIGTYPE_p_Agnode_t, 0 | 0 );\n    if (!SWIG_IsOK(res2)) {\n        SWIG_exception_fail(SWIG_ArgError(res2), \"in method '\" \"agedge\" \"', argument \" \"2\"\" of type '\" \"Agnode_t *\"\"'\");\n    }\n    arg2 = (Agnode_t *)(argp2);\n    res3 = SWIG_ConvertPtr(obj2, &amp;argp3,SWIGTYPE_p_Agnode_t, 0 | 0 );\n    if (!SWIG_IsOK(res3)) {\n        SWIG_exception_fail(SWIG_ArgError(res3), \"in method '\" \"agedge\" \"', argument \" \"3\"\" of type '\" \"Agnode_t *\"\"'\");\n    }\n    arg3 = (Agnode_t *)(argp3);\n    res4 = SWIG_AsCharPtrAndSize(obj3, &amp;buf4, NULL, &amp;alloc4);\n    if (!SWIG_IsOK(res4)) {\n        SWIG_exception_fail(SWIG_ArgError(res4), \"in method '\" \"agedge\" \"', argument \" \"4\"\" of type '\" \"char *\"\"'\");\n    }\n    arg4 = (char *)(buf4);\n    ecode5 = SWIG_AsVal_int(obj4, &amp;val5);\n    if (!SWIG_IsOK(ecode5)) {\n        SWIG_exception_fail(SWIG_ArgError(ecode5), \"in method '\" \"agedge\" \"', argument \" \"5\"\" of type '\" \"int\"\"'\");\n    }\n    arg5 = (int)(val5);\n    {\n        result = (Agedge_t *)agedge(arg1,arg2,arg3,arg4,arg5);\n        if (!result) {\n            PyErr_SetString(PyExc_KeyError,\"agedge: no key\");\n            return NULL;\n        }\n    }\n    resultobj = SWIG_NewPointerObj(SWIG_as_voidptr(result), SWIGTYPE_p_Agedge_t, 0 | 0 );\n    if (alloc4 == SWIG_NEWOBJ) free((char*)buf4);\n    return resultobj;\n    fail:\n        if (alloc4 == SWIG_NEWOBJ) free((char*)buf4);\n        return NULL;\n}\n</code></pre>\n\n<p>Or, it's within <a href=\"https://github.com/pygraphviz/pygraphviz/blob/245fc9507a9e40f8c35762dd5073e42edb0388d3/pygraphviz/graphviz.i\" rel=\"nofollow noreferrer\">this one</a>, graphviz.i, line 68. </p>\n\n<p>Either way, it seems like the error string \"agedge: no key\" is returned if <code>agedge</code> fails for any reason... Perhaps it's something to do with SWIG.</p>\n"}, {"tags": ["c", "return"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456339816, "post_id": 35610446, "comment_id": 58905267, "body": "Unreachable code will most likely be optimized away. But it is compiler dependent."}, {"owner": {"reputation": 37, "user_id": 5969992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b470bcdfdb747dfb9634bc0f97b42fbe?s=128&d=identicon&r=PG", "display_name": "Bhanu Prakash", "link": "https://stackoverflow.com/users/5969992/bhanu-prakash"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456339993, "post_id": 35610446, "comment_id": 58905381, "body": "Can you be more clear please? Eugene Sh."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456343979, "post_id": 35610446, "comment_id": 58907693, "body": "@BhanuPrakash No, yes, maybe."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5969992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b470bcdfdb747dfb9634bc0f97b42fbe?s=128&d=identicon&r=PG", "display_name": "Bhanu Prakash", "link": "https://stackoverflow.com/users/5969992/bhanu-prakash"}, "edited": false, "score": 0, "creation_date": 1456340195, "post_id": 35610582, "comment_id": 58905507, "body": "Thank you Vlad. I was just curious. Should have tried putting a bad code below it to test..."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1456339919, "creation_date": 1456339919, "answer_id": 35610582, "question_id": 35610446, "link": "https://stackoverflow.com/questions/35610446/does-the-return-keyword-in-c-stop-the-compilation-of-next-statement-or-just-the/35610582#35610582", "title": "Does the return keyword in C stop the compilation of next statement or just the execution?", "body": "<p>Yes the code is compiled and the compiler can issue an error if the code is invalid.\nAlso it can issue a warning saying that the code after the return statement will not be executed.</p>\n\n<p>The compiler is allowed not to generate object code for such unreachable code.</p>\n"}], "owner": {"reputation": 37, "user_id": 5969992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b470bcdfdb747dfb9634bc0f97b42fbe?s=128&d=identicon&r=PG", "display_name": "Bhanu Prakash", "link": "https://stackoverflow.com/users/5969992/bhanu-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 35610582, "answer_count": 1, "score": 0, "last_activity_date": 1456339919, "creation_date": 1456339511, "question_id": 35610446, "link": "https://stackoverflow.com/questions/35610446/does-the-return-keyword-in-c-stop-the-compilation-of-next-statement-or-just-the", "title": "Does the return keyword in C stop the compilation of next statement or just the execution?", "body": "<p>Here is my code in C Language:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n\n    printf(\"This line is written before return keyword.\");\n    return 0;   //terminator\n\n    printf(\"This line is written after return keyword.\"); //does not display\n}\n</code></pre>\n\n<p>I know that anything written after a return keyword in a function will not be executed. My question is, \"Does the code after return keyword be compiled in the first place?\"</p>\n\n<p>Please clarify. Thanks.</p>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1456338007, "post_id": 35609956, "comment_id": 58904161, "body": "&quot;<i>something</i> like the following&quot; - <i>sigh</i>. chasing ghosts again?"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4645272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3d5d53a807bb2bbd2b0d160e78c851?s=128&d=identicon&r=PG", "display_name": "Matt Steadman", "link": "https://stackoverflow.com/users/4645272/matt-steadman"}, "edited": false, "score": 0, "creation_date": 1456338384, "post_id": 35610084, "comment_id": 58904371, "body": "This isn&#39;t code that I would ever write (for that same reason). It&#39;s code that I encountered that I&#39;m trying to understand."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456338670, "post_id": 35610084, "comment_id": 58904554, "body": "Trash that site and it&#39;s examples. The only value of it is it&#39;s &quot;coding ground&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456339555, "post_id": 35610084, "comment_id": 58905097, "body": "&quot;can&#39;t cast string to unsigned long&quot;.  Disagree as the C spec says &quot;Any pointer type may be converted to an integer type&quot;  &#167;6.3.2.3 6.  It is unclear  what OP&#39;s over-all goal may be."}], "tags": [], "owner": {"reputation": 51, "user_id": 5969933, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XW3CVHhRgwo/AAAAAAAAAAI/AAAAAAAAAJY/pKtnBjq3LqQ/photo.jpg?sz=128", "display_name": "Patricio Sanchez Alvial", "link": "https://stackoverflow.com/users/5969933/patricio-sanchez-alvial"}, "is_accepted": false, "score": 1, "last_activity_date": 1456338305, "creation_date": 1456338305, "answer_id": 35610084, "question_id": 35609956, "link": "https://stackoverflow.com/questions/35609956/casting-a-string-to-an-unsigned-long-int/35610084#35610084", "title": "Casting a String to an unsigned long int", "body": "<p>Yo can't cast string to unsigned long, you have to use a function like strtoul()</p>\n\n<p><a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_strtoul.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/c_standard_library/c_function_strtoul.htm</a></p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 4645272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3d5d53a807bb2bbd2b0d160e78c851?s=128&d=identicon&r=PG", "display_name": "Matt Steadman", "link": "https://stackoverflow.com/users/4645272/matt-steadman"}, "edited": false, "score": 0, "creation_date": 1456338804, "post_id": 35610131, "comment_id": 58904629, "body": "Thanks! Would I be able to read the value of path from outside the init function?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 43, "user_id": 4645272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3d5d53a807bb2bbd2b0d160e78c851?s=128&d=identicon&r=PG", "display_name": "Matt Steadman", "link": "https://stackoverflow.com/users/4645272/matt-steadman"}, "edited": false, "score": 0, "creation_date": 1456338824, "post_id": 35610131, "comment_id": 58904640, "body": "@MattSteadman Yes. The value assigned to a variable stays as long as it&#39;s not reassigned."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456338839, "post_id": 35610131, "comment_id": 58904650, "body": "Yes, as it is statically allocated."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456339164, "post_id": 35610131, "comment_id": 58904863, "body": "Detail: &quot;string literal is always ... allocated in a read-only memory&quot;  --&gt; It might be read-only memory, it might not.  IAC, code should not attempt to write it - that is UB."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456339247, "post_id": 35610131, "comment_id": 58904912, "body": "@chux Yeah, it <i>technically</i> might not restrict writing to it. But a write attempt will give an undefined behavior."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 2, "last_activity_date": 1456338477, "creation_date": 1456338477, "answer_id": 35610131, "question_id": 35609956, "link": "https://stackoverflow.com/questions/35609956/casting-a-string-to-an-unsigned-long-int/35610131#35610131", "title": "Casting a String to an unsigned long int", "body": "<p>1) Yes, it is a pointer value cast to <code>unsigned long</code><br>\n2) The string literal is always statically allocated in a read-only memory<br>\n3) You can refer to the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.5\" rel=\"nofollow\">Section 6.4.5 (String Literals)</a></p>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1529365537, "creation_date": 1529365537, "answer_id": 50918840, "question_id": 35609956, "link": "https://stackoverflow.com/questions/35609956/casting-a-string-to-an-unsigned-long-int/50918840#50918840", "title": "Casting a String to an unsigned long int", "body": "<p>This code attempts to convert the address of the string to an <code>unsigned long</code> variable. It would fail on a LLP64 implementation, where a pointer is 64 bits wide and an <code>unsigned long</code> is only 32 bits wide, or any other compiler where a pointer is wider than a <code>long</code>.</p>\n\n<p>The completely portable version that follows the standard to the letter would be <code>const uintptr_t path = (uintptr_t)(void*)\"somevariable\";</code>.  A <code>uintptr_t</code> (defined in <code>&lt;stdint.h&gt;</code>) is guaranteed to be able to store the bits of any <code>void*</code>, and any kind of pointer is guaranteed to have a conversion to <code>void*</code>.  This would still have several problems.  For example, two identical strings can have different addresses.</p>\n\n<p>Without more context, we can't tell what this is meant to accomplish.</p>\n"}], "owner": {"reputation": 43, "user_id": 4645272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3d5d53a807bb2bbd2b0d160e78c851?s=128&d=identicon&r=PG", "display_name": "Matt Steadman", "link": "https://stackoverflow.com/users/4645272/matt-steadman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 35610131, "answer_count": 3, "score": -2, "last_activity_date": 1529365537, "creation_date": 1456337886, "last_edit_date": 1529362009, "question_id": 35609956, "link": "https://stackoverflow.com/questions/35609956/casting-a-string-to-an-unsigned-long-int", "title": "Casting a String to an unsigned long int", "body": "<p>I encountered a bit of C code that does something like the following. Just wondering if someone could tell me exactly what's going on in this code, because I've never really encountered anything like this before. The line I care about is the one where path is given a value </p>\n\n<pre><code>int main(void)\n{\n    unsigned long path;\n\n    //...\n\n    path = (unsigned long) \"somevariable\";\n\n\n    return 0;\n}\n</code></pre>\n\n<p>I tried searching around to figure this out, but I couldn't find anything that helped. Just wondering if someone could clarify what's going on. In particular, I'm wondering:</p>\n\n<ol>\n<li>What is assigned to path? Is it a char * cast to an unsigned long?</li>\n<li>If path is the address of the string \"somevariable\", then what is the scope of the string \"somevariable\"? Does it have scope local to the function init or does it have the same scope as path? And how is it allocated (automatic vs dynamic)?</li>\n<li>If someone knows the section of the c standard that can be referred to to understand this, this would also be appreciated.</li>\n</ol>\n"}, {"tags": ["c", "struct", "linked-list", "declaration", "singly-linked-list"], "comments": [{"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "edited": false, "score": 1, "creation_date": 1456414137, "post_id": 35609708, "comment_id": 58944482, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/35607042/dereferencing-pointer-to-incomplete-type-error-when-using-typedef-struct-in-c\">dereferencing pointer to incomplete type error when using typedef struct in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5976090, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154100373083394/picture?type=large", "display_name": "Vishal Barkakati", "link": "https://stackoverflow.com/users/5976090/vishal-barkakati"}, "edited": false, "score": 0, "creation_date": 1456338827, "post_id": 35610126, "comment_id": 58904643, "body": "thanxx mate.. it worked.."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1, "user_id": 5976090, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154100373083394/picture?type=large", "display_name": "Vishal Barkakati", "link": "https://stackoverflow.com/users/5976090/vishal-barkakati"}, "edited": false, "score": 0, "creation_date": 1456338890, "post_id": 35610126, "comment_id": 58904690, "body": "@VishalBarkakati No at all. We beginners should help each other.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1456339616, "last_edit_date": 1456339616, "creation_date": 1456338464, "answer_id": 35610126, "question_id": 35609708, "link": "https://stackoverflow.com/questions/35609708/linked-list-using-c-for-insertion-of-a-node-at-nth-position/35610126#35610126", "title": "Linked list using C for insertion of a node at nth position", "body": "<p>You omitted tag name node in the structure definition</p>\n\n<pre><code>struct {\nint data;\nstruct node* next;\n};\n</code></pre>\n\n<p>Write instead</p>\n\n<pre><code>struct node {\n       ^^^^ \nint data;\nstruct node* next;\n};\n</code></pre>\n\n<p>Take into account that by the analogy with arrays it is better when positions in the list start from 0.</p>\n\n<p>Also function main without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>and function print should be declared like</p>\n\n<pre><code>void print( void );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5976090, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154100373083394/picture?type=large", "display_name": "Vishal Barkakati", "link": "https://stackoverflow.com/users/5976090/vishal-barkakati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1456658208, "answer_count": 1, "score": -3, "last_activity_date": 1456386856, "creation_date": 1456337143, "last_edit_date": 1456386856, "question_id": 35609708, "link": "https://stackoverflow.com/questions/35609708/linked-list-using-c-for-insertion-of-a-node-at-nth-position", "closed_reason": "Not suitable for this site", "title": "Linked list using C for insertion of a node at nth position", "body": "<p>I have written this code using C and i am a new to programming world so please help me regarding my error. I am getting dereferencing pointer to incomplete type. what are the changes I need to make to run this code?</p>\n\n<pre><code>enter code here\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nstruct {\nint data;\nstruct node* next;\n};\nstruct node* head;\n\nvoid Insert(int data, int n)\n{\nint i;\nstruct node* temp1, *temp2;\ntemp1 = (struct node*)malloc(sizeof(struct node));\ntemp1-&gt;data = data;\ntemp1-&gt;next = NULL;\nif(n==1)\n    {\n        temp1-&gt;next = head;\n        head = temp1;\n        return;\n    }\n\n temp2 = head;\n  for(i=0; i&lt;n-2; i++)\n  {\n      temp2 = temp2-&gt;next;\n  }\n  temp1-&gt;next = temp2-&gt;next;\n  temp2-&gt;next = temp1;\n\n}\n\nvoid print()\n{\nstruct node* temp = head;\nwhile(temp != NULL)\n{\n    printf(\"%d\", temp-&gt;data);\n    temp = temp-&gt;next;\n}\nprint(\"\\n\");\n}\n\nint main()\n{\nhead = NULL;\nInsert(2,1);\nInsert(3,2);\nInsert(4,1);\nInsert(5,2);\nInsert(1,3);\nPrint();\n}\n</code></pre>\n"}, {"tags": ["c", "file", "lowercase"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456337210, "post_id": 35609664, "comment_id": 58903715, "body": "&#39;i cant seem find anywhere how to do it&#39; - really?  Please post what you have done so far to look, eg. your Google search string/s."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1456337257, "post_id": 35609664, "comment_id": 58903742, "body": "Read and write char by char. Forget strings."}, {"owner": {"reputation": 2055, "user_id": 4323812, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uwROLNyNzEM/AAAAAAAAAAI/AAAAAAAAAEc/tHUt9EJ_qDw/photo.jpg?sz=128", "display_name": "Aaron Critchley", "link": "https://stackoverflow.com/users/4323812/aaron-critchley"}, "edited": false, "score": 1, "creation_date": 1456337346, "post_id": 35609664, "comment_id": 58903798, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6810259/best-way-to-convert-whole-file-to-lowercase-in-c\">Best way to convert whole file to lowercase in C</a>"}, {"owner": {"reputation": 33, "user_id": 5619403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b8b137909fc961a090a412a85733a88?s=128&d=identicon&r=PG&f=1", "display_name": "deathskiller", "link": "https://stackoverflow.com/users/5619403/deathskiller"}, "edited": false, "score": 0, "creation_date": 1456337452, "post_id": 35609664, "comment_id": 58903859, "body": "edited added what i have been able to find"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1456337465, "post_id": 35609664, "comment_id": 58903867, "body": "&#39;while (a != EOF);&#39; too late:("}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1456338331, "post_id": 35609664, "comment_id": 58904343, "body": "<code>char a;</code> --&gt; <code>int a;</code> please RTM."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1456338528, "post_id": 35610082, "comment_id": 58904468, "body": "Also, <code>tolower</code> and many other library functions that you might imagine would take and/or return a <code>char</code> type, use <code>int</code> type."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1456338292, "creation_date": 1456338292, "answer_id": 35610082, "question_id": 35609664, "link": "https://stackoverflow.com/questions/35609664/converting-all-strings-in-a-txt-file-to-lowercase-in-c/35610082#35610082", "title": "Converting all strings in a txt file to lowercase in c", "body": "<p>When you read input from a file, you should always check whether you get valid input before proceeding to use it. In your case, you get input in the line.</p>\n\n<pre><code>a = fgetc(fp1);\n</code></pre>\n\n<p>You need to check whether <code>a</code> is valid input before proceeding to use it. </p>\n\n<pre><code>if ( a != EOF )\n{\n   a = tolower(a);\n   fputc(a, fp2);\n}\n</code></pre>\n\n<p>Another thing to update. Don't use</p>\n\n<pre><code>char c;\n</code></pre>\n\n<p>Use</p>\n\n<pre><code>int c; \n</code></pre>\n\n<p>instead.</p>\n\n<p><code>char</code> type can be a signed type or unsigned type on your platform. If it is an unsigned type, it will never have a negative value. Hence, it will never equal <code>EOF</code>, which is <code>-1</code> often, which will lead to an infinite loop.</p>\n\n<p>If you lookup the documentation of <code>fgetc</code>, you will notice that its return type is <code>int</code>, not <code>char</code>.</p>\n\n<p>Your program can be updated to something like:</p>\n\n<pre><code>void main() {\n   FILE *fp1, *fp2;\n   int a;\n\n   // Add rest of your code\n   // ...\n\n   do\n   {\n      a = fgetc(fp1);\n      if ( a != EOF )\n      {\n         a = tolower(a);\n         fputc(a, fp2);\n      }\n   } while (a != EOF);\n\n   // Add rest of your code\n   // ...\n}\n</code></pre>\n\n<p>The <code>do-while</code> loop can be simplified to:</p>\n\n<pre><code>   while ( (a = fgetc(fp1)) != EOF )\n   {\n      a = tolower(a);\n      fputc(a, fp2);\n   }\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5619403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b8b137909fc961a090a412a85733a88?s=128&d=identicon&r=PG&f=1", "display_name": "deathskiller", "link": "https://stackoverflow.com/users/5619403/deathskiller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1251, "favorite_count": 0, "closed_date": 1456340439, "accepted_answer_id": 35610082, "answer_count": 1, "score": -2, "last_activity_date": 1456338292, "creation_date": 1456336967, "last_edit_date": 1456337406, "question_id": 35609664, "link": "https://stackoverflow.com/questions/35609664/converting-all-strings-in-a-txt-file-to-lowercase-in-c", "closed_reason": "Needs more focus", "title": "Converting all strings in a txt file to lowercase in c", "body": "<p>I am assigned to convert all strings to lowercase in a txt file and then output it in a new txt file but i cant seem find anywhere how to do it. Any help would be very appriciated! Thank you This is what i have till now but there is the y at the end so im thinking if there is a better way to do it or if i can remove the y with the two dots on top..</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;process.h&gt;\n\nvoid main() {\n   FILE *fp1, *fp2;\n   char a;\n\n   fp1 = fopen(\"test.txt\", \"r\");\n   if (fp1 == NULL) \n   {\n      puts(\"cannot open this file\");\n      exit(1);\n   }\n\n   fp2 = fopen(\"test1.txt\", \"w\");\n   if (fp2 == NULL) {\n      puts(\"Not able to open this file\");\n      fclose(fp1);\n      exit(1);\n   }\n\n   do\n   {\n      a = fgetc(fp1);\n      a = tolower(a);\n      fputc(a, fp2);\n   } while (a != EOF);\n\n   fcloseall();\n   getch();\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "performance", "sockets", "udp"], "comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1456337274, "post_id": 35609536, "comment_id": 58903747, "body": "Why count = 67?  Probably related to minimum ethernet packet size.  from WireShark: &quot;Ethernet packets with less than the minimum 64 bytes for an Ethernet packet (header + user data + FCS) are padded to 64 bytes, which means that if there&#39;s less than 64-(14+4) = 46 bytes of user data, extra padding data is added to the packet.&quot;"}, {"owner": {"reputation": 155, "user_id": 3212185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e975e7ce59b139131ac96f937faa8fa5?s=128&d=identicon&r=PG&f=1", "display_name": "Shaci", "link": "https://stackoverflow.com/users/3212185/shaci"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1456393254, "post_id": 35609536, "comment_id": 58928994, "body": "Maybee when DGLEN = 10 bytes, padding begins to be applied and this leads to 67 datagrams on receive side? I mean this padding fast on fast PC (client UDP), and slow on Galileo(server UDP).. But what about another result data.."}], "owner": {"reputation": 155, "user_id": 3212185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e975e7ce59b139131ac96f937faa8fa5?s=128&d=identicon&r=PG&f=1", "display_name": "Shaci", "link": "https://stackoverflow.com/users/3212185/shaci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456396010, "creation_date": 1456336589, "last_edit_date": 1456396010, "question_id": 35609536, "link": "https://stackoverflow.com/questions/35609536/testing-udp-performance", "title": "Testing udp performance", "body": "<p>I have Intel Galileo Board (\"low\" performance pc) and PC (\"fast\" performance) linked with Ethernet.\nI wrote UDP server on Galileo and UDP client on PC. Server receives udp packets and accumulates their amount in variable count.\nPart of code:   </p>\n\n<pre><code>static void recvfrom_int(int);\nstatic long count;\nunsigned long long received = 0;     \n\nstatic void recvfrom_int(int signo) {\n    printf(\"\\nreceived %d datagrams\\n\", count);\n    printf(\"\\nreceived bytes: %d\\n\", received);\n    exit(0);\n} \n\nint main () {  \n    signal(SIGINT, recvfrom_int);        \n    int sockfd;\n    struct sockaddr_in servaddr, cliaddr;    \n    char mesg[MAXLINE];        \n    ...\n    ...\n    sockfd = socket (AF_INET, SOCK_DGRAM, 0); \n    ...\n    ...\n    count = 0;     \n    for ( ; ; ) {    \n        received += recvfrom(sockfd, mesg, MAXLINE, 0, (struct sockaddr *)&amp;cliaddr, &amp;len);\n        count++;        \n    }        \n}\n</code></pre>\n\n<p>And i have client code, which send NDG(50000) datagrams, each datagram has size DGLEN.\nPart of client:</p>\n\n<pre><code>#define MAXLINE 90000\n#define NDG 50000 /* datagrams to send */    \n#define DGLEN 3100 /* each datagram size */\n\nint main () {\n    int sockfd;\n    struct sockaddr_in servaddr;\n    char sendline[MAXLINE];   \n    int i;\n    int n = 0;\n    ...\n    ...\n    sockfd = socket(AF_INET, SOCK_DGRAM, 0);\n    connect(sockfd, (struct sockaddr *)&amp;servaddr, sizeof(servaddr));\n    ...\n    //SENDING DATAGRAMS\n    for (i = 0; i &lt; NDG; i++) {\n        n = write(sockfd, sendline, DGLEN);\n    }\n\n}\n</code></pre>\n\n<p>Similar code can be seen Stevens book, chapter 8.13.\n<a href=\"https://rads.stackoverflow.com/amzn/click/com/0139498761\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">http://www.amazon.com/UNIX-Network-Programming-Richard-Stevens/dp/0139498761</a></p>\n\n<p>My results:</p>\n\n<pre><code>DGLEN (DATAGRAM SIZE in bytes)     COUNT (amount of datagrams, RECEIVED ON SERVER)\n   10                                 67\n   50                                 67\n   100                                67\n   200                                68\n   300                                68\n   400                                69\n   500                                94\n   600                              1067\n   700                             12799  \n   800                             25884\n   900                             35542\n  1000                             49957\n  1200                        near 50000\n  1300                        near 50000\n  1400                        near 50000\n  1472                             48338\n  1473                                71\n</code></pre>\n\n<p>I don't undertstand what it means.\nI think, that small count with DGLEN = 1473, it is because ethernet MTU = 1500, and maximum size of datagram without fragmentation is 1472 (1500 Ethernet MTU - 20 for IP header without options - 8 UDP header = 1472). With size 1473 we obtain fragmentation, which leads to small count of received datagrams on server (if i understand correctly, maybee speed of fragmentation on PC more than on Galileo). \nAnd I don't understand, why count = 67 with DGLEN = 10/50/100/.../500 and why it<br>\nthen begins to rise (count = 12799 DGLEN = 700, count = 49957 DGLEN = 1000, etc.)</p>\n\n<p>Rest of data:</p>\n\n<pre><code>1600 70\n2000 72\n2100 1125\n2200 6021\n2300 10404\n2500 20370\n2800 30046\n2900 37729\n2944 39052\n2950 39610\n2952 42907\n2953 15540\n3000 15587\n3100 21373\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1456335483, "post_id": 35609109, "comment_id": 58902612, "body": "Is there a warning related to the fact that <code>f()</code> needs a pointer to an int and gets a pointer to a pointer to int ?"}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1456335483, "post_id": 35609109, "comment_id": 58902613, "body": "The statement <code>f(&amp;x)</code> takes the address of <code>x</code> which is already a pointer to an int. In <code>f(int*)</code>, change <code>x=&amp;j</code> to <code>*x=j</code> to get the value from your temporary variable."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1456335642, "post_id": 35609109, "comment_id": 58902724, "body": "Even if <code>f(x)</code> is called, functions work on copies of arguments. Hence, the copy of x will be modified in f, but not x itself. <code>*y</code> can be modifed in function <code>f(int* y)</code>..."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1456335707, "post_id": 35609109, "comment_id": 58902764, "body": "And you shouldn&#39;t be trying to return pointers to local variables (even if you don&#39;t succeed ;) )"}], "answers": [{"tags": [], "owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "is_accepted": true, "score": 6, "last_activity_date": 1456335887, "creation_date": 1456335887, "answer_id": 35609326, "question_id": 35609109, "link": "https://stackoverflow.com/questions/35609109/modify-pointer-value-in-a-function/35609326#35609326", "title": "Modify pointer value in a function", "body": "<p>In your function <code>f(int* x)</code>, you are assigning the variable <code>x</code> to the address of your local, temporary variable <code>j</code>. What you really want to do is assign the <em>value</em> of what is pointed to by <code>x</code> to the <em>value</em> of j.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid f(int *x)\n{\n    int j=7;\n    *x=j;\n    printf(\"%d-\",*x);\n\n} \n\nint main()\n{\n    int i=66 ;\n    int *x;\n    x=&amp;i;\n    f(x);\n    printf(\"%d\",*x);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>This can be run <a href=\"http://ideone.com/F95fTY\" rel=\"noreferrer\">here</a>.</p>\n\n<p>A second issue is the fact that you take the address of your variable <code>x</code> in the main function and pass that as a parameter to <code>f(int*)</code> which becomes a pointer to a pointer to an int (an <code>int**</code> not an <code>int*</code>). Remember that <code>x</code> is already an <code>int*</code> and can be passed directly.</p>\n"}], "owner": {"reputation": 65, "user_id": 5905417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1d5f520580bde38fccd427921430d14f?s=128&d=identicon&r=PG&f=1", "display_name": "Marco_D", "link": "https://stackoverflow.com/users/5905417/marco-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5122, "favorite_count": 0, "accepted_answer_id": 35609326, "answer_count": 1, "score": -2, "last_activity_date": 1456335887, "creation_date": 1456335225, "question_id": 35609109, "link": "https://stackoverflow.com/questions/35609109/modify-pointer-value-in-a-function", "title": "Modify pointer value in a function", "body": "<p>I'm studying pointers and i'm trying to understand this code. </p>\n\n<pre><code>int main()\n{\n    int i=66 ;\n    int *x;\n    x=&amp;i;\n    f(&amp;x);\n    printf(\"%d\",*x);\n\n    return 0;\n\n}\nvoid f(int *x)\n{\n    int j=7;\n    x=&amp;j;\n    printf(\"%d-\",*x);\n\n} \n</code></pre>\n\n<p>I'm expectin as output : 7-7 , but i get 7-66. I suppose that when i write </p>\n\n<blockquote>\n  <p>x=&j; </p>\n</blockquote>\n\n<p>in the function the original pointer now is setted to the direction of the j value and this is ok because the printf return 7- but why when i go  back to the main the printf return 66? isn't the pointer now setted to the j value of the function ? i know the values in the function are lost when i close the function but why my pointer is still setted to the i value in the main after i run the function?</p>\n"}, {"tags": ["c", "module", "makefile", "linux-kernel"], "comments": [{"owner": {"reputation": 421, "user_id": 5578579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77ddd2d428073adb86bded978acc9c65?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/5578579/eric"}, "edited": false, "score": 0, "creation_date": 1456336362, "post_id": 35608699, "comment_id": 58903195, "body": "There are 2 source files, hello.c, and funcs.c, hello.o is ambiguity here. So please try to rename hello.c to hello_1.c, and set hello-objs := funcs.o hello_1.o, and rebuild"}, {"owner": {"reputation": 53, "user_id": 5470994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ca2f6a537b69fee7aa0cb7d224d10a5?s=128&d=identicon&r=PG&f=1", "display_name": "alteration", "link": "https://stackoverflow.com/users/5470994/alteration"}, "reply_to_user": {"reputation": 421, "user_id": 5578579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77ddd2d428073adb86bded978acc9c65?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/5578579/eric"}, "edited": false, "score": 0, "creation_date": 1456342316, "post_id": 35608699, "comment_id": 58906728, "body": "Ok it works now, thanks 4 help!"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5470994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ca2f6a537b69fee7aa0cb7d224d10a5?s=128&d=identicon&r=PG&f=1", "display_name": "alteration", "link": "https://stackoverflow.com/users/5470994/alteration"}, "edited": false, "score": 0, "creation_date": 1456335043, "post_id": 35608828, "comment_id": 58902324, "body": "Changed, still same result :("}, {"owner": {"reputation": 2721, "user_id": 2002198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98684cf4e01d405c4bf5662b2fdcb842?s=128&d=identicon&r=PG", "display_name": "Felipe Lavratti", "link": "https://stackoverflow.com/users/2002198/felipe-lavratti"}, "reply_to_user": {"reputation": 53, "user_id": 5470994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ca2f6a537b69fee7aa0cb7d224d10a5?s=128&d=identicon&r=PG&f=1", "display_name": "alteration", "link": "https://stackoverflow.com/users/5470994/alteration"}, "edited": false, "score": 0, "creation_date": 1456335080, "post_id": 35608828, "comment_id": 58902343, "body": "@alteration What is the kernel version you are building against?"}, {"owner": {"reputation": 2721, "user_id": 2002198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98684cf4e01d405c4bf5662b2fdcb842?s=128&d=identicon&r=PG", "display_name": "Felipe Lavratti", "link": "https://stackoverflow.com/users/2002198/felipe-lavratti"}, "reply_to_user": {"reputation": 53, "user_id": 5470994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ca2f6a537b69fee7aa0cb7d224d10a5?s=128&d=identicon&r=PG&f=1", "display_name": "alteration", "link": "https://stackoverflow.com/users/5470994/alteration"}, "edited": false, "score": 0, "creation_date": 1456335933, "post_id": 35608828, "comment_id": 58902905, "body": "@alteration Edited the answer to cover Makefile changes."}, {"owner": {"reputation": 53, "user_id": 5470994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ca2f6a537b69fee7aa0cb7d224d10a5?s=128&d=identicon&r=PG&f=1", "display_name": "alteration", "link": "https://stackoverflow.com/users/5470994/alteration"}, "edited": false, "score": 0, "creation_date": 1456337896, "post_id": 35608828, "comment_id": 58904101, "body": "Wait, apparently now it runs but doesn&#39;t print the message (can&#39;t find it in dmesg)"}, {"owner": {"reputation": 53, "user_id": 5470994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ca2f6a537b69fee7aa0cb7d224d10a5?s=128&d=identicon&r=PG&f=1", "display_name": "alteration", "link": "https://stackoverflow.com/users/5470994/alteration"}, "edited": false, "score": 0, "creation_date": 1456337951, "post_id": 35608828, "comment_id": 58904131, "body": "hello: module verification failed: signature and/or required key missing - tainting kernel"}, {"owner": {"reputation": 2721, "user_id": 2002198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98684cf4e01d405c4bf5662b2fdcb842?s=128&d=identicon&r=PG", "display_name": "Felipe Lavratti", "link": "https://stackoverflow.com/users/2002198/felipe-lavratti"}, "reply_to_user": {"reputation": 53, "user_id": 5470994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ca2f6a537b69fee7aa0cb7d224d10a5?s=128&d=identicon&r=PG&f=1", "display_name": "alteration", "link": "https://stackoverflow.com/users/5470994/alteration"}, "edited": false, "score": 0, "creation_date": 1456345457, "post_id": 35608828, "comment_id": 58908594, "body": "@alteration <a href=\"https://stackoverflow.com/questions/24975377/kvm-module-verification-failed-signature-and-or-required-key-missing-taintin\" title=\"kvm module verification failed signature and or required key missing taintin\">stackoverflow.com/questions/24975377/&hellip;</a> What is your platform ?"}], "tags": [], "owner": {"reputation": 2721, "user_id": 2002198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98684cf4e01d405c4bf5662b2fdcb842?s=128&d=identicon&r=PG", "display_name": "Felipe Lavratti", "link": "https://stackoverflow.com/users/2002198/felipe-lavratti"}, "is_accepted": true, "score": 1, "last_activity_date": 1456336326, "last_edit_date": 1456336326, "creation_date": 1456334424, "answer_id": 35608828, "question_id": 35608699, "link": "https://stackoverflow.com/questions/35608699/makefile-in-linux-unable-to-insert-the-module/35608828#35608828", "title": "makefile in linux, unable to insert the module", "body": "<p>Well, you don't need to call GCC in your makefile to build a module, try this makefile:</p>\n\n<pre><code>obj-m += hello.o\nhello-objs := funcs.o\n\nall:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\n</code></pre>\n\n<p>Also, you could tell the module which function is the entry point and the exit point, and its good to declare module description, author and licensing. (<a href=\"http://www.tldp.org/LDP/lkmpg/2.6/html/x279.html\" rel=\"nofollow\">Why here</a>)</p>\n\n<p>Try this:</p>\n\n<pre><code>static int __init enter_module(void)\n{\n    return 0;\n}\n\nstatic void __exit exit_module(void)\n{\n}\n\nmodule_init(enter_module);\nmodule_exit(exit_module);\n\nMODULE_LICENSE(\"Dual BSD/GPL\");\nMODULE_AUTHOR(\"John &lt;john@jonnyland.com&gt;\");\nMODULE_DESCRIPTION(\"This is the module description.\");\n</code></pre>\n\n<p>Kernel keywords <code>__init</code> and <code>__exit</code> are used to let the Kernel to do optimizations by  removing functions from memory whenever possible. </p>\n\n<p>While macros <code>module_init</code> and <code>module_exit</code> will register module entry and exit functions.</p>\n"}], "owner": {"reputation": 53, "user_id": 5470994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ca2f6a537b69fee7aa0cb7d224d10a5?s=128&d=identicon&r=PG&f=1", "display_name": "alteration", "link": "https://stackoverflow.com/users/5470994/alteration"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 35608828, "answer_count": 1, "score": 1, "last_activity_date": 1456336326, "creation_date": 1456334074, "last_edit_date": 1456335971, "question_id": 35608699, "link": "https://stackoverflow.com/questions/35608699/makefile-in-linux-unable-to-insert-the-module", "title": "makefile in linux, unable to insert the module", "body": "<p>I'm new in linux programming and I'm struggling with creation on makefile. I got 3 files:\nhello.c</p>\n\n<pre><code>#include &lt;linux/module.h&gt; /* Needed by all modules */\n#include &lt;linux/kernel.h&gt; /* Needed for KERN_INFO */\n#include \"funcs.h\"\n\nint init_module(void) {\n    asgard();\n    return 0;\n }\n\nvoid cleanup_module(void) {\n     printk(KERN_INFO \"Goodbye world 1.\\n\");\n}\n</code></pre>\n\n<p>funcs.c</p>\n\n<pre><code>#include &lt;linux/module.h&gt; /* Needed by all modules */\n#include &lt;linux/kernel.h&gt; /* Needed for KERN_INFO */\n#include \"funcs.h\"\n\nvoid asgard(void) {\n    printk(KERN_INFO \"Asgard balordo\\n\");\n    return;\n}\n</code></pre>\n\n<p>funcs.h</p>\n\n<pre><code>#include &lt;linux/module.h&gt; /* Needed by all modules */\n\nvoid asgard(void);\n</code></pre>\n\n<p>Then the makefile:</p>\n\n<pre><code>obj-m += hello.o\nhello-objs := funcs.o\n\nfirst:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\n\nall: funcs.o hello.o\n    gcc -o start funcs.o hello.o\n\nfuncs.o: funcs.c funcs.h\n    gcc -C funcs.c\n\nhello.o: hello.c funcs.h\n    gcc -C hello.c\n\nclean:\n    rm -f *.o\n    rm -f ./start\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\n</code></pre>\n\n<p>When I compile, everything is fine, when i call insmod ./hello.ko it's said that was impossible to insert the module. \nMay you tell me where I'm wrong please?</p>\n"}, {"tags": ["c", "image-processing", "bitmap", "java-native-interface", "native"], "comments": [{"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456335140, "post_id": 35608691, "comment_id": 58902390, "body": "<code>rgb</code> is just a pointer. Where you allocate space for the array? Forgot a <code>malloc</code>? Triple star programmer is not a compliment, what you would do with <code>uint32_t*** rgb;</code> You understood that this is declaring an array of pointers to pointers of <code>uint32</code>? And maybe you want an array of <code>char</code>?"}, {"owner": {"reputation": 33, "user_id": 5956131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b6fcc475368cee0f0445fad54fc40d?s=128&d=identicon&r=PG&f=1", "display_name": "user5956131", "link": "https://stackoverflow.com/users/5956131/user5956131"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456336018, "post_id": 35608691, "comment_id": 58902960, "body": "I edited the code to use rgb[][][]. same thing."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1456366893, "post_id": 35608691, "comment_id": 58917315, "body": "How big is the bitmap? It might be too big to create an array on the stack, causing stack overflow."}, {"owner": {"reputation": 33, "user_id": 5956131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b6fcc475368cee0f0445fad54fc40d?s=128&d=identicon&r=PG&f=1", "display_name": "user5956131", "link": "https://stackoverflow.com/users/5956131/user5956131"}, "reply_to_user": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1456380280, "post_id": 35608691, "comment_id": 58921755, "body": "It&#39;s about 2000*1500 @samgak"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456390053, "post_id": 35608691, "comment_id": 58926833, "body": "Try to create bitmap using dynamic memory, maybe you&#39;re experiencing a ... <b>stack-overflow</b>"}, {"owner": {"reputation": 33, "user_id": 5956131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b6fcc475368cee0f0445fad54fc40d?s=128&d=identicon&r=PG&f=1", "display_name": "user5956131", "link": "https://stackoverflow.com/users/5956131/user5956131"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456394445, "post_id": 35608691, "comment_id": 58929891, "body": "@Frankie_C Can you show me how to create bitmap using dynamic memory? It&#39;ll be much appreciated :)"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456411048, "post_id": 35608691, "comment_id": 58941818, "body": "<code>int *rgb[w][3] = malloc(sizeof(int)*h*w*3);</code>"}, {"owner": {"reputation": 33, "user_id": 5956131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b6fcc475368cee0f0445fad54fc40d?s=128&d=identicon&r=PG&f=1", "display_name": "user5956131", "link": "https://stackoverflow.com/users/5956131/user5956131"}, "edited": false, "score": 0, "creation_date": 1456529748, "post_id": 35608691, "comment_id": 59007501, "body": "Tried it. It works.  But it&#39;s somehow slow when adding loops for allocating and freeing the memory."}], "owner": {"reputation": 33, "user_id": 5956131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b6fcc475368cee0f0445fad54fc40d?s=128&d=identicon&r=PG&f=1", "display_name": "user5956131", "link": "https://stackoverflow.com/users/5956131/user5956131"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1456335967, "creation_date": 1456334053, "last_edit_date": 1456335967, "question_id": 35608691, "link": "https://stackoverflow.com/questions/35608691/jni-extract-pixels-with-bitmap-h-and-store-them-in-3d-array-not-working", "title": "jni- extract pixels with bitmap.h and store them in 3D array not working", "body": "<p>I wanna pass a bitmap to native, extract the pixels with the help of bitmap.h, than store the pixels in 3D array( x and y and color channel), do some processing on the array by calling other c functions, when done, I write back the array to pixels of bitmap. The problem is: I can extract the pixels but I can't store them in an array. also If you can tell me how to write back array to bitmap's pixels.</p>\n\n<p>My c code is:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;time.h&gt;\n#include &lt;android/log.h&gt;\n#include &lt;android/bitmap.h&gt;\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define  LOG_TAG    \"libimageprocessing\"\n#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)\n#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)\n\nstatic void process(AndroidBitmapInfo* info, void* pixels){\n    int xx, yy, red, green, blue;\n    int w = info-&gt;width;\n    int h = info-&gt;height;\n    uint32_t* line;\n    int rgb[h][w][3];\n    for(yy = 0; yy &lt; info-&gt;height; yy++){\n            line = (uint32_t*)pixels;\n            for(xx =0; xx &lt; info-&gt;width; xx++){\n\n                red =  (int) ((line[xx] &amp; 0x00FF0000) &gt;&gt; 16);\n                green = (int)((line[xx] &amp; 0x0000FF00) &gt;&gt; 8);\n                blue = (int) (line[xx] &amp; 0x00000FF );\n\n        red = 255 - red;\n        green = 255 - green;\n        blue = 255 - blue ;\n\n        rgb[yy][xx][0] = red; ////THIS LINE CAUSES THE CRASH, If removed the app returns the inverted image. I WANT TO IMPLEMENT SUCH THING, THEN I DON'T KNOW HOW TO WRITE IT BACK TO BITMAP PIXELS.\n\n\n\n        line[xx] =\n          ((red &lt;&lt; 16) &amp; 0x00FF0000) |\n          ((green &lt;&lt; 8) &amp; 0x0000FF00) |\n          (blue &amp; 0x000000FF);\n            }\n\n            pixels = (char*)pixels + info-&gt;stride;\n        }\n}\n\n\nJNIEXPORT void JNICALL Java_com_example_ibm_MainActivity_process(JNIEnv* env, jobject  obj, jobject bitmap)\n{\n     AndroidBitmapInfo  info;\n        int ret;\n        void* pixels;\n\n        if ((ret = AndroidBitmap_getInfo(env, bitmap, &amp;info)) &lt; 0) {\n                LOGE(\"AndroidBitmap_getInfo() failed ! error=%d\", ret);\n                return;\n            }\n        if (info.format != ANDROID_BITMAP_FORMAT_RGBA_8888) {\n            LOGE(\"Bitmap format is not RGBA_8888 !\");\n            return;\n        }\n\n        if ((ret = AndroidBitmap_lockPixels(env, bitmap, &amp;pixels)) &lt; 0) {\n            LOGE(\"AndroidBitmap_lockPixels() failed ! error=%d\", ret);\n        }\n        process(&amp;info,pixels);\n\n        AndroidBitmap_unlockPixels(env, bitmap);\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "factorial"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1456332779, "post_id": 35608154, "comment_id": 58900642, "body": "Don&#39;t post images of text!"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1456332781, "post_id": 35608154, "comment_id": 58900645, "body": "You don&#39;t print the value of <code>s</code>."}], "answers": [{"tags": [], "owner": {"reputation": 42285, "user_id": 2057919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec600dcd84770c5d835cd4c943514088?s=128&d=identicon&r=PG&f=1", "display_name": "elixenide", "link": "https://stackoverflow.com/users/2057919/elixenide"}, "is_accepted": false, "score": 6, "last_activity_date": 1456332773, "creation_date": 1456332773, "answer_id": 35608240, "question_id": 35608154, "link": "https://stackoverflow.com/questions/35608154/my-c-program-is-not-giving-any-result-pls-help-everyone/35608240#35608240", "title": "My c program is not giving any result.pls help everyone", "body": "<p>Your problem is in this line:</p>\n\n<pre><code>printf(\"factorial of n=\",s);\n</code></pre>\n\n<p>This outputs <code>factorial of n=</code>, but it does not simply concatenate the value of <code>s</code>, and there is no placeholder for <code>s</code>, so you actually have too many parameters.</p>\n\n<p>You need a placeholder for the <code>int</code> output:</p>\n\n<pre><code>printf(\"factorial of n=%d\",s);\n</code></pre>\n\n<p>Without it, your program exits with an error (status 15, when 0 would be normal).</p>\n\n<p>Also, (as Vlad pointed out in his answer) the <code>if (i==n+1) { ... }</code> block is redundant, as your <code>while</code> loop will already exit when <code>i &gt; n</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1456333324, "last_edit_date": 1456333324, "creation_date": 1456332810, "answer_id": 35608251, "question_id": 35608154, "link": "https://stackoverflow.com/questions/35608154/my-c-program-is-not-giving-any-result-pls-help-everyone/35608251#35608251", "title": "My c program is not giving any result.pls help everyone", "body": "<p>Write</p>\n\n<pre><code>printf(\"factorial of n=%d\\n\",s);\n                       ^^\n</code></pre>\n\n<p>And this code snippet</p>\n\n<pre><code>     if (i==n+1)\n     {\n         break; \n     }\n</code></pre>\n\n<p>is redundant and may be removed.</p>\n\n<p>You could write the loop simpler. For example</p>\n\n<pre><code>while ( n &gt; 1 ) s *= n--;\n</code></pre>\n\n<p>without a need to use one more variable <code>i</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5975745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d8fc3589468f82723f234487fddb10?s=128&d=identicon&r=PG&f=1", "display_name": "sherlock homes", "link": "https://stackoverflow.com/users/5975745/sherlock-homes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1456658074, "accepted_answer_id": 35608251, "answer_count": 2, "score": -6, "last_activity_date": 1456395730, "creation_date": 1456332549, "last_edit_date": 1456395730, "question_id": 35608154, "link": "https://stackoverflow.com/questions/35608154/my-c-program-is-not-giving-any-result-pls-help-everyone", "closed_reason": "Not suitable for this site", "title": "My c program is not giving any result.pls help everyone", "body": "<p>i have written a program which is not giving proper result.</p>\n\n<pre><code>main()\n{\n    int i=1,n,s=1;\n    printf(\"enter the value of n\");\n    scanf(\"%d\",&amp;n);\n\n    while(i&lt;=n) \n    {\n         s=s*i;\n         i++;\n         if (i==n+1)\n         {\n             break; \n         }\n    }\n    printf(\"factorial of n=\",s);\n}\n</code></pre>\n\n<p>it is giving the result as shown in the picture below.\n<img src=\"https://i.stack.imgur.com/ZRk3y.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c", "pointers", "struct", "parameter-passing", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 9, "user_id": 5975728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d4cf7348efa3ae2bc127f677a8fa82?s=128&d=identicon&r=PG&f=1", "display_name": "jBannon", "link": "https://stackoverflow.com/users/5975728/jbannon"}, "edited": false, "score": 0, "creation_date": 1456340288, "post_id": 35608131, "comment_id": 58905564, "body": "Thanks to @LPs for the good answer!"}, {"owner": {"reputation": 9, "user_id": 5975728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d4cf7348efa3ae2bc127f677a8fa82?s=128&d=identicon&r=PG&f=1", "display_name": "jBannon", "link": "https://stackoverflow.com/users/5975728/jbannon"}, "edited": false, "score": 0, "creation_date": 1456340313, "post_id": 35608131, "comment_id": 58905581, "body": "Also @Frankie_C your post was equally helpful. Both of you helped me avoid another bug in my profile."}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1456332894, "creation_date": 1456332894, "answer_id": 35608288, "question_id": 35608131, "link": "https://stackoverflow.com/questions/35608131/strange-struct-array-printing-error-in-c/35608288#35608288", "title": "Strange Struct Array Printing Error in C", "body": "<p>Buffer overflow on <code>char op[4]</code>, then <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined_behavior</a></p>\n\n<p>To be able to store <code>\"1004\"</code> it have to be <code>5 bytes long</code> to have space for <code>NULL</code> terminator.</p>\n\n<pre><code>struct instruction{\nchar kind;\nchar op[5];\n};\n</code></pre>\n\n<p>Literal string <code>\"1004\"</code> is <code>'1', '0', '0', '4', '\\0'</code></p>\n"}, {"tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1456390110, "last_edit_date": 1456390110, "creation_date": 1456332975, "answer_id": 35608320, "question_id": 35608131, "link": "https://stackoverflow.com/questions/35608131/strange-struct-array-printing-error-in-c/35608320#35608320", "title": "Strange Struct Array Printing Error in C", "body": "<p>You forgot to give space for the string ending null.\nFix your struct declaration to this:</p>\n\n<pre><code>struct instruction{\nchar kind;\nchar op[5];\n};\n</code></pre>\n\n<p>And it will work.<br>\nYou can also simplify declaration this way:</p>\n\n<pre><code>typedef struct instruction{\nchar kind;\nchar op[5];\n} prog;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5975728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d4cf7348efa3ae2bc127f677a8fa82?s=128&d=identicon&r=PG&f=1", "display_name": "jBannon", "link": "https://stackoverflow.com/users/5975728/jbannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 35608320, "answer_count": 2, "score": 0, "last_activity_date": 1456390110, "creation_date": 1456332498, "question_id": 35608131, "link": "https://stackoverflow.com/questions/35608131/strange-struct-array-printing-error-in-c", "title": "Strange Struct Array Printing Error in C", "body": "<p>Hey all I'm having some trouble diagnosing the reason for an error in printing an array of structures in C. </p>\n\n<p>In a separate header file (call it <code>header.h</code>) I have the following typedef'd structure:</p>\n\n<pre><code>typedef struct instruction prog;\n\nstruct instruction{\nchar kind;\nchar op[4];\n};\n</code></pre>\n\n<p>For my main programing task I want to read from a file a series of what are supposed to be instructions consisting of a type character (the variable <code>kind</code> above) and an instruction consisting of four integers (listed as <code>op</code> above). Examples include <code>R 1004</code> <code>E 1008</code>, etc. I can read the data in just fine but it seems to be storing things improperly. I wrote the following test code to see if I could find the error but I was still getting the same issue. My goal is to store these as an array of instructions where, using the parlance of the code below, <code>mem[i].kind = 'R'</code> and <code>mem[i].op =</code>1004`. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"header.h\"\n\nvoid memFill(prog *P, int x);\nvoid memPrint(prog *P, int x);\n\nint main(){\n    prog mem[10];\n\n    memFill(&amp;mem[0], 10);\n    memPrint(&amp;mem[0], 10);\nreturn 0;\n}\n\n\nvoid memFill(prog *P, int x){\nchar *v = \"1004\";\nfor(int i = 0; i&lt; x; i++){\n    P-&gt;kind = 'R';\n    strcpy(P-&gt;op, v);\n    P++;\n}\n}\n\n\nvoid memPrint(prog *P, int x){\nfor(int i = 0; i &lt;x; i++){\n    printf(\"%c %s\\n\",P-&gt;kind, P-&gt;op);\n    P++;\n}\n}\n</code></pre>\n\n<p>This is giving me output that looks like this:</p>\n\n<pre><code>R 1004R1004R1004R1004R1004R1004R1004R1004R1004R1004\nR 1004R1004R1004R1004R1004R1004R1004R1004R1004\nR 1004R1004R1004R1004R1004R1004R1004R1004\nR 1004R1004R1004R1004R1004R1004R1004\nR 1004R1004R1004R1004R1004R1004\nR 1004R1004R1004R1004R1004\nR 1004R1004R1004R1004\nR 1004R1004R1004\nR 1004R1004\nR 1004\n</code></pre>\n\n<p>The reason this is weird is that identical pointer arithmetic has given just fine results with a similar structure. What's going on here? What am I missing?</p>\n"}, {"tags": ["ios", "c", "xcode", "matlab", "swift2"], "comments": [{"owner": {"reputation": 31, "user_id": 5497433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206695197132113/picture?type=large", "display_name": "Janko Povolny", "link": "https://stackoverflow.com/users/5497433/janko-povolny"}, "edited": false, "score": 0, "creation_date": 1456862514, "post_id": 35607570, "comment_id": 59139295, "body": "I found solution to this problem, it is quite complex... Posting in few days."}], "owner": {"reputation": 31, "user_id": 5497433, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206695197132113/picture?type=large", "display_name": "Janko Povolny", "link": "https://stackoverflow.com/users/5497433/janko-povolny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1456334312, "creation_date": 1456331164, "last_edit_date": 1456334312, "question_id": 35607570, "link": "https://stackoverflow.com/questions/35607570/c-code-in-swift", "title": "C code in Swift", "body": "<p>I struggle myself with connecting C code exported from Matlab and Swift code. Project demands that I import image from Swift to algorithm written in Matlab. This is done when application takes picture, and store it in variable and save it in library (not requirement).\nFrom variable, image should be transformed to array of uint8_T, because function from C code (exported matlab code) is expecting such format.\nI have imported code inside my project and I have connected bridge-header <a href=\"http://i.stack.imgur.com/CC1Py.png\" rel=\"nofollow\">connection made here</a></p>\n\n<p>After that I set mmmBase_initialize(); and mmmBase_terminate(); to AppDelegate.swift</p>\n\n<pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {\n     mmmBase_initialize();\n    return true\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>func applicationDidEnterBackground(application: UIApplication) {\n    mmmBase_terminate();\n}\n</code></pre>\n\n<p>After all of this, I have created simple @IBAction for taking photo and all of his helper methods, which work flawlessly and image is displayed and stored without problems. When I have been completely certain that this works I added mmmBase function from C to imagePickerController for algorithm to start working on image as soon as is taken.</p>\n\n<pre><code>func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]) {\n\n    let mediaType = info[UIImagePickerControllerMediaType] as! String\n\n    dismissViewControllerAnimated(true, completion: nil);\n\n    if mediaType == kUTTypeImage as String {\n       let image = info[UIImagePickerControllerOriginalImage]\n           as! UIImage\n\n        mmmBase(INPUT MATRIX, OUTPUT MATRIX)\n\n        if (newMedia == true) {\n            UIImageWriteToSavedPhotosAlbum(image, self,\n               \"image:didFinishSavingWithError:contextInfo:\", nil)\n       } else if mediaType == kUTTypeMovie as String {\n           // Code to support video here\n      }\n</code></pre>\n\n<p>mmmBase() function in mmmBase.h look like this:</p>\n\n<pre><code>extern void mmmBase(const emxArray_uint8_T *imgIn, emxArray_uint8_T *imgOut);\n</code></pre>\n\n<p>Next step should be to transform Image to uint8_T array and to create INPUT MATRIX with code that is in mmmBase_emxAPI.h</p>\n\n<pre><code>extern emxArray_uint8_T *emxCreateND_uint8_T(int numDimensions, int *size);\nextern emxArray_uint8_T *emxCreateWrapperND_uint8_T(unsigned char *data, int numDimensions, int *size);\nextern emxArray_uint8_T *emxCreateWrapper_uint8_T(unsigned char *data, int rows, int cols);\nextern emxArray_uint8_T *emxCreate_uint8_T(int rows, int cols);\nextern void emxDestroyArray_uint8_T(emxArray_uint8_T *emxArray);\nextern void emxInitArray_uint8_T(emxArray_uint8_T **pEmxArray, int numDimensions);\n</code></pre>\n\n<p>These wrapper should be used as on following link:\n<a href=\"http://newtips.co/st/questions/24229038/how-to-use-c-library-created-by-matlab-coder-codegen-in-c-program-with-emxarray.html\" rel=\"nofollow\">http://newtips.co/st/questions/24229038/how-to-use-c-library-created-by-matlab-coder-codegen-in-c-program-with-emxarray.html</a>\nBut I'm out of idea how should one use them in swift, I would be immensely grateful if somebody gave me piece of information how to use them in Swift together with Pointers that as I found must me also used.</p>\n\n<p>In my last effort I manage to write this code, and it seems to sends array to Algorithm and crashes randomly but I still cannot get outPut parameter which is second parameter in mmmBase() function. I wrote this last code in despair.</p>\n\n<pre><code>func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]) {\n\n    let mediaType = info[UIImagePickerControllerMediaType] as! String\n\n    dismissViewControllerAnimated(true, completion: nil);\n\n    if mediaType == kUTTypeImage as String {\n       let image = info[UIImagePickerControllerOriginalImage]\n           as! UIImage\n\n        let unwrappedImage = image\n        let data = UIImageJPEGRepresentation(unwrappedImage, 1.0)\n\n        var bytes = data!.bytes\n        let len = data!.length;\n        let dataint = UnsafeMutablePointer&lt;uint8_T&gt;(bytes)\n        let br = UnsafeMutablePointer&lt;Int32&gt;(bitPattern: len)\n        let InputMatix = emxCreateWrapperND_uint8_T(dataint,1,br)\n\n        let dataout = UnsafeMutablePointer&lt;uint8_T&gt;()\n        var dataoutWR = emxCreateWrapperND_uint8_T(dataout,1,br)\n\n        mmmBase(InputMatix, dataoutWR)\n\n        endImage = NSData(bytes: bytes, length: len)\\\\ Global variable endImage\n\n\n        if (newMedia == true) {\n            UIImageWriteToSavedPhotosAlbum(image, self,\n               \"image:didFinishSavingWithError:contextInfo:\", nil)\n       } else if mediaType == kUTTypeMovie as String {\n           // Code to support video here\n      }\n\n\n\n        let mainstoryboard: UIStoryboard = UIStoryboard(name: \"Main\", bundle: nil)\n        let vc: ViewControllerLast = mainstoryboard.instantiateViewControllerWithIdentifier(\"testController\") as! ViewControllerLast\n\n        self.presentViewController(vc, animated: true, completion: nil)\n\n        var image1: UIImage = UIImage(data: endImage)!\n        vc.image = image1 as UIImage\n\n   }\n</code></pre>\n\n<p>At the end I would like to mention that Im not proficient with Swift. And in short terms picture should be send to Matlab algorithm there it should be processed and send back to Swift to be displayed in \"testController\". </p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1456332465, "post_id": 35607553, "comment_id": 58900392, "body": "If you try to compile it with gcc, it compiles? is math lib reachable?"}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1456333244, "post_id": 35607553, "comment_id": 58901025, "body": "@LPs: Yes.  I can compile with gcc manually -- that lets me put &#39;-lz&#39; at the end of the full gcc command line, which <code>binfmtc</code> apparently does not."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1456334355, "post_id": 35607553, "comment_id": 58901823, "body": "Does <code>binfmtc</code> honor <code>CFLAGS</code>, <code>CXXFLAGS</code> and <code>LDFLAGS</code>?. If so, you can set <code>LDFLAGS=&quot;-lm -lz&quot;</code>"}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1456334637, "post_id": 35607553, "comment_id": 58902030, "body": "@alvits: Good idea, but setting <code>LDFLAGS</code> has no effect."}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "edited": false, "score": 0, "creation_date": 1456961220, "post_id": 35607553, "comment_id": 59193693, "body": "Note: This problem is unique to &#39;C&#39; -- it doesn&#39;t happen in C++ mode: <code>BINFMTCXX</code>."}], "answers": [{"tags": [], "owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "is_accepted": false, "score": 1, "last_activity_date": 1456333968, "creation_date": 1456333968, "answer_id": 35608651, "question_id": 35607553, "link": "https://stackoverflow.com/questions/35607553/link-math-library-with-binfmtc/35608651#35608651", "title": "Link math library with binfmtc", "body": "<p>This isn't elegant, but it works:</p>\n\n<p>Create a wrapper script <code>gcclm.sh</code> for the library:</p>\n\n<pre><code>#! /usr/bin/env bash\ngcc $@ -lm\n</code></pre>\n\n<p>Invoke the C program using the wrapper:</p>\n\n<pre><code>GCC=$(pwd)/gcclm.sh ./myprogram.c\n</code></pre>\n"}], "owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456333968, "creation_date": 1456331131, "last_edit_date": 1495535646, "question_id": 35607553, "link": "https://stackoverflow.com/questions/35607553/link-math-library-with-binfmtc", "title": "Link math library with binfmtc", "body": "<p>I'm using <a href=\"https://www.netfort.gr.jp/~dancer/software/binfmtc.html.en\" rel=\"nofollow noreferrer\">binfmtc</a> to allow me to run a C program without performing an explicit build step.  This worked fine until I started using math functions, at which point I see messages such as:</p>\n\n<blockquote>\n  <p>undefined reference to `sin'</p>\n</blockquote>\n\n<p>The header that I use is:</p>\n\n<pre><code>/*BINFMTC: -Wall -Werror -std=c99 -lm\n*/\n</code></pre>\n\n<p>How can I get this program to link?</p>\n\n<p>Closely related: <a href=\"https://stackoverflow.com/q/16344445/86967\">&quot;undefined reference to `pow&#39;&quot; even with math.h and the library link -lm</a></p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456330555, "post_id": 35607230, "comment_id": 58898854, "body": "Is that some software announcement for an already existing software? Do you have any <b>specific</b> question?"}, {"owner": {"reputation": 31, "user_id": 5527371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc11ac9857b823215ef314dea79ef46b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Raleigh", "link": "https://stackoverflow.com/users/5527371/andrew-raleigh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456330895, "post_id": 35607230, "comment_id": 58899110, "body": "@Olaf It&#39;s a personal program, my question is how do I allow new values of size to move up along the recursive ladder. i.e. /bellow should also add the value of /bellow/mellow to it"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5527371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc11ac9857b823215ef314dea79ef46b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Raleigh", "link": "https://stackoverflow.com/users/5527371/andrew-raleigh"}, "edited": false, "score": 0, "creation_date": 1456331569, "post_id": 35607457, "comment_id": 58899685, "body": "Thank you so much, I really appreciate it. I should have figured it out myself, so thank you for helping me out :)"}], "tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": true, "score": 0, "last_activity_date": 1456332033, "last_edit_date": 1456332033, "creation_date": 1456330905, "answer_id": 35607457, "question_id": 35607230, "link": "https://stackoverflow.com/questions/35607230/adding-previous-values-of-a-directory-size-recursively/35607457#35607457", "title": "Adding previous values of a directory size recursively", "body": "<pre><code>if (S_ISDIR(statbuf.st_mode)) {\n    recurSize(file);\n</code></pre>\n\n<p>does not return the size of what was found in the new recursion. You need to have it return the size that it found.</p>\n\n<pre><code>if (S_ISDIR(statbuf.st_mode)) {\n    // Showing as two statements for clarity.\n    newsize = recurSize(file);\n    size += newsize;\n</code></pre>\n\n<p>Then at the end of <code>recurSize()</code> you need</p>\n\n<pre><code>return size;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5527371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc11ac9857b823215ef314dea79ef46b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Raleigh", "link": "https://stackoverflow.com/users/5527371/andrew-raleigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 35607457, "answer_count": 1, "score": -1, "last_activity_date": 1456332033, "creation_date": 1456330344, "last_edit_date": 1456331156, "question_id": 35607230, "link": "https://stackoverflow.com/questions/35607230/adding-previous-values-of-a-directory-size-recursively", "title": "Adding previous values of a directory size recursively", "body": "<p>I'm writing a C program that will, when given a directory, recursively go through all subdirectories and get the size of all the files. Basically, mimicking the \"du\" function.</p>\n\n<p>Thing is, I can't seem to be able to get add the files from the subdirectory to its parent directory.</p>\n\n<pre><code>    if (S_ISDIR(statbuf.st_mode)) {\n        recurSize(file);\n</code></pre>\n\n<p>The above is my main loop, where I would make sure it skips . and .. in order to counter an infinite loop. Then set the file name and add the size of all the files in the subdirectory. How would I go about adding the size from <code>size += statbuf.st_blocks / 2;</code> to <code>recurSize(file);</code> (which is the recursive function)?</p>\n\n<p>Example of my output:</p>\n\n<pre><code>116 ../A2\n4 ../bellow/mellow\n8 ../bellow\n76 ../A1\n4 ../submit/temp\n84 ../submit\n292 ..\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>116 ../A2\n4 ../bellow/mellow\n12 ../bellow\n76 ../A1\n4 ../submit/temp\n88 ../submit\n292 ..\n</code></pre>\n\n<p>The reason the <code>292 ..</code> works as it should is because of a workaround I attempted but that only seems to work on the largest main directory, anyone know how I can apply it to everything?</p>\n\n<p>I'm going to keep working on this, and if I figure it out I'll update this for whoever's interested.</p>\n\n<p>EDIT: Thank you for getting it, yeah simply returning the value back seems to have fixed it, thank you :)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 205, "user_id": 5817380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PBI8.png?s=128&g=1", "display_name": "Vicente Cunha", "link": "https://stackoverflow.com/users/5817380/vicente-cunha"}, "edited": false, "score": 2, "creation_date": 1456330733, "post_id": 35607042, "comment_id": 58898994, "body": "I was able to compile and run your code with no warning and errors simply changing <code>typedef struct data</code> to <code>typedef struct node</code>."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1456331222, "post_id": 35607042, "comment_id": 58899387, "body": "Basic stuff: you cannot use the <code>typedef</code> name inside the struct you&#39;re <code>typedef</code>&#39;ing. the type is also <code>node</code>, not <code>struct node</code>. Because you used <code>struct node</code>, you&#39;re implying there is a <code>struct node</code> declared somewhere."}, {"owner": {"reputation": 161, "user_id": 4127899, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/904100294fad38d8c32f4432a348a87e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharon", "link": "https://stackoverflow.com/users/4127899/sharon"}, "edited": false, "score": 0, "creation_date": 1456331389, "post_id": 35607042, "comment_id": 58899540, "body": "This code works. But if I include that commented printf statement, it generates error"}, {"owner": {"reputation": 906, "user_id": 5017179, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DfIeu.jpg?s=128&g=1", "display_name": "ReshaD", "link": "https://stackoverflow.com/users/5017179/reshad"}, "edited": false, "score": 0, "creation_date": 1456331590, "post_id": 35607042, "comment_id": 58899703, "body": "try my modifications below, it should work fine."}, {"owner": {"reputation": 161, "user_id": 4127899, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/904100294fad38d8c32f4432a348a87e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharon", "link": "https://stackoverflow.com/users/4127899/sharon"}, "edited": false, "score": 0, "creation_date": 1456332302, "post_id": 35607042, "comment_id": 58900261, "body": "That does not make any difference. Please explain me the reason why the code works correctly without that commented line"}, {"owner": {"reputation": 906, "user_id": 5017179, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DfIeu.jpg?s=128&g=1", "display_name": "ReshaD", "link": "https://stackoverflow.com/users/5017179/reshad"}, "edited": false, "score": 0, "creation_date": 1456332583, "post_id": 35607042, "comment_id": 58900477, "body": "@elantra Now I will write the whole code, which does not give any error on my compiler and prints out 8 10 8."}], "answers": [{"comments": [{"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1456330237, "post_id": 35607126, "comment_id": 58898611, "body": "what about this; <code>s-&gt;link=new;     new-&gt;num=8;     new-&gt;link=NULL;</code>"}, {"owner": {"reputation": 161, "user_id": 4127899, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/904100294fad38d8c32f4432a348a87e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharon", "link": "https://stackoverflow.com/users/4127899/sharon"}, "edited": false, "score": 0, "creation_date": 1456331112, "post_id": 35607126, "comment_id": 58899303, "body": "But I am getting the output if the printf(&quot;%d\\n&quot;,s-&gt;link-&gt;num); is commented.Can you please help me with the reason?  s-&gt;link-&gt;num creates the problem."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1456330038, "creation_date": 1456330038, "answer_id": 35607126, "question_id": 35607042, "link": "https://stackoverflow.com/questions/35607042/dereferencing-pointer-to-incomplete-type-error-when-using-typedef-struct-in-c/35607126#35607126", "title": "dereferencing pointer to incomplete type error when using typedef struct in C", "body": "<p><code>struct node</code> is undeclared in this code, so <code>struct node*</code> is an incomplete type.</p>\n\n<p>I guess <code>struct node *link;</code> in the declaration of struct should be <code>struct data *link;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 906, "user_id": 5017179, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DfIeu.jpg?s=128&g=1", "display_name": "ReshaD", "link": "https://stackoverflow.com/users/5017179/reshad"}, "is_accepted": false, "score": 2, "last_activity_date": 1456332751, "last_edit_date": 1456332751, "creation_date": 1456330458, "answer_id": 35607275, "question_id": 35607042, "link": "https://stackoverflow.com/questions/35607042/dereferencing-pointer-to-incomplete-type-error-when-using-typedef-struct-in-c/35607275#35607275", "title": "dereferencing pointer to incomplete type error when using typedef struct in C", "body": "<p>First of all you should modify your struct, and the error of the commented part should be solved:</p>\n\n<pre><code>typedef struct data\n{\n\n   int num;\n   struct data *link;\n\n}node;\n</code></pre>\n\n<p>When you are defining s and new in the following lines, there is no need to put them equal to NULL, This is the working fine main function:</p>\n\n<pre><code>void main(){\n   node *s,*e,*new;\n   e=NULL;\n\n   new=malloc(sizeof(node));\n   s=malloc(sizeof(node));\n   s-&gt;num=10;\n   new-&gt;num=8;\n   new-&gt;link=NULL;\n   s-&gt;link=new;\n   printf(\"%d\\n\",s-&gt;link-&gt;num);  /// works fine without any error\n   e=s;\n   while(e!=NULL)\n   {\n      printf(\"%d\\n\",e-&gt;num);\n      e=e-&gt;link;\n   }\nreturn;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1170, "user_id": 4770399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06a1f389f38f1cb4c0313c6c90b562ee?s=128&d=identicon&r=PG", "display_name": "Jean Jung", "link": "https://stackoverflow.com/users/4770399/jean-jung"}, "is_accepted": false, "score": 0, "last_activity_date": 1456363578, "creation_date": 1456363578, "answer_id": 35616554, "question_id": 35607042, "link": "https://stackoverflow.com/questions/35607042/dereferencing-pointer-to-incomplete-type-error-when-using-typedef-struct-in-c/35616554#35616554", "title": "dereferencing pointer to incomplete type error when using typedef struct in C", "body": "<p>The shortest answer is: you defined a type that needs one structure that is not being declared. </p>\n\n<p>The reasons you are getting the error on the commented line is because it's the unique line you used a member of the link member in the node structure. On any other part of your code you don't hit it as you do, for example, <code>e = new-&gt;link;</code> the compiler don't need to know about the members of the structure at this time because you said that <code>e</code> is of type node, node is a structure  and <code>new-&gt;link</code> is a compatible structure, so everything is ok. </p>\n\n<p>That's also the reason when you change the <code>typedef struct data { \u2026};</code> to <code>typedef struct node { \u2026};</code> and everything works, because when the compiler needs the information about the structure node it finds a structure called node and there is a member called link that have a member called num. As you can see, typedef is just a kind of aliasing. Hope it helps you to understand.</p>\n"}, {"comments": [{"owner": {"reputation": 1170, "user_id": 4770399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06a1f389f38f1cb4c0313c6c90b562ee?s=128&d=identicon&r=PG", "display_name": "Jean Jung", "link": "https://stackoverflow.com/users/4770399/jean-jung"}, "edited": false, "score": 0, "creation_date": 1456396217, "post_id": 35616881, "comment_id": 58931171, "body": "Great! This a complete answer."}], "tags": [], "owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "is_accepted": true, "score": 1, "last_activity_date": 1456399623, "last_edit_date": 1495541799, "creation_date": 1456365732, "answer_id": 35616881, "question_id": 35607042, "link": "https://stackoverflow.com/questions/35607042/dereferencing-pointer-to-incomplete-type-error-when-using-typedef-struct-in-c/35616881#35616881", "title": "dereferencing pointer to incomplete type error when using typedef struct in C", "body": "<p>This is a naming confusion.</p>\n\n<p><code>node</code> == <code>struct data</code> thanks to <code>typedef</code>.</p>\n\n<p>But <code>node</code> != <code>struct node</code>. They are 2 distinct types. And <code>struct node</code> has not been defined.</p>\n\n<p>This is a pity that such a confusing construction is allowed by the C standard, and not even flagged as a warning by compilers. But that's the way C is defined today, so we have to live with it.</p>\n\n<p>My recommendation : don't use the same names for <code>struct</code> and <code>typedef</code>. Create your own convention, for example <code>struct thing_s</code> and <code>typedef struct thing_s thing_t;</code> . This will avoid naming confusions such as this one.</p>\n\n<p>The solution is now pretty obvious.\nReplace :</p>\n\n<p><code>typedef struct data { int num; struct node *link; } node;</code></p>\n\n<p>by </p>\n\n<p><code>typedef struct data { int num; struct data *link; } node;</code></p>\n\n<p>and the problematic <code>printf</code> will now work.</p>\n\n<p>But your question is : why does your program worked at all without this <code>printf</code> ?</p>\n\n<p>Now that's an interesting one.</p>\n\n<p>Let's go back to the initial definition.\nAs we said, <code>struct node</code> doesn't exist, and is therefore incomplete.\nJust to better follow what we are going to explain, let's call it <code>struct incomplete_s</code> instead. Now, <code>node</code> becomes :</p>\n\n<p><code>typedef struct data { int num; struct incomplete_s *link; } node;</code></p>\n\n<p>It will still work without the problematic <code>printf</code>.</p>\n\n<p>The reason is, <code>node</code> is properly defined. It is a structure with known size and types. Because it doesn't matter that <code>struct incomplete_s</code> is incomplete, since <code>link</code> is defined as a pointer to it. You could as well have defined <code>void * link;</code> and it would still work.</p>\n\n<p><code>void*</code> or <code>struct incomplete_s *</code> or <code>whatever *</code> have all same size : they are all pointers. So the structure hosting them can be properly created.</p>\n\n<p>In your main loop, your program does :</p>\n\n<pre><code>   while(e!=NULL)\n   {\n      printf(\"%d\\n\",e-&gt;num);\n      e=e-&gt;link;\n   }\n</code></pre>\n\n<p>that is <code>e</code>, which is a pointer <code>node*</code>, takes the value of <code>e-&gt;link</code>, which is a pointer  <code>struct incomplete_s *</code>.</p>\n\n<p>Note that both pointers are supposed to point to different types.\nBut they are both pointers, so yeah, this assignment is technically possible and authorized by the standard.</p>\n\n<p>Now a more cautious compiler would likely issue a warning here, since you are not supposed to mix pointers of different types. This is a silent type-casting, which is a recipe for future bugs.\nI don't know which compiler you use, but you could increase its warning level (use \"warning level 4\" for Visual, or <code>-Wall -Wextra</code> for gcc), and it will likely not like this <code>=</code> operation.</p>\n\n<p>A more explicit type casting would solve that (*) :\n<code>e = (node*)(e-&gt;link);</code></p>\n\n<p>Now this is no more silent, programmer is in charge, warnings will disappear.</p>\n\n<p><code>e-&gt;link</code> definitely exists, so compiler can grab this value.\nBut <code>s-&gt;link-&gt;num</code> doesn't exist, since <code>s-&gt;link</code> is <code>struct incomplete_s*</code>, and we don't know what it is, so we don't know if it has a <code>num</code> member.</p>\n\n<p>(*) <em>Overkill complement</em> : At some higher optimization level, this will still be not good : <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">strict aliasing</a> might get in the way. So dereferencing a pointer type into another pointer type remains a dangerous operation.</p>\n"}], "owner": {"reputation": 161, "user_id": 4127899, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/904100294fad38d8c32f4432a348a87e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharon", "link": "https://stackoverflow.com/users/4127899/sharon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1691, "favorite_count": 0, "accepted_answer_id": 35616881, "answer_count": 4, "score": 5, "last_activity_date": 1456399623, "creation_date": 1456329832, "question_id": 35607042, "link": "https://stackoverflow.com/questions/35607042/dereferencing-pointer-to-incomplete-type-error-when-using-typedef-struct-in-c", "title": "dereferencing pointer to incomplete type error when using typedef struct in C", "body": "<pre><code>#include&lt;stdio.h&gt;\ntypedef struct data\n{\n\n    int num;\n    struct node *link;\n}node;\nmain()\n{\n    node *s=NULL,*e=NULL,*new;\n    new=malloc(sizeof(node));\n    s=malloc(sizeof(node));\n    s-&gt;num=10;\n    s-&gt;link=new;\n    new-&gt;num=8;\n    new-&gt;link=NULL;\n //  printf(\"%d\\n\",s-&gt;link-&gt;num);  //// error: dereferencing pointer to incomplete type\n    e=s;\n    while(e!=NULL)\n    {\n        printf(\"%d\",e-&gt;num);\n        e=e-&gt;link;\n    }\n\n}\n</code></pre>\n\n<p>For the above C program I got the correct output. But if I include the commented line, it generates a dereferencing incomplete type error. Can anyone explain the reason? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1456329356, "post_id": 35606776, "comment_id": 58897913, "body": "&quot;almost the same&quot; is not the same as &quot;the same&quot; - find the difference between the two, and you&#39;ll probably spot the reason for the different output."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456329639, "post_id": 35606776, "comment_id": 58898125, "body": "<code>#include&lt;conio.h&gt;</code> and <code>return 0;</code> were the only differences that I found with a tool."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456330343, "post_id": 35606776, "comment_id": 58898689, "body": "Sounds like undefined behaviour. You probably have uninizialized variables and/or you access your array out of bounds."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 1, "last_activity_date": 1456330639, "creation_date": 1456330639, "answer_id": 35607346, "question_id": 35606776, "link": "https://stackoverflow.com/questions/35606776/same-program-same-compiler-but-i-got-different-output-in-c/35607346#35607346", "title": "same program same compiler but I got different output in c", "body": "<p>Both programs are wrong and you get undefined bahaviour:</p>\n\n<pre><code>for(c=0;c&lt;n;c++);  // &lt;&lt; the ; should not be here\n                   // now c contains 2\n                   // and you print array[2] once\n                   // and as array[2] hasn't bee initialized\n                   // printf will print a more or less random value\n\n{printf(\"%d\\n\",array[c]);}\ngetch();\n</code></pre>\n\n<p>Corrected (and correctly formatted) version</p>\n\n<pre><code>for (c = 0; c &lt; n;c++)\n{\n  printf(\"%d\\n\",array[c]);}\n}\ngetch();\n</code></pre>\n\n<p>If you had formatted your code correctly from the beginning you probably would have spotted the problem by yourself.</p>\n"}], "owner": {"reputation": 73, "user_id": 5461745, "user_type": "registered", "profile_image": "https://graph.facebook.com/933277283386870/picture?type=large", "display_name": "Jan Nutcha", "link": "https://stackoverflow.com/users/5461745/jan-nutcha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 35607346, "answer_count": 1, "score": -1, "last_activity_date": 1456330639, "creation_date": 1456329241, "last_edit_date": 1456329281, "question_id": 35606776, "link": "https://stackoverflow.com/questions/35606776/same-program-same-compiler-but-i-got-different-output-in-c", "title": "same program same compiler but I got different output in c", "body": "<pre><code>\\\\First program\n#include&lt;stdio.h&gt;\nint main()\n{\n int array[30],n,c,d,position,swap;\n clrscr();\n printf(\"Enter the legth of array\\n\");\n scanf(\"%d\",&amp;n);\n printf(\"Enter element in array\\n\");\n for(c=0;c&lt;n;c++)\n { scanf(\"%d\",&amp;array[c]); }\n for(c=0;c&lt;(n-1);c++)\n {\n  position = c;\n  for(d=c+1;d&lt;n;d++)\n  {\n  if(array[position] &gt; array[d])\n  position = d;\n  }\n if(position != c)\n  { swap = array[c];\n   array[c]= array[position];\n   array[position] = swap;\n  }\n }\nprintf(\"Sorted list\\n\");\nfor(c=0;c&lt;n;c++);\n{printf(\"%d\\n\",array[c]);}\ngetch();\n}\n\n\n\\\\Second program\n#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nint main()\n{\n int array[30],n,c,d,position,swap;\n clrscr();\n printf(\"Enter the legth of array\\n\");\n scanf(\"%d\",&amp;n);\n printf(\"Enter element in array\\n\");\n for(c=0;c&lt;n;c++)\n { scanf(\"%d\",&amp;array[c]); }\n for(c=0;c&lt;(n-1);c++)\n {\n  position = c;\n  for(d=c+1;d&lt;n;d++)\n  {\n   if(array[position] &gt; array[d])\n   position = d;\n  }\n  if(position != c)\n  { swap = array[c];\n    array[c]= array[position];\n    array[position] = swap;\n  }\n }\n printf(\"Sorted list\\n\");\n for(c=0;c&lt;n;c++);\n {printf(\"%d\\n\",array[c]);}\n getch();\n return 0; \n}\n</code></pre>\n\n<p>These two program is the program for selection sort. I think the first program and second program is almost the same but the output is not same. I use turbo c to run these two program</p>\n\n<p>In the first program, i copy from internet and the result is true (intput is 2 1/output is 1 2). For second program, i try to do it by my own (intput is 2 1/output is 3) and the result is false.</p>\n\n<p>Everyone plz help me. I got confuse. Thank you :]</p>\n"}, {"tags": ["c", "ansi-c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1456329307, "post_id": 35606614, "comment_id": 58897872, "body": "Good question. Complete with full enough source code and a easily understandable question. (+1)"}], "answers": [{"tags": [], "owner": {"reputation": 8716, "user_id": 2938364, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vNRRo.jpg?s=128&g=1", "display_name": "Markus Weninger", "link": "https://stackoverflow.com/users/2938364/markus-weninger"}, "is_accepted": true, "score": 3, "last_activity_date": 1456329308, "last_edit_date": 1495542205, "creation_date": 1456328927, "answer_id": 35606647, "question_id": 35606614, "link": "https://stackoverflow.com/questions/35606614/code-before-while1-does-not-run/35606647#35606647", "title": "Code before while(1) does not run", "body": "<p>Your assumption is wrong, your code does run, only <code>stdout</code> is not flushed, but buffered.</p>\n\n<p>Use <code>fflush(stdout)</code> after <code>printf(\"hello\")</code>, this forces stdout to be printed.</p>\n\n<p>And, as @Bathsheba pointed out, also a newline character (<code>\"\\n\"</code>) within the <code>printf</code> forces it to flush, which is explained <a href=\"https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin\">in this SO question</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1456328929, "creation_date": 1456328929, "answer_id": 35606651, "question_id": 35606614, "link": "https://stackoverflow.com/questions/35606614/code-before-while1-does-not-run/35606651#35606651", "title": "Code before while(1) does not run", "body": "<p>It <strong>does</strong> run, it's just that the output buffer is not <em>flushed</em> before your <code>while</code>.</p>\n\n<p>Use <code>printf(\"hello\\n\");</code> instead. The newline character will flush the buffer so writing the output immediately to your console.</p>\n"}], "owner": {"reputation": 6531, "user_id": 3159399, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5KyZP.jpg?s=128&g=1", "display_name": "Daniel Kucal", "link": "https://stackoverflow.com/users/3159399/daniel-kucal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1456329661, "accepted_answer_id": 35606647, "answer_count": 2, "score": -2, "last_activity_date": 1456329308, "creation_date": 1456328843, "last_edit_date": 1456328870, "question_id": 35606614, "link": "https://stackoverflow.com/questions/35606614/code-before-while1-does-not-run", "closed_reason": "Duplicate", "title": "Code before while(1) does not run", "body": "<p>I have code like this below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\n    printf(\"hello\");\n\n    while(1){\n        // whatever here\n    }\n}\n</code></pre>\n\n<p>and the question is: why the first instruction is skipped? It runs only the loop, hello is never printed. I compiled it with gcc and g++ with the same result.</p>\n"}, {"tags": ["c", "pragma", "gcc-warning"], "answers": [{"tags": [], "owner": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "is_accepted": true, "score": 6, "last_activity_date": 1456329098, "creation_date": 1456329098, "answer_id": 35606715, "question_id": 35606480, "link": "https://stackoverflow.com/questions/35606480/how-to-disable-gcc-warning-wstack-usage-temporarily/35606715#35606715", "title": "How to disable GCC warning &quot;Wstack-usage&quot; temporarily?", "body": "<p>The clue is in the error message:</p>\n\n<blockquote>\n  <p>warning: stack usage might be unbounded [-Wstack-usage=]</p>\n</blockquote>\n\n<p>Thus, the #pragma you need to use is:</p>\n\n<pre><code>#pragma GCC diagnostic ignored \"-Wstack-usage=\"\n</code></pre>\n"}], "owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1726, "favorite_count": 0, "accepted_answer_id": 35606715, "answer_count": 1, "score": 5, "last_activity_date": 1456329098, "creation_date": 1456328484, "question_id": 35606480, "link": "https://stackoverflow.com/questions/35606480/how-to-disable-gcc-warning-wstack-usage-temporarily", "title": "How to disable GCC warning &quot;Wstack-usage&quot; temporarily?", "body": "<p>I am trying to compile a project that imports this BiTStream <a href=\"https://github.com/gfto/bitstream/blob/master/mpeg/psi/descs_print.h\" rel=\"noreferrer\">file</a>.</p>\n\n<p>GCC outputs the following error:</p>\n\n<blockquote>\n  <p>warning: stack usage might be unbounded [-Wstack-usage=]</p>\n</blockquote>\n\n<p>Indeed, in the compilation command line (generated via CMake) I have:</p>\n\n<blockquote>\n  <p>-Wstack-usage=2048</p>\n</blockquote>\n\n<p>I want to keep this warning for the rest of the project but disable it for this specific file.</p>\n\n<p>I have checked <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"noreferrer\">GCC Warnings options</a> and <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.3.3/gcc/Diagnostic-Pragmas.html#Diagnostic-Pragmas\" rel=\"noreferrer\">GCC diagnostic pragmas</a> and tried:</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wswitch-enum\"\n#pragma GCC diagnostic ignored \"-Wformat\"\n#pragma GCC diagnostic ignored \"-Wswitch-default\"\n#pragma GCC diagnostic ignored \"-Wunused-parameter\"\n#pragma GCC diagnostic ignored \"-Wstack-usage\"\n\n#include &lt;bitstream/mpeg/psi/descs_print.h&gt;\n\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>But GCC still complains:</p>\n\n<blockquote>\n  <p>warning: unknown option after '#pragma GCC diagnostic' kind\n  [-Wpragmas]</p>\n  \n  <p>#pragma GCC diagnostic warning \"-Wstack-usage\"</p>\n</blockquote>\n\n<p>Note that the other warnings are correctly disabled.</p>\n\n<p>Is there a specific synatx for <code>Wstack-usage</code> ?</p>\n"}, {"tags": ["c++", "c", "multithreading"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 4, "creation_date": 1456328042, "post_id": 35606291, "comment_id": 58896936, "body": "Please select <i>one</i> of either C or C++."}, {"owner": {"reputation": 653, "user_id": 1786323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/112975361af2f98ffb8d7f6efdd9c7ef?s=128&d=identicon&r=PG", "display_name": "blackball", "link": "https://stackoverflow.com/users/1786323/blackball"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456328188, "post_id": 35606291, "comment_id": 58897029, "body": "@MikeCAT Why ? I could accept answers in either C or C++."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456328280, "post_id": 35606291, "comment_id": 58897095, "body": "Is that just me, or the question is completely unclear without context?"}, {"owner": {"reputation": 653, "user_id": 1786323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/112975361af2f98ffb8d7f6efdd9c7ef?s=128&d=identicon&r=PG", "display_name": "blackball", "link": "https://stackoverflow.com/users/1786323/blackball"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1456328312, "post_id": 35606291, "comment_id": 58897110, "body": "@Jeff The arrow here is only about the execution order, not data flow."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328314, "post_id": 35606291, "comment_id": 58897113, "body": "@blackball: Because C and C++ are different languages. Your question is already too broad for one language. But it might be narrowed down if you pick one of them."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456328360, "post_id": 35606291, "comment_id": 58897139, "body": "@EugeneSh.: I picked too broad, but I could have flipped a coin."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456328463, "post_id": 35606291, "comment_id": 58897221, "body": "(one of) the easiest way(s) is openmp."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328478, "post_id": 35606291, "comment_id": 58897227, "body": "@Olaf, Mike, I think it&#39;s legit to tag a question with multiple languages if the question is about algorithm in either of them..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456328575, "post_id": 35606291, "comment_id": 58897297, "body": "It&#39;s umm.. broad, I think, its unclear too:(  &#39;while (keep_running)&#39; what keep running?  Makes no sense."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456328600, "post_id": 35606291, "comment_id": 58897312, "body": "Ironically if this question is asked twice with C and C++ tags respectively then it definitely would be marked as duplicate of each other."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328613, "post_id": 35606291, "comment_id": 58897322, "body": "@Olaf it&#39;s code for C/C++"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328642, "post_id": 35606291, "comment_id": 58897343, "body": "@Olaf That&#39;s a typo, but <code>C+=</code> is indeed another language."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456328643, "post_id": 35606291, "comment_id": 58897345, "body": "There is a language-agnostic tag, IIRC."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456328764, "post_id": 35606291, "comment_id": 58897422, "body": "@user3528438: No kidding? Link?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456328795, "post_id": 35606291, "comment_id": 58897444, "body": "@Olaf <a href=\"https://github.com/ErisBlastar/cplusequality\" rel=\"nofollow noreferrer\">github.com/ErisBlastar/cplusequality</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456328882, "post_id": 35606291, "comment_id": 58897516, "body": "@user3528438: Reminds me of Vatical (not sure if there is an English description somewhere)."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328883, "post_id": 35606291, "comment_id": 58897519, "body": "@Olaf postfix operator has higher precedence than multiplicative operator."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456329063, "post_id": 35606291, "comment_id": 58897668, "body": "@Olaf: But it would never be interpreted as <code>1&#47;++</code>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456329138, "post_id": 35606291, "comment_id": 58897733, "body": "@Olaf <i>which</i> language?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456329263, "post_id": 35606291, "comment_id": 58897840, "body": "@Olaf, no <code>C&#47;C++</code>, according to precedence rules, would be evaluated as <code>C&#47;(C++)</code>. Didn&#39;t we already cover this?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456330171, "post_id": 35606291, "comment_id": 58898559, "body": "@EOF: Hmm, then it would be <code>C&#47;C++</code> -&gt; <code>1&#47;C(++ - 1)</code>? - too complicated, I&#39;ll stick with the UB. Let&#39;s clean this up."}], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 3040351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a955087f2c572813046770eb0a2abd?s=128&d=identicon&r=PG&f=1", "display_name": "idler1515", "link": "https://stackoverflow.com/users/3040351/idler1515"}, "is_accepted": false, "score": 0, "last_activity_date": 1456328351, "creation_date": 1456328351, "answer_id": 35606424, "question_id": 35606291, "link": "https://stackoverflow.com/questions/35606291/task-parallelization-and-data-synchronization-in-a-pipeline/35606424#35606424", "title": "Task parallelization and data synchronization in a pipeline", "body": "<p>Create two thread for A and B, put a barrier after them so that you don't run into conflict.\nCreate two thread for C &amp;&amp;D, process, put barrier\nFinish E. L</p>\n"}], "owner": {"reputation": 653, "user_id": 1786323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/112975361af2f98ffb8d7f6efdd9c7ef?s=128&d=identicon&r=PG", "display_name": "blackball", "link": "https://stackoverflow.com/users/1786323/blackball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1456330144, "creation_date": 1456328001, "last_edit_date": 1456330144, "question_id": 35606291, "link": "https://stackoverflow.com/questions/35606291/task-parallelization-and-data-synchronization-in-a-pipeline", "title": "Task parallelization and data synchronization in a pipeline", "body": "<p>I have 5 independent components A, B, C, D, E, where A and B are producing data, C and D are processing both of the data from A and B, E will visualize the results from C and D.</p>\n\n<p>The most straightforward way to implement this pipeline is put them all in one thread:</p>\n\n<pre><code>while (keep_running)\n    A-&gt;B-&gt;C-&gt;D-&gt;E\n</code></pre>\n\n<p>But C and D could be in parallel to be more efficient. And So may be the components A and B.  </p>\n\n<pre><code>while (keep_running)\n    {A &amp;&amp; B could be in parallel} -&gt; {C &amp;&amp; D in parallel} -&gt; E\n</code></pre>\n\n<p>I wonder what is the efficient way to implement this.  </p>\n\n<p>Thanks!</p>\n\n<p>Update: Sorry for the unclearence. </p>\n\n<p>Let me just formulate my question in a pseudo codes manner. </p>\n\n<pre><code>// keep_running is just a bool, could be updated to terminate the loop \nwhile (keep_running) \n      run A; // produce data\n      run B; // produce data \n      run C; // processing data from A and B \n      run D; // processing data from A and B\n      run E; // visualize results from B and C\n\nwhile (keep_running)\n      create_thread ta to run A;\n      create thread tb to run B;\n      ta.run();\n      tb.run();\n      join ta and tb;\n      create thread tc to C;\n      create thread td for D;\n      tc.run();\n      td.run();\n      join tc and td;\n      run E; \n      destroy ta,tb,tc,td;\n\n// I think above implementation is not efficient, because create and destroy threads every time\n// I wonder if there're some efficient implementation like:\ncreate thread ta,tb,tc,td;\nwhile (keep_running)\n      ta.run_once();\n      tb.run_once();\n      wait ta and tb; // A and B finish a round and go to sleep.\n      tc.run_once();\n      td.run_once();\n      wait tc and td;\n      run E;\ndestroy ta, tb, tc, td\n\n// Or other more efficient way ?\n</code></pre>\n\n<p>I don't have much experience in threading, apologize for the unclear issue, and hope someone could give me some hints that I could figure this out. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1456328289, "post_id": 35606231, "comment_id": 58897101, "body": "How is the second <code>if()</code> in <code>if(reverse == 0){}else if(reverse == 0 &amp;&amp; numeric == 0){}</code> <i>ever</i> supposed to be reached?"}, {"owner": {"reputation": 25, "user_id": 3564315, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a0568f6e33ef08058f87ceece3dfc1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Cristian Popescu", "link": "https://stackoverflow.com/users/3564315/andrei-cristian-popescu"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456328546, "post_id": 35606231, "comment_id": 58897277, "body": "thanks for i&#39;ve changed but is still not working."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456328658, "post_id": 35606231, "comment_id": 58897361, "body": "Are you sure <code>crescsort()</code> is a stable sort?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1456328660, "post_id": 35606231, "comment_id": 58897362, "body": "I don&#39;t see <code>strcasecomp</code> in your code,"}, {"owner": {"reputation": 25, "user_id": 3564315, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a0568f6e33ef08058f87ceece3dfc1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Cristian Popescu", "link": "https://stackoverflow.com/users/3564315/andrei-cristian-popescu"}, "edited": false, "score": 0, "creation_date": 1456328790, "post_id": 35606231, "comment_id": 58897439, "body": "yes i think it is a problem in if staments i think i miss something."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1456338136, "creation_date": 1456338136, "answer_id": 35610028, "question_id": 35606231, "link": "https://stackoverflow.com/questions/35606231/strcasecomp-doesnt-work-in-my-code/35610028#35610028", "title": "strcasecomp doesn&#39;t work in my code", "body": "<p>The issue is <code>crescsort()</code> in that it does not guarantee the original order if elements compared are equal. </p>\n\n<blockquote>\n  <p>Unstable sorting algorithms can be specially implemented to be stable. One way of doing this is to artificially extend the key comparison, so that comparisons between two objects with otherwise equal keys are decided using the order of the entries in the original input list as a tie-breaker. Remembering this order, however, may require additional time and space. Wikipedia ref <a href=\"https://en.wikipedia.org/wiki/Sorting_algorithm#Stability\" rel=\"nofollow\">Stability</a></p>\n</blockquote>\n\n<p>To fix, change <code>crescsort()</code>.</p>\n\n<p>It is not a <code>strcasecmp()</code> issue.</p>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 1, "last_activity_date": 1456340299, "creation_date": 1456340299, "answer_id": 35610702, "question_id": 35606231, "link": "https://stackoverflow.com/questions/35606231/strcasecomp-doesnt-work-in-my-code/35610702#35610702", "title": "strcasecomp doesn&#39;t work in my code", "body": "<p>basically a == A if you ignore case. So both results </p>\n\n<pre><code>A\na\n</code></pre>\n\n<p>and </p>\n\n<pre><code>a\nA\n</code></pre>\n\n<p>are correct (because they are equivalent). You are in fact sorting a list with 2 entries a and a. Seems like you expect order of equal keys to be preserved, most sorts dont guarantee that. Why not write a sort that does preserve order :-)</p>\n"}], "owner": {"reputation": 25, "user_id": 3564315, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a0568f6e33ef08058f87ceece3dfc1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Cristian Popescu", "link": "https://stackoverflow.com/users/3564315/andrei-cristian-popescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 35610702, "answer_count": 2, "score": -1, "last_activity_date": 1456340299, "creation_date": 1456327861, "last_edit_date": 1456328741, "question_id": 35606231, "link": "https://stackoverflow.com/questions/35606231/strcasecomp-doesnt-work-in-my-code", "title": "strcasecomp doesn&#39;t work in my code", "body": "<p>I want to make a program which are sorting input lines. There is an argument \"-f\". This in case you want to compare strings and every upper character to be seen as a lower during comparison. For this I used strcasecomp function. But it is not working. Also to understand my code \"-n\" is in case you want to sort them numerically instead of lexicographically and -r for a reverse sort. If I need to post more code please tell me.</p>\n\n<p>For exaple I do this:</p>\n\n<pre><code>sort -f\na\nA\n</code></pre>\n\n<p>the expected result should be:</p>\n\n<pre><code>a\nA\n</code></pre>\n\n<p>but I get </p>\n\n<pre><code>A\na\n</code></pre>\n\n<p>This my main:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    int nlines; /* number of input lines read */\n    int numeric = 0; /* 1 if numeric sort */\n    int reverse = 0;\n    int foldupper = 0;\n    if (argc &gt; 1 &amp;&amp; strcmp(argv[1], \"-n\") == 0)\n        numeric = 1;\n    if (argc &gt; 1 &amp;&amp; strcmp(argv[1], \"-r\") == 0)\n        reverse = 1;\n    if (argc &gt; 2 &amp;&amp; strcmp(argv[2], \"-r\") == 0)\n        reverse = 1;\n    if (argc &gt; 1 &amp;&amp; strcmp(argv[1], \"-f\") == 0)\n        foldupper = 1;\n    if (argc &gt; 2 &amp;&amp; strcmp(argv[2], \"-f\") == 0)\n        foldupper = 1;\n    if ((nlines = readlines(lineptr, MAXLINES)) &gt;= 0)\n    {\n         if(reverse == 0 &amp;&amp; numeric == 1)\n        {\n            crescsort((void**) lineptr, 0, nlines-1,(int (*)(void*,void*))(numeric ? numcmp : strcmp));\n\n        }\n        else if(reverse == 0 &amp;&amp; numeric == 0)\n        {\n            //bug here?\n            crescsort((void**) lineptr, 0, nlines-1,(int (*)(void*,void*))(foldupper ? strcasecmp : strcmp));\n        }\n       else if ( reverse == 1 &amp;&amp; numeric == 0  )\n        {\n            //or here?\n            descsort((void**) lineptr, 0, nlines-1,(int (*)(void*,void*))(foldupper ? strcasecmp : strcmp));\n        }\n\n        writelines(lineptr, nlines);\n        return 0;\n    }\n    else\n    {\n        printf(\"input too big to sort\\n\");\n        return 1;\n    }\n}\n</code></pre>\n\n<p>And this is the sort function</p>\n\n<pre><code>void crescsort(void *v[], int left, int right,int (*comp)(void *, void *))\n{\n    int i, last;\n    void swap(void *v[], int , int );\n    if (left &gt;= right) /* do nothing if array contains */\n        return; /* fewer than two elements */\n    swap(v, left, (left + right)/2);\n    last = left;\n    for (i = left+1; i &lt;= right; i++)\n    if ((*comp)(v[i], v[left]) &lt; 0)\n        swap(v, ++last, i);\n    swap(v, left, last);\n    crescsort(v, left, last-1, comp);\n    crescsort(v, last+1, right, comp);\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456329911, "post_id": 35606220, "comment_id": 58898351, "body": "Why are you using <code>dup()</code> after the second <code>popenin()</code>? After the first <code>popenin()</code> you used <code>dup2()</code>, which is the sane way of doing it."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456330463, "post_id": 35606220, "comment_id": 58898789, "body": "The behavior is the same with <code>dup2</code>. The <code>dup</code> is there because then I can create the second example from the first one by moving a single line of code."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1456331442, "post_id": 35606220, "comment_id": 58899582, "body": "@EliasVanOotegem: Not in general (you might be thinking of <code>fflush(stdin)</code>).  But in this case, the code has previously closed and reopened fd 1 (by using <code>dup2</code>).  I wouldn&#39;t say it&#39;s UB because the C standard doesn&#39;t know anything about <code>dup2</code>, but it&#39;s probably not the right way to do this - the stdio subsystem certainly isn&#39;t expecting to have its fds moved around behind its back."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1456331670, "post_id": 35606220, "comment_id": 58899764, "body": "@EliasVanOotegem I don&#39;t think that <code>fflush(stdout)</code> is UB. Anyway, the problem persists if you use <code>write</code> instead of <code>printf</code> and <code>fflush</code>."}], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456328532, "creation_date": 1456327835, "last_edit_date": 1456328532, "question_id": 35606220, "link": "https://stackoverflow.com/questions/35606220/strange-behavior-of-stdout-redirected-to-a-pipe", "title": "strange behavior of stdout redirected to a pipe", "body": "<p>Here is a minimal example demonstrating my problem. I have a program forking a new subprocess and redirecting stdout to it. It works fine. Then I fork a second subprocess and redirect stdout to it and I close the first pipe. I would expect that the first subprocess receives EOF in its input pipe and terminates. Instead it remains in reading state until the main task exits. I do not understand why. I would expect the first pipe to be closed and the first child process to become a zombie.</p>\n\n<p>Here is the code demonstrating the issue:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint popenin(char *command) {\n    int                 pin[2];\n    pid_t               pid;\n\n    if (pipe(pin) != 0) exit(1);\n\n    pid = fork();\n    if (pid &lt; 0) exit(1);\n\n    if (pid == 0) {\n        close(pin[1]);\n        dup2(pin[0], 0);\n        close(pin[0]);\n        execlp(\"bash\", \"bash\", \"-c\", command, NULL);\n        perror(\"Error:\");\n        exit(1);\n    } else {\n        close(pin[0]);\n        return(pin[1]);\n    }\n}\n\nint main() {\n    int fd;\n    fd = popenin(\"gzip &gt; foo1.gz\");\n    dup2(fd, 1);\n    close(fd);\n    printf(\"foo 1 content\\n\");fflush(stdout);\n    fd = popenin(\"gzip &gt; foo2.gz\");\n    close(1);\n    dup(fd);\n    close(fd);\n    printf(\"foo 2 content\\n\");fflush(stdout);\n    sleep(10000);\n}\n</code></pre>\n\n<p>This program creates two files foo1.gz and foo2.gz, both empty and there are two gzip processes running in the system. I'd expect to see the first file completed, closed and the first gzip process to exit.</p>\n\n<p>If I modify the minimal example in the following way, it works as expected.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint popenin(char *command) {\n    int                 pin[2];\n    pid_t               pid;\n\n    if (pipe(pin) != 0) exit(1);\n\n    pid = fork();\n    if (pid &lt; 0) exit(1);\n\n    if (pid == 0) {\n        close(pin[1]);\n        dup2(pin[0], 0);\n        close(pin[0]);\n        execlp(\"bash\", \"bash\", \"-c\", command, NULL);\n        perror(\"Error:\");\n        exit(1);\n    } else {\n        close(pin[0]);\n        return(pin[1]);\n    }\n}\n\nint main() {\n    int fd;\n    fd = popenin(\"gzip &gt; foo1.gz\");\n    dup2(fd, 1);\n    close(fd);\n    printf(\"foo 1 content\\n\");fflush(stdout);\n    close(1);                    // close(1) is moved before popenin\n    fd = popenin(\"gzip &gt; foo2.gz\");\n    dup(fd);\n    close(fd);\n    printf(\"foo 2 content\\n\");fflush(stdout);\n    sleep(10000);\n}\n</code></pre>\n\n<p>Can somebody explain why the first version does not work?</p>\n"}, {"tags": ["c", "segmentation-fault", "maze"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456327055, "post_id": 35605841, "comment_id": 58896220, "body": "I am pretty sure you should replace the <code>&lt;=</code> comparisons in <code>for</code> loops to <code>&lt;</code>..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456327417, "post_id": 35605841, "comment_id": 58896481, "body": "Do not use homebrew boolean types. Use the standard type and <code>stdbool.h</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456327529, "post_id": 35605841, "comment_id": 58896565, "body": "What did you find out when you ran it under your debugger?  All array indices within bounds?  Pointers not NULL?"}, {"owner": {"reputation": 33, "user_id": 5975195, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G3C5SKl7_Xk/AAAAAAAAAAI/AAAAAAAALmY/BJ_tiafzs-Q/photo.jpg?sz=128", "display_name": "Gabriella", "link": "https://stackoverflow.com/users/5975195/gabriella"}, "edited": false, "score": 0, "creation_date": 1456327534, "post_id": 35605841, "comment_id": 58896570, "body": "This is a school assignment, I was given the framework (including the Boolean type) that I have to use"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456327647, "post_id": 35605841, "comment_id": 58896660, "body": "@Gabriella learn to use a debugger.  Do it now.  Do it before you attempt to develop any more code.  Ignore any protests or instructions from your teacher/prof/TA about not using a debugger, do it anyway."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456327696, "post_id": 35605841, "comment_id": 58896700, "body": "@MartinJames why would instructors protest it?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456327763, "post_id": 35605841, "comment_id": 58896741, "body": "Also note that your question does not expalin what the code is supposed to do.  It&#39;s a waste of our time to reverse-engineer your source code into a requirement, especially when you already know it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456327830, "post_id": 35605841, "comment_id": 58896783, "body": "@EugeneSh. I&#39;ve heard that it happens.  I cannot explain it - some teachers seem to be uncaring, insane or actively malicious:)"}, {"owner": {"reputation": 33, "user_id": 5975195, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G3C5SKl7_Xk/AAAAAAAAAAI/AAAAAAAALmY/BJ_tiafzs-Q/photo.jpg?sz=128", "display_name": "Gabriella", "link": "https://stackoverflow.com/users/5975195/gabriella"}, "edited": false, "score": 0, "creation_date": 1456327884, "post_id": 35605841, "comment_id": 58896822, "body": "As indicated in the main, the entire purpose is to find if there is a solution to the maze."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456328247, "post_id": 35605841, "comment_id": 58897072, "body": "@Gabriella what maze?  &quot;testMaze.txt&quot; is not available to us."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456328313, "post_id": 35605841, "comment_id": 58897111, "body": "The only one with the environment to effectively test and debug this app is you, @Gabriella.  Debugger..................."}, {"owner": {"reputation": 33, "user_id": 5975195, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G3C5SKl7_Xk/AAAAAAAAAAI/AAAAAAAALmY/BJ_tiafzs-Q/photo.jpg?sz=128", "display_name": "Gabriella", "link": "https://stackoverflow.com/users/5975195/gabriella"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456328944, "post_id": 35605841, "comment_id": 58897562, "body": "@MartinJames I have updated the post."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5975195, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G3C5SKl7_Xk/AAAAAAAAAAI/AAAAAAAALmY/BJ_tiafzs-Q/photo.jpg?sz=128", "display_name": "Gabriella", "link": "https://stackoverflow.com/users/5975195/gabriella"}, "edited": false, "score": 0, "creation_date": 1456327416, "post_id": 35605942, "comment_id": 58896480, "body": "my problem is it never even gets to that line, I&#39;ve put &quot; printf(&quot;gets into if statement\\n&quot;); &quot; as the very first line in the if, and it never prints"}], "tags": [], "owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "is_accepted": true, "score": 1, "last_activity_date": 1456327985, "last_edit_date": 1456327985, "creation_date": 1456327123, "answer_id": 35605942, "question_id": 35605841, "link": "https://stackoverflow.com/questions/35605841/if-statement-causing-segmentation-fault-11-in-c/35605942#35605942", "title": "if statement causing &quot;Segmentation fault: 11&quot; in C", "body": "<p>If the segmentation fault happens here it means that you are trying to access data from your 2d array outside of the boundaries. The following line causes the segmentation fault. </p>\n\n<p><code>position = maze[unvisitedCell.row][unvisitedCell.column];</code></p>\n\n<p>You need to debug your program an make sure that <code>unvisitedCell.row</code> and <code>unvisitedCell.column</code> are smaller than the max dimensions (<code>MAX_DIMENSION</code> and <code>MAX_DIMENSION</code>).  </p>\n\n<p>Note also that:</p>\n\n<p>Your pointer <code>cellToAdd</code> is initialize to <code>NULL</code> but it is never initialize to point to a <code>CellNode</code>.</p>\n\n<p>So you are trying to access a <code>NULL</code> pointer right after the <code>if</code> statement: <code>cellToAdd-&gt;cell = unvisitedCell;</code>. This will cause another the segmentation fault.</p>\n\n<p>Note that you have the same issue with <code>mazePaths</code></p>\n"}], "owner": {"reputation": 33, "user_id": 5975195, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G3C5SKl7_Xk/AAAAAAAAAAI/AAAAAAAALmY/BJ_tiafzs-Q/photo.jpg?sz=128", "display_name": "Gabriella", "link": "https://stackoverflow.com/users/5975195/gabriella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 35605942, "answer_count": 1, "score": 1, "last_activity_date": 1456441561, "creation_date": 1456326825, "last_edit_date": 1456332039, "question_id": 35605841, "link": "https://stackoverflow.com/questions/35605841/if-statement-causing-segmentation-fault-11-in-c", "title": "if statement causing &quot;Segmentation fault: 11&quot; in C", "body": "<p>The purpose of this code is to use a backtracking algorithm to solve the maze. \nThe pseudo code given for the algorithm is:</p>\n\n<pre><code>read in the maze;\ninitialize the list;\ngoalCell = the position of the escape hatch in the maze;\nstartCell = the initial position of the mouse in the maze;\ncurrentCell = startCell;\nwhile currentCell is not the goalCell\n  mark currentCell as visited;\n  add to the list the unvisited open neighbours of currentCell;\n  if the list is empty\n    the mouse is trapped: we tried all routes and failed to find an escape;\n  else\n    get the next cell from the list and make it currentCell;\nend while;\nthe mouse can escape the maze: we reached the goal cell.\n</code></pre>\n\n<p>No matter what I try, my code never runs past the starred line. I have ran it without the if statement, and it still doesn't get past that one line. </p>\n\n<p>I compile it in terminal and it shows no errors or warnings. After running it in terminal, the output is:</p>\n\n<pre><code>1 1 1 1 1  \n1 0 0 e 1  \n1 1 1 0 1  \n1 m 1 0 1  \n1 0 0 0 1  \n1 1 1 1 1  \n\n1 1 1 1 1  \n1 0 0 e 1  \n1 1 1 0 1  \n1 . 1 0 1  \n1 0 0 0 1  \n1 1 1 1 1  \nSegmentation fault: 11\n</code></pre>\n\n<p>The file \"testMaze.txt\" is as follows:</p>\n\n<pre><code>6 5\n1 1 1 1 1\n1 0 0 e 1\n1 1 1 0 1\n1 m 1 0 1\n1 0 0 0 1\n1 1 1 1 1\n</code></pre>\n\n<hr>\n\n<p>I have added:\n    printf(\"mazeRows is %d, and unvisitedCell.row is %d\\n\", mazeRows, unvisitedCell.row );</p>\n\n<pre><code>assert( unvisitedCell.row &lt; mazeRows );\nassert( unvisitedCell.column &lt; mazeCols );\n\nprintf( \"the char is %c\\n\", maze[unvisitedCell.row][unvisitedCell.column] );\n</code></pre>\n\n<p>and changed the if statement to:</p>\n\n<pre><code>if ( maze[unvisitedCell.row][unvisitedCell.column] == '0' ) \n</code></pre>\n\n<p>and ran it in terminal. The output I get is:</p>\n\n<pre><code>1 1 1 1 1  \n1 0 0 e 1  \n1 1 1 0 1  \n1 m 1 0 1  \n1 0 0 0 1  \n1 1 1 1 1  \n\n1 1 1 1 1  \n1 0 0 e 1  \n1 1 1 0 1  \n1 . 1 0 1  \n1 0 0 0 1  \n1 1 1 1 1  \nmazeRows is 5, and unvisitedCell.row is 4\nthe char is 0\nSegmentation fault: 11\n</code></pre>\n\n<hr>\n\n<p>The entire code, written using Xcode, is:</p>\n\n\n\n<pre class=\"lang-css prettyprint-override\"><code>#include \"Maze.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\n//-------------------------------------------------------------------------------------\n// CONSTANTS and TYPES\n//-------------------------------------------------------------------------------------\n\n#define MAX_DIMENSION 20\n\n// constant definitions for the different cell states\nconst char WALL    = '1';\nconst char SPACE   = '0';\nconst char VISITED = '.';\nconst char MOUSE   = 'm';\nconst char EXIT    = 'e';\n\ntypedef enum BOOL { false, true } Boolean;\n\nstruct CELL\n{\n    int row;\n    int column;\n};\n\ntypedef struct CELL Cell;\n\ntypedef struct CELL_NODE CellNode;\n\nstruct CELL_NODE\n{\n    Cell     cell;\n    CellNode *next;\n};\n\n//-------------------------------------------------------------------------------------\n// VARIABLES\n//-------------------------------------------------------------------------------------\n\nCellNode *top = NULL;\n\n// a 2D array used to store the maze\nchar maze[MAX_DIMENSION][MAX_DIMENSION];\nint mazeRows;\nint mazeCols;\n\n// holds the location of the mouse and escape hatch\nCell mouse;\nCell escape;\n\n//-------------------------------------------------------------------------------------\n// PROTOTYPES\n//-------------------------------------------------------------------------------------\n\n// basic cell manipulation\nBoolean equalCells(const Cell cell1, const Cell cell2);\nCell makeCell(const int row, const int col);\nBoolean validCell(const Cell theCell);\n\n// routines for managing our backtracking\nBoolean noMoreCells();\nCell nextCell();\nvoid addCell(const Cell cell);\n\nvoid printMaze();\nvoid loadMaze();\n\nBoolean solveMaze();\n\n// our invariant checker\nvoid checkState();\n\n//-------------------------------------------------------------------------------------\n// FUNCTIONS\n//-------------------------------------------------------------------------------------\n\nint main( int argc, char *argv[] )\n{\n    loadMaze();\n    printMaze();\n\n    if ( solveMaze() )\n        printf( \"The mouse is free!!!!\\n\" );\n    else\n        printf( \"The mouse is trapped!!!!\\n\" );\n\n    printf( \"\\nEnd of processing\\n\" );\n\n    return EXIT_SUCCESS;\n}\n\n\n//////////////////////////////////////////////\n// Cell routines\n//////////////////////////////////////////////\n\nBoolean equalCells( const Cell cell1, const Cell cell2 )\n{\n    //assert( cell1.row != cell2.row &amp;&amp; cell1.column != cell2.column );\n\n    if ( cell1.row == cell2.row &amp;&amp; cell1.column == cell2.column )\n        return true;\n    else\n        return false;\n}\n\nCell makeCell( const int row, const int col )\n{\n    Cell newCell;\n    newCell.row = row;\n    newCell.column = col;\n\n    return newCell;\n}\n\nBoolean validCell( const Cell theCell )\n{\n    if ( theCell.row &lt; mazeRows &amp;&amp; theCell.column &lt; mazeCols )\n        return true;\n    else\n        return false;\n}\n\nBoolean noMoreCells()\n{\n    if ( top-&gt;next == NULL )\n        return true;\n    else\n        return false;\n}\n\nCell nextCell()\n{\n    return top-&gt;cell;\n}\n\nvoid addCell( const Cell cell )\n{\n    CellNode *cellToAdd = NULL;\n\n    cellToAdd-&gt;cell = cell;\n    cellToAdd-&gt;next = top;\n\n    top-&gt;next = cellToAdd;\n}\n\n//////////////////////////////////////////////\n// List routines\n//////////////////////////////////////////////\n\nBoolean solveMaze()\n{\n    Boolean solved = false;\n    CellNode *mazePaths = NULL, *cellToAdd = NULL;\n    Cell currentCell, unvisitedCell;\n    char ch, position;\n    int row, col;\n\n    for ( row = 0; row &lt; mazeRows; row++ )      //checked and works\n    {\n        for ( col = 0; col &lt; mazeCols; col++ )\n        {\n            ch = maze[row][col];\n\n            if ( ch == 'm' )\n            {\n                mouse.row = row;\n                mouse.column = col;\n\n                currentCell.row = row;\n                currentCell.column = col;\n            }\n            else if ( ch == 'e' )\n            {\n                escape.row = row;\n                escape.column = col;\n            }\n        }\n    }\n\n    while ( maze[currentCell.row][currentCell.column] != maze[escape.row][escape.column] )\n    {\n        maze[currentCell.row][currentCell.column] = '.';\n\n        printf(\"\\n\");\n        printMaze();\n\n        //if the one below current\n        unvisitedCell.row = currentCell.row + 1;        //works\n        unvisitedCell.column = currentCell.column;      //works\n\n        printf(\"mazeRows is %d, and unvisitedCell.row is %d\\n\", mazeRows, unvisitedCell.row );\n\n        assert( unvisitedCell.row &lt; mazeRows );\n        assert( unvisitedCell.column &lt; mazeCols );\n\n        printf( \"the char is %c\\n\", maze[unvisitedCell.row][unvisitedCell.column] );\n\n        if ( maze[unvisitedCell.row][unvisitedCell.column] == '0' )      //gives \"Segmentation fault: 11\"\n        {\n    ***************************************************************************\n            printf(\"gets into first if\");\n            cellToAdd-&gt;cell = unvisitedCell;\n            cellToAdd-&gt;next = top;\n\n            mazePaths-&gt;next = cellToAdd;\n\n            maze[unvisitedCell.row][unvisitedCell.column] = 'A';\n        }\n\n        //if one above current\n        unvisitedCell.row = currentCell.row - 1;\n        unvisitedCell.column = currentCell.column;\n\n        position = maze[unvisitedCell.row][unvisitedCell.column];\n        printf(\"the pos is %c\\n\", position);\n\n        if ( position == '0' )\n        {\n            printf(\"gets into second if\");\n            cellToAdd-&gt;cell = unvisitedCell;\n            cellToAdd-&gt;next = top;\n\n            mazePaths-&gt;next = cellToAdd;\n\n            maze[unvisitedCell.row][unvisitedCell.column] = 'B';\n        }\n\n        //if one to the right of current\n        unvisitedCell.row = currentCell.row;\n        unvisitedCell.column = currentCell.column + 1;\n\n        position = maze[unvisitedCell.row][unvisitedCell.column];\n        printf(\"the pos is %c\\n\", position);\n\n        if ( position == '0' )\n        {\n            printf(\"gets into third if\");\n            cellToAdd-&gt;cell = unvisitedCell;\n            cellToAdd-&gt;next = top;\n\n            mazePaths-&gt;next = cellToAdd;\n\n            maze[unvisitedCell.row][unvisitedCell.column] = 'R';\n        }\n\n        //if one to the left of current\n        unvisitedCell.row = currentCell.row;\n        unvisitedCell.column = currentCell.column - 1;\n\n        position = maze[unvisitedCell.row][unvisitedCell.column];\n        printf(\"the pos is %c\\n\", position);\n\n        if ( position == '0' )\n        {\n            printf(\"gets into fourth if\");\n            cellToAdd-&gt;cell = unvisitedCell;\n            cellToAdd-&gt;next = top;\n\n            mazePaths-&gt;next = cellToAdd;\n\n            maze[unvisitedCell.row][unvisitedCell.column] = 'L';\n        }\n\n        if ( noMoreCells() )\n        {\n            printf( \"The mouse is trapped: we tried all routes and failed to find an escape!\" );\n        }\n        else\n        {\n            printf(\"there are still more cells\\n\");\n            currentCell.row = mazePaths-&gt;cell.row;\n            currentCell.column = mazePaths-&gt;cell.column;\n        }\n    }\n\n    return solved;\n}\n\nvoid checkState()\n{\n}\n\n\n//////////////////////////////////////////////\n// Maze routines\n//////////////////////////////////////////////\n\nvoid loadMaze()     //checked and works\n{\n    char input[MAX_DIMENSION];\n    char ch;\n    int column, index, stringIndex;\n    char *line = NULL;\n    size_t buffer = MAX_DIMENSION;\n    FILE *maze_input = fopen( \"testMaze.txt\", \"r\" );\n\n    getline( &amp;line, &amp;buffer, maze_input );\n\n    //to find columns\n    stringIndex = 0;\n    index = 0;\n    ch = line[index];\n\n    while ( ch != ' ' )\n    {\n        input[stringIndex] = ch;\n        stringIndex++;\n        index++;\n        ch = line[index];\n    }\n\n    mazeCols = atoi( input );\n\n    //to find rows\n    stringIndex = 0;\n    ch = line[index];\n\n    while ( ch != '\\0' )\n    {\n        input[stringIndex] = ch;\n        stringIndex++;\n        index++;\n        ch = line[index];\n    }\n\n    mazeRows = atoi( input );\n\n    //reads in the actual maze\n    for ( int row = 0; row &lt;= mazeRows; row++ )\n    {\n        getline( &amp;line, &amp;buffer, maze_input );\n\n        ch = line[0];\n        column = 0;\n        index = 0;\n\n        while ( ch != '\\0' )\n        {\n            maze[row][column] = ch;\n\n            index += 2;\n            column++;\n            ch = line[index];\n        }\n    }\n}\n\nvoid printMaze()    //checked and works\n{\n    for ( int row = 0; row &lt;= mazeRows; row++ )\n    {\n        for ( int column = 0; column &lt; mazeCols; column++ )\n        {\n            printf( \"%c \", maze[row][column] );\n        }\n\n        printf( \"\\n\" );\n    }\n}\n</code></pre>\n\n<p>\n"}, {"tags": ["c", "linux", "gstreamer"], "answers": [{"comments": [{"owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "edited": false, "score": 0, "creation_date": 1456501717, "post_id": 35612422, "comment_id": 58992453, "body": "thansk mate , That really helped and also now i got an idea of how to change properties of other GstElements. Thanks"}], "tags": [], "owner": {"reputation": 1894, "user_id": 2236844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5620cf38b22e63fb93c979b7af333422?s=128&d=identicon&r=PG", "display_name": "thiagoss", "link": "https://stackoverflow.com/users/2236844/thiagoss"}, "is_accepted": true, "score": 2, "last_activity_date": 1456345709, "creation_date": 1456345709, "answer_id": 35612422, "question_id": 35605246, "link": "https://stackoverflow.com/questions/35605246/change-text-of-clock-display-using-gstreamer-0-10/35612422#35612422", "title": "change text of clock display using gstreamer 0.10", "body": "<p>You can list the properties of clockoverlay with:</p>\n\n<pre><code>gst-inspect-1.0 clockoverlay\n</code></pre>\n\n<p>There should be properties related to the color of the text. In 1.0 it is named 'color'. Then just use g_object_set to set the color as an int in ARGB format. There is also an 'outline-color' to make it even more visible.</p>\n"}], "owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 35612422, "answer_count": 1, "score": 0, "last_activity_date": 1456345709, "creation_date": 1456325111, "question_id": 35605246, "link": "https://stackoverflow.com/questions/35605246/change-text-of-clock-display-using-gstreamer-0-10", "title": "change text of clock display using gstreamer 0.10", "body": "<p>os : linux\ngstreamer version : 0.10(this is requirement , so I cant migrate to 1.0)</p>\n\n<p>Issue: change default text with grey to something more visible like black for clock display</p>\n\n<p>Summary:\nI am using gstreamer c code to stream video from webcam and at top of video it display time but unfortunately its in grey so its difficult to see it . Can someone please let me know how to make to black or to some other colour.\nbelow is my snippet of code.</p>\n\n<pre><code>    source         = gst_element_factory_make( \"v4l2src\",          \"source\"         );\n    g_object_set( G_OBJECT ( source ), \"device\", \"/dev/video0\", NULL );\n\n\n    clockDisplay   = gst_element_factory_make( \"clockoverlay\",     \"clock-time\"     );\n    capsFilter     = gst_element_factory_make( \"capsfilter\",       \"camera_caps\"    );\n    conv           = gst_element_factory_make( \"ffmpegcolorspace\", \"Colorconverter\" );\n\n    videoRate      = gst_element_factory_make( \"videorate\",        \"videorate-element\");\n    capsFilterRate = gst_element_factory_make( \"capsfilter\",       \"video-rate\");\n    videoEnc       = gst_element_factory_make( \"ffenc_mpeg4\",      \"videoenc\" );\n    udpSink        = gst_element_factory_make( \"udpsink\",          \"udpsink\"  );\n    g_object_set( G_OBJECT( udpSink ),\n                  \"host\", hostAdd.c_str(), \n                  \"port\", PORT_NUM_REMOTE_FOR_STREAMING,\n                  NULL\n                  );\n\n    // cap filter #1\n    caps           = gst_caps_from_string( \"video/x-raw-yuv,format=(fourcc)YUY2,width=320,height=240,framerate=10/1\" );\n    g_object_set ( capsFilter, \"caps\", caps, NULL );\n    gst_caps_unref( caps );\n</code></pre>\n"}, {"tags": ["c", "strcmp"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 3, "creation_date": 1456322514, "post_id": 35604226, "comment_id": 58892949, "body": "Note: They say <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">you shouldn&#39;t case the result of <code>malloc()</code> in C</a>."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1456323079, "post_id": 35604226, "comment_id": 58893390, "body": "<code>line[0]</code> is a <code>char</code>, not a <code>char *</code>. You probably wanted to write <code>if (line[0] == &#39;a&#39;)</code> instead"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456324668, "post_id": 35604282, "comment_id": 58894609, "body": "So can yoou explain to me why this also willnot work  if(strcmp(*(line+i), &quot;a&quot;) == 0){"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456325578, "post_id": 35604282, "comment_id": 58895342, "body": "@MFB The expression <code>*(line+i)</code> is the same as <code>line[i]</code>, which is of type <code>char</code>, and therefore invalid as the first argument to <code>strcmp</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1456322595, "creation_date": 1456322595, "answer_id": 35604282, "question_id": 35604226, "link": "https://stackoverflow.com/questions/35604226/strcmp-crashes-when-comparing-with-a-malloc-array/35604282#35604282", "title": "strcmp crashes when comparing with a malloc array", "body": "<p>The <code>strcmp</code> function expects a <code>char *</code> for the first argument, but you're passing a <code>char</code>.  Similarly with <code>strcpy</code>.  This caused undefined behavior.</p>\n\n<p>Your compiler should have given you a warning regarding this.</p>\n\n<p>If what you're trying to do is see if a given character in the string is <code>a</code>, you would do it like this:</p>\n\n<pre><code>if (line[i] == 'a')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456324733, "post_id": 35604283, "comment_id": 58894671, "body": "I want to compare it character by character"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456324960, "post_id": 35604283, "comment_id": 58894843, "body": "@MFB <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow noreferrer\"><code>strcmp</code></a> does exactly that. Where is the problem ? Read about C strings and string functions."}, {"owner": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456325068, "post_id": 35604283, "comment_id": 58894940, "body": "Thanks I will test it"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1456322603, "creation_date": 1456322603, "answer_id": 35604283, "question_id": 35604226, "link": "https://stackoverflow.com/questions/35604226/strcmp-crashes-when-comparing-with-a-malloc-array/35604283#35604283", "title": "strcmp crashes when comparing with a malloc array", "body": "<p><code>strcmp(line[0], ...</code> is wrong. Use <code>strcmp(line, ...)</code>.</p>\n\n<p>You should <code>#include &lt;string.h&gt;</code>, so your compiler will show an error. Otherwise always compile with all warnings enabled and read the warnings your compiler shows you.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456324512, "post_id": 35604316, "comment_id": 58894496, "body": "if(strcmp(line[0], &#39;a&#39;) == 0) doesnot work also but if (line[i] == &#39;a&#39;) works"}, {"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "reply_to_user": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456324885, "post_id": 35604316, "comment_id": 58894780, "body": "@MFB if(strcmp(line[0], &#39;a&#39;) == 0) doesn&#39;t work for sure"}, {"owner": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456324958, "post_id": 35604316, "comment_id": 58894842, "body": "can you explain to me why this also willnot work if(strcmp(*(line+i), &quot;a&quot;) == 0){"}, {"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "reply_to_user": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "edited": false, "score": 0, "creation_date": 1456325946, "post_id": 35604316, "comment_id": 58895608, "body": "@MFB strcmp takes pointer to char, but *(line+i) is character itself, not a pointer to char, however if *(line+i) == &#39;a&#39; is true then strcmp((line+i), &quot;a&quot;) == 0 will work in your case as well. But you should use first comparison to compare single characters and strcmp to compare multicharacter strings."}], "tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 2, "last_activity_date": 1456324118, "last_edit_date": 1495542690, "creation_date": 1456322682, "answer_id": 35604316, "question_id": 35604226, "link": "https://stackoverflow.com/questions/35604226/strcmp-crashes-when-comparing-with-a-malloc-array/35604316#35604316", "title": "strcmp crashes when comparing with a malloc array", "body": "<p>In your code <code>line</code> is pointer to character(s). <code>strcmp</code> takes pointers to characters to compare but here</p>\n\n<pre><code>if(strcmp(line[0], \"a\") == 0)\n//        ^^^^^^^^\n</code></pre>\n\n<p>you are passing character instead of a pointer to it.</p>\n\n<p>Solution:</p>\n\n<pre><code>if(strcmp(line, \"a\") == 0)\n// ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if(line[0] == 'a')\n// ...\n</code></pre>\n\n<p>Side note: <a href=\"https://stackoverflow.com/a/605858/1141471\">there is no need to cast returned value of malloc</a>. You should however check it for errors:</p>\n\n<pre><code>char *line;\nline = malloc(maxLineLen);\nif (line == NULL)\n    perror(\"oh dear! Go on holidays.\\n\");\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 5882732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347681baacdbb4362fcadb7ed7cfdb54?s=128&d=identicon&r=PG&f=1", "display_name": "MFB", "link": "https://stackoverflow.com/users/5882732/mfb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "accepted_answer_id": 35604282, "answer_count": 3, "score": 0, "last_activity_date": 1456324118, "creation_date": 1456322432, "question_id": 35604226, "link": "https://stackoverflow.com/questions/35604226/strcmp-crashes-when-comparing-with-a-malloc-array", "title": "strcmp crashes when comparing with a malloc array", "body": "<p>The strcmp cause the program to crash, Why is that? \nWhen removing strcmp it works well, and also with strcpy makes it crash </p>\n\n<pre><code>size_t maxLineLen=1024;\nchar *line = (char*)malloc(maxLineLen);\nwhile(getline(&amp;line, &amp;maxLineLen,stdin)!= -1){\nint h =strlen(line);\nfor (int i = 0; i &lt; h; i++){\n             if(strcmp(line[0], \"a\") == 0)  {\n        printf(\"a found  %c \\n \",line[i]);\n            break;\n        }\n\n    }\n\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "banking"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5879976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a96b76535ddb41b561e25baae9b30f79?s=128&d=identicon&r=PG&f=1", "display_name": "Blucyrik", "link": "https://stackoverflow.com/users/5879976/blucyrik"}, "edited": false, "score": 0, "creation_date": 1456323151, "post_id": 35604174, "comment_id": 58893464, "body": "WOW. can&#39;t believe I missed using parenthesis instead of semicolon... Thank you!!!!! I&#39;m adding a function to check if the account has enough money. I just wasn&#39;t able to get it to run for some reason :)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456324183, "post_id": 35604174, "comment_id": 58894232, "body": "How could this compile: <code>scanf (&quot;%f&quot;, %withdraw);</code> ??"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 0, "last_activity_date": 1456322270, "creation_date": 1456322270, "answer_id": 35604174, "question_id": 35604136, "link": "https://stackoverflow.com/questions/35604136/banking-program-withdraw-function-doesnt-work-c/35604174#35604174", "title": "Banking Program, withdraw function doesn&#39;t work? (C)", "body": "<p>Try this. ( checking whether the account has enough money isn't implemented here)</p>\n\n<pre><code>float withdrawFunds (int custIndex, float money[MAXNUMCUSTOMERS]) // ; -&gt; )\n{\n    float balance = -1.0;\n    float withdraw;\n    if (custIndex &gt;= 0)\n    {\n        //get withdraw amount\n        printf (\"Enter Withdraw Amount&gt;\");\n        scanf (\"%f\", &amp;withdraw); // % -&gt; &amp;\n        money[custIndex] = money[custIndex] - withdraw ; // correct the formula\n        balance = money[custIndex];\n    }\n    return balance;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5879976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a96b76535ddb41b561e25baae9b30f79?s=128&d=identicon&r=PG&f=1", "display_name": "Blucyrik", "link": "https://stackoverflow.com/users/5879976/blucyrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 35604174, "answer_count": 1, "score": -1, "last_activity_date": 1456322270, "creation_date": 1456322149, "question_id": 35604136, "link": "https://stackoverflow.com/questions/35604136/banking-program-withdraw-function-doesnt-work-c", "title": "Banking Program, withdraw function doesn&#39;t work? (C)", "body": "<p>for some reason I can't get the withdraw function to work in my banking program... I thought I was doing it correct as the functions can be very similar to the deposit function.</p>\n\n<p>The problem is I can't seem to get a withdraw amount without the program even building correctly. The withdraw function should be very similar to the deposit function correct? Because instead of depositing a value into the account, you're simply withdrawing an amount from the given account. If the account doesn't have enough money, then it returns as an error.  Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAXNUMCUSTOMERS 10  // Maximum number of customers\n#define MAXCUSTOMERNAME 20  // Max length of customer's name including null character at the end\n\n// Function Prototypes\nint DisplayMenu();\nint userLogin(int acctNumber[MAXNUMCUSTOMERS]);\nfloat acctBalance (int custIndex, float money[MAXNUMCUSTOMERS]);\nfloat depositMoney (int custIndex, float money[MAXNUMCUSTOMERS]);\nfloat withdrawFunds (int custIndex, float money[MAXNUMCUSTOMERS]);\n/*\n * \n */\nint main(int argc, char** argv) {\n    int acctNumber[MAXNUMCUSTOMERS] =\n    {1111,2222,3333,4444,5555,6666,7777,8888,9999,10000};\n    char customerName[MAXNUMCUSTOMERS][MAXCUSTOMERNAME] =\n    {\"Joe\",\"Mary\",\"bob\",\"tim\",\"sid\",\"will\",\"ray\",\"les\",\"quinn\",\"helen\"};\n    float money[MAXNUMCUSTOMERS] = \n    {12.50,25.30,69.3,46.0,777.00,10000.,55.6,33.78,99.54,47895.33};\n    int option = 0;\n    int myAcct = -1;\n    float myBalance = 0.0;\n\n    // loop until done\n    while (option != 6) {\n        // Display menu - return option\n        option = DisplayMenu();\n\n        if (option == 0) { // customer login\n            myAcct = userLogin(acctNumber);\n            if (myAcct == -1)             {\n                printf(\"Invalid account\\n\");\n            } else {\n                printf (\"Welcome %s \\n\", customerName[myAcct]);\n            }\n        } else if (option == 1) { // deposit money\n            myBalance = depositMoney (myAcct, money);\n            if (myBalance &lt; 0.0)\n                printf(\"Account not found\\n\");\n            else\n                printf (\"Your new account balance is: %.2f\\n\", myBalance);\n        } else if (option == 2) { // withdraw money\n            if (myBalance &gt; 0.0)\n                printf(\"Account not found\\n\");\n            else\n                printf (\"Your new account balance is: %.2f\\n\", myBalance);\n        } else if (option == 3) { // account balance\n            myBalance = acctBalance (myAcct, money);\n            if (myBalance &lt; 0.0)\n                printf(\"Account not found\\n\");\n            else\n                printf (\"Your account balance is: %.2f\\n\", myBalance);\n        } else if (option == 4) { // add a customer\n        } else if (option == 5) { // delete a customer\n        } else if (option == 6) { // exit\n        }\n        // exit program\n\n    }   //end loop until done\n    return (EXIT_SUCCESS);\n}\n\nint DisplayMenu() {\n    int customerChoice;\n\n    printf(\"Welcome to My Bank\\n\");\n    printf(\"Enter an option from the menu\\n\");\n    printf(\"\\t 0 Customer Login\\n\");\n    printf(\"\\t 1 Deposit Money Login\\n\");\n    printf(\"\\t 2 Withdraw Money\\n\");\n    printf(\"\\t 3 Account Balance\\n\");\n    printf(\"\\t 4 Add a customer\\n\");\n    printf(\"\\t 5 delete a customer\\n\");\n    printf(\"\\t 6 Exit\\n\");\n\n    scanf(\"%d\", &amp;customerChoice);\n    return (customerChoice);\n}\n\nint userLogin(int acctNumber[MAXNUMCUSTOMERS])\n{\n    int customerIndex = -1;\n    int accountNum;\n    int i;\n\n    // get the account number\n    printf(\"Please enter your account number&gt;\");\n    scanf(\"%d\", &amp;accountNum);\n\n    // loop to find which index has customer information\n    for (i=0; i &lt; MAXNUMCUSTOMERS; i++)\n    {\n        if (accountNum == acctNumber[i])\n            customerIndex = i;\n    } // end loop\n    return customerIndex;\n }\nfloat acctBalance (int custIndex, float money[MAXNUMCUSTOMERS])\n{\n    float balance = -1.0;\n    if (custIndex &gt;= 0)\n        balance = money[custIndex];\n    return balance;\n}\nfloat depositMoney (int custIndex, float money[MAXNUMCUSTOMERS])\n{\n    float balance = -1.0;\n    float deposit;\n    if (custIndex &gt;= 0)\n    {\n        // get the deposit amount\n        printf (\"Enter Deposit Amount&gt;\");\n        scanf (\"%f\", &amp;deposit);\n        money[custIndex] = money[custIndex] + deposit;\n        balance = money[custIndex];\n    }\n    return balance;\n}\n//my problem is down here. This section doesn't work???\nfloat withdrawFunds (int custIndex, float money[MAXNUMCUSTOMERS]; \n{\n    float balance = -1.0;\n    float withdraw;\n    if (custIndex &gt;= 0)\n    {\n        //get withdraw amount\n        printf (\"Enter Withdraw Amount&gt;\");\n        scanf (\"%f\", %withdraw);\n        money[custIndex] = withdraw - money[custIndex];\n        balance = money[custIndex];\n    }\n    return balance;\n}\n</code></pre>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1456321567, "post_id": 35603599, "comment_id": 58892288, "body": "You&#39;re either writing outside the array bounds, or creating variable on the stack that&#39;s too large.  To be sure, we need to see your complete code."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456328189, "post_id": 35603599, "comment_id": 58897030, "body": "it&#39;d be helpful if you show your actual code"}, {"owner": {"reputation": 49, "user_id": 5770158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb4a5c827febe7eff5da0294d86f487?s=128&d=identicon&r=PG&f=1", "display_name": "bopia", "link": "https://stackoverflow.com/users/5770158/bopia"}, "edited": false, "score": 0, "creation_date": 1456342040, "post_id": 35603599, "comment_id": 58906565, "body": "its Okey I got my answer I dont think code is needed for this particular problem."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5770158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb4a5c827febe7eff5da0294d86f487?s=128&d=identicon&r=PG&f=1", "display_name": "bopia", "link": "https://stackoverflow.com/users/5770158/bopia"}, "edited": false, "score": 0, "creation_date": 1456342021, "post_id": 35603867, "comment_id": 58906556, "body": "yeah you are correct, whenever I checked my data I could compile but my data that I needed was another variable strange enough. So the problem here was that my matrix [100][100] was to big = 100*100 * 4(bytes)= 40000 bytes, then this can give some segmentation fault."}], "tags": [], "owner": {"reputation": 163, "user_id": 5969257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2d21ac34f6cf56c63058cfa4e9c5fe?s=128&d=identicon&r=PG", "display_name": "hiddenbit", "link": "https://stackoverflow.com/users/5969257/hiddenbit"}, "is_accepted": false, "score": -1, "last_activity_date": 1456321915, "last_edit_date": 1495541736, "creation_date": 1456321382, "answer_id": 35603867, "question_id": 35603599, "link": "https://stackoverflow.com/questions/35603599/declaring-a-matrix-in-a-function-and-outside-a-function-as-a-global-matrix/35603867#35603867", "title": "Declaring a matrix in a function and outside a function as a global matrix", "body": "<p>When declared within the function the matrix is allocated inside the stack. If your matrix gets big enough it will try to read/write outside the stack and cause a segmentation fault.\nDeclaring it outside any function it is statically allocated and it is allocated within your executable (more details <a href=\"https://stackoverflow.com/questions/93039/where-are-static-variables-stored-in-c-c\">here</a>).</p>\n"}], "owner": {"reputation": 49, "user_id": 5770158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb4a5c827febe7eff5da0294d86f487?s=128&d=identicon&r=PG&f=1", "display_name": "bopia", "link": "https://stackoverflow.com/users/5770158/bopia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456322241, "creation_date": 1456320621, "last_edit_date": 1456321100, "question_id": 35603599, "link": "https://stackoverflow.com/questions/35603599/declaring-a-matrix-in-a-function-and-outside-a-function-as-a-global-matrix", "title": "Declaring a matrix in a function and outside a function as a global matrix", "body": "<p>I did some experiments by using a function call and declaring my matrix in a function and use to write '1' in every row and column. However after some time the program crashes and stops working.</p>\n\n<p>example one: The matrix is declared every time it is called in a while loop</p>\n\n<pre><code>void func(int row, int col){\nint matrix[row][col];\n\nfor....\nwrite one in the matrix...\n}\n</code></pre>\n\n<p>example two: The matrix is declared outside the function as a global</p>\n\n<pre><code>int matrix[row][col];\nvoid func(){\n\n\nfor....\nwrite one in the matrix...\n}\n</code></pre>\n\n<p>main code</p>\n\n<pre><code>int main(){\n      while(1){\n        func(...);\n\n      }\n}\n</code></pre>\n\n<p>My question to you is that my code crashes whenever my matrix is declared inside a function but does not crash whenever it is declared outside a function. Do you guys know why the problem is like this ? Isnt the matrix a temporal value in the function , meaning will it not be erased after the function has executed ? </p>\n"}, {"tags": ["c", "visual-studio-2015", "driver", "wdk", "windows-kernel"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456322500, "post_id": 35603506, "comment_id": 58892937, "body": "driver annotations are defined in Driverspecs.h.  (for such things as <code>_IRQL_requires_same_</code> ).  Do you have this .h file included anywhere?"}, {"owner": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456322686, "post_id": 35603506, "comment_id": 58893071, "body": "@ryyker I am not directly including <code>driverspecs.h</code> but I have included the directory that it is located in; namely <code>10.0.10586.0\\shared</code>. Directly including it, above <code>&lt;ntddk.h&gt;</code>, has no effect."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456323136, "post_id": 35603506, "comment_id": 58893454, "body": "The <code>syntax error: missing )</code> is common when a macro has not been defined.  you have to make sure all the identifiers are defined.  Once that is done, the rest of the error messages are likely to be resolved as well."}, {"owner": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456323376, "post_id": 35603506, "comment_id": 58893626, "body": "@ryyker Removing <code>_ETW_KM_</code> solves <b>all</b> errors because <code>EVENT_INFO_CLASS</code> in <code>evntprov.h</code> isn&#39;t reached otherwise. But that&#39;s a hack, something is wrong."}, {"owner": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456323463, "post_id": 35603506, "comment_id": 58893694, "body": "I followed the MSDN guide word by word on a clean windows installation, a bug in WDK maybe?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456323596, "post_id": 35603506, "comment_id": 58893795, "body": "<i>Removing _ETW_KM</i> <i>solves all errors</i>...  Yes, I read that in your post.  But the real question is that once built, does the driver do what it needs to do?  Have you tested that?  If not, then the identifiers that are not defined, must be defined before going on.  Can you do a grep through all of your existing project header files to see if the identifiers are defined in any other file, that you can then <code>#include</code>?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456323912, "post_id": 35603506, "comment_id": 58894001, "body": "The first error listed refers to line 31789.  Can you confirm (post) the exact line in your source file corresponding to that line?"}, {"owner": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456324448, "post_id": 35603506, "comment_id": 58894437, "body": "@ryyker My source file ~30 lines of code and it&#39;s the one posted above ^^. I tried deploying the test driver (Driver Install-&gt;Deployment) but VC crashes. I don&#39;t understand what&#39;s going on, this is a crystal clear windows installation yet everything seems to fail horribly."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456324722, "post_id": 35603506, "comment_id": 58894658, "body": "Actually, the source code for your project is thousands of lines long :).  With Microsoft, sometimes you can grow your project exponentially by including just one header file.  Did you successfully execute step 14 in your MSDN Driver Example link?"}, {"owner": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456324918, "post_id": 35603506, "comment_id": 58894799, "body": "@ryyker Had I completed step 14 I wouldn&#39;t be posting this since it means I wouldn&#39;t have had any errors."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456325064, "post_id": 35603506, "comment_id": 58894932, "body": "Sorry - was trying to establish where in the steps of that procedure things went wrong."}, {"owner": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456325261, "post_id": 35603506, "comment_id": 58895071, "body": "@ryyker All ok, thanks for your time and effort (: !! I will reinstall Windows, VC, WDK and SDK again. If it persists I&#39;ll just file a bug report. You should try and relax a bit (friendly comment)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456325579, "post_id": 35603506, "comment_id": 58895343, "body": "This is sometimes how I relax.  (sad commentary).  I wonder if the example needs to be updated (or retro-fitted)  for Windows 8.1?  In any case, the error messages you posted are indicative of an undefined identifier.  Sorry we could not get this resolved.  Good luck.  By the way, very nice question format :)"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "edited": false, "score": 0, "creation_date": 1456322941, "post_id": 35604328, "comment_id": 58893281, "body": "Your link is broken remove <code>).</code>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "edited": false, "score": 0, "creation_date": 1456323004, "post_id": 35604328, "comment_id": 58893333, "body": "@I. - Yes, sorry.  Fixed."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1456329876, "last_edit_date": 1456329876, "creation_date": 1456322709, "answer_id": 35604328, "question_id": 35603506, "link": "https://stackoverflow.com/questions/35603506/unable-to-build-wdk-10-samples-with-vc2015-without-modifying-windows-headers/35604328#35604328", "title": "Unable to build WDK 10 samples with VC2015 without modifying Windows headers", "body": "<p>Looks like an undefined identifier or macro...<br>\nThe first of your error messages ( <code>syntax error: missing ')' before identifier</code> ) is probably the best key to understanding the issue. \nThe rest likely are a consequence of that one, which may be complaining that <code>_IRQL_requires_same_</code>, (or one of the other identifiers) is not defined.  </p>\n\n<p>As suggested in the error message, look in the file <code>C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h</code> for a clue as to what is not defined before <em>InformationClass</em>.  Then include the header file that provides definition.  </p>\n\n<p>(Currently, There is no information in your post tying the line number <em>31789</em> listed in the error message to the exact corresponding line in your source code.)</p>\n\n<p>This link has information on <em><a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/hh454237%28v=vs.85%29.aspx\" rel=\"nofollow\">driver annotations</a></em> (Microsoft Source Code Annotation Language (SAL)).  </p>\n"}, {"tags": [], "owner": {"reputation": 128, "user_id": 3723801, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000367146346/picture?type=large", "display_name": "ajbarb", "link": "https://stackoverflow.com/users/3723801/ajbarb"}, "is_accepted": false, "score": 0, "last_activity_date": 1456331683, "creation_date": 1456331683, "answer_id": 35607806, "question_id": 35603506, "link": "https://stackoverflow.com/questions/35603506/unable-to-build-wdk-10-samples-with-vc2015-without-modifying-windows-headers/35607806#35607806", "title": "Unable to build WDK 10 samples with VC2015 without modifying Windows headers", "body": "<p>The error indicates the definition for EVENT_INFO_CLASS (Defined in evntprov.h) was not found. Another interesting thing is you are getting this for line number  31789 for method EtwSetInformation. This method needs to be imported only for (NTDDI_VERSION >= NTDDI_THRESHOLD) and you are targeting Win8.1. Something is wrong here. Please share the diagnostic msbuild log. It would be helpful to analyze.</p>\n"}, {"comments": [{"owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1500419458, "post_id": 40504169, "comment_id": 77325526, "body": "Versions of the WSDK and WDK don&#39;t always match."}], "tags": [], "owner": {"reputation": 61, "user_id": 2572142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d759ff411a62aa7c52ef231dca475bac?s=128&d=identicon&r=PG", "display_name": "IsXanDe", "link": "https://stackoverflow.com/users/2572142/isxande"}, "is_accepted": false, "score": 3, "last_activity_date": 1478685512, "last_edit_date": 1495540373, "creation_date": 1478685512, "answer_id": 40504169, "question_id": 35603506, "link": "https://stackoverflow.com/questions/35603506/unable-to-build-wdk-10-samples-with-vc2015-without-modifying-windows-headers/40504169#40504169", "title": "Unable to build WDK 10 samples with VC2015 without modifying Windows headers", "body": "<p>Encountered similar problem with next version of WDK (10.0.14393).\nLooks like in both cases the problem is <strong>different versions of Win SDK and WDK</strong>.\nSolved by installing the corresponding version of Win SDK.\nMore detail in <a href=\"https://stackoverflow.com/a/40503870/2572142\">this answer</a>.</p>\n"}], "owner": {"reputation": 73, "user_id": 5926008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9595d6adec805f91c7561f8399554b1?s=128&d=identicon&r=PG&f=1", "display_name": "I  .", "link": "https://stackoverflow.com/users/5926008/i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3367, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1478685512, "creation_date": 1456320371, "last_edit_date": 1456324677, "question_id": 35603506, "link": "https://stackoverflow.com/questions/35603506/unable-to-build-wdk-10-samples-with-vc2015-without-modifying-windows-headers", "title": "Unable to build WDK 10 samples with VC2015 without modifying Windows headers", "body": "<p>I am running a fresh installation of Windows. No other programs installed except VC and SDK's</p>\n\n<ul>\n<li><p>Include Directories</p>\n\n<p><strong>C:\\WinSDK10\\Include\\10.0.10586.0\\shared;<br/>\nC:\\WinSDK10\\Include\\10.0.10586.0\\km;<br/>\nC:\\WinSDK10\\Include\\10.0.10586.0\\km\\crt;<br/>\nC:\\WinSDK10\\Include\\wdf\\kmdf\\1.11</strong><br/></p></li>\n<li><p>Target OS Version</p>\n\n<p><strong>Windows 8.1</strong></p></li>\n<li><p>Target Platform</p>\n\n<p><strong>Desktop</strong></p></li>\n<li><p>Run Wpp Tracing</p>\n\n<p><strong>No</strong></p></li>\n<li><p>Enable minimal rebuild</p>\n\n<p><strong>No</strong></p></li>\n</ul>\n\n<p><hr/>\n<strong><em>Source:</em></strong></p>\n\n<pre><code>#include &lt;ntddk.h&gt;\n#include &lt;wdf.h&gt;\nDRIVER_INITIALIZE DriverEntry;\nEVT_WDF_DRIVER_DEVICE_ADD KmdfHelloWorldEvtDeviceAdd;\n\nNTSTATUS DriverEntry(_In_ PDRIVER_OBJECT  DriverObject, _In_ PUNICODE_STRING RegistryPath)\n{\n    NTSTATUS status;\n    WDF_DRIVER_CONFIG config;\n\n    KdPrintEx((DPFLTR_IHVDRIVER_ID, DPFLTR_INFO_LEVEL, \"KmdfHelloWorld: DriverEntry\\n\"));\n    WDF_DRIVER_CONFIG_INIT(&amp;config, KmdfHelloWorldEvtDeviceAdd);\n    status = WdfDriverCreate(DriverObject, RegistryPath, WDF_NO_OBJECT_ATTRIBUTES, &amp;config, WDF_NO_HANDLE);\n    return status;\n}\n\nNTSTATUS KmdfHelloWorldEvtDeviceAdd(_In_ WDFDRIVER Driver, _Inout_ PWDFDEVICE_INIT DeviceInit)\n{\n    NTSTATUS status;\n    WDFDEVICE hDevice;\n    UNREFERENCED_PARAMETER(Driver);\n\n    KdPrintEx((DPFLTR_IHVDRIVER_ID, DPFLTR_INFO_LEVEL, \"KmdfHelloWorld: KmdfHelloWorldEvtDeviceAdd\\n\"));\n    status = WdfDeviceCreate(&amp;DeviceInit, WDF_NO_OBJECT_ATTRIBUTES, &amp;hDevice);\n    return status;\n}\n</code></pre>\n\n<hr/>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State\nError   C2146   syntax error: missing ')' before identifier 'InformationClass'  Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2146   syntax error: missing ')' before identifier 'InformationClass'  Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2061   syntax error: identifier 'InformationClass' Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2061   syntax error: identifier 'InformationClass' Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2059   syntax error: ';'   Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2059   syntax error: ';'   Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2059   syntax error: ','   Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2059   syntax error: ','   Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2059   syntax error: ')'   Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31792   \nError   C2059   syntax error: ')'   Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31792   \nError   C2081   'EVENT_INFO_CLASS': name in formal parameter list illegal   Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \nError   C2081   'EVENT_INFO_CLASS': name in formal parameter list illegal   Test1   C:\\WinSDK10\\Include\\10.0.10586.0\\km\\wdm.h   31789   \n</code></pre>\n\n<hr/>\n\n<p><strong><em>Hack: The driver builds successfully if I edit <code>wdm.h</code> and remove <code>#define _ETW_KM_</code></em></strong></p>\n\n<p><strong><em>wdm.h</em></strong></p>\n\n<pre><code>#ifndef _ETW_KM_\n#define _ETW_KM_\n#endif\n\n#include &lt;evntprov.h&gt;\n\n\n//\n// Optional callback function that users provide.\n//\n\ntypedef\n_IRQL_requires_max_(PASSIVE_LEVEL)\n_IRQL_requires_same_\nVOID\nNTAPI \nETWENABLECALLBACK (\n    _In_ LPCGUID SourceId,\n    _In_ ULONG ControlCode,\n    _In_ UCHAR Level,\n    _In_ ULONGLONG MatchAnyKeyword,\n    _In_ ULONGLONG MatchAllKeyword,\n    _In_opt_ PEVENT_FILTER_DESCRIPTOR FilterData,\n    _Inout_opt_ PVOID CallbackContext\n    );\n\ntypedef ETWENABLECALLBACK *PETWENABLECALLBACK;\n</code></pre>\n\n<hr/>\n\n<p>Sorry for the length of this post!!<br/>\nI'm pretty sure I am doing something wrong while following this <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/hh439665%28v=vs.85%29.aspx\" rel=\"nofollow\">MSDN Driver Example Link</a> but I can't figure out what.<br/><br/></p>\n\n<p>Thanks for your time,</p>\n\n<p>Kris</p>\n"}, {"tags": ["c", "random", "contiki"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1456320183, "post_id": 35603416, "comment_id": 58891285, "body": "OT: <code>#include &quot;stdio.h&quot;</code> --&gt; <code>#include &lt;stdio.h&gt;</code>, same for <code>stdlib.h</code>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1456320463, "post_id": 35603416, "comment_id": 58891502, "body": "The error message refers to a function, <code>random_rand</code>, that&#39;s referenced in <code>broadcast-announcement.c</code>.  This is a linker error.  Presumably some library defines <code>random_rand</code>, but you haven&#39;t included it in your link command, which is why you&#39;re getting the error.  So, add it."}], "answers": [{"tags": [], "owner": {"reputation": 2721, "user_id": 2002198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98684cf4e01d405c4bf5662b2fdcb842?s=128&d=identicon&r=PG", "display_name": "Felipe Lavratti", "link": "https://stackoverflow.com/users/2002198/felipe-lavratti"}, "is_accepted": false, "score": 0, "last_activity_date": 1456327340, "creation_date": 1456327340, "answer_id": 35606012, "question_id": 35603416, "link": "https://stackoverflow.com/questions/35603416/unable-to-compile-a-c-file-in-contiki/35606012#35606012", "title": "Unable to compile a C file in Contiki", "body": "<p>You have not configured your project properly, you have to setup Makefile and project-conf.h to start with contiki, read the following hello-world example: <a href=\"http://github.com/contiki-os/contiki/tree/master/examples/hello-world\" rel=\"nofollow\">http://github.com/contiki-os/contiki/tree/master/examples/hello-world</a>.</p>\n\n<p>I recommend you use the example in the link as a project start files.</p>\n"}], "owner": {"reputation": 49, "user_id": 2473907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8863e8c6f259b2e48f0f9e22d5015dd?s=128&d=identicon&r=PG", "display_name": "user2473907", "link": "https://stackoverflow.com/users/2473907/user2473907"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456327340, "creation_date": 1456320136, "last_edit_date": 1456320221, "question_id": 35603416, "link": "https://stackoverflow.com/questions/35603416/unable-to-compile-a-c-file-in-contiki", "title": "Unable to compile a C file in Contiki", "body": "<p>I am trying to write a code in contiki that allows motes to randomly generate values.\nBelow is the code I tried:</p>\n\n<pre><code>#include \"contiki.h\"\n#include \"stdio.h\" /* For printf() */\n#include \"stdlib.h\"\nPROCESS(random_process, \"Random process\");\nAUTOSTART_PROCESSES(&amp;random_process);\nPROCESS_THREAD(random_process, ev, data)\n{\nPROCESS_BEGIN();\nint r=rand();\nprintf(\"Hello, world. Random Number is %d\",r);\nPROCESS_END();\n}\n</code></pre>\n\n<p>While generating the makefile I get the below error:</p>\n\n<pre>\nuser@instant-contiki:~/Desktop/Random$ make target=native random_sample\nTARGET not defined, using target 'native'\n  CC        random_sample.c\n  LD        random_sample.native\ncontiki-native.a(broadcast-annou): In function `set_timers':\n/home/user/contiki-2.7/core/net/rime/broadcast-announcement.c:171: undefined reference to `random_rand'\ncollect2: ld returned 1 exit status\nmake: *** [random_sample.native] Error 1\nrm random_sample.co\n</pre>\n\n<p>Can someone please help me with this? Thanks in advance.</p>\n"}, {"tags": ["android", "c", "eclipse", "encryption", "java-native-interface"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1456318967, "post_id": 35602555, "comment_id": 58890414, "body": "A <code>jcharArray</code> is not an array that you can access directly with <code>[]</code>. It&#39;s a <code>jobject</code>, and to access the actual array data you need to use the appropriate <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html\" rel=\"nofollow noreferrer\">JNI functions</a>."}, {"owner": {"reputation": 77, "user_id": 2819565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aYj6l.jpg?s=128&g=1", "display_name": "parthpatibandha", "link": "https://stackoverflow.com/users/2819565/parthpatibandha"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1456377157, "post_id": 35602555, "comment_id": 58920469, "body": "@Michael thanks but can you please write single line code for me so i can understand. i study jni.h but cant able to understand perfect syntax."}, {"owner": {"reputation": 77, "user_id": 2819565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aYj6l.jpg?s=128&g=1", "display_name": "parthpatibandha", "link": "https://stackoverflow.com/users/2819565/parthpatibandha"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1456392952, "post_id": 35602555, "comment_id": 58928783, "body": "Any one have idea how to catch exception in JNI C Native code i tried with simple try catch but gives many errors like ::   - &#39;try&#39; undeclared (first use in this function) \t- each undeclared identifier is reported only once for each function it appears  \t in \t- expected &#39;;&#39; before &#39;{&#39; token \t- Statement has no effect &#39;try&#39; \t- Symbol &#39;try&#39; could not be resolved \t- Missing &#39;;&#39;"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1456397388, "post_id": 35602555, "comment_id": 58931989, "body": "C doesn&#39;t have exceptions. You you mean that you want to catch Java exceptions in your C code then you should look up <code>ExceptionCheck</code> and <code>ExceptionClear</code> on the page I linked to in my first comment."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 2819565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aYj6l.jpg?s=128&g=1", "display_name": "parthpatibandha", "link": "https://stackoverflow.com/users/2819565/parthpatibandha"}, "edited": false, "score": 0, "creation_date": 1456320364, "post_id": 35602965, "comment_id": 58891436, "body": "Thanks for reply,Please explain me in detail i tried with both. I dont have more exp.xor[i] = (*env)-&gt;GetCharArrayElements(env,buffer[i] ^  _key[_keyByteIndex]); \t        \t//xor[i] = (*env)-&gt;GetCharArrayElements(env,buffer[i])   ^  (*env)-&gt;GetCharArrayElements(env,_key[_keyByteIndex]);      Error: &quot;Method &#39;GetCharArrayElements&#39; could not be resolved&quot;"}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "reply_to_user": {"reputation": 77, "user_id": 2819565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aYj6l.jpg?s=128&g=1", "display_name": "parthpatibandha", "link": "https://stackoverflow.com/users/2819565/parthpatibandha"}, "edited": false, "score": 0, "creation_date": 1456321535, "post_id": 35602965, "comment_id": 58892258, "body": "Check the <code>jni.h</code> you&#39;re using for the correct method signature."}], "tags": [], "owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "is_accepted": true, "score": 1, "last_activity_date": 1456318930, "creation_date": 1456318930, "answer_id": 35602965, "question_id": 35602555, "link": "https://stackoverflow.com/questions/35602555/jni-xor-encryption-eclipse-build-error/35602965#35602965", "title": "JNI XOR Encryption Eclipse build error", "body": "<p><code>jcharArray</code> is a typedef for <code>jarray</code>, which is a typedef for <code>jobject</code> which is a typedef for <code>void*</code>. It could be anything, it could be a unicorn disguised as a void pointer.</p>\n\n<p>You can't use dereference it with <code>_key[_keyByteIndex]</code>. You have to use <code>(*env)-&gt;GetCharArrayElements</code>, which will return what you want: <code>jchar*</code>.</p>\n\n<p>I suggest you to look at the <code>jni.h</code> you're using, it should give you all the answers you need.</p>\n"}], "owner": {"reputation": 77, "user_id": 2819565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aYj6l.jpg?s=128&g=1", "display_name": "parthpatibandha", "link": "https://stackoverflow.com/users/2819565/parthpatibandha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 35602965, "answer_count": 1, "score": 0, "last_activity_date": 1456318930, "creation_date": 1456317786, "last_edit_date": 1456317896, "question_id": 35602555, "link": "https://stackoverflow.com/questions/35602555/jni-xor-encryption-eclipse-build-error", "title": "JNI XOR Encryption Eclipse build error", "body": "<p>I want to XOR operator for byte or char array using JNI. I make native method using byte or char array and key which I have to use for encryption or decryption. For single line of XOR I amn't able to build C file in eclipse becasue of \"void value not ignored as it ought to be\". \nI added <code>jchar *xor</code> for solve void error than I get one more error \"invalid use of void expression\"\nI amn't able to solve this. here is my code for c.</p>\n\n<pre><code>int\nJava_packagename_classname_encryption(JNIEnv* env, jobject obj,\n         jcharArray buffer,  jint offset,\n         jint length,  jcharArray _key,  jint keylength){\n\n\n        jint temp,i ;\n        jint _keyByteIndex = 0;\n        jcharArray xor[length]  ;\n\n\n        for(i=0; i&lt;length + offset; ++i){\n\n            /*char temp = buffer[i];\n            temp ^= _key[_keyByteIndex];\n            buffer[i] = (char) temp;*/\n\n            buffer[i] = (jchar) (buffer[i] ^ _key[_keyByteIndex]);\n\n            if (_keyByteIndex + 1 &gt;=keylength){\n                _keyByteIndex = 0;\n            }else{\n                ++_keyByteIndex;\n            }\n\n        }\n\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "winapi", "button", "custom-controls", "mouseover"], "comments": [{"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456318146, "post_id": 35602422, "comment_id": 58889837, "body": "Try if this CP article <a href=\"http://www.codeproject.com/Articles/359/Capturing-the-Mouse\" rel=\"nofollow noreferrer\">codeproject.com/Articles/359/Capturing-the-Mouse</a> helps."}, {"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456318961, "post_id": 35602422, "comment_id": 58890412, "body": "Thanks! I read the article but it implements the function in a WindowProc which I don&#39;t have for my button, I only have one for my main window which is parent of the button itself."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456320142, "post_id": 35602422, "comment_id": 58891261, "body": "You can subclass the button procedure. See <a href=\"http://www.rohitab.com/discuss/topic/42062-win32-button-subclassingtrackmouseeventwm-mousemovewm-mouseleave-and-wm-mousehover/\" rel=\"nofollow noreferrer\">rohitab.com/discuss/topic/&hellip;</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1456365541, "post_id": 35602422, "comment_id": 58916916, "body": "You can request mouse hover notifications for any window (e.g. a button). It&#39;s a simple matter of filling in a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645604.aspx\" rel=\"nofollow noreferrer\">TRACKMOUSEEVENT</a> and calling <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646265.aspx\" rel=\"nofollow noreferrer\">TrackMouseEvent</a>."}, {"owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456490654, "post_id": 35602422, "comment_id": 58984266, "body": "Subclassing the button and creating a TRACKMOUSEEVENT structure looking at tutorials solved the problem. I will open another topic because the general problems I have aren&#39;t solved at all. Thanks to @Frankie_C."}], "owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456317686, "creation_date": 1456317460, "last_edit_date": 1456317686, "question_id": 35602422, "link": "https://stackoverflow.com/questions/35602422/enable-mouse-over-event-for-unthemed-custom-drawn-button", "title": "Enable &quot;mouse over event&quot; for unthemed custom drawn button", "body": "<p>I have a custom drawn button. I enabled Visual Styles and then, just because I don't want this particular button to be themed, I used <code>SetWindowTheme(hwndCustomDrawnButton, L\" \", L\" \");</code> to disable themes for it just after its creation in the <code>WM_CREATE</code> message. The code for the button drawing is this:</p>\n\n<pre><code>case WM_NOTIFY:\n{\n    LPNMHDR item = (LPNMHDR)lParam;\n    if (item-&gt;idFrom == 13 &amp;&amp; item-&gt;code == NM_CUSTOMDRAW)\n    {\n        LPNMCUSTOMDRAW item_draw = (LPNMCUSTOMDRAW)item;\n        if (item_draw-&gt;uItemState &amp; CDIS_SELECTED)\n        {\n            SetDCBrushColor(item_draw-&gt;hdc, RGB(91, 173, 236));\n            SelectObject(item_draw-&gt;hdc, GetStockObject(DC_BRUSH));\n            SetDCPenColor(item_draw-&gt;hdc, RGB(91, 173, 236));\n            SelectObject(item_draw-&gt;hdc, GetStockObject(DC_PEN));\n        }\n        else\n        {\n            SetDCBrushColor(item_draw-&gt;hdc, RGB(0, 125, 195));\n            SelectObject(item_draw-&gt;hdc, GetStockObject(DC_BRUSH));\n            SetDCPenColor(item_draw-&gt;hdc, RGB(0, 125, 195));\n            SelectObject(item_draw-&gt;hdc, GetStockObject(DC_PEN));\n        }\n        // Here I draw rectangle and text...\n        return CDRF_SKIPDEFAULT;\n    }\n}\nbreak;\n</code></pre>\n\n<p>I tried handling the case when <code>uItemState</code> is <code>CDIS_HOT</code> but it doesn't work (I suppose it's because I disabled themes for this control). <strong>Is there a way to change the appearance of this button when the mouse is over it?</strong> I mean the exact scenario I obtain if I don't disable theming and I keep handling the case when <code>uItemState</code> is <code>CDIS_HOT</code> in the <code>WM_NOTIFY</code>. I tried to look over the web and I only found <code>TrackMouseEvent</code> function which was hard to understand for me. If that is a valid method to solve my problem, please can anybody provide me a code sample or a tutorial where this function is well explained?</p>\n\n<p>I use plain C (no mfc or anything else) with Visual Studio on Windows 8.1. My application will be available from Windows 7 on.\nThanks!</p>\n"}, {"tags": ["c", "windows", "winapi", "portable-executable"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 3, "creation_date": 1456317592, "post_id": 35602159, "comment_id": 58889457, "body": "The problem is way too broad to be appropriate for stack overflow."}], "answers": [{"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 0, "last_activity_date": 1456549937, "creation_date": 1456549937, "answer_id": 35665983, "question_id": 35602159, "link": "https://stackoverflow.com/questions/35602159/add-nop-around-entry-point-of-exe/35665983#35665983", "title": "Add nop around entry point of exe", "body": "<p>Do you need some sort of hotpatching? Question is a bit broad, but you might want to look at <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20110921-00/?p=9583\" rel=\"nofollow\">https://blogs.msdn.microsoft.com/oldnewthing/20110921-00/?p=9583</a></p>\n\n<p>I believe it requires use of MS VC</p>\n"}, {"tags": [], "owner": {"reputation": 2747, "user_id": 220594, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2471c61947385b1d7c0be89482373c26?s=128&d=identicon&r=PG", "display_name": "Pyjong", "link": "https://stackoverflow.com/users/220594/pyjong"}, "is_accepted": false, "score": 0, "last_activity_date": 1456754681, "creation_date": 1456754681, "answer_id": 35701606, "question_id": 35602159, "link": "https://stackoverflow.com/questions/35602159/add-nop-around-entry-point-of-exe/35701606#35701606", "title": "Add nop around entry point of exe", "body": "<p>For #1, I don't think this can be done in C compiler. You can use intrinsics. But I'm not sure you can use C intrinsics in global scope to do a wrapper. I guess it is possible to make some static space and do it in runtime as writing nops and copying the function. Still, I think easiest way to achieve this would be compile the function, copy-paste the instructions from disassembly to .asm file and add those nops you want, then compile again with nasm or whatever assembler you decide to use and link the obj. </p>\n\n<p>I don't think there is any public library for #2.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13420549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiW55_WE3nnKxXtuPK0A2-j_RPzdz1zjYgYt5h-AQ=k-s128", "display_name": "Scott Gray", "link": "https://stackoverflow.com/users/13420549/scott-gray"}, "is_accepted": false, "score": 0, "last_activity_date": 1588019802, "creation_date": 1588019802, "answer_id": 61468004, "question_id": 35602159, "link": "https://stackoverflow.com/questions/35602159/add-nop-around-entry-point-of-exe/61468004#61468004", "title": "Add nop around entry point of exe", "body": "<p>make a c++ executable that starts a process of your \"cracked\" .exe and pauses it straight after, nops the functions at a certain memory address you find in CheatEngine (I think the hex code for nop is x90, so change op codes you find at the memory addresses found with cheat engine), then resumes the .exe , it then runs with that stuff nopped. And then this is now your cracked launcher.</p>\n\n<p>Or find a way to recompile the c++ .exe with the non cracked exe.</p>\n"}], "owner": {"reputation": 69, "user_id": 5410752, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c399269deb0298e876347e1afba8b580?s=128&d=identicon&r=PG&f=1", "display_name": "lambda", "link": "https://stackoverflow.com/users/5410752/lambda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1588019802, "creation_date": 1456316675, "last_edit_date": 1456320254, "question_id": 35602159, "link": "https://stackoverflow.com/questions/35602159/add-nop-around-entry-point-of-exe", "title": "Add nop around entry point of exe", "body": "<p>I try to develop a packer which doesn't rely on adding a further section to the pe file. How can I insert space for the decryptor stub around the entry point in the following two cases: </p>\n\n<ol>\n<li><p>At compile time, means I have a source code and I want to tell the compiler (in my case: gcc -minGW64) to insert some <code>nop</code> instructions around maincrtstartup/ entry point ? </p></li>\n<li><p>With a binary, which is probably a lot more difficult. \nAs far as I understand I would need to split the binary into 2 pieces (at the entrypoint), add the <code>nop</code>'s between them, merge them again and fix all function addresses and the values in the pe header. Is there a library (Python, C++) which can insert nop's into a binary?</p></li>\n</ol>\n\n<p>Edit: To further specify the 2nd case:</p>\n\n<p>Assume you have a binary file in pe format and you want to insert some nop opcodes into the .text segment of the file.</p>\n\n<p>Let's say the assembly of the file looks like this: </p>\n\n<pre><code>push ebp \nadd eax, 5\ninc ecx\npop ebp \n</code></pre>\n\n<p>And I want to insert some nop in between add eax, 5 and inc ecx.</p>\n"}, {"tags": ["c", "multidimensional-array", "memcpy"], "comments": [{"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1456316923, "post_id": 35602136, "comment_id": 58888961, "body": "Shouldn&#39;t even run. You&#39;re accessing uninitialised memory."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1456317219, "post_id": 35602136, "comment_id": 58889162, "body": "The moment you write 50 bytes from <code>a</code> into a 10 byte buffer of <code>b</code>, all bets are off."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456317294, "post_id": 35602136, "comment_id": 58889224, "body": "Which length do you think the outer dimension of <code>b</code> has? What do you expect to happen? And why?"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456317476, "post_id": 35602200, "comment_id": 58889362, "body": "It would be a good idea to always state clear this invokes <i>undefined behaviour</i>. It is not just &quot;very dangerous&quot;, but you are completely off-road."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 4, "last_activity_date": 1456317092, "last_edit_date": 1456317092, "creation_date": 1456316784, "answer_id": 35602200, "question_id": 35602136, "link": "https://stackoverflow.com/questions/35602136/memcpy-erase-variables-in-char-array-in-c/35602200#35602200", "title": "memcpy erase variables in char array in C", "body": "<p>The size of <code>b</code> is too small to store all contents of <code>a</code>, so you accessed out of the allocated memory, which is very dangerous.</p>\n\n<p>Do allocate enough memory.</p>\n\n<pre><code>char a[5][10];\nchar b[5][10]={{\"0\"}}; /* change this line */\n\nstrcpy(a[0], \"111111\");\nstrcpy(a[1], \"211112\");\nstrcpy(a[2], \"311113\");\nstrcpy(a[3], \"411114\");\nstrcpy(a[4], \"511115\");\n\nmemcpy(&amp;b,&amp;a,sizeof(a));\n\nprintf(\"sizeof(a) : %d \\n\", (int)sizeof(a)); /* change this line to pass data having correct type */\nint i;\nfor(i = 0; i &lt; 5; i++)\n{\n    printf(\"%d : %s \\n\",i,a[i]);\n}\n\nprintf(\"sizeof(b) : %d \\n\", (int)sizeof(b)); /* change this line to pass data having correct value */\nfor(i = 0; i &lt; 5; i++)\n{\n    printf(\"%d : %s \\n\",i,b[i]);\n}\n</code></pre>\n\n<p>This code may show why the contents in <code>a</code> seems deleted: 0x00 is written to <code>a[i][0]</code> and <code>printf()</code> interpreted them as end of string.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char a[5][10];\n    char b[][10]={\"0\"};\n\n    strcpy(a[0], \"111111\");\n    strcpy(a[1], \"211112\");\n    strcpy(a[2], \"311113\");\n    strcpy(a[3], \"411114\");\n    strcpy(a[4], \"511115\");\n\n    memcpy(&amp;b,&amp;a,sizeof(a));\n\n    int i, j;\n    for (i = 0; i &lt; 5; i++)\n    {\n        for (j = 0; j &lt; 10; j++) printf(\"%02X \", (unsigned int)(unsigned char)a[i][j]);\n        putchar('\\n');\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1456317591, "post_id": 35602397, "comment_id": 58889456, "body": "&quot;Since the whole thing is on the stack, the layout is reversed.&quot; No, it need not be. In this case, <code>a</code> just happened to be after <code>b</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1456317632, "post_id": 35602397, "comment_id": 58889486, "body": "The C language does not require uising a stack. At this level, there is no use in going into details which can vary with the next compiler version, some randomised heuristics, added code, etc. For a typical implementation, the stack layout can heavily vary, e.g. when re-using allocated space on the stack."}, {"owner": {"reputation": 835, "user_id": 3392439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd91db540e8f7b6230949d44410ef56?s=128&d=identicon&r=PG&f=1", "display_name": "user3392439", "link": "https://stackoverflow.com/users/3392439/user3392439"}, "edited": false, "score": 0, "creation_date": 1456339184, "post_id": 35602397, "comment_id": 58904872, "body": "Yes, agree on both counts, technically. Just trying to be helpful to the asker, they&#39;re asking why the array <code>a</code> got trashed. In the given gcc version and the given OS, I think what I gave was a fair explanation."}], "tags": [], "owner": {"reputation": 835, "user_id": 3392439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd91db540e8f7b6230949d44410ef56?s=128&d=identicon&r=PG&f=1", "display_name": "user3392439", "link": "https://stackoverflow.com/users/3392439/user3392439"}, "is_accepted": false, "score": 0, "last_activity_date": 1456317403, "creation_date": 1456317403, "answer_id": 35602397, "question_id": 35602136, "link": "https://stackoverflow.com/questions/35602136/memcpy-erase-variables-in-char-array-in-c/35602397#35602397", "title": "memcpy erase variables in char array in C", "body": "<p>The memcpy overwrote the contents of the array a. Why did it do that?</p>\n\n<p>The array b was allocated only 10 bytes, because <code>char b[][10]</code> means \"allocate space for an array of 10-char strings, the number of strings being specified by the initializer.\" In your case, the initializer is \"0\", ie, one string. So it allocated space for one 10-char string.</p>\n\n<p>Since the whole thing is on the stack, the layout is reversed. Thus, the location of b comes first, and then a. </p>\n\n<p>So, when you write into b, it starts correctly, writes the first string. When you write the second string, it overflows into the array a's space and kills it. 4 times. The last string survives.</p>\n"}], "owner": {"reputation": 1483, "user_id": 2646022, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ffec904ecdbcb7ab453d3b292a3044?s=128&d=identicon&r=PG&f=1", "display_name": "user4757345", "link": "https://stackoverflow.com/users/2646022/user4757345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 35602200, "answer_count": 2, "score": -1, "last_activity_date": 1456317403, "creation_date": 1456316618, "question_id": 35602136, "link": "https://stackoverflow.com/questions/35602136/memcpy-erase-variables-in-char-array-in-c", "title": "memcpy erase variables in char array in C", "body": "<p>I create multi dimensioanl array and write it to console</p>\n\n<pre><code>char a[5][10];\n\nstrcpy(a[0], \"111111\");\nstrcpy(a[1], \"211112\");\nstrcpy(a[2], \"311113\");\nstrcpy(a[3], \"411114\");\nstrcpy(a[4], \"511115\");\n\n\nprintf(\"size : %d \\n\", sizeof(a));\n\nint i;\nfor(i = 0; i &lt; 5; i++)\n{\n    printf(\"%d : %s \\n\",i,a[i]);\n}\n</code></pre>\n\n<p>result is</p>\n\n<pre><code>size : 50 \n0 : 111111 \n1 : 211112 \n2 : 311113 \n3 : 411114 \n4 : 511115 \n</code></pre>\n\n<p>then I copy the array to another array, and write both of them to console</p>\n\n<pre><code>char a[5][10];\nchar b[][10]={\"0\"};\n\nstrcpy(a[0], \"111111\");\nstrcpy(a[1], \"211112\");\nstrcpy(a[2], \"311113\");\nstrcpy(a[3], \"411114\");\nstrcpy(a[4], \"511115\");\n\nmemcpy(&amp;b,&amp;a,sizeof(a));\n\nprintf(\"sizeof(a) : %d \\n\", sizeof(a));\nint i;\nfor(i = 0; i &lt; 5; i++)\n{\n    printf(\"%d : %s \\n\",i,a[i]);\n}\n\nprintf(\"sizeof(b) : %d \\n\", sizeof(b));\nfor(i = 0; i &lt; 5; i++)\n{\n    printf(\"%d : %s \\n\",i,b[i]);\n}\n</code></pre>\n\n<p>result is:</p>\n\n<pre><code>sizeof(a) : 50 \n0 :  \n1 :  \n2 :  \n3 :  \n4 : 511115 \nsizeof(b) : 10 \n0 : 111111 \n1 : 211112 \n2 : 311113 \n3 : 411114 \n4 : 511115 \n</code></pre>\n\n<p>what happened variables in a array ? why contents of a array are empty ?\nI use <code>Ubuntu 14.04</code> and gcc version is <code>(Ubuntu 4.8.4-2ubuntu1~14.04.1) 4.8.4</code></p>\n"}, {"tags": ["c", "arrays", "pointers", "math", "matrix"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456317138, "post_id": 35601956, "comment_id": 58889109, "body": "A matrix typically is a 2D array. Transposition of a &quot;vector&quot; is pretty useless, just interpret them differently, depending on their usage. And <code>char **</code> is no way a 2D array! A pointer is not an array."}], "answers": [{"comments": [{"owner": {"reputation": 3140, "user_id": 1582481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/MAazu.jpg?s=128&g=1", "display_name": "yak", "link": "https://stackoverflow.com/users/1582481/yak"}, "edited": false, "score": 0, "creation_date": 1456319895, "post_id": 35602144, "comment_id": 58891068, "body": "ok, thank you very much"}], "tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": true, "score": 2, "last_activity_date": 1456355814, "last_edit_date": 1456355814, "creation_date": 1456316636, "answer_id": 35602144, "question_id": 35601956, "link": "https://stackoverflow.com/questions/35601956/transpose-a-matrix-in-c/35602144#35602144", "title": "Transpose a matrix in C", "body": "<p>There are several errors in your code most obvious being the creation of array B. Try it this way:</p>\n\n<pre><code>char** create_array_B(char *arrayA, int ssize)\n{\n    int n = sqrt(ssize);\n    int i,j;\n\n    char **arrayB = malloc(sizeof(char*) * ssize);\n    //                                      ^^^\n    if (arrayB == NULL)\n        // handle error\n    for(i = 0; i &lt; n; i++)\n    {\n        for(j = 0; j &lt; n; j++)\n            arrayB[i * n + j] = &amp;arrayA[j * n + i];\n            //     ^^^^^^^^^            ^^^^^^^^^^\n    }\n    return arrayB;\n}\n</code></pre>\n\n<p>Other errors include printing of elements, memory allocation of bad size, and release/free of the malloced memory missing.</p>\n\n<p>Complete solution can be found <a href=\"https://github.com/spinlockirqsave/c/blob/master/matrix_transp/main.c\" rel=\"nofollow\">here</a>.</p>\n\n<p>Now everything is fine.  Running above with valgrind:</p>\n\n<pre><code>p@:/matrix_transp$ valgrind --leak-check=yes --leak-check=full --show-leak-kinds=all ./executable \n==30322== Memcheck, a memory error detector\n==30322== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==30322== Using Valgrind-3.10.0 and LibVEX; rerun with -h for copyright info\n==30322== Command: ./executable\n==30322== \nvalueA[0] = 0 valueA[1] = 1 valueA[2] = 2 \nvalueA[3] = 3 valueA[4] = 4 valueA[5] = 5 \nvalueA[6] = 6 valueA[7] = 7 valueA[8] = 8 \n\nvalueB[0] = 0 valueB[1] = 3 valueB[2] = 6 \nvalueB[3] = 1 valueB[4] = 4 valueB[5] = 7 \nvalueB[6] = 2 valueB[7] = 5 valueB[8] = 8 \n==30322== \n==30322== HEAP SUMMARY:\n==30322==     in use at exit: 0 bytes in 0 blocks\n==30322==   total heap usage: 2 allocs, 2 frees, 81 bytes allocated\n==30322== \n==30322== All heap blocks were freed -- no leaks are possible\n==30322== \n==30322== For counts of detected and suppressed errors, rerun with: -v\n==30322== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) \n</code></pre>\n"}], "owner": {"reputation": 3140, "user_id": 1582481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/MAazu.jpg?s=128&g=1", "display_name": "yak", "link": "https://stackoverflow.com/users/1582481/yak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "closed_date": 1457085546, "accepted_answer_id": 35602144, "answer_count": 1, "score": 0, "last_activity_date": 1456355814, "creation_date": 1456316108, "last_edit_date": 1456318304, "question_id": 35601956, "link": "https://stackoverflow.com/questions/35601956/transpose-a-matrix-in-c", "closed_reason": "Needs details or clarity", "title": "Transpose a matrix in C", "body": "<p>I need to write a program that transposes a matrix in C. The matrix that needs to be transposed, is a one dimensional array, array A:</p>\n\n<pre><code>void fill_array_A(char *arrayA, int ssize)\n{\n    int i;\n    for(i=0; i&lt;ssize; i++)\n    {\n        printf(\"Letter %d:\\n&gt; \", (i+1));\n        scanf(\" %c\", &amp;arrayA[i]);\n    }\n}\n\nvoid show_array_A(char *arrayA, int ssize)\n{\n    int n = sqrt(ssize);\n    int i,j=0;\n\n    for(i=0; i&lt;ssize; i++)\n    {\n        printf(\"valueA[%d] = %c \", i, arrayA[i]);\n\n        j ++;\n\n        if(j == n)\n        {\n            printf(\"\\n\");\n            j = 0;\n        }\n    }\n}\n\nvalueA[0] = a valueA[1] = a valueA[2] = a \nvalueA[3] = b valueA[4] = b valueA[5] = b \nvalueA[6] = c valueA[7] = c valueA[8] = c \n</code></pre>\n\n<p>I need to transpose the matrix A to matrix B, so B = A(T). B is a two dimensional array, where B stores pointers to elements in array A. However, my code shows wrong results, <strong>instead of</strong></p>\n\n<pre><code>valueB[0] = a valueB[3] = b valueB[6] = c \nvalueB[1] = a valueB[4] = b valueB[7] = c \nvalueB[2] = a valueB[5] = b valueB[8] = c\n</code></pre>\n\n<p><strong>my code gives me:</strong>  </p>\n\n<pre><code>valueB[0] = a valueB[1] = b valueB[2] = b \nvalueB[3] = a valueB[4] = b valueB[5] = b \nvalueB[6] = a valueB[7] = b valueB[8] = b \n</code></pre>\n\n<p>Where is the problem? Here's the whole code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nchar* create_array_A(int ssize)\n{\n    char *arrayA = malloc(sizeof(char) * ssize);\n    return arrayA;\n}\n\nvoid fill_array_A(char *arrayA, int ssize)\n{\n    int i;\n    for(i=0; i&lt;ssize; i++)\n    {\n        printf(\"Letter %d:\\n&gt; \", (i+1));\n        scanf(\" %c\", &amp;arrayA[i]);\n    }\n}\n\nvoid show_array_A(char *arrayA, int ssize)\n{\n    int n = sqrt(ssize);\n    int i,j=0;\n\n    for(i=0; i&lt;ssize; i++)\n    {\n        printf(\"valueA[%d] = %c \", i, arrayA[i]);\n\n        j ++;\n\n        if(j == n)\n        {\n            printf(\"\\n\");\n            j = 0;\n        }\n    }\n}\n\nchar** create_array_B(char *arrayA, int ssize)\n{\n    int n = sqrt(ssize);\n    int i,j;\n\n    char **arrayB = malloc(sizeof(char*) * n);\n\n    for(i=0; i&lt;n; i++)\n    {\n        for(j=0; j&lt;n; j++)\n        {\n            arrayB[j] = &amp;arrayA[i];\n        }\n    }\n    return arrayB;\n}\n\nvoid show_array_B(char** arrayB, int n, int m)\n{\n    int i,j,k=0;\n\n    for(i=0; i&lt;n; i++)\n    {\n        for(j=0; j&lt;m; j++)\n        {\n            printf(\"valueB[%d] = %c \", k, arrayB[i][j]);\n            k ++;\n        }\n        printf(\"\\n\");\n    }\n}\n\nint main(int argc, char **argv)\n{\n    int n = 9;\n\n    char *arrayA = create_array_A(n);\n    fill_array_A(arrayA, n);\n    show_array_A(arrayA, n);\n\n    printf(\"\\n\");\n\n    char **arrayB = create_array_B(arrayA, n);\n    show_array_B(arrayB, sqrt(n), sqrt(n));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 713, "user_id": 2086872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7840f5538278f16aff2a2777aa4ba47c?s=128&d=identicon&r=PG", "display_name": "The Welder", "link": "https://stackoverflow.com/users/2086872/the-welder"}, "edited": false, "score": 1, "creation_date": 1456314317, "post_id": 35601175, "comment_id": 58887088, "body": "Is your string unicode or ansi?  What is the value of /n if you echo it to the screen as hex?  What&#39;s your codepage?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456314416, "post_id": 35601175, "comment_id": 58887171, "body": "And is there a slash/backslash confusion?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456314494, "post_id": 35601175, "comment_id": 58887229, "body": "@PeterA.Schneider the  slash/backslash confusion looks like a typo to me."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1456315945, "post_id": 35601175, "comment_id": 58888256, "body": "The C compiler usually translates the <code>\\n</code> backslash sequence in a character constant or string literal to an ASCII linefeed (LF) character, which is character code 10 (0xA). C calls it the new-line character. It is up to your OS&#39;s terminal driver how it interprets that character and other control characters. The C compiler for your OS might use a different new-line character than ASCII LF. Also, the C library for your OS might treat the new-line character specially for files opened in &quot;text&quot; mode, including the <code>stdout</code>, <code>stdin</code>, and <code>stderr</code> streams."}], "answers": [{"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 3, "last_activity_date": 1456314369, "creation_date": 1456314369, "answer_id": 35601322, "question_id": 35601175, "link": "https://stackoverflow.com/questions/35601175/adding-support-for-newlines-n-in-c/35601322#35601322", "title": "Adding support for newlines (\\n) in C", "body": "<pre><code>// ...\nif (c == '\\n') {\n    column = 0;\n    row++;\n    // do not putentry\n}\n// ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1456316712, "post_id": 35601333, "comment_id": 58888804, "body": "This is the wrong place for this.  It doesn&#39;t belong in the standard I/O library, and would cause problems if the output went to anything other than a terminal (e.g., a file).  Instead, the handling of newline characters belongs in the device driver for your terminal."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1456318821, "post_id": 35601333, "comment_id": 58890297, "body": "@TomKarzes sure, but at the OP&#39;s level it answers the question. Considering your comment, the OP&#39;s original approach is already wrong."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456342151, "post_id": 35601333, "comment_id": 58906628, "body": "@user2977378 impossible to answer without knowing more about your output device. What exactly is <code>putentryat</code> ? Is tis part of some library ? If yes you should look in the documentation of that library."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456397337, "post_id": 35601333, "comment_id": 58931955, "body": "@user2977378 what is <code>make_vgaentry</code> ?"}, {"owner": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456397953, "post_id": 35601333, "comment_id": 58932363, "body": "@MichaelWalz Unfortunately, I am not able to paste the entire file on here but I am happy to send it to you via email if you want?   This is what the make_vgaentry function does: <code>uint16_t make_vgaentry(char c, uint8_t color) {   uint16_t c16 = c;   uint16_t color16 = color;   return c16 | color16 &lt;&lt; 8; }  </code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456398229, "post_id": 35601333, "comment_id": 58932566, "body": "@user2977378 I don&#39;t think anything. What exactly is <code>buffer</code>? What does <code>make_vgaentry</code> do? What is WIDTH and HEIGHT (I suppose WIDTH is 80 and HEIGHT is 25)."}, {"owner": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456398526, "post_id": 35601333, "comment_id": 58932772, "body": "@MichaelWalz yes the Width and Height is 80 and 25 respectively.   This what the term_initialize does; Buffer is in this function:  <code>void terminal_initialize() {   row = 0;   column = 0;   tcolor = color(COLOR_LIGHT_GREY, COLOR_BLACK); &#47;*Terminal Background*&#47;   buffer = (uint16_t*) 0xB8000;   for (size_t y = 0; y &lt; HEIGHT; y++) {     for (size_t x = 0; x &lt; VGA_WIDTH; x++) {       const size_t index = y * WIDTH + x;       buffer[index] = vgaentry(&#39; &#39;, terminal_color);       buffer[y * WIDTH + x] = buffer[(y + 1) * WIDTH + x];     }   } }</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456398737, "post_id": 35601333, "comment_id": 58932938, "body": "@user2977378 no code in comments please, it&#39;s unreadable, update your question."}, {"owner": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456398992, "post_id": 35601333, "comment_id": 58933070, "body": "@MichaelWalz Ok will do. Thanks"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456399229, "post_id": 35601333, "comment_id": 58933205, "body": "@user2977378 actually the scroll part is rather a new question. You should therefore ask a <i>new</i> question."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 4, "last_activity_date": 1456397417, "last_edit_date": 1456397417, "creation_date": 1456314403, "answer_id": 35601333, "question_id": 35601175, "link": "https://stackoverflow.com/questions/35601175/adding-support-for-newlines-n-in-c/35601333#35601333", "title": "Adding support for newlines (\\n) in C", "body": "<p>Maybe you need this:</p>\n\n<pre><code>void putchar(char c){\n   if (c == '\\n') {\n     column = 0;\n     if (++row == HEIGHT) {\n        // perform scroll \n     }\n   }\n   else  \n      putentryat(c, color, column, row);\n\n   if (++column == WIDTH) {\n     column = 0;\n     if (++row == HEIGHT) {\n       // perform scroll\n       column = 0;\n     }\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "edited": false, "score": 0, "creation_date": 1456520401, "post_id": 35601423, "comment_id": 59003485, "body": "The above code is just an example of how to handle terminal emulation. <code>term_page_mode</code> would be a global variable to select between page mode where the cursor goes to home position when it goes off the bottom edge of the screen and scroll mode where you would use <code>term_scroll_screen_up()</code> to move the window contents up by one line.  How you would implement that is your decision..."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1456315567, "last_edit_date": 1456315567, "creation_date": 1456314682, "answer_id": 35601423, "question_id": 35601175, "link": "https://stackoverflow.com/questions/35601175/adding-support-for-newlines-n-in-c/35601423#35601423", "title": "Adding support for newlines (\\n) in C", "body": "<p>The terminal handles some characters such as <code>\\n</code> specifically to perform specific tasks:</p>\n\n<ul>\n<li><code>\\n</code> causes the cursor to move down one line, and possibly to go back to the leftmost column (<code>column = 0</code> in your case).</li>\n<li><code>\\r</code> should cause the cursor to move to the leftmost column on the current line.</li>\n<li><code>\\t</code> moves the cursor right to the next TAB stop, usually a multiple of 8 positions.</li>\n<li><code>\\f</code> could erase the screen and move the cursor to the home position.</li>\n<li><code>\\a</code> could cause the speaker to produce a beep or the screen to blink.</li>\n</ul>\n\n<p>All these actions are performed instead of displaying a character at the current cursor position.  You must test the character value specifically to perform the special action instead of displaying the character.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>void term_putchar(int c) {\n    switch (c) {\n      case '\\r':\n        column = 0;\n        break;\n      case '\\n':\n        column = 0;\n        row++;\n        break;\n      case '\\t':\n        column = (column + 8) / 8 * 8;\n        if (column &gt;= WIDTH) {\n            column -= WIDTH;\n            row++;\n        }\n        break;\n      case '\\f':\n        term_erase_screen();\n        column = row = 0;\n        break;\n      case '\\a':\n        term_beep();\n        break;\n      default:\n        putentryat(c, color, column, row);\n        if (++column == WIDTH) {\n            column = 0;\n            ++row;\n        }\n        break;\n    }\n    if (row == HEIGHT) {\n        if (term_page_mode) {\n            row = 0;\n        } else {\n            term_scroll_screen_up();\n            row--;\n        }\n    }\n    /* should update the blinking cursor on the screen screen */\n}\n\nint putchar(int c) {\n    if (output_to_terminal) {\n        term_putchar(c);\n    } else {\n        /* output to file? */\n    }\n    return c;\n}\n</code></pre>\n\n<p>Note that real terminals have far more special characters to control output, screen handling, colors, cursor movement, flow control, etc. In addition to specific characters, they use escape sequences (<code>\\e</code> followed by other characters).</p>\n"}], "owner": {"reputation": 51, "user_id": 2977378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0859b7ddbf902719f7d109748d75e21a?s=128&d=identicon&r=PG&f=1", "display_name": "user2977378", "link": "https://stackoverflow.com/users/2977378/user2977378"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 35601423, "answer_count": 3, "score": 1, "last_activity_date": 1456828894, "creation_date": 1456314013, "last_edit_date": 1456828894, "question_id": 35601175, "link": "https://stackoverflow.com/questions/35601175/adding-support-for-newlines-n-in-c", "title": "Adding support for newlines (\\n) in C", "body": "<p>I have written a simple OS which I am compiling using QEMU in Linux. The terminal is printing a simple message on the screen (<code>\"Hello World\\n\"</code>), however, the new line character (<code>\\n</code>) is producing a strange character rather than inserting a new line after the message. </p>\n\n<p>Here is the code I have written for <code>putchar</code>:</p>\n\n<pre><code>void putchar(char c) {\n    putentryat(c, color, column, row);\n    if (++column == WIDTH) {\n        column = 0;\n        if (++row == HEIGHT) {\n            column = 0;\n        }\n    }\n}\n</code></pre>\n\n<p>Main function simply calling a <code>writestring</code> function which displays the message as shown in the below code.</p>\n\n<pre><code>void main() {\n    initialize();\n    writestring(\"Hello World\\n\");\n}\n</code></pre>\n\n<p>At the moment the <code>n</code> is printing out garbage character as stdio.h is not supported by the program. I have tried adding <code>putchar('\\n');</code> in <code>putchar</code> function after <code>putentryat(...)</code> but I am still getting the problem.</p>\n\n<p>If somebody can provide tips on how I can resolve this problem I would greatly appreciate it. </p>\n"}, {"tags": ["c", "scanf", "stdin", "raspberry-pi2", "getchar"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456313913, "post_id": 35601089, "comment_id": 58886798, "body": "Waiting for user-input in a startup progam is probably not a good idea ..."}, {"owner": {"reputation": 1766, "user_id": 264148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd00a8313fd6255ddbbe88e7aff63d0e?s=128&d=identicon&r=PG", "display_name": "r_ahlskog", "link": "https://stackoverflow.com/users/264148/r-ahlskog"}, "edited": false, "score": 0, "creation_date": 1456313963, "post_id": 35601089, "comment_id": 58886837, "body": "At least not one that runs from rc.local, running it from inittab could possibly work."}, {"owner": {"reputation": 713, "user_id": 2086872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7840f5538278f16aff2a2777aa4ba47c?s=128&d=identicon&r=PG", "display_name": "The Welder", "link": "https://stackoverflow.com/users/2086872/the-welder"}, "edited": false, "score": 0, "creation_date": 1456313989, "post_id": 35601089, "comment_id": 58886856, "body": "Need a lot more information to answer this question properly.  Need to see how you&#39;re opening your file, variable type for n etc."}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456314130, "post_id": 35601089, "comment_id": 58886953, "body": "and can you tell me why...? :)"}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456314390, "post_id": 35601089, "comment_id": 58887149, "body": "i just added one line &quot;/path/program&quot; to rc.local, n is normal char"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456314705, "post_id": 35601089, "comment_id": 58887359, "body": "getchar returns an int. This is no coincidence."}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456314887, "post_id": 35601089, "comment_id": 58887497, "body": "well, char is basically int and this has nothing to do with my problem ;)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456316978, "post_id": 35601089, "comment_id": 58889001, "body": "<code>char is basically int</code> not true. <code>this has nothing to do with my problem</code> if you have already solved you problem, you might know what has nothing to do with it, otherwise, don&#39;t be so sure."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456327057, "post_id": 35601089, "comment_id": 58896223, "body": "&quot; .... and the program won&#39;t end, when I press <code>q</code>&quot;.  What do you think should happen if you typed <code>A</code> &lt;backspace&gt; <code>B</code>.  Do you expect code to receive 1 or 3 <code>char</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456392288, "post_id": 35601089, "comment_id": 58928287, "body": "Maybe <code>init</code> doesn&#39;t like the fact there is no keyboard, and closes <code>stdin</code>, so no child process gets <code>stdin</code>. If you want to read from a serial port, you need to explicitly open a tty associated with that serial port."}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456733753, "post_id": 35601089, "comment_id": 59066321, "body": "@chux only one. I can see the letters on the screen normally as I type them and I have to press enter to &quot;send&quot; it"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456759109, "post_id": 35601089, "comment_id": 59082616, "body": "@Charlestone &quot;only one.&quot; implies that input is &quot;buffered&quot;.   Code does not receive <code>&#39;q&#39;</code> when the &lt;Q&gt; key is pressed. It waits.   <code>scanf()</code> receives <code>&#39;q&#39;</code> after  keys &lt;Q&gt; .... &lt;Enter&gt; are pressed."}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456819322, "post_id": 35601089, "comment_id": 59110830, "body": "&quot;and I have to press enter to &quot;send&quot; it&quot; ..."}], "answers": [{"comments": [{"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456320499, "post_id": 35601805, "comment_id": 58891528, "body": "ok, but why is EOF on stdin? and why nothing happens when I press &#39;q&#39;? :/"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456397019, "post_id": 35601805, "comment_id": 58931708, "body": "I don&#39;t know why <code>stdin</code> is at end of file, but <code>scanf</code> return value of <code>-1</code> indicates this.  You must check for this correctly, otherwise you will loop forever as your input never reaches the program."}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456733971, "post_id": 35601805, "comment_id": 59066421, "body": "but how can I stop the program then? If I stoped it after EOF on stdin, It wouldn&#39;t start at all because there is always EOF on stdin, even if I call clearerr()"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456743136, "post_id": 35601805, "comment_id": 59071946, "body": "@Charlestone: if <code>stdin</code> is at end of file, it must be redirected from an empty file, you cannot get your input from that.  How do you run your program?  Do you use an IDE, do you have a terminal?"}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456819450, "post_id": 35601805, "comment_id": 59110875, "body": "Please re-read the question, I&#39;ve updated it several times ;)"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1456315737, "creation_date": 1456315737, "answer_id": 35601805, "question_id": 35601089, "link": "https://stackoverflow.com/questions/35601089/why-i-cant-reach-stdin-at-startup-on-raspberry-pi-jessie-lite/35601805#35601805", "title": "Why I can&#39;t reach stdin at startup on Raspberry-Pi Jessie Lite?", "body": "<p>The idiomatic way to write this loop is:</p>\n\n<pre><code>int c;\nwhile ((c = getchar()) != EOF &amp;&amp; c != 'q'){\n    putchar(c);\n}\n</code></pre>\n\n<p>Your implementation cannot detect end of file and will loop forever, printing funny characters such as <code>\u00ff</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1456315852, "post_id": 35601820, "comment_id": 58888181, "body": "<code>n</code> should be defined as <code>int</code> and your should check for <code>EOF</code> in the <code>while</code> loop.  Also fix the typo on <code>printf</code>."}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456318661, "post_id": 35601820, "comment_id": 58890186, "body": "welll, this might be the problem! /dev/tty can&#39;t be opened at startup - fopen returns null. Any Ideas where else the keyboard could be? :)"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "reply_to_user": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456321499, "post_id": 35601820, "comment_id": 58892236, "body": "@Charlestone /dev folder may not be populated in the time you executing your program at startup. generally udev program is responsible for that. my suggestion is to  put your program start time after udev execution"}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456323023, "post_id": 35601820, "comment_id": 58893350, "body": "I tried to put <code>service udev start</code> to rc.local, iand i also tried <code>update.rc.d udev enable</code> command. Nothing worked. Any other suggestion how to achieve what you have suggested? :) (btw other tty (like ttyUSB1) work fine, and I can see what I typed on the screen...)"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "reply_to_user": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456324238, "post_id": 35601820, "comment_id": 58894276, "body": "@Charlestone: you mean the program worked with &quot;/dev/ttyUSB1&quot;?"}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456324439, "post_id": 35601820, "comment_id": 58894428, "body": "no, I mean that I am able to read some data from GPS reciever which is connected to /dev/ttyUSB1 :)"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "reply_to_user": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "edited": false, "score": 0, "creation_date": 1456324877, "post_id": 35601820, "comment_id": 58894773, "body": "@Charlestone: can you check if the code works in normal linux mode (not startup)? I want to make sure that keyboard mounts under /dev/tty not something else"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456326780, "post_id": 35601820, "comment_id": 58896037, "body": "Why <code>(char)</code> in <code>printf(&quot;%c&quot;,(char)n);</code>?  Should code not look for <code>n == EOF</code> before <code>printf()</code>?"}, {"owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456734367, "post_id": 35601820, "comment_id": 59066614, "body": "@chux because the printf is there just for debugging :)"}], "tags": [], "owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "is_accepted": false, "score": 0, "last_activity_date": 1456315859, "last_edit_date": 1456315859, "creation_date": 1456315757, "answer_id": 35601820, "question_id": 35601089, "link": "https://stackoverflow.com/questions/35601089/why-i-cant-reach-stdin-at-startup-on-raspberry-pi-jessie-lite/35601820#35601820", "title": "Why I can&#39;t reach stdin at startup on Raspberry-Pi Jessie Lite?", "body": "<p>Just a wild guess that stdin maybe redirected to something else and you need to read from keyboard directly. try the following code:</p>\n\n<pre><code>FILE *tty = fopen(\"/dev/tty\", \"r\");\nif (!tty) {\n    exit(1);\n}\nint n=0;\nwhile (n != 'q'){\n    n=fgetc(tty); //tried to use scanf() here as well\n    printf(\"%c\",(char)n);\n}\n</code></pre>\n"}], "owner": {"reputation": 1058, "user_id": 4710968, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1f72a47abbae7cb93b1ec101e5b13276?s=128&d=identicon&r=PG&f=1", "display_name": "Charlestone", "link": "https://stackoverflow.com/users/4710968/charlestone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456819550, "creation_date": 1456313776, "last_edit_date": 1456819550, "question_id": 35601089, "link": "https://stackoverflow.com/questions/35601089/why-i-cant-reach-stdin-at-startup-on-raspberry-pi-jessie-lite", "title": "Why I can&#39;t reach stdin at startup on Raspberry-Pi Jessie Lite?", "body": "<p>I have this code. what I want to do is to wait for user to press 'q' to end the program.</p>\n\n<pre><code>.\n...starting few threads, which use fflush(stdout) (just saying...)\n.\nchar n = 0;\nwhile (n != 'q') {\n    n = getchar(); //tried to use scanf() here as well\n    printf(\"%c\", n);\n}\n...killing all threads...\nreturn 0;\n</code></pre>\n\n<p>When I run this <strong>in a normal Linux enviroment it works fine.</strong>\nThe problem starts when I run this program at startup on my raspberry-pi with debian jessie lite distribution (I added the path to the program to /etc/rc.local) - it ends in an infinite loop, <code>scanf</code> is still returning <code>-1</code> and <code>getchar()</code> some weird character and the program won't end, when I press <code>q</code>. Ctrl+C doesn't work either so there is no way, how to end the program.\nAny suggestions? (at least how to kill the program...?)</p>\n\n<p>Edit: To let you know what the program does.\nRaspberry-pi with this program is attached to some serial ports and converts and transfers some GPS data. It should work \"out of the box\" without any keyboard or mouse or monitor. = <strong>Just plug the device to some cables and do nothing more.</strong> In some cases someone would like to see log files on the raspberry, so he needs to stop the program, obviously.</p>\n\n<p>Edit2: when I did the same with some normal Raspbian, it worked fine too.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I tried to debug it - shrinked the code to this only</p>\n\n<pre><code>int main(void){\n    char n=0;\n    int x;\n    while (n != 'q'){\n        clearerr(stdin);\n        x=scanf(\"%c\",&amp;n);\n        printf(\"%c %d\\n\",n,x);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>added <code>service start udev</code> to rc.local and tried command <code>update.rc.d udev enable</code></p>\n\n<p>output on raspberry-pi when launched at startup is still</p>\n\n<pre><code>-1\n-1\n-1\n.\n.\n</code></pre>\n\n<p>so there definitely have to be something wrong with stdin.\nAfter startup and on other systems, the output is obviously <code>q 1</code> (when I press 'q' (and enter) ...)</p>\n\n<p>when I tried to read from <code>/dev/tty</code>, <code>fopen()</code> returned <code>NULL</code></p>\n\n<p>Really need a help with this</p>\n"}, {"tags": ["c", "static", "line", "analysis"], "comments": [{"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1456313228, "post_id": 35600645, "comment_id": 58886335, "body": "Is the actual code always compilable? If yes, you can try replacing your <code>return B1;</code> with something like <code>THING_I_SEARCH_FOR</code> using e.g. <code>sed</code> and on compilation look at compiler error, which would be like <code>In function &#39;bar&#39;:</code> followed by actual errors (undeclared <code>THING_I_SEARCH_FOR</code> in this case)."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1456313469, "post_id": 35600645, "comment_id": 58886505, "body": "It sounds like you want something analogous to the <b>FILE</b> and <b>LINE</b> preprocessor macros.  Unfortunately, the preprocessor doesn&#39;t know about functions, and I don&#39;t know of anything in the C language itself that can do this."}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "edited": false, "score": 0, "creation_date": 1456313799, "post_id": 35600645, "comment_id": 58886708, "body": "@muXXmit2X I think you mean <code>__func__</code>."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "edited": false, "score": 0, "creation_date": 1456314049, "post_id": 35600645, "comment_id": 58886898, "body": "@muXXmit2X it might, I&#39;m not sure.  If so, then it might be what OP wants, although is this only available in gcc, or is it included in one of the more recent ANSI C standards?"}, {"owner": {"reputation": 21, "user_id": 5974066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492727ceff99af5f49a891b0e9794995?s=128&d=identicon&r=PG", "display_name": "Conch&#250;r Navid", "link": "https://stackoverflow.com/users/5974066/conch%c3%bar-navid"}, "edited": false, "score": 1, "creation_date": 1456314444, "post_id": 35600645, "comment_id": 58887187, "body": "<code>__func__</code> doesn&#39;t work because it is not available as string for the preprocessor (it will be hacked in by GCC in a later step). And regex doesn&#39;t work to find the function name because regex can&#39;t parse C.  Funny enough, causing a compiler error is actually the best answer until now"}, {"owner": {"reputation": 21, "user_id": 5974066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492727ceff99af5f49a891b0e9794995?s=128&d=identicon&r=PG", "display_name": "Conch&#250;r Navid", "link": "https://stackoverflow.com/users/5974066/conch%c3%bar-navid"}, "edited": false, "score": 0, "creation_date": 1456314781, "post_id": 35600645, "comment_id": 58887412, "body": "And just as a remark, I never said that I search for an &quot;phrase&quot; but that I have line numbers."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1456315449, "post_id": 35600645, "comment_id": 58887886, "body": "What do you mean by finding the function name? If you know the line number, why not just open the source file and look the function name manually? What are you trying to do? What is the real problem you are trying to solve?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1456315642, "post_id": 35600645, "comment_id": 58888026, "body": "Your question is not clear. But, have you tried a source indexer, like <code>cscope</code> or <code>lxr</code>?"}, {"owner": {"reputation": 21, "user_id": 5974066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492727ceff99af5f49a891b0e9794995?s=128&d=identicon&r=PG", "display_name": "Conch&#250;r Navid", "link": "https://stackoverflow.com/users/5974066/conch%c3%bar-navid"}, "edited": false, "score": 0, "creation_date": 1456315785, "post_id": 35600645, "comment_id": 58888132, "body": "Finding the function == getting the name of the function a line belongs to. And the number of lines are just too many to making this manual approach practical. These have to be associated with their function names to estimate the impact of a source code property for each function. It is basically used to identify which function has to be refactored due to this property. But it isn&#39;t relevant for this question what this property is or that the function has to be refactored for some reason(tm)."}, {"owner": {"reputation": 21, "user_id": 5974066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492727ceff99af5f49a891b0e9794995?s=128&d=identicon&r=PG", "display_name": "Conch&#250;r Navid", "link": "https://stackoverflow.com/users/5974066/conch%c3%bar-navid"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1456315845, "post_id": 35600645, "comment_id": 58888171, "body": "@jxh: I especially asked how I can use these tools to get from a line number to the function name this line number belongs to. And no, manually is no option"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1456316155, "post_id": 35600645, "comment_id": 58888378, "body": "You didn&#39;t mention any tools you tried, and what the limitations were."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456316278, "post_id": 35600645, "comment_id": 58888464, "body": "<code>__func__</code> has been part of the C language for 17 years. It is not a GCC extension."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456316351, "post_id": 35600645, "comment_id": 58888532, "body": "Anyway, tool recommendation questions are explicitly off-topic on SO. Try <a href=\"http://softwarerecs.stackexchange.com/\">softwarerecs.stackexchange.com</a>"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1456352424, "post_id": 35600645, "comment_id": 58912467, "body": "If clang can <i>parse</i> your code, then just use libclang. Getting a callback called on each function declaration/definition and getting the line numbers from that isn&#39;t hard. Iterating over the tokens is also worth a try. Both can easily be done in a few hours even if one isn&#39;t familiar with the library."}], "owner": {"reputation": 21, "user_id": 5974066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492727ceff99af5f49a891b0e9794995?s=128&d=identicon&r=PG", "display_name": "Conch&#250;r Navid", "link": "https://stackoverflow.com/users/5974066/conch%c3%bar-navid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1456316379, "answer_count": 0, "score": 2, "last_activity_date": 1456312633, "creation_date": 1456312633, "question_id": 35600645, "link": "https://stackoverflow.com/questions/35600645/get-the-function-for-a-specific-line-in-a-c99-source-file", "closed_reason": "Not suitable for this site", "title": "Get the function for a specific line in a C99 source file", "body": "<p>I have a a large number of files which are all C99 and a long list of lines. Is there some tool which I could use to find out the function name for the lines? And how I do this with this tool.</p>\n\n<p>I have for example this kind of file</p>\n\n<pre><code>static enum foo bar(int c)\n{\n    if (c &lt; 30)\n        return B1;\n    else\n        return B2;\n}\n\nstatic enum foo somethingelse(void)\n{\n    return B3;\n}\n</code></pre>\n\n<p>The line information would be 4 <code>return B1;</code> and I need as answer at least \"bar\" but not \"somethingelse\"</p>\n\n<p>The source code can only be compiled with GCC due to its dependencies.</p>\n"}, {"tags": ["c", "process", "fork"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1456312426, "post_id": 35600504, "comment_id": 58885722, "body": "Each of your child processes are also calling <code>fork</code>."}, {"owner": {"reputation": 134, "user_id": 3196613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4153b66bc806e3ee8ffd00a4c6f2c7a?s=128&d=identicon&r=PG&f=1", "display_name": "pranav", "link": "https://stackoverflow.com/users/3196613/pranav"}, "edited": false, "score": 1, "creation_date": 1456312794, "post_id": 35600504, "comment_id": 58886009, "body": "You put &quot;break/exit&quot; statement  in child block to avoid the calling of fork by child process"}, {"owner": {"reputation": 562, "user_id": 5894806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/802532109875029/picture?type=large", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/5894806/usman-khan"}, "edited": false, "score": 0, "creation_date": 1456312973, "post_id": 35600504, "comment_id": 58886137, "body": "Thank you Pranav, that fixed it!"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1456313594, "post_id": 35600504, "comment_id": 58886586, "body": "That is exactly what I suggested."}, {"owner": {"reputation": 562, "user_id": 5894806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/802532109875029/picture?type=large", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/5894806/usman-khan"}, "edited": false, "score": 0, "creation_date": 1456313766, "post_id": 35600504, "comment_id": 58886680, "body": "Yes I gave you the answer tick. Thanks for your help!"}], "answers": [{"comments": [{"owner": {"reputation": 562, "user_id": 5894806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/802532109875029/picture?type=large", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/5894806/usman-khan"}, "edited": false, "score": 0, "creation_date": 1456312655, "post_id": 35600600, "comment_id": 58885907, "body": "Oh right I see, but how would I go about this problem :/ Thanks though I get what&#39;s happening now."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 2, "last_activity_date": 1456312696, "last_edit_date": 1456312696, "creation_date": 1456312517, "answer_id": 35600600, "question_id": 35600504, "link": "https://stackoverflow.com/questions/35600504/forking-n-child-processes-properly/35600600#35600600", "title": "Forking N child processes properly", "body": "<p>Remember that the children <em>also</em> continue executing the <code>for</code> loop and <code>fork</code> more children.</p>\n\n<p>As a simple fix (as you are clearly still developing this program), call <code>exit()</code> after the <code>printf</code> in the child code. You don't want the children to keep executing code that is only intended for the parent to run.</p>\n"}], "owner": {"reputation": 562, "user_id": 5894806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/802532109875029/picture?type=large", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/5894806/usman-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 35600600, "answer_count": 1, "score": 0, "last_activity_date": 1456312696, "creation_date": 1456312260, "question_id": 35600504, "link": "https://stackoverflow.com/questions/35600504/forking-n-child-processes-properly", "title": "Forking N child processes properly", "body": "<p>So I am programming a simple rummy card game. I need to create either 3, 4 or 5 processes where the parent acts as the dealer handing the cards to them. I am coming across an unexpected fault I am not sure how to approach.</p>\n\n<p>The output I get is:</p>\n\n<pre><code>15019373x-apollo:/home/15019373x/comp2432/lab3$ ./rummy 3\nChild: 1 PID 26581\nChild: 2 PID 26582\nChild: 3 PID 26585\n15019373x-apollo:/home/15019373x/comp2432/lab3$ Child: 2 PID 26584\nChild: 3 PID 26586\nChild: 3 PID 26583\nChild: 3 PID 26587\n</code></pre>\n\n<p>So I was trying to create 3 processes but the loop seems to create 7. I'm not too sure what's happening. </p>\n\n<p>Here is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int players = atoi(argv[1]);\n    char deck[52][3];\n    int i, pid, cid;\n\n    if (players &gt; 5 || players &lt; 3)\n    {\n            printf(\"%d is not the allowed number of players, min is 3 and max is 5\\n\", players);\n            exit(1);\n    }\n\n    for (i = 0; i &lt; argc - 2; i++)\n    {\n            strcpy(deck[i], argv[i+2]);\n    }\n\n    for (i = 0; i &lt; players; i++)\n    {\n            pid = fork();\n            if (pid &lt; 0)\n            {\n                    printf(\"Fork Failed\\n\");\n                    exit(1);\n            }\n            else if (pid == 0)\n            {\n                    printf(\"Child: %d PID %d\\n\", i+1, getpid());\n            }\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>If someone could point me in the right direction I'd be very grateful.</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456312165, "post_id": 35600289, "comment_id": 58885509, "body": "&quot;not allowed&quot; is the wrong term. It is just not possible. But you don&#39;t copy an array (presuming <code>arr1</code> and <code>arr2</code> are 1D arrays), but a single element. <b>This</b> is very well possible. Please clarify your question. From a wrong prerequisite, everything can be deduced."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1456312215, "post_id": 35600289, "comment_id": 58885542, "body": "<code>memset</code> or <code>memcpy</code> will help you to achieve the same thing though: <code>memcpy(arr1, arr2, sizeof arr1&#47;sizeof *arr1);</code> or something"}, {"owner": {"reputation": 37, "user_id": 5969992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b470bcdfdb747dfb9634bc0f97b42fbe?s=128&d=identicon&r=PG", "display_name": "Bhanu Prakash", "link": "https://stackoverflow.com/users/5969992/bhanu-prakash"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456312248, "post_id": 35600289, "comment_id": 58885579, "body": "That gave me some info. Thanks @Olaf"}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 0, "last_activity_date": 1456313952, "creation_date": 1456313952, "answer_id": 35601153, "question_id": 35600289, "link": "https://stackoverflow.com/questions/35600289/is-there-a-link-between-copying-of-arrays-by-assignment-operator-and-assigning-v/35601153#35601153", "title": "Is there a link between copying of arrays by assignment operator and assigning values to an already defined array directly?", "body": "<p>It's not <em>quite</em> the same. </p>\n\n<p><code>{1,2,3}</code> is an initializer list. The compiler sees it and hard-codes its values into the array. Assigning an initializer-list to an array that already has a definition (<code>int array[3]; array={1,2,3};</code>) is a syntax error (clang says <code>expected expression</code> because it's expecting a closing square bracket before an assignment operator as in <code>int array[]={1,2,3};</code>).</p>\n\n<p>Assigning one array to another is impossible in your case because <code>array type 'int [3]' is not assignable</code>. I'd call it something like <em>logic error</em> (the programmer just didn't know he can't do it, but the syntax is valid).</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 5969992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b470bcdfdb747dfb9634bc0f97b42fbe?s=128&d=identicon&r=PG", "display_name": "Bhanu Prakash", "link": "https://stackoverflow.com/users/5969992/bhanu-prakash"}, "edited": false, "score": 0, "creation_date": 1456322542, "post_id": 35601544, "comment_id": 58892969, "body": "That gave me some clarity. Thank you :)"}], "tags": [], "owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "is_accepted": true, "score": 1, "last_activity_date": 1456315052, "last_edit_date": 1495542668, "creation_date": 1456315052, "answer_id": 35601544, "question_id": 35600289, "link": "https://stackoverflow.com/questions/35600289/is-there-a-link-between-copying-of-arrays-by-assignment-operator-and-assigning-v/35601544#35601544", "title": "Is there a link between copying of arrays by assignment operator and assigning values to an already defined array directly?", "body": "<blockquote>\n  <p>is this following the same case mentioned at the first?</p>\n</blockquote>\n\n<p>No, they are different.</p>\n\n<p>In the first case, what you try to do is array assignment, which is not possible in C directly.  The language grammar states an <a href=\"https://stackoverflow.com/a/10918196/183120\">array name to be a non-modifiable lvalue</a>, so</p>\n\n<pre><code>arr1 = arr2;\n</code></pre>\n\n<p>is invalid. The relevant excerpt from the C11 standard draft (\u00a76.3.2.1):</p>\n\n<blockquote>\n  <p>A <em>modifiable lvalue</em> is an lvalue that does not have array type, ...</p>\n</blockquote>\n\n<p>In the second case</p>\n\n<pre><code>int a[3];\na[]={1,3,2};\n</code></pre>\n\n<p>you are trying to assign the initializer list <code>{1, 2, 3}</code> to an invalid sub-expression <code>a[]</code> and hence is illegal. What is assigned to it is immaterial; <code>a[] = 1</code> is invaild too.</p>\n"}, {"tags": [], "owner": {"reputation": 1419, "user_id": 488095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ro1E0.jpg?s=128&g=1", "display_name": "jamieguinan", "link": "https://stackoverflow.com/users/488095/jamieguinan"}, "is_accepted": false, "score": 0, "last_activity_date": 1456316177, "last_edit_date": 1456316177, "creation_date": 1456315865, "answer_id": 35601857, "question_id": 35600289, "link": "https://stackoverflow.com/questions/35600289/is-there-a-link-between-copying-of-arrays-by-assignment-operator-and-assigning-v/35601857#35601857", "title": "Is there a link between copying of arrays by assignment operator and assigning values to an already defined array directly?", "body": "<p>The other posts and comments are correct in that you cannot assign a bare array after initialization.</p>\n\n<p>However, you <em>can</em> assign to a struct that contains such an array, even after initialization, using a compound literal,</p>\n\n<pre><code>typedef struct {\n  int v[3];\n} A;\n\nA a = {{1,2,3}};   // Valid.\na = (A){{4,5,6}};  // Also valid.\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5969992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b470bcdfdb747dfb9634bc0f97b42fbe?s=128&d=identicon&r=PG", "display_name": "Bhanu Prakash", "link": "https://stackoverflow.com/users/5969992/bhanu-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 35601544, "answer_count": 3, "score": 0, "last_activity_date": 1456316177, "creation_date": 1456311743, "last_edit_date": 1456313137, "question_id": 35600289, "link": "https://stackoverflow.com/questions/35600289/is-there-a-link-between-copying-of-arrays-by-assignment-operator-and-assigning-v", "title": "Is there a link between copying of arrays by assignment operator and assigning values to an already defined array directly?", "body": "<p>In C language, an array cannot be copied to another array directly by assignment operator.</p>\n\n<pre><code>int arr1[]={1,3,2};\nint arr2[]={0};\n\narr2=arr1;//not possible\n</code></pre>\n\n<p>Also, we cannot assign values to an array that is already defined, if I am not wrong...</p>\n\n<pre><code>int a[3];\na[]={1,3,2}; //this is not possible\n</code></pre>\n\n<p>In the code above, <code>a[]</code> and <code>{1,3,2}</code> act as two different arrays, and an assignment operator is used between them. So, is this following the same case mentioned at the first?</p>\n\n<p>Please clarify.\nThanks.</p>\n"}, {"tags": ["c", "parsing", "csv"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1456309965, "post_id": 35599549, "comment_id": 58883934, "body": "isn&#39;t it like <code>strtok()</code> modifies the input?"}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1456312823, "post_id": 35599549, "comment_id": 58886027, "body": "@SouravGhosh Seems its the issue."}], "answers": [{"comments": [{"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456311132, "post_id": 35599654, "comment_id": 58884714, "body": "@techno Copy <code>line</code> to a temporary <code>buffer</code> inside getcsv field, and work on that buffer"}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456311427, "post_id": 35599654, "comment_id": 58884923, "body": "I just fot your edit.. before you removed it :) .. i know its not an efficient way i have another question regarding it .. <a href=\"http://stackoverflow.com/questions/35594037/read-data-from-csv-and-put-into-database\" title=\"read data from csv and put into database\">stackoverflow.com/questions/35594037/&hellip;</a>  the answer there does not work."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456311893, "post_id": 35599654, "comment_id": 58885288, "body": "@techno My suggestion in above comment will fix one of the problems I mentioned in my answer (the one about <code>strtok</code> modifying input), you still need to verify if the parsing inside <code>getcsvfield</code> function is done correctly"}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456312147, "post_id": 35599654, "comment_id": 58885496, "body": "It seems to be done correctly.. i will check and modify if necessary."}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456312389, "post_id": 35599654, "comment_id": 58885692, "body": "okay.. great.. but there was an error in the edit... the corrected line is <code>char buffer[1024]= {0};</code>"}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456312760, "post_id": 35599654, "comment_id": 58885979, "body": "ah.. okay.. but i dont know what you mean... will you edit it?"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456313058, "post_id": 35599654, "comment_id": 58886205, "body": "@techno please check it now"}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456313772, "post_id": 35599654, "comment_id": 58886687, "body": "Can you paste the whole method please"}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456314307, "post_id": 35599654, "comment_id": 58887074, "body": "Thanks... but the variable <code>line</code> is a parameter... why do you declare it again... see <code>const char* getcsvfield(char* line, int num)</code>"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456314490, "post_id": 35599654, "comment_id": 58887227, "body": "@techno Where do I declare it once again? This: <code>const char* getcsvfield(char* line, int num)</code> <code>line</code> can be used inside function, outside yous till need one"}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456314838, "post_id": 35599654, "comment_id": 58887456, "body": "sorry,that was a different error :) it worked fine.Thanks for your help."}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 2, "last_activity_date": 1456313876, "last_edit_date": 1456313876, "creation_date": 1456310066, "answer_id": 35599654, "question_id": 35599549, "link": "https://stackoverflow.com/questions/35599549/csv-parsing-second-field-returning-null-values/35599654#35599654", "title": "CSV Parsing - Second Field Returning Null Values", "body": "<blockquote>\n  <p>strtok(line, \";\");</p>\n</blockquote>\n\n<p><code>strtok</code> modifies the string (in this case <code>line</code>) being passed to it. So you should not use the same <code>line</code> (returned from first call to <code>getcsvfield</code>) also during the second time you call <code>getcsvfield</code>, because after first call to <code>getcsvfield</code>, <code>line</code> now has different content.</p>\n\n<p>Notice this is not an issue <em>within</em> the function <code>getcsvfield</code>, because when you pass NULL second time to <code>strtok</code> inside <em>that</em> function, it knows how to proceed with the modified input string in a correct way.</p>\n\n<p>From <a href=\"http://www.cplusplus.com/reference/cstring/strtok/\" rel=\"nofollow\">manual</a> about <code>strtok</code> parameters:</p>\n\n<blockquote>\n  <p>Notice that this string is modified by being broken into smaller\n  strings (tokens).</p>\n</blockquote>\n\n<p>Something like this should do the trick. This is the most \"basic\" approach, you can try other ones too. Leave the <code>getcsvfield</code> function as you had in your code initially, just on the caller side do:</p>\n\n<pre><code>char line[1024];\nchar buffer[1024];\nwhile (fgets(line, 1024, stream))\n{\n    // char* tmp = strdup(line); not necessary in this case\n    strcpy(buffer, line);\n    printf(\"Field 1 would be %s\\n\", getcsvfield(buffer, 1));\n    strcpy(buffer, line);\n    printf(\"Field 2 would be %s\\n\", getcsvfield(buffer, 2));\n    // free(tmp);\n}\n</code></pre>\n\n<p>As it currently stands above, each call to <code>getcsvfield</code>, returns poitner to same memory address - <code>buffer</code>. For <code>printing</code> it works ok (because at the time of printing it shows what is there in buffer), but if you want to store result of each call to <code>getcsvfield</code> for later use, you may want to copy result of each invocation of <code>getcsvfield</code> to some different memory location each time.</p>\n"}], "owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 35599654, "answer_count": 1, "score": 2, "last_activity_date": 1456313876, "creation_date": 1456309805, "last_edit_date": 1456312612, "question_id": 35599549, "link": "https://stackoverflow.com/questions/35599549/csv-parsing-second-field-returning-null-values", "title": "CSV Parsing - Second Field Returning Null Values", "body": "<p>I use the following code to parse this CSV</p>\n\n<pre><code>me;val1;val2;val3;val4;val5;\nme;val1;val2;val3;val4;val5;\n</code></pre>\n\n<hr>\n\n<pre><code>void readcsv()\n{\n    FILE* stream = fopen(\"input.csv\", \"r\");\n\n    char line[1024];\n    while (fgets(line, 1024, stream))\n    {\n        char* tmp = strdup(line);\n      //  printf(\"Field 1 would be %s\\n\", getcsvfield(tmp, 1));\n        printf(\"Field 1 would be %s\\n\", getcsvfield(tmp, 1));\n        printf(\"Field 2 would be %s\\n\", getcsvfield(tmp, 2));\n        // NOTE strtok clobbers tmp\n        free(tmp);\n    }\n}\n//Used for parsing CSV\nconst char* getcsvfield(char* line, int num)\n{\n    const char* tok;\n    for (tok = strtok(line, \";\");\n            tok &amp;&amp; *tok;\n            tok = strtok(NULL, \";\\n\"))\n    {\n        if (!--num)\n            return tok;\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>But i keep getting NULL value in the second Field</p>\n\n<pre><code>Output:\nField 1 would be me\nField 2 would be (null)\nField 1 would be me\nField 2 would be (null)\n</code></pre>\n\n<p>What im i doing wrong? </p>\n"}, {"tags": ["c", "arrays", "pointers", "fread"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456309636, "post_id": 35599371, "comment_id": 58883659, "body": "You forgot to <code>free()</code> what you <code>malloc()</code> &#39;ed"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1456309661, "post_id": 35599371, "comment_id": 58883684, "body": "<code>myArray</code> is not a contiguous area of memory, each allocation you make can return a pointer to just about anywhere in the free space. See e.g. <a href=\"http://stackoverflow.com/questions/18440205/casting-void-to-2d-array-of-int-c/18440456#18440456\">this old answer of mine</a> for the difference between an array of arrays, and a pointer to pointer &quot;matrix&quot;."}, {"owner": {"reputation": 508, "user_id": 1659500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dc77cc2498bea2b49cab73be68bd0?s=128&d=identicon&r=PG", "display_name": "&#216;ystein Sch&#248;nning-Johansen", "link": "https://stackoverflow.com/users/1659500/%c3%98ystein-sch%c3%b8nning-johansen"}, "edited": false, "score": 1, "creation_date": 1456309828, "post_id": 35599371, "comment_id": 58883827, "body": "Look at the <a href=\"http://c-faq.com/aryptr/dynmuldimary.html\" rel=\"nofollow noreferrer\">C FAQ section 6.16</a> and user the second method to allocate the memory contiguous. If you can ensure that the memory is contiguous you can read the whole file with one <code>fread()</code> as your code does. But also consider using <code>mmap()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1456309577, "creation_date": 1456309577, "answer_id": 35599442, "question_id": 35599371, "link": "https://stackoverflow.com/questions/35599371/reading-2d-array-from-binary-file-and-return-the-pointer-this-array-in-c/35599442#35599442", "title": "Reading 2d array from binary file and return the pointer this array (in C)", "body": "<p>Your <code>fread()</code> call is overwriting all those pointers you painfully set up.</p>\n\n<p>You need to read a single row at a time, and use the set-up pointer to store to:</p>\n\n<pre><code>for(size_t i = 0; i &lt; rows; ++i)\n  fread(myArray[i], cols * sizeof *myArray[i], data);\n</code></pre>\n\n<p>Also, when doing I/O and memory allocation you should check the return values too, of course.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5973676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4410b38a33fc990f387beaf206f58320?s=128&d=identicon&r=PG&f=1", "display_name": "LAM", "link": "https://stackoverflow.com/users/5973676/lam"}, "edited": false, "score": 0, "creation_date": 1456342298, "post_id": 35600288, "comment_id": 58906720, "body": "Thank you so much, your explanation was just great!"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1456315496, "last_edit_date": 1456315496, "creation_date": 1456311742, "answer_id": 35600288, "question_id": 35599371, "link": "https://stackoverflow.com/questions/35599371/reading-2d-array-from-binary-file-and-return-the-pointer-this-array-in-c/35600288#35600288", "title": "Reading 2d array from binary file and return the pointer this array (in C)", "body": "<p>The problem is that there is no 2D array in your code. The pointer-to-pointer look-up table thing is not a 2D array. It is [rows] number of segments scattered all over the heap, at random places. It is therefore also needlessly slow.</p>\n\n<p>Also, you should keep memory allocation and algorithms separated.</p>\n\n<p>Do something like this instead:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid* allocArray (int rows, int cols)\n{\n  return malloc( sizeof(double[rows][cols]) ); // allocate 1 2D-array\n}\n\nvoid readArray (int rows, int cols, double array[rows][cols])\n{\n   FILE *data;\n   data=fopen(\"matrix.bin\", \"rb\");\n   fread(array, sizeof(double[rows][cols]), 1, data); // read 1 2D-array\n}\n\nint main ()\n{\n  int cols = 7;\n  int rows = 15;\n  double (*myArray)[cols] = allocArray(rows, cols);\n\n  readArray(rows, cols, myArray);\n\n  printf(\"%f\\n\", myArray[1][0]);\n\n  free(myArray); // free 1 2D-array\n  return 0; \n}\n</code></pre>\n\n<p>The reason for the peculiar declaration <code>double (*myArray)[cols]</code> instead of the more logical <code>double (*myArray)[rows][cols]</code>, is that we want to avoid the inconvenient array pointer de-referencing syntax. <code>(*myArray)[1][0]</code> is not easy to read. So instead of declaring an array pointer to a 2D array, declare an array pointer to a 1D array, then use pointer indexing on that array pointer. For any pointer, <code>any_pointer[n]</code> gives pointed-at item number n. Array pointers are no difference, so you get 1D array number n.</p>\n"}], "owner": {"reputation": 31, "user_id": 5973676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4410b38a33fc990f387beaf206f58320?s=128&d=identicon&r=PG&f=1", "display_name": "LAM", "link": "https://stackoverflow.com/users/5973676/lam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2789, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1456316290, "creation_date": 1456309385, "question_id": 35599371, "link": "https://stackoverflow.com/questions/35599371/reading-2d-array-from-binary-file-and-return-the-pointer-this-array-in-c", "title": "Reading 2d array from binary file and return the pointer this array (in C)", "body": "<p>I am trying to write a function that returns the pointer of 2d array read from a binary file. Although I compile without error there is always a segmentation fault, when I try to print one of the elements of the array. Here my code:</p>\n\n<pre><code>double ** readArray(int rows, int cols)\n{\n   int i;\n   double **myArray=malloc(rows*sizeof(double*));\n   if (myArray){ \n      for (i=0; i &lt; rows; i++)\n      {\n        myArray[i]=malloc(cols*sizeof(double));\n      }\n   }        \n\n   FILE *data;\n   data=fopen(\"matrix.bin\", \"rb\");\n   fread(myArray,sizeof(double),rows*cols,data);\n\n   return myArray; \n}\n\nint main ()\n{\n  int cols = 7;\n  int rows = 15;\n  double **myArray=readArray(rows, cols);\n  printf(\"%f\\n\", myArray[1][0]);\n  return 0; \n}\n</code></pre>\n"}, {"tags": ["c", "eclipse", "perl", "testing"], "comments": [{"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 1, "creation_date": 1456308535, "post_id": 35598924, "comment_id": 58882829, "body": "Do you have perl installed? <a href=\"https://www.perl.org/get.html#win32\" rel=\"nofollow noreferrer\">perl.org/get.html#win32</a> Do you have make/gcc/etc installed? <a href=\"http://mingw-w64.org/doku.php\" rel=\"nofollow noreferrer\">mingw-w64.org/doku.php</a> If you have those things, your assignment instructions should work fine. You can even run the different make targets in Eclipse CDT with the &quot;make&quot; view <a href=\"http://help.eclipse.org/mars/topic/org.eclipse.cdt.doc.user/reference/cdt_u_make_targets_view.htm?cp=10_4_0_4\" rel=\"nofollow noreferrer\">help.eclipse.org/mars/topic/org.eclipse.cdt.doc.user/referen&zwnj;&#8203;ce/&hellip;</a> and one final piece of advice, upgrade Eclipse, use Mars instead of Kepler, it is 2 years newer"}, {"owner": {"reputation": 341, "user_id": 3572700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TthcN.png?s=128&g=1", "display_name": "Kitalda", "link": "https://stackoverflow.com/users/3572700/kitalda"}, "reply_to_user": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1456313661, "post_id": 35598924, "comment_id": 58886627, "body": "I have now installed perl and I already had mingw installed. But I must admit, I have no clue what these make targets are or how I use them. Previously I have just built my project and ran it from the run-button. That works when there are just .c and .h files and one with a main function in it."}, {"owner": {"reputation": 341, "user_id": 3572700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TthcN.png?s=128&g=1", "display_name": "Kitalda", "link": "https://stackoverflow.com/users/3572700/kitalda"}, "reply_to_user": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1456316032, "post_id": 35598924, "comment_id": 58888306, "body": "Ok, it seems I needed to add C:\\MinGW\\msys\\1.0\\bin to my PATH. Now I at least get a new error that I haven&#39;t seen before."}, {"owner": {"reputation": 341, "user_id": 3572700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TthcN.png?s=128&g=1", "display_name": "Kitalda", "link": "https://stackoverflow.com/users/3572700/kitalda"}, "reply_to_user": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1456316896, "post_id": 35598924, "comment_id": 58888930, "body": "I would still like to know how I can run the test."}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1456317473, "post_id": 35598924, "comment_id": 58889358, "body": "Try starting your msys shell, make sure the PATH has gcc/make/perl. Then cd to the directory containing the skeleton and type <code>make test</code> and or <code>make testrun</code>"}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1456317632, "post_id": 35598924, "comment_id": 58889485, "body": "lets move this to chat and I can see if I can help a bit"}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "reply_to_user": {"reputation": 341, "user_id": 3572700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TthcN.png?s=128&g=1", "display_name": "Kitalda", "link": "https://stackoverflow.com/users/3572700/kitalda"}, "edited": false, "score": 0, "creation_date": 1456317636, "post_id": 35598924, "comment_id": 58889491, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/104408/discussion-between-jonah-graham-and-kitalda\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "is_accepted": true, "score": 1, "last_activity_date": 1456324118, "creation_date": 1456324118, "answer_id": 35604871, "question_id": 35598924, "link": "https://stackoverflow.com/questions/35598924/how-to-run-a-pl-test-on-c-project-in-eclipse-on-windows/35604871#35604871", "title": "How to run a .pl test on C project in Eclipse on Windows?", "body": "<p>To start Eclipse CDT choose 1 of these methods:</p>\n\n<ol>\n<li><p>Start eclipse from the terminal that works, e.g.:</p>\n\n<p>$ /path/to/eclipse.exe &amp;</p></li>\n<li><p>Make sure msys and mingw's bin directories are in the PATH and start eclipse the \"normal\" way</p></li>\n</ol>\n\n<p>Then you can import your project as a new C Project and build/debug/run within CDT as normal:</p>\n\n<ol>\n<li>Choose <em>File</em> menu | <em>New</em>  | <em>Makefile Project with Existing Code</em></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/VKxkj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VKxkj.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"2\">\n<li>Enter path to your project and name. But leave indexer settings as <code>&lt;none&gt;</code>* and press <em>Finish</em></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/8JpeC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8JpeC.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"3\">\n<li>Open the <code>Make Target</code> view</li>\n<li>Right-click on the project and choose <em>New...</em></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/JuK9A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JuK9A.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"5\">\n<li>Fill in the target you want to build</li>\n<li>Double-click on the new green icon and the build will run with the output in the Console view.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/81FfH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/81FfH.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Something seems strange in CDT, if I use the obvious setting of <em>MinGW GCC</em> for indexer settings, then I can't do make properly as CDT is insisting on using internal builder.</li>\n</ul>\n"}], "owner": {"reputation": 341, "user_id": 3572700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TthcN.png?s=128&g=1", "display_name": "Kitalda", "link": "https://stackoverflow.com/users/3572700/kitalda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 35604871, "answer_count": 1, "score": 0, "last_activity_date": 1456324118, "creation_date": 1456308211, "question_id": 35598924, "link": "https://stackoverflow.com/questions/35598924/how-to-run-a-pl-test-on-c-project-in-eclipse-on-windows", "title": "How to run a .pl test on C project in Eclipse on Windows?", "body": "<p>I have to make a C (not C++) project to the specifications given by my teacher.\nTo allow us to test this project he has given us a .pl file that should test the project and a folder full of .in and .out files.</p>\n\n<p>I work on a Win10 machine and has Eclipse for C installed (Kepler).</p>\n\n<p>How can I set up my project to run the provided test?\nDo I need to change anything in the test since I don't work on Linux and not from a cmdl?</p>\n\n<p>The program is a train travel planner.</p>\n\n<p>Here is the .pl file:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy ( $createmode ) = @ARGV;\nmy $testdir = \"./tests\";\n\nif( defined($createmode) ) {\n    if($createmode cmp \"create\") {\n    print \"Brug:\\n\";\n    print \"\\tcheck.pl         - tests if your programs output matches .out-filerne\\n\";\n    print \"\\tcheck.pl create  - makes new .out-files (deletes the excisting files!)\\n\";\n    exit();\n    }\n    $createmode=1;\n}\n\n# print \"$testdir/tests.tst\";\nopen(TESTS, \"$testdir/tests.tst\");\n\n\nmy $koereplan;\nmy $startst;\nmy $slutst;\n\nwhile (&lt;TESTS&gt;) {\n\n    /([\\w\\d]+)\\.in\\s+\\\"(.+)\\\"\\s+\\\"(.+)\\\"/ &amp;&amp; do {\n    $koereplan=\"$testdir/$1\";\n    $startst=$2;\n    $slutst=$3;\n\n    # print $koereplan.\"\\t\".$startst.\"\\t\".$slutst.\"\\n\";\n\n    open(RUN, \"./travelplanning $koereplan.in '$startst' '$slutst' |\");\n    my $cost=0;\n    while(&lt;RUN&gt;) {\n        /^(\\d+)\\s+(\\d+)$/ &amp;&amp; do {\n        $cost=$1+$2*15;\n        }\n    };\n\n    #print \"Cost fra programmet: $cost\";\n\n    my $outfile=\"$koereplan.$startst.$slutst.out\";\n    # print $outfile.\"\\n\";\n    if($createmode) {\n        open(OUT, \"&gt;$outfile\") or die \"Couldn't open '$outfile' for writing\";\n    } else {\n        open(IN, \"&lt;$outfile\") or die \"Couldn't open '$outfile' for reading\";\n    }\n    if($createmode) {\n        print OUT \"$cost\\n\";\n    } else {\n        my $facit=&lt;IN&gt;;\n        if($facit cmp \"$cost\\n\") {\n        chomp $facit;\n        print \"ERROR: $koereplan.in $startst $slutst gav $cost og facit er $facit.\\n\";\n        #last;\n        } else {\n        chomp $facit;\n        print \"SUCCES: $koereplan.in $startst $slutst gav $cost og facit er $facit.\\n\";\n        };\n    };\n    };\n}\n</code></pre>\n\n<p>Some names are in Danish, sorry about that. Koereplan = timetable, slut = end.</p>\n\n<p>Excample of the .in files:</p>\n\n<pre><code>Esbjerg,    07:48\nBramming,   08:00\nVejen,      08:15\nKolding,    08:30\nMiddelfart, 08:45\nOdense,     09:14\nNyborg,     09:29\nKors\u00f8r,     09:42\nSlagelse,   09:53\nSor\u00f8,       10:01\nRingsted,   10:10\nRoskilde,   10:26\nH\u00f8je Taastrup,  10:34\nValby,      10:42\nK\u00f8benhavn H,    10:48\n</code></pre>\n\n<p>This is just station names and departure times.</p>\n\n<p>The .out files just contain one number each, the number of minutes the corresponding trip will take.</p>\n\n<p>The scaffold project also came with makefile files, but I haven't been able to use them in my environment, I have simply taken the \"business-files\" to another project made in Eclipse, and that works fine for compiling and running the project in Eclipse. But that doesn't allow me to use the test script (that I currently can't even open in Eclipse).</p>\n\n<p>If you feel it helps, here is the assignment: <a href=\"http://imada.sdu.dk/~jamik/dm510-16/assignment1.php\" rel=\"nofollow\">assignment on course website</a></p>\n\n<p>But I think I can solve the assignment itself, it's using the teachers test I'm unsure about how to do.</p>\n"}, {"tags": ["c", "linux", "fork", "stdin", "system-calls"], "comments": [{"owner": {"reputation": 4838, "user_id": 956030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093fec993109b46d2f20963e52718bc?s=128&d=identicon&r=PG", "display_name": "Zang MingJie", "link": "https://stackoverflow.com/users/956030/zang-mingjie"}, "edited": false, "score": 0, "creation_date": 1456309742, "post_id": 35598228, "comment_id": 58883758, "body": "what&#39;s your question ?"}, {"owner": {"reputation": 390, "user_id": 5908685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f66fbc58213d055a73c47d67e0e6d?s=128&d=identicon&r=PG", "display_name": "adeelh", "link": "https://stackoverflow.com/users/5908685/adeelh"}, "reply_to_user": {"reputation": 4838, "user_id": 956030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093fec993109b46d2f20963e52718bc?s=128&d=identicon&r=PG", "display_name": "Zang MingJie", "link": "https://stackoverflow.com/users/956030/zang-mingjie"}, "edited": false, "score": 0, "creation_date": 1456310095, "post_id": 35598228, "comment_id": 58884033, "body": "Why does the read() end after one keypress, even though i haven&#39;t pressed the enter key yet? Why does read() not return -1 if stdin is no longer valid?"}], "answers": [{"tags": [], "owner": {"reputation": 4838, "user_id": 956030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093fec993109b46d2f20963e52718bc?s=128&d=identicon&r=PG", "display_name": "Zang MingJie", "link": "https://stackoverflow.com/users/956030/zang-mingjie"}, "is_accepted": false, "score": 0, "last_activity_date": 1456310553, "creation_date": 1456310553, "answer_id": 35599835, "question_id": 35598228, "link": "https://stackoverflow.com/questions/35598228/odd-behavior-when-child-process-gets-orphaned-while-reading-from-stdin/35599835#35599835", "title": "Odd behavior when child process gets orphaned while reading from stdin", "body": "<h3>Why does read() not return -1 if stdin is no longer valid?</h3>\n\n<p>stdin is <em>ALWAYS</em> valid, until you close the terminal app.</p>\n\n<p>stdin is created by your terminal, not bash, not parent. As long as your terminal is active, stdin is active</p>\n\n<h3>Why does the read() end after one keypress, even though i haven't pressed the enter key yet?</h3>\n\n<p>Most shell (bash/dash/zsh) set tty to read byte by byte mode, where read will return immediately when you press any key, because they are doing auto-completion.</p>\n\n<p>When the shell is going to start a program, it set tty to line mode, where your program read line by line.</p>\n\n<p>But as soon as the parent exits, the shell resets the tty to byte mode, as your child and the shell share the same tty, it also affects your child, so your child reads a char.</p>\n"}, {"comments": [{"owner": {"reputation": 390, "user_id": 5908685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f66fbc58213d055a73c47d67e0e6d?s=128&d=identicon&r=PG", "display_name": "adeelh", "link": "https://stackoverflow.com/users/5908685/adeelh"}, "edited": false, "score": 0, "creation_date": 1456319784, "post_id": 35599920, "comment_id": 58890995, "body": "Is there a way for me to verify that the shell runs in raw mode?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 390, "user_id": 5908685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f66fbc58213d055a73c47d67e0e6d?s=128&d=identicon&r=PG", "display_name": "adeelh", "link": "https://stackoverflow.com/users/5908685/adeelh"}, "edited": false, "score": 0, "creation_date": 1456319948, "post_id": 35599920, "comment_id": 58891109, "body": "Press the up arrow key. Do you see the previous command? If yes, it&#39;s raw mode."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1456310770, "creation_date": 1456310770, "answer_id": 35599920, "question_id": 35598228, "link": "https://stackoverflow.com/questions/35598228/odd-behavior-when-child-process-gets-orphaned-while-reading-from-stdin/35599920#35599920", "title": "Odd behavior when child process gets orphaned while reading from stdin", "body": "<p>Your shell likes to work in raw mode, but sets the terminal to cooked mode for spawned programs. You can read about raw and cooked mode... just about anywhere. But briefly, in the raw mode imput is character-by-character whereas in cooked mode it's line-by-line.</p>\n\n<p>So what happens? Omitting superfluous events:</p>\n\n<ul>\n<li>The shell sets the terminal to cooked mode.</li>\n<li>The shell runs your program.</li>\n<li>Your program spawns a child and exits.</li>\n<li>The shell gets back control.</li>\n<li>The shell puts the terminal in raw mode.</li>\n<li>You type a character.</li>\n<li>Your child process snatches it.</li>\n</ul>\n"}], "owner": {"reputation": 390, "user_id": 5908685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f66fbc58213d055a73c47d67e0e6d?s=128&d=identicon&r=PG", "display_name": "adeelh", "link": "https://stackoverflow.com/users/5908685/adeelh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456310770, "creation_date": 1456306297, "question_id": 35598228, "link": "https://stackoverflow.com/questions/35598228/odd-behavior-when-child-process-gets-orphaned-while-reading-from-stdin", "title": "Odd behavior when child process gets orphaned while reading from stdin", "body": "<p>Here's the code:</p>\n\n<pre><code>// after fork:\nelse if (pid &gt; 0) // parent\n{\n    char buff[READ_SIZE];\n    write(STDOUT_FILENO, \"parent\\n\", 7);\n\n    int r = read(STDIN_FILENO, buff, READ_SIZE);\n    if (r == -1)\n        perror(\"parent\");\n}\nelse // child\n{\n    char buff[READ_SIZE];\n    write(STDOUT_FILENO, \"child\\n\", 6);\n\n    int r = read(STDIN_FILENO, buff, READ_SIZE);\n    if (r == -1)\n        perror(\"child\");\n\n    sprintf(buff, \"\\n%d\", r);\n    write(STDOUT_FILENO, buff, 2);\n}\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>$ ./forktest\nparent\nchild\nabc &lt;-- input goes to parent, parent exits\n$   &lt;-- both child and terminal waiting for input, presumably\n</code></pre>\n\n<p>At this point, as soon as I press any key (without hitting Enter), I get:</p>\n\n<pre><code>$ ./forktest\nparent\nchild\nabc\n$ \n1  &lt;-- the child has read just 1 character\n</code></pre>\n\n<p>Which means the child's read() ends after just one keypress and no Enter. </p>\n\n<p><strong>Why is that?</strong></p>\n\n<p><em>PS. I know that the correct thing to do is for the parent to wait() for the child. I'm just curious about what exactly is going on here.</em></p>\n"}, {"tags": ["c", "assembly", "processor"], "comments": [{"owner": {"reputation": 1804, "user_id": 616150, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/79b2a278bb1777cd16d0d311e90fed59?s=128&d=identicon&r=PG", "display_name": "Viktor Dahl", "link": "https://stackoverflow.com/users/616150/viktor-dahl"}, "edited": false, "score": 6, "creation_date": 1456305927, "post_id": 35598047, "comment_id": 58880938, "body": "Many different processor models can be part of the same &quot;family&quot; and share the same machine language."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 7, "creation_date": 1456305979, "post_id": 35598047, "comment_id": 58880976, "body": "It&#39;s a bit like the way the same petrol can be used in many, but not all, cars, even though each car has its own engine."}, {"owner": {"reputation": 709, "user_id": 4363434, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/P7lgW.jpg?s=128&g=1", "display_name": "Melkor", "link": "https://stackoverflow.com/users/4363434/melkor"}, "edited": false, "score": 0, "creation_date": 1456306065, "post_id": 35598047, "comment_id": 58881041, "body": "But can&#39;t an exe file can run on all windows machines, even if they have a completely different processor."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 4, "creation_date": 1456306213, "post_id": 35598047, "comment_id": 58881153, "body": "@zappy1333: no. An exe compiled for ARM (mobiles/tablets) won&#39;t run on  x86 and vice-versa. I don&#39;t know where you got the idea that executables were portable, but that&#39;s not the case."}, {"owner": {"reputation": 709, "user_id": 4363434, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/P7lgW.jpg?s=128&g=1", "display_name": "Melkor", "link": "https://stackoverflow.com/users/4363434/melkor"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1456306393, "post_id": 35598047, "comment_id": 58881273, "body": "@Mat But an exe can run on all x86 windows machines, even if they don&#39;t have the same processor."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 3, "creation_date": 1456306486, "post_id": 35598047, "comment_id": 58881356, "body": "@zappy1333: no, not all. Mostly backwards compatible, but not forward. If an exe is compiled for a modern CPU, it probably won&#39;t run on an i386."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1456308989, "post_id": 35598047, "comment_id": 58883199, "body": "@Marchill Windows have versions for PowerPC, Alpha, Itanium, ARM... beside x86 and x86_64, so exe for this architecture will not be able to run on Windows on another architecture"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1456309737, "post_id": 35598047, "comment_id": 58883752, "body": "@L\u01b0uV\u0129nhPh&#250;c: That is long gone. AFAIK, PPC and Alpha have been dropped with Windows 2000 already, not sure about Itanium (is there a recent Windows for that platform?). And there are binaries which support multiple platforms, see Apple when they moved from 680x0 to PPC then to x86. Also there are CPU/system emulators (again, see Apple, but also Amiga or Atari-Emulators, Bochs, etc.)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456309903, "post_id": 35598047, "comment_id": 58883885, "body": "@Olaf of course I know. I mean exe files can contain executables for a lot of Windows architectures. If you found an exe file in an ancient platform it might not run in newer architectures"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1456309964, "post_id": 35598047, "comment_id": 58883933, "body": "@L\u01b0uV\u0129nhPh&#250;c: Chances are better to run an old exe in a newer Windows than the other way &#39;round."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456310222, "post_id": 35598047, "comment_id": 58884123, "body": "@Olaf yes for the same platform, not if the exe was in ARM and Windows is in x86. So what the OP said &quot;But can&#39;t an exe file can run on all windows machines, even if they have a completely different processor.&quot; is incorrect"}], "answers": [{"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1456306883, "post_id": 35598263, "comment_id": 58881667, "body": "Also, (specifically) the PE file format contains a field that explicitly <b>states</b> what CPU it is for: &quot;<code>Machine</code> The CPU that this file is intended for. The following CPU IDs are defined: ...&quot; (<a href=\"https://msdn.microsoft.com/en-us/library/ms809762.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms809762.aspx</a>)."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1456311579, "post_id": 35598263, "comment_id": 58885054, "body": "<i>&quot;the OS systems interface and the availability of framework libraries, that also need to match&quot;</i> I think that&#39;s the crucial thing to consider here (for the OP): Even though most computers use an x86 CPU, and they (broadly) speak the same language, it&#39;s often the OS that is a decisive factor in the portability of compiled programs. A windows exe can&#39;t run on OSX, or linux without some kind of emulator or translator/runtime layer in between (just like Java is compiled to run on a JVM, not directly on the hardware)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1456318343, "post_id": 35598263, "comment_id": 58889972, "body": "@EliasVanOotegem: Yes. Wine for example intercepts Windows system calls and provides and appropriate implementation on Linux, and ships with the core Windows libraries (implemented for Linux), so that you can run execute a wide variety of Windows programs on Linux. (I imagine it can do the same on MacOS and BSD?)"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1456321808, "post_id": 35598263, "comment_id": 58892438, "body": "@KerrekSB: Exactly. I just commented because I think that this bit of information probably is what the OP actually wanted to know. It explains why/how the same code on the same hardware can be compiled differently for different OS&#39;s: for PC&#39;s (x86 architecture), the OS is actually the limiting factor, not the actual hardware"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 15, "last_activity_date": 1456308147, "last_edit_date": 1456308147, "creation_date": 1456306385, "answer_id": 35598263, "question_id": 35598047, "link": "https://stackoverflow.com/questions/35598047/how-can-c-code-be-run-on-different-processors/35598263#35598263", "title": "How can C code be run on different processors?", "body": "<p>When you compile a program to machine code, you have to select a machine code instruction set, perhaps a mode in which to run the machine (if applicable), and a format in which the resulting code is stored.</p>\n\n<p>All those choices limit the target platform on which the code can be executed.</p>\n\n<ul>\n<li><p>The instruction set broadly depends on the type of CPU: x86 (\"IBM-compatible\"), PowerPC, ARM, MIPS, DEC Alpha, Motorola 68k, ... Within each CPU family, there are many sub-features and generations to choose from (e.g. for x86, there are i386, SSE, AVX, ...). Newer CPUs may be able to execute code limited to older generations, so there may be a common subset.</p></li>\n<li><p>The processor mode on x86 depends on the environment: real mode for MS-DOS programs and anything you run on boot-up, protected mode, different addressing modes may be available in some situations (unreal mode)...</p></li>\n<li><p>The binary format needs to be recognized by the operating system, or more generally by what ever loading mechanism you have: PE for Windows, ELF for contemporary Linux, a.out in the old days, ... An operating system may provide loaders for multiple binary formats.</p></li>\n</ul>\n\n<p>This is only the most basic level of platform parameters that you choose when compiling, and your program will only run on platforms that agree on this choice. However, there are many more practical limitations for real-world programs, such as the OS systems interface and the availability of framework libraries, that also need to match. For example, while it's not hard to read and run Windows PE binaries in Linux, the code contained therein doesn't make sense on Linux because it uses Windows-specific software interrupts. However, by intercepting and translating those, it is quite possible to run those binaries on Linux after all.</p>\n"}], "owner": {"reputation": 709, "user_id": 4363434, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/P7lgW.jpg?s=128&g=1", "display_name": "Melkor", "link": "https://stackoverflow.com/users/4363434/melkor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3500, "favorite_count": 1, "accepted_answer_id": 35598263, "answer_count": 1, "score": 9, "last_activity_date": 1456308147, "creation_date": 1456305826, "question_id": 35598047, "link": "https://stackoverflow.com/questions/35598047/how-can-c-code-be-run-on-different-processors", "title": "How can C code be run on different processors?", "body": "<p>As I understand it, C code is compiled to machine (assembly) code on someone\u2019s machine, and it becomes an exe file that can be run on lots of different processors (machines). But since different processors have their own unique assembly code how can this code run? Wouldn't the compiled exe only be able to run on one type of processor?</p>\n"}, {"tags": ["c", "vigenere"], "answers": [{"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 0, "last_activity_date": 1456306770, "last_edit_date": 1456306770, "creation_date": 1456306437, "answer_id": 35598279, "question_id": 35597946, "link": "https://stackoverflow.com/questions/35597946/incrementing-and-wrapping-the-key/35598279#35598279", "title": "Incrementing and wrapping the key", "body": "<p>That inner for loop, incrementing <code>j</code>, seems completely out of place and unneeded to me.</p>\n\n<p>What you're doing first looks pretty good already: Define two indices for iteration, one over the plaintext (<code>i</code>) and one over the key (<code>j</code>).</p>\n\n<p>Then you just need to iterate over the plaintext. You encrypt the character at plaintext position <code>i</code> with the character at key position <code>j</code>. Then you increase both iteration indices by one, keeping the key index in range (by using modulo for example).</p>\n\n<p>So, basically you just need to get rid of that inner for loop and add logic to increment <code>j</code> with the outer loop.</p>\n\n<p>Concerning your code: It's advisable to split it up a bit more: Write a function to encrypt a single character and use it in your loop. Use better names for your variables. <code>i</code> and <code>j</code> aren't descriptive.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5973432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da6b428ce2f1814b4ffc44f16edd38c?s=128&d=identicon&r=PG", "display_name": "DavidH", "link": "https://stackoverflow.com/users/5973432/davidh"}, "edited": false, "score": 0, "creation_date": 1456460296, "post_id": 35620482, "comment_id": 58967688, "body": "Thank you for the pointers, mksteve! breaking up the tkey and kposition variables made things much clearer!"}], "tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 0, "last_activity_date": 1456393946, "last_edit_date": 1456393946, "creation_date": 1456383718, "answer_id": 35620482, "question_id": 35597946, "link": "https://stackoverflow.com/questions/35597946/incrementing-and-wrapping-the-key/35620482#35620482", "title": "Incrementing and wrapping the key", "body": "<p>To debug this yourself, print out the values of <code>key[kposition]</code></p>\n\n<p>You need to limit <code>kposition</code></p>\n\n<pre><code>kposition = (kposition+1)%klen;\n</code></pre>\n\n<p>and only modify it for alphabetic characters.</p>\n\n<p>Have the current key as a temp, don't re-add the 'A', which doesn't quite do modulo 26 correctly</p>\n\n<pre><code>key[kposition] = ....;\n</code></pre>\n\n<p>Goes to</p>\n\n<pre><code>Tkey = ((key[kposition] - 'a') );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Tkey = ((key[kposition] - 'A') );\n</code></pre>\n\n<p>You don't mod klen, and don't update key.  Change other key[kposition] to Tkey</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main( int argc, char ** argv)\n{\n    char  text[] = \"Meet me at the park\";\n    char * key = \"bacon\";\n\n//enters length of argv string into q\n//converts string argv[1] into string key\n\n//string key = argv[1];\nint klen = strlen( key);\nint kposition = 0;\n\n\n//loop through the characters in array \"text\"\nfor (int tposition = 0, n = strlen( text); tposition &lt; n; tposition++)\n{\n    unsigned Tkey = 0;\n    if( isupper(key[kposition]) )\n    {\n        Tkey = ((key[kposition] - 'A') );\n    }\n    else if( islower(key[kposition]) )\n    {\n        Tkey = ((key[kposition] - 'a') );\n    }\n\n    //determine if character is alphabetical\n    if (isalpha(text[tposition]))\n    {\n\n        //encrypt upper case characters\n        if (isupper(text[tposition]))\n        {\n            //modulo magic to loop to beginning of alphabet after 'Z'\n            text[tposition] = (((text[tposition] - 'A') + Tkey) % 26) + 'A';\n            kposition = (kposition + 1) % klen;\n\n            printf(\"%c\", text[tposition]);\n        }\n        //encrypt lower case characters\n        else\n        {\n            //modulo magic to loop to beginning of alphabet after 'z'\n            text[tposition] = (((text[tposition] - 'a') + Tkey) % 26) + 'a';\n            kposition = (kposition + 1) % klen;\n            printf(\"%c\", text[tposition]);\n        }\n    }\n    //if the input isn't alphabetical, then just print the input (spaces)\n    else\n    {\n        printf(\"%c\", text[tposition]);\n    }\n\n}\nprintf(\"\\n\");\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5973432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da6b428ce2f1814b4ffc44f16edd38c?s=128&d=identicon&r=PG", "display_name": "DavidH", "link": "https://stackoverflow.com/users/5973432/davidh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1457523664, "creation_date": 1456305577, "last_edit_date": 1457523664, "question_id": 35597946, "link": "https://stackoverflow.com/questions/35597946/incrementing-and-wrapping-the-key", "title": "Incrementing and wrapping the key", "body": "<pre><code> string text = GetString();\n\n//enters length of argv string into q\n//converts string argv[1] into string key\n\nstring key = argv[1];\nint klen = strlen(key);\nint kposition = 0;\n\n\n    //loop through the characters in array \"text\"\n    for (int tposition = 0, n = strlen(text); tposition &lt; n; tposition ++)\n    {\n        if isupper(key[kposition])\n        {\n            key[kposition] = ((key[kposition] - 'A') % klen) + 'A';\n        }\n        else if islower(key[kposition])\n        {\n            key[kposition] = ((key[kposition] - 'a') % klen) + 'a';\n        }\n\n        //determine if character is alphabetical\n        if (isalpha(text[tposition])) \n        {\n\n            //encrypt upper case characters\n            if (isupper(text[tposition]))\n            {\n                //modulo magic to loop to beginning of alphabet after 'Z'\n                text[tposition] = (((text[tposition] - 'A') + key[kposition]) % 26) + 'A';\n                printf(\"%c\", text[tposition]);\n            }        \n                //encrypt lower case characters\n            else\n            {\n                //modulo magic to loop to beginning of alphabet after 'z'\n                text[tposition] = (((text[tposition] - 'a') + key[kposition]) % 26) + 'a';\n                printf(\"%c\", text[tposition]);\n            }\n        }\n        //if the input isn't alphabetical, then just print the input (spaces)\n        else \n        {\n            printf(\"%c\", text[tposition]); \n        }\n    kposition ++;\n\n    }    \n    printf(\"\\n\");\n    return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>I followed your advice and made my variables a bit more descriptive, which helps me look at the code. </p>\n\n<p>I am still not getting the correct outputs from my program, though it compiles and runs fine. </p>\n\n<p>For example, when I run:\nvigenere.c -bacon</p>\n\n<p>and enter: \"Meet me at the park\",\nI get: \"Gxzq mr ni kyr frea\", \nrather than the correct answer, which is: \"Negh zf av huf pcfx\".</p>\n\n<p>So the upper/lower case is working, and the spaces are working. The problem lies with the incrementing of key[kposition]. Part of the problem is that I don't intuit modulo very well, so it's not clear to me exactly what the modulo arithmetic is doing (other than it gives the remainder of the two numbers).</p>\n\n<p>How can I arrange my key[kposition] incrementor better?</p>\n"}, {"tags": ["c", "libc"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456305810, "post_id": 35597627, "comment_id": 58880841, "body": "Another example is fread, fwrite having arguments in order: size,count, while calloc, qsort, bsearch have those arguments in reverse."}, {"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1456305821, "post_id": 35597627, "comment_id": 58880853, "body": "Well at least they are consistent in the sense that positional methods expect the first parameter as the file handle, while i/o methods with buffer expect the buffer first."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456305828, "post_id": 35597627, "comment_id": 58880859, "body": "I very much doubt there is any rationale for this. I just checked the C rationale document and there is no mentioning of why parameters were ordered in one particular way or the other. Most standard library functions were originally ancient Unix functions. Things like common sense and scientific methods were never priorities for the C89 committee. They just merrily picked random, existing Unix functions and tossed them into the standard library, with no concerns or second thoughts. And so gems like <code>gets</code> and <code>strncpy</code> made it to the ISO standard."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456306248, "post_id": 35597627, "comment_id": 58881181, "body": "@Lundin I guess that the functions were already an etablished fact at the time of the C89 committee. I&#39;d guess that one would dig deeper into the history to find the answer - or at least a reasonable theory."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1456306986, "post_id": 35597627, "comment_id": 58881754, "body": "<code>fgets(line,MAXLINE,fp)</code> prototype remains at least from K&amp;R &#39;78 edition: &#39;fgets` reads the next input <code>line</code> from file <code>fp</code>. Looks like naive literate programming... For <code>putchar(c,fp)</code>: put the character <code>c</code>on the file `fp, etc."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1456310454, "post_id": 35597627, "comment_id": 58884292, "body": "Side note: something is wrong with <code>fgetpos(FILE *restrict, fpos_t *restrict)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 45496, "user_id": 436560, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/2GESV.jpg?s=128&g=1", "display_name": "Lajos Arpad", "link": "https://stackoverflow.com/users/436560/lajos-arpad"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1456310377, "post_id": 35598734, "comment_id": 58884230, "body": "@2501, I agree with you that mystdio_ would be a better prefix."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 5, "creation_date": 1456310692, "post_id": 35598734, "comment_id": 58884429, "body": "The de facto standard for C function parameter order is generally (from left to right): destination, source (if applicable), other stuff. (For example, the parameter order of <code>memcpy</code>/<code>strcpy</code> is very canonical). If sticking to that, then <code>fseek</code> has the correct order, <code>fprintf(FILE*...</code> has the correct order, and the other functions have the incorrect order."}], "tags": [], "owner": {"reputation": 45496, "user_id": 436560, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/2GESV.jpg?s=128&g=1", "display_name": "Lajos Arpad", "link": "https://stackoverflow.com/users/436560/lajos-arpad"}, "is_accepted": false, "score": 3, "last_activity_date": 1456308965, "last_edit_date": 1456308965, "creation_date": 1456307682, "answer_id": 35598734, "question_id": 35597627, "link": "https://stackoverflow.com/questions/35597627/why-does-some-functions-in-stdio-have-the-stream-as-last-argument/35598734#35598734", "title": "Why does some functions in stdio have the stream as last argument?", "body": "<p>I am convinced that a clear and evident answer will not be found to this question, although, this question is not opinion-based, as a clear answer exists somewhere, even though it is unreachable.</p>\n\n<p>However, I recognize the frustration about the problem: one cannot easily work, if, besides learning the function names and what they depend on, memorizing the parameter order for each function individually. Instead, it would be nice to have a consistent parameter order.</p>\n\n<p>To achieve that, one can implement a consistent stdio library, which would use consistent order for the parameters and would wrap each stdio function into such a function. Example:</p>\n\n<pre><code>int      mystdio_fseek(long, int, FILE *);\n</code></pre>\n\n<p>This would return the result of</p>\n\n<pre><code>int      fseek(FILE *, long, int);\n</code></pre>\n\n<p>So, the <code>mystdio_</code> might be a prefix to make sure that names are almost similar, but different and the parameter order would be consistent. This way, one would need to remember only the function names, what each function depends on and there will be no longer need to memorize the parameter order for each function individually. One could use these methods whenever there will be no need for micro optimization.</p>\n"}], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 1, "closed_date": 1459481619, "answer_count": 1, "score": 10, "last_activity_date": 1456308965, "creation_date": 1456304724, "question_id": 35597627, "link": "https://stackoverflow.com/questions/35597627/why-does-some-functions-in-stdio-have-the-stream-as-last-argument", "closed_reason": "Opinion-based", "title": "Why does some functions in stdio have the stream as last argument?", "body": "<p>Some of the functions in stdio seem to have the stream as the last argument, for example:</p>\n\n<pre><code>char    *fgets(char *restrict, int, FILE *restrict);\nint      fputs(const char *restrict, FILE *restrict);\nsize_t   fread(void *restrict, size_t, size_t, FILE *restrict);\nsize_t   fwrite(const void *restrict, size_t, size_t, FILE *restrict);\n</code></pre>\n\n<p>while some have it as the first argument:</p>\n\n<pre><code>int      fgetpos(FILE *restrict, fpos_t *restrict);\nint      fseek(FILE *, long, int);\n</code></pre>\n\n<p>Why is this inconsistency? Were these functions added at different time in the evolvement of the standard library? In that case which were first, and why was the convention changed?</p>\n\n<p>I realize that it's more or less needed for <code>fprintf</code> with friends to have the <code>FILE*</code> first (or at least early) due to the ellipsis (and for <code>fclose</code> and similar to have it first, and last). </p>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456310855, "post_id": 35597552, "comment_id": 58884531, "body": "After you done fixing your code, run a Memory check tool on it. Valgrind says that a <code>free</code> is missing <code>total heap usage: 215 allocs, 214 frees, 59,802 bytes allocated</code>"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1456305045, "creation_date": 1456305045, "answer_id": 35597742, "question_id": 35597552, "link": "https://stackoverflow.com/questions/35597552/how-to-print-groups-of-all-local-users/35597742#35597742", "title": "How to print groups of all local users?", "body": "<p>If you read <a href=\"http://man7.org/linux/man-pages/man3/getgrouplist.3.html\" rel=\"nofollow\">the <code>getgrouplist</code> manual page</a> you will see</p>\n\n<blockquote>\n  <p>Up to <code>*ngroups</code> of these groups are returned in the array <code>groups</code>.</p>\n</blockquote>\n\n<p>The <code>ngroups</code> argument is not only set by the function, it's also used by the function to know how many structures you have allocated for the <code>groups</code> argument.</p>\n\n<p>You need to \"reset\" the <code>nGroups</code> variable before calling <code>getgrouplist</code>, otherwise the old value set by the previous call to the function will be used:</p>\n\n<pre><code>nGroups = 20;\ngetgrouplist(user-&gt;pw_name, user-&gt;pw_gid, groups, &amp;nGroups);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5039564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9QCf7.jpg?s=128&g=1", "display_name": "Naveen Dharman", "link": "https://stackoverflow.com/users/5039564/naveen-dharman"}, "is_accepted": false, "score": 0, "last_activity_date": 1456305376, "last_edit_date": 1592644375, "creation_date": 1456305376, "answer_id": 35597867, "question_id": 35597552, "link": "https://stackoverflow.com/questions/35597552/how-to-print-groups-of-all-local-users/35597867#35597867", "title": "How to print groups of all local users?", "body": "<p>You can achieve this using a simple bash script as</p>\n<h1>!/bin/bash</h1>\n<p>grep &quot;/bin/bash&quot; /etc/passwd</p>\n<p>it would do the result,bcoz all the local user will have /bin/bash or /bin/sh as their shell</p>\n"}], "owner": {"reputation": 3, "user_id": 5971325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a444799a1426febef1c9813fb2bccd2?s=128&d=identicon&r=PG", "display_name": "Ricenwind", "link": "https://stackoverflow.com/users/5971325/ricenwind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 35597742, "answer_count": 2, "score": 0, "last_activity_date": 1456305376, "creation_date": 1456304489, "question_id": 35597552, "link": "https://stackoverflow.com/questions/35597552/how-to-print-groups-of-all-local-users", "title": "How to print groups of all local users?", "body": "<p>I want to print all groups of users stored in /etc/passwd. Seems easy enough, I can just use getpwent() and getgrouplist(). I came with this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;pwd.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;grp.h&gt;\n\nint main(int argc, char** argv){\n\n    struct passwd* user;\n    int nGroups = 20;\n    gid_t* groups;\n    groups = malloc(nGroups * sizeof(gid_t));\n    struct group* gr;\n    while(user = getpwent()){\n        printf(\"%s : \", user-&gt;pw_name);\n        getgrouplist(user-&gt;pw_name, user-&gt;pw_gid, groups, &amp;nGroups);\n        int i;\n        for(i = 0; i &lt; nGroups; ++i){\n            gr = getgrgid(groups[i]);\n            if(gr){\n                printf(\"%s \", gr-&gt;gr_name);\n            }  \n        }\n        printf(\"\\n\");\n    }\n\n    free(groups);\n    return 0;\n}\n</code></pre>\n\n<p>It gives me this output:</p>\n\n<pre><code>root : root \ndaemon : daemon \nbin : bin \n.\n.\n.\npulse : pulse root \nricenwind : ricenwind adm root root root root root root \nvboxadd : daemon \n</code></pre>\n\n<p>which is clearly wrong, as for example using</p>\n\n<pre><code>groups ricenwind\n</code></pre>\n\n<p>gives me:</p>\n\n<pre><code>ricenwind : ricenwind adm cdrom sudo dip plugdev lpadmin sambashare\n</code></pre>\n"}, {"tags": ["c", "long-integer", "memcpy"], "comments": [{"owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "edited": false, "score": 0, "creation_date": 1456304139, "post_id": 35597378, "comment_id": 58879725, "body": "try with | (or) instead of + (plus) and don&#39;t forget to cast aFoo[0] to a 64 bit value because these kind of operations take place by default on 32 bit values in C"}, {"owner": {"reputation": 676, "user_id": 4622951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7PycO.jpg?s=128&g=1", "display_name": "seven7e", "link": "https://stackoverflow.com/users/4622951/seven7e"}, "edited": false, "score": 3, "creation_date": 1456304275, "post_id": 35597378, "comment_id": 58879801, "body": "Is <code>(aFoo[0] &lt;&lt; 64)</code> a typo? I think it should be <code>(aFoo[0] &lt;&lt; 40)</code>"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1456304332, "post_id": 35597378, "comment_id": 58879841, "body": "<code>(aFoo[0] &lt;&lt; 64) == 0</code> on 64-bit integers. It should be <code>(aFoo[0] &lt;&lt; 40)</code>."}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1456304403, "post_id": 35597378, "comment_id": 58879889, "body": "memcpy and then bitshift the <code>long long</code> is what I would do."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1456305661, "post_id": 35597378, "comment_id": 58880720, "body": "Your shifts look wrong, e.g. shouldn&#39;t it be <code>aFoo[0] &lt;&lt; 40</code>, not <code>aFoo[0] &lt;&lt; 64</code> ?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1456305767, "post_id": 35597378, "comment_id": 58880811, "body": "If value in aFoo is big endian, what is your host endianness? Is nBar little endian?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456325903, "post_id": 35597378, "comment_id": 58895583, "body": "2 questions: Do you need a signed value? And do you want the value left (ie.e. to the MSbit) or right (i.e. to the LSbit) aligned?"}], "answers": [{"comments": [{"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 0, "creation_date": 1456308266, "post_id": 35597656, "comment_id": 58882627, "body": "Too bad this was down voted. As the OP&#39;s preference was to use memcpy this is exactly how this can be done I think."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456310412, "post_id": 35597656, "comment_id": 58884257, "body": "This is a bad approach, as it makes some assumptions which are not guaranteed."}, {"owner": {"reputation": 676, "user_id": 4622951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7PycO.jpg?s=128&g=1", "display_name": "seven7e", "link": "https://stackoverflow.com/users/4622951/seven7e"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456381738, "post_id": 35597656, "comment_id": 58922434, "body": "@Olaf could you please tell me what the assumptions are?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456401795, "post_id": 35597656, "comment_id": 58934955, "body": "E.g. Alignment, encoding, endianess."}], "tags": [], "owner": {"reputation": 676, "user_id": 4622951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7PycO.jpg?s=128&g=1", "display_name": "seven7e", "link": "https://stackoverflow.com/users/4622951/seven7e"}, "is_accepted": false, "score": -2, "last_activity_date": 1456304801, "creation_date": 1456304801, "answer_id": 35597656, "question_id": 35597378, "link": "https://stackoverflow.com/questions/35597378/copy-6-byte-array-to-long-long-integer-variable/35597656#35597656", "title": "Copy 6 byte array to long long integer variable", "body": "<p>You might try</p>\n\n<pre><code>nBar = 0;\nmemcpy((unsigned char*)&amp;nBar + 2, aFoo, 6);\n</code></pre>\n\n<p>No <code>&amp;</code> needed before an array name caz' it's already an address.</p>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": -4, "last_activity_date": 1456309260, "last_edit_date": 1456309260, "creation_date": 1456305442, "answer_id": 35597891, "question_id": 35597378, "link": "https://stackoverflow.com/questions/35597378/copy-6-byte-array-to-long-long-integer-variable/35597891#35597891", "title": "Copy 6 byte array to long long integer variable", "body": "<p>The correct way to do what you need is to use an <code>union</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef union {\n    struct {\n      char padding[2];\n      char aFoo[6];\n    } chars;\n    long long nBar;\n} Combined;\n\nint main ()\n{\n  Combined x;\n\n  // reset the content of \"x\"\n  x.nBar = 0;           // or memset(&amp;x, 0, sizeof(x));\n\n  // put values directly in x.chars.aFoo[]...\n  x.chars.aFoo[0] = 0x00;\n  x.chars.aFoo[1] = 0x00;\n  x.chars.aFoo[2] = 0x00;\n  x.chars.aFoo[3] = 0x00;\n  x.chars.aFoo[4] = 0x26;\n  x.chars.aFoo[5] = 0x8e;\n\n  printf(\"nBar: %llx\\n\", x.nBar);\n\n  return 0;\n}\n</code></pre>\n\n<p>The advantage: the code is more clear, there is no need to juggle with bits, shifts, masks etc.</p>\n\n<p>However, you have to be aware that, for speed optimization and hardware  reasons, the compiler might squeeze padding bytes into the <code>struct</code>, leading to <code>aFoo</code> not sharing the desired bytes of <code>nBar</code>. This minor disadvantage can be solved by telling the computer to align the members of the <code>union</code> at byte-boundaries (as opposed to the default which is the alignment at word-boundaries, the word being 32-bit or 64-bit, depending on the hardware architecture).</p>\n\n<p>This used to be achieved using a <code>#pragma</code> directive and its exact syntax depends on the compiler you use.</p>\n\n<p>Since C11/C++11, the <a href=\"http://en.cppreference.com/w/c/language/_Alignas\" rel=\"nofollow\"><code>alignas()</code> specifier</a> became the standard way to specify the alignment of struct/union members (given your compiler already supports it).</p>\n"}, {"comments": [{"owner": {"reputation": 5854, "user_id": 338476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c28b92ae5611083c82d6cde165ab29c0?s=128&d=identicon&r=PG", "display_name": "tzippy", "link": "https://stackoverflow.com/users/338476/tzippy"}, "edited": false, "score": 0, "creation_date": 1456316551, "post_id": 35600189, "comment_id": 58888679, "body": "Thanks, this seems like a solid approach. On the last iteration however in the last iteration, <code>i</code> must not get decremented below <code>0</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5854, "user_id": 338476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c28b92ae5611083c82d6cde165ab29c0?s=128&d=identicon&r=PG", "display_name": "tzippy", "link": "https://stackoverflow.com/users/338476/tzippy"}, "edited": false, "score": 0, "creation_date": 1456316874, "post_id": 35600189, "comment_id": 58888915, "body": "@tzippy: My fault; I started with an incrementing loop and use <code>size_t</code> for indexing an array (that is the most correct type actually), but then I optimised the loop. Note that you should be careful about the byte-ordering. As given, you have big-endian; for little-endia, you have to reverse the loop (it is most times benefical to process the array in ascending order)."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1456323531, "post_id": 35600189, "comment_id": 58893746, "body": "One additional note on signed values: If original array value is to be interpreted as a signed type (for example, <code>{ 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF }</code> should be interpreted as <code>-1</code>), then additional code is need to handle 2 missing bytes to convert negative values correctly. Question was a little unclear if this is the case."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1456323772, "post_id": 35600189, "comment_id": 58893896, "body": "@user694733: <code>0xFF</code> is not a negative value. Hex constants are positive and have the type with the lowest rank that can represent it and is at least <code>int</code>. As the value is left-aligned, the sign is preserved for most (if not all) implementations. Only the 16 LSBs are zeroed (as required by the question). Note that having the bytes (sic!) themselves signed is of no use."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1456325529, "post_id": 35600189, "comment_id": 58895298, "body": "That&#39;s not what I meant. Signedness of individual bytes is not the point. If <code>aFoo</code> should be interpreted as a 48-bit signed integer, (which is, for example, read from binary file) then code expanding it to 64-bit signed integer needs to handle negative values. It seems to me that OP wanted the top 16 MSBs be handled, not the LSBs."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1456325759, "post_id": 35600189, "comment_id": 58895470, "body": "@user694733: Sorry, I&#39;m no clairvoyant; just have to interpret what you write. Anyway, &quot;padding zeros at the end.&quot; in the question is quite clear to me; even more as the first shift (64) also looks as if he intended that. Anyway, I asked for clarification."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 2, "last_activity_date": 1456316711, "last_edit_date": 1456316711, "creation_date": 1456311476, "answer_id": 35600189, "question_id": 35597378, "link": "https://stackoverflow.com/questions/35597378/copy-6-byte-array-to-long-long-integer-variable/35600189#35600189", "title": "Copy 6 byte array to long long integer variable", "body": "<p>What you want to accomplish is called de-serialisation or de-marshalling.</p>\n\n<p>For values that wide, using a loop is a good idea, unless you really need the max. speed and your compiler does not vectorise loops:</p>\n\n<pre><code>uint8_t array[6];\n...\nuint64_t value = 0;\n\nuint8_t *p = array;\nfor ( int i = (sizeof(array) - 1) * 8 ; i &gt;= 0 ; i -= 8 )\n    value |= (uint64_t)*p++ &lt;&lt; i;\n</code></pre>\n\n<p>// left-align\n   value &lt;&lt;= 64 - (sizeof(array) * 8);</p>\n\n<p>Note using <code>stdint.h</code> types and <code>sizeof(uint8_t) cannot differ from</code>1`. Only these are guaranteed to have the expected bit-widths. Also use unsigned integers when shifting values. Right shifting certain values is implementation defined, while left shifting invokes undefined behaviour.</p>\n\n<p>If<strong>f</strong> you need a signed value, just</p>\n\n<pre><code>int64_t final_value = (int64_t)value;\n</code></pre>\n\n<p>after the shifting. This is still implementation defined, but all modern implementations (and likely the older) just copy the value without modifications. A modern compiler likely will optimize this, so there is no penalty.</p>\n\n<p>The declarations can be moved, of course. I just put them before where they are used for completeness.</p>\n"}], "owner": {"reputation": 5854, "user_id": 338476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c28b92ae5611083c82d6cde165ab29c0?s=128&d=identicon&r=PG", "display_name": "tzippy", "link": "https://stackoverflow.com/users/338476/tzippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1304, "favorite_count": 0, "accepted_answer_id": 35600189, "answer_count": 3, "score": -2, "last_activity_date": 1456316711, "creation_date": 1456303972, "question_id": 35597378, "link": "https://stackoverflow.com/questions/35597378/copy-6-byte-array-to-long-long-integer-variable", "title": "Copy 6 byte array to long long integer variable", "body": "<p>I have read from memory a 6 byte <code>unsigned char</code> array.\nThe endianess is Big Endian here. \nNow I want to assign the value that is stored in the array to an integer variable. I assume this has to be <code>long long</code> since it must contain up to 6 bytes.</p>\n\n<p>At the moment I am assigning it this way:</p>\n\n<pre><code>unsigned char aFoo[6];\nlong long nBar;\n// read values to aFoo[]...\n// aFoo[0]: 0x00\n// aFoo[1]: 0x00\n// aFoo[2]: 0x00\n// aFoo[3]: 0x00\n// aFoo[4]: 0x26\n// aFoo[5]: 0x8e\nnBar = (aFoo[0] &lt;&lt; 64) + (aFoo[1] &lt;&lt; 32) +(aFoo[2] &lt;&lt; 24) + (aFoo[3] &lt;&lt; 16) + (aFoo[4] &lt;&lt; 8) + (aFoo[5]);\n</code></pre>\n\n<p>A memcpy approach would be neat, but when I do this</p>\n\n<pre><code>memcpy(&amp;nBar, &amp;aFoo, 6);\n</code></pre>\n\n<p>the 6 bytes are being copied to the <code>long long</code> from the start and thus have padding zeros at the end.\nIs there a better way than my assignment with the shifting?</p>\n"}, {"tags": ["c", "redis"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1456304028, "post_id": 35597350, "comment_id": 58879658, "body": "It&#39;s a <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">Flexible array member</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456304366, "post_id": 35597350, "comment_id": 58879864, "body": "The casts make no sense. You can&#39;t safely convert from a character pointer to a struct pointer, it violates strict aliasing. Furthermore, it is very bad practice to hide pointers behind typedefs."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456304443, "post_id": 35597350, "comment_id": 58879914, "body": "<a href=\"http://stackoverflow.com/questions/31318740/internal-mechanism-of-sizeof-in-c\">Possible duplicate</a>."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456306346, "post_id": 35597350, "comment_id": 58881238, "body": "@Lundin That&#39;s what the <code>(void *)</code> casts fix, right? The incoming pointer is <code>char *s</code>, and you can subtract from that. Then the result is cast to <code>void *</code>, which converts fine to <code>struct shshdr *</code> (but is shorter and more general)."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456308548, "post_id": 35597350, "comment_id": 58882848, "body": "@Lundin I&#39;m pretty sure there is no string aliasing problem here because the pointer&#39;s value has changed and is pointing to an actual struct object after the subtraction. It would be for example if the string itself would be reinterpreted as a struct, but it isn&#39;t. Struct is interpreted as a struct using the compatible type. (char* is also allowed to point to any object.)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456309726, "post_id": 35597350, "comment_id": 58883743, "body": "It is is unclear to me whether this violates 6.5.6. paragraph 8."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1456304277, "creation_date": 1456304277, "answer_id": 35597486, "question_id": 35597350, "link": "https://stackoverflow.com/questions/35597350/the-usage-of-sizeof-in-c/35597486#35597486", "title": "The usage of `sizeof` in C", "body": "<ol>\n<li>The 0-sized array has no size, it's declared length is 0. This is a flexible array member; it can only appear at the end of a <code>struct</code>.</li>\n<li>That initialization sets <code>sh</code> to point at memory computed by taking the value of <code>s</code>, a <code>char *</code>, and subtracting the size of the sds header. In other words, from a pointer to the first character of a string (the flexible array member) we compute a pointer to the header itself so we can get at the length.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "edited": false, "score": 0, "creation_date": 1456305657, "post_id": 35597488, "comment_id": 58880715, "body": "Could you give me a detailed explanation about <code>struct sdshdr *sh = (void*)(s-(sizeof(struct sdshdr)));</code>? i can&#39;t understand it."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1456307402, "post_id": 35597488, "comment_id": 58882040, "body": "<code>s</code> is a pointer in memory, which seems to point just after a <code>struct sdshdr</code>, then <code>s-(sizeof(...)</code> computes the address of this <i>just before</i> struct. That could have been written as <code>((struct sdshdr *)s)-1</code>."}, {"owner": {"reputation": 971, "user_id": 5935366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dfca29890919ec6ab874cf49b92041?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Gardener", "link": "https://stackoverflow.com/users/5935366/martin-gardener"}, "reply_to_user": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "edited": false, "score": 1, "creation_date": 1456343363, "post_id": 35597488, "comment_id": 58907324, "body": "@BlackMamba: what this line does, it create a memory space for sh = malloc/calloc, After that it checks if that char <i>s intial len and adds 1 to the end. It then sets its complete length and checks if memory of that line is available to initialize, after initializing it appends a &#39;\\0&#39; for end of *s, after that it returns the buffer to the program which must be a type of &#39;sds&#39; which is char</i> therefore the return statement ends up return char* sh-&gt;buf. Hope this is made clear, upvote if your problem is cleared :)"}, {"owner": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "edited": false, "score": 0, "creation_date": 1456723622, "post_id": 35597488, "comment_id": 59062391, "body": "@DanyalImran I found this link, i am clear with it now: <a href=\"http://redis.io/topics/internals-sds\" rel=\"nofollow noreferrer\">redis.io/topics/internals-sds</a>"}, {"owner": {"reputation": 971, "user_id": 5935366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dfca29890919ec6ab874cf49b92041?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Gardener", "link": "https://stackoverflow.com/users/5935366/martin-gardener"}, "reply_to_user": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "edited": false, "score": 0, "creation_date": 1456751707, "post_id": 35597488, "comment_id": 59077273, "body": "@BlackMamba thats great :D"}], "tags": [], "owner": {"reputation": 971, "user_id": 5935366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dfca29890919ec6ab874cf49b92041?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Gardener", "link": "https://stackoverflow.com/users/5935366/martin-gardener"}, "is_accepted": true, "score": 1, "last_activity_date": 1456304284, "creation_date": 1456304284, "answer_id": 35597488, "question_id": 35597350, "link": "https://stackoverflow.com/questions/35597350/the-usage-of-sizeof-in-c/35597488#35597488", "title": "The usage of `sizeof` in C", "body": "<p><li> char buf[] hasn't allocated any memory so it doesn't take up space therefore acting as a flexible array therefore 2 int datatype ends up taking 4+4 = 8 bytes.</p>\n\n<p><li> in <code>size_t</code>, the variable passed is <code>s</code> that belongs to <code>*sds</code> which is a typedef of a <code>char</code></p>\n\n<p>This leads to the implementation of this code in memory.</p>\n\n<pre><code>if (init) {\n    sh = zmalloc(sizeof(struct sdshdr)+initlen+1);\n  } else {\n    sh = zcalloc(sizeof(struct sdshdr)+initlen+1);\n  }\n  if (sh == NULL) return NULL;\n  sh-&gt;len = initlen;\n  sh-&gt;free = 0;\n  if (initlen &amp;&amp; init)\n    memcpy(sh-&gt;buf, init, initlen);\n  sh-&gt;buf[initlen] = '\\0';\n  return (char*)sh-&gt;buf;\n}\n</code></pre>\n\n<p>which stores memory space equal to the sh sdshdr struct.</p>\n"}], "owner": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 35597488, "answer_count": 2, "score": 2, "last_activity_date": 1456304284, "creation_date": 1456303867, "last_edit_date": 1456304054, "question_id": 35597350, "link": "https://stackoverflow.com/questions/35597350/the-usage-of-sizeof-in-c", "title": "The usage of `sizeof` in C", "body": "<p>I am reading the source code of redis.\nHere is the code:</p>\n\n<pre><code>typedef char *sds;\n\nstruct sdshdr {\n    unsigned int len;\n    unsigned int free;\n    char buf[];\n};\n\nstatic inline size_t sdslen(const sds s) {\n    struct sdshdr *sh = (void*)(s-(sizeof(struct sdshdr)));\n    return sh-&gt;len;\n}\n\nstatic inline size_t sdsavail(const sds s) {\n    struct sdshdr *sh = (void*)(s-(sizeof(struct sdshdr)));\n    return sh-&gt;free;\n}\n</code></pre>\n\n<p>About this code, I have some issue:</p>\n\n<ol>\n<li>Why is the output of <code>sizeof(struct sdshdr)</code> 8? Why is <code>char buf[]</code> not included?</li>\n<li>I can't understand the functions <code>size_t sdslen</code> and <code>sdsavail</code>. Why do <code>struct sdshdr *sh = (void*)(s-(sizeof(struct sdshdr)));</code>?</li>\n</ol>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1456303893, "post_id": 35597324, "comment_id": 58879568, "body": "<code>malloc(strlen)</code>? What? Are you trying to use the <code>strlen</code> <i>function</i>, or do you shadow the function with a variable with the same name? And what is the value of that variable? Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <i>Complete</i>, and Verifiable Example</a> and show us."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1456308120, "post_id": 35597324, "comment_id": 58882515, "body": "@JoachimPileborg I&#39;m not sure I understand suggesting changes to the question, and then proceeding to answer it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1456308687, "post_id": 35597324, "comment_id": 58882964, "body": "Other less experienced people will sooner or later find your question, not seeing a nice MCVE, and especially seeing a common function being used as a variable will be very confusing for them. This site is not only to get an answer to your current problem, but also to help others with similar (or the same) problem in the future."}, {"owner": {"reputation": 381, "user_id": 404783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a28d82d36cab59477d2c06b1b255ddf?s=128&d=identicon&r=PG", "display_name": "Herm", "link": "https://stackoverflow.com/users/404783/herm"}, "edited": false, "score": 0, "creation_date": 1456330100, "post_id": 35597324, "comment_id": 58898511, "body": "Hi guys, sorry about that.  Poor choice of variable name that was set outside the block and hence missed the copy-paste.  My fault.  I updated to make a bit more readable."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 404783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a28d82d36cab59477d2c06b1b255ddf?s=128&d=identicon&r=PG", "display_name": "Herm", "link": "https://stackoverflow.com/users/404783/herm"}, "edited": false, "score": 0, "creation_date": 1456344314, "post_id": 35597413, "comment_id": 58907897, "body": "I was afraid of this, but reading the man page says &quot;The function fread() reads nitems objects, each size bytes long, from the stream pointed to by stream, storing them at the location given by ptr.&quot;  This leads me to believe that the buffer being read should be copied to the memory address pointed to by the input ptr.  If this is the case, then I don&#39;t understand why the pointer itself would be overwritten."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 381, "user_id": 404783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a28d82d36cab59477d2c06b1b255ddf?s=128&d=identicon&r=PG", "display_name": "Herm", "link": "https://stackoverflow.com/users/404783/herm"}, "edited": false, "score": 0, "creation_date": 1456381884, "post_id": 35597413, "comment_id": 58922502, "body": "@Herm <code>sizeof(struct Address)</code> is the complete size of the structure, including the <code>name</code> and <code>email</code> members. So when you tell <code>fread</code> to read one element of <code>sizeof(struct Address)</code> bytes, then it will do that and write all the bytes it read to the pointer given by <code>thisAddress</code>. What&#39;s in the file is most likely not very valid pointers for the current process, leading to <i>undefined behavior</i> when you use the pointers. The solution is, like I said, just to move the allocations to after you read the structure."}, {"owner": {"reputation": 381, "user_id": 404783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a28d82d36cab59477d2c06b1b255ddf?s=128&d=identicon&r=PG", "display_name": "Herm", "link": "https://stackoverflow.com/users/404783/herm"}, "edited": false, "score": 0, "creation_date": 1456420560, "post_id": 35597413, "comment_id": 58949546, "body": "AH!!! I totally get that now!  That really helps to clarify!  I was looking at your original comment incorrectly before.  Thank you!"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1456422073, "last_edit_date": 1456422073, "creation_date": 1456304082, "answer_id": 35597413, "question_id": 35597324, "link": "https://stackoverflow.com/questions/35597324/why-can-i-allocate-a-local-variable-and-fread-to-it-but-segfault-if-i-try-to-al/35597413#35597413", "title": "Why can I allocate a local variable and fread to it, but segfault if I try to allocate a pointer in a struct and read to it?", "body": "<p>First you do</p>\n\n<pre><code>thisAddress-&gt;name = malloc(len);\nthisAddress-&gt;email = malloc(len);\n</code></pre>\n\n<p>Then you do</p>\n\n<pre><code>rc = fread(thisAddress, sizeof(struct Address), 1, conn-&gt;file);\n</code></pre>\n\n<p>This reading of the structure <em>overwrites</em> the pointers you previously set. So the pointers you use to read the name and email address texts from the file are not the ones you allocated, but the ones you read from the file, which are very unlikely to point to any valid memory, leading to <em>undefined behavior</em>.</p>\n\n<p>If you change the order of the first structure read and the allocations it should work.</p>\n"}], "owner": {"reputation": 381, "user_id": 404783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a28d82d36cab59477d2c06b1b255ddf?s=128&d=identicon&r=PG", "display_name": "Herm", "link": "https://stackoverflow.com/users/404783/herm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 35597413, "answer_count": 1, "score": 2, "last_activity_date": 1456422073, "creation_date": 1456303776, "last_edit_date": 1456329856, "question_id": 35597324, "link": "https://stackoverflow.com/questions/35597324/why-can-i-allocate-a-local-variable-and-fread-to-it-but-segfault-if-i-try-to-al", "title": "Why can I allocate a local variable and fread to it, but segfault if I try to allocate a pointer in a struct and read to it?", "body": "<p>I'm playing with a small C program to brush up.  I have the following struct...</p>\n\n<pre><code>struct Address {\n    int id;\n    int set;\n    char *name;\n    char *email;\n};\n</code></pre>\n\n<p>I am trying to read some data into it.  This works:</p>\n\n<pre><code>size_t len = 256 * sizeof(char);\n\nstruct Address *thisAddress = malloc(sizeof(struct Address));\nchar *name = malloc(len);\nchar *email = malloc(len);\n\nrc = fread(thisAddress, sizeof(struct Address), 1, conn-&gt;file);\nif(rc != 1) die(\"Failed to load address.\", conn);\n\nrc = fread(name, len, 1, conn-&gt;file);\nif(rc != 1) die(\"Failed to load name.\", conn);\n\nrc = fread(email, len, 1, conn-&gt;file);\nif(rc != 1) die(\"Failed to load email.\", conn);\n\nthisAddress-&gt;name = name;\nthisAddress-&gt;email = email;\nconn-&gt;db-&gt;rows[i] = thisAddress;\n</code></pre>\n\n<p>But this segfaults:</p>\n\n<pre><code>size_t len = 256 * sizeof(char);\nstruct Address *thisAddress = malloc(sizeof(struct Address));\nthisAddress-&gt;name = malloc(len);\nthisAddress-&gt;email = malloc(len);\n\nrc = fread(thisAddress, sizeof(struct Address), 1, conn-&gt;file);\nif(rc != 1) die(\"Failed to load address.\", conn);\n\nrc = fread(thisAddress-&gt;name, len, 1, conn-&gt;file);\nif(rc != 1) die(\"Failed to load name.\", conn);\n\nrc = fread(thisAddress-&gt;email, len, 1, conn-&gt;file);\nif(rc != 1) die(\"Failed to load email.\", conn);\n\nconn-&gt;db-&gt;rows[i] = thisAddress;\n</code></pre>\n\n<p>If you can't see it right away, in the first one I'm malloc'ing the name and edit vars, reading from the file into those vars, then assigning them to the name and email pointers on struct Address.  In the second, I'm trying to alloc the pointers on struct Address, and read directly into them.</p>\n\n<p>Why would these two be different?  Any insight is helpful, thanks!</p>\n"}, {"tags": ["c", "stderr"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 3, "creation_date": 1456303638, "post_id": 35597231, "comment_id": 58879415, "body": "Use <code>exit(EXIT_FAILURE);</code> instead of <code>return -1;</code>, IMO <code>perror</code> is preferable (you get more information about the error), but use  <code>perror(&quot;fopen&quot;)</code> instead of <code>perror(&quot;Error: &quot;);</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1456303986, "post_id": 35597231, "comment_id": 58879631, "body": "It&#39;s up to you. There is no prefered way. With <code>fprintf</code> you are in total control of what will be displayed. <a href=\"http://www.cplusplus.com/reference/cstdio/perror/\" rel=\"nofollow noreferrer\"><code>perror</code></a> is platform dependant and takes into account the <code>errno</code> variable."}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1456333914, "post_id": 35597231, "comment_id": 58901501, "body": "You should print both errno and strerror(errno), but keep in mind that errno is volatile, so it&#39;s a good idea to save it into an own variable. (Note: nowadays errno isn&#39;t actually a variable, it is sg like this: <code>#define errno (*_Errno())</code> or <code>#define errno (*__errno_location ())</code> -- that&#39;s because of threads)"}, {"owner": {"reputation": 107, "user_id": 5476777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0KTZ.jpg?s=128&g=1", "display_name": "Suzanka", "link": "https://stackoverflow.com/users/5476777/suzanka"}, "edited": false, "score": 0, "creation_date": 1456426678, "post_id": 35597231, "comment_id": 58953448, "body": "Thank you all. Sounds like <code>errno</code> is a useful way to handle errors."}, {"owner": {"reputation": 40596, "user_id": 1677912, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/craWj.png?s=128&g=1", "display_name": "Mogsdad", "link": "https://stackoverflow.com/users/1677912/mogsdad"}, "edited": false, "score": 1, "creation_date": 1457721230, "post_id": 35597231, "comment_id": 59551480, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12102332/when-should-i-use-perror-and-fprintfstderr\">When should I use perror(&quot;...&quot;) and fprintf(stderr, &quot;...&quot;)?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 5, "creation_date": 1456303909, "post_id": 35597352, "comment_id": 58879576, "body": "Thats a purely opinion based answer."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456304032, "post_id": 35597352, "comment_id": 58879659, "body": "Care to elaborate? Whether to use perror or something else, and what to use perror with is mostly a manner of style, although most software does exactly what I described. As for tutorialspoint.com, I suggest you check it out before you downvote my answer."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456304084, "post_id": 35597352, "comment_id": 58879698, "body": "&quot;Mostly manner of style&quot; &quot;Is just terrible&quot; &quot;as such must not be used&quot; &quot;Preferred way&quot; thats all your opinion, and the arguments to justify it are lacking in your answer."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456305333, "post_id": 35597352, "comment_id": 58880538, "body": "Why are you mixing the opinion about the site with the opinion on perror usage? While one can arguably refrain from commenting about the site (why?), there is no way to say anything about perror which would not be an opinion."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456305685, "post_id": 35597352, "comment_id": 58880736, "body": "Thats a case of a &quot;Primarily opinion based&quot; question here which should be closed. You&#39;ve hit the nail on the head. If its not factually answerable, you shouldn&#39;t answer it."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456305883, "post_id": 35597352, "comment_id": 58880915, "body": "The question seems perfectly reasonable. But if it is not, why don&#39;t you explain this to OP and redirect them to a place where it can be asked?"}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456305903, "post_id": 35597352, "comment_id": 58880928, "body": "You cannot just say no to a site, it might be useful to someone. -1, because this is spam. The definition of spam is to promote a service, but doing the opposite is as bad as promoting a service."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456306114, "post_id": 35597352, "comment_id": 58881082, "body": "Also, I have been using that site for a long time. It is your opinion that it is not good, and I am not telling you to be a fan of it. I am telling you not to make an anti-recommendation, as that is off-topic for SO. It is opinion-based as @Magisch said."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1456307196, "post_id": 35597352, "comment_id": 58881890, "body": "So what exactly is one supposed to do when a newbie provides a link to a defective resource? Just ignore it? Especially with a language like C it is extremely crucial to have a good resource to learn from."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456307767, "post_id": 35597352, "comment_id": 58882283, "body": "When a nebie provide a link to a defective source, just say that it is wrong. Many pages on that website are good, and it might be possible that this one isn&#39;t. But what you&#39;re saying tells that all pages on that website are bad, worst, and defective. I cannot understand how you have managed to visit all the pages of that website, it has thousands. And if you haven&#39;t, saying that it is worst is wrong. Some page might be useful."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 2, "creation_date": 1456308033, "post_id": 35597352, "comment_id": 58882465, "body": "Give the pages I have seen (example above), this does not look like a resource which can be trusted with content related to the C programming language. Even if some pages happen to be correct, I don&#39;t see why would anyone use this site in the first place. How could you tell the difference as a newbie? So what else is to do than to discourage the use of the site?"}, {"owner": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "edited": false, "score": 1, "creation_date": 1456339137, "post_id": 35597352, "comment_id": 58904839, "body": "Had OP omitted his mention of that specific site you so despise (and I don&#39;t know in order to verify its despicability), all that&#39;d be left of your post would be <i>one</i> sentence: &quot;The preferred way... [etc]&quot;. So yeah. The rest of this answer is pretty much an opinionated rant."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1456340503, "post_id": 35597352, "comment_id": 58905688, "body": "You did not address the reason for the rant, which was also expressed as a question in my last comment. Let me repeat then. A newbie posts a link to a resource I consider defective. Given how hard it is to learn C, it is crucial to have correct resources and OP does not. Unfortunately there is no page pointing out mistakes on tutorialspoint I could link to. What was I supposed to do then? I only stated the site is wrong and in an edit provided an example with blatant errors. You are not advocating for leaving it as it is, are you? If not, what else should have been done here?"}, {"owner": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "edited": false, "score": 0, "creation_date": 1456342704, "post_id": 35597352, "comment_id": 58906943, "body": "Really. I understand your motivation. I totally do. In golden times past, people would say &quot;I got this code from w3schools and it doesn&#39;t do what I want&quot;. Same here. While I&#39;m <i>totally</i> on your side about the invalidity of the code samples on that other site, all your answer does is (possibly rightly so) discourage use of that site and defend <i>your</i> opinion why it should be avoided. But it doesn&#39;t <i>answer</i> OP&#39;s question. The <i>reason</i> for your rant may be totally valid but is misplaced here as an answer to someone else&#39;s question which wasn&#39;t &quot;is site A&#39;s example better than site B&#39;s example.&quot;"}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1456344153, "post_id": 35597352, "comment_id": 58907792, "body": "I did answer the question (I said to use perror with the failing function name as an argument) and it is in line with the most upvoted comment. But even if I did not, OP says they are learning (at least in part) from what I consider a bad resource, so what should I do now? While not explicitly stated by your comment, it seems you are arguing it should be ignored and I cannot agree with such approach. Say one documented more atrocities from that site. Would linking to such a page be considered fine here?"}], "tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": 0, "last_activity_date": 1456307047, "last_edit_date": 1456307047, "creation_date": 1456303871, "answer_id": 35597352, "question_id": 35597231, "link": "https://stackoverflow.com/questions/35597231/perror-or-own-string-output-to-stderr-in-c/35597352#35597352", "title": "perror() or own string output to stderr in C", "body": "<p>tutorialspoint.com is extremely terrible (at least when it comes to C) and as such must not be used. The standard resource to learn from is \"The C Programming Language, 2nd edition\" by Kernighan and Ritchie.</p>\n\n<p>The preferred way to report stuff is to include the failing function in the message and use perror, e.g. perror(\"open\")</p>\n\n<p>EDIT: originally this did not include any justification for the claim about the site. I did not feel like it is necessary nor sensible. There is no write up I could link to either. They key was to avoid the site and everyone interested can easily conclude material in there is questionable at best and straight up wrong at worst.</p>\n\n<p>However, since I got a weird backlash here are some excerpts:</p>\n\n<p><a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_malloc.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/c_standard_library/c_function_malloc.htm</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>Missing include for strcpy and strcat.</p>\n\n<pre><code>int main()\n{\n   char *str;\n\n   /* Initial memory allocation */\n   str = (char *) malloc(15);\n</code></pre>\n\n<p>No need to cast malloc. Missing null-check. Why the 15? </p>\n\n<pre><code>   strcpy(str, \"tutorialspoint\");\n</code></pre>\n\n<p>Bad error-inducing style. What if the length was to change? If an explicit allocation really needs to happen, strlen() + 1 can be used to get the needed size.</p>\n\n<pre><code>   printf(\"String = %s,  Address = %u\\n\", str, str);\n</code></pre>\n\n<p>'u' is an incorrect specifier for pointer type.</p>\n\n<pre><code>   /* Reallocating memory */\n   str = (char *) realloc(str, 25);\n</code></pre>\n\n<p>Standard bad idiom. The code should use a temporary pointer to recover from error, or if recovery is not an option, exit.</p>\n\n<pre><code>   strcat(str, \".com\");\n</code></pre>\n\n<p>What's up with realloc from 15 to 25 just to add \".com\"?</p>\n\n<pre><code>   printf(\"String = %s,  Address = %u\\n\", str, str);\n\n   free(str);\n\n   return(0);\n}\n</code></pre>\n\n<p>Does this justify my claim about the site?</p>\n"}, {"comments": [{"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 1, "creation_date": 1456314942, "post_id": 35597380, "comment_id": 58887528, "body": "Information in the link is wrong. 1. strerror requires string.h 2. no need to extern int errno when errno.h is included 3. it prints the error to stdout 4. it returns 0 on error"}, {"owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "reply_to_user": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1456322665, "post_id": 35597380, "comment_id": 58893060, "body": "Thanks for the feedback. I have removed the link and added a new link from IBM developer works."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1456331719, "post_id": 35597380, "comment_id": 58899804, "body": "This resource is also defective, although I have not read the entire page to asses it entirely. See the program au-errnoDemo.zip. 1. abuse of full-caps name for something which is not a macro 2. predictable name for a /tmp file 3. missing headers for open 4. the 3rd parameter is meaningless wthout O_CREAT 5. error printed to stdout 6. errno not saved before perror, contradicting your own advice."}, {"owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "reply_to_user": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1456362575, "post_id": 35597380, "comment_id": 58916110, "body": "Thanks. I have replaced the link with Linux and gnu man page URLs. The pages explain the need to save the errno, when extern int errno needs to be declared etc."}], "tags": [], "owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1456362380, "last_edit_date": 1456362380, "creation_date": 1456303987, "answer_id": 35597380, "question_id": 35597231, "link": "https://stackoverflow.com/questions/35597231/perror-or-own-string-output-to-stderr-in-c/35597380#35597380", "title": "perror() or own string output to stderr in C", "body": "<p>You can use perror() or strerror to get the error message. If you want to postpone the display of error message or if you want to log the message to a file, then save the errno and use strerror() because perror only writes to the standard error stream and it uses the global errno set and the errno might change any time if any library function is called before printing the error message.</p>\n\n<p>Example using saved errno:</p>\n\n<pre><code>int savederrno;\n....\nif( fp == NULL ) \n{\n  savederrno = errno; /* Save the errno immediately after an api/lib function or a system call */\n  /*If you want to write to a log file now, write here using strerror and other library calls */\n}\n\n....\n/* use strerror function to get the error message and write to log\n    or write to std error etc*/\n</code></pre>\n\n<p>The following man pages explain the error reporting in detail.</p>\n\n<p><a href=\"http://www.gnu.org/software/libc/manual/html_node/Error-Messages.html\" rel=\"nofollow\">http://www.gnu.org/software/libc/manual/html_node/Error-Messages.html</a>\n<a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man3/errno.3.html</a></p>\n"}], "owner": {"reputation": 107, "user_id": 5476777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0KTZ.jpg?s=128&g=1", "display_name": "Suzanka", "link": "https://stackoverflow.com/users/5476777/suzanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2059, "favorite_count": 0, "closed_date": 1457735613, "accepted_answer_id": 35597380, "answer_count": 2, "score": 2, "last_activity_date": 1456362380, "creation_date": 1456303488, "question_id": 35597231, "link": "https://stackoverflow.com/questions/35597231/perror-or-own-string-output-to-stderr-in-c", "closed_reason": "Opinion-based", "title": "perror() or own string output to stderr in C", "body": "<p>Is there a preferable way to report errors in C? For example if a file that is supposed to be opened does not exist, should I use</p>\n\n<pre><code>if( fp == NULL ) \n{\n      perror(\"Error: \");\n      return(-1);\n}\n</code></pre>\n\n<p>(copied from <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_perror.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/c_standard_library/c_function_perror.htm</a> )</p>\n\n<p>or </p>\n\n<pre><code>if( fp == NULL ) \n{\n      fprintf(stderr, \"Unable to open file for reading.\\n\");\n      return(-1);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "cuda", "centos"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 2468164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12D2V.jpg?s=128&g=1", "display_name": "Suraj Salvi", "link": "https://stackoverflow.com/users/2468164/suraj-salvi"}, "edited": false, "score": 0, "creation_date": 1456381089, "post_id": 35603983, "comment_id": 58922109, "body": "How to include in make rule. please help."}], "tags": [], "owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "is_accepted": true, "score": 1, "last_activity_date": 1456321704, "creation_date": 1456321704, "answer_id": 35603983, "question_id": 35597121, "link": "https://stackoverflow.com/questions/35597121/how-to-link-other-o-so-a-files-to-current-cuda-compliation/35603983#35603983", "title": "How to link other .o, .so, .a files to current cuda compliation", "body": "<p>So what you mean is that you want to statically link against -lcudart so that these references are always resolved by the OS loader.</p>\n\n<p>In recent CUDA toolkits, nvcc accepts the flags </p>\n\n<blockquote>\n  <p>--cudart{none|shared|static}              (-cudart)<br>\n          shared/dynamic CUDA runtime library, or static CUDA runtime library.\n          Allowed values for this option:  'none','shared','static'.</p>\n</blockquote>\n\n<p>so maybe you could try adding --cudart static into your make rule.</p>\n"}], "owner": {"reputation": 25, "user_id": 2468164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12D2V.jpg?s=128&g=1", "display_name": "Suraj Salvi", "link": "https://stackoverflow.com/users/2468164/suraj-salvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 35603983, "answer_count": 1, "score": 1, "last_activity_date": 1457831804, "creation_date": 1456303144, "last_edit_date": 1457831804, "question_id": 35597121, "link": "https://stackoverflow.com/questions/35597121/how-to-link-other-o-so-a-files-to-current-cuda-compliation", "title": "How to link other .o, .so, .a files to current cuda compliation", "body": "<p>I want to link libcudart.so to my cuda code such that reference to these functions should be available. when i fire readelf -Ws on .so file or .o file it shows multiple UND (Undefined) Entries. please help.</p>\n\n<pre><code>nvcc -c cuda/spmv/dispatch-float-float.cu -o cuda/spmv/dispatch-float-float.o -O2 -v -I. -gencode arch=compute_30,code=sm_30 -DCUDA_ARCH=30 --ptxas-options -v --cudafe-options --diag_suppress=code_is_unreachable --compiler-options -fPIC --compiler-options -fpermissive\n</code></pre>\n\n<p>this is my compilation code. which does not link CUDA functions from libcudart.so file and CUDA functions remain undefined.</p>\n\n<hr>\n\n<p>This is my Makefile, Please suggest the changes.                                                                                          </p>\n\n<pre><code>NVCC = nvcc\nCUDA_PATH = $(shell which $(NVCC) | sed s@/bin/nvcc@@)\n\nCUDA_ARCH = 35\n\nCUDA_INCLUDE := -I$(CUDA_PATH)/include/\n\nCXXWARN := -Wall -Wno-sign-compare\nCXXOPT  := -O2\nCXXFLAGS := $(CXXOPT) -g $(CXXWARN) -fPIC -I. $(CUDA_INCLUDE)\n\nNVCCFLAGS := -O2 -v -I. -gencode arch=compute_$(CUDA_ARCH),code=sm_$(CUDA_ARCH) \\\n    -DCUDA_ARCH=$(CUDA_ARCH) \\\n    --ptxas-options -v \\\n    --cudafe-options --diag_suppress=code_is_unreachable \\\n    --compiler-options -fPIC\n\nLIB = libispm0-pic.a\nall: $(LIB)\n\nSPMV_OBJS  = cuda/spmv/dispatch-float-float.o cuda/spmv/dispatch-double-float.o cuda/spmv/dispatch-double-double.o\nEXTRA_OBJS = util/cuda/sblas.o fastainv/fastainv.o util/cuda/initialize.o\nOBJS = $(SPMV_OBJS) $(EXTRA_OBJS)\n\n$(LIB): $(OBJS)\n    ar cr $@ $^\n\ncuda/spmv/dispatch-%.o: cuda/spmv/dispatch-%.cu\n    $(NVCC) -c $&lt; -o $@ $(NVCCFLAGS) --compiler-options -fpermissive\n    objcopy --localize-hidden $@\n\nutil/cuda/%.o: util/cuda/%.cu\n    $(NVCC) -c $&lt; -o $@ $(NVCCFLAGS)\n\nfastainv/fastainv.o: fastainv/fastainv.cpp\n    $(CXX) -c $&lt; -o $@ $(CXXFLAGS)\n\nclean:\n    -rm $(OBJS) $(LIB)\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "language-concepts"], "comments": [{"owner": {"reputation": 971, "user_id": 5935366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dfca29890919ec6ab874cf49b92041?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Gardener", "link": "https://stackoverflow.com/users/5935366/martin-gardener"}, "edited": false, "score": 2, "creation_date": 1456302973, "post_id": 35597019, "comment_id": 58878999, "body": "pointers are dissolved to the index of array, therefore the term &#39;they are more or less like arrays&#39;. infact pointers and arrays are two completely different things."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1456303274, "post_id": 35597019, "comment_id": 58879191, "body": "<a href=\"http://c-faq.com/aryptr/aryptr2.html\" rel=\"nofollow noreferrer\">c-faq.com/aryptr/aryptr2.html</a>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1456303576, "post_id": 35597019, "comment_id": 58879369, "body": "Instead of <code>%lu</code>, you should use <code>%zu</code> for <code>size_t</code> arguments."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1456305148, "post_id": 35597019, "comment_id": 58880409, "body": "If book says that &quot;pointers more or less are arrays&quot;, it tells me that author doesn&#39;t understand what s/he is saying, or doesn&#39;t take time necessary to explain things properly. Getting the model wrong in the beginning will make things more miserable in the long run, than getting it correct immediately."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1456308096, "post_id": 35597019, "comment_id": 58882506, "body": "The short answer is that it would have worked fine to have arrays as first class objects, but it wasn&#39;t done that way in the 1970s and it&#39;s too late to change now"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456310451, "post_id": 35597019, "comment_id": 58884289, "body": "@viuser <i>It contains the memory address of the first char of &quot;hello&quot;,</i> This is not correct. <code>a</code> &#39;contains&#39; the string itself, <code>p</code> &#39;contains&#39; the address of the string. The same syntax works for both examples, but the underlying assembly is different."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456312033, "post_id": 35597019, "comment_id": 58885411, "body": "@viuser Because <code>a</code> decays to a pointer if evaluated. Arrays cannot be passed in C, so what does printf receive? A pointer."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456312240, "post_id": 35597019, "comment_id": 58885567, "body": "@viuser C language is not defined by the output of some debugger."}], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 5767184, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Hcgqj.jpg?s=128&g=1", "display_name": "viuser", "link": "https://stackoverflow.com/users/5767184/viuser"}, "edited": false, "score": 0, "creation_date": 1456306194, "post_id": 35597569, "comment_id": 58881143, "body": "Actually the question was <i>why</i> C behaves in this manner. What&#39;s the logic behind this strange crutch? Is there something <i>bad</i> about a true robust array type? But languages like in Go have it, so it can&#39;t be too bad...?"}], "tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1456304553, "creation_date": 1456304553, "answer_id": 35597569, "question_id": 35597019, "link": "https://stackoverflow.com/questions/35597019/cs-aversion-to-arrays/35597569#35597569", "title": "C&#39;s aversion to arrays", "body": "<p>Arrays are arrays and pointers are pointers, they are not the same.<br>\nBut to make anything usable of arrays the compiler must use <strong>qualified pointers</strong>.<br>\nBy definition an array is a contiguous and homogeneous sequence of elements in memory. So far so good, but how interact with it?<br>\nTo explain the concept I already used, on other forums, an assembly example:</p>\n\n<pre><code>;int myarray[10] would be defined as\n_myarray:    .resd  10\n;now the pointer p (suppose 64 bit machine)\n_p:          .resq  1 \n</code></pre>\n\n<p>This is the code emitted by compiler to reserve an array of 10 <code>int</code> and a pointer to <code>int</code> in global memory.</p>\n\n<p>Now when referring to the array what you think you can get? Just the address of course (or better the address of the first element). And the address what is? The standard says that it have to be called <strong>qualified pointer</strong>, but you can really understand now <strong>why it is so</strong>.<br>\nNow look the pointer, when we refer to it the compiler emits code to fetch the contents of the location at address <code>p</code>, but we can even get <code>p</code> itself, the address of the pointer variable, using <code>&amp;p</code>, but <strong>we can't do it with an array</strong>. Using <code>&amp;myarray</code> will give back the address of the first element again.<br>\nThis means that you can assign <code>myarray</code> address to <code>p</code>, but not the reverse ;-)</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1528736128, "post_id": 35598701, "comment_id": 88611279, "body": "Your recent answer on <a href=\"https://stackoverflow.com/a/50782381\">From compiler perspective, how is reference for array dealt with, and, why passing by value(not decay) is not allowed?</a> says that part of the reason is that C got this from B.  (Lars&#39;s answer on this question has the same link about that history.)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1528751073, "post_id": 35598701, "comment_id": 88617942, "body": "Oh, I had forgotten about this. Added some revised info pointing to the first hand source. Thanks!"}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 6, "last_activity_date": 1528750930, "last_edit_date": 1592644375, "creation_date": 1456307612, "answer_id": 35598701, "question_id": 35597019, "link": "https://stackoverflow.com/questions/35597019/cs-aversion-to-arrays/35598701#35598701", "title": "C&#39;s aversion to arrays", "body": "<p>The C language was initially designed in the early 1970's on a <a href=\"https://www.bell-labs.com/usr/dmr/www/picture.html\" rel=\"nofollow noreferrer\">PDP mini-computer</a> which reportedly just filled up half a room, despite its huge 24 kB memory. (That's kB, not MB, or GB).</p>\n<p>Fitting a compiler at all into that memory was the real challenge. So the C language was designed to allow you to write compact programs, and quite a few special operators (like +=, --, and ?:) was added for manual optimizations.</p>\n<p><strike>Adding features for copying large arrays as parameters didn't occur to the designers. It wouldn't have been useful anyway.</strike></p>\n<p>In C's predecessor, the B language, an array was represented as a pointer to storage allocated separately (see <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.html\" rel=\"nofollow noreferrer\">the link</a> in Lars' answer). Ritchie wanted to avoid this extra pointer in C and so got the idea that the array name could be turned into a pointer when used in places not expecting an array:</p>\n<blockquote>\n<p>It eliminated the materialization of the pointer in storage, and instead caused the creation of the pointer when the array name is mentioned in an expression. The rule, which survives in today's C, is that values of array type are converted, when they appear in expressions, into pointers to the first of the objects making up the array.</p>\n<p>This invention enabled most existing B code to continue to work, despite the underlying shift in the language's semantics.</p>\n</blockquote>\n<p>And <code>struct</code>s didn't get added to the language until later. That you can pass <a href=\"https://stackoverflow.com/questions/6966570/why-declare-a-struct-that-only-contains-an-array-in-c\">an array inside a struct as a parameter</a> was then a feature that offered another option.</p>\n<p>Changing the syntax for arrays was already too late. It would break too many programs. There were already 100s of users...</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1528736681, "post_id": 35598798, "comment_id": 88611529, "body": "The run-time penalties would only exist if you used it inappropriately and pass them by value or assign them, doing a large copy.  You could argue that making it easy to write slow code is a bad thing, though (like passing a <code>std::vector</code> by value in C++).  Especially when RAM is tight, as well as CPU time.  Early C didn&#39;t have <code>struct</code>, so I guess passing an array by <i>value</i> to a function would result in a asm that you couldn&#39;t get otherwise, depending on the calling convention.  (You could manually implement (non-)hidden pointer, but not a big copy to the stack.)"}], "tags": [], "owner": {"reputation": 1367, "user_id": 258146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabc30550a9fe15945230f2a512aa41f?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/258146/lars"}, "is_accepted": true, "score": 4, "last_activity_date": 1456307879, "creation_date": 1456307879, "answer_id": 35598798, "question_id": 35597019, "link": "https://stackoverflow.com/questions/35597019/cs-aversion-to-arrays/35598798#35598798", "title": "C&#39;s aversion to arrays", "body": "<p>This part of the question...</p>\n\n<blockquote>\n  <p>Is there any logic behind this aversion to arrays? Why isn't there a true robust array type in C? What bad would happen if there was one?</p>\n</blockquote>\n\n<p>... is not really a code question and open to speculation, but I think a short answer might be beneficial: when C was created, it was targeted at machines with very little RAM and slow CPUs (measured in Kilo-Bytes and Megahertz, resp.). It was meant to replace Assembler as systems programming language, but without introducing the overhead that the other existing high-level languages required. For the same reasons, C is still a popular language for micro controllers, due to the control it gives you over the generated program.</p>\n\n<p>Introducing a 'robust' array type would have had under-the-hood performance and complexity penalties for both the compiler and the runtime, which not all systems couldn't afford. At the same time, C offers the capabilities for the programmer to create their own 'robust' array type and use them only in those situations where its use was justified.</p>\n\n<p>I found this article interesting in this context: <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.html\" rel=\"nofollow\">Dennis Ritchie: Development of the C Language (1993)</a></p>\n"}], "owner": {"reputation": 873, "user_id": 5767184, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Hcgqj.jpg?s=128&g=1", "display_name": "viuser", "link": "https://stackoverflow.com/users/5767184/viuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 3, "closed_date": 1456307749, "accepted_answer_id": 35598798, "answer_count": 3, "score": 6, "last_activity_date": 1528750930, "creation_date": 1456302834, "question_id": 35597019, "link": "https://stackoverflow.com/questions/35597019/cs-aversion-to-arrays", "closed_reason": "Needs details or clarity", "title": "C&#39;s aversion to arrays", "body": "<p>In introductory books on C it is often claimed that pointers more or less <em>are</em> arrays. Isn't this a vast simplification, at best?</p>\n\n<p>There <em>is</em> an array type in C and it can behave completely different from pointers, for example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]){\n  int a[10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};\n  int *b = a;\n  printf(\"sizeof(a) = %lu\\n\", sizeof(a));\n  printf(\"sizeof(b) = %lu\\n\", sizeof(b));\n  return 0;\n}\n</code></pre>\n\n<p>gives the output</p>\n\n<pre><code>sizeof(a) = 40 \nsizeof(b) = 8 \n</code></pre>\n\n<p>or as another example <code>a = b</code> would give a compilation error (GCC: \"assignment to expression with array type\").</p>\n\n<p>Of course there is a <em>close relationship</em> between pointers and arrays, in the sense that yes, the content of an array variable <em>itself</em> is the memory address of the first array element, e.g. <code>int a[10] = {777, 1, 2, 3, 4, 5, 6, 7, 8, 9}; printf(\"a = %ul\\n\", a);</code> prints the address containing the 777.</p>\n\n<p>Now, on the one hand, if you 'hide' arrays in structs, you can easily copy large amounts of data (arrays if you ignore the wrapping struct) just by using the <code>=</code> operator (and that's even fast, too):</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define ARRAY_LENGTH 100000000\n\ntypedef struct {int arr[ARRAY_LENGTH];} struct_huge_array;\n\nint main(int argc, char *argv[]){\n  struct_huge_array *a = malloc(sizeof(struct_huge_array));\n  struct_huge_array *b = malloc(sizeof(struct_huge_array));\n\n  int *x = malloc(sizeof(int)*ARRAY_LENGTH);\n  int *y = malloc(sizeof(int)*ARRAY_LENGTH);\n\n  struct timeval start, end, diff;\n\n  gettimeofday(&amp;start, NULL);\n  *a = *b;\n  gettimeofday(&amp;end, NULL);\n\n  timersub(&amp;end, &amp;start, &amp;diff);\n  printf(\"Copying struct_huge_arrays took %d sec, %d \u00b5s\\n\", diff.tv_sec, diff.tv_usec); \n\n  gettimeofday(&amp;start, NULL);\n  memcpy(x, y, ARRAY_LENGTH*sizeof(int));\n  gettimeofday(&amp;end, NULL);\n\n  timersub(&amp;end, &amp;start, &amp;diff);\n  printf(\"memcpy took %d sec, %d \u00b5s\\n\", diff.tv_sec, diff.tv_usec); \n\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Copying struct_huge_arrays took 0 sec, 345581 \u00b5s\nmemcpy took 0 sec, 345912 \u00b5s\n</code></pre>\n\n<p>But you cannot do this with arrays itself. For arrays <code>x, y</code> (of the same size and of the same type) the expression <code>x = y</code> is illegal.</p>\n\n<p>Then, functions can't return arrays. Or if arrays are used as arguments, C <em>collapses</em> them into pointers -- it does not care if the size is <em>explicitly given,</em> so the following program gives the output <code>sizeof(a) = 8</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid f(int p[10]){\n  printf(\"sizeof(a) = %d\\n\", sizeof(p));\n}\n\nint main(int argc, char *argv[]){\n  int a[10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};\n\n  f(a);\n\n  return 0;\n}\n</code></pre>\n\n<p>Is there any logic behind this aversion to arrays? Why isn't there a <em>true</em> robust array type in C? What bad would happen if there was one? After all, if an array is hidden in a <code>struct</code> the array <em>does</em> behave as in Go, Rust, ..., i.e. the array <em>is</em> the <em>whole</em> chunk in memory and passing it around will copy its content, not just the memory address of the first element. For example like in Go the following program</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    a := [2]int{-777, 777}\n    var b [2]int\n    b = a\n    b[0] = 666\n\n    fmt.Println(a)\n    fmt.Println(b)\n}\n</code></pre>\n\n<p>gives the output:</p>\n\n<pre><code>[-777 777]\n[666 777]\n</code></pre>\n"}, {"tags": ["c++", "c", "operators", "bit-manipulation"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 3, "creation_date": 1456302722, "post_id": 35596897, "comment_id": 58878841, "body": "<code>0x3 &lt;&lt; (15*2)</code> == <code>3 &lt;&lt; 30</code> == overflow for 32 bits (undefined behaviour)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456302802, "post_id": 35596897, "comment_id": 58878899, "body": "Decompose <code>var &amp; (0x3 &lt;&lt; (15*2)) &gt;&gt; (15*2)</code> into smaller operations, look at the intermediate values and you&#39;ll find out."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1456303005, "post_id": 35596897, "comment_id": 58879017, "body": "if you want to get the top 2 bits back, use <code>0x3U &lt;&lt; (15*2)</code> instead"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5973178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBpId.jpg?s=128&g=1", "display_name": "Sudeep Mohanty", "link": "https://stackoverflow.com/users/5973178/sudeep-mohanty"}, "edited": false, "score": 0, "creation_date": 1456303921, "post_id": 35597051, "comment_id": 58879587, "body": "Thank you for this alternate method which I also agree to. But unfortunately I am not in the position to change the construct of the code. :/"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 4, "last_activity_date": 1456302923, "creation_date": 1456302923, "answer_id": 35597051, "question_id": 35596897, "link": "https://stackoverflow.com/questions/35596897/bit-operation-similar-operation-results-in-different-results/35597051#35597051", "title": "Bit operation: Similar operation results in different results", "body": "<p>15 *2 = 30. 0x3 = 2 bits -> sets highest bit in uint32. Since 0x3 is signed, this is a negative number. Shifting it down 30 bits gives 0xFFFFFFFFF. Of course, the same doesn't happen if you shift 0x3 up 28 bits and then down again.</p>\n\n<p>If you actually want to pick out the two bits at bits 31&amp;30 and 29&amp;28 respectively, I would do:</p>\n\n<pre><code>uint32_t res1 = (var &gt;&gt; (15*2)) &amp; 0x3;\nuint32_t res2 = (var &gt;&gt; (14*2)) &amp; 0x3;\n</code></pre>\n\n<p>This also saves one shift, aside from being \"more correct\".</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5973178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBpId.jpg?s=128&g=1", "display_name": "Sudeep Mohanty", "link": "https://stackoverflow.com/users/5973178/sudeep-mohanty"}, "edited": false, "score": 0, "creation_date": 1456303824, "post_id": 35597085, "comment_id": 58879529, "body": "Thank you much! The 0x3U did solve it out. I now understand what was going wrong:)"}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 3, "last_activity_date": 1456303028, "creation_date": 1456303028, "answer_id": 35597085, "question_id": 35596897, "link": "https://stackoverflow.com/questions/35596897/bit-operation-similar-operation-results-in-different-results/35597085#35597085", "title": "Bit operation: Similar operation results in different results", "body": "<p>The type of 0x3 is a signed int. The C standard says:</p>\n\n<blockquote>\n  <p>The result of E1 &lt;&lt; E2 is E1 left-shifted E2 bit positions; vacated bits are filled with zeros. [...] If E1 has a signed type and nonnegative value, and E1 \u00d7 2^E2 is representable in the result type, then that is the resulting value; otherwise, the behavior is undefined.</p>\n</blockquote>\n\n<p>0x3 * 2^30 is not representable in an int.</p>\n\n<p>Change the constant to 0x3U and you'll get correct behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5973178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBpId.jpg?s=128&g=1", "display_name": "Sudeep Mohanty", "link": "https://stackoverflow.com/users/5973178/sudeep-mohanty"}, "edited": false, "score": 0, "creation_date": 1456303784, "post_id": 35597245, "comment_id": 58879508, "body": "This makes perfect sense now! Although, all previous answers did tell the same thing essentially. I accidentally set the sign bit of a signed integer constant. Phew!"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 5973178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBpId.jpg?s=128&g=1", "display_name": "Sudeep Mohanty", "link": "https://stackoverflow.com/users/5973178/sudeep-mohanty"}, "edited": false, "score": 0, "creation_date": 1456303834, "post_id": 35597245, "comment_id": 58879535, "body": "@SudeepMohanty I am  glad.:)"}, {"owner": {"reputation": 2031, "user_id": 2539867, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/3gog5.png?s=128&g=1", "display_name": "Jubatian", "link": "https://stackoverflow.com/users/2539867/jubatian"}, "edited": false, "score": 0, "creation_date": 1456332754, "post_id": 35597245, "comment_id": 58900617, "body": "Just a side-note: To avoid problems creeping in from signed literals where you would expect unsigned math, use the &#39;U&#39; suffix. There is even a related MISRA rule."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1456303539, "creation_date": 1456303539, "answer_id": 35597245, "question_id": 35596897, "link": "https://stackoverflow.com/questions/35596897/bit-operation-similar-operation-results-in-different-results/35597245#35597245", "title": "Bit operation: Similar operation results in different results", "body": "<p>In this expression</p>\n\n<pre><code>(var &amp; (0x3 &lt;&lt; (15*2)) &gt;&gt; (15*2))\n</code></pre>\n\n<p>integer constant <code>0x3</code> has type <code>int</code> . After this operation</p>\n\n<pre><code>(0x3 &lt;&lt; (15*2))\n</code></pre>\n\n<p>the sign bit of the result integer value is set.</p>\n\n<p>After this operation</p>\n\n<pre><code>(0x3 &lt;&lt; (15*2)) &gt;&gt; (15*2)\n</code></pre>\n\n<p>the implementation (it is implementation-defined) propogates the sign bit to the right. So all bits of the result expression are set.</p>\n\n<p>And you will get</p>\n\n<pre><code>var &amp; 0xFFFFFFFF\n</code></pre>\n\n<p>will yield <code>var</code>.</p>\n\n<p>In the second expression the sign bit is not set and after operations</p>\n\n<pre><code>(0x3 &lt;&lt; (14*2)) &gt;&gt; (14*2)\n</code></pre>\n\n<p>you will get <code>0x3</code></p>\n\n<pre><code>0x55555555 &amp; 0x3\n</code></pre>\n\n<p>will yield 1.</p>\n"}], "owner": {"reputation": 41, "user_id": 5973178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBpId.jpg?s=128&g=1", "display_name": "Sudeep Mohanty", "link": "https://stackoverflow.com/users/5973178/sudeep-mohanty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 35597245, "answer_count": 3, "score": 2, "last_activity_date": 1456304061, "creation_date": 1456302494, "last_edit_date": 1456304061, "question_id": 35596897, "link": "https://stackoverflow.com/questions/35596897/bit-operation-similar-operation-results-in-different-results", "title": "Bit operation: Similar operation results in different results", "body": "<p>This following piece of code does not evaluate to what I think it should have:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(void) {\n\n    uint32_t var = 0x55555555;\n    uint32_t res1 = (var &amp; (0x3 &lt;&lt; (15*2)) &gt;&gt; (15*2));\n    uint32_t res2 = (var &amp; (0x3 &lt;&lt; (14*2)) &gt;&gt; (14*2));\n    printf(\"result1 = 0x%08x\\n\", res1);\n    printf(\"result2 = 0x%08x\\n\", res2);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>result1 = 0x55555555</p>\n\n<p>result2 = 0x00000001</p>\n\n<p>Can anyone explain why would result1 and result2 differ when the exact same operation is being performed? What am I doing incorrectly while performing the bit-shifting and bit-wise and?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "edited": false, "score": 0, "creation_date": 1456302248, "post_id": 35596666, "comment_id": 58878574, "body": "while (current2-&gt;y == 0) is OK, what else have you changed?"}], "answers": [{"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": true, "score": 1, "last_activity_date": 1456302747, "last_edit_date": 1456302747, "creation_date": 1456302325, "answer_id": 35596851, "question_id": 35596666, "link": "https://stackoverflow.com/questions/35596666/pointing-dereference-inside-a-struct-error-indirection-requires-pointer-operand/35596851#35596851", "title": "Pointing dereference inside a struct error (indirection requires pointer operand)", "body": "<pre><code>while ((*(*current2))-&gt;next-&gt;y == 0)\n</code></pre>\n\n<p>is incorrect. As error \"indirection requires pointer operand\" says, you can apply -> to pointer but you are doing it on (*(*current2)) which is wrong construct (<code>*current2</code> is object of type <code>struct s_coo</code> but what should second <code>*</code> on that structure object do?).</p>\n\n<p>Solution:</p>\n\n<pre><code>while (((t_coo *)current2-&gt;next)-&gt;y == 0)\n</code></pre>\n\n<p>What <code>((t_coo *)current2-&gt;next)-&gt;y</code> means is</p>\n\n<ol>\n<li>take void pointer <code>current2-&gt;next</code></li>\n<li>and treat it as pointer to <code>t_coo</code> (which is typedef on <code>struct s_coo</code>)</li>\n<li>and then access <code>y</code> member on that casted pointer</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 5607380, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dclQVMrrhKU/AAAAAAAAAAI/AAAAAAAAAx4/dEMtp62EyWk/photo.jpg?sz=128", "display_name": "Rohit Magdum", "link": "https://stackoverflow.com/users/5607380/rohit-magdum"}, "is_accepted": false, "score": 1, "last_activity_date": 1456302380, "creation_date": 1456302380, "answer_id": 35596865, "question_id": 35596666, "link": "https://stackoverflow.com/questions/35596666/pointing-dereference-inside-a-struct-error-indirection-requires-pointer-operand/35596865#35596865", "title": "Pointing dereference inside a struct error (indirection requires pointer operand)", "body": "<p>The error you are getting \"indirection requires pointer operand\" is because you are de-referencing the pointer. \nAlso next pointer is of type void*. You need to type cast it into known pointer type.\nThis should work,</p>\n\n<pre><code>while(((t_coo*)(current2-&gt;next))-&gt;y == 0)\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 35596851, "answer_count": 2, "score": 0, "last_activity_date": 1456302747, "creation_date": 1456301709, "question_id": 35596666, "link": "https://stackoverflow.com/questions/35596666/pointing-dereference-inside-a-struct-error-indirection-requires-pointer-operand", "title": "Pointing dereference inside a struct error (indirection requires pointer operand)", "body": "<p>the code below moves current2 one node too far from where I want to stop:</p>\n\n<pre><code>typedef struct  s_coo\n{\n    int     x;\n    int     y;\n    int     z;\n    void    *next;\n}              t_coo;\n\ntypedef struct  s_env\n{\n    void    *mlx;\n    void    *win;\n    t_coo   **head;\n}               t_env;\n\nint draw_map_y(t_env *e)\n{\n    t_coo   *current;\n    t_coo   *current2;\n\n    current = *(e-&gt;head);\n    current2 = (*(e-&gt;head))-&gt;next;\n\n    while (current2-&gt;y == 0)\n        current2 = current2-&gt;next;\n    return (0);\n}\n</code></pre>\n\n<p>So I tried writing in the while loop:</p>\n\n<pre><code>while ((*(*current2))-&gt;next-&gt;y == 0)\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>while (current2-&gt;y == 0)\n</code></pre>\n\n<p>But I get the error \"indirection requires pointer operand\". Can anybody explain me and tell me how I could write it the right way? I am pretty new to C. Thank you.</p>\n"}, {"tags": ["c", "arrays", "parameter-passing", "command-line-arguments"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456301261, "post_id": 35596448, "comment_id": 58878054, "body": "<code>argv[1]</code> is a pointer to <code>&quot;3&quot;</code>, <code>argv[2]</code> is a pointer to <code>&quot;S2&quot;</code> etc. You should get familiar with strings and pointers."}, {"owner": {"reputation": 562, "user_id": 5894806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/802532109875029/picture?type=large", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/5894806/usman-khan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456301418, "post_id": 35596448, "comment_id": 58878126, "body": "Hi thanks for the comment, I know that argv[1] is 3 and 2 is S2 but how specifically in C can I put all the cards S2, H9 etc into an array. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 562, "user_id": 5894806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/802532109875029/picture?type=large", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/5894806/usman-khan"}, "edited": false, "score": 0, "creation_date": 1456301637, "post_id": 35596601, "comment_id": 58878221, "body": "So should I just use argv instead of creating a new array for the cards?"}, {"owner": {"reputation": 343, "user_id": 1907380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2de44fcde94a734ad3088476a5c783b?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1907380/steve"}, "edited": false, "score": 0, "creation_date": 1456303188, "post_id": 35596601, "comment_id": 58879136, "body": "You could, but then you&#39;re stuck with the characters as the format for the deck. It would be easier to do further processing on the deck if you convert them to numbers or number pairs."}], "tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 0, "last_activity_date": 1456301800, "last_edit_date": 1456301800, "creation_date": 1456301515, "answer_id": 35596601, "question_id": 35596448, "link": "https://stackoverflow.com/questions/35596448/parse-arguments-into-an-array/35596601#35596601", "title": "Parse arguments into an array", "body": "<p>All arguments passed on command line are stored in <code>argv</code> array. <code>argv[0]</code> is always the name of the program and next come your arguments if any (as null-terminated strings).</p>\n\n<p>So assuming you have called this as:</p>\n\n<p>rummy 3 S2 H9 C4</p>\n\n<p>this is what argv contains:</p>\n\n<pre><code>argv[0] = \"rummy\"\nargv[1] = \"3\"\nargv[2] = \"S2\"\nargv[3] = \"H9\"\nargv[4] = \"C4\"\n</code></pre>\n\n<p>Inserting these into array is simple:</p>\n\n<pre><code>char args[5][10];\nstrncpy(args[0], argv[0], 10);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 3, "last_activity_date": 1456302012, "creation_date": 1456302012, "answer_id": 35596759, "question_id": 35596448, "link": "https://stackoverflow.com/questions/35596448/parse-arguments-into-an-array/35596759#35596759", "title": "Parse arguments into an array", "body": "<p>Quick and dirty demonstration:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n  int players = atoi(argv[1]);\n  char deck[52][3];\n  int i, j, pid, cid;\n\n  if (players &gt; 5 || players &lt; 3)\n  {\n    printf(\"%d is not the allowed number of players, min is 3 and max is 5\\n\", players);\n    exit(0);\n  }\n\n  for (i = 0; i &lt; argc - 2; i++)\n  {\n    strcpy(deck[i], argv[i+2]);\n  }\n\n  for (i = 0; i &lt; argc - 2; i++)\n  {\n    printf(\"%s\\n\", deck[i]);\n  }\n}\n</code></pre>\n\n<p>Absolultely no sanity checks are done concerning the input. It's just for demonstration.</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1456302636, "creation_date": 1456302636, "answer_id": 35596948, "question_id": 35596448, "link": "https://stackoverflow.com/questions/35596448/parse-arguments-into-an-array/35596948#35596948", "title": "Parse arguments into an array", "body": "<p>Your int argc is the count of arguments. So you can indeed manually load all of these cards into an array if you so choose. </p>\n\n<p>Assuming you execute the program like this:</p>\n\n<pre><code>example.exe rummy 3 S1 S2 S3 S4 A1 A2 A3 A4\n</code></pre>\n\n<p>You could then read the cards into an array like this (assuming that \"rummy\" is game type and \"3\" is some other control variable, you need to make sure of this)</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\nchar game[10] = argv[0];\nint players = atoi(argv[1]);\nchar deck[52][3]; // an array of strings max lenght 3 (2 characters + required '\\0' terminator\nfor (int i = 0; i &lt; argc - 2; i++) // argc - 2 because we're accessing at i+2 so the last iteration will essentially access the last element\n{\n  strcpy(deck[i], argv[i+2]); // copy into actual array\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Now you got your cards in an array of char arrays called deck. Take note that this is completly only a sample and that it is not recommended for direct use. In an eventual program you must have sanity checks and validation against all possible cases (too many args, too little args, wrong args, etc.</p>\n"}], "owner": {"reputation": 562, "user_id": 5894806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/802532109875029/picture?type=large", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/5894806/usman-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "accepted_answer_id": 35596759, "answer_count": 3, "score": 0, "last_activity_date": 1458182577, "creation_date": 1456301019, "last_edit_date": 1458182577, "question_id": 35596448, "link": "https://stackoverflow.com/questions/35596448/parse-arguments-into-an-array", "title": "Parse arguments into an array", "body": "<p>I am trying to create a simplified version of the Rummy card game. I need to parse in the card abbreviations for example SA is Spades Ace. DT is Diamond 10 etc. I know there is an easier way to do this but that's how my assignment wants it done. </p>\n\n<p>The sample execution would look like</p>\n\n<p>rummy 3 S2 H9 C4... etc. include all 52 cards.</p>\n\n<p>The number in argv[1] is the players in the game. How am I supposed to take the cards starting after the number and put them into an array?</p>\n\n<p>My code so far</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int players = *argv[1];\n    char deck[52];\n    int i, j, pid, cid;\n    if (players &gt; '5' || players &lt; '3')\n    {\n        printf(\"%c is not the allowed number of players, min is 3 and max is 5\\n\",*argv[1]); \n        exit(0);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "tcpclient", "undefined-reference", "dev-c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1456300792, "post_id": 35596362, "comment_id": 58877805, "body": "You forgot to link with the Ws2_32.lib library"}, {"owner": {"reputation": 175, "user_id": 4940710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJHak.jpg?s=128&g=1", "display_name": "Dat Tan Nguyen", "link": "https://stackoverflow.com/users/4940710/dat-tan-nguyen"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456317732, "post_id": 35596362, "comment_id": 58889557, "body": "How to link with the Ws2_32.lib library ? I use Dev C++ IDE."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456318340, "post_id": 35596362, "comment_id": 58889970, "body": "Look at the dev-c++ documentation."}, {"owner": {"reputation": 1774, "user_id": 1768052, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a8cc1bd42843e81129f74bf4c43ca0fe?s=128&d=identicon&r=PG", "display_name": "Mohd Shahril", "link": "https://stackoverflow.com/users/1768052/mohd-shahril"}, "edited": false, "score": 0, "creation_date": 1456401082, "post_id": 35596362, "comment_id": 58934476, "body": "@Nguyen Tan Dat, I had edited my answer with guide on how to use ws2_32.lib into your Dev C++ IDE :)"}], "answers": [{"comments": [{"owner": {"reputation": 1774, "user_id": 1768052, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a8cc1bd42843e81129f74bf4c43ca0fe?s=128&d=identicon&r=PG", "display_name": "Mohd Shahril", "link": "https://stackoverflow.com/users/1768052/mohd-shahril"}, "reply_to_user": {"reputation": 175, "user_id": 4940710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJHak.jpg?s=128&g=1", "display_name": "Dat Tan Nguyen", "link": "https://stackoverflow.com/users/4940710/dat-tan-nguyen"}, "edited": false, "score": 0, "creation_date": 1456651423, "post_id": 35597080, "comment_id": 59039365, "body": "@Nguyen Tan Dat, if my answer helped you, then you click <code>Accept</code> button to tick that this question have been answered :)"}], "tags": [], "owner": {"reputation": 1774, "user_id": 1768052, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a8cc1bd42843e81129f74bf4c43ca0fe?s=128&d=identicon&r=PG", "display_name": "Mohd Shahril", "link": "https://stackoverflow.com/users/1768052/mohd-shahril"}, "is_accepted": false, "score": 4, "last_activity_date": 1456401009, "last_edit_date": 1456401009, "creation_date": 1456303014, "answer_id": 35597080, "question_id": 35596362, "link": "https://stackoverflow.com/questions/35596362/c-socket-programming-undefined-reference/35597080#35597080", "title": "C-Socket Programming-&quot;undefined reference&quot;", "body": "<p>From my observation, you're trying to build Winsock application with MinGW.</p>\n\n<p>MinGW, by default, don't link Winsock library (which is <strong><em>Ws2_32.lib</em></strong>) automatically, so you need to manually tell compiler by using <strong>-l</strong> flag plus name of your library.</p>\n\n<pre><code>gcc winsock.c -o winsock.exe -lws2_32\n</code></pre>\n\n<p>Edit : If you're IDE which are using MinGW suite (Code::Block, DevC++, etc), you can try to find option where you can manually add compiler flags, and add <strong>-lws2_32</strong> into on of your compiler flag</p>\n\n<hr>\n\n<p>Edit : Based on your comment above, so you're using Dev-C++ IDE, below is guide how you can use ws2_32.lib library inside your IDE</p>\n\n<ol>\n<li><p>Go to top menu <code>Tools</code>, and click <code>Compiler Options...</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/yEqn3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yEqn3.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>Inside <code>Compiler Options</code>, tick checkbox <code>Add the following commands when calling the compiler</code></p></li>\n<li><p>Put compiler flag <strong>-lws2_32</strong> below into the textarea</p>\n\n<p><a href=\"https://i.stack.imgur.com/Pqo8a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pqo8a.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>Press <strong>OK</strong></p></li>\n</ol>\n\n<p>Try again to compile your source code. If nothing go wrong, your program should be compiled successfully.</p>\n\n<p>Regards</p>\n"}], "owner": {"reputation": 175, "user_id": 4940710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJHak.jpg?s=128&g=1", "display_name": "Dat Tan Nguyen", "link": "https://stackoverflow.com/users/4940710/dat-tan-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2531, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456401009, "creation_date": 1456300726, "last_edit_date": 1456318354, "question_id": 35596362, "link": "https://stackoverflow.com/questions/35596362/c-socket-programming-undefined-reference", "title": "C-Socket Programming-&quot;undefined reference&quot;", "body": "<p>I am a beginner in socket programming in C. I got the code in the book and when I compiled, these are following error with undefined reference. Please give a tips to correct this!Thank you!</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;winsock.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#define RCVBUFSIZE 32\nint main(int argc, char *argv[]){\nint sock;\nstruct sockaddr_in echoServAddr;\nunsigned short echoServPort;\nchar *servIP;\nchar *echoString;\nchar echoBuffer[RCVBUFSIZE];\nunsigned int echoStringLen;\nint bytesRcvd, totalBytesRcvd;\nif(argc&gt;3 || argc&gt;4){\n    printf(\"Usage: %s &lt;Server IP&gt; &lt;Echo Word&gt; [&lt;Echo Port&gt;\\n\",argv[0]);\n    exit(1);\n}\nservIP=argv[1];\nechoString=argv[2];\nif(argc==4){\n    echoServPort=atoi(argv[3]);\n}\nelse{\n    echoServPort=7;\n}\nif((sock=socket(PF_INET,SOCK_STREAM,IPPROTO_TCP))&lt;0){\n    printf(\"socket() failed!\");\n}\nmemset(&amp;echoServAddr,0,sizeof(echoServAddr));\nechoServAddr.sin_family=AF_INET;\nechoServAddr.sin_addr.s_addr=inet_addr(servIP);\nechoServAddr.sin_port=htons(echoServPort);\nif (connect(sock, (struct sockaddr *) &amp;echoServAddr, sizeof(echoServAddr)) &lt; 0){\n    printf(\"connect() failed!\");\n}\nechoStringLen=strlen(echoString);\nif(send(sock,echoString, echoStringLen,0)!=echoStringLen){\n    printf(\"send() send maximum bytes than expected\");\n}\ntotalBytesRcvd=0;\nprintf(\"Received\");\nwhile(totalBytesRcvd&lt;echoStringLen){\n    if((bytesRcvd=recv(sock,echoBuffer,RCVBUFSIZE-1,0))&lt;=0){\n        printf(\"recv() failed!\");\n    }\n    totalBytesRcvd+=bytesRcvd;\n    echoBuffer[bytesRcvd]='\\0';\n    printf(echoBuffer);\n}\nclose(sock);\nexit(1);    \n}\n</code></pre>\n\n<p>I got errors as follow:</p>\n\n<pre><code>In function `main':\n        client.cpp:34: undefined reference to `_socket@12'\n        client.cpp:39: undefined reference to `_inet_addr@4'\n        client.cpp:40: undefined reference to `_htons@4'\n        client.cpp:41: undefined reference to `_connect@12'\n        client.cpp:45: undefined reference to `_send@16'\n        client.cpp:51: undefined reference to `_recv@16'\n        collect2.exe    [Error] ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c", "linux", "suse"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1456301242, "post_id": 35596220, "comment_id": 58878043, "body": "Hum. How is <code>stdout</code> defined in your C standard library implementation? What it its type?"}, {"owner": {"reputation": 111, "user_id": 5820730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41103f66511a6a3e726150c6c924d77c?s=128&d=identicon&r=PG&f=1", "display_name": "hrl", "link": "https://stackoverflow.com/users/5820730/hrl"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1456301522, "post_id": 35596220, "comment_id": 58878175, "body": "I doesn&#39;t look so careful.Maybe it&#39;s that <code>extern struct _IO_FILE *stdout;         &#47;* Standard output stream.  *&#47;</code>.  By the way , I use <code>c++</code> and compile, it compiled successful."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1456309860, "post_id": 35596220, "comment_id": 58883844, "body": "@hrl This question is highly relevant to the point some would probably say your question here is a duplicate of it:  <a href=\"http://stackoverflow.com/questions/3025050/error-initializer-element-is-not-constant-when-trying-to-initialize-variable-w\" title=\"error initializer element is not constant when trying to initialize variable w\">stackoverflow.com/questions/3025050/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 5820730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41103f66511a6a3e726150c6c924d77c?s=128&d=identicon&r=PG&f=1", "display_name": "hrl", "link": "https://stackoverflow.com/users/5820730/hrl"}, "edited": false, "score": 0, "creation_date": 1456303341, "post_id": 35596621, "comment_id": 58879235, "body": "I know your edit is correct.But I want to seek a way to compile it successfully without initializing it in <code>main()</code>.Because that was a little pieces of the program which I should transplant to Suse from AIX. It is hard to me to modify the real code as you say."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 5, "last_activity_date": 1456305632, "last_edit_date": 1456305632, "creation_date": 1456301566, "answer_id": 35596621, "question_id": 35596220, "link": "https://stackoverflow.com/questions/35596220/file-stdout-error-initializer-element-is-not-constant/35596621#35596621", "title": "FILE * ..=stdout : Error initializer element is not constant", "body": "<p>The standard does not require <code>stdin</code>, <code>stdout</code> and <code>stderr</code> to be constants.</p>\n\n<p>The draft n1256 for C99 says in 7.19.1 Input/output &lt;stdio.h&gt;</p>\n\n<blockquote>\n  <p>The header  declares ...<br/>\n  ...<br/>\n  TMP_MAX<br/>\n  which expands to an integer <strong>constant expression</strong> ...</p>\n  \n  <p>stderr\n  stdin\n  stdout<br/>\n  which are <strong>expressions</strong> of type \u2018\u2018pointer to FILE\u2019\u2019 ...</p>\n</blockquote>\n\n<p>(emphasize mine)</p>\n\n<p>It is explicitely stated that some other values are constant, whereas nothing is said for <code>stdin</code>, <code>stdout</code> and <code>stderr</code></p>\n\n<p>So you must put initialization in main:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nFILE * hw;\n\nint main(void)\n{\n        hw = stdout;\n        ...\n        return 0;\n}\n</code></pre>\n\n<p>In AIX standard library, <code>stdout</code> happens to be a constant, but it is just an implementation detail and you cannot rely on that, as it could break in any newer version.</p>\n\n<p>But you should not rely either on <code>stdout</code> being a variable (nor even a lvalue), because it is also an implementation detail in GCC library.</p>\n\n<hr>\n\n<p>If you cannot change much of your code, and just need a GCC hack to make it compilable, you could try to use the gcc <em>constructor attribute</em> extension. </p>\n\n<p>Extract from <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.3.0/gcc/Function-Attributes.html#Function-Attributes\" rel=\"nofollow\">gcc documentation</a></p>\n\n<blockquote>\n  <p>6.31 Declaring Attributes of Functions</p>\n  \n  <p>In GNU C, you declare certain things about functions called in your program which help the compiler optimize function calls and check your code more carefully.</p>\n  \n  <p>The keyword <code>__attribute__</code> allows you to specify special attributes when making a declaration. This keyword is followed by an attribute specification inside double parentheses. The following attributes are currently defined for functions on all targets: ... ,<strong>constructor</strong>, ...<br>\n  ...<br/>\n  The constructor attribute causes the function to be called automatically before execution enters main () ...</p>\n</blockquote>\n\n<p>So you could use:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nFILE * hw;\n\nvoid initHw(void) __attribute__((constructor)) {\n    hw = stdout;\n}\n\nint main(void)\n{\n        return 0;\n}\n</code></pre>\n\n<p>But <strong>BEWARE</strong>: it is a gcc extension, meaning that your code is <strong>not</strong> correct C.</p>\n"}], "owner": {"reputation": 111, "user_id": 5820730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41103f66511a6a3e726150c6c924d77c?s=128&d=identicon&r=PG&f=1", "display_name": "hrl", "link": "https://stackoverflow.com/users/5820730/hrl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2191, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1456315155, "creation_date": 1456300285, "question_id": 35596220, "link": "https://stackoverflow.com/questions/35596220/file-stdout-error-initializer-element-is-not-constant", "title": "FILE * ..=stdout : Error initializer element is not constant", "body": "<p>My C code was as following:</p>\n\n<pre><code>[Linux:/si/usr/hrl]vi test.c    \n\n#include &lt;stdio.h&gt;\n\nFILE * hw = stdout;\n\nint main(void)\n{\n        return 0;\n}\n</code></pre>\n\n<p>When I compile on SUSE , it make the error like that:</p>\n\n<pre><code>[Linux:/si/usr/hrl]cc test.c -o test\ntest.c:3: error: initializer element is not constant\n</code></pre>\n\n<p>I have a look for the header file <code>stdio.h</code> and find that <code>stdout</code> seems to have be defined as a constant. So why the error produce?By the way, I compile the same code on AIX ,it results of success. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1456300935, "post_id": 35596170, "comment_id": 58877867, "body": "10pt is exactly the size what you want it to be, depending on what DPI you want and the DPI of the LCD. Why do you want 10pt? If you don&#39;t even know what size it will be on that LCD? And just think: how could a size be the width, when letters like l and w have completely different widths."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1456300968, "post_id": 35596170, "comment_id": 58877887, "body": "That depends on the size of the pixel. One point is 1/72 inch, the height of the font."}, {"owner": {"reputation": 15, "user_id": 5134053, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d03467a10c43ad7e0fbd71ef4d4bee88?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi S", "link": "https://stackoverflow.com/users/5134053/ravi-s"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1456304650, "post_id": 35596170, "comment_id": 58880054, "body": "@SamiKuhmonen in embedded system programming especially when you program LCD you consider both height and width of the text."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1456305491, "post_id": 35596170, "comment_id": 58880621, "body": "@RaviS In any graphical programming you consider both. My comment still stands, characters are different widths so a constant cannot refer to the width, unless it&#39;s a monospace font."}], "answers": [{"tags": [], "owner": {"reputation": 26053, "user_id": 2082964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Iybex.jpg?s=128&g=1", "display_name": "Chris Maes", "link": "https://stackoverflow.com/users/2082964/chris-maes"}, "is_accepted": false, "score": 2, "last_activity_date": 1456303661, "last_edit_date": 1492087572, "creation_date": 1456303661, "answer_id": 35597286, "question_id": 35596170, "link": "https://stackoverflow.com/questions/35596170/graphical-lcd-coding-using-c/35597286#35597286", "title": "graphical LCD coding using c", "body": "<ul>\n<li>a <strong>point</strong> is a physical distance, equal to 1/72 inch.</li>\n<li>a <strong>pixel</strong> is a picture element.</li>\n</ul>\n\n<p>How many pixels are in one point depends on the resolution of your screen. Imagine you want to draw a 1cm line on your screen, then the number of pixels will depend on the resolution of your screen.</p>\n\n<p><strong>13px</strong> represents the height of the characters in your font, you can take a look at <a href=\"https://graphicdesign.stackexchange.com/a/4074\">this answer</a></p>\n"}], "owner": {"reputation": 15, "user_id": 5134053, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d03467a10c43ad7e0fbd71ef4d4bee88?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi S", "link": "https://stackoverflow.com/users/5134053/ravi-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456303661, "creation_date": 1456300048, "question_id": 35596170, "link": "https://stackoverflow.com/questions/35596170/graphical-lcd-coding-using-c", "title": "graphical LCD coding using c", "body": "<p>I want to use a text size of 10pt on Graphical LCD, I searched for the 10pt on  net but I found only 10pt equals to 13px but I'm not able to understand what this 13px represents either width or height?\n If anyone knows how many pixels contains a 10pt sized font please let me know and also the conversion from pt to px(both width and height)</p>\n"}, {"tags": ["c", "rank"], "comments": [{"owner": {"reputation": 1516, "user_id": 2442877, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YiIWC.jpg?s=128&g=1", "display_name": "MASh", "link": "https://stackoverflow.com/users/2442877/mash"}, "edited": false, "score": 1, "creation_date": 1456297740, "post_id": 35595441, "comment_id": 58876346, "body": "Edit the question and give minimum understandable code here so that others can look through and you may get help,"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 1, "creation_date": 1456298045, "post_id": 35595441, "comment_id": 58876466, "body": "what do you want to achieve with this code?"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 4862558, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/0f88a7cc0241051c16b02b656f190d07?s=128&d=identicon&r=PG&f=1", "display_name": "Yanyan", "link": "https://stackoverflow.com/users/4862558/yanyan"}, "edited": false, "score": 0, "creation_date": 1456423520, "post_id": 35595758, "comment_id": 58951435, "body": "And I have an additional question. It there are two same numbers, which means the data has ties, take 2 of 3.3 for example. Then the rank of these two 3.3 will be 1.5, how can I deal with it? I tried to add an if condition before the else {}, but it does not work. Thank you."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 169, "user_id": 4862558, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/0f88a7cc0241051c16b02b656f190d07?s=128&d=identicon&r=PG&f=1", "display_name": "Yanyan", "link": "https://stackoverflow.com/users/4862558/yanyan"}, "edited": false, "score": 0, "creation_date": 1456423872, "post_id": 35595758, "comment_id": 58951638, "body": "I&#39;m not aware of a nomenclature that uses rational numbers for ranks. The current code assigns 1 to the first occurrence of 3.3 and 2 to the second. That reflects that rank means position in a sorted array. Sometimes, equal elements share a rank and subsequent ranks then leave a gap, e.g. ranks 1, 1, 3, 4, ... for an array with two occurrences. Off the top of my head I don&#39;t know how to solve this."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 169, "user_id": 4862558, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/0f88a7cc0241051c16b02b656f190d07?s=128&d=identicon&r=PG&f=1", "display_name": "Yanyan", "link": "https://stackoverflow.com/users/4862558/yanyan"}, "edited": false, "score": 0, "creation_date": 1456424270, "post_id": 35595758, "comment_id": 58951877, "body": "You could always make a second pass and collate equal values."}, {"owner": {"reputation": 169, "user_id": 4862558, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/0f88a7cc0241051c16b02b656f190d07?s=128&d=identicon&r=PG&f=1", "display_name": "Yanyan", "link": "https://stackoverflow.com/users/4862558/yanyan"}, "edited": false, "score": 0, "creation_date": 1456424716, "post_id": 35595758, "comment_id": 58952134, "body": "Thank you so much. I will try."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 4, "last_activity_date": 1456298655, "creation_date": 1456298655, "answer_id": 35595758, "question_id": 35595441, "link": "https://stackoverflow.com/questions/35595441/give-ranks-to-a-list-without-sorting-in-c/35595758#35595758", "title": "Give ranks to a list without sorting in C", "body": "<p>Your algorithm works, but the ranking isn't complete after all values have been processed. Therefore, you can't print the ranks as you go. You must print the ranks after your algorihm is done in a separate loop:</p>\n\n<pre><code>    double x[8] = {30, 71.51, 3.3, 87.44, 53.42, 63.16, 89.1, 25.75};\n    int rank[8] = {0};\n    int i, j;\n\n    for (i = 0; i &lt; 8; i++) {\n        int curRank = 1;\n\n        for (j = 0; j &lt; i; j++) {\n            if (x[i] &gt; x[j]) {\n                curRank++;\n            } else {\n                rank[j]++;\n            }\n        }\n\n        rank[i] = curRank;\n    }\n\n    for (i = 0; i &lt; 8; i++) {\n        printf(\"%lf %d\\n\", x[i], rank[i]);\n    }\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4862558, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/0f88a7cc0241051c16b02b656f190d07?s=128&d=identicon&r=PG&f=1", "display_name": "Yanyan", "link": "https://stackoverflow.com/users/4862558/yanyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1040, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456298655, "creation_date": 1456297528, "question_id": 35595441, "link": "https://stackoverflow.com/questions/35595441/give-ranks-to-a-list-without-sorting-in-c", "title": "Give ranks to a list without sorting in C", "body": "<p>I try to give the rank to the data, but the result is not what i expected.My for {} is as below :</p>\n\n<pre><code>    for(i = 0; i &lt; 100; i++) \n{\n    int curRank=1;\n\n    for (j = 0; j &lt; i; j++)  \n                              //  add x[i] to list, need to update the ranks. \n    {\n        if (x[i] &gt; x[j]) \n        {                      // Update rank of x[i]\n            curRank++;\n        } \n        else \n        {                  // A number smaller than x[j] has appeared. Update rank of x[j]\n            rank[j]++;\n        }\n    }\n\n    rank[i]=curRank;\n    printf(\"%lf %d\\n\", x[i],rank[i]);\n}\n</code></pre>\n\n<p>And the result turns out like this:</p>\n\n<pre><code>30.000000 1\n71.510000 2\n 3.300000 1\n87.440000 4\n53.420000 3\n63.160000 4\n89.100000 7\n25.750000 2\n.......\n</code></pre>\n\n<p>Clearly, it is wrong. Could anyone help me with this? Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1456297559, "post_id": 35595389, "comment_id": 58876247, "body": "Any reason for re-inventing <code>strstr()</code>?"}, {"owner": {"reputation": 53, "user_id": 3638811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlxJq.jpg?s=128&g=1", "display_name": "rbecca", "link": "https://stackoverflow.com/users/3638811/rbecca"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1456297935, "post_id": 35595389, "comment_id": 58876422, "body": "I have only ever used strstr() to return a substring; I wasn&#39;t quite sure how to implement it so that the substring would be replaced with a given char. How would you have implemented this with strstr()?"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456299079, "post_id": 35595389, "comment_id": 58876950, "body": "(Roughly) Find first substring index in string. find substring lenght. Make sure you have enough space in string if the part you&#39;re replacing with is bigger then that (might need to account for that in the declarations or malloc/realloc appropiately), remove the substring. Move the rest of the string so the new substring fits in, then place the new one in. Rinse and repeat as necessary."}], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 2014074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3581980be8267706f5224b37c0f1800?s=128&d=identicon&r=PG", "display_name": "n3rd4n1", "link": "https://stackoverflow.com/users/2014074/n3rd4n1"}, "is_accepted": false, "score": 1, "last_activity_date": 1456300463, "creation_date": 1456300463, "answer_id": 35596271, "question_id": 35595389, "link": "https://stackoverflow.com/questions/35595389/efficiently-replace-a-substring-in-a-string/35596271#35596271", "title": "Efficiently replace a substring in a string", "body": "<p>How about this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char **argv)\n{\n    char string[] = \"HELLO hello WORLD world HELLO hello ell\";\n    char substring[] = \"ell\";\n    int stringLength = strlen(string);\n    int substringLength = strlen(substring);\n\n    printf(\"Before: %s\\n\", string);\n\n    if(substringLength &lt;= stringLength)\n    {\n        int i;\n        int j;\n\n        for(i = 0, j = stringLength - substringLength + 1; i &lt; j; )\n        {\n            if(memcmp(&amp;string[i], substring, substringLength) == 0)\n            {\n                memset(&amp;string[i], '~', substringLength);\n                i += substringLength;\n            }\n            else\n            {\n                i++;\n            }\n        }\n    }\n\n    printf(\"After: %s\\n\", string);\n\n    return 0;\n}\n</code></pre>\n\n<p>Key ideas are:</p>\n\n<ol>\n<li>You only need to scan the string (stringLength - substringLength) times</li>\n<li>You can use functions from string.h to do the comparison and to replace the substring</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1774, "user_id": 1768052, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a8cc1bd42843e81129f74bf4c43ca0fe?s=128&d=identicon&r=PG", "display_name": "Mohd Shahril", "link": "https://stackoverflow.com/users/1768052/mohd-shahril"}, "is_accepted": true, "score": 4, "last_activity_date": 1593192135, "last_edit_date": 1593192135, "creation_date": 1456301305, "answer_id": 35596534, "question_id": 35595389, "link": "https://stackoverflow.com/questions/35595389/efficiently-replace-a-substring-in-a-string/35596534#35596534", "title": "Efficiently replace a substring in a string", "body": "<p>Your code seems like you're trying to re-inventing your own wheel.</p>\n<p>By using standard C functions, which is <a href=\"http://en.cppreference.com/w/c/string/byte/strstr\" rel=\"nofollow noreferrer\">strstr()</a> and <a href=\"http://en.cppreference.com/w/c/string/byte/memset\" rel=\"nofollow noreferrer\">memset()</a>, you can achieve the same result as you expected.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar string[] = &quot;foobar foobar foobar&quot;;\nchar substr[] = &quot;foo&quot;;\nchar replace = '~';\n\nint main() {\n\n    int substr_size = strlen(substr);\n\n    // Make a copy of your `string` pointer.\n    // This is to ensure we can safely modify this pointer value, without 'touching' the original one.\n    char *ptr = string;\n\n    // while true (infinite loop)\n    while(1) {\n\n        // Find pointer to next substring\n        ptr = strstr(ptr, substr);\n\n        // If no substring found, then break from the loop\n        if(ptr == NULL) { break; }\n\n        // If found, then replace it with your character\n        memset(ptr, replace, substr_size);\n\n        // iIncrement our string pointer, pass replaced substring\n        ptr += substr_size;\n    }\n\n    printf(&quot;%s\\n&quot;, string);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 3444309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hrcOp.jpg?s=128&g=1", "display_name": "Sean Comeau", "link": "https://stackoverflow.com/users/3444309/sean-comeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1456302130, "creation_date": 1456302130, "answer_id": 35596797, "question_id": 35595389, "link": "https://stackoverflow.com/questions/35595389/efficiently-replace-a-substring-in-a-string/35596797#35596797", "title": "Efficiently replace a substring in a string", "body": "<p>You can copy the new string in place. If you want to support insertion of longer strings you will need to manage memory with malloc()/realloc(). If you want to support insertion of smaller strings you'll need to advance the pointer to the beginning by the length of the replacement string, copy the rest of the string to that new location, then zero the new end of the string. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;err.h&gt;\n\nint main(int argc, char **argv)\n{   \n    char *str = strdup(\"The fox jumps the dog\\n\");\n    char *search = \"fox\";\n    char *replace = \"cat\";\n    size_t replace_len = strlen(replace);\n    char *begin = strstr(str, search);\n\n    if (begin == NULL)  \n        errx(1, \"substring not found\");\n\n    if (strlen(begin) &lt; replace_len)\n        errx(1, \"replacement too long\");\n\n    printf(\"%s\", str);\n    memcpy(begin, replace, replace_len);\n    printf(\"%s\", str);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3638811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlxJq.jpg?s=128&g=1", "display_name": "rbecca", "link": "https://stackoverflow.com/users/3638811/rbecca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2540, "favorite_count": 0, "accepted_answer_id": 35596534, "answer_count": 3, "score": 2, "last_activity_date": 1593192135, "creation_date": 1456297371, "last_edit_date": 1593192030, "question_id": 35595389, "link": "https://stackoverflow.com/questions/35595389/efficiently-replace-a-substring-in-a-string", "title": "Efficiently replace a substring in a string", "body": "<p>I have made two functions that find a substring index and substitute that substring in the string. I'm glad I jury rigged this at all, given that similar questions previously asked were never answered/marked as closed without any help. Is there a cleaner method?</p>\n<pre><code>void destroy_substr(int index, int len)\n{\n    int i;\n\n    for (i = index; i &lt; len; i++)\n    {\n        string[i] = '~';\n    }\n}\n\n\nvoid find_substr_index(char* substr)\n{\n    int i;\n    int j;\n    int k;\n    int count;\n    int len = strlen(substr);\n\n    for (i = 0; i &lt; strlen(string); i++)\n    {\n        if (string[i] == substr[0])\n        {\n            for(j = i, k = 0; k &lt; len; j++, k++)\n            {\n                if (string[j] == substr[k])\n                {\n                    count++;\n                }\n                if (count == len)\n                    destroy_substr((j - len + 1), len);\n            }\n            j = 0;\n            k = 0;\n            count = 0;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "time", "timer", "sleep"], "comments": [{"owner": {"reputation": 508, "user_id": 1659500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dc77cc2498bea2b49cab73be68bd0?s=128&d=identicon&r=PG", "display_name": "&#216;ystein Sch&#248;nning-Johansen", "link": "https://stackoverflow.com/users/1659500/%c3%98ystein-sch%c3%b8nning-johansen"}, "edited": false, "score": 0, "creation_date": 1456296398, "post_id": 35595038, "comment_id": 58875676, "body": "Sounds to me like you actually need a event library. Check out <a href=\"http://www.libevent.org\" rel=\"nofollow noreferrer\">libevent</a>, or <a href=\"http://libev.schmorp.de/\" rel=\"nofollow noreferrer\">libev</a>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1456297249, "post_id": 35595038, "comment_id": 58876082, "body": "Even if you get your method to work, it&#39;s no better than using <code>sleep</code>. A process that spins in an infinite loop can still be suspended by the OS to allow other processes to run."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456311369, "post_id": 35595038, "comment_id": 58884878, "body": "What is your problem with Sleep()?  Note that there are a lot of clueless people spreading FUD about such calls.  You are almost certainly trying to fix a problem that does not exist.  How accurate do you need your interval?"}], "answers": [{"tags": [], "owner": {"reputation": 166, "user_id": 5819794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3e2fb00d94ad98d4c8df18a3b3e532?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/5819794/ash"}, "is_accepted": false, "score": 0, "last_activity_date": 1456297943, "last_edit_date": 1456297943, "creation_date": 1456297432, "answer_id": 35595401, "question_id": 35595038, "link": "https://stackoverflow.com/questions/35595038/how-to-implement-a-n-seconds-timer-using-timenull-and-while-loop-instead-of-sl/35595401#35595401", "title": "How to implement a N seconds timer using time(NULL) and while loop instead of sleep(N)?", "body": "<p>My suggestion is to create a thread which should write some data to a pipe for every one second.</p>\n\n<p>Clearly the work of the thread is to just add some date to pipe for every one second. So use while loop to add data for second.</p>\n\n<p>Use can use sleep(1) or use any looping techniques to calculate the time.</p>\n\n<p>In the main function, put the read call (for reading the pipe) in a while loop.</p>\n\n<p>If something is read to the pipe, which means one second was completed. and then inside the while loop you can add the code for your task.\nOnce your task is completed then the process will wait until it reads from the pipe.</p>\n\n<p>You can change the timer in the thread as you need, which can be used as N seconds timer. </p>\n\n<p>As the time is completed your task will start in the main.</p>\n\n<p>I guess this technique can be helpful.</p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 2014074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3581980be8267706f5224b37c0f1800?s=128&d=identicon&r=PG", "display_name": "n3rd4n1", "link": "https://stackoverflow.com/users/2014074/n3rd4n1"}, "is_accepted": false, "score": 1, "last_activity_date": 1456302551, "creation_date": 1456302551, "answer_id": 35596914, "question_id": 35595038, "link": "https://stackoverflow.com/questions/35595038/how-to-implement-a-n-seconds-timer-using-timenull-and-while-loop-instead-of-sl/35596914#35596914", "title": "How to implement a N seconds timer using time(NULL) and while loop instead of sleep(N)?", "body": "<p>Just trying to fix your code, you can do it like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char **argv)\n{\n    time_t previousTime = time(NULL);\n    time_t interval = 3;\n    time_t currentTime;\n\n    while(1)\n    {\n        if((time(&amp;currentTime) - previousTime) &gt;= interval)\n        {\n            printf(\"%ld\\n\", currentTime);\n            previousTime += interval;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>You can change <code>interval</code> as desired. Now, this doesn't assure you that at exactly <code>interval</code> seconds <code>printf</code> will execute due to other factors. What this assures you though is that each execution of <code>printf</code> will never drift as time passes.</p>\n\n<p>Remember, doing a proper interval timer is more involved than this simple solution.</p>\n"}], "owner": {"reputation": 7341, "user_id": 4822120, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cb73b37b475eb2c8c710875ac9d842ba?s=128&d=identicon&r=PG&f=1", "display_name": "ggrr", "link": "https://stackoverflow.com/users/4822120/ggrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456302551, "creation_date": 1456296092, "last_edit_date": 1456296493, "question_id": 35595038, "link": "https://stackoverflow.com/questions/35595038/how-to-implement-a-n-seconds-timer-using-timenull-and-while-loop-instead-of-sl", "title": "How to implement a N seconds timer using time(NULL) and while loop instead of sleep(N)?", "body": "<p>for example, if I want to implement a timer which executes codes per second, I can use sleep(1):</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\nint main(){\n    while(1){\n        printf(\"%ld\\n\",time(NULL));\n        fflush(stdout);\n        sleep(1);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But the total time elapsed of sleep(1) and other codes may be over 1 second actually, so I use while loop instead:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\nint main(){\n    time_t t=0;\n    while(1){\n        if(t!=time(NULL)){\n            t=time(NULL);\n            printf(\"%ld\\n\",t);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>but the problem is, in this program the codes in loop executes per second, how about if I want to execute the codes per N (e.g.:3,4...) seconds? </p>\n\n<p>I tried it but not works:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\nint main(){\n    time_t t=0;\n    while(1){\n        if((t-time(NULL))%3==0){\n            t=time(NULL);\n            printf(\"%ld\\n\",t);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>it executes codes in loop multiple times until the second that %3==0 is passed.</p>\n\n<p>How should I modify it? Or in other words, what is the general solution to implement timers using this method for N seconds?</p>\n"}, {"tags": ["c++", "c", "ubuntu", "makefile"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1456296864, "post_id": 35595019, "comment_id": 58875899, "body": "Did you pick those flags for the compiler? Is the compiler version you are using suitable/compatible/recommended by/with the sources you are compiling?"}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1456296933, "post_id": 35595019, "comment_id": 58875925, "body": "i don&#39;t know about this, how to check it? can you tell me briefly?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1456297250, "post_id": 35595019, "comment_id": 58876083, "body": "Post <code>status.h</code> and <code>chirond.c</code> if possible."}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "edited": false, "score": 0, "creation_date": 1456297372, "post_id": 35595019, "comment_id": 58876150, "body": "how to do it? please tell me briefly? you need code?"}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1456297533, "post_id": 35595019, "comment_id": 58876232, "body": "@LPs you need chirond.c?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1456297588, "post_id": 35595019, "comment_id": 58876256, "body": "Add your code. Edit your question and add it."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1456297710, "post_id": 35595019, "comment_id": 58876326, "body": "@LPs: I don&#39;t think it&#39;s OP&#39;s code - it&#39;s available here: <a href=\"https://github.com/bitlair/siahsd/blob/master/status.h\" rel=\"nofollow noreferrer\">github.com/bitlair/siahsd/blob/master/status.h</a> I have a feeling the compiler isn&#39;t coping with variable arg macros - perhaps too old?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1456298063, "post_id": 35595019, "comment_id": 58876469, "body": "@MatsPetersson I got it, thx. <code>#define DEBUG(level, args...) debug(level, __location__, __FUNCTION__, args)</code> must be compiled with GCC only, because of this is a <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.2.1/gcc/Variadic-Macros.html\" rel=\"nofollow noreferrer\">GCC extension</a>."}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "edited": false, "score": 0, "creation_date": 1456298211, "post_id": 35595019, "comment_id": 58876533, "body": "so what&#39;s solution, please tell me or you need code?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1456298307, "post_id": 35595019, "comment_id": 58876573, "body": "I&#39;m guessing the compiler you are using is older than the version suggested... What version of gcc are you using?"}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1456298400, "post_id": 35595019, "comment_id": 58876627, "body": "gcc version 4.7.2 (Debian 4.7.2-5)   @MatsPetersson"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1456298402, "post_id": 35595019, "comment_id": 58876631, "body": "Or too new, if it is newer than 4 years old, perhaps?"}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "edited": false, "score": 0, "creation_date": 1456298556, "post_id": 35595019, "comment_id": 58876694, "body": "which version you suggest?"}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1456298745, "post_id": 35595019, "comment_id": 58876778, "body": "@MatsPetersson please tell me how to solve this?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1456298752, "post_id": 35595019, "comment_id": 58876782, "body": "I would just change the -std=c99 to -std=gnu99 (or -std=c11). Or find a more recent version of the code, that has appropriate options for a compiler that is in use today (I personally would suggest 4.9 or later of gcc, or clang 3.6 or later - only because I&#39;m using those - however, the error won&#39;t be fixed by using a newer compiler, I&#39;m reasonably sure). Note that I&#39;m just guessing based on looking at the error and the command line."}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "edited": false, "score": 0, "creation_date": 1456298933, "post_id": 35595019, "comment_id": 58876878, "body": "where have to change -std=c99 to -std=gnu99"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1456299200, "post_id": 35595019, "comment_id": 58877023, "body": "I don&#39;t quite know - somewhere in the <code>waf</code> directory, I guess - like I said, I&#39;m not familiar with either the package or the build system it uses, just analyzing what is written in your post, along with looking at the line in the source, knowing what the compiler can do, etc."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1456301013, "post_id": 35595019, "comment_id": 58877910, "body": "Into file <code>wscrpt</code> at <code>line 94</code>"}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1456301137, "post_id": 35595019, "comment_id": 58877987, "body": "@LPs please look at code i added, i f any issue please tell me."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1456301176, "post_id": 35595019, "comment_id": 58878003, "body": "Try to do what @MatsPetersson wrote."}, {"owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1456301854, "post_id": 35595019, "comment_id": 58878346, "body": "@LPs changing -std not working?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1456303315, "post_id": 35595019, "comment_id": 58879214, "body": "I don&#39;t know. I&#39;m not able to compile that project on my Debian."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1456305870, "post_id": 35595019, "comment_id": 58880903, "body": "Looking on the web, it seems that you could solve using gcc 4.3. Give it a shot."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1456391170, "creation_date": 1456391170, "answer_id": 35622710, "question_id": 35595019, "link": "https://stackoverflow.com/questions/35595019/on-make-make-install-building-application-getting-iso-c-does-not-permit-named-v/35622710#35622710", "title": "On make make install, building application getting ISO c does not permit named variadic", "body": "<p>Have to upgrade GCC to 4.9 and if you are to lower version using follow instructions on this page.</p>\n\n<p>[<a href=\"https://solarianprogrammer.com/2015/01/13/raspberry-pi-raspbian-install-gcc-compile-cpp-14-programs/][1]\" rel=\"nofollow\">https://solarianprogrammer.com/2015/01/13/raspberry-pi-raspbian-install-gcc-compile-cpp-14-programs/][1]</a></p>\n\n<p>put this lines to avoid warnings</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wvariadic-macros\"\n\n        // Your code and/or include files\n        // (No variadic warnings here)\n #pragma GCC diagnostic pop\n</code></pre>\n\n<p>if you have so much warnings remove -werror from CFLAGS. you can able to build.</p>\n"}], "owner": {"reputation": 151, "user_id": 3354368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86201a0ca0da007f39cd07fe74d49827?s=128&d=identicon&r=PG", "display_name": "Muthukrishnan C", "link": "https://stackoverflow.com/users/3354368/muthukrishnan-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1456391170, "creation_date": 1456296028, "last_edit_date": 1456301092, "question_id": 35595019, "link": "https://stackoverflow.com/questions/35595019/on-make-make-install-building-application-getting-iso-c-does-not-permit-named-v", "title": "On make make install, building application getting ISO c does not permit named variadic", "body": "<p>/.configure, make and make install</p>\n\n<p>This is code for status.h</p>\n\n<pre><code>#define DEBUG(level, args...) debug(level, __location__, __FUNCTION__, args)\n\n\ntypedef enum {\n        ST_OK = 0,\n        ST_GENERAL_FAILURE = 1,\n        ST_NO_SUCH_OBJECT = 2,\n        ST_READ_ERROR = 3,\n        ST_WRITE_ERROR = 4,\n        ST_PARSE_ERROR = 5,\n        ST_LOG_ERR = 117,\n        ST_DATABASE_FAILURE = 118,\n        ST_BIND_FAILURE = 119,\n        ST_SOCKET_FAILURE = 120,\n        ST_CONFIGURATION_ERROR = 121,\n        ST_ASSERTION_FAILED = 122,\n        ST_NOT_IMPLEMENTED = 123,\n        ST_OUT_OF_MEMORY = 124,\n} STATUS;\n\n#define NO_MEM_RETURN(ptr) {if (ptr == NULL) { DEBUG(0, \"Out of memory\"); return ST_OUT_OF_MEMORY; }}\n#define NO_MEM_RETURN_RV(ptr, rv) {if (ptr == NULL) { DEBUG(0, \"Out of memory\"); return rv; }}\n\n\nSTATUS debug(int loglevel, const char *location, const char *function, ...);\n</code></pre>\n\n<p>This is code for code for chirond.c and currently running on gcc version 4.7.2 (Debian 4.7.2-5) </p>\n\n<pre><code>    #include \"includes.h\"\n    #include \"build/ndr_chiron.h\"\n    #include \"build/chiron.h\"\n    #include &lt;nettle/md5.h&gt;\n    #include &lt;nettle/arcfour.h&gt;\n\n    #define CHIRON_PORT \"53165\"\n\n    struct chiron_context {\n            int clientfd;\n            struct sockaddr *clientaddr;\n            char *account_code;\n            char *device_id;\n            uint8_t md5_last_out[0x10];\n            uint8_t rc4key[0x10];\n    };\n\n    /* FIXME This function is a nasty little hack. */\n    char *ndr_print_chiron_msg_type_enum(TALLOC_CTX *mem_ctx, enum chiron_msg_type msg_type) {\n            char *ret;\n            struct ndr_print *ndr_print = talloc_zero(mem_ctx, struct ndr_print);\n            ndr_print-&gt;print = ndr_print_string_helper;\n            ndr_print-&gt;depth = 0;\n            ndr_print_chiron_msg_type(ndr_print, \"\", msg_type);\n            ret = talloc_steal(mem_ctx, ndr_print-&gt;private_data);\n            talloc_free(ndr_print);\n            return ret;\n    }\nSTATUS handle_chiron_msg_response(struct chiron_context *ctx, struct chiron_message *msg) {\n#if 0 // TLV, move to ASN.1 parsing\n        DATA_BLOB crypted, decrypted;\n        enum ndr_err_code ndr_err;\n        struct chiron_msg_inner_response *inner_response;\n        struct arcfour_ctx rc4;\n        char *deviceid_string;\n\n        if (memcmp(msg-&gt;msg.response.md5_check, ctx-&gt;md5_last_out, 0x10)) {\n                DEBUG(0, \"MD5 does not match!\\n\");\n                return ST_PARSE_ERROR;\n        }\n        DEBUG(0, \"Handling the response\");\n        inner_response = talloc(msg, struct chiron_msg_inner_response);\n        NO_MEM_RETURN(inner_response);\n\n        /* Copy packet to crypted data blob */\n        crypted.length = msg-&gt;msg.response.length - MD5_HASH_LEN;\n        crypted.data = talloc_memdup(msg, msg-&gt;msg.response.payload, crypted.length);\n        NO_MEM_RETURN(crypted.data);\n\n        decrypted.data = talloc_array(msg, uint8_t, crypted.length);\n        NO_MEM_RETURN(decrypted.data);\n        decrypted.length = crypted.length;\n\n        arcfour_set_key(&amp;rc4, MD5_HASH_LEN, ctx-&gt;rc4key);\n        arcfour_crypt(&amp;rc4, crypted.length, decrypted.data, crypted.data);\n\n        /* Parse the packet */\n        ndr_err = ndr_pull_struct_blob_all(&amp;decrypted, inner_response, inner_response, (ndr_pull_flags_fn_t)ndr_pull_chiron_msg_inner_response);\n\n        if (ndr_err != NDR_ERR_SUCCESS) {\n                DEBUG(0, \"Could not parse the inner response\");\n                return ST_PARSE_ERROR;\n        }\nSTATUS handle_chiron_msg_response(struct chiron_context *ctx, struct chiron_message *msg) {\n#if 0 // TLV, move to ASN.1 parsing\n        DATA_BLOB crypted, decrypted;\n        enum ndr_err_code ndr_err;\n        struct chiron_msg_inner_response *inner_response;\n        struct arcfour_ctx rc4;\n        char *deviceid_string;\n\n        if (memcmp(msg-&gt;msg.response.md5_check, ctx-&gt;md5_last_out, 0x10)) {\n                DEBUG(0, \"MD5 does not match!\\n\");\n                return ST_PARSE_ERROR;\n        }\n        DEBUG(0, \"Handling the response\");\n        inner_response = talloc(msg, struct chiron_msg_inner_response);\n        NO_MEM_RETURN(inner_response);\n\n        /* Copy packet to crypted data blob */\n        crypted.length = msg-&gt;msg.response.length - MD5_HASH_LEN;\n        crypted.data = talloc_memdup(msg, msg-&gt;msg.response.payload, crypted.length);\n        NO_MEM_RETURN(crypted.data);\n\n        decrypted.data = talloc_array(msg, uint8_t, crypted.length);\n        NO_MEM_RETURN(decrypted.data);\n        decrypted.length = crypted.length;\n\n        arcfour_set_key(&amp;rc4, MD5_HASH_LEN, ctx-&gt;rc4key);\n        arcfour_crypt(&amp;rc4, crypted.length, decrypted.data, crypted.data);\n\n        /* Parse the packet */\n        ndr_err = ndr_pull_struct_blob_all(&amp;decrypted, inner_response, inner_response, (ndr_pull_flags_fn_t)ndr_pull_chiron_msg_inner_response);\n\n        if (ndr_err != NDR_ERR_SUCCESS) {\n                DEBUG(0, \"Could not parse the inner response\");\n                return ST_PARSE_ERROR;\n        }\nDEBUG(0, \"%s\", ndr_print_struct_string(msg,(ndr_print_fn_t)ndr_print_chiron_msg_inner_response, \"chiron payload\", inner_response));\n\n        deviceid_string = talloc_zero_array(msg, char, inner_response-&gt;dev_len + 1);\n        memcpy(deviceid_string, inner_response-&gt;deviceid, inner_response-&gt;dev_len);\n\n        DEBUG(0, \"Remote device: %s\", deviceid_string);\n#endif\n        //send_chiron_msg_key\n        return ST_OK;\n}\n\n\nSTATUS send_chiron_msg_challenge(struct chiron_context *ctx, struct chiron_message *in) {\n        struct chiron_message *out = talloc_zero(in, struct chiron_message);\n        struct md5_ctx md5;\n        uint8_t *md5input;\n        enum ndr_err_code ndr_err;\n        DATA_BLOB raw_out;\n\n        NO_MEM_RETURN(out);\n        DEBUG(0, \"Sending out a challenge\");\n\n        out-&gt;msg_type = CHIRON_CHALLENGE;\n        out-&gt;seq = in-&gt;seq;\n        out-&gt;flags = in-&gt;flags;\n\n        /* Make an md5 hash of the account code with the seq byte appended. */\n        md5input = talloc_array(in, uint8_t, in-&gt;msg.account.length + 1);\n        NO_MEM_RETURN(md5input);\n\n        memcpy(md5input, in-&gt;msg.account.account_code, in-&gt;msg.account.length);\n        md5input[in-&gt;msg.account.length] = in-&gt;seq;\n\n        out-&gt;msg.challenge.md5_check = talloc_array(out, uint8_t, MD5_HASH_LEN);\n        NO_MEM_RETURN(out-&gt;msg.challenge.md5_check);\n\n        md5_init(&amp;md5);\n        md5_update(&amp;md5, in-&gt;msg.account.length + 1, md5input);\n        md5_digest(&amp;md5, MD5_HASH_LEN, out-&gt;msg.challenge.md5_check);\n        talloc_free(md5input);\n\n        /* FIXME This should be random, but that is annoying for testing purposes */\n        out-&gt;msg.challenge.length = MD5_HASH_LEN + CHALLENGE_LEN;\n        out-&gt;msg.challenge.challenge = talloc_zero_array(out, uint8_t, CHALLENGE_LEN);\n        NO_MEM_RETURN(out-&gt;msg.challenge.challenge);\n        out-&gt;msg.challenge.challenge[0] = 0xd0;\n        out-&gt;msg.challenge.challenge[1] = 0x8b;\n        out-&gt;msg.challenge.challenge[2] = 0x29;\n        out-&gt;msg.challenge.challenge[3] = 0xd3;\n        out-&gt;msg.challenge.challenge[4] = 0x7c;\n        out-&gt;msg.challenge.challenge[5] = 0xfd;\n        out-&gt;msg.challenge.challenge[6] = 0xb5;\n        out-&gt;msg.challenge.challenge[7] = 0xc6;\n        out-&gt;msg.challenge.challenge[8] = 0x1e;\n\n        ndr_err = ndr_push_struct_blob(&amp;raw_out, out, out, (ndr_push_flags_fn_t)ndr_push_chiron_message);\n        if (ndr_err != NDR_ERR_SUCCESS) {\n                DEBUG(0, \"Error writing NDR data blob.\");\n                return ST_WRITE_ERROR;\n        }\n /* Update the md5 check for the next message (last 9 bytes with the seq byte appended). */\n        md5input = talloc_array(in, uint8_t, CHALLENGE_LEN + 1);\n        NO_MEM_RETURN(md5input);\n\n        memcpy(md5input, &amp;raw_out.data[MSG_HDR_LEN + MD5_HASH_LEN], CHALLENGE_LEN);\n        md5input[CHALLENGE_LEN] = in-&gt;seq;\n\n        md5_init(&amp;md5);\n        md5_update(&amp;md5, CHALLENGE_LEN + 1, md5input);\n        md5_digest(&amp;md5, MD5_HASH_LEN, ctx-&gt;md5_last_out);\n\n        /* Update the rc4 crypto key, which is seq+challenge */\n        md5input[0] = in-&gt;seq;\n        memcpy(&amp;md5input[1], &amp;raw_out.data[MSG_HDR_LEN + MD5_HASH_LEN], CHALLENGE_LEN);\n\n        md5_init(&amp;md5);\n        md5_update(&amp;md5, CHALLENGE_LEN + 1, md5input);\n        md5_digest(&amp;md5, MD5_HASH_LEN, ctx-&gt;rc4key);\n\n DEBUG(0, \"The expected md5sum for the next entry is %02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x\", \n              ctx-&gt;md5_last_out[0], ctx-&gt;md5_last_out[1], ctx-&gt;md5_last_out[2], ctx-&gt;md5_last_out[3],\n              ctx-&gt;md5_last_out[4], ctx-&gt;md5_last_out[5], ctx-&gt;md5_last_out[6], ctx-&gt;md5_last_out[9],\n              ctx-&gt;md5_last_out[8], ctx-&gt;md5_last_out[9], ctx-&gt;md5_last_out[10], ctx-&gt;md5_last_out[11],\n              ctx-&gt;md5_last_out[12], ctx-&gt;md5_last_out[13], ctx-&gt;md5_last_out[14], ctx-&gt;md5_last_out[15]);\n\n        write(ctx-&gt;clientfd, raw_out.data, raw_out.length);\n        talloc_free(out);\n        return ST_OK;\n}\n\nSTATUS handle_chiron_msg_account(struct chiron_context *ctx, struct chiron_message *msg) {\n\n        ctx-&gt;account_code = talloc_memdup(msg, msg-&gt;msg.account.account_code, msg-&gt;msg.account.length);\n        NO_MEM_RETURN(ctx-&gt;account_code);\n\n        send_chiron_msg_challenge(ctx, msg);\n        return ST_OK;   \n}\n\nSTATUS handle_connection(struct chiron_context *ctx) {\n        int n;\n        struct chiron_message *msg;\n        enum ndr_err_code ndr_err;\n        char buf[1024]; /* Purposefully static length */\n        DATA_BLOB data;\n        STATUS status;\n DEBUG(0, \"The expected md5sum for the next entry is %02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x\", \n              ctx-&gt;md5_last_out[0], ctx-&gt;md5_last_out[1], ctx-&gt;md5_last_out[2], ctx-&gt;md5_last_out[3],\n              ctx-&gt;md5_last_out[4], ctx-&gt;md5_last_out[5], ctx-&gt;md5_last_out[6], ctx-&gt;md5_last_out[9],\n              ctx-&gt;md5_last_out[8], ctx-&gt;md5_last_out[9], ctx-&gt;md5_last_out[10], ctx-&gt;md5_last_out[11],\n              ctx-&gt;md5_last_out[12], ctx-&gt;md5_last_out[13], ctx-&gt;md5_last_out[14], ctx-&gt;md5_last_out[15]);\n\n        write(ctx-&gt;clientfd, raw_out.data, raw_out.length);\n        talloc_free(out);\n        return ST_OK;\n}\n\nSTATUS handle_chiron_msg_account(struct chiron_context *ctx, struct chiron_message *msg) {\n\n        ctx-&gt;account_code = talloc_memdup(msg, msg-&gt;msg.account.account_code, msg-&gt;msg.account.length);\n        NO_MEM_RETURN(ctx-&gt;account_code);\n\n        send_chiron_msg_challenge(ctx, msg);\n        return ST_OK;   \n}\n\nSTATUS handle_connection(struct chiron_context *ctx) {\n        int n;\n        struct chiron_message *msg;\n        enum ndr_err_code ndr_err;\n        char buf[1024]; /* Purposefully static length */\n        DATA_BLOB data;\n        STATUS status;\n  while ((n = read(ctx-&gt;clientfd, buf, sizeof(buf)))) {\n                if (n &lt; 0) {\n                        DEBUG( 0, \"Error when storing packet in buffer!\");\n                        return ST_PARSE_ERROR;\n                } else if (n == sizeof(buf)) {\n                        DEBUG(0, \"Maximum packet size exceeded!\");\n                        return ST_PARSE_ERROR;\n                }\n\n                msg = talloc(ctx, struct chiron_message);\n                NO_MEM_RETURN(msg);\n\n                /* Copy packet to data blob */\n                data.length = n;\n                data.data = talloc_memdup(msg, buf, n);\n                NO_MEM_RETURN(data.data);\n\n                /* Parse the packet */\n                ndr_err = ndr_pull_struct_blob_all(&amp;data, msg, msg, (ndr_pull_flags_fn_t)ndr_pull_chiron_message);\n\n                if (ndr_err != NDR_ERR_SUCCESS) {\n                        DEBUG(0, \"Could not parse this message\");\n                        return ST_PARSE_ERROR;\n                }\n                DEBUG(0, \"%s\", ndr_print_struct_string(msg,(ndr_print_fn_t)ndr_print_chiron_message, \"chiron message\", msg));\n\n                switch (msg-&gt;msg_type) {\n                        case CHIRON_ACCOUNT:\n                                status = handle_chiron_msg_account(ctx, msg);\n                                break;\n                        case CHIRON_RESPONSE:\n                                status = handle_chiron_msg_response(ctx, msg);\n                                break;\n                        default:\n                                DEBUG(0, \"Got unexpected message type: %s.\", \n                                      ndr_print_chiron_msg_type_enum(msg, msg-&gt;msg_type));\n                                break;\n                }\n if (status != ST_OK) {\n                        return status;\n                }\n\n                talloc_free(msg);\n        }\n        return ST_OK;\n}\n\nstatic STATUS daemonize(char *pid_file) {\n        FILE *pidfile;\n        pid_t pid;\n\n        fclose(stdin);\n        fclose(stdout);\n        fclose(stderr);\n        if ((pid = fork())) {\n                /* Write PID file */\n                pidfile = fopen(pid_file, \"w\");\n                if (pidfile &lt; 0)\n                        exit(1);\n\n                fprintf(pidfile, \"%d\\n\", pid);\n                fclose(pidfile);\n                exit(0);\n        }\n        return ST_OK;\n}\nstatic STATUS listen_server(TALLOC_CTX *mem_ctx, const char *bindaddr, const char *bindport, const char *protocol, STATUS (*dispatcher)(struct chiron_context *)) {\n        int sock;\n        socklen_t clientlen;\n        struct addrinfo hints, *server, *first_server;\n\n        memset(&amp;hints, 0, sizeof(struct addrinfo));\n        hints.ai_flags    = AI_PASSIVE;\n\n        getaddrinfo(bindaddr, bindport, &amp;hints, &amp;server);\n\n        first_server = server;\n        while (server) {\n                sock = socket(server-&gt;ai_family, SOCK_STREAM, 0);\n                if (sock &gt;= 0) {\n                        int optval = 1;\n                        setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &amp;optval, sizeof(optval));\n                        if (bind(sock, server-&gt;ai_addr, server-&gt;ai_addrlen) &lt; 0) {\n                                close(sock);\n                                sock = -1;\n                        } else {\n\n{\n                                break;\n                        }\n                }\n                server = server-&gt;ai_next;\n        }\n\n        if (sock &lt; 0) {\n                DEBUG(0, \"Could not create socket in server\");\n                return ST_SOCKET_FAILURE;\n        }\n        listen(sock, 128);\n        freeaddrinfo(first_server);\n\n        DEBUG(0, \"Started %s and waiting for Chiron messages on port %s\", \n                 get_process_name(), CHIRON_PORT);\n\n        /*\n         * Wait for connections\n         */\n\n        clientlen = sizeof(struct addrinfo);\n        while (1) {\n                int clientfd;\n                struct sockaddr_storage clientaddr;\n                char clienthost[NI_MAXHOST];\n                char clientservice[NI_MAXSERV];\n\n                clientfd = accept(sock, (struct sockaddr *)&amp;clientaddr, &amp;clientlen);\n                getnameinfo((struct sockaddr *)&amp;clientaddr, clientlen,\n                            clienthost, sizeof(clienthost),\n                            clientservice, sizeof(clientservice),\n                            NI_NUMERICHOST | NI_NUMERICSERV);\n                DEBUG(3, \"Received connection from %s:%s\", clienthost, clientservice);\n//if (fork()) {\n                //      continue;\n                //} else {\n                {\n                        struct chiron_context *client_ctx = talloc_zero(mem_ctx, struct chiron_context);\n                        NO_MEM_RETURN(client_ctx);\n                        client_ctx-&gt;clientaddr = (struct sockaddr *)&amp;clientaddr;\n                        client_ctx-&gt;clientfd = clientfd;\n\n                        dispatcher(client_ctx);\n\n                        shutdown(client_ctx-&gt;clientfd, SHUT_RDWR);\n                        close(client_ctx-&gt;clientfd);\n\n                        talloc_free(client_ctx);\n                        exit(0);\n                }\n\n        }\n        shutdown(sock, SHUT_RDWR);\n        close(sock);\n}\n\nint main (int argc, char **argv) {\n        TALLOC_CTX *mem_ctx;\n        STATUS rv;\n        const configuration *conf;\n\n        set_process_name(argv[0]);\n\n        /* Initialize a memory context */\n        mem_ctx = talloc_init(\"chirond\");\n  /* Read the configuration file */\n        rv = read_configuration_file(mem_ctx);\n        if (rv != ST_OK)\n                return rv;\n\n        conf = get_conf();\n\n        /* Daemonize if we're not supposed to run in foreground mode */\n        if (!conf-&gt;foreground) {\n                daemonize(conf-&gt;pid_file);\n        }\n\n        /*\n         * Open up a TCP socket the Chiron port\n         */\n        listen_server(mem_ctx, \"::\", CHIRON_PORT, \"tcp\", handle_connection);\n\n        return 0;\n}\n</code></pre>\n\n<p>getting error on make, ISO c does not permit named variadic macros on ubutnu</p>\n\n<pre><code>In file included from ../includes.h:43:0,\n                 from ../chirond.c:18:\n../status.h:19:26: error: ISO C does not permit named variadic macros [-Werror=variadic-macros]\n</code></pre>\n"}, {"tags": ["c", "linux", "assembly"], "comments": [{"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 2, "creation_date": 1456295881, "post_id": 35594737, "comment_id": 58875457, "body": "&quot;I ran an strace on the above program&quot; -- why isn&#39;t it obvious that this is too late? To catch the creation of a process, you would have to start the trace before the process is created. Processes are created by the <code>fork</code> system call: <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/fork.2.html</a>"}, {"owner": {"reputation": 1940, "user_id": 3134655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/neEAG.jpg?s=128&g=1", "display_name": "Gomiero", "link": "https://stackoverflow.com/users/3134655/gomiero"}, "edited": false, "score": 4, "creation_date": 1456297112, "post_id": 35594737, "comment_id": 58876031, "body": "I&#39;m not sure if I understood, but maybe these links could help: <a href=\"http://www.tldp.org/LDP/LG/issue84/hawk.html\" rel=\"nofollow noreferrer\">How main is executed on Linux</a> and <a href=\"http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html\" rel=\"nofollow noreferrer\">Linux x86 Program Start Up</a>"}, {"owner": {"reputation": 788, "user_id": 4122574, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/wzzwo.jpg?s=128&g=1", "display_name": "sourav punoriyar", "link": "https://stackoverflow.com/users/4122574/sourav-punoriyar"}, "edited": false, "score": 0, "creation_date": 1456308109, "post_id": 35594737, "comment_id": 58882512, "body": "In the strace output i don&#39;t find any fork call. After going through the source code i found load_elf_binary where the start_code,end_code,start_data ,start_brk, initialization.But i still can&#39;t find something like alloc_task_struct for the pcb ??? :-("}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1456311089, "post_id": 35594737, "comment_id": 58884686, "body": "exec doesn&#39;t create a new process.  The <code>strace</code> output starts after it has already <code>fork</code>ed the child process, which is too late.  Jim already told you this.  Try <code>strace -f nice .&#47;a.out</code> or something, to see a process fork."}, {"owner": {"reputation": 788, "user_id": 4122574, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/wzzwo.jpg?s=128&g=1", "display_name": "sourav punoriyar", "link": "https://stackoverflow.com/users/4122574/sourav-punoriyar"}, "edited": false, "score": 0, "creation_date": 1456313049, "post_id": 35594737, "comment_id": 58886195, "body": "Thanks i directly ran strace on bash and than ran a program. I was able to find the clone. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "is_accepted": false, "score": 0, "last_activity_date": 1490362857, "creation_date": 1490362857, "answer_id": 43001052, "question_id": 35594737, "link": "https://stackoverflow.com/questions/35594737/when-and-how-a-process-control-block-is-created/43001052#43001052", "title": "When and how a process control block is created", "body": "<p>The creation of processes happens in kernel-space and not user-space, so you will not find code for creating the process-specific things in any of the userspace libraries. (What you can find in the user-space libraries is the .so file loader/runtime linker etc.)</p>\n\n<p>The actual creation of the processes happens within the system call fork() or clone(). This causes the calling processes to be split into two, a parent and a child. The return value of the system call will tell the calling process which one they are. The most common usage is that the child processes after the fork(), performs a exec() system call. This causes the processes program to be replaced with a new executable using the callers resources (filedescriptors, environment, user, group, current-working-directory etc.)</p>\n\n<p>You can see this action if you strace a shell that executes a shell-script.</p>\n"}], "owner": {"reputation": 788, "user_id": 4122574, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/wzzwo.jpg?s=128&g=1", "display_name": "sourav punoriyar", "link": "https://stackoverflow.com/users/4122574/sourav-punoriyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 606, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1490362857, "creation_date": 1456294989, "last_edit_date": 1456335830, "question_id": 35594737, "link": "https://stackoverflow.com/questions/35594737/when-and-how-a-process-control-block-is-created", "title": "When and how a process control block is created", "body": "<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    return 0;\n}\n</code></pre>\n\n<p>When and how a process control block is created for above program?</p>\n\n<p>For example,before the above program comes into running state ,kernel must allocate a pcb for this process.</p>\n\n<p>Where can i find the various starting system calls made to the kernel ,So that i can trace these calls into the kernel.</p>\n\n<p>I ran an strace on the above program but i can't get it.</p>\n\n<pre><code>execve(\"./a.out\", [\"./a.out\"], [/* 42 vars */]) = 0\nbrk(0)                                  = 0x9aaf000\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or      directory)\nmmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb78df000\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/etc/ld.so.cache\", O_RDONLY)      = 3\nfstat64(3, {st_mode=S_IFREG|0644, st_size=112037, ...}) = 0\nmmap2(NULL, 112037, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb78c3000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/lib/i386-linux-gnu/libc.so.6\", O_RDONLY) = 3\nread(3, \"\\177ELF\\1\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0\\3\\0\\1\\0\\0\\0\\220o\\1\\0004\\0\\0\\0\"..., 512) = 512\nfstat64(3, {st_mode=S_IFREG|0755, st_size=1462852, ...}) = 0\nmmap2(NULL, 1473032, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x456000\nmprotect(0x5b7000, 4096, PROT_NONE)     = 0\nmmap2(0x5b8000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x161) = 0x5b8000\nmmap2(0x5bb000, 10760, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x5bb000\nclose(3)                                = 0\nmmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb78c2000\nset_thread_area({entry_number:-1 -&gt; 6, base_addr:0xb78c28d0,  limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1,   seg_not_present:0, useable:1}) = 0\nmprotect(0x5b8000, 8192, PROT_READ)     = 0\nmprotect(0x8049000, 4096, PROT_READ)    = 0\nmprotect(0xa92000, 4096, PROT_READ)     = 0\nmunmap(0xb78c3000, 112037)              = 0\nexit_group(0)                           = ?\n</code></pre>\n\n<p>Need some hints to look forward ....</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 4, "creation_date": 1456294688, "post_id": 35594607, "comment_id": 58874935, "body": "Four chars make a very small buffer; it can hold at most three characters. It&#39;s a good idea to make that bigger and to also enforce the maximum width in <code>scanf</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1456294731, "post_id": 35594607, "comment_id": 58874958, "body": "<code>scanf(&quot;%s&quot;,a);</code>--&gt; atleast, <code>scanf(&quot;%3s&quot;,a);</code>"}, {"owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "edited": false, "score": 0, "creation_date": 1456294798, "post_id": 35594607, "comment_id": 58874984, "body": "Your code work fine... I think there is a problem with  your inputs. Check it here:  <a href=\"http://ideone.com/vIdh8f\" rel=\"nofollow noreferrer\">ideone.com/vIdh8f</a>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456294943, "post_id": 35594607, "comment_id": 58875045, "body": "I can reproduce the behaviour the OP observes when my input consists of four-digit binary numbers. Even larger numbers produce a segmentation fault."}, {"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1456294987, "post_id": 35594607, "comment_id": 58875067, "body": "arbitrary code execution is probably possible in this program."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1456295822, "post_id": 35594607, "comment_id": 58875430, "body": "Show the input and output, as @BLUEPIXY mentioned."}, {"owner": {"reputation": 145, "user_id": 5399672, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4985cf34085fca89a593804173d6d9b7?s=128&d=identicon&r=PG&f=1", "display_name": "Bwoods", "link": "https://stackoverflow.com/users/5399672/bwoods"}, "edited": false, "score": 0, "creation_date": 1456296150, "post_id": 35594607, "comment_id": 58875560, "body": "My input is &#39;1111&#39; and output does not give me anything for index 0. If I make a for loop to print out all elements I only get three elements, &#39;111&#39;."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1456305628, "post_id": 35594607, "comment_id": 58880698, "body": "if you want to input 4 characters, change to  <code>char a[5]; char b[5];</code>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456311640, "post_id": 35594607, "comment_id": 58885099, "body": "[sigh] another bean-counter in an ocean of beans.  Unlss you are running on a RAM-restricted embedded system, don&#39;t declare any char buffers smaller than, say, 256.  Just don&#39;t:)"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 5399672, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4985cf34085fca89a593804173d6d9b7?s=128&d=identicon&r=PG&f=1", "display_name": "Bwoods", "link": "https://stackoverflow.com/users/5399672/bwoods"}, "edited": false, "score": 0, "creation_date": 1456296362, "post_id": 35594834, "comment_id": 58875661, "body": "This worked! Thank You for the explanation, that makes so much sense!"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 2, "last_activity_date": 1456295302, "creation_date": 1456295302, "answer_id": 35594834, "question_id": 35594607, "link": "https://stackoverflow.com/questions/35594607/why-is-my-code-skipping-over-the-first-digit-in-the-array/35594834#35594834", "title": "Why is my code skipping over the first digit in the array?", "body": "<p>Your input buffers are very small:</p>\n\n<pre><code>    char a[4]; \n    char b[4];\n</code></pre>\n\n<p>These buffers can hold at most three characters, because they must also reserve space for the treminating null character.</p>\n\n<p>Input from the user is potentially unsafe; it is very likely that the user doesn't obey the three-character limit. Therefore, you should enforce the limit when you scan the numbers:</p>\n\n<pre><code>    scanf(\"%3s\",a);\n</code></pre>\n\n<p>It is probably also a good idea to make the buffer bigger. Even if you don't want to allow binary numbers greater than 7, you should probably read in a larger string and issue a suitable error message if it is longer or it it contains non-binary digits. Note that <code>scanf</code> also has a return value. It isn't likely, but the user might end the input stream by pressing Ctrl-D or Ctrl-Z. Your code should handle such cases.</p>\n"}], "owner": {"reputation": 145, "user_id": 5399672, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4985cf34085fca89a593804173d6d9b7?s=128&d=identicon&r=PG&f=1", "display_name": "Bwoods", "link": "https://stackoverflow.com/users/5399672/bwoods"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1456296068, "creation_date": 1456294421, "last_edit_date": 1456296068, "question_id": 35594607, "link": "https://stackoverflow.com/questions/35594607/why-is-my-code-skipping-over-the-first-digit-in-the-array", "title": "Why is my code skipping over the first digit in the array?", "body": "<p>When I try printing out the value of 'a' index [0], I do not receive a value.\nMy input is '1111' and output does not give me anything for index 0. If I make a for loop to print out all elements I only get three elements, '111'. </p>\n\n<pre><code>int main(int argc, const char * argv[])\n{\n\n    char a[4]; \n    char b[4];\n\n    printf(\"Input the first binary character: \\n\");\n\n    scanf(\"%s\",a);\n\n    printf(\"Input the second binary character: \\n\");\n\n    scanf(\"%s\",b);\n\n    printf(\"%c\",a[0]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "size"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 6, "creation_date": 1456294089, "post_id": 35594512, "comment_id": 58874695, "body": "Read about <a href=\"http://stackoverflow.com/questions/6968468/padding-in-structures-in-c\">padding in structure</a>."}, {"owner": {"reputation": 805, "user_id": 1691864, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/017f83babdeae139c5f5b26c910cb1ae?s=128&d=identicon&r=PG", "display_name": "Dawid Pura", "link": "https://stackoverflow.com/users/1691864/dawid-pura"}, "edited": false, "score": 0, "creation_date": 1456294305, "post_id": 35594512, "comment_id": 58874775, "body": "What compiler are you using? Did you read the documentation?"}, {"owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "edited": false, "score": 0, "creation_date": 1456294908, "post_id": 35594512, "comment_id": 58875030, "body": "Well, if it&#39;s gcc, there are extensions, see <a href=\"http://stackoverflow.com/questions/8568432/is-gccs-attribute-packed-pragma-pack-unsafe\" title=\"is gccs attribute packed pragma pack unsafe\">stackoverflow.com/questions/8568432/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1337, "user_id": 2676875, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e431572659944f579494a0c39356a9ac?s=128&d=identicon&r=PG", "display_name": "Tanishq dubey", "link": "https://stackoverflow.com/users/2676875/tanishq-dubey"}, "edited": false, "score": 0, "creation_date": 1456294642, "post_id": 35594592, "comment_id": 58874917, "body": "Thanks for the quick response. As a quick followup, is there anyway for this struct to be strictly less than 8 bytes ( I can easily reduce it to just 8)"}, {"owner": {"reputation": 1337, "user_id": 2676875, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e431572659944f579494a0c39356a9ac?s=128&d=identicon&r=PG", "display_name": "Tanishq dubey", "link": "https://stackoverflow.com/users/2676875/tanishq-dubey"}, "edited": false, "score": 0, "creation_date": 1456294808, "post_id": 35594592, "comment_id": 58874988, "body": "But that will just return 8 as the size. Is there a way I can - intentionally - get 7 bytes?"}, {"owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "reply_to_user": {"reputation": 1337, "user_id": 2676875, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e431572659944f579494a0c39356a9ac?s=128&d=identicon&r=PG", "display_name": "Tanishq dubey", "link": "https://stackoverflow.com/users/2676875/tanishq-dubey"}, "edited": false, "score": 2, "creation_date": 1456294955, "post_id": 35594592, "comment_id": 58875050, "body": "@tanishqdubey In case of GCC: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Structure-Layout-Pragmas.html#Structure-Layout-Pragmas\" rel=\"nofollow noreferrer\">pragma pack</a>. MSVC should support it too."}, {"owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "reply_to_user": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "edited": false, "score": 1, "creation_date": 1456296202, "post_id": 35594592, "comment_id": 58875579, "body": "@Youka&#39;s advice is right. See, e.g., <a href=\"http://stackoverflow.com/questions/3318410/pragma-pack-effect\">stackoverflow.com/questions/3318410/pragma-pack-effect</a>"}], "tags": [], "owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "is_accepted": true, "score": 2, "last_activity_date": 1456294715, "last_edit_date": 1456294715, "creation_date": 1456294367, "answer_id": 35594592, "question_id": 35594512, "link": "https://stackoverflow.com/questions/35594512/size-of-a-struct-seemingly-incorrect/35594592#35594592", "title": "Size of a struct seemingly incorrect?", "body": "<p>The idea is that for speed and cache considerations, operands should be read from addresses aligned to their natural size.</p>\n\n<pre><code>struct pixel {\n    unsigned char red;   // 0\n    unsigned char green; // 1\n    unsigned int alpha;  // 4 (gotta skip to an aligned offset)\n    unsigned char blue;  // 8 (then skip 9 10 11)\n};\n\n// next offset: 12\n</code></pre>\n\n<p>The x86 architecture has always been able to fetch misaligned addresses. However, it's slower and when the misalignment overlaps two different cache lines, then it evicts two cache lines when an aligned access would only evict one.</p>\n\n<p>Some architectures actually have to trap on misaligned reads and writes, and early versions of the ARM architecture (the one that evolved into all of today's mobile CPUs) ... well, they actually just returned bad data on for those.</p>\n\n<p>So, alignment is important.</p>\n"}, {"tags": [], "owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "is_accepted": false, "score": 0, "last_activity_date": 1456294662, "creation_date": 1456294662, "answer_id": 35594651, "question_id": 35594512, "link": "https://stackoverflow.com/questions/35594512/size-of-a-struct-seemingly-incorrect/35594651#35594651", "title": "Size of a struct seemingly incorrect?", "body": "<p>In C, structure members are aligned for faster&amp;safer memory access. Your default alignment is 4, so after <strong>red</strong> and <strong>green</strong> follow 2 padding bytes (4 bytes block complete), then <strong>alpha</strong> with 4 bytes and the last byte <strong>blue</strong> gets padded to become 4 bytes again -> 3x 4 bytes = 12 bytes.</p>\n\n<p>You can change this behaviour by compiler instructions like <strong>pragma pack</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 2592336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4776c587546a6bf23ac1a531c009f6a7?s=128&d=identicon&r=PG", "display_name": "nelson831002", "link": "https://stackoverflow.com/users/2592336/nelson831002"}, "is_accepted": false, "score": 0, "last_activity_date": 1456295571, "last_edit_date": 1495540731, "creation_date": 1456295571, "answer_id": 35594905, "question_id": 35594512, "link": "https://stackoverflow.com/questions/35594512/size-of-a-struct-seemingly-incorrect/35594905#35594905", "title": "Size of a struct seemingly incorrect?", "body": "<p>As other several users refers, is a padding problem. See <a href=\"https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member\">this</a> <br/>\nThe less I think you can reduce this struct is 8 bytes (in x86 processors), either putting the alpha field to beginning or end</p>\n"}], "owner": {"reputation": 1337, "user_id": 2676875, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e431572659944f579494a0c39356a9ac?s=128&d=identicon&r=PG", "display_name": "Tanishq dubey", "link": "https://stackoverflow.com/users/2676875/tanishq-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "closed_date": 1456295705, "accepted_answer_id": 35594592, "answer_count": 3, "score": -1, "last_activity_date": 1456295571, "creation_date": 1456294060, "question_id": 35594512, "link": "https://stackoverflow.com/questions/35594512/size-of-a-struct-seemingly-incorrect", "closed_reason": "Duplicate", "title": "Size of a struct seemingly incorrect?", "body": "<p>I have this stuct declared in C. When I call <code>sizeof(struct pixel)</code>, I am told that the size of this struct is 12 Bytes when I expect it to be 7 Bytes (1 for chars and 4 for the int). Why does this happen?</p>\n\n<p>Struct:</p>\n\n<pre><code>   struct pixel {\n        unsigned char red;\n        unsigned char green;\n        unsigned int alpha;\n        unsigned char blue;\n    };\n</code></pre>\n"}, {"tags": ["c", "int", "double", "output"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1456294362, "post_id": 35594379, "comment_id": 58874797, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3602827/what-is-the-behavior-of-integer-division-in-c\">What is the behavior of integer division in C?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 535, "user_id": 4885631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XdD20.jpg?s=128&g=1", "display_name": "Jude", "link": "https://stackoverflow.com/users/4885631/jude"}, "is_accepted": false, "score": 2, "last_activity_date": 1456293749, "creation_date": 1456293749, "answer_id": 35594431, "question_id": 35594379, "link": "https://stackoverflow.com/questions/35594379/output-of-functions-defined-as-double-and-int/35594431#35594431", "title": "Output of functions defined as double and int", "body": "<p>All of your variables should be <code>double</code> because if they are <code>int</code> integer operation will occur and your result will not contain decimal places.</p>\n\n<pre><code>double i = 5;\ndouble j = 3;\ndouble k;\ndouble a, b;\n\nk = j / 2 * i / 10;\na = 0.1 * i * j / 2.0;\nb = 0.1 * (j / i) + 3.0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1456294614, "last_edit_date": 1456294614, "creation_date": 1456293760, "answer_id": 35594432, "question_id": 35594379, "link": "https://stackoverflow.com/questions/35594379/output-of-functions-defined-as-double-and-int/35594432#35594432", "title": "Output of functions defined as double and int", "body": "<p>In your code, </p>\n\n<ul>\n<li><code>i</code> and <code>j</code> are of type <code>int</code> </li>\n<li>the integer constants used here are also of type <code>int</code>, </li>\n</ul>\n\n<p>So, in case of</p>\n\n<pre><code>k = j / 2 * i / 10;\n</code></pre>\n\n<p>integer division / multiplication will take place and the <em>final</em> result will be <strong>promoted</strong> to type <code>double</code>. This is not what you want.</p>\n\n<p>either</p>\n\n<ul>\n<li>use <code>double</code> for <code>i</code> and <code>j</code></li>\n<li>use casting to enforce floating point operation.</li>\n</ul>\n\n<p>Same for the <code>(j / i)</code> part in below case.</p>\n\n<pre><code>b = 0.1 * (j / i) + 3.0;\n</code></pre>\n\n<p>OTOH, in case of</p>\n\n<pre><code>a = 0.1 * i * j / 2.0;\n</code></pre>\n\n<p>gives correct output, as the constant <code>0.1</code> or <code>2.0</code> denotes a <code>double</code> type, and because of the usual arithmetic conversion of the operands, floating point division / multiplication is performed.</p>\n"}, {"tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 1, "last_activity_date": 1456294474, "last_edit_date": 1456294474, "creation_date": 1456293775, "answer_id": 35594436, "question_id": 35594379, "link": "https://stackoverflow.com/questions/35594379/output-of-functions-defined-as-double-and-int/35594436#35594436", "title": "Output of functions defined as double and int", "body": "<p>Operators for basic data types returns the strongest type of its two operands.</p>\n\n<p><code>(j / i)</code> is a division of integral data types, because <code>i</code> and <code>j</code> are of type  <code>int</code>. Since <code>i</code> is initialized by <code>5</code> and <code>j</code> is initialized by <code>3</code> the result type of the division is <code>int</code> and the result value is <code>0</code>. </p>\n\n<p>Either you adapt your code like this to get the reusult you expected:</p>\n\n<pre><code>b = 0.1 * ((double)j / i) + 3.0;\n                 //  ^ this is now a floating point division\n</code></pre>\n\n<p>Or like this:</p>\n\n<pre><code>b = 0.1 * j / i + 3.0;\n</code></pre>\n\n<p>Note the type of the result of <code>0.1 * j</code> is of type <code>double</code> because <code>0.1</code> is of type <code>double</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 2193, "user_id": 4427646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YKQMQ.png?s=128&g=1", "display_name": "Lincoln Cheng", "link": "https://stackoverflow.com/users/4427646/lincoln-cheng"}, "is_accepted": false, "score": 1, "last_activity_date": 1456299875, "creation_date": 1456299875, "answer_id": 35596125, "question_id": 35594379, "link": "https://stackoverflow.com/questions/35594379/output-of-functions-defined-as-double-and-int/35596125#35596125", "title": "Output of functions defined as double and int", "body": "<p>since <code>j</code> and <code>i</code> are integers, <code>j/i</code> will result in integer <code>0</code>.</p>\n\n<p>Integer division only gives the quotient and the remainder is discarded. E.g <code>10/4 equals to 2</code></p>\n"}], "owner": {"reputation": 67, "user_id": 5886599, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f515406992621f7d201d8f1a2265d4b3?s=128&d=identicon&r=PG&f=1", "display_name": "DanielRossi", "link": "https://stackoverflow.com/users/5886599/danielrossi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1456299875, "creation_date": 1456293553, "question_id": 35594379, "link": "https://stackoverflow.com/questions/35594379/output-of-functions-defined-as-double-and-int", "title": "Output of functions defined as double and int", "body": "<pre><code>int i = 5;\nint j = 3;\nint k;\ndouble a, b;\n\nk = j / 2 * i / 10;\na = 0.1 * i * j / 2.0;\nb = 0.1 * (j / i) + 3.0;\n</code></pre>\n\n<p>So by doing it by hand one would get k=0.75, a=0.75, and b=3.06. Yet when I solve it in Visual Studio I get 0, 0.75, and 3.00. I was hoping someone could shed light on this. I know int means only whole values can be output but why is b = 3.00 rather than 3.06 since b is a double? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 6, "creation_date": 1456293389, "post_id": 35594312, "comment_id": 58874417, "body": "&quot;I think something is wrong with (nameptr[i] == *target)&quot;. Yes, you are right. Strings in C cannot be compared using <code>==</code>. Use <a href=\"http://linux.die.net/man/3/strcmp\" rel=\"nofollow noreferrer\"><code>strcmp</code></a>. Also, tell your teachers that they should never be using <code>gets</code> which is inherently unsafe as it does no bounds checks."}, {"owner": {"reputation": 233, "user_id": 5518248, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5e76cb7861d5d89b86ac46f6600b167e?s=128&d=identicon&r=PG&f=1", "display_name": "Aung", "link": "https://stackoverflow.com/users/5518248/aung"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456293829, "post_id": 35594312, "comment_id": 58874594, "body": "I replaced  (nameptr[i] == *target) with (strcmp(nameptr[i], *target)) and the program clashed. :("}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1456294039, "post_id": 35594312, "comment_id": 58874673, "body": "<code>*target</code> needs to be <code>target</code>. Your compiler should have given you warnings. Never ignore them. And read the man page thoroughly. You are not using the strcmp return value correctly."}, {"owner": {"reputation": 233, "user_id": 5518248, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5e76cb7861d5d89b86ac46f6600b167e?s=128&d=identicon&r=PG&f=1", "display_name": "Aung", "link": "https://stackoverflow.com/users/5518248/aung"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1456294194, "post_id": 35594312, "comment_id": 58874736, "body": "Oh ok  think I know. It should be (!strcmp(nameptr[i], target))"}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1456300633, "last_edit_date": 1456300633, "creation_date": 1456299275, "answer_id": 35595932, "question_id": 35594312, "link": "https://stackoverflow.com/questions/35594312/find-string-inside-an-array-of-string-c-code/35595932#35595932", "title": "Find string inside an array of string. (C code)", "body": "<p>This:</p>\n\n<pre><code>if (nameptr[i] == *target)\n</code></pre>\n\n<p>is wrong because you are comparing a pointer with an integer and that makes no sense. Also, in order to compare two strings, use <a href=\"http://linux.die.net/man/3/strcmp\" rel=\"nofollow\"><code>strcmp</code></a>. Using <code>==</code> will compare the pointers and not the content of them.</p>\n\n<p>Fix:</p>\n\n<pre><code>if (strcmp(nameptr[i], target) == 0)\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 5518248, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5e76cb7861d5d89b86ac46f6600b167e?s=128&d=identicon&r=PG&f=1", "display_name": "Aung", "link": "https://stackoverflow.com/users/5518248/aung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456300633, "creation_date": 1456293207, "question_id": 35594312, "link": "https://stackoverflow.com/questions/35594312/find-string-inside-an-array-of-string-c-code", "title": "Find string inside an array of string. (C code)", "body": "<p>I have got this template.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define SIZE 10\nint findTarget(char *target, char nameptr[SIZE][80], int size);\nint main()\n{\n    char nameptr[SIZE][80];\n    char t[40];\n    int i, result, size;\n\n    printf(\"Enter no. of names: \");\n    scanf(\"%d\", &amp;size);\n    printf(\"Enter %d names: \", size);\n    for (i = 0; i&lt;size; i++)\n        scanf(\"%s\", nameptr[i]);\n    printf(\"Enter target name: \");\n    scanf(\"\\n\");\n    gets(t);\n    result = findTarget(t, nameptr, size);\n    printf(\"findTarget(): %d\\n\", result);\n    return 0;\n}\nint findTarget(char *target, char nameptr[SIZE][80], int size)\n{\n    /* write your code here */\n    int i;\n    for (i = 0; i &lt; size; i++) {\n        if (nameptr[i] == *target)\n            return i;\n    }\n    return -1;\n}\n</code></pre>\n\n<p>And the code under /* write your code here */ is my code.\nThe code doesn't work. I think something is wrong with (nameptr[i] == *target).</p>\n\n<p>Examples of output:</p>\n\n<pre><code>Enter no. of names: 4\nEnter 4 names: Peter Paul John Mary\nEnter target name: John\nfindTarget(): 2\n\nEnter no. of names: 4\nEnter 4 names: peter mary john steve\nEnter target name: may\nfindTarget(): -1\n</code></pre>\n\n<p>I think the template is correct cos its provided by school.</p>\n\n<p>Thank you for helps.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13151, "user_id": 3329664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OU5vg.jpg?s=128&g=1", "display_name": "Billal Begueradj", "link": "https://stackoverflow.com/users/3329664/billal-begueradj"}, "edited": false, "score": 2, "creation_date": 1456292956, "post_id": 35594165, "comment_id": 58874229, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6582322/what-does-space-in-scanf-mean\">What does space in scanf mean?</a>"}, {"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 3, "creation_date": 1456295771, "post_id": 35594165, "comment_id": 58875400, "body": "You should learn how to debug your code. Here&#39;s a good intro: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 3151541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/87d7dbbd1126d0f869416ef273fda69a?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/3151541/jordan"}, "edited": false, "score": 0, "creation_date": 1456292764, "post_id": 35594189, "comment_id": 58874144, "body": "Thanks! This worked. Why exactly is the extra space required?"}, {"owner": {"reputation": 1442, "user_id": 2831961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63ce9408649d97b61f740ec5de3276fb?s=128&d=identicon&r=PG", "display_name": "daniel.caspers", "link": "https://stackoverflow.com/users/2831961/daniel-caspers"}, "edited": false, "score": 0, "creation_date": 1456292903, "post_id": 35594189, "comment_id": 58874208, "body": "If I am not mistaken, it&#39;s because you added the extra space? Try changing <code>printf(&quot;Enter char %i: &quot;,numInputs);</code> to <code>printf(&quot;Enter char %i:&quot;,numInputs);</code> . It may be hard to see, but after %i: it seems you have a space that scanf() is reading?"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 315, "user_id": 3151541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/87d7dbbd1126d0f869416ef273fda69a?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/3151541/jordan"}, "edited": false, "score": 2, "creation_date": 1456293006, "post_id": 35594189, "comment_id": 58874248, "body": "@Jordan, space is used to consume the left out newline character <code>\\n</code> in the input buffer after the previous <code>scanf</code>s."}, {"owner": {"reputation": 1442, "user_id": 2831961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63ce9408649d97b61f740ec5de3276fb?s=128&d=identicon&r=PG", "display_name": "daniel.caspers", "link": "https://stackoverflow.com/users/2831961/daniel-caspers"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1456293266, "post_id": 35594189, "comment_id": 58874360, "body": "@Haris, would you typically then just scan a newline character instead? Something like <code>scanf (&quot;%c\\n&quot;, &amp;c);</code>? EDIT: Disregard, saw other answer just come in."}], "tags": [], "owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "is_accepted": true, "score": 1, "last_activity_date": 1456295320, "last_edit_date": 1495542821, "creation_date": 1456292680, "answer_id": 35594189, "question_id": 35594165, "link": "https://stackoverflow.com/questions/35594165/while-loop-working-improperly-unexpectedly/35594189#35594189", "title": "while loop working improperly/unexpectedly?", "body": "<p>Change </p>\n\n<pre><code>scanf (\"%c\", &amp;c);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>scanf (\" %c\", &amp;c);\n</code></pre>\n\n<p>As @haris mentioned, the space is used to consume the <code>\\n</code> (newline) left in the input buffer caused by the previous <code>scanf</code>.</p>\n\n<p>Also see: <a href=\"https://stackoverflow.com/questions/6582322/what-does-space-in-scanf-mean\">What does space in scanf mean?</a></p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 5607380, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dclQVMrrhKU/AAAAAAAAAAI/AAAAAAAAAx4/dEMtp62EyWk/photo.jpg?sz=128", "display_name": "Rohit Magdum", "link": "https://stackoverflow.com/users/5607380/rohit-magdum"}, "is_accepted": false, "score": 0, "last_activity_date": 1456293275, "creation_date": 1456293275, "answer_id": 35594325, "question_id": 35594165, "link": "https://stackoverflow.com/questions/35594165/while-loop-working-improperly-unexpectedly/35594325#35594325", "title": "while loop working improperly/unexpectedly?", "body": "<p>The below code should work fine. scanf waits for input on a new line. Since you were not returning to a new line it was reading already existing space character on the current line.</p>\n\n<pre><code> char inputs[10] = \"\";\n    int numInputs = 0;\n    char c;\n    while (numInputs &lt; 10){\n        printf(\"Enter char %i: \",numInputs);\n        scanf(\"%c\\n\",&amp;c);\n        numInputs++;\n    }\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 3151541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/87d7dbbd1126d0f869416ef273fda69a?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/3151541/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 35594189, "answer_count": 2, "score": -1, "last_activity_date": 1456295320, "creation_date": 1456292588, "question_id": 35594165, "link": "https://stackoverflow.com/questions/35594165/while-loop-working-improperly-unexpectedly", "title": "while loop working improperly/unexpectedly?", "body": "<p>So I have this code:</p>\n\n<pre><code>char inputs[10] = \"\";\nint numInputs = 0;\nwhile (numInputs &lt; 10){\n    char c;\n    printf(\"Enter char %i: \",numInputs);\n    scanf(\"%c\",&amp;c);\n    numInputs++;\n}\n</code></pre>\n\n<p>I'm just trying to fill the array with 10 char values as inputted by the user. When i run this, it only lets me enter inputs ever other loop (?). This is what the console looks like-</p>\n\n<p><code>Enter char 0: c\nEnter char 1: Enter char 2: r\nEnter char 3: Enter char 4: r\nEnter char 5: Enter char 6: r\nEnter char 7: Enter char 8: r\nEnter char 9: Program ended with exit code: 0</code></p>\n\n<p>Is there a nit-picky thing here that i'm missing?</p>\n"}, {"tags": ["c", "database", "csv", "sqlite"], "comments": [{"owner": {"reputation": 181, "user_id": 2622919, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62bf2624c7888a47f494f9eed41dd6e1?s=128&d=identicon&r=PG", "display_name": "pikkewyn", "link": "https://stackoverflow.com/users/2622919/pikkewyn"}, "edited": false, "score": 0, "creation_date": 1456296284, "post_id": 35594037, "comment_id": 58875621, "body": "First idea could be to have static variable in your getcsvfield which will remember last position in parsed line, just to not start over every time and use <code>strtok_r</code> with that variable.  Second idea is to create prepare_insert_query function which will return, already prepared  &quot;INSERT INTO table(a,b,c,d,e,f) VALUES(&#39;val1&#39;,&#39;val2&#39;,&#39;val3&#39;);&quot; using string concatenation inside along with strtok"}], "answers": [{"comments": [{"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456298373, "post_id": 35594815, "comment_id": 58876610, "body": "Thanks... but i keep getting <code>Segmentation fault (core dumped)</code> &#39;"}, {"owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456311456, "post_id": 35594815, "comment_id": 58884951, "body": "This does not print anything!"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "edited": false, "score": 0, "creation_date": 1456343285, "post_id": 35594815, "comment_id": 58907260, "body": "@techno There&#39;s only two reasons for it not to print anything. A) The <code>fopen</code> returned <code>NULL</code>. B) The file &quot;input.csv&quot; has nothing in it."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 0, "last_activity_date": 1456295235, "creation_date": 1456295235, "answer_id": 35594815, "question_id": 35594037, "link": "https://stackoverflow.com/questions/35594037/read-data-from-csv-and-put-into-database/35594815#35594815", "title": "Read Data from CSV and Put into Database", "body": "<p>A more efficient method would be to parse the line once, creating an array of pointers to the tokens. You can then pass the array entries to the <code>execute</code> function like this</p>\n\n<pre><code>execute(\"INSERT INTO table(a,b,c,d,e,f) VALUES('%s','%s','%s');\",token[0],token[1],...\n</code></pre>\n\n<p>Here's an example that reads lines from a file, breaks the line into tokens, and then prints the tokens.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint getTokens( char *line, char *token[], int maxt )\n{\n    int i;\n\n    char *ptr = strtok(line, \";\\n\");\n    for ( i = 0; i &lt; maxt; i++ )\n    {\n        if ( ptr == NULL )\n            return i;\n\n        token[i] = ptr;\n        ptr = strtok( NULL, \";\\n\" );\n    }\n\n    return i;\n}\n\nint main( void )\n{\n    const int maxt = 6;\n    char line[1024];\n    char *token[maxt];\n\n    FILE *fp;\n    if ( (fp = fopen( \"input.csv\", \"r\" )) == NULL )\n        return 1;\n\n    while ( fgets(line, sizeof line, fp) != NULL )\n    {\n        int count = getTokens( line, token, maxt );\n        for ( int i = 0; i &lt; count; i++ )\n            printf( \"%d: '%s'\\n\", i, token[i] );\n        printf( \"\\n\" );\n    }\n\n    fclose( fp );\n}\n</code></pre>\n"}], "owner": {"reputation": 5351, "user_id": 848968, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Y9IL8.jpg?s=128&g=1", "display_name": "techno", "link": "https://stackoverflow.com/users/848968/techno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456295235, "creation_date": 1456292047, "question_id": 35594037, "link": "https://stackoverflow.com/questions/35594037/read-data-from-csv-and-put-into-database", "title": "Read Data from CSV and Put into Database", "body": "<p>I have a table with 6 columns and i have CSV Export like this with 6 entries per Line </p>\n\n<pre><code>me;val1;val2;val3;val4;val5;\nme;val1;val2;val3;val4;val5;\n</code></pre>\n\n<p>I need to read these entries and Insert it into the SQLITE3 Database.So inorder to parse the CSV I use</p>\n\n<pre><code>void readcsv()\n{\n    FILE* stream = fopen(\"input.csv\", \"r\");\n\n    char line[1024];\n    while (fgets(line, 1024, stream))\n    {\n        char* tmp = strdup(line);\n        printf(\"Field 3 would be %s\\n\", getcsvfield(tmp, 3));\n        // NOTE strtok clobbers tmp\n        free(tmp);\n    }\n}\n//Used for parsing CSV\nconst char* getcsvfield(char* line, int num)\n{\n    const char* tok;\n    for (tok = strtok(line, \";\");\n            tok &amp;&amp; *tok;\n            tok = strtok(NULL, \";\\n\"))\n    {\n        if (!--num)\n            return tok;\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>So will i have to call getcsvfield(tmp, fieldnumber) again and again in the Insert Query like this or is there a cleaner and efficient way.</p>\n\n<pre><code>execute(\"INSERT INTO table(a,b,c,d,e,f) VALUES('%s','%s','%s');\",getcsvfield(tmp, 1),getcsvfield(tmp, 2),....... and so on\n</code></pre>\n\n<p>Please advise.</p>\n"}, {"tags": ["c", "matrix", "memory-leaks", "chaining"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1456288386, "post_id": 35593205, "comment_id": 58872675, "body": "Define a third parameter for <code>matrix_add</code> for the result of the add? So that you can ping pong between just two <code>matrix_t</code> variables. <code>matrix_t r1, r2; matrix_add(A, B, &amp;r1); matrix_add(&amp;r1, C, &amp;r2); matrix_add(&amp;r2, D, &amp;r1); matrix_add(&amp;r1, E ,&amp;r2);</code> etc."}, {"owner": {"reputation": 308, "user_id": 4533946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b374d5721814d0792450b19d8ed31d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Crafton", "link": "https://stackoverflow.com/users/4533946/brian-crafton"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456288846, "post_id": 35593205, "comment_id": 58872802, "body": "That solution dosn&#39;t fix the problem though. I still have to free the matrices outside of the function and there are cases where I will need more than 2 temporary variables. matrix addition is not the only case where chaining is needed."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1456288865, "post_id": 35593205, "comment_id": 58872811, "body": "Personally I think calling a function to get or set a matrix element is a bit excessive.  If you&#39;re willing to pay that high a cost, then I would suggest using a non-compiled language like Python.  The only reason to do it in C is for speed, and you&#39;re throwing away that advantage."}, {"owner": {"reputation": 308, "user_id": 4533946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b374d5721814d0792450b19d8ed31d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Crafton", "link": "https://stackoverflow.com/users/4533946/brian-crafton"}, "edited": false, "score": 0, "creation_date": 1456289035, "post_id": 35593205, "comment_id": 58872850, "body": "Problem is I am writing it for a class and I am going to be parallelizing it later on, so the point of the assignment is learning. Also the code will be parallelized in OpenMP, OpenMPI, and Cuda which are all spin offs of C. You are right that using a getter and setter is excessive but I could turn them into macros in the future I just do not feel like dealing with that right now."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456289198, "post_id": 35593205, "comment_id": 58872906, "body": "How about pass in an array of matrix_t and have the function do the entire chain in one go?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1456289580, "post_id": 35593205, "comment_id": 58873016, "body": "I see - that makes sense.  I have a few thoughts about your problem that I&#39;m still mulling over."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1456289953, "post_id": 35593205, "comment_id": 58873143, "body": "If your matrix structures were fixed-length, then you could just pass and return them by value and the compiler would take care of the memory allocation and freeing for you.  But since they aren&#39;t, I don&#39;t think this approach will work."}], "answers": [{"comments": [{"owner": {"reputation": 308, "user_id": 4533946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b374d5721814d0792450b19d8ed31d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Crafton", "link": "https://stackoverflow.com/users/4533946/brian-crafton"}, "edited": false, "score": 1, "creation_date": 1456343882, "post_id": 35593726, "comment_id": 58907641, "body": "I like this idea as a potential way to clean up the code ... It would also allow me to chain them together like matrix_add(pool, matrix_add(pool, A, B), C);"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 308, "user_id": 4533946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b374d5721814d0792450b19d8ed31d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Crafton", "link": "https://stackoverflow.com/users/4533946/brian-crafton"}, "edited": false, "score": 0, "creation_date": 1456344313, "post_id": 35593726, "comment_id": 58907896, "body": "@BrianCrafton Oh yeah that&#39;s true, didn&#39;t think about that, but that should work."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1456291597, "last_edit_date": 1456291597, "creation_date": 1456290597, "answer_id": 35593726, "question_id": 35593205, "link": "https://stackoverflow.com/questions/35593205/c-matrix-function-design-for-chainging-and-freeing/35593726#35593726", "title": "C Matrix function design for chainging and freeing", "body": "<p>One solution is to implement a memory pool supervisor. When memory is allocated, the supervisor stores the pointer in a list. When it's time to clean up, the supervisor frees all the memory in its list. </p>\n\n<p>The top-level code would look something like this</p>\n\n<pre><code>mempool_t *pool = pool_create();\nmatrix_t *temp, *sum;\ntemp = matrix_add(pool, A, B);\ntemp = matrix_add(pool, temp, C);\ntemp = matrix_add(pool, temp, D);\nsum  = matrix_add(pool, temp, E);\npool_destroy(pool, sum);\n// ...\n// use sum for something\n// ... \nfree(sum);\n</code></pre>\n\n<p>The <code>pool_create</code> function creates a data structure to keep track of all of the memory allocations. This could be a linked list, or a resizable array.</p>\n\n<p>The <code>matrix_add</code> function passes the <code>pool</code> to the constructor</p>\n\n<pre><code>matrix_t *sum = matrix_constructor(pool, m1-&gt;rows, m1-&gt;cols);\n</code></pre>\n\n<p>The <code>matrix_constructor</code> adds the allocated memory to the pool</p>\n\n<pre><code>matrix_t *ptr = malloc(...);\npool_add(pool, ptr);\n</code></pre>\n\n<p>The <code>pool_destroy</code> function calls <code>free</code> on every pointer in the list, except for the pointer that's passed as the second argument. So in the example, <code>sum</code> is not freed, and must be freed later by the top-level code.</p>\n"}], "owner": {"reputation": 308, "user_id": 4533946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b374d5721814d0792450b19d8ed31d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Crafton", "link": "https://stackoverflow.com/users/4533946/brian-crafton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456291597, "creation_date": 1456287663, "question_id": 35593205, "link": "https://stackoverflow.com/questions/35593205/c-matrix-function-design-for-chainging-and-freeing", "title": "C Matrix function design for chainging and freeing", "body": "<p>So currently I am using a little matrix library that I wrote for a project, but what I hate is how I need to use temporary variables to store pointers to matrices to avoid memory leaks </p>\n\n<p>Example:</p>\n\n<pre><code>matrix_t* matrix_add(matrix_t* m1, matrix_t* m2)\n{\n    assert(m1 != NULL &amp;&amp; m2 != NULL);\n    assert(m1-&gt;rows &gt; 0 &amp;&amp; m2-&gt;rows &gt; 0 &amp;&amp; m1-&gt;cols &gt; 0 &amp;&amp; m2-&gt;cols &gt; 0);\n    assert(m1-&gt;rows == m2-&gt;rows &amp;&amp; m1-&gt;cols == m2-&gt;cols);\n\n    matrix_t* sum = matrix_constructor(m1-&gt;rows, m1-&gt;cols);\n\n    int i, j;\n    for(i=0; i&lt;m1-&gt;rows; i++)\n    {\n        for(j=0; j&lt;m1-&gt;cols; j++)\n        {\n            matrix_set(sum, i, j, matrix_get(m1, i, j) + matrix_get(m2, i, j));\n        }\n    }\n    return sum;\n}\n</code></pre>\n\n<p>so as you can see if I wanted to chain operations together like 2 matrix adds (A + B + C) then I would have to do something like:</p>\n\n<pre><code>matrix_t* temp = matrix_add(A, B);\nmatrix_t* sum = matrix_add(temp, C);\nfree_matrix(temp);\n</code></pre>\n\n<p>This also gets wayyy uglier when there is a long chain of operations since a temporary variable is needed for each one. My question is does anyone have any design strategies that would make my life easier and code cleaner by being able to chain operations and avoid memory leaks.</p>\n\n<p>I was thinking I could send a variable length argument with variable length operations but that could get messy when many different operations are introduced like matrix transposes and operations that require different sized matrices.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1456287394, "post_id": 35593113, "comment_id": 58872384, "body": "Read the man page for <code>printf</code>. It has a list of all of the conversion specifiers."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1456287694, "post_id": 35593113, "comment_id": 58872464, "body": "those specifiers are specific, but I was wondering if there was one specifier that encompassed 3 specifiers"}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 3, "creation_date": 1456287757, "post_id": 35593113, "comment_id": 58872483, "body": "%i can read optimally signed decimal,octal, or hexadecimal  and the argument is pointed to an int."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1456288040, "post_id": 35593113, "comment_id": 58872578, "body": "@vvid No, because C is not an object-oriented language, so variable <code>x</code> contains no information except a value. You need to choose the format that you want to use to display that value."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456288182, "post_id": 35593113, "comment_id": 58872624, "body": "@chux, damn, I stand corrected. I had my <code>printf</code> and <code>scanf</code> swapped."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456288355, "post_id": 35593113, "comment_id": 58872667, "body": "Let us pretend there was such a specifier, called <code>Z</code>.  What would you expect <code>printf(&quot;%Z &quot;,x);</code> to print?  <code>x</code> has no &quot;memory&quot; of how its value originated."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456290113, "post_id": 35593113, "comment_id": 58873195, "body": "@chux it could be made to work if <code>%z</code> consumed 2 arguments, one for the base and another for the value.  Kind of like <code>%*s</code> consumes 2 arguments."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1456290694, "post_id": 35593113, "comment_id": 58873391, "body": "@Tom Karzes You mean like <a href=\"http://stackoverflow.com/a/34292061/2410359\">TO_BASE(x, 2), TO_BASE(x, 36)</a>?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456290739, "post_id": 35593113, "comment_id": 58873404, "body": "@chux Yeah pretty much, but without the need to provide storage for the result."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1456290807, "post_id": 35593113, "comment_id": 58873437, "body": "@Tom Karzes Note, no storage variables were explicitly declared.  IAC, I was hoping to find OP&#39;s point-of-view"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1456288060, "post_id": 35593210, "comment_id": 58872587, "body": "The input is not known and is determined by the user. But I see, if there is no one size fits all then I am out of luck"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456304524, "post_id": 35593210, "comment_id": 58879981, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/11383535\">From Review</a>"}, {"owner": {"reputation": 415, "user_id": 5948846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273db2b339e06c7638188a3995181a01?s=128&d=identicon&r=PG", "display_name": "ichan-akira", "link": "https://stackoverflow.com/users/5948846/ichan-akira"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456306306, "post_id": 35593210, "comment_id": 58881211, "body": "@Magisch I&#39;ve been added the answer from the link. I&#39;m using image, since Stack Overflow doesn&#39;t support &lt;table&gt; html tag."}], "tags": [], "owner": {"reputation": 415, "user_id": 5948846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273db2b339e06c7638188a3995181a01?s=128&d=identicon&r=PG", "display_name": "ichan-akira", "link": "https://stackoverflow.com/users/5948846/ichan-akira"}, "is_accepted": false, "score": -1, "last_activity_date": 1456305100, "last_edit_date": 1456305100, "creation_date": 1456287705, "answer_id": 35593210, "question_id": 35593113, "link": "https://stackoverflow.com/questions/35593113/printf-not-outing-thing-read-from-scanf/35593210#35593210", "title": "printf not outing thing read from scanf", "body": "<p>You might found this reference is useful to you:</p>\n\n<p><strong>printf</strong><br/>\n<a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdio/printf/</a>\n<a href=\"https://i.stack.imgur.com/wDmhN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wDmhN.png\" alt=\"printf\"></a></p>\n\n<p><strong>scanf</strong><br/>\n<a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdio/scanf/</a>\n<a href=\"https://i.stack.imgur.com/VaCmu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VaCmu.png\" alt=\"scanf\"></a></p>\n\n<hr>\n\n<p><strong>EDIT:</strong><br/>\nThere is no single specifier, that one size fit all. You should know what you will be printing, and use the specific specifier to get the job done.</p>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 5906909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1UVLa.png?s=128&g=1", "display_name": "Tarang Gupta", "link": "https://stackoverflow.com/users/5906909/tarang-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1456287855, "last_edit_date": 1495541732, "creation_date": 1456287855, "answer_id": 35593230, "question_id": 35593113, "link": "https://stackoverflow.com/questions/35593113/printf-not-outing-thing-read-from-scanf/35593230#35593230", "title": "printf not outing thing read from scanf", "body": "<p>See here, <code>printf</code> doesn't identify \"%i\" and \"%d\" separately. But it is identified in <code>scanf</code>.\nAlso please write the question properly next time :)</p>\n\n<p>These links may help you- </p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/1893490/difference-between-format-specifiers-i-and-d-in-printf\">Difference between format specifiers %i and %d in printf</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/9895600/octal-to-decimal-in-c\">Octal to Decimal in C</a></p></li>\n<li><p><a href=\"http://www.tutorialspoint.com/cprogramming/c_type_casting.htm\" rel=\"nofollow noreferrer\">http://www.tutorialspoint.com/cprogramming/c_type_casting.htm</a></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "is_accepted": true, "score": 0, "last_activity_date": 1456288134, "creation_date": 1456288134, "answer_id": 35593282, "question_id": 35593113, "link": "https://stackoverflow.com/questions/35593113/printf-not-outing-thing-read-from-scanf/35593282#35593282", "title": "printf not outing thing read from scanf", "body": "<p>Guess there is no specifier that does what %i can do in scanf, I wasn't sure if there was one or not but ichan confirmed that there isn't one</p>\n"}, {"comments": [{"owner": {"reputation": 415, "user_id": 5948846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273db2b339e06c7638188a3995181a01?s=128&d=identicon&r=PG", "display_name": "ichan-akira", "link": "https://stackoverflow.com/users/5948846/ichan-akira"}, "edited": false, "score": 0, "creation_date": 1456306331, "post_id": 35594235, "comment_id": 58881229, "body": "Nice answer, but there might be some problem with the data type which not actually a numeric. Since it&#39;s in array of char, some might found it difficult to operate/manipulate the array of char with other numeric data. Still, it&#39;s nice answer."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 2, "last_activity_date": 1456292864, "creation_date": 1456292864, "answer_id": 35594235, "question_id": 35593113, "link": "https://stackoverflow.com/questions/35593113/printf-not-outing-thing-read-from-scanf/35594235#35594235", "title": "printf not outing thing read from scanf", "body": "<p>Yes, there is another specifier. You should read as string and write what you read to write exactly what you read.</p>\n\n<pre><code>char x[100];\nscanf(\"%99s\", x);\nprintf(\"%s \", x);\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 35593282, "answer_count": 4, "score": 0, "last_activity_date": 1456305100, "creation_date": 1456287154, "last_edit_date": 1456288191, "question_id": 35593113, "link": "https://stackoverflow.com/questions/35593113/printf-not-outing-thing-read-from-scanf", "title": "printf not outing thing read from scanf", "body": "<p>scanf can read optimally signed decimal,octal, or hexadecimal input but printf can't output said read input? Or is there some other specifier I'm not aware of and not using.</p>\n\n<p>example code</p>\n\n<pre><code>scanf(\"%i\", &amp;x);     //enter 0150 (octal)                     \nprintf(\"%i \",x);     //outputs 104(decimal)\n</code></pre>\n"}]