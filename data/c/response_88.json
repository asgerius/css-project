[{"tags": ["c", "hex", "division", "modulus", "unsigned-integer"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1473896634, "post_id": 39501210, "comment_id": 66319810, "body": "Would you mind posting a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <i>Complete</i>, and Verifiable example</a>?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1473896706, "post_id": 39501210, "comment_id": 66319831, "body": "The C standard library has functions <code>time</code> and <code>div</code>, so my first attempt will be using another names, not knowing whether it will work."}, {"owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1473896909, "post_id": 39501210, "comment_id": 66319881, "body": "Thanks for your comments... I don&#39;t use time and div var names and I don&#39;t think there are conflicts because I&#39;m not using C standard library. It&#39;s just bare C code thank have to be executed on a ARM emulator."}, {"owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1473897363, "post_id": 39501210, "comment_id": 66319989, "body": "For the example, it&#39;s quite difficult to post one... Maybe I can try to explain... The chuck of code above is in a function that gets executed after a specific amount of time. Time instead, is a global variable which keeps track of the lifetime of a data structure and gets updated every time a function is called. The time between the last call and the new one is added to time. Think that variable as a shared counter which gets incremented; when it&#39;s value is greater than 0x1388, I have to calculare the reminder."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1473897408, "post_id": 39501210, "comment_id": 66320001, "body": "Either your compiler has a bug, or there&#39;s something you aren&#39;t telling us (hence the need for a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>). Both the code you&#39;ve shown, and the modulus operator, should work."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1473897420, "post_id": 39501210, "comment_id": 66320006, "body": "Are you sure you don&#39;t have to calculate the reminder when the value is exactly 0x1388?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1473897682, "post_id": 39501210, "comment_id": 66320071, "body": "E.g. one possibility is that your real code is <code>if (gettime() &gt; 0x1388) div=gettime() &#47; 0x1388;</code> In that case, the time that the <code>if</code> statement sees is not necessarily the same as the time that the division sees."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473897989, "post_id": 39501210, "comment_id": 66320135, "body": "Try using <code>0x1388U</code> so you get an unsigned literal, not signed."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1473898096, "post_id": 39501210, "comment_id": 66320162, "body": "@user3386109 That wouldn&#39;t explain getting a result like <code>0x0ffffff</code>."}, {"owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "edited": false, "score": 0, "creation_date": 1473898186, "post_id": 39501210, "comment_id": 66320186, "body": "Thank you so much for all your comments, I&#39;m gonna try every suggestion... The reminder need to be calculated when time&#39;s value is greater than 0x1388."}, {"owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "edited": false, "score": 0, "creation_date": 1473898272, "post_id": 39501210, "comment_id": 66320211, "body": "@barman, yes, exactly! I don&#39;t exaplin a result like 0xFFFFF... I also checked values step by step but it acts like that :/"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473898327, "post_id": 39501210, "comment_id": 66320227, "body": "Does it work correctly if you use decimal literals instead of hex? Have you looked at the generated assembly code to see what it&#39;s actually doing?"}, {"owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "edited": false, "score": 0, "creation_date": 1473898809, "post_id": 39501210, "comment_id": 66320342, "body": "Just tried using 0x1388U, decimal literal (5000) but nothing changes... div is always 0xFFFFF and res is 0xC7802823... Unfortunately I don&#39;t know how to look at the assembly code :("}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1473898915, "post_id": 39501210, "comment_id": 66320370, "body": "It causes undefined behaviour to make a global variable with the same name as a standard library function, even if you didn&#39;t include that standard header.   Change the names and try again"}, {"owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "edited": false, "score": 0, "creation_date": 1473899111, "post_id": 39501210, "comment_id": 66320415, "body": "Changed to timeLife, divisor and reminder but nothing changes... Furthermore, if I use simple operations like sum or difference or multiplication, I don&#39;t have any problems"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473902131, "post_id": 39501210, "comment_id": 66321003, "body": "&quot;This chunk of code should act as the modulus operator between time and 0x1388&quot; --&gt; No, not quite.   <code>if (time &gt; 0x1388) {</code> should be <code>if (time &gt;= 0x1388) {</code> for modulus."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473902468, "post_id": 39501210, "comment_id": 66321077, "body": "&quot;<code>div</code> is always 0x0FFFFF instead of 0x1 and res gets a really weird value.&quot;  --&gt; 1) posting the code or method used to determine this would help as <i>that</i> could be at fault - or casuing the problem.  2) Was that <code>div</code> is always 0x0FFFFF or <code>div</code> is always 0x0FFFF?  3) I have doubts that all the <i>facts</i> are as presented.  Posting a minimal code that demos the problem is critical to arriving at a solution."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473902608, "post_id": 39501210, "comment_id": 66321105, "body": "&quot;<code>res</code> gets a really weird value.&quot; is not as useful as posting the value(s) it does get."}, {"owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "edited": false, "score": 1, "creation_date": 1473902805, "post_id": 39501210, "comment_id": 66321143, "body": "Res is 0xC7802823, div is 0x0FFFFF. The code is really like that one, and these variables are just used in that two functions... and sorry for the delayed responses since here where I live is so late :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473912813, "post_id": 39501210, "comment_id": 66323275, "body": "How did you determine the values of <code>res,div</code>?  You have yet to post that.  BTW :<code>div</code> is the name of a function <code>div_t div(int numer, int denom);</code>  You may want to try your code using a different name in case there is some odd interaction.  Same for <code>time</code>, choose a new name."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1473913479, "post_id": 39501210, "comment_id": 66323431, "body": "I wondering if the <code>time</code> in <code>valueChecker()</code> is getting the address of the function <code>time()</code> rather than your global variable <code>time</code>.  After all, you did say &quot;div is <i>always</i> 0x0FFFFF&quot; implying a constant value for <code>time</code>.  Try a name like <code>g_time</code> for your global time variable.  Perhaps your linker is confused or mis-directed?   Hmm Now I see @MikeCAT  comment - oh well."}, {"owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "edited": false, "score": 0, "creation_date": 1473923323, "post_id": 39501210, "comment_id": 66326851, "body": "Already tried changing variables names, now called timeLife, reminder and divider but nothing changes. The value of div is 0x0FFFFF just after executing the if statement for the first time. I check his value using a Structure Viewer from the emulator, which is uARM <a href=\"http://mellotanica.github.io/uARM/\" rel=\"nofollow noreferrer\">mellotanica.github.io/uARM</a>"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473906602, "post_id": 39501781, "comment_id": 66321938, "body": "In the &#39;bad&#39; example, I think the problem is related to the fact that there&#39;s no formal definition (as opposed to declaration) of the global variable <code>time</code>, so in fact the system library function <code>time</code> is providing the value.  And you can&#39;t change the location of the function, so ... things go weird.  When you explicitly define the variable <code>time</code>, you get sane behaviour."}, {"owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473907067, "post_id": 39501781, "comment_id": 66322025, "body": "@JonathanLeffler That is true, In my GCC examples with a <code>time</code> variable I did get sane behaviour. But I thought it worth mentioning since I don&#39;t know what his environment is like or how he is compiling / linking his modules. I can&#39;t think of any other reason apart from symbol clashes in his program that would display the behaviour he discribes from the examples though."}], "tags": [], "owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "is_accepted": false, "score": 1, "last_activity_date": 1473901496, "creation_date": 1473901496, "answer_id": 39501781, "question_id": 39501210, "link": "https://stackoverflow.com/questions/39501210/weird-behavior-when-dividing-hex-numbers/39501781#39501781", "title": "Weird behavior when dividing hex numbers", "body": "<p>Using the following program I  get good output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunsigned int res = 0, div = 0, time = 0x1300; // global variables\nunsigned int valueChecker() {\n    if (time &gt; 0x1388) {\n        div = time / 0x1388;\n        printf( \"Div: %u\\n\", div );\n        res = time - (0x1388 * div);\n        printf( \"Mod: %u\\n\", res );\n    }\n    return res;\n}\n\nint main(void) {\n    while( time &lt; 0x1390 )\n    {\n        time += 1;\n        valueChecker();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Div: 1\nMod: 1\nDiv: 1\nMod: 2\nDiv: 1\nMod: 3\nDiv: 1\nMod: 4\nDiv: 1\nMod: 5\nDiv: 1\nMod: 6\nDiv: 1\nMod: 7\nDiv: 1\nMod: 8\n</code></pre>\n\n<p>This means that the problem is most likely with <code>extern unsigned int time</code>.\nTo try and fix this problem do the following:</p>\n\n<p>Make sure your internal globals are declaired as <code>static</code> so no other modules can accidentally modify them:</p>\n\n<pre><code>static unsigned int res = 0;\nstatic unsigned int div = 0;\n</code></pre>\n\n<p>Make sure all multi-unit symbols have a very very unique name, just in case:</p>\n\n<pre><code>unsigned int global_hexTime = 0;\n</code></pre>\n\n<hr>\n\n<p>When I do the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nextern unsigned int time;\n/* i had to rename div because it was already in stdlib.h! */\nstatic unsigned int res = 0, divisor = 0; // global variables\nunsigned int valueChecker() {\n    if (time &gt; 0x1388) {\n        divisor = time / 0x1388;\n        printf( \"Div: %u\\n\", divisor );\n        res = time - (0x1388 * divisor);\n        printf( \"Mod: %u\\n\", res );\n    }\n    return res;\n}\n\nint main(void) {\n    int i = 0;\n    while( i &lt; 100 )\n    {\n        i += 1;\n        valueChecker();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I get very bad output:</p>\n\n<pre><code>Div: 510868\nMod: 863\nDiv: 510868\nMod: 863\nDiv: 510868\nMod: 863\nDiv: 510868\n...\n</code></pre>\n\n<p>This problem is definitely with the external import and use of global symbols.\nMake sure you always read and fix Warnings as well.</p>\n"}], "owner": {"reputation": 3884, "user_id": 271742, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6ZUJY.jpg?s=128&g=1", "display_name": "matteodv", "link": "https://stackoverflow.com/users/271742/matteodv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1473906289, "creation_date": 1473896555, "last_edit_date": 1473906289, "question_id": 39501210, "link": "https://stackoverflow.com/questions/39501210/weird-behavior-when-dividing-hex-numbers", "title": "Weird behavior when dividing hex numbers", "body": "<p>I'm struggling with a really weird situation that I can't explain.<br>\nBasically I don't understand why results of modulus or division between two hex numbers are wrong (I'm using <code>C</code>).  </p>\n\n<p>I have a variable <code>time</code> which is a <code>32bit unsigned int</code> and it's initialized to 0 and then other two <code>32bit unsigned ints</code>, <code>div</code> and <code>res</code>, both initialized to 0 too.</p>\n\n<pre><code>if (time &gt; 0x1388) {\n    div = time / 0x1388;\n    res = time - (0x1388 * div);\n}\n</code></pre>\n\n<p>This chunk of code should act as the <strong>modulus</strong> operator between <code>time</code> and <code>0x1388</code>. <code>Time</code> is a variable which gets incremented all around my program and when it's value is greater than <code>0x1388</code>, I need its remainder to do other calculations.  </p>\n\n<p>This is an example of calculated value that are wrong... Let's suppose <code>time</code> is <code>0x1770</code>, which is greater than <code>0x1388</code>. The division between <code>0x1770</code> and <code>0x1388</code> should be <code>0x1</code> (<code>div</code>) with a reminder of <code>0x3E8</code> (<code>res</code>).\nThe problem is that after executing this code, <code>div</code> is always <code>0x0FFFFF</code> instead of <code>0x1</code> and <code>res</code> gets a really weird value.  </p>\n\n<p>I already tried to use the modulus but the result is the same. Can someone explain me what's going on?<br>\nMaybe is it related to the fact that I'm using <code>unsigned ints</code>? If so, can you please tell me what operations I need to be careful of when using <code>unsigned ints</code>?  </p>\n\n<p><strong>EDIT:</strong> Trying to add some more code...<br>\n<strong>file1.c</strong></p>\n\n<pre><code>unsigned int res = 0, div = 0, time = 0; // global variables\nunsigned int valueChecker() {\n    if (time &gt; 0x1388) {\n        div = time / 0x1388;\n        res = time - (0x1388 * div);\n    }\n    return res;\n}\n</code></pre>\n\n<p>This function is called periodically after a specific amount of time  </p>\n\n<p><strong>fileB.c</strong></p>\n\n<pre><code>extern unsigned int time;\n\nvoid calculate() {\n    // do some stuff\n    time += getHEXTime(); // this function has been supplied and return time as an HEX number\n    // do other stuff\n}\n</code></pre>\n\n<p>This function is called by the main several times, between other calculation (which doesn't involve <code>time</code>, <code>div</code> or <code>res</code>).</p>\n\n<p>I'd be so grateful if someone can help me!  </p>\n"}, {"tags": ["c++", "c", "arrays", "casting"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1473896409, "post_id": 39501172, "comment_id": 66319758, "body": "It seems the data is displayed as character since it is in character type variable. Use another debugger or seek for setting to disable them if you hate it."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1473896476, "post_id": 39501172, "comment_id": 66319776, "body": "You are misunderstanding the debugging output. It is just telling you that <code>94</code> is the character <code>&#39;^&#39;</code> and same for the other character. It&#39;s trying to be helpful by giving you extra information. Just ignore it if it is not helpful for you."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473896478, "post_id": 39501172, "comment_id": 66319779, "body": "Try using the <code>uint8_t</code> type.  When playing with bits, <code>unsigned</code> types are always preferred."}, {"owner": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "edited": false, "score": 0, "creation_date": 1473896868, "post_id": 39501172, "comment_id": 66319870, "body": "doesn&#39;t the order of your bit shifts and bitwise ands reverse the bytes of the int?  Unless you are intending to read it from index 3 to 0 order."}, {"owner": {"reputation": 449, "user_id": 4573825, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c7e9afa42cb0df4d705d431f31f3ecf?s=128&d=identicon&r=PG&f=1", "display_name": "DBB", "link": "https://stackoverflow.com/users/4573825/dbb"}, "edited": false, "score": 0, "creation_date": 1473897044, "post_id": 39501172, "comment_id": 66319909, "body": "I see thanks a lot guys."}, {"owner": {"reputation": 449, "user_id": 4573825, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c7e9afa42cb0df4d705d431f31f3ecf?s=128&d=identicon&r=PG&f=1", "display_name": "DBB", "link": "https://stackoverflow.com/users/4573825/dbb"}, "reply_to_user": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "edited": false, "score": 0, "creation_date": 1473897251, "post_id": 39501172, "comment_id": 66319959, "body": "@Cody Yep I intend to read 3 to 0"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 6824393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9932eb74494716d7aafe8bb2651032df?s=128&d=identicon&r=PG&f=1", "display_name": "azavalla", "link": "https://stackoverflow.com/users/6824393/azavalla"}, "is_accepted": true, "score": 4, "last_activity_date": 1473896633, "creation_date": 1473896633, "answer_id": 39501220, "question_id": 39501172, "link": "https://stackoverflow.com/questions/39501172/c-int-to-char-converstion-adds-garabge-characters/39501220#39501220", "title": "C int to char converstion adds garabge characters", "body": "<p>Those are not garbage characters. Those are the ascii representation of the decimal number. The debugger is just showing you the ascii representation. Look for 94 and 121 on this table:</p>\n\n<p><a href=\"http://www.asciitable.com/\" rel=\"nofollow\">http://www.asciitable.com/</a></p>\n"}], "owner": {"reputation": 449, "user_id": 4573825, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c7e9afa42cb0df4d705d431f31f3ecf?s=128&d=identicon&r=PG&f=1", "display_name": "DBB", "link": "https://stackoverflow.com/users/4573825/dbb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1473906254, "accepted_answer_id": 39501220, "answer_count": 1, "score": -4, "last_activity_date": 1473896633, "creation_date": 1473896243, "last_edit_date": 1473896516, "question_id": 39501172, "link": "https://stackoverflow.com/questions/39501172/c-int-to-char-converstion-adds-garabge-characters", "closed_reason": "Needs details or clarity", "title": "C int to char converstion adds garabge characters", "body": "<p>I am trying to convert an int into 4 bytes. for some reason it ends up adding some garbage special character at the end </p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n    int num = 31070;\n\n    char arr[4];\n\n    arr[0] = num &amp; 0xFF;\n    arr[1] = (num &gt;&gt; 8) &amp; 0xFF;\n    arr[2] = (num &gt;&gt; 16) &amp; 0xFF;\n    arr[3] = (num &gt;&gt; 24) &amp; 0xFF;\n\n    return 0;\n }\n</code></pre>\n\n<p>Here is an output of the debug window wherein you can see that it adds <code>^</code> and <code>y</code> for <code>arr[0]</code> and <code>arr[1]</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/tOhC1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tOhC1.png\" alt=\"Debugger output window\"></a></p>\n\n<p>I have tried things like casting but still have these garbage characters getting added.</p>\n"}, {"tags": ["c", "glibc"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1473895376, "post_id": 39501051, "comment_id": 66319506, "body": "Implement it both ways, and benchmark it. It&#39;s unlikely anyone can estimate the difference accurately."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1473895428, "post_id": 39501051, "comment_id": 66319518, "body": "For 2-5 elements I&#39;d probably just use an array, not list or hash."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473895773, "post_id": 39501051, "comment_id": 66319604, "body": "@Barmar Thank you for the proposal, actually that&#39;s a good idea, I thought about it but gave up, because occasionally there will be node with a little bit more than that, but won&#39;t be too much."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473895805, "post_id": 39501051, "comment_id": 66319620, "body": "I am trying to do a benchmark right away if nobody has had this situation."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1473895847, "post_id": 39501051, "comment_id": 66319627, "body": "Many people have had similar situations. But if every microsecond is critical, they won&#39;t be similar enough to be the right answer for you."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1473895886, "post_id": 39501051, "comment_id": 66319633, "body": "E.g. your data is 2-5 elements, they might be 5-10, and that&#39;s different enough that it&#39;s useless to you."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473898131, "post_id": 39501051, "comment_id": 66320168, "body": "Just did some simple benchmark, but it didn&#39;t help, I guess I need complicated data to do the benchmark, but I rethink about using array, you are right, it might be better, for the case that are larger than 5 elements, I just need to resize the array. @Barmar"}], "owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473895178, "creation_date": 1473895178, "question_id": 39501051, "link": "https://stackoverflow.com/questions/39501051/hashtable-performance-in-glibc", "title": "hashtable performance in glibc", "body": "<p>I am writing some programs in C and the performance is important, so I am faced by following situation. I have a long linked list(millions), each node of the linked list is another struct, this can be a linkedlist or hashtable, the operations I will do on each node include following: </p>\n\n<pre><code>iterate all the elements in the linkedlist/hashtable, \ncheck the existence of an element in the linkedlist/hashtable , \n</code></pre>\n\n<p>normally we should use hashtable for it, but in my situation, there will be only 2~5 elements in total, is that possible that using hashtable will bring large overhead (both time and space) and makes it less attractive? </p>\n\n<p>I am using glibc. </p>\n"}, {"tags": ["c", "shell", "dup2"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1473897249, "post_id": 39501035, "comment_id": 66319957, "body": "If <code>execvp</code> returns <code>-1</code> it means it got an error. You should use <code>perror()</code> to print the reason."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1473897331, "post_id": 39501035, "comment_id": 66319981, "body": "You should call <code>exit()</code> after printing the result of <code>execvp()</code>. Otherwise, both the parent and child process will return to the beginning of the loop."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1473897403, "post_id": 39501035, "comment_id": 66319999, "body": "Make sure you use <code>perror()</code> <b>instead</b> of <code>printf()</code>, because <code>printf()</code> can modify <code>errno()</code>, and then <code>perror()</code> will print the wrong error message."}, {"owner": {"reputation": 70, "user_id": 5165560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/846319750d8c69c928683059d3a5994f?s=128&d=identicon&r=PG&f=1", "display_name": "dcod", "link": "https://stackoverflow.com/users/5165560/dcod"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473898135, "post_id": 39501035, "comment_id": 66320170, "body": "Thanks @Barmar, using exit() stopped the infinite loop which made it much easier to find why the error was happening in the first place (It was a trivial error of location of a command being incorrect but I couldn&#39;t identify that because of the loop)."}], "owner": {"reputation": 70, "user_id": 5165560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/846319750d8c69c928683059d3a5994f?s=128&d=identicon&r=PG&f=1", "display_name": "dcod", "link": "https://stackoverflow.com/users/5165560/dcod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 604, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473896892, "creation_date": 1473895090, "last_edit_date": 1473896892, "question_id": 39501035, "link": "https://stackoverflow.com/questions/39501035/implementing-a-shell-in-c-with-file-redirection-causes-infinite-loop-with-input", "title": "Implementing a Shell in C with File Redirection Causes Infinite Loop with Input Redirection", "body": "<p>I am implementing a simple shell in C and I am hung up on redirecting input to commands. I successfully have pipes and redirected output working, so I am unsure where my issue is with redirecting the input. It seems that for some reason it is causing an infinite loop because I am printing out the result of my execvp call and whenever I try to redirect input I get infinite -1's coming from that part of the program. Any help would be appreciated.</p>\n\n<pre><code>int main(void) {\n    char input[128];\n    char *commands[128];\n    static char* args[128];\n    pid_t pid;\n    int numCommands;\n    int commandNum;\n    int j;\n    int argNum;\n    int i;\n\n    while (1) {\n        // Take in input\n        fgets(input, 128, stdin);\n\n        if (strcmp(input, \"exit\\n\") == 0) {\n            break;\n        }\n        // Get first command, if null then line is empty\n        commands[0] = strtok(input, \" \\n\\t\");\n        if(commands[0] == NULL) continue;\n\n        // Read in all subsequent commands until null\n        numCommands = 1;\n        while(1) {\n            commands[numCommands] = strtok(NULL, \" \\n\\t\");\n            if (commands[numCommands] == NULL) break;\n            numCommands++;\n        }\n\n        int numPipes;\n        numPipes = countPipes(commands);\n\n        int pipefds[2*numPipes];\n        for (i = 0; i &lt; numPipes; ++i) {\n            pipe(pipefds + i*2);\n        }\n\n        int ran = 0;\n        commandNum = 0;\n        int outputRedirect = 0;\n        int inputRedirect = 0;\n\n        while (commands[commandNum] != NULL) {\n            j = commandNum + 1;\n            args[0] = commands[commandNum];\n            argNum = 1;\n            while (j &lt; numCommands) {\n                if (strcmp(commands[j], \"|\") == 0) {\n                    ++commandNum;\n                    break;\n                } else if (strcmp(commands[j], \"&gt;\") == 0) {\n                    outputRedirect = open(commands[j + 1], O_TRUNC | O_WRONLY | O_CREAT, 0755);\n                    ++commandNum;\n                    break;\n                } else if (strcmp(commands[j], \"&lt;\") == 0) {\n                    inputRedirect = open(commands[j + 1], O_RDONLY);\n                    ++commandNum;\n                    break;\n                } else {\n                    ++commandNum;\n                    args[argNum] = commands[j];\n                    ++argNum;\n                }\n                ++j;\n            }\n\n            pid = fork();\n            if (pid == 0) {\n                if (outputRedirect != 0) {\n                    dup2(outputRedirect, STDOUT_FILENO);\n                }\n                if (inputRedirect != 0) {\n                    dup2(inputRedirect, STDIN_FILENO);\n                    close(inputRedirect);\n                }\n                if (ran != 0) {\n                    dup2(pipefds[(ran - 1) * 2], STDIN_FILENO);\n                }\n                if (ran != numPipes) {\n                    dup2(pipefds[ran*2+1], STDOUT_FILENO);\n                }\n                for (i = 0; i &lt; numPipes * 2; ++i) {\n                    close(pipefds[i]);\n                }\n                printf(\"%d\\n\", execvp(args[0], args));\n            }\n            ++commandNum;\n            ++ran;\n\n\n        }\n        for (i = 0; i &lt; numPipes * 2; ++i) {\n            close(pipefds[i]);\n        }\n\n\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "makefile", "cuda", "gnu-make", "nvcc"], "comments": [{"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1473894175, "post_id": 39500596, "comment_id": 66319164, "body": "Paste the compiler invocation as it is printed in the shell."}, {"owner": {"reputation": 307, "user_id": 2331411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d96f7fcfdcffbdeda5d3d691a460dae?s=128&d=identicon&r=PG", "display_name": "JC2188", "link": "https://stackoverflow.com/users/2331411/jc2188"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1473894682, "post_id": 39500596, "comment_id": 66319314, "body": "@user657267 please see update"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1473902790, "post_id": 39500596, "comment_id": 66321139, "body": "It would be good to show us how you&#39;ve written the <code>include</code> statement as well."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1473902817, "post_id": 39500596, "comment_id": 66321147, "body": "Ah, there it is.  You need to use the relative path to the header file."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1473916148, "post_id": 39500596, "comment_id": 66324117, "body": "I see no -I options for the include paths in your compiler output. no compiler will find your included files without them"}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 2331411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d96f7fcfdcffbdeda5d3d691a460dae?s=128&d=identicon&r=PG", "display_name": "JC2188", "link": "https://stackoverflow.com/users/2331411/jc2188"}, "edited": false, "score": 0, "creation_date": 1473948654, "post_id": 39501954, "comment_id": 66342398, "body": "Thanks, I&#39;ve removed src/ from the path subsitution and it is now working (Or at least failing in an expected manner). My intention is to have the following structure project/*.cu, project/FA_kernels/*.cu, project/build/*.cu, project/build/FA_kernels/*.cu etc. I don&#39;t fully understand your suggestions for changes, would you be so kind to post a full makefile with your suggested changes so that I can better understand you? Thanks."}, {"owner": {"reputation": 307, "user_id": 2331411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d96f7fcfdcffbdeda5d3d691a460dae?s=128&d=identicon&r=PG", "display_name": "JC2188", "link": "https://stackoverflow.com/users/2331411/jc2188"}, "edited": false, "score": 0, "creation_date": 1473967714, "post_id": 39501954, "comment_id": 66353519, "body": "Sorry, I got that I needed to remove src/ from the path substitution, but what I was asking was what would my makefile look like if I implemented your suggestions &quot;you don&#39;t need to define functions to get these rules, simply do: build/%.o: %.cu     $(CC) $(INCLUDES) -c $&lt; -o $@&quot;"}, {"owner": {"reputation": 307, "user_id": 2331411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d96f7fcfdcffbdeda5d3d691a460dae?s=128&d=identicon&r=PG", "display_name": "JC2188", "link": "https://stackoverflow.com/users/2331411/jc2188"}, "edited": false, "score": 0, "creation_date": 1473971224, "post_id": 39501954, "comment_id": 66355277, "body": "ah, just seen what you&#39;ve commented out"}], "tags": [], "owner": {"reputation": 913, "user_id": 2676766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e705a2d5c65bf6204a06b0cd4b7f4b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Mingjing Zhang", "link": "https://stackoverflow.com/users/2676766/mingjing-zhang"}, "is_accepted": true, "score": 3, "last_activity_date": 1473961783, "last_edit_date": 1473961783, "creation_date": 1473903242, "answer_id": 39501954, "question_id": 39500596, "link": "https://stackoverflow.com/questions/39500596/make-h-no-such-file-or-directory/39501954#39501954", "title": "Make: *.h no such file or directory", "body": "<p>From your output, apparently <code>patsubst</code> in <code>OBJ</code> was not successful at all. From the way you define SRC, I assume <code>makefile</code> is directly under <code>src/</code>, then you should change <code>src/%.cu</code> to <code>%.cu</code> in the definition of <code>OBJ</code> as such:</p>\n\n<pre><code>OBJ       := $(patsubst %.cu,build/%.o,$(SRC))\n</code></pre>\n\n<p>Also, if I understand you correctly, you were trying to create a folder structure under <code>build/</code> that is identical to the folder structure under <code>src/</code>. So, for instance, <code>/src/abc.cu</code> will generate <code>/src/build/abc.o</code>, then you don't need to define functions to get these rules, simply do:</p>\n\n<pre><code>build/%.o: %.cu\n    $(CC) $(INCLUDES) -c $&lt; -o $@\n</code></pre>\n\n<p>and you are good to go.</p>\n\n<p>If instead you wish to create <code>build/</code> on the same level as <code>src/</code>. i.e. <code>XXX/src/abc.cu</code> -> <code>XXX/build/abc.o</code>. Then simply replace all occurrences of <code>build</code> in your makefile with <code>../build</code>.</p>\n\n<p>If you would rather put makefile at the same level as <code>src/</code>, then you should edit <code>SRC</code> to reflect that:</p>\n\n<pre><code>SRC       := $(foreach sdir,$(SRC_DIR),$(wildcard src/$(sdir)/*.cpp))\n</code></pre>\n\n<p>and change the target to:</p>\n\n<pre><code>build/%.o: src/%.cpp\n    $(CC) $(INCLUDES) -c $&lt; -o $@\n</code></pre>\n\n<p>Now you can safely remove <code>vapth ...</code> and the last line <code>$foreach</code> in your makefile.</p>\n\n<p>EDIT: This is what your makefile will look like. I can't test it right now so there may be some mistakes in it, but hopefully it makes you understand the general idea.</p>\n\n<pre><code>CC        := nvcc\nLD        := nvcc\n\nMODULES   := FA_kernels FD_kernels MEM_kernels MOD_kernels .\nSRC_DIR   := $(MODULES)\nBUILD_DIR := $(addprefix build/,$(MODULES))\n\nSRC       := $(foreach sdir,$(SRC_DIR),$(wildcard $(sdir)/*.cu))\nOBJ       := $(patsubst %.cu,build/%.o,$(SRC))\nINCLUDES  := $(addprefix -I,headers)\n\n# vpath %.cu $(SRC_DIR) \n\n#define make-goal\nbuild/%.o: %.cu\n    $(CC) $(INCLUDES) -c $&lt; -o $@\n#endef\n\n.PHONY: all checkdirs clean\n\nall: checkdirs build/lem\n\nbuild/lem: $(OBJ)\n    $(LD) $^ -o $@\n\n\ncheckdirs: $(BUILD_DIR)\n\n$(BUILD_DIR):\n    @mkdir -p $@\n\nclean:\n    @rm -rf build\n\n#$(foreach bdir,$(BUILD_DIR),$(eval $(call make-goal,$(bdir))))\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 2331411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d96f7fcfdcffbdeda5d3d691a460dae?s=128&d=identicon&r=PG", "display_name": "JC2188", "link": "https://stackoverflow.com/users/2331411/jc2188"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2356, "favorite_count": 0, "accepted_answer_id": 39501954, "answer_count": 1, "score": 0, "last_activity_date": 1473961783, "creation_date": 1473892049, "last_edit_date": 1473895808, "question_id": 39500596, "link": "https://stackoverflow.com/questions/39500596/make-h-no-such-file-or-directory", "title": "Make: *.h no such file or directory", "body": "<p>My project has the following directory structure:</p>\n\n<ul>\n<li>main.cu </li>\n<li>FA_kernels/*.cu</li>\n<li>FD_kernels/*.cu</li>\n<li>MEM_kernels/*.cu</li>\n<li>MOD_kernels/*.cu</li>\n<li>headers/*.h</li>\n</ul>\n\n<p>Where *.extension means a bunch of files with that extension. I can't seem to get the makefile to work correctly. The error I'm getting is:</p>\n\n<pre><code> FA_kernels/FA_SFD.cu:2:20: fatal error: FA_SFD.h: No such file or directory\n #include \"FA_SFD.h\"\n                    ^\n</code></pre>\n\n<p>My intent was for -I headers to be specified to the compiler, thereby making the headers directory available for searching. Clearly this has not worked. Here is the makefile:</p>\n\n<pre><code>CC        := nvcc\nLD        := nvcc\n\nMODULES   := FA_kernels FD_kernels MEM_kernels MOD_kernels .\nSRC_DIR   := $(MODULES)\nBUILD_DIR := $(addprefix build/,$(MODULES))\n\nSRC       := $(foreach sdir,$(SRC_DIR),$(wildcard $(sdir)/*.cu))\nOBJ       := $(patsubst src/%.cu,build/%.o,$(SRC))\nINCLUDES  := $(addprefix -I,headers)\n\nvpath %.cu $(SRC_DIR)\n\ndefine make-goal\n$1/%.o: %.cu\n    $(CC) $(INCLUDES) -c $$&lt; -o $$@\nendef\n\n.PHONY: all checkdirs clean\n\nall: checkdirs build/lem\n\nbuild/lem: $(OBJ)\n    $(LD) $^ -o $@\n\n\ncheckdirs: $(BUILD_DIR)\n\n$(BUILD_DIR):\n    @mkdir -p $@\n\nclean:\n    @rm -rf build\n\n$(foreach bdir,$(BUILD_DIR),$(eval $(call make-goal,$(bdir))))\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p><strong>UPDATE:</strong> Here is the full console output from running make</p>\n\n<pre><code>nvcc FA_kernels/FA_SFD.cu FA_kernels/partition.cu FA_kernels/contribA.cu FA_kernels/parallel-SFD-List.cu FD_kernels/SFD.cu FD_kernels/flow_routines.cu FD_kernels/floodingDriver.cu FD_kernels/watershed.cu MEM_kernels/memory_dev.cu MEM_kernels/Data.cu MEM_kernels/MapInfo.cu MEM_kernels/memory.cu MOD_kernels/erosion.cu MOD_kernels/eroincidep.cu MOD_kernels/updates.cu MOD_kernels/runoffweight.cu MOD_kernels/depo-List.cu lem.cu -o build/lem\nFA_kernels/FA_SFD.cu:2:20: fatal error: FA_SFD.h: No such file or directory\n #include \"FA_SFD.h\"\n                    ^\ncompilation terminated.\nMakefile:24: recipe for target 'build/lem' failed\nmake: *** [build/lem] Error 1\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 1, "creation_date": 1473888151, "post_id": 39499797, "comment_id": 66317222, "body": "Of what type is <code>curr-&gt;name</code> ? And <code>if (curr1 == NULL &amp;&amp; curr2 == NULL) break</code> would break if either is <code>NULL</code>, so you could end up leaving some data on the table."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3183671"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1473888418, "post_id": 39499797, "comment_id": 66317325, "body": "name is array of char @c650 , I think that if both are null is because reached the end of both linked lists, so no data would be left on the table, right?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1473888517, "post_id": 39499797, "comment_id": 66317368, "body": "case of <code>curr1</code> is NULL and <code>curr2</code> isn&#39;t NULL : <code>if (curr1 == NULL &amp;&amp; curr2 == NULL) break;</code> ==&gt; <code>if (curr2 == NULL || curr1-&gt;name[0] &gt; curr2-&gt;name[0]){</code> : <code>curr1(NULL)-&gt;name[0]</code> Oops!"}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1473888589, "post_id": 39499797, "comment_id": 66317409, "body": "@BLUEPIXY exactly. Thanks for typing faster than me!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3183671"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1473888905, "post_id": 39499797, "comment_id": 66317529, "body": "@BLUEPIXY did some edits, now it should work right? ps.: still looping forever"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1473889005, "post_id": 39499797, "comment_id": 66317574, "body": "@Vitor By changing your code, we have a moving target, which makes your post unclear of what you are asking.  Suggest reverting back to the original code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3183671"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473889266, "post_id": 39499797, "comment_id": 66317661, "body": "@chux I tested before editing, it was a side bug, didn&#39;t move the target of the question since the same error still happening and just fixed the side bug so no one more would think it is the cause and loose their time  with it"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1473889333, "post_id": 39499797, "comment_id": 66317681, "body": "<i>still looping forever</i> : Perhaps, I think that there is a problem with the creation of the link."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3183671"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1473889483, "post_id": 39499797, "comment_id": 66317742, "body": "@BLUEPIXY there is not, trust me, the insert_beginning which inserts node at the beginning is correct and tested in many ways. If you want I can post it here too"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1473889937, "post_id": 39499797, "comment_id": 66317922, "body": "1) <code>if (head-&gt;quantity == 0){     head-&gt;first = new_node;</code> : <code>new_node-&gt;next</code> souble be <code>NULL</code> 2) <code>head-&gt;first = new_node;   new_node-&gt;next = head-&gt;first;</code> : Make a circular reference. (Different from what Print function is expected)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1473894573, "post_id": 39499797, "comment_id": 66319273, "body": "@VitorCosta You need to post a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. <i>&quot;side bugs&quot;</i>, and <i>&quot;copied wrong in post&quot;</i>, and missing pieces of code just waste everyone&#39;s time."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3183671"}, "edited": false, "score": 0, "creation_date": 1473891175, "post_id": 39500275, "comment_id": 66318329, "body": "The first bug I just copied wrong in post, I am sorry. But the second one: there is no way new_node-&gt;next will be NULL at this point since it will always be inserted at beginning and will always already have another node next."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 1, "last_activity_date": 1473896481, "last_edit_date": 1473896481, "creation_date": 1473890215, "answer_id": 39500275, "question_id": 39499797, "link": "https://stackoverflow.com/questions/39499797/c-merge-two-linked-lists/39500275#39500275", "title": "C - Merge Two Linked Lists", "body": "<p>Your insert code appears to have at least one bug:</p>\n\n<pre><code>void insert_beginning (header * head, node * new_node) {\n  if (head-&gt;quantity == 0){\n    head-&gt;first = new_node;\n    head-&gt;last = new_node;\n    head-&gt;quantity++;\n    return;\n  }\n\n  // NOTE/BUG: this links new_node to itself\n#if 0\n  head-&gt;first = new_node;\n  new_node-&gt;next = head-&gt;first;\n  // NOTE/FIX: this is the correct way\n#else\n  new_node-&gt;next = head-&gt;first;\n  head-&gt;first = new_node;\n#endif\n\n  // NOTE/BUG?: what about end of list?\n#if 0\n  new_node-&gt;next-&gt;prev = new_node;\n#else\n  if (new_node-&gt;next != NULL)\n    new_node-&gt;next-&gt;prev = new_node;\n#endif\n\n  head-&gt;quantity++;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<blockquote>\n  <p>The first bug I just copied wrong in post, I am sorry.</p>\n</blockquote>\n\n<p>Okay, fair enough.</p>\n\n<blockquote>\n  <p>But the second one: there is no way <code>new_node-&gt;next</code> will be <code>NULL</code> at this point since it will always be inserted at beginning and will always already have another node next.</p>\n</blockquote>\n\n<p>That's indirectly part of the problem, I think.</p>\n\n<p>I've gotten your code to work and produced a test program. I had to create some of the missing functions and structs.</p>\n\n<p>I coded up a different merge function: <code>merge_lists2</code>. One of the big differences is that it doesn't just do (e.g.) <code>curr1 = curr1-&gt;next</code> but calls a new function that shifts off the first element [if needed] that removes all old <code>next/prev</code> links.</p>\n\n<p>This is done in a new function <code>list_shift</code>. In particular, see the <code>NOTE/BUG</code> comment in that function.</p>\n\n<p>Anyway, here's the updated and working code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct node_struct {\n    char name[30];\n    int age;\n    struct node_struct *prev;\n    struct node_struct *next;\n} node;\n\ntypedef struct header_struct {\n    node *first;\n    node *last;\n    int quantity;\n} header;\n\nvoid\nprint_list(header * head, const char *sym)\n{\n    node *current = head-&gt;first;\n\n    printf(\"%s [fwd]:\\n\", sym);\n\n    while (current != NULL) {\n        printf(\"  %s %d\\n\", current-&gt;name, current-&gt;age);\n        current = current-&gt;next;\n    }\n}\n\nvoid\nprint_rlist(header * head, const char *sym)\n{\n    node *current = head-&gt;last;\n\n    printf(\"%s [rev]:\\n\", sym);\n\n    while (current != NULL) {\n        printf(\"  %s %d\\n\", current-&gt;name, current-&gt;age);\n        current = current-&gt;prev;\n    }\n}\n\nvoid\ninsert_beginning(header * head, node * new_node)\n{\n\n#if 1\n    new_node-&gt;prev = NULL;\n#endif\n\n    if (head-&gt;quantity == 0) {\n        head-&gt;first = new_node;\n        head-&gt;last = new_node;\n        head-&gt;quantity++;\n        return;\n    }\n\n    // NOTE/BUG: this links new_node to itself\n#if 0\n    head-&gt;first = new_node;\n    new_node-&gt;next = head-&gt;first;\n    // NOTE/FIX: this is the correct way\n#else\n    new_node-&gt;next = head-&gt;first;\n    head-&gt;first = new_node;\n#endif\n\n    // NOTE/BUG?: what about end of list?\n#if 0\n    new_node-&gt;next-&gt;prev = new_node;\n#else\n    if (new_node-&gt;next != NULL)\n        new_node-&gt;next-&gt;prev = new_node;\n#endif\n\n    head-&gt;quantity++;\n}\n\nvoid\ninsert_string(header * h, const char *str)\n{\n    node *ptr = calloc(1, sizeof(*ptr));\n\n    strcpy(ptr-&gt;name, str);\n\n    insert_beginning(h, ptr);\n}\n\nheader *\ninit_header(void)\n{\n    header *h = calloc(1, sizeof(*h));\n\n    return h;\n}\n\nheader *\nmerge_lists1(header * h1, header * h2)\n{\n    header *h3 = init_header();\n    node *curr1 = h1-&gt;first;\n    node *curr2 = h2-&gt;first;\n    node *result;\n\n    while (1) {\n        if (curr1 == NULL &amp;&amp; curr2 == NULL)\n            break;\n        if (curr1 == NULL) {\n            result = curr2;\n            curr2 = curr2-&gt;next;\n        }\n        else if (curr2 == NULL) {\n            result = curr1;\n            curr1 = curr1-&gt;next;\n        }\n        else if (curr1-&gt;name[0] &gt; curr2-&gt;name[0]) {\n            result = curr1;\n            curr1 = curr1-&gt;next;\n        }\n        else if (curr1-&gt;name[0] &lt;= curr2-&gt;name[0]) {\n            result = curr2;\n            curr2 = curr2-&gt;next;\n        }\n        insert_beginning(h3, result);\n    }\n    return h3;\n}\n\nnode *\nlist_shift(header * h, node * cur)\n{\n\n    do {\n        // bug out if we do _not_ yet need to dequeue an element from this list\n        if (cur != NULL)\n            break;\n\n        // bug out if we're at the end of the list\n        cur = h-&gt;first;\n        if (cur == NULL)\n            break;\n\n        // fix the head chain pointer\n        h-&gt;first = cur-&gt;next;\n\n        // fix the tail chain pointer\n        if (cur == h-&gt;last)\n            h-&gt;last = NULL;\n\n        cur-&gt;prev = NULL;\n\n        // NOTE/BUG: the smoking gun -- adding this fixed things\n        cur-&gt;next = NULL;\n    } while (0);\n\n    return cur;\n}\n\nheader *\nmerge_lists2(header * h1, header * h2)\n{\n    header *h3 = init_header();\n    node *curr1 = NULL;\n    node *curr2 = NULL;\n    node *result;\n\n    while (1) {\n        curr1 = list_shift(h1, curr1);\n        curr2 = list_shift(h2, curr2);\n\n        if ((curr1 == NULL) &amp;&amp; (curr2 == NULL))\n            break;\n\n        if (curr1 == NULL) {\n            result = curr2;\n            curr2 = NULL;\n        }\n        else if (curr2 == NULL) {\n            result = curr1;\n            curr1 = NULL;\n        }\n        else if (curr1-&gt;name[0] &gt; curr2-&gt;name[0]) {\n            result = curr1;\n            curr1 = NULL;\n        }\n        else {\n            result = curr2;\n            curr2 = NULL;\n        }\n\n        insert_beginning(h3, result);\n    }\n\n    return h3;\n}\n\n// main -- main program\nint\nmain(int argc, char **argv)\n{\n    char *cp;\n\n    --argc;\n    ++argv;\n\n    for (; argc &gt; 0; --argc, ++argv) {\n        cp = *argv;\n        if (*cp != '-')\n            break;\n\n        switch (cp[1]) {\n        default:\n            break;\n        }\n    }\n\n    header *h1 = init_header();\n\n    insert_string(h1, \"jkl\");\n    insert_string(h1, \"def\");\n    print_list(h1, \"h1\");\n    print_rlist(h1, \"h1\");\n\n#if 1\n    header *h2 = init_header();\n\n    insert_string(h2, \"ttt\");\n    insert_string(h2, \"ghi\");\n    insert_string(h2, \"abc\");\n    print_list(h2, \"h2\");\n    print_rlist(h2, \"h2\");\n#endif\n\n#if 0\n    header *h3 = merge_lists1(h1, h2);\n\n    print_list(h3, \"h3\");\n    print_rlist(h3, \"h3\");\n#endif\n\n#if 1\n    header *h3 = merge_lists2(h1, h2);\n\n    print_list(h3, \"h3\");\n    print_rlist(h3, \"h3\");\n#endif\n\n    return 0;\n}\n</code></pre>\n\n<p><em>Side note:</em> You're only comparing the first character of the strings, so you may want to use <code>strcmp</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3183671"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1473896481, "creation_date": 1473888000, "last_edit_date": 1473890931, "question_id": 39499797, "link": "https://stackoverflow.com/questions/39499797/c-merge-two-linked-lists", "title": "C - Merge Two Linked Lists", "body": "<h2>Question</h2>\n\n<p>I'm trying to merge two linked lists. They each have headers which contain a beginning and ending node. This is the function. It returns a header with the new merged linked list; it takes as parameters two linked lists that will be merged.</p>\n\n<p>I can't find what I am doing wrong. When return the merged header and use a function to print linked lists from its header it prints in loop two nodes forever. All the functions used in the code are working well; already tested in the rest of the software.</p>\n\n<h2>Merge Function</h2>\n\n<pre><code>header * merge_lists (header * h1, header * h2) {\n  header * h3 = init_header();\n  node * curr1 = h1-&gt;first;\n  node * curr2 = h2-&gt;first;\n  node * result;\n\n  while (1) {\n    if (curr1 == NULL &amp;&amp; curr2 == NULL) break;\n    if (curr1 == NULL){\n      result = curr2;\n      curr2 = curr2-&gt;next;\n    }\n    else if (curr2 == NULL){\n      result = curr1;\n      curr1 = curr1-&gt;next;\n    }\n    else if (curr1-&gt;name[0] &gt; curr2-&gt;name[0]){\n      result = curr1;\n      curr1 = curr1-&gt;next;\n    }\n    else if (curr1-&gt;name[0] &lt;= curr2-&gt;name[0]) {\n      result = curr2;\n      curr2 = curr2-&gt;next;\n    }\n    insert_beginning(h3, result);\n  }\n  return h3;\n}\n</code></pre>\n\n<h2>Print Function</h2>\n\n<pre><code>void print_list (header * head) {\n  node * current = head-&gt;first;\n  while (current != NULL){\n    printf(\"%s %d\\n\", current-&gt;name, current-&gt;age);\n    current = current-&gt;next;\n  }\n}\n</code></pre>\n\n<h2>Insert at Beginning Function</h2>\n\n<pre><code>void insert_beginning (header * head, node * new_node) {\n  if (head-&gt;quantity == 0){\n    head-&gt;first = new_node;\n    head-&gt;last = new_node;\n    head-&gt;quantity++;\n    return;\n  }\n\n  new_node-&gt;next = head-&gt;first;\n  head-&gt;first = new_node;\n  new_node-&gt;next-&gt;prev = new_node;\n  head-&gt;quantity++;\n}\n</code></pre>\n\n<h2>Node Struct</h2>\n\n<pre><code>typedef struct node_struct {\n  char name[30];\n  int age;\n  struct node_struct * prev;\n  struct node_struct * next;\n} node;\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1473887251, "post_id": 39499623, "comment_id": 66316876, "body": "Why did you change <code>+j</code> to <code>++j</code>?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1473887274, "post_id": 39499623, "comment_id": 66316892, "body": "<code>++j</code> and <code>+j</code> have nothing to do with each other. <code>++j</code> CHANGES <code>j</code> itself while <code>+j</code> simply adds j&#39;s value to whatever comes before in the code."}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "edited": false, "score": 1, "creation_date": 1473887342, "post_id": 39499623, "comment_id": 66316919, "body": "What is the type of <code>strarray</code>? Is it <code>char**</code>?"}, {"owner": {"reputation": 254, "user_id": 6191911, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5dbba326cef026ee2d02c97057cebd3e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr&#39;Black", "link": "https://stackoverflow.com/users/6191911/mrblack"}, "edited": false, "score": 0, "creation_date": 1473887628, "post_id": 39499623, "comment_id": 66317034, "body": "yes, Nikita, it is char**. The answer posted below solved my confusion."}], "answers": [{"comments": [{"owner": {"reputation": 254, "user_id": 6191911, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5dbba326cef026ee2d02c97057cebd3e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr&#39;Black", "link": "https://stackoverflow.com/users/6191911/mrblack"}, "edited": false, "score": 0, "creation_date": 1473887550, "post_id": 39499660, "comment_id": 66316998, "body": "Thanks Sourav, it works, that little + was disturbing. i will check more about Array subscripting."}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "edited": false, "score": 1, "creation_date": 1473887621, "post_id": 39499660, "comment_id": 66317031, "body": "Nice reference to C11."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1473905163, "post_id": 39499660, "comment_id": 66321625, "body": "Nice. And the general rule here is: when we say a[i] we always mean *(a + i)."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1473887289, "creation_date": 1473887289, "answer_id": 39499660, "question_id": 39499623, "link": "https://stackoverflow.com/questions/39499623/how-to-properly-use-array-subscripting-notation/39499660#39499660", "title": "How to properly use array subscripting notation?", "body": "<p>Using the postfix array subscripting notation,</p>\n\n<pre><code>*(strarray[i]+j)=0;\n</code></pre>\n\n<p>will be </p>\n\n<pre><code> strarray[i][j]=0;\n</code></pre>\n\n<p>Quoting the <code>C11</code> standard, chapter \u00a76.5.2.1, <em>Array subscripting</em></p>\n\n<blockquote>\n  <p>A postfix expression followed by an expression in square brackets <code>[]</code> is a subscripted\n  designation of an element of an array object. The definition of the subscript operator <code>[]</code>\n  is that <code>E1[E2]</code> is identical to <code>(*((E1)+(E2)))</code>. [...]</p>\n</blockquote>\n\n<p>In your case, you can consider <code>E1</code> as <code>strarray[i]</code> and <code>E2</code> as <code>j</code>.</p>\n"}], "owner": {"reputation": 254, "user_id": 6191911, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5dbba326cef026ee2d02c97057cebd3e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr&#39;Black", "link": "https://stackoverflow.com/users/6191911/mrblack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 39499660, "answer_count": 1, "score": 3, "last_activity_date": 1473887642, "creation_date": 1473887123, "last_edit_date": 1473887642, "question_id": 39499623, "link": "https://stackoverflow.com/questions/39499623/how-to-properly-use-array-subscripting-notation", "title": "How to properly use array subscripting notation?", "body": "<p>I am trying to read correctly this :</p>\n\n<pre><code>*(strarray[i]+j)=0;\n</code></pre>\n\n<p>I was understanding something like :</p>\n\n<pre><code>strarray[i][++j] = 0;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>strarray[i][++j] = '\\0';\n</code></pre>\n\n<p>but is not exactly the same. How could it be written correctly as an array subscripting notation?</p>\n"}, {"tags": ["javascript", "java", "c", "actionscript-3", "syntax"], "answers": [{"tags": [], "owner": {"reputation": 41425, "user_id": 129032, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e8bea8f9e6972dfd3113d67da68e6933?s=128&d=identicon&r=PG", "display_name": "ssube", "link": "https://stackoverflow.com/users/129032/ssube"}, "is_accepted": true, "score": 5, "last_activity_date": 1473886824, "last_edit_date": 1473886824, "creation_date": 1473885305, "answer_id": 39499236, "question_id": 39499198, "link": "https://stackoverflow.com/questions/39499198/is-there-a-name-for-the-following-reflection-language-feature-and-standard-way-t/39499236#39499236", "title": "Is there a name for the following reflection language feature and standard way to implement?", "body": "<p>This is called <a href=\"https://en.wikipedia.org/wiki/Run-time_type_information\" rel=\"nofollow\">RTTI</a> and no, there's no standard, nor can there be. </p>\n\n<p>Every language implements types differently (and many don't even retain them through to run time). In C++, classes aren't aware of their namespace. In JS, prototypical inheritance makes the whole thing meaningless (although you can fetch the constructor, which has a name of its own).</p>\n\n<p>When accessing the properties within an instance, it gets even uglier. The property might be a getter/setter and link to a child object or a field with a totally different name.</p>\n\n<p>Plenty of languages do provide runtime type information at the class level, but I'm unaware of a language with heavy enough properties that they can reflect themselves out of the class. Each property knowing where it's assigned on a parent would probably be impossible, since an object may be assigned to multiple variables. Querying that would give you an array of outstanding references back, but creating that list would introduce more references (albeit weak).</p>\n\n<p>In certain languages, especially ones that implement garbage collection in regular old code rather than the underlying (virtual) machine, you <em>may</em> be able to look up all smart pointers that are holding an object. This is typically an implementation detail of the smart pointer class, so it knows either how many or exactly where the references live.</p>\n\n<p>None of those features will help you with properties, though. I think that's mostly because you can assign them anywhere, so it's not very meaningful. If you want named properties, use a <code>Map</code>. ;)</p>\n"}], "owner": {"reputation": 12827, "user_id": 441016, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e3aa08907388338521f3d9cec7a13d32?s=128&d=identicon&r=PG", "display_name": "1.21 gigawatts", "link": "https://stackoverflow.com/users/441016/1-21-gigawatts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 39499236, "answer_count": 1, "score": 3, "last_activity_date": 1473886824, "creation_date": 1473885175, "question_id": 39499198, "link": "https://stackoverflow.com/questions/39499198/is-there-a-name-for-the-following-reflection-language-feature-and-standard-way-t", "title": "Is there a name for the following reflection language feature and standard way to implement?", "body": "<p>Let's say you have an object and you want to get a string of the name of the property you are referencing. Is there a name for that? I mean it's some sort of <code>reflection</code> but is there a more specific name for it and do languages implement it in standard way?</p>\n\n<p>For example, this feature exists for class based objects using <code>toString()</code> in JavaScript or ActionScript. </p>\n\n<pre><code>var person:Person = new Person();\nvar nameOfClass:String = person.toString();\ntrace(nameOfClass); // traces \"Person\" or \"com.mydomain.model.Person\"\n</code></pre>\n\n<p>But since properties can be null or undefined you can't use <code>toString()</code> as it will throw an error or if it's not <code>null</code> it will get the <code>value</code>: </p>\n\n<pre><code>var person:Person = new Person();\nvar nameOfProperty:String = person.name.toString(); // error is thrown when null\nperson.name = \"John\";\nperson.name.toString(); // traces the value \"John\" not the type\n</code></pre>\n\n<p>So I'm guessing some languages would have a global function like so.  </p>\n\n<pre><code>var person:Person = new Person();\nvar nameOfProperty:String = propertyName(person.name);\n\ntrace(nameOfProperty); // traces \"name\"\n\nnameOfProperty = propertyName(person.zipCode);\ntrace(person.zipCode); // traces \"zipCode\" \n</code></pre>\n\n<p>Is there a specific name for this feature and if so how is implemented?</p>\n"}, {"tags": ["c", "windows", "opengl", "windows-7"], "comments": [{"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 2, "creation_date": 1473884736, "post_id": 39499036, "comment_id": 66315684, "body": "Note that with Optimus, Windows will default to using the Intel GPU. You can change that by right clicking -&gt; &quot;Run using GPU&quot; (or something like that) <i>or</i> adding an exception in the NVIDIA control panel. Also, I&#39;m not sure if Linux drivers support OpenGL 4.5 yet (mine were at 4.4 IIRC)."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 2, "creation_date": 1473884791, "post_id": 39499036, "comment_id": 66315714, "body": "Oh and, the reason they&#39;re segfaulting is <i>probably</i> that they&#39;re <code>NULL</code>. Try <code>printf(&quot;FUNC: %p %p\\n&quot;, glCreateBuffers, glNamedBufferStorage)</code>."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1473885784, "post_id": 39499036, "comment_id": 66316211, "body": "&quot;<i>using Visual Studio 15</i>&quot; You&#39;re using Visual Studio. You ought to be able to step through it in the debugger."}, {"owner": {"reputation": 1281, "user_id": 402390, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bf0b81f0e833bbfbe809a254e72a2171?s=128&d=identicon&r=PG", "display_name": "Doddy", "link": "https://stackoverflow.com/users/402390/doddy"}, "reply_to_user": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1473886392, "post_id": 39499036, "comment_id": 66316507, "body": "@NicolBolas It is segfaulting inside a function with no source..."}, {"owner": {"reputation": 1281, "user_id": 402390, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bf0b81f0e833bbfbe809a254e72a2171?s=128&d=identicon&r=PG", "display_name": "Doddy", "link": "https://stackoverflow.com/users/402390/doddy"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 1, "creation_date": 1473886447, "post_id": 39499036, "comment_id": 66316533, "body": "@Tim\u010cas You seem to be correct; thank you! If you would like to submit your comment as a proper answer, I would be happy to accept it. :)"}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1473886492, "post_id": 39499036, "comment_id": 66316557, "body": "@Doddy: But some code of yours <i>called</i> that function. Or called the caller of that function. At the end of the day, you should be able to pinpoint which function call causes the &quot;segfault&quot;."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 2, "creation_date": 1473886545, "post_id": 39499036, "comment_id": 66316581, "body": "<a href=\"http://www.glfw.org/docs/latest/compile_guide.html#compile_options_win32\" rel=\"nofollow noreferrer\">glfw.org/docs/latest/compile_guide.html#compile_options_win3&zwnj;&#8203;2</a>, <code>GLFW_USE_HYBRID_HPG</code>"}, {"owner": {"reputation": 1281, "user_id": 402390, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bf0b81f0e833bbfbe809a254e72a2171?s=128&d=identicon&r=PG", "display_name": "Doddy", "link": "https://stackoverflow.com/users/402390/doddy"}, "reply_to_user": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1473886575, "post_id": 39499036, "comment_id": 66316593, "body": "@NicolBolas In VS, I looked at the call stack dialog which said that symbols were missing, and there were &quot;???&quot; levels. I assumed the segfault took place inside the call."}], "owner": {"reputation": 1281, "user_id": 402390, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bf0b81f0e833bbfbe809a254e72a2171?s=128&d=identicon&r=PG", "display_name": "Doddy", "link": "https://stackoverflow.com/users/402390/doddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473884534, "creation_date": 1473884534, "question_id": 39499036, "link": "https://stackoverflow.com/questions/39499036/opengl-4-5-functions-segfaulting", "title": "OpenGL 4.5 functions segfaulting", "body": "<p>I'm trying to write an MCVE OpenGL application in C on Windows 7. I'm finding that OpenGL 4.5 functions specifically, are segfaulting (\"access violation\") for no reason that I can determine.</p>\n\n<p>My computer is an Nvidia Optimus laptop with a discrete GeForce 765M card which, <a href=\"http://www.geforce.co.uk/hardware/notebook-gpus/geforce-gtx-765m/specifications\" rel=\"nofollow\">according to the Nvidia spec</a>, supports OpenGL 4.5. I have also observed this on Linux by running <code>primusrun glxgears -info</code> (with Bumblebee/Primus to allow running applications on the discrete card).</p>\n\n<p>My (Windows) GeForce driver is version 372.70 (latest ATOW).</p>\n\n<p>So, using Visual Studio 15, I have the following minimal example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\n#include &lt;GL\\glew.h&gt;\n#include &lt;gl\\GL.h&gt;\n#include &lt;gl\\GLU.h&gt;\n#include &lt;GLFW\\glfw3.h&gt;\n\ntypedef struct\n{\n   GLenum type;\n   const char* fileName;\n} shader_t;\n\nGLuint vao;\nGLuint bufferName;\nGLint vPosition = 0;\nGLuint program;\nGLuint vertex, frag;\n\nshader_t shaders[] = {\n   {GL_VERTEX_SHADER, \"vertex.glsl\"},\n   {GL_FRAGMENT_SHADER, \"frag.glsl\"}\n};\n\nGLuint compileShader(shader_t shader)\n{\n   GLuint ret = glCreateShader(shader.type);\n\n   FILE* file = fopen(shader.fileName, \"r\");\n\n   fseek(file, 0, SEEK_END);\n   size_t fileSize = ftell(file);\n   fseek(file, 0, SEEK_SET);\n\n   GLchar* src = malloc(fileSize + 1);\n\n   fread(src, 1, fileSize, file);\n   src[fileSize] = 0;\n\n   fclose(file);\n\n   glShaderSource(ret, 1, (const GLchar**)&amp;src, NULL);\n\n   free(src);\n\n   glCompileShader(ret);\n\n   GLint compiled;\n\n   glGetShaderiv(ret, GL_COMPILE_STATUS, &amp;compiled);\n\n   if (!compiled)\n   {\n      GLsizei len;\n\n      glGetShaderiv(ret, GL_INFO_LOG_LENGTH, &amp;len);\n\n      GLchar* log = malloc(len + 1);\n      glGetShaderInfoLog(ret, len, &amp;len, log);\n      log[len] = 0;\n\n      fprintf(stderr, \"Compile failed: %s\", log);\n      free(log);\n      exit(EXIT_FAILURE);\n   }\n\n   return ret;\n}\n\nvoid init()\n{\n   const GLfloat verts[6][2] =\n   {\n      {-0.90, -0.90},\n      { 0.85, -0.90},\n      {-0.90,  0.85},\n      { 0.90, -0.85},\n      { 0.90,  0.90},\n      {-0.85,  0.90}\n   };\n\n   glCreateBuffers(1, &amp;bufferName); // XXX &lt;- segfault here!\n   glNamedBufferStorage(bufferName, sizeof(GLfloat) * 6 * 2, verts, 0);\n\n   program = glCreateProgram();\n\n   vertex = compileShader(shaders[0]);\n   frag = compileShader(shaders[1]);\n\n   glUseProgram(program);\n\n   glGenVertexArrays(1, &amp;vao);\n   glBindVertexArray(vao);\n   glBindBuffer(GL_ARRAY_BUFFER, bufferName);\n   glVertexAttribPointer(vPosition, 2, GL_FLOAT, GL_FALSE, 0, (void*) 0);\n   glEnableVertexAttribArray(vPosition);\n}\n\nvoid display()\n{\n   const GLfloat black[] = {0.0f, 0.0f, 0.0f, 0.0f};\n\n   glClearBufferfv(GL_COLOR, 0, black);\n\n   glBindVertexArray(vao);\n   glDrawArrays(GL_TRIANGLES, 0, 1);\n}\n\nint main(int argc, char** argv)\n{\n   glfwInit();\n\n   GLFWwindow* window = glfwCreateWindow(640, 480, \"Triangles\", NULL, NULL);\n   assert(window);\n\n   glfwMakeContextCurrent(window);\n   GLenum glewErr = glewInit();\n\n   if (glewErr != GLEW_OK)\n   {\n      fprintf(stderr, \"glewInit returned %d\", glewErr);\n      return EXIT_FAILURE;\n   }\n\n   if (GLEW_VERSION_4_3)\n      printf(\"OpenGL 4.3 is supported!\");\n\n   if (GLEW_VERSION_4_4)\n      printf(\"OpenGL 4.4 is supported!\");\n\n   if (GLEW_VERSION_4_5)\n      printf(\"OpenGL 4.5 is supported!\");\n\n   init();\n\n   while (!glfwWindowShouldClose(window))\n   {\n      display();\n      glfwSwapBuffers(window);\n      glfwPollEvents();\n   }\n\n   glfwDestroyWindow(window);\n   glfwTerminate();\n\n   return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>I find that the program segfaults/\"access violation\" at the call to <code>glCreateBuffers()</code>, line 84. One thing I noticed during my investigation is that this is a new function to OpenGL 4.5. I decided to test compatibility by adding the GLEW version checks that are in <code>main()</code>. The only output from this application before segfaulting is:</p>\n\n<pre><code>OpenGL 4.3 is supported!\n</code></pre>\n\n<p>If I replace <code>glCreateBuffers()</code> with <code>glGenBuffers()</code>, the program does <em>not</em> segfault at the same line; instead it dies at the next function call, to <code>glNamedBufferStorage()</code>. From the Khronos documentation, I notice that the two segfaulting functions are OpenGL 4.5, whereas <code>glGenBuffers()</code> has existed for a while.</p>\n\n<p>Library details:</p>\n\n<ul>\n<li>GLFW v3.2.1 (latest) binaries from website</li>\n<li>GLEW comes from the Nsight tool (<code>C:\\Program Files (x86)\\NVIDIA Corporation\\Nsight Visual Studio Edition 5.2\\Monitor\\glew</code>), recently downloaded</li>\n</ul>\n\n<p>I am at a loss as to what I am (probably) doing wrong; please let me know if I am missing anything!</p>\n\n<p>(And if there's any other information I can give to help diagnose, please leave a comment.)</p>\n"}, {"tags": ["c", "gtk", "appindicator"], "answers": [{"comments": [{"owner": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473886576, "post_id": 39499005, "comment_id": 66316596, "body": "Man, what have I done?!? :o Thanks for pointing that out!! I created an extra field for the name &quot;TempI_Main.Core[i].Gtk_Indicator_Name&quot; and used it instead. I&#39;m still getting the warnings and critical messages though. I&#39;ll post the new loop code in the question as an Edit!"}, {"owner": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473887749, "post_id": 39499005, "comment_id": 66317087, "body": "Could the problem be that the heap is dynamic and the string could be changing position during the programs execution? The libappindicator would still have the old address and result in the same undefined behaviour? I&#39;ll try using string literals and see what the result is."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473888036, "post_id": 39499005, "comment_id": 66317188, "body": "with strdup it should be OK. Are you sure that <code>TEMPI_MAX_CHARS</code> is big enough? I would reduce the loop to 1 iteration: easy to do, might shed some light..."}, {"owner": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473888664, "post_id": 39499005, "comment_id": 66317439, "body": "TEMPI_MAX_CHARS is a macro for 4096. I tried making a single core indicator explicitely (all literal strings) and still had the warnings/critical messages. I&#39;ll post the code from this test in &quot;Edit2:&quot;. Maybe this is some limitation on libappindicator in regard to the number of indicators? Maybe the <code>app_indicator_new()</code> runs some routine that isn&#39;t supposed to be ran twice?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473888846, "post_id": 39499005, "comment_id": 66317506, "body": "could <code>app_indicator_new</code> return <code>NULL</code>? and don&#39;t you <code>show</code> your widget too soon? I would show it after everything is set."}, {"owner": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473889843, "post_id": 39499005, "comment_id": 66317888, "body": "libappindicator seems to lack a really descriptive documentation. On the source I found for it (<a href=\"http://libappindicator.sourcearchive.com/documentation/0.2.91.1/app-indicator_8c_source.html\" rel=\"nofollow noreferrer\">libappindicator.sourcearchive.com/documentation/0.2.91.1/&hellip;</a>) <code>app_indicator_new</code> actually does <code>g_object_new (APP_INDICATOR_TYPE,PROP_ID_S, id,PROP_CATEGORY_S, category_from_enum (category),PROP_ICON_NAME_S, icon_name,NULL);</code>. I used an &quot;if-statement&quot; to check if it was returning NULL and it wasn&#39;t. Also, changing the <code>gtk_widget_show()</code> to the end of the routine didn&#39;t make any difference :/"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473890085, "post_id": 39499005, "comment_id": 66317975, "body": "I&#39;m not a Gtk expert not even close, so I cannot help further if it&#39;s not a C-related issue like the first one."}, {"owner": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473891042, "post_id": 39499005, "comment_id": 66318286, "body": "I appreciate your help! Thanks for the heads up on the <code>const char *</code> misuse, could have lead to other bugs quite hard to track! :)"}, {"owner": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "edited": false, "score": 0, "creation_date": 1473892520, "post_id": 39499005, "comment_id": 66318696, "body": "I found what the issue was! It was in another part of the code, where I was calling this function that sets the AppIndicator. It was being called before initializing Gtk with <code>gtk_init()</code>. Thanks for taking the time to help man!"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1473884444, "creation_date": 1473884444, "answer_id": 39499005, "question_id": 39498940, "link": "https://stackoverflow.com/questions/39498940/c-and-libappindicator-creating-multiple-indicators/39499005#39499005", "title": "C and libappindicator - Creating multiple indicators", "body": "<p>That in a loop is just bad:</p>\n\n<pre><code>char IndicatorName[TEMPI_MAX_CHARS];\nsnprintf(IndicatorName, TEMPI_MAX_CHARS,\"TempI_Core %u\",i);\nTempI_Main.Core[i].Gtk_Menu_Root_Description=gtk_menu_item_new_with_label(IndicatorName);\n...\nTempI_Main.Core[i].Gtk_Indicator=app_indicator_new(IndicatorName, ...\n</code></pre>\n\n<p>You are declaring <code>IndicatorName</code> as an auto variable in the loop but pass it to <code>gtk_menu_item_new_with_label</code> which expects a <code>const char *</code>, means: it will just store the address of the string.</p>\n\n<p>Not only the memory will be reused for further iterations and all menus will have the same indicator name within the loop, but exiting the loop the memory will be allocated to some other variable and the names will be trashed => undefined behaviour</p>\n\n<p>You should make <em>a copy</em> of the string like this:</p>\n\n<pre><code>TempI_Main.Core[i].Gtk_Menu_Root_Description=gtk_menu_item_new_with_label(strdup(IndicatorName));\n</code></pre>\n\n<p>(of course a better way would be to store the copied string to be able to deallocate them if needed)</p>\n"}, {"tags": [], "owner": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "is_accepted": true, "score": 0, "last_activity_date": 1473892456, "creation_date": 1473892456, "answer_id": 39500652, "question_id": 39498940, "link": "https://stackoverflow.com/questions/39498940/c-and-libappindicator-creating-multiple-indicators/39500652#39500652", "title": "C and libappindicator - Creating multiple indicators", "body": "<p>I found the root of the issue and it's embarassing to say, but I just misplaced the function that created the AppIndicator. <strong>It was being called before</strong> <code>gtk_init()</code> so that's where all those errors were coming from. First I had:</p>\n\n<pre><code>TempI_Set_Core_Indicator();\n\n//Starts gtk\ngtk_init(&amp;argc,&amp;argv);\n\nTempI_Set_Main_Indicator();\n</code></pre>\n\n<p>and simply replacing it by:</p>\n\n<pre><code>//Starts gtk\ngtk_init(&amp;argc,&amp;argv);\n\nTempI_Set_Main_Indicator();\nTempI_Set_Core_Indicator();\n</code></pre>\n\n<p>was enough to solve the problem. I was focusing so much on the function itself that I didn't stop to look where it was being called.</p>\n"}], "owner": {"reputation": 1528, "user_id": 6676042, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1pROg.jpg?s=128&g=1", "display_name": "IanC", "link": "https://stackoverflow.com/users/6676042/ianc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 39500652, "answer_count": 2, "score": 2, "last_activity_date": 1473892456, "creation_date": 1473884180, "last_edit_date": 1473888748, "question_id": 39498940, "link": "https://stackoverflow.com/questions/39498940/c-and-libappindicator-creating-multiple-indicators", "title": "C and libappindicator - Creating multiple indicators", "body": "<p>I'm programming a simple indicator that is supposed to show an icon for each CPU Core in the Unity panel, that will change color depending on the temperature range.</p>\n\n<p>That would require me to have more than one AppIndicator on the same program, since I think there's no way to have one AppIndicator with multiple icons or use a gtk_container to hold those and append it to the AppIndicator. I'm actually trying to use 1 AppIndicator for the menu (with the \"Quit\" option) and 1 AppIndicator for each CPU Core.</p>\n\n<p>The program had no Gtk warnings with just one AppIndicator (the main one), but after I added the code for creating the other 2 AppIndicators for each CPU Core (both with different unique id's) Gtk started throwing some warnings and critical messages. The indicators show up in the panel just like they are supposed to, but I don't want to simply ignore those messages, as they could be hiding some real issues under the curtains.</p>\n\n<p>Checking the code, the only thing I think could be triggering those warnings and critical messages is <code>app_indicator_new()</code> being called more than once, I actually removed all the menu and menu_item's creation routines for those extra indicators, leaving only the <code>app_indicator_new()</code> call and I still get those messages (one for each extra <code>app_indicator_new()</code> call after the first):</p>\n\n<pre><code>(process:8040): Gtk-CRITICAL **: IA__gtk_icon_theme_get_for_screen: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(process:8040): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(process:8040): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n</code></pre>\n\n<p>When I add the code with the menu being created and associated with the extra AppIndicator's some extra errors show up:</p>\n\n<pre><code>(process:8681): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(process:8681): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n\n(process:8681): Gtk-CRITICAL **: IA__gtk_icon_theme_get_for_screen: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(process:8681): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(process:8681): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n\n(process:8681): Gtk-CRITICAL **: IA__gtk_settings_get_for_screen: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(process:8681): GLib-GObject-CRITICAL **: g_object_ref: assertion 'G_IS_OBJECT (object)' failed\n\n(process:8681): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(process:8681): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n\n(process:8681): Gtk-CRITICAL **: IA__gtk_settings_get_for_screen: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(process:8681): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(process:8681): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n\n(process:8681): Gtk-CRITICAL **: IA__gtk_icon_theme_get_for_screen: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(process:8681): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(process:8681): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n\n(process:8681): Gtk-CRITICAL **: IA__gtk_settings_get_for_screen: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(process:8681): GLib-GObject-CRITICAL **: g_object_ref: assertion 'G_IS_OBJECT (object)' failed\n\n(process:8681): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(process:8681): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n\n(process:8681): Gtk-CRITICAL **: IA__gtk_settings_get_for_screen: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(TempI:8681): Gtk-WARNING **: Screen for GtkWindow not set; you must always set\na screen for a GtkWindow before using the window\n\n(TempI:8681): Gdk-CRITICAL **: IA__gdk_screen_get_display: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(TempI:8681): Gdk-CRITICAL **: IA__gdk_keymap_get_for_display: assertion 'GDK_IS_DISPLAY (display)' failed\n\n(TempI:8681): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(TempI:8681): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n\n(TempI:8681): Gtk-WARNING **: Screen for GtkWindow not set; you must always set\na screen for a GtkWindow before using the window\n\n(TempI:8681): Gdk-CRITICAL **: IA__gdk_screen_get_display: assertion 'GDK_IS_SCREEN (screen)' failed\n\n(TempI:8681): Gdk-CRITICAL **: IA__gdk_keymap_get_for_display: assertion 'GDK_IS_DISPLAY (display)' failed\n\n(TempI:8681): GLib-GObject-WARNING **: invalid (NULL) pointer instance\n\n(TempI:8681): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion 'G_TYPE_CHECK_INSTANCE (instance)' failed\n</code></pre>\n\n<p>I can post the code of the program if necessary, just didn't do it because it would make the question even larger. That's the block where I'm creating the extra AppIndicators though:</p>\n\n<pre><code>for(int i=0; i&lt;TempI_Main.Cores_Counter; i++){\n    TempI_Main.Core[i].Gtk_Menu_Root=gtk_menu_new();\n\n    //The core name (\"Core \" + number)\n    char IndicatorName[TEMPI_MAX_CHARS];\n    snprintf(IndicatorName, TEMPI_MAX_CHARS,\"TempI_Core %u\",i);\n\n    TempI_Main.Core[i].Gtk_Menu_Root_Description=gtk_menu_item_new_with_label(IndicatorName);\n    gtk_menu_append(GTK_MENU(TempI_Main.Core[i].Gtk_Menu_Root),TempI_Main.Core[i].Gtk_Menu_Root_Description);\n    gtk_widget_set_sensitive(GTK_WIDGET(TempI_Main.Core[i].Gtk_Menu_Root_Description),FALSE);\n    gtk_widget_show(TempI_Main.Core[i].Gtk_Menu_Root_Description);\n\n    TempI_Main.Core[i].Gtk_Indicator=app_indicator_new(IndicatorName,\"indicator-messages\",APP_INDICATOR_CATEGORY_APPLICATION_STATUS);\n    app_indicator_set_status(TempI_Main.Core[i].Gtk_Indicator, APP_INDICATOR_STATUS_ACTIVE);\n    //Need to set icon\n    //Need to set attention icon\n\n    app_indicator_set_menu(TempI_Main.Core[i].Gtk_Indicator,GTK_MENU(TempI_Main.Core[i].Gtk_Menu_Root));\n}\n</code></pre>\n\n<p>Any clues what could be the cause? <strong>Are multiple AppIndicators per program not supported</strong>?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Corrected code after @Jean-Fran\u00e7ois Fabre answer.</p>\n\n<pre><code>for(int i=0; i&lt;TempI_Main.Cores_Counter; i++){\n    TempI_Main.Core[i].Gtk_Menu_Root=gtk_menu_new();\n\n    //The core name (\"Core \" + number)\n    char IndicatorName[TEMPI_MAX_CHARS];\n    //MAX_CHARS - 6 (\"Core \"+'\\0') is the limit for appending\n    snprintf(IndicatorName, TEMPI_MAX_CHARS,\"TempI_Core %u\",i);\n\n    TempI_Main.Core[i].Gtk_Indicator_Name=strdup(IndicatorName);\n\n    TempI_Main.Core[i].Gtk_Menu_Root_Description=gtk_menu_item_new_with_label(TempI_Main.Core[i].Gtk_Indicator_Name);\n    gtk_menu_append(GTK_MENU(TempI_Main.Core[i].Gtk_Menu_Root),TempI_Main.Core[i].Gtk_Menu_Root_Description);\n    gtk_widget_set_sensitive(GTK_WIDGET(TempI_Main.Core[i].Gtk_Menu_Root_Description),FALSE);\n    gtk_widget_show(TempI_Main.Core[i].Gtk_Menu_Root_Description);\n\n    TempI_Main.Core[i].Gtk_Indicator=app_indicator_new(TempI_Main.Core[i].Gtk_Indicator_Name,\"indicator-messages\",APP_INDICATOR_CATEGORY_APPLICATION_STATUS);\n    app_indicator_set_status(TempI_Main.Core[i].Gtk_Indicator, APP_INDICATOR_STATUS_ACTIVE);\n    //Need to set icon\n    //Need to set attention icon\n\n    app_indicator_set_menu(TempI_Main.Core[i].Gtk_Indicator,GTK_MENU(TempI_Main.Core[i].Gtk_Menu_Root));\n}\n</code></pre>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>Code for creating a single Core indicator explicitely. Still throwing warnings and critical messages:</p>\n\n<pre><code>TempI_Main.Core[0].Gtk_Menu_Root=gtk_menu_new();\n\nTempI_Main.Core[0].Gtk_Menu_Root_Description=gtk_menu_item_new_with_label(\"Core1\");\ngtk_menu_append(GTK_MENU(TempI_Main.Core[0].Gtk_Menu_Root),TempI_Main.Core[0].Gtk_Menu_Root_Description);\ngtk_widget_set_sensitive(GTK_WIDGET(TempI_Main.Core[0].Gtk_Menu_Root_Description),FALSE);\ngtk_widget_show(TempI_Main.Core[0].Gtk_Menu_Root_Description);\n\nTempI_Main.Core[0].Gtk_Indicator=app_indicator_new(\"Core1\",\"indicator-messages\",APP_INDICATOR_CATEGORY_APPLICATION_STATUS);\napp_indicator_set_status(TempI_Main.Core[0].Gtk_Indicator, APP_INDICATOR_STATUS_ACTIVE);\n//Need to set icon\n//Need to set attention icon\n\napp_indicator_set_menu(TempI_Main.Core[0].Gtk_Indicator,GTK_MENU(TempI_Main.Core[0].Gtk_Menu_Root));\n</code></pre>\n"}, {"tags": ["c", "makefile", "compilation", "cmake", "gnu-make"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1473884535, "post_id": 39498579, "comment_id": 66315573, "body": "Do you use CMake? Or why &quot;cmake&quot; tag?"}], "answers": [{"tags": [], "owner": {"reputation": 1057, "user_id": 4153464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/D55Mz.jpg?s=128&g=1", "display_name": "Work of Artiz", "link": "https://stackoverflow.com/users/4153464/work-of-artiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1473883125, "creation_date": 1473883125, "answer_id": 39498703, "question_id": 39498579, "link": "https://stackoverflow.com/questions/39498579/compile-common-c-files-for-different-targets-with-different-cflags/39498703#39498703", "title": "Compile common C files for different targets with different CFLAGS", "body": "<p>So I think this part of the documentation is what you're after:\n<a href=\"https://www.gnu.org/software/make/manual/html_node/Target_002dspecific.html\" rel=\"nofollow\">https://www.gnu.org/software/make/manual/html_node/Target_002dspecific.html</a></p>\n\n<p>\"There is one more special feature of target-specific variables: when you define a target-specific variable that variable value is also in effect for all prerequisites of this target, and all their prerequisites, etc. (unless those prerequisites override that variable with their own target-specific variable value). So, for example, a statement like this:\"</p>\n\n<pre><code>prog : CFLAGS = -g\nprog : prog.o foo.o bar.o\n</code></pre>\n\n<p>It's important to read through the page, since there are some implications of requiring such a recipe (or just executing it)</p>\n"}], "owner": {"reputation": 127, "user_id": 3664238, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/24578c94ac6509fc186d1a19a5690d88?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/3664238/venkatesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473883125, "creation_date": 1473882634, "question_id": 39498579, "link": "https://stackoverflow.com/questions/39498579/compile-common-c-files-for-different-targets-with-different-cflags", "title": "Compile common C files for different targets with different CFLAGS", "body": "<p>I have a scenario where I need to use the same C files for building the different targets with different CFLAGS.</p>\n\n<p>Lets say like I have common1.c common2.c common3.c common files.</p>\n\n<p>Target1 has other files a.c b.c and CFLAGS as CFLAGS1<br/>\nTarget2 has other files 1.c 2.c and CFLAGS as CFLAGS2</p>\n\n<p>Target1 needs common files compiled with CFLAGS1<br/>\nTarget2 needs common files compiled with CFLAGS2.</p>\n\n<p>How can I do that.</p>\n\n<p>Thanks in Advance<br/>\nVenkatesh</p>\n"}, {"tags": ["c", "groovy"], "comments": [{"owner": {"reputation": 1138, "user_id": 4221945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd64e16069e10f662f0eb2629f262f6?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique Lorre", "link": "https://stackoverflow.com/users/4221945/dominique-lorre"}, "edited": false, "score": 0, "creation_date": 1473883082, "post_id": 39498420, "comment_id": 66314865, "body": "You can <a href=\"http://hildstrom.com/projects/jni/index.html\" rel=\"nofollow noreferrer\">use a Java class from C</a> then you can <a href=\"http://stackoverflow.com/questions/3989592/calling-a-groovy-function-from-java\">check this SO link</a> for ideas."}], "owner": {"reputation": 1684, "user_id": 1518927, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0YFDr.jpg?s=128&g=1", "display_name": "Valerie R", "link": "https://stackoverflow.com/users/1518927/valerie-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473882011, "creation_date": 1473882011, "question_id": 39498420, "link": "https://stackoverflow.com/questions/39498420/call-groovy-script-from-c", "title": "Call Groovy script from C?", "body": "<p>There's information out there on how to call C APIs from Groovy, but we need to do the opposite - call Groovy scripts from a C program.  </p>\n\n<p>We're thinking to start a Groovy \"main\" that invokes a C function through JNI. This gets the JVM going and that C function is essentially our C program. The thing we can't figure out is how to call an arbitrary Groovy function from within this C program. </p>\n\n<p>What we'd like to do is somehow invoke GroovyClassLoader() inside our C code\nto create objects mapping to blobs of Groovy script, and then call the various methods as we need them. </p>\n\n<p>We generally want to stay away from solutions involving multiple processes, pipes, sockets and so forth if at all possible. The data passed to our Groovy functions can be large, and marshalling/un-marshalling it would be way too slow for what we're trying to do. </p>\n\n<p>Thanks in advance to anyone that might point us to a good example!</p>\n"}, {"tags": ["c", "mosquitto", "paho"], "answers": [{"tags": [], "owner": {"reputation": 9782, "user_id": 1180117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/75c3146c3b87a3d4d01d9f7b07521b8f?s=128&d=identicon&r=PG", "display_name": "kiranpradeep", "link": "https://stackoverflow.com/users/1180117/kiranpradeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1474828439, "creation_date": 1474828439, "answer_id": 39690381, "question_id": 39498232, "link": "https://stackoverflow.com/questions/39498232/mosquitto-max-inflight-messages-doesnt-work/39690381#39690381", "title": "mosquitto - max inflight messages doesnt work", "body": "<p>The current version of mosquitto(1.4.10) doesn't allow you to limit number of messages from a client. You can limit the number of connections or message size but not number of messages.</p>\n\n<p>Regarding max_inflight_messages, it's purpose is not to limit total number of messages. It is used to limit number of messges being retried or messages in handshake. Refer mosquitto.conf(<a href=\"https://github.com/eclipse/mosquitto/blob/v1.4.10/mosquitto.conf#L45\" rel=\"nofollow\">1</a>)</p>\n"}], "owner": {"reputation": 1, "user_id": 6776149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c68797bd8a392c23c3792fbd11a5a63?s=128&d=identicon&r=PG&f=1", "display_name": "bhai 410", "link": "https://stackoverflow.com/users/6776149/bhai-410"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474828439, "creation_date": 1473881345, "question_id": 39498232, "link": "https://stackoverflow.com/questions/39498232/mosquitto-max-inflight-messages-doesnt-work", "title": "mosquitto - max inflight messages doesnt work", "body": "<p>I'm using mosquitto broker and Paho client libraries in C. I want the broker to allow only a certain number of messages to be published and block any message above that number. I tried setting the max inflight messages option in the config to a certain number but it does not work. On the publisher side, I am reading some data from a file (line by line) and sending it in a for loop. Setting the max inflight messages in config does not work as the loop always goes through all the iterations and sends all the messages. Any ideas how to solve this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1473881239, "post_id": 39498118, "comment_id": 66313958, "body": "See <code>man sscanf</code>, read from the string, get the data you would like via a format specifier and variable, then format your output from the variable."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 6832217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c201b5ae10edc4187695426511ede21e?s=128&d=identicon&r=PG&f=1", "display_name": "C.Reilly", "link": "https://stackoverflow.com/users/6832217/c-reilly"}, "is_accepted": false, "score": 1, "last_activity_date": 1473909580, "creation_date": 1473909580, "answer_id": 39502617, "question_id": 39498118, "link": "https://stackoverflow.com/questions/39498118/how-to-read-last-3-variable-values-from-txt-file-using-c/39502617#39502617", "title": "How to read last 3 variable values from .txt file using C", "body": "<p>Thanks for the help, I have the code working now as shown below. I'm sure there is a much more elegant way of doing this, but for completeness i'll put up my final code in case it can help someone.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char line[1000];\n    char *pch;\n    char c[] = \"PERCENT FILLED =\";\n    char buff[1000];\n\n\n/* Create a list of PERCENT FILLED values and write to file - copy every line containing PERCENT FILLED from p.out file*/\n    FILE *fp = fopen(\"inputFILE.txt\", \"r\");\n    FILE *op = fopen(\"PERCENT_FILLED.txt\", \"w\");\n\n    if(fp == NULL || op == NULL)\n       {\n          fprintf(stderr, \"Error opening file.\");\n          exit(1);\n       }\n    else \n       {\n         while (fgets(line, sizeof(line), fp) != 0)\n           {\n              if((pch = strstr (line, c))!= 0)\n              fprintf(op, \"%s\", line);\n           }\n       }\n\n   fclose(fp);\n   fclose(op);\n\n\n/* Get the total number of lines in the file PERCENT_FILLED.txt   */\n\n   FILE* myfile = fopen(\"PERCENT_FILLED.txt\", \"r\");\n   int ch, number_of_lines = 0;\n   int line_num = 0;\n   int count = 0;\n   char readline[256];                                /* or other suitable maximum line size */\n   char line1[256];\n   char line2[256];\n   char line3[256];\n\n    do \n    {\n        ch = fgetc(myfile);\n        if(ch == '\\n')\n            number_of_lines++;\n    } while (ch != EOF);\n\n    // last line doesn't end with a new line!\n    // but there has to be a line at least before the last line\n    if(ch != '\\n' &amp;&amp; number_of_lines != 0) \n        number_of_lines++;\n\n    fclose(myfile);\n\n\n\n\n/* Get the last 3 PERCENT_FILLED values from the PERCENT_FILLED.txt   */\n\n\n    FILE* infile = fopen(\"PERCENT_FILLED.txt\", \"r\");\n\n    if ( infile != NULL )\n    {   \n        while (fgets(readline, sizeof line, infile) != NULL) /* read a line */\n        {   \n            if (count == (number_of_lines-4))\n            {   \n               strcpy ( line3, readline);\n               count++;\n            }   \n            else if (count == (number_of_lines-3))\n            {  \n               strcpy ( line2, readline);\n               count++;\n            }\n            else if (count == (number_of_lines-2))\n            {\n               strcpy ( line1, readline);\n               count++;\n            }\n            else\n            {   \n                count++;\n            }   \n        }   \n        fclose(infile);\n    }      \n\n/* strip \"PERCENT FILLED = \" from the string and turn the string into a float  */\n/* Do this for line1, line2, line3 */\n/* Example string is \"  PERCENT FILLED =   6.72902E+00\" need to turn this in to a float varaible of value 6.72902 */\n\n    char per1[7], fil1[6], eq1[1];\n    char per2[7], fil2[6], eq2[1];\n    char per3[7], fil3[6], eq3[1];\n    float value1, value2, value3;\n\n    sscanf (line1, \"%s %s %s %E\", per1, fil1, eq1, &amp;value1 );\n    sscanf (line2, \"%s %s %s %E\", per2, fil2, eq2, &amp;value2 );\n    sscanf (line3, \"%s %s %s %E\", per3, fil3, eq3, &amp;value3 );\n\n    printf(\"Value1: %f\\n\", value1 );\n    printf(\"Value2: %f\\n\", value2 );    \n    printf(\"Value3: %f\\n\", value3 );\n\n\n    return 0;\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6832217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c201b5ae10edc4187695426511ede21e?s=128&d=identicon&r=PG&f=1", "display_name": "C.Reilly", "link": "https://stackoverflow.com/users/6832217/c-reilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1473909580, "creation_date": 1473880911, "question_id": 39498118, "link": "https://stackoverflow.com/questions/39498118/how-to-read-last-3-variable-values-from-txt-file-using-c", "title": "How to read last 3 variable values from .txt file using C", "body": "<p>I have limited experience programming in C, but have to use this language due to software constraints. I'm trying to write a user customisation for a CFD software. </p>\n\n<p>The software writes an output file during the calculation, I want to monitor the variable \"PERCENT FILLED\" and terminate the simulation when the value stabilizes. I can do the termination of the code, the issue I am having is reading in the value for PERCENT FILLED using C, I can easily do this in python or shell script, but am really struggling with C.</p>\n\n<p>There may be a much more elegant way of doing this, I'm happy to learn, but I'm not an experienced programmer, so I may get lost with complex solutions.</p>\n\n<p>I have tried to do this by breaking the task into smaller sub tasks. The efficiency of the code is not important as this function does not have to be run frequently and the file to be read is not very large. I am sure there are faster and more elegant ways of doing this!\nUsing others code from the web and modifying them I have come up with the below. </p>\n\n<p>I tried to do the following sub tasks:\nA) Strip all lines containing \"PERCENT FILLED\" and write them to a file (PERCENT FILLED.txt)\nB) Read the number of lines in this file, then read the last 3 lines into separate variables. \nC) I then need to reformat these variables. For example, change the 3 variables from strings of the form \"PERCENT FILLED =   6.72902E+00\" into a floats of values such as 6.72902.</p>\n\n<p>I have completed A), have an error in B), and can't work out where to start with C).</p>\n\n<p>ERROR in B) - When I run the code it correctly assigns values for line1, line2, and line3 whilst in the while loop, however once outside the while loop all values change to that of line1. This I do not understand. Can anyone help me understand and resolve this? </p>\n\n<p>Example code output:</p>\n\n<pre><code>line3: PERCENT FILLED =   6.31275E+00\nline2: PERCENT FILLED =   6.50146E+00\nline1: PERCENT FILLED =   6.72902E+00\n****************** \nout line1: PERCENT FILLED =   6.72902E+00\nout line2: PERCENT FILLED =   6.72902E+00\nout line3: PERCENT FILLED =   6.72902E+00\n</code></pre>\n\n<p>Part C) - I have no idea where to start with this. It looks like there is enough information inline to use atof() for the conversion of the string to a float. However, I first need to remove  PERCENT FILLED = from the start of the string and then convert the engineering number format (some values are 1.00E+02 so simply stripping the last 4 characters - E+00 - will not work). This I can't work out how to do. any help would be appreciated. </p>\n\n<p>Example input file (simplified by removing may lines between the PERCENT FILLED values):</p>\n\n<pre><code>  Step = 171 Iteration = 0 Time step = 0.014849 Time = 4.834002\n  Iter Variable Solver Loops          Delta      Solve CPU       Form CPU\n     0        F  EXPLC     4   1.0000000E+00       0.007999       0.000000\n FRACTION SOLID = 0.000000e+00 %\n PERCENT FILLED =   5.46882E+00\n  Step = 172 Iteration = 0 Time step = 0.029698 Time = 4.863700\n  Iter Variable Solver Loops          Delta      Solve CPU       Form CPU\n     0        F  EXPLC    11   1.0000000E+00       0.018997       0.000000\n FRACTION SOLID = 0.000000e+00 %\n PERCENT FILLED =   5.70902E+00\n  Step = 173 Iteration = 0 Time step = 0.029698 Time = 4.893398\n  Time step reduced by COURANT limit in free_surface, c_lim = 2.032750e-02\n  Iter Variable Solver Loops          Delta      Solve CPU       Form CPU\n     0        F  EXPLC     6   1.0000000E+00       0.010998       0.000000\n FRACTION SOLID = 0.000000e+00 %\n PERCENT FILLED =   5.89665E+00\n  Step = 174 Iteration = 0 Time step = 0.020328 Time = 4.904356\n  Iter Variable Solver Loops          Delta      Solve CPU       Form CPU\n     0        F  EXPLC     7   1.0000000E+00       0.011997       0.000000\n FRACTION SOLID = 0.000000e+00 %\n PERCENT FILLED =   6.08026E+00\n  Step = 175 Iteration = 0 Time step = 0.040655 Time = 4.945011\n  Time step reduced by COURANT limit in free_surface, c_lim = 2.547617e-02\n  Iter Variable Solver Loops          Delta      Solve CPU       Form CPU\n     0        F  EXPLC     9   1.0000000E+00       0.016998       0.000000\n FRACTION SOLID = 0.000000e+00 %\n PERCENT FILLED =   6.31275E+00\n  Step = 176 Iteration = 0 Time step = 0.025476 Time = 4.955307\n  Time step reduced by COURANT limit in free_surface, c_lim = 1.997734e-02\n  Iter Variable Solver Loops          Delta      Solve CPU       Form CPU\n     0        F  EXPLC     9   1.0000000E+00       0.016994       0.000000\n FRACTION SOLID = 0.000000e+00 %\n PERCENT FILLED =   6.50146E+00\n  Step = 177 Iteration = 0 Time step = 0.039955 Time = 4.989764\n  Time step reduced by COURANT limit in free_surface, c_lim = 2.547537e-02\n  Iter Variable Solver Loops          Delta      Solve CPU       Form CPU\n     0        F  EXPLC    13   1.0000000E+00       0.024994       0.000000\n FRACTION SOLID = 0.000000e+00 %\n PERCENT FILLED =   6.72902E+00\n</code></pre>\n\n<p>My current code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char line[1000];\n    char *pch;\n    char c[] = \"PERCENT FILLED =\";\n    char buff[1000];\n\n\n/* Create a list of PERCENT FILLED values and write to file - copy every line containing PERCENT FILLED from p.out file*/\n    FILE *fp = fopen(\"inputFILE.txt\", \"r\");\n    FILE *op = fopen(\"PERCENT_FILLED.txt\", \"w\");\n\n    if(fp == NULL || op == NULL)\n       {\n          fprintf(stderr, \"Error opening file.\");\n          exit(1);\n       }\n    else \n       {\n         while (fgets(line, sizeof(line), fp) != 0)\n           {\n              if((pch = strstr (line, c))!= 0)\n              fprintf(op, \"%s\", line);\n           }\n       }\n\n   fclose(fp);\n   fclose(op);\n\n\n/* Get the total number of lines in the file PERCENT_FILLED.txt   */\n\n   FILE* myfile = fopen(\"PERCENT_FILLED.txt\", \"r\");\n   int ch, number_of_lines = 0;\n   int line_num = 0;\n   int count = 0;\n   char readline[256];                                /* or other suitable maximum line size */\n   char* line1;\n   char* line2;\n   char* line3;\n\n    do \n    {\n        ch = fgetc(myfile);\n        if(ch == '\\n')\n            number_of_lines++;\n    } while (ch != EOF);\n\n    // last line doesn't end with a new line!\n    // but there has to be a line at least before the last line\n    if(ch != '\\n' &amp;&amp; number_of_lines != 0) \n        number_of_lines++;\n\n    fclose(myfile);\n\n\n\n\n/* Get the last 3 PERCENT_FILLED values from the PERCENT_FILLED.txt   */\n\n\n    FILE* infile = fopen(\"PERCENT_FILLED.txt\", \"r\");\n\n    if ( infile != NULL )\n    {   \n        while (fgets(readline, sizeof line, infile) != NULL) /* read a line */\n        {   \n            if (count == (number_of_lines-4))\n            {   \n               line3 = readline;\n               count++;\n               printf(\"\\nline3:%s\", line3);\n            }   \n            else if (count == (number_of_lines-3))\n            {  \n               line2 = readline;\n               count++;\n               printf(\"line2:%s\", line2);\n            }\n            else if (count == (number_of_lines-2))\n            {\n               line1 = readline;\n               count++;\n               printf(\"line1:%s\", line1);\n            }\n            else\n            {   \n                count++;\n                printf(\"readline:%s count:%d\\n\", readline, count);\n            }   \n        }   \n        fclose(infile);\n    }   \n    printf(\"******************\\n\");\n    printf(\"out line1:%s\", line1);\n    printf(\"out line2:%s\", line2);\n    printf(\"out line3:%s\\n\\n\", line3);\n\n\n/* strip \"PERCENT FILLED = \" from the string and turn the string into a float  */\n/* Do this for line1, line2, line3 */\n/* Example string is \"  PERCENT FILLED =   6.72902E+00\" need to turn this in to a float variable of value 6.72902 */\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "mpi", "fftw"], "comments": [{"owner": {"reputation": 121, "user_id": 6338221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea6f571467a663bcec1af3967222139e?s=128&d=identicon&r=PG&f=1", "display_name": "Burgundy", "link": "https://stackoverflow.com/users/6338221/burgundy"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1473880808, "post_id": 39497757, "comment_id": 66313726, "body": "I will try that"}, {"owner": {"reputation": 121, "user_id": 6338221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea6f571467a663bcec1af3967222139e?s=128&d=identicon&r=PG&f=1", "display_name": "Burgundy", "link": "https://stackoverflow.com/users/6338221/burgundy"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1473881167, "post_id": 39497757, "comment_id": 66313925, "body": "do you know how to do so?"}, {"owner": {"reputation": 121, "user_id": 6338221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea6f571467a663bcec1af3967222139e?s=128&d=identicon&r=PG&f=1", "display_name": "Burgundy", "link": "https://stackoverflow.com/users/6338221/burgundy"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1473882073, "post_id": 39497757, "comment_id": 66314359, "body": "I did that and still had the same issue but with different functions so I also added -lfftw3 and now it works, thank you!!"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1473884705, "post_id": 39497757, "comment_id": 66315659, "body": "Actually it looks like OpenMPI isn&#39;t that straightforward -- try <code>mpicc -I&#47;usr&#47;local&#47;include test.c -L&#47;usr&#47;local&#47;lib -lfftw3_mpi</code>"}, {"owner": {"reputation": 121, "user_id": 6338221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea6f571467a663bcec1af3967222139e?s=128&d=identicon&r=PG&f=1", "display_name": "Burgundy", "link": "https://stackoverflow.com/users/6338221/burgundy"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1473888990, "post_id": 39497757, "comment_id": 66317567, "body": "it compiled both ways, both saw the same time computing the fft"}], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 6262233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8cf20b335862b1287a647625058e2e0?s=128&d=identicon&r=PG&f=1", "display_name": "petrmikheev", "link": "https://stackoverflow.com/users/6262233/petrmikheev"}, "is_accepted": false, "score": 1, "last_activity_date": 1473955387, "creation_date": 1473955387, "answer_id": 39515629, "question_id": 39497757, "link": "https://stackoverflow.com/questions/39497757/compiling-fftw-with-mpi-in-c/39515629#39515629", "title": "Compiling FFTW with MPI in C", "body": "<ol>\n<li><p>Add <code>-lfftw3</code> after <code>-lfftw3_mpi</code></p></li>\n<li><p>Use <code>mpicxx</code> instead of <code>gcc</code></p></li>\n</ol>\n\n<p>Command: <code>mpicxx test.c -lfftw3_mpi -lfftw3</code></p>\n"}], "owner": {"reputation": 121, "user_id": 6338221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea6f571467a663bcec1af3967222139e?s=128&d=identicon&r=PG&f=1", "display_name": "Burgundy", "link": "https://stackoverflow.com/users/6338221/burgundy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1473955387, "creation_date": 1473879496, "question_id": 39497757, "link": "https://stackoverflow.com/questions/39497757/compiling-fftw-with-mpi-in-c", "title": "Compiling FFTW with MPI in C", "body": "<p>I have installed both Open MPI and FFTW onto my mac. I've successfully used FFTW, now I'm trying to use it with MPI. </p>\n\n<p>Here is what I am trying to run:</p>\n\n<pre><code>int main(int argc, char **argv){\n    clock_t time0, time1;\n    int N = 10;\n    fftw_complex *in, *out;\n    fftw_plan p;\n    MPI_Init(&amp;argc, &amp;argv);\n    fftw_mpi_init();\n    in = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * N);\n    out = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * N);\n    p = fftw_mpi_plan_dft_1d(N, in, out,MPI_COMM_WORLD, FFTW_FORWARD, FFTW_ESTIMATE);\n    for (int i = 0; i&lt;N; i++) {\n        in[i]=i+(i+1)*I;\n    }\n    time0 = clock();\n    fftw_execute(p);\n    time1 = clock();\n    printf(\" FFT time = %f \\n\\n\", (float)(time1 - time0)/CLOCKS_PER_SEC);\n    fftw_destroy_plan(p);\n    fftw_free(in); fftw_free(out);\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>Here is how I am attempting to compile:</p>\n\n<pre><code>gcc -I/usr/local/include test.c -L/usr/local/lib -lfftw3_mpi\n</code></pre>\n\n<p>This is nearly identical to how I compiled without mpi and all worked fine:</p>\n\n<pre><code>gcc -I/usr/local/include test.c -L/usr/local/lib -lfftw3\n</code></pre>\n\n<p>But Now I see a lot of this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/m4lXj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m4lXj.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I fix this issue? I know I installed OpenMPI, the installation of FFTW failed without it.</p>\n"}, {"tags": ["c", "shell", "pipe", "piping"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1473882627, "post_id": 39497736, "comment_id": 66314632, "body": "The parent appears to wait for each child to exit before it forks the next. That&#39;s wrong on several levels.  It needs to start <i>all</i> of the children and then wait for all of them."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1473883574, "post_id": 39497736, "comment_id": 66315108, "body": "In the case that <code>execvp()</code> fails, why does the child send itself a <code>SIGTERM</code>?  It would be much easier to just <code>exit()</code>.  Also, you can test <code>execvp()</code>&#39;s return value if you want, but you don&#39;t need to do because it returns only if it fails."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1473885794, "post_id": 39497736, "comment_id": 66316217, "body": "You appear to have <code>printf()</code> calls for debugging, in which you hardcode line numbers.  I don&#39;t have a problem with print statements for debugging purposes, but you should consider using the <code>__LINE__</code> macro instead of hard-coding line numbers."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1473885869, "post_id": 39497736, "comment_id": 66316252, "body": "You make a lot of system calls without checking return values.  You really ought to check every one.  The preprocessor can help you do that with minimum uglification of your code."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1473886110, "post_id": 39497736, "comment_id": 66316371, "body": "Flipping back and forth between the two file descriptor arrays is clever, but repeatedly testing the parity of <code>i</code> to determine which to use for any particular purpose is not.  You can greatly simplify all that by creating a 2x2 array for the file descriptors and making strategic use of pointers."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6200891, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9dd2923e4708de4c799eff608b04649c?s=128&d=identicon&r=PG&f=1", "display_name": "rsa", "link": "https://stackoverflow.com/users/6200891/rsa"}, "edited": false, "score": 0, "creation_date": 1473894249, "post_id": 39499414, "comment_id": 66319187, "body": "When I run this code, the same command &quot;cat txt.txt | grep a&quot; only appears to do the first command, and not the second after the pipe. (It cats out the txt file but does not grep) Any ideas why this could be happening? I implemented your doPipe method in my code and passed in my StringArray sa which is just a char ** as well."}, {"owner": {"reputation": 69, "user_id": 6200891, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9dd2923e4708de4c799eff608b04649c?s=128&d=identicon&r=PG&f=1", "display_name": "rsa", "link": "https://stackoverflow.com/users/6200891/rsa"}, "edited": false, "score": 0, "creation_date": 1473904026, "post_id": 39499414, "comment_id": 66321382, "body": "I&#39;ve tried all of this but still can&#39;t get my redirection code to work with this. Essentially, I&#39;m confused as to where in this code I should be checking for &#39;&lt;&#39; or &#39;&gt;&#39;, then adding my if(in) {           if ((fd0 = open(input, O_RDONLY, 0)) &lt; 0) {             exit(0);         }                    dup2(fd0, 0);          close(fd0);      }     if (out)     {         int fd00 ;         if ((fd00 = creat(output , 0644)) &lt; 0) {             exit(0);         }                    dup2(fd00, STDOUT_FILENO);          close(fd00);     }"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 4, "last_activity_date": 1473966255, "last_edit_date": 1495535246, "creation_date": 1473886093, "answer_id": 39499414, "question_id": 39497736, "link": "https://stackoverflow.com/questions/39497736/pipe-function-not-executing-properly/39499414#39499414", "title": "Pipe function not executing properly", "body": "<p>One of your big problems may be doing <code>waitpid</code> on each iteration of the pipeline construction. The waiting should be done at the end (remembering the pids in a list).</p>\n\n<p>I had some difficulty understanding your code, so I did some simplification and cleanup. In particular, doing <code>if (i % 2 ...)</code> everywhere made things harder.</p>\n\n<p>I've cleaned up and fixed the code. I added a struct to make things easier to manage [please pardon the gratuitous style cleanup]:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\ntypedef struct {\n    int pipe_fildes[2];\n} pipectl_t;\n\n#define CLOSEME(_fd) \\\n    do { \\\n        close(_fd); \\\n        _fd = -1; \\\n    } while (0)\n\nvoid\ndoPipe(char **sa)\n{\n    pipectl_t pipes[2];\n    pipectl_t *pipein;\n    pipectl_t *pipeout;\n    pipectl_t *pipetmp;\n\n    int num_cmds = 0;\n\n    char *command[256];\n    pid_t pidlist[256];\n\n    pid_t pid;\n\n    int err = -1;\n    int end = 0;\n\n    // Variables used for the different loops\n    int icmd = 0;\n    int j = 0;\n    int k = 0;\n    int l = 0;\n\n    // First we calculate the number of commands (they are separated\n    // by '|')\n    for (int l = 0;  sa[l] != NULL;  ++l) {\n        if (strcmp(sa[l], \"|\") == 0)\n            num_cmds++;\n    }\n    num_cmds++;\n\n    for (int ipipe = 0;  ipipe &lt;= 1;  ++ipipe) {\n        pipes[ipipe].pipe_fildes[0] = -1;\n        pipes[ipipe].pipe_fildes[1] = -1;\n    }\n\n    pipein = &amp;pipes[0];\n    pipeout = &amp;pipes[1];\n\n    // Main loop of this method. For each command between '|', the\n    // pipes will be configured and standard input and/or output will\n    // be replaced. Then it will be executed\n    while (sa[j] != NULL &amp;&amp; end != 1) {\n        // We use an auxiliary array of pointers to store the command\n        // that will be executed on each iteration\n        k = 0;\n        while (strcmp(sa[j], \"|\") != 0) {\n            command[k] = sa[j];\n            j++;\n            k++;\n            if (sa[j] == NULL) {\n                // 'end' variable used to keep the program from entering\n                // again in the loop when no more arguments are found\n                end = 1;\n                break;\n            }\n        }\n\n        // Last position of the command will be NULL to indicate that\n        // it is its end when we pass it to the exec function\n        command[k] = NULL;\n\n        j++;\n\n        // swap input and output, so previous child's output becomes the new\n        // child's input\n        // NOTE: by doing this here, in one place, we eliminate all the i % 2\n        // if statements\n        pipetmp = pipein;\n        pipein = pipeout;\n        pipeout = pipetmp;\n\n        // are we the last command?\n        int lastflg = (icmd == (num_cmds - 1));\n\n        // last command does _not_ have an output pipe, so don't create one\n        if (! lastflg)\n            pipe(pipeout-&gt;pipe_fildes);\n\n        pid = fork();\n\n        // NOTE: fork failure almost never happens and is fatal\n        if (pid == -1) {\n            printf(\"Child process could not be created\\n\");\n            return;\n        }\n\n        // process child\n        if (pid == 0) {\n            // NOTE: after we've dup'ed a file descriptor, we close it\n\n            // first command does _not_ have a pipe for input\n            if (icmd &gt; 0)\n                dup2(pipein-&gt;pipe_fildes[0],STDIN_FILENO);\n            CLOSEME(pipein-&gt;pipe_fildes[0]);\n\n            // last command does _not_ have a pipe for output\n            if (! lastflg)\n                dup2(pipeout-&gt;pipe_fildes[1],STDOUT_FILENO);\n            CLOSEME(pipeout-&gt;pipe_fildes[1]);\n\n            // close the parent sides of the pipes (in this child)\n\n            // close previous child's output descriptor (the feed for our input)\n            CLOSEME(pipein-&gt;pipe_fildes[1]);\n\n            // close next child's input descriptor (our feed for its input)\n            CLOSEME(pipeout-&gt;pipe_fildes[0]);\n\n            if (execvp(command[0], command) == err) {\n#if 0\n                kill(getpid(), SIGTERM);\n#else\n                exit(1);\n#endif\n            }\n        }\n\n        // close all input descriptors for _this_ child\n        CLOSEME(pipein-&gt;pipe_fildes[0]);\n        CLOSEME(pipein-&gt;pipe_fildes[1]);\n\n        // close output side of _this_ child's output pipe [which becomes next\n        // child's input pipe]\n        CLOSEME(pipeout-&gt;pipe_fildes[1]);\n\n        pidlist[icmd] = pid;\n\n        icmd++;\n    }\n\n    // wait for all pids _after_ the entire pipeline is constructed\n    for (int icmd = 0;  icmd &lt; num_cmds;  ++icmd)\n        waitpid(pidlist[icmd], NULL, 0);\n}\n\n// main -- main program\nint\nmain(int argc,char **argv)\n{\n    char *cp;\n    char *bp;\n    char buf[1000];\n    char **av;\n    char *avlist[256];\n\n    --argc;\n    ++argv;\n\n    for (;  argc &gt; 0;  --argc, ++argv) {\n        cp = *argv;\n        if (*cp != '-')\n            break;\n\n        switch (cp[1]) {\n        default:\n            break;\n        }\n    }\n\n    while (1) {\n        printf(\"&gt; \");\n        fflush(stdout);\n\n        cp = fgets(buf,sizeof(buf),stdin);\n        if (cp == NULL)\n            break;\n\n        av = avlist;\n        bp = buf;\n        while (1) {\n            cp = strtok(bp,\" \\t\\r\\n\");\n            bp = NULL;\n\n            if (cp == NULL)\n                break;\n\n            *av++ = cp;\n        }\n        *av = NULL;\n\n        doPipe(avlist);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<blockquote>\n  <p>When I run this code, the same command <code>cat txt.txt | grep a</code> only appears to do the first command, and not the second after the pipe. (It cats out the txt file but does not grep)</p>\n</blockquote>\n\n<p>I tested the entire program before I posted. I just retested using a <code>cat/grep</code> command. It worked, but that was my program unchanged.</p>\n\n<blockquote>\n  <p>Any ideas why this could be happening? I implemented your doPipe method in my code and passed in my StringArray sa which is just a char ** as well.</p>\n</blockquote>\n\n<p>My suggestions are:</p>\n\n<ol>\n<li>Verify that my unchanged version works for you.</li>\n<li>Using <code>gdb</code> breakpoint on <code>doPipe</code> and look at the arguments. For both programs, they should be the same.</li>\n<li>If <code>StringArray</code> is truly <code>char **</code>, replace it in your version to ensure it makes no difference. That is <code>void doPipe(char **sa)</code> and see if your code still compiles. In <code>gdb</code> at the breakpoint, you should be able to do <code>ptype sa</code> on both programs</li>\n<li>The <code>StringArray</code> looks a bit \"Java-esque\" to me :-) I'd avoid it, particularly here since <code>execvp</code> wants a <code>char **</code></li>\n<li>Verify that <code>sa</code> is properly <code>NULL</code> terminated. If it isn't the last command in the pipeline may be bogus/garbage and the error checking for a failed <code>execvp</code> isn't that robust.</li>\n<li>Verify that <code>num_cmds</code> is the same.</li>\n<li>Try <code>cat txt.txt | grep a | sed -e s/a/b/</code>. If you get the <code>cat</code> and <code>grep</code>, but not the <code>sed</code>, this means <code>num_cmds</code> is not correct</li>\n<li>Verify that caller's parsing of the buffer puts the <code>\"|\"</code> in a separate token. That is, this code works with <code>cat txt.txt | grep a</code> but it will <em>not</em> work with: <code>cat txt.txt|grep a</code></li>\n</ol>\n\n<hr>\n\n<p><strong>UPDATE #2:</strong></p>\n\n<p>BTW, if your pipe code still isn't working (e.g. the last command is <em>not</em> executed), check to see if the last token has newline on it (i.e. the newline wasn't stripped correctly).</p>\n\n<blockquote>\n  <p>I've tried all of this but still can't get my redirection code to work with this. Essentially, I'm confused as to where in this code I should be checking for '&lt;' or '>'</p>\n</blockquote>\n\n<p>Doing the general parsing to support redirection (e.g. <code>&lt;</code> or <code>&gt;</code>), pipes (e.g. <code>|</code>),  multiple commands per line (e.g. <code>;</code>), embedded sub-shells (e.g. <code>(echo the date is ; date)</code>, and detached jobs (e.g. <code>&amp;</code>) can require a bit of care and you need a multilevel approach.</p>\n\n<p>I suspect that after you get pipes and/or redirection working, you're tasked with implementing even more shell syntax. I've done this before, so, rather than you figuring it out piecemeal, here is what you'll need to do ...</p>\n\n<p>You'll need to scan the input buffer char-by-char and save off tokens into a \"token\" struct that also has a type. You'll need a linked list of those structs. More on this below.</p>\n\n<p>When you encounter a quoted string, you'll need to strip off the quotes: <code>\"abc\"</code> --> <code>abc</code>, being mindful of escaped quotes: <code>\"ab\\\"c</code> --> <code>ab\"c</code>.</p>\n\n<p>Also, you have to be careful about quoted strings abutting [what <code>perl</code> calls] \"bareword\" strings: <code>echo abc</code>. If we have <code>abc\"d ef\"ghi</code>, this needs to be concatenated into a single string token: <code>abcd efghi</code></p>\n\n<p>Backslashes on redirectors must also be accounted for. <code>echo abc &gt; def</code> is a redirection that will put <code>abc</code> into the file <code>def</code>. But, <code>echo abc \\&gt; def</code> should just output <code>abc &gt; def</code> literally to stdout. Backslash on the other \"punctuation\" is similar.</p>\n\n<p>You'll also have to handle the fact that punctuation doesn't <em>have</em> to have whitespace around it.  That is, <code>echo abc&gt;def</code> has to be handled just as if it were <code>echo abc &gt; def</code>.</p>\n\n<p>Also, punctuation inside a quoted string should be treated as if it were escaped above. That is, <code>echo abc \"&gt;\" def</code> is <em>not</em> a redirection and [again] should be treated as a simple command.</p>\n\n<p>Also, if the current line <em>ends</em> in a backslash (e.g. <code>\\&lt;newline&gt;</code>), this means that the next line is a \"continuation\" line. You should strip the backslash and the newline. Then, read another line and continue to build up the token list.</p>\n\n<p>Further, while <code>&amp;</code> can be for detached jobs, as in: <code>date &amp;</code>, it can also be part of a redirection, as in <code>gcc -o myshell myshell.c 2&gt;&amp;1 &gt;logfile</code></p>\n\n<p>Okay, so to manage all this we need types for tokens and a token struct:</p>\n\n<pre><code>// token types\ntypedef enum {\n    TOKEN_NORMAL,                       // simple token/string\n    TOKEN_QUO1,                         // quoted string\n    TOKEN_QUO2,                         // quoted string\n    TOKEN_SEMI,                         // command separater (e.g. ;)\n    TOKEN_OREDIR,                       // output redirector (e.g. &gt;)\n    TOKEN_IREDIR,                       // input redirector (e.g. &lt;)\n    TOKEN_PIPE,                         // pipe separater (e.g. |)\n    TOKEN_AMP                           // an &amp; (can be detach or redirect)\n} toktype_t;\n\n// token control\ntypedef struct token token_t;\nstruct token {\n    token_t *tok_next;                  // forward link\n    token_t *tok_prev;                  // backward link\n    toktype_t tok_type;                 // token type\n    char tok_str[256];                  // token value\n};\n\n// token list\ntypedef struct tlist tlist_t;\nstruct token {\n    tlist_t *tlist_next;                // forward link\n    tlist_t *tlist_prev;                // backward link\n\n    token_t *tlist_head;                // pointer to list head\n    token_t *tlist_tail;                // pointer to list tail\n};\n</code></pre>\n\n<p>Initially, after parsing an input line [being mindful of the continuations], we have a single <code>tlist</code>.</p>\n\n<p>If the list has <code>;</code> separaters in it, we split on them to create sublists. We then loop on the sublists and execute the commands in order.</p>\n\n<p>When looking at a subcommand, if it ends in <code>&amp;</code>, the command must be run detached. We note that and pop it off the back of the list.</p>\n\n<p>Okay, now we have a list that might be of the form:</p>\n\n<pre><code>cat &lt; /etc/passwd | grep root | sed -e s/root/admin/ &gt; /tmp/out\n</code></pre>\n\n<p>Now, we do a further split on the <code>|</code> so we have a list that has three elements:</p>\n\n<pre><code>cat &lt; /etc/passwd\ngrep root\nsed -e s/root/admin/ &gt; /tmp/out\n</code></pre>\n\n<p>Actually, each of those \"lines\" is a <code>tlist</code> and this is a two dimensional list of lists:</p>\n\n<pre><code>list_of_tlists:\n  |\n  |\ntlist[0] --&gt; cat --&gt; &lt; --&gt; /etc/passwd\n  |\n  |\ntlist[1] --&gt; grep --&gt; root\n  |\n  |\ntlist[2] --&gt; sed --&gt; -e --&gt; s/root/admin/ --&gt; &gt; /tmp/out\n</code></pre>\n\n<p>As we create the pipeline, we note the redirections and do file <code>open</code> instead of <code>pipe</code> as needed.</p>\n\n<p>Okay, that's the abstract.</p>\n\n<p>See my answer here: <a href=\"https://stackoverflow.com/questions/35569673/implementing-input-output-redirection-in-a-linux-shell-using-c/35570162#35570162\">Implementing input/output redirection in a Linux shell using C</a> for a full and complete implementation.</p>\n\n<p>On that page, there is code for just doing redirections. It could probably be adapted to include pipes by merging that code with the code I've posted here. </p>\n\n<p>That OP asked for help in doing redirections <em>and</em> pipes.</p>\n\n<p><em>Side note:</em> At that time, there was a spate of shell implementation questions. So, I ended up producing a full shell that does pretty much everything. But, that version was too large to post on SO. So, in that page, find the pastebin link I posted. It has full source code. It can be downloaded, built, and run.</p>\n\n<p>You may not want to use <em>that</em> code directly, but it should give you some ideas. Also, the full version may do things a little bit differently than what I've described above.</p>\n"}], "owner": {"reputation": 69, "user_id": 6200891, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9dd2923e4708de4c799eff608b04649c?s=128&d=identicon&r=PG&f=1", "display_name": "rsa", "link": "https://stackoverflow.com/users/6200891/rsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473966255, "creation_date": 1473879421, "last_edit_date": 1473880219, "question_id": 39497736, "link": "https://stackoverflow.com/questions/39497736/pipe-function-not-executing-properly", "title": "Pipe function not executing properly", "body": "<p>I have constructed the following program to try to pipe in my own shell. A <code>StringArray</code> is simply a <code>char**</code> I have constructed. The code runs fine, but when I put in <code>cat txt.txt | grep a</code>, nothing prints back to the screen. When debugging, I saw that the code seems to stop around like 152 (where the print-out command is), where <code>pid==0</code> and <code>i==0</code>. </p>\n\n<p>For context, I'm calling this function in another function after a pipe has been detected. </p>\n\n<pre><code>void doPipe(StringArray sa) \n{\n    printf(\"In 69\\n\"); \n    int filedes[2]; // pos. 0 output, pos. 1 input of the pipe\n    int filedes2[2];\n\n    int num_cmds = 0;\n\n    char *command[256];\n\n    pid_t pid;\n\n    int err = -1;\n    int end = 0;\n\n    // Variables used for the different loops\n    int i = 0;\n    int j = 0;\n    int k = 0;\n    int l = 0;\n\n    // First we calculate the number of commands (they are separated\n    // by '|')\n    while (sa[l] != NULL){\n        if (strcmp(sa[l],\"|\") == 0){\n            num_cmds++;\n        }\n        l++;\n    }\n    num_cmds++;\n\n    // Main loop of this method. For each command between '|', the\n    // pipes will be configured and standard input and/or output will\n    // be replaced. Then it will be executed\n    while (sa[j] != NULL &amp;&amp; end != 1){\n        k = 0;\n        // We use an auxiliary array of pointers to store the command\n        // that will be executed on each iteration\n        while (strcmp(sa[j],\"|\") != 0){\n            command[k] = sa[j];\n            j++;    \n            if (sa[j] == NULL){\n                // 'end' variable used to keep the program from entering\n                // again in the loop when no more arguments are found\n                end = 1;\n                k++;\n                break;\n            }\n            k++;\n        }\n        // Last position of the command will be NULL to indicate that\n        // it is its end when we pass it to the exec function\n        command[k] = NULL;\n        j++;        \n        printf(\"In 121\\n\"); \n\n        // Depending on whether we are in an iteration or another, we\n        // will set different descriptors for the pipes inputs and\n        // output. This way, a pipe will be shared between each two\n        // iterations, enabling us to connect the inputs and outputs of\n        // the two different commands.\n        if (i % 2 != 0){\n            pipe(filedes); // for odd i\n        }else{\n            pipe(filedes2); // for even i\n        }\n\n        pid=fork();\n\n        if(pid==-1){            \n            if (i != num_cmds - 1){\n                if (i % 2 != 0){\n                    close(filedes[1]); // for odd i\n                }else{\n                    close(filedes2[1]); // for even i\n                } \n            }           \n            printf(\"Child process could not be created\\n\");\n            return;\n        }\n        if(pid==0){\n            printf(\"In 148\\n\"); \n\n            // If we are in the first command\n            if (i == 0){\n                printf(\"In 152\\n\"); \n\n                dup2(filedes2[1], STDOUT_FILENO);\n            }\n            // If we are in the last command, depending on whether it\n            // is placed in an odd or even position, we will replace\n            // the standard input for one pipe or another. The standard\n            // output will be untouched because we want to see the \n            // output in the terminal\n            else if (i == num_cmds - 1){\n                printf(\"In 162\\n\"); \n\n                if (num_cmds % 2 != 0){ // for odd number of commands\n                    dup2(filedes[0],STDIN_FILENO);\n                    printf(\"In 166\\n\"); \n\n                }else{ // for even number of commands\n                    dup2(filedes2[0],STDIN_FILENO);\n                    printf(\"In 166\\n\"); \n\n                }\n            // If we are in a command that is in the middle, we will\n            // have to use two pipes, one for input and another for\n            // output. The position is also important in order to choose\n            // which file descriptor corresponds to each input/output\n            }else{ // for odd i\n                if (i % 2 != 0){\n                    dup2(filedes2[0],STDIN_FILENO); \n                    dup2(filedes[1],STDOUT_FILENO);\n                }else{ // for even i\n                    dup2(filedes[0],STDIN_FILENO); \n                    dup2(filedes2[1],STDOUT_FILENO);                    \n                } \n            }\n\n            if (execvp(command[0],command)==err){\n                kill(getpid(),SIGTERM);\n            }       \n        }\n\n        // CLOSING DESCRIPTORS ON PARENT\n        if (i == 0){\n            close(filedes2[1]);\n        }\n        else if (i == num_cmds - 1){\n            if (num_cmds % 2 != 0){                 \n                close(filedes[0]);\n            }else{                  \n                close(filedes2[0]);\n            }\n        }else{\n            if (i % 2 != 0){                    \n                close(filedes2[0]);\n                close(filedes[1]);\n            }else{                  \n                close(filedes[0]);\n                close(filedes2[1]);\n            }\n        }\n\n        waitpid(pid,NULL,0);\n\n        i++;    \n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "rsync"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1473879248, "post_id": 39497653, "comment_id": 66312930, "body": "MinGW is just a port of common POSIX tools into a Windows environment. It does not provide a POSIX system-call compatibility layer. Try Cygwin for that."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 3, "creation_date": 1473880644, "post_id": 39497653, "comment_id": 66313637, "body": "Or try MSYS2, which has a Cygwin-forked POSIX compatibility layer (msys-2.0.dll) and already has a package for rsync."}], "answers": [{"comments": [{"owner": {"reputation": 807, "user_id": 360798, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/be3cd4da9fe291962de3be0eecb6c9f2?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/360798/bort"}, "edited": false, "score": 0, "creation_date": 1528825842, "post_id": 39497889, "comment_id": 88651017, "body": "This link is no longer valid as itefix has decided to charge for downloads."}], "tags": [], "owner": {"reputation": 130, "user_id": 5326728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb49642583b9eb3913282d58a0683eac?s=128&d=identicon&r=PG&f=1", "display_name": "Hiren", "link": "https://stackoverflow.com/users/5326728/hiren"}, "is_accepted": false, "score": 1, "last_activity_date": 1473879950, "creation_date": 1473879950, "answer_id": 39497889, "question_id": 39497653, "link": "https://stackoverflow.com/questions/39497653/windows-c-compile-rsync/39497889#39497889", "title": "Windows C compile rsync", "body": "<p>A build of Rsync for Windows can be downloaded from here: <a href=\"https://www.itefix.net/content/cwrsync-free-edition\" rel=\"nofollow\">https://www.itefix.net/content/cwrsync-free-edition</a> .</p>\n\n<p>Using this, you will not need to deal with the configuration scripts (which you would need to when compiling from source).</p>\n"}], "owner": {"reputation": 21, "user_id": 6832348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abb8bccb3af8de328aa93d41eb35eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Gult", "link": "https://stackoverflow.com/users/6832348/gult"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473880232, "creation_date": 1473879101, "question_id": 39497653, "link": "https://stackoverflow.com/questions/39497653/windows-c-compile-rsync", "title": "Windows C compile rsync", "body": "<p>I have problem with C compile to .exe.\nI downloaded source code from <a href=\"https://www.itefix.net/dl/gpl-source/rsync-3.1.2.tar.gz\" rel=\"nofollow\">https://www.itefix.net/dl/gpl-source/rsync-3.1.2.tar.gz</a> and installed minGW. \nThen I try ./configure I get error: \nchecking for socklen_t... no\nchecking for socklen_t equivalent... configure.sh: error: Cannot find a type to use in place of socklen_t \nI try with linux configure and its successful, but need rsync for windows .exe.</p>\n\n<p>How to fix problem ?</p>\n"}, {"tags": ["c", "loops", "getchar"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1473879112, "post_id": 39497568, "comment_id": 66312842, "body": "<code>main()</code> is a deprecated signature. Never use it! Use a prototype-style signature, here: <code>int main(void)</code>. Learn modern C (i.e.  C99)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1473879239, "post_id": 39497568, "comment_id": 66312921, "body": "Technically this program is also broken because it&#39;s missing a <code>return 0</code> at the end of <code>main</code>. Since C99 you need an explicit <code>int main</code> but the <code>return</code> is optional. :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1473879634, "post_id": 39497568, "comment_id": 66313107, "body": "The output is correct. Create a file with exactly that input and pipe it to your program. Then compare the file length and the output. You also might want to use a hex-editor on the file to see <b>what</b> is going on."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6832342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1744cb9b78d9a8e13c8a97761300fc?s=128&d=identicon&r=PG&f=1", "display_name": "carlitos_30", "link": "https://stackoverflow.com/users/6832342/carlitos-30"}, "edited": false, "score": 0, "creation_date": 1473878967, "post_id": 39497597, "comment_id": 66312761, "body": "Thanks. I missed something in my reading or the book doesn&#39;t say nothing about this strange behavior."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 31, "user_id": 6832342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1744cb9b78d9a8e13c8a97761300fc?s=128&d=identicon&r=PG&f=1", "display_name": "carlitos_30", "link": "https://stackoverflow.com/users/6832342/carlitos-30"}, "edited": false, "score": 1, "creation_date": 1473879012, "post_id": 39497597, "comment_id": 66312785, "body": "@carlitos_30 The book is probably not expecting you to hit enter every other time."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1473879040, "post_id": 39497597, "comment_id": 66312805, "body": "It is not strange at all. It simply tells you every character entered. You&#39;ll find the same behaviour with <code>scanf(&quot;%c&quot;, &amp;ch);</code>"}, {"owner": {"reputation": 31, "user_id": 6832342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1744cb9b78d9a8e13c8a97761300fc?s=128&d=identicon&r=PG&f=1", "display_name": "carlitos_30", "link": "https://stackoverflow.com/users/6832342/carlitos-30"}, "edited": false, "score": 0, "creation_date": 1473879067, "post_id": 39497597, "comment_id": 66312815, "body": "Thanks again, sir."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 31, "user_id": 6832342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1744cb9b78d9a8e13c8a97761300fc?s=128&d=identicon&r=PG&f=1", "display_name": "carlitos_30", "link": "https://stackoverflow.com/users/6832342/carlitos-30"}, "edited": false, "score": 1, "creation_date": 1473884345, "post_id": 39497597, "comment_id": 66315471, "body": "@carlitos_30 You&#39;re welcome. You can also <a href=\"http://meta.stackexchange.com/q/5234/244062\">consider accepting any one of the answers that helped you</a>."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 6, "last_activity_date": 1473879589, "last_edit_date": 1473879589, "creation_date": 1473878889, "answer_id": 39497597, "question_id": 39497568, "link": "https://stackoverflow.com/questions/39497568/counting-number-of-user-input-using-getchar-gives-double-the-expected-result/39497597#39497597", "title": "Counting number of user input using getchar() gives double the expected result, why?", "body": "<p>It's counting properly. <code>getchar()</code> is considering the <kbd>ENTER</kbd> key press also, as a newline <code>\\n</code>. So 6 <em>user</em> inputs and 6 newlines. Counts match.</p>\n\n<p>If you don't want the newlines to be counted as <em>inputs</em>, you need to increment the counter when the <code>getchar()</code> return value is not <code>\\n</code>, something like</p>\n\n<pre><code>while ( (c = getchar()) != EOF) {\n    if  ( c != '\\n')  ++nc;\n    }\n</code></pre>\n\n<p>will get the job done. Note, <code>c</code> should be of type <code>int</code> to be able to handle <code>EOF</code>.</p>\n\n<p>That said, as per <code>C99</code> or <code>C11</code>, for a hosted environment, the signature of <code>main()</code> should at least be <code>int main(void)</code> to conform to the standard.</p>\n"}], "owner": {"reputation": 31, "user_id": 6832342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1744cb9b78d9a8e13c8a97761300fc?s=128&d=identicon&r=PG&f=1", "display_name": "carlitos_30", "link": "https://stackoverflow.com/users/6832342/carlitos-30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 39497597, "answer_count": 1, "score": 2, "last_activity_date": 1473879871, "creation_date": 1473878785, "last_edit_date": 1473879871, "question_id": 39497568, "link": "https://stackoverflow.com/questions/39497568/counting-number-of-user-input-using-getchar-gives-double-the-expected-result", "title": "Counting number of user input using getchar() gives double the expected result, why?", "body": "<p>In the following example, from the book \"C programming\", when input characters, the program count twice.</p>\n\n<pre><code>main(){\n\nlong nc;\n\nnc = 0;\nwhile (getchar() != EOF)\n    ++nc;\n    printf(\"%ld\\n\", nc);\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>a\nb\nc\nd\ne\nf\n12\n</code></pre>\n\n<p>What's wrong?</p>\n\n<p>I'am using Ubuntu and the gcc compiler.</p>\n"}, {"tags": ["c", "linux", "sockets", "tcp"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473879986, "post_id": 39497530, "comment_id": 66313287, "body": "How are you determining more than 5?"}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473880152, "post_id": 39497530, "comment_id": 66313381, "body": "@jxh I am running 7to10 clients on different terminal windows and all are able to connect at the same time."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473880320, "post_id": 39497530, "comment_id": 66313465, "body": "Are you expecting a <code>connect</code> failure from the client? Why wouldn&#39;t you expect the client to block until it is able to connect?"}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1473880340, "post_id": 39497530, "comment_id": 66313475, "body": "@yano Only 1 of the connections can be accepted at a time, its an iterative server. Try running the programs."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473880426, "post_id": 39497530, "comment_id": 66313531, "body": "@jxh What&#39;s wrong with expecting a <code>connect</code> failure from the client?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473880520, "post_id": 39497530, "comment_id": 66313576, "body": "Nothing wrong with expecting failure, as long as you are OK with it not failing. :-) It won&#39;t happen unless it takes a really long time. If your listen queue already has 5 pending, those beyond 5 will just be waiting for their SYN-ACK. Those beyond 5 clients will behave as if their initial ACK was dropped and so will periodically retransmit the ACK until SYN-ACK comes back (they got into the queue), or the retransmit timeout occurs."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473881372, "post_id": 39497530, "comment_id": 66314033, "body": "@jxh Those beyond 5 are getting connected immediately(<code>connect</code> returning success immediately instead of waiting for the retransmit timeout and eventually failing), even when 5 pending are already in the queue."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473882415, "post_id": 39497530, "comment_id": 66314524, "body": "the <code>connect</code> in client is neither blocking nor failing. It&#39;s returning with a successful connection."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473883375, "post_id": 39497530, "comment_id": 66315007, "body": "Use netstat to figure out the TCP state of the socket. See if those clients really are in CONNECTED state or actually in some other state."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473884152, "post_id": 39497530, "comment_id": 66315399, "body": "@jxh Checked with 8 clients.All 8 clients are in ESTABLISHED state and  the server is in SYN_RECV."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473884398, "post_id": 39497530, "comment_id": 66315504, "body": "This means for your TCP stack, full handshake is always being done. Probably you will see a difference if your client attempts to send some data after <code>connect</code> returns. Like, the ones in the listen queue will get some ACKs back, while the ones not in the listen queue will not get ACKs. Alternatively, your system has decided 5 is too small, and increased it automagically for you."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473884564, "post_id": 39497530, "comment_id": 66315587, "body": "Oh, your system probably supports syncookies. <code>cat &#47;proc&#47;sys&#47;net&#47;ipv4&#47;tcp_syncookies</code> on linux."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473885036, "post_id": 39497530, "comment_id": 66315826, "body": "@jxh It prints 1. What&#39;s that?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1473885417, "post_id": 39497530, "comment_id": 66316011, "body": "@ARBY Since the connection probably only took a tiny fraction of a second, you would have to look <i>very</i> carefully to conclude that more than 5 connected at the same time. Most likely they in fact connected in groups of 5 or less. Note that you <code>accept</code> a connection only <i>after</i> the connection is made and the <code>listen</code> backlog affects the process of making a connection only."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1473885572, "post_id": 39497530, "comment_id": 66316097, "body": "@DavidSchwartz: The server only handles one connection at a time. The client blocks waiting for user input before finishing its interaction with the server. He ARBY is complaining that when he connects with one client in one window and does not type anything into it, he is able to keep connecting to the server beyond 5."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473908824, "post_id": 39497530, "comment_id": 66322383, "body": "@jxh Right, each of those connections probably completes before the next one starts. So while they&#39;re all connected at the same time, they&#39;re not pending at the same time. A connection is only pending during the TCP connect handshake."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1473914882, "post_id": 39497530, "comment_id": 66323768, "body": "@DavidSchwartz The listen man page seems clear to me that the listen backlog holds completely established sockets waiting to be accepted."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473915346, "post_id": 39497530, "comment_id": 66323894, "body": "@jxh Yes, It was changed with linux 2.2"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473920794, "post_id": 39497530, "comment_id": 66325724, "body": "@jxh The documentation is not clear, not all operating systems do it the same way, and as ARBY pointed out, Linux&#39;s behavior changed."}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473885154, "post_id": 39498231, "comment_id": 66315895, "body": "Correct. Furthermore, requesting a listen backlog of 5 is no guarantee that you got a listen backlog of 5. The platform can adjust it up or down, in this case almost certainly up, and you have no way of knowing what the actual backlog value is."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473885788, "post_id": 39498231, "comment_id": 66316214, "body": "@EJP <i>platform can adjust it up or down . . no way of knowing what the actual backlog value is</i>, can you please quote a reference."}, {"owner": {"reputation": 649, "user_id": 5602491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2426d2645029b0fa49495a956020ee66?s=128&d=identicon&r=PG&f=1", "display_name": "gilez", "link": "https://stackoverflow.com/users/5602491/gilez"}, "reply_to_user": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1475265695, "post_id": 39498231, "comment_id": 66891202, "body": "@ARBY if you&#39;re really interested, you could do worse than read <a href=\"http://veithen.github.io/2014/01/01/how-tcp-backlog-works-in-linux.html\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1580801567, "post_id": 39498231, "comment_id": 106207241, "body": "@Raman See [<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/listen.html](Posix)\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/functions/&hellip;</a>."}], "tags": [], "owner": {"reputation": 649, "user_id": 5602491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2426d2645029b0fa49495a956020ee66?s=128&d=identicon&r=PG&f=1", "display_name": "gilez", "link": "https://stackoverflow.com/users/5602491/gilez"}, "is_accepted": false, "score": 3, "last_activity_date": 1473881337, "creation_date": 1473881337, "answer_id": 39498231, "question_id": 39497530, "link": "https://stackoverflow.com/questions/39497530/clients-connecting-to-tcp-iterative-server-even-after-backlog-queue-is-full/39498231#39498231", "title": "clients connecting to TCP iterative server even after backlog queue is full", "body": "<p>The backlog is the \"queue of <em>pending</em> connections\" -- once you accept a connection, it is no longer pending, and comes off the queue, leaving room for 5 more pending connections.</p>\n\n<p>If you want to limit to 5 connections, then you need to count how many you have accepted (and not closed). Any more attempts to connect would then wait in the queue.</p>\n"}, {"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473886463, "post_id": 39499187, "comment_id": 66316540, "body": "This code won&#39;t work as advertised, as there is still the apparently very large listen queue in front of it."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473886533, "post_id": 39499187, "comment_id": 66316575, "body": "It just closes the connections if there are already 5 pending connections."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1473886558, "post_id": 39499187, "comment_id": 66316585, "body": "Are you sure it&#39;s because of SYN cookies and the system has not automatically chosen a higher value of backlog?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473886607, "post_id": 39499187, "comment_id": 66316616, "body": "@jxh Pending in the application. It doesn&#39;t know about the possibly very large number of connections pending in the backlog queue. All you&#39;ve done is increment that by 5."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473886712, "post_id": 39499187, "comment_id": 66316659, "body": "@EJP: The accepting thread keeps accepting and closing if the application queue is full. Since the OP wants the connect to &quot;fail&quot; if it is not in the queue, this is the best the server can do to achieve that."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1473886780, "post_id": 39499187, "comment_id": 66316688, "body": "@ARBY: You have already verified SYN cookies are enabled. Based on how SYN cookies work, this would be the observed behavior of clients. And, the <code>listen</code> man page documents the behavior."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473886833, "post_id": 39499187, "comment_id": 66316717, "body": "@jxh No it isn&#39;t. All you&#39;ve accomplished is adding 5 to the backlog queue. The OP&#39;s requirement is better met without this code than with it."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1473887135, "post_id": 39499187, "comment_id": 66316829, "body": "Your answer seems most sane and logical. I&#39;ll accept it till I find a better answer."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473887220, "post_id": 39499187, "comment_id": 66316866, "body": "@jxh And this code will not accomplish that purpose. There is already a backlog queue of indeterminate length. All you&#39;ve done is add another queue of length five after it. It is completely and utterly futile."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1473887256, "post_id": 39499187, "comment_id": 66316881, "body": "@ARBY The part about SYN cookies was sane and logical. He ruined it when he added this pointless code."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473887305, "post_id": 39499187, "comment_id": 66316902, "body": "@EJP: Are you saying the <code>close</code> in the <code>accepting_thread</code> is pointless? Why?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473887343, "post_id": 39499187, "comment_id": 66316920, "body": "@jxh I am saying that adding a queue after another queue does not reduce the length of the first queue."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473887385, "post_id": 39499187, "comment_id": 66316937, "body": "@EJP: Closing connections clears an otherwise unbounded queue of clients waiting to connect, does it not?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473887903, "post_id": 39499187, "comment_id": 66317139, "body": "@jxh No it doesn&#39;t. You&#39;re not making sense. Accepting connections removes them from the backlog queue, and closing them closes them. An extra queue placed after the backlog queue does not  affect the size of the backlog queue. Can you show for example that your code accepts and closes excess connections faster than they can possibly arrive?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473888330, "post_id": 39499187, "comment_id": 66317289, "body": "@EJP: That is not the purpose of the code. The purpose is simply to send a busy signal in the form of early termination rather than in the form of waiting in line for their turn to be handled."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1473905893, "post_id": 39499187, "comment_id": 66321784, "body": "So the purpose of the code doesn&#39;t answer the purpose of the OP."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 2, "last_activity_date": 1473886911, "last_edit_date": 1473886911, "creation_date": 1473885131, "answer_id": 39499187, "question_id": 39497530, "link": "https://stackoverflow.com/questions/39497530/clients-connecting-to-tcp-iterative-server-even-after-backlog-queue-is-full/39499187#39499187", "title": "clients connecting to TCP iterative server even after backlog queue is full", "body": "<p>Your system has enabled <a href=\"https://en.wikipedia.org/wiki/SYN_cookies\" rel=\"nofollow\">SYN cookies</a>, which allows the TCP stack to behave as if it has a very large listen queue. It was designed to mitigate DOS via SYN flooding.</p>\n\n<p>The <a href=\"http://man7.org/linux/man-pages/man2/listen.2.html\" rel=\"nofollow\"><code>listen</code> man page</a> states about the <code>backlog</code> argument:</p>\n\n<blockquote>\n  <p>When <code>syncookies</code> are enabled\n         there is no logical maximum length and this setting is ignored.</p>\n</blockquote>\n\n<p>If you really want no more than 5 pending clients to wait on the server, you will have to manually maintain your own queue, and close new connections if your queue is full.</p>\n\n<p><sub>Note that this solution does not actually affect the behavior of the operating systems listen queue. The solution is to continually clear the listen queue of any backlog and close those connections if your server already has 5 pending connections in its own queue.</sub></p>\n\n<p>Probably in your case, the easiest way to achieve that is with two threads. One doing the accepting, the other handling connections off the queue.</p>\n\n<p>The fragment below illustrates this in pseudo-code. It assumes proper thread mutual exclusion and signaling is performed by the queue operations.</p>\n\n<pre><code>accepting_thread () {\n    int queue_count = 0;\n\n    for (;;) {\n        new_conn = accept();\n        if (q_size(q) &lt; 5) {\n            q_enqueue(q, new_conn);\n        } else {\n            close(new_conn);\n        }\n    }\n}\n\nhandling_thread () {\n    for (;;) {\n        new_conn = q_dequeue(q);\n        /* ... */\n        close(new_conn);\n     }\n}\n</code></pre>\n\n<p>To get clients that are terminated early to see a reset, you can enable the linger option with a 0 timeout value. Most TCP stacks will cause a RST to be generated when the socket is closed.</p>\n"}], "owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1748, "favorite_count": 1, "accepted_answer_id": 39499187, "answer_count": 2, "score": 2, "last_activity_date": 1473886911, "creation_date": 1473878601, "last_edit_date": 1592644375, "question_id": 39497530, "link": "https://stackoverflow.com/questions/39497530/clients-connecting-to-tcp-iterative-server-even-after-backlog-queue-is-full", "title": "clients connecting to TCP iterative server even after backlog queue is full", "body": "<p>Here's an iterative server I've created to handle basic client-server chat application.</p>\n<p>I am trying to run <em>TCPserver</em> on a terminal window and <em>TCPclient</em> on multiple terminal windows.</p>\n<p>More than 5 the clients are getting connected(neither getting blocked nor failing. They immediately <code>connect</code> successfully) despite of the fact that I set the <code>backlog</code> value (<code>listen</code> system call) in server socket to be 5.</p>\n<p>I expected that no more than 5 clients could be connected(only 1 would be accepted at a time).</p>\n<p>Is my understanding of the <em>backlog</em> value set in the <code>listen</code> system call wrong?\nPlease clarify.</p>\n<blockquote>\n<p>int listen(int sockfd, int backlog);</p>\n<p>The backlog argument defines the maximum length  to  which  the queue of pending connections for sockfd may grow.</p>\n</blockquote>\n<p>Here are the actual programs for reference.</p>\n<h1>TCPserver.c</h1>\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n#include&lt;sys/types.h&gt;\n#include&lt;sys/socket.h&gt;\n\n#include&lt;netinet/in.h&gt;\n#include&lt;unistd.h&gt;\n#define BACKLOG 5\n\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#include&lt;string.h&gt;\n\nint main()\n{\n    //create the server socket\n    int sd;\n    sd=socket(AF_INET,SOCK_STREAM,0);\n    if(sd==-1)\n    {\n        perror(&quot;Some error occured in creating the socket: &quot;);   \n        //Interprets the value of errno as an error message, and prints it to stderr \n        exit(EXIT_FAILURE);\n    }\n    else\n        printf(&quot;Socket created!\\n&quot;);\n\n    //define the server address\n    struct sockaddr_in server_address;\n    \n    server_address.sin_family = AF_INET;\n    server_address.sin_port = htons(9002);\n    server_address.sin_addr.s_addr = INADDR_ANY; \n    //inet_addr(&quot;192.168.137.163&quot;);//INADDR_ANY;\n\n    //bind the socket to our specified IP and port\n    int bind_status = bind(sd, (struct sockaddr *) &amp;server_address, sizeof(server_address));\n    if(bind_status == -1)\n    {\n        perror(&quot;An error occurred in binding the socket: &quot; );\n        exit(EXIT_FAILURE);\n    }\n    else\n        printf(&quot;Bind Successful!\\n&quot;);\n\n\n    //listen for connections\n    int listen_status = listen(sd, BACKLOG);    \n    if(listen_status == -1)\n    {\n        perror(&quot;Error occured in listening: &quot;);\n        exit(EXIT_FAILURE);\n    } \n    else\n        printf(&quot;Server is listening!\\n&quot;);\n\n    while(1)\n    {\n        //Accept a connection and create a new socket for this connection\n        int new_sd;\n        struct sockaddr_in client_address;\n        int client_address_size = sizeof(client_address);\n\n        new_sd= accept(sd, (struct sockaddr*) &amp;client_address, &amp;client_address_size);\n        if(new_sd==-1)\n        {\n            perror(&quot;Can't accept connection: &quot;);\n            exit(EXIT_FAILURE);\n        }\n        else\n            printf(&quot;Accept successful!\\nA new client has connected. He'll soon send you a message.\\n (You can chat or say \\&quot;exit\\&quot; to stop chatting)\\n\\n&quot;);\n    \n\n        //send a message to the client\n        char buffer[256] = &quot;Welcome to the server, lets chat! \\n (You can chat or say \\&quot;exit\\&quot; to stop chatting)\\n&quot;;\n        send(new_sd,buffer,sizeof(buffer),0);\n\n        //start chat\n        while(1)\n        {\n            memset(buffer,0,256);\n            int n = recv(new_sd, buffer, sizeof(buffer),0);\n            if(n==-1 || strcmp(buffer,&quot;exit\\n&quot;)==0 || strcmp(buffer,&quot;exit&quot;)==0)\n                break;\n            printf(&quot;\\nclient said: %s\\n&quot;,buffer);\n\n            memset(buffer,0,256);\n            printf(&quot;Say something: &quot;);\n            fgets(buffer,256,stdin);\n            n = send(new_sd, buffer, sizeof(buffer), 0);\n            if(n==-1 || strcmp(buffer,&quot;exit\\n&quot;)==0)\n                break;\n        }\n\n        //close the sockets\n        close(new_sd);\n        printf(&quot;\\nConnection ended. waiting for new connection now . . .\\n&quot;);\n    }\n\n    close(sd);\n\n    return 0;\n}\n</code></pre>\n<p>and Here's the client</p>\n<h1>TCPclient.c</h1>\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n#include&lt;sys/types.h&gt;\n#include&lt;sys/socket.h&gt;\n\n#include&lt;netinet/in.h&gt;\n\n#include&lt;unistd.h&gt;\n\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include&lt;string.h&gt;\nint main()\n{\n    //create the socket\n    int sd = socket(AF_INET,SOCK_STREAM,0);\n\n    if(sd==-1)\n    {\n        perror(&quot;Some error occurred in creating the socket: &quot;);\n        exit(EXIT_FAILURE);\n    }\n    else\n        printf(&quot;Socket created!\\n&quot;);\n\n    //specify an address for the socket\n    struct sockaddr_in server_address;\n    \n    server_address.sin_family = AF_INET;\n    server_address.sin_port = htons(9002);\n    server_address.sin_addr.s_addr = inet_addr(&quot;127.0.0.1&quot;);//INADDR_ANY;\n\n    //Connect to the server\n    int connection_status = connect(sd,(struct sockaddr *) &amp;server_address, sizeof(server_address));\n\n    if(connection_status == -1)\n    {\n        perror(&quot;There was an error connecting to the remote socket: &quot;);\n        exit(EXIT_FAILURE);\n    }\n    else\n        printf(&quot;Connected to the server! Waiting in the queue for the server to accept the connection...\\n&quot;);\n        \n    char buffer[256];\n    //get the connection message from the server\n    recv(sd, &amp;buffer, sizeof(buffer), 0);\n    printf(&quot;Server Said: %s\\n&quot;, buffer);\n\n    //start chat\n    while(1)\n    {\n        memset(buffer,0,256);\n        printf(&quot;Say something: &quot;);\n        fgets(buffer,256,stdin);\n        int n = send(sd,buffer,sizeof(buffer),0);\n        if(n==-1 || strcmp(buffer,&quot;exit\\n&quot;)==0)\n            break;       \n\n        memset(buffer,0,256);\n        n = recv(sd,buffer,sizeof(buffer),0);\n        if(n==-1 || strcmp(buffer,&quot;exit\\n&quot;)==0)\n            break;\n\n        printf(&quot;\\nServer said: %s\\n&quot;,buffer);\n    }\n\n    //close the socket\n    close(sd);\n\n    return 0;\n}\n</code></pre>\n<p>Someone suggested I check if <code>syncookies</code> have been enabled on my system. When I perform <code>cat /proc/sys/net/ipv4/tcp_syncookies</code>, I get <code>1</code>.</p>\n"}, {"tags": ["c", "sleep", "unistd.h"], "comments": [{"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 3, "creation_date": 1473877692, "post_id": 39497247, "comment_id": 66312082, "body": "You&#39;d have wanted to read the <code>sleep()</code> manpage before asking. This would have told you that some of your assumptions are wrong."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1473877720, "post_id": 39497247, "comment_id": 66312098, "body": "Please read the manual page - it oly sleeps for an integral number of seconds. Usleep perhaps"}, {"owner": {"reputation": 48820, "user_id": 182676, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/446fa39e5f227c92db408e1b68356b5e?s=128&d=identicon&r=PG", "display_name": "Macmade", "link": "https://stackoverflow.com/users/182676/macmade"}, "edited": false, "score": 5, "creation_date": 1473877796, "post_id": 39497247, "comment_id": 66312142, "body": "What makes you think it can take a float? Have you read the documentation of sleep?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473878817, "post_id": 39497247, "comment_id": 66312670, "body": "So when you <code>sleep</code> does your program do nothing? There are creative ways to use your time slice, such as taking an average, or only printing when the value changes. On the other hand if you have &quot;too many printing statements&quot; you could redirect the program output to a text file and read it at your leisure."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1473880906, "post_id": 39497247, "comment_id": 66313776, "body": "I&#39;m voting to close this question as off-topic because the OP did not read the man page for sleep before asking his question"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1473877732, "creation_date": 1473877732, "answer_id": 39497289, "question_id": 39497247, "link": "https://stackoverflow.com/questions/39497247/sleep-function-not-timing-properly-in-c/39497289#39497289", "title": "Sleep() Function not timing properly in C", "body": "<p>If you read <a href=\"http://man7.org/linux/man-pages/man3/sleep.3.html\" rel=\"noreferrer\">the <code>sleep</code> manual page</a> you will see that it takes the time in seconds as an <em>integer</em>.</p>\n\n<p>If you use a floating-point value when an integer value is expected, the compiler will truncate it. For example the floating-point value <code>0.9</code> will be truncated to the integer <code>0</code>.</p>\n\n<p>So what you are doing is effectively <code>sleep(0)</code>.</p>\n\n<p>Also on <a href=\"http://man7.org/linux/man-pages/man3/sleep.3.html\" rel=\"noreferrer\">the <code>sleep</code> manual page</a> (at least for the Linux manual page) you will see a link to <a href=\"http://man7.org/linux/man-pages/man2/nanosleep.2.html\" rel=\"noreferrer\">the <code>nanosleep</code> function</a>.</p>\n"}], "owner": {"reputation": 27, "user_id": 5437030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196f8e6af8202153f6fec25b37febec4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Banus", "link": "https://stackoverflow.com/users/5437030/paul-banus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1473877732, "creation_date": 1473877587, "question_id": 39497247, "link": "https://stackoverflow.com/questions/39497247/sleep-function-not-timing-properly-in-c", "title": "Sleep() Function not timing properly in C", "body": "<p>I've been coding some simple things such as printing statements but I wanted to have my processor sleeping to not have too many printing statements at the same time.\nI've used the library <strong>unistd.h</strong> and used the function <strong>sleep()</strong>.\nThe problem I have encountered is that when I ask the sleep function to sleep less then one second like 0.9 is printing the same quantity of statements as if I wasn't using the function <strong>sleep()</strong> at all.\nIt's working fine if I make it sleep more than one second but I don't want one second of sleep, I want less.</p>\n\n<p>Tank you kindly for reading and/or helping.</p>\n"}, {"tags": ["c", "initialization", "definition"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1473876859, "post_id": 39496870, "comment_id": 66311634, "body": "If the array is small, the execution time will be little different one way or the other. But if you later want to change the array size, or its values, the code will be more flexible if the array is computed at runtime, against you having to retype perhaps a large number of values, with the risk of typos. I would put this as an answer, but for your idea of what &quot;better&quot; means. An alternative might be to have a utility program that generates the source code array for you."}], "answers": [{"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1473876405, "creation_date": 1473876405, "answer_id": 39496949, "question_id": 39496870, "link": "https://stackoverflow.com/questions/39496870/precalculated-definition-of-variable-vs-initializing-by-calculation/39496949#39496949", "title": "precalculated definition of variable vs initializing by calculation", "body": "<p>The initialized array must be stored in the executable and loaded from disk. If the calculations are simple, then it's possible that the processor can do the calculations faster than it can read the data from the disk. \nWhich means that placing the initialized data in the executable may result in a bloated executable that starts slower, a lose-lose situation.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1473877189, "post_id": 39496984, "comment_id": 66311806, "body": "Is reading an <code>int</code> from disc really faster than the CPU calculating and storing it? (Note this is about systems with mass-storage, not embedded MCUs where data and code reside ready-to-use in Flash already.)"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1473877479, "post_id": 39496984, "comment_id": 66311948, "body": "R. Sahu, the &quot;faster&quot; argument is discussed in user3386109&#39;s answer: it may not be faster."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1473877620, "post_id": 39496984, "comment_id": 66312038, "body": "@Olaf, when an executable/dll is loaded, the data are also read at the same time. I am not aware of platforms where the data are independently loaded. Maybe there are."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1473877767, "post_id": 39496984, "comment_id": 66312129, "body": "@RSahu: That is not the point. Consider a fast HDD which reads at - say - 150MB/s, i.e. 37.5Million <code>int</code>s per second. I think a halfway recent desktop-CPU can much faster iterate the loop."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1473876545, "creation_date": 1473876545, "answer_id": 39496984, "question_id": 39496870, "link": "https://stackoverflow.com/questions/39496870/precalculated-definition-of-variable-vs-initializing-by-calculation/39496984#39496984", "title": "precalculated definition of variable vs initializing by calculation", "body": "<blockquote>\n  <p>My question is: would it be better (e.g. will my program initialize faster every time) to just calculate the result of this beforehand and just define it outright?</p>\n</blockquote>\n\n<p>It will be faster for sure. Whether it will be significant enough for you notice depends on how complex are the calculations and how often you need to initialize the variables.</p>\n\n<p>If you decide to initialize the array with hard coded numbers, I would strongly advise adding comments or code in comments that explain how you got the numbers in the first place. Otherwise, it will be a maintenance headache.</p>\n\n<blockquote>\n  <p>Are there any disadvantages to doing this?</p>\n</blockquote>\n\n<p>I wouldn't hard code the numbers unless there is supporting evidence that demonstrates significant savings by doing it.</p>\n"}, {"tags": [], "owner": {"reputation": 4565, "user_id": 1134885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c428466054762cf7d4b5fb5f4396fa2?s=128&d=identicon&r=PG", "display_name": "NovaDenizen", "link": "https://stackoverflow.com/users/1134885/novadenizen"}, "is_accepted": false, "score": 2, "last_activity_date": 1473878648, "creation_date": 1473878648, "answer_id": 39497538, "question_id": 39496870, "link": "https://stackoverflow.com/questions/39496870/precalculated-definition-of-variable-vs-initializing-by-calculation/39497538#39497538", "title": "precalculated definition of variable vs initializing by calculation", "body": "<p>All else being equal, human effort is way more expensive than cpu time or disk space.  Do whatever requires the least upfront and ongoing level of human effort.  Making a complicated multiple-stage build process may save a little cpu or disk, but it will cost effort.  </p>\n"}, {"tags": [], "owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "is_accepted": true, "score": 3, "last_activity_date": 1493669403, "last_edit_date": 1493669403, "creation_date": 1473879523, "answer_id": 39497768, "question_id": 39496870, "link": "https://stackoverflow.com/questions/39496870/precalculated-definition-of-variable-vs-initializing-by-calculation/39497768#39497768", "title": "precalculated definition of variable vs initializing by calculation", "body": "<p>If I understand your question correctly, you are asking if you can do the calculations at compile-time instead of at run-time and if there are caveats?</p>\n\n<p>The answer depends on the complexity of the calculations. If they are simple (deterministic as you say) you can usually do this with success. The caveats are that the code for doing the computations, can be less than easy to read and it can greatly increase compile times.</p>\n\n<p>The generalization of this technique is called <a href=\"https://en.wikipedia.org/wiki/Metaprogramming\" rel=\"nofollow noreferrer\">meta-programming</a>, where you add one extra level of code-transformation (compilation) before the usual code -> binary transformation.</p>\n\n<p>You can do limited forms of that using the pre-processor. GCC also supports some expressions that are evaluated statically. Other techniques include using <a href=\"https://en.wikipedia.org/wiki/X_Macro\" rel=\"nofollow noreferrer\">X-Macros</a> to basically achieve parametric templates like in C++.</p>\n\n<p>There are libraries that are able to perform Turing-complete computation at compile-time using the pre-processor (<a href=\"http://p99.gforge.inria.fr/p99-html/\" rel=\"nofollow noreferrer\">P99 for instance</a>). Usually the syntax is hairy with much convention and many idioms to learn before being productive.</p>\n\n<p>In contrast to complex meta-programming I've achieved greater code-clarity and appreciation from colleagues maintaining my code, when generating code using e.g. a Perl or Python script, than when I've hacked something together with the pre-processor.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>To answer your question with an example, I'll tell you that I write a lot of C-code professionally for microcontrollers with 4-16kb RAM and 16-128kb flash code space. Most of the applications live for at least a decade, and will require running updates and feature additions. That means I have to take good care not to waste resources, so I'll always prefer if something can be calculated at compile-time instead of at run-time. That saves code space at the cost of added complexity in the build-system.\nIf the data is constant, it also means I can place it in the read-only flash memory and save precious RAM.</p>\n\n<p>Another example is in the <a href=\"https://github.com/cmcqueen/aes-min\" rel=\"nofollow noreferrer\">aes-min project</a>, which is a small implementation of AES128. I think there is a build choice, so that a component in the algorithm (the S-box?) gets pre-calculated and put in ROM instead of RAM. Other symmetric encryption algorithms need to calculate some data from the key, and if the key is static, this pre-calculation-technique can be used efficiently.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1473881303, "creation_date": 1473881303, "answer_id": 39498225, "question_id": 39496870, "link": "https://stackoverflow.com/questions/39496870/precalculated-definition-of-variable-vs-initializing-by-calculation/39498225#39498225", "title": "precalculated definition of variable vs initializing by calculation", "body": "<p>As others have mentioned, this depends on how long it takes to generate the variable in question.  If it takes a significant amount of run time, that's when it would make sense to precalculate it.</p>\n\n<p>Here's an example of how this can be done:</p>\n\n<p>genx.c (the program which precalcuates the array):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int i;\n    printf(\"int x[] = {\");\n    for(i=0; i&lt;10; ++i){\n        if (i) printf(\",\");\n        printf(\" %d\", i*i);\n    }\n    printf(\" };\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>When run, this outputs:</p>\n\n<pre><code>int x[] = { 0, 1, 4, 9, 16, 25, 36, 49, 64, 81 };\n</code></pre>\n\n<p>The makefile:</p>\n\n<pre class=\"lang-make prettyprint-override\"><code>CFLAGS=-Wall -Wextra\n\napp: app.c x.c\n        gcc $(CFLAGS) -o app app.c\n\nx.c: genx\n        ./genx &gt; x.c\n\ngenx: genx.c\n        gcc $(CFLAGS) -o genx genx.c\n\nclean:\n        rm -f app genx x.c\n</code></pre>\n\n<p>app.c (the application file):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include \"x.c\"\n\nint main()\n{\n    int i;\n    for (i=0;i&lt;10;i++) {\n        printf(\"x[%d]=%d\\n\",i,x[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When you run <code>make app</code>, it sees that <code>x.c</code> is a dependency and first runs the target for that.  The <code>x.c</code> target is built by running <code>genx</code>, which itself is compiled by the <code>genx</code> target.</p>\n\n<p>Assuming <code>genx.c</code> doesn't change, <code>x.c</code> gets built once and its contents are included wherever necessary.</p>\n\n<p>Output of <code>app</code>:</p>\n\n<pre><code>x[0]=0\nx[1]=1\nx[2]=4\nx[3]=9\nx[4]=16\nx[5]=25\nx[6]=36\nx[7]=49\nx[8]=64\nx[9]=81\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6832107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64cefbecacee741f607d69d7e48fc893?s=128&d=identicon&r=PG&f=1", "display_name": "J. K. P. C.", "link": "https://stackoverflow.com/users/6832107/j-k-p-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 39497768, "answer_count": 5, "score": 4, "last_activity_date": 1493669403, "creation_date": 1473876041, "last_edit_date": 1473880032, "question_id": 39496870, "link": "https://stackoverflow.com/questions/39496870/precalculated-definition-of-variable-vs-initializing-by-calculation", "title": "precalculated definition of variable vs initializing by calculation", "body": "<p>Suppose for example, I wanted to initialize my variables using a function:</p>\n\n<pre><code>int x[10];\nvoid init_x(){\n    for(int i=0; i&lt;10; ++i){\n        x[i]=i*i;\n    }\n}\n</code></pre>\n\n<p>It doesn't have to be this exact function, it could be more complicated and done on a bigger array or a different int type, but anyway, the point is that the <em>result is deterministic</em>. My question is: would it be better (e.g. will my program initialize faster every time) to just calculate the result of this beforehand and just define it outright?</p>\n\n<pre><code>int x[10]={0, 1, 4, 9, etc...}\n</code></pre>\n\n<p>That way, I just run the initialization function once (e.g run the function, then copy+paste the results to the array definition and comment the code out) and not again and again every time I open the program. (At least that's what I assume it does)</p>\n\n<p>Are there any disadvantages to doing this?</p>\n"}, {"tags": ["c", "string", "pointers", "reverse"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1473874395, "post_id": 39496446, "comment_id": 66310398, "body": "First thing - you do not <code>malloc</code> enough space for the null terminator."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1473874536, "post_id": 39496446, "comment_id": 66310487, "body": "I don&#39;t see why using two indices. I think it should be <code>i</code> only."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473874578, "post_id": 39496446, "comment_id": 66310516, "body": "<code>malloc(taille*sizeof(char));</code> --&gt; <code>malloc(taille+1);</code> and add a <code>nul</code> terminator."}, {"owner": {"reputation": 3, "user_id": 6832094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d2c45e13a9e6eb358d6223c0f1a126a?s=128&d=identicon&r=PG&f=1", "display_name": "S Nus", "link": "https://stackoverflow.com/users/6832094/s-nus"}, "edited": false, "score": 0, "creation_date": 1473875092, "post_id": 39496446, "comment_id": 66310769, "body": "Thanks, I tried but the problem is it doesn&#39;t print anything."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1473888784, "post_id": 39496446, "comment_id": 66317490, "body": "@SNus you may be copying the null terminator into inverse[0] which wouldnt print anything."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6832094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d2c45e13a9e6eb358d6223c0f1a126a?s=128&d=identicon&r=PG&f=1", "display_name": "S Nus", "link": "https://stackoverflow.com/users/6832094/s-nus"}, "edited": false, "score": 0, "creation_date": 1473875351, "post_id": 39496676, "comment_id": 66310892, "body": "THANK YOU VERY MUCH, that was it. You&#39;re great"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1473875172, "creation_date": 1473875172, "answer_id": 39496676, "question_id": 39496446, "link": "https://stackoverflow.com/questions/39496446/what-is-wrong-with-my-program-reversing-strings-in-c/39496676#39496676", "title": "What is wrong with my program reversing strings in C?", "body": "<p>There were several errors in your code, the most significant being the offset from <code>chaine</code> in the wrong direction. Also, lack of space for a string terminator, and <code>j</code> ending prematurely.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar* inverseCarac(char* chaine){\n    if(chaine==0||*chaine==0) return NULL;  \n\n    int j, i;\n    int taille=strlen(chaine); \n    char* inverse=malloc(taille+1);             // add 1 for terminator\n\n    for(j=taille-1, i=0; j&gt;=0; j--, i++){       // change j&gt;0 to j &gt;= 0\n        *(inverse+i)=*(chaine+j);               // change -j to +j\n    }\n    inverse[taille] = '\\0';                     // write terminator\n    return inverse;\n}\n\nint main(void){\n    char* test=\"bonjour\";\n    char* inv=inverseCarac(test);\n    printf(\"%s\\n\", inv);\n    return 0;\n}\n</code></pre>\n\n<p>Program output</p>\n\n<pre><code>ruojnob\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6832094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d2c45e13a9e6eb358d6223c0f1a126a?s=128&d=identicon&r=PG&f=1", "display_name": "S Nus", "link": "https://stackoverflow.com/users/6832094/s-nus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 39496676, "answer_count": 1, "score": 0, "last_activity_date": 1473877426, "creation_date": 1473874317, "last_edit_date": 1473877426, "question_id": 39496446, "link": "https://stackoverflow.com/questions/39496446/what-is-wrong-with-my-program-reversing-strings-in-c", "title": "What is wrong with my program reversing strings in C?", "body": "<p>I want to create a function to reverse a string in C. I found a couple pre-made on the internet but I wish to create mine. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nchar* inverseCarac(char* chaine){\n    if(chaine==0||*chaine==0) return NULL;  \n\n    int j, i;\n    int taille=strlen(chaine); \n    char* inverse=malloc(taille*sizeof(char));\n\n    for(j=taille-1, i=0; j&gt;0; j--, i++){\n        *(inverse+i)=*(chaine-j);\n    }\n\n    return inverse;\n\n}\n\nint main(void){\n    char* test=\"bonjour\";\n    char* inv=inverseCarac(test);\n    printf(\"%s\", inv);\n    return 0;\n}\n</code></pre>\n\n<p>I can't figure out why I get a segmentation fault.</p>\n"}, {"tags": ["c", "unix", "filesystems"], "comments": [{"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 4, "creation_date": 1473872048, "post_id": 39495836, "comment_id": 66309145, "body": "Maybe 16384 is too small, try something like 1048576."}, {"owner": {"reputation": 111, "user_id": 6026754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/049c4e59bb950a981dd74998803c3db4?s=128&d=identicon&r=PG&f=1", "display_name": "DR29", "link": "https://stackoverflow.com/users/6026754/dr29"}, "reply_to_user": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 1, "creation_date": 1473872308, "post_id": 39495836, "comment_id": 66309285, "body": "That worked. Very naive of me to use textbook provided values that were relevant probably 10 years ago... Thanks. if anyone curious: <code>259 -rw-------+ 1 user se 1048586 Sep 14 11:56 file.hole 1155 -rw-------+ 1 user se 1048580 Sep 14 11:56 file.nohole</code>"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6026754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/049c4e59bb950a981dd74998803c3db4?s=128&d=identicon&r=PG&f=1", "display_name": "DR29", "link": "https://stackoverflow.com/users/6026754/dr29"}, "edited": false, "score": 0, "creation_date": 1473872484, "post_id": 39495892, "comment_id": 66309366, "body": "Not quite. You are right that the bytes inbetween are set to 0, and I used to od command to verify that. However, there is also a benefit of smaller number of blocks used. In the corrected program, *hole file used 259 blocks while the .nohole used 1155 blocks."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 111, "user_id": 6026754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/049c4e59bb950a981dd74998803c3db4?s=128&d=identicon&r=PG&f=1", "display_name": "DR29", "link": "https://stackoverflow.com/users/6026754/dr29"}, "edited": false, "score": 0, "creation_date": 1473877918, "post_id": 39495892, "comment_id": 66312206, "body": "@DR29, then that is a clever filesystem that somehow keeps track of the blocks with zero, &quot;inserting&quot; them upon read (or it compressed the file)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1473882217, "post_id": 39495892, "comment_id": 66314425, "body": "@PaulOgilvie: there might be clever filesystems like that but the standard unix filesystems are not so clever. They simply don&#39;t write blocks to disk unless the program actually writes them. If you write a block of 0s, it will get written to disk; if you advance the write pointer and then write, then there won&#39;t be any disk representation of the blocks you skipped over. When reading, if a block isn&#39;t on disk, it is assumed to be all 0s. As simple and dumb as that."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1473887647, "post_id": 39495892, "comment_id": 66317042, "body": "@rici: see Serge&#39;s reference: the empty blocks are represented in metadata. The metadata maps the block-to-disk address (inode, FAT) and maps your &quot;if a block isn&#39;t on disk&quot; which thus is not so &quot;as simple and dumb as that&quot;"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1473895457, "post_id": 39495892, "comment_id": 66319527, "body": "@paul: the metadata indicates which physical block (if any) each logical block of the file maps to. If no data has been written to a block, it is not mapped. If zeros are written to a block, it is mapped. Contrast that with an actual compressing filesystem, which might be able to notice that a block was full of zeros (or other compressible contents). That would be a lot more sophisticated (and experience shows, lesz robust). Smart and dumb are a bit value-laden; I actually usually find dumb solutions to be cleverer."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1473872132, "creation_date": 1473872132, "answer_id": 39495892, "question_id": 39495836, "link": "https://stackoverflow.com/questions/39495836/creating-a-file-with-a-hole/39495892#39495892", "title": "Creating a file with a hole", "body": "<p>You misunderstand what is meant by a \"hole\".</p>\n\n<p>What it means is that you write some number of bytes, skip over some other number of bytes, then write more bytes.  The bytes you don't explicitly write in between are set to 0.</p>\n\n<p>The file itself doesn't have a hole in it, i.e. two separate sections.  It just has bytes with 0 in them.</p>\n\n<p>If you were to look at the contents of the first file, you'll see it has \"abcdefghij\" followed by 16373 (16384 - 10 - 1) bytes containing the value 0 (not the character \"0\") followed by ABCDEFGHIJ.</p>\n"}], "owner": {"reputation": 111, "user_id": 6026754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/049c4e59bb950a981dd74998803c3db4?s=128&d=identicon&r=PG&f=1", "display_name": "DR29", "link": "https://stackoverflow.com/users/6026754/dr29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1539, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1473872535, "creation_date": 1473871911, "question_id": 39495836, "link": "https://stackoverflow.com/questions/39495836/creating-a-file-with-a-hole", "title": "Creating a file with a hole", "body": "<p>I was trying to create a file with a hole using a textbook code and modifying it slightly. However, something must've gone wrong, since I don't see any difference between both files in terms of size and disk blocks.</p>\n\n<p>Code to create a file with a hole (Advanced Programming in the Unix Environment)</p>\n\n<pre><code>#include \"apue.h\"\n#include &lt;fcntl.h&gt;\n\nchar    buf1[] = \"abcdefghij\";\nchar    buf2[] = \"ABCDEFGHIJ\";\n\nint\nmain(void)\n{\n    int     fd;\n\n    if ((fd = creat(\"file.hole\", FILE_MODE)) &lt; 0)\n        printf(\"creat error\");\n\n    if (write(fd, buf1, 10) != 10)\n        printf(\"buf1 write error\");\n    /* offset now = 10 */\n\n    if (lseek(fd, 16384, SEEK_SET) == -1)\n        printf(\"lseek error\");\n    /* offset now = 16384 */\n\n    if (write(fd, buf2, 10) != 10)\n        printf(\"buf2 write error\");\n    /* offset now = 16394 */\n\n    exit(0);\n}\n</code></pre>\n\n<p>My code, creating a file basically full of abcdefghij's.</p>\n\n<pre><code>#include \"apue.h\"\n#include &lt;fcntl.h&gt;\n#include&lt;unistd.h&gt;\n\nchar    buf1[] = \"abcdefghij\";\nchar    buf2[] = \"ABCDEFGHIJ\";\n\nint\nmain(void)\n{\n    int     fd;\n\n    if ((fd = creat(\"file.nohole\", FILE_MODE)) &lt; 0)\n        printf(\"creat error\");\n\n    while(lseek(fd,0,SEEK_CUR)&lt;16394)\n    {\n        if (write(fd, buf1, 10) != 10)\n        printf(\"buf1 write error\");\n    }\n\n    exit(0);\n}\n</code></pre>\n\n<p>Printing both files I get the expected output. However, their size is identical. </p>\n\n<pre><code>{linux1:~/dir} ls -ls *hole\n17 -rw-------+ 1 user se 16394 Sep 14 11:42 file.hole\n17 -rw-------+ 1 user se 16400 Sep 14 11:33 file.nohole\n</code></pre>\n"}, {"tags": ["c", "windows", "winapi"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1473871252, "post_id": 39495578, "comment_id": 66308732, "body": "In C++, instead of the <code>memset</code> just do <code>SHELLEXECUTEINFOW shellExecuteInfo{};</code>."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1473871330, "post_id": 39495578, "comment_id": 66308766, "body": "@Cheersandhth.-Alf: Or <code>SHELLEXECUTEINFOW shellExecuteInfo = {sizeof(SHELLEXECUTEINFOW)};</code> after checking that <code>cbSize</code> is the first field of the struct..."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1473871396, "post_id": 39495578, "comment_id": 66308808, "body": "The question has <code>C</code> tag, I don&#39;t think <code>SHELLEXECUTEINFOW shellExecuteInfo{}</code> works."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473871414, "post_id": 39495578, "comment_id": 66308817, "body": "You don&#39;t &quot;have to&quot; use <code>ShellExecuteEx</code> to get elevation. There is moniker-based COM interface that can do the job, and that <code>ShellExecuteEx</code> uses internally. But it&#39;s long ago, I don&#39;t remember the details."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1473871465, "post_id": 39495578, "comment_id": 66308843, "body": "@BarmakShemirani: The original tag was C++. The comment says C++."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473874386, "post_id": 39495578, "comment_id": 66310392, "body": "From the docs: &quot;Note  ShellExecuteEx does not always return an hProcess, even if a process is launched as the result of the call. For example, an hProcess does not return when you use SEE_MASK_INVOKEIDLIST to invoke IContextMenu.&quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1473875001, "post_id": 39495578, "comment_id": 66310735, "body": "See if <a href=\"http://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide\" rel=\"nofollow noreferrer\"><code>CreateProcessElevated()</code></a> can return a process handle for an elevated process."}], "answers": [{"comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1473947732, "post_id": 39510326, "comment_id": 66341698, "body": "Not according to the question that was asked. That states clearly that <code>pathToExe</code> is supplied. You need to answer the question that was asked."}], "tags": [], "owner": {"reputation": 113, "user_id": 5956869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1211918662169991/picture?type=large", "display_name": "LosBlancoo", "link": "https://stackoverflow.com/users/5956869/losblancoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1473940275, "creation_date": 1473940275, "answer_id": 39510326, "question_id": 39495578, "link": "https://stackoverflow.com/questions/39495578/why-shellexecuteex-does-not-set-value-of-shellexecuteinfo-hprocess/39510326#39510326", "title": "Why ShellExecuteEx does not set value of SHELLEXECUTEINFO.hProcess?", "body": "<p>So the problem was that <code>SHELLEXECUTEINFO.lpFile</code> was equal to the path of symbolic  link which points to the executable. This results in usage of Dynamic data exchange.\nMSDN says </p>\n\n<blockquote>\n  <p>In some cases, such as when execution is satisfied through a DDE conversation, no handle will be returned.</p>\n</blockquote>\n\n<p>So if you need to get handle of the process you either have to set <code>lpFile</code> to the actual path of executable or resolve the path of symbolic link.</p>\n\n<p>It works perfectly fine with elevation using <code>lpVerb = \"runas\"</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 5956869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1211918662169991/picture?type=large", "display_name": "LosBlancoo", "link": "https://stackoverflow.com/users/5956869/losblancoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 39510326, "answer_count": 1, "score": -2, "last_activity_date": 1473940275, "creation_date": 1473870901, "question_id": 39495578, "link": "https://stackoverflow.com/questions/39495578/why-shellexecuteex-does-not-set-value-of-shellexecuteinfo-hprocess", "title": "Why ShellExecuteEx does not set value of SHELLEXECUTEINFO.hProcess?", "body": "<p>Why does <code>SHELLEXECUTEINFO.hProcess</code> is still <code>NULL</code> after successfully launching an executable with ShellExecuteEx while if I launch that executable with <code>CreateProcess</code> <code>PROCESS_INFORMATION.hProcess</code> is set to correct handle of executable?</p>\n\n<p>I have to launch that executable with using ShellExecuteEx because it has to be elevated. Executable that I'm launching is <code>winMain</code> application created by me.</p>\n\n<pre><code>SHELLEXECUTEINFOW shellExecuteInfo;\nmemset(&amp;shellExecuteInfo, 0, sizeof(SHELLEXECUTEINFOW));\nshellExecuteInfo.cbSize = sizeof(SHELLEXECUTEINFOW);\nshellExecuteInfo.fMask = SEE_MASK_NOCLOSEPROCESS;\nshellExecuteInfo.hwnd = NULL;\nshellExecuteInfo.lpFile = pathToExe;\nshellExecuteInfo.lpDirectory = NULL;\nshellExecuteInfo.nShow = SW_HIDE;\nshellExecuteInfo.lpVerb = L\"runas\";\nshellExecuteInfo.hInstApp = NULL;\nshellExecuteInfo.lpParameters = NULL;\nShellExecuteExW(&amp;shellExecuteInfo);\n</code></pre>\n"}, {"tags": ["c", "enums"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1473870872, "post_id": 39495524, "comment_id": 66308507, "body": "It won&#39;t even compile. First come up with something that compiles."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1473870873, "post_id": 39495524, "comment_id": 66308508, "body": "Have you tried compiling this? Did it compile cleanly? If not, what did the compiler complain about?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1473871105, "post_id": 39495524, "comment_id": 66308643, "body": "Do you want the user to ht keys m,o,n,d,a,y and press Enter? Then no, you cannot do it like that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1473871264, "post_id": 39495524, "comment_id": 66308737, "body": "Welcome to Stack Overflow.  Please read the <a href=\"https://stackoverflow.com/tour\">About</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> pages soon.  You should post readable and compilable code \u2014 or near compilable code if your problem is about getting something to compile.  Please read about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  It would be sensible to use the <code>%d</code> format for input as well as output, but you need to fix up the <code>printf()</code> call too \u2014 you seem to have included your argument within your string, whereas you forgot to stringify the format argument to <code>scanf()</code>."}, {"owner": {"reputation": 13, "user_id": 6831872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18eba8bf1cdc320557d056610d62f1ed?s=128&d=identicon&r=PG&f=1", "display_name": "Zokeh", "link": "https://stackoverflow.com/users/6831872/zokeh"}, "edited": false, "score": 0, "creation_date": 1473871658, "post_id": 39495524, "comment_id": 66308936, "body": "Sorry - I&#39;m really new to coding, as thus I&#39;m not entirely sure what you mean, when you say that I have included my argument within the string. stringify? - I will have to look that up! The compiler throws me the following error: main.c:13:8: error: expected expression before &#39;%&#39; token                                                                                                 scanf(%d, &amp;day);"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473871853, "post_id": 39495524, "comment_id": 66309048, "body": "It should be <code>&quot;%c&quot;</code> or <code>&quot;%d&quot;</code> or thereabouts."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473872068, "post_id": 39495524, "comment_id": 66309152, "body": "The answer to the question seeking to escape from the code is &quot;No&quot;.  That is, there isn&#39;t a simple way for the user to type <code>monday</code> and have the program convert that to the value of the <code>enum week</code> for <code>monday</code>.  You can add 1 to an enumeration, but there&#39;s no check or processing for <code>sunday + 1</code> being out of range or wrapping back to <code>monday</code>.  You would have add that. Similarly, you can subtract 1 but there&#39;s not spotting when that goes out of range or wrapping back to <code>sunday</code>. There&#39;s no built-in provision for converting the value in <code>day</code> into a string that matches the name of its value."}, {"owner": {"reputation": 13, "user_id": 6831872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18eba8bf1cdc320557d056610d62f1ed?s=128&d=identicon&r=PG&f=1", "display_name": "Zokeh", "link": "https://stackoverflow.com/users/6831872/zokeh"}, "edited": false, "score": 0, "creation_date": 1473872245, "post_id": 39495524, "comment_id": 66309248, "body": "Thank you! That was a very helpful comment."}], "answers": [{"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 1, "last_activity_date": 1473871731, "creation_date": 1473871731, "answer_id": 39495794, "question_id": 39495524, "link": "https://stackoverflow.com/questions/39495524/in-c-can-i-print-the-number-of-the-an-enum-while-input-is-a-string-char-using-e/39495794#39495794", "title": "In C can I print the number of the an enum while input is a string/char, using enumeration?", "body": "<p>No.</p>\n\n<p>I suggest using 7 if statements.</p>\n\n<p>There are a number of problems with your code though.  As a first milestone, I suggest making the program just print out the day of the week the user input.  From there go to having the program output the numeric day value.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1473873366, "post_id": 39495969, "comment_id": 66309831, "body": "The question, though, is about C, not C++.  You should either remove the reference to C++ or relate what C++ handles to C.  Note that the first element in an enumeration is given the value 0 unless you override it.  In the question, day 0 is Monday."}, {"owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473875090, "post_id": 39495969, "comment_id": 66310768, "body": "Thanks, you are right. For some reason I thought this was about C++"}], "tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": 0, "last_activity_date": 1473875050, "last_edit_date": 1473875050, "creation_date": 1473872371, "answer_id": 39495969, "question_id": 39495524, "link": "https://stackoverflow.com/questions/39495524/in-c-can-i-print-the-number-of-the-an-enum-while-input-is-a-string-char-using-e/39495969#39495969", "title": "In C can I print the number of the an enum while input is a string/char, using enumeration?", "body": "<p>Conceptually in the language, <code>enum</code> are not supposed to be accessible by their number (although they <em>are</em>); in C++ the compiler is even free to assign them whatever code it wants, and you are not allowed to use them.</p>\n\n<p>To cleanly achieve what you want, you should <em>explicitly assign them values</em>, like:<br>\n<code>enum week {monday = 1, tuesday = 2, ...};</code><br>\n(or whatever numbers you want to use).</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1473900881, "last_edit_date": 1473900881, "creation_date": 1473875348, "answer_id": 39496712, "question_id": 39495524, "link": "https://stackoverflow.com/questions/39495524/in-c-can-i-print-the-number-of-the-an-enum-while-input-is-a-string-char-using-e/39496712#39496712", "title": "In C can I print the number of the an enum while input is a string/char, using enumeration?", "body": "<pre><code>// scanf(%c, &amp;day);\nscanf(\"%c\", &amp;day);\n</code></pre>\n\n<p>Only reads 1 character into <code>day</code>.</p>\n\n<hr>\n\n<p>Suggest adding an array of week day names.</p>\n\n<p>Input a string.<br>\nLop off trailing <code>\\n</code><br>\nConvert to lower case if desired. (not shown)<br>\nTest input against the 7 names.<br>\nReport results.</p>\n\n<pre><code>int main(void) {\n  enum week {\n    monday, tuesday, wednesday, thursday, friday, saturday, sunday\n  };\n\n  static const char *weekday_name[sunday - monday + 1] = { \"monday\", \"tuesday\",\n      \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\" };\n\n  printf(\"Enter weekday:\\n\");\n  char buffer[80];\n  fgets(buffer, sizeof buffer, stdin);\n  buffer[strcspn(buffer, \"\\r\\n\")] = 0; // lop off trailing \\r and/or \\n\n\n  enum week wdn;\n  for (wdn = monday; wdn &lt;= sunday; wdn++) {\n    if (strcmp(weekday_name[wdn], buffer) == 0) {\n      break;\n    }\n  }\n  if (wdn &gt; sunday) puts(\"Day not found\");\n  else printf(\"It is day number %d in the week\\n\", wdn);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4565, "user_id": 1134885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c428466054762cf7d4b5fb5f4396fa2?s=128&d=identicon&r=PG", "display_name": "NovaDenizen", "link": "https://stackoverflow.com/users/1134885/novadenizen"}, "is_accepted": false, "score": 0, "last_activity_date": 1473878981, "creation_date": 1473878981, "answer_id": 39497623, "question_id": 39495524, "link": "https://stackoverflow.com/questions/39495524/in-c-can-i-print-the-number-of-the-an-enum-while-input-is-a-string-char-using-e/39497623#39497623", "title": "In C can I print the number of the an enum while input is a string/char, using enumeration?", "body": "<p>I suggest abandoning the <code>enum week</code>, write a function <code>int parseWeekdayName(char *)</code> returing 0-6, and set up a static array<code>char *nameOfWeekday[7] = { \"Sunday\", \"Monday\"...}</code></p>\n"}], "owner": {"reputation": 13, "user_id": 6831872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18eba8bf1cdc320557d056610d62f1ed?s=128&d=identicon&r=PG&f=1", "display_name": "Zokeh", "link": "https://stackoverflow.com/users/6831872/zokeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 39496712, "answer_count": 4, "score": 0, "last_activity_date": 1473900881, "creation_date": 1473870716, "last_edit_date": 1473871397, "question_id": 39495524, "link": "https://stackoverflow.com/questions/39495524/in-c-can-i-print-the-number-of-the-an-enum-while-input-is-a-string-char-using-e", "title": "In C can I print the number of the an enum while input is a string/char, using enumeration?", "body": "<p>I'm trying to make a code that lets the user input a weekday (i.e monday), and then making it print which number the day is in the week.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nenum week {monday, tuesday, wednesday, thursday, friday, saturday, sunday};\n\n\nint main (void) {\n\nenum week day;\n\nprintf(\"Enter weekday:\\n\");\nscanf(%c, &amp;day);\n\nprintf(\"It is day number %d in the week, day+1\"); // Enumeration is 0-indexed, which is why day+1 is added so that the 1st day is monday, otherwise monday would be the 0th day\n\n\n}\n</code></pre>\n\n<p>This is what I came up with so far - can I do it like this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 1, "creation_date": 1473869854, "post_id": 39495233, "comment_id": 66307907, "body": "You can use sprintf, which writes into a char buffer? Make sure your buffer is big enough (expected length + 1 for the nul terminator)"}, {"owner": {"reputation": 1478, "user_id": 686557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/501e60e53778f5ae88f7f5354a7082dd?s=128&d=identicon&r=PG", "display_name": "Nick Beeuwsaert", "link": "https://stackoverflow.com/users/686557/nick-beeuwsaert"}, "edited": false, "score": 1, "creation_date": 1473869856, "post_id": 39495233, "comment_id": 66307908, "body": "Look up <code>sprintf</code>"}], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473870399, "post_id": 39495271, "comment_id": 66308198, "body": "It is too easy to cause buffer overrun with <code>sprintf</code>. <code>snprintf</code> is better, since buffer overrun is caused by the programmer telling the function the buffer is bigger than it actually is."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473872017, "post_id": 39495271, "comment_id": 66309131, "body": "@jxh Using <code>snprintf()</code> like in <a href=\"http://stackoverflow.com/a/39495281/2410359\">another answer</a> is not  much better than this answer.  It trades a bad problem (potential buffer overflow in the general case) with an <i>undetected</i> wrong result.  Using <code>snprintf()</code> too often conveys a false sense of &quot;safety&quot; when the result of <code>snprintf()</code> is not checked."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473872331, "post_id": 39495271, "comment_id": 66309300, "body": "@chux: The safety is real so long as the buffer size is correct. The wrong result is truncated output, which is not usually a showstopper when the output is intended for display. But checking success of functions that can fail is just SOP, and something code review and static code analysis tools should be able to find."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473873959, "post_id": 39495271, "comment_id": 66310162, "body": "@jxh The safety is real for <code>sprintf()</code> too so long as the buffer size is correct. The &quot;which is not usually a showstopper&quot; is the false sense of safety of my comment. <code>char s[16], sprintf(s, sizeof s, &quot;Target is %d %d&quot;, lat, lon); cmd(s);</code> Agree <code>snprintf()</code> with result checking should be SOP."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473876464, "post_id": 39495271, "comment_id": 66311459, "body": "@chux: GNU provides <code>asprintf</code> for that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473876987, "post_id": 39495271, "comment_id": 66311692, "body": "@jxh  True, various good non-standard C library  alternatives exist to cope with weakness of <code>sprintf(), snprintf()</code>.  Source code for <code>asprintf()</code> is usually readily available.  Useful for systems that lack <code>asprintf()</code> should OP be on such a system or need to improve <code>asprintf()</code>."}], "tags": [], "owner": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "is_accepted": false, "score": 3, "last_activity_date": 1473869877, "creation_date": 1473869877, "answer_id": 39495271, "question_id": 39495233, "link": "https://stackoverflow.com/questions/39495233/store-printf-in-a-char-array/39495271#39495271", "title": "Store printf in a char array?", "body": "<p>You can use <code>sprintf</code> to get the formatted string.</p>\n\n<p><a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_sprintf.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/c_standard_library/c_function_sprintf.htm</a></p>\n"}, {"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473876776, "post_id": 39495281, "comment_id": 66311599, "body": "The result of <code>snprintf</code> should be checked to see if a larger buffer was required, or some other error occurred."}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1473877542, "post_id": 39495281, "comment_id": 66311988, "body": "The buffer size was chosen to have sufficient room for the known inputs. The maximum length of the rendered string is 13 characters. Other error checking was omitted for brevity."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1473877720, "post_id": 39495281, "comment_id": 66312099, "body": "Sorry, my comment should have begun with &quot;Generally speaking, ...&quot;."}], "tags": [], "owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "is_accepted": true, "score": 13, "last_activity_date": 1473869913, "creation_date": 1473869913, "answer_id": 39495281, "question_id": 39495233, "link": "https://stackoverflow.com/questions/39495233/store-printf-in-a-char-array/39495281#39495281", "title": "Store printf in a char array?", "body": "<p>Yes, you can use <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/fprintf.html\" rel=\"noreferrer\"><code>snprintf</code></a> (a safer alternative to <code>sprintf</code>). The only difference between <code>snprintf</code> and <code>printf</code> is that <code>snprintf</code> writes to a <code>char *</code> instead of directly to standard output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char buffer[128];\n    int result = 4;\n\n    snprintf(buffer, sizeof(buffer), \"S: %d\", result);\n\n    printf(\"%s\\n\", buffer);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2439, "user_id": 4892263, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84a7fea3125adaefccdacc5ec2994572?s=128&d=identicon&r=PG&f=1", "display_name": "Cher", "link": "https://stackoverflow.com/users/4892263/cher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9747, "favorite_count": 0, "accepted_answer_id": 39495281, "answer_count": 2, "score": 4, "last_activity_date": 1473869913, "creation_date": 1473869766, "question_id": 39495233, "link": "https://stackoverflow.com/questions/39495233/store-printf-in-a-char-array", "title": "Store printf in a char array?", "body": "<p>is there a way to take the result of a <code>printf in a char array</code>?</p>\n\n<p>I need to set a string P: result</p>\n\n<p>where <code>result</code> is an <code>int</code></p>\n\n<p>So if <code>result = 4;</code></p>\n\n<p>So I need a <code>char array</code> containing <code>\"S: 4\"</code></p>\n\n<p>Other methods are fine too, however I have my result in <code>printf</code>, so I wonder if I can just fetch it?</p>\n"}, {"tags": ["c", "curl"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1473870301, "post_id": 39494967, "comment_id": 66308146, "body": "Look at <code>fork</code> and <code>exec</code> family."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1473877522, "post_id": 39494967, "comment_id": 66311977, "body": "<a href=\"https://curl.haxx.se/libcurl/c/libcurl-multi.html\" rel=\"nofollow noreferrer\"><code>libcurl</code>&#39;s &quot;multi&quot; interface can do async requests</a>"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1473877597, "post_id": 39494967, "comment_id": 66312022, "body": "This is a classic case of an A/B problem in a question, by the way --- you need to do A (async cURL requests), you <i>think</i> you need B (multiprocess operation), so you ask about B instead of A."}, {"owner": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 1, "creation_date": 1473878224, "post_id": 39494967, "comment_id": 66312351, "body": "@Tim\u010cas It&#39;s <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "edited": false, "score": 0, "creation_date": 1473878506, "post_id": 39494967, "comment_id": 66312499, "body": "@Gabriel: Right, my bad. I&#39;ve also heard it being used as the &quot;AB problem&quot;. Point remains."}, {"owner": {"reputation": 123, "user_id": 3459555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cd89357f556a6b963c0d919b44e190?s=128&d=identicon&r=PG&f=1", "display_name": "user3459555", "link": "https://stackoverflow.com/users/3459555/user3459555"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1474382918, "post_id": 39494967, "comment_id": 66503051, "body": "@Tim\u010cas Ended up using multi threading to solve the issue. For Windows I used CreateThread and Linux used pthread."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1474404662, "post_id": 39494967, "comment_id": 66515596, "body": "@user3459555: Yes, that&#39;s the usual way of doing it."}], "owner": {"reputation": 123, "user_id": 3459555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cd89357f556a6b963c0d919b44e190?s=128&d=identicon&r=PG&f=1", "display_name": "user3459555", "link": "https://stackoverflow.com/users/3459555/user3459555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1473868856, "creation_date": 1473868856, "question_id": 39494967, "link": "https://stackoverflow.com/questions/39494967/send-commands-to-another-c-program", "title": "Send commands to another C program", "body": "<p>There's an older program written in C that I have the source to and I want to send cURL. I noticed when trying to send/receive curl it has to wait for the response so the entire thread gets held up. </p>\n\n<p>I was thinking of making another program to send/receive to keep the other program freed up. What's the easiest way of doing this? Is there a better way? My only restriction is it must be written in C.</p>\n"}, {"tags": ["c", "linux", "unix", "process", "pid"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1473869093, "post_id": 39494645, "comment_id": 66307458, "body": "I think you&#39;re hosed, frankly. If processes are being spawned at a rate of more than 2^16 per second, I would absolutely expect that PID+starttime collisions are possible. The kernel people would have to have had a concrete reason to distort starttime values to make PID+starttime unique, and I would expect that starttime accuracy was felt to be more important."}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1473879315, "post_id": 39494645, "comment_id": 66312957, "body": "@zwol Not disagreeing with your overall conclusion, but keep in mind that PID-wraparound can occur far more frequently than 2^16 per second. Granted, it&#39;s still quite unlikely, but consider a system that already has 2^16-4 long-running processes - then PID-wraparound will occur every 4 forks..."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1473879416, "post_id": 39494645, "comment_id": 66313007, "body": "@twalberg Oh, good point, that didn&#39;t even occur to me."}, {"owner": {"reputation": 4565, "user_id": 1134885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c428466054762cf7d4b5fb5f4396fa2?s=128&d=identicon&r=PG", "display_name": "NovaDenizen", "link": "https://stackoverflow.com/users/1134885/novadenizen"}, "edited": false, "score": 1, "creation_date": 1473880958, "post_id": 39494645, "comment_id": 66313805, "body": "You should look into the <a href=\"http://netsplit.com/the-proc-connector-and-socket-filters\" rel=\"nofollow noreferrer\">Proc connector</a>.  With that you can subscribe to all process events happening on the system, including <code>fork()</code> and <code>exec()</code>."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1473910268, "post_id": 39494645, "comment_id": 66322710, "body": "The proc connector looks super-useful, thanks! It&#39;s unfortunately Linux-only, though. Know of anything cross-platform like that?"}], "answers": [{"tags": [], "owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "is_accepted": true, "score": 1, "last_activity_date": 1473915249, "creation_date": 1473915249, "answer_id": 39503352, "question_id": 39494645, "link": "https://stackoverflow.com/questions/39494645/in-unix-ish-environments-is-pid-wraparound-guaranteed-to-change-process-start-t/39503352#39503352", "title": "In Unix-ish environments, is PID wraparound guaranteed to change process start time?", "body": "<p>Since the assignment of PIDs and proc table management in general is not defined by any standard it's literally impossible to do what you want in a portable way.</p>\n\n<p>You will need to do as you say and develop multiple platform-specific implementations to gather enough information about a process to determine a unique identity for every process.</p>\n\n<p>On the other hand if you don't need this information in real time as the processes are started and while they are still running you can, on most unix-y systems, simply turn on process accounting and have a guaranteed unique and complete record of every process that has been run by the system.  Process accounting files are not standardized either, but there will be header files defining their record format, and there should be tools on each type of system which can process and summarize accounting files in various ways.</p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1475492949, "post_id": 39544361, "comment_id": 66949926, "body": "A comment for the downvote would be appreciated, mostly by the fact that different unices have different ways to ensure it and it&#39;s something that not only must be ensured, but ensured efficiently."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1476810434, "post_id": 39544361, "comment_id": 67499685, "body": "This does not answer the question, which is about the effects of PID wraparound on process start time. PID uniqueness is not in question; <i>process</i> uniqueness is what I&#39;m trying to get better at identifying."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": -2, "last_activity_date": 1474098925, "creation_date": 1474098925, "answer_id": 39544361, "question_id": 39494645, "link": "https://stackoverflow.com/questions/39494645/in-unix-ish-environments-is-pid-wraparound-guaranteed-to-change-process-start-t/39544361#39544361", "title": "In Unix-ish environments, is PID wraparound guaranteed to change process start time?", "body": "<p>PID wrap around is guaranteed.  You'll never get two processes with the same pid.</p>\n"}], "owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 39503352, "answer_count": 2, "score": 4, "last_activity_date": 1474098925, "creation_date": 1473867780, "last_edit_date": 1495535631, "question_id": 39494645, "link": "https://stackoverflow.com/questions/39494645/in-unix-ish-environments-is-pid-wraparound-guaranteed-to-change-process-start-t", "title": "In Unix-ish environments, is PID wraparound guaranteed to change process start time?", "body": "<p><strong>Context:</strong></p>\n\n<p>I'm academically interested in tracking/identifying UNIX processes in a way that is proof against <a href=\"https://stackoverflow.com/questions/11323410/linux-pid-recycling\">PID wraparound</a>. To start tracking a process by PID, I need to be able to conclusively identify it on the system. </p>\n\n<p>Thus, I need a function, <code>get_identity</code>, that takes a PID, and only returns once it has determined a system-wide unique identity for that PID. The function should work on all or most POSIX-compliant systems.</p>\n\n<p>The only immutable values in the process table that I know of are PID and start time. However, the following scenario poses a problem:</p>\n\n<ol>\n<li>User calls <code>get_identity(pid)</code></li>\n<li><code>get_identity</code> reads the start time <strong>in seconds-since-the-epoch</strong> of <code>pid</code>, if it exists, and returns the hopefully-unique tuple <code>[pid, starttime]</code> (this is what the excellent <a href=\"https://pypi.python.org/pypi/psutil\" rel=\"nofollow noreferrer\"><code>psutil</code></a> Python library considers \"unique enough\", so it should be pretty robust).</li>\n<li><em>Within a second of that call</em>, PID wraparound occurs on the system, and <code>pid</code> is recycled.</li>\n<li>The <code>[pid, starttime]</code> tuple now refers to a different process than was present at the call to <code>get_identity</code>.</li>\n</ol>\n\n<p>While it is extremely <em>improbable</em> for PID wraparound to occur and re-use the selected PID within a second of its being identified, it is not <em>impossible</em> . . . right?</p>\n\n<p><strong>Questions:</strong></p>\n\n<ul>\n<li>Is there a guarantee on UNIX/POSIX-compliant systems that the start time of a PID will be different between wraparound-caused re-uses of that same PID value?</li>\n<li>If not, how can I uniquely identify a process on a wraparound-prone system?</li>\n</ul>\n\n<p><strong>What I've Tried:</strong></p>\n\n<ul>\n<li>I can simply <code>sleep</code> for a second after examining the target process. If the start-time-in-seconds is the same after the <code>sleep</code>, then it's either the same process that I started watching, or the PID has wrapped around to a different one but the system cannot tell the difference. If the start time has changed, I can return an error, or start over. However, this requires my identification function to wait for up to 1 second before returning, which is not ideal.</li>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/times.html\" rel=\"nofollow noreferrer\"><code>times()</code></a> returns values in clock ticks, which I can convert to seconds. Assuming that the starttime-in-seconds of a process is based on the same clock that <code>times</code> uses, and assuming that all UNIXes use the same rounding logic to convert from <code>clock ticks -&gt; fractional seconds -&gt; whole seconds</code>, I could theoretically use this information to reduce the duration of the <code>sleep</code> in the above workaround to the time until the next \"full second boundary according to the process table\". However, the worst-case sleep time would still be nearly 1 second, so this is not ideal.</li>\n<li>On Linux, I can get the starttime in jiffies (or CPU ticks, for old Linuxes) from the <code>/proc/$pid/stat</code> file. With that information, my program could wait one jiffy(ie?), check the starttime again, and, if it was the same, determine identity. This correctly solves my problem (1 jiffy + overhead is a fast enough runtime), but only on Linux; other UNIX platforms may not have <code>/proc</code>. On BSD, that information is <a href=\"https://stackoverflow.com/questions/26391097/how-can-a-process-inquire-when-it-was-started\">available via the <code>kvm</code> subsystem or via <code>sysctl</code>s</a>. On other Unixes . . . who knows?  I'd need to develop multiple platform-specific implementations to gather this data--something I'd prefer to avoid.</li>\n</ul>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1473867532, "post_id": 39494463, "comment_id": 66306496, "body": "This could have been a comment. Please explain him about escaping characters and special characters such as <code>&#39;\\n&#39;</code>."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 1, "last_activity_date": 1473868379, "last_edit_date": 1473868379, "creation_date": 1473867275, "answer_id": 39494463, "question_id": 39494441, "link": "https://stackoverflow.com/questions/39494441/how-to-check-for-occurrence-of-single-quote-using-getchar-in-c/39494463#39494463", "title": "How to check for occurrence of single quote using getchar() in C?", "body": "<p><a href=\"http://en.cppreference.com/w/c/language/escape\" rel=\"nofollow\">Escape</a> the quote: <code>if (c == '\\'')</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 5681886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a57114e156653f6aea51bb1e1a461a3?s=128&d=identicon&r=PG&f=1", "display_name": "ComputerMaster", "link": "https://stackoverflow.com/users/5681886/computermaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1473868379, "creation_date": 1473867219, "last_edit_date": 1473867760, "question_id": 39494441, "link": "https://stackoverflow.com/questions/39494441/how-to-check-for-occurrence-of-single-quote-using-getchar-in-c", "title": "How to check for occurrence of single quote using getchar() in C?", "body": "<p><code>getchar()</code> can be used to find a particular character from input file by comparing the desired letter with every input character read by <code>getchar()</code> in C as in following code.   </p>\n\n<p>How can we find occurrence of single quote itself?</p>\n\n<p>We cannot compare quote by writing it within pair of quotes as we do for characters </p>\n\n<pre><code>int c;\nwhile((c=getchar)!=EOF)\n{\n  if(c=='A')\n    printf(\"CHARACTER FOUND\");\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 5, "creation_date": 1473867371, "post_id": 39494425, "comment_id": 66306379, "body": "If you want to find the position of your max value, keep it as an integer with your max variable."}, {"owner": {"reputation": 221, "user_id": 5783274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6a38217434887659cef576758cca03b0?s=128&d=identicon&r=PG&f=1", "display_name": "H.K", "link": "https://stackoverflow.com/users/5783274/h-k"}, "edited": false, "score": 0, "creation_date": 1473867993, "post_id": 39494425, "comment_id": 66306798, "body": "@ Neil N. No it is not part of home work. Rather it is part of a project on which I am working."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473868019, "post_id": 39494425, "comment_id": 66306817, "body": "Do you write this code?"}, {"owner": {"reputation": 221, "user_id": 5783274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6a38217434887659cef576758cca03b0?s=128&d=identicon&r=PG&f=1", "display_name": "H.K", "link": "https://stackoverflow.com/users/5783274/h-k"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473868111, "post_id": 39494425, "comment_id": 66306863, "body": "@chux. Yes but with outside help."}, {"owner": {"reputation": 4778, "user_id": 620197, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/19b525479eb245c0cf5ecda163fe1921?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/620197/mike-d"}, "edited": false, "score": 1, "creation_date": 1473868266, "post_id": 39494425, "comment_id": 66306936, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6344192/finding-index-of-max-value-in-an-array-in-c\">finding index of max value in an array in C</a>"}, {"owner": {"reputation": 221, "user_id": 5783274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6a38217434887659cef576758cca03b0?s=128&d=identicon&r=PG&f=1", "display_name": "H.K", "link": "https://stackoverflow.com/users/5783274/h-k"}, "reply_to_user": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 0, "creation_date": 1473868290, "post_id": 39494425, "comment_id": 66306951, "body": "@Winter. The array is added just as an example. In actual, the array will be calculated by preceding functions."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473869201, "post_id": 39494425, "comment_id": 66307524, "body": "@Habib.Khan so your question is actually <i>How can I get the position of most significant binary 1 in a given value</i>. Correct.?"}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 5783274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6a38217434887659cef576758cca03b0?s=128&d=identicon&r=PG&f=1", "display_name": "H.K", "link": "https://stackoverflow.com/users/5783274/h-k"}, "edited": false, "score": 0, "creation_date": 1473868748, "post_id": 39494812, "comment_id": 66307226, "body": "Thanks for the help. How can I find the position of the maximum value in the array."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 221, "user_id": 5783274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6a38217434887659cef576758cca03b0?s=128&d=identicon&r=PG&f=1", "display_name": "H.K", "link": "https://stackoverflow.com/users/5783274/h-k"}, "edited": false, "score": 0, "creation_date": 1473869246, "post_id": 39494812, "comment_id": 66307550, "body": "@Habib.Khan your program already <b>does</b> find the maximum value in the array."}, {"owner": {"reputation": 221, "user_id": 5783274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6a38217434887659cef576758cca03b0?s=128&d=identicon&r=PG&f=1", "display_name": "H.K", "link": "https://stackoverflow.com/users/5783274/h-k"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473869833, "post_id": 39494812, "comment_id": 66307892, "body": "@Michael. the program finds the maximum but i was interested about the index of the maximum as well."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 221, "user_id": 5783274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6a38217434887659cef576758cca03b0?s=128&d=identicon&r=PG&f=1", "display_name": "H.K", "link": "https://stackoverflow.com/users/5783274/h-k"}, "edited": false, "score": 0, "creation_date": 1473885070, "post_id": 39494812, "comment_id": 66315852, "body": "@Habib.Khan well then the title of your question is quite misleading."}], "tags": [], "owner": {"reputation": 1921, "user_id": 6317147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376fccc260dbc5e810117896b2bdf3a9?s=128&d=identicon&r=PG", "display_name": "Gregg", "link": "https://stackoverflow.com/users/6317147/gregg"}, "is_accepted": true, "score": 1, "last_activity_date": 1473869430, "last_edit_date": 1473869430, "creation_date": 1473868338, "answer_id": 39494812, "question_id": 39494425, "link": "https://stackoverflow.com/questions/39494425/how-to-find-the-position-of-maximum-in-an-array-in-c/39494812#39494812", "title": "How to find the position of maximum in an array in C", "body": "<p>put this after the printf statement. and define j at the top.</p>\n\n<pre><code>for (j=0; j&lt;16; j++) {\n    if ((max=max&gt;&gt;1) == 0)  break;\n}\n\nprintf(\"the max bit is %lx \", j);\n</code></pre>\n\n<p>this shows the bit position in conventional notation where the 5th bit is bit 4. add a '+1' to display as bit 5.</p>\n\n<p>to display the position where the max occurs:</p>\n\n<p>below the 'max=array[i]' line, add the following line (after defining maxpos with the other variables)</p>\n\n<pre><code>maxpos = i;  \n</code></pre>\n\n<p>and change the printf to </p>\n\n<pre><code>printf(\"The max is 0x%02x at position 0x%02x \", max, maxpos);\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 5783274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6a38217434887659cef576758cca03b0?s=128&d=identicon&r=PG&f=1", "display_name": "H.K", "link": "https://stackoverflow.com/users/5783274/h-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 39494812, "answer_count": 1, "score": -3, "last_activity_date": 1473869430, "creation_date": 1473867169, "question_id": 39494425, "link": "https://stackoverflow.com/questions/39494425/how-to-find-the-position-of-maximum-in-an-array-in-c", "title": "How to find the position of maximum in an array in C", "body": "<p>I have an array of 16 integer values where  each value is 32 bits each as shown. I can find the maximum of the array as follows.</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  #include &lt;conio.h&gt;\n   // main program \nint main(void){\n    int i, max;\n  int  array[16]; \n  array[0]=0x1;\n  array[1]=0x6;\n  array[2]=0x8;\n  array[3]=0xC;\n  array[4]=0x7;\n  array[5]=0x9;\n  array[6]=0xB;\n  array[7]=0x0;\n  array[8]=0x3;\n  array[9]=0x6;\n  array[10]=0x7;\n  array[11]=0x6;\n  array[12]=0x15;\n  array[13]=0x1;\n  array[14]=0x9;\n  array[15]=0x3;\n\n// calculate max \nmax=array[0];\n\nfor(int i=1;i&lt;16;i++)\n{\n    if(max&lt;array[i])\n    {\n        max=array[i];\n    }\n\n}\nprintf(\"The max is %lx \",max);\n\n getch();\n return 0;\n</code></pre>\n\n<p>I want to find the position of the maximum value in the array and the position of the most significant binary 1 in the maximum value. As can be seen, the maximum value is 0x15 at position 13 in the array and the position of most significant binary 1 in the entry is 5th . How can this be accomplished in C?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473867022, "post_id": 39494333, "comment_id": 66306153, "body": "Start with a peoper signature for <code>main</code>. <code>main()</code> is deprecated."}, {"owner": {"reputation": 19, "user_id": 6831632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5150aa8d58a5ce2d8b720337b86ec562?s=128&d=identicon&r=PG&f=1", "display_name": "Arka Dutta", "link": "https://stackoverflow.com/users/6831632/arka-dutta"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473867315, "post_id": 39494333, "comment_id": 66306343, "body": "Language used here is &quot;C&quot; , and we are newbies using main () , well that is not the problem here"}, {"owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1473867536, "post_id": 39494333, "comment_id": 66306501, "body": "The indentation makes your code very hard to read - not the problem but just an observation. What might help is if you add a single line description of what it is you are trying to achieve rather than expecting readers to guess what your desired output represents."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1473867676, "post_id": 39494333, "comment_id": 66306588, "body": "Take the desired output. Write down all the differences between each number and the number to the right of it. Observe the pattern."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1473868271, "post_id": 39494333, "comment_id": 66306939, "body": "Being a newbie is no excuse for using obsolete material. If you were learning how to send internet packets, would you be studying Morse code? Using <code>main()</code> is very much a problem, because you will be learning other obsolete techniques too."}, {"owner": {"reputation": 698, "user_id": 6697083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zwg0f.png?s=128&g=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/6697083/riley"}, "edited": false, "score": 0, "creation_date": 1473868340, "post_id": 39494333, "comment_id": 66306980, "body": "Why is <code>k=num</code> in the increment portion of the first for loop instead of the initialization?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473868469, "post_id": 39494333, "comment_id": 66307061, "body": "@ArkaDutta: As a beginner, you should learn modern C, not ancient K&amp;R-C. The pre-standard signature is an obsolecence feature and due to be removed in a future version of the standard. Also learn to use spaces in expressions and statements. They are not only for indentation and make your code much more readable. Humands are no compilers."}, {"owner": {"reputation": 19, "user_id": 6831632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5150aa8d58a5ce2d8b720337b86ec562?s=128&d=identicon&r=PG&f=1", "display_name": "Arka Dutta", "link": "https://stackoverflow.com/users/6831632/arka-dutta"}, "edited": false, "score": 0, "creation_date": 1473879293, "post_id": 39494333, "comment_id": 66312947, "body": "Thanks for the suggestion ."}, {"owner": {"reputation": 19, "user_id": 6831632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5150aa8d58a5ce2d8b720337b86ec562?s=128&d=identicon&r=PG&f=1", "display_name": "Arka Dutta", "link": "https://stackoverflow.com/users/6831632/arka-dutta"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1473879466, "post_id": 39494333, "comment_id": 66313031, "body": "@n.m. Difference between each number and the number right to it ?? Would be highly appreciated if you could elaborate just a little ."}], "answers": [{"tags": [], "owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "is_accepted": false, "score": 0, "last_activity_date": 1473868875, "creation_date": 1473868875, "answer_id": 39494977, "question_id": 39494333, "link": "https://stackoverflow.com/questions/39494333/c-pattern-printing-vertical-numbers-using-for-loop/39494977#39494977", "title": "C pattern printing vertical numbers using for loop", "body": "<p>The key to this is how you update <code>n</code> in the inner loop. You need it to take into account not just <code>num</code> but also <code>i</code> as you descend through each iteration. I've fixed <code>num</code> at 5 here and placed the assignment to <code>k</code> at the start of the outer loop as this will always be constant:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int i, j, k, n, num;\n    num = 5;\n\n    for(i = 1, k = num; i &lt;= num; i++){\n        for(j = 1, n = i; j &lt;= i; n += k - j, j++){\n            printf(\"%d \", n);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>1 \n2 6 \n3 7 10 \n4 8 11 13 \n5 9 12 14 15 \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6831632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5150aa8d58a5ce2d8b720337b86ec562?s=128&d=identicon&r=PG&f=1", "display_name": "Arka Dutta", "link": "https://stackoverflow.com/users/6831632/arka-dutta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1115, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1473872497, "creation_date": 1473866950, "last_edit_date": 1473867694, "question_id": 39494333, "link": "https://stackoverflow.com/questions/39494333/c-pattern-printing-vertical-numbers-using-for-loop", "title": "C pattern printing vertical numbers using for loop", "body": "<p>I am working on a pattern that prints the following code using for loop</p>\n\n<pre><code>1\n2 6\n3 7 10\n4 8 11 13\n5 9 12 14 15\n</code></pre>\n\n<p>code is as follows, which results in slightly wrong output.</p>\n\n<pre><code>main(){\n   int i,j,k,n,num;\n   printf(\"\\n Enter no of rows: \");\n   scanf(\"%d\",&amp;num);\n   for(i=1;i&lt;=num;i++,k=num){\n      for(j=1,n=i;j&lt;=i;j++,n+=k){\n        printf(\"%d \",n);\n      }\n   printf(\"\\n\");\n   }\n}\n</code></pre>\n\n<p>And the code gives me this . \nwhich is wrong from the output i wanted</p>\n\n<pre><code>1\n2 6\n3 7 11 \n4 8 12 16\n5 9 13 17 21\n</code></pre>\n"}, {"tags": ["c", "linux", "std", "glibc", "proc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1473866246, "post_id": 39494077, "comment_id": 66305638, "body": "Do you check what <code>stat</code> returns? It doesn&#39;t return with a failure (<code>-1</code>)?"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473866302, "post_id": 39494077, "comment_id": 66305671, "body": "@JoachimPileborg ...it most probably does..."}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "edited": false, "score": 0, "creation_date": 1473866382, "post_id": 39494077, "comment_id": 66305742, "body": "Yes I did. This is just excerpt from the real program."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1473866469, "post_id": 39494077, "comment_id": 66305794, "body": "Then please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> that you can show us. It&#39;s really impossible to tell with that (non-working) code to say anything."}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "edited": false, "score": 0, "creation_date": 1473867257, "post_id": 39494077, "comment_id": 66306310, "body": "Sure. I fixed the code to be full."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1473867638, "post_id": 39494077, "comment_id": 66306561, "body": "<code>stat -c &quot;%t:%T&quot; &#47;home&#47;smoku&#47;test.txt</code> in a terminal window should do the same thing with a <i>proven to be working</i> program and allow you to verify your output"}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1473867695, "post_id": 39494077, "comment_id": 66306605, "body": "@tofro this gives <code>0:0</code>"}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1473867907, "post_id": 39494077, "comment_id": 66306738, "body": "@tofro <code>stat -c &quot;%d&quot; &#47;home&#47;smoku&#47;test.txt</code> gives <code>44</code>"}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1473868023, "post_id": 39494077, "comment_id": 66306819, "body": "@tofro <code>man 1 stat</code> says that <code>t</code> and <code>T</code> are &quot;for character/block device special files&quot;"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1473868101, "post_id": 39494077, "comment_id": 66306858, "body": "yes you are right - I was somehow assuming you look for the type of device rather than the id - so 44 is proven to exist"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473868264, "post_id": 39494077, "comment_id": 66306934, "body": "Using <code>%lu</code> with <code>dev_t</code> is not specified to be correct.  Instead use <code>fprintf(stderr, &quot;Will look for %d =&gt; %u:%u\\n&quot;, (long) sb.st_dev, maj, min);</code> or <code>fprintf(stderr, &quot;Will look for %jd =&gt; %u:%u\\n&quot;, (intmax_t) sb.st_dev, maj, min);</code>"}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473868458, "post_id": 39494077, "comment_id": 66307057, "body": "@chux on my system <code>dev_t</code> is <code>unsigned long</code>, and casting it didn&#39;t change the outcome"}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473868652, "post_id": 39494077, "comment_id": 66307167, "body": "@chux also, no matter the printing format, after major()/minor() i should get proper <code>unsigned:unsigned</code> pair, which gave me still <code>0:44</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473868758, "post_id": 39494077, "comment_id": 66307234, "body": "Good that you cast the value before printing as that eliminates one source of potential UB.  That fact that you type some combination that <i>should</i> work is not as strong as code that is <i>specified</i> to work.  IAC, we can move forward from this."}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473868910, "post_id": 39494077, "comment_id": 66307343, "body": "@chux in fact it introduces the potential issue, as it may be silently loosing part of the value if improperly cast. I will edit the code to remove this printing, as it obviously does not help"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1473873584, "post_id": 39494077, "comment_id": 66309962, "body": "Per <code>man 2 stat</code>, <code>st_dev</code> describes the device <i>on which this file resides</i>, in your case, obviously <code>&#47;dev&#47;bcache0</code>."}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1473873806, "post_id": 39494077, "comment_id": 66310070, "body": "@user58697 <code>&#47;dev&#47;bcache0</code> is <code>252:0</code> -&gt;  <code>brw-rw---- 1 root disk 252, 0 09-13 20:53 &#47;dev&#47;bcache0</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1473887773, "post_id": 39498970, "comment_id": 66317094, "body": "&quot;<i>kernel bug</i>&quot; -- Perhaps it is, but if it were me, I wouldn&#39;t be relying particularly much on device numbers emitted by such filesystems as btrfs that have such a complete abstraction between physical devices and the VFS layer. I wouldn&#39;t be surprised if ZFS had similar effects."}, {"owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "reply_to_user": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1473887900, "post_id": 39498970, "comment_id": 66317137, "body": "I might have a patch already... ;-) If only rebuilding Fedora kernel wouldn&#39;t take hours... :-("}], "tags": [], "owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "is_accepted": true, "score": 0, "last_activity_date": 1474848894, "last_edit_date": 1474848894, "creation_date": 1473884295, "answer_id": 39498970, "question_id": 39494077, "link": "https://stackoverflow.com/questions/39494077/linux-stat2-call-gives-non-existing-device-id/39498970#39498970", "title": "Linux stat(2) call gives non-existing device ID", "body": "<p><code>stat(2)</code> in <code>fs/stat.c</code> uses <code>inode-&gt;i_sb-&gt;s_dev</code> to fill <code>stat.st_dev</code></p>\n\n<p><code>/proc/self/mountinfo</code> in <code>fs/proc_namespace.c</code> uses <code>mnt-&gt;mnt_sb-&gt;s_dev</code></p>\n\n<p>Apparently <code>struct inode</code>.<code>i_sb</code> superblock may be different to <code>struct vfsmount</code>.<code>mnt_sb</code> superblock in case of mount of <em>btrfs subvolume</em>.</p>\n\n<p>This is an issue inherent to btrfs implementation, which <em>\"requires non-trivial changes in the VFS layer\"</em> to fix: <a href=\"https://mail-archive.com/linux-btrfs@vger.kernel.org/msg57667.html\" rel=\"nofollow\">https://mail-archive.com/linux-btrfs@vger.kernel.org/msg57667.html</a></p>\n"}], "owner": {"reputation": 743, "user_id": 139456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c98e96578b2badac301a6d88d6384e?s=128&d=identicon&r=PG", "display_name": "smokku", "link": "https://stackoverflow.com/users/139456/smokku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 39498970, "answer_count": 1, "score": 2, "last_activity_date": 1474848894, "creation_date": 1473866150, "last_edit_date": 1473884317, "question_id": 39494077, "link": "https://stackoverflow.com/questions/39494077/linux-stat2-call-gives-non-existing-device-id", "title": "Linux stat(2) call gives non-existing device ID", "body": "<p>My test program is calling <a href=\"http://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow\">stat(2)</a> to obtain a device the file resides on.</p>\n\n<p><code>stat.c</code>  (built with <code>cc stat.c -o stat</code>)</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/sysmacros.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char *path = \"/home/smoku/test.txt\";\n    unsigned int maj, min;\n    struct stat sb;\n    if (stat(path, &amp;sb) &lt; 0) {\n        fprintf(stderr, \"Error getting stat for '%s': %d %s\\n\", path, errno, strerror(errno));\n        return 1;\n    }\n    maj = major(sb.st_dev);\n    min = minor(sb.st_dev);\n    fprintf(stderr, \"Found '%s' =&gt; %u:%u\\n\", path, maj, min);\n    return 0;\n}\n</code></pre>\n\n<p>Got <code>0:44</code></p>\n\n<pre><code>$ ls -l /home/smoku/test.txt\n-rw-r--r-- 1 smoku smoku 306 08-30 09:33 /home/smoku/test.txt\n\n$ ./stat\nFound '/home/smoku/test.txt' =&gt; 0:44\n\n$ /usr/bin/stat -c \"%d\" /home/smoku/test.txt\n44\n</code></pre>\n\n<p>But... there is no such device in my system and <code>/home</code> is <code>0:35</code></p>\n\n<pre><code>$ grep /home /proc/self/mountinfo\n75 59 0:35 /home /home rw,relatime shared:30 - btrfs /dev/bcache0 rw,ssd,space_cache,subvolid=258,subvol=/home\n</code></pre>\n\n<p>Why do I get a device ID that does not exist in my system?</p>\n"}, {"tags": ["c", "arrays", "algorithm", "performance", "complexity-theory"], "comments": [{"owner": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 2, "creation_date": 1473866280, "post_id": 39493955, "comment_id": 66305657, "body": "sounds like a typical knapsack problem. Is there a limit on the elements and size of array ?"}, {"owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "reply_to_user": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 0, "creation_date": 1473866552, "post_id": 39493955, "comment_id": 66305845, "body": "I would like to use array of size as big as my ressources can handle (in terms of CPU time). The elements of <code>A</code> are bounded between [1,x-1], where <code>x</code> can be any unsigned integer."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1473866883, "post_id": 39493955, "comment_id": 66306061, "body": "Should <i>all</i> values from the array be used in the <i>sum and/or sub</i> operation?"}, {"owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "reply_to_user": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1473867247, "post_id": 39493955, "comment_id": 66306298, "body": "@trincot yes, all values must be used"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473870921, "post_id": 39493955, "comment_id": 66308531, "body": "What makes this problem different from a math one can be shown in this case: (pretend <code>unsigned</code> is 8-bit for simplicity.)  Consider <code>SumSub({250,\t250,\t5, 5}\t254)</code>.. This is true for C as <code>unsigned</code> overflow is well defined - just add the 4 elements.  It is false in math with its unlimited range. It is uncertain what OP wants, a math solution or a C one."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user380772"}, "edited": false, "score": 0, "creation_date": 1473903034, "post_id": 39494257, "comment_id": 66321186, "body": "The problem whose answer is always NO can also &quot;be reduced to subset-sum problem which is NP-Complete.&quot; \u200b (Just output <code>{2,3},4</code>.) \u200b Thus the existence of such a reduction does not show any hardness whatsoever for Remi.b&#39;s problem. \u200b \u200b \u200b \u200b"}], "tags": [], "owner": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "is_accepted": false, "score": 2, "last_activity_date": 1473867418, "last_edit_date": 1473867418, "creation_date": 1473866735, "answer_id": 39494257, "question_id": 39493955, "link": "https://stackoverflow.com/questions/39493955/does-the-array-sum-and-or-sub-to-x/39494257#39494257", "title": "Does the array \u201csum and/or sub\u201d to `x`?", "body": "<p>Unfortunately your problem can be reduced to <a href=\"https://en.wikipedia.org/wiki/Subset_sum_problem\" rel=\"nofollow\">subset-sum problem</a> which is NP-Complete. Thus the exponential solution can't be avoided. </p>\n"}, {"tags": [], "owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1473866810, "creation_date": 1473866810, "answer_id": 39494282, "question_id": 39493955, "link": "https://stackoverflow.com/questions/39493955/does-the-array-sum-and-or-sub-to-x/39494282#39494282", "title": "Does the array \u201csum and/or sub\u201d to `x`?", "body": "<p>Unfortunately this is NP-complete even when x is restricted to the value 0, so don't expect a polynomial-time algorithm.  To show this I'll give a simple reduction from the NP-hard <a href=\"https://en.wikipedia.org/wiki/Partition_problem\" rel=\"nofollow\">Partition Problem</a>, which asks whether a given multiset of positive integers can be partitioned into two parts having equal sums:</p>\n\n<p>Suppose we have an instance of the Partition Problem consisting of n positive integers B_1, ..., B_n.  Create from this an instance of your problem in which A_i = B_i for each 1 &lt;= i &lt;= n, and set x = 0.</p>\n\n<p>Clearly if there is a partition of B into two parts C and D having equal sums, then there is also a solution to the instance of your problem: Put a <code>+</code> in front of every number in C, and a <code>-</code> in front of every number in D (or the other way round).  Since C and D have equal sums, this expression must equal 0.</p>\n\n<p>OTOH, if the solution to the instance of your problem that we just created is YES (TRUE), then we can easily create a partition of B into two parts having equal sums: just put all the positive terms in one part (say, C), and all the negative terms (without the preceding <code>-</code> of course) in the other (say, D).  Since we know that the total value of the expression is 0, it must be that the sum of the (positive) numbers in C is equal to the (negated) sum of the numbers in D.</p>\n\n<p>Thus a YES to either problem instance implies a YES to the other problem instance, which in turn implies that a NO to either problem instance implies a NO to the other problem instance -- that is, the two problem instances have equal solutions.  Thus if it were possible to solve your problem in polynomial time, it would be possible to solve the NP-hard Partition Problem in polynomial time too, by constructing the above instance of your problem, solving it with your poly-time algorithm, and reporting the result it gives.</p>\n"}, {"tags": [], "owner": {"reputation": 1992, "user_id": 6483847, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YgXy3.png?s=128&g=1", "display_name": "Ayon Nahiyan", "link": "https://stackoverflow.com/users/6483847/ayon-nahiyan"}, "is_accepted": true, "score": 1, "last_activity_date": 1473923207, "last_edit_date": 1473923207, "creation_date": 1473875189, "answer_id": 39496681, "question_id": 39493955, "link": "https://stackoverflow.com/questions/39493955/does-the-array-sum-and-or-sub-to-x/39496681#39496681", "title": "Does the array \u201csum and/or sub\u201d to `x`?", "body": "<p>The original problem's solution is indeed exponential as you said. BUT with the given range[1,x-1] for numbers in A[] you can make the solution polynomial. There is a very simple dynamic programming solution.</p>\n\n<p>With the order:</p>\n\n<p>Time Complexity: O(n^2*x)</p>\n\n<p>Memory Complexity: O(n^2*x)</p>\n\n<p>where, n=num of elements in A[]</p>\n\n<p>You need to use dynamic programming approach for this</p>\n\n<p>You know the min,max range that can be made in in the range [-n<em>x,n</em>x]. Create a 2d array of size (n)X(2*n*x+1). Lets call this dp[][]</p>\n\n<p>dp[i][j] = taking all elements of A[] from [0..i-1] whether its possible to make the value j</p>\n\n<p>so </p>\n\n<p>dp[10][3] = 1 means taking first 10 elements of A[] we CAN create the value 3</p>\n\n<p>dp[10][3] = 0 means taking first 10 elements of A[] we can NOT create the value 3</p>\n\n<p>Here is a kind of pseudo code for this:</p>\n\n<pre><code>int SumSub (int* A,int x)\n{\n    bool dp[][];//set all values of this array 0\n    dp[0][0] = true;\n    for(i=1;i&lt;=n;i++) {\n        int val = A[i-1];\n        for(j=-n*x;j&lt;=n*x;j++) {\n            dp[i][j]=dp[ i-1 ][ j + val ] | dp[ i-1 ][ j - val ];\n        }\n    }\n    return dp[n][x];\n}\n</code></pre>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 39496681, "answer_count": 3, "score": 3, "last_activity_date": 1473923207, "creation_date": 1473865746, "last_edit_date": 1473867280, "question_id": 39493955, "link": "https://stackoverflow.com/questions/39493955/does-the-array-sum-and-or-sub-to-x", "title": "Does the array \u201csum and/or sub\u201d to `x`?", "body": "<p><strong>Goal</strong></p>\n\n<p>I would like to write an algorithm (in <code>C</code>) which returns <code>TRUE</code> or <code>FALSE</code> (<code>1</code> or <code>0</code>) depending whether the array <code>A</code> given in input can \u201csum and/or sub\u201d to <code>x</code> (see below for clarification). Note that all values of <code>A</code> are integers bounded between [1,x-1] that were randomly (uniformly) sampled.</p>\n\n<p><strong>Clarification and examples</strong></p>\n\n<p>By \u201csum and/or sub\u201d, I mean placing \"+\" and \"-\" in front of each element of array and summing over. Let's call this function <code>SumSub</code>.</p>\n\n<pre><code>int SumSub (int* A,int x)\n{\n...\n}\n\nSumSub({2,7,5},10)\n</code></pre>\n\n<p>should return <code>TRUE</code> as 7-2+5=10. You will note that the first element of <code>A</code> can also be taken as negative so that the order of elements in <code>A</code> does not matter.</p>\n\n<pre><code>SumSub({2,7,5,2},10)\n</code></pre>\n\n<p>should return <code>FALSE</code> as there is no way to  \u201csum and/or sub\u201d the elements of <code>array</code> to reach the value of <code>x</code>. Please note, this means that all elements of <code>A</code> must be used.</p>\n\n<p><strong>Complexity</strong></p>\n\n<p>Let <code>n</code> be the length of <code>A</code>. Complexity of the problem is of order O(2^n) if one has to explore all possible combinations of pluses and minus. However, some combinations are more likely than others and therefore are worth being explored first (hoping the output will be <code>TRUE</code>). Typically, the combination which requires substracting all elements from the largest number is impossible (as all elements of <code>A</code> are lower than <code>x</code>). Also, if <code>n&gt;x</code>, it makes no sense to try adding all the elements of <code>A</code>.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How should I go about writing this function?</p>\n"}, {"tags": ["c", "shell", "pipe", "piping"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1473865300, "post_id": 39493754, "comment_id": 66304957, "body": "Without MCVE there is nothing to say."}, {"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 0, "creation_date": 1473865399, "post_id": 39493754, "comment_id": 66305035, "body": "I created the same thing for an homework, this helped me <a href=\"http://stackoverflow.com/questions/948221/does-this-multiple-pipes-code-in-c-makes-sense\" title=\"does this multiple pipes code in c makes sense\">stackoverflow.com/questions/948221/&hellip;</a>"}, {"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1473865581, "post_id": 39493754, "comment_id": 66305152, "body": "@EugeneSh. What is MCVE ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1473865587, "post_id": 39493754, "comment_id": 66305158, "body": "It&#39;s a bit suspicious that you seem to be presenting the same argument array to both of the commands you are <code>exec</code>ing."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 1, "creation_date": 1473865607, "post_id": 39493754, "comment_id": 66305177, "body": "@PandaCool, MCVE is <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1473865755, "post_id": 39493754, "comment_id": 66305277, "body": "Also, if your <code>pipe()</code> or your <code>fork()</code> fails, you just print a diagnostic and attempt to continue with what you would do if they succeeded.  That seems unlikely to work.  If one of those functions fails, you need to abort."}], "answers": [{"tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1473874522, "creation_date": 1473874522, "answer_id": 39496494, "question_id": 39493754, "link": "https://stackoverflow.com/questions/39493754/writing-my-own-piping-function-in-c/39496494#39496494", "title": "Writing my own piping function in C", "body": "<p>Please have a look at this working example that should help you execute a pipeline using C. </p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;errno.h&gt;\n\ntypedef int Pipe[2];\n\n/* exec_nth_command() and exec_pipe_command() are mutually recursive */\nstatic void exec_pipe_command(int ncmds, char ***cmds, Pipe output);\n\nstatic void err_vsyswarn(char const *fmt, va_list args) {\n    int errnum = errno;\n    vfprintf(stderr, fmt, args);\n    if (errnum != 0)\n        fprintf(stderr, \" (%d: %s)\", errnum, strerror(errnum));\n    putc('\\n', stderr);\n}\n\nstatic void err_syswarn(char const *fmt, ...) {\n    va_list args;\n    err_vsyswarn(fmt, args);;\n}\n\nstatic void err_sysexit(char const *fmt, ...) {\n    va_list args;\n    err_vsyswarn(fmt, args);\n    exit(1);\n}\n\n/* With the standard output plumbing sorted, execute Nth command */\nstatic void exec_nth_command(int ncmds, char ***cmds) {\n    assert(ncmds &gt;= 1);\n    if (ncmds &gt; 1) {\n        pid_t pid;\n        Pipe input;\n        if (pipe(input) != 0)\n            err_sysexit(\"Failed to create pipe\");\n        if ((pid = fork()) &lt; 0)\n            err_sysexit(\"Failed to fork\");\n        if (pid == 0) {\n            /* Child */\n            exec_pipe_command(ncmds - 1, cmds, input);\n        }\n        /* Fix standard input to read end of pipe */\n        dup2(input[0], 0);\n        close(input[0]);\n        close(input[1]);\n    }\n    execvp(cmds[ncmds - 1][0], cmds[ncmds - 1]);\n    err_sysexit(\"Failed to exec %s\", cmds[ncmds - 1][0]);\n    /*NOTREACHED*/\n}\n/* exec_nth_command() and exec_pipe_command() are mutually recursive */\n/* Given pipe, plumb it to standard output, then execute Nth command */\nstatic void exec_pipe_command(int ncmds, char ***cmds, Pipe output) {\n    assert(ncmds &gt;= 1);\n    /* Fix stdout to write end of pipe */\n    dup2(output[1], 1);\n    close(output[0]);\n    close(output[1]);\n    exec_nth_command(ncmds, cmds);\n}\n\n/* Execute the N commands in the pipeline */\nstatic void exec_pipeline(int ncmds, char ***cmds) {\n    assert(ncmds &gt;= 1);\n    pid_t pid;\n    if ((pid = fork()) &lt; 0)\n        err_syswarn(\"Failed to fork\");\n    if (pid != 0)\n        return;\n    exec_nth_command(ncmds, cmds);\n}\n\n/*  who | awk '{print $1}' | sort | uniq -c | sort -n */\nstatic char *cmd0[] = {\"who\", 0};\nstatic char *cmd1[] = {\"awk\", \"{print $1}\", 0};\nstatic char *cmd2[] = {\"sort\", 0};\nstatic char *cmd3[] = {\"uniq\", \"-c\", 0};\nstatic char *cmd4[] = {\"sort\", \"-n\", 0};\n\nstatic char **cmds[] = {cmd0, cmd1, cmd2, cmd3, cmd4};\nstatic int ncmds = sizeof(cmds) / sizeof(cmds[0]);\n\nint main(int argc, char **argv) {\n    exec_pipeline(ncmds, cmds);\n    return (0);\n}\n</code></pre>\n\n<p>The pipeline example in the code is</p>\n\n<p><code>who | awk '{print $1}' | sort | uniq -c | sort -n</code></p>\n\n<p>You can use any pipeline. </p>\n\n<p>Test:</p>\n\n<pre><code>dac@dac-Latitude-E7450 ~/C/&gt; \nwho | awk '{print $1}' | sort | uniq -c | sort -n \n      1 dac\ndac@dac-Latitude-E7450 ~/C/&gt; gcc main.c \ndac@dac-Latitude-E7450 ~/C/&gt; ./a.out \n    1 dac\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 6200891, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9dd2923e4708de4c799eff608b04649c?s=128&d=identicon&r=PG&f=1", "display_name": "rsa", "link": "https://stackoverflow.com/users/6200891/rsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473874522, "creation_date": 1473865217, "question_id": 39493754, "link": "https://stackoverflow.com/questions/39493754/writing-my-own-piping-function-in-c", "title": "Writing my own piping function in C", "body": "<p>I am trying to write my own function for piping in C. First, once I have already forked and am in the child, I check to detect where the pipe is input, as below. I am looping through my own StringArray I've created (sa), and copying the token before into char cmd1[64] (initialized previously) and the token after into char cmd2[64]. The int piping is given a value for the next step. </p>\n\n<pre><code>if(strcmp(sa[i], \"|\") == 0)\n        {\n            printf(\"got to the pipe\\n\"); \n            sa[i]=NULL; \n            strcpy(cmd1, sa[i-1]); \n            strcpy(cmd2, sa[i+1]); \n            piping=2; \n        }\n</code></pre>\n\n<p>Then, the program reaches this statement: </p>\n\n<pre><code>if (piping)\n{\n    if (pipe(fd) != 0){\n        perror(\"Failed to create pipe\"); \n    } \n    if ((cpPid = fork()) == -1){\n        perror(\"Failed to fork\"); \n    }\n    if (cpPid == 0){\n        dup2(fd[1], 1);\n        close(fd[0]);\n        close(fd[1]);\n        execvp(cmd1, sa);\n        error(\"failed to exec command 1\");  \n    }\n     else\n    {\n        dup2(fd[0], 0);\n        close(fd[0]);\n        close(fd[1]);\n        execvp(cmd2, sa);\n        error(\"failed to exec command 2\");\n    }\n}\n</code></pre>\n\n<p>My program completely crashes and only gives out Unknown error 10275024. Can someone help me to figure out what is going wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473863683, "post_id": 39493145, "comment_id": 66303805, "body": "A single <code>int</code> object can only hold one value at a time.For counting digits: it might be worth thinking twice. You enter a number by digits. Any reason you convert it first to an integer variable, then back to single digits?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473863778, "post_id": 39493145, "comment_id": 66303872, "body": "To elaborate what @Olaf sir said, <code>if (digit == n)</code> is a flawed concept for what you&#39;re trying to achieve."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1473865765, "post_id": 39493145, "comment_id": 66305281, "body": "@EugeneSh. my bad - I thought he wanted the digit that occurred most often - I&#39;ll delete the comment."}, {"owner": {"reputation": 126, "user_id": 6288232, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/31b4af300de80f5948bc08638711e260?s=128&d=identicon&r=PG&f=1", "display_name": "Youssef Sakuragi", "link": "https://stackoverflow.com/users/6288232/youssef-sakuragi"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1473867099, "post_id": 39493145, "comment_id": 66306202, "body": "@PaulR you read it good, that was my question yea."}], "answers": [{"comments": [{"owner": {"reputation": 126, "user_id": 6288232, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/31b4af300de80f5948bc08638711e260?s=128&d=identicon&r=PG&f=1", "display_name": "Youssef Sakuragi", "link": "https://stackoverflow.com/users/6288232/youssef-sakuragi"}, "edited": false, "score": 0, "creation_date": 1473865032, "post_id": 39493280, "comment_id": 66304753, "body": "Thanks! but how do i loop through the digits using a while loop?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 126, "user_id": 6288232, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/31b4af300de80f5948bc08638711e260?s=128&d=identicon&r=PG&f=1", "display_name": "Youssef Sakuragi", "link": "https://stackoverflow.com/users/6288232/youssef-sakuragi"}, "edited": false, "score": 0, "creation_date": 1473865130, "post_id": 39493280, "comment_id": 66304818, "body": "@YoussefSakuragi You already do in the code posted in the question, just the counter and end condition are wrong\u2026"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 126, "user_id": 6288232, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/31b4af300de80f5948bc08638711e260?s=128&d=identicon&r=PG&f=1", "display_name": "Youssef Sakuragi", "link": "https://stackoverflow.com/users/6288232/youssef-sakuragi"}, "edited": false, "score": 0, "creation_date": 1473937398, "post_id": 39493280, "comment_id": 66334990, "body": "@YoussefSakuragi Because the loop terminates too soon in that case, because the <code>while</code> condition is wrong, as stated in the answer."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": true, "score": 1, "last_activity_date": 1473863973, "creation_date": 1473863973, "answer_id": 39493280, "question_id": 39493145, "link": "https://stackoverflow.com/questions/39493145/how-to-count-duplicate-ints/39493280#39493280", "title": "How to count duplicate ints", "body": "<p>You \"overwrite\" the original <code>digit</code> (the one you are looking for) when you assign to it with <code>digit = n % 10</code>. If you consider the naming of the variables, you could have <code>searched_digit</code> and <code>current_digit</code>, then the check would be <code>if (current_digit == searched_digit)</code>.</p>\n\n<p>(Admittedly such verbose variable names are not idiomatic C, but if you are just learning, do not add further complexity with cryptic or ambiguous naming.)</p>\n\n<p>Furthermore, the <code>while</code> condition needs some work, <code>digit != n</code> may never be false... Try looping until there are no more digits.</p>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1473871100, "creation_date": 1473871100, "answer_id": 39495632, "question_id": 39493145, "link": "https://stackoverflow.com/questions/39493145/how-to-count-duplicate-ints/39495632#39495632", "title": "How to count duplicate ints", "body": "<p>You're writing code to undo what you asked <code>scanf()</code> to do for you, assemble textual digits into a number.  If instead you work with the unconverted text, it's somewhat simpler:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\n\n    char character, string[1024];\n\n    (void) scanf(\"%c\", &amp;character);\n    (void) scanf(\"%s\", string);\n\n    int count = 0;\n\n    for (char *pointer = string; *pointer != '\\0'; ++pointer) {\n\n        if (*pointer == character) {\n            count++;\n        }\n    }\n\n    printf(\"%d\\n\", count);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>USAGE</strong></p>\n\n<pre><code>&gt; ./a.out\n1 11111\n5\n&gt;\n</code></pre>\n\n<p>This might not solve your problem, but if so, then there's likely more to the problem than you've described (e.g. letters appear in the data so you need <code>scanf()</code> to help isolate numbers, etc.)</p>\n"}], "owner": {"reputation": 126, "user_id": 6288232, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/31b4af300de80f5948bc08638711e260?s=128&d=identicon&r=PG&f=1", "display_name": "Youssef Sakuragi", "link": "https://stackoverflow.com/users/6288232/youssef-sakuragi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 39493280, "answer_count": 2, "score": -3, "last_activity_date": 1473871100, "creation_date": 1473863646, "last_edit_date": 1473867273, "question_id": 39493145, "link": "https://stackoverflow.com/questions/39493145/how-to-count-duplicate-ints", "title": "How to count duplicate ints", "body": "<p>I want to count the amount of same used numbers in an int.</p>\n\n<p>The if loop won't work why is that?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n\n    unsigned int digit;\n    unsigned int n;\n    int current_digit;\n\n     scanf(\"%u\", &amp;digit);\n     scanf(\"%u\", &amp;n);\n\n\n     int i = 0;\n\n    while(current_digit != n) {\n\n        current_digit = n % 10;\n        n /= 10;\n             printf(\"%i\", current_digit);\n             if (current_digit == digit){\n              i++;\n\n         }\n\n    }\n\n     printf(\"%d\", i);\n}\n</code></pre>\n\n<p>I want the if loop to check how many time <code>digit</code> is used in <code>n</code>. But the if loop does not work properly.</p>\n\n<p>Example: <code>digit</code> = 1<code>n</code> = 11111 Then the outcome should be 5 since 1 is used 5 times in <code>n</code> but the output is 4</p>\n"}, {"tags": ["c", "struct", "segmentation-fault"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1473863606, "post_id": 39493039, "comment_id": 66303739, "body": "What are the compiler warnings?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1473863612, "post_id": 39493039, "comment_id": 66303742, "body": "<code>arr</code> is not initialized, so the whole code is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">UB</a>."}, {"owner": {"reputation": 5292, "user_id": 246534, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ukMU2.jpg?s=128&g=1", "display_name": "kfb", "link": "https://stackoverflow.com/users/246534/kfb"}, "edited": false, "score": 0, "creation_date": 1473863676, "post_id": 39493039, "comment_id": 66303800, "body": "Could you reformat your question a little? As presented the code is very unclear."}, {"owner": {"reputation": 21, "user_id": 6220464, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/27dd7066424fc5ab4b2c5dcc4a39a086?s=128&d=identicon&r=PG&f=1", "display_name": "ryan", "link": "https://stackoverflow.com/users/6220464/ryan"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1473863874, "post_id": 39493039, "comment_id": 66303951, "body": "@SouravGhosh  run time error is  :  Segmentation fault (core dumped)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1473863945, "post_id": 39493039, "comment_id": 66303987, "body": "@ryan I&#39;m almost sure your compiler warned you, but you chose to ignore them, or silenced your compiler.. :)"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1473863994, "post_id": 39493039, "comment_id": 66304019, "body": "<code>printf(&quot;%p&quot;, ptr)</code> is one of the rare cases where, in C, you actually <b>do</b> need to cast the pointer: <code>printf(&quot;%p&quot;, (void *) ptr);</code>"}, {"owner": {"reputation": 21, "user_id": 6220464, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/27dd7066424fc5ab4b2c5dcc4a39a086?s=128&d=identicon&r=PG&f=1", "display_name": "ryan", "link": "https://stackoverflow.com/users/6220464/ryan"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1473864170, "post_id": 39493039, "comment_id": 66304138, "body": "@SouravGhosh no warning at all. running on linux 64bit."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1473864679, "post_id": 39493039, "comment_id": 66304500, "body": "Related (not duplicate because linked article is about writing while this article is about reading): <a href=\"http://stackoverflow.com/questions/37549594/why-do-i-get-a-mysterious-crash-or-segmentation-fault-when-i-copy-scan-data-to\">c - Why do I get a mysterious crash or &quot;segmentation fault&quot; when I copy/scan data to an uninitialized pointer? - Stack Overflow</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1473865045, "post_id": 39493039, "comment_id": 66304760, "body": "Just a tip: put the <code>newline</code> at the <i>end</i> of the format string, not at the start. Then when you crash, there are no unprinted messages buffered, to confuse you as to where the program reached. You should only omit the final newline, if you have more to print in another statement, such as array values in a loop. Then, after the loop <code>printf(&quot;\\n&quot;);</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473865644, "post_id": 39493039, "comment_id": 66305198, "body": "Please format your code correctly."}], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 5306495, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zA_hch-dee4/AAAAAAAAAAI/AAAAAAAABc8/pQiKydilpxQ/photo.jpg?sz=128", "display_name": "Rajmani Arya", "link": "https://stackoverflow.com/users/5306495/rajmani-arya"}, "is_accepted": false, "score": 0, "last_activity_date": 1473863655, "creation_date": 1473863655, "answer_id": 39493148, "question_id": 39493039, "link": "https://stackoverflow.com/questions/39493039/why-segmentaion-fault-in-c-program/39493148#39493148", "title": "Why segmentaion fault in C program?", "body": "<p>You took 5 pointer variable pointing to keyVal struct for which memory is not allocated thats why it ran into segmentation fault. Use <code>malloc</code> to allocate memory and then use. </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6830672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6aa854ca3fde804f4827eaad8f292c?s=128&d=identicon&r=PG&f=1", "display_name": "Deepthy S Nair", "link": "https://stackoverflow.com/users/6830672/deepthy-s-nair"}, "is_accepted": false, "score": 0, "last_activity_date": 1473863916, "creation_date": 1473863916, "answer_id": 39493257, "question_id": 39493039, "link": "https://stackoverflow.com/questions/39493039/why-segmentaion-fault-in-c-program/39493257#39493257", "title": "Why segmentaion fault in C program?", "body": "<p>You can use &amp;arr[i].val rather than &amp;arr[i][0].val .</p>\n"}, {"tags": [], "owner": {"reputation": 681, "user_id": 6683985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJocR.jpg?s=128&g=1", "display_name": "Remy J", "link": "https://stackoverflow.com/users/6683985/remy-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1473880399, "creation_date": 1473880399, "answer_id": 39498012, "question_id": 39493039, "link": "https://stackoverflow.com/questions/39493039/why-segmentaion-fault-in-c-program/39498012#39498012", "title": "Why segmentaion fault in C program?", "body": "<p>See the comments for explanation.<br>\n<strong>I left the last <code>for {...}</code> on purpose I'm hoping you will be  able to correct it yourself</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt; \n#include&lt;stdlib.h&gt;\n\nstruct keyVal {\n    int key;\n    int val;\n};\n\nint main()\n{\n    /*\n      You are creating an array composed of 5 cells.\n      Each cell is bound to contain an address of a variable\n      of which should be a keyVal.\n    */\n    struct keyVal *arr[5];\n    int i;\n\n    /* \n     Use curly brackets to wrap the content of the loop\n     even though you only have one instruction it helps for readability\n     and prevents errors.\n    */\n    for(i = 0; i &lt; 5; i++) {\n        printf(\": %p | %p\\n\", &amp;arr[i][0].val, &amp;arr[i]);\n    }\n\n    /*\n     You are getting a segmentation fault here because you are trying to access something which does not exist.\n    */\n    //printf(\": %d - %d\\n\", arr[0][0].val, arr[0]-&gt;val);\n\n    /***************************************************\n     BEGIN CORRECTION :the field val will be initialized.\n    ***************************************************/\n\n    arr[0] = malloc(sizeof(struct keyVal)); // Allocating \"sizeof(struct keyVal)\" bytes in memory.\n    arr[0]-&gt;val = 42; // Assigning a value to the field val in the first cell of arr. \n    printf(\": %d | %d\\n\", arr[0][0].val, arr[0]-&gt;val); // Now we can print as a value now exists.\n\n    /***************************************************\n     END CORRECTION\n    ***************************************************/\n    /*\n     Again use brackets ;p\n     I think you can solve that one on your own, now.\n    */  \n    for(i = 0; i &lt; 5; i++) {\n        printf(\": %d | %d \\n\", arr[i][0].val, arr[i]-&gt;val);\n    }\n    // Don't forget to free \"ALL\" the memory allocated with malloc.\n    free(arr[0]);\n\n    return 0;\n}\n</code></pre>\n\n<p>Find out about <a href=\"http://man7.org/linux/man-pages/man3/free.3.html\" rel=\"nofollow\">malloc and free</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 6220464, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/27dd7066424fc5ab4b2c5dcc4a39a086?s=128&d=identicon&r=PG&f=1", "display_name": "ryan", "link": "https://stackoverflow.com/users/6220464/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1473880399, "creation_date": 1473863388, "last_edit_date": 1473866761, "question_id": 39493039, "link": "https://stackoverflow.com/questions/39493039/why-segmentaion-fault-in-c-program", "title": "Why segmentaion fault in C program?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct keyVal\n{\n    int key;\n    int val;\n};\n\nint main()\n{\n\n    struct keyVal *arr[5];\n    int i;\n    for(i=0;i&lt;5;i++)\n        printf(\"\\n : %p     %p      \",&amp;arr[i][0].val,&amp;arr[i]);\n    printf(\"\\n\\n\");\n    printf(\"\\n : %d     %d      \",arr[0][0].val,arr[0]-&gt;val);\n    printf(\"\\n\\n\");\n\n    for(i=0;i&lt;5;i++)\n        printf(\"\\n : %d     %d      \",arr[i][0].val,arr[i]-&gt;val);\n    printf(\"\\n\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>First, <code>for( ; ; );</code> will generate same <code>%p %p</code> from <code>arr[0][0]</code> to <code>arr[4][0]</code>   and <code>arr[0]</code> to <code>arr[4]</code>, which means <code>arr[i][0] == arr[i]</code>  where <code>i = 0,1,2,3,4</code>.</p>\n\n<p>Second <code>for( ; ; );</code>  should print values(garbage value) of <code>arr[i][0].key</code> (<code>arr[i]-&gt;key</code>).</p>\n\n<p>We can access key by doing:</p>\n\n<p><code>arr[i][0].key</code> OR <code>arr[i]-&gt;key</code> where <code>i = 0,1,2,3,4</code>.</p>\n"}, {"tags": ["c", "linux", "matlab"], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 731872, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/QWA8Z.jpg?s=128&g=1", "display_name": "Emilien", "link": "https://stackoverflow.com/users/731872/emilien"}, "is_accepted": false, "score": 2, "last_activity_date": 1473867930, "last_edit_date": 1473867930, "creation_date": 1473866486, "answer_id": 39494177, "question_id": 39492302, "link": "https://stackoverflow.com/questions/39492302/delay-measurement-and-synchronisation-between-raspberry-pi/39494177#39494177", "title": "Delay measurement and synchronisation between raspberry pi", "body": "<p>It looks like an interesting project but I think you underestimate the problem a little bit. The first issue is that you need to <a href=\"https://en.wikipedia.org/wiki/Clock_synchronization\" rel=\"nofollow\">synchonize</a> the two sensors. Given the speed of sound and if you want an accuracy of about 1m you need to synchronize them with about 1ms accuracy. You could try with the Network Time Protocol but I'm not sure you can reach this accuracy even with a master on the local network. Better synchronization can be achieved with <a href=\"https://en.wikipedia.org/wiki/Precision_Time_Protocol\" rel=\"nofollow\">PTP</a> (over ethernet) or GPS if you can receive a GPS signal. </p>\n\n<p>Then if you manage to achieve this, a first step could be to record a few hand claps on both raspberry pi, save the timestamp when you start recording on both and see if you actually obtain something significant. Maybe you will also need to use a microcontroller and a real-time operating system instead!</p>\n"}, {"tags": [], "owner": {"reputation": 260, "user_id": 239625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34f892c5eebb090f3dc8f87e99e7303?s=128&d=identicon&r=PG", "display_name": "Felipe Tonello", "link": "https://stackoverflow.com/users/239625/felipe-tonello"}, "is_accepted": true, "score": 1, "last_activity_date": 1474365925, "creation_date": 1474365925, "answer_id": 39591248, "question_id": 39492302, "link": "https://stackoverflow.com/questions/39492302/delay-measurement-and-synchronisation-between-raspberry-pi/39591248#39591248", "title": "Delay measurement and synchronisation between raspberry pi", "body": "<p>There are many ways to synchronise clocks. It could be in a <em>system level</em> or in <em>application level</em>.</p>\n\n<p>System level tend to be easier because there are already tools to do the job. I don't recommend you doing PTP at this stage, as mentioned by Emilien, <a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/ch-Configuring_PTP_Using_ptp4l.html\" rel=\"nofollow\">since it is quite complicated to make it work</a>. Instead I would recommend you to use normal <a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sect-Date_and_Time_Configuration-Command_Line_Configuration-Network_Time_Protocol.html\" rel=\"nofollow\">setup via the same NTP network on all machines</a>.</p>\n\n<p>Example of NTP setup:</p>\n\n<ol>\n<li>Query the server with <code># ntpdate -q 0.rhel.pool.ntp.org</code></li>\n<li>If it is running, setup your local clock with <code># ntpdate 0.rhel.pool.ntp.org 1.rhel.pool.ntp.org</code></li>\n</ol>\n\n<blockquote>\n  <p>OBS: <strong>#</strong> means root user (which most likely means that you will need to run the command with <code>sudo</code>), whilst <strong>$</strong> means normal user.</p>\n</blockquote>\n\n<p>Check all machines times with <code>$ date +%k:%M:%S.%N</code> which will return the clock down to a nanosecond resolution.</p>\n\n<blockquote>\n  <p>If that doesn't acheive the desired result then try the PTP aproach, or just synchronise all your devices when they connect to the master, where your master can normalise each independant clock. I will not go into details here.</p>\n</blockquote>\n\n<p>Then you can send your audio data via TCP/IP (or perhaps UDP/IP to lower latency) like you mentioned before, but always send the timestamp of your slave machine associated to a audio frame using <a href=\"http://man7.org/linux/man-pages/man2/clock_gettime.2.html\" rel=\"nofollow\">clock_gettime()</a> function with <code>CLOCK_REALTIME</code> as the <code>clk_id</code> argument.</p>\n"}], "owner": {"reputation": 59, "user_id": 4425553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7274b184d0393ce9d1fb574ed4f5825b?s=128&d=identicon&r=PG&f=1", "display_name": "MiM1", "link": "https://stackoverflow.com/users/4425553/mim1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 39591248, "answer_count": 2, "score": -1, "last_activity_date": 1474365925, "creation_date": 1473861320, "question_id": 39492302, "link": "https://stackoverflow.com/questions/39492302/delay-measurement-and-synchronisation-between-raspberry-pi", "title": "Delay measurement and synchronisation between raspberry pi", "body": "<p>I am doing a project with 2 raspberry pi which work as servers and a laptop which is the client.\nI have attached to each raspberry and usb microphone and using the Portaudio Library im capturing audio streaming\nand send it back to the laptop through a tcp/ip connection. </p>\n\n<p>The scope of this project is to locate sound sources and it works like this. I run a .c file on each raspberry which are\nconnected on the same LAN as with the PC laptop. When this program is running on both raspberryies i have a message \n\"Waiting connection for a client\". The next thing to do is just to run the matlab file which will start the both raspberries\nand record. I have managed to synchronize the raspberries to start in the same time through a simple condition like</p>\n\n<pre><code>do \n{\n    sleep(0.01);\n    j = read(newsockfd, &amp;start,1 );\n} while (j==0);\n</code></pre>\n\n<p>so right before both raspberries have to start recording i pause them in order to finish the initialization commands and so on\nand then i just send a character \"start = 'k'\" through my matlab program \nt1,t2 are tcp connections</p>\n\n<pre><code>start = 'k';\nfwrite (t1, k);\nfwrite (t2, k); \n</code></pre>\n\n<p>from this point both raspberries open the PortAudio stream and call recordCallBack function. \nWhen I run the application and clap, i still get a delay of 0.2s between them which causes\nan error of 60 meters. I have also checked the execution time of the fwrite function but that might\nsave me about 0.05 seconds which will still lead to results far from reality.\nThis project is based on TDOA measurement and it is desired to have a delay under 0.01 seconds to get accuracy &lt;1m.</p>\n\n<p>I have heard that linux has some very accurate timers, and i was thinking that maybe i could use that to\nclock the time inside the functions in the .c file. Anyway if you have any ideas of how i can measure the delay from \nthe point i send the character 'k' from matlab until the point where the audio stream is opened in microphone, or any \nway how i could synchronize the 2 linux servers please help.</p>\n\n<p>ps: both are raspberry 2 pi and connected through UTP cables so the processing and transmission rates should be the same  </p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1473861236, "post_id": 39492136, "comment_id": 66302032, "body": "No. <code>Header</code> field might be padded, so <code>any_struct + 1</code> will point to the beginning of this padding."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473862471, "post_id": 39492136, "comment_id": 66302918, "body": "It is not clear what you are trying to accomplish. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Let apart padding, etc., dereferencing the returned pointer as anything else than type <code>Header</code> <b>and</b> having a <code>Header</code> at that address invokes undefined behaviour."}, {"owner": {"reputation": 23, "user_id": 5463557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f81ca64b93df4588e941866a414f4a3?s=128&d=identicon&r=PG&f=1", "display_name": "skogshjort", "link": "https://stackoverflow.com/users/5463557/skogshjort"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473877978, "post_id": 39492136, "comment_id": 66312237, "body": "@Olaf Updated the question, thank you for the links!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473878844, "post_id": 39492136, "comment_id": 66312693, "body": "` data: 2` is not standard C! It is a gcc extension which they state themselves being obsolete since ca. 17 years now. Don&#39;t use proprietary extensions if there are identical standard ways."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1473862298, "post_id": 39492330, "comment_id": 66302803, "body": "I think <code>offsetof</code> is not useful here, as the OP wants to get not the known member, but the next one after the known one."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473862315, "post_id": 39492330, "comment_id": 66302815, "body": "Which would require to pass that offset and treat the pointer as <code>char *</code>."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1473863425, "post_id": 39492330, "comment_id": 66303606, "body": "@EugeneSh. To access any following members their type must be known as well (or the address would be useless as it could not be cast into a pointer of the correct type), so <code>offsetof</code> can be applied to a <code>struct</code> consisting of the <code>Header</code> and those following members that will be accessed."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": false, "score": 3, "last_activity_date": 1473861382, "creation_date": 1473861382, "answer_id": 39492330, "question_id": 39492136, "link": "https://stackoverflow.com/questions/39492136/is-it-safe-to-iterate-a-pointer-to-the-next-blob-of-data-in-c/39492330#39492330", "title": "Is it safe to iterate a pointer to the next blob of data in C?", "body": "<p>In the general case you cannot assume that incrementing the address of a <code>struct</code> member gives the address of the next member, as there may be padding between the members (e.g., for memory alignment reasons). You can use <code>offsetof</code> to determine the exact offset of the desired member.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1473861709, "creation_date": 1473861709, "answer_id": 39492451, "question_id": 39492136, "link": "https://stackoverflow.com/questions/39492136/is-it-safe-to-iterate-a-pointer-to-the-next-blob-of-data-in-c/39492451#39492451", "title": "Is it safe to iterate a pointer to the next blob of data in C?", "body": "<blockquote>\n  <p>Is it then true or false to assume that iterating the pointer to any of those structs as a struct Header pointer will result in the address of the next member of that struct?</p>\n</blockquote>\n\n<p>It is not safe to make such an assumption.  C implementations are allowed to put arbitrary amounts of padding between struct members (in a manner that is consistent for any given struct type).  Thus, roughly speaking, your function could produce a pointer to padding, rather than a pointer to the member following the header.</p>\n\n<blockquote>\n  <p>And how do the C data alignment requirements come and play in such scenarios? (Can eventual slop lead to bad pointers when casting for example?)</p>\n</blockquote>\n\n<p>C implementations typically use alignment requirements in determining how much padding, if any, to insert between members, but the standard does not require them to do so, nor in general does it constrain how implementations make that decision.</p>\n"}], "owner": {"reputation": 23, "user_id": 5463557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f81ca64b93df4588e941866a414f4a3?s=128&d=identicon&r=PG&f=1", "display_name": "skogshjort", "link": "https://stackoverflow.com/users/5463557/skogshjort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 39492451, "answer_count": 2, "score": 0, "last_activity_date": 1473879238, "creation_date": 1473860747, "last_edit_date": 1473879238, "question_id": 39492136, "link": "https://stackoverflow.com/questions/39492136/is-it-safe-to-iterate-a-pointer-to-the-next-blob-of-data-in-c", "title": "Is it safe to iterate a pointer to the next blob of data in C?", "body": "<p>Say we have many different structures of data which are all having a struct Header as first member. Suppose the header and the different blobs are of some arbitrary sizes. <strong>Is it then true or false to assume that iterating the pointer to any of those structs <em>as a struct Header pointer</em> will result in the address of the next member of that struct?</strong> And how do the C data alignment requirements come and play in such scenarios? (Can eventual slop lead to bad pointers when casting for example?)</p>\n\n<p>Edit: Updated the example <a href=\"https://stackoverflow.com/questions/39492136/is-it-safe-to-iterate-a-pointer-to-the-next-blob-of-data-in-c?noredirect=1#comment66302918_39492136\">as suggested by Olaf</a> with working code that shows (at least on my system) that the padding makes the pointer offset of the target, and thus also implies that the answer to my main question is \"false\". Thank you for the relevant answers anyway!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct Header {\n    char data_b;\n};\n\nstruct Data {\n    struct Header header;\n    int data;\n};\n\nvoid *Header_skip(void *big_or_small) {\n    return (struct Header *)big_or_small + 1;\n}\n\nint main(int argc, char const *argv[]) {\n    struct Data x = { .data = 2 };\n    int *data = (int *)Header_skip(&amp;x);\n\n    printf(\"Expected: %p\\n\", &amp;x.data);\n    printf(\"Actual:   %p\\n\", data);\n    printf(\"Offset:   %lld\\n\", (long long)data - (long long)&amp;x.data);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2015", "wdk"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3626513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQUuO.png?s=128&g=1", "display_name": "Matias_VS", "link": "https://stackoverflow.com/users/3626513/matias-vs"}, "edited": false, "score": 0, "creation_date": 1473860346, "post_id": 39491893, "comment_id": 66301356, "body": "Nope, I have done this shit before with WDK 8.1, you can compile the drivers with the visual studio and not changing a single property option.  Also that&#39;s not the problem here, the problem here are the include directories."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 1, "user_id": 3626513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQUuO.png?s=128&g=1", "display_name": "Matias_VS", "link": "https://stackoverflow.com/users/3626513/matias-vs"}, "edited": false, "score": 0, "creation_date": 1473860574, "post_id": 39491893, "comment_id": 66301523, "body": "All include dirs are configured for the command line compiler when you run the necessary shortcut."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 1, "user_id": 3626513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQUuO.png?s=128&g=1", "display_name": "Matias_VS", "link": "https://stackoverflow.com/users/3626513/matias-vs"}, "edited": false, "score": 0, "creation_date": 1473861102, "post_id": 39491893, "comment_id": 66301932, "body": "I don&#39;t say that this is impossible. But it is pre-configured for its compiler."}], "tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": -2, "last_activity_date": 1473860045, "creation_date": 1473860045, "answer_id": 39491893, "question_id": 39491827, "link": "https://stackoverflow.com/questions/39491827/visual-studio-2015-wdk-not-working/39491893#39491893", "title": "Visual Studio 2015 WDK Not Working", "body": "<p>WDK has its own compiler. See readme and examples. You can use VS 2015 as source editor and then compile from command prompt.</p>\n"}], "owner": {"reputation": 1, "user_id": 3626513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GQUuO.png?s=128&g=1", "display_name": "Matias_VS", "link": "https://stackoverflow.com/users/3626513/matias-vs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473860045, "creation_date": 1473859883, "question_id": 39491827, "link": "https://stackoverflow.com/questions/39491827/visual-studio-2015-wdk-not-working", "title": "Visual Studio 2015 WDK Not Working", "body": "<p>I installed yesterday the WDK 10 for my visual studio 2015 enterprise.\nToday I tried to make a project, but first of all it couldn't find the include directories, so I manually added it (C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.14393.0\\km)</p>\n\n<p>After this visual studio's intelli sense prompted me that there are too many errors for even to be displayed, around 2200. Something fucked up the headers really bad, how do I fix this?</p>\n"}, {"tags": ["c", "syslog", "errno"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 6, "creation_date": 1473859668, "post_id": 39491743, "comment_id": 66300858, "body": "no text form, -1."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1473859676, "post_id": 39491743, "comment_id": 66300866, "body": "Please show your research/debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1473860038, "post_id": 39491743, "comment_id": 66301130, "body": "Not following site rules. VtC. No screenshots of text!"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1473861094, "post_id": 39491743, "comment_id": 66301924, "body": "Do not post your code as image. Please post your code as text directly in your question. Also please don&#39;t forget to post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1473861141, "post_id": 39491743, "comment_id": 66301962, "body": "Smell like you have multiple definition of Logger in your code. Post the Logger function and the whole main.c file, at least."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1473863259, "post_id": 39491743, "comment_id": 66303470, "body": "How does <code>Logger</code> function is declared in <code>logger.h</code>?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473864347, "post_id": 39491743, "comment_id": 66304280, "body": "Change the name in logger.h and logger.c of Logger function and see what happend. I mean: rename it to <code>new_Logger</code>."}, {"owner": {"reputation": 87, "user_id": 3956860, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c5f5a60a0491708f81765099e5a0982c?s=128&d=identicon&r=PG&f=1", "display_name": "Windeal", "link": "https://stackoverflow.com/users/3956860/windeal"}, "edited": false, "score": 0, "creation_date": 1473864688, "post_id": 39491743, "comment_id": 66304503, "body": "I change it to my_log, but still not works.     <code>1 main.c|66 col 22 warning| passing argument 2 of \u2018my_log\u2019 makes pointer from integer without a cast [-Wint-conversion]                2 logger.h|22 col 6 error| note: expected \u2018int * (*)()\u2019 but argument is of type \u2018int\u2019 </code>"}, {"owner": {"reputation": 87, "user_id": 3956860, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c5f5a60a0491708f81765099e5a0982c?s=128&d=identicon&r=PG&f=1", "display_name": "Windeal", "link": "https://stackoverflow.com/users/3956860/windeal"}, "edited": false, "score": 0, "creation_date": 1473866336, "post_id": 39491743, "comment_id": 66305695, "body": "#ifndef _LOGGER_H                                                                                                                           #define _LOGGER_H       #ifndef _LOGGER_H     #define _LOGGER_H      #include &lt;stdio.h&gt;      #define DEBUG_ENABLE      #ifdef DEBUG_ENABLE     ......     #else     #define DPRINT(fmt, ...)       #endif      extern char logfile_path[64];     FILE <i>logfile;      void init_logger(char</i> logfile_path, FILE* file);     void end_logger(FILE* file);     void Logger(int priority, int errno, char* fmt, ...);       #endif"}, {"owner": {"reputation": 87, "user_id": 3956860, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c5f5a60a0491708f81765099e5a0982c?s=128&d=identicon&r=PG&f=1", "display_name": "Windeal", "link": "https://stackoverflow.com/users/3956860/windeal"}, "edited": false, "score": 0, "creation_date": 1473868177, "post_id": 39491743, "comment_id": 66306900, "body": "Hi all,       I think I know the answer now.     Thank you very much."}, {"owner": {"reputation": 87, "user_id": 3956860, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c5f5a60a0491708f81765099e5a0982c?s=128&d=identicon&r=PG&f=1", "display_name": "Windeal", "link": "https://stackoverflow.com/users/3956860/windeal"}, "edited": false, "score": 0, "creation_date": 1473868368, "post_id": 39491743, "comment_id": 66306996, "body": "I seldom ask questions here, I am a Chinese and  my English is poor. Sorry to trouble you about not following site rules."}], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 3956860, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c5f5a60a0491708f81765099e5a0982c?s=128&d=identicon&r=PG&f=1", "display_name": "Windeal", "link": "https://stackoverflow.com/users/3956860/windeal"}, "is_accepted": false, "score": 2, "last_activity_date": 1473868122, "creation_date": 1473868122, "answer_id": 39494746, "question_id": 39491743, "link": "https://stackoverflow.com/questions/39491743/note-expected-int-but-argument-is-of-type-int/39494746#39494746", "title": "note: expected \u2018int * (*)()\u2019 but argument is of type \u2018int\u2019", "body": "<p>Now, I know the answer.\nThe error should be in the declaration of Logger.</p>\n\n<pre><code>void Logger(int priority, int errno, char* fmt, ...);\n</code></pre>\n\n<p>The string 'errno' seems can not be a formal parameter.\nI repace it with 'Errno', then it works fine.</p>\n\n<p>I presume that the string 'errno' may be a macro defined in errno.h.\ntype 'man errno' may get more information.</p>\n"}], "owner": {"reputation": 87, "user_id": 3956860, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c5f5a60a0491708f81765099e5a0982c?s=128&d=identicon&r=PG&f=1", "display_name": "Windeal", "link": "https://stackoverflow.com/users/3956860/windeal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1756, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1489099520, "creation_date": 1473859643, "last_edit_date": 1489099520, "question_id": 39491743, "link": "https://stackoverflow.com/questions/39491743/note-expected-int-but-argument-is-of-type-int", "title": "note: expected \u2018int * (*)()\u2019 but argument is of type \u2018int\u2019", "body": "<p>Is it too long for me that not writing any code.\nI have try to write a simple demo in C, but meet below,</p>\n\n<pre><code> 1 main.c|87 col 21 warning| passing argument 2 of \u2018Logger\u2019 makes pointer from integer without a cast [-Wint-conversion]              \n2 logger.h|24 col 6 error| note: expected \u2018int * (*)()\u2019 but argument is of type \u2018int\u2019\n</code></pre>\n\n<p>I define a function </p>\n\n<pre><code>void Logger(int priority, int errno, const char* fmt, ...);\n</code></pre>\n\n<p>The 2nd arg of Logger is in type int.\nHowever, when I want to use it in my main process, </p>\n\n<pre><code>Logger(LOG_ERR, errno, \"ERROR: select failed\");\n</code></pre>\n\n<p>It inform me that the expected type of 2nd arg is \u2018int * (*)()\u2019 .\nIn my call of the function, the 2nd actual param, errno, is from errno.h</p>\n\n<p>The code as below \n 1. logger.c</p>\n\n<pre><code>// logger.c\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;syslog.h&gt;\n#include &lt;error.h&gt;\n\n    #include \"logger.h\"\n\n    char LogLastMsg[128]; // all info of the last log, all the info to log last time\n\n    int Log2Stderr = LOG_INFO; //control Loging to stderr\n\n\n    void init_logger(char* logfile_path, FILE* logfile)\n    {\n        logfile = fopen(logfile_path, \"w+\");\n        if ( NULL == logfile )\n        {\n            fprintf(stderr, \"Failed to init logger\");\n            exit(-1);\n        }\n    }\n\n    void end_logger(FILE *logfile)\n    {\n        fclose(logfile);\n    }\n\n    /**\n     * @Synopsis  a log func demo \n     *      demo for how  user defined module log info\n     *\n     * @Param priority: level of log, LOG_ERR, LOG_DEBUG etc.\n     * @Param errno:    errno\n     * @Param fmt:  format of message to log\n     * @Param ...:  args follow by fmt\n     */\n    void Logger(int priority, int errno, char* fmt, ...)\n    {\n        char priVc[][8] = {\"Emerg\", \"Alert\", \"Crit\", \"Error\", \"Warning\", \"Notice\", \"Info\", \"Debug\"};\n\n        char* priPt = priority &lt; 0 || priority &gt;= sizeof(priVc)/sizeof(priVc[0]) ?\n            \"Unknow priority!\" : priVc[priority];\n\n        char *errMsg = errno &lt;= 0 ? NULL : strerror(errno);\n\n        {\n            va_list argPt;\n            unsigned Ln;\n\n            va_start(argPt, fmt);  //now argPt is point to mylog's param:...\n            Ln = snprintf(LogLastMsg, sizeof(LogLastMsg), \"[mylog...][%s]: \", priPt);\n            Ln += vsnprintf(LogLastMsg + Ln, sizeof(LogLastMsg) - Ln, fmt, argPt);\n            if (NULL != errMsg)\n            {\n                Ln += snprintf(LogLastMsg + Ln, sizeof(LogLastMsg) - Ln, \"%d:%s\", errno, errMsg);\n            }\n            va_end(argPt);\n        }\n        //choose the log which should be show on stderr\n        if (priority &lt; LOG_ERR || priority &lt;= Log2Stderr)\n        {\n            fprintf(stderr, \"%s\", LogLastMsg);\n        }\n\n        //always to syslog\n        syslog(priority, \"%s\", LogLastMsg);\n\n        if (priority &lt;= LOG_ERR)\n        {\n            exit(-1);\n        }\n        return ;\n    }\n\n\n\n\n/**\n * @file main.c\n * @synopsis  \n * @author Windeal, lipeilun4it@outlook.com\n * @version 0.1\n * @date 2016-09-12\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;getopt.h&gt;\n#include &lt;syslog.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#include \"http_proxy.h\"\n#include \"logger.h\"\n#include \"socketapi.h\"\n\n#define LOG_FILE \"http_proxy.log\"\n\ntypedef struct Server{\n    struct sockaddr_in addr;\n    short port; \n} Server;\n\ntypedef struct Client{\n    struct sockaddr_in addr;\n    int len;\n} Client;\n\n\nstatic int max_int(int a, int b)\n{\n    int ret;\n    ret = a;\n    if ( ret &lt; 0 )\n    {\n        ret = b;\n    }\n    return ret;\n}\n\nstatic int  get_global_option(int argc, char **argv);\nstatic int init_httpd_socket(int *sockfd);\n\n\nint main(int argc, char **argv)\n{\n    FILE *logfile;\n    int sockfd, clientfd; \n    Server server;\n    Client client;\n    fd_set rfds;\n    int max_fd;\n    struct timeval tv;\n    int retval = -1;\n\n    init_logger(LOG_FILE, logfile);\n    Logger(LOG_INFO, 0, \"httpd start...\\n\");\n\n    init_httpd_socket(&amp;sockfd);\n\n    while (1)\n    {\n        client.len = sizeof (struct sockaddr);\n        clientfd = Accept(sockfd, (struct sockaddr *)&amp;client.addr, &amp;client.len);\n        Logger(LOG_INFO, 0, \"A new connection accept!\");\n\n        while (1)\n        {\n            FD_ZERO(&amp;rfds);\n            FD_SET(clientfd, &amp;rfds);\n            max_fd = max_int(0, clientfd);\n\n            tv.tv_sec = 1;\n            tv.tv_usec = 0;\n            retval = select(max_fd+1, &amp;rfds, NULL, NULL, &amp;tv);\n            if ( retval == -1 )\n            {\n                Logger(LOG_ERR, 3, \"ERROR: select failed\");\n                break;\n            }\n            else if ( retval == 0 )\n            {\n            //  printf(\"continue waiting!\\n\");\n                continue;\n            }\n        }\n    }\n\n}\n\n/**\n * @synopsis  init_httpd_socket, create a new socket for server \n * @param sockfd\n * @returns  a new socket for server \n */\nstatic int init_httpd_socket(int *sockfd)\n{\n    struct sockaddr_in serv_addr;\n    short port;\n\n    Logger(LOG_INFO, 0, \"init_http_socket...\");\n\n    port = htons(SERV_PORT); \n\n    *sockfd = Socket(AF_INET, SOCK_STREAM, 0);\n    memset(&amp;serv_addr, 0, sizeof (serv_addr));\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_port   = port;\n    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    Bind(*sockfd, (struct sockaddr*)&amp;serv_addr, sizeof (serv_addr));\n    Listen(*sockfd, 6);\n    return *sockfd;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "initialization", "compound-assignment"], "comments": [{"owner": {"reputation": 3117, "user_id": 1585868, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5a0379b0735326a4d3dd0a18515e32af?s=128&d=identicon&r=PG", "display_name": "leigero", "link": "https://stackoverflow.com/users/1585868/leigero"}, "edited": false, "score": 0, "creation_date": 1473859111, "post_id": 39491498, "comment_id": 66300468, "body": "What are the &quot;wrong values&quot; you are getting and what are you expecting?"}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 5, "creation_date": 1473859114, "post_id": 39491498, "comment_id": 66300469, "body": "Hint: 1. What are the initial values of <code>total</code>? 2. Can question 1 be answered?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1473861980, "last_edit_date": 1473861980, "creation_date": 1473859122, "answer_id": 39491537, "question_id": 39491498, "link": "https://stackoverflow.com/questions/39491498/array-elements-after-using-compound-assignment-operator-yields-garbage-value/39491537#39491537", "title": "Array elements (after using compound assignment operator) yields garbage value, why?", "body": "<p>The first problem here is in the code</p>\n\n<pre><code>        total[0]+=a[j];\n        total[1]+=b[j];\n        total[2]+=c[j];\n</code></pre>\n\n<p>where you're using <code>total[n]</code>s un-initialized. They contain indeterminate values and using them invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>To elaborate, <code>total</code> being an uninitialized automatic local variable, the initial values of the elements of the array are indeterminate. By using the <code>+=</code> operator on those elements, you're trying to <em>read</em> (use) the values which are indeterminate, so it invokes UB in your case.</p>\n\n<p>Related quote from <code>C11</code>, chapter \u00a76.5.16.2, <em>Compound assignment</em>,</p>\n\n<blockquote>\n  <p>A compound assignment of the form <code>E1 op= E2</code> is equivalent to the simple assignment\n  expression <code>E1 = E1 op (E2)</code>, except that the lvalue <code>E1</code> is evaluated only once, and with\n  respect to an indeterminately-sequenced function call, the operation of a compound assignment is a single evaluation. If <code>E1</code> has an atomic type, compound assignment is a\n  <code>read-modify-write</code> operation with <code>memory_order_seq_cst</code> memory order\n  semantics.</p>\n</blockquote>\n\n<p>So, by using the <code>+=</code> on an uniniitilized value, _you're trying to read (<em>or use</em>) a variable with indeterminate value, which causes the UB.</p>\n\n<p>If you want, you can initialize the whole array by using a syntax like </p>\n\n<pre><code>  int total[3] = {0};\n</code></pre>\n\n<p>which initializes <em>all</em> elements of the array to 0, which is what basically you were expecting.</p>\n\n<p>That said, <code>void main(void)</code> is not a conforming signature for <code>main()</code> in a hosted environment, as per the spec, it should be <code>int main(void)</code>, at least.</p>\n"}], "owner": {"reputation": 25, "user_id": 6583190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O6V7y.jpg?s=128&g=1", "display_name": "\uc774\ub3d9\uc900", "link": "https://stackoverflow.com/users/6583190/%ec%9d%b4%eb%8f%99%ec%a4%80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 39491537, "answer_count": 1, "score": -1, "last_activity_date": 1473861980, "creation_date": 1473859021, "last_edit_date": 1473860268, "question_id": 39491498, "link": "https://stackoverflow.com/questions/39491498/array-elements-after-using-compound-assignment-operator-yields-garbage-value", "title": "Array elements (after using compound assignment operator) yields garbage value, why?", "body": "<pre><code>#include&lt;stdio.h&gt;\nvoid main(void)\n{\n    int a[5]={90,78,77,98,98}, b[5]={80,45,67,88,57}, c[5]={88,99,65,55,74},total[3],i,j;\n    for(j=0;j&lt;=4;j++)\n        {\n            total[0]+=a[j];\n            total[1]+=b[j];\n            total[2]+=c[j];\n        }\n\n    for(i=1;i&lt;=3;i++)\n    {\n    printf(\"%d\ud589\uc758 \uac00\ub85c \ud569 : %d\\n\",i,total[i-1]);\n    }\n}\n</code></pre>\n\n<p><code>total[0]</code> and <code>total[1]</code> are right value, but <code>total[2]</code> is wrong value. I cannot find my fault. Can you explain it?</p>\n"}, {"tags": ["c", "buffer", "overflow"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473857955, "post_id": 39491000, "comment_id": 66299672, "body": "And what do you do to change the <code>auth</code> variable? Also, you do know that in C anything non-zero is considered &quot;true&quot;, and since the character <code>&#39;1&#39;</code> with ASCII encoding is equal to the integer <code>49</code> I don&#39;t really see any problem (since you don&#39;t actually check explicitly for <code>auth == 1</code>, what you have know is equivalent to <code>auth != 0</code>)."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1473858081, "post_id": 39491000, "comment_id": 66299759, "body": "with my gcc compiler I tried <code>printf(&quot;%x %x\\n&quot;,&amp;buffer,&amp;auth);</code> gave me <code>28feb0 28feac</code>: bummer :) damn padding optimization? order of variables in the stack is not guaranteed to be the same as declaration."}, {"owner": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "edited": false, "score": 0, "creation_date": 1473858106, "post_id": 39491000, "comment_id": 66299772, "body": "the buffer and auth are 28 bytes apart so my input was AAAAAAAAAAAAAAAAAAAAAAAAAAAA49, but &quot;GRANTED&quot; was not printed"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473858141, "post_id": 39491000, "comment_id": 66299799, "body": "@pedrosantos: me neither, see why in my comment."}, {"owner": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "edited": false, "score": 0, "creation_date": 1473858285, "post_id": 39491000, "comment_id": 66299906, "body": "the thing is the auth variable was indeed changed to &quot;49&quot; as I wanted with my input, i checked with the debugger, but the if(auth) returned false anyway so granted was not printed"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473858335, "post_id": 39491000, "comment_id": 66299935, "body": "You have undefined bahaviour here. Debug the assembly code."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473858585, "post_id": 39491000, "comment_id": 66300104, "body": "the idea is to trigger undefined behaviour by analyzing assembly &amp; addresses, and if that is possible, inject whatever binary data. With my gcc 4.9 compiler I was not able to do it with that particular piece of code. The hacker must be lucky."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473859683, "post_id": 39491000, "comment_id": 66300869, "body": "@Jean-Fran&#231;oisFabre Don&#39;t print pointers using <code>&quot;%x&quot;</code>, do it using <code>&quot;%p&quot;</code>. Also, the pointers must be casted to <code>void *</code>. Not using <code>&quot;%p&quot;</code> to print (<code>void *</code>) pointers is <i>undefined behavior</i>."}, {"owner": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "edited": false, "score": 0, "creation_date": 1473860091, "post_id": 39491000, "comment_id": 66301176, "body": "I know what the problem is, I change the auth variable using the overflow but as execution continues the strcmp(buffer, &quot;password&quot;) part changes the auth again to either 1 or 0 that is why it is not working I think"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "edited": false, "score": 0, "creation_date": 1473858593, "post_id": 39491297, "comment_id": 66300110, "body": "im running debian"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1473860476, "last_edit_date": 1473860476, "creation_date": 1473858535, "answer_id": 39491297, "question_id": 39491000, "link": "https://stackoverflow.com/questions/39491000/buffer-overflow-explanation/39491297#39491297", "title": "Buffer Overflow explanation", "body": "<p>On windows (resp. Linux), create a bat (resp shell) file like this:</p>\n\n<pre><code>a 0123456789ABCDEFG\n</code></pre>\n\n<p>(a being the name of your executable)</p>\n\n<p><a href=\"https://i.stack.imgur.com/vVE4c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vVE4c.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then, edit it with an hex editor and change the last <code>G</code> to 01 hex value, save.</p>\n\n<p>If (I say if) you can make sure that the address of your integer value comes after the char buffer (which I could not do using my gcc, since the compiler locates its variable with an implementation-based order), run this script and you will see that the \\001 char is passed at the end of first argument.</p>\n\n<p>Note: there's no way at all to pass a 0 (null) character as arguments are null-terminated, so if you want to inject some data or code, you will have to do without the zero character.</p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473860510, "post_id": 39491996, "comment_id": 66301476, "body": "I almost forgot that there&#39;s no way at all to inject a 0 (null) character as arguments are null-terminated, so if you want to inject some data or code, you will have to do without the zero character. Good and thourough explanation."}, {"owner": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "edited": false, "score": 0, "creation_date": 1473860892, "post_id": 39491996, "comment_id": 66301773, "body": "thank you for the explanation, but in my program the auth variable os allocated after the buffer so i can overflow it. I t is the issue with the non printable character"}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": true, "score": 4, "last_activity_date": 1473860343, "creation_date": 1473860343, "answer_id": 39491996, "question_id": 39491000, "link": "https://stackoverflow.com/questions/39491000/buffer-overflow-explanation/39491996#39491996", "title": "Buffer Overflow explanation", "body": "<p>Following information is derived from runs on my Ubuntu-14.04 system using gcc version 4.8.4 as my compiler and gdb version 7.7.1 as my debugger</p>\n\n<p>First, the buffer overflow happens as a result of the strcpy function, and if you overflow <code>buf</code> so that it overwrites the memory location of <code>auth</code>, but the following if-else block will overwrite your changes.</p>\n\n<p>Secondly you can see what is happening by looking at the stack in a debugger.  I made a slight modification to you code, by initializing <code>auth</code> to <code>0xbbbbbbbb</code> (just so I can find here auth is located on the stack).</p>\n\n<p>Setting a break point on main and stepping into the function we can examine the values of the various registers:</p>\n\n<pre><code>   (gdb) info reg\n   rax            0x0   0\n   rbx            0x0   0\n   rcx            0x0   0\n   rdx            0x7fffffffdf30    140737488346928\n   rsi            0x7fffffffdf18    140737488346904\n   rdi            0x2   2\n   rbp            0x7fffffffde30    0x7fffffffde30\n   rsp            0x7fffffffddf0    0x7fffffffddf0\n         [... some lines removed ...]\n   rip            0x400652  0x400652 &lt;main+37&gt;\n   eflags         0x246 [ PF ZF IF ]\n   cs             0x33  51\n   ss             0x2b  43\n   ds             0x0   0\n   es             0x0   0\n   fs             0x0   0\n   gs             0x0   0\n</code></pre>\n\n<p>From this we can see that the stack extends from <code>0x7fffffffddf0</code> to <code>0x7fffffffde30</code>.  Now stopping right before the call to strcpy, we can take a look at the stack:</p>\n\n<pre><code>(gdb) x/76xb $rsp\n0x7fffffffddf0: 0x18    0xdf    0xff    0xff    0xff    0x7f    0x00    0x00\n0x7fffffffddf8: 0x1d    0x07    0x40    0x00    0x02    0x00    0x00    0x00\n0x7fffffffde00: 0x30    0xde    0xff    0xff    0xff    0x7f    0x00    0x00\n0x7fffffffde08: 0x00    0x00    0x00    0x00    0xbb    0xbb    0xbb    0xbb\n0x7fffffffde10: 0xd0    0x06    0x40    0x00    0x00    0x00    0x00    0x00\n0x7fffffffde18: 0x40    0x05    0x40    0x00    0x00    0x00    0x00    0x00\n0x7fffffffde20: 0x10    0xdf    0xff    0xff    0xff    0x7f    0x00    0x00\n0x7fffffffde28: 0x00    0x2b    0x25    0x07    0xdd    0x7a    0xc0    0x6d\n0x7fffffffde30: 0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00\n0x7fffffffde38: 0x45    0x6f    0xa3    0xf7\n</code></pre>\n\n<p>Looking at this, we can see that <code>auth</code> is located at a memory address of <code>0x7fffffffde0c</code>.  </p>\n\n<p>I set as a command line argument <code>passwordAAAAAAAA111</code>, and now we can single step across the strcpy call and look at memory again:</p>\n\n<pre><code>(gdb) x/76xb $rsp\n0x7fffffffddf0: 0x18    0xdf    0xff    0xff    0xff    0x7f    0x00    0x00\n0x7fffffffddf8: 0x1d    0x07    0x40    0x00    0x02    0x00    0x00    0x00\n0x7fffffffde00: 0x30    0xde    0xff    0xff    0xff    0x7f    0x00    0x00\n0x7fffffffde08: 0x00    0x00    0x00    0x00    0xbb    0xbb    0xbb    0xbb\n0x7fffffffde10: 0x70    0x61    0x73    0x73    0x77    0x6f    0x72    0x64\n0x7fffffffde18: 0x41    0x41    0x41    0x41    0x41    0x41    0x41    0x41\n0x7fffffffde20: 0x31    0x31    0x31    0x31    0x00    0x7f    0x00    0x00\n0x7fffffffde28: 0x00    0x2b    0x25    0x07    0xdd    0x7a    0xc0    0x6d\n0x7fffffffde30: 0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00\n0x7fffffffde38: 0x45    0x6f    0xa3    0xf7\n</code></pre>\n\n<p>(gdb) </p>\n\n<p>From this, we can see that the value of <code>auth</code> has not be touched (notice the four 0xbb still in memory starting at 0x7fffffffde0c).  Also we can now see where the password is stored in memory, it starts at <code>0x7fffffffde10</code>.  The four 'A's that I used are where the four 0x41s are and the four '1's that I used are where the four 0x31s are</p>\n\n<p>So, on my system I do not see a way that you would be able to overflow into the <code>auth</code> variable.</p>\n\n<p>Finally, the question that you originally raised, remember that the command line arguments are treated as a character array, so passing in something line <code>AAAA1</code> on the command line will result in the array [0x41 0x41 0x41 0x41 0x31] being passed to your program.  What you want your program to receive is actually [0x41 0x41 0x41 0x41 0x01 0x00 0x00 0x00] (assuming 32-bit, little endian architecture).  There are two issues that you will face,\n1. 0x01 is a non-printable character\n2. 0x00 being the null terminator will stop the string input at the first null.</p>\n\n<p>There is not alot you can do about the issue 2, with just a simple input; however as others have suggested the solution around issue 1 is to create a driver program that builds the input buffer the way that you want and then passes that to the program.</p>\n"}], "owner": {"reputation": 197, "user_id": 6768342, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dcbfa524545026426b4b99b181da5b76?s=128&d=identicon&r=PG&f=1", "display_name": "pedro santos", "link": "https://stackoverflow.com/users/6768342/pedro-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 39491996, "answer_count": 2, "score": 3, "last_activity_date": 1473860476, "creation_date": 1473857707, "question_id": 39491000, "link": "https://stackoverflow.com/questions/39491000/buffer-overflow-explanation", "title": "Buffer Overflow explanation", "body": "<p>I made this simple password verification program, and I'm trying to overflow the buffer array to change the auth variable to 1 and i managed to do it except I can only change the auth variable to the character 1 and not the decimal 1, how can i do it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]){\n\nchar buffer[16];\nint auth=0;\nstrcpy(buffer, argv[1]);\n\nif(strcmp(buffer,\"password\")==0)\n    auth=1;\nelse\n    auth=0;\n\nif(auth)\n    printf(\"Granted\");\n\n\n\n return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "sorting", "encryption"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1473857499, "post_id": 39490906, "comment_id": 66299330, "body": "<a href=\"http://www.cplusplus.com/reference/cstdlib/qsort/\" rel=\"nofollow noreferrer\"><code>qsort</code></a> may help."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 5, "creation_date": 1473857572, "post_id": 39490906, "comment_id": 66299376, "body": "You need to store structs, with char code and count fields. Then sort those. If you have not gone through structs yet, you could have two arrays, one for char codes and other for counts, and then when sorting you sort by the count array but do the swap on both arrays, so they stay in sync."}, {"owner": {"reputation": 55, "user_id": 4429178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tLi0c.jpg?s=128&g=1", "display_name": "YouHaveGotToBeKiddingMe", "link": "https://stackoverflow.com/users/4429178/youhavegottobekiddingme"}, "edited": false, "score": 0, "creation_date": 1473858007, "post_id": 39490906, "comment_id": 66299709, "body": "I&#39;ll take a look at that, sounds much cleaner. Out of curiosity, any clue on the downvotes? I always hesitate to post anything here (even when I&#39;ve been stuck for awhile) because I can&#39;t figure out why people seem to disapprove of asking for help   Edit: grammar"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1473858093, "post_id": 39490906, "comment_id": 66299766, "body": "...wrote my comment as an answer, since I figured this is, after all, quite reasonable question, even if it is very basic. Still, it explains what you are doing and why and what your problem is. But the downvotes are probably because this is so basic a question, and many folks here are somewhat allergic to &quot;homework&quot; questions, with itchy downvote fingers."}, {"owner": {"reputation": 55, "user_id": 4429178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tLi0c.jpg?s=128&g=1", "display_name": "YouHaveGotToBeKiddingMe", "link": "https://stackoverflow.com/users/4429178/youhavegottobekiddingme"}, "edited": false, "score": 0, "creation_date": 1473858583, "post_id": 39490906, "comment_id": 66300103, "body": "Thanks, I appreciate the insight. I guess I should keep quiet until I (hopefully) make it into the workforce then. No sense in fostering negative rep in the mean time. As far as structs, this is my first time using C (Java and C++ previously so I guess I should&#39;ve known better anyway). Took a look at them just now and holy cow they&#39;re simple!"}], "answers": [{"tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 1, "last_activity_date": 1473857956, "creation_date": 1473857956, "answer_id": 39491097, "question_id": 39490906, "link": "https://stackoverflow.com/questions/39490906/array-filled-with-how-frequently-letters-appeared-in-text-file-how-to-sort-des/39491097#39491097", "title": "Array filled with how frequently letters appeared in text file. How to sort (descending) in C and still know which letter went with which number?", "body": "<p>You need to store structs, with char code and count fields. Then sort those. Note that in C you can use structs like any variables, pass them around and assign them. You don't have to use pointers or something like that, unlike when you are dealing with arrays.</p>\n\n<p>If you for some reason don't want to use structs (like, if you have not learned them yet...), you could have two arrays, one for char codes and other for counts, with same size. Then you do sorting by the count array, but do swap in both arrays, so they stay in sync.</p>\n"}], "owner": {"reputation": 55, "user_id": 4429178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tLi0c.jpg?s=128&g=1", "display_name": "YouHaveGotToBeKiddingMe", "link": "https://stackoverflow.com/users/4429178/youhavegottobekiddingme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 39491097, "answer_count": 1, "score": -2, "last_activity_date": 1473857956, "creation_date": 1473857412, "question_id": 39490906, "link": "https://stackoverflow.com/questions/39490906/array-filled-with-how-frequently-letters-appeared-in-text-file-how-to-sort-des", "title": "Array filled with how frequently letters appeared in text file. How to sort (descending) in C and still know which letter went with which number?", "body": "<p>Totally a homework assignment and I've been stuck here for a couple days. Simple substitution cipher, encryption program works fine and I think I've got most of decryption figured out except this one part.</p>\n\n<p>It creates an array of 26 int's (one for each letter) and loops through the text, increasing the appropriate index each time it encounters the associated letter. Right now the index is how I know what slot is what letter (a is [0], b is [1], c[2], etc).</p>\n\n<p>How do I sort this array by size (so that I can tease apart frequencies) while still knowing what letter the number is associated with? (ie, 'a' appears 600 times, 'b' appears 30 times, 'c' appears 82 times, etc) </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 5, "creation_date": 1473856928, "post_id": 39490684, "comment_id": 66298955, "body": "<i>&quot;In C, array elements are treated as pointers. So the expression sizeof(arr)/sizeof(arr[0]) becomes sizeof(int *)/sizeof(int)&quot;</i> where did you learn these falsehoods?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6359267"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1473857080, "post_id": 39490684, "comment_id": 66299049, "body": "@Kninnug please see : <a href=\"http://www.geeksforgeeks.org/why-c-treats-array-parameters-as-pointers/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/why-c-treats-array-parameters-as-pointers</a>"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 3, "creation_date": 1473857156, "post_id": 39490684, "comment_id": 66299104, "body": "@Anjan: <code>sizeof</code> is operator, not a function."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 2, "creation_date": 1473857158, "post_id": 39490684, "comment_id": 66299105, "body": "@Anjan, that page talks about array <b>parameters</b>, which your code doesn&#39;t have."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6359267"}, "reply_to_user": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1473857347, "post_id": 39490684, "comment_id": 66299235, "body": "@GrzegorzSzpetkowski, Kninnug Thank you very much."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1473857595, "post_id": 39490684, "comment_id": 66299394, "body": "<code>arr1</code> has null-terminator(<code>\\0</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": true, "score": 2, "last_activity_date": 1473857160, "last_edit_date": 1473857160, "creation_date": 1473857000, "answer_id": 39490757, "question_id": 39490684, "link": "https://stackoverflow.com/questions/39490684/sizeof-array-elements-in-c/39490757#39490757", "title": "sizeof array elements in C", "body": "<blockquote>\n  <p>array elements are treated as pointers</p>\n</blockquote>\n\n<p>It is not a true. Arrays are <strong>NOT</strong> pointers. But they decay to pointers to first element when are passed to functions. And <code>sizeof(array)</code> is the number of bytes that whole array occupies.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1473857925, "creation_date": 1473857925, "answer_id": 39491081, "question_id": 39490684, "link": "https://stackoverflow.com/questions/39490684/sizeof-array-elements-in-c/39491081#39491081", "title": "sizeof array elements in C", "body": "<blockquote>\n  <p>In C, array elements are treated as pointers. </p>\n</blockquote>\n\n<p>False . Array decays to pointer when passed to function . But you dont have any function to which array is being passed as parameter (<em>totally unrelated stuff</em>).</p>\n\n<p><code>sizeof</code> operator is one of exceptions. <code>sizeof</code> will give you the size array occupies in the memory. </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473862783, "post_id": 39492017, "comment_id": 66303125, "body": "With <code>int n; scanf(&quot;%d&quot;, &amp;n); int a[n]; printf(&quot;%zu\\n&quot;, sizeof a);</code>, the size of <code>a</code> is not computed at compile time but at run time.  The result is not necessarily 1."}, {"owner": {"reputation": 11, "user_id": 4833281, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7kpaVaZvO1Q/AAAAAAAAAAI/AAAAAAAAAP8/Ey-kdwLTT5s/photo.jpg?sz=128", "display_name": "Bruno Meneguele", "link": "https://stackoverflow.com/users/4833281/bruno-meneguele"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473864470, "post_id": 39492017, "comment_id": 66304370, "body": "@chux what I meant by dinamically allocated was using <code>malloc()</code>, and than dividing the result by <code>sizeof(&lt;element_type&gt;)</code>, as @Anjan pointed on his question, but indeed the result will be 1 just if <code>element_type</code> is <code>int</code>, sorry, I&#39;ll fix it. And in your code you need to be careful: if you swap <code>scanf()</code> call with the <code>a[n]</code> declaration the <code>sizeof()</code> will compile but will result in wrong values (0 for example). When I need something like that I prefer to use <code>malloc()</code>. I prefer the recommendations from C89 about declaring every variable at the beginning, before any function calls."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473864986, "post_id": 39492017, "comment_id": 66304726, "body": "<code>int a[n]</code> is dynamically allocated array and is a counter example to this answer.  The array is declared, yet the compiler does not know it size.  The result of <code>sizeof a</code> is determined at run-time - not compile time.  The result is the size of the array, not the size of a pointer."}, {"owner": {"reputation": 11, "user_id": 4833281, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7kpaVaZvO1Q/AAAAAAAAAAI/AAAAAAAAAP8/Ey-kdwLTT5s/photo.jpg?sz=128", "display_name": "Bruno Meneguele", "link": "https://stackoverflow.com/users/4833281/bruno-meneguele"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473873078, "post_id": 39492017, "comment_id": 66309682, "body": "@chux I think you are using the &quot;dynamic allocation&quot; concept as &quot;run-time&quot;, aren&#39;t you? As far as I know they are different things. <code>int a[n]</code> is an &quot;automatic&quot; array and not &quot;dynamic&quot;, for instance, when you use <code>int a[n]</code> the stack will holds its value and not the heap and <code>a</code> can&#39;t be reallocated anymore. There are other differences yet, take a look at: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">GCC</a> and <a href=\"http://www.chemie.fu-berlin.de/chemnet/use/info/libc/libc_3.html#SEC18\" rel=\"nofollow noreferrer\">here</a>. So yor example isn&#39;t a counter example of my explanation about &quot;dynamic allocated arrays&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473873859, "post_id": 39492017, "comment_id": 66310104, "body": "&quot;when you use <code>int a[n]</code> the stack will holds its value and not the heap&quot; --&gt; maybe, maybe not.  C does not specify that nor stack nor heap - those are unspecified implementation details.  C does not specify  &quot;<i>dynamically</i> allocated&quot;.  This differs from your GCC reference.  If we  limit ourselves to GCC world, your answer is better defined.  My comments reflect C in general."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473876654, "post_id": 39492017, "comment_id": 66311542, "body": "Disagree about &quot;should suppose ... standard implementation of almost C compilers nowadays&quot;.  I regularly use non-gcc compilers in my work as do many other colleagues. Some using Harvard architecture that do not follow your &quot;stack&quot; &quot;heap&quot;.  Research the embedded world where C is very popular and run C code even without an OS.  Perhaps your experience is wider than mine?"}], "tags": [], "owner": {"reputation": 11, "user_id": 4833281, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7kpaVaZvO1Q/AAAAAAAAAAI/AAAAAAAAAP8/Ey-kdwLTT5s/photo.jpg?sz=128", "display_name": "Bruno Meneguele", "link": "https://stackoverflow.com/users/4833281/bruno-meneguele"}, "is_accepted": false, "score": 0, "last_activity_date": 1473865247, "last_edit_date": 1495535358, "creation_date": 1473860395, "answer_id": 39492017, "question_id": 39490684, "link": "https://stackoverflow.com/questions/39490684/sizeof-array-elements-in-c/39492017#39492017", "title": "sizeof array elements in C", "body": "<p>To make the <a href=\"https://stackoverflow.com/a/39490757/4833281\">Serhio's answer</a> clearer it's important to note <code>sizeof()</code> is an operator and not a function as said before by Grzegorz on his comment. It means its evaluantion is made in compile-time, but what does it means?</p>\n\n<p>Once <code>arr1</code> or <code>arr2</code> are declared in that way the compiler knows its size before execution starts and than <code>sizeof(arr1)</code> will be converted to <code>sizeof(char[12])</code> (it includes <code>\\0</code> char at the end) and <code>sizeof(arr2)</code> to <code>sizeof(char[11])</code>, which results in 12 and 11.</p>\n\n<p>As it's made in compile-time the compiler knows they must be handled as arrays and not pointers by the <code>sizeof()</code> operator, what is completely different to <strong>dynamically allocated arrays</strong>, which are allocated in execution-time and <code>sizeof()</code> will operates over a normal char pointer size (architecture dependent: it may be 4 bytes on 32bits systems or 8 bytes on 64bits).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6359267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 39490757, "answer_count": 3, "score": 0, "last_activity_date": 1473865247, "creation_date": 1473856802, "last_edit_date": 1473857275, "question_id": 39490684, "link": "https://stackoverflow.com/questions/39490684/sizeof-array-elements-in-c", "title": "sizeof array elements in C", "body": "<p>In <code>C</code>, <strong>array elements are treated as pointers</strong>. So the expression <code>sizeof(arr)/sizeof(arr[0])</code> becomes <code>sizeof(int *)/sizeof(int)</code> which results in <code>1</code> then why the following program give output is <code>12 11</code>. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n    int main()\n    {\n            int n1, n2;\n            char arr1[] = \"Hello World\";\n            char arr2[] = {'H','e','l','l','o',' ','W','o','r','l','d'};\n            n1 = sizeof(arr1)/sizeof(arr1[0]);\n            n2 = sizeof(arr2)/sizeof(arr2[0]);\n            printf(\"n1 = %d\\nn2 = %d\\n\", n1, n2);\n            return 0;\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1473856453, "post_id": 39490556, "comment_id": 66298645, "body": "No, there is no standard C <code>itoa</code> function. It&#39;s an extension in some library implementations."}, {"owner": {"reputation": 11, "user_id": 6830672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6aa854ca3fde804f4827eaad8f292c?s=128&d=identicon&r=PG&f=1", "display_name": "Deepthy S Nair", "link": "https://stackoverflow.com/users/6830672/deepthy-s-nair"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473859621, "post_id": 39490556, "comment_id": 66300829, "body": "why there is a restriction over some compilers?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1473859905, "post_id": 39490556, "comment_id": 66301026, "body": "It&#39;s not a &quot;restriction&quot;, it is simply not part of the C standard, or any other published standard actually. The standard way to convert a string to an integer is <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow noreferrer\">the <code>strtol</code> function</a>."}], "answers": [{"comments": [{"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1473858775, "post_id": 39490627, "comment_id": 66300243, "body": "I don&#39;t think a C++ link is useful for a C based question (Even if it does not matter for this specific question, someone might be tempted to use the link as a permanent source of information. Sooner or later, that might end up bad)"}, {"owner": {"reputation": 2636, "user_id": 4635560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv67d.jpg?s=128&g=1", "display_name": "Manthan Tilva", "link": "https://stackoverflow.com/users/4635560/manthan-tilva"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1473859018, "post_id": 39490627, "comment_id": 66300418, "body": "@tofro If you check carefully left side bar of page, its reference for <code>C library</code>"}], "tags": [], "owner": {"reputation": 2636, "user_id": 4635560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv67d.jpg?s=128&g=1", "display_name": "Manthan Tilva", "link": "https://stackoverflow.com/users/4635560/manthan-tilva"}, "is_accepted": false, "score": 0, "last_activity_date": 1473856561, "creation_date": 1473856561, "answer_id": 39490627, "question_id": 39490556, "link": "https://stackoverflow.com/questions/39490556/using-itoa-function/39490627#39490627", "title": "Using itoa() Function", "body": "<p>Please check link below.</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/cstdlib/itoa/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdlib/itoa/</a></p>\n\n<p><code>itoa</code> is not standard function but some compiler support it.</p>\n\n<p>On above link few alternative for it is provided.</p>\n"}], "owner": {"reputation": 11, "user_id": 6830672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6aa854ca3fde804f4827eaad8f292c?s=128&d=identicon&r=PG&f=1", "display_name": "Deepthy S Nair", "link": "https://stackoverflow.com/users/6830672/deepthy-s-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1473, "favorite_count": 0, "closed_date": 1473856506, "answer_count": 1, "score": 1, "last_activity_date": 1473859565, "creation_date": 1473856349, "last_edit_date": 1473859565, "question_id": 39490556, "link": "https://stackoverflow.com/questions/39490556/using-itoa-function", "closed_reason": "Duplicate", "title": "Using itoa() Function", "body": "<p>When I compiled the code below, the compiler showed an undefined reference to itoa() function. But, when I searched; I found that itoa() is standard. Why is it so?  </p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include&lt;stdlib.h&gt;\n int main()\n{\n\n  int i;\n  char buffer [33];\n  printf (\"Enter a number: \");\n  scanf (\"%d\",&amp;i);\n  itoa (i,buffer,10);\n  printf (\"decimal: %s\\n\",buffer);\n  return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1473854540, "post_id": 39489769, "comment_id": 66297425, "body": "If your <code>char</code> is signed, just do this : <code>(int)c</code> If it is unsigned, what do you mean by &quot;signed meaning&quot;? Also <code>uint8_t</code> is <b>not</b> <code>char</code>, please clarify what exactly you need."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473864040, "post_id": 39489769, "comment_id": 66304048, "body": "There is no sign bit in <code>uint8_t a</code> to lose.  What is wrong with <code>b = a;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 3, "creation_date": 1473854758, "post_id": 39489845, "comment_id": 66297543, "body": "On some platforms <code>char</code>is unsigned, so for improved portability it should be <code>return (signed char)x;</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473854955, "post_id": 39489845, "comment_id": 66297664, "body": "Isn&#39;t the cast to signed from unsigned implementation defined? Or even UB in case of trap values?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1473855267, "post_id": 39489845, "comment_id": 66297889, "body": "@LPs  implementation-defined   &quot;When a value with integer type is converted to another integer type ... Otherwise, the new type is signed and the value cannot be represented in it; either the result is implementation-defined or an implementation-defined signal is raised.&quot; C11 6.3.1.3"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1473856750, "post_id": 39489845, "comment_id": 66298837, "body": "@LPs Luckily, in all mainstram implementations it will work. But I&#39;m sure there are old (like the 1970ies) platforms where it won&#39;t. It would be worth it to point out in the answer that it depends on implementation-defined behaviour, though."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1473863830, "post_id": 39489845, "comment_id": 66303911, "body": "@Klas Lindb&#228;ck The issue about modern vs 1970s computers does not consider <i>modern</i> compilers on <i>modern</i> platforms..  Many have been known to take advantage of ID behavior and UB to to create highly optimized code.  Relying on a causal understanding of a compiler&#39;s ID can lead to code not behaving as desired - hence the greater concern in 2016 to avoid ID behavior (as well as UB)."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1473926116, "post_id": 39489845, "comment_id": 66328212, "body": "@chux I agree. You need to know what you are doing and be willing to do the work of checking the manual for each platform that you support. You have to weigh that effort against the effort to write and maintain code that doesn&#39;t use any ID (or UB). If anyone wants to deep-dive into how to avoid it in this case I recommend (the question/answers cover both C and C++ and even differences between the different versions of the C standard): <a href=\"http://stackoverflow.com/questions/13150449/efficient-unsigned-to-signed-cast-avoiding-implementation-defined-behavior\" title=\"efficient unsigned to signed cast avoiding implementation defined behavior\">stackoverflow.com/questions/13150449/&hellip;</a>"}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 6, "last_activity_date": 1473858030, "last_edit_date": 1473858030, "creation_date": 1473854134, "answer_id": 39489845, "question_id": 39489769, "link": "https://stackoverflow.com/questions/39489769/convert-char-typenot-ascii-to-int/39489845#39489845", "title": "convert char type(not ascii) to int", "body": "<p>You are doing manual, explicit sign conversion.  Don't do that.  Instead:</p>\n\n<pre><code>static int c2int(unsigned char x)\n{\n    return (signed char)x;\n}\n</code></pre>\n\n<p>That does sign extension for you, and doesn't produce warnings.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1473854496, "creation_date": 1473854496, "answer_id": 39489950, "question_id": 39489769, "link": "https://stackoverflow.com/questions/39489769/convert-char-typenot-ascii-to-int/39489950#39489950", "title": "convert char type(not ascii) to int", "body": "<p>Do you want sign-extension or not? If you want sign-extension you have to go though a <em>signed</em> <code>char</code> first. If not then just use the implicit conversion using assignment or initialization:</p>\n\n<pre><code>unsigned char x = 0xfe;\nint y = (signed char) x;\nint z = x;\nprintf(\"x = %hhx, y = %08x, z = %08x\\n\", x, y, z);\n</code></pre>\n\n<p>The above code should print</p>\n\n<pre>\nx = fe, y = fffffffe, z = 000000fe\n</pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1473855808, "creation_date": 1473855808, "answer_id": 39490377, "question_id": 39489769, "link": "https://stackoverflow.com/questions/39489769/convert-char-typenot-ascii-to-int/39490377#39490377", "title": "convert char type(not ascii) to int", "body": "<ol>\n<li><p>Is there simple and efficient converting? </p>\n\n<pre><code>// To convert a value to char and then to int\n// As a function or macro\n#define c2int(x) ((int)(char)(x))\nint c2int(char x) { return x; }\n\n// To convert a value to signed char and then to int\n#define c2int(x) ((int)(signed char)(x))\nint c2int(signed char x) { return x; }\n</code></pre></li>\n<li><p>How to determine the signed expansion when simply convert char to int? </p>\n\n<p>No need for special code, see above.  C does this for you.</p></li>\n<li><p>How to avoid the above warning?</p>\n\n<p>Insure shifts are less than the bit width.<br>\n   Avoid shifting into the sign bit.</p></li>\n</ol>\n"}], "owner": {"reputation": 49, "user_id": 6804435, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fByv5WoJ8TM/AAAAAAAAAAI/AAAAAAAAACU/XiQn2SIq3ho/photo.jpg?sz=128", "display_name": "user6804435", "link": "https://stackoverflow.com/users/6804435/user6804435"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 1, "accepted_answer_id": 39489845, "answer_count": 3, "score": 1, "last_activity_date": 1473858030, "creation_date": 1473853943, "question_id": 39489769, "link": "https://stackoverflow.com/questions/39489769/convert-char-typenot-ascii-to-int", "title": "convert char type(not ascii) to int", "body": "<p>I want to convert char type to int type without losing the signed meaning,\nso i write the code in file int_test.c and it works:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n#define c2int(x) \\\n({                         \\\n        int t;             \\\n        if (x &gt; 0x80)      \\\n                t = x | (1 &lt;&lt; sizeof(int) * 8) - (1 &lt;&lt; sizeof(char) * 8); \\\n        else               \\\n                t = x;     \\\n        t;                 \\\n })\n\nint main()\n{\n        uint8_t a = 0xFE;\n        int b;\n\n        b = c2int(a);\n\n        printf(\"(signed char)a = %hhi, b = %d\\n\", a, b);\n\n        exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>the running result is:</p>\n\n<blockquote>\n  <p>(signed char)a = -2, b = -2</p>\n</blockquote>\n\n<p>The compiling log is:</p>\n\n<blockquote>\n  <p>gcc -o int_test int_test.c int_test.c: In function \u2018main\u2019:\n  int_test.c:9:15: warning: left shift count >= width of type\n  [-Wshift-count-overflow]\n      t = x | (1 &lt;&lt; sizeof(int) * 8) - (1 &lt;&lt; sizeof(char) * 8); \\\n                 ^ int_test.c:20:6: note: in expansion of macro \u2018c2int\u2019   b = c2int(a);</p>\n</blockquote>\n\n<p>My question is:\n<strong>1. Is there simple and efficient converting?\n2. How to determine the signed expansion when simply convert char to int?\n3. How to avoid the above warning?</strong></p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "c", "multithreading", "dll", "ctypes"], "comments": [{"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1473862042, "post_id": 39489546, "comment_id": 66302632, "body": "C modules in Python shouldn&#39;t call Py_Initialize out finalize since the interpreter already exists (and should exist afterwards to continue running). You&#39;re basically embedding a Python interpreter in a running Python executable which is weird. Just write a standard Python module - the documentation for that is pretty good."}, {"owner": {"reputation": 21, "user_id": 6829663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc82cde0a384255c06b4e150ac81fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Ritzi", "link": "https://stackoverflow.com/users/6829663/ritzi"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1474883103, "post_id": 39489546, "comment_id": 66697312, "body": "II know it&#39;s wierd to call a dll in Python and in the dll Pythoncode is called but I need it... so if I call the function Python_test with only <code>PyRun_SimpleString(&quot;print &#39;hello&#39;&quot;);</code> without Py_Initialise I get the Windows error      If I call it in a seperat C Thread Python.exe simply doesn&#39;t work any more with no special error message. but &quot;hello&quot; is printed before it breaks down"}, {"owner": {"reputation": 21, "user_id": 6829663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc82cde0a384255c06b4e150ac81fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Ritzi", "link": "https://stackoverflow.com/users/6829663/ritzi"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1474889093, "post_id": 39489546, "comment_id": 66701144, "body": "Is there maybe a Flag or something else which must be set or cleared? or is there maybe a problem with the Paths or something else? Would it be better to code in simple files and muild it with gcc instead of msbuild / VS10?"}], "owner": {"reputation": 21, "user_id": 6829663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc82cde0a384255c06b4e150ac81fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Ritzi", "link": "https://stackoverflow.com/users/6829663/ritzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1473853272, "creation_date": 1473853272, "question_id": 39489546, "link": "https://stackoverflow.com/questions/39489546/python-calls-a-dll-which-is-written-in-c-and-contains-pythoncode", "title": "Python calls a Dll which is written in C and contains Pythoncode", "body": "<p>my Problem is:\nI call a DLL in Python like:</p>\n\n<pre><code>from ctypes import *\nmydll = cdll.LoadLibrary(str(path_to_dll))\nmydll.python_test()\n</code></pre>\n\n<p>if I call a function which is written in C it is executed without any problems.\nBUT if i use embedded Python code in the dll like:</p>\n\n<pre><code>__declspec(dllexport) int python_test()\n{\n    Py_Initialize();\n    PyRun_SimpleString(\"print 'hello'\");\n    Py_Finalize();\n    return 1;\n}\n</code></pre>\n\n<p>The Python-Interpreter gives me this Error:</p>\n\n<pre><code>Traceback (most recent call last):\n File \"W:\\rin83wi\\Python_test\\batching_DLL.py\", line 43, in &lt;module&gt;\n  mydll.python_test()\nWindowsError: exception: access violation reading 0x0000000000000008\n</code></pre>\n\n<p>if I use the embedded Python function inside of an C-Console-Application it works fine.</p>\n\n<p>After looking up a little bit I got these ideas: </p>\n\n<ul>\n<li>Make additional python threads -> failed</li>\n<li>Make additional C threads -> faild (thread creating following this: <a href=\"https://msdn.microsoft.com/en-us/library/ms682516(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms682516(v=vs.85).aspx</a> only adding the embedded Python code in the created thread</li>\n<li>child prozess (not tested yet)</li>\n<li>calling a .exe which calls the dll or something else (but how is the communication working?) (not tested yet)</li>\n</ul>\n\n<p>I'm working with:</p>\n\n<p>Visualstudio 10 (VS13 is also available)</p>\n\n<p>Python 2.7.11</p>\n\n<p>IDE for Python is Anaconda (Spyder)</p>\n\n<p>The problem seems to be that only one instance of Python is able to run.</p>\n"}, {"tags": ["c++", "c", "makefile"], "comments": [{"owner": {"reputation": 1306, "user_id": 6644919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b4fdd15cf4d51ab53f48aa7a7bcade?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Biondo", "link": "https://stackoverflow.com/users/6644919/andrea-biondo"}, "edited": false, "score": 2, "creation_date": 1473854327, "post_id": 39489310, "comment_id": 66297303, "body": "By the way, a cleaner way to do this is to put each model in a separate subdirectory, with files named e.g. <code>model.cu</code> and <code>model.h</code>. Set <code>VPATH</code> and add a <code>-I</code> flag from your makefile, then you can set <code>SRCS := model.cu</code>, <code>OBJS := model.o</code> and generically <code>#include &lt;model.h&gt;</code> in your <code>main.c</code>."}, {"owner": {"reputation": 59, "user_id": 4742469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b32f368dba3d486ade4dcb21a6658a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/4742469/tim"}, "reply_to_user": {"reputation": 1306, "user_id": 6644919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b4fdd15cf4d51ab53f48aa7a7bcade?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Biondo", "link": "https://stackoverflow.com/users/6644919/andrea-biondo"}, "edited": false, "score": 0, "creation_date": 1473857254, "post_id": 39489310, "comment_id": 66299181, "body": "I like your idea, but could you specify on the use of VPATH and -I? I&#39;m not familiar with all possible options in a makefile and the documentation is often very difficult to understand for me. What I would like to know is the lines you would put in the makefile (Assume the map is called: NewModel and it contains model.cu and model.h)(the rest of the concept I get). Is it something like: #ifdef MODEL1 VPATH = -I ./NewModel #endif ?"}, {"owner": {"reputation": 1306, "user_id": 6644919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b4fdd15cf4d51ab53f48aa7a7bcade?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Biondo", "link": "https://stackoverflow.com/users/6644919/andrea-biondo"}, "edited": false, "score": 1, "creation_date": 1473867962, "post_id": 39489310, "comment_id": 66306777, "body": "Too long for a comment, so I wrote an answer for that, it basically drops every <code>ifdef</code> you have in there. It&#39;s just a suggestion, the accepted answer will fixing your posted code."}], "answers": [{"tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": true, "score": 2, "last_activity_date": 1473859136, "creation_date": 1473859136, "answer_id": 39491543, "question_id": 39489310, "link": "https://stackoverflow.com/questions/39489310/macro-in-makefile-conditional-h-file-inclusion/39491543#39491543", "title": "macro in makefile? Conditional h-file inclusion?", "body": "<p>You can simply add a preprocessor definition to your Makefile, for each model you have. For example, in the case of MODEL1=1:</p>\n\n<pre><code>ifdef MODEL1\nSRCS := model1.cu\nOBJS := model1.o\nCFLAGS += -DMODEL1\nendif\n</code></pre>\n\n<p>Assuming you are using the <a href=\"https://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules\" rel=\"nofollow\">implicit rules</a>, the modified <code>CFLAGS</code> will be passed to every file that is compiled. If you've used your own rule to compile main.c (and aren't using <code>CFLAGS</code>), then you could create a variable, and pass it in explicitly.</p>\n"}, {"tags": [], "owner": {"reputation": 1306, "user_id": 6644919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b4fdd15cf4d51ab53f48aa7a7bcade?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Biondo", "link": "https://stackoverflow.com/users/6644919/andrea-biondo"}, "is_accepted": false, "score": 1, "last_activity_date": 1473867849, "creation_date": 1473867849, "answer_id": 39494669, "question_id": 39489310, "link": "https://stackoverflow.com/questions/39489310/macro-in-makefile-conditional-h-file-inclusion/39494669#39494669", "title": "macro in makefile? Conditional h-file inclusion?", "body": "<p>The other answer is to the point and fixes your missing <code>#define</code>. I'll expand on the comment I left on a cleaner/DRYer way to do this.</p>\n\n<p>The first piece is having each model in its own directory, with common source/header names. For example:</p>\n\n<pre><code>\u251c\u2500\u2500 models\n    \u251c\u2500\u2500 model1\n    \u2502   \u251c\u2500\u2500 model.cu\n    \u2502   \u2514\u2500\u2500 model.h\n    \u251c\u2500\u2500 model2\n    \u2502   \u251c\u2500\u2500 model.cu\n    \u2502   \u2514\u2500\u2500 model.h\n    \u2514\u2500\u2500 ...\n</code></pre>\n\n<p>(you might drop the top-level <code>models</code> directory, doesn't matter)</p>\n\n<p>We're going to play with include paths, so you can drop the whole <code>#ifdef</code> stuff from your <code>main.c</code> and replace it with a single <code>#include &lt;model.h&gt;</code>.</p>\n\n<p>Next, let's be a bit smarter with how we specify the model. Instead of having <code>MODEL1</code>, <code>MODEL2</code>, etc. let's use a generic <code>MODEL</code> variable which takes the model name, so the make command will look like <code>MODEL=model1 make</code> (if having separate vars is a hard requirement there are ways to do it without tons of <code>ifdef</code>s, but it's still uglier).</p>\n\n<p>At this point writing the Makefile becomes trivial:</p>\n\n<pre><code>SRCS := models/$(MODEL)/model.cu main.c\nOBJS := $(addsuffix .o,$(basename $(SRCS)))\nCFLAGS += -Imodels/$(MODEL)\n</code></pre>\n\n<p>I don't know how you're handling <code>SRCS</code> and <code>OBJS</code> later on in the Makefile so I just used <code>addsuffix</code> and <code>basename</code> to slap a <code>.o</code> in there, but you can change it to your needs. I add the model directory to the include paths via <code>CFLAGS</code> so that it'll pick up the right <code>model.h</code>.</p>\n\n<p>You could also specify sources like this:</p>\n\n<pre><code>VPATH := models/$(MODEL)\nSRCS := model.cu main.c\n</code></pre>\n\n<p>Since make will look into <code>VPATH</code> for sources.</p>\n\n<p>Some misc stuff: if you still need a C <code>#define</code> you can add it via <code>CFLAGS</code>. If you have some common stuff in your <code>.h</code> files consider refactoring it into a top-level <code>.h</code> which then <code>#include &lt;model.h&gt;</code>. If your compiler supports it, <code>#include_next</code> might also be handy.</p>\n"}], "owner": {"reputation": 59, "user_id": 4742469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b32f368dba3d486ade4dcb21a6658a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/4742469/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 39491543, "answer_count": 2, "score": 1, "last_activity_date": 1473867849, "creation_date": 1473852550, "question_id": 39489310, "link": "https://stackoverflow.com/questions/39489310/macro-in-makefile-conditional-h-file-inclusion", "title": "macro in makefile? Conditional h-file inclusion?", "body": "<p>Let me explain my situation:\nI have a program that contains different kinds of models (let's say 10, but the actual number is quite high). All these models have a name and corresponding file \"model1.cu\" and \"model1.h\". All of these files have a function that produces one float number and returns it, which is in all files named the same, with the same arguments (let's say <code>float returnfunction(float voltage)</code>). This particular function is needed in the main file.\nIn the makefile I have put an option such that you compile only the code for the model you will be calculating with as follows:</p>\n\n<pre><code>ifdef MODEL1\nSRCS := model1.cu\nOBJS := model1.o\nendif\n\nifdef MODEL2\nSRCS := model2.cu\nOBJS := model2.o\nendif\n\nSRCS += main.c\n</code></pre>\n\n<p>Now I can select the correct model by typing \"make MODEL1=1\". The problem arises in the main-file. The function <code>returnfunction(float voltage)</code> is defined in model1.h, so I should include it. But when I include </p>\n\n<pre><code>#ifdef MODEL1\n#include \"model1.h\"\n#endif\n\n#ifdef MODEL2\n#include \"model2.h\"\n#endif\n</code></pre>\n\n<p>in my main.c file, I get the error that the function <code>returnfunction</code> is not defined anywhere.\nIs there a way to get the correct h-file included in my main-file? Preferably by using that I already compile by using MODEL1 = 1.</p>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["c", "datetime", "struct"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1473852471, "post_id": 39489260, "comment_id": 66296145, "body": "You mean something like the standard <a href=\"http://en.cppreference.com/w/c/chrono/difftime\" rel=\"nofollow noreferrer\"><code>difftime</code></a> function?"}, {"owner": {"reputation": 569, "user_id": 4181430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1488320649/picture?type=large", "display_name": "jurhas", "link": "https://stackoverflow.com/users/4181430/jurhas"}, "edited": false, "score": 0, "creation_date": 1473852929, "post_id": 39489260, "comment_id": 66296415, "body": "struct datetime is not portable. You should use &quot;time.h&quot; library, therefore you should use struct tm"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473854472, "post_id": 39489260, "comment_id": 66297385, "body": "1) Post definition of <code>struct datetime</code>.  2) Post definition of <code>init_datetime()()</code>  3) Describe how code should handle overflows would be useful.  (max time - min time)"}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 1, "creation_date": 1473854559, "post_id": 39489260, "comment_id": 66297437, "body": "Question: what difference value do you expect on the date where daylight saving time switches from summer time to winter time with <code>dt_from</code> at 1:50 AM and <code>dt_to</code> at 3:50 AM? Or more generally: do you require culture and region aware arithmetics?"}], "answers": [{"tags": [], "owner": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "is_accepted": false, "score": 0, "last_activity_date": 1473854564, "creation_date": 1473854564, "answer_id": 39489967, "question_id": 39489260, "link": "https://stackoverflow.com/questions/39489260/calculate-datetime-difference-in-c/39489967#39489967", "title": "Calculate datetime difference in C", "body": "<p>Here is the basic idea:</p>\n\n<p>Convert your <code>datetime</code> into an integral type (preferable <code>long long</code> or <code>unsigned long long</code>) which represents your <code>datetime</code> value as it's smallest unit (second in your case). How to achieve that? Easy transform the single values into seconds and add everything together. (<code>seconds + minutes * 60 + hours * 3600 ...</code>)</p>\n\n<p>Do this for both values and then subtract the integer values. </p>\n\n<p>Now convert the single integer value, the time difference, back to a <code>datetime</code>. How? Start with the biggest unit (years) and divide the difference by the amount of seconds within one year (60 * 60 * 24 * 365). Now you know how many years are in between your two <code>datetime</code>s. Take the rest and divide it by the amount of seconds per month, and so on...</p>\n\n<p>(Obviously I ignored everything rather complicated, like daylight saving time for example)</p>\n\n<hr>\n\n<p>However I would highly recommend using <code>struct tm</code> from <code>time.h</code> as mentioned in the comments. It is portable and you can use <code>difftime</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1473860243, "post_id": 39491900, "comment_id": 66301272, "body": "Your code has Undefined Behavior on invalid user input. That is generally a bad thing in any example code, which people might copy."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1473878270, "post_id": 39491900, "comment_id": 66312374, "body": "<code>mktime()</code> reads all fields of <code>struct tm</code> except <code>tm_yday, tm_wday</code>.  This code only sets 6 of them - missing others.  Suggest initializing with <code>struct tm start_date = {0};</code> to set all fields and research <code>tm_isdst</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1473878384, "post_id": 39491900, "comment_id": 66312432, "body": "Adding 0.5 is problematic for rounding.  No need to limit answer to <code>int</code> range.  Recommend  <code>printf(&quot;%.0f days difference\\n&quot;, round(seconds &#47; (60.0 * 60 * 24)));</code>"}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473879745, "post_id": 39491900, "comment_id": 66313165, "body": "@chux I tried to improve my answer. Would you please have a look again if it is better? Thanks for the advice"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1473880588, "post_id": 39491900, "comment_id": 66313615, "body": "Good improvement.  The typical assignment is <code>tm_isdst = -1</code> as in &quot;let mktime()&quot; figure it out for one time-stamp may be in daylight time and the other not so.  The typical problem is that 1 hour per year when a time-stamp could be valid as daylight or not.  OP&#39;s has not, sigh, posted the details of <code>struct datetime</code> which may guide the answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1473880691, "post_id": 39491900, "comment_id": 66313668, "body": "BTW Code <i>certainly</i> should be <code>start_date.tm_year = 1995-1900;     start_date.tm_mon = 9-1;</code>  See docs on <code>struct tm</code> for details."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1473880991, "post_id": 39491900, "comment_id": 66313825, "body": "Further: <code>mktime()</code> adjusts all its fields to their primary range upon completion.  So re-using  <code>start_date</code> in the 2nd <code>mktime()</code>, <i>in general</i>, may have the same field values that you started with in the first call of <code>gmtime()</code>."}], "tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1473879708, "last_edit_date": 1473879708, "creation_date": 1473860062, "answer_id": 39491900, "question_id": 39489260, "link": "https://stackoverflow.com/questions/39489260/calculate-datetime-difference-in-c/39491900#39491900", "title": "Calculate datetime difference in C", "body": "<p>Please have a look and try this example which uses <code>time.h</code> and should be portable. It calculates the difference in days between the dates in your question. You can change the program a little so that it works the way you want. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n    time_t start_daylight, start_standard, end_daylight, end_standard;;\n    struct tm start_date = {0};\n    struct tm end_date = {0};\n    double diff;\n\n    printf(\"Start date: \");\n    scanf(\"%d %d %d\", &amp;start_date.tm_mday, &amp;start_date.tm_mon, &amp;start_date.tm_year);\n    printf(\"End date: \");\n    scanf(\"%d %d %d\", &amp;end_date.tm_mday, &amp;end_date.tm_mon, &amp;end_date.tm_year);\n\n    /* first with standard time */\n    start_date.tm_isdst = 0;\n    end_date.tm_isdst = 0;\n    start_standard = mktime(&amp;start_date);\n    end_standard = mktime(&amp;end_date);\n    diff = difftime(end_standard, start_standard);\n\n    printf(\"%.0f days difference\\n\", round(diff / (60.0 * 60 * 24)));\n\n    /* now with daylight time */\n    start_date.tm_isdst = 1;\n    end_date.tm_isdst = 1;\n    start_daylight = mktime(&amp;start_date);\n    end_daylight = mktime(&amp;end_date);\n    diff = difftime(end_daylight, start_daylight);\n\n    printf(\"%.0f days difference\\n\", round(diff / (60.0 * 60 * 24)));\n\n    return 0;\n}\n</code></pre>\n\n<p>Test</p>\n\n<pre><code>Start date: 15 9 1995\nEnd date: 15 6 2004\n3195 days difference\n</code></pre>\n\n<p>Or even simpler for non-interactive code and with standard or daylight savings time:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\nint main()\n{\n    time_t start_daylight, start_standard, end_daylight, end_standard;;\n    struct tm start_date = {0};\n    struct tm end_date = {0};\n    double diff;\n\n    start_date.tm_year = 1995;\n    start_date.tm_mon = 9;\n    start_date.tm_mday = 15;\n    start_date.tm_hour = 10;\n    start_date.tm_min = 40;\n    start_date.tm_sec = 15;\n\n    end_date.tm_mday = 15;\n    end_date.tm_mon = 6;\n    end_date.tm_year = 2004;\n    end_date.tm_hour = 10;\n    end_date.tm_min = 40;\n    end_date.tm_sec = 20;\n\n    /* first with standard time */\n    start_date.tm_isdst = 0;\n    end_date.tm_isdst = 0;\n    start_standard = mktime(&amp;start_date);\n    end_standard = mktime(&amp;end_date);\n    diff = difftime(end_standard, start_standard);\n\n    printf(\"%.0f days difference\\n\", round(diff / (60.0 * 60 * 24)));\n\n    /* now with daylight time */\n    start_date.tm_isdst = 1;\n    end_date.tm_isdst = 1;\n    start_daylight = mktime(&amp;start_date);\n    end_daylight = mktime(&amp;end_date);\n    diff = difftime(end_daylight, start_daylight);\n\n    printf(\"%.0f days difference\\n\", round(diff / (60.0 * 60 * 24)));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1798, "user_id": 1734802, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/268fccfc077d31deaca93901226bf33b?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1734802/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1473879708, "creation_date": 1473852368, "last_edit_date": 1473852786, "question_id": 39489260, "link": "https://stackoverflow.com/questions/39489260/calculate-datetime-difference-in-c", "title": "Calculate datetime difference in C", "body": "<p>I need a function that can calculate the difference between two datetime (year, month, day, hours, minute, seconds). and then return the difference in the same format.</p>\n\n<pre><code>int main (){\n\n    struct datetime dt_from;\n    init_datetime(&amp;dt_from, 1995, 9, 15, 10, 40, 15);\n\n    struct datetime dt_to;\n    init_datetime(&amp;dt_to, 2004, 6, 15, 10, 40, 20);\n\n    struct datetime dt_res;\n\n    datetime_diff(&amp;dt_from, &amp;dt_to, &amp;dt_res);\n\n    return 0;\n\n}\n\nvoid datetime_diff(struct datetime *dt_from, struct datetime *dt_to\n, struct datetime *dt_res) {\n\n    //What can I do here to calculate the difference, and get it in the dt_res?\n\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "x86"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1473850825, "post_id": 39488705, "comment_id": 66295185, "body": "Pointers are passed by value (so just push pointer value onto the stack), you just need to access the variable through indirection from the pointer inside the function body,"}, {"owner": {"reputation": 1194, "user_id": 3795597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bdc0769eb951ee2c673e99c40f0af87d?s=128&d=identicon&r=PG&f=1", "display_name": "MayeulC", "link": "https://stackoverflow.com/users/3795597/mayeulc"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1473850965, "post_id": 39488705, "comment_id": 66295268, "body": "Those are pointers, not references, AFAIK. I think would involve fetching the value at the address contained in the pointer. I am not an x86 assembly expert, though. edit: @Jean-BaptisteYun&#232;s, you beat me :)"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1473859345, "post_id": 39488705, "comment_id": 66300633, "body": "What operating system? Windows and UNIX have different ABIs."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1473860913, "post_id": 39488705, "comment_id": 66301789, "body": "You can also &quot;cheat&quot; a bit, write a function in C like <code>float testAbi(float *one) { return *one; }</code> and compile it with assembly listing to see how C would work with that pointer."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1473885343, "post_id": 39488705, "comment_id": 66315993, "body": "@Jean-BaptisteYun&#232;s: Both major x86-64 ABIs pass args in regs, not the stack.  But yes, a pointer arg is just a value, passed the same way as an equal-sized integer.  See the <a href=\"http://stackoverflow.com/tags/x86/info\">x86 tag wiki</a> for links to ABI docs that specify what goes where.  Or just look at where a compiler targeting that ABI puts things."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473885483, "post_id": 39489134, "comment_id": 66316059, "body": "Most ABIs return large structs by hidden reference.  So even though C has no notion of return by reference, most ABIs do as an implementation detail.  For arg-passing though, usually even large structs are passed by value, copied onto the stack instead of by hidden const-reference."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1473913566, "post_id": 39489134, "comment_id": 66323451, "body": "Right, I would have say pass values as usual."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473916401, "post_id": 39489134, "comment_id": 66324193, "body": "BTW, x86 commonly includes all flavours these days, not just 32-bit x86.  I wouldn&#39;t nit-pick over using the less-specific x86 term when someone meant x86-64 specifically.  It&#39;s not like they said x86-32 or i386.  Using x86 to mean 32-bit specifically is getting rarer as 32-bit gets more and more obsolete, especially outside the context of a drop-down menu where some options say x86-64 and some only say x86."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 2, "last_activity_date": 1473852027, "creation_date": 1473852027, "answer_id": 39489134, "question_id": 39488705, "link": "https://stackoverflow.com/questions/39488705/c-function-implemented-in-assembler-x86-when-parameters-are-passed-by-reference/39489134#39489134", "title": "C function implemented in assembler x86 when parameters are passed by reference", "body": "<p>There is no pass by reference in C because there are no references in C. When programming in C don't use the word \"reference\", forget that it even exists. All values in C are passed by value because they are values, not references which don't exist. Pointers are values, if that wasn't clear. (Strictly speaking, the value of a pointer is a reference to another object so we can't completely forget the word \"reference\", but that really confuses people when learning C).</p>\n\n<p>When writing x86_64 (your question implies x86_64, not x86 which your title mentions) assembler all pointers are handled exactly the same regardless of the type they point to and in the function call ABI they are passed in the same registers as integer values.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1473916278, "post_id": 39503476, "comment_id": 66324151, "body": "This is correct for the x86-64 System V ABI.  x86-64 Windows uses the same idea but different registers.  See also <a href=\"http://stackoverflow.com/documentation/x86/3261/calling-conventions\">stackoverflow.com/documentation/x86/3261/calling-conventions</a>"}, {"owner": {"reputation": 65, "user_id": 5207201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95b4403bbac6f50a4db855e3735cbdcc?s=128&d=identicon&r=PG", "display_name": "DeafFrog", "link": "https://stackoverflow.com/users/5207201/deaffrog"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473919006, "post_id": 39503476, "comment_id": 66325058, "body": "@PeterCordes; I&#39;m fairly certain (given the context and timing) that we have the same assignment, in which we need to x86_64 yasm in Linux, but for consistency, I&#39;ve updated my answer to include the Windows registers."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473919548, "post_id": 39503476, "comment_id": 66325235, "body": "Yup, looks good.  The biggest problem with the question is that it doesn&#39;t specify a platform / ABI / calling convention, so it&#39;s not answerable.  (Unless you can take a useful guess, like you did here.  And then it&#39;s important to point out this step in the process of coming to an answer.)  TL:DR: more important to mention the calling convention issue than to actually give a solution for both major ones, but showing the difference by example works well, too."}], "tags": [], "owner": {"reputation": 65, "user_id": 5207201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95b4403bbac6f50a4db855e3735cbdcc?s=128&d=identicon&r=PG", "display_name": "DeafFrog", "link": "https://stackoverflow.com/users/5207201/deaffrog"}, "is_accepted": false, "score": 3, "last_activity_date": 1473919187, "last_edit_date": 1495540301, "creation_date": 1473915943, "answer_id": 39503476, "question_id": 39488705, "link": "https://stackoverflow.com/questions/39488705/c-function-implemented-in-assembler-x86-when-parameters-are-passed-by-reference/39503476#39503476", "title": "C function implemented in assembler x86 when parameters are passed by reference", "body": "<p>I've got <a href=\"https://stackoverflow.com/questions/39499039/how-to-work-with-addresses-in-an-assembly-function-called-from-c\">the <em>exact</em> same problem</a>, and I figured it out.</p>\n\n<p><code>rdi</code> contains the literal address, <code>[rdi]</code> will 'point' to the value stored at that address; so the three addresses will be stored at <code>rdi</code>, <code>rsi</code>, and <code>rdx</code> (Linux, and Mac OS/X); or <code>rcx</code>, <code>rdx</code>, and <code>r8</code> (Windows).</p>\n\n<p>So then to move the actual values that need to be compared across to the SSE registers you need to use, <code>movss xmm0, [rdi]</code>.</p>\n\n<p>Finally to get the floats back across to the C program, you need to use <code>movss [rdi], xmm0</code>: this will move the value of <code>xmm0</code> over to where <code>rdi</code> is 'pointing' to.</p>\n"}], "owner": {"reputation": 159, "user_id": 2701288, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/nIZoH.jpg?s=128&g=1", "display_name": "Keaton Pennells", "link": "https://stackoverflow.com/users/2701288/keaton-pennells"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1473919187, "creation_date": 1473850621, "last_edit_date": 1473885316, "question_id": 39488705, "link": "https://stackoverflow.com/questions/39488705/c-function-implemented-in-assembler-x86-when-parameters-are-passed-by-reference", "title": "C function implemented in assembler x86 when parameters are passed by reference", "body": "<p>I am implementing a C defined function in assembler. The function is as follows </p>\n\n<pre><code>extern void swapNums(float* one,float* two,float* three);\n</code></pre>\n\n<p>A) swapNums accepts 3 references to a float, and then places the smallest of these 3 values in 'one', the middle value in 'two' and the largest of the three values in 'three'.</p>\n\n<p>I want to know:</p>\n\n<ol>\n<li><p>Which registers are used to store the references to the 3 floats,\ni.e. Is it rsi,rdi,rdx... or is it xmm0,xmm1,xmm3 ... </p></li>\n<li><p>How do I change the value in *one, *two, *three so that i can satisfy A)</p></li>\n</ol>\n\n<p>I am accustomed to implementing C functions in assembler when the parameters of the function are passed by value. For example when dealing with floating point parameters, I follow the conventions below:</p>\n\n<pre><code>section .data\n\n    global &lt;name of function&gt;\n\n&lt;name of function&gt;:\n    movss [x1], xmm0 ; move the first parameter into memory location x1\n    movss [x2], xmm1 ; move the second parameter into memory location x2\n    movss [xNorm], xmm2 ; move the third parameter into memory location x3\n</code></pre>\n\n<p>and then link the object files of the .asm and .c files when creating an executable</p>\n"}, {"tags": ["java", "c", "java-native-interface"], "comments": [{"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1473849947, "post_id": 39488446, "comment_id": 66294679, "body": "looks like you are just getting undefined values for the missing parameters"}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1473850057, "post_id": 39488446, "comment_id": 66294733, "body": "The method is identified by its name. You need to make sure the signatures match."}, {"owner": {"reputation": 4793, "user_id": 2136795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2aa2525743dbdf65634cc11fae3b6ed?s=128&d=identicon&r=PG", "display_name": "Gyro Gearless", "link": "https://stackoverflow.com/users/2136795/gyro-gearless"}, "edited": false, "score": 1, "creation_date": 1473850268, "post_id": 39488446, "comment_id": 66294857, "body": "IIRR, you should include the .h header file generated by javah to make sure you have the proper function prototype"}, {"owner": {"reputation": 159, "user_id": 5801251, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zn8VW.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/5801251/nilesh"}, "edited": false, "score": 0, "creation_date": 1473850648, "post_id": 39488446, "comment_id": 66295076, "body": "If I have two methods and with same name but different parameter , Then it will be problamatic without header."}, {"owner": {"reputation": 159, "user_id": 5801251, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zn8VW.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/5801251/nilesh"}, "edited": false, "score": 0, "creation_date": 1473850687, "post_id": 39488446, "comment_id": 66295097, "body": "Is it neccesser to create Header file with javah tool?"}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1473850738, "post_id": 39488446, "comment_id": 66295127, "body": "I don&#39;t think you can have two JNI methods with the same name. You need to give them different names. <a href=\"http://stackoverflow.com/questions/28637023/overload-jni-method\">stackoverflow.com/questions/28637023/overload-jni-method</a>"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 3, "creation_date": 1473851225, "post_id": 39488446, "comment_id": 66295437, "body": "@Nilesh There is no other correct way to do it. The JVM and <code>javah</code> share the knowledge of exactly how a Java native method signature is mapped into C. <code>javah</code> will generate a correct header file, and it is up to you to ensure the .c file agrees with it."}, {"owner": {"reputation": 328, "user_id": 4844822, "user_type": "registered", "profile_image": "https://graph.facebook.com/459123704243311/picture?type=large", "display_name": "Zsigmond L\u0151rinczy", "link": "https://stackoverflow.com/users/4844822/zsigmond-l%c5%91rinczy"}, "edited": false, "score": 0, "creation_date": 1473866364, "post_id": 39488446, "comment_id": 66305721, "body": "@OP Use compiler flags <code>-Wmissing-prototypes -Werror</code>, it will warn you if the name/parameter-list doesn&#39;t match with the <code>javah</code>-generated function-prototype."}, {"owner": {"reputation": 331, "user_id": 1512518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR4gl.jpg?s=128&g=1", "display_name": "marioc64", "link": "https://stackoverflow.com/users/1512518/marioc64"}, "edited": false, "score": 0, "creation_date": 1526710539, "post_id": 39488446, "comment_id": 87859575, "body": "Pure C does not have function overloading. There can&#39;t exist two fuctions with different arguments but same name."}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 5801251, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zn8VW.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/5801251/nilesh"}, "edited": false, "score": 0, "creation_date": 1473851104, "post_id": 39488745, "comment_id": 66295357, "body": "Thanks , I am new to Jni and C . But in such scenario How header file will help?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 159, "user_id": 5801251, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zn8VW.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/5801251/nilesh"}, "edited": false, "score": 1, "creation_date": 1473853509, "post_id": 39488745, "comment_id": 66296788, "body": "@Nilesh The generated header file it will have a declaration of the function with correct signature. If you include the generated header the compiler can compare the signature in the header with the one in the .c file and if they differ it will issue an error when you compile."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 2, "last_activity_date": 1473851520, "last_edit_date": 1473851520, "creation_date": 1473850714, "answer_id": 39488745, "question_id": 39488446, "link": "https://stackoverflow.com/questions/39488446/how-method-identified-in-jni/39488745#39488745", "title": "How method Identified in JNI?", "body": "<p>C functions are identified by name only during linking and in runtime, so Java will call the function but without supplying any argument. </p>\n\n<p>If you supply too few arguments when you call a C function you invoke undefined behaviour which means anything may happen.  (In your case you got a seemingly random value.)</p>\n\n<p>The javah-generated  header file it will have a declaration of the function with correct signature. If you include the generated header the compiler can  compare the signature in the header with the one in the <code>.c</code> file and if they differ it will issue an error when you compile.</p>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 5801251, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zn8VW.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/5801251/nilesh"}, "edited": false, "score": 0, "creation_date": 1473851834, "post_id": 39488832, "comment_id": 66295768, "body": "Thanks Serhio , Its cleared me about how JVM mapps java function to native function , also use of Header file"}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 1, "last_activity_date": 1473851011, "creation_date": 1473851011, "answer_id": 39488832, "question_id": 39488446, "link": "https://stackoverflow.com/questions/39488446/how-method-identified-in-jni/39488832#39488832", "title": "How method Identified in JNI?", "body": "<p>Very brief scenario looks in next way. When you are calling <code>jBoolean()</code> from java, JVM notes that this method is native, and tries to find its implementation. In your case JVM constructs name of the native function by decorating of <code>jBoolean</code> with class and package name. Result is the string <code>Java_jniexamples_rmi_Demo_jBoolean</code>. Then it tries to find function with this name in the process's address space with <code>dlsym()</code>. Because of this it is crucial to load native module with this function before you try to call it. Then, if it is OK - <code>dlsym()</code> returns pointer to the function, but note that this pointer has no info about actual function signature and JVM <strong>infers</strong> native signature using only one that was declared in java. Then JVM invokes your native function according to inferred signature.</p>\n\n<p>As result - difference between inferred signature and actual one causes undefined behavior, that may lead to very strange things, not only to random parameter values. Because of this it is a good practice - to include <code>javah</code>-generated header into your native implementations. Such header breaks compilation with error if one of your implementations has signature that differs from declared in header.</p>\n"}], "owner": {"reputation": 159, "user_id": 5801251, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zn8VW.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/5801251/nilesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1473851520, "creation_date": 1473849795, "question_id": 39488446, "link": "https://stackoverflow.com/questions/39488446/how-method-identified-in-jni", "title": "How method Identified in JNI?", "body": "<p>While I was developing , by mistakes I missed to add parameter in function. But same function in native jni call has parameter. But still it is calling exact method from java. </p>\n\n<p><strong>Java class Demo.java</strong>.</p>\n\n<pre><code>  package jniexamples.rmi;\n\nclass Demo {\n    private native void jBoolean();\n    public static void main(String[] args) {\n        new Demo().jBoolean();\n    }\n    static {\n        System.load(\"jnidemo.so\");\n    }\n}\n</code></pre>\n\n<p><strong>Demo.c</strong></p>\n\n<pre><code> #include &lt;jni.h&gt;\n#include &lt;stdio.h&gt;\nJNIEXPORT void JNICALL\nJava_jniexamples_rmi_Demo_jBoolean(JNIEnv *env, jobject ob,jint dtype)\n{\n    printf(\"first demo %d\" , dtype);\n    return;\n}\n</code></pre>\n\n<p><strong>Result: first demo -1579007728</strong></p>\n\n<p>I am confused even though method signature is different, How it is calling jni method?</p>\n"}, {"tags": ["c++", "c", "windows", "gcc", "mingw"], "comments": [{"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 1, "creation_date": 1473850055, "post_id": 39488261, "comment_id": 66294732, "body": "Instead of calling <code>gcc.exe</code> you just call <code>D:\\toolchains\\MinGW\\bin\\gcc.exe</code>. You don&#39;t even need to be in the MinGW installation dir as long as you give the full path to gcc."}, {"owner": {"reputation": 45, "user_id": 6700447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afbba077442ab74815b9363c372dedba?s=128&d=identicon&r=PG&f=1", "display_name": "Woo Hoo developer", "link": "https://stackoverflow.com/users/6700447/woo-hoo-developer"}, "reply_to_user": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1473850611, "post_id": 39488261, "comment_id": 66295050, "body": "@TimF When I do that I get the same error :("}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1473851029, "post_id": 39488261, "comment_id": 66295306, "body": "Okay sorry, then it&#39;s gcc that doesn&#39;t find hw.c. So whether you execute this command from the folder where hw.c is, or you give the absolute or relative path to hw.c. By example <code>D:\\toolchains\\MinGW\\bin\\gcc.exe D:\\path\\to\\hw.c -o hw</code>"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473853085, "post_id": 39488261, "comment_id": 66296511, "body": "This sounds like an incomplete installation. The compiler front end runs some other executables, some of which are located in related (but not the same) directory. I can reproduce the error message by forcing it to not find anything relative to its directory, simply by mapping a drive to bin and running it from root of that drive. Can you show an example where running the compiler <b>works</b>?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473853220, "post_id": 39488261, "comment_id": 66296602, "body": "That said, although running the compiler will normally work fine regardless of search path, the linker can be confused and fail if the MinGW bin directory is not in your <code>PATH</code>. So in practice you need that <code>PATH</code>."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1473852631, "last_edit_date": 1495541239, "creation_date": 1473852631, "answer_id": 39489329, "question_id": 39488261, "link": "https://stackoverflow.com/questions/39488261/run-mingw-gcc-compiler-in-windows-7-without-setting-environment-variables/39489329#39489329", "title": "Run MinGW gcc compiler in Windows 7 without setting environment variables", "body": "<p>You have to set the PATH environment variable for raw Mingw to work. See <a href=\"http://www.mingw.org/wiki/getting_started\" rel=\"nofollow noreferrer\">this</a>, the section called \"Environment Settings\":</p>\n\n<blockquote>\n  <ol>\n  <li>Right-click on your \"My Computer\" icon and select \"Properties\".</li>\n  <li>Click on the \"Advanced\" tab, then on the \"Environment Variables\" button.</li>\n  <li>You should be presented with a dialog box with two text boxes. The top box shows your user settings. The PATH entry in this box is the\n  one you want to modify. Note that the bottom text box allows you to\n  change the system PATH variable. You should not alter the system path\n  variable in any manner, or you will cause all sorts of problems for\n  you and your computer!</li>\n  <li>Click on the PATH entry in the TOP box, then click on the \"Edit\" button</li>\n  <li><p>Scroll to the end of the string and at the end add</p>\n  \n  <p><code>;&lt;installation-directory&gt;\\bin</code></p></li>\n  <li><p>press OK -> OK -> OK and you are done.</p></li>\n  </ol>\n</blockquote>\n\n<p>Otherwise, if you use an IDE like Codeblocks, it will do all these dirty details for you. See <a href=\"https://stackoverflow.com/questions/34163283/how-to-use-c11-standard-in-codeblocks/34220462#34220462\">this</a> for an example of how to change the default Mingw compiler used by Codeblocks. It has an \"auto detect\" feature which will localize the Mingw compiler, linker etc etc.</p>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473854303, "post_id": 39489563, "comment_id": 66297287, "body": "I can&#39;t see any reason why the working directory should have anything to do with the matter. Using MinGW g++ works fine for me without setting a search PATH or working directory, and that has always been so (back to the 1990s). But, occasionally there have been problems with the linker, which appears to sometimes need a search <code>PATH</code>, and not only need it, but have it before some other search path in <code>PATH</code>."}], "tags": [], "owner": {"reputation": 491, "user_id": 5778928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5484813233425f0aa63b8afb108c0203?s=128&d=identicon&r=PG&f=1", "display_name": "GSIO01", "link": "https://stackoverflow.com/users/5778928/gsio01"}, "is_accepted": true, "score": 3, "last_activity_date": 1473853342, "last_edit_date": 1495541239, "creation_date": 1473853342, "answer_id": 39489563, "question_id": 39488261, "link": "https://stackoverflow.com/questions/39488261/run-mingw-gcc-compiler-in-windows-7-without-setting-environment-variables/39489563#39489563", "title": "Run MinGW gcc compiler in Windows 7 without setting environment variables", "body": "<p>You either have to modify your PATH environment variable or start the gcc process with the right working directory. You can do both in python:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/8365394/set-environment-variable-in-python-script\">Modify environment variables from within python</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/1685157/python-specify-popen-working-directory-via-argument\">Specify a working directory for a subprocess in python</a></p></li>\n</ul>\n\n<p>I would recommend to modify the PATH variable.</p>\n"}], "owner": {"reputation": 45, "user_id": 6700447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afbba077442ab74815b9363c372dedba?s=128&d=identicon&r=PG&f=1", "display_name": "Woo Hoo developer", "link": "https://stackoverflow.com/users/6700447/woo-hoo-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4140, "favorite_count": 1, "accepted_answer_id": 39489563, "answer_count": 2, "score": 4, "last_activity_date": 1473853342, "creation_date": 1473849283, "question_id": 39488261, "link": "https://stackoverflow.com/questions/39488261/run-mingw-gcc-compiler-in-windows-7-without-setting-environment-variables", "title": "Run MinGW gcc compiler in Windows 7 without setting environment variables", "body": "<p>I have a MinGW folder in Windows and I didn't set any paths in environment variables. When I run the following command:</p>\n\n<pre><code>D:\\toolchains\\MinGW\\bin&gt;gcc.exe hw.c -o hw\n</code></pre>\n\n<p>I got this error:</p>\n\n<pre><code>gcc.exe: error: CreateProcess: No such file or directory\n</code></pre>\n\n<p>As far as I understand, this problem caused by that I didn't add this path to  environment variables. How can I solve this problem without adding this path to  environment variables, because I'm planning to run this command from Python script.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473849166, "post_id": 39488166, "comment_id": 66294260, "body": "In <code>unsigned char Data = TestArray[Number];</code> how do you expect to work with values &gt; <code>0xFF</code>? You have already truncated the value. Work with <code>unsigned int Data</code>. And your lower byte is over complicated, try <code>LowerByte = Data &amp; 0x07;</code>"}, {"owner": {"reputation": 253, "user_id": 6509764, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1268508016500512/picture?type=large", "display_name": "Embedded Geek", "link": "https://stackoverflow.com/users/6509764/embedded-geek"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473849576, "post_id": 39488166, "comment_id": 66294498, "body": "So using mod(%) will complicate ? How?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473849646, "post_id": 39488166, "comment_id": 66294531, "body": "By performing unnecessary computation."}, {"owner": {"reputation": 253, "user_id": 6509764, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1268508016500512/picture?type=large", "display_name": "Embedded Geek", "link": "https://stackoverflow.com/users/6509764/embedded-geek"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473890771, "post_id": 39488166, "comment_id": 66318201, "body": "@WeatherVane I have another query, how this piece of code will work. This is in the same context to above question. What will DATA char array will store and how shifting is happening. <code>unsigned char DATA[24];</code> <code>DATA[UpperByte] |= (0x01)&lt;&lt;LowerByte;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473958234, "post_id": 39488166, "comment_id": 66348573, "body": "I am sorry I do not understand, you said you &quot;need 6 in upper byte&quot; and indeed every value has a 6 in the upper byte, so what is an array for? On the other hand, if you meant 6 <i>bits</i> in the upper byte, then an array <code>DATA[24]</code> is not large enough, it would need to be <code>DATA[64]</code>. But please ask another question showing what you have tried."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473849434, "post_id": 39488309, "comment_id": 66294409, "body": "&quot;Lower byte will not exceed 7&quot;"}, {"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 0, "creation_date": 1473849568, "post_id": 39488309, "comment_id": 66294491, "body": "<code>LowerByte</code> and <code>UpperByte</code> could be the other way around, depending on endianness."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 3, "creation_date": 1473851263, "post_id": 39488309, "comment_id": 66295450, "body": "@BlagovestBuyukliev, left and right shift doesn&#39;t depend of endiannes: <a href=\"http://stackoverflow.com/q/7184789/1606345\">stackoverflow.com/q/7184789/1606345</a>"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1473851614, "post_id": 39488309, "comment_id": 66295622, "body": "Yes, the <code>TestArray</code> makes it appear (at first glance) like OP is parsing a byte array or something similar, but this code is just taking a single 16-bit integer and extracting high and low bytes."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 0, "creation_date": 1473927695, "post_id": 39488309, "comment_id": 66329022, "body": "@BlagovestBuyukliev No, it&#39;s an array of <code>unsigned int</code>, that&#39;s never being manipulated using raw byte pointers to memory, so endianness doesn&#39;t matter."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1473927645, "last_edit_date": 1473927645, "creation_date": 1473849397, "answer_id": 39488309, "question_id": 39488166, "link": "https://stackoverflow.com/questions/39488166/extract-upperbyte-and-lowerbyte-from-array/39488309#39488309", "title": "Extract UpperByte and LowerByte from Array", "body": "<p>It's mostly fine except <code>data</code> is too limited to hold a value from the array.</p>\n\n<p>But using explicit shifts and masks only is more typical:</p>\n\n<pre><code>void TestRoutine(unsigned char Number)\n{\n    const unsigned int data = TestArray[Number];\n    const unsigned char UpperByte = data &gt;&gt; 8; //upper byte\n    const unsigned char LowerByte = data &amp; 0x7; //lower byte, limited to three bits\n}\n</code></pre>\n\n<p>I edited back the requirement that the lower byte be kept at most 7.</p>\n"}], "owner": {"reputation": 253, "user_id": 6509764, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1268508016500512/picture?type=large", "display_name": "Embedded Geek", "link": "https://stackoverflow.com/users/6509764/embedded-geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473927645, "creation_date": 1473848967, "question_id": 39488166, "link": "https://stackoverflow.com/questions/39488166/extract-upperbyte-and-lowerbyte-from-array", "title": "Extract UpperByte and LowerByte from Array", "body": "<p>Is this code workable? I need to extract the upper byte and lower byte from array which consist of Hex codes. For example, in 0x0604 I need 6 in upper byte and 4 in lower byte and lower byte will not exceed by 7.</p>\n\n<pre><code>unsigned int TestArray[3] = {0x0604, 0x0605, 0x0606};\n\nvoid TestRoutine(unsigned char Number)\n{\n    unsigned char Data = TestArray[Number];\n    unsigned char UpperByte = (Data/256); //upper byte\n    unsigned char LowerByte = (Data%256 &amp; 0x07); //lower byte\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct", "malloc"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 6, "creation_date": 1473847501, "post_id": 39487705, "comment_id": 66293316, "body": "When you become a three star programmer, it&#39;s usually not a good thing... Also don&#39;t cast malloc()"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473847672, "post_id": 39487705, "comment_id": 66293445, "body": "<i>Will this work?</i> Did you try it...?"}, {"owner": {"reputation": 16916, "user_id": 1562138, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/qwj5I.png?s=128&g=1", "display_name": "fvgs", "link": "https://stackoverflow.com/users/1562138/fvgs"}, "edited": false, "score": 1, "creation_date": 1473848080, "post_id": 39487705, "comment_id": 66293668, "body": "This is not a 2D array. For it to be a 2D array, you should be allocating a single n x n block"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473848492, "post_id": 39487705, "comment_id": 66293882, "body": "Please indent your code."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1473849726, "post_id": 39487909, "comment_id": 66294565, "body": "In modern C programming, you would rather do <code>flightInfo (*matrix)[y] = malloc(sizeof(flightInfo[x][y]))</code>. &quot;Mangled arrays&quot; is a thing of 1990s style C programming."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1473849831, "post_id": 39487909, "comment_id": 66294618, "body": "@Lundin: Yes, but how to return such array from function? I tried with <code>flightInfo* (*allocateMatrix(int n))[n]</code> prototype, but this won&#39;t compile, as second <code>n</code> is unknown to the compiler. The declaration of array was <code>flightInfo *(*matrix)[n] = malloc(n * sizeof(*matrix));</code>."}, {"owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473850413, "post_id": 39487909, "comment_id": 66294931, "body": "Can you please explain why you used flightInfo**  and not flightInfo*** ,because I need to have pointers at each [i][j] in matrix that will eventually lead my to structs,and I don&#39;t completely understand the way you allocated the 2D array"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1473850556, "post_id": 39487909, "comment_id": 66295012, "body": "@GrzegorzSzpetkowski Typically by using some other pointer type, just as your example uses pointer-to-pointer, where in fact the returned type is no such thing. Cleaner solutions use structs to wrap the array inside."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473850559, "post_id": 39487909, "comment_id": 66295013, "body": "@Tohar: This is because I dropped one level of indirection. The method is to replace &quot;bogus 2D array&quot; with 1D array, that imitates 2D array. Both methods have pros and cons."}, {"owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473850958, "post_id": 39487909, "comment_id": 66295260, "body": "I&#39;m sorry,but we were taught that in order to allocate a 2D array you most use malloc 2 times;the first is for creating a 1D array of pointers and then &quot;extend&quot; each arr[i] to a full line containing whatever you need. How can I reach the same outcome using the method I was taught in class?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 2, "creation_date": 1473851768, "post_id": 39487909, "comment_id": 66295724, "body": "@Tohar You were taught nonsense, what you mention is simply bad practice. Please read <a href=\"http://stackoverflow.com/a/32050859/584518\">this</a> and <a href=\"http://stackoverflow.com/a/39363946/584518\">this</a>. Your source of learning is bad and needs to be replaced. Ask them if they even know a 2D array is, then ask them if they know what heap fragmentation is, then ask them if they know what data cache memory is."}, {"owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473861097, "post_id": 39487909, "comment_id": 66301929, "body": "First ,thank you very much for the help. I would like to know how to initialize each filed after the allocation.I wrote :\t matrix[Origin-1][Dest-1].d=Dest; (d is defined in the struct, origin=1,Dest=2) but I keep getting the Unhandled exception warning."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473861701, "post_id": 39487909, "comment_id": 66302402, "body": "@Tohar: It&#39;s impossible to tell without seeing the overall code. Please make another question, following the <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> guideline."}, {"owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473866024, "post_id": 39487909, "comment_id": 66305475, "body": "I&#39;ve edited the code above, what do you think?"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473866866, "post_id": 39487909, "comment_id": 66306053, "body": "@Tohar: The problem is that you initialized 2D array of <b>pointers</b> to struct. There is a difference between pointer and actual struct object, which also needs to be allocated. See the last code snippet in my answer. I had to call <code>malloc</code> in <code>main</code> to make a room for struct object itself."}, {"owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473873224, "post_id": 39487909, "comment_id": 66309749, "body": "Thank you very much that works great! Now what should I do if I want to allocate the struct in other function and initialize the struct too there,should  I call the function like this: fillArray(matrix) and initialize with -&gt; since it is a pointer to struct or should I use &#39;*&#39;  in the call and when I try to initialize?"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473876411, "post_id": 39487909, "comment_id": 66311418, "body": "@Tohar: Both forms are equivalent, but the <code>-&gt;</code> form is more common, as it helps with code readability (it is obvious at first sight, that you are accessing by pointer)."}, {"owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473877134, "post_id": 39487909, "comment_id": 66311778, "body": "I understand, but for some reason it is not working I call  the function fillMtrix(matrix,Origin,Dest,time,cost); and in it ,after allocating the struct ,like you said,I try to initialize the struct using -&gt;but nothing happenes"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473877488, "post_id": 39487909, "comment_id": 66311955, "body": "@Tohar: It may largely help you to run the code under debugger. This way you can run the code step by step and investigate the variables&#39; contents, and its changes. MS Visual Studio consists of such tool. On Linux, see <code>gdb</code>. Debugging is a required and essential skill in C development."}, {"owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473878211, "post_id": 39487909, "comment_id": 66312343, "body": "That is exactly what I did and nothing changes within the struct once I pass the   matrix[Origin-1][Dest-1]-&gt;o=Origin; line in that function, however when I write the same thing at void flightMatrix() it works great"}, {"owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473880011, "post_id": 39487909, "comment_id": 66313305, "body": "I added a picture for you to see"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "edited": false, "score": 0, "creation_date": 1473881108, "post_id": 39487909, "comment_id": 66313891, "body": "@Tohar: The <code>malloc</code> function can return <code>NULL</code> if it fails to allocate (so you are out of memory for some reason). You could check when this happens with <code>if (matrix[Origin-1][Dest-1] == NULL)</code> after <code>malloc</code> call."}], "tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 0, "last_activity_date": 1473853925, "last_edit_date": 1473853925, "creation_date": 1473848112, "answer_id": 39487909, "question_id": 39487705, "link": "https://stackoverflow.com/questions/39487705/how-to-allocate-a-2d-array-of-pointers-to-a-struct/39487909#39487909", "title": "How to allocate a 2D array of pointers to a struct", "body": "<p>Technically speaking, this won't create 2D array. The result will be array of pointers, where each one points to <em>different</em> array of pointers to a struct.</p>\n\n<p>The difference is that, memory will be <em>fragmented</em>, so every element will point to some memory location, instead of single continuous memory block.</p>\n\n<p>The common approach for this is to create flatten 2D array:</p>\n\n<pre><code>flightInfo** allocateMatrix(int n)\n{\n    flightInfo** matrix = malloc(n*n * sizeof(*matrix));\n    for (int i = 0; i &lt; n; i++) \n        for (int j = 0; j &lt; n; j++) \n            matrix[i*n + j] = NULL;\n    return matrix;\n}\n</code></pre>\n\n<p>If you are forced to use two indices, then you could place matrix as function argument:</p>\n\n<pre><code>void allocateMatrix(int n, flightInfo* (**matrix)[n])\n{\n    *matrix = malloc(n * sizeof(**matrix));\n    for (int i = 0; i &lt; n; ++i) \n        for (int j = 0; j &lt; n; ++j) \n            (*matrix)[i][j] = NULL;\n}\n</code></pre>\n\n<p>The second asterisk is required, because pointers are passed by value, otherwise you would end up with modified local copy of the pointer, that does nothing to <code>matrix</code> from <code>main</code> function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct flightInfo {\n    char airport[30];\n    int  altitude;\n} flightInfo;\n\nvoid allocateMatrix(int n, flightInfo* (**matrix)[n])\n{\n    *matrix = malloc(n * sizeof(**matrix));\n    for (int i = 0; i &lt; n; ++i) \n        for (int j = 0; j &lt; n; ++j) \n            (*matrix)[i][j] = NULL;\n}\n\nint main()\n{\n    int n = 10;\n    flightInfo* (*matrix)[n];\n\n    allocateMatrix(n, &amp;matrix);\n\n    matrix[0][0] = malloc(sizeof(flightInfo));\n    strcpy(matrix[0][0]-&gt;airport, \"Heathrow\");\n    matrix[0][0]-&gt;altitude = 10000;\n\n    printf(\"%s, %d\\n\", matrix[0][0]-&gt;airport, matrix[0][0]-&gt;altitude);\n}\n</code></pre>\n\n<p>The another way would be to encapsulate the array within a struct.</p>\n"}], "owner": {"reputation": 23, "user_id": 6822113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b471c625cedee0b5b7debf6249ecd5?s=128&d=identicon&r=PG&f=1", "display_name": "Tohar", "link": "https://stackoverflow.com/users/6822113/tohar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1515, "favorite_count": 0, "closed_date": 1473849583, "accepted_answer_id": 39487909, "answer_count": 1, "score": 0, "last_activity_date": 1473879987, "creation_date": 1473847437, "last_edit_date": 1473879987, "question_id": 39487705, "link": "https://stackoverflow.com/questions/39487705/how-to-allocate-a-2d-array-of-pointers-to-a-struct", "closed_reason": "Duplicate", "title": "How to allocate a 2D array of pointers to a struct", "body": "<p>This is were I got so far,but I don't know if it's right.\nThis function receives the dimensions of the 2D array (nxn),and allocates it.\nflightInfo is the name of the struct.\nWill this work?\nthanks in advanced</p>\n\n<p>after allocating the array(ignore the method ,since we are not allowed to use the method you proposed) I would like to initialize the struct (I built a function to do it but it didn't work),I tried to do it right after the allocation and kept getting the\" Unhandled exception\" warning, does it has to do\nwith the syntax, am I forgetting a '*'?</p>\n\n<pre><code>void flightMatrix()\n{\n FILE * fpf;\n int checkScan,Origin,Dest;\n float  time,cost;\n char flightName[3];\n flightInfo *** matrix;\n\n\n if(!(fpf=fopen(\"flights.txt\",\"r\")))exit(1);\n\n  while((checkScan=fscanf(fpf,\"%*10c%3d%3d%3c%5f%7f%*\",&amp;Origin,&amp;Dest,flightName,&amp;time,&amp;cost))!=EOF)\n{\n    matrix=allocateMatrix(Dest);\n   matrix[Origin-1][Dest-1]-&gt;o=Origin;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>flightInfo*** allocateMatrix(int n)\n\n{   int i,j;\n    flightInfo***  matrix;\n\nmatrix=(flightInfo***)malloc(sizeof(flightInfo **)*n);\n    for(i=0;i&lt;n;i++)\nmatrix[i]=(flightInfo **)malloc(sizeof(flightInfo*)*n);\n\n for (int i = 0; i &lt; n; ++i) \n {  \n    for (int j = 0; j &lt; n; ++j) \n        matrix[i][j] = NULL;\n }\n\n    return matrix;\n}\n</code></pre>\n\n<p>[<a href=\"http://i.stack.imgur.com/MFC7V.png]\" rel=\"nofollow\">http://i.stack.imgur.com/MFC7V.png]</a>\nthis is what happens when I try to initialize  </p>\n"}, {"tags": ["c++", "c", "c-preprocessor"], "comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 3, "creation_date": 1473847290, "post_id": 39487631, "comment_id": 66293208, "body": "look at predefined  <code>__cplusplus</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 5, "creation_date": 1473847327, "post_id": 39487631, "comment_id": 66293218, "body": "<a href=\"https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html#Standard-Predefined-Macros\" rel=\"nofollow noreferrer\">__cplusplus</a>"}], "answers": [{"tags": [], "owner": {"reputation": 218, "user_id": 5624940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a64af18c50dc31749efbe06a5e50648?s=128&d=identicon&r=PG&f=1", "display_name": "PhantomWhiskers", "link": "https://stackoverflow.com/users/5624940/phantomwhiskers"}, "is_accepted": true, "score": 6, "last_activity_date": 1473847921, "last_edit_date": 1473847921, "creation_date": 1473847575, "answer_id": 39487755, "question_id": 39487631, "link": "https://stackoverflow.com/questions/39487631/universal-preprocessor-define-for-c-or-c/39487755#39487755", "title": "universal preprocessor define for C or C++?", "body": "<p>The definition is <code>__cplusplus</code>.</p>\n\n<pre><code>#ifdef __cplusplus \n// treated as C++ code\n#else\n// treated as C code\n#endif // __cplusplus\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 6795571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd5fd2ab516bdc9cbbbc66cac07edfff?s=128&d=identicon&r=PG&f=1", "display_name": "user6795571", "link": "https://stackoverflow.com/users/6795571/user6795571"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 39487755, "answer_count": 1, "score": 2, "last_activity_date": 1473847921, "creation_date": 1473847200, "question_id": 39487631, "link": "https://stackoverflow.com/questions/39487631/universal-preprocessor-define-for-c-or-c", "title": "universal preprocessor define for C or C++?", "body": "<p>my code can be compiled with C or C++ compilers.\nI'd like to know which one is doing the compilation</p>\n\n<p>is there preprocessor define to tell me this ?</p>\n"}, {"tags": ["c", "arrays", "pointers", "assembly", "char"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1473846694, "post_id": 39487355, "comment_id": 66292822, "body": "Strictly speaking the, <code>ptr</code> of  *ptr = &quot;Hello, World!&quot;; is a <code>const char*</code> type. Could that be something to do with it?"}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1473846994, "post_id": 39487355, "comment_id": 66293032, "body": "@PaulR GCC compiler give correct output."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1473847021, "post_id": 39487355, "comment_id": 66293052, "body": "Please give us enough code to replicate the issue."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 1, "creation_date": 1473847071, "post_id": 39487355, "comment_id": 66293085, "body": "@M.SChaudhari: of course it does, but how does that help ? Did you read the whole question ?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1473847101, "post_id": 39487355, "comment_id": 66293101, "body": "It seems like you didn&#39;t make sure that <code>bx</code> is zeroed out. Could you try to ensure that?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1473847105, "post_id": 39487355, "comment_id": 66293103, "body": "@Downvoter, in what way can this question be improved?"}, {"owner": {"reputation": 95, "user_id": 5050673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi9I2DP-b5Y/AAAAAAAAAAI/AAAAAAAAABI/y-UavkD_cVY/photo.jpg?sz=128", "display_name": "B. Kaan", "link": "https://stackoverflow.com/users/5050673/b-kaan"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1473847280, "post_id": 39487355, "comment_id": 66293201, "body": "@FUZxxl BX is already zeroed out."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1473847357, "post_id": 39487355, "comment_id": 66293236, "body": "@B.Kaan How do you ensure that? The caller could fill BX with any value, if it is nonzero, your output goes to an invisible page."}, {"owner": {"reputation": 95, "user_id": 5050673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi9I2DP-b5Y/AAAAAAAAAAI/AAAAAAAAABI/y-UavkD_cVY/photo.jpg?sz=128", "display_name": "B. Kaan", "link": "https://stackoverflow.com/users/5050673/b-kaan"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1473847947, "post_id": 39487355, "comment_id": 66293596, "body": "@FUZxxl Oh, you are right. But it&#39;s not the problem. Even BX zero nothing changes also when I use char arrays in any function parameters (for example: strlen) they are not working.."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 3, "creation_date": 1473851193, "post_id": 39487355, "comment_id": 66295413, "body": "Could it be that <code>ds</code> and <code>ss</code> points to two different segments? char arrays are <a href=\"https://godbolt.org/g/z6nbKK\" rel=\"nofollow noreferrer\">created on the stack</a>"}, {"owner": {"reputation": 95, "user_id": 5050673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi9I2DP-b5Y/AAAAAAAAAAI/AAAAAAAAABI/y-UavkD_cVY/photo.jpg?sz=128", "display_name": "B. Kaan", "link": "https://stackoverflow.com/users/5050673/b-kaan"}, "reply_to_user": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1473852130, "post_id": 39487355, "comment_id": 66295937, "body": "@MargaretBloom Wow! It seems thats the problem.. While debugging the code it does &quot;mov ax, ds:dx&quot; but it should be &quot;mov ax, ss:dx&quot;. Because when I hex dumped  ss:dx it gives me the correct array. Thanks a lot. But I have a another question, sir. I want to use stack 64 KB in size. But while ds and ss points to same segments I&#39;ve no 64 KB stack size. So that in my case they can&#39;t be in the same segment. What should I do?"}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 1, "creation_date": 1473852716, "post_id": 39487355, "comment_id": 66296289, "body": "@B.Kaan GCC is not really suitable for 16 bit code IIRC exactly because it doesn&#39;t handle far pointers.  Maybe someone more expert can give you better pieces of advice. You <i>could</i> try setting <code>ss</code> into <a href=\"https://stackoverflow.com/documentation/x86/3679/real-vs-protected-modes/19574/unreal-mode#t=201609141127062051752\">unreal mode</a> and giving <code>esp</code> a higher value, but that has its drawbacks."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473864284, "post_id": 39487355, "comment_id": 66304224, "body": "If you want to write 16-bit C code I recommend OpenWatcom (and the JLOC linker) or Bruce&#39;s C Compiler. Someone had a very <a href=\"http://stackoverflow.com/questions/39482526/gcc-baremetal-inline-assembly-si-register-not-playing-nicely-with-pointers#comment66284182_39482526\">similar SO question</a> . If you want my advice it is in the comments. If you want an example of pseduo 16-bit code GCC code running as a bootloader that prints &quot;Hello World&quot; you could look at  a hackish GCC (I don&#39;t recommend it) example I wrote here:  <a href=\"http://www.capp-sysware.com/misc/ircasm/gccboot/\" rel=\"nofollow noreferrer\">capp-sysware.com/misc/ircasm/gccboot</a>"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1473864323, "post_id": 39487355, "comment_id": 66304254, "body": "Open Watcom is ideal because it does allow its own form of inline assembler, produces 16-bit code, and understands real mode segments, far pointers etc."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473864441, "post_id": 39487355, "comment_id": 66304347, "body": "One other word of advice. If you use GCC&#39;s hackish pseudo 16-bit code it is best to have all your code running and loaded somewhere in the first 64kb of memory and all the segments set to 0."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473865912, "post_id": 39487355, "comment_id": 66305391, "body": "I just read through that article on Code Project. There is some bad advice in that article, and assumptions that will lead to problems like the one you experienced here with stack vs data segment references. The code in my example (link) above deals with those pesky problems."}, {"owner": {"reputation": 95, "user_id": 5050673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi9I2DP-b5Y/AAAAAAAAAAI/AAAAAAAAABI/y-UavkD_cVY/photo.jpg?sz=128", "display_name": "B. Kaan", "link": "https://stackoverflow.com/users/5050673/b-kaan"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473884895, "post_id": 39487355, "comment_id": 66315765, "body": "@Michael Petch Thank you very much.. I&#39;ll look at Open Watcom. I tried BCC but it uses K&amp;R syntax so its a little annoying to me."}], "answers": [{"comments": [{"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1473848850, "post_id": 39487931, "comment_id": 66294087, "body": "Good point re: gcc vs freestanding 386. For what it&#39;s worth, Boch&#39;s is happy to show you the disassembly in either format, all you have to do is ask! See here: <a href=\"http://bochs.sourceforge.net/doc/docbook/user/internal-debugger.html#AEN4067\" rel=\"nofollow noreferrer\">bochs.sourceforge.net/doc/docbook/user/&hellip;</a> Boch&#39;s debugger has saved my bacon <i>lots</i> of times."}], "tags": [], "owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "is_accepted": true, "score": 2, "last_activity_date": 1473850821, "last_edit_date": 1473850821, "creation_date": 1473848228, "answer_id": 39487931, "question_id": 39487355, "link": "https://stackoverflow.com/questions/39487355/how-can-i-use-c-char-arrays-under-real-mode/39487931#39487931", "title": "How can I use C char arrays under real mode", "body": "<p>You have to look at disassembler output for the resulting binary file. It might be that GCC targeting freestanding 386 did something unexpected with segments or whatever.</p>\n\n<p>If that doesn't help much, you still have an option of using e.g. Bochs to run your OS there and use Bochs' integrated debugger to find out what actually happens when the code runs.</p>\n"}], "owner": {"reputation": 95, "user_id": 5050673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fi9I2DP-b5Y/AAAAAAAAAAI/AAAAAAAAABI/y-UavkD_cVY/photo.jpg?sz=128", "display_name": "B. Kaan", "link": "https://stackoverflow.com/users/5050673/b-kaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 1, "accepted_answer_id": 39487931, "answer_count": 1, "score": 3, "last_activity_date": 1473850821, "creation_date": 1473846419, "last_edit_date": 1473847703, "question_id": 39487355, "link": "https://stackoverflow.com/questions/39487355/how-can-i-use-c-char-arrays-under-real-mode", "title": "How can I use C char arrays under real mode", "body": "<p>I'm developing a bare-bone operating system in real mode. I have written my bootloader under assembly. But I want to write my kernel with C language. So far everything was nice but I notice that when I use char arrays (not pointers) for function parameters, they are not working. For example when I use:</p>\n\n<pre><code>puts(\"Hello, World!\");\n</code></pre>\n\n<p>or,</p>\n\n<pre><code>char *ptr = \"Hello, World!\";\nputs(ptr);\n</code></pre>\n\n<p>these are working. But when I do this:</p>\n\n<pre><code>char s[]=\"Hello, World!\";\nputs(s);\n</code></pre>\n\n<p>It's give me nothing. I want to know, why this happens and how can I use char arrays in this way?\nAlso this is my \"puts\" function:</p>\n\n<pre><code>void puts(char* s){\nfor(; *s!=0; s++)\n    asm volatile (\"int $0x10\": : \"a\"(0x0e00 | *s));\n}\n</code></pre>\n\n<p>EDIT:\nI'm compiling the using GCC with:</p>\n\n<pre><code>gcc -std=gnu99 -Os -nostdlib -m16 -march=i386 -ffreestanding -o kernel.bin -Wl,--nmagic,--script=raw_image.ld kernel.c\n</code></pre>\n\n<p>And this is the linker script:</p>\n\n<pre><code>OUTPUT_FORMAT(binary);\nENTRY(main);\nSECTIONS\n{\n. = 0x0000;\n.text :\n{\n    *(.text);\n}\n.data :\n{\n    *(.data);\n    *(.bss);\n    *(.rodata);\n}\n}\n</code></pre>\n\n<p>Also these are the web sites I used:</p>\n\n<p><a href=\"http://nullprogram.com/blog/2014/12/09/\" rel=\"nofollow\">Building DOS COM files using GCC</a></p>\n\n<p><a href=\"http://www.codeproject.com/Articles/664165/Writing-a-boot-loader-in-Assembly-and-C-Part\" rel=\"nofollow\">Writing Bootloader in Assembly and C</a>  </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1473846355, "post_id": 39487281, "comment_id": 66292595, "body": "Please show your code instead of discribing it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1473846501, "post_id": 39487281, "comment_id": 66292673, "body": "This should work, please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1473846577, "post_id": 39487281, "comment_id": 66292730, "body": "You do remember to declare a prototype of the <code>print_list</code> before you call it? Besides the MCVE, can you please include the <i>complete</i> error output, in full and unedited, and with any information notes."}, {"owner": {"reputation": 135, "user_id": 6826249, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/163a506ee66bf0563f79f86734cb8513?s=128&d=identicon&r=PG&f=1", "display_name": "gusgxrha", "link": "https://stackoverflow.com/users/6826249/gusgxrha"}, "edited": false, "score": 0, "creation_date": 1473846637, "post_id": 39487281, "comment_id": 66292772, "body": "Sorry guys, added everything."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 3, "creation_date": 1473846741, "post_id": 39487281, "comment_id": 66292851, "body": "Move <code>print_list</code> above <code>main</code> or add a prototype. Pay attention to compiler warnings, or even better, use a flag to turn warnings into errors. This will help you a lot."}, {"owner": {"reputation": 135, "user_id": 6826249, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/163a506ee66bf0563f79f86734cb8513?s=128&d=identicon&r=PG&f=1", "display_name": "gusgxrha", "link": "https://stackoverflow.com/users/6826249/gusgxrha"}, "edited": false, "score": 0, "creation_date": 1473846777, "post_id": 39487281, "comment_id": 66292879, "body": "Oh wow, I thought about that first but brushed it off... for whatever reason. Thanks for the fast replies!"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1473847740, "post_id": 39487281, "comment_id": 66293487, "body": "Also, not to rain on the source of that code, but it really should be taking a <code>const node_t *</code> since printing a list isn&#39;t going to be changing it."}, {"owner": {"reputation": 135, "user_id": 6826249, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/163a506ee66bf0563f79f86734cb8513?s=128&d=identicon&r=PG&f=1", "display_name": "gusgxrha", "link": "https://stackoverflow.com/users/6826249/gusgxrha"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1473847932, "post_id": 39487281, "comment_id": 66293590, "body": "Thanks for the feedback @unwind, I will try to keep things like that in mind. Already changed my code fitting to your recommendation."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1473855935, "post_id": 39487281, "comment_id": 66298332, "body": "There are no &quot;methods&quot; in C. There are &quot;functions&quot;. There&#39;s a difference."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1473846925, "last_edit_date": 1473846925, "creation_date": 1473846748, "answer_id": 39487463, "question_id": 39487281, "link": "https://stackoverflow.com/questions/39487281/printing-linked-lists-in-c/39487463#39487463", "title": "Printing linked lists in C", "body": "<p>You didn't declare a prototype:</p>\n\n<pre><code>...\ntypedef struct node {\n  int val;\n  struct node * next;\n} node_t;\n\nvoid print_list(node_t * head);  // &lt;&lt;&lt; add this\n\nint main() {\n...\n</code></pre>\n\n<p>In C you can use functions even without them being declared, the compiler then implicitly assumes that the function has any number of arguments and that it returns an int. This is a leftover from very old C standards. Modern compilers usually issue warnings if you do this.</p>\n\n<p>What happens in your case:</p>\n\n<ul>\n<li>the compilers stumbles upon <code>print_list(head);</code> assuming that it return <code>int</code></li>\n<li>then it stumbles upon <code>void print_list(node_t * head) {</code> where suddenly the return type is nomore <code>int</code> but <code>void</code> and hence the compilation error.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1473846766, "creation_date": 1473846766, "answer_id": 39487470, "question_id": 39487281, "link": "https://stackoverflow.com/questions/39487281/printing-linked-lists-in-c/39487470#39487470", "title": "Printing linked lists in C", "body": "<p>When you call <code>print_list</code> the compiler doesn't know what it is. You must declare everything you use, before you use it.</p>\n\n<p>So something like</p>\n\n<pre><code>// Declare the function prototype, so compiler knows about it\nvoid print_list(node_t * head);\n\nint main(void)\n{\n    node_t * head;\n\n    // Create and populate list...\n\n    print_list(head);\n\n    return 0;\n}\n\n// Define the function implementation\nvoid print_list(node_t * head)\n{\n    // The implementation of the function...\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 6826249, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/163a506ee66bf0563f79f86734cb8513?s=128&d=identicon&r=PG&f=1", "display_name": "gusgxrha", "link": "https://stackoverflow.com/users/6826249/gusgxrha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 39487470, "answer_count": 2, "score": 2, "last_activity_date": 1473846925, "creation_date": 1473846167, "last_edit_date": 1473846625, "question_id": 39487281, "link": "https://stackoverflow.com/questions/39487281/printing-linked-lists-in-c", "title": "Printing linked lists in C", "body": "<p>I am currently in the process of learning C and am now studying linked lists. I think I wrapped my head around the most basic concepts. Now I would like to print such a list. I implemented my own method to print the contents of the list but they were semi-efficient. I found learn-c.org and liked their method of doing it a lot but I seem unable to make use of it.</p>\n\n<p>Their method is the following:</p>\n\n<pre><code>void print_list(node_t * head) {\n    node_t * current = head;\n\n    while (current != NULL) {\n        printf(\"%d\\n\", current-&gt;val);\n        current = current-&gt;next;\n    }\n}\n</code></pre>\n\n<p>I created a node named \"head\" </p>\n\n<pre><code>node_t * head = malloc(sizeof(node_t));\n</code></pre>\n\n<p>and tried calling the method with \"head\" as an argument which is - apparently - wrong. Means: <code>print_list(head)</code> shows me an \"conflicting types\" error.</p>\n\n<p>Anyone got any input on that? I tried around already and from my understanding the method expects a pointer to a node_t structure.</p>\n\n<p>Edit: Full code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\ntypedef struct node {\n    int val;\n    struct node * next;\n} node_t;\n\nint main(){\nnode_t * head = malloc(sizeof(node_t));\nif (head == NULL) {\n    return 1;\n}\n\nhead-&gt;val = 1;\nhead-&gt;next = NULL;\n\nprint_list(head);\n\n}\n\nvoid print_list(node_t * head) {\n    node_t * current = head;\n\n    while (current != NULL) {\n        printf(\"%d\\n\", current-&gt;val);\n        current = current-&gt;next;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "cmake"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473846418, "post_id": 39487193, "comment_id": 66292627, "body": "Please share the errors you get."}, {"owner": {"reputation": 21, "user_id": 6830049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ff4cd9799a40cf0e6694e7aae0359e?s=128&d=identicon&r=PG&f=1", "display_name": "jckaos", "link": "https://stackoverflow.com/users/6830049/jckaos"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473847224, "post_id": 39487193, "comment_id": 66293169, "body": "Sorry, didn&#39;t think about that. Added it to the original post so that more people will see it."}, {"owner": {"reputation": 11132, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "edited": false, "score": 0, "creation_date": 1473847335, "post_id": 39487193, "comment_id": 66293224, "body": "There is no point in mentioning <code>cmake</code> at all. Simply copy/paste the error reported by gcc in the shell after you typed: <code>make VERBOSE=1</code>"}, {"owner": {"reputation": 21, "user_id": 6830049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ff4cd9799a40cf0e6694e7aae0359e?s=128&d=identicon&r=PG&f=1", "display_name": "jckaos", "link": "https://stackoverflow.com/users/6830049/jckaos"}, "edited": false, "score": 0, "creation_date": 1473854692, "post_id": 39487193, "comment_id": 66297514, "body": "That solved part of the problem. I tried it with the demo project, which is functional without running it with c99. Still got errors of functions not being declared."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1473855040, "post_id": 39487193, "comment_id": 66297737, "body": "Produce a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473921509, "post_id": 39487193, "comment_id": 66326021, "body": "Use <code>gcc -std=gnu11</code> (or <code>gcc -std=gnu99</code> if you must), or try <code>-D_XOPEN_SOURCE=700</code> (request POSIX 2008/2013 support, more or less).  Note that the cross-referenced question mentions <code>_XOPEN_SOURCE</code> and <code>700</code> \u2014 the answer dates back to 2010, when support for POSIX 2008 was not as widespread as it is now."}, {"owner": {"reputation": 21, "user_id": 6830049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ff4cd9799a40cf0e6694e7aae0359e?s=128&d=identicon&r=PG&f=1", "display_name": "jckaos", "link": "https://stackoverflow.com/users/6830049/jckaos"}, "edited": false, "score": 0, "creation_date": 1473922607, "post_id": 39487193, "comment_id": 66326539, "body": "Thanks, I stated in my edit#4 that gnu99 did work. Working on a solution to generate a Eclipse project with cmake now, but timespec is missing, which is no problem if I use the generator for UNIX Makefiles. I read somewhere that the project generator for eclipse has quite a lot of bugs, but there is supposed to be a manual workaround."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6830049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ff4cd9799a40cf0e6694e7aae0359e?s=128&d=identicon&r=PG&f=1", "display_name": "jckaos", "link": "https://stackoverflow.com/users/6830049/jckaos"}, "edited": false, "score": 0, "creation_date": 1473921046, "post_id": 39496115, "comment_id": 66325828, "body": "Thanks for your suggestion.   I solved that by using gnu99 instead of c99. Everything works fine now , when I generate the UNIX Makefiles with cmake. I&#39;m still getting the error that timespec can&#39;t be resolved, when I try to generate a Eclipse project, but that&#39;s a different story I guess."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": false, "score": 0, "last_activity_date": 1473872943, "creation_date": 1473872943, "answer_id": 39496115, "question_id": 39487193, "link": "https://stackoverflow.com/questions/39487193/errors-using-unix-time-h-after-changing-c-standard-to-c99/39496115#39496115", "title": "Errors using UNIX time.h after changing C standard to c99", "body": "<p>As <a href=\"http://man7.org/linux/man-pages/man3/timeradd.3.html\" rel=\"nofollow\">man timeradd</a> says, definition of function <code>timeradd</code> is available only when <code>_DEFAULT_SOURCE</code> feature-test-macro is defined:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Feature Test Macro Requirements for glibc (see feature_test_macros(7)):\n\n   All functions shown above:\n       Since glibc 2.19:\n           _DEFAULT_SOURCE\n       Glibc 2.19 and earlier:\n           _BSD_SOURCE\n</code></pre>\n\n<p>Description for <code>_DEFAULT_SOURCE</code> macro in <a href=\"http://man7.org/linux/man-pages/man7/feature_test_macros.7.html\" rel=\"nofollow\">man feature_test_macros</a> says:</p>\n\n<blockquote>\n  <p>This macro can be defined to ensure that the \"default\" definitions\n  are provided even when the defaults would otherwise be disabled,\n  as happens when individual macros are explicitly defined, or the\n  compiler is invoked in one of its \"standard\" modes (e.g.,\n  cc -std=c99).</p>\n</blockquote>\n\n<p>So you need to explicitely define <code>_DEFAULT_SOURCE</code> macro for make function <code>timeradd</code> being available in <code>-std=c99</code> mode:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define _DEFAULT_SOURCE\n#include &lt;sys/time.h&gt;\n...\ntimeradd(...);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6830049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ff4cd9799a40cf0e6694e7aae0359e?s=128&d=identicon&r=PG&f=1", "display_name": "jckaos", "link": "https://stackoverflow.com/users/6830049/jckaos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "closed_date": 1473921523, "answer_count": 1, "score": 0, "last_activity_date": 1473921256, "creation_date": 1473845949, "last_edit_date": 1473921256, "question_id": 39487193, "link": "https://stackoverflow.com/questions/39487193/errors-using-unix-time-h-after-changing-c-standard-to-c99", "closed_reason": "Duplicate", "title": "Errors using UNIX time.h after changing C standard to c99", "body": "<p>Hello and thanks in advance for all the problems this platform has solved for me in the past. Unfortunately I've found a problem, which I couldn't solve.  </p>\n\n<p>I'm pretty new to cmake and expanded a demo project with a new executable and some library files. I have no problems compiling the demo project. However, my new project needs to be compiled with c99 standard and suddenly, I get errors implementing the timespec struct from time.h. This is also used in the demo project, so I compiled the demo again with c99 and I've got the same problem.  </p>\n\n<p>Running this on Ubuntu, using the gcc compiler and cmake version 2.8.7  </p>\n\n<p>Hope I've got all necessary details covered. If not, please let me know and thanks in advance for your efforts!  </p>\n\n<p>Best regards</p>\n\n<p>Edit#1: Error messages I get:<br>\n- >CLOCK_MONOTONIC&lt; not declared (first use in this function)<br>\n- field 'tv_nsec' could not be resolved<br>\n- field 'tv_sec' could not be resolved<br>\n- Symbol 'CLOCK_MONOTONIC' could not be resolved<br>\n- Warnings for implicit declaration of functions 'clock_gettime', 'nanosleep', 'timeradd', 'timercmp'  </p>\n\n<p>Edit#2: error output with make VERBOSE=1</p>\n\n<pre><code>/usr/bin/gcc  -D_XOPEN_SOURCE=600 -I/home/localadmin/Eclipse_Workspace/SOEM_master/soem -I/home/localadmin/Eclipse_Workspace/SOEM_master/osal -I/home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux -I/home/localadmin/Eclipse_Workspace/SOEM_master/oshw/linux    -std=c99 -o CMakeFiles/soem.dir/osal/linux/osal.c.o   -c /home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux/osal.c  \n/home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux/osal.c:60:50: Warning: \u00bbstruct timezone\u00ab declared in parameter list [activated by default]  \n/home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux/osal.c:60:50: Warning: range of validity includes only this definition or declaration [activated by default]  \n/home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux/osal.c: In function \u00bbosal_timer_start\u00ab:  \n/home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux/osal.c:105:4: Warning: Implicit function \u00bbtimeradd\u00ab [-Wimplicit-function-declaration]  \n/home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux/osal.c: In function \u00bbosal_timer_is_expired\u00ab:  \n/home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux/osal.c:120:4: Warning: Implicit declaration of function \u00bbtimercmp\u00ab [-Wimplicit-function-declaration]  \n/home/localadmin/Eclipse_Workspace/SOEM_master/osal/linux/osal.c:120:61: Error: expected expression before \u00bb&lt;\u00ab token  \nmake[2]: *** [CMakeFiles/soem.dir/osal/linux/osal.c.o] Error 1  \nmake[2]: Leaving directory '/home/localadmin/Eclipse_Workspace/SOEM_master/build'  \nmake[1]: *** [CMakeFiles/soem.dir/all] Error 2  \nmake[1]: Leaving directory '/home/localadmin/Eclipse_Workspace/SOEM_master/build'  \nmake: *** [all] Error 2\n</code></pre>\n\n<p>This was the output after definining _XOPEN_SOURCE=600, what was suggested in the other thread that got posted below. So the timespec struct is available, but the functions aren't.  </p>\n\n<p>Edit #3: minimal, complete and verifiable example  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;sys/time.h&gt;\nint main()\n{\nstruct timespec test;\ntest.tv_sec = 0;\nstruct timeval start_time;\nstruct timeval timeout;\nstruct timeval stop_time;\ntimeradd(&amp;start_time, &amp;timeout, &amp;stop_time);\nreturn 0;\n}  \n</code></pre>\n\n<p>Compiles without problems. If I use gcc mcv_example.c -std=c99 I get:  </p>\n\n<pre><code>mcv_example.c: In function 'main':\nmcv_example.c:24:18: error: storage size of 'test' isn't known\nmcv_example.c:29:2: warning: implicit declaration of function 'timeradd' [-Wimplicit-function-declaration]\n</code></pre>\n\n<p>Edit#4: The solution for me was using gnu99 instead of c99. Now I can create the UNIX Makefiles with cmake, but still can't create a working Eclipse project.<br>\nSince that is a different problem, I guess this case is closed and thank you all for your help and efforts!</p>\n"}, {"tags": ["c", "linux", "gcc", "arm"], "comments": [{"owner": {"reputation": 1195, "user_id": 1865106, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15dc57110dac17f6bae8187c8a405b11?s=128&d=identicon&r=PG&f=1", "display_name": "SSC", "link": "https://stackoverflow.com/users/1865106/ssc"}, "edited": false, "score": 1, "creation_date": 1473846189, "post_id": 39487143, "comment_id": 66292483, "body": "You need to tell the linker where to find your usb-1.0 library as it is install in /opt not the usual system default location.  Try to add <code>-L{PATH to your usb library}</code> when you try to compile."}, {"owner": {"reputation": 11, "user_id": 6830137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1444fc9c5a0695cdd558ac9732206348?s=128&d=identicon&r=PG&f=1", "display_name": "thegreger", "link": "https://stackoverflow.com/users/6830137/thegreger"}, "reply_to_user": {"reputation": 1195, "user_id": 1865106, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15dc57110dac17f6bae8187c8a405b11?s=128&d=identicon&r=PG&f=1", "display_name": "SSC", "link": "https://stackoverflow.com/users/1865106/ssc"}, "edited": false, "score": 0, "creation_date": 1473846581, "post_id": 39487143, "comment_id": 66292737, "body": "@SSC: This worked perfectly! For clarity (if another user stumbles upon this), I added &quot;-L /opt/lib/&quot; to my compile command, and now it builds and runs just fine!"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1473945400, "post_id": 39487143, "comment_id": 66339935, "body": "usually you install the library to the sysroot of the toolchain, so when the toolchian look for all libraries at SYSROOT, it can find it."}], "owner": {"reputation": 11, "user_id": 6830137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1444fc9c5a0695cdd558ac9732206348?s=128&d=identicon&r=PG&f=1", "display_name": "thegreger", "link": "https://stackoverflow.com/users/6830137/thegreger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 729, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473845805, "creation_date": 1473845805, "question_id": 39487143, "link": "https://stackoverflow.com/questions/39487143/cross-compiled-library-not-found-by-toolchain", "title": "Cross-compiled library not found by toolchain", "body": "<p>I'm new to developing for embedded systems,  but I have installed arm-linux-gnueabi-gcc via the Linux Mint package manager and managed to build a few programs successfully.</p>\n\n<p>I'm currently struggling with getting a program to compile using libusb. I've done the following:</p>\n\n<ul>\n<li><p>Downloaded and unpacked the libusb 1.0.20 sources from <a href=\"https://sourceforge.net/projects/libusb/\" rel=\"nofollow\">https://sourceforge.net/projects/libusb/</a>.</p></li>\n<li><p>Compiled and installed them using the following commands:</p></li>\n</ul>\n\n<p>~/Downloads/libusb-1.0.20 $ ./configure --host=arm-linux-gnueabi --prefix=/opt/ --disable-udev</p>\n\n<p>~/Downloads/libusb-1.0.20 $ sudo make</p>\n\n<p>~/Downloads/libusb-1.0.20 $ sudo make install</p>\n\n<p>(The reason for sudo-ing the make commands was because I encountered permission problems related to removing old files.)</p>\n\n<ul>\n<li><p>Copied a small sample file from somewhere on the internet:</p>\n\n<pre><code>#include &lt;libusb-1.0/libusb.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n  int i=0;\n  libusb_context **c = NULL;\n  i = libusb_init(c);\n  printf(\"\\nusing libusb.h\\n\");\n  return 0;\n}\n</code></pre></li>\n<li><p>Tried to build it and run it with gcc:</p></li>\n</ul>\n\n<p>~/Desktop/libtest $ gcc libtest1.c -o libtest1 -lusb-1.0</p>\n\n<p>~/Desktop/libtest $ ./libtest1 </p>\n\n<p>using libusb.h</p>\n\n<ul>\n<li>However, when I try to do the same with arm-linux-gnueabi-gcc, it can't find the library:</li>\n</ul>\n\n<p>~/Desktop/libtest $ arm-linux-gnueabi-gcc libtest1.c -o libtest1 -lusb-1.0</p>\n\n<p>/usr/lib/gcc-cross/arm-linux-gnueabi/4.7/../../../../arm-linux-gnueabi/bin/ld: cannot find -lusb-1.0\ncollect2: error: ld returned 1 exit status</p>\n\n<p>Where did I go wrong? Is there something else I need to do in order to use the library? Did I fail at compiling the library for the arm compiler? I didn't include the compiler output here since it's quite long, but there are no obvious errors. This might be a very stupid question, but I'm completely clueless.</p>\n"}, {"tags": ["c#", "c", "memory"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 6, "creation_date": 1473845691, "post_id": 39487003, "comment_id": 66292198, "body": "You cannot simply read (or write) some memory location from another program on any modern operating system. What are you <i>actually</i> trying to do ?"}, {"owner": {"reputation": 235601, "user_id": 60761, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bf43bae0431d8f4a062234b5e3a0cb9?s=128&d=identicon&r=PG&f=1", "display_name": "Henk Holterman", "link": "https://stackoverflow.com/users/60761/henk-holterman"}, "edited": false, "score": 3, "creation_date": 1473845859, "post_id": 39487003, "comment_id": 66292297, "body": "You do realize that each program has its own virtual address space and that even if you got this to work you would be reading 2 different physical locations?"}, {"owner": {"reputation": 117, "user_id": 6830156, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7bb9fbf874fbda165614b34678174c?s=128&d=identicon&r=PG&f=1", "display_name": "eoweww", "link": "https://stackoverflow.com/users/6830156/eoweww"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473845951, "post_id": 39487003, "comment_id": 66292349, "body": "@MichaelWalz I just want to make program which also written c# and c.I want to take value of variable of c from memory given by its pointer address."}, {"owner": {"reputation": 117, "user_id": 6830156, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7bb9fbf874fbda165614b34678174c?s=128&d=identicon&r=PG&f=1", "display_name": "eoweww", "link": "https://stackoverflow.com/users/6830156/eoweww"}, "reply_to_user": {"reputation": 235601, "user_id": 60761, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bf43bae0431d8f4a062234b5e3a0cb9?s=128&d=identicon&r=PG&f=1", "display_name": "Henk Holterman", "link": "https://stackoverflow.com/users/60761/henk-holterman"}, "edited": false, "score": 0, "creation_date": 1473846025, "post_id": 39487003, "comment_id": 66292391, "body": "@HenkHolterman Ok.Is there a way to read memory of another program by given its pointer?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1473846082, "post_id": 39487003, "comment_id": 66292429, "body": "@eoweww you probably need <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680553(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this</a> (Windows specific)."}], "owner": {"reputation": 117, "user_id": 6830156, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7bb9fbf874fbda165614b34678174c?s=128&d=identicon&r=PG&f=1", "display_name": "eoweww", "link": "https://stackoverflow.com/users/6830156/eoweww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473845442, "creation_date": 1473845442, "question_id": 39487003, "link": "https://stackoverflow.com/questions/39487003/c-read-memory-with-pointer", "title": "c# read memory with pointer", "body": "<p>I want to read memory giving its pointer as shown in the code:</p>\n\n<pre><code>unsafe\n   {\n      int* p1 = (int*)(0x0022fe44);\n      Console.WriteLine(*p1);              \n   }\n</code></pre>\n\n<p>The pointer value given in the code is taken from another program which is written in C.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    int *ptam, tam = 33;\n\n    printf(\"size of int = %d\",sizeof(int)); //=&gt;4 byte\n    while(1==1)\n    {\n       ptam = &amp;tam;    \n\n       printf(\"&amp;tam  = %p\\n\",&amp;tam);\n       printf(\"ptam  = %p\\n\",ptam);\n       printf(\"\\n\");\n\n       printf(\"tam   = %d\\n\",tam);\n       printf(\"*ptam = %d\\n\",*ptam);\n       printf(\"\\n\");\n\n       *ptam = 44;     \n\n       printf(\"tam   = %d\\n\",tam);\n       printf(\"*ptam = %d\\n\",*ptam);\n       sleep(10);\n   }\n\n return 0;\n}\n</code></pre>\n\n<p>Output console of C:\n<a href=\"http://i.stack.imgur.com/pRgI4.png\" rel=\"nofollow\">Click image</a></p>\n\n<p>This give me error => Attempted to read or write protected memory. This is often an indication that other memory is corrupt.</p>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1473849027, "post_id": 39486814, "comment_id": 66294187, "body": "<a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0552a/CHDBIBGJ.html\" rel=\"nofollow noreferrer\">PSR is a privileged register</a>"}, {"owner": {"reputation": 5, "user_id": 6826224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793016d41ba8b862c443ea0d21811fb?s=128&d=identicon&r=PG&f=1", "display_name": "OSES_help", "link": "https://stackoverflow.com/users/6826224/oses-help"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473860466, "post_id": 39486814, "comment_id": 66301440, "body": "PSR is a specific register of the low power timer, it is not the program status register."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473860847, "post_id": 39486814, "comment_id": 66301740, "body": "Are you sure about the address. Take notes that the correct declaration should be <code>(volatile uint32_t *)(0x42040004)</code>. Could you link the datasheet of mcu?"}, {"owner": {"reputation": 5, "user_id": 6826224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793016d41ba8b862c443ea0d21811fb?s=128&d=identicon&r=PG&f=1", "display_name": "OSES_help", "link": "https://stackoverflow.com/users/6826224/oses-help"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473864409, "post_id": 39486814, "comment_id": 66304318, "body": "<a href=\"https://www.google.it/url?sa=t&amp;source=web&amp;rct=j&amp;url=http://cache.freescale.com/files/microcontrollers/doc/ref_manual/K64P144M120SF5RM.pdf&amp;ved=0ahUKEwi1t9jtio_PAhWDiSwKHWtAAwAQFggeMAA&amp;usg=AFQjCNHf2bM0kd4CHzoSatT0Jtnwb6GguA\" rel=\"nofollow noreferrer\">google.it/url?sa=t&amp;source=web&amp;rct=j&amp;url=http://&hellip;</a> this is the link, sorry for the mess. At page 171 you can find the memory map and the explanation of what aliased addresses are (basically some addresses are replicated in order to have the single bits addressable).  If you are interested, at page 1095 you can find details about the low power timer, and you can understand exactly what is that address."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473864882, "post_id": 39486814, "comment_id": 66304646, "body": "Any reason you define the address manually and not use the MCU CMSIS header? Use that header."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1473865007, "post_id": 39486814, "comment_id": 66304740, "body": "Address of <code>LPTMR0_PSR</code> is  <code>0x40040004</code>: page <code>1097</code>."}, {"owner": {"reputation": 5, "user_id": 6826224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793016d41ba8b862c443ea0d21811fb?s=128&d=identicon&r=PG&f=1", "display_name": "OSES_help", "link": "https://stackoverflow.com/users/6826224/oses-help"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473879807, "post_id": 39486814, "comment_id": 66313194, "body": "@LPs that is the &quot;regular&quot; address, I am using an &quot;aliased&quot; address, that allows to access to a single bit of the 4 byte word addressed by 0x40040004. With 0x42040004, I am addressing just the first bit of the word whose address is 0x40040004. By the way, if I use 0x40040004, the behavior is exactly the same. Unfortunately, changing to (volatile uint32_t *)(0x42040004) did not help either."}, {"owner": {"reputation": 5, "user_id": 6826224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793016d41ba8b862c443ea0d21811fb?s=128&d=identicon&r=PG&f=1", "display_name": "OSES_help", "link": "https://stackoverflow.com/users/6826224/oses-help"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473881655, "post_id": 39486814, "comment_id": 66314180, "body": "@Olaf I did not know CMSIS header. I had a glance at it, and I found some time managing functions; however, none of them seem to control the low power timer. For my project I need to use either the low power timer or the flexitimer. Moreover, they are the only timers with the resolution I need (microseconds), the others seem to have a milliseconds resolution."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473881783, "post_id": 39486814, "comment_id": 66314232, "body": "There should be ah header with the register definitions (resp. macros and constants). And the timers have that resolution you program them to have, using prescaler and compare register, etc. First rule in embedded is to have the reference manual (or however it is called) at hand."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473922538, "post_id": 39486814, "comment_id": 66326501, "body": "Well. So <code>0x4204004</code> is <code>bit 1</code> of <code>LPTMR0_CSR</code>. If you want to &quot;point&quot; <code>bit 0</code> of <code>LPTMR0_PSR</code> you must use address <code>0x42040080</code> (offset is <code>32*32</code> bits of <code>LPTMR0_PSR</code>) of . You can find a good explanation <a href=\"http://www.scienceprog.com/bit-band-operations-with-arm-cortex-microcontrollers/\" rel=\"nofollow noreferrer\">at this link</a>. This clearly does not explain why the firmware stops working as far as you dereference that address."}, {"owner": {"reputation": 5, "user_id": 6826224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793016d41ba8b862c443ea0d21811fb?s=128&d=identicon&r=PG&f=1", "display_name": "OSES_help", "link": "https://stackoverflow.com/users/6826224/oses-help"}, "edited": false, "score": 0, "creation_date": 1474131296, "post_id": 39486814, "comment_id": 66410782, "body": "I found by means of IAR debugger that those registers I am trying to access are not addressed. In place of the address number, e.g. 0x4000000, you get a -------- (I have italian keyboard and I cannot format the addresses). I just don&#39;t know why. Anyone knows what those dashes mean in IAR?"}], "owner": {"reputation": 5, "user_id": 6826224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793016d41ba8b862c443ea0d21811fb?s=128&d=identicon&r=PG&f=1", "display_name": "OSES_help", "link": "https://stackoverflow.com/users/6826224/oses-help"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473882001, "creation_date": 1473844887, "last_edit_date": 1473882001, "question_id": 39486814, "link": "https://stackoverflow.com/questions/39486814/uc-os-hardware-register-read", "title": "uC/OS hardware register read", "body": "<p>I am trying to use the low power timer on the Freescale FRDM K64F, with IAR as design framework and uC/OS as operating system. I read the manual and I found that the timer is controlled by means of a bunch of registers, but I am getting in trouble with the register reading and writing.</p>\n\n<p>At first I am just trying to read a register with the code attached below. The code stucks as soon as the read line is reached: the line \u201cafter read\u201d is not printed on terminal. Searching through the debugger, I found out that the hardfault_handler exception is raised. I am not a software expert, so: does anyone have an idea about what is the problem here? It should be something related with the OS, but I can\u2019t understand what. I said I am not a software expert, so, should I have forgot to tell something important, please let me know. Thanks in advance.</p>\n\n<pre><code>#include \"fsl_interrupt_manager.h\"\n\n#include  &lt;math.h&gt;\n#include  &lt;lib_math.h&gt;\n#include  &lt;cpu_core.h&gt;\n\n#include  &lt;app_cfg.h&gt;\n#include  &lt;os.h&gt;\n\n#include  &lt;fsl_os_abstraction.h&gt;\n#include  &lt;system_MK64F12.h&gt;\n#include  &lt;board.h&gt;\n\n#include  &lt;bsp_ser.h&gt;\n\n\n/*\n*********************************************************************************************************\n*                                            LOCAL DEFINES\n*********************************************************************************************************\n*/\n\n\n/*\n*********************************************************************************************************\n*                                       LOCAL GLOBAL VARIABLES\n*********************************************************************************************************\n*/\n\nstatic  OS_TCB       AppTaskStartTCB;\nstatic  CPU_STK      AppTaskStartStk[APP_CFG_TASK_START_STK_SIZE];\n\n\n/*\n*********************************************************************************************************\n*                                      LOCAL FUNCTION PROTOTYPES\n*********************************************************************************************************\n*/\n\nstatic  void  AppTaskStart (void  *p_arg);\n\n\n\n\nint  main (void)\n{\n    OS_ERR   err;\n\n#if (CPU_CFG_NAME_EN == DEF_ENABLED)\n    CPU_ERR  cpu_err;\n#endif\n\n    hardware_init();\n    GPIO_DRV_Init(switchPins, ledPins);\n\n\n#if (CPU_CFG_NAME_EN == DEF_ENABLED)\n    CPU_NameSet((CPU_CHAR *)\"MK64FN1M0VMD12\",\n                (CPU_ERR  *)&amp;cpu_err);\n#endif\n\n    OSA_Init();                                                 /* Init uC/OS-III.                                      */\n\n    OSTaskCreate(&amp;AppTaskStartTCB,                              /* Create the start task                                */\n                 \"App Task Start\",\n                  AppTaskStart,\n                  0u,\n                  APP_CFG_TASK_START_PRIO,\n                 &amp;AppTaskStartStk[0u],\n                 (APP_CFG_TASK_START_STK_SIZE / 10u),\n                  APP_CFG_TASK_START_STK_SIZE,\n                  0u,\n                  0u,\n                  0u,\n                 (OS_OPT_TASK_STK_CHK | OS_OPT_TASK_STK_CLR | OS_OPT_TASK_SAVE_FP),\n                 &amp;err);\n\n    OSA_Start();                                                /* Start multitasking (i.e. give control to uC/OS-III). */\n\n    while (DEF_ON) {                                            /* Should Never Get Here                                */\n        ;\n    }\n}\n\n\n\n\n\nstatic  void  AppTaskStart (void *p_arg)\n{\n  OS_ERR    os_err;\n\n  (void)p_arg;                                                /* See Note #1                                          */\n\n  char string[800];\n\n  CPU_Init();                                                 /* Initialize the uC/CPU Services.                      */\n  Mem_Init();                                                 /* Initialize the Memory Management Module              */\n  Math_Init();                                                /* Initialize the Mathematical Module                   */\n\n\n  int * PSR = (int *) 0x42040004;\n\n  BSP_Ser_Init(115200u);\n\n  APP_TRACE_DBG((\"Blinking RGB LED...\\n\\r\"));\n\n\n  int value;\n\n  APP_TRACE_DBG((\"Before read\\n\"));\n  value=*PSR;\n  APP_TRACE_DBG((\"After read\\n\"));\n\n  APP_TRACE_DBG((\"Before sprintf\\n\"));       \n  sprintf(string,\"Value is %d\\n\",value);\n  APP_TRACE_DBG((\"After sprintf\\n\"));\n\n}\n</code></pre>\n"}, {"tags": ["c", "malloc", "parameter-passing", "dynamic-memory-allocation", "pass-by-value"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1473845114, "post_id": 39486797, "comment_id": 66291831, "body": "I almost downvoted you for making such a stupid mistake :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1473845245, "post_id": 39486797, "comment_id": 66291922, "body": "@Jean-Fran&#231;oisFabre Unfortunately I haven&#39;t found a way to make the question a community wiki, only the answer. I&#39;ve poked the mods, so hopefully it will get converted to community wiki soon."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1473845270, "post_id": 39486797, "comment_id": 66291936, "body": "I think can be better hosted on Documentation Beta."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1473845417, "post_id": 39486797, "comment_id": 66292029, "body": "@LPs By all means, feel free to copy/pasta it over there. You can&#39;t use a Documentation page for close-as-duplicate though. Nor will it pop up when people post a new question nor search for the answer themselves."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1489751838, "post_id": 39486797, "comment_id": 72819822, "body": "@RestlessC0bra No, there&#39;s nothing wrong with this code. Don&#39;t use broken compilers/static analysers. The particular error you describe is a typical, well-known &quot;false positive&quot;, it is a common bug found in many tools."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 2, "creation_date": 1489752396, "post_id": 39486797, "comment_id": 72820213, "body": "@RestlessC0bra False positives = tool bugs = broken tool. VS2015 is a C++ compiler. In C mode, it is very much broken and everyone knows it. It does not conform to the C standard, nor does it conform to the previous C standard from 1999, nor does it conform to the ancient C90/ANSI standard. It is also well-known to whine about perfectly fine C code, since Microsoft think they alone should have the authority to dictate which language features that are good and bad, rather than the C standard committee."}, {"owner": {"reputation": 2429, "user_id": 1098603, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sb0id.png?s=128&g=1", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/1098603/matthieu"}, "edited": false, "score": 1, "creation_date": 1558134758, "post_id": 39486797, "comment_id": 99013552, "body": "@Lundin I would give you bounty for your comment if I could!"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1489755016, "post_id": 39486798, "comment_id": 72822052, "body": "@RestlessC0bra Thanks, it&#39;s been fixed. Though this is a community wiki so you are free to edit it too."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 17, "last_activity_date": 1510230218, "last_edit_date": 1510230218, "creation_date": 1473844830, "answer_id": 39486798, "question_id": 39486797, "link": "https://stackoverflow.com/questions/39486797/dynamic-memory-access-only-works-inside-function/39486798#39486798", "title": "Dynamic memory access only works inside function", "body": "<p>The reason for this bug is that the <code>data</code> used by the <code>create_array</code> function is a local variable that only exists inside that function. The assigned memory address obtained from <code>malloc</code> is only stored in this local variable and never returned to the caller.</p>\n\n<hr>\n\n<p>Consider this simple example:</p>\n\n<pre><code>void func (int x)\n{\n  x = 1;\n  printf(\"%d\", x);\n}\n\n...\nint a;\nfunc(a);\nprintf(\"%d\", a); // bad, undefined behavior - the program might crash or print garbage\n</code></pre>\n\n<p>Here, a <em>copy</em> of the variable <code>a</code> is stored locally inside the function, as the parameter <code>x</code>. This is known as <em>pass-by-value</em>.</p>\n\n<p>When <code>x</code> is modified, only that local variable gets changed. The variable <code>a</code> in the caller remains unchanged, and since <code>a</code> is not initialized, it will contain \"garbage\" and cannot be reliably used.</p>\n\n<hr>\n\n<p>Pointers are no exception to this pass-by-value rule. In your example, the pointer variable <code>data</code> is passed by value to the function. The <code>data</code> pointer inside the function is a local copy and the assigned address from <code>malloc</code> is never passed back to the caller.</p>\n\n<p>So the pointer variable in the caller remains uninitialized and therefore the program crashes. In addition, the <code>create_array</code> function has also created a <em>memory leak</em>, since after that function execution, there is no longer any pointer in the program keeping track of that chunk of allocated memory.</p>\n\n<hr>\n\n<p>There are two ways you can modify the function to work as expected. Either by returning a copy of the local variable back to the caller:</p>\n\n<pre><code>int* create_array (int size)\n{\n  int* data = malloc(sizeof(*data) * size);\n  for(int i=0; i&lt;size; i++)\n  {\n    data[i] = i;\n  }\n\n  print_array(data, size);\n\n  return data;\n}\n\nint main (void)\n{\n  int* data;\n  const int size = 5;\n\n  data = create_array(size);\n  print_array(data, size);\n}\n</code></pre>\n\n<p>or by passing the address to the caller's pointer variable and write directly to the caller variable:</p>\n\n<pre><code>void create_array (int** data, int size)\n{\n  int* tmp = malloc(sizeof(*tmp) * size);\n  for(int i=0; i&lt;size; i++)\n  {\n    tmp[i] = i;\n  }\n\n  *data = tmp;      \n  print_array(*data, size);\n}\n\nint main (void)\n{\n  int* data;\n  const int size = 5;\n\n  create_array(&amp;data, size);\n  print_array(data, size);\n}\n</code></pre>\n\n<p>Either form is fine.</p>\n"}], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3085, "favorite_count": 5, "accepted_answer_id": 39486798, "answer_count": 1, "community_owned_date": 1476099492, "score": 19, "last_activity_date": 1548245141, "creation_date": 1473844830, "last_edit_date": 1548245141, "question_id": 39486797, "link": "https://stackoverflow.com/questions/39486797/dynamic-memory-access-only-works-inside-function", "title": "Dynamic memory access only works inside function", "body": "<p>This question is meant to be used as a canonical duplicate for this FAQ:</p>\n\n<p>I am allocating data dynamically inside a function and everything works well, but only inside the function where the allocation takes place. When I attempt to use the same data outside the function, I get crashes or other unexpected program behavior.</p>\n\n<p>Here is a <a href=\"https://stackoverflow.com/help/mcve\">MCVE:</a></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid create_array (int* data, int size)\n{\n  data = malloc(sizeof(*data) * size);\n  for(int i=0; i&lt;size; i++)\n  {\n    data[i] = i;\n  }\n\n  print_array(data, size);\n}\n\nvoid print_array (int* data, int size)\n{\n  for(int i=0; i&lt;size; i++)\n  {\n    printf(\"%d \", data[i]);\n  }\n  printf(\"\\n\");\n}\n\nint main (void)\n{\n  int* data;\n  const int size = 5;\n\n  create_array(data, size);\n  print_array(data, size);  // crash here\n\n  free(data);\n}\n</code></pre>\n\n<p>Whenever <code>print_array</code> is called from inside the <code>create_array</code> function, I get the expected output <code>0 1 2 3 4</code>, but when I call it from <code>main</code>, I get a program crash.</p>\n\n<p>What is the reason for this?</p>\n"}, {"tags": ["c", "assembly", "static", "arm", "elf"], "comments": [{"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 4, "creation_date": 1473842813, "post_id": 39486061, "comment_id": 66290424, "body": "You should at least resolve all dynamic dependencies before you can pass control to loaded code. Also <code>main()</code> is not a real entry point of your ELF. There is so called startup code - its purpose is to initialize C runtime. Actual entry point address placed somewhere at ELF headers."}, {"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 0, "creation_date": 1473842945, "post_id": 39486061, "comment_id": 66290525, "body": "The loader of an operating system does quite a lot more before mapping the executable file in memory and jumping there to execute it."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 2, "creation_date": 1473843657, "post_id": 39486061, "comment_id": 66290965, "body": "Well, yeah, where&#39;s that <code>puts</code> call going to go, exactly? Have you loaded and initialised the C library? Fixed up all the relocations? Loading anything more than a trivial, statically-linked, position-independent binary is going to take rather more than two <code>mmap</code>s and a <code>memcpy</code>."}, {"owner": {"reputation": 205, "user_id": 5726742, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f1a668a7c48f6f858a927cd72dd3e064?s=128&d=identicon&r=PG&f=1", "display_name": "Livio", "link": "https://stackoverflow.com/users/5726742/livio"}, "reply_to_user": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1473844665, "post_id": 39486061, "comment_id": 66291554, "body": "@Serhio yes sorry I missing this point, if I set the entry point ldr r0, =0x008120, this is my output: mmap2(0x8000, 92200, PROT_READ|PROT_WRITE|PROT_EXEC, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x8000 mmap2(0x1f000, 65536, PROT_READ|PROT_WRITE|PROT_EXEC, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x1f000 gettid()                                = 3582 set_tls(0x201a0, 0x40, 0, 0x202a0, 0x201a0) = 0 futex(0x202ec, FUTEX_WAIT_PRIVATE, 2, NULL and wait forever"}, {"owner": {"reputation": 205, "user_id": 5726742, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f1a668a7c48f6f858a927cd72dd3e064?s=128&d=identicon&r=PG&f=1", "display_name": "Livio", "link": "https://stackoverflow.com/users/5726742/livio"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1473855602, "post_id": 39486061, "comment_id": 66298105, "body": "@Notlikethat this is the crash line sometimes: =&gt; 0x9cc0:\tldr\tr0, [r0, #4], with r0=0x70a34, this is the memory mapped: 00008000-0002f000 rwxp 00000000 00:00 0  80000000-80001000 r-xp 00000000 b3:18 129754     /data/local/tmp/main 80001000-8001a000 rwxp 00001000 b3:18 129754     /data/local/tmp/main becdf000-bed00000 rwxp 00000000 00:00 0  ffff0000-ffff1000 r-xp 00000000 00:00 0          [vectors]"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1473889617, "post_id": 39486061, "comment_id": 66317793, "body": "So? If you dump a couple of ELF sections into memory, ignore the entry point, and blindly jump straight into the middle of one of them, you&#39;re pretty much guaranteed to crash somewhere. The nature of <i>that</i> crash isn&#39;t at all interesting; would you call an auto electrician to diagnose why your car won&#39;t start, if your car was <i>on fire</i>?"}, {"owner": {"reputation": 205, "user_id": 5726742, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f1a668a7c48f6f858a927cd72dd3e064?s=128&d=identicon&r=PG&f=1", "display_name": "Livio", "link": "https://stackoverflow.com/users/5726742/livio"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1473923013, "post_id": 39486061, "comment_id": 66326689, "body": "@Notlikethat thanks for your response, I agree on the fact of the crash details, then actually I map the two LOAD program header into memory and then I jmp to entry point (I tried also into main function), then what is the correct way for do this?"}], "answers": [{"comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1473997979, "post_id": 39523391, "comment_id": 66362362, "body": "It doesn&#39;t look like a dynamically-linked executable because there&#39;s no INTERP program header. If it were dynamically linked that would contain the name of the dynamic loader, and all he have to do load and properly execute that instead. His problem is that he&#39;s not using the correct entry point."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1473999158, "post_id": 39523391, "comment_id": 66362663, "body": "@RossRidge You are correct. He has <code>-static</code> on the link line. Sorry I missed that."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473999237, "post_id": 39523391, "comment_id": 66362682, "body": "re the previous version of this answer: On a dynamic binary, you could just load the ELF interpreter into memory like the kernel does, and jump to its entry point, right?  If you just want to avoid ever calling execve(), that shouldn&#39;t stop you from still using the existing dynamic linker."}, {"owner": {"reputation": 205, "user_id": 5726742, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f1a668a7c48f6f858a927cd72dd3e064?s=128&d=identicon&r=PG&f=1", "display_name": "Livio", "link": "https://stackoverflow.com/users/5726742/livio"}, "edited": false, "score": 0, "creation_date": 1474011432, "post_id": 39523391, "comment_id": 66367297, "body": "@EmployedRussian thanks for your response, the problem is the offset 0x016840 that I have neglected in the loader. Then if I jump to main 0x008160, not entry point, it work!"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 4, "last_activity_date": 1473999709, "last_edit_date": 1473999709, "creation_date": 1473996917, "answer_id": 39523391, "question_id": 39486061, "link": "https://stackoverflow.com/questions/39486061/load-elf-file-into-memory/39523391#39523391", "title": "load ELF file into memory", "body": "<blockquote>\n  <p>I'm trying to put an elf file into memory and then execute it,</p>\n</blockquote>\n\n<p>For a fully-statically-linked executable, your steps would work (except you need to jump to <code>_start</code> == entry point <code>0x8120</code>, <em>not</em> <code>main</code>).</p>\n\n<blockquote>\n  <p>Then I have copied all the elf bytes into the allocations</p>\n</blockquote>\n\n<p>Another possible problem is not paying attention to the <code>.p_offset</code>. Your <code>memcpy</code>ies should look something like this:</p>\n\n<pre><code>unsigned char buf1[0x16828];  // read 0x16828 bytes from start of file\nmemcpy(0x8000, buf1, 0x16828);\n\nunsigned char buf2[0x250];  // read 0x250 bytes from offset 0x016840 into the file\nmemcpy(0x0001f840, buf2, 0x250);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": false, "score": 2, "last_activity_date": 1473999189, "last_edit_date": 1495540111, "creation_date": 1473999189, "answer_id": 39523636, "question_id": 39486061, "link": "https://stackoverflow.com/questions/39486061/load-elf-file-into-memory/39523636#39523636", "title": "load ELF file into memory", "body": "<p>Your problem is that you need to use the correct entry point and you need initialize the program's stack (and maybe registers) the same way the OS would. You need to use the correct entry point so that the C runtime library is initialized, otherwise your call to <code>printf</code> (or <code>puts</code> as the case may be) will almost certainly crash. You need to setup the stack correctly because that's where the C runtime library's initialization code will look for the program's arguments and environment (and maybe other things).</p>\n\n<p>You didn't say what operating system you're using, but if your using Linux you might want to look as an answer to different question given by CesarB <a href=\"https://stackoverflow.com/a/6002815\">describing the initial state of the stack on ARM Linux</a>. </p>\n"}], "owner": {"reputation": 205, "user_id": 5726742, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f1a668a7c48f6f858a927cd72dd3e064?s=128&d=identicon&r=PG&f=1", "display_name": "Livio", "link": "https://stackoverflow.com/users/5726742/livio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6564, "favorite_count": 3, "accepted_answer_id": 39523391, "answer_count": 2, "score": 13, "last_activity_date": 1473999709, "creation_date": 1473842528, "last_edit_date": 1473857936, "question_id": 39486061, "link": "https://stackoverflow.com/questions/39486061/load-elf-file-into-memory", "title": "load ELF file into memory", "body": "<p>I'm trying to put an elf file into memory and then execute it, these are the steps:</p>\n\n<p>1- file to put into memory</p>\n\n<pre><code>int main()\n{\n   printf(\"Hello world! \\n\");\n   return 0;\n}\n</code></pre>\n\n<p>2- Compile it <code>gcc -o hello hello.c -static</code></p>\n\n<pre><code>ELF Header:\n  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 \n  Class:                             ELF32\n  Data:                              2's complement, little endian\n  Version:                           1 (current)\n  OS/ABI:                            UNIX - System V\n  ABI Version:                       0\n  Type:                              EXEC (Executable file)\n  Machine:                           ARM\n  Version:                           0x1\n  Entry point address:               0x8120\n  Start of program headers:          52 (bytes into file)\n  Start of section headers:          119864 (bytes into file)\n  Flags:                             0x5000000, Version5 EABI\n  Size of this header:               52 (bytes)\n  Size of program headers:           32 (bytes)\n  Number of program headers:         4\n  Size of section headers:           40 (bytes)\n  Number of section headers:         18\n  Section header string table index: 17\n\nProgram Headers:\n  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align\n  LOAD           0x000000 0x00008000 0x00008000 0x16828 0x16828 R E 0x1000\n  LOAD           0x016840 0x0001f840 0x0001f840 0x00250 0x02660 RW  0x1000\n  GNU_STACK      0x000000 0x00000000 0x00000000 0x00000 0x00000 RWE 0\n  EXIDX          0x015f40 0x0001df40 0x0001df40 0x008e8 0x008e8 R   0x4\n</code></pre>\n\n<p>3- I write a Loader (compiled for ARM)</p>\n\n<pre><code>mmap2(0x8000, 92200, PROT_READ|PROT_WRITE|PROT_EXEC, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x8000\nmmap2(0x1f000, 65536, PROT_READ|PROT_WRITE|PROT_EXEC, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x1f000\n</code></pre>\n\n<p>3.1- Then I have copied all the elf bytes into the allocations</p>\n\n<p>3.2- jmp to main function</p>\n\n<pre><code>ldr r0, =0x008160\nblx r0\n\n.text:00008160 ; int __cdecl main(int argc, const char **argv, const char **envp)\n.text:00008160                 EXPORT main\n.text:00008160 main                                    ; DATA XREF: _start+8o\n.text:00008160                                         ; .text:off_8150o\n.text:00008160                 STMFD           SP!, {R11,LR}\n.text:00008164                 ADD             R11, SP, #4\n.text:00008168                 LDR             R3, =(aHelloWorld - 0x8174)\n.text:0000816C                 ADD             R3, PC, R3 ; \"Hello world! \"\n.text:00008170                 MOV             R0, R3\n.text:00008174                 BLX             puts\n.text:00008178                 MOV             R3, #0\n.text:0000817C                 MOV             R0, R3\n.text:00008180                 LDMFD           SP!, {R11,PC}\n.text:00008180 ; End of function main\n</code></pre>\n\n<p>The problem is that every time I get to the line 0x8174, then jump into, after a bit of instructions I always have a SIGSEGV in a random position, more time the crash instruction is => <code>0x9cc0:   ldr r0, [r0, #4]</code> with <code>r0=0x70a34</code></p>\n\n<pre><code>00008000-0002f000 rwxp 00000000 00:00 0 \n80000000-80001000 r-xp 00000000 b3:18 129754     /data/local/tmp/main\n80001000-8001a000 rwxp 00001000 b3:18 129754     /data/local/tmp/main\nbecdf000-bed00000 rwxp 00000000 00:00 0 \nffff0000-ffff1000 r-xp 00000000 00:00 0          [vectors]\n</code></pre>\n\n<p>These are more instructions after the crash:</p>\n\n<pre><code>.text:00009CB4 loc_9CB4                                ; CODE XREF: pthread_mutex_lock_impl+18j\n.text:00009CB4                 MOV             R3, #0xFFFF0FE0\n.text:00009CBC                 BLX             R3\n.text:00009CC0                 LDR             R0, [R0,#4]\n</code></pre>\n\n<p>At this location <code>0x9CB4</code>, the value of <code>r0</code> is <code>0x1f96c</code> (it is ok), after the blx the value of <code>r0</code> is <code>0x70a34</code></p>\n\n<pre><code>(gdb) x/10x 0xffff0fe0\n0xffff0fe0: 0xee1d0f70  0xe12fff1e  0xee1d0f70  0x00000000\n0xffff0ff0: 0x00000000  0x00000000  0x00000000  0x00000005\n0xffff1000: Cannot access memory at address 0xffff1000\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1473843194, "creation_date": 1473843194, "answer_id": 39486282, "question_id": 39485968, "link": "https://stackoverflow.com/questions/39485968/how-to-pass-string-function-from-command-line-arguments-in-c/39486282#39486282", "title": "how to pass string function from command line arguments in c", "body": "<p>This is the idea:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{ \n  if (argc != 4)\n  {\n    printf(\" useage: %s operation num1 num2\\n);\", argv[0]);\n    return 1;\n  }\n\n  int x = atoi(argv[2]);\n  int y = atoi(argv[3]);\n\n  if (strcmp(\"sum\", argv[1]) == 0)\n  {\n    ...\n  }\n\n  ...\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3747882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ea9facc9cc4996f25220355ceb8232?s=128&d=identicon&r=PG&f=1", "display_name": "user3747882", "link": "https://stackoverflow.com/users/3747882/user3747882"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1473852692, "answer_count": 1, "score": -8, "last_activity_date": 1473843194, "creation_date": 1473842206, "last_edit_date": 1473842928, "question_id": 39485968, "link": "https://stackoverflow.com/questions/39485968/how-to-pass-string-function-from-command-line-arguments-in-c", "closed_reason": "Needs more focus", "title": "how to pass string function from command line arguments in c", "body": "<p>Example  :</p>\n\n<p>sum 2 3</p>\n\n<p>the sum is 5 </p>\n\n<p>mul 2 3</p>\n\n<p>the product is 6 </p>\n\n<p>i need to pass 3 variables from command prompt so that from the first string it should go to a function and perform the action of remaining two numbers </p>\n"}, {"tags": ["c", "string", "function", "char", "return"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1473842278, "post_id": 39485964, "comment_id": 66290093, "body": "Please learn how to use a debugger. With a debugger you can step through your code line by line and see what it does, all while being able to monitor variables and their values. It is an essential skill needed by all programmers."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1473842567, "post_id": 39485964, "comment_id": 66290259, "body": "One basic mistake: failure to terminate the returned string. Also, you can&#39;t define a function whose name starts with <code>str</code>, that&#39;s a reserved namespace."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1473842877, "post_id": 39485964, "comment_id": 66290470, "body": "Think about what value <code>i</code> has at the line <code>strBetween[i] = s[i];</code>.  Also, what would happen if <code>c</code> is <i>not</i> the first character in the input string?"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1473842669, "creation_date": 1473842669, "answer_id": 39486100, "question_id": 39485964, "link": "https://stackoverflow.com/questions/39485964/string-between-program-faults/39486100#39486100", "title": "String between program faults", "body": "<p>If you pretend to be the computer and execute the body of your loop, assuming you're at the target character, it should be quite obvious why it happens. You check for <code>c</code>, increase the counter, then check if the counter is 1 in the same iteration. Obviously you're going to copy the first instance of <code>c</code>.</p>\n\n<p>Swap the order of the comparisons, or use <code>else if</code> for the second one.</p>\n\n<p>Also add code to properly terminate the returned string.</p>\n"}, {"tags": [], "owner": {"reputation": 16916, "user_id": 1562138, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/qwj5I.png?s=128&g=1", "display_name": "fvgs", "link": "https://stackoverflow.com/users/1562138/fvgs"}, "is_accepted": true, "score": 4, "last_activity_date": 1473843438, "last_edit_date": 1473843438, "creation_date": 1473842687, "answer_id": 39486103, "question_id": 39485964, "link": "https://stackoverflow.com/questions/39485964/string-between-program-faults/39486103#39486103", "title": "String between program faults", "body": "<p>There are two problems with this implementation.</p>\n\n<p>First, <code>char* strBetween = malloc(strlen(s));</code> does not allocate memory for the null-terminating character, assuming your goal here is to allocate enough space to hold a string with length equal to that of the input string. Second, if you reason through the for loop, you'll see what it actually does is copy the character <code>c</code> plus the string of interest (e.g. \"a1234\") into the string you allocated beginning at the index it was found in the input string.</p>\n\n<p>In the case of \"a1234a\" as the input string, it will copy over \"a1234_\" (with the final character being undefined). However, suppose the input string were \"ggga1234aggg\". The output would be the string \"___a1234____\" with the \"_\" characters being undefined. The reason adding <code>s[i] != c</code> in the <code>if</code> condition doesn't work is that you're still not addressing the undefined character(s) at the beginning of the string. In that case, you still end up with \"_1234-\" (using - instead of _ to avoid italicization). Most likely, the undefined characters will be <code>0</code> (i.e. null-terminator), in which case it is essentially a string of length zero, which explains your result. But of course, you should not be relying on undefined behavior regardless.</p>\n"}], "owner": {"reputation": 37, "user_id": 6774966, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207351675129519/picture?type=large", "display_name": "Eddie Kusturica", "link": "https://stackoverflow.com/users/6774966/eddie-kusturica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 39486103, "answer_count": 2, "score": 1, "last_activity_date": 1473843677, "creation_date": 1473842194, "last_edit_date": 1473843677, "question_id": 39485964, "link": "https://stackoverflow.com/questions/39485964/string-between-program-faults", "title": "String between program faults", "body": "<p>I'm having a bit of an issue with my program. The way it works is that a function is supposed to return a string of char's between two char's that I choose, for example \"a1234a\" and I want to return all characters between the 'a', I'd get 1234. The problem is that my output also prints the first 'a', so I get \"a1234\" instead. The code is as following:</p>\n\n<pre><code>char* string_between(char *s, char c){\n    int length = strlen(s);\n    int counter = 0;\n    char* strBetween = malloc(strlen(s));\n\n    for(int i = 0; i&lt;length; i++){\n      if(s[i] == c){\n        counter++;\n      }\n      if(counter == 1){\n        strBetween[i] = s[i];\n      }\n    }\n    if(counter&lt;2){\n      free(strBetween);\n      return NULL;\n    }\n    return strBetween;\n}\n</code></pre>\n\n<p>I've tried adding <code>s[i] != c</code> in the <code>if(counter == 1)</code> statement, but then it gets worse and doesn't print anything at all. I'm still pretty new to C so please explain as simple as possible :) Thanks for reading!</p>\n"}, {"tags": ["c", "java-native-interface", "rsa", "pem", "polarssl"], "answers": [{"tags": [], "owner": {"reputation": 1039, "user_id": 844520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ddd01643da7f1358795bd976e3c3e5?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/844520/paul"}, "is_accepted": false, "score": 1, "last_activity_date": 1473887206, "creation_date": 1473887206, "answer_id": 39499643, "question_id": 39485703, "link": "https://stackoverflow.com/questions/39485703/how-to-pass-the-public-key-in-pem-file-to-the-polarssl-rsa-context/39499643#39499643", "title": "How to pass the public key in .pem file to the polarssl rsa_context", "body": "<p>You should probably consider using a newer version of PolarSSL (now called mbed TLS) instead.</p>\n\n<p>Why don't you use the <code>mbedtls_pk_parse_public_keyfile()</code>, which is meant for this specific purpose (loading a public keyfile into a context)?</p>\n"}], "owner": {"reputation": 169, "user_id": 6331723, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/74e7682a8c3d896702dfb64575cdd992?s=128&d=identicon&r=PG&f=1", "display_name": "Zijian", "link": "https://stackoverflow.com/users/6331723/zijian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473887206, "creation_date": 1473841316, "question_id": 39485703, "link": "https://stackoverflow.com/questions/39485703/how-to-pass-the-public-key-in-pem-file-to-the-polarssl-rsa-context", "title": "How to pass the public key in .pem file to the polarssl rsa_context", "body": "<p>I have a rsa 2048 bit public key in .pem file and I used this command 'openssl rsa -inform PEM -in rsa_public_key.pem -pubin -text' to get the module and the exponent. However I don't know how to pass it to the polarssl function with rsa_context format.</p>\n\n<pre><code>const char RSA_E[] = {0x01, 0x00, 0x01};\nconst char RSA_N[256] =\n    {\n0xa9, 0x71, 0x0b, 0x68, 0x16, 0xb1, 0x1c, 0x26, 0x62, 0x02, 0xee, 0xc6, 0x7b, 0x00,\n0x1e, 0x1e, 0x79, 0x22, 0x86, 0x12, 0x9b, 0x90, 0x96, 0x8c, 0x90, 0x71, 0x90, 0x29, 0xb8,\n0x6c, 0x72, 0x69, 0x2e, 0x9b, 0xb1, 0xb5, 0x28, 0x65, 0x16, 0x26, 0xae, 0xcb, 0x62, 0xc9,\n0x67, 0xe1, 0x52, 0x88, 0xae, 0x75, 0x52, 0x16, 0x1b, 0xe1, 0xc7, 0xe5, 0x05, 0x69, 0xc9,\n0xa2, 0x9b, 0x98, 0x9b, 0xb5, 0x10, 0x1b, 0xc5, 0xba, 0xc6, 0x15, 0x61, 0x69, 0xaa, 0x12,\n0x26, 0x1e, 0xc7, 0x62, 0x6c, 0x66, 0x60, 0x0b, 0x18, 0x2c, 0x2e, 0x91, 0x22, 0x20, 0x67,\n0x07, 0x96, 0x8e, 0x86, 0x79, 0xb2, 0xa9, 0x61, 0x75, 0x2a, 0x62, 0x96, 0x8b, 0x8b, 0x56,\n0x2b, 0x06, 0x7e, 0xbb, 0x2e, 0xb9, 0xb8, 0x82, 0xe9, 0xbe, 0x6c, 0x81, 0x26, 0x59, 0x12,\n0x99, 0x75, 0x1b, 0xc5, 0x60, 0x2c, 0x2e, 0x91, 0xb9, 0x59, 0x29, 0x6a, 0x6c, 0x61, 0xaa,\n0x29, 0x6b, 0xcb, 0xa8, 0x06, 0x98, 0x51, 0x29, 0x86, 0xc9, 0x78, 0x61, 0xbc, 0x12, 0x61,\n0x66, 0xbc, 0x6a, 0x89, 0x80, 0x18, 0x62, 0xc1, 0xc7, 0xaa, 0x09, 0x59, 0x26, 0x72, 0xe1,\n0x2a, 0x76, 0x57, 0x9b, 0x8b, 0x28, 0x16, 0x62, 0x22, 0x6a, 0x89, 0x61, 0xc7, 0x11, 0x82,\n0x19, 0x81, 0x61, 0x91, 0x88, 0xc1, 0x05, 0xb1, 0x26, 0xa2, 0x10, 0x9c, 0x51, 0x09, 0x98,\n0x29, 0x95, 0x0c, 0x25, 0x7c, 0x81, 0x5a, 0x07, 0x99, 0x7a, 0x2e, 0x58, 0x16, 0xea, 0x99,\n0x28, 0x70, 0x22, 0x6e, 0xb1, 0x9c, 0xa6, 0x1e, 0x97, 0x25, 0xa9, 0x18, 0x29, 0x6a, 0xe8,\n0xc2, 0x19, 0xa2, 0xac, 0x71, 0x97, 0x12, 0x96, 0xbe, 0x29, 0xaa, 0xcb, 0x22, 0x52, 0x81,\n0xb9, 0x71, 0xb1, 0x8e, 0x92, 0x8b, 0x8e, 0x72, 0x26, 0x56, 0x52, 0x99, 0x8e, 0x15, 0xe6,\n0x6e, 0xb1\n    };\n\n\n\nstatic char* _get_rsa_pub_key(void) {\nint i, length;\nchar* xor_content;\nlength = sizeof(RSA_E);\nxor_content = (char*) malloc(length + 1);\nfor (i = 0; i &lt; length; i++) {\n    xor_content[i] = (RSA_E[i]) ^ MASK;\n}\nxor_content[i] = '\\0';\nreturn xor_content;\n}\n\nstatic int _check_key(const unsigned char * rsa_encrypted, unsigned char *      rsa_decrypted, int* out_len) {\nint rst;\nsize_t len;\nrsa_context rsa;\nchar* rsa_pub_key = NULL;\n\nrsa_pub_key = _get_rsa_pub_key();\nrsa_init(&amp;rsa, RSA_PKCS_V15, 0);\nrsa.len = KEY_LEN;\nmpi_read_string(&amp;rsa.N, 16, RSA_N);\nmpi_read_string(&amp;rsa.E, 16, rsa_pub_key);\nrst = rsa_pkcs1_decrypt(&amp;rsa, NULL, NULL, RSA_PUBLIC, &amp;len, rsa_encrypted, rsa_decrypted, *out_len);\nif (0 != rst)\n    rst = -1;\nrsa_free(&amp;rsa);\n*out_len = len;\nfree(rsa_pub_key);\nreturn rst;\n</code></pre>\n\n<p>}</p>\n\n<p>it always returns nothing. I think the problem is the format of rsa public key, but I don't know how to solve it.</p>\n"}, {"tags": ["c", "pointers", "struct", "malloc", "64-bit"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1473840141, "post_id": 39485246, "comment_id": 66288913, "body": "It shouldn&#39;t work for either architecture. The line <code>stuffArr = stuff;</code> changes the local copy of <code>stuffArr</code>. It has no effect on variable <code>stuff</code> in <code>main</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1473840256, "post_id": 39485246, "comment_id": 66288973, "body": "Also, <code>(*(stuff + i))</code> is the same as <code>stuff[i]</code>, and <code>(stuff + i)-&gt;x</code> is just <code>stuff[i].x</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473841612, "post_id": 39485246, "comment_id": 66289751, "body": "<i>the x and y variables do not have an address when I try to access them</i> : what is that supposed to mean ?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1473841826, "post_id": 39485246, "comment_id": 66289854, "body": "This is such a FAQ bug. Let me see if I can find a duplicate."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473842218, "post_id": 39485246, "comment_id": 66290061, "body": "This cannot work for the reasons pointed out in the comments and answers. The code you were running when it worked is not the code you show us here."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1473842226, "post_id": 39485246, "comment_id": 66290064, "body": "Apparently we have no canonical duplicate for this... we should probably create one, since this is such a common bug."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1473845011, "post_id": 39485246, "comment_id": 66291773, "body": "There, <a href=\"http://stackoverflow.com/questions/39486797/dynamic-memory-access-only-works-inside-function\">I made one</a>."}, {"owner": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473907966, "post_id": 39485246, "comment_id": 66322204, "body": "@MichaelWalz Changed it up, still same error <a href=\"http://imgur.com/a/WeLJW\" rel=\"nofollow noreferrer\">screenshots</a> and <a href=\"http://pastebin.com/By8szrqp\" rel=\"nofollow noreferrer\">pastebin</a>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1473922185, "post_id": 39485246, "comment_id": 66326333, "body": "This compiles ok, but is a program with errors.  Variables are pased in C by value, so you cannot expect the pointer you pass to the function in <code>main</code> to be modified by the function.  It can compile ok in 32bit, but it cannot work as you expect anywhere."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473922478, "post_id": 39485246, "comment_id": 66326470, "body": "@spatmac the version in <a href=\"http://pastebin.com/By8szrqp\" rel=\"nofollow noreferrer\">pastebin</a> is just plain wrong. See the answers below."}, {"owner": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1473967946, "post_id": 39485246, "comment_id": 66353638, "body": "@MichaelWalz Whiskers down there figured it out, thank you for taking time to look at it, turns I needed another std include"}], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 5747995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUewr.jpg?s=128&g=1", "display_name": "Cl&#233;ment P&#233;au", "link": "https://stackoverflow.com/users/5747995/cl%c3%a9ment-p%c3%a9au"}, "is_accepted": false, "score": 2, "last_activity_date": 1473841332, "last_edit_date": 1473841332, "creation_date": 1473840673, "answer_id": 39485527, "question_id": 39485246, "link": "https://stackoverflow.com/questions/39485246/how-do-i-get-this-to-compile-for-x64/39485527#39485527", "title": "How do i get this to compile for x64", "body": "<p>When you pass stuff in allocateArray you create a local variable, and when you remplace it at the end of the function, the variable in main is not updated</p>\n\n<p>This should work, you just lost your pointer in the allocateArray function    </p>\n\n<pre><code>#define ARR_SIZE 25\n\ntypedef struct {\n    unsigned int x;\n    unsigned int y;\n}Stuff;\n\nStuff *allocateArray() {\n\n   Stuff *stuff = malloc(sizeof (Stuff) * ARR_SIZE);\n\n   for (int i = 0; i &lt; ARR_SIZE; i++) {\n       (*(stuff + i)) = (Stuff) { i, i + i };\n   }\n\n   for (int i = 0; i &lt; ARR_SIZE; i++) {\n       printf(\"%d : %d\\n\", (stuff + i)-&gt;x, (stuff + i)-&gt;y);\n   }\n\n   return stuff;\n}\n\nvoid deallocateArray(Stuff *stuffArr) {\n  free(stuffArr);\n}\n\nint main(){\n  Stuff * stuff = NULL;\n\n  stuff = allocateArray();\n  deallocateArray(stuff);\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "edited": false, "score": 0, "creation_date": 1473907906, "post_id": 39485546, "comment_id": 66322190, "body": "I just dont konw what the deal is, i changed it up to get rid of the goofy pointers and it wont compile as x64 <a href=\"http://imgur.com/a/WeLJW\" rel=\"nofollow noreferrer\">screenshots</a> and <a href=\"http://pastebin.com/By8szrqp\" rel=\"nofollow noreferrer\">pastebin</a>"}], "tags": [], "owner": {"reputation": 2329, "user_id": 1363486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d556e3afbb20ad2623b46413d1cb345?s=128&d=identicon&r=PG", "display_name": "Marco Pantaleoni", "link": "https://stackoverflow.com/users/1363486/marco-pantaleoni"}, "is_accepted": false, "score": 4, "last_activity_date": 1473840744, "creation_date": 1473840744, "answer_id": 39485546, "question_id": 39485246, "link": "https://stackoverflow.com/questions/39485246/how-do-i-get-this-to-compile-for-x64/39485546#39485546", "title": "How do i get this to compile for x64", "body": "<p>As user3386109 says, the code is not correct. Probably you are expecting that the <code>allocateArray()</code> function returns the allocated pointer, while you are passing the pointer by value, so that the variable <code>stuff</code> inside <code>main()</code> won't be updated.</p>\n\n<p>You could either:</p>\n\n<ul>\n<li>change the <code>allocateArray()</code> signature to <code>void allocateArray(Stuff **stuffArr)</code></li>\n<li>change the <code>allocateArray()</code> signature to <code>Stuff *allocateArray()</code></li>\n</ul>\n\n<p>(imho the second would be more idiomatic and clear).</p>\n\n<p>I'd write it as:</p>\n\n<pre><code>Stuff *allocateArray(size_t count) {\n    Stuff *stuff = (Stuff *) malloc(sizeof (Stuff) * count);\n\n    if (! stuff)\n        return NULL;\n\n    for (int i = 0; i &lt; count; i++) {\n        stuff[i].x = i;\n        stuff[i].y = 2 * i;\n\n        printf(\"%d : %d\\n\", stuff[i].x, stuff[i].y);\n    }\n\n    return stuff;\n}\n\nvoid deallocateArray(Stuff *stuffArr) {\n    if (stuffArr)\n        free(stuffArr);\n}\n\nint main(){\n    Stuff * stuff = allocateArray(ARR_SIZE);\n    deallocateArray(stuff);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "edited": false, "score": 0, "creation_date": 1473907790, "post_id": 39485551, "comment_id": 66322170, "body": "I just dont konw what the deal is, i changed it up to get rid of the goofy pointers and it wont compile as x64 <a href=\"http://imgur.com/a/WeLJW\" rel=\"nofollow noreferrer\">screenshots</a> and <a href=\"http://pastebin.com/By8szrqp\" rel=\"nofollow noreferrer\">pastebin</a>"}, {"owner": {"reputation": 218, "user_id": 5624940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a64af18c50dc31749efbe06a5e50648?s=128&d=identicon&r=PG&f=1", "display_name": "PhantomWhiskers", "link": "https://stackoverflow.com/users/5624940/phantomwhiskers"}, "reply_to_user": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "edited": false, "score": 0, "creation_date": 1473911249, "post_id": 39485551, "comment_id": 66322913, "body": "You are missing <code>#include &lt;stdlib.h&gt;</code>. I copied your code from pastebin into visual studio, set the exact same project settings, and had same results as you, but then I noticed you were missing <code>stdlib.h</code>, added that in, and then it worked just fine in x64. Why it worked in x86 without <code>stdlib.h</code>, I do not know."}, {"owner": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "edited": false, "score": 0, "creation_date": 1473911647, "post_id": 39485551, "comment_id": 66322993, "body": "This has been bugging me for a day and a half.. Thanks a ton!!!"}, {"owner": {"reputation": 218, "user_id": 5624940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a64af18c50dc31749efbe06a5e50648?s=128&d=identicon&r=PG&f=1", "display_name": "PhantomWhiskers", "link": "https://stackoverflow.com/users/5624940/phantomwhiskers"}, "reply_to_user": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "edited": false, "score": 0, "creation_date": 1473911863, "post_id": 39485551, "comment_id": 66323033, "body": "No problem! If I had to guess why it worked in x86, Windows/MSVC probably has a default 32 bit implementation built in for functions like <code>malloc</code> and <code>free</code>, but doesn&#39;t have defaults for 64 bit. In general, always remember to include <code>stdlib.h</code> when doing dynamic memory allocation."}], "tags": [], "owner": {"reputation": 218, "user_id": 5624940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a64af18c50dc31749efbe06a5e50648?s=128&d=identicon&r=PG&f=1", "display_name": "PhantomWhiskers", "link": "https://stackoverflow.com/users/5624940/phantomwhiskers"}, "is_accepted": true, "score": 2, "last_activity_date": 1473840758, "creation_date": 1473840758, "answer_id": 39485551, "question_id": 39485246, "link": "https://stackoverflow.com/questions/39485246/how-do-i-get-this-to-compile-for-x64/39485551#39485551", "title": "How do i get this to compile for x64", "body": "<p>I copied and pasted your code into Visual Studio 2015 and compiled in both x86 and x64 and got the exact same output both times, however like user3386109 said, you aren't actually changing the variable <code>stuff</code> in <code>main</code>.</p>\n\n<p>You could also use array indexing instead of adding integers to pointers like this.</p>\n\n<pre><code>for (int i = 0; i &lt; ARR_SIZE; i++) {\n    stuff[i] = (Stuff) { i, i + i };\n}\n\nfor (int i = 0; i &lt; ARR_SIZE; i++) {\n    printf(\"%d : %d\\n\", stuff[i].x, stuff[i].y);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "edited": false, "score": 0, "creation_date": 1473907824, "post_id": 39485616, "comment_id": 66322178, "body": "I just dont konw what the deal is, i changed it up to get rid of the goofy pointers and it wont compile as x64 <a href=\"http://imgur.com/a/WeLJW\" rel=\"nofollow noreferrer\">screenshots</a> and <a href=\"http://pastebin.com/By8szrqp\" rel=\"nofollow noreferrer\">pastebin</a>"}], "tags": [], "owner": {"reputation": 569, "user_id": 4181430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1488320649/picture?type=large", "display_name": "jurhas", "link": "https://stackoverflow.com/users/4181430/jurhas"}, "is_accepted": false, "score": 0, "last_activity_date": 1473841008, "creation_date": 1473841008, "answer_id": 39485616, "question_id": 39485246, "link": "https://stackoverflow.com/questions/39485246/how-do-i-get-this-to-compile-for-x64/39485616#39485616", "title": "How do i get this to compile for x64", "body": "<p>The good question is how does it works in x86. (it is undefined behavior).\nTry this:</p>\n\n<pre><code>#define ARR_SIZE 25\n#include  \"stdlib.h\"\n#include  \"stdio.h\"\ntypedef struct {\n    unsigned int x;\n    unsigned int y;\n}Stuff;\n\nvoid * allocateArray(Stuff *stuffArr) { //this row\n\n    Stuff *stuff = (Stuff*)malloc(sizeof (Stuff) * ARR_SIZE);\n\n    for (int i = 0; i &lt; ARR_SIZE; i++) {\n        (*(stuff + i)) = (Stuff) { i, i + i };\n    }\n\n    for (int i = 0; i &lt; ARR_SIZE; i++) {\n        printf(\"%d : %d\\n\", (stuff + i)-&gt;x, (stuff + i)-&gt;y);\n    }\n\n    stuffArr = stuff;\n    return stuff; //this row\n}\n\nvoid deallocateArray(Stuff *stuffArr) {\n    free(stuffArr);\n}\n\nint main(){\n    Stuff * stuff = NULL;\n    printf(\"%d\\n\",stuff);\n    stuff=(Stuff*)allocateArray(stuff); ///this row\n    printf(\"%p\\n\",stuff);\n    deallocateArray(stuff);\n    printf(\"%p\\n\",stuff);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5906675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfZHm.png?s=128&g=1", "display_name": "spatmac", "link": "https://stackoverflow.com/users/5906675/spatmac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1473845150, "accepted_answer_id": 39485551, "answer_count": 4, "score": -1, "last_activity_date": 1473841332, "creation_date": 1473839734, "question_id": 39485246, "link": "https://stackoverflow.com/questions/39485246/how-do-i-get-this-to-compile-for-x64", "closed_reason": "Duplicate", "title": "How do i get this to compile for x64", "body": "<p>This compiles fine in x86, but when I used it in x64 configuration the x and y variables do not have an address when I try to access them? Do need some sort of padding to align to a larger address? Using MSVC..  </p>\n\n<pre><code>#define ARR_SIZE 25\n\ntypedef struct {\n    unsigned int x;\n    unsigned int y;\n}Stuff;\n\nvoid allocateArray(Stuff *stuffArr) {\n\n    Stuff *stuff = malloc(sizeof (Stuff) * ARR_SIZE);\n\n    for (int i = 0; i &lt; ARR_SIZE; i++) {\n        (*(stuff + i)) = (Stuff) { i, i + i };\n    }\n\n    for (int i = 0; i &lt; ARR_SIZE; i++) {\n        printf(\"%d : %d\\n\", (stuff + i)-&gt;x, (stuff + i)-&gt;y);\n    }\n\n    stuffArr = stuff;\n}\n\nvoid deallocateArray(Stuff *stuffArr) {\n    free(stuffArr);\n}\n\nint main(){\n    Stuff * stuff = NULL;\n\n    allocateArray(stuff);\n    deallocateArray(stuff);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "operators", "sizeof"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1473838256, "post_id": 39484780, "comment_id": 66287855, "body": "What all are the &quot;compilation&quot; states?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1473838754, "post_id": 39484780, "comment_id": 66288139, "body": "It is evaluated after the preprocessor is run (the preprocessor does not recognize <code>sizeof</code>) and before the object files are created by the assembler or linked to produce an executable \u2014 so it is evaluated in the main &#39;compiler&#39;.  Note that the preprocessor and compiler and assembler (and, indeed, the linker) could all be a single program or they could be multiple programs; the standard doesn&#39;t care.  The exception is for the size of a VLA \u2014 variable length array.  That may need to be evaluated at run-time instead of compile-time."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473839098, "post_id": 39484780, "comment_id": 66288336, "body": "@JonathanLeffler You should post that as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "is_accepted": false, "score": 3, "last_activity_date": 1473841737, "creation_date": 1473841737, "answer_id": 39485823, "question_id": 39484780, "link": "https://stackoverflow.com/questions/39484780/sizeof-operator-evaluates-in-which-stage-of-compilation-in-gcc/39485823#39485823", "title": "sizeof operator evaluates in which stage of compilation in gcc", "body": "<p>Typically, after the preprocessor runs and produces the preprocessed translation unit (whole header files pasted in the place of <code>#include</code>, <code>#define</code>'s substituted all over the place, inactive branches of <code>#ifdef</code> conditionals completely removed, etc.), the compiler runs. Most modern compilers are usually also able to do the preprocessing themselves, but for historic reasons, the C preprocessor (<code>cpp</code>) and the C compiler (<code>cc</code>) are at least conceptually distinct. The output of the former serves as input to the latter.</p>\n\n<p>At consequent stages, it is entirely up to the internal implementation of the compiler what these stages are and what their order is. The most \"traditional\" pipeline, however, is:</p>\n\n<ul>\n<li>Lexing: separation of tokens from one another;</li>\n<li>Parsing: interpreting the combinations of tokens according to the language grammar and producing a parse tree;</li>\n<li>Producing an Abstract Syntax Tree: the parse tree is taken as input and a more usable, better annotated tree is produced;</li>\n<li>Scope analysis: matching the used identifiers with their respective declarations, emitting errors in case of undeclared identifiers;</li>\n<li>Type checking: checking whether the type of each expression matches the expected type in the particular context. After this stage has passed and no errors have been emitted, the program is considered syntactically and semantically correct, so we can proceed with the next step;</li>\n<li>Code generation and optimisation: possibly at this stage, the compiler would emit, for example, <code>4</code> in place of the abstract node that represents <code>sizeof(int)</code>. It would also chew up constant expressions like <code>3 + 4</code> into <code>7</code>.</li>\n</ul>\n\n<p>Note that <code>sizeof</code> can be evaluated at runtime in case it is applied to a variable-length array (C99 onwards):</p>\n\n<pre><code>int n;\nn = ...;\nint vl_arr[n];\nsizeof(vl_arr); // could be evaluated at runtime if \"n\" is not known at compile-time\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4348222, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UI5mxJr_eh0/AAAAAAAAAAI/AAAAAAAAAGs/CPE6MJ-B7_k/photo.jpg?sz=128", "display_name": "Vishwas M P", "link": "https://stackoverflow.com/users/4348222/vishwas-m-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1473842362, "creation_date": 1473838124, "last_edit_date": 1495535442, "question_id": 39484780, "link": "https://stackoverflow.com/questions/39484780/sizeof-operator-evaluates-in-which-stage-of-compilation-in-gcc", "title": "sizeof operator evaluates in which stage of compilation in gcc", "body": "<p><code>sizeof</code> is a compile time operator. <a href=\"https://stackoverflow.com/questions/2615203/is-sizeof-in-c-evaluated-at-compilation-time-or-run-time\">See here</a>.</p>\n\n<p>Compilation has many stages. At which stage is the <code>sizeof</code> operator evaluated?</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1473838631, "post_id": 39484699, "comment_id": 66288081, "body": "What do you mean by &quot;how many threads&quot;? The code is going to use as many thread as you tell it to. Or do you expect the compiler to automagically split your code onto multiple threads?"}, {"owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1473838771, "post_id": 39484699, "comment_id": 66288155, "body": "I think when running(after the compilation) an application, it will not be run by a single thread ? Or for example in Java if you use the multicore VM and run an application, this will automatically use multiple threads."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1473838917, "post_id": 39484699, "comment_id": 66288243, "body": "If you write your code to be single-threaded it is going to be run by a single thread. If your code is multi-threaded it is going to be executed on multiple threads. Automatically multi-threading code is an active area of research but still difficult to pull off in practice, as it requires a ton of code analysis."}, {"owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1473839288, "post_id": 39484699, "comment_id": 66288437, "body": "I think that if you write code without specifying threads, it will be run by multiple threads. Otherwise, why would we need mutexes in case of manipulating elements to a list which is static and global"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1473841681, "post_id": 39484699, "comment_id": 66289790, "body": "@Bionix1441 &quot;I think that if you write code without specifying threads, it will be run by multiple threads.&quot; No, that is nonsense. &quot;Otherwise, why would we need mutexes in case of manipulating elements to a list which is static and global&quot; The only reason why you would do that, is because you are writing code that you expect to be executed by multi-threaded programs."}, {"owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1473842199, "post_id": 39484699, "comment_id": 66290051, "body": "@Lundin ok, thanks"}], "owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473837840, "creation_date": 1473837840, "question_id": 39484699, "link": "https://stackoverflow.com/questions/39484699/how-is-the-code-divided-upon-threads-in-multithreaded-environments", "title": "How is the code divided upon threads in multithreaded environments?", "body": "<p>In multithreaded environments, is there a way to find out how many threads are going to execute the code. Is every line of code a candidate for being run with a different thread ? What determines the number of lines that each thread will run ?</p>\n"}, {"tags": ["c", "arrays", "loops", "memory"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 5, "creation_date": 1473836906, "post_id": 39484391, "comment_id": 66287126, "body": "It isn&#39;t &quot;working&quot;. It&#39;s invoking <i>undefined behavior</i>, and as such, what you get for results is irrelevant."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1473836920, "post_id": 39484391, "comment_id": 66287131, "body": "What are you trying to do? What is the point of <code>n = n + 1;</code>?"}, {"owner": {"reputation": 1889, "user_id": 2795017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e78e72be0d3f80266ebb2165001434?s=128&d=identicon&r=PG&f=1", "display_name": "Karunakar", "link": "https://stackoverflow.com/users/2795017/karunakar"}, "edited": false, "score": 0, "creation_date": 1473836958, "post_id": 39484391, "comment_id": 66287144, "body": "please refer to the link : <a href=\"https://www.tutorialspoint.com/data_structures_algorithms/array_data_structure.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/data_structures_algorithms/&hellip;</a>"}, {"owner": {"reputation": 1889, "user_id": 2795017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e78e72be0d3f80266ebb2165001434?s=128&d=identicon&r=PG&f=1", "display_name": "Karunakar", "link": "https://stackoverflow.com/users/2795017/karunakar"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1473837019, "post_id": 39484391, "comment_id": 66287179, "body": "@purplepsycho : that&#39;s what my doubt.:p"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1473837122, "post_id": 39484391, "comment_id": 66287241, "body": "@Karunakar the example you linked is indeed what you posted here, and in my opinion grounds to squelch ever visiting that site again for tutoring. That posted code invokes <i>undefined behavior</i>, plain and simple. They&#39;re doing you a <i>tremendous</i> disservice by teaching you to program like that."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1473837280, "post_id": 39484391, "comment_id": 66287332, "body": "I second what @WhozCraig said. Stop visiting that site and blacklist it."}, {"owner": {"reputation": 1889, "user_id": 2795017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e78e72be0d3f80266ebb2165001434?s=128&d=identicon&r=PG&f=1", "display_name": "Karunakar", "link": "https://stackoverflow.com/users/2795017/karunakar"}, "edited": false, "score": 0, "creation_date": 1473837325, "post_id": 39484391, "comment_id": 66287357, "body": "i know the problem. but , i wanted to know how its working in that site."}, {"owner": {"reputation": 1889, "user_id": 2795017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e78e72be0d3f80266ebb2165001434?s=128&d=identicon&r=PG&f=1", "display_name": "Karunakar", "link": "https://stackoverflow.com/users/2795017/karunakar"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1473837345, "post_id": 39484391, "comment_id": 66287371, "body": "@SouravGhosh : thanks man"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1473837451, "post_id": 39484391, "comment_id": 66287433, "body": "To: Karunakar,  Notice the use of  <i>&quot;quotes&quot;</i> in the very first comment by @WhozCraig, and read the link in my answer to understand more about that."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1473837611, "post_id": 39484391, "comment_id": 66287518, "body": "In short: It works accidentally. There is no dynamic allocation."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1473839420, "post_id": 39484391, "comment_id": 66288504, "body": "The internet is full of crap. Like that site."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1482176866, "post_id": 39484391, "comment_id": 69659010, "body": "@Karunakar: <i>Most likely</i>, that code is writing to some unused &quot;scratch&quot; space or padding that&#39;s on the stack for alignment purposes. It <i>appears</i> to work because it isn&#39;t writing over anything important.  If you tried to add more than one object to the array, you would most likely corrupt data or have a runtime error."}], "answers": [{"comments": [{"owner": {"reputation": 1889, "user_id": 2795017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e78e72be0d3f80266ebb2165001434?s=128&d=identicon&r=PG&f=1", "display_name": "Karunakar", "link": "https://stackoverflow.com/users/2795017/karunakar"}, "edited": false, "score": 0, "creation_date": 1473837061, "post_id": 39484432, "comment_id": 66287201, "body": "please refer to the source link : <a href=\"https://www.tutorialspoint.com/data_structures_algorithms/array_data_structure.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/data_structures_algorithms/&hellip;</a>"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 1889, "user_id": 2795017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e78e72be0d3f80266ebb2165001434?s=128&d=identicon&r=PG&f=1", "display_name": "Karunakar", "link": "https://stackoverflow.com/users/2795017/karunakar"}, "edited": false, "score": 4, "creation_date": 1473837187, "post_id": 39484432, "comment_id": 66287275, "body": "@Karunakar simply change source to learn C. Someone who post such code should never teach C!"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 1889, "user_id": 2795017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e78e72be0d3f80266ebb2165001434?s=128&d=identicon&r=PG&f=1", "display_name": "Karunakar", "link": "https://stackoverflow.com/users/2795017/karunakar"}, "edited": false, "score": 4, "creation_date": 1473837200, "post_id": 39484432, "comment_id": 66287287, "body": "@Karunakar You should probably refer to another tutorial. The code you are linking to is just as wrong as yours."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 5, "last_activity_date": 1473837480, "last_edit_date": 1473837480, "creation_date": 1473836960, "answer_id": 39484432, "question_id": 39484391, "link": "https://stackoverflow.com/questions/39484391/int-la-1-2-3-4-5-memory-allocation-confusion-in-c/39484432#39484432", "title": "int LA[] = {1,2,3,4,5} memory allocation confusion in c", "body": "<p>First, a general statement, for an array defined without explicit size and initialized using brace-enclosed initializer, the size will depend o the elements in the initializer list. So, for your array</p>\n\n<pre><code> int LA[] = {1,3,5,7,8};\n</code></pre>\n\n<p>size will be <code>5</code>, as you have 5 elements.</p>\n\n<p>C uses 0-based array indexing, so the valid access will be 0 to 4.</p>\n\n<p>In your code</p>\n\n<pre><code> LA[j+1] = LA[j];\n</code></pre>\n\n<p>trying to access index <code>6</code>, (<code>5+1</code>) which is out of bound access. This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>Output of a code having UB cannot be justified in any way.</p>\n\n<hr>\n\n<p>That said, <code>main()</code> is technically an invalid signature as per latest C standards. You need to use at least <code>int main(void)</code> to make the code conforming for a hosted environment.</p>\n"}, {"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 2, "last_activity_date": 1473838306, "creation_date": 1473838306, "answer_id": 39484832, "question_id": 39484391, "link": "https://stackoverflow.com/questions/39484391/int-la-1-2-3-4-5-memory-allocation-confusion-in-c/39484832#39484832", "title": "int LA[] = {1,2,3,4,5} memory allocation confusion in c", "body": "<p>The code has a buffer overflow bug! Arrays in C cannot be extended! You need to allocate enough space when you declare/define it.</p>\n\n<p>You can declare additional space by supplying a size in the declaration:</p>\n\n<pre><code>int LA[10] = {1,3,5,7,8};\n</code></pre>\n\n<p><code>LA</code> will now have room for 10 elements with index 0 through 9.</p>\n\n<p>If you want more flexibility you should use a pointer and <code>malloc</code>/<code>calloc</code>/<code>realloc</code> to allocate memory.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>There is a second bug in the copying. The loop starts one step too far out. </p>\n\n<p>With <code>j</code> starting at 5 and assigning index <code>j+1</code> the code assigns <code>LA[6]</code>, which is the 7th element. After the insertion there are only 6 elements.</p>\n\n<p>My conclusion from these 2 bugs is that the tutorial was neither written nor reviewed by an experienced C programmer. </p>\n"}, {"tags": [], "owner": {"reputation": 218, "user_id": 5624940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a64af18c50dc31749efbe06a5e50648?s=128&d=identicon&r=PG&f=1", "display_name": "PhantomWhiskers", "link": "https://stackoverflow.com/users/5624940/phantomwhiskers"}, "is_accepted": false, "score": 0, "last_activity_date": 1473838733, "creation_date": 1473838733, "answer_id": 39484949, "question_id": 39484391, "link": "https://stackoverflow.com/questions/39484391/int-la-1-2-3-4-5-memory-allocation-confusion-in-c/39484949#39484949", "title": "int LA[] = {1,2,3,4,5} memory allocation confusion in c", "body": "<p>To add on to the other answers, C/C++ do not do any bounds checking for arrays.</p>\n\n<p>In this case you have a stack allocated array, so as long as your index does not leave stack space, there will be no \"errors\" during runtime. However, since you are leaving the bounds of your array, it is possible that you may end up changing the values of other variables that are also allocated in the stack if it's memory location happens to be immediately after the allocated array. This is one of the dangers of buffer overflows and can cause very bad things to happen in more complex programs.</p>\n"}], "owner": {"reputation": 1889, "user_id": 2795017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e78e72be0d3f80266ebb2165001434?s=128&d=identicon&r=PG&f=1", "display_name": "Karunakar", "link": "https://stackoverflow.com/users/2795017/karunakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1473838733, "creation_date": 1473836799, "last_edit_date": 1473837434, "question_id": 39484391, "link": "https://stackoverflow.com/questions/39484391/int-la-1-2-3-4-5-memory-allocation-confusion-in-c", "title": "int LA[] = {1,2,3,4,5} memory allocation confusion in c", "body": "<p>I have observed that memory allocated for array seems to be dynamic. </p>\n\n<p>Here is the sample code I found in this <a href=\"https://www.tutorialspoint.com/data_structures_algorithms/array_data_structure.htm\" rel=\"nofollow\">tutorial</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nmain() {\n   int LA[] = {1,3,5,7,8};\n   int item = 10, k = 3, n = 5;\n   int i = 0, j = n;\n\n   printf(\"The original array elements are :\\n\");\n\n   for(i = 0; i&lt;n; i++) {\n      printf(\"LA[%d] = %d \\n\", i, LA[i]);\n   }\n\n   n = n + 1;\n\n   while( j &gt;= k){\n      LA[j+1] = LA[j];\n      j = j - 1;\n   }\n\n   LA[k] = item;\n\n   printf(\"The array elements after insertion :\\n\");\n\n   for(i = 0; i&lt;n; i++) {\n      printf(\"LA[%d] = %d \\n\", i, LA[i]);\n   }\n}\n</code></pre>\n\n<p>and sample output:</p>\n\n<blockquote>\n<pre><code>The original array elements are :\nLA[0]=1 \nLA[1]=3 \nLA[2]=5 \nLA[3]=7 \nLA[4]=8 \nThe array elements after insertion :\nLA[0]=1 \nLA[1]=3 \nLA[2]=5 \nLA[3]=10 \nLA[4]=7 \nLA[5]=8\n</code></pre>\n</blockquote>\n\n<p>How its working I did not get.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473837323, "post_id": 39484369, "comment_id": 66287356, "body": "You will have two processes after the <code>fork()</code>; you&#39;ll need to use some form of IPC \u2014 Inter-process Communication.  Since you need to send addresses and messages around the place, you&#39;re likely to be using sockets.  You will need to read about how to set up sockets.  There are many relevant questions here on SO that will help.  Most of them involve a single client and a server; this appears to involve two clients and a server, but the two clients can be separate copies of the same program."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473837335, "post_id": 39484369, "comment_id": 66287366, "body": "It also isn&#39;t clear that you&#39;d be using fork in this scenario; normally, the server would run and the clients would connect independently."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1473837569, "post_id": 39484369, "comment_id": 66287487, "body": "fork is not related to sending and receiving messages together. Please ask a more specific question. Show code you already wrote, and indicate which place is giving you trouble."}, {"owner": {"reputation": 27, "user_id": 6244221, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/6O7oh.jpg?s=128&g=1", "display_name": "Umair Nazir", "link": "https://stackoverflow.com/users/6244221/umair-nazir"}, "edited": false, "score": 0, "creation_date": 1473837613, "post_id": 39484369, "comment_id": 66287519, "body": "actually its an assignment question and its requirement to do that using fork for 4 clients and 1 server"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1473837690, "post_id": 39484369, "comment_id": 66287556, "body": "I think your teacher want you to use <a href=\"http://tldp.org/LDP/lpg/node11.html\" rel=\"nofollow noreferrer\">pipe</a> to allow communication between process"}, {"owner": {"reputation": 27, "user_id": 6244221, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/6O7oh.jpg?s=128&g=1", "display_name": "Umair Nazir", "link": "https://stackoverflow.com/users/6244221/umair-nazir"}, "edited": false, "score": 0, "creation_date": 1473838292, "post_id": 39484369, "comment_id": 66287885, "body": "the problem is how i will send address with message..... else communication between client and server have done"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1473838529, "post_id": 39484369, "comment_id": 66288023, "body": "We don&#39;t have enough elements to help you on this point... If address haven&#39;t been defined, you have to define it. So use what is easier for you: client 1 have address 1, client 2 address 2, .... and create a structure like this <code>struct{ int address; struct message msg;};</code> which became your new message used to communicate through the pipe (encapsulate your message inside a new one which useful information for that level of transport)"}], "answers": [{"comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1473837824, "post_id": 39484512, "comment_id": 66287634, "body": "It&#39;s an educational question, so his teacher want to simulate client/server to illustrate use of some basic system API like <code>fork</code> and IPC. It&#39;s a common training, event if I agree with you terms &quot;client/server&quot; isn&#39;t relevant in this case"}, {"owner": {"reputation": 407, "user_id": 5696425, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6112ba87f3610be62d8a0263027f638b?s=128&d=identicon&r=PG&f=1", "display_name": "ZoOl007", "link": "https://stackoverflow.com/users/5696425/zool007"}, "edited": false, "score": 0, "creation_date": 1473838089, "post_id": 39484512, "comment_id": 66287773, "body": "I agree - forking is a very bad idea in this case. If you want to read up on select() have a look at this excellent guide : <a href=\"https://beej.us/guide/bgnet/output/html/multipage/advanced.html#select\" rel=\"nofollow noreferrer\">link</a> . It helped me a lot."}], "tags": [], "owner": {"reputation": 21, "user_id": 5114289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15a1b3121f31d107e4e65bb0558e1ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre Dubois", "link": "https://stackoverflow.com/users/5114289/alexandre-dubois"}, "is_accepted": false, "score": 2, "last_activity_date": 1473837230, "creation_date": 1473837230, "answer_id": 39484512, "question_id": 39484369, "link": "https://stackoverflow.com/questions/39484369/use-of-fork-command-in-c-in-a-chat-application/39484512#39484512", "title": "Use of fork command in C in a chat application", "body": "<p>I don't think you should use fork in this case. You can keep an array containing your client's sockets with a unique ID, which can be the address, and forward the message you receive from a client to the one with the ID specified in the original message. The select() system call can be useful when monitoring an array of file descriptors.</p>\n"}], "owner": {"reputation": 27, "user_id": 6244221, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/6O7oh.jpg?s=128&g=1", "display_name": "Umair Nazir", "link": "https://stackoverflow.com/users/6244221/umair-nazir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473838025, "creation_date": 1473836736, "last_edit_date": 1473837604, "question_id": 39484369, "link": "https://stackoverflow.com/questions/39484369/use-of-fork-command-in-c-in-a-chat-application", "title": "Use of fork command in C in a chat application", "body": "<p>I have a problem in this question, please anyone can guide me</p>\n\n<p>Communication between client and server in C ubantu:</p>\n\n<p>Client will send message and address of another client  to server and server will forward that message to that client. Other client will reply to server in a same format and server will forward that message to specified client.</p>\n\n<p>I have to use fork command in this Question.</p>\n\n<p>How I will send address to server and message together?</p>\n"}, {"tags": ["c", "conditional-statements"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1473836589, "post_id": 39484298, "comment_id": 66286976, "body": "Which part are you having trouble with?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 5, "creation_date": 1473836629, "post_id": 39484298, "comment_id": 66286996, "body": "You may find info on <a href=\"https://en.wikipedia.org/wiki/%3F:\" rel=\"nofollow noreferrer\">the <b>ternary operator</b></a> helpful. Also discussed compared to if-else <a href=\"https://stackoverflow.com/questions/1659992/if-else-vs-ternary-operator\">on <b>this very site</b></a>."}, {"owner": {"reputation": 896, "user_id": 6468937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/G4VPe.png?s=128&g=1", "display_name": "N.J.Dawson", "link": "https://stackoverflow.com/users/6468937/n-j-dawson"}, "edited": false, "score": 1, "creation_date": 1473836711, "post_id": 39484298, "comment_id": 66287034, "body": "If this helps, this is what it would look like if it used if statements <a href=\"http://pastebin.com/raw/LCvjaYFw\" rel=\"nofollow noreferrer\">pastebin.com/raw/LCvjaYFw</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1473836953, "post_id": 39484298, "comment_id": 66287143, "body": "That means that whoever wrote the code needs to be made to maintain it forever (or they should be taken out, shot, hung, drawn, quartered and then made to fix the code so it is vaguely maintainable).  It&#39;s an abomination, and only a sadistic tutor would write code like that."}, {"owner": {"reputation": 11, "user_id": 4848005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EHiIFm58nkw/AAAAAAAAAAI/AAAAAAAAABY/GjvmdJFDlx0/photo.jpg?sz=128", "display_name": "Shuvo Karmakar", "link": "https://stackoverflow.com/users/4848005/shuvo-karmakar"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1473837025, "post_id": 39484298, "comment_id": 66287183, "body": "@WhozCraig thanks, I got the answer :))"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1473892435, "creation_date": 1473892435, "answer_id": 39500650, "question_id": 39484298, "link": "https://stackoverflow.com/questions/39484298/meaning-of-the-int-n-a-b-a-a-b-10-a-b-0/39500650#39500650", "title": "Meaning of the &quot;int N = a == b ? a : a + b == 10 ? a + b : 0;&quot;", "body": "<p>With implicit parenthesis, this expression is equivalent to:</p>\n\n<pre><code>int N = (a == b) ? a : ((a + b) == 10) ?  (a + b) : 0;\n</code></pre>\n\n<p>This assigns to <code>N</code>:</p>\n\n<ol>\n<li>The value of <code>a</code>, if <code>a</code> and <code>b</code> are equal.  If not...</li>\n<li>The value of <code>a + b</code>, if <code>a + b</code> is 10 (i.e. <code>N</code> is assigned 10).  If not...</li>\n<li>The value <code>0</code>.</li>\n</ol>\n\n<p>I've most often seen this construct used when calculating the number of days in February for a given year.</p>\n\n<pre><code>int febDays = (year % 4 != 0) ? 28 : \n                (year % 100 != 0) ? 29 : \n                  (year % 400 != 0) ? 28 : 29;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4848005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EHiIFm58nkw/AAAAAAAAAAI/AAAAAAAAABY/GjvmdJFDlx0/photo.jpg?sz=128", "display_name": "Shuvo Karmakar", "link": "https://stackoverflow.com/users/4848005/shuvo-karmakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1473892435, "creation_date": 1473836490, "last_edit_date": 1473836722, "question_id": 39484298, "link": "https://stackoverflow.com/questions/39484298/meaning-of-the-int-n-a-b-a-a-b-10-a-b-0", "title": "Meaning of the &quot;int N = a == b ? a : a + b == 10 ? a + b : 0;&quot;", "body": "<pre><code>int a = 5, b = 7;\nint N = a == b ? a : a + b == 10 ? a + b : 0;\n</code></pre>\n\n<p>What is the meaning of the following code?\nUpdate: Mainly i want to know for which cause I can use it and how it works ?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5114289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15a1b3121f31d107e4e65bb0558e1ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre Dubois", "link": "https://stackoverflow.com/users/5114289/alexandre-dubois"}, "is_accepted": false, "score": 0, "last_activity_date": 1473838654, "creation_date": 1473838654, "answer_id": 39484929, "question_id": 39484159, "link": "https://stackoverflow.com/questions/39484159/how-do-i-run-a-python-script-and-pass-arguments-to-it-in-c/39484929#39484929", "title": "How do I run a python script and pass arguments to it in C", "body": "<p>You can generate your command as a string. You just need to loop through argv[] to append each parameters given to the C program at then end of your command string. Then you can use your command string as the argument for the system() function.</p>\n"}, {"tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 2, "last_activity_date": 1473840657, "last_edit_date": 1495541302, "creation_date": 1473838684, "answer_id": 39484937, "question_id": 39484159, "link": "https://stackoverflow.com/questions/39484159/how-do-i-run-a-python-script-and-pass-arguments-to-it-in-c/39484937#39484937", "title": "How do I run a python script and pass arguments to it in C", "body": "<p>Using <code>system()</code> is needlessly complicated in this case, as it effectively passes the given command string to (forked) <code>sh -c &lt;command&gt;</code>. This means that you'd have to handle possible quoting of arguments etc. when forming the command string:</p>\n\n<pre><code> % sh -c 'ls asdf asdf' \nls: cannot access 'asdf': No such file or directory\nls: cannot access 'asdf': No such file or directory\n % sh -c 'ls \"asdf asdf\"'\nls: cannot access 'asdf asdf': No such file or directory\n</code></pre>\n\n<p>Note the difference between the unquoted and quoted versions.</p>\n\n<p>I'd suggest using <code>execve()</code>, if executing the python command is the only purpose of your C program, as the <em>exec</em> family of functions do not return on success. It takes an array of const pointers to char as the new <em>argv</em>, which makes handling arguments easier:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n#define PYTHON \"/usr/bin/python3\"\n#define SCRIPT \"script.py\"\n\nint\nmain(int argc, char *argv[])\n{\n    /* Reserve enough space for \"python3\", \"script.py\", argv[1..] copies\n     * and a terminating NULL, 1 + 1 + (argc - 1) + 1 */\n    int newargvsize = argc + 2;\n    /* VLA could be used here as well. */\n    char **newargv = malloc(newargvsize * sizeof(*newargv));\n    char *newenv[] = { NULL };\n\n    newargv[0] = PYTHON;\n    newargv[1] = SCRIPT;\n    /* execve requires a NULL terminated argv */\n    newargv[newargvsize - 1] = NULL;\n    /* Copy over argv[1..] */\n    memcpy(&amp;newargv[2], &amp;argv[1], (argc - 1) * sizeof(*newargv));\n    /* execve does not return on success */\n    execve(PYTHON, newargv, newenv);\n    perror(\"execve\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>As pointed out by others, you should use the <a href=\"https://stackoverflow.com/questions/12142174/run-a-python-script-with-arguments\">official APIs</a> for this, if at all possible.</p>\n"}], "owner": {"reputation": 6216, "user_id": 1463622, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/k0sic.png?s=128&g=1", "display_name": "Krimson", "link": "https://stackoverflow.com/users/1463622/krimson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 0, "accepted_answer_id": 39484937, "answer_count": 2, "score": 0, "last_activity_date": 1473840657, "creation_date": 1473835954, "question_id": 39484159, "link": "https://stackoverflow.com/questions/39484159/how-do-i-run-a-python-script-and-pass-arguments-to-it-in-c", "title": "How do I run a python script and pass arguments to it in C", "body": "<p>I have a python script <code>script.py</code> which takes command line params</p>\n\n<p>I want to make a wrapper in C so I can call the <code>script.py</code> using <code>./script args</code></p>\n\n<p>So far I have this in my <code>script.c</code> file</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[]){\n    system(\"python3.4 script.py\");\n    return 0;\n}\n</code></pre>\n\n<p>How do I modify the script so I can do <code>./script arg1 arg2</code> and the C code executes <code>system(\"python3.4 script.py arg1 arg2\");</code></p>\n\n<p>I don't have experience in C. Above code is from googling</p>\n"}, {"tags": ["c", "opengl", "segmentation-fault", "glsl", "shader"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2933244"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1473835300, "post_id": 39483903, "comment_id": 66286391, "body": "Yeah, sorry about that."}, {"owner": {"reputation": 703, "user_id": 5778900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh1qL.png?s=128&g=1", "display_name": "pleluron", "link": "https://stackoverflow.com/users/5778900/pleluron"}, "edited": false, "score": 0, "creation_date": 1473850605, "post_id": 39483903, "comment_id": 66295047, "body": "glCompileShader shouldn&#39;t segfault because of invalid code; There is either an issue with your driver or with your code that creates and compiles the shader."}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "edited": false, "score": 0, "creation_date": 1473852065, "post_id": 39483903, "comment_id": 66295902, "body": "Are you sure you have the opengl context when you try to compile the shader ? Try to check the return value of glGetString(GL_VERSION) to check whether you have the context or not"}], "answers": [{"comments": [{"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1473874846, "post_id": 39486301, "comment_id": 66310649, "body": "It&#39;s been just &quot;texture&quot; ever since GLSL-1.20. <a href=\"https://www.opengl.org/sdk/docs/man/html/texture.xhtml\" rel=\"nofollow noreferrer\">opengl.org/sdk/docs/man/html/texture.xhtml</a>"}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1473910620, "post_id": 39486301, "comment_id": 66322786, "body": "In a <code>core</code> profile, it definitely shouldn&#39;t be <code>texture2D</code> (if the driver allows this, it&#39;s in error). You can use the old <code>texture2D</code> stuff if you want if you remove <code>core</code> from the shader version directive... but why would you want to? The dimensions of textures are pretty unimportant when figuring out what the purpose of the lookup is and so overloads exist to take care of that stuff; the only time you use a differently named texture function in GLSL 1.30+ is when you are doing something fundamentally different such as shadow mapping, projection, explicit LOD selection, etc."}, {"owner": {"reputation": 2465, "user_id": 409315, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/00a0fbc3efcfa199f5dec9691cdb1c78?s=128&d=identicon&r=PG", "display_name": "codetiger", "link": "https://stackoverflow.com/users/409315/codetiger"}, "edited": false, "score": 0, "creation_date": 1473911561, "post_id": 39486301, "comment_id": 66322975, "body": "Ok, Thanks for the info. I am more from a GLSL es background so &#39;texture2D&#39; is what we use there."}], "tags": [], "owner": {"reputation": 2465, "user_id": 409315, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/00a0fbc3efcfa199f5dec9691cdb1c78?s=128&d=identicon&r=PG", "display_name": "codetiger", "link": "https://stackoverflow.com/users/409315/codetiger"}, "is_accepted": false, "score": 0, "last_activity_date": 1473858513, "last_edit_date": 1473858513, "creation_date": 1473843256, "answer_id": 39486301, "question_id": 39483903, "link": "https://stackoverflow.com/questions/39483903/glcompileshader-segfault-because-of-an-if-statement/39486301#39486301", "title": "glCompileShader segfault because of an if statement", "body": "<p>The code below should work fine. The problem in your code is tricky as it might be the problem during  optimisation. </p>\n\n<p>Also, isn't it 'texture2D' instead of 'texture'?</p>\n\n<pre><code>#version 330 core\nuniform sampler2D sampler;\nuniform vec3 clr;\nvec2 pos;\nvoid main(void) {\n    pos.x = gl_FragCoord.x / 960.0;\n    pos.y = gl_FragCoord.y / 540.0;\n\n    float rValue = texture(sampler, pos.st).r;\n\n    gl_FragColor = vec4(clr, 1.0) * mix(1.0, 0.5, rValue &gt; 0.5);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1473874681, "last_edit_date": 1473874681, "creation_date": 1473868324, "answer_id": 39494806, "question_id": 39483903, "link": "https://stackoverflow.com/questions/39483903/glcompileshader-segfault-because-of-an-if-statement/39494806#39494806", "title": "glCompileShader segfault because of an if statement", "body": "<blockquote>\n  <p>This throws segmentation fault somewhere inside glCompileShader</p>\n</blockquote>\n\n<p>Problems like these are usually caused by out-of-bounds memory access. The API of glShaderSource is specified (version 4.5) as following (emphasis by me):</p>\n\n<blockquote>\n  <p>The command</p>\n\n<pre><code>void glShaderSource(\n    GLuint shader,\n    GLsizei count,\n    const GLchar *const *string,\n    const GLint *length );\n</code></pre>\n  \n  <p>loads source code into the shader object named shader. string is an\n  array of count pointers to <strong>optionally null-terminated</strong> character\n  strings that make up the source code. The <strong>length</strong> argument is an array\n  with the <strong>number of chars</strong> in each string (the string length). If an\n  element in length is negative, its accompanying string is\n  null-terminated. If length is NULL, all strings in the string argument\n  are considered null-terminated.</p>\n</blockquote>\n\n<p>This means that if you don't null-terminate your shader strings OpenGL expects you to pass it length information or vice versa.</p>\n\n<p>Why is this important is your case? The one important difference between your two shader sources is the length of the shader source string. And it's quite possible that after the end of the shorter source a couple of null bytes may appear\u00b9. And the small change of making your shader source string just a little bit longer may have a huge effect on where it's going to end up in memory and what comes after it.</p>\n\n<p>So why might your shader source string not be null-terminated? For example if you read it from a file and allocate the memory to be exactly the file size. In that case there's not going to be a null-termination character.</p>\n\n<p>The takeaway is: Either properly null-terminate your shader source strings or explicitly pass in the shader source string length. Preferably do both (it never hurts to be paranoid about out-of-bounds memory access).</p>\n\n<hr>\n\n<p>1: Maybe leftovers from a previous allocation at the same memory spot, or maybe your source string was short enough that it fit into a single page and the malloc implementation decided that requesting a fresh page would be appropriate (and fresh pages usually read zero unless it's not explicitly requested to not initialize them).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2933244"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1473874681, "creation_date": 1473834992, "last_edit_date": 1473839805, "question_id": 39483903, "link": "https://stackoverflow.com/questions/39483903/glcompileshader-segfault-because-of-an-if-statement", "title": "glCompileShader segfault because of an if statement", "body": "<p>This fragment shader compiles and works without a problem:</p>\n\n<pre><code>#version 330 core\nuniform sampler2D sampler;\nuniform vec3 clr;\nvec2 pos;\nvoid main(void) {\n    pos.x = gl_FragCoord.x / 960.0;\n    pos.y = gl_FragCoord.y / 540.0;\n    gl_FragColor = vec4(clr,1) * texture(sampler, pos.st);\n}\n</code></pre>\n\n<p>This throws segmentation fault somewhere inside <code>glCompileShader</code>:</p>\n\n<pre><code>#version 330 core\nuniform sampler2D sampler;\nuniform vec3 clr;\nvec2 pos;\nvoid main(void) {\n    pos.x = gl_FragCoord.x / 960.0;\n    pos.y = gl_FragCoord.y / 540.0;\n    if (texture(sampler, pos.st).r &gt; 0.5) {\n        gl_FragColor = vec4(clr, 1) * 0.5;\n    }\n    else {\n        gl_FragColor = vec4(clr, 1);\n    }\n}\n</code></pre>\n\n<p>Everything else is identical. Does anyone know the reason behind this?</p>\n"}, {"tags": ["c", "recursion", "collatz"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1473834793, "post_id": 39483787, "comment_id": 66286172, "body": "Consider passing two parameters, e.g. <code>int collatz(int start, int n)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 514, "user_id": 3796896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e336ab34fb3526b8f5f1edc5099bdb?s=128&d=identicon&r=PG&f=1", "display_name": "acornagl", "link": "https://stackoverflow.com/users/3796896/acornagl"}, "is_accepted": false, "score": 1, "last_activity_date": 1473837497, "last_edit_date": 1473837497, "creation_date": 1473836782, "answer_id": 39484382, "question_id": 39483787, "link": "https://stackoverflow.com/questions/39483787/c-recursive-collatz-conjecture-only-till-the-value-is-smaller-than-the-original/39484382#39484382", "title": "C Recursive Collatz Conjecture only till the value is smaller than the original integer", "body": "<p>I used two more parameters:</p>\n\n<ol>\n<li>startValue, to pass through the recursive calls the initial value and</li>\n<li>notFirstTime, to check if it is the first call (and not a recursive call). In this case a value n &lt;= startValue is allowed.</li>\n</ol>\n\n<p>Here the code:</p>\n\n<pre><code>int collatz (int startValue, int n, int notFirstTime){\n    printf(\"%d%s \", n, \" \");\n\n    if(n &lt;= startValue &amp;&amp; !notFirstTime)\n    {   // here I would get an error saying all path \n        //leads to the method itself\n        return n;\n    }\n    else\n    {\n        if ( n%2==0 )\n        {\n            collatz(startValue, n/2, 0);\n        }\n        else \n        {\n            collatz(startValue, (3*n)+1, 0);\n        }\n    }\n}\n\nint main() {\n    int x = 27;\n    int firstTime = 1;\n    int test = collatz(x,x, firstTime);\n    printf(\"\\nLast value: %d\\n\", test);\n    return 0;\n}\n</code></pre>\n\n<p>Please note that I removed two return statements from the recursive calls.</p>\n"}], "owner": {"reputation": 63, "user_id": 4577608, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/2c2fd79b153d772c3e5f627a1417e3dd?s=128&d=identicon&r=PG&f=1", "display_name": "Ace_J", "link": "https://stackoverflow.com/users/4577608/ace-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473846703, "creation_date": 1473834490, "last_edit_date": 1473846703, "question_id": 39483787, "link": "https://stackoverflow.com/questions/39483787/c-recursive-collatz-conjecture-only-till-the-value-is-smaller-than-the-original", "title": "C Recursive Collatz Conjecture only till the value is smaller than the original integer", "body": "<p>I'm writing an recursion method to calculate collatz conjecture for a sequence of positive integers. However, instead of stopping the calculation when the value reaches 1, I need it to stop when the value become smaller than or equal to the original value. I can't figure out what condition I should put in the if statement.</p>\n\n<pre><code>int collatz (int n) {\n    printf(\"%d%s\", n, \" \");\n\n    if(n &gt; collatz(n)) {   // here I would get an error saying all path leads to the method itself \n        return n;\n    }\n    else {\n        if(n % 2 == 0) {\n            return collatz(n / 2);\n        }\n        else {\n            return collatz((3 * n) + 1);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["javascript", "c++", "c", "comma"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1473834457, "post_id": 39483746, "comment_id": 66286030, "body": "Nothing useful here, but note : <i>&quot;evaluates its first operand &quot;</i>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1473834501, "post_id": 39483746, "comment_id": 66286050, "body": "Where did you find those examples?"}, {"owner": {"reputation": 449, "user_id": 1808496, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/de3ab41c644c3630dfc97dabb2ae0b42?s=128&d=identicon&r=PG", "display_name": "Ondrej", "link": "https://stackoverflow.com/users/1808496/ondrej"}, "edited": false, "score": 0, "creation_date": 1473839109, "post_id": 39483746, "comment_id": 66288341, "body": "&gt; When is the comma operator useful? &lt; Well I would say almost never. You are only confusing readers of code."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1473842461, "post_id": 39483746, "comment_id": 66290208, "body": "It is useful in a <code>for</code> loop, for example <code>for(x=0, y=0; ; x++, y++)</code> but is rarely useful elsewhere."}], "owner": {"reputation": 3905, "user_id": 884588, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5223c23571e439dbb8092bf743c9fe47?s=128&d=identicon&r=PG", "display_name": "Pars", "link": "https://stackoverflow.com/users/884588/pars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "closed_date": 1473834581, "answer_count": 0, "score": 0, "last_activity_date": 1473835035, "creation_date": 1473834272, "last_edit_date": 1495535631, "question_id": 39483746, "link": "https://stackoverflow.com/questions/39483746/why-use-comma-inside-if-statement-in-c-or-javascript", "closed_reason": "Duplicate", "title": "Why use comma inside if statement in C++ or Javascript", "body": "<p>I researched a lot and found out that <code>comma</code> inside an if statement is :</p>\n\n<blockquote>\n  <p>In the C and C++ programming languages, the comma operator\n  (represented by the token ,) is a binary operator that evaluates its\n  first operand and discards the result, and then evaluates the second\n  operand and returns this value (and type).</p>\n</blockquote>\n\n<p>and in javascript is something like <code>C</code> and <code>C++</code></p>\n\n<p>But still it is unclear to me, I can't get it why should I use some statements like these :</p>\n\n<pre><code>int a = 1, b = 0;\n\nif(a, b) // it is `false` because b is 0 --&gt; if(0)\n\nif(b, a) // it is `true` because a is 1 --&gt; if(1)\n</code></pre>\n\n<p>Or in a better example:</p>\n\n<pre><code>var number = 10;\nconsole.log(someFunc(number));\nfunction someFunc(number){\n    return !(0, isNaN(number));\n}\n// this results true. 0 is discarded and isNaN(10) is false so !(false) -&gt; true\n</code></pre>\n\n<p>What is the point of using <code>0</code> and <code>,</code> inside return condition ?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9579546/when-is-the-comma-operator-useful\">This is another link</a> others mentions but they didn't really answered the question. <strong>When is the comma operator useful?</strong></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1473834159, "post_id": 39483685, "comment_id": 66285895, "body": "That link doesn&#39;t lead anywhere useful."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1473834198, "post_id": 39483685, "comment_id": 66285912, "body": "I just fixed the link."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1473834374, "post_id": 39483685, "comment_id": 66285989, "body": "That wikipedia section is confused. The sentence quoted here would make more sense if the examples were <code>const int *ptrToConst;</code> and <code>const int * const constPtrToConst;</code>"}, {"owner": {"reputation": 1021, "user_id": 4268228, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-N62Hd0-L7ig/AAAAAAAAAAI/AAAAAAAAAGs/FJcyhG4ARPw/photo.jpg?sz=128", "display_name": "Shankar Shastri", "link": "https://stackoverflow.com/users/4268228/shankar-shastri"}, "edited": false, "score": 2, "creation_date": 1473834379, "post_id": 39483685, "comment_id": 66285991, "body": "Look Into This You Will Understand: <a href=\"http://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-and-int-const?rq=1\" title=\"what is the difference between const int const int const and int const\">stackoverflow.com/questions/1143262/&hellip;</a>"}, {"owner": {"reputation": 1951, "user_id": 6768585, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-p6a_zY9VHR0/AAAAAAAAAAI/AAAAAAAAAKw/e4Eg6291IAA/photo.jpg?sz=128", "display_name": "Farhan Yaseen", "link": "https://stackoverflow.com/users/6768585/farhan-yaseen"}, "edited": false, "score": 0, "creation_date": 1473834561, "post_id": 39483685, "comment_id": 66286077, "body": "const int *ptrToConst mean that pointer points to constant integer.So,you can not modify the value of constant integer. const int * const constPtrToConst points to constant int and you can not change address of constPtrToConst as well value constPtrToConst points to"}, {"owner": {"reputation": 223, "user_id": 4397808, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/PG27l.png?s=128&g=1", "display_name": "Bento", "link": "https://stackoverflow.com/users/4397808/bento"}, "edited": false, "score": 1, "creation_date": 1473837623, "post_id": 39483685, "comment_id": 66287527, "body": "Yes, I thought it was very ambiguous. I had indeed put some note in the Wiki &quot;talk&quot; tab of that article. The link clarifies me the correct meaning: left/right are meant to be &quot;of the * token&quot; (the Wikipedia text IMHO was at least undecipherable). So <i>name</i> == <i>pointer</i>, <i>type</i> == <i>pointee</i>."}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 4397808, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/PG27l.png?s=128&g=1", "display_name": "Bento", "link": "https://stackoverflow.com/users/4397808/bento"}, "edited": false, "score": 0, "creation_date": 1473840000, "post_id": 39484015, "comment_id": 66288817, "body": "Thank you very much guys. I was going out of my head through the cited part of Wikipedia. Some facts I had correctly deduced with the help of other  Stackoverf. threads.. But the most (e.g. left/right) I really do not. Thanks to the user and particularly to Shankar for the comments. The two answers are also fine: I would mark all the two replies as the answer. I cannot, so I take the chronologically first."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 1, "last_activity_date": 1473836555, "last_edit_date": 1473836555, "creation_date": 1473835390, "answer_id": 39484015, "question_id": 39483685, "link": "https://stackoverflow.com/questions/39483685/c-c-convention-for-pointers-and-const/39484015#39484015", "title": "C/C++ convention for pointers and `const`", "body": "<blockquote>\n  <p>In which sense does it modify?</p>\n</blockquote>\n\n<p>Modifies in the sense that it makes it constant, meaning it can't be modifed (assigned to, or passed to a function which might modify it).</p>\n\n<blockquote>\n  <p>What is intended with name vs type (see the above link)?</p>\n</blockquote>\n\n<p>Name means the word written in the source code here, I think.</p>\n\n<blockquote>\n  <p>And why should it be on the right side of const?</p>\n</blockquote>\n\n<p>\"Modifies name to its right\" means, by example:</p>\n\n<p><code>const char * str</code>, here <em>const</em> modifies <em>char</em>, in other words the characters are constant, you can't modify them. You can make <em>str</em> point to a new char, but you still can't modify it either (at least not through <em>str</em>). <code>*str = 'a';</code> is compiler error, <code>str = \"foo\";</code> is ok.</p>\n\n<p><code>char * const str</code>, here <em>const</em> modifies <em>str</em>, in other words the value of <em>str</em> can't be modified. It points to some char, and you can modify that char through <em>str</em>, but you can't make <em>str</em> to point to another char.  <code>*str = 'a';</code> is now ok, <code>str = \"foo\";</code> is error.</p>\n"}, {"tags": [], "owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "is_accepted": false, "score": 6, "last_activity_date": 1473837789, "last_edit_date": 1473837789, "creation_date": 1473836106, "answer_id": 39484207, "question_id": 39483685, "link": "https://stackoverflow.com/questions/39483685/c-c-convention-for-pointers-and-const/39484207#39484207", "title": "C/C++ convention for pointers and `const`", "body": "<p>The <code>const</code>, <code>volatile</code> and <code>restrict</code> (C99 onwards) keywords are considered <em>type qualifiers</em>. They are an integral part of type signatures and describe additional semantics about a type.</p>\n\n<p>If they appear at the topmost level of a declaration, they affect the declared identifier:</p>\n\n<pre><code>const int a = 5; // prevents modifications of \"a\"\nint *const p = &amp;x; // prevents modifications of \"p\", but not \"*p\"\nint **const q = &amp;y; // prevents modifications of \"q\", but not \"*q\" and \"**q\"\n</code></pre>\n\n<p>If they appear in pointer subtypes (before an asterisk), they affect the pointed-to value at the particular level of dereferencing:</p>\n\n<pre><code>const int *p = &amp;x; // prevents modifications of \"*p\", but not \"p\"\nconst int **q = &amp;y; // prevents modifications of \"**q\", but not \"*q\" and \"q\"\nconst int *const *r = &amp;z; // prevents modifications of \"**r\" and \"*r\", but not \"r\"\nconst int *const *const s = &amp;a; // prevents modifications of \"**s\", \"*s\" and \"s\"\n</code></pre>\n\n<p>The Wikipedia excerpt discusses two different conventions for declaring pointers:</p>\n\n<pre><code>int *p; // more common in C programming\nint* p; // more common in C++ programming\n</code></pre>\n\n<p>I would say that the \"true\" convention is the first one because it works according to the syntax of the language (declarations mirror use). The asterisk in that declaration is in fact the same dereferencing operator that you would use on the pointer in normal expressions. Thus the <code>int</code> type is returned after applying <code>*</code> (indirection) on <code>p</code> (the pointer itself).</p>\n\n<p>Also note that the ordering of type qualifiers with respect to type specifiers and other type qualifiers does not matter, so these declarations are equivalent:</p>\n\n<pre><code>const int a; // preferred\nint const a; // same, not preferred\n\nconst volatile int b; // preferred\nvolatile const int b; // same, not preferred\nvolatile int const b; // same, not preferred\n\nconst int *p; // preferred\nint const *p; // same, not preferred\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 4397808, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/PG27l.png?s=128&g=1", "display_name": "Bento", "link": "https://stackoverflow.com/users/4397808/bento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 39484015, "answer_count": 2, "score": 0, "last_activity_date": 1473837789, "creation_date": 1473834003, "last_edit_date": 1473836543, "question_id": 39483685, "link": "https://stackoverflow.com/questions/39483685/c-c-convention-for-pointers-and-const", "title": "C/C++ convention for pointers and `const`", "body": "<p>I have read <a href=\"https://en.m.wikipedia.org/wiki/Const_(computer_programming)#C_convention\" rel=\"nofollow\">this</a> (Pasted below as well) on Wikipedia:</p>\n\n<blockquote>\n  <p>Following usual C convention for declarations, declaration follows use, and the * in a pointer is written on the pointer, indicating dereferencing. For example, in the declaration int *ptr, the dereferenced form *ptr is an int, while the reference form ptr is a pointer to an int. <strong>Thus const modifies the name to its right</strong>. The C++ convention is instead to associate the * with the type, as in int* ptr, and read the const as modifying the type to the left. int const * ptrToConst can thus be read as \"*ptrToConst is a int const\" (the value is constant), or \"ptrToConst is a int const *\" (the pointer is a pointer to a constant integer).</p>\n</blockquote>\n\n<p>I really am not able to get a satisfying interpretation:</p>\n\n<ul>\n<li><p>In which sense does it modify?</p></li>\n<li><p>What is intended with <em>name</em> vs <em>type</em> (see the above link)? </p></li>\n<li><p>And why should it be on the right side of <code>const</code>?</p></li>\n</ul>\n"}, {"tags": ["c", "gsoap"], "answers": [{"tags": [], "owner": {"reputation": 1359, "user_id": 918860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/864a0d3b9707a632fd69a9f1c31e1824?s=128&d=identicon&r=PG&f=1", "display_name": "Dr. Alex RE", "link": "https://stackoverflow.com/users/918860/dr-alex-re"}, "is_accepted": true, "score": 0, "last_activity_date": 1474027563, "creation_date": 1474027563, "answer_id": 39531091, "question_id": 39483587, "link": "https://stackoverflow.com/questions/39483587/logging-xml-content-in-http-request/39531091#39531091", "title": "Logging xml content in http request", "body": "<p>Register the message logging plugin declared in <code>gsoap/plugin/logging.h</code> as follows:</p>\n\n<pre><code>#include \"plugin/logging.h\"\n\nstruct soap *ctx = soap_new();\n\n// Register the plugin\nsoap_register_plugin(ctx, logging);\n\n// Change logging destinations to stdout (or another open FILE*):\nsoap_set_logging_inbound(ctx, stdout);\nsoap_set_logging_outbound(ctx, stdout);\n...\n</code></pre>\n\n<p>Then compile your code together with <code>gsoap/plugin/logging.c</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 5176415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cda13c0e20a68271e0f825e9a90d8bb?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra Shukla", "link": "https://stackoverflow.com/users/5176415/jitendra-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 39531091, "answer_count": 1, "score": 0, "last_activity_date": 1474027563, "creation_date": 1473833598, "question_id": 39483587, "link": "https://stackoverflow.com/questions/39483587/logging-xml-content-in-http-request", "title": "Logging xml content in http request", "body": "<p>Currently I am working on an application and need to log all the xml content in http request/response. My application is based on C and use gsoap. I have very less experience on working with gsoap. \nWent through the gsoap userguide also some answers on stackoverflow which suggests to use plugins and refer to plugin.h and plugin.c files. I went through all of them but was not able to understand how to proceed.</p>\n\n<p>This is needed for both http and https request/response.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 11, "creation_date": 1473833418, "post_id": 39483519, "comment_id": 66285566, "body": "Compile a shared lib (<code>.so</code>, <code>dll</code>, ...) and give to the team the lib and an interface header file."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 10, "creation_date": 1473833445, "post_id": 39483519, "comment_id": 66285578, "body": "Distribute the code as a header and a library.  But the employer, if he has any sense, will demand the source code (have you heard of &#39;open source&#39;?), if only because you&#39;re contracted to provide it to him."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1473833731, "post_id": 39483519, "comment_id": 66285699, "body": "Neither of those is feasible, and it&#39;s usually up to the employer to decide whether you&#39;re permitted to hide it from them. Normally your employer owns all the code you write &quot;on the clock&quot; or using the company&#39;s equipment."}, {"owner": {"reputation": 719, "user_id": 1083220, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0e36597bde57aaf26954f464b79f5df4?s=128&d=identicon&r=PG&f=1", "display_name": "Misgevolution", "link": "https://stackoverflow.com/users/1083220/misgevolution"}, "edited": false, "score": 1, "creation_date": 1473833979, "post_id": 39483519, "comment_id": 66285802, "body": "Read this <a href=\"http://www.linuxjournal.com/article/6463?page=0,2\" rel=\"nofollow noreferrer\">linuxjournal.com/article/6463?page=0,2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 933, "user_id": 1250098, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/WUqMX.jpg?s=128&g=1", "display_name": "Serak Shiferaw", "link": "https://stackoverflow.com/users/1250098/serak-shiferaw"}, "is_accepted": false, "score": 2, "last_activity_date": 1473833980, "last_edit_date": 1473833980, "creation_date": 1473833669, "answer_id": 39483607, "question_id": 39483519, "link": "https://stackoverflow.com/questions/39483519/c-c-hide-c-or-c-function-code-from-other-people/39483607#39483607", "title": "C/C++ - Hide C or C++ function code from other people", "body": "<p>You can compile your c++ code to a static or dynamic library </p>\n\n<p>way to do it create a function defination in a header file </p>\n\n<p>implement those function in .cpp file</p>\n\n<p>compile it to either a static lib or dynamic dll with your header file aka the one who has the function declarations</p>\n\n<p>On Linux\n<a href=\"http://www.iram.fr/~roche/code/c++/AddNumbers.html\" rel=\"nofollow\">http://www.iram.fr/~roche/code/c++/AddNumbers.html</a></p>\n\n<p>On windows\n<a href=\"https://msdn.microsoft.com/en-us/library/ms235627.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms235627.aspx</a></p>\n"}, {"tags": [], "owner": {"reputation": 1021, "user_id": 4268228, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-N62Hd0-L7ig/AAAAAAAAAAI/AAAAAAAAAGs/FJcyhG4ARPw/photo.jpg?sz=128", "display_name": "Shankar Shastri", "link": "https://stackoverflow.com/users/4268228/shankar-shastri"}, "is_accepted": false, "score": 1, "last_activity_date": 1473833771, "last_edit_date": 1495541889, "creation_date": 1473833771, "answer_id": 39483634, "question_id": 39483519, "link": "https://stackoverflow.com/questions/39483519/c-c-hide-c-or-c-function-code-from-other-people/39483634#39483634", "title": "C/C++ - Hide C or C++ function code from other people", "body": "<p>Compile And Give It In .a, .so ,.dll formats.</p>\n\n<p>Before That Learn The Difference Between Them\n<a href=\"https://stackoverflow.com/questions/9688200/difference-between-shared-objects-so-static-libraries-a-and-dlls-so\">Difference between shared objects (.so), static libraries (.a), and DLL&#39;s (.so)?</a></p>\n"}, {"tags": [], "owner": {"reputation": 59821, "user_id": 12943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG", "display_name": "Bill K", "link": "https://stackoverflow.com/users/12943/bill-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1473834320, "creation_date": 1473834320, "answer_id": 39483756, "question_id": 39483519, "link": "https://stackoverflow.com/questions/39483519/c-c-hide-c-or-c-function-code-from-other-people/39483756#39483756", "title": "C/C++ - Hide C or C++ function code from other people", "body": "<p>If compiled remember it can be de-compiled.</p>\n\n<p>The only way you can do this is probably to set up a web service that you host (or, more likely, a cloud service that you pay for).</p>\n\n<p>Also remember that you are going to be maintaining this indefinitely, You might want to negotiate a maintenance fee.</p>\n"}, {"tags": [], "owner": {"reputation": 719, "user_id": 1083220, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0e36597bde57aaf26954f464b79f5df4?s=128&d=identicon&r=PG&f=1", "display_name": "Misgevolution", "link": "https://stackoverflow.com/users/1083220/misgevolution"}, "is_accepted": false, "score": 5, "last_activity_date": 1494311116, "last_edit_date": 1494311116, "creation_date": 1473836332, "answer_id": 39484256, "question_id": 39483519, "link": "https://stackoverflow.com/questions/39483519/c-c-hide-c-or-c-function-code-from-other-people/39484256#39484256", "title": "C/C++ - Hide C or C++ function code from other people", "body": "<p>As said above, all you need is separate your code into a header and source file.Then, your compiler generates an object file when you compile; or a shared objects. Then you may ship the object files with the header file. The only downside of this is that you have to compile for each hardware architecture you are targeting. Here is one of the simplest way, which is sending object file with your header file.</p>\n\n<pre><code>//file foo.h\nvoid * foo(int );\n</code></pre>\n\n<p>and implementation</p>\n\n<pre><code>//foo.c\n#include \"foo.h\"\nvoid * foo(int x)   \n{\n //your code\n};\n</code></pre>\n\n<p>now compile it with gcc</p>\n\n<p>gcc -c foo.c -o foo.o</p>\n\n<p>These generates foo.o. Now you can ship foo.h with foo.o or preferably a shared object made out of the object file.</p>\n\n<p>Now your client could use your code getting only the header file and and .o file.</p>\n\n<pre><code>//file foouser.c \n #include \"foo.h\"\n void * x = foo(2);\n</code></pre>\n\n<p>Assuming foo.o and foo.h are in the same directory,</p>\n\n<p>gcc foouser.c -lfoo -o foouser</p>\n\n<p>will generate the executable foouser.</p>\n\n<p>There is a tutorial for the shared object version <a href=\"http://www.cprogramming.com/tutorial/shared-libraries-linux-gcc.html\" rel=\"nofollow noreferrer\">here</a> and a good article about linkers and loaders <a href=\"http://www.linuxjournal.com/article/6463?page=0,2\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 125, "user_id": 6229821, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1696684913954315/picture?type=large", "display_name": "Anirudh Goel", "link": "https://stackoverflow.com/users/6229821/anirudh-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4962, "favorite_count": 2, "accepted_answer_id": 39483756, "answer_count": 4, "score": 1, "last_activity_date": 1494311116, "creation_date": 1473833310, "last_edit_date": 1473833488, "question_id": 39483519, "link": "https://stackoverflow.com/questions/39483519/c-c-hide-c-or-c-function-code-from-other-people", "title": "C/C++ - Hide C or C++ function code from other people", "body": "<p>I've got a project to write a function for performing certain operations on some data. I can write the code in C/C++ but I don't want to share the code of that function with the employer. Instead, I just want to give him access to calling the function in his own code. \nIs it possible?\nI thought of these 2 approaches - </p>\n\n<ul>\n<li>Hosting the function on some server (if that's possible) and giving the employer a URL to access it.</li>\n<li>Password protecting the function code file (again, if that's possible) and only allowing access to call it in the code.</li>\n</ul>\n\n<p>Please tell me if any of these is feasible and also give me a way to do it.</p>\n"}, {"tags": ["c", "char"], "answers": [{"tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": false, "score": 3, "last_activity_date": 1473831780, "creation_date": 1473831780, "answer_id": 39483195, "question_id": 39483142, "link": "https://stackoverflow.com/questions/39483142/counting-characters-in-char-array/39483195#39483195", "title": "Counting characters in char array?", "body": "<p>This \"A\" is not same as 'A'. You should assign 'A' to a character instead.\nReplace all \"\" strings with corresponding '' characters. e.g.</p>\n\n<pre><code>char _alpabetLowerCase[100] = {'a','b','c' ... };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47440, "user_id": 229410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e0014fcc07d184018d3b8185a85a09?s=128&d=identicon&r=PG", "display_name": "Rohan", "link": "https://stackoverflow.com/users/229410/rohan"}, "is_accepted": false, "score": 1, "last_activity_date": 1473832017, "creation_date": 1473832017, "answer_id": 39483241, "question_id": 39483142, "link": "https://stackoverflow.com/questions/39483142/counting-characters-in-char-array/39483241#39483241", "title": "Counting characters in char array?", "body": "<p>You want characters or strings? <code>\"a\"</code> is a string while <code>'a'</code> is a character. From your definition of array it seems you want characters. So change your code for that as</p>\n\n<pre><code>char _alpabetLowerCase[100] = {\"a\", ...\n</code></pre>\n\n<p>Instead use</p>\n\n<pre><code>char _alpabetLowerCase[100] = {'a', 'b', ....\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4270, "user_id": 2707359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8754698c78ca3a082e1593688a9df99c?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/2707359/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1473832236, "creation_date": 1473832236, "answer_id": 39483293, "question_id": 39483142, "link": "https://stackoverflow.com/questions/39483142/counting-characters-in-char-array/39483293#39483293", "title": "Counting characters in char array?", "body": "<p>Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, const char * argv[]) {\n    char _alphabetUpperCase[27] = {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R,','S','T','U','V','W','X','Y','Z', '\\0'};\n    char _alphabetLowerCase[27] = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z', '\\0'};\n\n    int i = 0;\n    int n = 0;\n    while(_alphabetLowerCase[i] != '\\0')\n    {\n        n = n+1;\n        i++;\n    }\n\n    printf(\"%d\\n\",n);\n    return 0;\n}\n</code></pre>\n\n<p>Explanation: <code>'a'</code> is char, but <code>\"a\"</code> is string. Also I added 27-th character to become sure that this loop will stop after <code>'z'</code> (so I changed the array size to 27 (100 was correct too, but it is wrong to write arbitrary numbers when you can put correct value)).</p>\n"}], "owner": {"reputation": 59, "user_id": 6829310, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1cdca95bf2fb59e73ff1c38270f21c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Abeer", "link": "https://stackoverflow.com/users/6829310/abeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1473838944, "creation_date": 1473831533, "last_edit_date": 1473838944, "question_id": 39483142, "link": "https://stackoverflow.com/questions/39483142/counting-characters-in-char-array", "title": "Counting characters in char array?", "body": "<p>Currently i'm trying to sort a paragraph based on first char of each word. I'm initializing two alphabetic (Upper and Lower) char arrays to compare to the first char of the word to the array index.</p>\n\n<p>My Plan for the problem; </p>\n\n<ul>\n<li>Initialize two Arrays with the Alphabet to know which alphabet goes before which.</li>\n<li>Have a function that actually compares first char to the two Arrays.</li>\n<li>return the words sorted :) </li>\n</ul>\n\n<p>My problem is i'm trying to see if the two arrays have 26 characters to make sure every alphabet is counted for but it prints 1 and i have no idea why.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, const char * argv[]) {\n\n    char _alphabetUpperCase[100] = {\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R,\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\"};\n    char _alpabetLowerCase[100] = {\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"};\n\n    int i = 0;\n    int n = 0;\n    while(_alpabetLowerCase[i] != NULL)\n    {\n        n = n+1;\n        i++;\n    }\n\n    printf(\"%d\\n\",n);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "ip"], "answers": [{"comments": [{"owner": {"reputation": 11828, "user_id": 1175080, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c1ca2e94db0e6c1dba18ddd8d563216?s=128&d=identicon&r=PG", "display_name": "Lone Learner", "link": "https://stackoverflow.com/users/1175080/lone-learner"}, "edited": false, "score": 0, "creation_date": 1473835376, "post_id": 39483741, "comment_id": 66286423, "body": "My /etc/hosts indeed looks like similar to yours. I don&#39;t understand why it should return duplicate <code>addrinfo</code>s. The second entry is for IPv6 address <code>::1</code>. In my code, I am using <code>hints</code> to specifically select only IPv4 addresses."}, {"owner": {"reputation": 11828, "user_id": 1175080, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c1ca2e94db0e6c1dba18ddd8d563216?s=128&d=identicon&r=PG", "display_name": "Lone Learner", "link": "https://stackoverflow.com/users/1175080/lone-learner"}, "edited": false, "score": 0, "creation_date": 1473835887, "post_id": 39483741, "comment_id": 66286676, "body": "I have added another set of output which shows that there are no duplicate entries when I remove <code>hints.ai_family = AF_INET</code> from the code. The duplicate entries appear only when I select IPv4 entries only with <code>hints.ai_family = AF_INET</code> in the code."}, {"owner": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "reply_to_user": {"reputation": 11828, "user_id": 1175080, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c1ca2e94db0e6c1dba18ddd8d563216?s=128&d=identicon&r=PG", "display_name": "Lone Learner", "link": "https://stackoverflow.com/users/1175080/lone-learner"}, "edited": false, "score": 0, "creation_date": 1474016560, "post_id": 39483741, "comment_id": 66369862, "body": "@LoneLearner: try commenting out IPv6 entry. It might be something like <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=496300\" rel=\"nofollow noreferrer\">this</a>, which is distro- (or glibc version?) specific, because on my machine there is no such problem."}, {"owner": {"reputation": 11828, "user_id": 1175080, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c1ca2e94db0e6c1dba18ddd8d563216?s=128&d=identicon&r=PG", "display_name": "Lone Learner", "link": "https://stackoverflow.com/users/1175080/lone-learner"}, "reply_to_user": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "edited": false, "score": 0, "creation_date": 1474039548, "post_id": 39483741, "comment_id": 66384346, "body": "@RomanKhimov If the line in <code>&#47;etc&#47;hosts</code> that begins with <code>::1</code> is commented out, indeed the duplicate entries disappear."}, {"owner": {"reputation": 11828, "user_id": 1175080, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c1ca2e94db0e6c1dba18ddd8d563216?s=128&d=identicon&r=PG", "display_name": "Lone Learner", "link": "https://stackoverflow.com/users/1175080/lone-learner"}, "reply_to_user": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "edited": false, "score": 0, "creation_date": 1474047045, "post_id": 39483741, "comment_id": 66388214, "body": "@RomanKhimov Your comment seems to answer this question. If you could write your own answer with the link to the Redhat Bugzilla, I&#39;ll accept it as the correct answer."}], "tags": [], "owner": {"reputation": 441, "user_id": 6776860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6e7ab81e61389cca67d10c5c779777?s=128&d=identicon&r=PG&f=1", "display_name": "barcelona_delpy", "link": "https://stackoverflow.com/users/6776860/barcelona-delpy"}, "is_accepted": false, "score": 1, "last_activity_date": 1473834256, "creation_date": 1473834256, "answer_id": 39483741, "question_id": 39482704, "link": "https://stackoverflow.com/questions/39482704/why-do-i-get-duplicate-addrinfo-objects-in-the-linked-list-returned-by-getaddrin/39483741#39483741", "title": "Why do I get duplicate addrinfo objects in the linked-list returned by getaddrinfo()?", "body": "<p>Check the static table lookup file for hostname(/etc/hosts).</p>\n\n<p>When there're two line have the same canonical_hostname 'localhost',getaddrinfo will return duplicate addrinfo.</p>\n\n<p>Your /etc/hosts may look like this:</p>\n\n<pre><code> 127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n ::1 localhost\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "is_accepted": true, "score": 2, "last_activity_date": 1474054450, "creation_date": 1474054450, "answer_id": 39538935, "question_id": 39482704, "link": "https://stackoverflow.com/questions/39482704/why-do-i-get-duplicate-addrinfo-objects-in-the-linked-list-returned-by-getaddrin/39538935#39538935", "title": "Why do I get duplicate addrinfo objects in the linked-list returned by getaddrinfo()?", "body": "<p>This is a long-standing bug/feature of glibc. When you have an IPv6 localhost entry in your <code>hosts</code> file, like </p>\n\n<pre><code>::1 localhost\n</code></pre>\n\n<p>it gets automatically used for <code>AF_INET</code> name resolutions. This behaviour was introduced in November 2006 by Ulrich Drepper with this comment:</p>\n\n<blockquote>\n  <p>nss/nss_files/files-hosts.c (LINE_PARSER): Support IPv6-style addresses for IPv4 queries if they can be mapped.</p>\n</blockquote>\n\n<p>Some people think that it's bug and although there were at least two bug reports with lengthy discussions (<a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=4980\" rel=\"nofollow\">first one</a> and <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=496300\" rel=\"nofollow\">second one</a>) of this topic, no one really explained why this change was made, so I guess the only person who can do that is Ulrich himself. But probably it is useful in some scenarios, because even though Ulrich isn't working on glibc since May 2012, this code is still present in every modern version of glibc.</p>\n\n<p>If you don't like this behaviour, you can tune your <code>hosts</code> file to not have <code>localhost</code> name for IPv6 loopback address, use some other name, like:</p>\n\n<pre><code>::1 localhost6\n</code></pre>\n\n<p>Or use some distribution where people thinking that it's a bug are actually maintaining glibc package, like openSUSE (and probably SLES/SLED) that just <a href=\"https://build.opensuse.org/package/view_file/openSUSE:Factory/glibc/glibc-fix-double-loopback.diff?expand=1\" rel=\"nofollow\">patches this behaviour away</a>.</p>\n"}], "owner": {"reputation": 11828, "user_id": 1175080, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c1ca2e94db0e6c1dba18ddd8d563216?s=128&d=identicon&r=PG", "display_name": "Lone Learner", "link": "https://stackoverflow.com/users/1175080/lone-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 39538935, "answer_count": 2, "score": 0, "last_activity_date": 1474054450, "creation_date": 1473828792, "last_edit_date": 1474039511, "question_id": 39482704, "link": "https://stackoverflow.com/questions/39482704/why-do-i-get-duplicate-addrinfo-objects-in-the-linked-list-returned-by-getaddrin", "title": "Why do I get duplicate addrinfo objects in the linked-list returned by getaddrinfo()?", "body": "<p>Here is my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nint main()\n{\n    struct addrinfo hints, *res, *p;\n    int error;\n\n    memset(&amp;hints, 0, sizeof hints);\n\n    /* If we comment or remove the following line, the duplicate entries\n     * disappear */\n    hints.ai_family = AF_INET;\n\n    error = getaddrinfo(\"localhost\", \"http\", &amp;hints, &amp;res);\n    if (error != 0) {\n        printf(\"Error %d: %s\\n\", error, gai_strerror(error));\n        return 1;\n    }\n\n    for (p = res; p != NULL; p = p-&gt;ai_next)\n    {\n        if (p-&gt;ai_family == AF_INET) {\n            struct sockaddr_in *addr = (struct sockaddr_in *) p-&gt;ai_addr;\n            char ip[INET_ADDRSTRLEN];\n\n            printf(\"ai_flags: %d; ai_family: %d; ai_socktype: %d; \"\n                   \"ai_protocol: %2d; sin_family: %d; sin_port: %d; \"\n                   \"sin_addr: %s; ai_canonname: %s\\n\",\n                   p-&gt;ai_flags, p-&gt;ai_family, p-&gt;ai_socktype,\n                   p-&gt;ai_protocol, addr-&gt;sin_family, ntohs(addr-&gt;sin_port),\n                   inet_ntop(AF_INET, &amp;addr-&gt;sin_addr, ip, INET_ADDRSTRLEN),\n                   p-&gt;ai_canonname);\n        } else if (p-&gt;ai_family == AF_INET6) {\n            struct sockaddr_in6 *addr = (struct sockaddr_in6 *) p-&gt;ai_addr;\n            char ip[INET6_ADDRSTRLEN];\n\n            printf(\"ai_flags: %d; ai_family: %d; ai_socktype: %d; \"\n                   \"ai_protocol: %2d; sin6_family: %d; sin6_port: %d; \"\n                   \"sin6_addr: %s; ai_canonname: %s\\n\",\n                   p-&gt;ai_flags, p-&gt;ai_family, p-&gt;ai_socktype,\n                   p-&gt;ai_protocol, addr-&gt;sin6_family, ntohs(addr-&gt;sin6_port),\n                   inet_ntop(AF_INET6, &amp;addr-&gt;sin6_addr, ip, INET6_ADDRSTRLEN),\n                   p-&gt;ai_canonname);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is the output.</p>\n\n<pre><code>$ gcc -std=c99 -D_POSIX_SOURCE -Wall -Wextra -pedantic bar.c &amp;&amp; ./a.out\nai_flags: 0; ai_family: 2; ai_socktype: 1; ai_protocol:  6; sin_family: 2; sin_port: 80; sin_addr: 127.0.0.1; ai_canonname: (null)\nai_flags: 0; ai_family: 2; ai_socktype: 2; ai_protocol: 17; sin_family: 2; sin_port: 80; sin_addr: 127.0.0.1; ai_canonname: (null)\nai_flags: 0; ai_family: 2; ai_socktype: 1; ai_protocol:  6; sin_family: 2; sin_port: 80; sin_addr: 127.0.0.1; ai_canonname: (null)\nai_flags: 0; ai_family: 2; ai_socktype: 2; ai_protocol: 17; sin_family: 2; sin_port: 80; sin_addr: 127.0.0.1; ai_canonname: (null)\n</code></pre>\n\n<p>The output shows that the 1st and 3rd entries are exactly same. Similarly, the 2nd and 4th entries are exactly same. Why do we get these duplicates in the results?</p>\n\n<p>If we comment or remove the following line from the code, then the duplicate entries disappear.</p>\n\n<pre><code>    /* If we comment or remove the following line, the duplicate entries\n     * disappear */\n    /* hints.ai_family = AF_INET; */\n</code></pre>\n\n<p>Here is the output in this case.</p>\n\n<pre><code>$ gcc -std=c99 -D_POSIX_SOURCE -Wall -Wextra -pedantic bar.c &amp;&amp; ./a.out\nai_flags: 0; ai_family: 10; ai_socktype: 1; ai_protocol:  6; sin6_family: 10; sin6_port: 80; sin6_addr: ::1; ai_canonname: (null)\nai_flags: 0; ai_family: 10; ai_socktype: 2; ai_protocol: 17; sin6_family: 10; sin6_port: 80; sin6_addr: ::1; ai_canonname: (null)\nai_flags: 0; ai_family: 2; ai_socktype: 1; ai_protocol:  6; sin_family: 2; sin_port: 80; sin_addr: 127.0.0.1; ai_canonname: (null)\nai_flags: 0; ai_family: 2; ai_socktype: 2; ai_protocol: 17; sin_family: 2; sin_port: 80; sin_addr: 127.0.0.1; ai_canonname: (null)\n</code></pre>\n\n<p>This is how my <code>/etc/hosts</code> looks.</p>\n\n<pre><code>$ cat /etc/hosts\n127.0.0.1       localhost\n127.0.1.1       debian1\n\n# The following lines are desirable for IPv6 capable hosts\n::1     localhost ip6-localhost ip6-loopback\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n</code></pre>\n\n<p>If <code>hints.ai_family = AF_INET</code> is present in the code but if the line in <code>/etc/hosts</code> that begins with <code>::1</code> is commented out, indeed the duplicate entries disappear.</p>\n\n<pre><code>$ gcc -std=c99 -D_POSIX_SOURCE -Wall -Wextra -pedantic bar.c &amp;&amp; ./a.out\nai_flags: 0; ai_family: 2; ai_socktype: 1; ai_protocol:  6; sin_family: 2; sin_port: 80; sin_addr: 127.0.0.1; ai_canonname: (null)\nai_flags: 0; ai_family: 2; ai_socktype: 2; ai_protocol: 17; sin_family: 2; sin_port: 80; sin_addr: 127.0.0.1; ai_canonname: (null)\n</code></pre>\n\n<p>But I would still like to know why the IPv6 entry in <code>/etc/hosts</code> cause duplicate entries even when <code>hints.ai_family = AF_INET</code> is used to select the IPv4 entries only.</p>\n"}, {"tags": ["c", "gcc", "assembly", "16-bit", "bare-metal"], "comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 3, "creation_date": 1473827822, "post_id": 39482526, "comment_id": 66283799, "body": "Gonna give you a piece of advice. You can poo poo it if you wish, but if you are new to this kind of thing, the worst thing you can do is doing inline assembler. Very easy to get it wrong, you need proper input, outputs and clobbers to cover everything that is changed. If you want to write in assembler I recommend writing those functions in a separate assembler file free of the <i>C</i> code."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1473827853, "post_id": 39482526, "comment_id": 66283809, "body": "If you use inline assembler use it sparingly. Only use it where necessary and let the <i>C</i> code do the work for you (including loops etc)."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 4, "creation_date": 1473827915, "post_id": 39482526, "comment_id": 66283819, "body": "Even experienced <i>C</i> developers who attempt GCCs extended inline assembler can create code that appears to work and then at some point in the future doesn&#39;t act the way it should when the <i>C</i> optimizer reduces everything. If you don&#39;t know what you are doing it is a load of butthurt waiting to happen."}, {"owner": {"reputation": 145, "user_id": 6495061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-IoK30lyyN54/AAAAAAAAAAI/AAAAAAAAACM/VdKRMJMFVE4/photo.jpg?sz=128", "display_name": "Joseph Caruso", "link": "https://stackoverflow.com/users/6495061/joseph-caruso"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473828009, "post_id": 39482526, "comment_id": 66283844, "body": "@MichaelPetch Thank you, but I&#39;m not really new to this kind of thing. I&#39;ve done inline assembly before, and made a couple crappy OS&#39;s in assembly, and I understand how it works :) I just don&#39;t understand why there&#39;s a conflict between SI and a pointer."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473828045, "post_id": 39482526, "comment_id": 66283857, "body": "If you had done this before you might realize that you are using a 32-bit compiler to generate 16-bit code which is another problem here."}, {"owner": {"reputation": 145, "user_id": 6495061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-IoK30lyyN54/AAAAAAAAAAI/AAAAAAAAACM/VdKRMJMFVE4/photo.jpg?sz=128", "display_name": "Joseph Caruso", "link": "https://stackoverflow.com/users/6495061/joseph-caruso"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473828082, "post_id": 39482526, "comment_id": 66283869, "body": "@MichaelPetch Yes, I&#39;ve definitely heard to (and do) use it sparingly... at such low level, there are some times when this is necessary."}, {"owner": {"reputation": 145, "user_id": 6495061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-IoK30lyyN54/AAAAAAAAAAI/AAAAAAAAACM/VdKRMJMFVE4/photo.jpg?sz=128", "display_name": "Joseph Caruso", "link": "https://stackoverflow.com/users/6495061/joseph-caruso"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473828254, "post_id": 39482526, "comment_id": 66283909, "body": "@MichaelPetch And to that, you would be correct... I am new to using C for 16-bit code, so I didn&#39;t even think about that.. does GCC even have 16-bit capabilities?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 2, "creation_date": 1473828256, "post_id": 39482526, "comment_id": 66283912, "body": "Well in 32-bit code registers are by default 4 bytes wide. Imagine if the address of <code>str</code> is passed in a 32-bit register.let us assume the compiler picks <code>EAX</code>. Now imagine what happens when substituion occurs. - <code>mov si, eax</code> would be generated. Notice a problem there?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473828342, "post_id": 39482526, "comment_id": 66283930, "body": "GCC has limited 16-bit capabilities. Its a gigantic hack. And if you get it working, the real mode code will only run on a 386 processor or higher (or anything that emulates one)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 4, "creation_date": 1473828432, "post_id": 39482526, "comment_id": 66283957, "body": "If you want to go down the dangerous path of GCC 16-bit code you are going to want to look at using <code>.code16gcc</code> directive and compiling with the <code>-m16</code> option . But fair warning, I discourage this. If you really want to write 16-bit code I&#39;d suggest OpenWatcom or Bruce&#39;s C compiler."}, {"owner": {"reputation": 145, "user_id": 6495061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-IoK30lyyN54/AAAAAAAAAAI/AAAAAAAAACM/VdKRMJMFVE4/photo.jpg?sz=128", "display_name": "Joseph Caruso", "link": "https://stackoverflow.com/users/6495061/joseph-caruso"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473828554, "post_id": 39482526, "comment_id": 66283990, "body": "@MichaelPetch Huge problem indeed... Would it work if I casted the pointer to a <code>uint16_t</code> value?  EDIT: Also tried <code>-m16</code>... still gives same error oddly."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473828911, "post_id": 39482526, "comment_id": 66284089, "body": "If you want to use 16-bit address in that template you&#39;d have to force the <code>%0</code> operand to operate on the 16-bit register that GCC chose. To do that you can use <code>%w0</code> . Change <code>&quot;mov    si, %0\\n&quot;</code> to <code>&quot;mov    si, %w0\\n&quot;</code> . The <code>w</code> says to treat that template parameter as 16-bits"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473829039, "post_id": 39482526, "comment_id": 66284123, "body": "You&#39;ll want to add at the top of each of your 16-bit <i>C</i> files (or a common header) this line: <code>__asm__(&quot;.code16gcc&quot;);</code> and I mean literally at the top before any function. You will then want to use <code>-m16</code> rather than <code>-m32</code> option. You&#39;ll also want to exclude the standard libraries  when building with <i>GCC</i>. Your command to build would look like <code>gcc kernel.c -ffreestanding -nostdlib -m16 -std=c99 -g -O0 -masm=intel -o kernel.bin</code>"}, {"owner": {"reputation": 145, "user_id": 6495061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-IoK30lyyN54/AAAAAAAAAAI/AAAAAAAAACM/VdKRMJMFVE4/photo.jpg?sz=128", "display_name": "Joseph Caruso", "link": "https://stackoverflow.com/users/6495061/joseph-caruso"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473829107, "post_id": 39482526, "comment_id": 66284135, "body": "@MichaelPetch Well, I found the problem... on top of that, I realised I tried to shove a literal into <code>SI</code>... To get a literal into <code>SI</code> you have to <code>mov</code> it into a general purpose register first, which is basic assembly knowledge. (facepalm) Thank you very much :)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1473829293, "post_id": 39482526, "comment_id": 66284182, "body": "As I said you want to change <code>&quot;mov si, %0\\n&quot;</code> to <code>&quot;mov si, %w0\\n&quot;</code> . Using inline templates is likely going to kill you."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1473829391, "post_id": 39482526, "comment_id": 66284213, "body": "A month or so ago I hacked up a simple 16-bit bootloader written with <i>GCC</i> that printed <code>Hello World</code> to the display. You can find that code here: <a href=\"http://www.capp-sysware.com/misc/ircasm/gccboot/\" rel=\"nofollow noreferrer\">capp-sysware.com/misc/ircasm/gccboot</a> . It used int 10/ah-0xe to write to the screen."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473883514, "post_id": 39485442, "comment_id": 66315070, "body": "Hmm, strange that there don&#39;t seem to be separate constraints for AL and AH.  There is a <code>&quot;Q&quot;</code> constraint for registers that have an RH sub-register (A,C,D, or B), but none for specific H registers.  Nice workaround.  I might have used <code>|</code> instead of <code>+</code>, though."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473883850, "post_id": 39485442, "comment_id": 66315259, "body": "Also, it would be good if you at least summarized the comments, and point out that pointers are in fact 32-bit when you compile with <code>-m32</code> to generate 32-bit code like the OP is doing, which answers one of the key parts of the question."}, {"owner": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473924965, "post_id": 39485442, "comment_id": 66327613, "body": "@PeterCordes: Indeed, I think there is constraint for ah. But since that one is special (as compared to the EAX, AX or AL which is auto selected from the integer size), it makes in my opinion slightly more complicated to understand. That is why I used the C approach."}, {"owner": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473925088, "post_id": 39485442, "comment_id": 66327679, "body": "@PeterCordes: I added the edit on the SI size problem. I overlooked this, thanks. I mostly &quot;ignored&quot; the comments as they are largely on OS writing and 16/32 bit issues, which was not part of the question."}], "tags": [], "owner": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1473925765, "last_edit_date": 1473925765, "creation_date": 1473840403, "answer_id": 39485442, "question_id": 39482526, "link": "https://stackoverflow.com/questions/39482526/gcc-baremetal-inline-assembly-si-register-not-playing-nicely-with-pointers/39485442#39485442", "title": "GCC baremetal inline-assembly SI register not playing nicely with pointers", "body": "<p>As Michael Petch already explained, you use inline assembly only for the absolute minimum of code that cannot be done in C. For the rest there is inline assembly, but you have to be extremely careful to set the constraints and clobber list right.</p>\n\n<p>Let always GCC do the job of passing the values in the right register and just specify in which register the values should be. </p>\n\n<p>For your problem you probably want to do something like this</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nvoid print( const char *str )\n{\n  for ( ; *str; str++) {\n    __asm__ __volatile__(\"int $0x10\" : : \"a\" ((int16_t)((0x0E &lt;&lt; 8) + *str)), \"b\" ((int16_t)0) : );\n  }\n}\n</code></pre>\n\n<p>EDIT: Your assembly has the problem that you try to pass a pointer in a 16 bit register. This cannot work for 32 bit code, as 32 bit is also the pointer size. \nIf you in case want to generate 16 bit real-mode code, there is the -m16 option. But that does not make GCC a true 16 bit compiler, it has its limitations. Essentially it issues a .code16gcc directive in the code.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473921709, "post_id": 39504415, "comment_id": 66326099, "body": "operand-size and address-size prefixes let 16-bit code use 32-bit registers, including 32-bit addressing modes.  <code>gcc -m16</code> does that, still using 32-bit addresses and integers.  It&#39;s super-ugly, and bloated, but it is technically valid 16-bit code that will run on 386 and later.  It might even be usable for something if you set up the segment registers properly.  I agree with the general sentiment that it doesn&#39;t seem like a good idea, though."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473921973, "post_id": 39504415, "comment_id": 66326221, "body": "@PeterCordes, yes, but this is part of the 32bit addressing.  Assemblers can put 16bit prefixes if you try to reference the <code>SI</code> register (instead of <code>ESI</code>) and force a 16bit address.  In normal assembler application programming, you put the default behaviour in the program header (after assembling some addressing mode directives)  If you don&#39;t, you&#39;ll get 32bit protected mode, with 32bit data and 32bit default addresses, and if you are on a 64bit platform, you&#39;ll get 32bit data and 64bit addresses as default in linux, and freebsd (at least).  Don&#39;t know windows applications environment."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473922657, "post_id": 39504415, "comment_id": 66326559, "body": "Operand-size prefixes on single instructions don&#39;t change between protected-mode and real-mode.  They just change the operand-size: paging stays enabled (or disabled), and segment registers keep their meaning (as indices into the GDT / LDT, or as shifted-by-4 additions to create a linear address)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473922867, "post_id": 39504415, "comment_id": 66326632, "body": "Modern OSes don&#39;t even have an option to start processes in 16-bit mode, because they run the kernel in long mode.  This means VM86 mode isn&#39;t available.  I didn&#39;t think it was possible to run a process in compat mode with the default operand size set to 16 bits.  I thought it had to be 32 bits when the CPU was in compat mode or long mode.  I think if there was a reasonable way for processes to run in long mode with the default address set to 32-bit, the x32 ABI would use it.  But the x32 ABI often has to use address-size prefixes to get 32-bit address size, so I assume it can&#39;t be done."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473922968, "post_id": 39504415, "comment_id": 66326672, "body": "@PeterCordes, I think the problem here is somebody is trying to program in assembly for a modern operating system, using his knowledge from 16bit real mode assembly, as he says <i>I&#39;ve already made a bootloader and all in assembly to load the resulting KERNEL.BIN file</i>.  You are clearly not the target audience for my comment.  I know prefixes don&#39;t change, but they can be <i>automatically</i> inserted by the assembler if you <i>know what you are doing</i> and not being aware this is not the normal mode selected for your application."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473923101, "post_id": 39504415, "comment_id": 66326728, "body": "Yes, I was just nit-picking about the way you were explaining it.  The OP&#39;s actual inline asm is total garbage, and can&#39;t be fixed without a total rewrite with a different approach."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473923118, "post_id": 39504415, "comment_id": 66326741, "body": "And if you are able to run <code>dosemu</code> at least,  it runs in <code>VM86</code> mode."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473923153, "post_id": 39504415, "comment_id": 66326763, "body": "I try to explain this to a newcomer to C from real mode assembly."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473923181, "post_id": 39504415, "comment_id": 66326780, "body": "VM86 mode requires a hypervisor and hardware virtualization, if the kernel is in long mode.  VM86 is only available in legacy mode (32-bit kernel)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473923383, "post_id": 39504415, "comment_id": 66326875, "body": "I think your first sentence doesn&#39;t say exactly what you meant. &quot;You simply cannot use...&quot; means &quot;you can&#39;t ever do this, no matter what you try, the answer is a simple no/never&quot;.  But I think you meant to say &quot;You cannot simply use&quot;, which means &quot;You can&#39;t just do that and expect it to work.  It might be possible, but with complications&quot;.  So this whole comment discussion might have started from a lost-in-translation issue, which I only just realized &gt;.&lt;"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1473924990, "post_id": 39504415, "comment_id": 66327627, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/123407/discussion-between-luis-colorado-and-peter-cordes\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1473928794, "last_edit_date": 1473928794, "creation_date": 1473921180, "answer_id": 39504415, "question_id": 39482526, "link": "https://stackoverflow.com/questions/39482526/gcc-baremetal-inline-assembly-si-register-not-playing-nicely-with-pointers/39504415#39504415", "title": "GCC baremetal inline-assembly SI register not playing nicely with pointers", "body": "<p>You can't simply use 16bit assembly instructions on 32-bit pointers and expect it to work.  <code>si</code> is the lower 16bit of the <code>esi</code> register (which is 32bit).</p>\n\n<p>gcc -m32 and -m16 both use 32-bit pointers.  -m16 just uses address-size and operand-size prefixes to do mostly the same thing as normal -m32 mode, but running in real mode.</p>\n\n<p>If you try to use 16bit addressing in a 32bit application you'll drop the high part of your pointers, and simply go to a <em>different place</em>.</p>\n\n<p>Just try to read a book on intel 32bit addressing modes, and <em>protected mode</em>, and you'll see that many things are different on that mode.</p>\n\n<p>(and if you try to switch to 64bit mode, you'll see that everything changes again)</p>\n\n<p>A bootloader is something different as normally, cpu reset forces the cpu to begin in 16bit real mode.  This is completely different from 32bit protected mode, which is one of the first things the operating system does.  Bootloaders work in 16bit mode, and there, pointers are 16bit wide (well, not, 20bits wide, when the proper segment register is appended to the address)</p>\n"}], "owner": {"reputation": 145, "user_id": 6495061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-IoK30lyyN54/AAAAAAAAAAI/AAAAAAAAACM/VdKRMJMFVE4/photo.jpg?sz=128", "display_name": "Joseph Caruso", "link": "https://stackoverflow.com/users/6495061/joseph-caruso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1473928794, "creation_date": 1473827568, "last_edit_date": 1473829691, "question_id": 39482526, "link": "https://stackoverflow.com/questions/39482526/gcc-baremetal-inline-assembly-si-register-not-playing-nicely-with-pointers", "title": "GCC baremetal inline-assembly SI register not playing nicely with pointers", "body": "<p>Well, this is obviously a beginner's question, but this is my first attempt at making an operating system in <code>C</code> (Actually, I'm almost entirely new to <code>C</code>.. I'm used to <code>asm</code>) so, why exactly is this not valid? As far as I know, a <code>pointer</code> in <code>C</code> is just a <code>uint16_t</code> used to point to a certain area in memory, right (or a <code>uint32_t</code> and that's why it's not working)?\nI've made the following kernel (\"I've already made a bootloader and all in assembly to load the resulting KERNEL.BIN file):</p>\n\n<p><code>kernel.c</code></p>\n\n<pre><code>void printf(char *str)\n{\n__asm__(\n\"mov    si, %0\\n\"\n\"pusha\\n\"\n\"mov    ah, 0x0E\\n\"\n\".repeat:\\n\"\n\"lodsb\\n\"\n\"cmp    al, 0\\n\"\n\"je .done\\n\"\n\"int    0x10\\n\"\n\"jmp    .repeat\\n\"\n\".done:\\n\"\n\"popa\\n\"\n:\n: \"r\" (str)\n);\nreturn;\n}\n\nint main()\n{\nchar *msg = \"Hello, world!\";\nprintf(msg);\n__asm__(\"jmp $\");\nreturn 0;\n}\n</code></pre>\n\n<p>I've used the following command to compile it <code>kernel.c</code>:</p>\n\n<p><code>gcc kernel.c -ffreestanding -m32 -std=c99 -g -O0 -masm=intel -o kernel.bin</code></p>\n\n<p>which returns the following error:</p>\n\n<p><code>kernel.c:3: Error: operand type mismatch for 'mov'</code></p>\n\n<p>Why exactly might be the cause of this error?</p>\n"}, {"tags": ["c", "c-preprocessor", "x-macros"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473833787, "post_id": 39482271, "comment_id": 66285725, "body": "Note in passing that &#39;height&#39; has the e before the i (a counter-example to the old &quot;i before e except after c&quot; adage, along with &#39;weight&#39; and &#39;neighbour&#39; and some others)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473833959, "post_id": 39482271, "comment_id": 66285794, "body": "In your first block of code, the first column has &#39;height&#39;, &#39;width&#39; and &#39;length&#39;, but the third and fifth columns have &#39;height&#39; only \u2014 is that a copy&#39;n&#39;paste error with incomplete editing after the paste?  If it isn&#39;t meant to more consistent, you have no chance with X-macro."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1473834305, "post_id": 39482271, "comment_id": 66285954, "body": "Could you please post what input you would use and what output you would expect?"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 1, "creation_date": 1473835028, "post_id": 39482271, "comment_id": 66286271, "body": "Not sure if this is related to the problem but in the definition <code>#define EXPAND_ENUM_TYPE(z) typedef enum { WIDGET_OFFSETS } Offsets_##z_e</code> you probably wanted <code>#define EXPAND_ENUM_TYPE(z) typedef enum { WIDGET_OFFSETS } Offsets_##z##_e</code>."}, {"owner": {"reputation": 2663, "user_id": 35733, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/617a3a44e355ca7a357596d21d16a3a5?s=128&d=identicon&r=PG", "display_name": "lordhog", "link": "https://stackoverflow.com/users/35733/lordhog"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473841882, "post_id": 39482271, "comment_id": 66289893, "body": "@JonathanLeffle, please forgive my copy/paste errors and spelling.  I came up with an example rather quickly than use my real code.  In my haste, I failed to proof read my question, so I apologize."}, {"owner": {"reputation": 2663, "user_id": 35733, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/617a3a44e355ca7a357596d21d16a3a5?s=128&d=identicon&r=PG", "display_name": "lordhog", "link": "https://stackoverflow.com/users/35733/lordhog"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1473842415, "post_id": 39482271, "comment_id": 66290174, "body": "Thanks @Marian, I didn&#39;t realize that the &#39;z&#39; need to have ## before and after.  After seeing your response, it makes sense now and that is what I was missing."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1473836093, "creation_date": 1473836093, "answer_id": 39484205, "question_id": 39482271, "link": "https://stackoverflow.com/questions/39482271/x-macro-with-concatenation-parameter/39484205#39484205", "title": "X-Macro with concatenation parameter", "body": "<h3>Fix first code block</h3>\n\n<p>Your first example code should be using WIDTH and LENGTH consistently in the third and fourth lines of the macro:</p>\n\n<pre><code>#define WIDGET_OFFSETS                                                               \\\n     X_WIDGET_OFFSET(OFFSET_HEIGHT_WA, 1, OFFSET_HEIGHT_WB, 2, OFFSET_HEIGHT_WC, 3)  \\\n     X_WIDGET_OFFSET(OFFSET_WIDTH_WA,  1, OFFSET_WIDTH_WB,  2, OFFSET_WIDTH_WC,  3)  \\\n     X_WIDGET_OFFSET(OFFSET_LENGTH_WA, 1, OFFSET_LENGTH_WB, 2, OFFSET_LENGTH_WC, 3)\n\n#define X_WIDGET_OFFSET(a, b, c, d, e, f) a = b,\ntypedef enum { WIDGET_OFFSETS } Offsets_WA_e;\n#undef X_WIDGET_OFFSET\n#undef WIDGET_OFFSETS\n</code></pre>\n\n<p>With noise lines and repeated blank lines omitted, that yields:</p>\n\n<pre><code>typedef enum { OFFSET_HEIGHT_WA = 1, OFFSET_WIDTH_WA = 1, OFFSET_LENGTH_WA = 1, } Offsets_WA_e;\n</code></pre>\n\n<h3>Fix second code block</h3>\n\n<p>Your second example had problems, notably it used <code>Offsets_ ## z_e</code> in place of the <code>Offsets_ ## z ## _e</code> shown below.  It is also usually best to leave semicolons off the end of a macro definition and to leave them to appear after the macro invocation.  That's a guideline; there are exceptions aplenty.</p>\n\n<pre><code>#define WIDGET_OFFSETS                        \\\n     X_WIDGET_OFFSET(OFFSET_HEIGHT, 1, 2, 3)  \\\n     X_WIDGET_OFFSET(OFFSET_WIDTH,  1, 2, 3)  \\\n     X_WIDGET_OFFSET(OFFSET_LENGTH, 1, 2, 3)\n\n#define EXPAND_NAME(x,y)   x ## _ ## y\n#define EXPAND_ENUM_TYPE(z) typedef enum { WIDGET_OFFSETS } Offsets_ ## z ## _e\n\n#define X_WIDGET_OFFSET(a, b, c, d) EXPAND_NAME(a,WA) = b,\nEXPAND_ENUM_TYPE(WA);\n#undef X_WIDGET_OFFSET\n\n#define X_WIDGET_OFFSET(a, b, c, d) EXPAND_NAME(a,WB) = c,\nEXPAND_ENUM_TYPE(WB);\n#undef X_WIDGET_OFFSET\n\n#define X_WIDGET_OFFSET(a, b, c, d) EXPAND_NAME(a,WC) = d,\nEXPAND_ENUM_TYPE(WC);\n#undef X_WIDGET_OFFSET\n\n#undef WIDGET_OFFSETS\n#undef EXPAND_ENUM\n#undef EXPAND_NAME\n</code></pre>\n\n<p>That produced:</p>\n\n<pre><code>typedef enum { OFFSET_HEIGHT_WA = 1, OFFSET_WIDTH_WA = 1, OFFSET_LENGTH_WA = 1, } Offsets_WA_e;\n\ntypedef enum { OFFSET_HEIGHT_WB = 2, OFFSET_WIDTH_WB = 2, OFFSET_LENGTH_WB = 2, } Offsets_WB_e;\n\ntypedef enum { OFFSET_HEIGHT_WC = 3, OFFSET_WIDTH_WC = 3, OFFSET_LENGTH_WC = 3, } Offsets_WC_e;\n</code></pre>\n\n<h3>Avoid repeating the suffixes</h3>\n\n<p>Your concern is that the suffixes WA, WB and WC are repeated in the code, and you'd rather not repeat yourself like that.  It is possible to work around it. One way of doing it is to pass an argument to the <code>WIDGET_OFFSETS</code> macro, like this:</p>\n\n<pre><code>#define WIDGET_OFFSETS(sx)                    \\\n     X_WIDGET_OFFSET(EXPAND_NAME(OFFSET_HEIGHT, sx), 1, 2, 3)  \\\n     X_WIDGET_OFFSET(EXPAND_NAME(OFFSET_WIDTH,  sx), 1, 2, 3)  \\\n     X_WIDGET_OFFSET(EXPAND_NAME(OFFSET_LENGTH, sx), 1, 2, 3)\n\n#define EXPAND_NAME(x,y)   x ## _ ## y\n#define EXPAND_ENUM_TYPE(z) typedef enum { WIDGET_OFFSETS(z) } Offsets_ ## z ## _e\n\n#define X_WIDGET_OFFSET(a, b, c, d) a = b,\nEXPAND_ENUM_TYPE(WA);\n#undef X_WIDGET_OFFSET\n\n#define X_WIDGET_OFFSET(a, b, c, d) a = c,\nEXPAND_ENUM_TYPE(WB);\n#undef X_WIDGET_OFFSET\n\n#define X_WIDGET_OFFSET(a, b, c, d) a = d,\nEXPAND_ENUM_TYPE(WC);\n#undef X_WIDGET_OFFSET\n\n#undef WIDGET_OFFSETS\n#undef EXPAND_ENUM\n#undef EXPAND_NAME\n</code></pre>\n\n<p>This yields the following, which is the same as before, but the WA, WB, and WC only appears once each in the source.</p>\n\n<pre><code>typedef enum { OFFSET_HEIGHT_WA = 1, OFFSET_WIDTH_WA = 1, OFFSET_LENGTH_WA = 1, } Offsets_WA_e;\n\ntypedef enum { OFFSET_HEIGHT_WB = 2, OFFSET_WIDTH_WB = 2, OFFSET_LENGTH_WB = 2, } Offsets_WB_e;\n\ntypedef enum { OFFSET_HEIGHT_WC = 3, OFFSET_WIDTH_WC = 3, OFFSET_LENGTH_WC = 3, } Offsets_WC_e;\n</code></pre>\n"}], "owner": {"reputation": 2663, "user_id": 35733, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/617a3a44e355ca7a357596d21d16a3a5?s=128&d=identicon&r=PG", "display_name": "lordhog", "link": "https://stackoverflow.com/users/35733/lordhog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 39484205, "answer_count": 1, "score": 0, "last_activity_date": 1473842180, "creation_date": 1473825411, "last_edit_date": 1495535631, "question_id": 39482271, "link": "https://stackoverflow.com/questions/39482271/x-macro-with-concatenation-parameter", "title": "X-Macro with concatenation parameter", "body": "<p>I am using X-Macro to create enumerations using the following code</p>\n\n<pre><code>#define WIDGET_OFFSETS                                                               \\\n     X_WIDGET_OFFSET(OFFSET_HEIGHT_WA, 1, OFFSET_HEIGHT_WB, 2, OFFSET_HEIGHT_WC, 3)  \\\n     X_WIDGET_OFFSET(OFFSET_WIDTH_WA,  1, OFFSET_WIDTH_WB,  2, OFFSET_WIDTH_WC,  3)  \\\n     X_WIDGET_OFFSET(OFFSET_LENGTH_WA, 1, OFFSET_LENGTH_WB, 2, OFFSET_LENGTH_WC, 3)\n\n\n#define X_WIDGET_OFFSET(a, b, c, d, e, f) a = b,\ntypedef enum { WIDGET_OFFSETS } Offsets_WA_e;\n#undef X_WIDGET_OFFSET\n</code></pre>\n\n<p>I would like to generalize this a bit more such that the X-Macro table only have four parameters.  The first parameter is the general/base name then have it concatenation with additional parameter.  I have defined the macros as the following which is trying to accomplish the code just shown.</p>\n\n<pre><code>#define WIDGET_OFFSETS                         \\\n     X_WIDGET_OFFSET(OFFSET_HIEGHT_, 1, 2, 3)  \\\n     X_WIDGET_OFFSET(OFFSET_WIDTH_,  1, 2, 3)  \\\n     X_WIDGET_OFFSET(OFFSET_LENGTH_, 1, 2, 3)\n\n#define EXPAND_NAME(x,y)   x##y\n#define EXPAND_ENUM_TYPE(z) typedef enum { WIDGET_OFFSETS } Offsets_##z_e;\n\n#define X_WIDGET_OFFSET(a, b, c, d) EXPAND_NAME(a,WA) = b,\nEXPAND_ENUM_TYPE(WA)\n#undef X_WIDGET_OFFSET\n</code></pre>\n\n<p>The compiler provides me with the following error message:</p>\n\n<blockquote>\n  <p>error: expected identifier before \u2018(\u2019 token</p>\n</blockquote>\n\n<p>So, it seems my problem is at the \"EXPAND_NAME(a, WA) = b,\" expression.  I have tried a couple of different approaches, but none work so far.  Lastly and  ideally, I would like to only specify \"WA\", \"WB\" and \"WC\" once and not twice as the code here does.</p>\n\n<p>I did find a similar question, <a href=\"https://stackoverflow.com/questions/38501401/concatenate-multiple-tokens-for-x-macro\">Concatenate multiple tokens for X macro</a>, but not quite what I would like to do, if possible. Any insight to what I am doing wrong is greatly appreciated.\nThanks.</p>\n\n<p>Edit: Corrected the first X-Macro definition as it contained copy/paste errors</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3599, "user_id": 2487517, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cRCpa.jpg?s=128&g=1", "display_name": "Tibrogargan", "link": "https://stackoverflow.com/users/2487517/tibrogargan"}, "edited": false, "score": 3, "creation_date": 1473825124, "post_id": 39482209, "comment_id": 66283213, "body": "You can&#39;t use a function that isn&#39;t declared.  It doesn&#39;t particularly matter where you declare it, as long as you declare it before you use it and the declaration is in scope."}, {"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "reply_to_user": {"reputation": 3599, "user_id": 2487517, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cRCpa.jpg?s=128&g=1", "display_name": "Tibrogargan", "link": "https://stackoverflow.com/users/2487517/tibrogargan"}, "edited": false, "score": 0, "creation_date": 1473825299, "post_id": 39482209, "comment_id": 66283240, "body": "Isn&#39;t it&#39;s scope limited to inside the block where is defined? In this case <code>swap()</code> is only valid inside <code>qsort()</code> function"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1473825353, "post_id": 39482209, "comment_id": 66283254, "body": "@Arash Yes. And in the part of the file after it&#39;s been defined, too, of course. Because deinition is declaration."}, {"owner": {"reputation": 3599, "user_id": 2487517, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cRCpa.jpg?s=128&g=1", "display_name": "Tibrogargan", "link": "https://stackoverflow.com/users/2487517/tibrogargan"}, "edited": false, "score": 0, "creation_date": 1473825425, "post_id": 39482209, "comment_id": 66283272, "body": "Correct.  This is kind of wierd, but it&#39;s valid."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1473825622, "post_id": 39482209, "comment_id": 66283301, "body": "I&#39;d write an answer, but answer without relevant standards quote wouldn&#39;t be too useful I think... Yes, you can do it. It is done rarely, with questionable usefulness. I guess it expresses programmer&#39;s intent: this function should not be called from all over the place."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473826514, "post_id": 39482209, "comment_id": 66283500, "body": "It&#39;s a bad idea because no warning will be given if you get the arguments wrong in the function declaration, just silent undefined behaviour"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1473829795, "post_id": 39482209, "comment_id": 66284319, "body": "It&#39;s really just a simple forward reference."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1473834601, "post_id": 39482732, "comment_id": 66286093, "body": "K&amp;R 2nd edition barely even follows &quot;ANSI C&quot;, meaning C90. That being said, using Visual Studio to demonstrate modern C standard compliance isn&#39;t the best idea. The reason you can use functions in VS without a prototype, is because the VS C compiler is outdated, non-compliant crap. If you want to do modern C programming, stay clear of the K&amp;R book and Visual Studio both."}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": true, "score": 9, "last_activity_date": 1473829251, "last_edit_date": 1473829251, "creation_date": 1473828946, "answer_id": 39482732, "question_id": 39482209, "link": "https://stackoverflow.com/questions/39482209/declaring-function-inside-a-function-in-c/39482732#39482732", "title": "declaring function inside a function in C", "body": "<p>I suppose you are reading the K&amp;R C Programming Language and perhaps the Second Edition with ANSI C? There is a PDF at <a href=\"https://hassanolity.files.wordpress.com/2013/11/the_c_programming_language_2.pdf\" rel=\"noreferrer\">https://hassanolity.files.wordpress.com/2013/11/the_c_programming_language_2.pdf</a> and on page 87 is a discussion of recursion using the quick sort algorithm.</p>\n\n<p>See this Wikipedia topic comparing and contrasting various C standards <a href=\"https://en.wikipedia.org/wiki/ANSI_C\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/ANSI_C</a></p>\n\n<p>The K&amp;R C books are old style C as the Second Edition copyright is 1988. Lots of good material there but it needs to be read from the perspective of being older style and the C standards have changed since ANSI C. The main thing has been better specifications about what compilers are supposed to declare as errors and warnings. There were things perfectly acceptable in ANSI C that are no longer acceptable with the modern C standards. A lot of work has gone into attempting to provide better static checking by compilers by tightening up the C programming language specifications and providing a few extra keywords and syntax.</p>\n\n<p>There either should be a forward declaration for <code>swap()</code> or the definition of the function with its source code should appear before the function is actually used. This allows the C compiler to check the usage of a function against its declaration or definition in order to check for possible usage errors.</p>\n\n<p>However with the C programming language if you use a function before it is either defined or declared you will typically get a warning such as this warning from Visual Studio 2013 <code>warning C4013: 'swap' undefined; assuming extern returning int</code>.</p>\n\n<p>Some compilers, recent versions of <code>clang</code> and <code>gcc</code> come to mind as well as Visual Studio 2015, have begun implementing C11. Some compilers provide additional options to improve warnings and/or to turn some kinds of warnings into errors.</p>\n\n<p>For example if I have the following source code in a file testit.c (notice the .c file extension for C source code) and compile with Visual Studio 2013 using a warning level of 4, I will get a set of warnings but no errors. Visual Studio compiles this as C source using the standards and rules for C which are looser than those for C++ even for the same syntax.</p>\n\n<p>I compiled two different versions of this source, one with the forward declaration on line 2 commented out and one with it uncommented. Notice from the warnings that the C compiler of Visual Studio allows a function to be used without a forward declaration.</p>\n\n<p>Notice when the forward declaration on line 2 is uncommented in the second run there is a warning about putting a forward declaration for a function within a function scope: <code>warning C4210: nonstandard extension used : function given file scope</code>.</p>\n\n<p>Also notice that with the forward declaration available in the second run, the compiler is able to identify possible usage errors and issue warnings and in one case issue an actual error.</p>\n\n<p>Notice that the number of arguments varies in both the first and second compile but only in the second compile with the forward declaration uncommented and available for the compiler do we see warnings about extra arguments.</p>\n\n<pre><code>int func1() {                        // line 1\n//  int swap(int a, int b);          // line 2, forward declaration for function swap\n\n    int j = swap(1, 2);\n\n    return 0;\n}\n\nint func2() {                         // line 9\n    struct {\n        int a;\n        int b;\n        int c;\n    } mm = { 0 };\n\n    int k = swap(4, 5, 8);             // line 16\n\n    float ff = swap(4.0, 5.0, 8.0);    // line 18\n\n    int k2 = swap(mm, 2, 3);           // line 20\n\n    return 1;\n}\n\nint swap(int a, int b) {               // line 25\n    return a + b;\n}\n</code></pre>\n\n<p>The warnings are:</p>\n\n<pre><code>1&gt;------ Build started: Project: ConsoleApplication3, Configuration: Debug Win32 ------\n1&gt;  testit.c\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(4): warning C4013: 'swap' undefined; assuming extern returning int\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(4): warning C4189: 'j' : local variable is initialized but not referenced\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(18): warning C4244: 'initializing' : conversion from 'int' to 'float', possible loss of data\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(16): warning C4189: 'k' : local variable is initialized but not referenced\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(20): warning C4189: 'k2' : local variable is initialized but not referenced\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(18): warning C4189: 'ff' : local variable is initialized but not referenced\n1&gt;  ConsoleApplication3.vcxproj -&gt; C:\\Users\\Projects\\Debug\\ConsoleApplication3.exe\n</code></pre>\n\n<p>If I then uncomment the forward declaration for the function <code>swap()</code> I see the following compiler output of warnings along with errors:</p>\n\n<pre><code>1&gt;------ Build started: Project: ConsoleApplication3, Configuration: Debug Win32 ------\n1&gt;  testit.c\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(2): warning C4210: nonstandard extension used : function given file scope\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(4): warning C4189: 'j' : local variable is initialized but not referenced\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(16): warning C4020: 'swap' : too many actual parameters\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(18): warning C4244: 'function' : conversion from 'double' to 'int', possible loss of data\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(18): warning C4020: 'swap' : too many actual parameters\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(18): warning C4244: 'initializing' : conversion from 'int' to 'float', possible loss of data\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(20): error C2440: 'function' : cannot convert from '' to 'int'\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(20): warning C4024: 'swap' : different types for formal and actual parameter 1\n1&gt;c:\\users\\projects\\consoleapplication3\\testit.c(20): warning C4020: 'swap' : too many actual parameters\n</code></pre>\n\n<p>Now the C++ programming language is different and does not allow this kind of looseness. Which is why though C++ shares a history with C, C++ is a different though related language.</p>\n\n<p>If I copy the same source into a file testit2.cpp then compile I will see different errors.</p>\n\n<p>First with the forward declaration of <code>swap()</code> commented out.</p>\n\n<pre><code>1&gt;  testit2.cpp\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(4): error C3861: 'swap': identifier not found\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(16): error C3861: 'swap': identifier not found\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(18): error C3861: 'swap': identifier not found\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(20): error C3861: 'swap': identifier not found\n</code></pre>\n\n<p>And again with the forward declaration uncommented.</p>\n\n<pre><code>1&gt;  testit2.cpp\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(4): warning C4189: 'j' : local variable is initialized but not referenced\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(16): error C3861: 'swap': identifier not found\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(18): error C3861: 'swap': identifier not found\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(20): error C3861: 'swap': identifier not found\n</code></pre>\n\n<p>And finally if I move the forward declaration of <code>swap()</code> out of the scope of function <code>func1()</code> into file scope so that it is now line 1 then I will see the following, different errors:</p>\n\n<pre><code>1&gt;  testit2.cpp\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(4): warning C4189: 'j' : local variable is initialized but not referenced\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(16): error C2660: 'swap' : function does not take 3 arguments\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(18): error C2660: 'swap' : function does not take 3 arguments\n1&gt;c:\\users\\projects\\consoleapplication3\\testit2.cpp(20): error C2660: 'swap' : function does not take 3 arguments\n</code></pre>\n"}], "owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "closed_date": 1473886352, "accepted_answer_id": 39482732, "answer_count": 1, "score": 1, "last_activity_date": 1473829251, "creation_date": 1473824943, "question_id": 39482209, "link": "https://stackoverflow.com/questions/39482209/declaring-function-inside-a-function-in-c", "closed_reason": "Duplicate", "title": "declaring function inside a function in C", "body": "<p>I am reading KR C book and I face a function definition I don't understand. It's page 87 the <code>qsort()</code> function. It declares the <code>swap()</code> function inside <code>qsort()</code> function:</p>\n\n<pre><code>void qsort(args)\n{\n ...\n void swap(arguments);\n ...\n swap(a,b);\n}\n\nvoid swap(arguments){\n...\n}\n</code></pre>\n\n<p>SHouldn't <code>swap()</code> function be declared outside of function? Why declare it inside <code>qsort()</code> function?</p>\n"}, {"tags": ["c", "stdio"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 6, "creation_date": 1473821954, "post_id": 39481823, "comment_id": 66282522, "body": "Read the comment above."}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1473822674, "post_id": 39481823, "comment_id": 66282677, "body": "@iharob The comment explains <i>why</i> they&#39;re defined; it doesn&#39;t explain <i>how</i> the macros work."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1473860651, "post_id": 39481823, "comment_id": 66301582, "body": "@jamesdlin Despite 6 upvotes to the comment, you are completely right."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1473822049, "creation_date": 1473822049, "answer_id": 39481857, "question_id": 39481823, "link": "https://stackoverflow.com/questions/39481823/how-is-it-supposed-to-work-that-define-stdin-stdin-in-usr-include-stdio-h/39481857#39481857", "title": "How is it supposed to work that &quot;#define stdin stdin&quot; in /usr/include/stdio.h?", "body": "<p>The macro is replaced textually with the value it is defined to, so each one is replaced exactly by the same value. Just defining them as macros to make them \"<em>macros</em>\", but they are replaced by themselves so it's like doing nothing and just being standard compliant.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 5, "last_activity_date": 1473822195, "creation_date": 1473822195, "answer_id": 39481880, "question_id": 39481823, "link": "https://stackoverflow.com/questions/39481823/how-is-it-supposed-to-work-that-define-stdin-stdin-in-usr-include-stdio-h/39481880#39481880", "title": "How is it supposed to work that &quot;#define stdin stdin&quot; in /usr/include/stdio.h?", "body": "<p>The key point is that once a macro has been expanded, it is not replaced again in the replacement text.  That means that when the preprocessor comes across <code>stderr</code>\nin:</p>\n\n<pre><code>fprintf(stderr, \"Usage: %s file [...]\\n\", argv[0]);\n</code></pre>\n\n<p>it replaces the <code>stderr</code> token with <code>stderr</code>, and then rescans the replacement text, but <code>stderr</code> is no longer eligible for expansion, so the text remains <code>stderr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "is_accepted": false, "score": 4, "last_activity_date": 1473830911, "last_edit_date": 1473830911, "creation_date": 1473822249, "answer_id": 39481886, "question_id": 39481823, "link": "https://stackoverflow.com/questions/39481823/how-is-it-supposed-to-work-that-define-stdin-stdin-in-usr-include-stdio-h/39481886#39481886", "title": "How is it supposed to work that &quot;#define stdin stdin&quot; in /usr/include/stdio.h?", "body": "<p>A macro is not re-expanded again after its own expansion, so you do not end up with a circular (and infinite) macro expansion.</p>\n\n<p>From section 6.10.3.4/2 of the ISO C99 standard:</p>\n\n<blockquote>\n  <p>If the name of the macro being replaced is found during this scan of the replacement list (not including the rest of the source file\u2019s preprocessing tokens), it is not replaced. Furthermore, if any nested replacements encounter the name of the macro being replaced, it is not replaced. These nonreplaced macro name preprocessing tokens are no longer available for further replacement even if they are later (re)examined in contexts in which\n  that macro name preprocessing token would otherwise have been replaced.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "is_accepted": false, "score": 0, "last_activity_date": 1473822472, "creation_date": 1473822472, "answer_id": 39481906, "question_id": 39481823, "link": "https://stackoverflow.com/questions/39481823/how-is-it-supposed-to-work-that-define-stdin-stdin-in-usr-include-stdio-h/39481906#39481906", "title": "How is it supposed to work that &quot;#define stdin stdin&quot; in /usr/include/stdio.h?", "body": "<p>Good question. It does replace itself with itself once.</p>\n\n<p>However, in C11 6.10.3.4p2 there is a rule that says the macro name is not replaced again.</p>\n"}, {"tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": 0, "last_activity_date": 1473822993, "creation_date": 1473822993, "answer_id": 39481970, "question_id": 39481823, "link": "https://stackoverflow.com/questions/39481823/how-is-it-supposed-to-work-that-define-stdin-stdin-in-usr-include-stdio-h/39481970#39481970", "title": "How is it supposed to work that &quot;#define stdin stdin&quot; in /usr/include/stdio.h?", "body": "<p>Although the others explained the mechanism of the preprocessor, the actual reason for it is that <code>stdin</code> et al. are global variables, file pointers to be exact. See <a href=\"https://github.com/bminor/glibc/blob/master/libio/stdio.c\" rel=\"nofollow\">GlibC-code</a> for the details.</p>\n\n<p>Your example defines a macro named <code>stdin</code> (and <code>stderr</code> and <code>stdout</code>) to be replaced with the global variable <code>stdin</code> (and <code>stderr</code> and <code>stdout</code>), so strictly spoken, both <code>stdin</code>s (and <code>stderr</code>s and <code>stdout</code>s) in the macro are not the same.</p>\n"}], "owner": {"reputation": 39, "user_id": 2873257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3ea5aa1f7596a80edf4fea8c81e6f3f?s=128&d=identicon&r=PG&f=1", "display_name": "Bumzy", "link": "https://stackoverflow.com/users/2873257/bumzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 39481880, "answer_count": 5, "score": 0, "last_activity_date": 1473830911, "creation_date": 1473821806, "question_id": 39481823, "link": "https://stackoverflow.com/questions/39481823/how-is-it-supposed-to-work-that-define-stdin-stdin-in-usr-include-stdio-h", "title": "How is it supposed to work that &quot;#define stdin stdin&quot; in /usr/include/stdio.h?", "body": "<p>In /usr/include/stdio.h</p>\n\n<pre><code>/* C89/C99 say they're macros.  Make them happy.  */\n#define stdin stdin\n#define stdout stdout\n#define stderr stderr\n</code></pre>\n\n<p>How is this supposed to work?</p>\n"}, {"tags": ["c", "double"], "comments": [{"owner": {"reputation": 1469, "user_id": 3751615, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/F7Hw5.jpg?s=128&g=1", "display_name": "PRP", "link": "https://stackoverflow.com/users/3751615/prp"}, "edited": false, "score": 4, "creation_date": 1473821025, "post_id": 39481598, "comment_id": 66282347, "body": "I think best way to do it is to define a <code>e</code> such that all values less than <code>e</code> will be treated as 0"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1473821619, "post_id": 39481598, "comment_id": 66282455, "body": "It&#39;s not clear what you mean by <i>&quot;solve this&quot;</i>. The only way to &quot;solve&quot; the imprecision of floating point math is not to use <code>float</code> or <code>double</code> in your code. Which means that you need to find a good math library that doesn&#39;t internally convert to a binary representation."}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 0, "creation_date": 1473821817, "post_id": 39481598, "comment_id": 66282487, "body": "Most of the time the answer will be &quot;no&quot;. The time and effort required to achieve exact representation of decimal numbers is not worth it, and the code you&#39;re trying to write should be using integers instead. On the occasion that the answer is &quot;yes&quot;, the solution is to use a fixed-point or arbitrary precision number library. Note that these libraries are very slow compared to using floating point numbers."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473822497, "post_id": 39481598, "comment_id": 66282646, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473823092, "post_id": 39481598, "comment_id": 66282771, "body": "@Olaf Not a duplicate, OP explains how they already know that floating point math behaves this way"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473823481, "post_id": 39481598, "comment_id": 66282863, "body": "@M.M: Hmm... I still think this is a dup. The answers to the dup cover the problem very well (especially the standard link &quot;what every ...&quot;). The rest is actually a mathematical problem, not a programming one. Anyway, I&#39;ll leave the vote, let&#39;s see if someone agrees."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 1469, "user_id": 3751615, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/F7Hw5.jpg?s=128&g=1", "display_name": "PRP", "link": "https://stackoverflow.com/users/3751615/prp"}, "edited": false, "score": 0, "creation_date": 1473823685, "post_id": 39481598, "comment_id": 66282904, "body": "@PRP no need to define it, there are already <a href=\"http://stackoverflow.com/q/16063820/995714\"><code>FLT_EPSILON</code>, <code>DBL_EPSILON</code> and <code>LDBL_EPSILON</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 3547462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yifwQ.png?s=128&g=1", "display_name": "Lii", "link": "https://stackoverflow.com/users/3547462/lii"}, "edited": false, "score": 0, "creation_date": 1473822549, "post_id": 39481892, "comment_id": 66282663, "body": "I&#39;m new to C language. Is this how people handle float equality test in most cases? And what is DBL_EPSILON, some constant from float.h?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473822597, "post_id": 39481892, "comment_id": 66282670, "body": "The standard does not require IEC 60559 floating point arithmetic."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1473823122, "post_id": 39481892, "comment_id": 66282782, "body": "Mine says &quot;normative&quot; but it also offers a macro to check for compliance, so: <i>insert obligatory rant about committees here</i> and lets go on with our lives"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1473833864, "post_id": 39481892, "comment_id": 66285758, "body": "The DBL_EPSILON will not work if you are subtracting large numbers, e,g. if a, b, c, and d are multiplied by 1e20."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1473861303, "post_id": 39481892, "comment_id": 66302087, "body": "@RishikeshRaje yes, that&#39;s correct, you have to do the obligatory checks. And those include a lot more than just the magnitude and I wanted to keep it simple. It might be a good idea to do an example for the Documentation here, so why don&#39;t you do so?"}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": true, "score": 1, "last_activity_date": 1473822286, "creation_date": 1473822286, "answer_id": 39481892, "question_id": 39481598, "link": "https://stackoverflow.com/questions/39481598/c-imprecision-in-arithmetic-of-double/39481892#39481892", "title": "C: imprecision in arithmetic of double", "body": "<p>As PRP correctly suggests: you need to set a small number to use as zero. The standard C-library (Annex F in the C-standard) offers some macros in <code>float.h</code> for that purpose. You can use them like e.g.:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;float.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n  double a = .1, b = .2, c = .3, d = .4;\n  double e = a + b + c;\n  if (d - (1 - e)) {\n    printf(\"not equal\\n\");\n  }\n  printf(\"%.20f\\n\", d - (1 - e));\n  printf(\"%.20f\\n\", DBL_EPSILON);\n  if (fabs(d - (1 - e)) &lt;= DBL_EPSILON) {\n    printf(\"equal\\n\");\n  }\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1473924928, "last_edit_date": 1473924928, "creation_date": 1473924061, "answer_id": 39505171, "question_id": 39481598, "link": "https://stackoverflow.com/questions/39481598/c-imprecision-in-arithmetic-of-double/39505171#39505171", "title": "C: imprecision in arithmetic of double", "body": "<p>The problem here is that <code>.1</code>, <code>.2</code> and <code>.3</code> are not finite digit numbers in base <code>2</code>, but are periodic in their binary representation.</p>\n\n<p>I'll try to illustrate: Let's suppose we are trying to use base 3 numbering system, and try to sum <code>.1</code> (which is one third) <code>+ .1</code> (another third) and <code>+ .1</code> (which is another third), but instead of doing that in base 3, let's do it in base 10.</p>\n\n<p><code>.1</code> in base 3, converts to base ten as <code>.3333333333333333</code> (with 16 base ten digits), and if you try to add it three times, you'll get <code>.9999999999999999</code> and not <code>1.0</code>.</p>\n\n<p>There's no possibility here to solve to this problem, but cutting the precission on the result.  If we have 10 digits, and try to add <code>.3333333333</code> three times... we'll get <code>.9999999999</code> (with ten digits precission) the solution here is to cut the result to nine digits and round it (in this case <code>1.000000000</code>) but if you <strong>substract</strong> this number to the correct one (<code>1.000000000 - 0.9999999999</code>) you'll get again <code>0.0000000001</code>.</p>\n\n<p>This is common in floating point arithmethic and the problem is that floating point numbers are discrete in nature, and not continous as real numbers are.</p>\n\n<p>As has been pointed, the <code>&lt;limits.h&gt;</code> header file has constants to deal with this problem, but you have to use them with care, as they can drive you to new errors:</p>\n\n<p><code>DBL_EPSILON</code> is the floating point constant that results of moving from <code>1.0</code> to the next number different than <code>1.0</code> and has no floating point number between both. In our case it should be, as we are using base 10 numbers and 10 digits, the number should be (<code>1.000000001 - 1.000000000 =&gt; 0.00000001</code>) As the numeration base is different than 10, this number is not a round number, as in base 10.</p>\n\n<p>This number is relative to 1, so if you are substracting two numbers, your epsilon should be relative to the greatest of those numbers</p>\n\n<pre><code>if (fabs(actual - correct) &lt; DBL_EPSILON*fabs(correct)) {\n    /* consider both results equal */\n}\n</code></pre>\n\n<p>but in real code, as you normally use several sums and substractions, you'll accumulate all those rounding errors, it's easy to get outside of this tolerance, you can use <code>2.0</code> or <code>10.0</code> times this value.</p>\n\n<p>The floating point numbering system is better described in IEEE-754 specification.  You will find there that DBL_EPSILON is not the only constant you have to consider to make two floating points equal (as you approach <code>0.0</code> numbers are more together and as you use larger numbers, they are more sparse.)</p>\n"}], "owner": {"reputation": 140, "user_id": 3547462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yifwQ.png?s=128&g=1", "display_name": "Lii", "link": "https://stackoverflow.com/users/3547462/lii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 39481892, "answer_count": 2, "score": 0, "last_activity_date": 1473924928, "creation_date": 1473819852, "last_edit_date": 1473821536, "question_id": 39481598, "link": "https://stackoverflow.com/questions/39481598/c-imprecision-in-arithmetic-of-double", "title": "C: imprecision in arithmetic of double", "body": "<p>I have the following C code:</p>\n\n<pre><code>int main()\n{\n    double a=.1,b=.2,c=.3,d=.4;\n    double e=a+b+c;\n    if (d- (1-e)){printf(\"not equal\\n\");}\n    printf(\"%.20f\\n\",d-(1-e));\n}\n</code></pre>\n\n<p>And the result I get is:</p>\n\n<pre><code>not equal\n0.00000000000000011102\n</code></pre>\n\n<p>I know this is due to the imprecision induced from the way computer saves a double. Is there a way to solve this, and make <em>d-(1-e)</em> equal to 0?</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1473819758, "post_id": 39481560, "comment_id": 66282098, "body": "The latter is less efficient because you are returning the entire structure which needs to be copied into the caller&#39;s variable. That&#39;s generally why pointers are passed around rather than the entire struct."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1473820223, "post_id": 39481560, "comment_id": 66282206, "body": "Returning a pointer doesn&#39;t require the caller to know the contents of the struct..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473821614, "post_id": 39481560, "comment_id": 66282452, "body": "Also there is <code>void RedBlackTree_new(RedBlackTree *)</code> . Each has their advantage and disadvantage!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473822692, "post_id": 39481560, "comment_id": 66282681, "body": "@M.M: That would require a <code>RedBlackTree **</code> actually."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473822773, "post_id": 39481560, "comment_id": 66282701, "body": "Note using old-style function declarators with empty argument list is deprecated by the standard. Use prototype-style like <code>f(void)</code>."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1473822883, "post_id": 39481560, "comment_id": 66282722, "body": "@Olaf <code>RedBlackTree *</code> is enough if the caller handles the allocation"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1473822991, "post_id": 39481560, "comment_id": 66282750, "body": "@Dmitri: The suffix <code>new</code> normally implies the object is created in the function and initialised. But the question compares apples and oranges anyway, so maybe that would be another option for him, too."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473823042, "post_id": 39481560, "comment_id": 66282766, "body": "The functions serve different purposes. I don&#39;t see how they are alternatives to each other. Note that the <code>new</code> suffix for the second one is missleading, as it does not really create a new <code>struct</code> for the caller, but returns a template. That can much easier be accomplished by a simple assignment of a <code>const</code> qualified &quot;template-<code>struct</code>&quot;. No need for a function."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473823277, "post_id": 39481560, "comment_id": 66282817, "body": "@Olaf the second one returns a object with automatic storage duration, that didn&#39;t previous exist, therefore it is a new object"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473823542, "post_id": 39481560, "comment_id": 66282873, "body": "@M.M: The object is not an lvalue in C, so it cannot be used by the caller. It has to use an assignment, i.e. its own object (wherever it gets that from). So from the caller&#39;s view, the function does much the same as provide a template <code>struct</code> which it has to assign to a pre-allocated <code>struct</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473824303, "post_id": 39481560, "comment_id": 66283039, "body": "&quot;The object is not an lvalue in C, so it cannot be used by the caller&quot; - there is no such rule. Also, a compiler may implement a sort of &#39;return value optimization&#39; and avoid an extra copy for code that initializes a variable with the return value."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1473834880, "post_id": 39481560, "comment_id": 66286209, "body": "You might want to take a look at <a href=\"http://stackoverflow.com/questions/39472797/oop-programming-with-data-encapsulation-in-c\">this</a> for an example how to design ADTs/classes."}], "answers": [{"comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1473820414, "post_id": 39481591, "comment_id": 66282234, "body": "Of course, with the struct return like the second example, the caller could still allocate a struct dynamically and then assign the function return to it if desired... but with the pointer version dynamic allocation is essentially mandatory."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473822862, "post_id": 39481591, "comment_id": 66282718, "body": "The C standard does not enforce using a stack. And where the object in the caller is lacated for the second variant is not specified. It could be some <code>malloc</code>ed object."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473823431, "post_id": 39481591, "comment_id": 66282850, "body": "@Olaf: And this justifies a down-vote? Your observation just applies to my footnote regarding efficiency, which will be true in 99% of the situations and false only when automatic storage is not implemented through stack (which probably applies to few obscure C implementations somewhere but it is definitely something you shouldn&#39;t care about when trying to understand the difference between automatic and dynamic allocations)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1473823875, "post_id": 39481591, "comment_id": 66282948, "body": "@Jack: Well, maybe I missunderstood your second paragraph. As it reads to me, you assume the caller has to provide an <code>auto</code> variable for the LHS of an assignment. On second thought, I might be wrong. Removed the DV (it was not for the stack, but good you corrected that). I&#39;m still not happy with that part. Which scope has an object returned from a function? AFAIS only the expression it is used. (too tired to check now, good night)."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 5, "last_activity_date": 1473823520, "last_edit_date": 1473823520, "creation_date": 1473819833, "answer_id": 39481591, "question_id": 39481560, "link": "https://stackoverflow.com/questions/39481560/c-constructor-better-to-return-struct-or-pointer-to-struct/39481591#39481591", "title": "C - Constructor, better to return struct or pointer to struct?", "body": "<p>The real difference is the lifetime of the object. An object allocated on heap through dynamic allocation (<code>malloc</code>/<code>calloc</code> and <code>free</code>) survives until it's explicitly freed.</p>\n\n<p>On the contrary an object which has automatic storage, like in your second example, survives only the scope in which it's declared and must be copied somewhere else to make it survive.</p>\n\n<p>So this should help you in choosing which suits better a specific circumstance.</p>\n\n<p>From an efficiency perspective dynamic allocation is more expensive and requires additional indirections but allows you to pass pointers around, which prevents data from being copied thus can be more efficient in other situations, eg. when objects are large and copies would be expensive.</p>\n"}, {"comments": [{"owner": {"reputation": 8686, "user_id": 268025, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb39f8801f5c6b47bab7d5e91bf513f4?s=128&d=identicon&r=PG", "display_name": "tangrs", "link": "https://stackoverflow.com/users/268025/tangrs"}, "edited": false, "score": 1, "creation_date": 1473823834, "post_id": 39482040, "comment_id": 66282938, "body": "This doesn&#39;t really answer the question. Furthermore, you <a href=\"http://stackoverflow.com/a/605858/268025\">shouldn&#39;t be casting the return value of malloc</a>."}, {"owner": {"reputation": 3599, "user_id": 2487517, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cRCpa.jpg?s=128&g=1", "display_name": "Tibrogargan", "link": "https://stackoverflow.com/users/2487517/tibrogargan"}, "edited": false, "score": 3, "creation_date": 1473823886, "post_id": 39482040, "comment_id": 66282956, "body": "There&#39;s a bunch of issues with this answer.  Saying you can return a &quot;typedef&quot; from a function is misleading.  Your grammar may be very difficult for someone to decipher if English isn&#39;t their first language.  Your code needs to be in a code block - right now it looks very much like there are syntax errors in it.  Your statement that a local primitive variable cannot be returned from a function is incorrect and you should not cast the return value of malloc"}, {"owner": {"reputation": 8686, "user_id": 268025, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb39f8801f5c6b47bab7d5e91bf513f4?s=128&d=identicon&r=PG", "display_name": "tangrs", "link": "https://stackoverflow.com/users/268025/tangrs"}, "edited": false, "score": 0, "creation_date": 1473823923, "post_id": 39482040, "comment_id": 66282967, "body": "Also, why is <code>int abc(){int a = 5 ; return a;}</code> wrong? It&#39;s perfectly defined behaviour to return integers from a function."}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "edited": false, "score": 0, "creation_date": 1473824401, "post_id": 39482040, "comment_id": 66283056, "body": "I heard that typedef overpolutes the global namespace. I think I agree with it."}], "tags": [], "owner": {"reputation": 1, "user_id": 6828993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1774cdffc5935556b369859e04d8dbb8?s=128&d=identicon&r=PG&f=1", "display_name": "qcc", "link": "https://stackoverflow.com/users/6828993/qcc"}, "is_accepted": false, "score": -4, "last_activity_date": 1473837645, "last_edit_date": 1473837645, "creation_date": 1473823488, "answer_id": 39482040, "question_id": 39481560, "link": "https://stackoverflow.com/questions/39481560/c-constructor-better-to-return-struct-or-pointer-to-struct/39482040#39482040", "title": "C - Constructor, better to return struct or pointer to struct?", "body": "<p>firstly it's better to use typedef. it's easier.</p>\n\n<p>if u create  an object dynamically, u need to free every member of the object urself. or, the memory leak.</p>\n\n<p><i>if it is a big struct , when u return it, it create a temp object.</i>  it cost more.  so I prefer pointer!\nand forget what i say before. I just sleepwalking.</p>\n"}], "owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 39481591, "answer_count": 2, "score": 0, "last_activity_date": 1473837645, "creation_date": 1473819567, "question_id": 39481560, "link": "https://stackoverflow.com/questions/39481560/c-constructor-better-to-return-struct-or-pointer-to-struct", "title": "C - Constructor, better to return struct or pointer to struct?", "body": "<p>I'm currently making a RedBlackTree in C and I still don't understand which one is better / more ideal when it comes to having a constuctor function for your structures. </p>\n\n<pre><code>struct RedBlackTree* RedBlackTree_new()\n{\n    struct RedBlackTree *tree = calloc(1, sizeof(struct RedBlackTree));\n    if (tree == NULL)\n        error(DS_MSG_OUT_OF_MEM);\n    return tree \n}\n</code></pre>\n\n<h1>VS.</h1>\n\n<pre><code>struct RedBlackTree RedBlackTree_new()\n{\n    struct RedBlackTree tree;\n    tree.root = NULL;\n    tree.size = 0;\n    return tree;\n}\n</code></pre>\n\n<p>I mean, if I do the second option, then I constantly have to pass it into my functions as a pointer using <code>&amp;</code> and to my knowledge, I can never destroy it until my program ends (can someone verify if that's true?). For example, if I had a<code>destroy</code> function for my Tree, I wouldn't be able to free the memory allocated from structures within the <code>RedBlackTree</code> if they weren't created with <code>malloc</code> or <code>calloc</code> right?</p>\n\n<p>Also in a more general case, what are the advantages and disadvantages of either? I can always retrieve the data from the pointer by using <code>*</code> and I can always turn my data into a pointer by using <code>&amp;</code>, so it almost feels like they are completely interchangable in a sense.</p>\n"}, {"tags": ["c", "assembly", "compilation", "hexdump"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1473819326, "post_id": 39481497, "comment_id": 66281997, "body": "How can we possibly tell if you don&#39;t show us how you compiled the program and a sample of the exact output? Perhaps you are running some of the commands incorrectly. We can&#39;t verify anything unless you show us the actual data."}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 2, "creation_date": 1473819425, "post_id": 39481497, "comment_id": 66282021, "body": "how did you invoke <code>gcc</code>?"}, {"owner": {"reputation": 371, "user_id": 4493605, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de634ffd4d8a90ffbf4c4c6ad023e8b6?s=128&d=identicon&r=PG&f=1", "display_name": "user4493605", "link": "https://stackoverflow.com/users/4493605/user4493605"}, "edited": false, "score": 0, "creation_date": 1473825832, "post_id": 39481497, "comment_id": 66283362, "body": "The command was &#39;gcc -o BinaryOuputfile FilenameInput&#39;, the command syntax was correct during compilation, I just made a mistake when writing the question. The hex dump extract has now been included."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1473826510, "post_id": 39481497, "comment_id": 66283496, "body": "Note that binaries contain symbol tables. Those symbol tables contain ascii names."}], "answers": [{"tags": [], "owner": {"reputation": 14052, "user_id": 1004301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a6aacd03deb37cb13cbc8b65e454f2b?s=128&d=identicon&r=PG", "display_name": "Lee Duhem", "link": "https://stackoverflow.com/users/1004301/lee-duhem"}, "is_accepted": false, "score": 0, "last_activity_date": 1473827086, "creation_date": 1473827086, "answer_id": 39482455, "question_id": 39481497, "link": "https://stackoverflow.com/questions/39481497/unix-executable-file-exec-hex-dump-shows-c-code-not-assembly/39482455#39482455", "title": "Unix Executable File &#39;Exec&#39;, hex dump shows C code, not Assembly", "body": "<p>I believe what you saw is the <code>.strtab</code> section (or similar sections) of your executable or object file, which does include string.</p>\n\n<p>For example, for the following C program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    printf(\"Hello world!\\n\");\n}\n</code></pre>\n\n<p>Compiled with the following command:</p>\n\n<pre><code>gcc -Wall -g -std=c11 c00.c\n</code></pre>\n\n<p>If we hexdump it, we will find something like:</p>\n\n<pre><code>$ xxd a.out\n...\n00022e0: 0000 0000 0000 0000 0063 7274 7374 7566  .........crtstuf\n00022f0: 662e 6300 5f5f 4a43 525f 4c49 5354 5f5f  f.c.__JCR_LIST__\n0002300: 0064 6572 6567 6973 7465 725f 746d 5f63  .deregister_tm_c\n0002310: 6c6f 6e65 7300 7265 6769 7374 6572 5f74  lones.register_t\n0002320: 6d5f 636c 6f6e 6573 005f 5f64 6f5f 676c  m_clones.__do_gl\n...\n</code></pre>\n\n<p>And we can find out the section related information through</p>\n\n<pre><code>$ readelf -WS a.out \n...\n  [34] .strtab           STRTAB          0000000000000000 0022e8 000235 00      0   0  1\n</code></pre>\n\n<p>Notices the offset of <code>.strtab</code> is 0x0022e8, which matches what we saw from the output of <code>xxd</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1473829770, "creation_date": 1473829770, "answer_id": 39482860, "question_id": 39481497, "link": "https://stackoverflow.com/questions/39481497/unix-executable-file-exec-hex-dump-shows-c-code-not-assembly/39482860#39482860", "title": "Unix Executable File &#39;Exec&#39;, hex dump shows C code, not Assembly", "body": "<p>What you see is not C code but the table of symbols of your executable or object file (symbols that have <em>external linkage</em> property). An object file or executable is formatted (Linux uses ELF standard for example) into different sections: symbol table, global variables, code, etc. For the symbol table, the compiler generates it for different purpose as to generate linkable files or ease debug.</p>\n\n<p>In an executable, these symbols are not mandatory and you can easily remove them with command <code>strip</code>, if you strip an object file you will be unable to link it.</p>\n\n<p>You can show in a more readable form the content of the symbol table with commands like <code>nm</code>.</p>\n\n<p>Read online manual for <code>strip</code> and <code>nm</code> commands, how compilers link object files...</p>\n"}], "owner": {"reputation": 371, "user_id": 4493605, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de634ffd4d8a90ffbf4c4c6ad023e8b6?s=128&d=identicon&r=PG&f=1", "display_name": "user4493605", "link": "https://stackoverflow.com/users/4493605/user4493605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1473829770, "creation_date": 1473819030, "last_edit_date": 1473825945, "question_id": 39481497, "link": "https://stackoverflow.com/questions/39481497/unix-executable-file-exec-hex-dump-shows-c-code-not-assembly", "title": "Unix Executable File &#39;Exec&#39;, hex dump shows C code, not Assembly", "body": "<p>In Os X, I compiled a C program with the command: <code>gcc -o binaryoutName inputfile</code> which I created and then ran a hex dump on the resultant binary \"Exec\" file. As I understand it, an Exec file is a 'UNIX Executable', which is the UNIX equivalent of an executable file.</p>\n\n<p>When I ran the hex dump using the command <code>xxd -b binary</code>, it returned the ASCII content of the binary, however this ASCII represented the literal C code which i first programmed the .c file in.</p>\n\n<p>Hex dump Extract:</p>\n\n<p><code>0007c4a: 01101100 01110101 01110011 01101000 00000000 01011111  lush._\n0007c50: 01100110 01101111 01110000 01100101 01101110 00000000  fopen.\n0007c56: 01011111 01100110 01110000 01110010 01101001 01101110  _fprin\n0007c5c: 01110100 01100110 00000000 01011111 01100111 01100101  tf._ge\n0007c62: 01110100 01100011 01101000 01100001 01110010 00000000  tchar.\n0007c68: 01011111 01100111 01100101 01110100 01100011 01110111  _getcw\n0007c6e: 01100100 00000000 01011111 01100111 01100101 01110100  d._get\n0007c74: 01100101 01101110 01110110 00000000 01011111 01101100  env._l\n0007c7a: 01101111 01100011 01100001 01101100 01110100 01101001  ocalti\n0007c80: 01101101 01100101 00000000 01011111 01101101 01100101  me._me\n0007c86: 01101101 01100011 01110000 01111001 00000000 01011111  mcpy._\n0007c8c: 01110000 01110010 01101001 01101110 01110100 01100110  printf\n0007c92: 00000000 01011111 01110000 01110101 01110100 01100011  ._putc\n0007c98: 01101000 01100001 01110010 00000000 01011111 01110011  har._s\n0007c9e: 01100011 01100001 01101110 01100110 00000000 01011111  canf._\n0007ca4: 01110011 01101100 01100101 01100101 01110000 00000000  sleep.</code></p>\n\n<p>Note that the ASCII translation on the far-right column is extremely similar to the code inside the .c file I initially compiled.\nThis is counter-intuitive as I expected the hex dump to contain the ASCII binary of the Assembly code which the compiler would logically compile it too.</p>\n\n<p>This is a question at the very limits of my understanding of the compilation process and I expect to have a few incorrect details, for which I apologies.</p>\n\n<p>My Question: <strong>Why did the hex dump return ASCII for C code instead of Assembly?</strong></p>\n\n<p>Thanks in Advance.</p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1473818509, "post_id": 39481408, "comment_id": 66281811, "body": "Garbage is displayed because it is not initialized"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1473818584, "post_id": 39481408, "comment_id": 66281831, "body": "The output is not garbage. Every 6 characters is an array element. I just hide the populating code."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1473818627, "post_id": 39481408, "comment_id": 66281842, "body": "<code>puts</code> expects a string. A C string is by definition a sequence of characters terminated by <code>\\0</code> (NUL). So it&#39;s not a property of C overall but a property of <code>puts</code> and how it is defined to behave. If you want to print a single character you would not use <code>puts</code> but something else, for instance: <code>printf(&quot;%c&quot;, memory[0][0])</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "edited": false, "score": 0, "creation_date": 1473818701, "post_id": 39481408, "comment_id": 66281862, "body": "Would I use <code>printf</code>, and with what type?"}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 1, "creation_date": 1473818729, "post_id": 39481408, "comment_id": 66281874, "body": "It&#39;s impossible to say without seeing more of your initialization code. My guess is that you&#39;re not appending a null character to the end of your character arrays. C-style string output functions such as puts() and fputs() rely on strings being null terminated. If you know the size of all your strings you could try another function such as write()"}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 0, "creation_date": 1473818865, "post_id": 39481408, "comment_id": 66281904, "body": "@Nic If you want to print a single character you can use kaylum&#39;s specifier. If you want to print a string you can use &lt;code&gt;printf(&quot;%s\\n&quot;, memory[0])&lt;/code&gt;. You can include or omit the newline character &lt;code&gt;&#39;\\n&#39;&lt;/code&gt; depending on what kind of output you want."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "reply_to_user": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 0, "creation_date": 1473818870, "post_id": 39481408, "comment_id": 66281905, "body": "@David All my strings are the same size."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1473818912, "post_id": 39481408, "comment_id": 66281913, "body": "@Nic It sounds like you don&#39;t actually have any strings - you just have arrays of 6 char"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473818926, "post_id": 39481408, "comment_id": 66281917, "body": "@M.M Yes that is true."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1473818965, "post_id": 39481408, "comment_id": 66281927, "body": "<code>puts</code> is for outputting strings; so you either have to store strings in your array, or use a different output function. Such as <code>printf(&quot;%.6s&quot;, memory[0]);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "edited": false, "score": 1, "creation_date": 1473819037, "post_id": 39481408, "comment_id": 66281940, "body": "I would prefer to access via row and not character count because I do not want to calculate the amount of characters each time. My array does not include a terminator however. Using <code>printf</code> is completely fine, I just only want the index I&#39;m asking for, not the entire array."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1473819611, "post_id": 39481408, "comment_id": 66282064, "body": "@Nic Then you&#39;ll have to write code that knows how to do something with an array row. That strikes me as a lot of effort for very little payoff. Instead, why not either use C-style strings or use characters? Those are both already there and both have lots of nice functions that know what to do with them."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473819814, "post_id": 39481408, "comment_id": 66282108, "body": "What exactly do you think should be printed by <code>puts(memory[0])</code>?  If the answer is <code>00P003</code>, then you have not created null terminated strings and that is the problem.  If you think it should be something shorter, then we need to see how you initialize the array; there are multiple ways to get it wrong and we&#39;re not able to guess which one you&#39;ve chosen to use.  Please create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  Reduce the dimension from 100 to no more than 10 (5 would be sufficient)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "edited": false, "score": 0, "creation_date": 1473819218, "post_id": 39481503, "comment_id": 66281974, "body": "This doesn&#39;t really answer the entirety of my question because I am also wondering how to get a given index in my array by value. Such as <code>memory[0]</code>. I do not have any &quot;string terminators&quot; because as stated by others I have an array of characters."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1473819388, "post_id": 39481503, "comment_id": 66282007, "body": "I don&#39;t understand what you mean by &quot;get a given index in my array by value&quot;. If you want array[2][3], use <code>array[2][3]</code>. Just don&#39;t use <code>puts</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "edited": false, "score": 0, "creation_date": 1473819501, "post_id": 39481503, "comment_id": 66282041, "body": "I don&#39;t want <code>array[2][3]</code>. I want <code>array[2]</code>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1473819545, "post_id": 39481503, "comment_id": 66282047, "body": "@Nic Then you&#39;ll have to write code that understands how to do something with an array row, because even if you had <code>array[2]</code>, what could you do with it? You have no code that takes it. So why paint yourself into a corner?"}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 1, "creation_date": 1473819642, "post_id": 39481503, "comment_id": 66282070, "body": "@Nic: You say that you don&#39;t want to have a terminator, but also that you don&#39;t want to calculate the number of characters. You can&#39;t have both of these things, you&#39;ll have to choose one or the other."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "edited": false, "score": 0, "creation_date": 1473819871, "post_id": 39481503, "comment_id": 66282120, "body": "Thank you for the clarification Paul. I was not aware of this. I come from higher level languages and this makes more sense now."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 0, "last_activity_date": 1473819108, "creation_date": 1473819108, "answer_id": 39481503, "question_id": 39481408, "link": "https://stackoverflow.com/questions/39481408/printing-first-index-in-array-prints-every-index-with-c/39481503#39481503", "title": "Printing first index in array prints every index with C", "body": "<p>The <code>puts</code> function is strictly for C-style strings. If you pass it a pointer to something other than a C-style string, garbage is likely to result. How are you expecting it to know how many characters to output?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4780686"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 39481503, "answer_count": 1, "score": 0, "last_activity_date": 1473819108, "creation_date": 1473818291, "last_edit_date": 1473818834, "question_id": 39481408, "link": "https://stackoverflow.com/questions/39481408/printing-first-index-in-array-prints-every-index-with-c", "title": "Printing first index in array prints every index with C", "body": "<p>I am starting to learn C and have a question about arrays.</p>\n\n<p>Here I have a 2-dimensional simple array of characters:</p>\n\n<pre><code>char memory[100][6];\n...\n// populate indexes\n</code></pre>\n\n<p>and here I try to print out the first row:</p>\n\n<pre><code>puts(memory[0]);\n</code></pre>\n\n<p>Here is the output. Why does every row print out?</p>\n\n<pre><code>00P00300P10404P1ZZZZ0000ZZ0010\n</code></pre>\n\n<p>I come from Java where if you run the same code you will only get the first row. Am I missing something or is this just how C handles arrays? If so, how can I just get the first row?</p>\n"}, {"tags": ["c", "segmentation-fault", "quicksort"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1473817438, "post_id": 39481301, "comment_id": 66281618, "body": "&quot;I tried hard to resolve the issue but found nothing.&quot;. So what did you find out? At a very very minimum you should be able to tell us which line of code is causing the seg fault. A debugger will give you that info (and more)."}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1473818713, "post_id": 39481301, "comment_id": 66281868, "body": "Even w/o debugger, did you try to read your code and understand what do you actually do in each its row?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1473818880, "post_id": 39481301, "comment_id": 66281908, "body": "<code>a[i] = lastsmall;              lastsmall = a[i];</code> ?? and <code>if(a[p]&gt;pivot)             continue;</code> ??"}], "answers": [{"comments": [{"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1473861747, "post_id": 39481797, "comment_id": 66302440, "body": "@WhozCraig Yepp, that&#39;s a typo (prob. from C&amp;P &#39;ing a single function into the two functions the OP made). What held you back from repairing this obvious blunder?"}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": -1, "last_activity_date": 1473871377, "last_edit_date": 1473871377, "creation_date": 1473821641, "answer_id": 39481797, "question_id": 39481301, "link": "https://stackoverflow.com/questions/39481301/segmentation-fault-core-dumped-in-quick-sort-algorithm/39481797#39481797", "title": "Segmentation fault (core dumped) in quick sort algorithm", "body": "<p><strong>EDITED</strong> to add some explanations</p>\n\n<p>The segfault was easy to pinpoint in line 26, an off-by-one. I couldn't make sense of your <code>divide</code> function, so I just implemented the search for the pivot after the pseudocode at <a href=\"https://rosettacode.org/wiki/Sorting_algorithms/Quicksort\" rel=\"nofollow\">Rosetta</a>. Found that simple and easy to understand.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint divide(int a[], int low, int high)\n{\n  int pivot, tmp;\n\n  // Yes, you can choose other start values.\n  pivot = (low + high)/2;\n\n  while (low &lt;= high) {\n    while (a[low] &lt; a[pivot]) {\n      low++;\n    }\n    while (a[high] &gt; a[pivot]) {\n      high--;\n    }\n    if (low &lt;= high) {\n      tmp = a[low];\n      a[low] = a[high];\n      a[high] = tmp;\n      low++;\n      high--;\n    }\n  }\n  return pivot;\n}\n\nvoid quick(int a[], int p, int q)\n{\n  int pivot;\n  if (p &lt; q) {\n    pivot = divide(a, p, q);\n    // Here was your segfault\n    quick(a, p, pivot - 1);\n    quick(a, pivot + 1, q);\n  }\n}\n\nint main()\n{\n  int ar[10], i;\n  printf(\"Enter the list\\n\");\n  for (i = 0; i &lt; 10; i++) {\n    scanf(\"%d\", &amp;ar[i]);\n  }\n  quick(ar, 0, 9);\n  for (i = 0; i &lt; 10; i++) {\n    printf(\"%d \", ar[i]);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>A real implementation would involve a lot of pointer-juggling, a function to compare the elements, passed as a function pointer, and a large heap of optimizations. See for example the <a href=\"https://github.com/lattera/glibc/blob/master/stdlib/qsort.c\" rel=\"nofollow\">GLibC implementation</a>.</p>\n\n<p>The <strong>EDIT</strong> promised above:</p>\n\n<p>The pivot itself can by anything as long as it is somewhere in the input, it can even be constant, as I had before. Many papers have been written about the choice of the pivot and the only thing they all have in common is the conclusion: it depends on the expected input.</p>\n\n<p>I have put a counter in the outer <code>while</code> loop (prob. better to count the number of compares) and generated 100 random integers between 10 and 10,000 a hundred times. The average number of \"rounds\" was for returning</p>\n\n<ul>\n<li><code>low</code> = 168.55</li>\n<li><code>--low</code> = 185.67</li>\n<li><code>high</code> = inf (obviously)</li>\n<li><code>++high</code> = 174.87</li>\n<li><code>pivot</code> = 216.04 (that is: always the start index which increments by one every second call)</li>\n</ul>\n\n<p>If I change the pivot to be the floor of the geometric mean I get</p>\n\n<ul>\n<li><code>low</code> = 153.22</li>\n<li><code>--low</code> = 152.65</li>\n<li><code>high</code> = inf</li>\n<li><code>++high</code> = 151.88</li>\n<li><code>pivot</code> = 134.85</li>\n</ul>\n\n<p>Counting the actual number of compares and with an array of 100,000 elements of random integers between 10 and 1,000,000 (pivot is still the geometric mean), averaged compares of hundred runs</p>\n\n<ul>\n<li><code>low</code> = 12762491.95</li>\n<li><code>--low</code> = 12756154.17</li>\n<li><code>high</code> = inf</li>\n<li><code>++high</code> = 12702092.52</li>\n<li><code>pivot</code> = 13121675.81</li>\n</ul>\n\n<p>The same with pivot set to geometric mean</p>\n\n<ul>\n<li><code>low</code> = 12749755.60</li>\n<li><code>--low</code> = 12801865.60</li>\n<li><code>high</code> = inf</li>\n<li><code>++high</code> = 12705592.10</li>\n<li><code>pivot</code> = 13113604.20</li>\n</ul>\n\n<p>Some might say that the number of calls to <code>quick()</code> (calls to <code>divide()</code> are a bit more than half of that with a constant factor) would be a better measurement and they are also right. Only 10 rounds this time.</p>\n\n<p>Same</p>\n\n<ul>\n<li><code>low</code> = 1281068.00</li>\n<li><code>--low</code> = 1225781.20</li>\n<li><code>high</code> = inf</li>\n<li><code>++high</code> = 1221477.00</li>\n<li><code>pivot</code> = 1048575.00</li>\n</ul>\n\n<p>Same, input sorted low to high</p>\n\n<ul>\n<li><code>low</code> = 1280983.80</li>\n<li><code>--low</code> = 1225749.80</li>\n<li><code>high</code> = inf</li>\n<li><code>++high</code> = 1221376.80</li>\n<li><code>pivot</code> = 1048575.00</li>\n</ul>\n\n<p>Same, input sorted high to low</p>\n\n<ul>\n<li><code>low</code> = 1281025.80</li>\n<li><code>--low</code> = 1225738.80</li>\n<li><code>high</code> = inf</li>\n<li><code>++high</code> = 1221632.20</li>\n<li><code>pivot</code> = 1048575.00</li>\n</ul>\n\n<p>Test with the <code>divide()</code> proposed by WhozCraig:</p>\n\n<p>Unsorted input: 1333671.00\nSorted input (low to high): 1333513.60\nSorted input (high to low): 1333594.80</p>\n\n<p>Stable runtimes but also a small but significant bit slower (for the given input!).</p>\n\n<p>Conclusion: for an uniformly distributed, random, dense input set, setting the pivot to the geometric mean between <code>low</code> and <code>high</code> seems to save the most comparisons. Returning the start pivot or one of the more optimal values computed later differs by a significant but quite small factor in comparisons but a rather large one in actual calls to <code>quick()</code>.</p>\n\n<p>This <em>will</em> differ for other input sets and other pivot values (you can also use several pivots), and also for different architectures.</p>\n\n<p>It is indeed possible to waste a lot of time in optimizing quicksort, so be cautious!</p>\n"}], "owner": {"reputation": 13, "user_id": 6225550, "user_type": "registered", "profile_image": "https://graph.facebook.com/983153345113562/picture?type=large", "display_name": "Rajan Choudhary", "link": "https://stackoverflow.com/users/6225550/rajan-choudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1521330318, "creation_date": 1473817300, "last_edit_date": 1521330318, "question_id": 39481301, "link": "https://stackoverflow.com/questions/39481301/segmentation-fault-core-dumped-in-quick-sort-algorithm", "title": "Segmentation fault (core dumped) in quick sort algorithm", "body": "<p>Below is my code for Quick sort i C. I am getting Segmentation fault Core Dumped.\nI tried hard to resolve the issue but found nothing.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint divide(int a[], int p, int q) {\n    int mid, i, lastsmall, temp;\n\n    mid = (p + q)/2;\n    temp = a[mid];\n    a[mid] = a[p];\n    a[p] = temp;\n    int pivot = a[p];\n    lastsmall = p;\n\n    for (i = p + 1; i &lt;= q; i++) {\n        if (a[p] &gt; pivot)\n            continue;\n        else {\n             lastsmall++;\n             temp = a[i];\n             a[i] = lastsmall;\n             lastsmall = a[i];\n        }\n    }\n    return lastsmall;\n}\n\nvoid quick(int a[], int p, int q) {\n    int pivot;\n    if (p &lt; q) {\n        pivot = divide(a, p, q);\n        quick(a, p, pivot);\n        quick(a, pivot + 1, q);\n    }\n}\n\nint main() {\n    int ar[10], i;\n\n    printf(\"Enter the list\\n\");\n    for (i = 0; i &lt; 10;i++)\n        scanf(\"%d\", &amp;ar[i]);\n    quick(ar, 0, 9);\n    for (i = 0; i &lt; 10; i++)\n        printf(\"%d \", ar[i]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "min"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1473817325, "post_id": 39481285, "comment_id": 66281599, "body": "Because a 32bit signed integer value can not be +2147483648. The two&#39;s complement of -2147483648 is -2147483648."}, {"owner": {"reputation": 118, "user_id": 6683519, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh3.googleusercontent.com/-S2xxEM9_p0s/AAAAAAAAAAI/AAAAAAAAANo/AZoMxMXwyTM/photo.jpg?sz=128", "display_name": "Joseph Perez", "link": "https://stackoverflow.com/users/6683519/joseph-perez"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1473817407, "post_id": 39481285, "comment_id": 66281611, "body": "omg im so dumb. This assignment is even supposed to get us familiar with unsigned/signed/binary limits on 32 bits"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1473817909, "post_id": 39481285, "comment_id": 66281692, "body": "If you&#39;re compiling for 64 bit on a system when <code>long</code> is a 64 bit type (most places aside from Windows), making it <code>-1L * atoi(input)</code> would resolve that corner case by forcing promotion to <code>long</code>."}, {"owner": {"reputation": 118, "user_id": 6683519, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh3.googleusercontent.com/-S2xxEM9_p0s/AAAAAAAAAAI/AAAAAAAAANo/AZoMxMXwyTM/photo.jpg?sz=128", "display_name": "Joseph Perez", "link": "https://stackoverflow.com/users/6683519/joseph-perez"}, "edited": false, "score": 0, "creation_date": 1473825634, "post_id": 39481285, "comment_id": 66283305, "body": "unfortunately I&#39;m doing this for a class and on my 32-bit RaspPi so there&#39;s that"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1473825871, "post_id": 39481285, "comment_id": 66283375, "body": "@JosephPerez there&#39;s nothing prevents the Pi from doing 64-bit math"}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 0, "creation_date": 1473828024, "post_id": 39481285, "comment_id": 66283854, "body": "Using a 64-bit data type only moves the &quot;value overflows&quot; case to a larger range of numbers, and does nothing to solve the &quot;no overflow detection/handling&quot; bug. For this reason the suggestion to use a 64-bit data type should be considered an indication of incompetence."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473818413, "post_id": 39481307, "comment_id": 66281789, "body": "In fact the problem is with <code>int</code>"}], "tags": [], "owner": {"reputation": 130, "user_id": 5326728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb49642583b9eb3913282d58a0683eac?s=128&d=identicon&r=PG&f=1", "display_name": "Hiren", "link": "https://stackoverflow.com/users/5326728/hiren"}, "is_accepted": false, "score": 0, "last_activity_date": 1505363100, "last_edit_date": 1505363100, "creation_date": 1473817360, "answer_id": 39481307, "question_id": 39481285, "link": "https://stackoverflow.com/questions/39481285/making-the-minimum-integer-value-positive-in-c/39481307#39481307", "title": "Making the minimum integer value positive in C", "body": "<p>You are running into the value limit for a signed long integer. You will need to try using another data type.</p>\n"}, {"comments": [{"owner": {"reputation": 118, "user_id": 6683519, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh3.googleusercontent.com/-S2xxEM9_p0s/AAAAAAAAAAI/AAAAAAAAANo/AZoMxMXwyTM/photo.jpg?sz=128", "display_name": "Joseph Perez", "link": "https://stackoverflow.com/users/6683519/joseph-perez"}, "edited": false, "score": 0, "creation_date": 1473825587, "post_id": 39482290, "comment_id": 66283293, "body": "ty this is helpful for me to know"}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 1, "last_activity_date": 1473825632, "last_edit_date": 1495540516, "creation_date": 1473825555, "answer_id": 39482290, "question_id": 39481285, "link": "https://stackoverflow.com/questions/39481285/making-the-minimum-integer-value-positive-in-c/39482290#39482290", "title": "Making the minimum integer value positive in C", "body": "<p>Unfortunately memory allocated for any standard tipe is limited, so ranges of all all types have quite definite borders. Violated borders lead to computing errors.</p>\n\n<p>To know borders (like min and max possible values) for integer types (not only <code>int</code>, but also <code>char</code>, <code>short</code>, etc.) you can use <code>limits.h</code>. E.g.:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint main(void)\n{\n    printf(\"INT_MIN = %d\\n\", INT_MIN);\n    printf(\"INT_MAX = %d\\n\", INT_MAX);\n    printf(\"LONG_MIN = %ld\\n\", LONG_MIN);\n    printf(\"LONG_MAX = %ld\\n\", LONG_MAX);\n    printf(\"LLONG_MIN = %lld\\n\", LLONG_MIN);\n    printf(\"LLONG_MAX = %lld\\n\", LLONG_MAX);\n    return 0;\n}\n</code></pre>\n\n<p>Note:</p>\n\n<p>1) values of limits depends on compiler and platform (e.g. for my system <code>LONG_MIN</code> is equal to <code>INT_MIN</code>, but perhaps, you will see different values);</p>\n\n<p>2) <code>limits.h</code> is just text file that can be oppend and explored</p>\n\n<p>3) also learn about <code>stdint.h</code>, that provide types with fixed sizes (and allows programs to be portable without \"perhaps\" in my first note)</p>\n\n<p>4) there are some techniques to <a href=\"https://stackoverflow.com/questions/199333/how-to-detect-integer-overflow-in-c-c\">detect integer overflow</a> </p>\n"}, {"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 1, "last_activity_date": 1473828489, "creation_date": 1473828489, "answer_id": 39482653, "question_id": 39481285, "link": "https://stackoverflow.com/questions/39481285/making-the-minimum-integer-value-positive-in-c/39482653#39482653", "title": "Making the minimum integer value positive in C", "body": "<p>For both <code>atoi()</code> and <code>atol()</code>; if the converted value is out of range for the return type (<code>int</code> and <code>long int</code> respectively), then you get undefined behaviour (e.g. \"format hard drive\").</p>\n\n<p>To avoid undefined behaviour you must ensure that the value in the string is within a certain range <em>before</em> using either <code>atoi()</code> or <code>atol()</code>.</p>\n\n<p>Any technique that correctly ensures the value in the string is within a certain range (without using either <code>atoi()</code> or <code>atol()</code>) is also a technique that can be modified slightly and used to detect and handle the <code>INT_MIN</code> case (without using either <code>atoi()</code> or <code>atol()</code>).</p>\n"}], "owner": {"reputation": 118, "user_id": 6683519, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh3.googleusercontent.com/-S2xxEM9_p0s/AAAAAAAAAAI/AAAAAAAAANo/AZoMxMXwyTM/photo.jpg?sz=128", "display_name": "Joseph Perez", "link": "https://stackoverflow.com/users/6683519/joseph-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1505363100, "creation_date": 1473817157, "last_edit_date": 1473817502, "question_id": 39481285, "link": "https://stackoverflow.com/questions/39481285/making-the-minimum-integer-value-positive-in-c", "title": "Making the minimum integer value positive in C", "body": "<p>So I've got the following code</p>\n\n<pre><code>printf(\"atoi(input) = %d\\n\", atoi(input));\nlong number = 0;\nif(atol(input) &lt; 0){\n    printf(\"went into here\\n\");\n    printf(\"atoi = %d\\n\", atoi(input)); \n    number = -1 * atoi(input);  \n    printf(\"number = %d\\n\", number);    \n}else{\n    number = atoi(input);\n}\n</code></pre>\n\n<p>But for some reason when my user inputs -2147483648 (and probably other really large decimals), the multiply by -1 doesn't work, and the number remains negative. Any ideas?</p>\n"}, {"tags": ["c", "console"], "comments": [{"owner": {"reputation": 431, "user_id": 2748344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000131989464/picture?type=large", "display_name": "caiomcg", "link": "https://stackoverflow.com/users/2748344/caiomcg"}, "edited": false, "score": 1, "creation_date": 1473812431, "post_id": 39480736, "comment_id": 66280535, "body": "The program has nothing else to do. If you want him to stop add an input operation with getchar() for example(before the return statement)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473814064, "post_id": 39480736, "comment_id": 66280901, "body": "Are you saying that it does not wait for you to type a name?"}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 0, "creation_date": 1473814509, "post_id": 39480736, "comment_id": 66281023, "body": "There are dozens of possible answers, all of them have been covered in depth before. Learn to use Google.  <a href=\"http://stackoverflow.com/questions/1864029/how-do-you-keep-the-console-from-closing-after-the-program-is-done-in-c\" title=\"how do you keep the console from closing after the program is done in c\">stackoverflow.com/questions/1864029/&hellip;</a> <a href=\"http://stackoverflow.com/questions/1173208/what-is-the-best-practice-for-combating-the-console-closing-issue\" title=\"what is the best practice for combating the console closing issue\">stackoverflow.com/questions/1173208/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1021, "user_id": 505807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068e0534caa02d86b90d16babc49dc91?s=128&d=identicon&r=PG&f=1", "display_name": "James Lockhart", "link": "https://stackoverflow.com/users/505807/james-lockhart"}, "is_accepted": false, "score": 3, "last_activity_date": 1473813163, "last_edit_date": 1473813163, "creation_date": 1473812828, "answer_id": 39480809, "question_id": 39480736, "link": "https://stackoverflow.com/questions/39480736/c-program-briefly-shows-on-console-then-disappears/39480809#39480809", "title": "C program briefly shows on console, then disappears", "body": "<p>You're returning at the end of your statement and I assume you're using Visual Studio which will terminate the console as the application has finished running. One thing you could do is add a break point before the return or the simpler thing is to fudge it with getch() e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define TSHIRT  18.95\n#define CHIPS   1.79\n#define COKE    2.99\n#define TAX     0.06\n#define DEPOSIT 1.20\n\nint main(void) {\nprintf(\"Hello customer! What shall I call you?\");\n\nchar name[20];\nscanf(\"%s\",name);\nprintf(\"Okay %s, here is what we have to offer:\",name);\ngetch();\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>If that doesn't work add the include conio.h, but I believe it works without it.</p>\n\n<pre><code>#include &lt;conio.h&gt;\n</code></pre>\n\n<p>Also, to help you avoid a buffer overflow you should use scanf like this:</p>\n\n<pre><code>scanf(\"%19s\",name);\n</code></pre>\n\n<p>You don't want to scan more than your allocated buffer and you should use the buffer length minus one because scanf appends a null terminator to the end of the scan.</p>\n"}, {"tags": [], "owner": {"reputation": 3419, "user_id": 2225030, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VMt47.jpg?s=128&g=1", "display_name": "Harshil Doshi", "link": "https://stackoverflow.com/users/2225030/harshil-doshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1473831764, "creation_date": 1473831764, "answer_id": 39483191, "question_id": 39480736, "link": "https://stackoverflow.com/questions/39480736/c-program-briefly-shows-on-console-then-disappears/39483191#39483191", "title": "C program briefly shows on console, then disappears", "body": "<p>Make the following subtle changes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;  // It contains information of getch() function which we used later in program\n#define TSHIRT  18.95\n#define CHIPS   1.79\n#define COKE    2.99\n#define TAX     0.06\n#define DEPOSIT 1.20\n\nint main(void) {\nprintf(\"Hello customer! What shall I call you?\");\n\nchar name[20];\nscanf(\"%s\",name);\nprintf(\"Okay %s, here is what we have to offer:\",name);\ngetch();   // It will wait for one char input from user\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The getch() waits and holds the screen until you enter any single character.\nHope it will be helpful!</p>\n"}], "owner": {"reputation": 11, "user_id": 6828459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8895e4eb0c099bfe6e4f2013e093880?s=128&d=identicon&r=PG&f=1", "display_name": "Gary_LazerEyes", "link": "https://stackoverflow.com/users/6828459/gary-lazereyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473831764, "creation_date": 1473812262, "question_id": 39480736, "link": "https://stackoverflow.com/questions/39480736/c-program-briefly-shows-on-console-then-disappears", "title": "C program briefly shows on console, then disappears", "body": "<p>I have java background but I am new to C programming and this is my first HW assignment so forgive me if this is a simple fix. I need to ask a customer what their name is &amp; what they want to buy. I began like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define TSHIRT  18.95\n#define CHIPS   1.79\n#define COKE    2.99\n#define TAX     0.06\n#define DEPOSIT 1.20\n\nint main(void) {\nprintf(\"Hello customer! What shall I call you?\");\n\nchar name[20];\nscanf(\"%s\",name);\nprintf(\"Okay %s, here is what we have to offer:\",name);\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>When the program runs, it only shows very briefly on the console then disappears leaving the console blank. What is the reason why?</p>\n"}, {"tags": ["c", "error-handling", "runtime-error"], "comments": [{"owner": {"reputation": 2331, "user_id": 5922757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb5fdb2ccceacfda01288f0b95a6cfdf?s=128&d=identicon&r=PG", "display_name": "Jezor", "link": "https://stackoverflow.com/users/5922757/jezor"}, "edited": false, "score": 1, "creation_date": 1473812091, "post_id": 39480661, "comment_id": 66280462, "body": "<a href=\"http://www.cplusplus.com/reference/cerrno/errno/\" rel=\"nofollow noreferrer\">errno</a> returns last error number. It&#39;s not exactly what you asked for, but you can always make an enum and convert it to strings later, <a href=\"http://stackoverflow.com/questions/5093460/how-to-convert-an-enum-type-variable-to-a-string\">there are a couple ways to do that</a>."}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 0, "creation_date": 1473812196, "post_id": 39480661, "comment_id": 66280484, "body": "This sounds like a bad idea. Functions such as strerror() perror() are used specifically to provide helpful error messages. Why would you opt to print the enumerated name rather than the associated error message?"}, {"owner": {"reputation": 10030, "user_id": 3052751, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11564daa64a4b0252a133fe3801468a7?s=128&d=identicon&r=PG&f=1", "display_name": "VividD", "link": "https://stackoverflow.com/users/3052751/vividd"}, "reply_to_user": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 1, "creation_date": 1473812450, "post_id": 39480661, "comment_id": 66280539, "body": "@David I am writing a tool used by programmers, and it is desireable to print &quot;EFAULT&quot;, &quot;EBUSY&quot;, &quot;ENOTSOCK&quot;, etc., instead of some text. The programmers say it is more useful for them.  I don&#39;t argue about that with programmers, especially if I am a programmer. ;)"}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1473812835, "post_id": 39480661, "comment_id": 66280630, "body": "Why a switch statement? I&#39;d use an array of strings for this."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1473812940, "post_id": 39480661, "comment_id": 66280653, "body": "The values of <code>errno</code> are implementation defined, and only about three macros (<code>EDOM</code>, <code>ERANGE</code>, <code>EILSEQ</code>) are actually defined in the standard.     Values like <code>ENOTDIR</code>, <code>EBUSY</code> are not standard.   Which basically means, if you don&#39;t want the results from <code>strerror()</code> or <code>perror()</code>, you need to roll your &quot;huge switch statement&quot; (where, presumably, your definition of &quot;huge&quot; is something like &quot;greater than 10 cases&quot;)"}, {"owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1473813015, "post_id": 39480661, "comment_id": 66280662, "body": "EAGAIN and EWOULDBLOCK may have the same value making a unique string impossible without additional context.  All the others have distinct values so a switch statement would work.  @IgnacioVazquez-Abrams, are the defines guaranteed to be valid array indices?"}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "reply_to_user": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 0, "creation_date": 1473813134, "post_id": 39480661, "comment_id": 66280692, "body": "@RobertPr&#233;vost: I don&#39;t know if they&#39;re <i>guaranteed</i>, but I&#39;d think that they would be as consecutive as reasonably possible."}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1473814758, "post_id": 39480661, "comment_id": 66281082, "body": "@Peter How huge? On Linux there are about 130-140 defined errno values."}], "answers": [{"tags": [], "owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "is_accepted": false, "score": 3, "last_activity_date": 1473818289, "last_edit_date": 1473818289, "creation_date": 1473815545, "answer_id": 39481117, "question_id": 39480661, "link": "https://stackoverflow.com/questions/39480661/a-function-returning-enotdir-ebusy-etc-as-strings/39481117#39481117", "title": "A function returning &quot;ENOTDIR&quot;, &quot;EBUSY&quot;, etc. as strings?", "body": "<p>No- there is no standard or commonly used nonstandard function that provides this functionality.</p>\n\n<p>One approach would be to write a huge switch statement, but this might not be the best approach for you to take. Most values of <code>errno</code> are not specified by any standard, so their values may or may not be consistent across different operating systems or even different versions of the same operating system.</p>\n\n<p>Plus it would be a pain in the rear end.</p>\n\n<p>A more elegant approach, if some runtime overhead is acceptable, would be to write a function that looks up these errors codes when they occur, rather than hard-coding the values into a big table. GNU/Linux systems have a list of all possible <code>errno</code> values at:</p>\n\n<pre><code>/usr/include/asm-generic/errno-base.h\n/usr/include/asm-generic/errno.h\n</code></pre>\n\n<p>These files provide a <code>#define</code> of each <code>errno</code> value along with their value and a short description in an adjacent comment. It'd be pretty trivial to search these files line-by-line and print out the matching error code. Even if not, these files would be the things to start with in your quest to write a huge switch statement.</p>\n\n<p>Beware that the kernel might negate these values when they're passed to userspace.</p>\n"}, {"tags": [], "owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "is_accepted": true, "score": 2, "last_activity_date": 1473818176, "creation_date": 1473818176, "answer_id": 39481389, "question_id": 39480661, "link": "https://stackoverflow.com/questions/39480661/a-function-returning-enotdir-ebusy-etc-as-strings/39481389#39481389", "title": "A function returning &quot;ENOTDIR&quot;, &quot;EBUSY&quot;, etc. as strings?", "body": "<p>As David points out above, the problem is there is no standard function that can provide the desired functionality.  So thinking that this would be a neat problem to try to write a script for, I wrote a little something to automatically generate the switch function (if it should come to be necessary) and posted the code <a href=\"https://github.com/roberttprevost/CodeEtCetera/blob/master/parseHeader.py\" rel=\"nofollow\">here</a>.  Seems to work alright on OS X, otherwise mileage may vary.  A script such as this could be added to the build process to make sure that the values were defined correctly.</p>\n"}], "owner": {"reputation": 10030, "user_id": 3052751, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11564daa64a4b0252a133fe3801468a7?s=128&d=identicon&r=PG&f=1", "display_name": "VividD", "link": "https://stackoverflow.com/users/3052751/vividd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 39481389, "answer_count": 2, "score": 4, "last_activity_date": 1473818289, "creation_date": 1473811568, "question_id": 39480661, "link": "https://stackoverflow.com/questions/39480661/a-function-returning-enotdir-ebusy-etc-as-strings", "title": "A function returning &quot;ENOTDIR&quot;, &quot;EBUSY&quot;, etc. as strings?", "body": "<p>strerror() function returns a short error description, given error number as argument. For example, if the argument is ENOTDIR, it will return \"Not a directory\", if the argument is EBUSY, it will return \"Device or resource busy\", etc.</p>\n\n<p>But, is there a function that returns \"ENOTDIR\" for argument equals ENOTDIR, \"EBUSY\" for argument EBUSY, etc.?</p>\n\n<p>I just want to avoid writing a huge switch statement for this purpose.</p>\n"}, {"tags": ["c", "file", "scanf"], "comments": [{"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1473810101, "post_id": 39480462, "comment_id": 66280071, "body": "If you don&#39;t want to read input, then what do you want <code>fscanf</code> to do?  What are you trying to accomplish?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1473810288, "post_id": 39480462, "comment_id": 66280112, "body": "<code>fscanf(stdin)</code> : This does not compile."}, {"owner": {"reputation": 577, "user_id": 3034338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9324b483505227ab1839298f7159d1?s=128&d=identicon&r=PG&f=1", "display_name": "fernando.reyes", "link": "https://stackoverflow.com/users/3034338/fernando-reyes"}, "edited": false, "score": 0, "creation_date": 1473810350, "post_id": 39480462, "comment_id": 66280126, "body": "If you don&#39;t want what you read, what you are looking for is fseek"}, {"owner": {"reputation": 2273, "user_id": 6020403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f0a9f540105e654ef7d03edc36ad3a?s=128&d=identicon&r=PG", "display_name": "BJ Black", "link": "https://stackoverflow.com/users/6020403/bj-black"}, "edited": false, "score": 0, "creation_date": 1473810538, "post_id": 39480462, "comment_id": 66280163, "body": "You can&#39;t fseek stdin or similar, though..."}, {"owner": {"reputation": 21, "user_id": 3968239, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5106e803657fcae597d45bf13242b7fd?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3968239/sandy"}, "edited": false, "score": 0, "creation_date": 1473819087, "post_id": 39480462, "comment_id": 66281950, "body": "I was wrong about what i needed to do, i pretty much have to continue my loop until ctl-d is pressed so i am trying to figure thato ut now"}], "answers": [{"tags": [], "owner": {"reputation": 2273, "user_id": 6020403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f0a9f540105e654ef7d03edc36ad3a?s=128&d=identicon&r=PG", "display_name": "BJ Black", "link": "https://stackoverflow.com/users/6020403/bj-black"}, "is_accepted": false, "score": 1, "last_activity_date": 1473810153, "creation_date": 1473810153, "answer_id": 39480516, "question_id": 39480462, "link": "https://stackoverflow.com/questions/39480462/using-fscanf-without-taking-in-the-input-from-the-file-at-the-moment/39480516#39480516", "title": "Using fscanf without taking in the input from the file at the moment", "body": "<p>You can't rewind or peek stdin (you can ungetc, but it's only guaranteed to work for one char), so your best bet would be to malloc() or realloc() some memory on a line-by-line basis (or whatever works for you) and pop what you scan into some array until you're ready to use it.</p>\n\n<p>Note that stdin is blocking I/O as well, so your program will stall waiting for input unless you do something between scans.</p>\n"}], "owner": {"reputation": 21, "user_id": 3968239, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5106e803657fcae597d45bf13242b7fd?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3968239/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473810153, "creation_date": 1473809750, "question_id": 39480462, "link": "https://stackoverflow.com/questions/39480462/using-fscanf-without-taking-in-the-input-from-the-file-at-the-moment", "title": "Using fscanf without taking in the input from the file at the moment", "body": "<p>Ok i wanna use fscanf without actually taking the input from the file at this point.</p>\n\n<p>so i was thinking something like this </p>\n\n<pre><code>while ( ( fscanf(stdin)) !=EOF) {\n continue...\n\n}\n</code></pre>\n\n<p>later in the program i will be using the information in another function i was just wondering if this is possible.</p>\n"}, {"tags": ["c", "windows", "encryption", "openssl"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1473811406, "post_id": 39480281, "comment_id": 66280327, "body": "Shouldn&#39;t you be writing out_len bytes rather than in_len bytes?"}, {"owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1473811488, "post_id": 39480281, "comment_id": 66280346, "body": "@immibis where at?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1473811524, "post_id": 39480281, "comment_id": 66280355, "body": "At both the places you call <code>fwrite</code>"}, {"owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1473812387, "post_id": 39480281, "comment_id": 66280525, "body": "@immibis that did the trick, thanks again, feel free to type it up as an answer, however I see you don&#39;t need the points so if you don&#39;t I will :-)"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1473812388, "post_id": 39480281, "comment_id": 66280527, "body": "Same thing with the <code>if</code>s following the <code>fwrite</code>s. But there are more errors."}, {"owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1473812419, "post_id": 39480281, "comment_id": 66280531, "body": "@CristiFati yeah I fixed those too after following the logic, thanks though. Do you see more errors?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1473812594, "post_id": 39480281, "comment_id": 66280578, "body": "Yes. When processing the encrypted file you read (and try to decrypt ) 1 byte at a time. That can&#39;t work. Have you tried with an input file larger than 128 bytes?"}, {"owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1473812721, "post_id": 39480281, "comment_id": 66280599, "body": "Oh, yes fixed that too (that was a long 15 minutes :-) ), I haven&#39;t tried it with a file that big, but decrypting that file that was encrypted 1 byte at a time did fail indeed, so I upped the buffer to 2048, and will be trying to encrypt a large file next. Thanks for the second set of eyes @CristiFati"}], "owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473808259, "creation_date": 1473808259, "question_id": 39480281, "link": "https://stackoverflow.com/questions/39480281/unable-to-decrypt-rsa-r-padding-check-failed-openssl-1-1-0", "title": "Unable to decrypt: RSA_R_PADDING_CHECK_FAILED - OpenSSL 1.1.0\u200f", "body": "<p>I'm creating a simple utility to encrypt and decrypt files using a key pair. I'm on Windows and coding against the 1.1.0 version of Openssl. I can load the key pair and encrypt the file fine, but when I try to decrypt EVP_PKEY_decrypt always returns -1. I traced this to the rsa padding check functions and they are returning -1 but I can't figure out why. I've tried changing the padding from RSA_PKCS1_OAEP_PADDING  to RSA_PKCS1_PADDING and still have the same problem. Any insight would be appreciated, here are my encrypt and decrypt functions:</p>\n\n<pre><code>#define FILE_BUFFER_LENGTH 1\n#define ENC_BUFFER_LENGTH 2048\n\nint encryptfile(EVP_PKEY *key, FILE *srcfp, FILE *tgtfp) {\n\n    EVP_PKEY_CTX *ctx = EVP_PKEY_CTX_new(key, NULL);\n    char *inbuf;\n    unsigned char *outbuf;\n    size_t in_len = 0;\n    size_t out_len = ENC_BUFFER_LENGTH;\n    int x;\n\n    inbuf = (char*)malloc(sizeof(char)*FILE_BUFFER_LENGTH+1);\n    outbuf = (char*)malloc(sizeof(char)*ENC_BUFFER_LENGTH+1);\n\n    if (ctx == NULL) {\n        fprintf(stderr, \"Error while creating encryption context.\\n\");\n        return 0;\n    }\n\n    if (EVP_PKEY_encrypt_init(ctx) &lt;= 0) {\n        fprintf(stderr, \"Error while initializing encryption context.\\n\");\n        return 0;\n    }\n\n    if (EVP_PKEY_CTX_set_rsa_padding(ctx, RSA_PKCS1_PADDING) &lt;= 0) {\n        fprintf(stderr, \"Error while setting encryption padding.\\n\");\n        return 0;\n    }\n\n\n\n    while (1) {\n        in_len = fread(inbuf, 1, FILE_BUFFER_LENGTH, srcfp);\n\n        if (in_len == 0) {break;}\n\n        if (EVP_PKEY_encrypt(ctx, outbuf, &amp;out_len, inbuf, in_len) &lt;= 0) {\n            fprintf(stderr, \"Error while encrypting data.\\n\");\n            return 0;\n        }\n\n        x = fwrite(outbuf, sizeof(char), in_len, tgtfp);\n\n        if (x != in_len) {\n            fprintf(stderr, \"Error while writing to target file.\\n\");\n            return 0;\n        }\n    }\n\n    return 1;\n}\n\n\nint decryptfile(EVP_PKEY *key, FILE *srcfp, FILE *tgtfp) {\n\n    ENGINE *e = ENGINE_new();\n    EVP_PKEY_CTX *ctx = EVP_PKEY_CTX_new(key, NULL);\n    unsigned char *inbuf;\n    unsigned char *outbuf;\n    size_t in_len = 0;\n    size_t out_len = ENC_BUFFER_LENGTH;\n    int x;\n\n    inbuf = (char*)malloc(sizeof(char)*FILE_BUFFER_LENGTH + 1);\n    outbuf = (char*)malloc(sizeof(char)*ENC_BUFFER_LENGTH + 1);\n\n    if (ctx == NULL) {\n        fprintf(stderr, \"Error while creating decryption context.\\n\");\n        return 0;\n    }\n\n    if (EVP_PKEY_decrypt_init(ctx) &lt;= 0) {\n        fprintf(stderr, \"Error while initializing decryption context.\\n\");\n        return 0;\n    }\n\n    if (EVP_PKEY_CTX_set_rsa_padding(ctx, RSA_PKCS1_PADDING) &lt;= 0) {\n        fprintf(stderr, \"Error while setting decryption padding.\\n\");\n        return 0;\n    }\n\n\n\n    while (1) {\n        in_len = fread(inbuf, 1, FILE_BUFFER_LENGTH, srcfp);\n\n        if (in_len == 0) { break; }\n\n        if (EVP_PKEY_decrypt(ctx, outbuf, &amp;out_len, inbuf, in_len) &lt;= 0) {\n            fprintf(stderr, \"Error while decrypting data.\\n\");\n            return 0;\n        }\n\n        x = fwrite(outbuf, sizeof(char), in_len, tgtfp);\n\n        if (x != in_len) {\n            fprintf(stderr, \"Error while writing decrypted data to target file.\\n\");\n            return 0;\n        }\n    }\n\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "gsl"], "answers": [{"tags": [], "owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "is_accepted": true, "score": 2, "last_activity_date": 1502136972, "creation_date": 1502136972, "answer_id": 45555031, "question_id": 39480181, "link": "https://stackoverflow.com/questions/39480181/initialize-elements-of-gsl-matrix/45555031#45555031", "title": "Initialize elements of GSL matrix", "body": "<p>Matrices only support limited setting of all values, that is by <code>gsl_matrix_set_all</code>, <code>gsl_matrix_set_zero</code> or <code>gsl_matrix_set_identity</code>.</p>\n\n<p>However, you can create and initialise an array and then create a <strong>matrix view</strong> from that using <code>gsl_matrix_view_array</code>, <code>gsl_matrix_const_view_array</code>, <code>gsl_matrix_view_array_with_tda</code> or <code>gsl_matrix_const_view_array_with_tda</code>. (Matrix views are common in GSL. For example, they are used to express sub-matrices returned by <code>gsl_matrix_submatrix</code>.) The matrix view is a struct which contains a field <code>matrix</code> upon which you execute the gsl_matrix methods you wish to apply.</p>\n\n<p>For example, compile with <code>gcc matrixview.c -lgsl -lgslcblas</code> the following file <code>matrixview.c</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;gsl/gsl_matrix.h&gt;\n\n#define rows 2\n#define cols 3\n\nint main () {\n    const double data[rows*cols] = { \n        0.0, 0.1, 0.2,\n        1.0, 1.1, 1.2,\n    };  \n    const gsl_matrix_const_view mat = gsl_matrix_const_view_array( data, rows, cols );\n    for ( size_t row = 0; row &lt; rows; ++row ) { \n        for ( size_t col = 0; col &lt; cols; ++col ) { \n            printf( \"\\t%3.1f\", gsl_matrix_get( &amp;mat.matrix, row, col ) );\n        }\n        printf( \"\\n\" );\n    }\n}   \n</code></pre>\n"}], "owner": {"reputation": 5343, "user_id": 605436, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c13afb92251dc36839338cb74f02163f?s=128&d=identicon&r=PG", "display_name": "gypaetus", "link": "https://stackoverflow.com/users/605436/gypaetus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 0, "accepted_answer_id": 45555031, "answer_count": 1, "score": 1, "last_activity_date": 1502136972, "creation_date": 1473807436, "question_id": 39480181, "link": "https://stackoverflow.com/questions/39480181/initialize-elements-of-gsl-matrix", "title": "Initialize elements of GSL matrix", "body": "<p>I have allocated a large gsl_matrix and would like to allocate all its elements with known float values. Is there a way to do it without using gsl_matrix_set for each element? I am looking for the equivalent of fortran's reshape function to initialize a matrix.</p>\n\n<pre><code>A = reshape( (/0, 1, 2, 3, 4, 5, 6, 7,\n0, 1, 2, 3, 4, 5, 6, 7,\n0, 1, 2, 3, 4, 5, 6, 7,\n0, 1, 2, 3, 4, 5, 6, 7,\n0, 1, 2, 3, 4, 5, 6, 7,\n0, 1, 2, 3, 4, 5, 6, 7,\n0, 1, 2, 3, 4, 5, 6, 7,\n0, 1, 2, 3, 4, 5, 6, 7/), (/ 8, 8/) )\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1473806755, "post_id": 39480053, "comment_id": 66279205, "body": "<code>int* dlugosc;</code> --&gt; <code>int dlugosc;</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1473806802, "post_id": 39480053, "comment_id": 66279222, "body": "You could not pass an &#39;int **&#39; argument where an &#39;int *` is expected?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1473807020, "post_id": 39480053, "comment_id": 66279292, "body": "The warning seems pretty clearly worded. It would be good if you could explain what part of the warning you don&#39;t understand."}, {"owner": {"reputation": 414, "user_id": 2665674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/de2bb270c088126ddfe3511af22ce005?s=128&d=identicon&r=PG", "display_name": "k4sia", "link": "https://stackoverflow.com/users/2665674/k4sia"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1473808335, "post_id": 39480053, "comment_id": 66279673, "body": "@kaylum thanks for your answer.I am totally new to C and these are my first steps with this language. I dont know why he is getting int ** if dlugosc is defined as int *. I can compile this code but want to understand those warnings.."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1473809761, "post_id": 39480053, "comment_id": 66280004, "body": "<code>dlugosc</code> is an <code>int *</code>. But you are passing <code>&amp;dlugosc</code> which is <code>int **</code>. But you are very right to heed the warnings. Your code is not correct and the compiler is giving you good indicators of where it is wrong."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1473814092, "post_id": 39480053, "comment_id": 66280911, "body": "<code>scanf(&quot;%s&quot;,&amp;slowo);</code> should generate a warning, too. You pass a wrong pointer type (<code>char (*)[]</code> instead of <code>char *</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 2796967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c104903c5f313c8867cf9dce1072362?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew MacDonald", "link": "https://stackoverflow.com/users/2796967/matthew-macdonald"}, "is_accepted": true, "score": 4, "last_activity_date": 1473814322, "creation_date": 1473814322, "answer_id": 39480971, "question_id": 39480053, "link": "https://stackoverflow.com/questions/39480053/expected-int-but-argument-is-of-type-int-warning-in-c/39480971#39480971", "title": "*expected &#39;int *&#39; but argument is of type &#39;int **&#39;* warning in c", "body": "<p>change:</p>\n\n<blockquote>\n  <p>int* dlugosc;</p>\n</blockquote>\n\n<p>to:</p>\n\n<blockquote>\n  <p>int dlugosc;</p>\n</blockquote>\n\n<p>In the original code, dlugosc is being declared as a pointer to an integer.  By using the '&amp;' when szyfr() is called, you are passing the address of the pointer to the integer (IE an int**) instead of the pointer to the integer.  By changing the declaration of dlugosc to an int, you are able to reference its address using '&amp;'.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 13781233, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhhernSTCiSgay1cELv-np05x68flR7_0QLQVnu=k-s128", "display_name": "NIRANJAN S PATTANSHETTI", "link": "https://stackoverflow.com/users/13781233/niranjan-s-pattanshetti"}, "is_accepted": false, "score": 1, "last_activity_date": 1593788909, "creation_date": 1593788909, "answer_id": 62718198, "question_id": 39480053, "link": "https://stackoverflow.com/questions/39480053/expected-int-but-argument-is-of-type-int-warning-in-c/62718198#62718198", "title": "*expected &#39;int *&#39; but argument is of type &#39;int **&#39;* warning in c", "body": "<p>I have modified your code and it's working</p>\n<pre><code>void main(){\n\nchar slowo[MAX_DL_SLOWA];\nint* dlugosc;\nint kod[MAX_DL_SLOWA+1],i;\n\n//Wczytanie i szyfrowanie\nprintf(&quot;Podaj slowo: &quot;);\nscanf(&quot;%s&quot;,&amp;slowo[0]);\nprintf(&quot;\\nTwoje slowo: %s&quot;,slowo);\nszyfr(slowo, &amp;dlugosc[0], kod);\nprintf(&quot;\\nTwoj kod: %s&quot;,kod);   \n}\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 2665674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/de2bb270c088126ddfe3511af22ce005?s=128&d=identicon&r=PG", "display_name": "k4sia", "link": "https://stackoverflow.com/users/2665674/k4sia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14275, "favorite_count": 0, "accepted_answer_id": 39480971, "answer_count": 2, "score": -2, "last_activity_date": 1593788909, "creation_date": 1473806569, "question_id": 39480053, "link": "https://stackoverflow.com/questions/39480053/expected-int-but-argument-is-of-type-int-warning-in-c", "title": "*expected &#39;int *&#39; but argument is of type &#39;int **&#39;* warning in c", "body": "<p>I am getting warning message like : <strong>expected 'int *' but argument is of type 'int **'</strong>\nBelow is my code:</p>\n\n<pre><code>#include&lt;string.h&gt;\n#include&lt;stdio.h&gt;\n#define MAX_DL_SLOWA 30\n\n\nvoid  szyfr(char oryginalne[MAX_DL_SLOWA], int* dlugosc, int zaszyfrowane[MAX_DL_SLOWA+1]) {\n     int  i, j;\n     *dlugosc = strlen(oryginalne);\n     for (i = 0; i &lt; *dlugosc; i++) {\n       if (i &lt; *dlugosc-1){\n                j = i + 1;\n       }else{\n            j = i + 1 - *dlugosc;\n       }\n       zaszyfrowane[i] = (int)oryginalne[j] - (int)'a';\n     }\n}\n\nvoid main(){\n\n    char slowo[MAX_DL_SLOWA];\n    int* dlugosc;\n    int kod[MAX_DL_SLOWA+1],i;\n\n    //Wczytanie i szyfrowanie\n    printf(\"Podaj slowo: \");\n    scanf(\"%s\",&amp;slowo);\n    printf(\"\\nTwoje slowo: %s\",slowo);\n    szyfr(slowo, &amp;dlugosc, kod);\n    printf(\"\\nTwoj kod: %s\",kod);   \n}\n</code></pre>\n\n<p>I am getting this validation line where I am calling <em>szyfr</em> method with &amp;<em>dlugosc</em> as an arg .\nAnyone has any idea how could i change that to make it works without warnings?</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1473807168, "post_id": 39479970, "comment_id": 66279335, "body": "Please show the exact error. The above rule command is either not running or is giving an error that you are not showing. Because the <code>-I</code> option requires a value and <code>gcc</code> will not run successfully as shown."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1473807320, "post_id": 39479970, "comment_id": 66279379, "body": "Read carefully. The actual command in the tutorial has a <code>.</code> after the <code>-I</code> option: <code>-I.</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5613947"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1473807336, "post_id": 39479970, "comment_id": 66279389, "body": "I included the full error message, and the -I. made no difference"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1473807364, "post_id": 39479970, "comment_id": 66279398, "body": "Fix up the -I option. Though I don&#39;t agree with the tutorial in using the <code>-I</code> option like that. For headers in the same directory as the C source they should just be include as <code>#include &quot;header.h&quot;</code> and the compiler will automatically find it without the <code>-I.</code> option."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5613947"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1473807419, "post_id": 39479970, "comment_id": 66279405, "body": "I did, it gives me the same error"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1473807492, "post_id": 39479970, "comment_id": 66279433, "body": "I don&#39;t believe you. That is a link error. If you fix up  the <code>-I</code> then the <code>-c</code> option will come into play correctly and cause gcc to correctly compile only. That is, there will not be a link operation on that command and hence you cannot get that error. Please show <i>exact</i> output."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1473808417, "post_id": 39480261, "comment_id": 66279694, "body": "Interesting: classic versions of <code>make</code> would require a linking command, but GNU Make does not (somewhat to my surprise).  You should include: <code>main.o log.o: log.h</code> as well, in theory, but your minimal file gets the job done.  There are some distinct limits on that mechanism, but in context, it does work."}], "tags": [], "owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "is_accepted": false, "score": 3, "last_activity_date": 1473811032, "last_edit_date": 1473811032, "creation_date": 1473808120, "answer_id": 39480261, "question_id": 39479970, "link": "https://stackoverflow.com/questions/39479970/makefile-with-suffixes-in-c/39480261#39480261", "title": "Makefile (with suffixes) in C", "body": "<p>You haven't specified an include directory for the <code>I</code> option, so during the compilation stage GCC actually interprets <code>-c</code> as an include directory, which cancels the compile-only flag, and then tries to link your program.</p>\n\n<p>You don't need the include flag, you don't even need a recipe for linking because your file layout matches the builtin rules, your entire Makefile (assuming <code>cc</code> is a link to your default compiler) can simply be</p>\n\n<pre><code>log: log.o main.o\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4565, "user_id": 1134885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c428466054762cf7d4b5fb5f4396fa2?s=128&d=identicon&r=PG", "display_name": "NovaDenizen", "link": "https://stackoverflow.com/users/1134885/novadenizen"}, "is_accepted": true, "score": 0, "last_activity_date": 1473808227, "creation_date": 1473808227, "answer_id": 39480275, "question_id": 39479970, "link": "https://stackoverflow.com/questions/39479970/makefile-with-suffixes-in-c/39480275#39480275", "title": "Makefile (with suffixes) in C", "body": "<p>When you ran your makefile that had <code>-I</code> instead of <code>-I.</code>, you created an invalid  <code>main.o</code>.  You need to put the <code>-I.</code> back into <code>CFLAGS</code> and <code>rm *.o</code> from that directory.  Then it should make ok.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5613947"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 39480275, "answer_count": 2, "score": 0, "last_activity_date": 1473811032, "creation_date": 1473806084, "last_edit_date": 1473807311, "question_id": 39479970, "link": "https://stackoverflow.com/questions/39479970/makefile-with-suffixes-in-c", "title": "Makefile (with suffixes) in C", "body": "<p>So I have three files: </p>\n\n<pre><code>log.c : defines all the functions\nlog.h : lists all the functions\nmain.c. : uses the functions\n</code></pre>\n\n<p>Now, both <code>log.c</code> and <code>main.c</code> have headers for <code>log.h</code>.</p>\n\n<pre><code>gcc log.c main.c \n</code></pre>\n\n<p>The above runs fine, no errors. However, when I try to make a Makefile following <a href=\"http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/\" rel=\"nofollow\">this</a> tutorial, I have:</p>\n\n<pre><code> CC=gcc\n CFLAGS=-I\n\n log: main.o log.o\n     $(CC) -o log main.o log.o -I\n</code></pre>\n\n<p>When I run <code>make</code>, this shows an error every time <code>main</code> called a function defined in <code>log.c</code>, saying \"undefined reference to (function)\".</p>\n\n<p>Any help with this would be appreciated.</p>\n\n<pre><code>-bash-4.2$ make\ngcc -I   -c -o main.o main.c\n/tmp/ccQOC7wH.o: In function `main':\nmain.c:(.text+0x11): undefined reference to `getlog'\nmain.c:(.text+0x6f): undefined reference to `buildmsg'\nmain.c:(.text+0x7b): undefined reference to `savelog'\nmain.c:(.text+0x109): undefined reference to `buildmsg'\nmain.c:(.text+0x19a): undefined reference to `buildmsg'\nmain.c:(.text+0x207): undefined reference to `getlog'\nmain.c:(.text+0x223): undefined reference to `savelog'\nmain.c:(.text+0x247): undefined reference to `buildmsg'\nmain.c:(.text+0x24c): undefined reference to `getlog'\nmain.c:(.text+0x268): undefined reference to `savelog'\nmain.c:(.text+0x279): undefined reference to `clearlog'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 11, "creation_date": 1473804083, "post_id": 39479620, "comment_id": 66278386, "body": "Undefined behaviour is undefined."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1473804174, "post_id": 39479620, "comment_id": 66278417, "body": "Yes, you are being lucky. (or rather unlucky, as a segmentation fault is usually preferable to corrupt memory)"}, {"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473804188, "post_id": 39479620, "comment_id": 66278422, "body": "@KerrekSB I&#39;m new to C world. May be I can&#39;t see the obvious. Can you please elaborate your comment."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473804246, "post_id": 39479620, "comment_id": 66278441, "body": "@RBT: Evaluation of the expression <code>p + i</code> has undefined behaviour when the result is not within the allocated bounds, i.e. when <code>i</code> is greater than <code>800 &#47; sizeof(int)</code>. That means the C language rules do not say <i>anything</i> about the behaviour of your program."}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473804249, "post_id": 39479620, "comment_id": 66278443, "body": "@KerrekSB   only in the language spec, every compiler has definite behavior of some sort that is worth knowing what it does in these kinds of cases"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1473804249, "post_id": 39479620, "comment_id": 66278444, "body": "Who says that what you do is <i>safe</i>?  If you drive drunk you <i>might</i> still get home safely, but that doesn&#39;t mean that drunk driving is safe."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 4, "creation_date": 1473804407, "post_id": 39479620, "comment_id": 66278498, "body": "@KeithNicholas, no, compilers do not necessarily produce consistent manifestations of any particular form of undefined behavior.  Even if they did, it would not be worth knowing them because undefined behavior is to be avoided at all costs."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1473804446, "post_id": 39479620, "comment_id": 66278506, "body": "@KerrekSB: The UB does <i>not</i> start with <code>p + i</code>, since C <i>does</i> allow computing an address (just) beyond the bounds of an object. It&#39;s the dereference of a pointer pointing to such an address that is the first occurrence of undefined behavior in the program."}, {"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473804493, "post_id": 39479620, "comment_id": 66278522, "body": "@KerrekSB so if I&#39;m planning to store integers in the memory allocation I&#39;ve done then I should actually write the for loop to hop through 200( 800/4) numbers only as the right measure. Had <code>p</code> been <code>char*</code> (which takes 1 byte) then this program is completely safe. Am I correct on this conclusion?"}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1473804523, "post_id": 39479620, "comment_id": 66278537, "body": "RBT, one thing you need to know about the C world is it is it&#39;s mostly pedantic and very language spec oriented.   You&#39;ll find under different language tags often more relaxed and helpful responses :)   but if you hit UB ( undefined behaviour) people will stop talking to you :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1473804539, "post_id": 39479620, "comment_id": 66278543, "body": "RBT, Curious, why use <code>&quot;%x&quot;</code> instead of <code>&quot;%p&quot;</code> when printing a pointer?  Did not your compiler complain about the mis-match?  Was its warning levels well enabled?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1473804539, "post_id": 39479620, "comment_id": 66278544, "body": "@EOF: Hm, let&#39;s see: <code>p = malloc(n * sizeof(int))</code>, then <code>p + n</code> is one-past-the-end, yes? So &quot;<code>i</code> greater than <code>n</code>&quot; is not allowed (but &quot;<code>i</code> equal to <code>n</code>&quot; is)."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473804607, "post_id": 39479620, "comment_id": 66278560, "body": "@RBT: Yes, that&#39;s right. To allocate space for an array of <code>n</code> elements of type <code>T</code>, you need to call <code>malloc(n * sizeof(T))</code>. (And by definition, <code>sizeof(char)</code> is one.)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1473804642, "post_id": 39479620, "comment_id": 66278568, "body": "@KerrekSB Yes, but the program exhibits undefined behavior (by dereferencing a pointer pointing beyond the bounds of an object) <i>before</i> it exhibits undefined behavior due to pointer arithmetic not within the bounds of the object or one past the bounds."}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1473804651, "post_id": 39479620, "comment_id": 66278570, "body": "@KerrekSB avoiding UB sure, but people hit it all the time and then have to debug it, and knowing what happens helps a lot,   if, like this OP, you think you will get an exception/crash of some sort, you may not realise your program can actually just work fine with UB ... until it doesn&#39;t, and then hard to know what to look for"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1473804667, "post_id": 39479620, "comment_id": 66278576, "body": "@EOF: Ah yes, good point! (In that case, I just pointed out <i>one</i> part of the code that would cause UB :-) )"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1473804728, "post_id": 39479620, "comment_id": 66278591, "body": "@KeithNicholas: Show those people ASAN and be done with it?"}, {"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1473804755, "post_id": 39479620, "comment_id": 66278598, "body": "@chux It is a default C++ project template I&#39;m using to write a C program with all the default settings. I&#39;ve not changed anything anywhere. I&#39;m writing this code in Visual Studio 2010. I&#39;m not getting any warnings for using %x for printing memory addresses being pointed by the pointer."}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473804810, "post_id": 39479620, "comment_id": 66278621, "body": "@KerrekSB show the dude using windows? :)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1473805234, "post_id": 39479620, "comment_id": 66278757, "body": "@KeithNicholas: There&#39;s Clang for Windows now, isn&#39;t it?"}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1473805813, "post_id": 39479620, "comment_id": 66278934, "body": "Perhaps you were intending to malloc 800 * sizeof(int)? since you&#39;re stepping through it with an int*."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1473807793, "post_id": 39479620, "comment_id": 66279515, "body": "Personally, I think you were unlucky that the program didn&#39;t crash immediately on executing <code>*(p + i)</code> with <code>i == 200</code>.  Reading from memory that was not allocated for your use is undefined behaviour.  And undefined behaviour means anything can happen, including &#39;appearing to work as expected despite misplaced expectations&#39; or &#39;crashing the program&#39; or &#39;wrecking the system on which the program is running&#39;.  Fortunately for you, the latter seldom happens.  Search for &#39;nasal demons&#39; for more information."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1473834984, "post_id": 39479620, "comment_id": 66286252, "body": "Try running Release build!"}, {"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1473837178, "post_id": 39479620, "comment_id": 66287269, "body": "@Ajay unfortunately it didn&#39;t crash even in release build :(. Looks like OS is being too kind to my process. BTW I&#39;m currently running it on Windows Server 2008 R2 box. Windows 7 box was my home pc when I raised this post. UB has become way too deterministic in my case it seems."}, {"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1473906400, "post_id": 39479620, "comment_id": 66321894, "body": "@Ajay it works well in release mode even on my home pc which has Windows 7 Ultimate Service Pack 1"}], "answers": [{"comments": [{"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 2, "creation_date": 1473805292, "post_id": 39479703, "comment_id": 66278769, "body": "Wow, not a popular answer it seems. Could one of the downvoters please explain where I&#39;m wrong?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1473807248, "post_id": 39479703, "comment_id": 66279353, "body": "I&#39;m not a downvoter. You&#39;re <i>not</i> wrong, IMO, but you may need more detail. Things to consider: Does <code>malloc</code> use <code>sbrk</code> or <code>mmap</code> [modern ones use <code>mmap</code> to avoid collisions with already mapped shared libraries]? Does <code>malloc</code> do: <code>hidden_length,pointer_it_returns</code> [the classical way] or does it use &quot;arena&quot; allocation. When getting an area from OS, it <i>must</i> be a multiple of the page size (e.g. 4096). But, the arena could be many pages or just one. So, you <i>can</i> overflow up to at least the next page boundary before segfault. Because OP is <i>reading</i>, he&#39;ll just get garbage values"}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1473807513, "post_id": 39479703, "comment_id": 66279439, "body": "@CraigEstey OK. OP requested an answer about Windows, so mmap vs. sbrk are probably not so helpful, but one could assume there are similar features in Windows. I don&#39;t particularly mind downvotes, just think the technical discussion could be elevated above &quot;the standard doesn&#39;t say anything about it&quot; which is unfortunately a common response to good questions here."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1473808248, "post_id": 39479703, "comment_id": 66279649, "body": "Ran out of space to say &quot;there are Windows equivalents to <code>sbrk&#47;mmap</code> and the principles are the same, anyway&quot;. I agree. The LLs are missing the point here. I was going to post an answer similar to yours, but didn&#39;t because I felt you had already covered the real reason. I may try later, but consider providing more detail, in simpler terms, so <i>even</i> an LL will get it :-). On SO, sometimes, we <i>do</i> need more pushback against rote LL answers. This question is a good example, and so far, it appears that your answer is the only one that gave the real explanation as to why it <i>worked</i>"}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1473808299, "post_id": 39479703, "comment_id": 66279665, "body": "References to reliable resources (C draft) of what you&#39;re saying are necessary. Not a downvoter."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 2, "creation_date": 1473808920, "post_id": 39479703, "comment_id": 66279818, "body": "@Nuncameesquecideti There is nothing in the C standard about <code>malloc()</code> requesting space in larger chunks than it it needs right now. It is merely an obvious optimization to reduce system calls. <i>Ergo</i> there is no normative reference to cite about this."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "reply_to_user": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1473808934, "post_id": 39479703, "comment_id": 66279821, "body": "@Nuncameesquecideti See for example K&amp;R, page 185 <a href=\"http://www.ime.usp.br/~pf/Kernighan-Ritchie/C-Programming-Ebook.pdf\" rel=\"nofollow noreferrer\">ime.usp.br/~pf/Kernighan-Ritchie/C-Programming-Ebook.pdf</a>  Not all allocators work that way, but the basic principles of allocating a chunk of memory and then splitting it up are the same."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1473808992, "post_id": 39479703, "comment_id": 66279833, "body": "@Nuncameesquecideti C draft, no. AFAIK, it has no information on how <code>malloc</code> is <i>implemented</i>, which is crucial to explaining OP&#39;s observed behavior. There are a few ways to implement [as I&#39;ve mentioned above], so the answer should just cover all of them."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1473810118, "post_id": 39479703, "comment_id": 66280077, "body": "@CraigEstey If you mention something that isn&#39;t specified in the standard and is implementation-defined, you should clearly and explicitly say it!"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1473811387, "post_id": 39479703, "comment_id": 66280322, "body": "@Nuncameesquecideti I believe jforberg explained it came from the OS. It&#39;s <i>not</i> &quot;implementation defined&quot; as that term is used by the spec [to allow compilers to do things differently]. It is a library/allocator [controlled by POSIX], OS, and architecture issue and <i>all</i> implementations of any sort will allow OP&#39;s behavior up to a page boundary, or end of physical memory, or a guard page."}], "tags": [], "owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "is_accepted": false, "score": -3, "last_activity_date": 1473807671, "last_edit_date": 1473807671, "creation_date": 1473804405, "answer_id": 39479703, "question_id": 39479620, "link": "https://stackoverflow.com/questions/39479620/is-my-malloc-function-allocating-more-than-i-intend-to/39479703#39479703", "title": "Is my malloc function allocating more than I intend to", "body": "<p><strong>C standard answer</strong>: Accessing memory beyond what you have allocated results in undefined behaviour.</p>\n\n<p><strong>Real world answer</strong>:Your program allocates memory using malloc() which provisions it from the operating system, in this case Windows. However, each malloc() call doesn't result in a call to the operating system. Malloc will in fact usually allocate a bit more memory than it needs right now and will then break off a chunk which is at least the size you requested. This is done for performance reasons since every call to the operating system has a bit of overhead. Also, there is a minimum \"page size\" which is the smallest unit of memory which can be allocated from the operating system. 4096 bytes is a typical page size.</p>\n\n<p>So in your case, you are accessing the memory which malloc has provisioned from the system but has not allocated for use. You should avoid this since the next call to malloc might cause the memory to be allocated for another purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 2704, "user_id": 6794772, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2d8db2b0d48b6e1b25657fda9ec4ae02?s=128&d=identicon&r=PG&f=1", "display_name": "Dellowar", "link": "https://stackoverflow.com/users/6794772/dellowar"}, "is_accepted": false, "score": 1, "last_activity_date": 1473804887, "creation_date": 1473804887, "answer_id": 39479778, "question_id": 39479620, "link": "https://stackoverflow.com/questions/39479620/is-my-malloc-function-allocating-more-than-i-intend-to/39479778#39479778", "title": "Is my malloc function allocating more than I intend to", "body": "<p>This here be an example of undefined behavior.\nLogically, this program should break. but it does not because the process image has some extra space that you can overflow into without having the operating system sending a segfault. I mean, instead of going to 800, go up to 1000, 10000, and so on. Eventually you'll get a segfault at some arbitrary number of iterations. </p>\n\n<p>The reason you can go so high is because your program has a lot of overhead in the ram, this overhead is allowed to be overflowed into.</p>\n"}, {"comments": [{"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1473805527, "post_id": 39479809, "comment_id": 66278851, "body": "While this answer is correct, it does nothing to explain to OP why he is seeing this particular behaviour."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 1, "creation_date": 1473805828, "post_id": 39479809, "comment_id": 66278938, "body": "@jforberg  The behavior is not defined by the C spec.  We could make good guess or cast lots.  Aside from looking at OP&#39;s executable code, various answers would not be authoritative but opinions - maybe good or not."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1473806086, "post_id": 39479809, "comment_id": 66279031, "body": "The problem is that you&#39;re (plural) pretending like malloc is some arcane piece of mystery that we don&#39;t know anything about, when in fact it&#39;s well understood how malloc is usually implemented and it always involves allocating more memory than is immediately necessary. This could be an opportunity for OP to learn a bit more about how an OS works, instead we choose to just quote the standard and be done with it. &quot;Don&#39;t ask, it&#39;s undefined behaviour&quot;."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1473806234, "post_id": 39479809, "comment_id": 66279067, "body": "And in no case is it necessary for anyone to guess or &quot;draw lots&quot;. The code for malloc even on Windows is open source now, you can just have a look if you are wondering how it works."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1473806475, "post_id": 39479809, "comment_id": 66279137, "body": "@jforberg Hmmm, from someone who did not DV your answer, this answer seems to have attracted the Wrath of JF.  OTOH, your DV here was accompanied by comment - with although I disagree with - is welcomed."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1473805554, "last_edit_date": 1473805554, "creation_date": 1473805177, "answer_id": 39479809, "question_id": 39479620, "link": "https://stackoverflow.com/questions/39479620/is-my-malloc-function-allocating-more-than-i-intend-to/39479809#39479809", "title": "Is my malloc function allocating more than I intend to", "body": "<blockquote>\n  <p>How is that possible or I'm being lucky not be getting access violation error even though I'm actually entering into a memory area which I've not yet allocated for my program?</p>\n</blockquote>\n\n<p>When code reaches <code>printf(\" %d\\n\", *(p + 200));</code> is is attempting to read outside allocated memory.  That is <em>undefined behavior</em>  UB.</p>\n\n<p>UB is UB.  It may happen like this every day or change the next time you run.</p>\n\n<hr>\n\n<p>You are not lucky.  Lucky would be for your code to stop right there.</p>\n\n<p>Even reading uninitialized <code>int</code> data is UB. So code has UB (or maybe implementation defined) as soon as <code>printf(\" %d\\n\", *(p + 0));</code>.  IAC, code could have stopped right there.</p>\n\n<hr>\n\n<blockquote>\n  <p>Is my malloc function allocating more than I intend to?</p>\n</blockquote>\n\n<p>That is the tricky bit.  Code that invokes UB creates questionable results.  Code without UB has no standard way to test the question.  The only non-UB way to determine this is if the library supplies a function with the answer.</p>\n\n<pre><code>printf(\"True size %lu\\n\", (unsigned long) True_size(p));\n</code></pre>\n\n<p>Note: OP asserts <code>int</code> is 4 bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1473805482, "creation_date": 1473805482, "answer_id": 39479860, "question_id": 39479620, "link": "https://stackoverflow.com/questions/39479620/is-my-malloc-function-allocating-more-than-i-intend-to/39479860#39479860", "title": "Is my malloc function allocating more than I intend to", "body": "<blockquote>\n  <p>But inside the for loop when I print the addresses I'm able to hop through 800 memory locations (using integer pointer p) each 4 byte long (size of an integer) safely which amounts to 3200 bytes.</p>\n</blockquote>\n\n<p>Where I guess by \"safely\" you mean that the program does not crash.  This is an ok definition when applied to air travel, but not so appropriate for a computer program.</p>\n\n<blockquote>\n  <p>How is that possible or I'm being lucky not be getting access violation error even though I'm actually entering into a memory area which I've not yet allocated for my program?</p>\n</blockquote>\n\n<p>By accessing unallocated memory your program exhibits undefined behavior. You are to be commended for recognizing the problem.  To quote @KerrekSB, however, \"Undefined behavior is undefined\".  Generally speaking, you cannot assume any particular manifestation of undefined behavior.</p>\n\n<p>If your program did happen to crash, with an access violation, for example, then you could be sure that it had exhibited undefined behavior, simply because C does not define any way to produce that behavior.  But just because it seems to do what you expect does not mean that its behavior is defined.  If it is not defined then, generally speaking, you cannot be confident that it will be consistent, either.</p>\n\n<p>So basically, yes, you're just lucky.  Or maybe unlucky.  Myself, I'd rather have the program crash, so that I am alerted to the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "edited": false, "score": 0, "creation_date": 1473906230, "post_id": 39480386, "comment_id": 66321851, "body": "So access violation happens only when I trip into another processes&#39;s memory space. Is it? What about the situation when this current loop trips into the memory space (belonging to my process space only) of another <code>malloc</code> operation which had happened in <code>main</code> before my current function <code>DynamicMemoryAllocationUsingMalloc</code> began executing?"}, {"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "edited": false, "score": 0, "creation_date": 1473908323, "post_id": 39480386, "comment_id": 66322288, "body": "I experimented it further on the maximum allowed loop counter to reach to the boundary condition. I am able to go till 3072. The moment I increase the maximum allowed loop counter to 3073, the program bursts with <code>access violation</code> error. I&#39;m not sure if that gives a hint about OS&#39;s page size allocated to my process. 3072 counter value = 3072 * 4 (integer size) = 12288  bytes. This observation has been taken on a Windows 7 machine. Coincidentally, if I consider 4-kilobyte pages then 4-kilobyte * 3 also comes out to be 12288 bytes precisely. might be my process was allocated 3 pages by the OS."}, {"owner": {"reputation": 4565, "user_id": 1134885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c428466054762cf7d4b5fb5f4396fa2?s=128&d=identicon&r=PG", "display_name": "NovaDenizen", "link": "https://stackoverflow.com/users/1134885/novadenizen"}, "reply_to_user": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "edited": false, "score": 0, "creation_date": 1473915974, "post_id": 39480386, "comment_id": 66324068, "body": "Another process&#39;s memory space?  Sort of.  Each process has its own virtual memory space, and only certain ranges of that are valid, and access to an invalid address causes an error.  Your process just can&#39;t access the memory of another process."}], "tags": [], "owner": {"reputation": 4565, "user_id": 1134885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c428466054762cf7d4b5fb5f4396fa2?s=128&d=identicon&r=PG", "display_name": "NovaDenizen", "link": "https://stackoverflow.com/users/1134885/novadenizen"}, "is_accepted": false, "score": 5, "last_activity_date": 1473809064, "creation_date": 1473809064, "answer_id": 39480386, "question_id": 39479620, "link": "https://stackoverflow.com/questions/39479620/is-my-malloc-function-allocating-more-than-i-intend-to/39480386#39480386", "title": "Is my malloc function allocating more than I intend to", "body": "<p>It's working probably because you're not reaching past the range of memory currently allocated for the process.  Modern systems typically allocate memory to a process in 4-kilobyte pages.  Your first allocation is possibly at the beginning of a page, and the memory you're snooping in is probably in the unallocated remainder of that first page.  </p>\n\n<p>The OS can't detect invalid memory accesses unless they go beyond the ranges of memory allocated for your process.  As far as the OS is concerned, it gave your process that page and the process is using it.  It doesn't care whether or not the malloc routine used by your process has said your program \"owns\" that memory yet.</p>\n\n<p>It might be a fun experiment to see how far you can read before you get an access violation.  Just loop and print each address out before you try to read it.</p>\n"}], "owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1473835016, "creation_date": 1473803924, "last_edit_date": 1473835016, "question_id": 39479620, "link": "https://stackoverflow.com/questions/39479620/is-my-malloc-function-allocating-more-than-i-intend-to", "title": "Is my malloc function allocating more than I intend to", "body": "<p>Here is the code I'm trying to run. The <code>malloc</code> function allocates 800 bytes.</p>\n\n<pre><code>void DynamicMemoryAllocationUsingMalloc()\n{\n    int* p,i;\n    if((p = (int*) malloc(800)) == NULL)\n    {\n        printf(\"\\n Out of Memory \\n\");\n        exit(0);\n    }\n\n    for(i =0;i &lt; 800;i++)\n    {\n        printf(\" 0x%x\", (p + i));\n        printf(\" %d\\n\", *(p + i));\n\n    }\n}\n</code></pre>\n\n<p>But inside the for loop when I print the addresses I'm able to hop through 800 memory locations (using integer pointer <code>p</code>) each 4 byte long (size of an integer) safely which amounts to 3200 bytes. How is that possible or I'm being lucky not be getting access violation error even though I'm actually entering into a memory area which I've not yet allocated for my program? I see garbage being written in all the memory locations for the obvious reason as I've not set those memory location to anything.</p>\n\n<p><strong>Note</strong>: It is a C program being run on Windows 7.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 1701799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/277F9.jpg?s=128&g=1", "display_name": "RastaJedi", "link": "https://stackoverflow.com/users/1701799/rastajedi"}, "is_accepted": false, "score": 2, "last_activity_date": 1473875537, "last_edit_date": 1495542762, "creation_date": 1473803035, "answer_id": 39479460, "question_id": 39479035, "link": "https://stackoverflow.com/questions/39479035/employee-pay-roll-taking-in-info-and-putting-it-in-array/39479460#39479460", "title": "employee pay roll taking in info and putting it in array", "body": "<p>You aren't allocating storage for any of your strings (<code>name</code>, <code>title</code>, <code>ssnum</code> [in your records, and now that I looked, in your do-while loop too--you can't use <code>char name;</code>, you need e.g. <code>char name[100];</code> or pointer with <code>malloc</code>]). Using your <code>typedef</code> for <code>string</code> is somewhat hiding that fact. The only time you can assign to a string variable and have the allocation taken care of for you is at declaration time, since the size is known at compile-time e.g.:</p>\n\n<pre><code>char *str = \"Hello\";\nchar *str2 = { 'w', 'o', 'r', 'l', 'd', '\\0' };\n</code></pre>\n\n<p>In your case, the assignment of the strings for <code>manager</code> is fine since they are in the initializer, but you still do need to give explicit sizes for the character arrays in your <code>employeeRecordT</code>.</p>\n\n<p>What you need to do is either give explicit sizes for these character arrays or explicitly allocate storage for them (<code>malloc</code> etc.); and instead of assigning, you must use <code>strcpy()</code> (<code>&lt;string.h&gt;</code>) (or <code>strncpy()</code> in cases where overflow is a possibility).</p>\n\n<p>One thing you could do for something like your <code>title</code> variable to save space is to declare a statically allocated list of strings and then just have <code>title</code> be a pointer to the appropriate element in the list, e.g. (the <code>const</code>s are optional, but just makes sure this array doesn't get messed up in any way):</p>\n\n<pre><code>const char const *titles[] = { \"Partner\", \"Clerk\", \"etc.\" };\n\ntypedef struct {\n    const char *title;\n    // ...\n} *employeeT;\n\n// ...\nempRec-&gt;title = titles[0];    // Points title to \"Partner\"\n</code></pre>\n\n<p>You could even use an <code>enum</code> as well to help with the index (all of the rest of the code would be the same):</p>\n\n<pre><code>enum { PARTNER, CLERK, ETC };\n// ...\nempRec-&gt;title = titles[CLERK];    // Points title to \"Clerk\"\n</code></pre>\n\n<p>Another issue with your code is that you are only allocating storage for a single <code>employeeT</code> record; you can't reuse <code>empRec</code> without calling <code>malloc()</code> again. What is going to happen is every time you change <code>empRec</code>, it's going to change all of the previous <code>staff</code> elements because they all point to the same location (i.e., <code>staff[0]</code> will contain exactly what you set <code>staff[1]</code> to). \nAnother issue is that you are taking the <code>sizeof (employeeT)</code> but this is wrong since that is only giving you the size of a <em>pointer</em> to your struct. This is one reason why <code>typedef</code>s can make things more confusing. You should create your struct (and typedef to it if you want), but when you need a pointer to it, you should honestly just use the '*' right there in the code (optionally making a <em>second</em> <code>typedef</code>, i.e. <code>typedef struct { // ... } node; typedef node *node_ptr;</code> or even at the same time: <code>typedef struct { // ... } node, *node_ptr;</code>). You have two options, you can either call <code>malloc()</code> again for <code>empRec</code> before you start assigning its members the second (and subsequent) times, or you can simply discard the <code>empRec</code> variable and use <code>staff</code> directly, e.g.:</p>\n\n<pre><code>staff[0] = malloc(sizeof *staff[0]);\n// Note I couldn't use employeeT above since you need struct size, not ptr.\n// (`sizeof (employeeRecordT)` could have been used though)\nstrcpy(staff[0]-&gt;name, \"Ebenezer Scrooge\");\n// ...\nstaff[0]-&gt;salary = 250.00;\n// ...\n</code></pre>\n\n<p>Be <strong>sure</strong> to <code>free()</code> <em>every</em> element in <code>staff[]</code> later on.</p>\n\n<p>Furthermore, I don't see why you have this <code>payrollT</code> type which is essentially a copy of your <code>staff</code> array? If you want <code>payrollT</code> you can just have a pointer to an employee record (which by the way, you probably didn't want <code>employeeT *employees;</code>, you probably wanted either <code>employeeT employees;</code> (since it is already a pointer type) or <code>employeeRecordT *employees</code>). I think this is really the only other thing I see wrong with your program snippet.</p>\n\n<p>If you wanted to, you could get rid of your <code>condition</code> variable, and instead of using a do-while loop, just use a <code>while (1)</code> and your <code>break</code> in your <code>if</code> will exit it for you. This way you can be sure it is still evaluated at least once.</p>\n\n<p>By the way, you don't have to cast the return value of <code>malloc()</code>. It's unnecessary since void pointers are safely and automatically promoted to any other type (and vise versa). See <a href=\"https://stackoverflow.com/a/605858/1701799\">here</a> for more info. Also, I see you mention <code>NewArray</code> but never reference it anywhere.</p>\n"}], "owner": {"reputation": 39, "user_id": 5451816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/85d21b616a1568f3163d68f81009e941?s=128&d=identicon&r=PG&f=1", "display_name": "thewhiteknifer", "link": "https://stackoverflow.com/users/5451816/thewhiteknifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1473875537, "creation_date": 1473800948, "last_edit_date": 1473809178, "question_id": 39479035, "link": "https://stackoverflow.com/questions/39479035/employee-pay-roll-taking-in-info-and-putting-it-in-array", "title": "employee pay roll taking in info and putting it in array", "body": "<p>My program needs to take people's input and calculate salary and withholds and print all of it out. I have the print outs but I'm having trouble storing it in the array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef char *string;\n\n#define MaxEmployees 100\n\ntypedef struct {\n    string name;\n    string title;\n    string ssnum;\n    double salary;\n    int withholding;\n} employeeRecordT;\n\ntypedef struct {\n    string name;\n    string title;\n    string ssnum;\n    double salary;\n    int withholding;\n} *employeeT;\n</code></pre>\n\n<h2>Type: <code>payrollT</code></h2>\n\n<p>This type represents an entire collection of employees. The type definition uses a dynamic array of <code>employeeT</code> values to ensure that there is no maximum bound imposed by the type. The cost of this design is that the programmer must explicitly allocate the storage for the array using <code>NewArray</code>.</p>\n\n<pre><code>typedef struct {\n    int nEmployees;\n    employeeT *employees;\n} *payrollT;\n</code></pre>\n\n<h2>Global variables</h2>\n\n<pre>\nstaff       -- Array of employees  \nnEmployees  -- Number of employees  \nmanager     -- Used to produce a figure for the code\n</pre>\n\n<pre><code>static employeeT staff[MaxEmployees];\nstatic int nEmployees;\n\nstatic employeeRecordT manager = {\n    \"Ebenezer Scrooge\", \"Partner\", \"271-82-8183\", 250.00, 1\n};\n</code></pre>\n\n<p>Private function declarations:</p>\n\n<pre><code> static void InitEmployeeTable(void);\n static payrollT CreatePayroll(employeeT staff[], int nEmployees);\n static void ListEmployees(payrollT payroll);\n static double AverageSalary(payrollT payroll);\n static void  WeeklyPayroll(payrollT payroll);\n //static void GetPayroll(void);\n static double ssnum(payrollT payroll);\n</code></pre>\n\n<p>Main program:</p>\n\n<pre><code>int main(void)\n{\n    payrollT payroll;\n    //GetPayroll(payroll);\n    InitEmployeeTable();\n    payroll = CreatePayroll(staff, nEmployees);\n    ListEmployees(payroll);\n    WeeklyPayroll(payroll);\n}\n\nstatic void InitEmployeeTable(void)\n{\n    employeeT empRec;\n    int condition = 1;\n    int emp_id = 2;\n    empRec = (employeeT)malloc(sizeof (employeeT));\n    empRec-&gt;name = \"Ebenezer Scrooge\";\n    empRec-&gt;title = \"Partner\";\n    empRec-&gt;ssnum = \"271-82-8183\";\n    empRec-&gt;salary = 250.00;\n    empRec-&gt;withholding = 1;\n    staff[0] = empRec;\n    empRec-&gt;name = \"Bob Cratchit\";\n    empRec-&gt;title = \"Clerk\";\n    empRec-&gt;ssnum = \"314-15-9265\";\n    empRec-&gt;salary = 15.00;\n    empRec-&gt;withholding = 7;\n    staff[1] = empRec;\n    nEmployees = 2;\n\n    do {\n        //malloc(sizeof ());\n        char name;\n        char title;\n        char ssnum;\n        float salary;\n        double withholding;\n        printf(\"enter name or input stop to quit!\\n\");\n        printf(\"enter first and last name\\n\");\n        scanf(\"%s\", empRec-&gt;name);\n        //empRec-&gt;name = name;\n        printf(\"\\nenter title\\n\");\n        scanf(\"%s\", empRec-&gt;title);\n        //empRec-&gt;title = title;\n        printf(\"\\nenter social xxx-xx-xxxx\\n\");\n        scanf(\"%s\", empRec-&gt;ssnum);\n        //empRec-&gt;ssnum = ssnum;\n        printf(\"\\nenter salary xx.xx\\n\");\n        scanf(\"%lf\", &amp;empRec-&gt;salary);\n        //empRec-&gt;salary = salary;\n        printf(\"\\nenter withhodling x\\n\");\n        scanf(\"%d\", &amp;empRec-&gt;withholding);\n        //empRec.withholding = withholding;\n        printf(\"printed %d\", emp_id++);\n        staff[emp_id] = empRec;\n        emp_id++;\n        if (strcmp(empRec-&gt;name,\"stop\") == 1) {\n            condition = 0;\n            break;\n        }\n        //staff[emp_id]=empRec;\n        //emp_id++;\n    } while (condition = 1);\n\n    return 0;\n}\n</code></pre>\n"}]