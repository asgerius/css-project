[{"tags": ["c", "embedded", "usb", "stm32", "cdc"], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 1769924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/963830c66e7321a078d752166052aaeb?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/1769924/richard"}, "edited": false, "score": 1, "creation_date": 1431656528, "post_id": 30227407, "comment_id": 48601523, "body": "I just wanted someone to put their finger on the specific piece of code that starts it off. In main.c I see, MX_USB_DEVICE_Init, and I follow that and I see, USBD_Start, and I follow that and I see, USBD_LL_Start, and I follow that and I see, HAL_PCD_Start, and I follow that and I see, USB_DevConnect. This last one, the comment is thta it starts the USB OTG Device."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 2, "last_activity_date": 1431563271, "creation_date": 1431563271, "answer_id": 30227407, "question_id": 30226955, "link": "https://stackoverflow.com/questions/30226955/stm32-stm32cubef4-usb-cdc-operation/30227407#30227407", "title": "STM32 STM32CubeF4 USB CDC operation", "body": "<p>This question is to broad for this forum and not an actual question for a specific problem. However, as some hints, you might</p>\n\n<ul>\n<li>Read the USB-specs, at least some basic overview (just start at wikipedia). USB does not work by toogling a GPIO in software (see next point)</li>\n<li>Read the STM32F4xx reference manual. This is quite comprehensive.</li>\n<li>Read the source code of the demo. This should answer all questions.</li>\n<li>To track execution paths, you should remember that C always starts with the main() function, so this is a good start to see what's going on. (disclaimer: I know pretty well, it starts with startup, but this might confuse a beginner even more).</li>\n</ul>\n\n<p>If you want to work with USB, you will have to do this all anyway, so you might start with it as well right now. Yes, this will take some time; no surprise, engineers have learned all this for years before they start with larger projects.</p>\n\n<p>All information is available legal and for free on the web.</p>\n\n<p>And, yes, USB is most likely interrupt-driven and might also use DMA to transfer data.</p>\n"}, {"comments": [{"owner": {"reputation": 201, "user_id": 1769924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/963830c66e7321a078d752166052aaeb?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/1769924/richard"}, "edited": false, "score": 0, "creation_date": 1431789001, "post_id": 30270235, "comment_id": 48652986, "body": "Most wonderful and thank you so much, that is exactly the starting point I had been looking for. Given the complexity of USB I was unable to see or find this. FWIW, RS-232 is what I grew up with."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1431812918, "post_id": 30270235, "comment_id": 48660379, "body": "It is certainly not as simple as a &quot;voltage change&quot; on the lines. There is a whole serial transmission stack involved for this. However, you get what you ask for and some ppl may prefer simple answers for complex systems. Recommending to read the documentation and work through the software stack is certainly not tutoring, but a good response in general. And for a complex system even more."}], "tags": [], "owner": {"reputation": 86, "user_id": 4250011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9a5e2ca2a0b26ce860c3b86f9eaa71d?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/4250011/rick"}, "is_accepted": true, "score": 7, "last_activity_date": 1431733052, "creation_date": 1431733052, "answer_id": 30270235, "question_id": 30226955, "link": "https://stackoverflow.com/questions/30226955/stm32-stm32cubef4-usb-cdc-operation/30270235#30270235", "title": "STM32 STM32CubeF4 USB CDC operation", "body": "<p>I will take the 2 minutes to answer you instead of lecturing you. Receive is done through interrupts. Very, very simply, the hardware sees the voltage change on the D+/D- and flags an interrupt based on the intialization functions. The interrupt calls HAL_PCD_IRQHandler, which calls USBD_LL_DataInStage in the usbd_conf.c file. That ends up calling the function USBD_CDC_DataIn in the usbd_cdc.c file. There is your starting point, but it is not simple. To do what you want you might have to stop the output to UART and just handle it in the main loop.</p>\n"}], "owner": {"reputation": 201, "user_id": 1769924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/963830c66e7321a078d752166052aaeb?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/1769924/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6329, "favorite_count": 0, "accepted_answer_id": 30270235, "answer_count": 2, "score": 5, "last_activity_date": 1431733052, "creation_date": 1431560258, "last_edit_date": 1431565640, "question_id": 30226955, "link": "https://stackoverflow.com/questions/30226955/stm32-stm32cubef4-usb-cdc-operation", "title": "STM32 STM32CubeF4 USB CDC operation", "body": "<p>I built the code from the STM32CubeF4 for the USB CDC example. I added the missing receive code for CDC_Receive_FS() in usbd_cdc_if.c.\nI loaded this into my STM32F4 Discovery and it works. A character typed on Tera Term returns and is displayed on Tera Term.</p>\n\n<p>I am hoping that someone here, could give me some knowledge about how this USB CDC firmware works, specifically, is this being driven by an interrupt that is generated when there is a level shift in voltage on the USB -D and +D pins, or is there an infinite while loop that was launched somewhere, and it's just polling waiting for some data to appear?\nWhat prompted my question is that I see that one can blink the LEDs on this board by toggling the state of the GPIO pins within an infinite while loop in main.c. However, there is nothing within this while loop at all within main.c for USB. So how does this USB CDC firmware get and send a character from/to Tera Term.</p>\n"}, {"tags": ["c++", "c", "object", "struct"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1431559473, "post_id": 30226770, "comment_id": 48557408, "body": "It might help to show an example of what you&#39;re looking at.  Is this a collection of plain old data or something else?  <code>struct</code> and <code>class</code> are really the same thing with different default permissions."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1431560166, "post_id": 30226770, "comment_id": 48557599, "body": "@RetiredNinja: <code>class</code> and <code>struct</code> are essentially the same in C++, but certainly not in C.  You could not pass a polymorphic C++ class object to C code that is expecting a flat C-style struct, the layouts would not match.  So outside of trivial cases, there is likely going to need some conversions made from one to the other.  But you are right, we need an example of the OP&#39;s use case."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 2, "last_activity_date": 1431561299, "creation_date": 1431561299, "answer_id": 30227106, "question_id": 30226770, "link": "https://stackoverflow.com/questions/30226770/best-way-to-convert-c-object-c-struct/30227106#30227106", "title": "Best way to convert C++ object &lt;--&gt; C struct?", "body": "<p>Use <code>extern \"C\"</code> to declare your C structures:</p>\n\n<pre><code>extern \"C\" {\n    struct some_c_struct {\n        int field1;\n        char *p;\n    };\n};\n</code></pre>\n\n<p>Then, in your C++ code you can use <code>some_c_struct</code> just like any other C++ <code>class</code> or <code>struct</code>, with guaranteed C compatibility, and successfully pass them to and from the C code library that you're using.</p>\n\n<p>Practically speaking, the <code>extern \"C\"</code> declaration isn't needed, but all the language lawyers demand it. Additionally, your struct cannot use any C++-specific features, like virtual functions.</p>\n"}], "owner": {"reputation": 1135, "user_id": 2676680, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a81470e51785d066f1c490330cd847a5?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Darnell", "link": "https://stackoverflow.com/users/2676680/matthew-darnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1431608635, "creation_date": 1431559242, "question_id": 30226770, "link": "https://stackoverflow.com/questions/30226770/best-way-to-convert-c-object-c-struct", "title": "Best way to convert C++ object &lt;--&gt; C struct?", "body": "<p>So basically I am trying to integrate a custom C library into an existing C++ project. I have various C++ objects that will need to be stored/loaded into a C DB and interface with various C functions. I need to convert my C++ objects into C structs, and back again. I have made progress, but am running into memory allocation issues.</p>\n\n<p>I know I haven't included any code here, but I am just wondering if there are any general tips for this task? I have seen the void* used in extern \"C\" for generic C++ objects, but I really need to load/save data from/to C++ objects and C structs.</p>\n\n<p>If I haven't worded this correctly, please ask!</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": true, "score": 2, "last_activity_date": 1431559257, "creation_date": 1431559257, "answer_id": 30226774, "question_id": 30226756, "link": "https://stackoverflow.com/questions/30226756/fgets-give-me-random-big-number/30226774#30226774", "title": "fgets give me random big number", "body": "<p>The <code>fgets()</code> function reads character data from the input. To convert this character data to an integer, use <code>atoi()</code> or a similar function.</p>\n\n<pre><code>fgets(linesearch, 10, stdin);\nint x = atoi(linesearch);\nprintf(\"\\nHledam uroven %d ...\\n\\n\",x);\n</code></pre>\n\n<p>Your <code>printf</code> statement is printing out the <em>address</em> of the <code>linesearch</code> array, which will seem like a random big number.</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 4192910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNugl.jpg?s=128&g=1", "display_name": "iammowgli", "link": "https://stackoverflow.com/users/4192910/iammowgli"}, "is_accepted": false, "score": 0, "last_activity_date": 1431564974, "creation_date": 1431564974, "answer_id": 30227597, "question_id": 30226756, "link": "https://stackoverflow.com/questions/30226756/fgets-give-me-random-big-number/30227597#30227597", "title": "fgets give me random big number", "body": "<p>If you want to read from stdin, into a char array, using scanf() and then print as an int:</p>\n\n<pre><code>scanf(\"%s\", linesearch); // e.g. reads 1234 into array linesearch[].\nprintf(\" %s ...\\n\\n\",linesearch); // Prints string in array linesearch[].\nprintf(\" %p ...\\n\\n\",linesearch); // Prints base address of linesearch[].\n\nint iNum = atoi(linesearch); // Converts string \"1234\" to number 1234.\nprintf(\" %d ...\\n\\n\",iNum); // Prints the converted int.\niNum++; // Can perform arithmetic on this converted int.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 1583655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8ac3da7ce6fb555cc0bfe8a328dcbe?s=128&d=identicon&r=PG", "display_name": "bluesawdust", "link": "https://stackoverflow.com/users/1583655/bluesawdust"}, "is_accepted": false, "score": 0, "last_activity_date": 1431565833, "creation_date": 1431565833, "answer_id": 30227683, "question_id": 30226756, "link": "https://stackoverflow.com/questions/30226756/fgets-give-me-random-big-number/30227683#30227683", "title": "fgets give me random big number", "body": "<p>You are getting a big number from printf because you used <code>%d</code> in the format. The number is the memory address of your character array. To print the character array, update the format to <code>%s</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4859091, "user_type": "registered", "profile_image": "https://graph.facebook.com/923736194315726/picture?type=large", "display_name": "Mat\u011bj Podzemn&#253;", "link": "https://stackoverflow.com/users/4859091/mat%c4%9bj-podzemn%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 30226774, "answer_count": 3, "score": 0, "last_activity_date": 1431566904, "creation_date": 1431559107, "last_edit_date": 1431566904, "question_id": 30226756, "link": "https://stackoverflow.com/questions/30226756/fgets-give-me-random-big-number", "title": "fgets give me random big number", "body": "<p>This is my code, I don't know how to use <code>fgets</code> after <code>scanf</code> so I am using <code>fgets</code> in the 26th line too but every time I use it, it give me big number(ex.2752100) but I write 2.</p>\n\n<p>Why is it doing it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main(int argc, char** argv)\n{\n  char veta[100];\n  int line = 1;//tell what line it is on\n  int found = 0;\n  char a[100];//put the characters of the line into here\n  char b[100];\n  char linesearch[10];//the line you are looking for\n  FILE *file;//the file pointer\n  file = fopen(\"text.txt\",\"r\");//point the file\n  if (file == NULL)\n  {\n    printf(\"file does not exist or doesn't work\\n\");\n    return 0;\n  }\n\n  printf(\"Ahoj, naucim te psat snadno a rychle! \\n\");\n  printf(\"Vyber si uroven slozitosti od 1 do 10:\\n\");\n  //scanf(\"%d\", &amp;linesearch);\n  fgets(linesearch,10,stdin);\n  printf(\"\\nHledam uroven %d ...\\n\\n\",linesearch);\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>i have another problem:</p>\n\n<pre><code>while(fgets(a,100,file))\n{\nif(x == line)\n{\nfound = 1;\nprintf(\"level %d found,level %d say: %s\",x,x,a);\n}\nelse\nprintf(\"reading level: %d\\n\",line );\nline++;\n}\n\n\nprintf(\"\\nwrite your string as fast as you can!!\");\nfgets(veta,40,stdin);\n\nif (strcmp(veta,a) == 0)\n{\n    printf(\"\\nwell done!!!!\\n\");\n}\nelse\n{\n    printf(\"\\nwrong!!!!\\n\");\n    printf(\"%s\", a);\n    printf(\"%s\", veta);\n}\n</code></pre>\n\n<p>i have small senteces(ex I like my mum and she likes me,etc) i want to compare my text with text from file and get answer if I write it well or not. Bonus points if it tell me how many mistakes i did it will be powerful!.</p>\n"}, {"tags": ["c", "pthreads", "mutex"], "comments": [{"owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 2, "creation_date": 1431559315, "post_id": 30226706, "comment_id": 48557363, "body": "<code>just bugs</code>: what does it mean?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1431560142, "post_id": 30226706, "comment_id": 48557594, "body": "You most likely have problem with your index calculations leading to an out-of-bound error. Please cook your problem down to a minimal example and then learn to use a debugger. At least almost certain it is not the mutex stuff itself."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1431561239, "post_id": 30226706, "comment_id": 48557908, "body": "<code>d-&gt;vec = vec;</code> doesn&#39;t seem right. Are you sure you want all threads working on the same data?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4897748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204329711779006/picture?type=large", "display_name": "Rafael Ramalho", "link": "https://stackoverflow.com/users/4897748/rafael-ramalho"}, "edited": false, "score": 0, "creation_date": 1431612125, "post_id": 30227051, "comment_id": 48580075, "body": "Thank you very much, i thought it was related to the mutex, you cleared it out for me."}], "tags": [], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": true, "score": 0, "last_activity_date": 1431560911, "last_edit_date": 1592644375, "creation_date": 1431560911, "answer_id": 30227051, "question_id": 30226706, "link": "https://stackoverflow.com/questions/30226706/cant-synchronize-more-than-2-threads-with-pthread-mutex-lock/30227051#30227051", "title": "Can&#39;t synchronize more than 2 threads with pthread_mutex_lock", "body": "<h2>Two bugs</h2>\n<pre><code>memset(count, 0, 49);\n</code></pre>\n<p>should be:</p>\n<pre><code>memset(count, 0, sizeof(count));\n</code></pre>\n<p>And..</p>\n<pre><code>           count[i] = d-&gt;vec[j];\n</code></pre>\n<p>should be:</p>\n<pre><code>           count[i]++;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4897748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204329711779006/picture?type=large", "display_name": "Rafael Ramalho", "link": "https://stackoverflow.com/users/4897748/rafael-ramalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 30227051, "answer_count": 1, "score": -2, "last_activity_date": 1431560911, "creation_date": 1431558807, "last_edit_date": 1431560164, "question_id": 30226706, "link": "https://stackoverflow.com/questions/30226706/cant-synchronize-more-than-2-threads-with-pthread-mutex-lock", "title": "Can&#39;t synchronize more than 2 threads with pthread_mutex_lock", "body": "<p>So I'm doing homework for my C class and I came across a problem. I want to sync the acess to my global array with pthread_mutex_lock() but it seems that when 2 or more threads try to lock at the same time it just bugs. Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n#define NUM_THREADS 10\n#define VAL 10\n\n\nint numbers[49];\n\npthread_mutex_t mutex;\n\n\ntypedef struct {\n    int start;\n    int* vec;\n} dados;\n\nvoid* threadFunction(void *arg){\n    dados* d = (dados*) arg;\n    int i = 0;\n    int j = 0;\n    int count[49];\n    memset(count, 0, 49);\n    for(i = 0; i &lt; 49; i++){    \n        for(j = d-&gt;start; j &lt; (d-&gt;start + VAL); j++) {\n            if(d-&gt;vec[j] == i+1)\n                count[i] = d-&gt;vec[j];\n        }\n    }\n\n    pthread_mutex_lock(&amp;mutex);\n    for(i = 0; i &lt; 49; i++) {       \n        numbers[i]+= count[i];  \n    }\n    pthread_mutex_unlock(&amp;mutex);\n    free(d);\n    pthread_exit(NULL);\n}\n\nint main(int argc, char** argv){\n    srand(time(NULL));\n    /*=============== Threads ================*/\n    pthread_mutex_init(&amp;mutex, NULL);\n    pthread_t threads[NUM_THREADS];\n    /*========================================*/\n    int vec[NUM_THREADS * VAL];\n    int i;\n\n    for(i = 0; i &lt; NUM_THREADS * VAL; i++)\n        vec[i] = (int)(rand() % 49 + 1);\n\n    for(i = 0; i &lt; NUM_THREADS; i++) {\n        dados* d = malloc(sizeof(dados));\n        d-&gt;start = i*VAL;\n        d-&gt;vec = vec;\n        pthread_create(&amp;threads[i], NULL, threadFunction, d);\n    }\n    for(i = 0; i &lt; NUM_THREADS; i++)\n        pthread_join(threads[i], NULL); \n\n    pthread_mutex_destroy(&amp;mutex);\n\n    for(i = 0 ; i &lt; 49; i++)\n        printf(\"NUMERO %d = %d\\n\", i+1, numbers[i]);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "time", "execution", "measure"], "comments": [{"owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "edited": false, "score": 0, "creation_date": 1431563932, "post_id": 30226635, "comment_id": 48558646, "body": "Look at the <code>rdtsc</code> intrinsic."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4833226, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iE2uoKG8tNo/AAAAAAAAAAI/AAAAAAAAABE/g3trP-tBYSg/photo.jpg?sz=128", "display_name": "Mr.Gurbuz", "link": "https://stackoverflow.com/users/4833226/mr-gurbuz"}, "edited": false, "score": 0, "creation_date": 1431558664, "post_id": 30226665, "comment_id": 48557204, "body": "I tried it. But, I didn&#39;t work code. What should I do?"}, {"owner": {"reputation": 29, "user_id": 4833226, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iE2uoKG8tNo/AAAAAAAAAAI/AAAAAAAAABE/g3trP-tBYSg/photo.jpg?sz=128", "display_name": "Mr.Gurbuz", "link": "https://stackoverflow.com/users/4833226/mr-gurbuz"}, "edited": false, "score": 0, "creation_date": 1431559317, "post_id": 30226665, "comment_id": 48557364, "body": "Error] &#39;t0&#39; undeclared (first use in this function) [Note] each undeclared identifier is reported only once for each function it appears in [Error] &#39;t1&#39; undeclared (first use in this function)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 29, "user_id": 4833226, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iE2uoKG8tNo/AAAAAAAAAAI/AAAAAAAAABE/g3trP-tBYSg/photo.jpg?sz=128", "display_name": "Mr.Gurbuz", "link": "https://stackoverflow.com/users/4833226/mr-gurbuz"}, "edited": false, "score": 0, "creation_date": 1431559769, "post_id": 30226665, "comment_id": 48557484, "body": "Show all the code. You haven&#39;t declared <code>t0</code> and <code>t1</code> in that code snippet. If that is indeed all your code then what else did you expect if not a compile error?"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1431559883, "post_id": 30226665, "comment_id": 48557519, "body": "You need to declare t0 and t1 as struct timevals. Note that Windows doesn&#39;t have this function. You could use clock, but for Windows, the ticker only runs at 64hz, so only 15.625 ms resolution. You could use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644904(v=vs.85).aspx\" rel=\"nofollow noreferrer\">QueryPerformanceCounter</a> but that&#39;s Windows only."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1431562329, "post_id": 30226665, "comment_id": 48558204, "body": "<code>%.10f</code>. The fields are not floats but longs (usually). Try <code>%ld</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1431606456, "post_id": 30226665, "comment_id": 48576336, "body": "You can&#39;t have tried what I suggested. <code>%ld</code> does not result in any decimal places so you cannot have gotten &quot;0.00000000&quot; if you had tried what I suggested."}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": false, "score": 2, "last_activity_date": 1431558674, "last_edit_date": 1431558674, "creation_date": 1431558521, "answer_id": 30226665, "question_id": 30226635, "link": "https://stackoverflow.com/questions/30226635/c-measure-function-time-execution/30226665#30226665", "title": "C - Measure Function Time Execution", "body": "<p><code>time</code> only has seconds granularity. Whereas your code is likely to be microseconds or milliseconds at worst. Use <code>gettimeofday</code> instead which has microsecond granularity.</p>\n\n<p>But note that both <code>time</code> and <code>gettimeofday</code> gives you wall time. If you want CPU time <code>clock</code> can be used.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 29, "user_id": 4833226, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iE2uoKG8tNo/AAAAAAAAAAI/AAAAAAAAABE/g3trP-tBYSg/photo.jpg?sz=128", "display_name": "Mr.Gurbuz", "link": "https://stackoverflow.com/users/4833226/mr-gurbuz"}, "edited": false, "score": 0, "creation_date": 1431609718, "post_id": 30227386, "comment_id": 48578420, "body": "@Mr.Gurbuz: try sorting 5,000 elements instead of just 5.  Or be bold and go for 50,000, or even 500,000.  Don&#39;t go much higher or you can run out of stack space (I am not certain you&#39;ll be safe at 500.000 if you&#39;re on Wijndows).  Basically, sorting 5 elements does not take long enough to register."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1431563122, "creation_date": 1431563122, "answer_id": 30227386, "question_id": 30226635, "link": "https://stackoverflow.com/questions/30226635/c-measure-function-time-execution/30227386#30227386", "title": "C - Measure Function Time Execution", "body": "<p>Your calculation and printing is:</p>\n\n<pre><code> printf(\"Elapsed time is %.10f\",\n        (end.tv_sec * 1000000 + end.tv_usec) -\n        (start.tv_sec * 1000000 + start.tv_usec));\n</code></pre>\n\n<p>You are trying to print an integer value with a floating point format; this is not going to lead to happiness.  Assuming that the integer arithmetic does not overflow, then you can use:</p>\n\n<pre><code> printf(\"Elapsed time is %.6f\",\n        ((end.tv_sec * 1000000 + end.tv_usec) -\n        (start.tv_sec * 1000000 + start.tv_usec)) / 1000000.0);\n</code></pre>\n\n<p>which will give you a floating point value to print with the floating point format.  There's no point in requesting 10 decimal places when <code>gettimeofday()</code> supports only 6 (and 6 decimal places is the default, but explicitness is often good).</p>\n\n<p>You could also use:</p>\n\n<pre><code> printf(\"Elapsed time is %.6f\",\n        ((end.tv_sec * 1000000.0 + end.tv_usec) -\n         (start.tv_sec * 1000000.0 + start.tv_usec)) / 1000000);\n</code></pre>\n\n<p>The key point is to make sure that enough of the computation is done in floating point arithmetic.</p>\n"}], "owner": {"reputation": 29, "user_id": 4833226, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iE2uoKG8tNo/AAAAAAAAAAI/AAAAAAAAABE/g3trP-tBYSg/photo.jpg?sz=128", "display_name": "Mr.Gurbuz", "link": "https://stackoverflow.com/users/4833226/mr-gurbuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1431618548, "creation_date": 1431558339, "last_edit_date": 1431618548, "question_id": 30226635, "link": "https://stackoverflow.com/questions/30226635/c-measure-function-time-execution", "title": "C - Measure Function Time Execution", "body": "<p>I want to measure elasped time for insertion_sort function. But, the result is 0.0000000 second. What can I do? I tried other time libraries.Unfortunatelly, it didn't... Thanks.    I writed again.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(void) \n{\n  int number=1;\n  if(number == 1)\n  {\n     struct timeval start, end;\n     gettimeofday(&amp;start, NULL);\n\n     for(int i=0; i&lt;5;i++)\n     {\n     insertion_sort( kelime, n );   \n     }\n     gettimeofday(&amp;end, NULL);\n\n     printf(\"Elapsed time is %.10f\",(end.tv_sec * 1000000 + end.tv_usec)-   (start.tv_sec * 1000000 + start.tv_usec));\n }\n</code></pre>\n"}, {"tags": ["c", "arrays", "search", "binary"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4794392"}, "edited": false, "score": 0, "creation_date": 1431557450, "post_id": 30226465, "comment_id": 48556871, "body": "Now it makes sense... Thanks!"}], "tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": true, "score": 1, "last_activity_date": 1431557209, "creation_date": 1431557209, "answer_id": 30226465, "question_id": 30226430, "link": "https://stackoverflow.com/questions/30226430/binary-search-c/30226465#30226465", "title": "binary search C", "body": "<p>The <code>bsearch()</code> function is pretty flexible, because you can pass a pointer to <em>any</em> kind of array. Changing the <code>base</code> parameter to <code>const void **base</code> would imply that you could only use <code>bsearch()</code> on arrays of pointers.</p>\n\n<p>If you are searching an array of <code>int</code>, then you should certainly pass a <code>void *</code> which is the start address of your array.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4794392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 30226465, "answer_count": 1, "score": 1, "last_activity_date": 1431557257, "creation_date": 1431557032, "last_edit_date": 1431557257, "question_id": 30226430, "link": "https://stackoverflow.com/questions/30226430/binary-search-c", "title": "binary search C", "body": "<p>Here's the signature of the binary search function:</p>\n\n<pre><code>void *bsearch(const void *key, const void *base, size_t nmemb, size_t size,\n              int (*compar)(const void *, const void *));\n</code></pre>\n\n<p>I don't understand why we're sending a void* as the array pointer, instead of void**, since as far as I know, if i'm looking for an int inside an int array, I should send an int* as the array, not int...\nWould the implementaion be much different (or perhaps impossible to implement) if the function's signature was like this:</p>\n\n<pre><code>void *bsearch(const void *key, <b>const void** base</b>, size_t nmemb, size_t size,\n              int (*compar)(const void *, const void *));</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["android", "c", "camera", "yuv", "google-project-tango"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3793585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea099aa9fbfc4b915dcccddd2b67365e?s=128&d=identicon&r=PG&f=1", "display_name": "guppy", "link": "https://stackoverflow.com/users/3793585/guppy"}, "edited": false, "score": 0, "creation_date": 1431625718, "post_id": 30227473, "comment_id": 48588865, "body": "Thank you for the answer. It really helps to be certain which format the data is! I need to get the camera data and it is possible that I need to process it in the fragment shader or maybe even before that. I now tried to just process the grey data but that output didn&#39;t work right too. I just need to read the first half of the buffer height to get the data right? Or is the width and height actually Y data and the buffer is actually bigger? I created a color buffer, thus I don&#39;t work with a texture and therefore the shader doesn&#39;t use texture coordinates. (I need to do that for future tasks)."}, {"owner": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "reply_to_user": {"reputation": 13, "user_id": 3793585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea099aa9fbfc4b915dcccddd2b67365e?s=128&d=identicon&r=PG&f=1", "display_name": "guppy", "link": "https://stackoverflow.com/users/3793585/guppy"}, "edited": false, "score": 0, "creation_date": 1431626764, "post_id": 30227473, "comment_id": 48589486, "body": "<code>width</code> and <code>height</code> will be the image size in pixels. Y is sampled at every pixel so <code>data</code> starts with <code>width</code> x <code>height</code> bytes of Y (possibly with padding depending on <code>stride</code>)."}, {"owner": {"reputation": 13, "user_id": 3793585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea099aa9fbfc4b915dcccddd2b67365e?s=128&d=identicon&r=PG&f=1", "display_name": "guppy", "link": "https://stackoverflow.com/users/3793585/guppy"}, "edited": false, "score": 0, "creation_date": 1431630941, "post_id": 30227473, "comment_id": 48591908, "body": "Than the loop should be right :) Good to know! I encountered another problem since the Leibniz release. After a few frames the camera seems to crash which leads to problems with the rendering (just black pixels): This is the error message (The first of them says RAW instead of YUV): 05-14 19:05:18.878     190-5445/? E/camera-metadata\ufe55 /home/ubuntu/jobs/redwood_internal/RedwoodInternal/Redwood/c&zwnj;&#8203;ommon/player-engine/&zwnj;&#8203;src/camera-metadata.&zwnj;&#8203;cc:56 YUV failed to match frame 1545.014677"}], "tags": [], "owner": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "is_accepted": true, "score": 0, "last_activity_date": 1431567169, "last_edit_date": 1431567169, "creation_date": 1431563823, "answer_id": 30227473, "question_id": 30226424, "link": "https://stackoverflow.com/questions/30226424/color-image-in-the-google-tango-leibniz-api/30227473#30227473", "title": "Color Image in the Google Tango Leibniz API", "body": "<p>YUV420SP (aka NV21) is correct for the time being. An explanation is <a href=\"https://plus.google.com/107000393284585119717/posts/Q9etEwrWWrs\" rel=\"nofollow\">here</a>. In this format you have a <code>width</code> x <code>height</code> array where each element is a Y byte, followed by a  <code>width/2</code> x <code>height/2</code> array where each element is a V byte and a U byte. Your code is implementing YV21, which has separate arrays for V and U instead of interleaving them in one array.</p>\n\n<p>You mention that you are doing YUV to RGB conversion in a fragment shader. If all you want to do with the camera images is draw then you can use <code>TangoService_connectTextureId()</code> and <code>TangoService_updateTexture()</code> instead of <code>TangoService_connectOnFrameAvailable()</code>. This approach delivers the camera image to you already in an OpenGL texture that gives your fragment shader RGB values without bothering with the pixel format details. You will need to bind to <code>GL_TEXTURE_EXTERNAL_OES</code> (instead of <code>GL_TEXTURE_2D</code>), and your fragment shader would look something like this:</p>\n\n<pre><code>#extension GL_OES_EGL_image_external : require\n\nprecision mediump float;\n\nvarying vec4 v_t;\nuniform samplerExternalOES colorTexture;\n\nvoid main() {\n   gl_FragColor = texture2D(colorTexture, v_t.xy);\n}\n</code></pre>\n\n<p>If you really do want to pass YUV data to a fragment shader for some reason, you can do so without preprocessing it into floats. In fact, you don't need to unpack it at all - for NV21 just define a 1-byte texture for Y and a 2-byte texture for VU, and load the data as-is. Your fragment shader will use the same texture coordinates for both.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 3793585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea099aa9fbfc4b915dcccddd2b67365e?s=128&d=identicon&r=PG&f=1", "display_name": "guppy", "link": "https://stackoverflow.com/users/3793585/guppy"}, "is_accepted": false, "score": 0, "last_activity_date": 1432248988, "creation_date": 1432248988, "answer_id": 30385706, "question_id": 30226424, "link": "https://stackoverflow.com/questions/30226424/color-image-in-the-google-tango-leibniz-api/30385706#30385706", "title": "Color Image in the Google Tango Leibniz API", "body": "<p>By the way, if someone experienced problems with capturing the image data on the Leibniz release, too: One of the developers told me that there is a bug concerning the camera and that it should be fixed with the Nash release. </p>\n\n<p>The bug caused my buffer to be null but when I used the Nash update I got data again. However, right now the problem is that the data I am using doesn't make sense. I guess/hope the cause is that the Tablet didn't get the OTA update yet (there can be a gap between the actual release date and the OTA software update).</p>\n"}, {"comments": [{"owner": {"reputation": 3599, "user_id": 437704, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a330709470b1cb228d7e79fd51eccda4?s=128&d=identicon&r=PG&f=1", "display_name": "edcs", "link": "https://stackoverflow.com/users/437704/edcs"}, "edited": false, "score": 0, "creation_date": 1494427923, "post_id": 43895841, "comment_id": 74825961, "body": "Welcome to StackOverflow! Please could you add a description to tell the op how your solution works?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7992372, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2xiwDtILTrM/AAAAAAAAAAI/AAAAAAAAACo/lUuyFukqXjc/photo.jpg?sz=128", "display_name": "Hao Li", "link": "https://stackoverflow.com/users/7992372/hao-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1494427528, "creation_date": 1494427528, "answer_id": 43895841, "question_id": 30226424, "link": "https://stackoverflow.com/questions/30226424/color-image-in-the-google-tango-leibniz-api/43895841#43895841", "title": "Color Image in the Google Tango Leibniz API", "body": "<p>Just try code following:</p>\n\n<pre><code>//C#    \npublic bool YV12ToPhoto(byte[] data, int width, int height, out Texture2D photo)\n        {\n            photo = new Texture2D(width, height);\n\n            int uv_buffer_offset = width * height;\n\n            for (int i = 0; i &lt; height; i++)\n            {\n                for (int j = 0; j &lt; width; j++)\n                {\n                    int x_index = j;\n                    if (j % 2 != 0)\n                    {\n                        x_index = j - 1;\n                    }\n\n                    // Get the YUV color for this pixel.\n                    int yValue = data[(i * width) + j];\n                    int uValue = data[uv_buffer_offset + ((i / 2) * width) + x_index + 1];\n                    int vValue = data[uv_buffer_offset + ((i / 2) * width) + x_index];\n\n                    // Convert the YUV value to RGB.\n                    float r = yValue + (1.370705f * (vValue - 128));\n                    float g = yValue - (0.689001f * (vValue - 128)) - (0.337633f * (uValue - 128));\n                    float b = yValue + (1.732446f * (uValue - 128));\n\n                    Color co = new Color();\n                    co.b = b &lt; 0 ? 0 : (b &gt; 255 ? 1 : b / 255.0f);\n                    co.g = g &lt; 0 ? 0 : (g &gt; 255 ? 1 : g / 255.0f);\n                    co.r = r &lt; 0 ? 0 : (r &gt; 255 ? 1 : r / 255.0f);\n                    co.a = 1.0f;\n\n                    photo.SetPixel(width - j - 1, height - i - 1, co);\n                }\n            }\n\n            return true;\n        }\n</code></pre>\n\n<p>I have succeeded.</p>\n"}], "owner": {"reputation": 13, "user_id": 3793585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea099aa9fbfc4b915dcccddd2b67365e?s=128&d=identicon&r=PG&f=1", "display_name": "guppy", "link": "https://stackoverflow.com/users/3793585/guppy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "accepted_answer_id": 30227473, "answer_count": 3, "score": 0, "last_activity_date": 1494427528, "creation_date": 1431556985, "last_edit_date": 1495541409, "question_id": 30226424, "link": "https://stackoverflow.com/questions/30226424/color-image-in-the-google-tango-leibniz-api", "title": "Color Image in the Google Tango Leibniz API", "body": "<p>I am trying to capture the image data in the onFrameAvailable method from a Google Tango. I am using the Leibniz release. In the header file it is said that the buffer contains HAL_PIXEL_FORMAT_YV12 pixel data. In the <a href=\"https://developers.google.com/project-tango/release-notes\" rel=\"nofollow noreferrer\">release notes</a> they say the buffer contains YUV420SP. But in the <a href=\"https://developers.google.com/project-tango/apis/c/struct_tango_image_buffer\" rel=\"nofollow noreferrer\">documentation</a> it is said the pixels are RGBA8888 format (). I am a little confused and additionally. I don't really get image data but a lot of magenta and green. Right now I am trying to convert from YUV to RGB similar to <a href=\"https://stackoverflow.com/questions/27159916/getting-color-data-in-unity\">this one</a>. I guess there is something wrong with the stride, too. Here e\u00eds the code of the onFrameAvailable method:</p>\n\n<pre><code>int size = (int)(buffer-&gt;width * buffer-&gt;height);\nfor (int i = 0; i &lt; buffer-&gt;height; ++i)\n{\n   for (int j = 0; j &lt; buffer-&gt;width; ++j)\n   {\n       float y = buffer-&gt;data[i * buffer-&gt;stride + j];\n       float v = buffer-&gt;data[(i / 2) * (buffer-&gt;stride / 2) + (j / 2) + size];\n       float u = buffer-&gt;data[(i / 2) * (buffer-&gt;stride  / 2) + (j / 2) + size + (size / 4)];\n\n               const float Umax = 0.436f;\n               const float Vmax = 0.615f;\n\n               y = y / 255.0f;\n               u =  (u / 255.0f - 0.5f) ;\n               v =  (v / 255.0f - 0.5f) ;\n\n               TangoData::GetInstance().color_buffer[3*(i*width+j)]=y;\n               TangoData::GetInstance().color_buffer[3*(i*width+j)+1]=u;\n               TangoData::GetInstance().color_buffer[3*(i*width+j)+2]=v;\n   }\n}\n</code></pre>\n\n<p>I am doing the yuv to rgb conversion in the fragment shader.</p>\n\n<p>Has anyone ever obtained an RGB image for the Google Tango Leibniz release? Or had someone similar problems when converting from YUV to RGB?</p>\n"}, {"tags": ["c", "printf", "scanf"], "comments": [{"owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 0, "creation_date": 1431556959, "post_id": 30226325, "comment_id": 48556720, "body": "Enable all warnings when compiling and the compiler messages will speak for themselves then :)"}], "answers": [{"tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": false, "score": 4, "last_activity_date": 1431556523, "creation_date": 1431556523, "answer_id": 30226345, "question_id": 30226325, "link": "https://stackoverflow.com/questions/30226325/c-wrong-answer-when-squaring/30226345#30226345", "title": "C Wrong Answer when squaring", "body": "<p>Your <code>printf</code> statements are incorrect. Do not use <code>&amp;</code> in this case:</p>\n\n<pre><code>printf(\"\\n Number = %d \", number);\nprintf(\"\\t Square of Number = %d\", square);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "is_accepted": false, "score": 5, "last_activity_date": 1431556532, "creation_date": 1431556532, "answer_id": 30226348, "question_id": 30226325, "link": "https://stackoverflow.com/questions/30226325/c-wrong-answer-when-squaring/30226348#30226348", "title": "C Wrong Answer when squaring", "body": "<p>You are printing the memory address of the <code>number</code> and <code>square</code> variables, not their values.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>printf(\"\\n Number = %d \", number);\nprintf(\"\\t Square of Number = %d\", square);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 4192910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNugl.jpg?s=128&g=1", "display_name": "iammowgli", "link": "https://stackoverflow.com/users/4192910/iammowgli"}, "is_accepted": true, "score": 1, "last_activity_date": 1431565864, "creation_date": 1431565864, "answer_id": 30227689, "question_id": 30226325, "link": "https://stackoverflow.com/questions/30226325/c-wrong-answer-when-squaring/30227689#30227689", "title": "C Wrong Answer when squaring", "body": "<p>To add to the above answers ... look at this example:</p>\n\n<pre><code>int number = 5;\n\nprintf(\" %d\\n\", number);     // Prints value of 'number'.\nprintf(\" %p\\n\", &amp;number);    // Prints address of 'number'.\nprintf(\" %d\\n\", *(&amp;number)); // Prints value at address of 'number' ...\n</code></pre>\n"}], "owner": {"reputation": 673, "user_id": 2723240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fd7f668ae01beba48103bd200e62ed40?s=128&d=identicon&r=PG&f=1", "display_name": "user2723240", "link": "https://stackoverflow.com/users/2723240/user2723240"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 30227689, "answer_count": 3, "score": 0, "last_activity_date": 1431565864, "creation_date": 1431556398, "question_id": 30226325, "link": "https://stackoverflow.com/questions/30226325/c-wrong-answer-when-squaring", "title": "C Wrong Answer when squaring", "body": "<p>I'm learning C using C by Example. There is a question where we need to take an input integer and square it and print it to the screen. I'm having a strange error, when no matter what Int I enter it give me this output:</p>\n\n<pre><code>Please enter a number.\n5\nNumber = 2686764         Square of Number = 2686760\n</code></pre>\n\n<p>Here is the program I wrote.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;   //for getch()\n\n\nmain(){\n\n    int number, square;\n\n    printf(\"Please enter a number. \\n\");\n    scanf(\"%d\", &amp;number);\n    square = number*number;\n    printf(\"\\n Number = %d \", &amp;number);\n    printf(\"\\t Square of Number = %d\", &amp;square);\n    getch();\n\n\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 631, "user_id": 200238, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2e0d60268263434c2ba28ef1282e5377?s=128&d=identicon&r=PG", "display_name": "shipshape", "link": "https://stackoverflow.com/users/200238/shipshape"}, "edited": false, "score": 0, "creation_date": 1431608979, "post_id": 30226222, "comment_id": 48577937, "body": "thanks for the helpful reply. Ideally I would like the equivalent of (flag &amp; ~(1 &lt;&lt; FOO_BITPOSITION))  where the check can be done on the fly. Creating a constant in advance seems a bit clunky - I&#39;ll need a separate constant for every field I need to check. The problem is that the named bitfields are intended to make it hard to get at FOO_BITPOSITION... sigh."}, {"owner": {"reputation": 876, "user_id": 4569666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83859d7d2096cd32a89482a424da7d6d?s=128&d=identicon&r=PG&f=1", "display_name": "R Phillip Castagna", "link": "https://stackoverflow.com/users/4569666/r-phillip-castagna"}, "reply_to_user": {"reputation": 631, "user_id": 200238, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2e0d60268263434c2ba28ef1282e5377?s=128&d=identicon&r=PG", "display_name": "shipshape", "link": "https://stackoverflow.com/users/200238/shipshape"}, "edited": false, "score": 0, "creation_date": 1431612582, "post_id": 30226222, "comment_id": 48580395, "body": "The problem is that the actual order of bits in your struct is compiler dependent as per the C spec. In the format of your example, though, you can do ~((flag ^ ~(1 &lt;&lt; FOO_BITPOSITION)) - 255u)"}, {"owner": {"reputation": 876, "user_id": 4569666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83859d7d2096cd32a89482a424da7d6d?s=128&d=identicon&r=PG&f=1", "display_name": "R Phillip Castagna", "link": "https://stackoverflow.com/users/4569666/r-phillip-castagna"}, "reply_to_user": {"reputation": 631, "user_id": 200238, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2e0d60268263434c2ba28ef1282e5377?s=128&d=identicon&r=PG", "display_name": "shipshape", "link": "https://stackoverflow.com/users/200238/shipshape"}, "edited": false, "score": 0, "creation_date": 1431612730, "post_id": 30226222, "comment_id": 48580505, "body": "You can also just use another instance of the same struct, and programmatically set the bit you want to be 1 to 0 and everything else to 1, then do the XOR. That way you could even do stuff like loop through the fields on the struct to see what matched if you wanted."}], "tags": [], "owner": {"reputation": 876, "user_id": 4569666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83859d7d2096cd32a89482a424da7d6d?s=128&d=identicon&r=PG&f=1", "display_name": "R Phillip Castagna", "link": "https://stackoverflow.com/users/4569666/r-phillip-castagna"}, "is_accepted": false, "score": 2, "last_activity_date": 1431564279, "last_edit_date": 1431564279, "creation_date": 1431555890, "answer_id": 30226222, "question_id": 30226125, "link": "https://stackoverflow.com/questions/30226125/how-to-check-for-a-single-field-being-set-in-a-c-bitfield/30226222#30226222", "title": "How to check for a single field being set in a C bitfield", "body": "<p>Bitwise XOR with the negation of what you want:</p>\n\n<pre><code>  11011111\n^ 00100000\n= 11111111\n</code></pre>\n\n<p>Then just check that the value == 255. Can make it clean by using your own struct to build the negation by setting bar->foo = 0 and everything else to 1.</p>\n\n<p>edit: A little elaboration because I feel bad about not being pretty when that's what you're asking for:</p>\n\n<pre><code>struct {\n    unsigned char bad:1;\n    unsigned char bad:1;\n\n    unsigned char foo;\n\n    unsigned char other:1;\n    unsigned char bad:1;\n    unsigned char things:3;\n} state_checker;\n\nint some_checking_function(flags_t possible_foo) {\n    result = possible_foo ^ state_checker;\n    result = !(result - 255u);\n    return result;\n}\n</code></pre>\n\n<p>Ideally you would even make a constant that uses the same struct that the value you're checking uses, to make sure that nothing wonky happens at compile time, but this is the basic idea. </p>\n"}, {"comments": [{"owner": {"reputation": 631, "user_id": 200238, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2e0d60268263434c2ba28ef1282e5377?s=128&d=identicon&r=PG", "display_name": "shipshape", "link": "https://stackoverflow.com/users/200238/shipshape"}, "edited": false, "score": 0, "creation_date": 1431592666, "post_id": 30226671, "comment_id": 48568126, "body": "Thanks for the thorough examples. But these all help with the individual field. Any suggestions for how to check if foo is the only field set without creating a flags_t variable? The equivalent of &quot;if (flag &amp; ~(1 &lt;&lt; FOO_BITPOSITION)) &quot;"}], "tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": 0, "last_activity_date": 1431558533, "last_edit_date": 1495535049, "creation_date": 1431558533, "answer_id": 30226671, "question_id": 30226125, "link": "https://stackoverflow.com/questions/30226125/how-to-check-for-a-single-field-being-set-in-a-c-bitfield/30226671#30226671", "title": "How to check for a single field being set in a C bitfield", "body": "<p>The exact position of each bit in a bitfield is implementation dependent. But the compiler is going to do consistent things, so once you determine where the bit(s) you care about lie in your union/struct, you can construct a mask.</p>\n\n<p>As you have deduced, you can construct a mask for any named bit in a bitfield, and operate on it using set/clear/toggle/check operations. <a href=\"https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c-c?rq=1\">This question shows how</a> to do the above operations for a single bit (in C).  The functions provided below show how to access set, clear, and toggle a bit, using the raw part of the union (assuming the raw part is the same size as the bitfield part allocated.</p>\n\n<p>How to check/access foo, a bit in the union,</p>\n\n<pre><code>fooget( flags_t flag )\n{\nflags_t mask;\nmask.raw = 0;\nmask.foo = 1;\nreturn(foo = flag.raw &amp; mask.foo);\n}\n</code></pre>\n\n<p>How to clear foo, using bitwise operators and mask</p>\n\n<pre><code>fooclear( flags_t flag )\n{\nflags_t mask;\nmask.raw = 0;\nmask.foo = 1;\nreturn( flag.raw &amp;= ~mask.raw );\n}\n</code></pre>\n\n<p>How to set foo, using bitwise operator on raw and mask</p>\n\n<pre><code>fooset( flags_t flag )\n{\nflags_t mask;\nmask.raw = 0;\nmask.foo = 1;\nflag.raw |= mask.raw;\n}\n</code></pre>\n\n<p>How to toggle (invert/flip) foo, using bitwise operators on raw with a mask,</p>\n\n<pre><code>footoggle( flags_t flag )\n{\nflags_t mask;\nmask.raw = 0;\nmask.foo = 1;\nflag.raw ^= mask.raw;\n}\n</code></pre>\n\n<p><em>Warning: this is contrary to the spirit of bitfields, which are about hiding the details of bit manipulations, making these bit manipulations 'easier'.</em></p>\n"}], "owner": {"reputation": 631, "user_id": 200238, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2e0d60268263434c2ba28ef1282e5377?s=128&d=identicon&r=PG", "display_name": "shipshape", "link": "https://stackoverflow.com/users/200238/shipshape"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431564279, "creation_date": 1431555370, "question_id": 30226125, "link": "https://stackoverflow.com/questions/30226125/how-to-check-for-a-single-field-being-set-in-a-c-bitfield", "title": "How to check for a single field being set in a C bitfield", "body": "<p>I have the following style of union - defined in an interface so not easy to change.</p>\n\n<p>I want to check if foo is the only field being set. And don't want to this by itemizing all the other fields.</p>\n\n<p>So my immediate thoughts were to construct a mask, but then the bitfield is doing it's best to hide details like the position of a named field. </p>\n\n<p>I couldn't think of anything better than creating a variable with the one field set and then inverting the raw field. Is there a neater solution?</p>\n\n<pre><code>typedef union    struct {\n        unsigned char user:1;\n        unsigned char zero:1;\n        unsigned char foo:1;\n        unsigned char bar:1;\n        unsigned char blah:1;\n        unsigned char unused:3;\n    };\n    unsigned char raw;\n} flags_t;\n</code></pre>\n"}, {"tags": ["c", "pointers", "pass-by-reference"], "comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 2, "creation_date": 1431555103, "post_id": 30226055, "comment_id": 48556031, "body": "Avoid file-scope variables."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1431555104, "post_id": 30226055, "comment_id": 48556033, "body": "Simple answer, do not use global variables for that. Also, your <code>example()</code> function doesn&#39;t <code>return</code> a value which would be a lot better."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1431555224, "post_id": 30226055, "comment_id": 48556089, "body": "Avoid globals if at all possible: <a href=\"http://programmers.stackexchange.com/questions/148108/why-is-global-state-so-evil\" title=\"why is global state so evil\">programmers.stackexchange.com/questions/148108/&hellip;</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1431557678, "post_id": 30226055, "comment_id": 48556928, "body": "Notice that C functions can return some <code>struct</code> aggregate"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1431558097, "post_id": 30226055, "comment_id": 48557047, "body": "Your function returning a value of type <code>int</code> is missing its <code>return</code>.  Don&#39;t do that!  (The return type needs to be <code>void</code> for no <code>return</code> to be OK.)  But if you never use the return value, the return type <i>should</i> be <code>void</code>."}, {"owner": {"reputation": 1162, "user_id": 2167054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Yf0zx.jpg?s=128&g=1", "display_name": "dodgethesteamroller", "link": "https://stackoverflow.com/users/2167054/dodgethesteamroller"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1431560618, "post_id": 30226055, "comment_id": 48557725, "body": "@ouah: File-scope variables and global variables are not the same."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 1162, "user_id": 2167054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Yf0zx.jpg?s=128&g=1", "display_name": "dodgethesteamroller", "link": "https://stackoverflow.com/users/2167054/dodgethesteamroller"}, "edited": false, "score": 0, "creation_date": 1431561763, "post_id": 30226055, "comment_id": 48558043, "body": "@dodgethesteamroller C has no global variable, when one says global variable he is usually referring to a variable defined at file-scope with external linkage. By not mentioning the linkage, I&#39;m implicitly also including file-scope variables with internal linkage as a beast to avoid."}, {"owner": {"reputation": 1162, "user_id": 2167054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Yf0zx.jpg?s=128&g=1", "display_name": "dodgethesteamroller", "link": "https://stackoverflow.com/users/2167054/dodgethesteamroller"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1431619145, "post_id": 30226055, "comment_id": 48584989, "body": "@ouah In 20-something years of C programming I have always heard variables declared with <code>extern</code> referred to as &quot;global.&quot;  File-scope variables are admittedly semantically a different beast, but arguably their use is <i>more</i> often justified since they can facilitate a crude kind of <a href=\"http://c2.com/cgi/wiki?LexicalClosure\" rel=\"nofollow noreferrer\">closure</a>."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1431558187, "post_id": 30226128, "comment_id": 48557074, "body": "Why not <code>int sum = example(a, b);</code> or even <code>printf(&quot;...&quot;, example(a, b), a);</code>?"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1431555389, "creation_date": 1431555389, "answer_id": 30226128, "question_id": 30226055, "link": "https://stackoverflow.com/questions/30226055/passing-by-reference-or-use-global-variable-in-c/30226128#30226128", "title": "Passing by reference or use global variable in C", "body": "<p>In this particular case, the best thing to do is</p>\n\n<pre><code>int example(int a, int b) \n {\n    return a + b;\n }\n\n\nint main(void)\n {\n    int a, b;\n\n    printf(\"Tell me the value of A and B: \\n\");\n    if (scanf(\"%d%d\", &amp;a, &amp;b) == 2) /* Avoid Undefined Behavior */\n     {\n        int sum;\n\n        sum = example(a, b);\n        printf(\"The result: %d . And the new value of A: %d\\n\", sum, a);    \n        printf(\"THE END\\n\");\n     }\n    return 0;\n }\n</code></pre>\n\n<p>Of course, no real life program would have such function.</p>\n\n<p>If the function is only modifying a <code>int</code> that is one more reason to avoid global variables, since you can return it from the function, and if it's a more complex situation, then you can return <code>structs</code> as well, and in the case it doesn't fit your needs you can pass/return pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 3, "last_activity_date": 1431557551, "creation_date": 1431557551, "answer_id": 30226520, "question_id": 30226055, "link": "https://stackoverflow.com/questions/30226055/passing-by-reference-or-use-global-variable-in-c/30226520#30226520", "title": "Passing by reference or use global variable in C", "body": "<p>The problem with a global variable is that there is only one. Once your code gets a bit more complicated, and starts using multiple threads, you run into the problem that there is only one global variable, and if the function is called from two threads, there is trouble because both calls use the some global variable. </p>\n\n<p>Another problem with a global variable is that it needs a unique name. You called yours \"sum\". What are the chances that some time from now you will have other functions that add numbers and try to store them into a variable named sum? Again, you are in deep trouble. And if you manage to use different variable names, what are the chances that you pick the wrong one? </p>\n\n<p>Use of global variables should be really limited. Use them only for things that are truly global, that is where it doesn't make any sense to ever have two in your application. </p>\n"}, {"tags": [], "owner": {"reputation": 1162, "user_id": 2167054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Yf0zx.jpg?s=128&g=1", "display_name": "dodgethesteamroller", "link": "https://stackoverflow.com/users/2167054/dodgethesteamroller"}, "is_accepted": true, "score": 6, "last_activity_date": 1431562719, "last_edit_date": 1495541196, "creation_date": 1431560006, "answer_id": 30226899, "question_id": 30226055, "link": "https://stackoverflow.com/questions/30226055/passing-by-reference-or-use-global-variable-in-c/30226899#30226899", "title": "Passing by reference or use global variable in C", "body": "<p>I find it helps to think of global variables as existing in a sort of special space outside the normal hierarchy of functions in a C program.  If you drew a diagram with each function in a box, and lines between the boxes showing which function calls which others during the execution of the program, <code>main()</code> would be at the top (because it has no callers), and all other functions would appear below <code>main()</code> on one level or another, with lines leading to other functions above them.</p>\n\n<p>Most data lives within only one function--inside a single box in the diagram.  Some is passed from one function to another: most parameters and return values in a language like C would fit in this category.  But global variables are \"outside all the boxes\"--in a place where any function can see and change them, and this \"openness\" makes them very dangerous--if any code in any function can change them, then it's very hard for you, or for other programmers working on the same code, once it gets to real-world size, to keep track of all the possible places where that global data could be changed.  (This is the problem of \"mutable state\" that is common to programming languages in general, not just C, and which object-oriented and functional programming paradigms address to some extent.)</p>\n\n<p>In your example, just the fact that you are asking the question</p>\n\n<blockquote>\n  <p>Which one is better if I want to modify\n  the value into a function and bring it back\n  to the main? </p>\n</blockquote>\n\n<p>is a clue that this particular value should not be stored in a global variable.  You have already conceptualized this particular piece of data as something that is shared between just two functions, <code>main()</code> and <code>example()</code>.  Following the reasoning I gave above, that implies that the variable should be, if possible, passed as a parameter to <code>example()</code>, and then returned to <code>main()</code> via the <code>return</code> at the end of <code>example()</code>.  Passing a pointer to <code>a</code> into <code>example()</code>, then modifying <code>a</code> inside <code>example()</code>, so that the change to <code>a</code> persists after control returns to the caller, is a perfectly ordinary idiom in C.  But it needs to be documented carefully which parameters are subject to modification in this way, or else you quickly get into a situation like that with global data, only not quite as bad, where it's hard to keep track of where <code>a</code> might change and what it might change to.</p>\n\n<p>This isn't to say that globals are all bad.  They exist for a reason.  If many parts of your code need read/write access to the same data, and efficiency is important, then globals may be the best way to accomplish that.  In the environments where C code is most often run these days--\"close to the metal,\" in embedded systems or driver code--there are often hardware resources such as registers or special-purpose memory that can most efficiently be accessed through a large set of globals.  Or in some programs you might have a lot of state to keep track of--a whole set of variables whose values affect behavior throughout the program--and passing those values around is not just inefficient but makes the program <em>less</em> clear because you have the same set of many parameters being passed in to a large number of functions.  (The classic example of this is a game, where the current state of the game world, the player's position, number of lives, etc. is relevant in some way to a majority of the code.)   Even in these cases it's crucial that global variables be documented and named well so that they don't conflict with other similarly named locals or function parameters.</p>\n\n<p>For a more advanced but related topic, see <a href=\"https://stackoverflow.com/a/1433226/2167054\">this answer</a> for a brief explanation, or <a href=\"http://www.thegeekstuff.com/2012/08/c-static-variables-functions/\" rel=\"nofollow noreferrer\">this page</a> for a longer discussion, of how the scope (i.e., visibility) of a global in C can be restricted to a single source file with the <code>static</code> keyword, or shared across multiple files.  This gives more fine-grained control over the accessibility of the global data and can help to alleviate some of the concerns with the free use of globals that I mention above.</p>\n"}], "owner": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6183, "favorite_count": 2, "accepted_answer_id": 30226899, "answer_count": 3, "score": 3, "last_activity_date": 1431562719, "creation_date": 1431555027, "question_id": 30226055, "link": "https://stackoverflow.com/questions/30226055/passing-by-reference-or-use-global-variable-in-c", "title": "Passing by reference or use global variable in C", "body": "<p>Which one is better if I want to modify the value into a function and bring it back to the main? And by saying passing by reference in C, I mean using pointers, like this example. Should I put 'a' as a global variable?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint sum;\n\nint example(int *a,int b)\n{\n    sum = *a + b;\n    (*a)++;\n}\n\nint main(void)\n{\n    int a, b;\n    printf(\"Tell me the value of A and B: \\n\");\n    scanf(\"%d %d\", &amp;a, &amp;b);\n    example(&amp;a, b);\n    printf(\"The result: %d . And the new value of A: %d\", sum, a);\n\n    printf(\"\\n\\nTHE END\\n\");\n    getch();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "edited": false, "score": 0, "creation_date": 1431554959, "post_id": 30226013, "comment_id": 48555964, "body": "The error message will include a line number. If you don&#39;t know how to find the line number in the error message, please include the <i>complete</i> error message in your question."}], "answers": [{"tags": [], "owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "is_accepted": true, "score": 2, "last_activity_date": 1431554977, "creation_date": 1431554977, "answer_id": 30226047, "question_id": 30226013, "link": "https://stackoverflow.com/questions/30226013/makefile-error-on-c-program-expected-before-token/30226047#30226047", "title": "Makefile error on C program &quot;expected \u2018)\u2019 before \u2018{\u2019 token&quot;", "body": "<pre><code>if  ( ( outfile = open(test2,O_WRONLY|O_CREAT|O_TRUNC,PERM ) == -1)\n    ^ 2               1                                    1      2 \n</code></pre>\n\n<p>As you can see this parenthesis is unmatched. </p>\n"}], "owner": {"reputation": 3, "user_id": 4470961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb16edb0352bd88dbcc77f402b23daa?s=128&d=identicon&r=PG&f=1", "display_name": "aron_aluv", "link": "https://stackoverflow.com/users/4470961/aron-aluv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 30226047, "answer_count": 1, "score": -1, "last_activity_date": 1431554977, "creation_date": 1431554813, "question_id": 30226013, "link": "https://stackoverflow.com/questions/30226013/makefile-error-on-c-program-expected-before-token", "title": "Makefile error on C program &quot;expected \u2018)\u2019 before \u2018{\u2019 token&quot;", "body": "<p>I get an error when I try to make the Makefile on the following C program. </p>\n\n<pre><code>int main()\n{\n    char  filename_src[101], filename_dest[101];\n\n    printf(\"\\nSource file: \");\n    gets_s(filename_src, 100);\n\n    printf(\"\\nDestination filename: \");\n    gets_s(filename_dest, 100);\n\n    if(copy_file(filename_src, filename_dest) == 0)\n        printf(\"Copy Successful\\n\");\n    else\n        fprintf(stderr, \"Error during copy!\");\n\n    copyfile( filename_src, filename_dest );\n}\n\nint copyfile( const char *test1, const char *test2 )\n{\n    int infile, outfile;\n    ssize_t nread;\n    char buffer[BUFSIZE];\n\n    if( ( infile = open(test1, O_RDONLY) ) == -1 )\n      return (-1);\n\n    if( ( outfile = open(test2,O_WRONLY|O_CREAT|O_TRUNC,PERM ) == -1)\n    {\n        close(infile);\n        return (-2);\n    }\n    /* now read from test1 BUFSIZE chars at a time*/\n    while( (nread = read(infile, buffer, BUFSIZE) ) &gt; 0)\n    {\n        /*write buffer to output file*/\n        if( write(outfile, buffer, nread) &lt; nread )\n        {\n            close(infile);\n            close(outfile);\n            return (-3);        /*write error*/\n        }\n    }\n\n    close(infile);\n    close(outfile);\n\n    if( nread == -1 )\n      return (-4);              /*error on last read*/\n\n    else\n      return (0);               /*all is well */\n}\n</code></pre>\n\n<p>This is my C program. I get the error \"expected \u2018)\u2019 before \u2018{\u2019 token\" when I try to make the Makefile on terminal. Can anyone tell me where the problem in my code is?</p>\n\n<p>Thank you </p>\n"}, {"tags": ["c", "opengl", "freetype", "glteximage2d"], "comments": [{"owner": {"reputation": 2357, "user_id": 35223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef422bc23f451742a7ad43444c7a527a?s=128&d=identicon&r=PG", "display_name": "Klathzazt", "link": "https://stackoverflow.com/users/35223/klathzazt"}, "edited": false, "score": 0, "creation_date": 1431788885, "post_id": 30225863, "comment_id": 48652948, "body": "You may be interested to use this library: <a href=\"https://code.google.com/p/freetype-gl/\" rel=\"nofollow noreferrer\">code.google.com/p/freetype-gl</a>"}, {"owner": {"reputation": 105, "user_id": 4897238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8416cf6a359a09305562d31746645e64?s=128&d=identicon&r=PG&f=1", "display_name": "zonn", "link": "https://stackoverflow.com/users/4897238/zonn"}, "reply_to_user": {"reputation": 2357, "user_id": 35223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef422bc23f451742a7ad43444c7a527a?s=128&d=identicon&r=PG", "display_name": "Klathzazt", "link": "https://stackoverflow.com/users/35223/klathzazt"}, "edited": false, "score": 0, "creation_date": 1432155580, "post_id": 30225863, "comment_id": 48812231, "body": "Thank you, it looks a good library but do you now how I can get the mingw version because I never tried to compile any library ?"}, {"owner": {"reputation": 105, "user_id": 4897238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8416cf6a359a09305562d31746645e64?s=128&d=identicon&r=PG&f=1", "display_name": "zonn", "link": "https://stackoverflow.com/users/4897238/zonn"}, "reply_to_user": {"reputation": 2357, "user_id": 35223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef422bc23f451742a7ad43444c7a527a?s=128&d=identicon&r=PG", "display_name": "Klathzazt", "link": "https://stackoverflow.com/users/35223/klathzazt"}, "edited": false, "score": 0, "creation_date": 1432737106, "post_id": 30225863, "comment_id": 49049471, "body": "I finelly found, just replace a function : FT_Load_Char -&gt; FT_Load_Glyph"}], "owner": {"reputation": 105, "user_id": 4897238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8416cf6a359a09305562d31746645e64?s=128&d=identicon&r=PG&f=1", "display_name": "zonn", "link": "https://stackoverflow.com/users/4897238/zonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1431788711, "creation_date": 1431554185, "last_edit_date": 1431788711, "question_id": 30225863, "link": "https://stackoverflow.com/questions/30225863/freetype-2-with-opengl", "title": "FreeType 2 with OpenGL", "body": "<p>I trying to use FreeType2 with OpenGL and I can only write the spanish interogation mark when I write something. Here is the loop where I load all the glyphs :</p>\n\n<pre><code>for(uint i = ' '; i &lt;= '~'; i++)\n{\n    FT_Glyph glyph;\n    u32 index = FT_Get_Char_Index(font-&gt;face, i);\n\n    if(FT_Load_Char(font-&gt;face, index, FT_LOAD_RENDER))\n        continue;\n\n    if(FT_Get_Glyph(font-&gt;face-&gt;glyph, &amp;glyph))\n        continue;\n\n    if(font-&gt;face-&gt;glyph-&gt;format != FT_GLYPH_FORMAT_BITMAP &amp;&amp; FT_Glyph_To_Bitmap(&amp;glyph, FT_RENDER_MODE_NORMAL, NULL, 1))\n        continue;\n\n    u32 w = font-&gt;face-&gt;glyph-&gt;bitmap.width, h = font-&gt;face-&gt;glyph-&gt;bitmap.rows;\n    u8* px = (u8*) malloc(w * h * 4 * sizeof(u8));\n\n    if(!px)\n    {\n        ENG_AddError(ENGER_ALLOC);\n        end = &amp;&amp;END_ERR_0;\n        break;\n    }\n\n    for(uint y = 0; y &lt; h; y++)\n    {\n        for(uint x = 0; x &lt; w; x++)\n        {\n            for(u8 off = 0; off &lt; 4; off++)\n                px[(x + y * w) * 4 + off] = font-&gt;face-&gt;glyph-&gt;bitmap.buffer[x + y * w];\n        }\n    }\n\n    u32 tex;\n    glGenTextures(1, &amp;tex);\n    glBindTexture(GL_TEXTURE_2D, tex);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, w, h, 0, GL_RGBA, GL_UNSIGNED_BYTE, px);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    FT_Done_Glyph(glyph);\n    free(px);\n    font-&gt;glyph_tex[i] = tex;\n    font-&gt;coord[i].x = w;\n    font-&gt;coord[i].y = h;\n    font-&gt;coord[i].w = font-&gt;face-&gt;glyph-&gt;advance.x &gt;&gt; 6;\n    font-&gt;coord[i].h = font-&gt;face-&gt;glyph-&gt;metrics.horiBearingY &gt;&gt; 6;\n}\n</code></pre>\n\n<p>and to display :</p>\n\n<pre><code>uint len = strlen(str);\n\nfor(const char* ptr = str; len--; ptr++)\n{\n    uint w = font-&gt;coord[(u32) *ptr].x;\n    uint h = font-&gt;coord[(u32) *ptr].y;\n    ENG_ArrayVertex px[] = { x, y,  x + w, y,  x + w, y + h,  x, y,  x, y + h,  x + w, y + h };\n    ENG_ArrayTextureCoord texcoord[12];\n    texcoord[0] = 0.0;\n    texcoord[1] = 0.0;\n    texcoord[2] = 1.0;\n    texcoord[3] = 0.0;\n    texcoord[4] = 1.0;\n    texcoord[5] = 1.0;\n    texcoord[6] = 0.0;\n    texcoord[7] = 0.0;\n    texcoord[8] = 0.0;\n    texcoord[9] = 1.0;\n    texcoord[10] = 1.0;\n    texcoord[11] = 1.0;\n    ENG_VRAMAddr* addr = ENG_AllocVRAM(24 * sizeof(ENG_ArrayVertex), ENG_VRAM_UPDATE_RARELY);\n    ENG_VRAMUse(addr);\n    ENG_VRAMSend(ENG_ArrayVertex, 0, 12, px);\n    ENG_VRAMSend(ENG_ArrayVertex, 12 * sizeof(ENG_ArrayVertex), 12, texcoord);\n    ENG_VRAMUse(NULL);\n    ENG_VRAMFuncList* flist = ENG_AllocVRAMFuncList();\n    ENG_VRAMFuncListUse(flist);\n    ENG_VRAMUse(addr);\n    ENG_SetVRAMID(0, ENG_SHADER_ID_VERTEX, 2, px);\n    ENG_SetVRAMID(12 * sizeof(ENG_ArrayVertex), ENG_SHADER_ID_TEXTURE_COORD, 2, texcoord);\n    ENG_ArrayEnable(ENG_SHADER_ID_VERTEX);\n    ENG_ArrayEnable(ENG_SHADER_ID_TEXTURE_COORD);\n    glBindTexture(GL_TEXTURE_2D, font-&gt;glyph_tex[(u16) *ptr]);\n\n    ENG_ShaderUse(ENG_GetConfigShaderTexture(ENG_GetGlobConfig()));\n        ENG_ShaderSendMatrix(ENG_GetConfigShader(ENG_GetGlobConfig()), \"scale\", ENG_GetConfigMatrixOrtho(ENG_GetGlobConfig()));\n        ENG_ArrayDraw(ENG_ARRAY_DRAW_TRIANGLES, 0, 6);\n    ENG_ShaderUse(NULL);\n\n    ENG_VRAMFuncListUse(NULL);\n    ENG_VRAMUse(NULL);\n    ENG_FreeVRAMFuncList(flist);\n    ENG_FreeVRAM(addr);\n    x += w;\n}\n</code></pre>\n\n<p>I use the C language on Windows 8.1 ( if you know the way we can make a portable program, I'd rather ).</p>\n"}, {"tags": ["c", "string", "pointers", "freeze", "strcat"], "comments": [{"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1431554409, "post_id": 30225860, "comment_id": 48555713, "body": "You need to allocate memory for the <code>resources</code> field of the ReqInfo struct, so you would write <code>char resource[MAXRESOURCE]</code> (or allocate it with malloc) Same for the <code>root</code> variable that you declared."}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 2, "last_activity_date": 1431554344, "creation_date": 1431554344, "answer_id": 30225907, "question_id": 30225860, "link": "https://stackoverflow.com/questions/30225860/under-what-circumstances-if-ever-does-strcat-hang/30225907#30225907", "title": "Under what circumstances (if ever) does strcat() hang?", "body": "<p>Invoking <em>undefined behaviour</em> could in principle cause anything, which includes hanging your program. You invoke undefined behaviour when you pass a pointer to a string literal as the destination of <code>strcat</code>.</p>\n\n<pre><code>// root points to a string literal. This is immutable!\nchar* root = \"/home/OS/homework/user/honorsupgrade/HTML\";\n\n....\n\n// Oops! Writing to *root is undefined behaviour!\nstrcat(root, requestInfo-&gt;resource);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": false, "score": 1, "last_activity_date": 1431554358, "creation_date": 1431554358, "answer_id": 30225911, "question_id": 30225860, "link": "https://stackoverflow.com/questions/30225860/under-what-circumstances-if-ever-does-strcat-hang/30225911#30225911", "title": "Under what circumstances (if ever) does strcat() hang?", "body": "<p>You are attempting to modify a <em>constant</em> string. The statement</p>\n\n<pre><code>char* root = \"/home/OS/homework/user/honorsupgrade/HTML\";\n</code></pre>\n\n<p>sets up the <code>root</code> pointer to point to the <em>constant</em> string containing your path. The memory pointed to by <code>root</code> must not be modified, and to do so invokes <em>undefined behaviour</em>. The call to <code>strcat()</code> attempts to modify data past the end of the constant string data. It sounds like the compiler put something important there, and you overwrote it.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1431554428, "creation_date": 1431554428, "answer_id": 30225931, "question_id": 30225860, "link": "https://stackoverflow.com/questions/30225860/under-what-circumstances-if-ever-does-strcat-hang/30225931#30225931", "title": "Under what circumstances (if ever) does strcat() hang?", "body": "<p>Attempting to write to <code>const char *</code></p>\n\n<p>Even though <code>char* root</code> is a <code>char *</code>, it really points to a <code>const char *</code>. And writing to that is undefined behavior.</p>\n\n<pre><code>char* root = \"/home/OS/homework/user/honorsupgrade/HTML\";\n....\nstrcat(root, requestInfo-&gt;resource);\n</code></pre>\n\n<p>Code should  allocate a right sized working buffer instead.</p>\n\n<pre><code>char buffer[1000];\nstrcpy(buffer, root);\nstrcat(buffer, requestInfo-&gt;resource);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 179, "user_id": 4879760, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gD6oAUBpmxo/AAAAAAAAAAI/AAAAAAAACdE/O5QaMethoM4/photo.jpg?sz=128", "display_name": "Radoslaw Garbacz", "link": "https://stackoverflow.com/users/4879760/radoslaw-garbacz"}, "is_accepted": false, "score": 0, "last_activity_date": 1431556524, "creation_date": 1431556524, "answer_id": 30226346, "question_id": 30225860, "link": "https://stackoverflow.com/questions/30225860/under-what-circumstances-if-ever-does-strcat-hang/30226346#30226346", "title": "Under what circumstances (if ever) does strcat() hang?", "body": "<p>In C the programmer controls and is responsible for memory allocation.</p>\n\n<p>The code you provided will have an undefined behaviour, because you ask \"strcat\" (see \"man strcat\") to copy something into a place, which is not reserved (the end of memory occupied by a string pointed by 'root').</p>\n\n<p>It is hard to say what you really want to do, but just to avoid the crash you should either:</p>\n\n<pre><code>char[&lt;static_buffer_lenght&gt;] root = ...\n...\nstrncat(root, &lt;something&gt;, sizeof(root) - strlen(root) - 1)\n</code></pre>\n\n<p>which will make your program slightly bigger, or:</p>\n\n<pre><code>char *root = (char *)malloc(&lt;size_of_dynamic_buffer&gt;)\nbzero((void *)root, &lt;size_of_dynamic_buffer&gt;)\nif (!root) { &lt;handle memory error here&gt; }\n...\nstrncat(root, &lt;something&gt;, &lt;size_of_dynamic_buffer&gt; - strlen(root) - 1)\n</code></pre>\n\n<p>which will make your program slightly slower</p>\n\n<p>Have not used 'C' for a while, so some details can cause compilation warnings (anything within '&lt;','>' you have to replace with proper text - of course).</p>\n"}], "owner": {"reputation": 481, "user_id": 1519665, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/70d53d28ad23685904e4d39c792d1184?s=128&d=identicon&r=PG", "display_name": "user1519665", "link": "https://stackoverflow.com/users/1519665/user1519665"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 30225931, "answer_count": 4, "score": 1, "last_activity_date": 1431556524, "creation_date": 1431554154, "last_edit_date": 1431554565, "question_id": 30225860, "link": "https://stackoverflow.com/questions/30225860/under-what-circumstances-if-ever-does-strcat-hang", "title": "Under what circumstances (if ever) does strcat() hang?", "body": "<p>I have this code in a function in C:</p>\n\n<pre><code>char* root = \"/home/OS/homework/user/honorsupgrade/HTML\";\nrequestInfo-&gt;resource = \"/bing\"\nprintf(\"1\\n\");\nint counter = 0;\nfor(counter = 0; counter &lt; 100; counter++)\n{\n    if(root[counter] == '\\0')\n    {\n        printf(\"True1\\n\");\n        break;\n    }\n}\nfor(counter = 0; counter &lt; 100; counter++)\n{\n    if(requestInfo-&gt;resource[counter] == '\\0')\n    {\n        printf(\"True2\\n\");\n        break;\n    }\n}\nprintf(\"2\\n\");\nfflush(stdout);\nstrcat(root, requestInfo-&gt;resource);\nprintf(\"3\\n\");\nfflush(stdout);\nreturn open(root, 0_RDONLY);\n</code></pre>\n\n<p>...</p>\n\n<p>Request Info's stuff, as needed</p>\n\n<pre><code>struct ReqInfo\n{\n    char *resource;\n}\n</code></pre>\n\n<p>I have created two string (character pointers) in C, but for some reason when I pass these methods to strcat(), strcat() never returns.  This causes the program to hang.  I have tested to ensure that both strings have null terminators (so strcat isn't trying to concatenate more than it should).  The program will print 1 and 2, but never print 3, meaning it never gets past the strcat() call, as I am flushing the buffer to make sure that there isn't a problem there. \\</p>\n\n<p>EDIT: I've created the struct outside of this block of code, I'm getting the same issues when replacing \"requestInfo->resource\" with a char* resource and making it \"/bing\" </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 1, "creation_date": 1431553731, "post_id": 30225724, "comment_id": 48555417, "body": "What is the error you see?"}, {"owner": {"reputation": 179, "user_id": 2898281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP3VV.png?s=128&g=1", "display_name": "pb.", "link": "https://stackoverflow.com/users/2898281/pb"}, "reply_to_user": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1431553872, "post_id": 30225724, "comment_id": 48555464, "body": "I don&#39;t see proper results, it ommits 2 and 3 :("}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1431554056, "post_id": 30225724, "comment_id": 48555552, "body": "Your problem is the curly brackets of the last <code>for</code>. It&#39;s only meant to loop around the next <code>if</code>, not the last one. (<code>if(isPrime)</code> should be outside of the <code>for</code> scope)"}, {"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 0, "creation_date": 1431554081, "post_id": 30225724, "comment_id": 48555560, "body": "Your issue is adding a set of {} that aren&#39;t in the original. <code>for (div = 2, numIsPrime = true; (div * div) &lt;= num; div++)</code> just calls the first <code>if(num %div ==0)</code> and not the second print for is prime."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 2, "last_activity_date": 1431554085, "creation_date": 1431554085, "answer_id": 30225844, "question_id": 30225724, "link": "https://stackoverflow.com/questions/30225724/please-help-me-find-error-program-which-shows-prime-numbers/30225844#30225844", "title": "Please help me find error - program which shows prime numbers", "body": "<p>You added brackets on your inner loop.</p>\n\n<p>Your code is</p>\n\n<pre><code>for(num=2; num &lt;= limit; num++){\n    for(div=2, isPrime = true; div * div &lt;=num; div++){\n        if(num % div == 0)\n        {\n            isPrime = false;\n        }\n        if(isPrime)\n        {\n            printf(\"%d is prime \\n\",num);\n        }\n    }\n}\n</code></pre>\n\n<p>while the original with explicit brackets added is</p>\n\n<pre><code>for (num = 2; num &lt;= limit; num++)\n{\n    for (div = 2, numIsPrime = true; div * div &lt;= num; div++)\n    {\n        if (num % div == 0)\n        {\n            numIsPrime = false;\n        }\n    }\n    if (numIsPrime)\n    {\n        printf(\"%d is prime.\\n\", num);\n    }\n}\n</code></pre>\n\n<p>Your second <code>if</code> is inside the inner loop; in the original it is outside.</p>\n"}], "owner": {"reputation": 179, "user_id": 2898281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP3VV.png?s=128&g=1", "display_name": "pb.", "link": "https://stackoverflow.com/users/2898281/pb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 30225844, "answer_count": 1, "score": -2, "last_activity_date": 1431721430, "creation_date": 1431553586, "last_edit_date": 1431553908, "question_id": 30225724, "link": "https://stackoverflow.com/questions/30225724/please-help-me-find-error-program-which-shows-prime-numbers", "title": "Please help me find error - program which shows prime numbers", "body": "<p>I am learning C , could you help me find the error in my program? \nI retyped code from the book and still I don't know where is my mistake.\nI tried to use <a href=\"https://www.diffchecker.com/diff\" rel=\"nofollow\">https://www.diffchecker.com/diff</a> but I don't see any logical difference. I give up.\nCould you help me?</p>\n\n<p>My code:</p>\n\n<pre><code>//ex7_9.c\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main(void){\n\n    int num;\n    int limit;\n    int div;\n    bool isPrime;\n\n    printf(\"Please insert your number: \");\n    while((scanf(\"%d\", &amp;limit) == 1) &amp;&amp; limit &gt; 0){\n        if(limit &gt; 1)\n            printf(\"Here are prime numbers up to %d limit\\n\", limit);\n        else\n            printf(\"Change limit - to bigger than one\\n\");\n\n        for(num=2; num &lt;= limit; num++){\n            for(div=2, isPrime=true; (div*div) &lt;=num; div++){\n\n                if(num % div ==0)\n                    isPrime = false;\n\n                if(isPrime)\n                    printf(\"%d is prime \\n\",num);\n\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>proper code:</p>\n\n<pre><code>//ex7_9.c\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main(void){\n\n    int limit;\n    int num;\n    int div;\n    bool numIsPrime;\n\n    printf(\"Enter a positive integer: \");\n    while (scanf(\"%d\", &amp;limit) == 1 &amp;&amp; limit &gt; 0){\n        if (limit &gt; 1)\n            printf(\"Here are the prime numbers up through %d\\n\", limit);\n        else\n            printf(\"No primes.\\n\");\n        for (num = 2; num &lt;= limit; num++)\n        {\n            for (div = 2, numIsPrime = true; (div * div) &lt;= num; div++)\n                if (num % div == 0)\n                    numIsPrime = false;\n            if (numIsPrime)\n                printf(\"%d is prime.\\n\", num);\n        }\n        printf(\"Enter a positive integer (q to quit): \");\n    }\n    printf(\"Done!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>results from my code:</p>\n\n<pre><code>Please insert your number: 10\nHere are prime numbers up to 10 limit\n5 is prime \n7 is prime \n9 is prime \n</code></pre>\n"}, {"tags": ["c", "linux", "hex"], "comments": [{"owner": {"reputation": 58628, "user_id": 227267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b03410a67ad6b9cf3fce7b0bf45084c8?s=128&d=identicon&r=PG", "display_name": "Matti Virkkunen", "link": "https://stackoverflow.com/users/227267/matti-virkkunen"}, "edited": false, "score": 0, "creation_date": 1431552357, "post_id": 30225423, "comment_id": 48554812, "body": "Is there a reason you&#39;re not just talking in plain bytes instead of hex strings?"}, {"owner": {"reputation": 10428, "user_id": 3135317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e914266956f4052eef356be7850ea49?s=128&d=identicon&r=PG&f=1", "display_name": "FoggyDay", "link": "https://stackoverflow.com/users/3135317/foggyday"}, "edited": false, "score": 0, "creation_date": 1431552544, "post_id": 30225423, "comment_id": 48554906, "body": "Your output is printing &quot;0&quot;, &quot;2&quot;, &quot;1&quot;, &quot;2F&quot; and &quot;2&quot;. Looks OK to me :)  If you want it to print &quot;0x02&quot; instead of &quot;2&quot;, change your format specifier to &quot;0x%02x&quot;."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1431552694, "post_id": 30225423, "comment_id": 48554974, "body": "If you want to send this data as a text encoding, <i>you</i> need to provide the encoding to know how to reassemble them on reception. A leading <code>&#39;0&#39;</code> char for anything less than <code>0x10</code> (16) and ensuring the receiver pulls the chars two-per-octet during reassembly will probably work for you. But I concur with Matti regardless. Just send the array content with a length-preamble and call it a day."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1431552911, "post_id": 30225423, "comment_id": 48555099, "body": "BTW: recommend sending prefix and postfix <code>char</code> with you message like &quot;!0002012F02\\n&quot;.  _Far_` easier to cope with scant, long, tardy or otherwise disturbed messages."}, {"owner": {"reputation": 8802, "user_id": 564226, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e8a2ee2c54e9853a2a4a391b77794d6?s=128&d=identicon&r=PG", "display_name": "JeffRSon", "link": "https://stackoverflow.com/users/564226/jeffrson"}, "edited": false, "score": 1, "creation_date": 1431553180, "post_id": 30225423, "comment_id": 48555206, "body": "I&#39;m not sure whether you want to transmit binary values (would be 5 bytes) or hexadecimal ascii string (would be 10 bytes, where eg. 0 becomes binary 0x3030). Could you clarify?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1431552703, "post_id": 30225446, "comment_id": 48554982, "body": "Note: if using <code>&quot;%02hhx&quot;</code>, code could used <code>unsigned char</code>, <code>char</code> or even <code>signed char</code>."}, {"owner": {"reputation": 10428, "user_id": 3135317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e914266956f4052eef356be7850ea49?s=128&d=identicon&r=PG&f=1", "display_name": "FoggyDay", "link": "https://stackoverflow.com/users/3135317/foggyday"}, "edited": false, "score": 0, "creation_date": 1431558047, "post_id": 30225446, "comment_id": 48557031, "body": "See also <a href=\"http://stackoverflow.com/questions/4586962/what-is-the-purpose-of-the-h-and-hh-modifiers-for-printf\">What is the purpose of the h and hh modifiers for printf?</a>.  My recommendation remains: just send a byte at a time (here, 5 characters), and only worry about &quot;0x%02x&quot; (or whatever format you prefer) when you want to <i>display</i> the bytes in the array."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 2, "last_activity_date": 1431552340, "creation_date": 1431552340, "answer_id": 30225446, "question_id": 30225423, "link": "https://stackoverflow.com/questions/30225423/send-hex-values-via-serial-port-in-c/30225446#30225446", "title": "send hex-values via serial port in C", "body": "<p>First declare your array as an <code>unsigned char</code> array. <code>char</code> can be signed or unsigned depending on the implementation and in your case you want the unsigned case.</p>\n\n<p>Then use:</p>\n\n<pre><code>   printf(\"%02hhx\", array[i]);\n</code></pre>\n\n<p>It will print a leading <code>0</code> if necessary:</p>\n\n<pre><code>0002012F02\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "is_accepted": false, "score": 0, "last_activity_date": 1431552362, "creation_date": 1431552362, "answer_id": 30225452, "question_id": 30225423, "link": "https://stackoverflow.com/questions/30225423/send-hex-values-via-serial-port-in-c/30225452#30225452", "title": "send hex-values via serial port in C", "body": "<p>The client prints your array in order of <code>i</code> as you loop, which is the order of your content in the array (unless im misunderstanding the question). If you're asking why its prints it in that order, that's because its the order you defined in the array and increment the array index one value at a time.</p>\n"}, {"tags": [], "owner": {"reputation": 1581, "user_id": 2848117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7uhq.png?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/2848117/dom"}, "is_accepted": false, "score": 0, "last_activity_date": 1431552646, "creation_date": 1431552646, "answer_id": 30225511, "question_id": 30225423, "link": "https://stackoverflow.com/questions/30225423/send-hex-values-via-serial-port-in-c/30225511#30225511", "title": "send hex-values via serial port in C", "body": "<p>The client will get the bytes in the exact order you send them. Which will be:</p>\n\n<pre><code>0x00\n0x02\n0x01\n0x2F\n0x02\n</code></pre>\n\n<p>Using a new line (\\n) and the %02x suggested by ouah together it will be easier to see. Right now it's not clear because all the information is lumped together.</p>\n\n<pre><code>printf(\"%02x\\n\", *(array+i));\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2502, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1431552646, "creation_date": 1431552209, "question_id": 30225423, "link": "https://stackoverflow.com/questions/30225423/send-hex-values-via-serial-port-in-c", "title": "send hex-values via serial port in C", "body": "<p>i have some problems to understand the following:</p>\n\n<p>I will implement a real small protocol in C. For negotiation server and client have to exchange information via hex values.</p>\n\n<p>When I answer the request from the client I send following array:</p>\n\n<pre><code>char array[] = { 0x00, 0x02, 0x01, 0x2F, 0x02 }\n</code></pre>\n\n<p>The calculated length with sizeof(array) is 5.\nFor debugging purposes I did a printf of the array.</p>\n\n<pre><code>for( i = 0; i &lt; length; i++ ){\n    printf(\"%x\", *(array + i));\n}\n</code></pre>\n\n<p>The output is 0212F2. How the client knows which values belongs together?\nThere are more possiblities, aren't there? \nMaybe 0x00, 0x21, 0x02, 0x0F, 0x02, but that is not correct.</p>\n\n<p>Can someone explain this?</p>\n\n<p>Thanks a lot:)</p>\n\n<p>Florian</p>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1431552007, "post_id": 30225208, "comment_id": 48554611, "body": "(1) Source code can change depending on the order of the included files. Think about the order of #define(s) and/or #ifdef(s) for example."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1431552063, "post_id": 30225208, "comment_id": 48554647, "body": "Each one of these questions, alone, would be a good question here.  Some or all might be duplicates.  I think you&#39;re limiting the answers you get by asking for &quot;an answer&quot; to a large bundle of questions.  I predict mostly comments here choosing one question to answer."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1431552136, "post_id": 30225208, "comment_id": 48554686, "body": "From what you&#39;ve shown, most of your confusion regarding how VS pch works is covered by the <a href=\"https://msdn.microsoft.com/en-us/library/szfdksca.aspx\" rel=\"nofollow noreferrer\">documention by MS</a>. The fundamental purpose of PCH is to precompile that which is used by your project <b>and</b> has very low or ideally <b>no</b> volatility. Project-defined headers generally do <i>not</i> fit into that category, while runtime library headers, 3rd-party headers, etc., generally <i>do</i>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1431552289, "post_id": 30225208, "comment_id": 48554770, "body": "I usually only include external header files for precompiling.  System header files, header files for prebuilt libraries etc."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1431552530, "post_id": 30225208, "comment_id": 48554898, "body": "(4) It&#39;s compiler specific. But can be cross-platform with a cross-platform compiler."}], "answers": [{"comments": [{"owner": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "edited": false, "score": 0, "creation_date": 1431555074, "post_id": 30225481, "comment_id": 48556022, "body": "So on my Q 2, am I understanding you correctly that the answer is basically yes, it does violate preferred encapsulation practices, due to the implementation / limitations of C/C++? i.e. Including header1.h and header2.h in the precompiled header in your example would result in both of those being included in both source files, even though it&#39;s only needed in the one."}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "reply_to_user": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "edited": false, "score": 1, "creation_date": 1431592310, "post_id": 30225481, "comment_id": 48567963, "body": "@cp.engr Yes, that is correct, you will pretty much always have extra stuff included that you do not need. Usually, this doesn&#39;t matter though.. For example, if you precompiled all of the C standard library headers, or even all of the <code>std</code> namespace, it wouldn&#39;t be a problem. On large projects, you likely have the files grouped somehow, for example &quot;encryption&quot; and &quot;image manipulation&quot;, and you can have a special precomp for each, if you don&#39;t want the headers mixing in."}], "tags": [], "owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "is_accepted": false, "score": 0, "last_activity_date": 1431553017, "last_edit_date": 1431553017, "creation_date": 1431552488, "answer_id": 30225481, "question_id": 30225208, "link": "https://stackoverflow.com/questions/30225208/c-c-precompiled-headers-encapsulation-how-to-and-why-is-config-required/30225481#30225481", "title": "C/C++ - precompiled headers - encapsulation, how to, and why is config required?", "body": "<blockquote>\n  <p>Why can't the compiler (or linker/IDE?) just have individual precompiled header object files, in the same way it does for the source files (i.e. .obj files)?</p>\n</blockquote>\n\n<p>The answer to 1 and 2 is in the way how precompiled headers work. Assume you have a <code>my_source_file.c</code>:</p>\n\n<pre><code>#include \"header1.h\"\n#include \"header2.h\"\n\nint func(int x) { return x+1; }\n</code></pre>\n\n<p><code>my_other_source_file.c</code>:</p>\n\n<pre><code>#include \"header1.h\"\n\nint func2(int x) { return x-1; } \n</code></pre>\n\n<p>When you call <code>compiler.exe my_source_file.c</code> the compiler starts parsing your file. All the internal variables of the compiler (things like which types have been defined, what variables declared, etc) are called the compiler state.</p>\n\n<p>After it has parsed <code>header1.h</code> it can save the state to the disk. Then, when compiling <code>my_other_source_file.c</code>, instead of parsing <code>header1.h</code> again, it can just load the state and continue.</p>\n\n<p>That state is a precompiled header. It is literally just a dump of all the compiler variables in the moment after it has parsed the entire header.</p>\n\n<p>Now, the question is why can't you have two state dumps, for <code>header1.h</code> and <code>header2.h</code> and just load them both.. Well, the states are not independent. The second file would be the state of <code>header1.h + header2.h</code>. So, what is usually done is you have one state which is after <em>all</em> the common header files have been compiled, and use that.</p>\n\n<p>In theory, you could have one for every combination and use the appropriate one, but that is much more hassle than it's worth.</p>\n\n<p>Some things that are side effects of how this is done:</p>\n\n<ul>\n<li><p>Different compilers (including even minor versions) have different variables, so you can't reuse the precomps.</p></li>\n<li><p>Since the dumped state started from the top of the file, your precomp must be the first include. There must be nothing that could influence the state (i.e. not #defines, typedefs, declarations) before including the precomp.</p></li>\n<li><p>Any defines passed by the command line (<code>-DMY_DEFINE=0</code>) will not be picked up in the precompiled header.</p></li>\n<li>Any defines passed by the command line while precompiling will be in effect for all source files that use the precomp.</li>\n</ul>\n\n<hr>\n\n<p>For 3), refer to MSFT <a href=\"https://msdn.microsoft.com/en-us/library/szfdksca.aspx\" rel=\"nofollow\">documentation</a>.</p>\n\n<p>For 4), most compilers support precompiled headers, and they generally work in the same way. You could configure your makefiles/build scripts to always precompile a certain header (e.g. <code>stdafx.h</code>) which would include all the other headers. As far as your source code goes, you'd always just <code>#include \"stdafx.h\"</code>, regardless of the platform.</p>\n"}, {"comments": [{"owner": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "edited": false, "score": 0, "creation_date": 1431563751, "post_id": 30225598, "comment_id": 48558595, "body": "&quot;It might increase coupling and dependencies by making some names available across all files, but in general, this is not a problem.&quot; Maybe &#39;breaking encapsulation&#39; wasn&#39;t optimal phrasing, but my point is that doing this exposes a whole bunch of stuff that YAGN[I]. Personally, I think it obfuscates where things are coming from, and makes it harder to keep a module tightly focused. (&quot;Module&quot; not in the language-specific sense; often consisting of a .c and a .h file.) Else, e.g. why not have one include file for the whole STL?"}, {"owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "reply_to_user": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "edited": false, "score": 0, "creation_date": 1431574858, "post_id": 30225598, "comment_id": 48561175, "body": "I&#39;d personally welcome an &quot;always available&quot; standard library, as long as it doesn&#39;t impact build time. Including 3rd-party headers in a pch might sound bad, but in general, it makes no difference. Coupling is important <i>within</i> your program, not with 3rd-party."}, {"owner": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "edited": false, "score": 0, "creation_date": 1431576013, "post_id": 30225598, "comment_id": 48561498, "body": "You&#39;re not addressing my points. You&#39;re saying it doesn&#39;t matter, but not explaining why. &quot;Coupling is important within your program, not with 3rd-party.&quot; How did you make that determination? On what basis do you differentiate?"}, {"owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "reply_to_user": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "edited": false, "score": 0, "creation_date": 1431576476, "post_id": 30225598, "comment_id": 48561597, "body": "Based on my experience and knowledge. How else? And it is hard to be verbose in comments. SO is not suited for chatting back in forth, so I&#39;ll edit my post in a few minutes with more information."}, {"owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "reply_to_user": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "edited": false, "score": 0, "creation_date": 1431578452, "post_id": 30225598, "comment_id": 48562142, "body": "@cp.engr I just added a rather long explanation. I hope you find it interesting."}], "tags": [], "owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "is_accepted": false, "score": 0, "last_activity_date": 1431578363, "last_edit_date": 1495542603, "creation_date": 1431552988, "answer_id": 30225598, "question_id": 30225208, "link": "https://stackoverflow.com/questions/30225208/c-c-precompiled-headers-encapsulation-how-to-and-why-is-config-required/30225598#30225598", "title": "C/C++ - precompiled headers - encapsulation, how to, and why is config required?", "body": "<blockquote>\n  <p>Why can't the compiler (or linker/IDE?) just have individual\n  precompiled header object files</p>\n</blockquote>\n\n<p>C and C++ have no concept of modules. The traditional compiler has a preprocessor phase (which may be invoked as a separate program) that will include the files and the whole thing will get compiled to intermediate code. The compiler per se does not see includes (or comments, or trigraphs, etc.).</p>\n\n<p>Add to this that the behaviour of a header file can change depending on the context in which it is included (think macros, for example) and you end up with either many precompiled versions of the same header, or an intermediate form that is basically the language itself.</p>\n\n<blockquote>\n  <p>Am I understanding correctly?</p>\n</blockquote>\n\n<p>Mostly. The actual name is irrelevant, as it can be specified in the project options. <code>stdafx.h</code> is a relic of the early development of MFC, which was originally named AFX (Application Framework eXtensions). The preprocessor also treats includes of the precompiled header differently, as they are not looked up in the include paths. If the name matches what is in the project settings, the <code>.pch</code> is used automatically.</p>\n\n<blockquote>\n  <p>Doesn't this break encapsulation</p>\n</blockquote>\n\n<p>Not really. Encapsulation is an object-oriented feature and has nothing to do with include files. It might increase coupling and dependencies by making some names available across all files, but in general, this is not a problem. Most includes in a precompiled header are standard headers or third-party libraries, that is, headers that may be large and fairly static.</p>\n\n<p>As an example, a project I'm currently working on includes GTK, standard headers, boost and various internal libraries. It can be assumed that these headers never change. Even if they changed once a day, I probably compile every minute or so on average, so it is more than worth it.</p>\n\n<p>The fact that all these names are available project-wide makes no difference. What would I gain by including <code>boost/tokenizer.hpp</code> in only one .cpp file? Perhaps some intellectual satisfaction of knowing that I can only use <code>boost::char_separator</code> in that particular file. But it certainly creates no problem. All these headers are part of a collection of utilities that my program can use. I am completely dependent on them, because I made a design decision early on to integrate them. I am tightly coupled with them by choice.</p>\n\n<p>However, this program needs to access system-specific graphical facilities, and it needs to be portable on (at least) Debian and Windows. Therefore, I centralized all these operations in two files: <code>windows.cpp</code> and <code>x11.cpp</code>. They both include their own <code>X11/Xlib.h</code> and <code>windows.h</code>. This makes sure I don't use non-portable stuff elsewhere (which would however quickly be caught as I keep switching back and forth) and it satisfies my obsession with design. In reality, they could have been in the precompiled header. It doesn't make much of a difference.</p>\n\n<p>Finally, none of the headers that are part of this specific program are in the precompiled header. <em>This</em> is where coupling and dependencies come into play. Reducing the number of available names forces you to think about design and architecture. If you try to use something and get an error saying that that name isn't declared, you don't blindly include the file. You stop and think: does it make sense for this name to be available here, or am I mixing up my user interface and data acquisition? It helps you separate the various parts of your program.</p>\n\n<p>It also serves as a \"compilation firewall\", where modifying a header won't require you to rebuild the whole thing. This is more of a language issue than anything else, but in practice, it's still damn useful.</p>\n\n<p>Trying to localize the GTK includes, for example, would not be helpful: all of my user interface uses it. I have no intention of supporting a different kind of toolkit. Indeed, I chose GTK because it was portable and I wouldn't have to port the interface myself.</p>\n\n<p>What would be the point of only including the GTK headers in the user interface files? Obviously, it will prevent me from using GTK in files where I don't need to. But this is not solving any problem. I'm not inadvertently using GTK in places I shouldn't. It only slows down my build time.</p>\n\n<blockquote>\n  <p>How do I utilize precompiled headers in Visual Studio</p>\n</blockquote>\n\n<p>This has been answered <a href=\"https://stackoverflow.com/a/4726838/4885801\">elsewhere</a>. If you need more help, I suggest you ask a new question, as this one is already pretty big.</p>\n\n<blockquote>\n  <p>Is there a cross-platform way to use or facilitate precompiled headers?</p>\n</blockquote>\n\n<p>A precompiled header is a feature provided by your compiler or build system. It is not inherently tied to a platform. If you are asking whether there is a portable way of using precompiled headers across compilers, then no. They are highly compiler-dependent.</p>\n"}], "owner": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1431578363, "creation_date": 1431551194, "question_id": 30225208, "link": "https://stackoverflow.com/questions/30225208/c-c-precompiled-headers-encapsulation-how-to-and-why-is-config-required", "title": "C/C++ - precompiled headers - encapsulation, how to, and why is config required?", "body": "<p>I understand the idea that precompiling headers can speed up build times, but there are a handful of questions that have thus far prevented me from grokking them.</p>\n\n<ol>\n<li><p>Why does using precompiled headers require the developer to configure anything?</p>\n\n<p>Why can't the compiler (or linker/IDE?) just have individual precompiled header object files, in the same way it does for the source files (i.e. .obj files)? Dependencies are indicated by which source/header files include which other files, and it can already detect when source files change, so a regular build is normally not a full rebuild. Instead of requiring me to specify which headers get precompiled, etc., why isn't this all just always automatically on, and transparent to the developer?</p></li>\n<li><p>As I understand the precompiled headers methodology in Visual Studio, the idea is that you get this one big header file (stdafx.h) that includes all the other header files that you want to be precompiled, and then you include that in all your source files that use any of those headers.</p>\n\n<p>a. Am I understanding correctly?</p>\n\n<p>b. Doesn't this break encapsulation? Often effectively including various (likely) unrelated items that you don't, which makes it harder to tell what libraries you're actually using, and what comes from where.</p>\n\n<p>It seems to me that this implementation forces bad practices. What am I missing?</p></li>\n<li><p>How do I utilize precompiled headers in Visual Studio (2013)?</p></li>\n<li><p>Is there a cross-platform way to use or facilitate precompiled headers?</p></li>\n</ol>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "string", "int", "scanf"], "comments": [{"owner": {"reputation": 849, "user_id": 2577320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1be068ba3a9367cc199787c1155c71?s=128&d=identicon&r=PG", "display_name": "Rein S", "link": "https://stackoverflow.com/users/2577320/rein-s"}, "edited": false, "score": 0, "creation_date": 1431551591, "post_id": 30225158, "comment_id": 48554425, "body": "<a href=\"http://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c\">This</a> question may help you get where you&#39;re needing to go."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1431551785, "post_id": 30225158, "comment_id": 48554524, "body": "for converting hex to string, see <a href=\"http://stackoverflow.com/a/24337143/3723423\">this SO answer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4897484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85f1a75e4743c7c151847591b3c99a6?s=128&d=identicon&r=PG&f=1", "display_name": "1234stella1234", "link": "https://stackoverflow.com/users/4897484/1234stella1234"}, "edited": false, "score": 0, "creation_date": 1431558394, "post_id": 30226403, "comment_id": 48557129, "body": "I was stuck for hours on this, thank you! I didn&#39;t realized that i had the string representation and not the values, so my efforts to solve this problem were in the wrong directions. Let me thank you again for the explanation."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11, "user_id": 4897484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85f1a75e4743c7c151847591b3c99a6?s=128&d=identicon&r=PG&f=1", "display_name": "1234stella1234", "link": "https://stackoverflow.com/users/4897484/1234stella1234"}, "edited": false, "score": 0, "creation_date": 1431560487, "post_id": 30226403, "comment_id": 48557686, "body": "Glad to help. I&#39;ve added an update and got rid of the <code>strncpy</code>."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1431560562, "last_edit_date": 1431560562, "creation_date": 1431556840, "answer_id": 30226403, "question_id": 30225158, "link": "https://stackoverflow.com/questions/30225158/c-c-how-to-convert-back-int-to-string-a-word/30226403#30226403", "title": "C/C++ How to convert back int to string (a word)?", "body": "<p>The challenge is to realize you have a <strong>string</strong> of hex and a <strong>string</strong> of decimal, meaning you have a character string representation of the values, not the values themselves. So you will need to convert the string representations to the appropriate numeric values before converting back to the original string.</p>\n\n<p>Presuming you have <code>hex</code> as a string representation of two-byte hex character pairs, the following will return the original string <code>hello</code> from <code>68656c6c6f</code>:</p>\n\n<pre><code>/* convert hex string to original */\nchar hex2str[80] = {0};\nchar *p = hex2str;\nint i = 0;\nint itmp = 0;\n\nwhile (hex[i])\n{\n    sscanf (&amp;hex[i], \"%02x\", &amp;itmp);\n    sprintf (p, \"%c\", itmp);\n    p++;\n    i+=2;\n}\n*p = 0;\n\nprintf (\"\\n hex2str: '%s'\\n\\n\", hex2str);\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/c2h2c &lt; &lt;(printf \"hello\\n\")\n\n hex2str: 'hello'\n</code></pre>\n\n<hr>\n\n<h2>Short Working Example</h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXS 64\n\nint main (void) {\n\n    char hex[] = \"68656c6c6f\";\n    char hex2str[MAXS] = {0};\n    char *p = hex2str;\n    int itmp = 0;\n    int i = 0;\n\n    /* convert hex string to original */\n    while (hex[i])\n    {\n        sscanf (&amp;hex[i], \"%02x\", &amp;itmp);\n        sprintf (p, \"%c\", itmp);\n        p++;\n        i+=2;\n    }\n    *p = 0;\n\n    printf (\"\\n hex2str: '%s'\\n\\n\", hex2str);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/c2h2c\n\n hex2str: 'hello'\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4897484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85f1a75e4743c7c151847591b3c99a6?s=128&d=identicon&r=PG&f=1", "display_name": "1234stella1234", "link": "https://stackoverflow.com/users/4897484/1234stella1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 30226403, "answer_count": 1, "score": 0, "last_activity_date": 1431560562, "creation_date": 1431551052, "last_edit_date": 1431553251, "question_id": 30225158, "link": "https://stackoverflow.com/questions/30225158/c-c-how-to-convert-back-int-to-string-a-word", "title": "C/C++ How to convert back int to string (a word)?", "body": "<p>In C I'm reading a string from a txt file, for example the string \"hello\", so i have my:</p>\n\n<pre><code>F=fopen(\"text.txt\",\"r\");\nfscanf(F,\"%s\\n\",string);\n</code></pre>\n\n<p>Now, if i want to convert this string to hex and decimal, i can do something like this:</p>\n\n<pre><code>for (i=0; i&lt;strlen(string); i++)\n{\n   sprintf(st, \"%02X\", string[i]);  //Convert to hex\n   strcat(hexstring, st);\n\n   sprintf(st, \"%03d\", string[i]);  //Convert to dec\n   strcat(decstring, st);\n}\n</code></pre>\n\n<p>Now, my question is: i want to do the inverse operation, but how?\nThis is the output if i convert \"hello\"</p>\n\n<pre><code>   hex-&gt; 68656c6c6f\n   dec-&gt; 104101108108111\n</code></pre>\n\n<p>From \"68656c6c6f\" or \"104101108108111\" i want to go back to \"hello\", how can i do this?</p>\n\n<p>(basically i want to do something like this website: <a href=\"http://string-functions.com/\" rel=\"nofollow\">http://string-functions.com/</a>; \n    String To Hex Converter, Hex To String Converter, Decimal To Hex, Converter, Hex To Decimal Converter)</p>\n"}, {"tags": ["c", "arrays", "string", "delimiter"], "comments": [{"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1431551280, "post_id": 30225127, "comment_id": 48554247, "body": "better: <code>int stringCharCount = strlen(givenString);</code>"}, {"owner": {"reputation": 2165, "user_id": 1177848, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/42d4bdf0b4fffd7121d58aa328617825?s=128&d=identicon&r=PG&f=1", "display_name": "Jaques", "link": "https://stackoverflow.com/users/1177848/jaques"}, "edited": false, "score": 0, "creation_date": 1431551373, "post_id": 30225127, "comment_id": 48554285, "body": "@karan, it is difficult to help somebody with a particular problem if they don&#39;t have a basic understanding of what the code is doing. The issue is that the <code>for</code> where you do the <code>wordFiller</code> will never enter, because your <code>current</code> variable is a &#39; &#39;, and you have a &amp;&amp; operator, for the test, that will always come back as false, and never enter that block of code."}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1431551433, "post_id": 30225127, "comment_id": 48554324, "body": "also: <code>wordFiller = malloc(stringCharCount);</code> will allocate way too few bytes."}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1431551521, "post_id": 30225127, "comment_id": 48554382, "body": "also: <code>current != (&#39; &#39; | &#39;.&#39; | &#39;,&#39;)</code> that is not the way <code>C</code> works."}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "reply_to_user": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1431615584, "post_id": 30225127, "comment_id": 48582624, "body": "@DrKoch why would it allocate too few bytes? wordFiller resets every time it loops through, adding the next word from the original string to it. strCharCount will allow it to store up to 40 characters, and wordFiller never stores more than 7 bytes (Bermuda or Grenada)"}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431615925, "post_id": 30225127, "comment_id": 48582848, "body": "I&#39;ve been programming for about...2 and a half weeks now. I understand that it&#39;s beneficial for me to write down everything on paper and then translate to code...I know what I want to do on paper. My difficulty is with the latter part."}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1431624377, "post_id": 30225127, "comment_id": 48588102, "body": "Sorry, you are right. I confused stringCharCount and commaCount"}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "reply_to_user": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1431627424, "post_id": 30225127, "comment_id": 48589859, "body": "@DrKoch My instructor has now told me to include an array full of whatever delimiters I want. The idea is to now loop through that array and compare each of them to the current index value of the original string. If they aren&#39;t equal, I can add characters to my temporary string &quot;wordFiller&quot;, but if they are equal, I append the contents of wordFiller to my new array, reset wordFiller, and run through the previous loop again."}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431627471, "post_id": 30225127, "comment_id": 48589900, "body": "I think having to do this may force me to clean up my code a bit. I&#39;m going to write the whole problem out on paper and see if I can make it much neater. Hopefully this will make it so that I can easily change the program as I see fit...I need to restructure the whole thing."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431615506, "post_id": 30225202, "comment_id": 48582566, "body": "unfortunately, I can&#39;t use strlen. Some built-in functions aren&#39;t allowed here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431617932, "post_id": 30225202, "comment_id": 48584162, "body": "@karan satia Recommend then to create your own helper function <code>ks_strlen()</code>.  Creating functions like this help make your code clear and maintainable  Example <code>size_t ks_strlen(const char *s) { size_t i = 0; while (s[i]) i++; return i; }</code>"}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431641192, "post_id": 30225202, "comment_id": 48597297, "body": "I accounted for the total string length when I created stringCharCount, no?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431641966, "post_id": 30225202, "comment_id": 48597576, "body": "@karan satia 1) <code>stringCharCount</code> is limited to 1000 2) Code in the <code>for (int i = 0; i &lt;= stringCharCount; i++) { ...</code> is questionable so its hard to understand coding goals.  3) I would have expected <code>char *tempWord = malloc(stringCharCount + 1);</code>"}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431642144, "post_id": 30225202, "comment_id": 48597641, "body": "I allocated memory for *tempWord just before the first for loop. I didn&#39;t need to give it the +1 to account for a null value because tempWord stores, at most, ONE of the country names (never all of them). None of the country names are longer than 7 bytes. Whenever I encounter a comma while iterating over the original string, I dump the contents of tempWord into the final array at a specified index and reinitialize tempWord. This way, I can start fresh and add a new word to tempWord. It will, at most, store 7 characters."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1431551635, "last_edit_date": 1431551635, "creation_date": 1431551180, "answer_id": 30225202, "question_id": 30225127, "link": "https://stackoverflow.com/questions/30225127/code-accounting-for-multiple-delimiters-isnt-working/30225202#30225202", "title": "code accounting for multiple delimiters isn&#39;t working", "body": "<p>Many issues.  Suggest dividing code into small pieces and debug those first.</p>\n\n<p>--</p>\n\n<p>Un-initialize data.</p>\n\n<pre><code>// int stringCharCount;\nint stringCharCount = 0;\n... \nstringCharCount++;\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>int stringCharCount  = strlen(givenString);\n</code></pre>\n\n<p>Other problems too: <code>finalArray[]</code> is never assigned a terminarting null character yet <code>printf(\"%s\\n\", finalArray[i]);</code> used.</p>\n\n<p>Unclear use of <code>char *</code></p>\n\n<pre><code>char *wordFiller = malloc(stringCharCount);\n\nwordFiller = malloc(stringCharCount);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431616009, "post_id": 30225306, "comment_id": 48582901, "body": "This about learning to program. I&#39;ll be moving to Objective-C in a month or so, but for right now, I HAVE to code in C."}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1431616045, "post_id": 30225306, "comment_id": 48582931, "body": "The goal is to understand algorithm development, which in this case prohibits me from using built in functions that I&#39;ll undoubtedly be using later."}], "tags": [], "owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "is_accepted": false, "score": 0, "last_activity_date": 1431589345, "last_edit_date": 1431589345, "creation_date": 1431551625, "answer_id": 30225306, "question_id": 30225127, "link": "https://stackoverflow.com/questions/30225127/code-accounting-for-multiple-delimiters-isnt-working/30225306#30225306", "title": "code accounting for multiple delimiters isn&#39;t working", "body": "<p>There are more bugs than lines in your code.</p>\n\n<p>I'd suggest you start with something much simpler.</p>\n\n<p>Work through a basic programming book with excercises.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Or, if this is about learning to program, try another, simpler programming language:</p>\n\n<p>In <code>C#</code> your task looks rather simple:</p>\n\n<pre><code>string givenString = \"USA,Canada Mexico,Bermuda.Grenada,Belize\";\nstring [] words = string.Split(new char[] {' ', ',', '.'});\nforeach(word in words)\n    Console.WriteLine(word);\n</code></pre>\n\n<p>As you see, there are much issues to worry about:</p>\n\n<ul>\n<li>No memory management (alloc/free) this is handeled by the Garbage Collector</li>\n<li>no pointers, so nothing can go wrong with them</li>\n<li>powerful builtin string capabilities like <code>Split()</code></li>\n<li><code>foreach</code> makes loops much simpler</li>\n</ul>\n"}], "owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1431641301, "creation_date": 1431550949, "last_edit_date": 1431641301, "question_id": 30225127, "link": "https://stackoverflow.com/questions/30225127/code-accounting-for-multiple-delimiters-isnt-working", "title": "code accounting for multiple delimiters isn&#39;t working", "body": "<p>I have a program I wrote to take a string of words and, based on the delimiter that appears, separate each word and add it to an array. </p>\n\n<p>I've adjusted it to account for either a ' ' , '.'  or '.'. Now the goal is to adjust for multiple delimiters appearing together (as in \"the dog,,,was walking\") and still only add the word. While my program works, and it doesn't print out extra delimiters, every time it encounters additional delimiters, it includes a space in the output instead of ignoring them.</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n\n    char *givenString = \"USA,Canada,Mexico,Bermuda,Grenada,Belize\";\n\n    int stringCharCount;\n\n    //get length of string to allocate enough memory for array\n    for (int i = 0; i &lt; 1000; i++) {\n        if (givenString[i] == '\\0') {\n            break;\n        }\n        else {\n            stringCharCount++;\n        }\n    }\n\n\n\n    // counting # of commas in the original string\n    int commaCount = 1;\n    for (int i = 0; i &lt; stringCharCount; i++) {\n        if (givenString[i] == ',' || givenString[i] == '.' || givenString[i] == ' ') {\n            commaCount++;\n        }\n    }\n\n\n    //declare blank Array that is the length of commas (which is the number of elements in the original string)\n    //char *finalArray[commaCount];\n\n\n\n    int z = 0;\n    char *finalArray[commaCount] ;\n    char *wordFiller = malloc(stringCharCount);\n\n\n    int j = 0;\n    char current = ' ';\n\n    for (int i = 0; i &lt;= stringCharCount; i++) {\n\n        if (((givenString[i] == ',' || givenString[i] == '\\0' || givenString[i] == ',' || givenString[i] == ' ') &amp;&amp; (current != (' ' | '.' | ',')))) {\n            finalArray[z] = wordFiller;\n            wordFiller = malloc(stringCharCount);\n            j=0;\n            z++;\n            current = givenString[i];\n        }\n\n        else {\n            wordFiller[j++] = givenString[i];\n        }\n    }\n\n\n    for (int i = 0; i &lt; commaCount; i++) {\n        printf(\"%s\\n\", finalArray[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This program took me hours and hours to get together (with help from more experienced developers) and I can't help but get frustrated. I'm using the debugger to my best ability but definitely need more experience with it.</p>\n\n<p>/////////</p>\n\n<p>I went back to pad and paper and kind of rewrote my code. Now I'm trying to store delimiters in an array and compare the elements of that array to the current string value. If they are equal, then we have come across a new word and we add it to the final string array. I'm struggling to figure out the placement and content of the \"for\" loop that I would use for this.</p>\n\n<pre><code>    char * original = \"USA,Canada,Mexico,Bermuda,Grenada,Belize\";\n\n    //creating two intialized variables to count the number of characters and elements to add to the array (so we can allocate enough mmemory)\n    int stringCharCount = 0;\n    //by setting elementCount to 1, we can account for the last word that comes after the last comma\n    int elementCount = 1;\n\n    //calculate value of stringCharCount and elementCount to allocate enough memory for temporary word storage and for final array\n    for (int i = 0; i &lt; 1000; i++) {\n        if (original[i] == '\\0') {\n            break;\n        }\n        else {\n            stringCharCount++;\n            if (original[i] == ',') {\n                elementCount++;\n            }\n        }\n    }\n\n    //account for the final element\n    elementCount = elementCount;\n\n    char *tempWord = malloc(stringCharCount);\n    char *finalArray[elementCount];\n    int a = 0;\n    int b = 0;\n    //int c = 0;\n    //char *delimiters[4] = {\".\", \",\", \" \", \"\\0\"};\n\n        for (int i = 0; i &lt;= stringCharCount; i++) {\n            if (original[i] == ',' || original[i] == '\\0') {\n                finalArray[a] = tempWord;\n                tempWord = malloc(stringCharCount);\n                tempWord[b] = '\\0';\n                b = 0;\n                a++;\n            }\n            else {\n                tempWord[b++] = original[i];\n            }\n            }\n\n    for (int i = 0; i &lt; elementCount; i++) {\n        printf(\"%s\\n\", finalArray[i]);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431550944, "post_id": 30225067, "comment_id": 48554050, "body": "Are you looking for something like <a href=\"http://stackoverflow.com/q/60208/3001761\">stackoverflow.com/q/60208/3001761</a>? For those of us not <i>au fait</i> with C, it might be helpful to provide more information about what you&#39;re talking about."}, {"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "edited": false, "score": 1, "creation_date": 1431551136, "post_id": 30225067, "comment_id": 48554165, "body": "Maybe you want a dictionary mapping string keys to functions? I don&#39;t understand why you would need to use a while loop in C."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "reply_to_user": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "edited": false, "score": 0, "creation_date": 1431551234, "post_id": 30225067, "comment_id": 48554220, "body": "@Shashank you could use a while loop if the array of function pointers was NULL terminated."}, {"owner": {"reputation": 627, "user_id": 4897472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3648b49657a7c112c7be5f19c84215b4?s=128&d=identicon&r=PG&f=1", "display_name": "Roger", "link": "https://stackoverflow.com/users/4897472/roger"}, "edited": false, "score": 0, "creation_date": 1431551416, "post_id": 30225067, "comment_id": 48554317, "body": "Yes, a dictionary is what I need apparently, thank you!  (and yes I use a NULL terminated array for my loop in C)"}, {"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1431551515, "post_id": 30225067, "comment_id": 48554379, "body": "@PaulRooney Ah, makes sense. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 8, "last_activity_date": 1431553788, "last_edit_date": 1431553788, "creation_date": 1431551102, "answer_id": 30225178, "question_id": 30225067, "link": "https://stackoverflow.com/questions/30225067/reproduce-a-c-function-pointer-array-in-python/30225178#30225178", "title": "Reproduce a C function pointer array in Python", "body": "<p>In Python you use a <a href=\"https://docs.python.org/2/tutorial/datastructures.html#dictionaries\" rel=\"nofollow\"><strong><em>dictionary</em></strong></a>.</p>\n\n<p>Example:</p>\n\n<pre><code>keyword2func = {\n    \"word1\": function_word1,\n    \"word2\": function_word2,\n}\n\nword = input(\"\")\nkeyword2func[word]()\n</code></pre>\n"}], "owner": {"reputation": 627, "user_id": 4897472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3648b49657a7c112c7be5f19c84215b4?s=128&d=identicon&r=PG&f=1", "display_name": "Roger", "link": "https://stackoverflow.com/users/4897472/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 30225178, "answer_count": 1, "score": 6, "last_activity_date": 1431553788, "creation_date": 1431550725, "last_edit_date": 1431551119, "question_id": 30225067, "link": "https://stackoverflow.com/questions/30225067/reproduce-a-c-function-pointer-array-in-python", "title": "Reproduce a C function pointer array in Python", "body": "<p>I have a Python program asking the user for input like a shell, and if I detect some specific keywords I want to go inside some specific functions.</p>\n\n<p>The thing is that I would like to avoid doing a lot of <code>if</code> and <code>else if</code>. Usually in C to avoid this situation I use a function pointer array that I travel with a <code>while</code> and use <code>strcmp</code> to check the input.</p>\n\n<p>I would like to know how to do that in Python if it is even possible.</p>\n"}, {"tags": ["c", "python-2.7", "audio", "wav"], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 6, "last_activity_date": 1431550364, "last_edit_date": 1592644375, "creation_date": 1431549522, "answer_id": 30224767, "question_id": 30224729, "link": "https://stackoverflow.com/questions/30224729/convert-wav-to-base64/30224767#30224767", "title": "Convert WAV to base64", "body": "<h2>Python</h2>\n<p>The easiest way</p>\n<pre><code>from base64 import b64encode\n\nf=open(&quot;file.wav&quot;)\nenc=b64encode(f.read())\nf.close()\n</code></pre>\n<p>Now <code>enc</code> contains the encoded value.</p>\n<p>You can use a bit simplified version:</p>\n<pre><code>import base64\n\nenc=base64.b64encode(open(&quot;file.wav&quot;).read())\n</code></pre>\n<hr />\n<h2>C</h2>\n<p>See <a href=\"http://base64.sourceforge.net/b64.c\" rel=\"nofollow noreferrer\">this file</a> for an example of base64 encoding of a file.</p>\n<hr />\n<h2>C++</h2>\n<p><a href=\"http://www.adp-gmbh.ch/cpp/common/base64.html\" rel=\"nofollow noreferrer\">Here</a> you can see the base64 conversion of strings. I think it wouldn't be too difficult to do the same for files.</p>\n"}, {"tags": [], "owner": {"reputation": 532, "user_id": 2238884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26f28ec1ff8e20ef3320690a36e9cb5b?s=128&d=identicon&r=PG", "display_name": "user2238884", "link": "https://stackoverflow.com/users/2238884/user2238884"}, "is_accepted": true, "score": 6, "last_activity_date": 1586327687, "last_edit_date": 1586327687, "creation_date": 1431771016, "answer_id": 30274341, "question_id": 30224729, "link": "https://stackoverflow.com/questions/30224729/convert-wav-to-base64/30274341#30274341", "title": "Convert WAV to base64", "body": "<p>@ForceBru's answer</p>\n\n<pre><code>import base64 \nenc=base64.b64encode(open(\"file.wav\").read())\n</code></pre>\n\n<p>has one problem. I noticed for some WAV files that I encoded the string generated was shorter than expected.</p>\n\n<p>Python docs for \"open()\" say</p>\n\n<blockquote>\n  <p>If mode is omitted, it defaults to 'r'.\n  The default is to use text mode, which may convert '\\n' characters to a platform-specific representation on writing and back on reading. Thus, when opening a binary file, you should append 'b' to the mode value to open the file in binary mode, which will improve portability.</p>\n</blockquote>\n\n<p>Hence, the code snippet doesn't read in binary. So, the below code should be used for better output.</p>\n\n<pre><code>import base64\nenc = base64.b64encode(open(\"file.wav\", \"rb\").read())\n</code></pre>\n"}], "owner": {"reputation": 532, "user_id": 2238884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26f28ec1ff8e20ef3320690a36e9cb5b?s=128&d=identicon&r=PG", "display_name": "user2238884", "link": "https://stackoverflow.com/users/2238884/user2238884"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4329, "favorite_count": 0, "accepted_answer_id": 30274341, "answer_count": 2, "score": 3, "last_activity_date": 1586327687, "creation_date": 1431549395, "last_edit_date": 1431595358, "question_id": 30224729, "link": "https://stackoverflow.com/questions/30224729/convert-wav-to-base64", "title": "Convert WAV to base64", "body": "<p>I have some wave files (.wav) and I need to convert them in base64 encoded strings. Could you guide me how to do that in Python/C/C++ ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1431549279, "post_id": 30224650, "comment_id": 48553214, "body": "<code>char *message = NULL; ...strlen(message)</code> is a problem."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1431549527, "post_id": 30224650, "comment_id": 48553327, "body": "An octet is just a collection of eight adjascent bits. This is often called a byte, allthought this is not correct (a byte might have more or less bits actually). So an &quot;octet stream&quot; is just a stream of octets without know meaning to the system. If you want to read one, just use normal binary read. Once you are interpreting the data, however, it has a structure and would not be a mere octet stream anymore."}, {"owner": {"reputation": 77122, "user_id": 106671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a910ad61c5827193f003a11be5dacb14?s=128&d=identicon&r=PG", "display_name": "Nikolai Fetissov", "link": "https://stackoverflow.com/users/106671/nikolai-fetissov"}, "edited": false, "score": 1, "creation_date": 1431549671, "post_id": 30224650, "comment_id": 48553393, "body": "Also, you should not use string functions on input from sockets (not only on binary data) - the stream might contain zero bytes that are treated as string terminators, OR it might not have zero bytes at all, so your calls to string functions will result in corrupted memory."}, {"owner": {"reputation": 15334, "user_id": 3348604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QybjW.jpg?s=128&g=1", "display_name": "Jan Garaj", "link": "https://stackoverflow.com/users/3348604/jan-garaj"}, "edited": false, "score": 0, "creation_date": 1431555687, "post_id": 30224650, "comment_id": 48556294, "body": "Thx guys for your help."}], "owner": {"reputation": 15334, "user_id": 3348604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QybjW.jpg?s=128&g=1", "display_name": "Jan Garaj", "link": "https://stackoverflow.com/users/3348604/jan-garaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 952, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431553166, "creation_date": 1431549081, "last_edit_date": 1431553166, "question_id": 30224650, "link": "https://stackoverflow.com/questions/30224650/read-octet-stream-in-c-program", "title": "Read octet stream in C Program", "body": "<p>I would like to read an octet-stream in my C code. Example of output (it's docker API log output):</p>\n\n<pre><code>HTTP/1.0 200 OK\nDate: Wed, 13 May 2015 20:09:13 GMT\nContent-Type: application/octet-stream\n\n\u25922015-05-13T20:09:06.335126685Z 2015-05-13 20:09:06 ERROR AppException: &lt;traceback&gt;\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>char *message = NULL;\nchar buffer[buffer_size+1];\nwhile ((nbytes = read(sock, buffer, buffer_size)) &gt; 0 )\n{\n    buffer[nbytes] = 0;\n    message = realloc(message, (strlen(message) + nbytes + 1));\n    strcat(message, buffer);\n}\nlog(LOG_LEVEL_DEBUG, \"message: %s\", message);\n</code></pre>\n\n<p>But I'm able to read only headers (debug output of message variable):</p>\n\n<pre><code>\u2592w\u2592WHTTP/1.0 200 OK\nDate: Wed, 13 May 2015 20:14:41 GMT\nContent-Type: application/octet-stream\n</code></pre>\n\n<p>How can I read content of response? \nCan the non-ASCII character in response be a problem? \nAnother Docker API responses (inspect, info, ps) doesn't have this issue.</p>\n"}, {"tags": ["c", "generics", "parallel-processing", "openmp", "qsort"], "answers": [{"comments": [{"owner": {"reputation": 3378, "user_id": 2069150, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/filKc.jpg?s=128&g=1", "display_name": "Arch D. Robison", "link": "https://stackoverflow.com/users/2069150/arch-d-robison"}, "edited": false, "score": 0, "creation_date": 1431621488, "post_id": 30225266, "comment_id": 48586360, "body": "A simple way to avoid the task overhead for small sorts is to call serial qsort when the number of items is below some threshold.  My experience has been that the threshold needs to be on the order of 500 (give or take a few factors of 2) for simple types.  John&#39;s advice on a good pivot is important.  In the TBB parallel quicksort, we use a pseudo-median of 9.  See also my blog <a href=\"https://software.intel.com/en-us/articles/a-parallel-stable-sort-using-c11-for-tbb-cilk-plus-and-openmp\" rel=\"nofollow noreferrer\">software.intel.com/en-us/articles/&hellip;</a> for general parallel sort advice."}, {"owner": {"reputation": 580, "user_id": 1791852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7591b3c72b92e32b7b7775162b1fa77f?s=128&d=identicon&r=PG", "display_name": "Nate Dellinger", "link": "https://stackoverflow.com/users/1791852/nate-dellinger"}, "edited": false, "score": 0, "creation_date": 1431631265, "post_id": 30225266, "comment_id": 48592065, "body": "John and Arch, thanks for the great advice.  I will work on insertion sort and optimizing the amount of tasks I am creating, as well as improving pivot selection. :)  Is there anything strange I&#39;m doing with the void pointers? It&#39;s not easy when you can&#39;t just call arr[i] = arr[x] or whatever to swap elements because I actually need to copy memory (see the swapVoidElement function).  Are there any improvements I could make with my idea of voids and generalization?  Your help has been greatly appreciated!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 580, "user_id": 1791852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7591b3c72b92e32b7b7775162b1fa77f?s=128&d=identicon&r=PG", "display_name": "Nate Dellinger", "link": "https://stackoverflow.com/users/1791852/nate-dellinger"}, "edited": false, "score": 0, "creation_date": 1431633597, "post_id": 30225266, "comment_id": 48593439, "body": "@NateDellinger, your swap function looks fine.  However, if you are willing to assume at least C99, and that the individual objects being sorted are not huge, then you could consider avoiding dynamic memory management by declaring <code>temp</code> as a variable-length array: <code>unsigned char temp[size]</code>.  That should be cheaper, as it will be allocated on the stack.  In that case you eliminate both the <code>malloc()</code> and the <code>free()</code>, but leave everything else exactly as it is."}, {"owner": {"reputation": 580, "user_id": 1791852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7591b3c72b92e32b7b7775162b1fa77f?s=128&d=identicon&r=PG", "display_name": "Nate Dellinger", "link": "https://stackoverflow.com/users/1791852/nate-dellinger"}, "edited": false, "score": 0, "creation_date": 1431639770, "post_id": 30225266, "comment_id": 48596633, "body": "That&#39;s exactly what I was looking for!  Wasn&#39;t sure how to put void information on the stack.  The built in qsort runs 1bil elements in around 372 seconds.  After the insertion sort and reduction in task calls I got my parallel version down to ~250 seconds.  Then amazingly after I got rid of the malloc/free call in swapelement it dropped to 70-80 seconds!  I think I was bottlenecking with too many calls for heap allocation, so switching to the stack helped out a ton!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1431551434, "creation_date": 1431551434, "answer_id": 30225266, "question_id": 30224523, "link": "https://stackoverflow.com/questions/30224523/openmp-generic-qsort-lackluster-speedup/30225266#30225266", "title": "OpenMP generic qsort lackluster speedup", "body": "<p>You incur a bit of overhead for every OMP task you create, and your particular tasks get smaller and smaller.  As the work per task gets small, the overhead becomes proportionally more expensive.  Some of the common optimization techniques for serial QuickSort might help not only with the basic algorithm, but with your overhead problem, too.</p>\n\n<p>You could greatly reduce the total number of tasks involved, and therefore their associated overhead, by switching strategy for small subarrays.  That would line up nicely with the common Quicksort optimization of switching to Insertion Sort for small subarrays.  The definition of \"small\" is a tunable parameter, and its optimum value depends somewhat on what you're sorting, but possibly something in the range of 5 - 30 would be a good cutoff for you.  When you make such a switch, perform the whole subarray insertion sort in one task.</p>\n\n<p>You might also benefit from recursing only for the smaller of each pair of subarrays, and instead looping to handle the larger.  This limits the maximum recursion depth to O(log n), whereas otherwise it is O(n) in the worst case.  Inasmuch as each recursion involves its own task, this also will cut the total number of tasks required by at least a factor of two.</p>\n\n<p>Choosing good pivots is one of the central issues in QuickSort performance, but the relative effects of pivot choice algorithm are highly data dependent.  I'd suggest something at least a <em>little</em> more sophisticated than choosing always the leftmost element -- either median-of-three or random pivot selection is likely to yield somewhat better performance in the average case.  Inasmuch as choice of pivot affects subarray sizes, which is related to the number of tasks created and <em>their</em> sizes, this may be an additional win for your parallel version.</p>\n"}], "owner": {"reputation": 580, "user_id": 1791852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7591b3c72b92e32b7b7775162b1fa77f?s=128&d=identicon&r=PG", "display_name": "Nate Dellinger", "link": "https://stackoverflow.com/users/1791852/nate-dellinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 30225266, "answer_count": 1, "score": 2, "last_activity_date": 1431551434, "creation_date": 1431548587, "last_edit_date": 1431549980, "question_id": 30224523, "link": "https://stackoverflow.com/questions/30224523/openmp-generic-qsort-lackluster-speedup", "title": "OpenMP generic qsort lackluster speedup", "body": "<p>So it seems that my implementation breaks even with the basic serial qsort at around 1 billion elements.  Most parallel qsort algorithms online are for sorting integer arrays and stuff, but I want to be able to sort anything using custom comparators like the built-in qsort because I would like to sort some structs I have.  I'm using 12 threads and can verify they are getting spawned properly looking at top.  Perhaps I'm spawning too many and should stop spawning new threads based on on the depth of recursion?  I know my implementation of qsort is fairly basic and obviously the built-in qsort has had a lot of work and optimization put into it but I fail to see why I'm not getting a good speed-up with the parallelization.  Any input would be greatly appreciated as I could use this code in a lot of areas if I can keep it generic.  Thanks!</p>\n\n<pre><code>void test ( void* data, uint64_t startIdx, uint64_t endIdx, size_t dataSize, int (*cmp)(const void *, const void *) )\n{\n    #pragma omp parallel\n    {\n        #pragma omp single nowait\n        {\n            p_qsort( data, 0, MAX_INTS - 1, sizeof (testint), cmp );\n        }\n    }\n}\n\nvoid p_qsort ( void* data, uint64_t startIdx, uint64_t endIdx, size_t dataSize, int (*cmp)(const void *, const void *) )\n{\n    uint64_t idx = p_qsort_partition( data, startIdx, endIdx, dataSize, cmp );\n\n    //Left array\n    if ( startIdx &lt; idx - 1 )\n    {\n        #pragma omp task\n        p_qsort( data, startIdx, idx - 1, dataSize, cmp );\n    }\n    //Right array\n    if ( endIdx &gt; idx )\n    {\n        #pragma omp task\n        p_qsort( data, idx, endIdx, dataSize, cmp );\n    }\n}\n\nvoid swapVoidElements ( void* el1, void* el2, size_t size )\n{\n    if ( el1 == el2 )\n        return;\n\n    void* temp = malloc( size );\n\n    //temp = el1\n    memcpy( temp, el1, size );\n    //el1 = el2\n    memcpy( el1, el2, size );\n    //el2 = temp\n    memcpy( el2, temp, size );\n\n    free( temp );\n}\n\nuint64_t p_qsort_partition ( void* data, uint64_t left, uint64_t right, size_t dataSize, int (*cmp)(const void *, const void *) )\n{\n    void* pivotP = getVoidPtr( data, left, dataSize );\n    void* pivotCmp = malloc( dataSize );\n    memcpy( pivotCmp, pivotP, dataSize );\n\n    while ( left &lt;= right )\n    {\n        while ( cmp( getVoidPtr( data, left, dataSize ), pivotCmp ) &lt; 0 )\n            left++;\n        //while ( array[right] &gt; pivot )\n        while ( cmp( getVoidPtr( data, right, dataSize ), pivotCmp ) &gt; 0 )\n            right--;\n        //Swap\n        if ( left &lt;= right )\n        {\n            void* leftP = getVoidPtr( data, left, dataSize );\n            void* rightP = getVoidPtr( data, right, dataSize );\n\n            swapVoidElements( leftP, rightP, dataSize );\n\n            left++;\n            right--;\n        }\n    }\n    free( pivotCmp );\n\n    return left;\n}\n\nvoid* getVoidPtr ( void* data, uint64_t idx, size_t dataSize )\n{\n    uint64_t idxNum = idx * dataSize;\n    char* test = ((char*) data) + idxNum;\n\n    return (void *) test;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "runtime-error", "mpi", "main"], "answers": [{"comments": [{"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1431569633, "post_id": 30225229, "comment_id": 48559996, "body": "Hooray for namespaces!"}, {"owner": {"reputation": 527, "user_id": 4896937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b849b641ff3f8495ba3ce610fbd6e6f3?s=128&d=identicon&r=PG", "display_name": "chrstphrchvz", "link": "https://stackoverflow.com/users/4896937/chrstphrchvz"}, "edited": false, "score": 0, "creation_date": 1431577665, "post_id": 30225229, "comment_id": 48561924, "body": "I had assumed the <code>main()</code> function wasn&#39;t getting called, but after examining this suggestion it appears to always be called; I will add more <code>printf()</code> before and between the MPI functions to identify at least the first problematic one. Also, the static suggestion works. Is there a way to further investigate if the <code>connect()</code> system call is indeed called, or otherwise identify the namespace conflict?"}, {"owner": {"reputation": 694, "user_id": 1120009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc418dc228f31b7cd1d4d5ea15093d8?s=128&d=identicon&r=PG", "display_name": "Jeff Squyres", "link": "https://stackoverflow.com/users/1120009/jeff-squyres"}, "edited": false, "score": 2, "creation_date": 1431606802, "post_id": 30225229, "comment_id": 48576575, "body": "As one of the authors of Open MPI, I&#39;ll confirm that the answer provided by +elbows is correct: Open MPI makes use of the connect(2) system call.  When you have a public function named connect(2) (probably as part of MPI_Init), the linker will end up invoking <i>your</i> connect() function rather than connect(2).  Bad Things happen from there."}], "tags": [], "owner": {"reputation": 209, "user_id": 754870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4b83e2aa7aa28dcf2e99421146c387c?s=128&d=identicon&r=PG", "display_name": "elbows", "link": "https://stackoverflow.com/users/754870/elbows"}, "is_accepted": true, "score": 7, "last_activity_date": 1431551305, "creation_date": 1431551305, "answer_id": 30225229, "question_id": 30224388, "link": "https://stackoverflow.com/questions/30224388/how-does-function-named-connect-prevent-mpi-c-program-from-running/30225229#30225229", "title": "How does function named connect() prevent MPI C program from running?", "body": "<p>I would guess that one of the MPI functions you call is in turn calling the <code>connect()</code> system call. But since ELF executables have a flat namespace for symbols, your <code>connect()</code> is being called instead.</p>\n\n<p>The problem doesn't happen on Mac OS because Mach-O libraries have a two-level namespace, so symbols in different libraries don't conflict with each other.</p>\n\n<p>If you make your function static, that would probably avoid the problem as well.</p>\n"}], "owner": {"reputation": 527, "user_id": 4896937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b849b641ff3f8495ba3ce610fbd6e6f3?s=128&d=identicon&r=PG", "display_name": "chrstphrchvz", "link": "https://stackoverflow.com/users/4896937/chrstphrchvz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 30225229, "answer_count": 1, "score": 5, "last_activity_date": 1431582635, "creation_date": 1431548080, "last_edit_date": 1431582635, "question_id": 30224388, "link": "https://stackoverflow.com/questions/30224388/how-does-function-named-connect-prevent-mpi-c-program-from-running", "title": "How does function named connect() prevent MPI C program from running?", "body": "<p>I was writing a project using MPI for a parallel programming course, and decided to name one of my functions <code>connect()</code>. But whenever I tried to <code>mpirun</code> the program (using recent versions of Open MPI on Linux and OS X), I would receive output from the <code>connect()</code> function, even if I had not called <code>connect()</code> from <code>main()</code>; also, some of the output from <code>main()</code> would not appear.</p>\n\n<p>This is a simplified program with the issue:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;mpi.h&gt;\n\nvoid connect(); //function name breaks mpi\n\nint main(void) {\n\n    int comm_sz, my_rank;\n    MPI_Init(NULL, NULL);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;comm_sz);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);\n    printf(\"my_rank is %d\\n\", my_rank);\n    fflush(stdout);\n    MPI_Finalize();\n    return EXIT_SUCCESS;\n}\n\nvoid connect() {\n\n    printf(\"\\nNot main! \\n\");\n    return;\n}\n</code></pre>\n\n<p>and the output:</p>\n\n<pre><code>[me@host ~]$ mpicc bad.c -Wall\n[me@host ~]$ mpirun -n 1 a.out \n\nNot main! \n--------------------------------------------------------------------------\norterun noticed that process rank 0 with PID 17245 on node host exited on signal 13 (Broken pipe).\n--------------------------------------------------------------------------\n</code></pre>\n\n<p>I was about to ask on Stack Overflow what was wrong in the first place, until I discovered that renaming the function fixes it. So what I'm curious about now is why naming the function <code>connect()</code> prevents the program from running correctly. Could it also be an issue with <code>mpirun</code>/Open RTE?</p>\n\n<p>Possible leads:</p>\n\n<ul>\n<li>There's a <code>connect()</code> function in <code>&lt;sys/socket.h&gt;</code>, but I haven't yet found it mentioned in the MPI header files.</li>\n<li>There's also a <code>Connect()</code> function (with an uppercase C) in <code>\"ompi/mpi/cxx/intracomm.h\"</code> which is indirectly included by <code>&lt;mpi.h&gt;</code>, but I thought case mattered in C/C++, and it looks like a method of a C++ class.</li>\n<li>If I try executing the program like a normal one, it works when run on OS X, but not on Linux:</li>\n</ul>\n\n<p>\uf8ff</p>\n\n<pre><code>mac:~ me$ ./a.out \nmy_rank is 0\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>[me@linux ~]$ ./a.out \n\nNot main! \n</code></pre>\n"}, {"tags": ["c", "pointers", "casting"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 4, "creation_date": 1431547993, "post_id": 30224316, "comment_id": 48552569, "body": "&quot;Apart from that, there is no difference: all pointers are represented the same way in memory, regardless if the pointer is pointing to an int value, a char value, a short value, or whatever.&quot; \u2013 that&#39;s <b>false,</b> i. e. factually wrong in the general case, and if your teacher is teaching this, he should be fired. There&#39;s a good reason the second snippet should give you at least a warning but if I recall correctly, it&#39;s a constraint violation, so it triggers undefined behavior instantly. As such, it can very realistically lead to hard-to-debug errors when a compiler exploits the UB in your\u2026"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1431548003, "post_id": 30224316, "comment_id": 48552576, "body": "\u2026code (and boy, do they do that cleverly!)"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1431548011, "post_id": 30224316, "comment_id": 48552578, "body": "Has to do with the size of a <code>char</code> and <code>int</code> on different machines and also memory alignment. None of these are standard ( I think)"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1431548053, "post_id": 30224316, "comment_id": 48552598, "body": "@Smac89 (in that the number of bits is not exactly specified, but <code>sizeof(char)</code> must always be 1 on a conforming implementation.)"}, {"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 1, "creation_date": 1431548057, "post_id": 30224316, "comment_id": 48552603, "body": "Of course it is important to cast. You will realize the importance as soon as you de-reference the pointer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1431548601, "post_id": 30224316, "comment_id": 48552883, "body": "If in doubt, omit all pointer casts, and enable all compiler warnings. Then follow up the implications."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1431549121, "post_id": 30224316, "comment_id": 48553134, "body": "&quot;casting a pointer will not modify anything in the memory&quot; it usually true on many platforms but not true in general."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 3, "creation_date": 1431551228, "post_id": 30224316, "comment_id": 48554215, "body": "First of all you should ask yourself the question, why the hell would I try to convert or cast one pointer type to another. In most of the cases that I see for that, this is just crappy code, and usually has a lot of other problems such as alignment and aliasing. Simply don&#39;t do that, you don&#39;t need that, and then you also don&#39;t need casts. <b>Most casts are evil.</b> The only pointer conversion that usually make sense are from and to <code>void*</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1431549056, "post_id": 30224524, "comment_id": 48553096, "body": "&quot;Casting a pointer doesn&#39;t change the pointer value&quot; \u2013 this is only true if by this you mean &quot;so it compares equal to the original pointer when converted back to its original type&quot;. Otherwise, the specific bitwise representation of the result of converting a pointer to an incompatible type is not required by the Standard."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1431554295, "post_id": 30224524, "comment_id": 48555656, "body": "There is also no guarantee what happens if a pointer is not properly aligned. For example char* p = malloc (100); int* q = (int *) (p + 1); anything could happen."}], "tags": [], "owner": {"reputation": 637210, "user_id": 69083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1db0cdfd3fe268e270ec481a73046c2f?s=128&d=identicon&r=PG", "display_name": "Guffa", "link": "https://stackoverflow.com/users/69083/guffa"}, "is_accepted": false, "score": 2, "last_activity_date": 1431548934, "last_edit_date": 1431548934, "creation_date": 1431548590, "answer_id": 30224524, "question_id": 30224316, "link": "https://stackoverflow.com/questions/30224316/not-casting-pointers-in-c-can-cause-problems/30224524#30224524", "title": "Not casting pointers in C can cause problems?", "body": "<p>Casting a pointer doesn't change the pointer value, it only tells the compiler what to do with the pointer. The pointer itself is just a number, and it doesn't have a type. It's the variable where the pointer is stored that has the type.</p>\n\n<p>There is no difference between your two ways of assigning the pointer (if the compiler lets you do the assigment). Whatever the type of the source pointer variable, the pointer will be used according to the type of the destination variable after the assignment.</p>\n\n<p>You simply can't store an int pointer in a char pointer variable. Once the value is stored in the variable, it has no notion of having been a pointer to an int.</p>\n\n<p>Casting pointers matters when you use the value directly, for example:</p>\n\n<pre><code>int* int_pointer;\nint_pointer = malloc(sizeof(int));\n*int_pointer = 4;\nchar c;\nc = *(char*)int_pointer;\n</code></pre>\n\n<p>Casting the pointer means that dereferencing it reads a char from the location, not an int.</p>\n"}, {"tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": false, "score": 3, "last_activity_date": 1431549167, "last_edit_date": 1431549167, "creation_date": 1431548606, "answer_id": 30224528, "question_id": 30224316, "link": "https://stackoverflow.com/questions/30224316/not-casting-pointers-in-c-can-cause-problems/30224528#30224528", "title": "Not casting pointers in C can cause problems?", "body": "<p>What your Prof said sounds right.</p>\n\n<blockquote>...(for example, adding an int pointer will result in a different offset than adding a char pointer)</blockquote>\n\n<p>This is true because assuming <code>int</code> is 4 bytes and <code>char</code> is 1 byte, adding a <code>2</code> to an int pointer will result in moving the pointer by 8 bytes, whereas adding a <code>2</code> to a char pointer will only move the pointer to the next byte 2 positions away.</p>\n\n<blockquote>Apart from that, there is no difference: all pointers are represented the same way in memory, regardless if the pointer is pointing to an int value, a char value, a short value, or whatever.</blockquote>\n\n<p>This is true, the machine makes no distinction between char vs int pointers, these are the compiler's issue to deal with. Also as your prof mentioned:</p>\n\n<h2>The only purpose is to make the compiler interpret correctly the pointer operations</h2>\n\n<blockquote>\n  <p>So, casting a pointer will not modify anything in the memory, it will\n  just help the programmer with operations more related with the\n  pointer-type he is dealing with.</p>\n</blockquote>\n\n<p>This is again true. Casting does not modify memory, it just changes how a part of memory is interpreted.</p>\n"}, {"comments": [{"owner": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "edited": false, "score": 0, "creation_date": 1431648664, "post_id": 30224564, "comment_id": 48599457, "body": "@ouah Thanks for your answer! It was VERY helpful. Unfortunately I can only accept one answer as the correct answer"}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 14, "last_activity_date": 1431551694, "last_edit_date": 1431551694, "creation_date": 1431548727, "answer_id": 30224564, "question_id": 30224316, "link": "https://stackoverflow.com/questions/30224316/not-casting-pointers-in-c-can-cause-problems/30224564#30224564", "title": "Not casting pointers in C can cause problems?", "body": "<blockquote>\n  <p>Not casting pointers in C can cause problems?</p>\n</blockquote>\n\n<p>There is no implicit conversion between pointer types in C (as there are for example between arithmetic types) - with the exception with <code>void *</code> type. It means C requires you to cast if you want to convert a pointer to another pointer type (except for <code>void *</code>). If you fail to do so an implementation is required to issue a diagnostic message and is allowed to fail the translation.</p>\n\n<p>Some compilers are nice enough (or pervert enough) to not require the cast. They usually behave as if you explicitly put the cast.</p>\n\n<pre><code> char *p = NULL;\n int *q =  NULL;\n\n p = q;  // not valid in C\n</code></pre>\n\n<p>In summary you should always put the cast when converting pointers to pointers for portability reasons.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Outside portability, an example where not casting can cause you real problems is for example with variadic functions. Let's assume an implementation where the size of <code>char *</code> is larger than the size of <code>int *</code>. Let's say the function expects the type of one argument to be <code>char *</code>. If you want to pass an argument of <code>int *</code>, you then have to cast it to <code>char *</code>. If you don't cast it, when the function will access the <code>char *</code> object some bits of the object will have an indeterminate value and the bevahior will be undefined.</p>\n\n<p>A somewhat close example is with <code>printf</code>, if a user fails to cast to <code>void *</code> the argument for the <code>p</code> conversion specifier, C says it invokes undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 1328, "user_id": 2697817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/241e4153ea3a3c484c6947f1e774ef32?s=128&d=identicon&r=PG&f=1", "display_name": "user2697817", "link": "https://stackoverflow.com/users/2697817/user2697817"}, "edited": false, "score": 0, "creation_date": 1431590977, "post_id": 30224697, "comment_id": 48567346, "body": "Is this assuming an int is only 2 bytes?"}], "tags": [], "owner": {"reputation": 2890, "user_id": 2453173, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/N9dnT.jpg?s=128&g=1", "display_name": "Ankit Zalani", "link": "https://stackoverflow.com/users/2453173/ankit-zalani"}, "is_accepted": false, "score": 1, "last_activity_date": 1431549297, "creation_date": 1431549297, "answer_id": 30224697, "question_id": 30224316, "link": "https://stackoverflow.com/questions/30224316/not-casting-pointers-in-c-can-cause-problems/30224697#30224697", "title": "Not casting pointers in C can cause problems?", "body": "<p>Casting for pointers is essential to say the compiler how to perform pointer arithmetic.</p>\n\n<p>For example if x is a character pointer pointing to memory 2001, x++ should go to 2002, but if x is an integer pointer x++ should be 2003 </p>\n\n<p>so if type casting is not done for pointers compiler won't be able to perform pointer arithematic properly.</p>\n"}, {"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1431551476, "post_id": 30224728, "comment_id": 48554349, "body": "An interesting thing is <code>malloc</code>, for which C standard make explicit effort to make casting its return value safe and portable, like forcing pointer returned by <code>malloc</code> be maximum-naturally-aligned."}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1431568681, "post_id": 30224728, "comment_id": 48559799, "body": "Er. Doesn&#39;t it also guarantee that <code>void *</code> can represent any pointer to type other than function pointers? I&#39;d have sworn that it did. But then I&#39;ve been wrong before."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 2, "creation_date": 1431575604, "post_id": 30224728, "comment_id": 48561379, "body": "@dmckee: Yes, <code>void *</code> <i>can</i> represent any data pointer value, but that simply means that any data pointer can be converted to <code>void *</code> without any loss of information. I.e. you can convert any data pointer <code>T *</code> to <code>void *</code> and then convert it back to <code>T *</code> and obtain the original <code>T *</code> value. This is guaranteed by the language. Note that for that <code>void *</code> does not have to use the same representation in memory as all other data pointer types. It can have a completely different representation, as long as that representation guarantees that pointer value is preserved."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 2, "creation_date": 1431575671, "post_id": 30224728, "comment_id": 48561397, "body": "@dmckee: Meanwhile, the OP&#39;s quote makes a much stronger assertion: <i>&quot;all pointers are represented the same way in memory&quot;</i>. This is a completely different story. And this is not true. The OP&#39;s quote claims that, among other things, a conversion between pointer types is purely conceptual, it is a no-op in the generated code. It is indeed so in most practical cases, but the formal language definition says that converting some <code>T *</code> to <code>void *</code> might involve some actual &quot;work&quot;."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 1, "creation_date": 1431575869, "post_id": 30224728, "comment_id": 48561454, "body": "@dmckee: And converting <code>void *</code> back to <code>T *</code> might involve some actual &quot;work&quot;. This is OK, as long as such round-trip conversion preserves the original <code>T* </code> value."}, {"owner": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "edited": false, "score": 0, "creation_date": 1431648600, "post_id": 30224728, "comment_id": 48599436, "body": "@AnT Thanks for your answer and comments. It was VERY helpful. One point about your comments I&#39;m not sure yet: The difference between a void pointer and any other pointer is just that <i>the language guarantees that the programmer can convert from one pointer to another without any loss of information?</i> I mean, this is the reason why the void pointer is &quot;special&quot;? If so, could you give an example when converting one non-void pointer to another non-void pointer could become a problem? For example, converting one int pointer to a double pointer and then converting it back could cause problems?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "edited": false, "score": 1, "creation_date": 1431657538, "post_id": 30224728, "comment_id": 48601742, "body": "@felipeek: Precisely. The language spec says that round-trip conversion <code>T * -&gt; U * -&gt; T *</code> is possible only if the original <code>T *</code> pointer value is also properly aligned for the <code>U *</code> type. Obviously, if <code>U</code>&#39;s alignment requirements are stricter than <code>T</code>&#39;s you can easily violate that requirement . This causes undefined behavior at <code>T * -&gt; U *</code> stage already (per C99)."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "edited": false, "score": 1, "creation_date": 1431657724, "post_id": 30224728, "comment_id": 48601792, "body": "@felipeek: C++ is more permissive in that regard (at least in C++03). It says that converting to a type with the same or looser alignment requirements and then converting back produces the original pointer value. But converting to a type with <i>stricter</i> alignment requirements might &quot;ruin&quot; the pointer value irreversibly (the result is formally unspecified). This means that <code>int * -&gt; double * -&gt; int *</code> conversion might not produce the original value, if <code>double</code> has stricter alignment requirements than <code>int</code>."}, {"owner": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "edited": false, "score": 0, "creation_date": 1431719394, "post_id": 30224728, "comment_id": 48635093, "body": "@AnT Thanks, it was very helpful"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 11, "last_activity_date": 1431555743, "last_edit_date": 1431555743, "creation_date": 1431549392, "answer_id": 30224728, "question_id": 30224316, "link": "https://stackoverflow.com/questions/30224316/not-casting-pointers-in-c-can-cause-problems/30224728#30224728", "title": "Not casting pointers in C can cause problems?", "body": "<p>What your instructor said about all pointer types sharing the same representation is generally true for real-life implementations of C language.</p>\n\n<p>However, it is not true from the point of view of abstract C language itself. C language guarantees that </p>\n\n<ol>\n<li><code>char *</code> pointers are represented in the same way as <code>void *</code> pointers.</li>\n<li>Pointers to a qualified version of type <code>T</code> (<code>const</code>, <code>volatile</code>, <code>restrict</code>) are represented in the same way as pointers to unqualified <code>T</code>.</li>\n<li>Pointers to all struct types are represented identically.</li>\n<li>Pointers to all union types are represented identically.</li>\n</ol>\n\n<p>That is all. No other guarantees exist. Which means that as far as the language itself is concerned, <code>int *</code> pointer has different representation from <code>double *</code> pointer. And pointer to <code>struct S</code> is represented differently from pointer to <code>union U</code>.</p>\n\n<p>However, your example with <code>char_pointer</code> and <code>int_pointer</code>, as presented, is not exactly illustrative. The <code>char_pointer = int_pointer;</code> assignment is simply invalid (as in \"does not compile\"). Language does not support implicit conversions between incompatible pointer types. Such conversions always require an explicit cast operator.</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 4192910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNugl.jpg?s=128&g=1", "display_name": "iammowgli", "link": "https://stackoverflow.com/users/4192910/iammowgli"}, "is_accepted": false, "score": 2, "last_activity_date": 1431570124, "creation_date": 1431570124, "answer_id": 30228274, "question_id": 30224316, "link": "https://stackoverflow.com/questions/30224316/not-casting-pointers-in-c-can-cause-problems/30228274#30228274", "title": "Not casting pointers in C can cause problems?", "body": "<p>Casting from void* to a type i need in my program (e.g. int*, char*, struct x*) makes sense to me. But casting across other types i.e. int* to char* etc. can become problematic (due to the offsets being different for ints, chars etc). So be careful if doing so.</p>\n\n<p>But ... to specifically answer your question, consider the following:</p>\n\n<pre><code>int_pointer = malloc(2 * sizeof(int)); // 2 * 4 bytes on my system.\n*int_pointer = 44;\n*(int_pointer + 1 )= 55;\n\nprintf(\"Value at int_pointer = %d\\n\", *int_pointer); // 44\nprintf(\"Value at int_pointer + 1 = %d\\n\", *(int_pointer + 1)); // 55\n</code></pre>\n\n<p>(The offsets above will be in 4 byte increments.)</p>\n\n<pre><code>//char_pointer = int_pointer; // Gives a warning ...\nchar_pointer = (char*)int_pointer; // No warning.\nprintf(\"Value at char_pointer = %d\\n\", *char_pointer); // 0\nprintf(\"Value at char_pointer = %d\\n\", *(char_pointer+1)); // 0\nprintf(\"Value at char_pointer = %d\\n\", *(char_pointer+2)); // 0\nprintf(\"Value at char_pointer = %d\\n\", *(char_pointer+3)); // 44 &lt;==\n</code></pre>\n\n<p>Four bytes were allocated to the int value of 44. Binary representation of 44 is 00101100 ... the remaining 3 bytes are all 0s. So when accessing using char* pointer, we increment 1 byte at a time and get the above values.</p>\n"}], "owner": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2147, "favorite_count": 5, "accepted_answer_id": 30224728, "answer_count": 6, "score": 13, "last_activity_date": 1431570124, "creation_date": 1431547825, "question_id": 30224316, "link": "https://stackoverflow.com/questions/30224316/not-casting-pointers-in-c-can-cause-problems", "title": "Not casting pointers in C can cause problems?", "body": "<p>Yesterday I was in class, and at some point the instructor was talking about C code. He said: </p>\n\n<blockquote>\n  <p>What is the purpose of making a pointer cast in C? The only purpose\n  is to make the compiler interpret correctly the pointer operations\n  (for example, adding an int pointer will result in a different offset\n  than adding a char pointer). Apart from that, there is no difference: all pointers are represented the same way in memory, regardless if the pointer is pointing to an int value, a char value, a short value, or whatever. So, casting a pointer will not modify anything in the memory, it will just help the programmer with operations more related with the pointer-type he is dealing with.</p>\n</blockquote>\n\n<p>However, I have read, specially here in Stack Overflow, that this is not 100% true. I have read that in some weird machines, pointers for different types can be stored in different ways in memory. In this case, not changing the pointer to the correct type could cause problems if the code is compiled to this kind of machine.</p>\n\n<p>Basically, this is the kind of code I'm talking about. Consider the code below:</p>\n\n<pre><code>int* int_pointer;\nchar* char_pointer;\nint_pointer = malloc(sizeof(int));\n*int_pointer = 4;\n</code></pre>\n\n<p>And now two options:</p>\n\n<p>1.</p>\n\n<pre><code>char_pointer = (char *)int_pointer;\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>char_pointer = int_pointer;\n</code></pre>\n\n<p>The code on case 2 could became a problem? Making the cast (case 1) would eventually change the pointer format in memory (if yes, could you give an example of machine?)?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "pointers", "static-allocation"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1431548074, "post_id": 30224308, "comment_id": 48552610, "body": "A pointer is a pointer is a pointer. When you increment a pointer using pointer arithmetic, it increments by an even amount of the byte size of the data type that it is pointing at.  You cannot increment an array, but <code>int a[]</code> decays to <code>int *a</code>, so <code>a</code> increments in <code>sizeof(int)</code> steps. <code>int a[][]</code> decays into <code>int **a</code>, so <code>a</code> increments in <code>sizeof(int*)</code> steps."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1431549093, "post_id": 30224308, "comment_id": 48553113, "body": "@RemyLebeau I think in the second example the parameter is <i>adjusted to</i> <code>int (*)[M]</code>."}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1431550708, "post_id": 30224308, "comment_id": 48553918, "body": "@RemyLebeau There is no array-to-pointer <i>decay</i> going on here. <b>Array parameters</b> are silently <i>rewritten</i> by the compiler to <b>pointer parameters</b>. There is absolutely no difference between <code>void f(int a[])</code> and <code>void f(int * a)</code>. The signatures are completely equivalent."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1431549022, "last_edit_date": 1431549022, "creation_date": 1431548038, "answer_id": 30224375, "question_id": 30224308, "link": "https://stackoverflow.com/questions/30224308/incrementing-pointer-to-static-allocated-array/30224375#30224375", "title": "Incrementing pointer to static allocated array", "body": "<p>In the both cases the pointers are incremented only once.:)</p>\n\n<pre><code>a++;\n</code></pre>\n\n<p>Their values are changed by the sizeof of the types of objects they point to. So the value of the first pointer is changed by <code>sizeof( int )</code> and the value of the second pointer is changed by <code>sizeof( int[M] )</code>\nTake into account that parameter <code>int a[][M]</code> is adjusted to <code>int ( *a )[M]</code></p>\n\n<p>Thus within the functions the both pointers will point to second elements of the arrays. For the two-dimensional array its element is one-dimensional array. And this statement</p>\n\n<pre><code>printf(\"%d\", *a[0]);\n</code></pre>\n\n<p>will output the first element (integer) of the second \"row\" of the two-dimensional array.</p>\n"}], "owner": {"reputation": 763, "user_id": 4778343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kDMZU.jpg?s=128&g=1", "display_name": "Stefan Golubovi\u0107", "link": "https://stackoverflow.com/users/4778343/stefan-golubovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 30224375, "answer_count": 1, "score": 1, "last_activity_date": 1431561567, "creation_date": 1431547806, "last_edit_date": 1431561567, "question_id": 30224308, "link": "https://stackoverflow.com/questions/30224308/incrementing-pointer-to-static-allocated-array", "title": "Incrementing pointer to static allocated array", "body": "<p>By how much is pointer <strong>incremented</strong> in these situations and why?</p>\n\n<pre><code>void f(int a[])\n{\n    a++;\n    printf(\"%d\", *a);\n}\n\nvoid g(int a[][M])\n{\n    a++;\n    printf(\"%d\", *a[0]);\n}\n</code></pre>\n\n<p>Lets say that in <code>main</code> I have a <strong>static allocated</strong> array with <strong>n</strong> elements and <strong>static allocated</strong> matrix (<em>2D array</em>) with <strong>n</strong> rows and <strong>M</strong> columns and I'm calling functions <strong>f</strong> and <strong>g</strong> (<em>I couldn't write this in code because I was unable to post the question with a lot of code and almost no text</em>).</p>\n"}, {"tags": ["c", "algorithm", "graph"], "comments": [{"owner": {"reputation": 14708, "user_id": 1041822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fc976c3c3e2819f639f300378692c6d?s=128&d=identicon&r=PG", "display_name": "higuaro", "link": "https://stackoverflow.com/users/1041822/higuaro"}, "edited": false, "score": 0, "creation_date": 1431549372, "post_id": 30223930, "comment_id": 48553253, "body": "Floyd Warshall deals with negative distances between nodes"}, {"owner": {"reputation": 105, "user_id": 3693423, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2c6c09575ee93557614b3994f59f9e0?s=128&d=identicon&r=PG&f=1", "display_name": "user3693423", "link": "https://stackoverflow.com/users/3693423/user3693423"}, "edited": false, "score": 0, "creation_date": 1511075369, "post_id": 30223930, "comment_id": 81701557, "body": "How can you transform the input to this edges, if i can move left, what can change?"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4887228, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f7567e2304e25f16d8b7436cc39a710?s=128&d=identicon&r=PG&f=1", "display_name": "Jozef Bugo\u0161", "link": "https://stackoverflow.com/users/4887228/jozef-bugo%c5%a1"}, "edited": false, "score": 0, "creation_date": 1431611428, "post_id": 30225431, "comment_id": 48579577, "body": "Thank you, this is fast enough, but I am not sure, that I know, what is this algorithm doing. Can you please explain it to me? And, can I find out which vertices are in the largest path? Because I need write a path, like this,for same matrix as above: DRDRRDR   (D-Down; R-Right)"}], "tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 3, "last_activity_date": 1431625404, "last_edit_date": 1431625404, "creation_date": 1431552267, "answer_id": 30225431, "question_id": 30223930, "link": "https://stackoverflow.com/questions/30223930/bellman-ford-algorithm-for-one-vertex/30225431#30225431", "title": "Bellman-ford algorithm for one vertex", "body": "<p>There is an algorithmic improvement that is possible : in your case, the complexity can be <code>O(N)</code> where <code>N</code> is the number of points on your image. </p>\n\n<p>The <a href=\"http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm\" rel=\"nofollow\">Bellman-Ford algorithm</a> is designed to handle any <a href=\"http://en.wikipedia.org/wiki/Directed_graph\" rel=\"nofollow\">weighted digraph</a>. Its complexity in the worst case is <code>O(mn)</code> where <code>n</code> is the number of node and <code>m</code> the number of edges.</p>\n\n<p>Notice that your digraph is <a href=\"http://en.wikipedia.org/wiki/Directed_acyclic_graph\" rel=\"nofollow\">acyclic</a> : there is no oriented cycles in your graph. From any points, there are \"future points\" (you visit them in the future) and \"past points\" (you may come from there). This property is used by the  Kahn algorithm to perform <a href=\"http://en.wikipedia.org/wiki/Topological_sorting\" rel=\"nofollow\">topological sorting</a>. Finally, the shortest path algorithm in such a digraph relies on a topological ordering and the total complexity is <code>O(n+m)</code> ! </p>\n\n<p>Since you are working on an array, and since only top->bottom and left->right movements are allowed, it is easy to find a topological ordering. Just visit the lines one after another, from left to right and update the maximum distance on the way ! At the end of the program, the image is populated with max distances from the source. There are four different cases :</p>\n\n<ul>\n<li><code>i==0 &amp;&amp; j==0</code> : this is the source point. Its max distance is equal to its weight.</li>\n<li><code>i==0 &amp;&amp; j!=0</code> : this is a point in the first line. The only way to get there is to go left. So its max distance is the sum of weights from the beginning of the line.</li>\n<li><code>i!=0 &amp;&amp; j==0</code> : this is a point in the first column. The only way to get there is to go down. So its max distance is the sum of weights from the beggining of the column.</li>\n<li><code>i!=0 &amp;&amp; j!=0</code> : the general case. Notice that the points <code>(i-1,j)</code> and <code>(i,j-1)</code> already host the max distances from the source. The max distance to point <code>(i,j)</code> is the largest of these two distances plus the weight of point <code>(i,j)</code>.</li>\n</ul>\n\n<p>The final array stores the maximum distance from the source. An additional array stores the path information (where does the max come from ?).</p>\n\n<p>First line :</p>\n\n<pre><code>1 3 8 9 11    s l l l l\n</code></pre>\n\n<p>Second line :</p>\n\n<pre><code>1 3 8 9  11    s l l l  l\n4 6 9 11 12    u l u lu lu\n</code></pre>\n\n<p>Thrid line :</p>\n\n<pre><code>1 3  8  9  11    s l l l  l\n4 6  9  11 12    u l u lu lu\n5 10 13 15 16    u u l l  l\n</code></pre>\n\n<p>Last line :</p>\n\n<pre><code>1 3  8  9  11    s l l l  l\n4 6  9  11 12    u l u lu lu\n5 10 13 15 16    u u l l  l\n8 11 15 17 19    u u u lu l\n</code></pre>\n\n<p>Thanks to the array on the right, the 2 longest paths can easily be retreived. The array is read only once : this trick should reduce your computational time by a few orders of magnitude and it still provides you with the exact solution !</p>\n\n<p>If it remains too slow and if an approximated solution is enough, take a look at <a href=\"http://en.wikipedia.org/wiki/Simulated_annealing\" rel=\"nofollow\">simulated annealing</a>. The space to explore would be paths such as <code>DDRRRDR</code> with <code>n-1</code> <code>D</code> (down) and <code>m-1</code> <code>R</code> (right). The energy would be <code>-distance(DDRRRDR)</code> and a minor modification would be swapping one D and one R.</p>\n\n<p>Here is an example code of the exact solution (not annealing), to be compiled by <code>gcc main.c -o main -Wall</code>. EDIT : it also prints one of the path of max length now.</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;stdlib.h&gt;\n\n\n\ntypedef enum {S,L,U,LU} Direction;\n\n\nint main(void)\n{\n    FILE * pFile;\n    int n=1,m=1,i,j;\n    int* image;\n    pFile = fopen (\"image.txt\",\"r\");\n    if (pFile!=NULL)\n    {\n        if(fscanf(pFile,\"%d%d\",&amp;n,&amp;m)!=2){printf(\"read failed\\n\");exit(1);}\n        image=malloc(n*m*sizeof(int));\n        if(image==NULL){printf(\"malloc failed\\n\");exit(1);}\n        for(i=0;i&lt;n*m;i++){\n            if(fscanf(pFile,\"%d\",&amp;image[i])!=1){printf(\"read failed %d\\n\",i);exit(1);}\n        }\n        fclose (pFile);\n    }else{printf(\"file open failed\\n\");exit(1);}\n\n    Direction* directions=malloc(n*m*sizeof(Direction));\n\n    for(i=0;i&lt;n;i++){\n        for(j=0;j&lt;m;j++){\n            //getting the direction of max\n            if(i==0 &amp;&amp; j==0){\n                directions[i*m+j]=S;\n            }\n            if(j==0 &amp;&amp; i&gt;0){\n                directions[i*m+j]=U;\n            }\n            if(j&gt;0 &amp;&amp; i==0){\n                directions[i*m+j]=L;\n            }\n            if(j&gt;0 &amp;&amp; i&gt;0){\n                if(image[i*m+(j-1)]&gt;image[(i-1)*m+j]){\n                    directions[i*m+j]=L;\n                }else{\n                    if(image[i*m+(j-1)]&lt;image[(i-1)*m+j]){\n                        directions[i*m+j]=U;\n                    }else{\n                        directions[i*m+j]=LU;\n                    }\n                }\n            }\n            //setting the new value of image[i*m+j]\n            if(directions[i*m+j]==L){\n                image[i*m+j]+=image[i*m+j-1];\n            }else{\n                if(directions[i*m+j]==U || directions[i*m+j]==LU){\n                    image[i*m+j]+=image[(i-1)*m+j];\n                }\n            }\n\n        }\n    }\n\n    printf(\"max distance is %d\\n\",image[n*m-1]);\n\n            printf(\"A path from the end is\\n\");\n    char path[n+m-1];\n    path[n+m-2]='\\0';\n    int cnt=n+m-3;\n    i=n-1;\n    j=m-1;\n    printf(\"(%d %d)\\n\",i,j);\n    while(i!=0 || j!=0){\n        if(directions[i*m+j]==LU){printf(\"many possible max path. going left\\n\");}\n        if(directions[i*m+j]==U){\n            printf(\"D \");\n            path[cnt]='D';\n            i--;\n        }else{\n            printf(\"R \");\n            path[cnt]='R';\n            j--;\n        }\n        cnt--;\n        printf(\"(%d %d)\\n\",i,j);\n    }\n\n    printf(\"A max path is %s\\n\",path);\n    free(directions);\n    free(image);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The image is provided in file <code>image.txt</code> which looks like :</p>\n\n<pre><code>4 5\n1 2 5 1 2\n3 2 1 2 1\n1 4 3 2 1\n3 1 2 2 2\n</code></pre>\n\n<p>A. B. Khan , <a href=\"http://dl.acm.org/citation.cfm?doid=368996.369025\" rel=\"nofollow\">Topological sorting of large networks</a> Communications of the ACM \nVolume 5 Issue 11, Nov. 1962\nPages 558-562  doi:10.1145/368996.369025</p>\n"}], "owner": {"reputation": 137, "user_id": 4887228, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f7567e2304e25f16d8b7436cc39a710?s=128&d=identicon&r=PG&f=1", "display_name": "Jozef Bugo\u0161", "link": "https://stackoverflow.com/users/4887228/jozef-bugo%c5%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 30225431, "answer_count": 1, "score": 4, "last_activity_date": 1431697191, "creation_date": 1431546444, "last_edit_date": 1431697191, "question_id": 30223930, "link": "https://stackoverflow.com/questions/30223930/bellman-ford-algorithm-for-one-vertex", "title": "Bellman-ford algorithm for one vertex", "body": "<p>I have a task to do algorithm, which will find the longest path in a graph. I will have on the input two numbers <code>(N,M)</code>, which mean size of matrix, and <code>N*M</code> numbers. They mean value of each vertex. I must find the longest path from first vertex to last and I can move only down or right. So input for example:</p>\n\n<pre><code>4 5\n1 2 5 1 2\n3 2 1 2 1\n1 4 3 2 1\n3 1 2 2 2\n</code></pre>\n\n<p>And output is </p>\n\n<pre><code>19    \n</code></pre>\n\n<p>The longest path includes in order these vertices: <code>1,3,2,4,3,2,2,2</code></p>\n\n<p>I have used Bellman-Ford algorithm, because I have changed value of each vertex to negative. But this algorithm is just too slow for big numbers of vetices (1000x1000). Is there any option to change this algorithm to find only largest way between two vertices (first and last), instead of way between first and every other vertex? Here is my code:</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;stdlib.h&gt;\n\n\ntypedef struct {\n    int source;\n    int dest;\n    int weight;\n} Edge;\n\nvoid BellmanFord(Edge edges[], int edgecount, int nodecount, int source)\n{\n    int *distance = malloc(nodecount * sizeof *distance);\n    int i, j;\n\n    distance[source] = -1;\n\n    for (i=0; i &lt; nodecount; ++i) {\n        for (j=0; j &lt; edgecount; ++j) {\n            if (distance[edges[j].source] &lt; 0) {\n                int new_distance = distance[edges[j].source] + edges[j].weight;\n                if (new_distance &lt; distance[edges[j].dest])\n                  distance[edges[j].dest] = new_distance;\n            }\n        }\n    }\n    printf(\"%d\\n\",-distance[nodecount-1]-1);\n    free(distance);\n    return;\n}\n\nint main(void)\n{\n    Edge *edges;\n    edges = malloc(2000000*sizeof(Edge));\n    int n,m,i,k,chodbapomoc,q = 0,p = 0,pamat;\n    scanf(\"%d %d\",&amp;n,&amp;m);\n    for(i = 0; i &lt; n*m;i++){    //this is transformation of input to edges \n       if(i != n*m-1)           //list, so i can go only down or right \n           scanf(\"%d\",&amp;chodbapomoc);\n       if(p%m != m-1 &amp;&amp; p != 0){\n          edges[q].source = p;\n          edges[q].dest = p+1;\n          edges[q++].weight = -chodbapomoc;\n       }\n       else if(i == 0){\n          k = chodbapomoc;\n          scanf(\"%d\",&amp;chodbapomoc);\n          edges[q].source = p;\n          edges[q].dest = p+1;\n          edges[q++].weight = -chodbapomoc-k;\n       }\n       if(p &gt; m-1 &amp;&amp; p != m){\n          edges[q].source = p-m;\n          edges[q].dest = p;\n          edges[q++].weight = -pamat;\n       }\n       else if(i == m-1){\n          edges[q].source = 0;\n          edges[q].dest = m;\n          edges[q++].weight = -chodbapomoc-k;\n       }\n       pamat = chodbapomoc;\n       p++;\n    }\n    BellmanFord(edges, q, n*m, 0);\n    return 0;\n}\n</code></pre>\n\n<p>Or is there other option, faster than this, to find the longest path in DAG?\nAnd, is there any way to remember which verices are in the largest path?</p>\n\n<p>Thanks for respond  </p>\n"}, {"tags": ["c++", "c", "dll", "operating-system"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1431546418, "post_id": 30223897, "comment_id": 48551739, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19418908/creating-a-portable-library-to-run-on-both-linux-and-windows\">Creating a portable library to run on both linux and windows</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1431546623, "post_id": 30223897, "comment_id": 48551833, "body": "This is one of the big things pre processor directives are used for."}, {"owner": {"reputation": 476, "user_id": 4866874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1tfCr.jpg?s=128&g=1", "display_name": "the accountant", "link": "https://stackoverflow.com/users/4866874/the-accountant"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1431546997, "post_id": 30223897, "comment_id": 48552044, "body": "@NathanOliver thanks , so that means the libraries have different implementations for different OS&#39;s and when compiling my program the correct implementation will be taken from the static library ?"}, {"owner": {"reputation": 476, "user_id": 4866874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1tfCr.jpg?s=128&g=1", "display_name": "the accountant", "link": "https://stackoverflow.com/users/4866874/the-accountant"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1431547101, "post_id": 30223897, "comment_id": 48552101, "body": "@Ken White thanks , the question you put  emphasizes that there are different dlls for different OS&#39;s, is that correct ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1431547177, "post_id": 30223897, "comment_id": 48552145, "body": "@big.heart Yes.  You basically have code to deal with each OS in the program and you use the pre processor to determine which code to actually use."}, {"owner": {"reputation": 1744, "user_id": 2597900, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7a6a8c9e5f836f6874969a8a59801fb6?s=128&d=identicon&r=PG", "display_name": "programmerjake", "link": "https://stackoverflow.com/users/2597900/programmerjake"}, "edited": false, "score": 1, "creation_date": 1431547351, "post_id": 30223897, "comment_id": 48552254, "body": "See also <a href=\"http://stackoverflow.com/questions/5919996/how-to-detect-reliably-mac-os-x-ios-linux-windows-in-c-preprocessor#5920028\" title=\"how to detect reliably mac os x ios linux windows in c preprocessor%235920028\">stackoverflow.com/questions/5919996/&hellip;</a>"}, {"owner": {"reputation": 476, "user_id": 4866874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1tfCr.jpg?s=128&g=1", "display_name": "the accountant", "link": "https://stackoverflow.com/users/4866874/the-accountant"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1431547353, "post_id": 30223897, "comment_id": 48552256, "body": "@NathanOliver, I got it, but what about the dynamic linking ? are the dll&#39;s have different implementations inside their binary code that will execute differently at run time depends on the OS&#39;s they are on ?"}, {"owner": {"reputation": 1744, "user_id": 2597900, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7a6a8c9e5f836f6874969a8a59801fb6?s=128&d=identicon&r=PG", "display_name": "programmerjake", "link": "https://stackoverflow.com/users/2597900/programmerjake"}, "edited": false, "score": 1, "creation_date": 1431547429, "post_id": 30223897, "comment_id": 48552288, "body": "@big.heart generally there is a seperate .dll (or .so for linux or .dylib for OS X) for each operating system."}], "answers": [{"tags": [], "owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "is_accepted": false, "score": 1, "last_activity_date": 1431547762, "last_edit_date": 1431547762, "creation_date": 1431547428, "answer_id": 30224204, "question_id": 30223897, "link": "https://stackoverflow.com/questions/30223897/how-can-libraries-achieve-portability-among-different-os/30224204#30224204", "title": "how can libraries achieve portability among different OS", "body": "<p>A quick example..</p>\n\n<pre><code>#ifdef OS_WINDOWS\n   //definition for Windows\n#else\n  //define it for Unix\n#endif\n</code></pre>\n\n<p>They use pre-processor to determine OS, some pointer tricks to determine endianness. Nothing too complex in general.\nOnce stds determine the OS, using the pre-defined definitions.. they use the appropriate code that relates.</p>\n\n<pre><code>// Real-life example:\nif(definition == 2) system(\"cls\");\nelse system(\"clear\");\n</code></pre>\n"}], "owner": {"reputation": 476, "user_id": 4866874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1tfCr.jpg?s=128&g=1", "display_name": "the accountant", "link": "https://stackoverflow.com/users/4866874/the-accountant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431547762, "creation_date": 1431546306, "question_id": 30223897, "link": "https://stackoverflow.com/questions/30223897/how-can-libraries-achieve-portability-among-different-os", "title": "how can libraries achieve portability among different OS", "body": "<p>like c/c++ standard libraries.</p>\n\n<p>since the functions in the standard library eventually will call a specific OS API's to do it's jobs , how can these language libraries achieve portability, if I wanted to compile my code to run on other Os.\nwill the libraries change it's code(the calls to the particular Os APIs) ?, is there different versions of these libraries target different OS's  ?. or what ?\nthanks in advance.</p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1431547319, "post_id": 30223851, "comment_id": 48552238, "body": "If you want to pthread_join it, why detach it, why not keep it joinable? <code>while (pthread_kill(bleep_id, 0) == 0) {}</code> is busy-waiting, but it looks like it should do the trick for a detached thread (except for one super-unlikely corner case)."}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1431548281, "post_id": 30224221, "comment_id": 48552725, "body": "A thread does not have to call <code>pthread_exit</code>. Returning from the thread functions is equivalent."}, {"owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1431550095, "post_id": 30224221, "comment_id": 48553619, "body": "@Lukas, I ran into that problem with waiting for a thread to really &quot;exist&quot; already with this project.  I solved that by setting a semaphore <code>bleep_ready</code> as soon as execution in <code>bleep()</code> starts."}, {"owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1431550605, "post_id": 30224221, "comment_id": 48553875, "body": "@Lukas, for some silly reason I called <code>pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_DETACHED);</code> in the function that does the thread-creating.  When I removed that call, <code>pthread_join()</code> works as expected."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1431602358, "post_id": 30224221, "comment_id": 48573802, "body": "@Frotz: Even if you set the semaphore as 1st statement inside the thread, there still is a race as the thread started earlier. This is unsave."}, {"owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1431668964, "post_id": 30224221, "comment_id": 48605021, "body": "@alk: What about if the semaphore is set after some code in the thread?"}], "tags": [], "owner": {"reputation": 2771, "user_id": 4163321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZrgsU.gif?s=128&g=1", "display_name": "Lukas Thomsen", "link": "https://stackoverflow.com/users/4163321/lukas-thomsen"}, "is_accepted": true, "score": 1, "last_activity_date": 1431548096, "last_edit_date": 1431548096, "creation_date": 1431547494, "answer_id": 30224221, "question_id": 30223851, "link": "https://stackoverflow.com/questions/30223851/correctly-waiting-for-a-thread-to-terminate-in-c/30224221#30224221", "title": "Correctly waiting for a thread to terminate in C", "body": "<p>Hmm... <code>pthread_join</code> should do the job. As far as I remember the thread has to call <code>pthread_exit</code>...?</p>\n\n<pre><code>/* bleep thread */\nvoid *bleep(void *)\n{\n    /* do bleeping */\n\n    pthread_exit(NULL);\n}\n\n\n/* main thread */ \nif (pthread_create(&amp;thread, ..., bleep, ...) == 0)\n{\n    /*\n    **  Try sleeping for some ms !!!\n    **  I've had some issues on multi core CPUs requiring a sleep\n    **  in order for the created thread to really \"exist\"...\n    */\n\n    pthread_join(&amp;thread, NULL);\n}\n</code></pre>\n\n<p>Anyway if it isn't doing its thing you shouldn't poll a global variable since it will eat up your CPU. Instead create a mutex (<code>pthread_mutex_*</code>-functions) which is initially locked and freed by the \"bleep thread\". In your main thread you can wait for that mutex which makes your thread sleep until the \"bleep thread\" frees the mutex.</p>\n\n<p>(or quick &amp; and dirty: sleep for a small amount of time while waiting for bleep_playing becoming FALSE)</p>\n"}], "owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 30224221, "answer_count": 1, "score": 0, "last_activity_date": 1431548096, "creation_date": 1431546150, "question_id": 30223851, "link": "https://stackoverflow.com/questions/30223851/correctly-waiting-for-a-thread-to-terminate-in-c", "title": "Correctly waiting for a thread to terminate in C", "body": "<p>This code plays a sound clip by creating a thread to do it.  When bleep() runs, it sets the global variable bleep_playing to TRUE.  In its main loop, if it notices that bleep_playing has been set to FALSE, it terminates that loop, cleans up (closing files, freeing buffers), and exits.  I don't know the correct way to wait for a detached thread to finish.  pthread_join() doesn't do the job.  The while loop here continually checks bleep_id to see if it's valid.  When it isn't, execution continues.  Is this the correct and portable way to tell a thread to clean up and terminate before the next thread is allowed to be created?</p>\n\n<pre><code>    if (bleep_playing) {\n        bleep_playing = FALSE;\n        while (pthread_kill(bleep_id, 0) == 0) {\n            /* nothing */\n        }\n    }\n    err = pthread_create(&amp;bleep_id, &amp;attr, (void *) &amp;bleep, &amp;effect);\n</code></pre>\n\n<p>I</p>\n"}, {"tags": ["c", "arrays", "string", "char"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3191398"}, "edited": false, "score": 0, "creation_date": 1431550523, "post_id": 30223852, "comment_id": 48553829, "body": "if i do something like: strcpy(name, &quot;john&quot;); . Is this change (name) pointer address?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431581543, "post_id": 30223852, "comment_id": 48563033, "body": "@user3191398 no, this does not change the <i>pointer</i>, it changes the containt of the memory area pointed to by the pointer."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1431546675, "last_edit_date": 1431546675, "creation_date": 1431546151, "answer_id": 30223852, "question_id": 30223809, "link": "https://stackoverflow.com/questions/30223809/simple-char-table-writing-in-c/30223852#30223852", "title": "Simple char table writing in C", "body": "<blockquote>\n  <p><em>Why it doesn't change table: <code>name</code>?</em></p>\n</blockquote>\n\n<p>Simple, because <code>n</code> points to the base address of the compile time allocated array <code>name</code>, which cannot be populated by <strong>assignment</strong>. To populate <code>name</code> itself, Use <code>strcpy()</code> instead.</p>\n\n<p>In other words, once we write</p>\n\n<pre><code> n = \"John\";\n</code></pre>\n\n<p>then <code>n</code> does not point to <code>name</code> anymore. It becomes a pointer to the <em>string literal</em> <code>\"John\"</code>. So, the content of <code>name</code> is unchanged.</p>\n\n<blockquote>\n  <p><em>how to write text to <code>char</code> table?</em></p>\n</blockquote>\n\n<p>use <code>strcpy()</code> like</p>\n\n<pre><code>  strcpy(n, \"john\");\n</code></pre>\n\n<p>or, getting rid of the pointer variable altogether, you can write</p>\n\n<pre><code> strcpy(name, \"john\");\n</code></pre>\n\n<p>directly.</p>\n"}, {"tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": false, "score": 1, "last_activity_date": 1431546574, "last_edit_date": 1431546574, "creation_date": 1431546273, "answer_id": 30223886, "question_id": 30223809, "link": "https://stackoverflow.com/questions/30223809/simple-char-table-writing-in-c/30223886#30223886", "title": "Simple char table writing in C", "body": "<p>The reason is that <code>n</code> is a pointer that changes what it points to. The variable <code>name</code> is at a fixed location in memory. The first assignment <code>n = name;</code> sets the pointer <code>n</code> to point to <code>name</code>. The second assignment <code>n = \"John\";</code> sets the pointer <code>n</code> to point to the constant string <code>\"John\"</code>. After the second assignment, <code>n</code> no longer points to <code>name</code>.</p>\n\n<p>In order to copy a string into <code>name</code> through the <code>n</code> pointer, use <code>strcpy()</code>:</p>\n\n<pre><code>strcpy(n, \"John\");\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3191398"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1431546675, "creation_date": 1431545983, "last_edit_date": 1431546545, "question_id": 30223809, "link": "https://stackoverflow.com/questions/30223809/simple-char-table-writing-in-c", "title": "Simple char table writing in C", "body": "<p>Hi how to write text to <code>char</code> table (<code>name</code>)?</p>\n\n<p>I am trying:</p>\n\n<pre><code>char name[10];\nchar * n = name;\nn = \"John\";\n</code></pre>\n\n<p>Why it doesnt change table: name?</p>\n"}, {"tags": ["c", "string", "data-conversion"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1431545749, "post_id": 30223724, "comment_id": 48551384, "body": "so, you&#39;re telling you din&#39;t get the answer (ok, ok, hint, atleast) by searching SO?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1431545838, "post_id": 30223724, "comment_id": 48551439, "body": "I <i>honestly</i> can&#39;t believe googling for something relevant did <b>never</b> lead you to <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/strtol.html\" rel=\"nofollow noreferrer\"><code>strtol()</code></a>\u2026"}, {"owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "edited": false, "score": 2, "creation_date": 1431545876, "post_id": 30223724, "comment_id": 48551452, "body": "Typed &quot;convert binary to decimal in c&quot; in the search box. Received tons of already asked questions with the same matter"}, {"owner": {"reputation": 1, "user_id": 4897173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64bbaa9e4264af8dc7588282605f1eb?s=128&d=identicon&r=PG&f=1", "display_name": "ppf", "link": "https://stackoverflow.com/users/4897173/ppf"}, "edited": false, "score": 0, "creation_date": 1431546478, "post_id": 30223724, "comment_id": 48551765, "body": "It did, strtol works fine. The thing is can I do the same for other types or just write down my own converter? For example, strtod only work if i have the number as string (not bits of the number as string). Well, I still think it&#39;s a valid question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1431549097, "post_id": 30223724, "comment_id": 48553116, "body": "ouh, is google down again ?"}, {"owner": {"reputation": 1163, "user_id": 1447013, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/28LZ2.jpg?s=128&g=1", "display_name": "Daniel Rudy", "link": "https://stackoverflow.com/users/1447013/daniel-rudy"}, "edited": false, "score": 0, "creation_date": 1431581014, "post_id": 30223724, "comment_id": 48562860, "body": "He&#39;s asking how to convert a binary number in string format into the actual number."}, {"owner": {"reputation": 1, "user_id": 4897173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64bbaa9e4264af8dc7588282605f1eb?s=128&d=identicon&r=PG&f=1", "display_name": "ppf", "link": "https://stackoverflow.com/users/4897173/ppf"}, "edited": false, "score": 0, "creation_date": 1431614188, "post_id": 30223724, "comment_id": 48581609, "body": "Exactly what Daniel said. If it&#39;s an integer the job is quite easy with strtol (like many have &quot;kindly&quot; remarked). Nevertheless, for floating point this specific function won&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 1163, "user_id": 1447013, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/28LZ2.jpg?s=128&g=1", "display_name": "Daniel Rudy", "link": "https://stackoverflow.com/users/1447013/daniel-rudy"}, "is_accepted": false, "score": 0, "last_activity_date": 1431581413, "last_edit_date": 1431581413, "creation_date": 1431580669, "answer_id": 30229770, "question_id": 30223724, "link": "https://stackoverflow.com/questions/30223724/convert-string-containing-binary-representation-into-number-c/30229770#30229770", "title": "Convert string containing binary representation into number - C", "body": "<p>This is quite simple really...</p>\n\n<pre><code>unsigned int number;\nchar str[33];\nint i;\nint s;\n\n/* Read some 32-bit binary number in character representation in str. */\nDo some stuff.\n\n/* Convert from string to binary. */\nnumber = 0;\ns = strlen(str);\nfor (i = 0; i &lt; s; i++)\n  {\n    if (str[i] == 0x00) break;\n    if (str[i] == '0')\n      {\n        number |= 1;\n        number &lt;&lt; 1;\n      }\n    if (str[i] == '1')\n      {\n        number &amp;= 0xFFFFFFFE;\n        number &lt;&lt; 1;\n      }\n  }\n</code></pre>\n\n<p>Generally, you can find this on Google or in your textbook.  So you got this for free, this time.</p>\n\n<p>EDIT:</p>\n\n<p>I noticed that you also mentioned float or double as well.  Those are complicated data types that are defined by the <a href=\"http://en.wikipedia.org/wiki/IEEE_floating_point\" rel=\"nofollow\">IEEE-754</a> standard.  If the binary string is already in floating point representation, then you can just use a union to get from an unsigned int to one of the float types.  Code below:</p>\n\n<pre><code>union float_conversion_t\n  {\n    unsigned int i[2];\n    float f;\n    double d;\n  };\n</code></pre>\n\n<p>Here you datafill one or both integers and then read the float or double value.  You may need to adjust the size of the array depending on the word size of your machine (32-bit, 64-bit, or something else).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4897173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64bbaa9e4264af8dc7588282605f1eb?s=128&d=identicon&r=PG&f=1", "display_name": "ppf", "link": "https://stackoverflow.com/users/4897173/ppf"}, "is_accepted": false, "score": 0, "last_activity_date": 1431627590, "last_edit_date": 1495535049, "creation_date": 1431627590, "answer_id": 30244536, "question_id": 30223724, "link": "https://stackoverflow.com/questions/30223724/convert-string-containing-binary-representation-into-number-c/30244536#30244536", "title": "Convert string containing binary representation into number - C", "body": "<p>Thank you to Daniel and all other valid comments. </p>\n\n<p>The main question was if float/double conversions were possible with any preexisting function. My understanding after all this (correct me plz if I'm wrong) is no. </p>\n\n<p>So one must go trough the math and conversion for floating points (lots of documentation on IEEE 754 online...) and use strtol for integers. Fair enough.</p>\n\n<p>It may be of help to others:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/16164620/how-to-convert-an-ieee-754-single-precision-binary-floating-point-to-decimal\">Here's</a> a conversion of binary IEEE 754  as string to double</li>\n<li>But if you look for converting something like \"1001.1101\" (binary point representation) to float, <a href=\"http://www.cprogramto.com/c-program-convert-binary-float/\" rel=\"nofollow noreferrer\">this guy</a> did a nice job</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 4897173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64bbaa9e4264af8dc7588282605f1eb?s=128&d=identicon&r=PG&f=1", "display_name": "ppf", "link": "https://stackoverflow.com/users/4897173/ppf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 701, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1431627590, "creation_date": 1431545655, "question_id": 30223724, "link": "https://stackoverflow.com/questions/30223724/convert-string-containing-binary-representation-into-number-c", "title": "Convert string containing binary representation into number - C", "body": "<p>I have a binary message on a string. The string contains values such as \"10001000\" and it's being used as a buffer to store binary representations of different data types. I will parse the data and then convert each sequence. My struggle is to convert an specific string of 1s and 0s into: integer, float or double. A possible solution for the int is strtol, but it doesn't solve all my problem... </p>\n\n<p>I've read throw many discussions of people trying to create a string containing the binary representation of a number. But my issue is exactly the opposite: roll back the number once I have a string with it's binary representation. </p>\n\n<p>Any thoughts or advices will be most welcome.</p>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1431545527, "post_id": 30223632, "comment_id": 48551279, "body": "Somehow the title doesn&#39;t completely match the question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431546094, "post_id": 30223632, "comment_id": 48551571, "body": "@Sourav Ghosh <i>Exact-width integer types</i> such as <code>uint24_t</code> and <code>uint32_t</code> have different ranges but are specified to not have padding - they must be of different sizes.  So <i>exact-width integer types</i> are not proof other unsigned types must have different sizes."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1431546165, "post_id": 30223632, "comment_id": 48551607, "body": "@juanchopanza  Agree the connection is weak - do you have a suggestion - edit title at your pleasure."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1431549426, "post_id": 30223632, "comment_id": 48553280, "body": "The more interesting question is how would you tell the compiler you have a new type that&#39;s half-way between an <code>unsigned short</code> and <code>unsigned</code>? All the other <code>uintN_t</code> types are defined in terms of other primary types (e.g. <code>unsigned short int</code>, <code>unsigned int</code>, ...)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1431549756, "post_id": 30223632, "comment_id": 48553434, "body": "@David C. Rankin &quot;All the other <code>uintN_t</code> types are defined in terms of other primary types&quot; is not specified by C.  I&#39;ve worked with an embedded platform that have <code>uint24_t</code> and <code>uint48_t</code> and these types are not <code>unsigned char, unsigned short, unsigned, unsigned long, unsigned long long</code> which are 8,16,16,32,64 bits.  Such types like <code>uint24_t</code> can exist without matching some other type.  Also exact width types like <code>uint32_t</code> are not even required to exist."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1431550018, "post_id": 30223632, "comment_id": 48553575, "body": "That explains it! (must think out of the x86 box more often..)"}], "answers": [{"tags": [], "owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "is_accepted": true, "score": 2, "last_activity_date": 1431545630, "creation_date": 1431545630, "answer_id": 30223721, "question_id": 30223632, "link": "https://stackoverflow.com/questions/30223632/are-unsigned-integer-types-always-of-different-sizes/30223721#30223721", "title": "Are unsigned integer types always of different sizes?", "body": "<p>In general, yes, this is absolutely possible.</p>\n\n<p>For the specific case of the <code>uintN_t</code> types defined in <code>&lt;stdint.h&gt;</code>, as you noted (C11 \u00a77.20.1.1):</p>\n\n<blockquote>\n  <p>The typedef name uintN_t designates an unsigned integer type with width N\n  and no padding bits. Thus, uint24_t denotes such an unsigned integer\n  type with a width of exactly 24 bits.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431704147, "post_id": 30242730, "comment_id": 48626727, "body": "Did you mean &quot;the Standard provides <i>no</i> standard name&quot;? BTW, there are also <code>uint_leastN_t</code> and <code>uint_fastN_t</code>. I suspect the standard doesn&#39;t provide a name for, e.g., a type with that behaves like <code>uintN_t</code> but may have one or more padding bits because the need for such a type is rare. Cluttering <code>&lt;stdint.h&gt;</code> with an even larger variety of type names would not necessarily be a good thing (though arguably the requirements for <code>intN_t</code> are stricter than they need to be)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431704950, "post_id": 30242730, "comment_id": 48627258, "body": "@KeithThompson: A type like <code>uint_least16_t</code> is not guaranteed to wrap mod 65536 (and is in fact unlikely to do so).  As for type-name clutter, I think having a syntax to specify things parametrically would be better than having a huge number of identifiers, since while the number of parameters I would like to see isn&#39;t all that large, the total number of types one could construct from them would be, and since defining interactions between types parametrically would allow much cleaner rules than trying to define interactions between every possible combination of separately-named types."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431706065, "post_id": 30242730, "comment_id": 48628034, "body": "Actually <code>uint_least16_t</code> is very likely to wrap mod 65536; it will do so in any implementation that can support <code>uint16_t</code>. But you&#39;re right, it&#39;s not guaranteed. A parameterized integer type declaration syntax would be nice to have, but fitting it into the existing language could be difficult, and I don&#39;t expect to see it happen. The <code>[u]intN_t</code> types are adequate for systems that have 8-, 16-, 32-, and 64-bit integers and that use 2&#39;s-complement -- and these days that&#39;s the vast majority of modern systems."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431706189, "post_id": 30242730, "comment_id": 48628118, "body": "Someone could devise a parameterized integer type definition syntax and write a translator from that syntax to standard C, given information about the target C implementation. It would be an interesting project, it might be useful, and if successful it could encourage standardization in future C standard. On the other hand, the fact that I&#39;ve never heard of such a project likely indicates a lack of demand for it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431707112, "post_id": 30242730, "comment_id": 48628713, "body": "@KeithThompson: A suitably-designed parameterized type system could enable many relatively-straightforward and non-surprising optimizations which would not be legal under today&#39;s type system. For example, if a loop uses an index of type <code>int32_t</code>, a compiler would be entitled to assume it can&#39;t wrap if <code>int</code> is 32 bits, but <i>not if <code>int</code> is 64 bits</i>.  If a structure containing a 16-bit integer is loaded into a local variable and modified heavily while there, but never has its address taken, it may be useful for the compiler to regard its members as separate variables in separate registers..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431707768, "post_id": 30242730, "comment_id": 48629111, "body": "...with the 16-bit <code>integer</code> being promoted to 32 or 64 bits (so <code>foo.x=32767; foo.x++;</code> would be allowed to make <code>foo.x</code> hold 32768 rather than having defined behavior dictated that it must hold -32768) but there&#39;s no means by which a programmer can authorize such an optimization.  I would posit that the value of optimizations that would be straightforwardly enabled by type system improvements would far outweigh the total value of all possible optimizations that would be enabled through eliminating all forms of UB that code doesn&#39;t rely upon."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431708885, "post_id": 30242730, "comment_id": 48629735, "body": "@KeithThompson: Further, more generally, I would think it feasible, and a worthwhile goal, to add a means by which the vast majority of existing straightforwardly-written code for most platforms could be adapted to have a <i>single defined meaning</i> on every platform capable of compiling it, merely by adding and changing some declarations and standardized compiler directives.  C has historically been a systems-programming language.  Present trends are making it unsuitable for that purpose by taking forms of Undefined Behavior which historically meant &quot;do whatever the hardware does&quot;..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431709215, "post_id": 30242730, "comment_id": 48629934, "body": "...[which is of course often necessary in systems programming] and replacing them with &quot;assume no chain of events that would make them happen can occur&quot;. It&#39;s funny that people arguing for such treatment suggest I should use assembly language, when <i>the whole reason C was invented</i> was to minimize the need for assembly language in systems programming.  Giving programmers fine control when they need it, but allowing them to give the compiler freedom when they don&#39;t, would improve the usefulness of the language for both systems and application programming."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431710505, "post_id": 30242730, "comment_id": 48630651, "body": "You might consider collecting your thoughts into a blog post or something similar rather than scattering them across comments here."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 2, "last_activity_date": 1431702817, "last_edit_date": 1431702817, "creation_date": 1431621784, "answer_id": 30242730, "question_id": 30223632, "link": "https://stackoverflow.com/questions/30223632/are-unsigned-integer-types-always-of-different-sizes/30242730#30242730", "title": "Are unsigned integer types always of different sizes?", "body": "<p>It is entirely plausible that a system with a 36-bit memory bus and nine-bit <code>char</code> might, as a compatibility aid, include 8-bit, 16-bit, and 32-bit unsigned types(*) which wrap mod 256, 65536, and 4294967296, respectively.  Such types would use the same amount of storage as 9, 18, and 36-bit types, and would be stored essentially the same way, except that operations would mask off the upper bits.  Given a 16-bit unsigned variable <code>u</code>, a compiler could either implement <code>u++</code> to be equivalent to <code>u=(u+1) &amp; 65535;</code> and implement <code>u&gt;23</code> as an 18-bit compare, or could implement <code>u++</code> as an 18-bit increment and implement <code>u&gt;23</code> as <code>(u &amp; 65535)&gt;23</code>.</p>\n\n<p>(*) The Standard dictates that if <code>uint8_t</code>, <code>uint16_t</code>, and <code>uint32_t</code> are all defined, they must be stored using 8, 16, or 32 bits <em>and no padding bits</em>, so if a standards-compliant compiler for a 36-bit machine defines such power-of-two sized types, it must use other names; unfortunately, the Standard provides standard name for types which behave properly numerically but do not satisfy the expected storage layout.</p>\n"}], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 30223721, "answer_count": 2, "score": 4, "last_activity_date": 1431702817, "creation_date": 1431545278, "last_edit_date": 1431545844, "question_id": 30223632, "link": "https://stackoverflow.com/questions/30223632/are-unsigned-integer-types-always-of-different-sizes", "title": "Are unsigned integer types always of different sizes?", "body": "<p>Is it possible (conforming to the C spec) to have 2 unsigned integer types of different <em>ranges</em> yet of the same <em>size</em> (due to padding)?  </p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(void) {\n  printf(\"Size:%zu  Max:%llu\\n\", \n      sizeof(unsigned_32_t), (unsigned long long) ((unsigned_32_t) -1));\n  // Size:4 Max:4294967295\n\n  printf(\"Size:%zu  Max:%llu\\n\", \n      sizeof(unsigned_24_t), (unsigned long long) ((unsigned_24_t) -1));\n  // Size:4 Max:16777215\n\n  return 0;\n</code></pre>\n\n<p>Not using <em>Exact-width integer types</em>, which cannot have padding.</p>\n\n<p>Certainly this is not common - just wondering what the spec allows.</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 16278, "user_id": 4421474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b931f645dc56015b93aeaa5e20d0b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4421474/alex"}, "edited": false, "score": 0, "creation_date": 1431544899, "post_id": 30223488, "comment_id": 48550923, "body": "what do you mean by <code>empty word</code>? what is that? is it word <code>&#39;empty&#39;</code>? or just <code>spaces</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1431545294, "post_id": 30223488, "comment_id": 48551128, "body": "Why are you scanffing a char array into an integer var, (scanf(&quot;%s&quot;, &amp;word)?"}, {"owner": {"reputation": 1, "user_id": 4897155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2b859f633a4738e481789e0699e6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sev", "link": "https://stackoverflow.com/users/4897155/sev"}, "edited": false, "score": 0, "creation_date": 1431545471, "post_id": 30223488, "comment_id": 48551235, "body": "empty word would be just pressing enter without typing a word."}, {"owner": {"reputation": 1, "user_id": 4897155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2b859f633a4738e481789e0699e6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sev", "link": "https://stackoverflow.com/users/4897155/sev"}, "edited": false, "score": 0, "creation_date": 1431546272, "post_id": 30223488, "comment_id": 48551656, "body": "I was scanfing the char array into an integer var because it was suggested I do something like that for the read_line function. is there an easier or better way to acomplish that?"}, {"owner": {"reputation": 447, "user_id": 3513509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3550221670bd84e6d10fb63f1ef74d?s=128&d=identicon&r=PG&f=1", "display_name": "KillaBytes", "link": "https://stackoverflow.com/users/3513509/killabytes"}, "edited": false, "score": 0, "creation_date": 1431546307, "post_id": 30223488, "comment_id": 48551671, "body": "I would advise putting <code>{}</code> in your while statement for the function <code>read_line</code>. Just because you are indenting code doesn&#39;t mean the compiler is reading it as such.  Also, you indicate you want to stop the loop if <code>word == NULL</code> but shouldn&#39;t it be <code>word == \\n</code>?"}, {"owner": {"reputation": 1, "user_id": 4897155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2b859f633a4738e481789e0699e6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sev", "link": "https://stackoverflow.com/users/4897155/sev"}, "edited": false, "score": 0, "creation_date": 1431563038, "post_id": 30223488, "comment_id": 48558409, "body": "Everybody&#39;s answers and suggestions were awesome, finally got it up and running. Thank you guys very much."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4897155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2b859f633a4738e481789e0699e6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sev", "link": "https://stackoverflow.com/users/4897155/sev"}, "edited": false, "score": 0, "creation_date": 1431547308, "post_id": 30223955, "comment_id": 48552232, "body": "What would you suggest I do? should i get rid of scanf() and use fgets() or something else?"}], "tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": false, "score": 1, "last_activity_date": 1431546537, "creation_date": 1431546537, "answer_id": 30223955, "question_id": 30223488, "link": "https://stackoverflow.com/questions/30223488/c-program-need-help-fixing-my-code-for-a-word-sort-program/30223955#30223955", "title": "C program Need help fixing my code for a word sort program", "body": "<p>Your logic flow is flawed.  If a word is entered, the scanf() will eat it from stdin and store a null-terminated string at the address of the integer 'word'.  Any more than 3/7 chars entered, (32/64 bit, allowing for the null terminator), will start corrupting the stack.  read_line() will then only have the line terminator to read from stdin, (assuming the UB doesn't blow it up first).</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4897155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2b859f633a4738e481789e0699e6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sev", "link": "https://stackoverflow.com/users/4897155/sev"}, "edited": false, "score": 0, "creation_date": 1431562861, "post_id": 30224249, "comment_id": 48558363, "body": "Thanks that helped a lot."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1431563265, "last_edit_date": 1431563265, "creation_date": 1431547603, "answer_id": 30224249, "question_id": 30223488, "link": "https://stackoverflow.com/questions/30223488/c-program-need-help-fixing-my-code-for-a-word-sort-program/30224249#30224249", "title": "C program Need help fixing my code for a word sort program", "body": "<blockquote>\n  <p>The problem I seem to be having is that the program will accept words but when I enter the empty word it goes to a new line and nothing happens.</p>\n</blockquote>\n\n<p>There are several problems with this:</p>\n\n<pre><code>char word_str[LEN];\nint word, i, j,  num_count = 0;\n\n/* ... */\n\n    scanf(\"%s\", &amp;word);\n    if(word == NULL)\n        break;\n</code></pre>\n\n<p>First, <code>scanf(\"%s\", &amp;word)</code> scans whitespace-delimited strings, and to that end it <em>skips leading whitespace</em>, including newlines.  You cannot read an \"empty word\" that way, though you can fail to read a word at all if the end of the input is reached (or an I/O error occurs) before any non-whitespace characters are scanned.</p>\n\n<p>Second, you are passing an inappropriate pointer to <code>scanf()</code>.  You <em>should</em> pass a pointer to a character array, but you instead pass a pointer to an <code>int</code>.  It looks like maybe you wanted to scan into <code>word_str</code> instead of into <code>word</code>.</p>\n\n<p>Third, your <code>scanf()</code> format does not protect against buffer overflow.  You should provide a field width to limit how many characters can be scanned.  Moreover, you need to be sure to leave room for a string terminator.</p>\n\n<p>Fourth, you do not check the return value of <code>scanf()</code>.  If it fails to match any characters to the field, then it will not store any.  Since it returns the number of fields that were successfully scanned (or an error indicator), you can detect this condition.</p>\n\n<p>One way to correct the <code>scanf()</code> and \"empty word\" test would be:</p>\n\n<pre><code>int result;\n\nresult = scanf(\"%*[ \\t]%19[^ \\t\\n]\", word_str);\nif (result &lt; 1) break;\n</code></pre>\n\n<p>(That assumes a fixed maximum word length of 19 to go with your declared array length of 20.)  You have several additional problems in your larger code, large among them that <code>read_line()</code> attempts to read the same data you just read via <code>scanf()</code> (in fact, that function looks altogether pointless).  Also, you never update <code>num_count</code>, and after calling <code>sort_str()</code> you lose track of the number of strings you've read by assigning a new value to variable <code>i</code>.</p>\n\n<p>There may be other problems, too.</p>\n"}], "owner": {"reputation": 1, "user_id": 4897155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2b859f633a4738e481789e0699e6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sev", "link": "https://stackoverflow.com/users/4897155/sev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1431563265, "creation_date": 1431544691, "question_id": 30223488, "link": "https://stackoverflow.com/questions/30223488/c-program-need-help-fixing-my-code-for-a-word-sort-program", "title": "C program Need help fixing my code for a word sort program", "body": "<p>Hi I am still new to c and have been working on this word sort program for some time now. the guidelines are:</p>\n\n<p>Write a program that sorts a series of words entered by the user. Assume that each word is no more than 20 characters long. Stop reading when the user enters an empty word. Store each word in a dynamically allocated string, using an array of pointers (use the read_line function). After all lines have been read sort the array. Then use a loop to print the words in sorted order. </p>\n\n<p>The problem I seem to be having is that the program will accept words but when I enter the empty word it goes to a new line and nothing happens. An help or advice would be greatly appreciated. here is my code so far.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\n#define LEN 20\n#define LIM 20\n\nint read_line(char str[], int n);\nvoid sort_str(char *list[], int n);\nint alpha_first(char *list[], int min_sub, int max_sub);\n\n\nint main(void)\n{\n    char *list[LIM];\n    char *alpha[LIM];\n    char word_str[LEN];\n    int word, i, j,  num_count = 0;\n\n    for(;;){\n\n        printf(\"Enter a word: \");\n        scanf(\"%s\", &amp;word);\n        if(word == NULL)\n            break;\n        else\n            read_line(word_str, LEN);\n            list[i] = malloc(strlen(word_str) + 1);\n            strcpy(list[i], word_str);\n            alpha[i] = list[i];     \n    }\n\n\n    sort_str(alpha, i);\n\n        for(i = 0; i &lt; num_count; ++i){\n        printf(\"Sorted: \");\n        puts(list[i]);\n    }   \n\n    return (0);\n}\n\nint read_line(char str[], int n)\n{\n    int ch, i = 0;\n\n    while ((ch = getchar()) != '\\n')\n        if (i &lt; n)\n            str[i++] = ch;\n    str[i] = '\\0';\n    return i;\n}\n\nvoid sort_str(char *list[], int n)\n{\n\n    int   i, index_of_min; \n    char *temp;\n\n    for  (i= 0;  i &lt; n - 1;  ++i) {\n        index_of_min = alpha_first(list, i, n - 1);\n\n        if (index_of_min != i) {\n            temp = list[index_of_min];\n            list[index_of_min] = list[i];\n            list[i] = temp;\n        }\n    }\n}\n\n\nint alpha_first(char *list[], int min_sub, int max_sub){\n    int i, first;\n\n    first = min_sub;\n    for(i = min_sub + 1; i &lt;= max_sub; ++i){\n        if(strcmp(list[i], list[first]) &lt; 0){\n           first = i;\n        }\n   }\nreturn (first);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 2, "creation_date": 1431545009, "post_id": 30223545, "comment_id": 48550975, "body": "Don&#39;t cast malloc/calloc results in C: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "edited": false, "score": 0, "creation_date": 1431545114, "post_id": 30223545, "comment_id": 48551035, "body": "o, I did not know that the ReadCode() allocate memory for it. And thanks, Rost0031."}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": false, "score": 1, "last_activity_date": 1431545416, "last_edit_date": 1431545416, "creation_date": 1431544928, "answer_id": 30223545, "question_id": 30223476, "link": "https://stackoverflow.com/questions/30223476/strange-segmentation-default/30223545#30223545", "title": "Strange segmentation default", "body": "<p>I think the problem is that you did not allocate memory for each of the string the pointer will point to, <code>char *Code[MaxL];</code>.</p>\n\n<p>you only allocated memory for the pointers, you need to do something like</p>\n\n<pre><code>Code[0] = calloc(0, 100);\n</code></pre>\n\n<p>.</p>\n"}, {"comments": [{"owner": {"reputation": 758, "user_id": 4384593, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R13Sg.jpg?s=128&g=1", "display_name": "Ivan Gandacov", "link": "https://stackoverflow.com/users/4384593/ivan-gandacov"}, "edited": false, "score": 0, "creation_date": 1431545083, "post_id": 30223556, "comment_id": 48551016, "body": "You see that if I put <code>puts(token)</code> in while loop, it works fine."}, {"owner": {"reputation": 758, "user_id": 4384593, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R13Sg.jpg?s=128&g=1", "display_name": "Ivan Gandacov", "link": "https://stackoverflow.com/users/4384593/ivan-gandacov"}, "edited": false, "score": 0, "creation_date": 1431545373, "post_id": 30223556, "comment_id": 48551172, "body": "Do you have any idea why can this be happening ?"}, {"owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "reply_to_user": {"reputation": 758, "user_id": 4384593, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R13Sg.jpg?s=128&g=1", "display_name": "Ivan Gandacov", "link": "https://stackoverflow.com/users/4384593/ivan-gandacov"}, "edited": false, "score": 1, "creation_date": 1431545405, "post_id": 30223556, "comment_id": 48551190, "body": "<code>strtok()</code> will return NULL when there are no more tokens, which will crash in <code>determine()</code>. <code>puts()</code> may be handling the NULL you&#39;re giving it."}, {"owner": {"reputation": 758, "user_id": 4384593, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R13Sg.jpg?s=128&g=1", "display_name": "Ivan Gandacov", "link": "https://stackoverflow.com/users/4384593/ivan-gandacov"}, "edited": false, "score": 0, "creation_date": 1431545451, "post_id": 30223556, "comment_id": 48551215, "body": "Thank you, I think that&#39;s the solution. I will check now."}], "tags": [], "owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "is_accepted": true, "score": 1, "last_activity_date": 1431544984, "creation_date": 1431544984, "answer_id": 30223556, "question_id": 30223476, "link": "https://stackoverflow.com/questions/30223476/strange-segmentation-default/30223556#30223556", "title": "Strange segmentation default", "body": "<pre><code>token = strtok(NULL, \" \");\ndetermine(ch, token, size); //here is the problem.\n</code></pre>\n\n<p>You're not checking <code>token</code> before passing it to <code>determine()</code>. The <code>strcmp()</code> call is undefined behaviour when given a null pointer.</p>\n"}], "owner": {"reputation": 758, "user_id": 4384593, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R13Sg.jpg?s=128&g=1", "display_name": "Ivan Gandacov", "link": "https://stackoverflow.com/users/4384593/ivan-gandacov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 30223556, "answer_count": 2, "score": 1, "last_activity_date": 1431545416, "creation_date": 1431544627, "last_edit_date": 1431545178, "question_id": 30223476, "link": "https://stackoverflow.com/questions/30223476/strange-segmentation-default", "title": "Strange segmentation default", "body": "<p>The problem I want to solve is: Count the number of occurrences of key words in a C code. Here's the code:</p>\n\n<blockquote>\n  <p>The problem is that I get a segmentation fault. In my code I mentioned where\n  is the problem. Can you, please, explain me why ?</p>\n</blockquote>\n\n<p><em>In header:</em></p>\n\n<pre><code>struct Chei\n{\n    char *cuv;\n    int contor;\n};\n\ntypedef struct Chei chei;\n\nint ReadCode(char *a[]);\nvoid  determine(chei *Ch, char *temp, int size);\nvoid Frequency(chei *Ch, int nr_lines, char *a[], int size);\n</code></pre>\n\n<p><em>In main:</em></p>\n\n<pre><code>    chei tab_chei[] = {{\"while\", 0},{\"if\", 0}, {\"case\", 0}, {\"switch\",  0}};\n    int size = sizeof(tab_chei)/sizeof(tab_chei[0]);\n    char *Code[MaxL];\n    int nr_lines;\n\n\n    nr_lines = ReadCode(Code);//number of lines of text\n\n    Frequency(tab_chei, nr_lines, Code, size);\n</code></pre>\n\n<p><em>In function file:</em>\n<em>I think there is no problem with reading text (function ReadCode() -- here I allocated memory for each Code[i] using malloc). I used an array of pointers to char for this.</em></p>\n\n<pre><code>// This functions determines if the word \"temp\" is a keyword, and increases\n     //\"contor\" if it is.\n\nvoid  determine(chei *Ch, char *temp, int size)\n{\n    int i;\n\n\n    for (i = 0; i &lt; size; ++i)\n    {\n        if (!strcmp(Ch[i].cuv, temp))\n        {\n            Ch[i].contor++;\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>Array \"a\" contains the text.</p>\n\n<pre><code>void Frequency(chei *Ch, int nr_lines, char *a[], int size)\n{\n    int i;\n    char temp[MaxCh];\n    char *token = 0;\n\n\n        strcpy(temp, a[0]);//I put a[0] as a particular case\n        token = strtok(temp, \" \");\n        determine(Ch, token, size);\n\n        while (token != NULL)\n        {\n\n            token = strtok(NULL, \" \");\n            determine(ch, token, size); //here is the problem.\n//I observed that if I delete this line, there is no error\n//but still it isn't what I want to get\n        }\n\n        for (i = 0; i &lt; size; ++i)\n            {\n                printf(\"\\n%-10s%-4d\", Ch[i].cuv, Ch[i].contor);\n            }\n\n}\n</code></pre>\n"}, {"tags": ["c", "generics", "type-conversion", "c11"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1431543178, "post_id": 30222995, "comment_id": 48549855, "body": "Can you give an example program whose compliance is in question?"}, {"owner": {"reputation": 282, "user_id": 4702391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/eb7837ca573f143504b49087dabb4666?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/4702391/jack"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1431543443, "post_id": 30222995, "comment_id": 48550035, "body": "Suppose there is a structure representing a 128 bit integer, and I want a _Generic that can multiply assign that structure with either another such structure or a basic integer type, so I can define a macro to perform this operation that can accept either type."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1431543481, "post_id": 30222995, "comment_id": 48550059, "body": "It&#39;s still unclear @jack, please provide an example of what you want. Although I don&#39;t think what you want is possible or makes sense, but an example would help clarify and I might be wrong."}, {"owner": {"reputation": 282, "user_id": 4702391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/eb7837ca573f143504b49087dabb4666?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/4702391/jack"}, "edited": false, "score": 0, "creation_date": 1431543548, "post_id": 30222995, "comment_id": 48550098, "body": "I just want to know if it is allowed to typecast a structure type to a basic integer type, and to typecast a basic integer type to a structure type."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1431543568, "post_id": 30222995, "comment_id": 48550114, "body": "And please add the clarifications to the question body."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1431543578, "post_id": 30222995, "comment_id": 48550120, "body": "Casting allows pretty much anything, whether it&#39;s correct that&#39;s a different thing."}, {"owner": {"reputation": 1453, "user_id": 3195614, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qw0hw.jpg?s=128&g=1", "display_name": "Zach P", "link": "https://stackoverflow.com/users/3195614/zach-p"}, "edited": false, "score": 0, "creation_date": 1431543812, "post_id": 30222995, "comment_id": 48550269, "body": "What about a structure that is bigger than the size of an integer on your system? You would be way better off with converting it to strings and vice versa."}, {"owner": {"reputation": 282, "user_id": 4702391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/eb7837ca573f143504b49087dabb4666?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/4702391/jack"}, "reply_to_user": {"reputation": 1453, "user_id": 3195614, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qw0hw.jpg?s=128&g=1", "display_name": "Zach P", "link": "https://stackoverflow.com/users/3195614/zach-p"}, "edited": false, "score": 0, "creation_date": 1431543856, "post_id": 30222995, "comment_id": 48550305, "body": "@Zach P, The converted objects are never used, I am just worried about the cast expressions being allowed. I know that the converted objects are on unselected _Generic branches."}], "answers": [{"comments": [{"owner": {"reputation": 282, "user_id": 4702391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/eb7837ca573f143504b49087dabb4666?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/4702391/jack"}, "reply_to_user": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 0, "creation_date": 1431544644, "post_id": 30223287, "comment_id": 48550773, "body": "@Qix, can you please expound on that solution? These are core operations in a performance critical place, is there a way to do this using pointers that would not involve extra instructions?"}, {"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 0, "creation_date": 1431544730, "post_id": 30223287, "comment_id": 48550820, "body": "Google <i>pointer aliasing</i>. It&#39;s not hard. Neither is benchmarking. Pre-optimization is going to kill you."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 2, "last_activity_date": 1431544333, "last_edit_date": 1495535049, "creation_date": 1431543977, "answer_id": 30223287, "question_id": 30222995, "link": "https://stackoverflow.com/questions/30222995/converting-struct-to-int-and-vice-versa/30223287#30223287", "title": "Converting struct to int and vice versa", "body": "<p>Simple answer:</p>\n\n<p>In C you cannot convert an integer (or any scalar value) to a structure type and you cannot convert a structure object to an integer.</p>\n\n<p>You can use pointers (as mentioned by <a href=\"https://stackoverflow.com/users/510036/qix\">Qix</a> in the comments) to achieve the same and then dereference the converted object but it invokes undefined behavior by violating aliasing rules and possibly breaking alignment.</p>\n"}], "owner": {"reputation": 282, "user_id": 4702391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/eb7837ca573f143504b49087dabb4666?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/4702391/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2472, "favorite_count": 0, "accepted_answer_id": 30223287, "answer_count": 1, "score": 0, "last_activity_date": 1431544333, "creation_date": 1431542990, "last_edit_date": 1431544069, "question_id": 30222995, "link": "https://stackoverflow.com/questions/30222995/converting-struct-to-int-and-vice-versa", "title": "Converting struct to int and vice versa", "body": "<p>In order to make some _Generic expressions work properly, it appears that the only option is to convert integer types to structure types and vice versa, with these meaningless conversions only ever being present in non selected expressions. I am having trouble definitively answering the question as to whether or not this is strictly c11 standard compliant.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1431542989, "post_id": 30222884, "comment_id": 48549738, "body": "How do you know whether anything changes?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1431543023, "post_id": 30222884, "comment_id": 48549759, "body": "Unrelated, but don&#39;t write <code>(*l).end</code> but rather <code>l-&gt;end</code>."}, {"owner": {"reputation": 863, "user_id": 507761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a777be80e0c463a139e737821941952?s=128&d=identicon&r=PG", "display_name": "Matthew Read", "link": "https://stackoverflow.com/users/507761/matthew-read"}, "edited": false, "score": 2, "creation_date": 1431543029, "post_id": 30222884, "comment_id": 48549762, "body": "You&#39;re using the bitwise-and operator <code>&amp;</code> instead of the logical and <code>&amp;&amp;</code>."}, {"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "reply_to_user": {"reputation": 863, "user_id": 507761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a777be80e0c463a139e737821941952?s=128&d=identicon&r=PG", "display_name": "Matthew Read", "link": "https://stackoverflow.com/users/507761/matthew-read"}, "edited": false, "score": 0, "creation_date": 1431543186, "post_id": 30222884, "comment_id": 48549862, "body": "Don&#39;t understand the downvote... @MatthewRead i am using the &amp; on purpose."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1431543235, "post_id": 30222884, "comment_id": 48549906, "body": "&quot;i am using the &amp; on purpose&quot; -- what purpose could that possibly be?"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1431543418, "post_id": 30222884, "comment_id": 48550015, "body": "If you&#39;re using a bitwise and on a pointer on purpose you are either amazingly brilliant or don&#39;t know what that means. :)"}, {"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1431543837, "post_id": 30222884, "comment_id": 48550291, "body": "@DavidHoelzer the bitwise operation isn&#39;t made between 2 pointers, but rather between the bool result of the comparison. Do you agree?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431544018, "post_id": 30222884, "comment_id": 48550391, "body": "Your code works for me, as it should, despite use of <code>&amp;</code> where <code>&amp;&amp;</code> is more appropriate."}, {"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "edited": false, "score": 0, "creation_date": 1431544190, "post_id": 30222884, "comment_id": 48550501, "body": "Common guys, i&#39;m learning C and sometimes i get stuck on the simplest things, like using printf(); correctly. Don&#39;t downvote without clarifying what i&#39;ve made as a mistake (question structure, bad language, etc)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1431544192, "post_id": 30222884, "comment_id": 48550502, "body": "@skills, yes, the bitwise operation is on the results of the two <code>==</code> comparisons.  The type of those intermediate results depends on which version of C you are using.  <code>&amp;</code> is still the wrong operator."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431544220, "post_id": 30222884, "comment_id": 48550528, "body": "I downvoted you because contrary to your claim, your code works."}, {"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431544258, "post_id": 30222884, "comment_id": 48550551, "body": "@JohnBollinger I understand the differences between the operators, i knew it worked by using one, don&#39;t ask me why but i didn&#39;t see any problem using &amp; instead of &amp;&amp;, but can you clarify on why it&#39;s better to use &amp;&amp;?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1431545480, "post_id": 30222884, "comment_id": 48551243, "body": "<code>&amp;</code> is the wrong operator because it is an arithmetic operator, not a logical one.  I can understand being confused about the difference, especially since in this particular case both happen to work, but when you are evaluating a compound condition, use the logical operator.  It is the proper tool for the job.  Moreover, there is a semantic difference even in this case: the logical operator performs short-circuit evaluation, but the arithmetic one does not."}, {"owner": {"reputation": 863, "user_id": 507761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a777be80e0c463a139e737821941952?s=128&d=identicon&r=PG", "display_name": "Matthew Read", "link": "https://stackoverflow.com/users/507761/matthew-read"}, "edited": false, "score": 0, "creation_date": 1431546414, "post_id": 30222884, "comment_id": 48551737, "body": "Since this code is apparently working, it should be closed and deleted as per the off-topic flagging reason &quot;This question was caused by a problem that can no longer be reproduced or a simple typographical error. While similar questions may be on-topic here, this one was resolved in a manner unlikely to help future readers&quot;."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1431549063, "post_id": 30222884, "comment_id": 48553099, "body": "@skills Yes it is, but it is still the wrong operator."}], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "edited": false, "score": 0, "creation_date": 1431543917, "post_id": 30223166, "comment_id": 48550341, "body": "thank you for the clarification. Notice that the bitwise operation is made over the result from the comparisons and not by making a bitwise op between the 2 pointers.   Thank you for pointing things out, i was printing wrongly. Please test the code with only one &amp;, it will work ok."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1431543950, "post_id": 30223166, "comment_id": 48550353, "body": "I don&#39;t doubt that this does work, but it is not a good answer to the question because the original code works, too."}, {"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "edited": false, "score": 0, "creation_date": 1431544896, "post_id": 30223166, "comment_id": 48550922, "body": "@JohnSmith good point. Will select as the right answer, would suggest you to remove the first line, because it works with both operators"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "edited": false, "score": 0, "creation_date": 1431544987, "post_id": 30223166, "comment_id": 48550966, "body": "changed the first line."}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": true, "score": 0, "last_activity_date": 1431544960, "last_edit_date": 1431544960, "creation_date": 1431543540, "answer_id": 30223166, "question_id": 30222884, "link": "https://stackoverflow.com/questions/30222884/keep-track-of-beginning-and-end-of-linked-list/30223166#30223166", "title": "keep track of beginning and end of linked list", "body": "<p>This code works.</p>\n\n<pre><code>struct slist;\n\ntypedef struct slist* Lint;\n\ntypedef struct slist{\n    int value;\n    Lint next;\n} Nodo;\n\ntypedef struct difl{\n    Lint start, end;\n\n} dselist;\n\nvoid snocs(dselist *l, int x){\n    Lint new;\n    new = (Lint) calloc(1,sizeof(Nodo));\n    if(new==NULL){\n        printf(\"Error in memory allocation\\n\");\n        return;\n    }\n    new-&gt;value = x;\n    new-&gt;next = NULL;\n\n    if((l-&gt;start==NULL) &amp;&amp; l-&gt;end==NULL){\n        l-&gt;start = new;\n        l-&gt;end = new;\n    }else{\n        (l-&gt;end)-&gt;next = new;\n        l-&gt;end = new;\n    }\n}\n\nint main(){\n    Lint a = NULL;\n    Lint b = NULL;\n\n    dselist dl;\n\n    dl.start = a;\n    dl.end = b;\n\n    snocs(&amp;dl, 5);\n    printf(\"%d\\n\", *dl.start); /* print 5*/\n\n}\n</code></pre>\n"}], "owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 30223166, "answer_count": 1, "score": -2, "last_activity_date": 1431544960, "creation_date": 1431542606, "question_id": 30222884, "link": "https://stackoverflow.com/questions/30222884/keep-track-of-beginning-and-end-of-linked-list", "title": "keep track of beginning and end of linked list", "body": "<p>I need to keep track of the beginning and end of a linked list</p>\n\n<p>But i want to use a secondary struct:</p>\n\n<pre><code>typedef struct difl{\n    Lint start, end;\n} dselist;\n</code></pre>\n\n<p>Lint is defined this way:</p>\n\n<pre><code>typedef struct slist* Lint;\n\ntypedef struct slist{\n    int value;\n    Lint next;\n} Nodo;\n</code></pre>\n\n<p>And this is the function to add an element to the end:</p>\n\n<pre><code>void snocs(dselist *l, int x){\n    Lint new;\n    new = (Lint) calloc(1,sizeof(Nodo));\n    if(new==NULL){\n        printf(\"Error in memory allocation\\n\");\n        return;\n    }\n    new-&gt;value = x;\n    new-&gt;next = NULL;\n\n    if((*l).start==NULL &amp; (*l).end==NULL){\n        (*l).start = new;\n        (*l).end = new;\n    }else{\n        ((*l).end)-&gt;next = new;\n        (*l).end = new;\n    }\n}\n</code></pre>\n\n<p>And i am calling the function this way:</p>\n\n<pre><code>int main(){\n    Lint a = NULL;\n    Lint b = NULL;\n\n    dselist dl;\n\n    dl.start = a;\n    dl.end = b;\n\n    snocs(&amp;dl, 5);\n}\n</code></pre>\n\n<p>There aren't compilation errors, just doesn't seem to change anything on my lists.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 4, "creation_date": 1431542486, "post_id": 30222713, "comment_id": 48549447, "body": "The <b>function</b> can only return int, so the evaluation of <code>counter==0</code> is irrelevant. (it is boolean (cast to 0 or 1 integer) , since c89, IIRC)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1431542601, "post_id": 30222713, "comment_id": 48549525, "body": "Any non-zero value will be considered true for the conditional evaluation effect, so the safe thing to do is to compare with <code>0</code> not with <code>1</code> in any case, or just use the expression as a truth value."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1431542708, "post_id": 30222808, "comment_id": 48549588, "body": "In C, booleans do really exist.  <code>_Bool</code>."}, {"owner": {"reputation": 1691, "user_id": 4422908, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/48YJT.png?s=128&g=1", "display_name": "A. Abramov", "link": "https://stackoverflow.com/users/4422908/a-abramov"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1431542844, "post_id": 30222808, "comment_id": 48549660, "body": "@chux take a look here: <a href=\"http://stackoverflow.com/questions/8724349/difference-between-bool-and-bool-types-in-c\" title=\"difference between bool and bool types in c\">stackoverflow.com/questions/8724349/&hellip;</a>  _Bool is an older version of the boolean from <code>stdbool</code>, which has a similar definition to the one I gave."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1431543287, "post_id": 30222808, "comment_id": 48549937, "body": "<code>_Bool</code> is part of the language - it is a boolean type - It is available even if code does not include <code>stdbool.h</code>.  <code>bool</code> is a typedef&#39;d in <code>stdbool.h</code> and also <code>true</code>, <code>false</code> is defined."}, {"owner": {"reputation": 1691, "user_id": 4422908, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/48YJT.png?s=128&g=1", "display_name": "A. Abramov", "link": "https://stackoverflow.com/users/4422908/a-abramov"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1431543354, "post_id": 30222808, "comment_id": 48549971, "body": "@chux I see... my bad. I&#39;ll edit. Always good to study something new (:"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1431543406, "post_id": 30222808, "comment_id": 48550012, "body": "It worth mentioning that <code>_Bool</code> was introduced in C99"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 1, "creation_date": 1431543467, "post_id": 30222808, "comment_id": 48550049, "body": "And saying that <code>true</code> and <code>false</code> keywords do not exist is misleading: they are not keywords but they do exist as macro definitions in <code>stdbool.h</code>."}], "tags": [], "owner": {"reputation": 1691, "user_id": 4422908, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/48YJT.png?s=128&g=1", "display_name": "A. Abramov", "link": "https://stackoverflow.com/users/4422908/a-abramov"}, "is_accepted": false, "score": 1, "last_activity_date": 1431543531, "last_edit_date": 1495542120, "creation_date": 1431542351, "answer_id": 30222808, "question_id": 30222713, "link": "https://stackoverflow.com/questions/30222713/return-counter-0-produces-a-boolean-or-integer/30222808#30222808", "title": "return counter==0 produces a boolean or integer?", "body": "<p>The best solution is to check - print the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Typeof.html\" rel=\"nofollow noreferrer\">typeof</a> (:</p>\n\n<p>Anyhow, the answer is <strong>both</strong>. In C, the <code>true/false</code> keywords <em>are not built-in the language</em>. They are merely a definition, or a part of a library that uses these, for example:</p>\n\n<pre><code>#define TRUE 1\n#define FALSE 0\n</code></pre>\n\n<p>Such definitions are saved as integers if they are numbers, and thus, every boolean is an integer (but the opposite is not true... unless you define it that way). The norm is that 0 is <code>FALSE</code>, and the rest is <code>TRUE</code>.</p>\n\n<p><strong>EDIT</strong>: Looking back, I've actually answered a similar question that has to do with objective C. If you're intrested, take a look <a href=\"https://stackoverflow.com/questions/27814691/if-true-vs-if-yes-vs-if-1-are-different-in-objective-c/27814778#27814778\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 1, "last_activity_date": 1431542377, "creation_date": 1431542377, "answer_id": 30222815, "question_id": 30222713, "link": "https://stackoverflow.com/questions/30222713/return-counter-0-produces-a-boolean-or-integer/30222815#30222815", "title": "return counter==0 produces a boolean or integer?", "body": "<p><code>==</code> evaluates to an integer that is either 0 or 1, depending on the comparison outcome. In this case, the function will return 1 (true) if counter is equal to 0; it will return 0 otherwise.</p>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 4099970, "user_type": "registered", "profile_image": "https://graph.facebook.com/1053860136/picture?type=large", "display_name": "Brennan Mcdonald", "link": "https://stackoverflow.com/users/4099970/brennan-mcdonald"}, "is_accepted": false, "score": 1, "last_activity_date": 1431542499, "creation_date": 1431542499, "answer_id": 30222858, "question_id": 30222713, "link": "https://stackoverflow.com/questions/30222713/return-counter-0-produces-a-boolean-or-integer/30222858#30222858", "title": "return counter==0 produces a boolean or integer?", "body": "<p>Since you are using the 'equal to' operator and not the 'assignment' operator you will get a boolean function (Difference here: <a href=\"http://en.wikipedia.org/wiki/Operators_in_C_and_C++\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Operators_in_C_and_C++</a>). So how your return statement is deciding this is:\n<br></p>\n\n<blockquote>\n  <p>return (counter == 0);</p>\n</blockquote>\n\n<p><br>\nI believe what you want to return here is \n<br></p>\n\n<blockquote>\n  <p>return counter\n  <br></p>\n</blockquote>\n\n<p>then outside of your is_finished() function equate if counter == 0 or not and have that represent your bool.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1431543889, "last_edit_date": 1431543889, "creation_date": 1431542917, "answer_id": 30222977, "question_id": 30222713, "link": "https://stackoverflow.com/questions/30222713/return-counter-0-produces-a-boolean-or-integer/30222977#30222977", "title": "return counter==0 produces a boolean or integer?", "body": "<p>I prefer to avoid using <code>true</code> and <code>false</code> because they are inherent in the way you use the C language.</p>\n\n<p>Integer values 0 are false. Non-0 values are true. So</p>\n\n<pre><code>if (apples) {...}\n</code></pre>\n\n<p>will execute when <code>apples != 0</code>.</p>\n\n<p>The C language will give a value of <code>1</code> in response to a specific test.</p>\n\n<pre><code>int a = (apples &gt; 0);\n</code></pre>\n\n<p>That is not so in all languages, some give <code>-1</code> for true. But there is never any need to compare with 0, true, or false.</p>\n\n<pre><code>if (a) {...}\n</code></pre>\n\n<p>Only clumsy code will try to use <code>true</code> and <code>false</code>. Otherwise, the logic flow is sweet.</p>\n\n<p>To point out the absurdity of a statement using <code>TRUE</code></p>\n\n<pre><code>if ((ptr == NULL) == TRUE) {...}\n</code></pre>\n\n<p>when</p>\n\n<pre><code>if (ptr == NULL) {...}\n</code></pre>\n\n<p>does the job.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1431543471, "last_edit_date": 1431543471, "creation_date": 1431543072, "answer_id": 30223024, "question_id": 30222713, "link": "https://stackoverflow.com/questions/30222713/return-counter-0-produces-a-boolean-or-integer/30223024#30223024", "title": "return counter==0 produces a boolean or integer?", "body": "<p><code>return counter==0</code> produces an <code>int</code> because the return type is <code>int</code>.<br>\nIt has a value of <code>0</code> or <code>1</code>.</p>\n\n<hr>\n\n<p><code>counter==0</code> itself produces an <code>int</code>.</p>\n\n<blockquote>\n  <p>The <code>==</code> (equal to) and <code>!=</code> (not equal to) operators are analogous to the relational operators except for their lower precedence.) Each of the operators yields 1 if the specified relation is true and 0 if it is false. The result has type <code>int</code>. ...  C11 \u00a76.5.9 3</p>\n</blockquote>\n\n<p>The function returns an <code>int</code> regardless even is the <code>3.14</code> was attempted to be returned - it will be converted to an <code>int</code>.  @wildplasser</p>\n\n<pre><code>int is_finished(){   \n   ...\n   return true;\n   ...\n   return 3.14\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1431543342, "creation_date": 1431543342, "answer_id": 30223120, "question_id": 30222713, "link": "https://stackoverflow.com/questions/30222713/return-counter-0-produces-a-boolean-or-integer/30223120#30223120", "title": "return counter==0 produces a boolean or integer?", "body": "<pre><code> return counter==0\n</code></pre>\n\n<p>it returns the <code>int</code> value <code>1</code> if <code>counter</code> is equal to <code>0</code> or the <code>int</code> value <code>0</code> otherwise.</p>\n\n<p>In C equality and relational operators always yield an <code>int</code> value of either <code>0</code> or <code>1</code>. Note that this is different in C++ where by default these operators return a value of type <code>bool</code>.</p>\n"}], "owner": {"reputation": 1321, "user_id": 2955896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zVEA2.jpg?s=128&g=1", "display_name": "JayGatsby", "link": "https://stackoverflow.com/users/2955896/jaygatsby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 30222815, "answer_count": 6, "score": 0, "last_activity_date": 1431543889, "creation_date": 1431542072, "question_id": 30222713, "link": "https://stackoverflow.com/questions/30222713/return-counter-0-produces-a-boolean-or-integer", "title": "return counter==0 produces a boolean or integer?", "body": "<p>I'm beginner on C and checking this code</p>\n\n<pre><code>int is_finished()\n{\n    int counter = 0;\n    sem_wait(&amp;global_mutex);\n    counter = NotEatenCount;\n    sem_post(&amp;global_mutex);    \n    return counter==0;\n}\n</code></pre>\n\n<p>the function should return an integer. What does <code>return counter==0</code> means in here? It looks like:</p>\n\n<pre><code>if(counter==0){\n  return true;\n}\nelse{\n return false;\n}\n</code></pre>\n"}, {"tags": ["c", "eclipse", "makefile", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1431541985, "post_id": 30222597, "comment_id": 48549178, "body": "We need the lines <i>above</i> that line in the error output. Specifically anything about errors in the code, etc."}, {"owner": {"reputation": 890, "user_id": 2803693, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/64d57036e35aaa27be1e38a61b8149b3?s=128&d=identicon&r=PG&f=1", "display_name": "jsaji", "link": "https://stackoverflow.com/users/2803693/jsaji"}, "edited": false, "score": 0, "creation_date": 1431542195, "post_id": 30222597, "comment_id": 48549301, "body": "@dnt994 Add more logs"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1431543066, "post_id": 30222597, "comment_id": 48549780, "body": "Show the makefile. That compilation command is clearly confused (has <code>lol.c</code> twice with different paths)."}, {"owner": {"reputation": 11, "user_id": 4666742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cccb510819c506a83056d2c707b886?s=128&d=identicon&r=PG&f=1", "display_name": "dnt994", "link": "https://stackoverflow.com/users/4666742/dnt994"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1431543762, "post_id": 30222597, "comment_id": 48550245, "body": "@EtanReisner where and how I can do it?? sorry for being such a noob :D"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1431543844, "post_id": 30222597, "comment_id": 48550294, "body": "<code>Makefile</code> or <code>makefile</code> or <code>GNUMakefile</code> in the current directory."}, {"owner": {"reputation": 11, "user_id": 4666742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cccb510819c506a83056d2c707b886?s=128&d=identicon&r=PG&f=1", "display_name": "dnt994", "link": "https://stackoverflow.com/users/4666742/dnt994"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1431558185, "post_id": 30222597, "comment_id": 48557072, "body": "@EtanReisner I updated it with the makefile, thanks for the help. ps. How can I make the code quote smaller like a spoiler window?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1431560014, "post_id": 30222597, "comment_id": 48557552, "body": "The target that is having the problem is not in that makefile. It must be in one of the <code>include</code>d makefiles listed in there."}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1431582335, "post_id": 30222597, "comment_id": 48563336, "body": "Show the <code>include</code>d makefiles also."}, {"owner": {"reputation": 11, "user_id": 4666742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cccb510819c506a83056d2c707b886?s=128&d=identicon&r=PG&f=1", "display_name": "dnt994", "link": "https://stackoverflow.com/users/4666742/dnt994"}, "edited": false, "score": 0, "creation_date": 1431601105, "post_id": 30222597, "comment_id": 48573063, "body": "How can I do that?? I got objects.mk and sources.mk where can I find include d ??"}, {"owner": {"reputation": 11, "user_id": 4666742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cccb510819c506a83056d2c707b886?s=128&d=identicon&r=PG&f=1", "display_name": "dnt994", "link": "https://stackoverflow.com/users/4666742/dnt994"}, "edited": false, "score": 0, "creation_date": 1431608740, "post_id": 30222597, "comment_id": 48577802, "body": "Could be subdir.mk? I updated with it"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4666742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cccb510819c506a83056d2c707b886?s=128&d=identicon&r=PG&f=1", "display_name": "dnt994", "link": "https://stackoverflow.com/users/4666742/dnt994"}, "is_accepted": false, "score": 0, "last_activity_date": 1431737376, "last_edit_date": 1431737376, "creation_date": 1431710261, "answer_id": 30265256, "question_id": 30222597, "link": "https://stackoverflow.com/questions/30222597/make-o-error-1/30265256#30265256", "title": "make: *** [.o] Error 1", "body": "<p>It was a Gcc Math.h Linking Problem in Eclipse\nIf you use Eclipse/gcc and have functions that need the math.h library, you may find out that the linker can't find functions like sqrt or pow and signal it like this:</p>\n\n<pre><code>undefined reference to `pow'    Matrix.c    /TzUtils/Sources    line 152    C/C++ Problem\nundefined reference to `pow'    Matrix.c    /TzUtils/Sources    line 204    C/C++ Problem\n</code></pre>\n\n<p><strong><em>and it was my original error, before tried to add wrongly the flag -lm.</em></strong></p>\n\n<p>This thing happens because the library which contains math.h is not linked by default. To link it you will need to add the extra flag -Im. </p>\n\n<p>In Eclipse this can be done by:\nRight click on your project in Project Explorer and select Properties.\nGo to C\\C++ Build -> Settings -> Tool Settings -> Gcc Linker -> Libraries and click on green plus button to add a new library. When the dialog pops up, write m, and Eclipse will automatically add the -Im flag.\nAfter this I don't get any error. Thanks everyone for the help.\nCredits answer: dystopiancode.blogspot.it</p>\n"}], "owner": {"reputation": 11, "user_id": 4666742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cccb510819c506a83056d2c707b886?s=128&d=identicon&r=PG&f=1", "display_name": "dnt994", "link": "https://stackoverflow.com/users/4666742/dnt994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 7710, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1617490895, "creation_date": 1431541651, "last_edit_date": 1431608835, "question_id": 30222597, "link": "https://stackoverflow.com/questions/30222597/make-o-error-1", "title": "make: *** [.o] Error 1", "body": "<p>I get this error: </p>\n\n<pre><code>make all \nBuilding file: ../src/lol.c\nInvoking: GCC C Compiler\ngcc -lm lol.c -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF\"src/lol.d\" -MT\"src/lol.d\" -o \"src/lol.o\" \"../src/lol.c\"\ngcc: error: lol.c: No such file or directory\nmake: *** [src/lol.o] Error 1 \n</code></pre>\n\n<p>MAKEFILE </p>\n\n<pre><code>################################################################################\n    # Automatically-generated file. Do not edit!\n    ################################################################################\n\n    -include ../makefile.init\n\n    RM := rm -rf\n\n    # All of the sources participating in the build are defined here\n    -include sources.mk\n    -include src/subdir.mk\n    -include subdir.mk\n    -include objects.mk\n\n    ifneq ($(MAKECMDGOALS),clean)\n    ifneq ($(strip $(C_DEPS)),)\n    -include $(C_DEPS)\n    endif\n    endif\n\n    -include ../makefile.defs\n\n    # Add inputs and outputs from these tool invocations to the build variables \n\n    # All Target\n    all: lol\n\n    # Tool invocations\n    lol: $(OBJS) $(USER_OBJS)\n        @echo 'Building target: $@'\n        @echo 'Invoking: GCC C Linker'\n        gcc  -o \"lol\" $(OBJS) $(USER_OBJS) $(LIBS)\n        @echo 'Finished building target: $@'\n        @echo ' '\n\n    # Other Targets\n    clean:\n        -$(RM) $(OBJS)$(C_DEPS)$(EXECUTABLES) lol\n        -@echo ' '\n\n    .PHONY: all clean dependents\n    .SECONDARY:\n\n    -include ../makefile.targets\n</code></pre>\n\n<p>SUBDIR.mk</p>\n\n<pre><code>################################################################################\n# Automatically-generated file. Do not edit!\n################################################################################\n\n# Add inputs and outputs from these tool invocations to the build variables \nC_SRCS += \\\n../src/lol.c \n\nOBJS += \\\n./src/lol.o \n\nC_DEPS += \\\n./src/lol.d \n\n\n# Each subdirectory must supply rules for building sources it contributes\nsrc/%.o: ../src/%.c\n    @echo 'Building file: $&lt;'\n    @echo 'Invoking: GCC C Compiler'\n    gcc -lm lol.c -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF\"$(@:%.o=%.d)\" -MT\"$(@:%.o=%.d)\" -o \"$@\" \"$&lt;\"\n    @echo 'Finished building: $&lt;'\n    @echo ' '\n</code></pre>\n\n<p>when I try to compile the code below. I use eclipse on ubuntu 14.04lts. I know you'll probably need more details bout the error but I don't know what and how, please just ask if you need further information.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n/* to be compiled with \"gcc -lm 05_09.c\" */\n\ndouble calculateCharges(float hours);\n\nint main(void)\n{\n\n\n    float car_a_hours, car_b_hours, car_c_hours, tothours;\n    float car_a_charge, car_b_charge, car_c_charge, totcharge;\n\n    printf(\"\\n\\n\");\n\n    printf(\"enter car #1 parking hours: \");\n    scanf(\"%f\", &amp;car_a_hours);\n    printf(\"enter car #2 parking hours: \");\n    scanf(\"%f\", &amp;car_b_hours);\n    printf(\"enter car #3 parking hours: \");\n    scanf(\"%f\", &amp;car_c_hours);\n\n    tothours = car_a_hours + car_b_hours + car_c_hours;\n\n    car_a_charge = calculateCharges(car_a_hours);\n    car_b_charge = calculateCharges(car_b_hours);\n    car_c_charge = calculateCharges(car_c_hours);\n\n    totcharge = car_a_charge + car_b_charge + car_c_charge;\n\n    printf(\"\\n\\n\");\n\n    printf(\"Car\\tHours\\tCharge\\n\");\n    printf(\"%d\\t%5.1f\\t%6.2f\\n\", 1, car_a_hours, car_a_charge);\n    printf(\"%d\\t%5.1f\\t%6.2f\\n\", 2, car_b_hours, car_b_charge);\n    printf(\"%d\\t%5.1f\\t%6.2f\\n\", 3, car_c_hours, car_c_charge);\n    printf(\"TOTAL\\t%5.1f\\t%6.2f\\n\", tothours, totcharge);\n\n    printf(\"\\n\\n\");\n\n    return 0;\n\n}\n\n\ndouble calculateCharges(float hours)\n{\n    if ((hours - 3.0) &lt;= 0)\n    return 2.0;\n    else if ((hours == 24.0))\n    return 10;\n    else\n    return (ceil(hours) - 3) * 0.5 + 2;\n}\n</code></pre>\n"}, {"tags": ["c", "graphics", "flood-fill", "turbo-c"], "comments": [{"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 1, "creation_date": 1431541353, "post_id": 30222451, "comment_id": 48548815, "body": "Why don&#39;t you draw a solid ellipse (<code>fillellipse</code>) on the same position and with the same size? Does it really need to contain a bucket-fill algorithm?"}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 1, "creation_date": 1431541396, "post_id": 30222451, "comment_id": 48548839, "body": "Try using &quot;fillellipse&quot; instead of &quot;ellipse&quot;"}, {"owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "edited": false, "score": 1, "creation_date": 1431541490, "post_id": 30222451, "comment_id": 48548887, "body": "Turbo C, BGI, oh my!"}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 2, "creation_date": 1431541578, "post_id": 30222451, "comment_id": 48548940, "body": "They&#39;re just making their life harder than it should be.. with these legendary compilers from the very first known millenia."}], "answers": [{"tags": [], "owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "is_accepted": true, "score": 3, "last_activity_date": 1431541390, "creation_date": 1431541390, "answer_id": 30222524, "question_id": 30222451, "link": "https://stackoverflow.com/questions/30222451/flood-fill-difficulty-in-c-graphics/30222524#30222524", "title": "Flood fill difficulty in C graphics", "body": "<p>Use <a href=\"http://www.cs.colorado.edu/~main/bgi/doc/fillellipse.html\" rel=\"nofollow\">fillellipse()</a> instead of ellipse().</p>\n"}], "owner": {"reputation": 1230, "user_id": 3041058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/834da9e46958a628bc3d9661963d8f7e?s=128&d=identicon&r=PG&f=1", "display_name": "user3041058", "link": "https://stackoverflow.com/users/3041058/user3041058"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 30222524, "answer_count": 1, "score": 0, "last_activity_date": 1431541390, "creation_date": 1431541132, "question_id": 30222451, "link": "https://stackoverflow.com/questions/30222451/flood-fill-difficulty-in-c-graphics", "title": "Flood fill difficulty in C graphics", "body": "<p><em>(Note: My college is making me study graphics in ancient Turbo C)</em></p>\n\n<p>Anyway I am using the inbuilt algorithm for floodfill to color a well and a bucket.   </p>\n\n<p>The problem I am facing is that the compiler fills the region upto a boundary color. However I would like to fill a basic figure (eliipse here) irrespective of the boundary.\nHow will one do that?</p>\n\n<p>I did some <strong>testing</strong> as shown below,</p>\n\n<p><img src=\"https://i.stack.imgur.com/KN2Lo.png\" alt=\"enter image description here\"></p>\n\n<p>Pic1, <em>Filled bucket before  drawing well, So well draws over the blue</em><br>\nPic2, <em>Drew well before flood filling bucket, So fills only one part</em></p>\n\n<p>My Code:</p>\n\n<pre><code>#include&lt;graphics.h&gt;\n#include&lt;stdio.h&gt;\nvoid well()\n{\n    ellipse(50,150,0,360,50,20); //Hole of the well\n    arc(50,120,180,300,100);\n    line(0,150,0,206);\n    line(100,150,100,206);\n\n    line(0,150,0,100);\n    line(0,100,50,100);\n    circle(50,100,10);\n\n    setfillstyle(SOLID_FILL,RED);\n    floodfill(20,170,WHITE);\n}\nvoid bucket(int j)\n{\n    ellipse(50,j,0,360,20,10);    //The Ellipse to be filled as blue\n    line(40,j+40,60,j+40);\n    line(40,j+40,30,j);\n    line(60,j+40,70,j);\n    setfillstyle(SOLID_FILL,BLUE);\n    floodfill(50,j,WHITE);\n}\nvoid main()\n{\n    int gdriver = DETECT, gmode,i;\n    initgraph(&amp;gdriver, &amp;gmode, \"C:\\\\TC\\\\BGI\");\n\n    cleardevice();\n\n    well();\n    bucket(130);\n\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3840, "user_id": 2176756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a04dca4e95f5b58b187c491463ba06?s=128&d=identicon&r=PG", "display_name": "j.holetzeck", "link": "https://stackoverflow.com/users/2176756/j-holetzeck"}, "edited": false, "score": 0, "creation_date": 1431540797, "post_id": 30222271, "comment_id": 48548486, "body": "How should while loop finish when last chunk is read?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1431540801, "post_id": 30222271, "comment_id": 48548490, "body": "Always check the return value of <code>scanf</code>: <code>if (fscanf(fp, &quot;%lu\\n&quot;, &amp;aux) != 1) &#47;* error *&#47;;</code> ... also <code>aux</code> is not an usigned long, the conversion specifier is incorrect."}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1431540872, "post_id": 30222271, "comment_id": 48548533, "body": "The <code>while</code> loop will break only if the cursor equals or is higher than the maximum size. This should be guaranteed to happen, but it&#39;s not and it doesn&#39;t happen."}, {"owner": {"reputation": 121, "user_id": 2117513, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2aa128935db2159d199642f052d0b86a?s=128&d=identicon&r=PG", "display_name": "jguilhermeam", "link": "https://stackoverflow.com/users/2117513/jguilhermeam"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1431541137, "post_id": 30222271, "comment_id": 48548692, "body": "@pmg i&#39;ve changed to unsigned but the error still occurs. even if I catch the error, how will I avoid it in the next iteration ?"}, {"owner": {"reputation": 890, "user_id": 2803693, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/64d57036e35aaa27be1e38a61b8149b3?s=128&d=identicon&r=PG&f=1", "display_name": "jsaji", "link": "https://stackoverflow.com/users/2803693/jsaji"}, "edited": false, "score": 0, "creation_date": 1431541411, "post_id": 30222271, "comment_id": 48548849, "body": "@jguilhermeam I case of error you could use goto to get out of the loop...but use properly"}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "reply_to_user": {"reputation": 890, "user_id": 2803693, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/64d57036e35aaa27be1e38a61b8149b3?s=128&d=identicon&r=PG&f=1", "display_name": "jsaji", "link": "https://stackoverflow.com/users/2803693/jsaji"}, "edited": false, "score": 1, "creation_date": 1431541517, "post_id": 30222271, "comment_id": 48548909, "body": "@Griffin This.. is terrible suggestion."}, {"owner": {"reputation": 3840, "user_id": 2176756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a04dca4e95f5b58b187c491463ba06?s=128&d=identicon&r=PG", "display_name": "j.holetzeck", "link": "https://stackoverflow.com/users/2176756/j-holetzeck"}, "reply_to_user": {"reputation": 890, "user_id": 2803693, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/64d57036e35aaa27be1e38a61b8149b3?s=128&d=identicon&r=PG&f=1", "display_name": "jsaji", "link": "https://stackoverflow.com/users/2803693/jsaji"}, "edited": false, "score": 0, "creation_date": 1431541532, "post_id": 30222271, "comment_id": 48548915, "body": "@griffin: ... of course not, the while loop should have an additional condition to detect end of file"}, {"owner": {"reputation": 121, "user_id": 2117513, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2aa128935db2159d199642f052d0b86a?s=128&d=identicon&r=PG", "display_name": "jguilhermeam", "link": "https://stackoverflow.com/users/2117513/jguilhermeam"}, "reply_to_user": {"reputation": 890, "user_id": 2803693, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/64d57036e35aaa27be1e38a61b8149b3?s=128&d=identicon&r=PG&f=1", "display_name": "jsaji", "link": "https://stackoverflow.com/users/2803693/jsaji"}, "edited": false, "score": 0, "creation_date": 1431541755, "post_id": 30222271, "comment_id": 48549048, "body": "@Griffin but I know I didn&#39;t reach EOF, I&#39;ve checked the input file, and it&#39;s not in the end. like I said, the code works... but when I split in too many small files, it stops working!"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1431541771, "post_id": 30222271, "comment_id": 48549057, "body": "It depends on your requirements. You can abort the program; you can ignore the error and advance the file pointer to after the error; you can say any error makes <code>aux</code> be <code>123456</code> ... ..."}, {"owner": {"reputation": 121, "user_id": 2117513, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2aa128935db2159d199642f052d0b86a?s=128&d=identicon&r=PG", "display_name": "jguilhermeam", "link": "https://stackoverflow.com/users/2117513/jguilhermeam"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1431542070, "post_id": 30222271, "comment_id": 48549228, "body": "@pmg how can I advance the file pointer after the error?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1431542684, "post_id": 30222271, "comment_id": 48549572, "body": "<code>fgetc()</code> advances the file pointer by <code>1</code> byte. But problems with <code>scanf</code> are probably not your error (or they would also appear when using less files). <code>ftell</code> can fail too (and return <code>-1</code>. Also check for that. Always check the return value of most library functions."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1431542953, "post_id": 30222271, "comment_id": 48549721, "body": "It&#39;s surprising that the loop is infinite.  It would expect that you wouldn&#39;t get all of your file content since you never reset <code>cursor</code> after each file completion."}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1431543281, "post_id": 30222271, "comment_id": 48549933, "body": "I remember there was an explicit complications when using file output right after an input. It guarantees an error."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1431544119, "post_id": 30222271, "comment_id": 48550456, "body": "@Malina: that&#39;s when the same file is being used. Here it&#39;s two different files."}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1431546017, "post_id": 30222271, "comment_id": 48551527, "body": "You are more than not wrong. You are right."}], "answers": [{"tags": [], "owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "is_accepted": false, "score": 1, "last_activity_date": 1431544413, "creation_date": 1431544413, "answer_id": 30223418, "question_id": 30222271, "link": "https://stackoverflow.com/questions/30222271/split-file-into-n-smaller-files-in-c/30223418#30223418", "title": "Split file into n smaller files in C", "body": "<p>if you have bad data in the file that isn't a long unsigned int format then the fscanf will read it, the file pointer for the fp file object won't change.  Then the program sets the fp file pointer back to the start of that read and it will do it again</p>\n\n<p>To prevent this you need to check the return value of the fscanf to see that it has an appropriate value ( probably 1 )</p>\n"}, {"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 2, "last_activity_date": 1517407251, "last_edit_date": 1517407251, "creation_date": 1431544598, "answer_id": 30223469, "question_id": 30222271, "link": "https://stackoverflow.com/questions/30222271/split-file-into-n-smaller-files-in-c/30223469#30223469", "title": "Split file into n smaller files in C", "body": "<p>If <em>splitting a file</em> is the focus, then simplify your method.  Because your post indicates you are working with a text file, the assumption is that it contains words with punctuation, numbers, linefeeds etc.  With this type of content, it can be parsed into lines using fgets()/fputs(). This will allow you to read lines from one large file, tracking accumulated size as you go, and writing lines to several smaller files...     </p>\n\n<p><strong><em>Some simple steps</em></strong>:  </p>\n\n<p><strong><em>1)</em></strong> determine file size of file to be split<br>\n<strong><em>2)</em></strong> Set desired small file size.<br>\n<strong><em>3)</em></strong> open large file<br>\n<strong><em>4)</em></strong> Use fgets/fputs in a loop, opening and closing files to split contents, using accumulated size as split point.<br>\n<strong><em>5)</em></strong> Clean up. (fclose files  etc.)     </p>\n\n<p>Here is an example that will illustrate these steps.  This splits a large text file by size, regardless of text content.  (I used a text file with 130K of volume and split it into segments of 5k</p>\n\n<pre><code>#define SEGMENT 5000 //approximate target size of small file\n\nlong file_size(char *name);//function definition below\n\nint main(void)\n{\n    int segments=0, i, len, accum;\n    FILE *fp1, *fp2;\n    long sizeFile = file_size(largeFileName);\n    segments = sizeFile/SEGMENT + 1;//ensure end of file\n    char filename[260]={\"c:\\\\play\\\\smallFileName_\"};//base name for small files.\n    char largeFileName[]={\"c:\\\\play\\\\largeFileName.txt\"};//change to your path\n    char smallFileName[260];\n    char line[1080];\n\n    fp1 = fopen(largeFileName, \"r\");\n    if(fp1)\n    {\n        for(i=0;i&lt;segments;i++)\n        {\n            accum = 0;\n            sprintf(smallFileName, \"%s%d.txt\", filename, i);\n            fp2 = fopen(smallFileName, \"w\");\n            if(fp2)\n            {\n                while(fgets(line, 1080, fp1) &amp;&amp; accum &lt;= SEGMENT)\n                {\n                    accum += strlen(line);//track size of growing file\n                    fputs(line, fp2);\n                }\n                fclose(fp2);\n            }\n        }\n        fclose(fp1);\n    }\n    return 0;\n}\n\nlong file_size(char *name)\n{\n    FILE *fp = fopen(name, \"rb\"); //must be binary read to get bytes\n\n    long size=-1;\n    if(fp)\n    {\n        fseek (fp, 0, SEEK_END);\n        size = ftell(fp)+1;\n        fclose(fp);\n    }\n    return size;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2771, "user_id": 4163321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZrgsU.gif?s=128&g=1", "display_name": "Lukas Thomsen", "link": "https://stackoverflow.com/users/4163321/lukas-thomsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1431546608, "last_edit_date": 1431546608, "creation_date": 1431546295, "answer_id": 30223894, "question_id": 30222271, "link": "https://stackoverflow.com/questions/30222271/split-file-into-n-smaller-files-in-c/30223894#30223894", "title": "Split file into n smaller files in C", "body": "<p>If you want to split a file into several parts with a specified maximum file size of each part, why do you use <code>fscanf(..)</code>, <code>ftell(..)</code> and <code>fprintf(..)</code>?\nThis is not the fastest way to achieve your goal...</p>\n\n<p>I recommend doing it in this way:</p>\n\n<ol>\n<li>Open input file</li>\n<li>As long as there is input data (<code>!feof(..)</code>)</li>\n<li>Open output file (if not already open)</li>\n<li>Read block of input data (<code>fread</code>)</li>\n<li>Write block of data to output file (<code>fwrite</code>)</li>\n<li>track number of bytes written and close output file if maximum file size is reached</li>\n<li>Go back to step 2.</li>\n<li>Clean up</li>\n</ol>\n\n<p>If doing so the split files will not exceed a specific maximum file size. Additionally you avoid usage of slow file I/O functions like <code>fprintf</code>.</p>\n\n<p>A possible implementation would look like this:</p>\n\n<pre><code>/*\n**  splitFile\n**  Splits an existing input file into multiple output files with a specified\n**  maximum file size.\n**\n**  Return Value:\n**  Number of created result files, or 0 in case of bad input data or a negative\n**  value in case of an error during file splitting.\n*/\nint splitFile(char *fileIn, size_t maxSize)\n{\n    int result = 0;\n    FILE *fIn;\n    FILE *fOut;\n    char buffer[1024 * 16];\n    size_t size;\n    size_t read;\n    size_t written;\n\n\n    if ((fileIn != NULL) &amp;&amp; (maxSize &gt; 0))\n    {\n        fIn = fopen(fileIn, \"rb\");\n        if (fIn != NULL)\n        {\n            fOut = NULL;\n            result = 1;   /* we have at least one part */\n\n            while (!feof(fIn))\n            {\n                /* initialize (next) output file if no output file opened */\n                if (fOut == NULL)\n                {\n                    sprintf(buffer, \"%s.%03d\", fileIn, result);\n                    fOut = fopen(buffer, \"wb\");\n                    if (fOut == NULL)\n                    {\n                        result *= -1;\n                        break;\n                    }\n\n                    size = 0;\n                }\n\n                /* calculate size of data to be read from input file in order to not exceed maxSize */\n                read = sizeof(buffer);\n                if ((size + read) &gt; maxSize)\n                {\n                    read = maxSize - size;\n                }\n\n                /* read data from input file */\n                read = fread(buffer, 1, read, fIn);\n                if (read == 0)\n                {\n                    result *= -1;\n                    break;\n                }\n\n                /* write data to output file */\n                written = fwrite(buffer, 1, read, fOut);\n                if (written != read)\n                {\n                    result *= -1;\n                    break;\n                }\n\n                /* update size counter of current output file */\n                size += written;\n                if (size &gt;= maxSize)   /* next split? */\n                {\n                    fclose(fOut);\n                    fOut = NULL;\n                    result++;\n                }\n            }\n\n            /* clean up */\n            if (fOut != NULL)\n            {\n                fclose(fOut);\n            }\n            fclose(fIn);\n        }\n    }\n\n    return (result);\n}\n</code></pre>\n\n<p>The above code split a test file with a size of 126803945 bytes into 121 1MB parts in about 500ms.</p>\n\n<p>Note that the size of buffer (here: 16KB) affects the speed a file is split. The bigger the buffer the faster a huge file is split. If you want to use really large buffers (>1MB or so) you have to allocate (and free) the buffer on each call (or use a static buffer if you do not need reentrant code).</p>\n"}], "owner": {"reputation": 121, "user_id": 2117513, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2aa128935db2159d199642f052d0b86a?s=128&d=identicon&r=PG", "display_name": "jguilhermeam", "link": "https://stackoverflow.com/users/2117513/jguilhermeam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7826, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1517407251, "creation_date": 1431540448, "last_edit_date": 1431611866, "question_id": 30222271, "link": "https://stackoverflow.com/questions/30222271/split-file-into-n-smaller-files-in-c", "title": "Split file into n smaller files in C", "body": "<p>I'm making a program to split a file into N smaller parts\nof (almost) equal sizes. So here's my code:</p>\n\n<pre><code>FILE * fp = fopen(file,\"r\");\nlong aux;\nlong cursor = 0;\nlong blockSize = 1024000; //supose each smaller file will have 1 MB\n\nlong bytesLimit = blockSize;    \n\nfor( i = 0 ; i &lt; n ; i++) {\n    FILE * fp_aux = fopen( outputs[i] , \"w\"); //outputs is an array of temporary file names\n    while(cursor &lt; bytesLimit) {    //here occurs the infinite loop\n         fscanf(fp,\"%lu\\n\",&amp;aux);\n         fprintf(fp_aux,\"%lu\\n\",aux);\n         cursor = ftell(fp);\n    }\n    fclose(fp_aux);\n    bytesLimit = bytesLimit + blockSize;\n}\n\n//here add some more logic to get the remaining content left in the main file\n</code></pre>\n\n<p>The code works if I want to split the file into two or three parts, but when I try to split it into 10 parts, <code>fscanf</code> locks on reading the same number and stays on an infinite loop there.</p>\n\n<p>My input file has the format \"%lu\\n\" like below:</p>\n\n<pre><code>1231231\n4341342\n4564565\n...\n</code></pre>\n"}, {"tags": ["c", "gcc", "assembly", "x86"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 4, "creation_date": 1431540357, "post_id": 30222214, "comment_id": 48548249, "body": "8 + 16 is 24, not 20. By the way, it seems likely that the compiler just got a little bit smarter, its local variable analysis pass considered both char arrays, and since char arrays don&#39;t need any alignment, it just stuck them together, and aligned the resulting &quot;compact&quot; array."}, {"owner": {"reputation": 58628, "user_id": 227267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b03410a67ad6b9cf3fce7b0bf45084c8?s=128&d=identicon&r=PG", "display_name": "Matti Virkkunen", "link": "https://stackoverflow.com/users/227267/matti-virkkunen"}, "edited": false, "score": 4, "creation_date": 1431540417, "post_id": 30222214, "comment_id": 48548271, "body": "Is there any point in aligning <code>char</code> values anyway?"}, {"owner": {"reputation": 6611, "user_id": 3694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d313f71cf4b0555ba0b354f925bb0454?s=128&d=identicon&r=PG", "display_name": "rmmh", "link": "https://stackoverflow.com/users/3694/rmmh"}, "edited": false, "score": 2, "creation_date": 1431540419, "post_id": 30222214, "comment_id": 48548274, "body": "is this on x86, or x86_64?"}, {"owner": {"reputation": 23682, "user_id": 18196, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/nTnqA.jpg?s=128&g=1", "display_name": "Frank V", "link": "https://stackoverflow.com/users/18196/frank-v"}, "edited": false, "score": 0, "creation_date": 1431540510, "post_id": 30222214, "comment_id": 48548324, "body": "can&#39;t speak to this but I&#39;m interested in the answer. I do wonder if it has to do with an optimization since created to solve this problem or the 64 bit-ness of things."}, {"owner": {"reputation": 58628, "user_id": 227267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b03410a67ad6b9cf3fce7b0bf45084c8?s=128&d=identicon&r=PG", "display_name": "Matti Virkkunen", "link": "https://stackoverflow.com/users/227267/matti-virkkunen"}, "edited": false, "score": 0, "creation_date": 1431543290, "post_id": 30222214, "comment_id": 48549939, "body": "I wonder if it would align the bottom of the stack if you made that function call an external function to follow an ABI stack alignment requirement. The alignment might be getting optimized away in a leaf function. (Not that reserving a few bytes of stack you don&#39;t use would often be a problem, but eh)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58628, "user_id": 227267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b03410a67ad6b9cf3fce7b0bf45084c8?s=128&d=identicon&r=PG", "display_name": "Matti Virkkunen", "link": "https://stackoverflow.com/users/227267/matti-virkkunen"}, "edited": false, "score": 0, "creation_date": 1431548448, "post_id": 30222214, "comment_id": 48552811, "body": "@MattiVirkkunen: you might be surprised how often some bytes of stack <i>do</i> present a problem; at least if they accumulate. There are much more embedded systems with limited ressources out there than PCs without (or with relaxed limits)."}, {"owner": {"reputation": 58628, "user_id": 227267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b03410a67ad6b9cf3fce7b0bf45084c8?s=128&d=identicon&r=PG", "display_name": "Matti Virkkunen", "link": "https://stackoverflow.com/users/227267/matti-virkkunen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1431548678, "post_id": 30222214, "comment_id": 48552913, "body": "@Olaf: This is why I said &quot;often&quot;, not &quot;always&quot;. Very memory limited systems usually don&#39;t have gigantic alignment or other similar requirements either (aligning everything to 16 bytes would waste terrible amounts of memory!). And no, I&#39;m not surprised by the fact as I was working with a system with 512 bytes of memory just yesterday."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1431549109, "post_id": 30222214, "comment_id": 48553130, "body": "Well, actually, you postualated it would not ne often, I tried to clraify it is exactly the other way around. And, yes, there is quite some demand for alignment, expecially as embedded MCUs often do not allow a value to be unaligned. This is true for most smaller AMRs, for instance (whereas the Cortex-M might allow for this, it is a performance issue). Notet that we are talking in padding in general, not just for 128 bits or so. And, yes, I do know very well. Btw: a system with 512 bytes would not require alignment, as it would be an 8 bit system at most, but we are talking about 32bitters."}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 3140390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3551a0c38b235a6d196223088790849?s=128&d=identicon&r=PG&f=1", "display_name": "banal", "link": "https://stackoverflow.com/users/3140390/banal"}, "is_accepted": false, "score": 0, "last_activity_date": 1431542349, "last_edit_date": 1431542349, "creation_date": 1431541820, "answer_id": 30222641, "question_id": 30222214, "link": "https://stackoverflow.com/questions/30222214/memory-alignment-today-and-20-years-ago/30222641#30222641", "title": "Memory alignment today and 20 years ago", "body": "<p>I have not tried that specific version of compiler or the distribution version you report. My guess would be the 16 is from byte alignment requirements on stack (i.e. all stack adjustments would be x byte aligned and x may be 16 for your invocation). </p>\n\n<p>Note that variable alignment you seem to have started with, is slightly different from the above and is controlled by align markings on the variable in gcc. Try using those and you should see a difference.</p>\n"}, {"tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 2, "last_activity_date": 1431546428, "last_edit_date": 1431546428, "creation_date": 1431542203, "answer_id": 30222760, "question_id": 30222214, "link": "https://stackoverflow.com/questions/30222214/memory-alignment-today-and-20-years-ago/30222760#30222760", "title": "Memory alignment today and 20 years ago", "body": "<p>Memory alignment of which stack alignment is just one aspect depends on the architecture. It is partly defined in the Applicaion Binary Interface of the language and a Procedure Call Standard (sometimes it is both in a single spec) for the architecture (CPU, it might even vary depending on platform) and also depends on the compiler/toolchain where the former documents leave room for variations.</p>\n\n<p>The former two documents (names may vary) are mostly for the external interface between functions; they might leave internal structure to the toolchain. Howwever, that has to match the architecture. Normally the hardware requires a minimal alignment, but allows for a larger alignment for performance reasons (e.g.: byte-alignment minimum, but this would require multiple bus-cycles to read a 32 bit word, so the compiler uses a 32 bit alignment).</p>\n\n<p>Normally, the compiler (following the PCS) uses an alignment optimal for the architecture and under control of optimization settings (optimize for speed or size). It takes into account not only the size of the object (aligned to its natural boundary), but also sizes of internal busses (e.g. a 32 bit x86 has internal 64 or 128 bit busses, ARM CPUs have internal 32 to 128 (possibly even wider) bit busses), caches, etc. For local variables, it may also take into account access-patterns, so two adjacent variables may be loaded in parallel into a register pair instead of two separate loads or even reorder such variables.</p>\n\n<p>The stackpointer might require a higher alignment for instance, so the CPU can push in an interrupt frame two registers at once, push vector registers which require higher alignment, etc. You can write quite a thick book about this subject (and I bet, someone already has).</p>\n\n<p>So, in general, there is no single one-alignment-fits all rule. However, for struct and array packing, the C standard <em>does</em> define some rules for packing/alignment, mostly to guarantee consistence of e.g. sizeof(type) and the address in an array (required for correct <code>malloc()</code>).</p>\n\n<p>Even char arrays might be aligned for optimal cache layout. Note it is not only the CPU which might have caches, but also PCIe bridges, not to mention PCIe transfers themselves down to DRAM pages.</p>\n"}, {"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 7, "last_activity_date": 1431631435, "last_edit_date": 1431631435, "creation_date": 1431542944, "answer_id": 30222983, "question_id": 30222214, "link": "https://stackoverflow.com/questions/30222214/memory-alignment-today-and-20-years-ago/30222983#30222983", "title": "Memory alignment today and 20 years ago", "body": "<p>What has changed is <a href=\"http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions\" rel=\"nofollow\">SSE</a>, which requires 16 byte alignment, this is covered in this older gcc document for <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/i386-and-x86-64-Options.html\" rel=\"nofollow\">-mpreferred-stack-boundary=num</a> which says (<em>emphasis mine</em>):</p>\n\n<blockquote>\n  <p>On Pentium and PentiumPro, double and long double values should be aligned to an 8 byte boundary (see -malign-double) or suffer significant run time performance penalties. <strong>On Pentium III, the Streaming SIMD Extension (SSE) data type __m128 suffers similar penalties if it is not 16 byte aligned.</strong></p>\n</blockquote>\n\n<p>This is also backed up by the paper <a href=\"https://www.ethicalhacker.net/columns/heffner/smashing-the-modern-stack-for-fun-and-profit\" rel=\"nofollow\">Smashing The Modern Stack For Fun And Profit</a> which covers this an other modern changes that break <em>Smashing the Stack for Fun and Profit</em>.</p>\n"}], "owner": {"reputation": 217, "user_id": 4896987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e881d04b207cef66d9a5119e5ee836ae?s=128&d=identicon&r=PG&f=1", "display_name": "0x00", "link": "https://stackoverflow.com/users/4896987/0x00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 5, "accepted_answer_id": 30222983, "answer_count": 3, "score": 13, "last_activity_date": 1431631435, "creation_date": 1431540226, "last_edit_date": 1431541279, "question_id": 30222214, "link": "https://stackoverflow.com/questions/30222214/memory-alignment-today-and-20-years-ago", "title": "Memory alignment today and 20 years ago", "body": "<p>In the famous paper \"Smashing the Stack for Fun and Profit\", its author takes a C function</p>\n\n<pre><code>void function(int a, int b, int c) {\n  char buffer1[5];\n  char buffer2[10];\n}\n</code></pre>\n\n<p>and generates the corresponding assembly code output</p>\n\n<pre><code>pushl %ebp\nmovl %esp,%ebp\nsubl $20,%esp\n</code></pre>\n\n<p>The author explains that since computers address memory in multiples of word size, the compiler reserved 20 bytes on the stack (8 bytes for buffer1, 12 bytes for buffer2). </p>\n\n<p>I tried to recreate this example and got the following</p>\n\n<pre><code>pushl   %ebp\nmovl    %esp, %ebp\nsubl    $16, %esp\n</code></pre>\n\n<p>A different result! I tried various combinations of sizes for buffer1 and buffer2, and it seems that modern gcc does not pad buffer sizes to multiples of word size anymore. Instead it abides the <code>-mpreferred-stack-boundary</code> option.</p>\n\n<p>As an illustration -- using the paper's arithmetic rules, for buffer1[5] and buffer2[13] I'd get 8+16 = 24 bytes reserved on the stack. But in reality I got 32 bytes.</p>\n\n<p>The paper is quite old and a lot of stuff happened since. I'd like to know, what exactly motivated this change of behavior? Is it the move towards 64bit machines? Or something else?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The code is compiled on a x86_64 machine using gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) like that:</p>\n\n<p><code>$ gcc -S -o example1.s example1.c -fno-stack-protector -m32</code></p>\n"}, {"tags": ["c", "character-encoding", "internationalization"], "answers": [{"comments": [{"owner": {"reputation": 27655, "user_id": 4421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4eae4d8a759deacb031139c09b7a9c?s=128&d=identicon&r=PG", "display_name": "pixelbeat", "link": "https://stackoverflow.com/users/4421/pixelbeat"}, "edited": false, "score": 0, "creation_date": 1431543985, "post_id": 30223139, "comment_id": 48550372, "body": "Yes I see the distinction between runtime and compile time constants, though am not convinced as to whether the these constants refer to a single encoded character. Let me ask a different way. If MB_LEN_MAX represents only a single encoded character, then what character in what encoding needs 16 bytes (which is the value on GNU/Linux)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 27655, "user_id": 4421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4eae4d8a759deacb031139c09b7a9c?s=128&d=identicon&r=PG", "display_name": "pixelbeat", "link": "https://stackoverflow.com/users/4421/pixelbeat"}, "edited": false, "score": 0, "creation_date": 1431544107, "post_id": 30223139, "comment_id": 48550450, "body": "@pixelbeat: There isn&#39;t one (that I know of), but you&#39;re allowed to create your own multibyte locales, provided that you do not define a character whose encoding would require more than 16 bytes. The constants refer to a single character. I&#39;ll edit the answer."}, {"owner": {"reputation": 27655, "user_id": 4421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4eae4d8a759deacb031139c09b7a9c?s=128&d=identicon&r=PG", "display_name": "pixelbeat", "link": "https://stackoverflow.com/users/4421/pixelbeat"}, "edited": false, "score": 0, "creation_date": 1431553272, "post_id": 30223139, "comment_id": 48555244, "body": "Thanks for the detailed answer. I see that iso-2022-kr takes up to 7 bytes per char, and that&#39;s what made me suspect that MB_LEN_MAX might be so large to hold multiple chars (2 + alignment). By default on my Fedora 22 system, UTF8 has the largest MB_CUR_MAX at 6, with various other encodings taking 2,3 or 4 bytes. I&#39;m still not sure why MB_LEN_MAX is so large."}, {"owner": {"reputation": 27655, "user_id": 4421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4eae4d8a759deacb031139c09b7a9c?s=128&d=identicon&r=PG", "display_name": "pixelbeat", "link": "https://stackoverflow.com/users/4421/pixelbeat"}, "edited": false, "score": 1, "creation_date": 1431594587, "post_id": 30223139, "comment_id": 48569243, "body": "I aksed Bruno Haible who anwered at <a href=\"http://lists.gnu.org/archive/html/bug-gnulib/2015-05/msg00001.html\" rel=\"nofollow noreferrer\">lists.gnu.org/archive/html/bug-gnulib/2015-05/msg00001.html</a> and essentially agreed with this answer. I.E. there is a 1:1 mapping between wide chars and encoded chars in POSIX and glibc, and MB_LEN_MAX=16 is for future proofing only"}, {"owner": {"reputation": 5148, "user_id": 53276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330bc82a1e67a4fcbd08ebe471212440?s=128&d=identicon&r=PG", "display_name": "Mihai Nita", "link": "https://stackoverflow.com/users/53276/mihai-nita"}, "edited": false, "score": 0, "creation_date": 1431919886, "post_id": 30223139, "comment_id": 48685633, "body": "If some library thinks that &quot;UTF8 has the largest MB_CUR_MAX at 6&quot; then that&#39;s a bug. Valid UTF-8 can have max 4 bytes. A variant with up to 6 bytes is called &quot;CESU&quot; and &quot;Such an encoding is not conformant to UTF-8 as defined&quot;. (see <a href=\"http://unicode.org/faq/utf_bom.html#utf8-4\" rel=\"nofollow noreferrer\">unicode.org/faq/utf_bom.html#utf8-4</a>). The other way to go up to 6 bytes is if you represent characters beyond U+10FFFF, which is (again) invalid Unicode (<a href=\"http://unicode.org/faq/utf_bom.html#gen6\" rel=\"nofollow noreferrer\">unicode.org/faq/utf_bom.html#gen6</a>)"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 4, "last_activity_date": 1431544601, "last_edit_date": 1431544601, "creation_date": 1431543412, "answer_id": 30223139, "question_id": 30222107, "link": "https://stackoverflow.com/questions/30222107/are-there-any-unicode-wide-chars-that-encode-to-multiple-encoded-characters/30223139#30223139", "title": "Are there any unicode/wide chars that encode to multiple encoded characters", "body": "<p><code>MB_CUR_MAX</code> is correct, but both are big enough. You might want to use <code>MB_LEN_MAX</code> if you want to avoid variable-length array declarations.</p>\n\n<p><code>MB_CUR_MAX</code> is the maximum number of bytes in a multibyte character in the <em>current locale</em>. <code>MB_LEN_MAX</code> is the maximum number of bytes in a character for <em>any supported locale</em>. Unlike <code>MB_CUR_MAX</code>, <code>MB_LEN_MAX</code> is a macro so it can be used in an array declaration without creating a VLA.</p>\n\n<p>Both constants refer to a single wide character. There is no simple definition of what a multibyte character is exactly, since multibyte encodings can include shift sequences; if the multibyte locale includes shift sequences, the number of bytes required for a particular call to <code>wctomb</code> with a particular wide character might vary from call to call depending on the shift state. (Also, the actual code might be different in different shift states.)</p>\n\n<p>As far as I know, there is nothing which prevents a wide character from being translated to a multibyte sequence which might be decomposable into other multibyte sequences (as with Unicode composition); the definition of <code>wctomb</code> talks only about \"representation\". But I don't know of an implementation which does that, either; Unicode canonical decomposition must be done with separate APIs.</p>\n\n<p>So it is possible that no installed locale requires a value as large as <code>MB_LEN_MAX</code>. But there is nothing stopping you from adding locales -- or even creating your own -- provided that they don't exceed the encoding limit (16 bytes on Linux).</p>\n"}], "owner": {"reputation": 27655, "user_id": 4421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4eae4d8a759deacb031139c09b7a9c?s=128&d=identicon&r=PG", "display_name": "pixelbeat", "link": "https://stackoverflow.com/users/4421/pixelbeat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 30223139, "answer_count": 1, "score": 2, "last_activity_date": 1431544601, "creation_date": 1431539847, "last_edit_date": 1431542887, "question_id": 30222107, "link": "https://stackoverflow.com/questions/30222107/are-there-any-unicode-wide-chars-that-encode-to-multiple-encoded-characters", "title": "Are there any unicode/wide chars that encode to multiple encoded characters", "body": "<p>Consider wctomb(), which takes a wide character and encodes to the currently selected character set. The glibc man page states that the output buffer should be MB_CUR_MAX, while the FreeBSD man page states the output buffer size should be MB_LEN_MAX. Which is correct here?</p>\n\n<p>Are there any example wide char/encoding combinations where it takes multiple encoded characters to represent the wide char?</p>\n\n<p>On a more general note, does MB_CUR_MAX refer to the max combined encoded char byte count to represent a wide char, or is it just representing the max byte count for any particular encoded char?</p>\n"}, {"tags": ["c", "function-pointers"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1431542267, "post_id": 30221981, "comment_id": 48549338, "body": "Can you please just show the complete piece of code that you currently have, and point out what exactly you are not happy with? It would make it a lot easier for us than trying to guess how all these code snippets are combined together into that."}, {"owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1431547218, "post_id": 30221981, "comment_id": 48552168, "body": "@barakmanos hope, the update helps."}], "answers": [{"comments": [{"owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431594761, "post_id": 30231620, "comment_id": 48569342, "body": "I have to walk true your solution for a little to understand your solution. But my first question would be: Is it safe to cast a function pointer to void * as you did in the IOMap table? (are function pointer guaranteed fit in a void *. I thought this guarantee only holds for object pointer)"}, {"owner": {"reputation": 2957, "user_id": 545199, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49e8eb486d64b2f7e5aec4c8077230e1?s=128&d=identicon&r=PG", "display_name": "S E", "link": "https://stackoverflow.com/users/545199/s-e"}, "reply_to_user": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431594950, "post_id": 30231620, "comment_id": 48569447, "body": "all pointers in a system are the same size, the only size that changes is the size of the value that they point to. Now the alignment of void* is only guarenteed to be the same as char*, however, i convert the function pointer to a void* and then assign that void* to a preallocated function pointer so the pointer that i invoke as a function is guarenteed to have the correct alignment and value as a function pointer"}, {"owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431595246, "post_id": 30231620, "comment_id": 48569607, "body": "And second question: is it save to dereference a function pointer declared to have different signature, than the function pointed to? That happens when you use oi.in_func and oi.out_func as the data pointer of the function pointed to is not of void * but of tx_t."}, {"owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431595377, "post_id": 30231620, "comment_id": 48569689, "body": "And regarding the pointer size of function and object pointer are the same size (and compatible with void * casts): Is this &quot;just&quot; reality, or also the case according to the C standards?  Besides that, the solution really looks good."}, {"owner": {"reputation": 2957, "user_id": 545199, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49e8eb486d64b2f7e5aec4c8077230e1?s=128&d=identicon&r=PG", "display_name": "S E", "link": "https://stackoverflow.com/users/545199/s-e"}, "reply_to_user": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431595384, "post_id": 30231620, "comment_id": 48569695, "body": "again c doesn&#39;t actually care about the type of your variables, only the size and alignment of variables. so as long as the arguments i pass have the same size and alignments as the original function it doesnt matter if the superficial type is different"}, {"owner": {"reputation": 2957, "user_id": 545199, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49e8eb486d64b2f7e5aec4c8077230e1?s=128&d=identicon&r=PG", "display_name": "S E", "link": "https://stackoverflow.com/users/545199/s-e"}, "reply_to_user": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431595481, "post_id": 30231620, "comment_id": 48569753, "body": "as far as pointer sizes go, i don&#39;t know if its part of the c standard or not, but computers have a bus for addressing memory, and that bus is a fixed size, that is what determines the address size and thus the pointer size on a system so it couldnt really be any bigger or smaller. if it were bigger, you would not be able to read the value at that location of the ram chip and if smaller it would point to more than one value in ram and no longer be unique"}, {"owner": {"reputation": 2957, "user_id": 545199, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49e8eb486d64b2f7e5aec4c8077230e1?s=128&d=identicon&r=PG", "display_name": "S E", "link": "https://stackoverflow.com/users/545199/s-e"}, "reply_to_user": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431639389, "post_id": 30231620, "comment_id": 48596443, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/77849/discussion-between-s-e-and-mark-a\">continue this discussion in chat</a>."}, {"owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431685373, "post_id": 30231620, "comment_id": 48613853, "body": "Hm. Now at work I checked my C90 standard (of course this might have changed): casting function pointers to void * seems to as undefined behavior by obmission: ANSI 9899-1990, 6.3.4 (with 6.3.16.1) only talks object pointers that can be cast to void * and function pointers to be cast to other function pointers. Anyway this could be fixed by using casts to the functions directly (or some big enough integer and back)... but: (see next comment)..."}, {"owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431686174, "post_id": 30231620, "comment_id": 48614350, "body": "but: The functions and the pointers to that functions are of incompatible type (see ANSI 9899-1990, 6.3.4, with 6.1.2.6 and 6.5.4.3), as one has a parameter of type void* and the other of some specific type T1_t. This is explicit undefined behavior, and though I believe you that there will be no practical impact on any real life C compiler or newer iterations of the language C, i will not be able to use your solution, as I am bound to C90 and strictly forbidden to use code, that uses undefined behavior, if if proven to have no impact atm."}, {"owner": {"reputation": 2957, "user_id": 545199, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49e8eb486d64b2f7e5aec4c8077230e1?s=128&d=identicon&r=PG", "display_name": "S E", "link": "https://stackoverflow.com/users/545199/s-e"}, "reply_to_user": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431692553, "post_id": 30231620, "comment_id": 48618407, "body": "im not sure the function is an incompatible type though as you can see from this segment of the ansi c specification: A <code>TypeIs_VoidPointer may be converted to or from a pointer to any incomplete or object type. In this specification, the conversion to a TypeIs_VoidPointer may be either implicit or explicit; the conversion from TypeIs_VoidPointer must be explicit.</code>"}, {"owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431696449, "post_id": 30231620, "comment_id": 48621250, "body": "Hm. Don&#39;t have a newer spec but C90 ( ANSI/ISO 8999-1990) says at 6.5.4.1: &quot;[...]. For 2 pointer types to be compatible, [...] both shall be pointers to compatible types&quot;. If I have not missed some exception, I assume, that though conversion is allowed, between T1_t *, and void *, they are not compatible, as void is not compatible to T1_t. Woud be interessing to get a clarification here."}, {"owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "edited": false, "score": 0, "creation_date": 1431756272, "post_id": 30231620, "comment_id": 48644084, "body": "And here: <a href=\"http://stackoverflow.com/questions/27767392/c-function-pointer-type-compatibility\" title=\"c function pointer type compatibility\">stackoverflow.com/questions/27767392/&hellip;</a> I have an answer that fits to my suspect."}], "tags": [], "owner": {"reputation": 2957, "user_id": 545199, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49e8eb486d64b2f7e5aec4c8077230e1?s=128&d=identicon&r=PG", "display_name": "S E", "link": "https://stackoverflow.com/users/545199/s-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1431593397, "last_edit_date": 1431593397, "creation_date": 1431588158, "answer_id": 30231620, "question_id": 30221981, "link": "https://stackoverflow.com/questions/30221981/pattern-for-handling-function-pointer-of-functions-of-inhomogene-signature-in-c/30231620#30231620", "title": "pattern for handling function pointer of functions of inhomogene signature in C", "body": "<p>I wrote something that I believe does what you want. Let me know if I'm missing something. I wrote stubs for the various functions and types that you mentioned just so the code would compile, but it should work no matter the types used or the implementation used in the functions you defined. Basically it works because all pointers are just integers that give the address of a value in memory, and the contents of that memory are unimportant for passing the pointer as long as the pointer points to a location that is sufficiently large to contain the value needed. The only issue that can sometimes throw a wrench into this notion is that some compilers require specific data types to be aligned along specific byte boundaries. To get around this we first notice that these byte boundaries are all powers of 2 and that the alignment will never exceed the size of the largest primitive which for c is currently 64 bits (8 bytes). This is true even for non-primitive types eg. struct/union. Then all we have to do is allocate an additional 8 bytes in memory on the buffer that needs to hold this typed data, and then add a value between 0 and 7 to the pointer to make it divisible by 8 and thus eliminating the alignment problem on all machines that support 64 bit pointers or less.</p>\n\n<pre><code>    /*\n * Test.c\n *\n *  Created on: May 14, 2015\n *      Author: tiger\n */\n#include &lt;stdio.h&gt;\n\ntypedef int ErrCode_t;\ntypedef int TrCode_t;\ntypedef unsigned int uint32_t;\ntypedef unsigned char uint8_t;\ntypedef unsigned long long int uint64_t;\n\ntypedef int t1_t;\ntypedef short t2_t;\ntypedef float t3_t;\ntypedef double t4_t;\ntypedef long long int t5_t;\n\n#define MAX_DATA_TYPE_SIZE ((uint32_t)64) //or whatever the size is of your largest data type\n\nuint32_t evalTr(TrCode_t code);\nuint32_t evalError(ErrCode_t code);\n\nErrCode_t in_func1(t1_t* const data1);\nErrCode_t in_func2(t2_t* const data2);\nErrCode_t in_func3(t3_t* const data3);\nErrCode_t in_func4(t4_t* const data4);\nErrCode_t in_func5(t5_t* const data5);\n\nTrCode_t tr_func1();\nTrCode_t tr_func2();\nTrCode_t tr_func3();\nTrCode_t tr_func4();\nTrCode_t tr_func5();\n\nvoid out_func1(t1_t const* const data1, const uint32_t handled_error);\nvoid out_func2(t2_t const* const data2, const uint32_t handled_error);\nvoid out_func3(t3_t const* const data3, const uint32_t handled_error);\nvoid out_func4(t4_t const* const data4, const uint32_t handled_error);\nvoid out_func5(t5_t const* const data5, const uint32_t handled_error);\n\ntypedef struct\n{\n    TrCode_t (*tr_func)(void);\n    ErrCode_t (*in_func)(void* const data);\n    void (*out_func)(const void* const data, const uint32_t handled_error);\n}IOSet;\n\n#define FUNCTION_COUNT ((uint32_t)5)\nIOSet ioMap[FUNCTION_COUNT] =\n{\n    {.tr_func = (void*)&amp;tr_func1, .in_func = (void*)&amp;in_func1, .out_func = (void*)&amp;out_func1},\n    {.tr_func = (void*)&amp;tr_func2, .in_func = (void*)&amp;in_func2, .out_func = (void*)&amp;out_func2},\n    {.tr_func = (void*)&amp;tr_func3, .in_func = (void*)&amp;in_func3, .out_func = (void*)&amp;out_func3},\n    {.tr_func = (void*)&amp;tr_func4, .in_func = (void*)&amp;in_func4, .out_func = (void*)&amp;out_func4},\n    {.tr_func = (void*)&amp;tr_func5, .in_func = (void*)&amp;in_func5, .out_func = (void*)&amp;out_func5}\n};\n\nvoid execute_io(IOSet io, void * const pData)\n{\n    if(evalTr(io.tr_func()))\n    {\n        const ErrCode_t myErr = io.in_func(pData);\n        const uint32_t myOutErr = evalError(myErr);\n\n        io.out_func(pData,myOutErr);\n    }\n}\n\nvoid do_all_my_work()\n{\n    uint32_t i;\n    //allocate a buffer sufficiently large to hold any of the data types on the stack\n    // + 8 to allow correcting pointer for any alignment issues\n    uint8_t dataBuffer[MAX_DATA_TYPE_SIZE + 8];\n    uint64_t dataHandle = (uint64_t)&amp;dataBuffer;\n    //ensure the dataHandle is divisible by 8 to satisfy all possible alignments\n    //all 8 byte alignments are also valid 4 byte alignments\n    //all 4 byte alignments are also valid 2 byte alignments\n    //all 2 byte alignments are also valid 1 byte alignments\n\n    //you can use a smaller type than uint64_t for this computation if your pointers are smaller,\n    //but this should work for pointers of all sizes up to 64 bits\n    if((dataHandle % 8) &gt; 0)\n    {\n        dataHandle += 8ULL-(dataHandle % 8);\n    }\n\n    for(i = 0; i &lt; FUNCTION_COUNT; i++)\n    {\n        execute_io(ioMap[i], (void*)dataHandle);\n    }\n}\n\nuint32_t evalTr(TrCode_t code)\n{\n    static uint32_t result = 0;\n    result ^= 1;\n    return result;\n}\n\nuint32_t evalError(ErrCode_t code)\n{\n    return 0;\n}\n\nErrCode_t in_func1(t1_t* const data1)\n{\n    *data1 = 1;\n    return 0;\n}\n\nErrCode_t in_func2(t2_t* const data2)\n{\n    *data2 = 2;\n    return 0;\n}\n\nErrCode_t in_func3(t3_t* const data3)\n{\n    *data3 = 3;\n    return 0;\n}\n\nErrCode_t in_func4(t4_t* const data4)\n{\n    *data4 = 4;\n    return 0;\n}\n\nErrCode_t in_func5(t5_t* const data5)\n{\n    *data5 = 5;\n    return 0;\n}\n\n\nTrCode_t tr_func1()\n{\n    return 0;\n}\n\nTrCode_t tr_func2()\n{\n    return 0;\n}\n\nTrCode_t tr_func3()\n{\n    return 0;\n}\n\nTrCode_t tr_func4()\n{\n    return 0;\n}\n\nTrCode_t tr_func5()\n{\n    return 0;\n}\n\n\nvoid out_func1(t1_t const* const data1, const uint32_t handled_error)\n{\n    printf(\"%d\\n\", *data1);\n    return;\n}\n\nvoid out_func2(t2_t const* const data2, const uint32_t handled_error)\n{\n    printf(\"%d\\n\", *data2);\n    return;\n}\n\nvoid out_func3(t3_t const* const data3, const uint32_t handled_error)\n{\n    printf(\"%f\\n\", *data3);\n    return;\n}\n\nvoid out_func4(t4_t const* const data4, const uint32_t handled_error)\n{\n    printf(\"%f\\n\", *data4);\n    return;\n}\n\nvoid out_func5(t5_t const* const data5, const uint32_t handled_error)\n{\n    printf(\"%llu\\n\", *data5);\n    return;\n}\n\nint main()\n{\n    for(;;)\n    {\n        do_all_my_work();\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 529, "user_id": 3364914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/88605d34ba43533671f706b20107fc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A.", "link": "https://stackoverflow.com/users/3364914/mark-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1431593397, "creation_date": 1431539428, "last_edit_date": 1431547844, "question_id": 30221981, "link": "https://stackoverflow.com/questions/30221981/pattern-for-handling-function-pointer-of-functions-of-inhomogene-signature-in-c", "title": "pattern for handling function pointer of functions of inhomogene signature in C", "body": "<p>So,\nI have a huge set of functions to read inputs from some source of the form:</p>\n\n<pre><code>ErrCode_t in_func1(t1_t * const data1);\nErrCode_t in_func2(t2_t * const data2);\n...\n</code></pre>\n\n<p>some trigger functions, telling me if I may call the functions above:</p>\n\n<pre><code>TrCode_t tr_func1();\nTrCode_t tr_func2();\n...\n</code></pre>\n\n<p>and corresponding functions to write out the data:</p>\n\n<pre><code>void out_func1(t1_t const * const data1, const uint32_t handled_error);\nvoid out_func2(t2_t const * const data2, const uint32_t handled_error);\n...\n</code></pre>\n\n<p>Also there is a quite complicated algorithm depending on the trigger functions, that decides if I may call the input function, or not. (this is a simplified picture; their more then one trigger function and timers envolved for each I/O).</p>\n\n<p>This algo but basicly says:\nIf the trigger says yes, call the input function with a pointer to a data variable, check the error, do some validation, and then pass the pointer of the updated variable to the output.</p>\n\n<pre><code> void execute_f1(t1_t * const pData1)\n {\n    if(evalTr(tr_func1()))\n    {\n      const ErrCode_t myErr = in_func1(pData1);\n      const uint32_t myOutErr = evalError(myErr);\n\n      out_func1(pData1,myOutErr);\n    }\n }\n</code></pre>\n\n<p>(while evalTr and evalError shall be some evaluation functions that are used correctly)</p>\n\n<p>I would like to encapsulate this algo in a own function,</p>\n\n<pre><code> void execute_io(???)\n</code></pre>\n\n<p>to be called with some function pointers to perform this. But I can't think of a pattern that would be conform to the standard, without a huge amount of wrapper functions.\nI wrap the input-functions and output functions to perfom the correct casts, and to adjust the signatures like:</p>\n\n<pre><code>ErrCode_t my_in_func1(void * const pData1)\n{\n    t1_t * const data1 = (t1_t*) pData1;\n    return in_func1(data1);\n}\n</code></pre>\n\n<p>and output functions alike:</p>\n\n<pre><code> void my out_func2(void const * const data2, const uint32_t handled_error) {...}\n</code></pre>\n\n<p>so that I have homogeneous signatures, and that way easy function pointers.\nBut I would really prefer not to wrap all those functions. Do anyone know a pattern that would work \"inside\" execute_io and surrounding code, so I don't have to wrap all that functions?  </p>\n\n<p>Update: And here in a combination as requested from barak manos:</p>\n\n<p>system_interface.h</p>\n\n<pre><code> ErrCode_t in_func1(t1_t * const data1);\n /* some 500 more of them */\n\n TrCode_t tr_func1();\n /* some 500 more of them */\n\n void out_func1(t1_t const * const data1, const uint32_t handled_error);\n /* some 500 more of them */\n</code></pre>\n\n<p>my_code.c</p>\n\n<pre><code> static ErrCode_t my_in_func1(void * const data1)\n {\n    t1_t * const data1 = (t1_t*) pData1;\n    return in_func1(data1);\n }\n /* and some 500 more wrappers */\n\n static void my_out_func1(void const * const pData1, const uint32_t handled_error)\n {\n    t1_t const * const data1 = (t1_t) pData1;\n    out_func1(pData1, handled_error);\n    return;\n }\n /* and some 500 more wrappers */\n\ntypedef ErrCode_t (*inFuncPtr)(void * const);\ntypedef void (*outFuncPtr)(void const * const, const uint32_t);\ntypedef TrCode_t (*trFuncPtr)();\n\nexecute_io(inFuncPtr inFunc, outFuncPtr outFunc, trFuncPtr trFunc, void * pData)\n{\n   if(evalTr((*trFunc)()))\n   {\n      const ErrCode_t myErr = (*inFunc)(pData);\n      const uint32_t myOutErr = evalError(myErr);\n\n      (*outFunc)(pData,myOutErr);\n   }\n   return;\n}\n\nvoid do_all_my_work()\n{\n   {\n     t1_t data1;\n     execute_io(&amp;my_in_func1, &amp;my_out_func1, &amp;tr_func1, &amp;data1);\n   }\n   {\n     t2_t data2;\n     execute_io(&amp;my_in_func2, &amp;my_out_func2, &amp;tr_func2, &amp;data2);\n   }\n   /* and some 499 other calls */\n}\n</code></pre>\n\n<p>I want to find another pattern, that does not force me to wrap all that I/O functions. (and no, the above code is surely not an executable example but merely a concept)</p>\n"}, {"tags": ["c", "recursion", "tree", "stack-overflow", "traversal"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1431539304, "post_id": 30221853, "comment_id": 48547632, "body": "I have a strong suspicion that you are reading beyond initialized data within your array and therefore recursing forever.  As a quick test, can you make sure that your whole tree.data[] structure is cleared to 0 (so that a read into data not yet written returns a 0 and fails gracefully) so that this can be ruled out?"}, {"owner": {"reputation": 35, "user_id": 4882523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1046114235416492/picture?type=large", "display_name": "Haris Vitunskas", "link": "https://stackoverflow.com/users/4882523/haris-vitunskas"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1431539422, "post_id": 30221853, "comment_id": 48547710, "body": "Right after I create the tree I use this function:     void initializeTree(Tree * tree)     {         if (tree == NULL)             return;          for (int i = 0; i &lt; MAX_TREE_CAPACITY; i++)         {             tree-&gt;data[i].accNumber = 0;        }     }"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1431539492, "post_id": 30221853, "comment_id": 48547757, "body": "You cannot probe <code>data</code> unless the index used is <i>known</i> to be within the limits of <code>data</code>&#39;s magnitude. Just because you have a node in your array doesn&#39;t mean both its kids are there as well. Ex: your posted tree is storable in an array of 16 nodes, Ask yourself what your code does when you recurse to examine the <i>children</i> of index 15. Checking <code>tree.data[index * 2 + 1].accNumber != 0</code> isn&#39;t enough. Before that you need to know that <code>index * 2 + 1</code> is within <code>0..(n-1)</code>, where <code>n</code> is the magnitude of <code>data</code> in the first place."}, {"owner": {"reputation": 35, "user_id": 4882523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1046114235416492/picture?type=large", "display_name": "Haris Vitunskas", "link": "https://stackoverflow.com/users/4882523/haris-vitunskas"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1431539999, "post_id": 30221853, "comment_id": 48548067, "body": "@WhozCraig Maximum capacity of the tree is 1000 nodes, so in this case it shouldn&#39;t be a problem (or am I not interpreting your comment right?). Thank you for the tip though, I&#39;ll add that to the code."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1431543138, "post_id": 30221853, "comment_id": 48549828, "body": "@HarisVitunskas that was somewhat the point. Whether there is or is not space for those children, eventually you <i>can</i> reach a node that cannot <i>have</i> children, much less children with <code>0</code>, simply because there is no space in the array for there to be any, and your posted code makes <i>no</i> affordances to prevent invoking UB in that case. Something such as  <code>if (index &gt;= tree.maxnodes) return;</code> assuming such a member exists, at the top of the function would alleviate most of that problem. It would also remove the need for the embedded <code>if</code> conditions."}, {"owner": {"reputation": 1912, "user_id": 3580498, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tngH3.jpg?s=128&g=1", "display_name": "G&#225;bor Angyal", "link": "https://stackoverflow.com/users/3580498/g%c3%a1bor-angyal"}, "edited": false, "score": 1, "creation_date": 1431545144, "post_id": 30221853, "comment_id": 48551053, "body": "There is is absolutly no information in your question about the absolut tree capacity. How do you expect anyone to explain?"}], "answers": [{"tags": [], "owner": {"reputation": 1912, "user_id": 3580498, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tngH3.jpg?s=128&g=1", "display_name": "G&#225;bor Angyal", "link": "https://stackoverflow.com/users/3580498/g%c3%a1bor-angyal"}, "is_accepted": false, "score": 1, "last_activity_date": 1431541256, "last_edit_date": 1431541256, "creation_date": 1431540526, "answer_id": 30222292, "question_id": 30221853, "link": "https://stackoverflow.com/questions/30221853/binary-tree-traversal-causes-stack-overflow/30222292#30222292", "title": "Binary tree traversal causes stack overflow", "body": "<p>You state that: </p>\n\n<blockquote>\n  <p>all .accNumber values are initialized as 0 at the start of the program\n  to mark empty nodes.</p>\n</blockquote>\n\n<p>This is not a strong enough criterion for the recursion to stop.</p>\n\n<p>If you want to be explicit you should make an upperbound to the index and make sure you don't exceed it. For example: if <code>tree.size</code> iz the number of nodes in the tree, you should also chack before each step of the recursion, like this:</p>\n\n<pre><code>    int left_child_idx = index * 2 + 1;\n    if (tree.data[left_child_idx].accNumber != 0 &amp;&amp; left_child_idx &lt; tree.size)\n    {\n        printf(\"will print: %d\\n\", index * 2 + 1); //debug\n        traversePreOrder(tree, index * 2 + 1);\n    }\n</code></pre>\n\n<p>Or, if you do not want to do this, you should make sure, that there is two terminating leaf with 0 <code>accNumber</code> for <strong>all</strong> your last nodes.</p>\n\n<p>In this datastructure that actually means that the second half of your <code>data</code> array should solely consist of such terminating leafs.</p>\n\n<p>Looks ugly, but I hope you see it:</p>\n\n<pre><code>                      53167\n                  /           \\\n              13457             74310\n             /   \\            /       \\\n            0      43158     71401     79473\n          /  \\     /   \\     /    \\      /  \\\n         0    0   14741  0  69690  0    0   99751\n        /\\    /\\   /\\    /\\   /\\   /\\   /\\   /\\\n       0  0  0  0 0  0  0  0 0  0 0  0 0  0 0  0    \n</code></pre>\n\n<p>And as an array:</p>\n\n<pre><code>[53167, 13457, 74310, 0, 43158, 71401, 79473, 0, 0, 14741, 0, 69690, 0, 0, 99751,\n0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] \n</code></pre>\n\n<p>There is 31 element, 99751 is the 15th. Would any of the second half be non-zero, you would get an overflow.</p>\n"}], "owner": {"reputation": 35, "user_id": 4882523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1046114235416492/picture?type=large", "display_name": "Haris Vitunskas", "link": "https://stackoverflow.com/users/4882523/haris-vitunskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431545000, "creation_date": 1431539021, "last_edit_date": 1431545000, "question_id": 30221853, "link": "https://stackoverflow.com/questions/30221853/binary-tree-traversal-causes-stack-overflow", "title": "Binary tree traversal causes stack overflow", "body": "<p>So I'm making a binary search tree implemented through arrays (if parent's index is i, then left child's index is (i * 2 + 1), and right child's index is (i * 2 + 2).</p>\n\n<p>Whenever I'm trying to traverse the tree (pre-orderly), I'm getting a stack overflow during the 3rd pre-order function call.</p>\n\n<p>Here's my code for pre-order function:</p>\n\n<pre><code>void traversePreOrder(Tree tree, int index)\n{\n    printf(\"%d\\n\", index); //debug\n    if (tree.data[index].accNumber != 0) //all .accNumber values are initialized as 0\n                                   // at the start of the program to mark empty nodes.\n    {\n        printf(\"printing: %d\\n\", index); //debug\n        printNode(tree.data[index]);\n\n        if (tree.data[index * 2 + 1].accNumber != 0)\n        {\n            printf(\"will print: %d\\n\", index * 2 + 1); //debug\n            traversePreOrder(tree, index * 2 + 1);\n        }\n\n        if (tree.data[index * 2 + 2].accNumber != 0)\n        {\n            printf(\"will print: %d\\n\", index * 2 + 2); //debug\n            traversePreOrder(tree, index * 2 + 2);\n        }\n    }\n    else\n        return;\n}\n</code></pre>\n\n<p>Here is the output of pre-order traversal:</p>\n\n<pre><code>0\nprinting: 0\nUser: Dumbledore\nAccount number: 53167\nAccount type: public\nAccount balance: 4597.54\nIs account in debt? Yes\n\nwill print: 1\n1\nprinting: 1\nUser: Stark\nAccount number: 13497\nAccount type: private\nAccount balance: 1549.50\nIs account in debt? No\n\nwill print: 3\n\nProcess returned  255 (0xFF)   execution time : 5.856 s\nPress any key to continue.\n</code></pre>\n\n<p>The tree is supposed to look like:</p>\n\n<pre><code>(only accNumber values)\n                    53167\n                  /       \\\n              13457      74310\n                 \\       /   \\\n               43158  71401  79473\n                /      /       \\\n             14741   69690    99751\n</code></pre>\n\n<p>Thank you for your help.</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>Changing maximum tree capacity from 1000 to 50 somehow solved the problem. If somebody could explain why, that would be nice.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "edited": false, "score": 0, "creation_date": 1431538553, "post_id": 30221696, "comment_id": 48547176, "body": "Are you using C or C++?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1431538577, "post_id": 30221696, "comment_id": 48547189, "body": "Um, the table <b>is</b> 10 elements in size, regardless of the values, so the result from <code>sizeof()</code> is correct.  For <i>any</i> static array, <code>sizeof(array)&#47;sizeof(array[0])</code> will give you the array element count, and in this case, <code>sizeof(unsigned char)</code> is 1, so <code>sizeof(buf)&#47;sizeof(buf[0])</code>=<code>10&#47;1</code>=<code>10</code>."}, {"owner": {"reputation": 7982, "user_id": 2679626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ae2587956371769336745ff9ef4dab0?s=128&d=identicon&r=PG", "display_name": "Denilson Amorim", "link": "https://stackoverflow.com/users/2679626/denilson-amorim"}, "edited": false, "score": 0, "creation_date": 1431538586, "post_id": 30221696, "comment_id": 48547197, "body": "This is not possible, your <code>[10]</code> array has implicit <code>0x0</code> on the part you didn&#39;t initialise. It&#39;s not like there&#39;s a magic bit <i>&quot;you didn&#39;t initialise me!&quot;</i>"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 1, "creation_date": 1431538637, "post_id": 30221696, "comment_id": 48547233, "body": "Are you expecting <code>{1,2}</code> to return <code>2</code> and <code>{1,2,0,0}</code> to return <code>4</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1431538716, "post_id": 30221696, "comment_id": 48547285, "body": "if you are using C++ then use a <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a>.  It will remember the size for you."}, {"owner": {"reputation": 74, "user_id": 3573865, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44d6153b0e2d4945c14da176aca5ef20?s=128&d=identicon&r=PG&f=1", "display_name": "Bou6", "link": "https://stackoverflow.com/users/3573865/bou6"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1431538773, "post_id": 30221696, "comment_id": 48547338, "body": "I&#39;am using c @MooseBoys yes i am expecting this result"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1431538839, "post_id": 30221696, "comment_id": 48547378, "body": "@fedi If that&#39;s the case then there&#39;s no way to do it.  Once the program has been compiled, both cases result in the array being initialized to <code>{1,2,0,0,0,0,0,0,0,0}</code>."}, {"owner": {"reputation": 1453, "user_id": 3195614, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qw0hw.jpg?s=128&g=1", "display_name": "Zach P", "link": "https://stackoverflow.com/users/3195614/zach-p"}, "edited": false, "score": 0, "creation_date": 1431538924, "post_id": 30221696, "comment_id": 48547424, "body": "The size IS 10 elements. The method you used currently is how strings are (mostly) built, and therefore of course you can&#39;t see beyond the 0. When using C, there is no way to know how many spots in the array were actually initialized (as all contain a value)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1431539049, "post_id": 30221696, "comment_id": 48547506, "body": "You will have to set the unused portions of the array to a Canary value, some number that cannot exist in your algorithm. When you find the Canary, you stop counting. Doesn&#39;t come free and good luck finding a Canary for most algorithms."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1431538817, "post_id": 30221771, "comment_id": 48547366, "body": "The elements not explicitly initialised are set to 0."}], "tags": [], "owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "is_accepted": false, "score": 1, "last_activity_date": 1431538734, "creation_date": 1431538734, "answer_id": 30221771, "question_id": 30221696, "link": "https://stackoverflow.com/questions/30221696/unsigned-char-table-length/30221771#30221771", "title": "unsigned char table length", "body": "<p>Technically, since you declared a statically allocated array of 10 elements, the size of the array is 10. Even though you may not have <strong>initialized</strong> every element, there is something filling that space. C++ cannot determine whether the value in the array means anything or not.</p>\n"}, {"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 1, "last_activity_date": 1431538757, "creation_date": 1431538757, "answer_id": 30221779, "question_id": 30221696, "link": "https://stackoverflow.com/questions/30221696/unsigned-char-table-length/30221779#30221779", "title": "unsigned char table length", "body": "<p>After</p>\n\n<pre><code>unsigned char x[10] = {1, 2, 3};\n</code></pre>\n\n<p>the variable <code>x</code> (an array) has 10 elements, the first three initialized to 1, 2 and 3 and all the others initialized to 0. In other words that definition is absolutely identical to</p>\n\n<pre><code>unsigned char x[10] = {1, 2, 3, 0, 0, 0, 0, 0, 0, 0};\n</code></pre>\n\n<p>An array in C and C++ is just a fixed area of memory and doesn't include a counter of how many \"interesting\" elements are there.</p>\n\n<p>If you are looking for a container with a variable number of elements consider instead <code>std::vector</code> (C++ only). With that <code>std::vector::size()</code> returns the current number of elements in the container.</p>\n"}, {"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 1, "last_activity_date": 1431538823, "creation_date": 1431538823, "answer_id": 30221797, "question_id": 30221696, "link": "https://stackoverflow.com/questions/30221696/unsigned-char-table-length/30221797#30221797", "title": "unsigned char table length", "body": "<p>If you need the array to contain exactly the number of elements you've specified, just declare it without a specific size:</p>\n\n<pre><code>unsigned char buf[]={'1','5',0x00,'8'};\ncout &lt;&lt; sizeof(buf); // should be 4\n</code></pre>\n\n<p>If you want to store a variable amount of data (in C++) use <code>std::vector</code> instead of an array.</p>\n\n<p>Otherwise you'll need to keep track of the number of valid elements yourself. There's nothing in the language that will do it for you.</p>\n"}, {"tags": [], "owner": {"reputation": 12893, "user_id": 922712, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58c323703912545891e23986ae04e2fa?s=128&d=identicon&r=PG", "display_name": "user93353", "link": "https://stackoverflow.com/users/922712/user93353"}, "is_accepted": false, "score": 0, "last_activity_date": 1431538948, "creation_date": 1431538948, "answer_id": 30221832, "question_id": 30221696, "link": "https://stackoverflow.com/questions/30221696/unsigned-char-table-length/30221832#30221832", "title": "unsigned char table length", "body": "<p>buf[i] evaluates to false when buf[i] contains 0.  </p>\n\n<p>You cannot do what you want unless you know one value which can never occur in your array between 0 to UCHAR_MAX (255). Say the value is 255, then you first preinitialize the full array to 255 before you start filling it up.</p>\n\n<pre><code> memset(buf, 255, sizeof(char) * sizeof(buf));\n</code></pre>\n\n<p>Then you fill other elements like you want and then you can use the following</p>\n\n<pre><code>for(i = 0; buf[i] != 255, ++i)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 74, "user_id": 3573865, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44d6153b0e2d4945c14da176aca5ef20?s=128&d=identicon&r=PG&f=1", "display_name": "Bou6", "link": "https://stackoverflow.com/users/3573865/bou6"}, "edited": false, "score": 0, "creation_date": 1431539613, "post_id": 30221863, "comment_id": 48547834, "body": "what is the impact of this declaration in term of memory?"}], "tags": [], "owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "is_accepted": false, "score": 1, "last_activity_date": 1431540045, "last_edit_date": 1431540045, "creation_date": 1431539046, "answer_id": 30221863, "question_id": 30221696, "link": "https://stackoverflow.com/questions/30221696/unsigned-char-table-length/30221863#30221863", "title": "unsigned char table length", "body": "<p>Compilers cannot know how you would like to use an array instance.\nTherefore you must follow the language's semantics. By declaring your array globally or locally, but with the storage class specifier <code>static</code> you are initializing every element to 0 on default and your function will work.</p>\n\n<p><code>0x00</code> is false. <code>0x00</code> (which same as <code>0x0</code>) is a hex number representing <code>0</code> (false). This is where your counting loop will stop at - the 3rd element.</p>\n\n<hr>\n\n<p>Another thing you can do is declare your array with non-fixed size.</p>\n\n<pre><code>unsigned char buf[]={'1','5',0x00,'8'};\n</code></pre>\n\n<p>In that case, the <code>sizeof</code> operator works as expected.\nBecause that way, you will have an array of 4 elements.</p>\n\n<hr>\n\n<p><code>strlen()</code> obviously won't work as it is designed to work with strings, not a buffer.</p>\n\n<hr>\n\n<p>As for a function that counts on a smarter way:</p>\n\n<pre><code>size_t arrcnt (unsigned char source[], size_t size)\n{\n    size_t i;\n\n    for(i = size; i &gt;= 0 &amp;&amp; !source[i]; i--);\n\n    return i + 1;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>printf(\"size of buf: %u\", arrcnt(buf, sizeof(buf));\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4317344"}, "edited": false, "score": 0, "creation_date": 1431539235, "post_id": 30221902, "comment_id": 48547588, "body": "for non-zero values only. would this work. otherwise you cant do it."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4317344"}, "is_accepted": false, "score": 0, "last_activity_date": 1431539143, "creation_date": 1431539143, "answer_id": 30221902, "question_id": 30221696, "link": "https://stackoverflow.com/questions/30221696/unsigned-char-table-length/30221902#30221902", "title": "unsigned char table length", "body": "<p>try putting :</p>\n\n<pre><code>for(int i=0;buf[i]!= 0;i++)\ncount++;\nreturn count;\n</code></pre>\n"}], "owner": {"reputation": 74, "user_id": 3573865, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44d6153b0e2d4945c14da176aca5ef20?s=128&d=identicon&r=PG&f=1", "display_name": "Bou6", "link": "https://stackoverflow.com/users/3573865/bou6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1431540045, "creation_date": 1431538463, "last_edit_date": 1431538839, "question_id": 30221696, "link": "https://stackoverflow.com/questions/30221696/unsigned-char-table-length", "title": "unsigned char table length", "body": "<p>I declared a table of unsigned char as follow:</p>\n\n<pre><code>unsigned char buf[10]={'1','5',0x00,'8'};\n</code></pre>\n\n<p>in order to know the number of elements of this table i implemented this function</p>\n\n<pre><code>int tablength(unsigned char *buf)\n{\nint i=0;\nfor (i=0;buf[i];i++)\n    ;\nreturn i;\n}\n</code></pre>\n\n<p>However this function don't give me the right result when the buffer contains 0 in the middle .Sizeof don't give me the right result since it returns 10 in this case i can't neither use strlen since this is a table of unsigned char.\nDo you have any idea to improve this function or any predefined function that help me solve my problem (the result that i 'am  waiting for is 4)</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct", "segmentation-fault"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1431538515, "post_id": 30221642, "comment_id": 48547152, "body": "The problem with <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a> (which you have) is that sometimes it might <i>seem</i> to work."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1431538601, "post_id": 30221642, "comment_id": 48547205, "body": "I have two pieces of advice for you: 1) <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\"><code>valgrind</code></a> is the best available tool for diagnosing what has <i>actually</i> gone wrong in cases of memory corruption. It is very common for the true cause of such bugs to be nowhere near the point where the program crashes. 2) For us to help you, we need a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, verifiable example</a> -- a complete program, that we can run for ourselves and watch crash, containing no more code than is strictly necessary to reproduce the problem. You may discover the bug yourself while writing this."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1431538637, "post_id": 30221642, "comment_id": 48547234, "body": "And a third, unrelated piece of advice: <code>TypeDefStruct</code> is a <i>terrible</i> name for a data type.  Think of something more meaningful."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4793626"}, "edited": false, "score": 0, "creation_date": 1431539028, "post_id": 30221642, "comment_id": 48547489, "body": "thanks for your advices! the names are changed like some people do with foo, bar. And the program is huge. this will take a while."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4793626"}, "edited": false, "score": 0, "creation_date": 1431542339, "post_id": 30221642, "comment_id": 48549369, "body": "I think i got a part of my problem figured out. <code>memcpy((void*) &amp;tdss[index], (void*) &amp;tds, sizeof(TypeDefStruct)); &#47;&#47; new</code> has a syntax error! Since tds is a type defined struct we don&#39;t need the <code>&amp;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 2, "creation_date": 1431538733, "post_id": 30221669, "comment_id": 48547297, "body": "@SteveMcGregor people will only comment on the code your posted; moreover the <code>&amp;</code> error is serious."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 2, "last_activity_date": 1431538548, "last_edit_date": 1431538548, "creation_date": 1431538394, "answer_id": 30221669, "question_id": 30221642, "link": "https://stackoverflow.com/questions/30221642/c-struct-pointer-array-allocate-sigsegv/30221669#30221669", "title": "c struct pointer array allocate sigsegv", "body": "<pre><code>strcpy(&amp;tds-&gt;data, charPointerArray[index]) // works (not original code)\n</code></pre>\n\n<p><code>data</code> is an uninitialized object, you need to allocate an array with <code>malloc</code>.\nAlso <code>&amp;tds-&gt;data</code> argument is wrong, you need to use <code>tds-&gt;data</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4793626"}, "is_accepted": true, "score": 0, "last_activity_date": 1431542767, "creation_date": 1431542767, "answer_id": 30222929, "question_id": 30221642, "link": "https://stackoverflow.com/questions/30221642/c-struct-pointer-array-allocate-sigsegv/30222929#30222929", "title": "c struct pointer array allocate sigsegv", "body": "<p>In my case this did not solve all my errors. Also not the sigsegv.</p>\n\n<p>But there is a Syntax error in </p>\n\n<p><code>memcpy((void*) &amp;tdss[index], (void*) &amp;tds, sizeof(TypeDefStruct));</code> ! </p>\n\n<p>Since <code>tds</code> is a type defined struct we don't need the <code>&amp;</code>. At least I think so...</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4793626"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 30222929, "answer_count": 2, "score": 0, "last_activity_date": 1431542767, "creation_date": 1431538283, "last_edit_date": 1431538505, "question_id": 30221642, "link": "https://stackoverflow.com/questions/30221642/c-struct-pointer-array-allocate-sigsegv", "title": "c struct pointer array allocate sigsegv", "body": "<p>I'm new to c and I have the following problem:</p>\n\n<p>after executing this part of the code</p>\n\n<pre><code>TypeDefStruct tdss[10];\nfor(...) {\n        TypeDefStruct *tds = (TypeDefStruct*)malloc(sizeof(TypeDefStruct));\n        strcpy(&amp;tds-&gt;data, charPointerArray[index]) // works (not original code)\n        memcpy((void*) &amp;tdss[index], (void*) &amp;tds, sizeof(TypeDefStruct)); // new\n        free(tds);  // new\n    }\n</code></pre>\n\n<p>an error occurs here</p>\n\n<pre><code>TypeDefStruct *tds = &amp;tdss[0]; // worked before\nprintf(\"\\twith input: \\\"%s\\\"\\n\", tds-&gt;data); // worked before\n</code></pre>\n\n<p>the TypeDefStruct:</p>\n\n<pre><code>typedef struct TypeDefStruct{\n    char* data;\n} TypeDefStruct;\n</code></pre>\n\n<p>also the error sigsagv occurs at some point (don't know where, may not here at all...)</p>\n\n<p>what I'm trying to do</p>\n\n<p>I am trying to copy this struct into an array and manage my memory correctly.</p>\n\n<p>please, don't mind asking for more information!</p>\n"}, {"tags": ["c", "ncurses", "curses", "pdcurses"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1431538741, "post_id": 30221361, "comment_id": 48547306, "body": "Post declaration of <code>document[]</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1431538916, "post_id": 30221361, "comment_id": 48547420, "body": "Maybe add <code>fflush(stdout)</code> after <code>printw(&quot;%c&quot;,(char)document[counter]);</code>"}, {"owner": {"reputation": 216, "user_id": 4175331, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fRYkE.jpg?s=128&g=1", "display_name": "chenshuiluke", "link": "https://stackoverflow.com/users/4175331/chenshuiluke"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1431539681, "post_id": 30221361, "comment_id": 48547884, "body": "@chux Posted the declaration and <code>fflush(stdout)</code> hasn&#39;t done a thing :/"}], "answers": [{"comments": [{"owner": {"reputation": 216, "user_id": 4175331, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fRYkE.jpg?s=128&g=1", "display_name": "chenshuiluke", "link": "https://stackoverflow.com/users/4175331/chenshuiluke"}, "edited": false, "score": 0, "creation_date": 1431540360, "post_id": 30221920, "comment_id": 48548250, "body": "Thanks a bunch man! i&#39;d have never thought that that was the cause. Good thing I printed the contents of document, eh? :)"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1431543302, "post_id": 30221920, "comment_id": 48549947, "body": "Noting &quot;Most of this behavior&quot;, raises a question: what aspect is @rici assuming is not documented?  (The action of carriage return is mentioned toward the end of the <a href=\"http://invisible-island.net/ncurses/man/curs_addch.3x.html\" rel=\"nofollow noreferrer\">waddch manual page</a>, so <i>that</i> cannot be it)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1431543850, "post_id": 30221920, "comment_id": 48550300, "body": "@ThomasDickey: Fair enough. I suppose I should have read all the way through to the end before the snipe. Fixed with thanks."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1431543780, "last_edit_date": 1431543780, "creation_date": 1431539219, "answer_id": 30221920, "question_id": 30221361, "link": "https://stackoverflow.com/questions/30221361/printw-wont-print-a-single-character-from-a-uint8-t-array/30221920#30221920", "title": "printw() won&#39;t print a single character from a uint8_t array", "body": "<p>You need to get rid of the carriage return (CR) characters (<code>\\r</code>).</p>\n\n<p>When you output a CR, ncurses resets the cursor to the first column in the same row. Then when you output a NL (<code>\\n</code>), ncurses erases from the cursor position to the end of the row before advancing the cursor to the next row. That effectively deletes the entire row that was just printed.</p>\n\n<p>This behaviour is documented, for what it's worth. From <code>man waddch</code> (emphasis added):</p>\n\n<blockquote>\n  <p>If <code>ch</code> is a tab, newline, or backspace, the cursor is moved appropriately within the window.  Backspace moves  the  cursor  one  character left; at the left edge of a window it does nothing.  <strong>Newline does a <code>clrtoeol</code></strong>, then moves the cursor to the window left margin on the next line, scrolling the window if on the last line.  Tabs are considered to be at every eighth column.  The tab interval may  be  altered  by setting the <code>TABSIZE</code> variable.</p>\n</blockquote>\n\n<p>The response to a carriage return is documented in the ncurses waddch manpage, at the end of the PORTABILITY section:</p>\n\n<blockquote>\n  <p>If  <code>ch</code>  is  a  carriage return, the cursor is moved to the       beginning of the current row of the window. This is  true of other implementations, but is not documented.</p>\n</blockquote>\n\n<p>(Thanks to Thomas Dickey for pointing to the PORTABILITY section.)</p>\n"}], "owner": {"reputation": 216, "user_id": 4175331, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fRYkE.jpg?s=128&g=1", "display_name": "chenshuiluke", "link": "https://stackoverflow.com/users/4175331/chenshuiluke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "accepted_answer_id": 30221920, "answer_count": 1, "score": 1, "last_activity_date": 1431543780, "creation_date": 1431537397, "last_edit_date": 1431543433, "question_id": 30221361, "link": "https://stackoverflow.com/questions/30221361/printw-wont-print-a-single-character-from-a-uint8-t-array", "title": "printw() won&#39;t print a single character from a uint8_t array", "body": "<p>Here is my main() code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#ifdef __gnu_linux__\n    #include &lt;ncurses.h&gt;\n#endif\n#ifdef _WIN32\n    #include &lt;curses.h&gt;\n#endif\n#include \"terminal_info.h\"\n#include \"interface.h\"\nint main()\n{\n    initscr();\n    setvbuf(stdout, NULL, _IONBF, 0);\n    testForUI();\n    readUIFile();\n    continuouslyUpdateInfo();\n    refresh();\n    printDocument();\n    getch();\n    endwin();\n    clearAll();\n    return 0;\n}\n</code></pre>\n\n<p>The problem I'm having occurs in <code>printDocument()</code>:</p>\n\n<pre><code>void printDocument()\n{\n    int counter = 0;\n    printw(\"Document Size: %d\\n\", documentSize);\n    for(counter = 0; counter &lt; documentSize; counter++)\n    {\n        printw(\"%c\",(char)document[counter]);\n        refresh();\n    }\n\n}\n</code></pre>\n\n<p>At the start of the for loop, gdb says the contents of document are as follows:</p>\n\n<pre><code>$1 = (uint8_t *) 0x3e32c0 \"&lt;Root&gt;\\r\\n    &lt;Hello&gt;World&lt;/Hello&gt;\\r\\n    &lt;This&gt;\\r\\n\n&lt;Is&gt;:-)&lt;/Is&gt;\\r\\n        &lt;An&gt;:-O&lt;/An&gt;\\r\\n        &lt;Example&gt;:-D&lt;/Example&gt;\\r\\n    &lt;/This&gt;\\r\\n&lt;/Root&gt;\\r\\n\u00ab\u00ab\u00ab\u00ab\u00ab\u00ab\u00ab\u00ab_\u00ee_\u00ee_\"\n</code></pre>\n\n<p>But the program only prints:</p>\n\n<pre><code>Document Size: 123\n</code></pre>\n\n<p>However, if I change the printw statement to:</p>\n\n<pre><code>printw(\"%c - %d\",(char)document[counter], document[counter]);\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>Document Size: 123\n\n - 13\n - 10  - 32  - 32  - 32  - 32&lt; - 60H - 72e - 101l - 108l - 108o - 111&gt; - 62W - 8\n7o - 111r - 114l - 108d - 100&lt; - 60/ - 47H - 72e - 101l - 108l - 108o - 111&gt; - 6\n - 13\n - 13\n - 10    - 9&lt; - 60I - 73s - 115&gt; - 62: - 58- - 45) - 41&lt; - 60/ - 47I - 73s - 115\n - 13\n - 10    - 9&lt; - 60A - 65n - 110&gt; - 62: - 58- - 45O - 79&lt; - 60/ - 47A - 65n - 110\n - 13\n - 10    - 9&lt; - 60E - 69x - 120a - 97m - 109p - 112l - 108e - 101&gt; - 62: - 58- -\n - 13\n - 13\n - 13\n - 10\n</code></pre>\n\n<p>I tried disabling buffering in main() with setvbuf(), but it hasn't done me any good at all.</p>\n\n<p>Here is the document that is read and printed, if it may help:</p>\n\n<pre><code>&lt;Root&gt;\n    &lt;Hello&gt;World&lt;/Hello&gt;\n    &lt;This&gt;\n    &lt;Is&gt;:-)&lt;/Is&gt;\n    &lt;An&gt;:-O&lt;/An&gt;\n    &lt;Example&gt;:-D&lt;/Example&gt;\n    &lt;/This&gt;\n&lt;/Root&gt;\n</code></pre>\n\n<p>Declaration of document: <code>extern uint8_t * document;</code></p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 1300, "user_id": 1198066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a0a68dd4c4916fc2fd33708e595bf5?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1198066/ross"}, "edited": false, "score": 0, "creation_date": 1431537662, "post_id": 30221308, "comment_id": 48546653, "body": "You&#39;re only allocating storage for a single &quot;structure&quot;.  So in your loop you&#39;re changing the value of j for that single structure.  Do you want a unique structure per pthread_create?  If so use an array estrutura_main structure[NUM_T];"}], "answers": [{"tags": [], "owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "is_accepted": true, "score": 0, "last_activity_date": 1431537584, "creation_date": 1431537584, "answer_id": 30221421, "question_id": 30221308, "link": "https://stackoverflow.com/questions/30221308/passing-arguments-to-a-thread/30221421#30221421", "title": "Passing arguments to a thread", "body": "<p>It is because <code>&amp;structure</code> is always the same for your <code>NUM_T</code> calls to <code>pthread_create</code>.</p>\n\n<p>You may try</p>\n\n<pre><code>estrutura_main structure[NUM_T];\nfor(i=0;i&lt;NUM_T;i++){\n    structure[i].j=i;\n    pthread_create(&amp;threads[i], NULL, sum, (void*)&amp;structure[i]);\n}\n</code></pre>\n\n<p>then each thread gets a pointer to different instance.</p>\n"}], "owner": {"reputation": 421, "user_id": 4896102, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-0X5OfVvHY2c/AAAAAAAAAAI/AAAAAAAACKs/NTaHAz5k3XY/photo.jpg?sz=128", "display_name": "Daniela Maia", "link": "https://stackoverflow.com/users/4896102/daniela-maia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 30221421, "answer_count": 1, "score": 0, "last_activity_date": 1431537644, "creation_date": 1431537222, "last_edit_date": 1431537644, "question_id": 30221308, "link": "https://stackoverflow.com/questions/30221308/passing-arguments-to-a-thread", "title": "Passing arguments to a thread", "body": "<p>I have this struct:</p>\n\n<pre><code>#define NUM_T 5\n\ntypedef struct {\n    int j;\n    int vetor[BUFFER_SIZE];\n} estrutura_main;\n</code></pre>\n\n<p>which I want to pass as argument to threads:</p>\n\n<pre><code>estrutura_main structure;\nfor(i=0;i&lt;NUM_T;i++){\n        structure.j=i;\n        pthread_create(&amp;threads[i], NULL, sum,(void*)&amp;structure);\n}\n</code></pre>\n\n<p>my problem is that when i access <code>j</code> in function <code>sum</code> it is always 4, and it should be each time a differente number, from 0 to 4. I've tried changing it to</p>\n\n<pre><code>typedef struct {\n    int j[NUM_T];\n    int vetor[BUFFER_SIZE];\n} estrutura_main;\n</code></pre>\n\n<p>but I had trouble accessing the position of <code>j</code> I wanted in the thread.</p>\n\n<p>How do I solve this?</p>\n"}, {"tags": ["android", "c", "android-ndk", "java-native-interface", ".a"], "answers": [{"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 1, "last_activity_date": 1431540737, "creation_date": 1431540737, "answer_id": 30222349, "question_id": 30221216, "link": "https://stackoverflow.com/questions/30221216/ndk-build-error-prebuilt-library-mk28-missing-separator-stop/30222349#30222349", "title": "ndk-build Error prebuilt-library.mk:28: *** missing separator. Stop", "body": "<p>It looks like you are missing: </p>\n\n<pre><code>LOCAL_SRC_FILES := yourmodule.a\n</code></pre>\n\n<p>before:</p>\n\n<pre><code>include $(PREBUILT_STATIC_LIBRARY)\n</code></pre>\n\n<p>inside prebuilt-library.mk you can see:</p>\n\n<pre><code># Check that LOCAL_SRC_FILES contains only paths to shared libraries\nifneq ($(words $(LOCAL_SRC_FILES)),1)\n$(call __ndk_info,ERROR:$(LOCAL_MAKEFILE):$(LOCAL_MODULE): The LOCAL_SRC_FILES for a prebuilt static library should only contain one item))\n$(call __ndk_error,Aborting)\nendif\n</code></pre>\n\n<p>or maybe it is set to some invalid value and you rather should add:</p>\n\n<pre><code>include $(CLEAR_VARS)\n</code></pre>\n\n<p>right after:</p>\n\n<pre><code># static library info\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4213340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XlWcd.jpg?s=128&g=1", "display_name": "coffee8651", "link": "https://stackoverflow.com/users/4213340/coffee8651"}, "is_accepted": false, "score": 0, "last_activity_date": 1508212641, "creation_date": 1508212641, "answer_id": 46782220, "question_id": 30221216, "link": "https://stackoverflow.com/questions/30221216/ndk-build-error-prebuilt-library-mk28-missing-separator-stop/46782220#46782220", "title": "ndk-build Error prebuilt-library.mk:28: *** missing separator. Stop", "body": "<p>I add ndk abiFilters at my build.gradle,and it works.</p>\n\n<pre><code>defaultConfig {\n    applicationId \"com.coffee.test\"\n    minSdkVersion 21\n    targetSdkVersion 22\n    versionCode 1\n    versionName \"1.0\n    ndk {\n        abiFilters \"armeabi-v7a\"\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1085, "user_id": 628872, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e0e7e97f601a20bc67da675492067436?s=128&d=identicon&r=PG", "display_name": "Peter Chappy", "link": "https://stackoverflow.com/users/628872/peter-chappy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3518, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1508212641, "creation_date": 1431536886, "question_id": 30221216, "link": "https://stackoverflow.com/questions/30221216/ndk-build-error-prebuilt-library-mk28-missing-separator-stop", "title": "ndk-build Error prebuilt-library.mk:28: *** missing separator. Stop", "body": "<p>I'm getting the error </p>\n\n<pre><code> Android NDK: ERROR:src/main/jni/Android.mk:Cortex: The LOCAL_SRC_FILES\n for a prebuilt library should only contain one item\n /Users/peterchappy/Library/Android/ndk/build/core/prebuilt-library.mk:28:\n *** missing separator.  Stop.\n</code></pre>\n\n<p>when I run ndk-build. I'm not sure what the problem is. Any help would be greatly appreciated.</p>\n\n<p>Android.mk</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\n# static library info\nLOCAL_MODULE := Cortex\nLOCAL_MODULE_FILENAME := CortexLibrary-i386\nLOCAL_EXPORT_C_INCLUDES := ../prebuild/include\ninclude $(PREBUILT_STATIC_LIBRARY)\n\n# wrapper info\ninclude $(CLEAR_VARS)\nLOCAL_C_INCLUDES += ../prebuild/include\nLOCAL_MODULE    := wrapper\nLOCAL_SRC_FILES := wrapper.c\nLOCAL_STATIC_LIBRARIES := libYourLibrary\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>Application.mk</p>\n\n<pre><code>APP_STL := gnustl_static \nAPP_PLATFORM := android-8 \nAPP_BUILD_SCRIPT := Android.mk\n</code></pre>\n"}, {"tags": ["c", "algorithm", "math", "recursion"], "comments": [{"owner": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "edited": false, "score": 1, "creation_date": 1431536517, "post_id": 30220999, "comment_id": 48546014, "body": "Are stdc functions like strtol not useful?  Or is this just a fun exercise?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "edited": false, "score": 0, "creation_date": 1431536649, "post_id": 30220999, "comment_id": 48546100, "body": "@jimmcnamara, can <code>strtol</code> convert numbers to random bases with alphabets like <code>&quot;dhowg&quot;</code> or <code>&quot;qwerty&quot;</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1431536835, "post_id": 30220999, "comment_id": 48546203, "body": "It can do for bases from 2 to 36. With conventional notation of 0-9A-Z"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1431536882, "post_id": 30220999, "comment_id": 48546222, "body": "@EugeneSh., what about base-62 as mentioned in my question?"}, {"owner": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "edited": false, "score": 0, "creation_date": 1431536937, "post_id": 30220999, "comment_id": 48546260, "body": "If you use uppercase letters you have base36 notation: 0-9 A-Z.  strtol supports that.  See: <a href=\"http://man7.org/linux/man-pages/man3/strtol.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/strtol.3.html</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1431536937, "post_id": 30220999, "comment_id": 48546261, "body": "It can&#39;t. You can read it&#39;s docs. Or it is a rhetorical question?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1431537332, "post_id": 30220999, "comment_id": 48546491, "body": "BTW, what do you mean by &quot; didn&#39;t work for me&quot; ?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1431537362, "post_id": 30220999, "comment_id": 48546510, "body": "You can pass in the the length of the output buffer and store characters from the end toward the front.  But why are you worrying about a call to <code>strrev()</code>?  How large are the numbers you&#39;re converting?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1431537380, "post_id": 30220999, "comment_id": 48546518, "body": "@EugeneSh., I mean, it didn&#39;t change anything."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1431537474, "post_id": 30220999, "comment_id": 48546576, "body": "@MichaelBurr, you see, I&#39;m using <code>unsigned long long</code>.  The numbers I&#39;m converting can be as big as 10^17 or something like that."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431538507, "post_id": 30220999, "comment_id": 48547146, "body": "<i>&quot;I don&#39;t know the size of the resulting string.&quot;</i> Why not allocate for the worst case of binary? A 64 bit int will require 66 bytes of string (if negative). That&#39;s not hugely wasteful."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431538709, "post_id": 30220999, "comment_id": 48547277, "body": "@WeatherVane, that&#39;s what I&#39;m doing. I suppose the length of this number won&#39;t go greater than 20. I&#39;ve written this so people won&#39;t provide me with methods that require it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1431539208, "post_id": 30220999, "comment_id": 48547577, "body": "@EugeneSh. take a function argument to say which of the 3 options - zero pad, space pad, no pad."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431539258, "post_id": 30220999, "comment_id": 48547604, "body": "@WeatherVane I though first your comment is regarding the algorithm, but then realized that you are talking just about the allocation."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1431539311, "post_id": 30220999, "comment_id": 48547640, "body": "@EugeneSh. yes, in response to OP recent edit."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1431544778, "post_id": 30220999, "comment_id": 48550847, "body": "Note <code>20</code> is too small.  Suggest <code>64+1</code> for a binary representation of a 64-bit number."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1431575711, "post_id": 30220999, "comment_id": 48561415, "body": "Allocating enough buffer for the result has nothing to do with whether or not there&#39;s a reason to avoid calling <code>strrev()</code> to keep things simple. As mentioned, the worst case number of digits in a result is around 64.  I&#39;d suggest that it&#39;s probably not worth a whole lot to jump through hoops to avoid the <code>strrev()</code> on what&#39;s most likely too be much fewer than 64 characters per conversion call. I&#39;d think that making sure you handle the buffer and/or allocation for the result correctly (and making for a simple interface) would be more worthwhile. But I haven&#39;t measured, so maybe I&#39;m wrong."}], "answers": [{"comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1431537686, "post_id": 30221364, "comment_id": 48546663, "body": "I&#39;m sorry, I didn&#39;t include a very important thing in my most: edited it now. How do I know <code>size</code>? What if I say <code>size=5</code>, but the resulting string is 7 characters long? Will it work in this situation?"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1431539371, "post_id": 30221364, "comment_id": 48547680, "body": "@ForceBru: <code>size</code> is the size of your buffer (20 in your original code), not the size of the string.  It is the maximum size of the string (converting a number that gives a longer string will overflow the buffer, casuing memory corruption and undefined behavior).  If you truly have unbounded potential strings, you&#39;ll need to realloc the buffer to be larger as needed."}], "tags": [], "owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "is_accepted": false, "score": 1, "last_activity_date": 1431545090, "last_edit_date": 1431545090, "creation_date": 1431537403, "answer_id": 30221364, "question_id": 30220999, "link": "https://stackoverflow.com/questions/30220999/converting-to-bases-gives-reversed-output-how-to-make-it-correct-without-strrev/30221364#30221364", "title": "Converting to bases gives reversed output. How to make it correct without strrev?", "body": "<p>You can pass in a parameter telling your function how much space it has to work with, populate the string backwards, and then return a pointer to the start of the created string.</p>\n\n<pre><code>char* No_Recursion(ull num, char *str, int base, char *alpha, size_t count){\n    char *ptr = *str + count;\n\n    *(ptr--) = `\\0`;\n    do{\n        *(ptr--)=alpha[(num-1)%base];\n        num=(num-1)/base;\n    } while (num);\n\n    return ptr;\n}\n</code></pre>\n\n<p>Or, if you really want to have the string be stored in <code>str</code>, you can move back to the start, after you've calculated it.</p>\n\n<pre><code>void No_Recursion(ull num, char *str, int base, char *alpha, size_t count){\n    char *ptr = *str + count;\n\n    *(ptr--) = `\\0`;\n    do{\n        *(ptr--)=alpha[(num-1)%base];\n        num=(num-1)/base;\n    } while (num);\n\n    while(*ptr)\n        *(str++) = *(ptr++);\n\n    *ptr = '\\0';\n}\n</code></pre>\n\n<p>Note that both of these solutions, as well as both of the functions in the question, are <strong>unsafe</strong>.  All are succeptible to buffer overflows.  This can be solved in one of two ways:  keep track of where you are in the buffer, or be smart in how you allocate the buffer to ensure that it doesn't overflow.</p>\n\n<p>Being smart about how you allocate space would involve performing computations before allocating the space.</p>\n\n<pre><code>int buffer_size = (int) ceil( log( t ) / log( sizeof(al)/sizeof(al[0]) )) );\nchar *s = calloc(buffer_size,sizeof(*s));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 0, "last_activity_date": 1431538362, "last_edit_date": 1431538362, "creation_date": 1431537982, "answer_id": 30221540, "question_id": 30220999, "link": "https://stackoverflow.com/questions/30220999/converting-to-bases-gives-reversed-output-how-to-make-it-correct-without-strrev/30221540#30221540", "title": "Converting to bases gives reversed output. How to make it correct without strrev?", "body": "<p>You can modify your \"Recursion\" function, such that each recursive call will return the \"place\" it was calculating for, so the current call will take this place and work for the next one:</p>\n\n<pre><code>int Recursion(ull num, char *str, int base, char*alpha) {\n    if (!num) return -1;\n\n    int place = 1 + Recursion((num-1)/base,str,base,alpha);\n    *(str+place)=alpha[(num-1)%base];\n    return place;\n}\n</code></pre>\n\n<p>** And don't forget to deal with <code>\\0</code> termination..<br>\n<strong>Update</strong>: Your <code>Recursion</code> implementation as well as the modified are not handling the case <code>num=0</code>. Both will just return unchanged <code>str</code>. This should be taken care of as well.</p>\n"}], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1431545090, "creation_date": 1431536194, "last_edit_date": 1431537556, "question_id": 30220999, "link": "https://stackoverflow.com/questions/30220999/converting-to-bases-gives-reversed-output-how-to-make-it-correct-without-strrev", "title": "Converting to bases gives reversed output. How to make it correct without strrev?", "body": "<p>I came up with two slightly different approaches: one uses recursion and another one doesn't. </p>\n\n<pre><code>typedef unsigned long long ull;\n\nvoid No_Recursion(ull num, char *str, int base, char *alpha){\n    while (num){\n        *(str++)=alpha[(num-1)%base];\n        num=(num-1)/base;\n    }\n}\n\nvoid Recursion(ull num, char *str, int base, char*alpha) {\n    if (!num) return;\n    *str=alpha[(num-1)%base];\n    Recursion((num-1)/base,str+1,base,alpha);\n}\n</code></pre>\n\n<p>These two functions are called similarly:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define t 1000 // number of numbers to convert\n\nint main (void) {\n    char *s=calloc(20,sizeof(char));\n    char al[]=\"abc\";\n    ull e;\n    int base=strlen(al);\n\n    for (e=1;e&lt;=t;++e) {\n        Recursion(e,s,base,al); // or the same with No_Recursion\n        printf(\"%s\\n\",s);\n    }\n\n    free(s);\n    return 0;\n}\n</code></pre>\n\n<p>This gives output in reversed order:</p>\n\n<pre><code>a\nb\nc\naa\nba \nca\nab\nbb\ncb\nac\n... etc\n</code></pre>\n\n<p>I searched the Net and found out that this can be solved using the recursive algorithm. They suggested printing the digits after a recursive call. However, this didn't work for me. Moreover, <code>No_Recursion</code> seems to be a bit faster. Certainly, I can use <code>strrev</code> to reverse the resulting string, but it takes much time. </p>\n\n<p><strong>Note</strong>: yes, I'm using <code>(num-1)%base</code> and it's correct for my task, please don't say I need to use <code>num%base</code>. </p>\n\n<p><strong>Note</strong>: the alphabets may be absolutely random, not in alphabetical order</p>\n\n<p><strong>The most important thing</strong>: <em>I don't know the size of the resulting string</em></p>\n\n<p>How do we convert a decimal number to base-3 (like here) or base-62 [a-zA-z0-9] etc so the resulting number is not reversed without <code>strrev</code> and similar functions?</p>\n"}, {"tags": ["c", "string", "input"], "comments": [{"owner": {"reputation": 4044, "user_id": 2165163, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/UDtoZ.png?s=128&g=1", "display_name": "Paco", "link": "https://stackoverflow.com/users/2165163/paco"}, "edited": false, "score": 0, "creation_date": 1431535330, "post_id": 30220691, "comment_id": 48545311, "body": "It probably contains <code>\\n</code>. Use <code>printf</code> to see what is in <code>input_input</code>."}, {"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1431535756, "post_id": 30220691, "comment_id": 48545551, "body": "You should really read the <a href=\"http://stackoverflow.com/questions/1247989/how-do-you-allow-spaces-to-be-entered-using-scanf?answertab=active#tab-top\">answer to this question</a>"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1431536512, "post_id": 30220691, "comment_id": 48546007, "body": "Try this code: <code>int k; char st[20];  st[0]=0;  k=scanf(&quot;%[^\\n]&quot;,st);  printf(&quot;%d %s\\n&quot;,k,st);</code>  ... Although I think is better to use other functions! (<code>%[^\\n]</code> means get all chars except <code>\\n</code>)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 1, "creation_date": 1431545629, "post_id": 30220691, "comment_id": 48551336, "body": "@Sergio Formiggini  <code>scanf(&quot;%[^\\n]&quot;,st)</code> will read nothing into <code>st</code> if user enters <code>&#39;\\n&#39;</code>, leaving <code>st</code> as it was - possible uninitialized.  The <code>&#39;\\n&#39;</code> remains in <code>stdin</code> for the next input function."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1431550565, "post_id": 30220691, "comment_id": 48553850, "body": "Yes, but exits! The code I&quot;ve sent you uses st[0]=0 before to call scanf ... But there&#39;s another problem, the CR remains into the stdin ... Thus it&#39;s not a good idea to use this scanf form!"}], "answers": [{"comments": [{"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1431538626, "post_id": 30220797, "comment_id": 48547221, "body": "It&#39;s not true that scanf doesn&#39;t return also with only hitting enter! I tested this: <code>scanf(&quot;%[^\\n]&quot;,str);</code> where <code>str</code> is (obviously) a <code>char *</code>. The result is scanf terminates also when you hit only enter! But is a better idea to use fgets!"}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1431538812, "post_id": 30220797, "comment_id": 48547362, "body": "@SergioFormiggini I meant OP&#39;s <code>scanf()</code> call, not <code>scanf()</code> in general. Updated my answer."}], "tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": false, "score": 5, "last_activity_date": 1431538793, "last_edit_date": 1431538793, "creation_date": 1431535571, "answer_id": 30220797, "question_id": 30220691, "link": "https://stackoverflow.com/questions/30220691/how-to-get-empty-input-or-only-enter-in-c/30220797#30220797", "title": "How to get empty input or only ENTER in C", "body": "<p>The problem is that your <code>scanf()</code> call will not return until it encounters a string that is not whitespace only. You should use <code>fgets()</code> instead, as it prevents overflow as well.</p>\n\n<p>Example:</p>\n\n<pre><code>char s[80];\nfgets(s, sizeof s, stdin);\nif(s[0] == '\\n') {\n    puts(\"line is empty\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 5, "last_activity_date": 1431545835, "last_edit_date": 1431545835, "creation_date": 1431539499, "answer_id": 30222001, "question_id": 30220691, "link": "https://stackoverflow.com/questions/30220691/how-to-get-empty-input-or-only-enter-in-c/30222001#30222001", "title": "How to get empty input or only ENTER in C", "body": "<p>You can prevent the user from just pressing <code>[enter]</code> with <code>scanf</code>, but you must both:</p>\n\n<ol>\n<li>check the <code>scanf</code> return, and </li>\n<li>strip the newline from <code>stdin</code> on <code>[enter]</code> alone.</li>\n</ol>\n\n<p>You must also manually prevent writing beyond the end of your string by limiting the characters <code>scanf</code> attempts to put in your array. Otherwise, <code>scanf</code> will happily try and write as many characters as are entered. (which makes <strong>line-oriented</strong> input like <code>fgets</code> or <code>getline</code> preferable)</p>\n\n<p>However, if you take that all into consideration, you can do what it looks like you are attempting with <code>scanf</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAXS 17\n\nvoid fflush_stdin();\n\nint main () {\n\n    char user_input [MAXS] = {0};   /* always initialize your variables */\n\n    while (printf (\"\\n Type something (16 char or less): \") &amp;&amp; \n            scanf (\"%16[^\\n]%*c\", user_input) &lt; 1) \n    {\n        printf (\" pressing [enter] doesn't count...\\n\");\n        fflush_stdin();\n    }\n    printf (\"\\n   You entered: '%s'\\n\\n\", user_input);\n\n    return 0;\n}\n\n/* simple function to strip '\\n` from stdin */\nvoid fflush_stdin()\n{ int c; while ((c = getchar()) != '\\n' &amp;&amp; c != EOF); }\n</code></pre>\n\n<p><strong>Use/Output</strong></p>\n\n<pre><code>$ ./bin/scanfbasic1\n\n Type something (16 char or less):\n pressing [enter] doesn't count...\n\n Type something (16 char or less):\n pressing [enter] doesn't count...\n\n Type something (16 char or less): 12345678901234567890\n\n   You entered: '1234567890123456'\n</code></pre>\n\n<hr>\n\n<h2>getline Solution</h2>\n\n<p>As mentioned above, <strong>line-oriented</strong> input is the preferred manner for reading strings. Two of the primary tools available are <code>fgets</code> and <code>getline</code>. Both have strengths/weaknesses. Two of the primary strengths of <code>getline</code> is that it <strong>(1)</strong> will allocate the line buffer for you, and <strong>(2)</strong> it returns the actual number of characters read into the buffer. </p>\n\n<p>A weakness of <code>getline</code> is it will read all characters it is given up to the point of memory exhaustion. So if you are limiting your input to <code>17</code> (16 chars + null-terminator), it is up to you to enforce the limit. A weakness of <code>fgets</code> is that you have no way of knowing how many characters were actually read. All you know is <code>fgets</code> read somewhere between <code>1</code> and <code>max length</code> generally prompting the need to call <code>strlen</code> (or iterate over the string until the null-terminator is found.)</p>\n\n<p>Both <code>fgets</code> and <code>getline</code> will include the trailing <code>'\\n'</code> in the buffer (as it exists in the file, or as produced when you press <code>[enter]</code> when reading from <code>stdin</code>). It is never a good idea to leave stray newlines hanging off the ends of your strings, so it is generally a good idea to strip the newline after it is read.</p>\n\n<p><strong>note:</strong> <code>getline</code> will allocate memory for the buffer if the buffer is initially set to <code>NULL</code> ..<strong>and</strong>.. <code>getline</code> will reallocate the buffer it is given if it is insufficient to hold the input. (the current size of the allocation is maintained in <code>'n'</code>). Since <code>getline</code> allocates/reallocates for you, you are responsible for freeing the memory when it is no longer in use.</p>\n\n<p>Taking all that into consideration, the following is an equivalent <code>getline</code> implementation that prevents the user from leaving an empty string by simply pressing <code>[enter]</code> at the prompt:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAXS 17\n\nint main (void) {\n\n    char *ln = NULL;    /* getline requires block allocated by malloc       */\n    size_t n = 0;       /* initial size of buffer, if ln NULL, n ignored    */\n    ssize_t nchr = 0;   /* getline return - number of chars actually read   */\n\n    while (printf (\"\\n Type something (16 char or less): \") &amp;&amp;\n            ((nchr = getline (&amp;ln, &amp;n, stdin)) &lt;= 1)) { \n        printf (\" pressing [enter] doesn't count...\\n\");\n    }\n\n    while (nchr &gt; 0 &amp;&amp; (ln[nchr-1] == '\\n' || ln[nchr-1] == '\\r'))\n        ln[--nchr] = 0;     /* strip newline or carriage rtn    */\n\n    if (nchr &gt; MAXS - 1)    /* to enforce limit, check length   */\n        ln[MAXS - 1] = 0;   /* if exceeds limit, null-terminate */\n\n    printf (\"\\n   You entered: '%s'\\n\\n\", ln);\n\n    if (ln) free (ln);      /* free memory allocated by getline */\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Use/Output</strong></p>\n\n<pre><code>$ ./bin/getlinebasic_noenter\n\n Type something (16 char or less):\n pressing [enter] doesn't count...\n\n Type something (16 char or less): 12345678901234567890\n\n   You entered: '1234567890123456'\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4297734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3860e3b2cde2e4caee8f306ff77f5eba?s=128&d=identicon&r=PG&f=1", "display_name": "Lost in the code", "link": "https://stackoverflow.com/users/4297734/lost-in-the-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12437, "favorite_count": 3, "answer_count": 2, "score": 3, "last_activity_date": 1431545835, "creation_date": 1431535228, "question_id": 30220691, "link": "https://stackoverflow.com/questions/30220691/how-to-get-empty-input-or-only-enter-in-c", "title": "How to get empty input or only ENTER in C", "body": "<p>Hi I'm having trouble with this simple C code since i'm very new to it.</p>\n\n<p>When I try to get empty value from or get if the user only hit ENTER  without typing anything. \nTried few variations and still not working </p>\n\n<p>The piece of code is the following:</p>\n\n<pre><code>char user_input[17] = {'\\0'};\n    printf(\"Type something: \");\n    prompt = scanf(\"%s\", user_input);\n\n    if (prompt &lt;= 0) {\n      printf(\"You didn't type anythingt!\\n\");\n      return 1;\n      }\n</code></pre>\n\n<p>Also:</p>\n\n<pre><code>char user_input[17] = {'\\0'};\n    printf(\"Type something: \");\n    scanf(\"%s\", user_input);\n\n    if (user_input[0] == '\\0') {\n      printf(\"You didn't type anything!\\n\");\n      return 1;\n      }\n</code></pre>\n\n<p>There is many variations on this forum none of them worked for me...\nWhat am I missing?</p>\n"}, {"tags": ["c", "scanf", "format-specifiers"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1431535512, "post_id": 30220685, "comment_id": 48545418, "body": "Did it  not occur to you to Google &#39;printf format specifiers&#39;?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "edited": false, "score": 0, "creation_date": 1431535736, "post_id": 30220716, "comment_id": 48545539, "body": "I keep getting 0 for my profit."}, {"owner": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "edited": false, "score": 0, "creation_date": 1431535835, "post_id": 30220716, "comment_id": 48545603, "body": "Also how do I get it to take a letter name for the model and not just a number?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "edited": false, "score": 0, "creation_date": 1431535972, "post_id": 30220716, "comment_id": 48545686, "body": "@werty345353534 yeah, the result of UB can be anything."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "edited": false, "score": 0, "creation_date": 1431536009, "post_id": 30220716, "comment_id": 48545714, "body": "@werty345353534 <code>%c</code> conversion specifier takes a <i>char</i> (letter)."}, {"owner": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "edited": false, "score": 0, "creation_date": 1431536185, "post_id": 30220716, "comment_id": 48545816, "body": "The problem is if I enter a letter the program just ends."}, {"owner": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "edited": false, "score": 0, "creation_date": 1431536501, "post_id": 30220716, "comment_id": 48545997, "body": "How would I make this into a loop that would allow me to calculate multiple cars at once?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "edited": false, "score": 0, "creation_date": 1431536514, "post_id": 30220716, "comment_id": 48546010, "body": "@werty345353534 well, after <i>all</i> the changes , <a href=\"http://ideone.com/01xO7q\" rel=\"nofollow noreferrer\">it works fine, see here</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "edited": false, "score": 0, "creation_date": 1431536582, "post_id": 30220716, "comment_id": 48546052, "body": "@werty345353534 aah.. to use this in a loop, you&#39;ve to use <code>scanf(&quot; %c&quot;,&amp;model);</code>, mind the <i>space</i> before <code>%c</code>, which will <i>eat up</i> the previously stored <code>\\n</code>(newline)."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1431536718, "last_edit_date": 1431536718, "creation_date": 1431535312, "answer_id": 30220716, "question_id": 30220685, "link": "https://stackoverflow.com/questions/30220685/program-not-working/30220716#30220716", "title": "Program not working", "body": "<p>Yes, you're using wrong conversion specifier. for a <code>char</code>, you should use <code>%c</code>, for a double, you've to use <code>%lf</code>.</p>\n\n<p>From <code>C11</code> standard, chapter \u00a77.21.6.2, <code>fscanf()</code> function definition, </p>\n\n<blockquote>\n  <p><em>..[..]..</em> Unless assignment suppression was indicated by a <code>*</code>, the\n  result of the conversion is placed in the object pointed to by the first argument following the format argument that has not already received a conversion result. If this object does not have an appropriate type, or if the result of the conversion cannot be represented in the object, the behavior is undefined.</p>\n</blockquote>\n\n<p>So, you're facing <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>In your code, change</p>\n\n<pre><code>scanf(\"%u\",&amp;model);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\"%c\",&amp;model);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>scanf(\"%d\",&amp;purchase);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\"%lf\",&amp;purchase);\n</code></pre>\n\n<p>same for <code>sell</code> also</p>\n\n<p>and lastly,</p>\n\n<pre><code> printf(\"Profit%d\\n\", profit);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>  printf(\"Profit %f\\n\", profit);  //for printf, %f is enough for a double\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4852712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b061cc7e325874464c5a116f1a27f67?s=128&d=identicon&r=PG&f=1", "display_name": "werty345353534", "link": "https://stackoverflow.com/users/4852712/werty345353534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1431557536, "answer_count": 1, "score": -1, "last_activity_date": 1431536718, "creation_date": 1431535216, "last_edit_date": 1431536071, "question_id": 30220685, "link": "https://stackoverflow.com/questions/30220685/program-not-working", "closed_reason": "Not suitable for this site", "title": "Program not working", "body": "<p>I am trying to write a program to calculate the profit made by selling a car. My output is not coming out with the right number. I do not think I am using the proper format specifier. I keep getting a number that is not what I should be getting.   </p>\n\n<pre><code>        #include &lt;stdio.h&gt;\n        #include &lt;stdlib.h&gt;\n\n        int main()\n        {\n           char model;\n           double purchase;\n           double sell;\n           double profit;\n           printf(\"Car Profit Calculator\\n\");\n\n           printf(\"Enter Car Model\\n\");\n           scanf(\"%u\",&amp;model);\n           printf(\"Enter Purchase Price\\n\");\n           scanf(\"%d\",&amp;purchase);\n           printf(\"Enter Price Sold for\\n\");\n           scanf(\"%d\",&amp;sell);\n           profit = (double)sell / purchase;\n           printf(\"Profit%d\\n\", profit);\n           return 0;\n        }\n</code></pre>\n"}, {"tags": ["c", "arrays", "error-handling"], "answers": [{"comments": [{"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1431544222, "post_id": 30222069, "comment_id": 48550531, "body": "Thank you for all the tips! Really helpful! You were right about substituting <code>n_col</code> for <code>m_row</code>. But initializing <code>m_row = 0;</code> <code>n_col = 0;</code> woud lead <code>calloc()</code> to allocate <code>0</code> bytes. That gives a warning with <code>gcc</code> and <code>clang</code> with the right parameters set."}, {"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1431544479, "post_id": 30222069, "comment_id": 48550671, "body": "For learning purposes: Do you disagree with the general coding because you said that this is certainly not the main problem of this post?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1431544893, "post_id": 30222069, "comment_id": 48550917, "body": "@brauner <code>calloc(0, some_size)</code> is an OK thing to do.  The result may be <code>NULL</code> - which would <i>not</i> indicate an out-of-memory."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1431545037, "post_id": 30222069, "comment_id": 48550989, "body": "@brauner The &quot;not the main problem&quot; comment refers to using <code>int</code> for an index and <code>unsigned long</code> as a limit.  This would be a problem when the index attempts to go beyond <code>INT_MAX</code>.  <code>INT_MAX</code> may be <i>far</i> less than <code>ULONG_MAX</code>."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1431540677, "last_edit_date": 1431540677, "creation_date": 1431539717, "answer_id": 30222069, "question_id": 30220644, "link": "https://stackoverflow.com/questions/30220644/handling-eof-in-user-input/30222069#30222069", "title": "Handling EOF in user input", "body": "<p>Wrong allocation size:  <code>m_row</code> vs <code>n_col</code>.  This may not be an <code>EOF</code> issue.</p>\n\n<pre><code>for (i = 0; i &lt; m_row; i++) {\n  // arr[i] = calloc(m_row, sizeof(unsigned long int));\n  arr[i] = calloc(n_col, sizeof(unsigned long int));\n}\n</code></pre>\n\n<p>Suggest initializing <code>m_row = 0; n_col = 0;</code> instead.</p>\n\n<p>Code attempts to print out <code>arr</code> even if <code>arr</code> was not fully populated due to <code>EOF</code>.  Should avoid that.</p>\n\n<p>If these do not fix the issue, suggest printing the <code>m_row</code> ands <code>n_col</code> prior to reading the elements to verify the matrix size is as expected.</p>\n\n<hr>\n\n<p>Minor: Use same size integers</p>\n\n<pre><code> // Rather than \n unsigned long int m_row;\n ...\n int i;\n for(i = 0; i &lt; m_row; i++) {\n\n // Use same type: recommend `size_t`\n size_t m_row;\n ...\n size_t i;\n for(i = 0; i &lt; m_row; i++) {\n</code></pre>\n\n<p>Minor: use <code>strtoul()</code> with <code>unsigned long</code>, not <code>strtol()</code>.</p>\n\n<p>Minor: \"largest integer that can fit into unsigned long int is a 20-digit number\" ... <code>char save[20];</code> mis-leads.  1) <code>pow(2,64)</code> takes 20 <code>char</code>, but the input needs to account for <code>'\\n'</code> and <code>'\\0'</code>, so should use <code>char save[20+2];</code>  2) <code>unsigned long int</code> <em>could</em> be larger than 64-bit - it must be at least 32-bit.  But this is certainly not the main problem of this post.</p>\n"}], "owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 30222069, "answer_count": 1, "score": 3, "last_activity_date": 1431762680, "creation_date": 1431535095, "last_edit_date": 1431762680, "question_id": 30220644, "link": "https://stackoverflow.com/questions/30220644/handling-eof-in-user-input", "title": "Handling EOF in user input", "body": "<p>I am writing a small program that allows a user to input the dimensions <code>m</code> and <code>n</code> of a matrix and then to fill that matrix as to her liking. To read in the numbers I use <code>fgets()</code> to read the user input as a string and then convert it via <code>strtol()</code>. I also remove the newline <code>fgets()</code> appends via <code>strcspn()</code> and do some error handling when the user types in <code>a</code>, <code>12a</code> or simply a newline <code>\\n</code>. But the program gives me headache with <code>EOF</code> input via <code>Ctrl + D</code>. I read several stackoverflow threads about this and I know that one needs to type in <code>EOF</code> two times in some cases. But when I send <code>EOF</code> to my first call to <code>fgets()</code> reading in the <code>m</code>-dimension I will be forwarded to the next call to <code>fgets()</code> which reads in the <code>n</code>-dimensions and from there on it will jump to the actual array input and there it seems stuck or I goes into an infinite loop. I do currently not know the cause and I do not know how to handle <code>EOF</code> in this scenario. I would be happy if someone could give some hints. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nint main(int argc, char *argv[]) {\n\n    /* We use \"m_row\" and \"n_col\" to keep track of the matrix dimensions and \"m\"\n     * and \"n\" to keep track of the size of dynamically allocated memory.  */\n    unsigned long int m_row;\n    unsigned long int n_col;\n    unsigned long int element;\n\n    /* Initializing at dummy value to silence compiler. */\n    m_row = 1;\n    n_col = 1;\n\n    /* The largest integer that can fit into unsigned long int is a 20-digit \n     * number. */\n    char save[20];\n    char *ptr_save;\n    printf(\"Enter number of rows:\\n\");\n    if (fgets(save, sizeof(save), stdin) != NULL) {\n        save[strcspn(save, \"\\n\")] = 0;\n        if (save[0] == '\\0') {\n            fprintf(stderr, \"Wrong input\\n\");\n            exit(EXIT_FAILURE);\n        }\n\n        m_row = strtol(save, &amp;ptr_save, 10);\n\n        if (*ptr_save != '\\0') {\n            fprintf(stderr, \"Wrong input\\n\");\n            exit(EXIT_FAILURE);\n        }\n    }\n\n    printf(\"Enter number of columns:\\n\");\n    if (fgets(save, sizeof(save), stdin) != NULL) {\n        save[strcspn(save, \"\\n\")] = 0;\n        if (save[0] == '\\0') {\n            fprintf(stderr, \"Wrong input\\n\");\n            exit(EXIT_FAILURE);\n        }\n\n        n_col = strtol(save, &amp;ptr_save, 10);\n\n        if (*ptr_save != '\\0') {\n            fprintf(stderr, \"Wrong input\\n\");\n            exit(EXIT_FAILURE);\n        }\n    }\n\n    errno = 0;\n    unsigned long int **arr = calloc(m_row, sizeof(unsigned long int *));\n    if (arr == NULL) {\n            fprintf(stderr, \"%s\", strerror(errno));\n            exit(EXIT_FAILURE);\n    }\n\n\n    int i;\n    errno = 0;\n    for(i = 0; i &lt; m_row; i++) {\n        arr[i] = calloc(m_row, sizeof(unsigned long int));\n        if (arr[i] == NULL) {\n                fprintf(stderr, \"%s\", strerror(errno));\n                exit(EXIT_FAILURE);\n        }\n\n    }\n\n    int j;\n    for(i = 0; i &lt; m_row; i++) {\n        for(j = 0; j &lt; n_col; j++) {\n            if (fgets(save, sizeof(save), stdin) != NULL) {\n                save[strcspn(save, \"\\n\")] = 0;\n                if (save[0] == '\\0') {\n                    fprintf(stderr, \"Wrong input\\n\");\n                    exit(EXIT_FAILURE);\n                }\n\n                element = strtol(save, &amp;ptr_save, 10);\n\n                if (*ptr_save != '\\0') {\n                    fprintf(stderr, \"Wrong input\\n\");\n                    exit(EXIT_FAILURE);\n                }\n                arr[i][j] = element;\n            }\n            printf(\"\\n\");\n        }\n    }\n\n    for (i = 0; i &lt; m_row; i++) {\n        for(j = 0; j &lt; n_col; j++) {\n            printf(\"%lu\\t\", arr[i][j]);\n        }\n        printf(\"\\n\");\n    }\n\n    free(arr);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "struct", "iteration"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431535072, "post_id": 30220608, "comment_id": 48545155, "body": "<code>x is either 1 or 2.</code>....um, why?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1431535128, "post_id": 30220608, "comment_id": 48545184, "body": "You <i>really</i> need to keep track of the size yourself! Also, <code>p</code> is a pointer to <code>ipstat</code> which is not a character, don&#39;t compare arbitrary pointers to characters."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1431535335, "post_id": 30220608, "comment_id": 48545316, "body": "The only way to solve it in a way similar to what you do now, is to add a special sentinel structure last, containing values that can&#39;t be in a normal structure, and check for that. Then you could check <code>p-&gt;some_member != SOME_ILLEGAL_VALUE</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4656543"}, "edited": false, "score": 0, "creation_date": 1431535355, "post_id": 30220608, "comment_id": 48545334, "body": "x is 1 or 2 for the statuses accept and deny respectively. I use numbers to save on memory space."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4656543"}, "edited": false, "score": 0, "creation_date": 1431535421, "post_id": 30220608, "comment_id": 48545359, "body": "I was trying to figure out how to compare the struct to a null or is that even possible?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1431537845, "post_id": 30220608, "comment_id": 48546750, "body": "Only a pointer can be <code>NULL</code>, and if you want to compare a pointer to <code>NULL</code> then compare it to <code>NULL</code> and not the null-<i>character</i> (which is something completely different even though they have similar names). And by the way, in your loop (the first version) <code>p</code> might never be <code>NULL</code> unless you&#39;re going way past the allocated memory and the pointer value overflows."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4656543"}, "edited": false, "score": 0, "creation_date": 1431543399, "post_id": 30220608, "comment_id": 48550000, "body": "I do reserve sufficient space so that there will be null values before hitting overflow. Thank you for your help."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1431548042, "post_id": 30220608, "comment_id": 48552593, "body": "Suspect code wants <code>iptstat* ips=malloc(100000 * sizeof *ips);</code>  I question that &quot;properly fills up iptstat structure&quot; part."}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 0, "last_activity_date": 1431547985, "last_edit_date": 1431547985, "creation_date": 1431547327, "answer_id": 30224174, "question_id": 30220608, "link": "https://stackoverflow.com/questions/30220608/proper-simple-declatation-to-iterate-prepared-struct-array-c-without-knowing-num/30224174#30224174", "title": "proper simple declatation to iterate prepared struct array c without knowing number of elements", "body": "<p>With <code>p+=sz;</code> you increment p with <code>sz*sizeof(iptstat))</code>. You should just write <code>p++;</code> as the compiler knows the size of <code>iptstat</code>.</p>\n\n<p>(See also comment by Joachim that <code>while(p != '\\0')</code> should be <code>while(p-&gt;IP)</code>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4656543"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 30224174, "answer_count": 1, "score": 0, "last_activity_date": 1431547985, "creation_date": 1431534977, "question_id": 30220608, "link": "https://stackoverflow.com/questions/30220608/proper-simple-declatation-to-iterate-prepared-struct-array-c-without-knowing-num", "title": "proper simple declatation to iterate prepared struct array c without knowing number of elements", "body": "<p>I have been looking through questions on how to iterate an array of structs containing mixed types of data fields, only to come with complicated answers. I'm looking for something rather simple.</p>\n\n<p>My program retrieves IP addresses from linux IPtables along with status as to whether they are accepted or denied. The first fragment of the program is as follows:</p>\n\n<pre><code>iptstat* ips=malloc(100000);\nmemset(ips,0,99999);\n// custom function is called here that properly fills up iptstat structure with data.\niptstat* p=ips;int sz=sizeof(iptstat);\n</code></pre>\n\n<p>The first fragment has no problems after running tests. Now the second fragment gives me difficulty because I'm unable to see the results of the data.</p>\n\n<p>When I try to iterate a struct via:</p>\n\n<pre><code>while(p != '\\0'){\nprintf(\"IP %s stat %d\\n\",p-&gt;IP,p-&gt;stat);\np+=sz; \n}\n</code></pre>\n\n<p>I receive on the screen:</p>\n\n<pre><code>IP  stat 0\nIP  stat 0\nIP  stat 0\n...\nIP  stat 0\nSegmentation fault\n</code></pre>\n\n<p>I instead expected only two entries showing in the form of:</p>\n\n<pre><code>IP xxx.xxx.xxx.xxx stat x \n</code></pre>\n\n<p>where xxx.xxx.xxx.xxx is an actual IP address and x is either 1 or 2.</p>\n\n<p>I then proceeded to change the problem fragment of my code to this in hopes that I can run a loop until I see a null pointer:</p>\n\n<pre><code>while(*p){\nprintf(\"IP %s stat %d\\n\",p-&gt;IP,p-&gt;stat);\np+=sz; \n}\n</code></pre>\n\n<p>The compiler reports:</p>\n\n<pre><code>./test.c: In function 'main':\n./test.c:78: error: used struct type value where scalar is required\n</code></pre>\n\n<p>and line 78 is the while loop I'm struggling with.</p>\n\n<p>Is there a simple answer to this, or am I going to have to go with a rather complicated answer involving a for-loop?</p>\n"}, {"tags": ["c++", "c", "linux", "unix"], "comments": [{"owner": {"reputation": 77122, "user_id": 106671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a910ad61c5827193f003a11be5dacb14?s=128&d=identicon&r=PG", "display_name": "Nikolai Fetissov", "link": "https://stackoverflow.com/users/106671/nikolai-fetissov"}, "edited": false, "score": 2, "creation_date": 1431535041, "post_id": 30220421, "comment_id": 48545141, "body": "Try closing the newly created file <i>before</i> reading the directory."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1431535071, "post_id": 30220421, "comment_id": 48545153, "body": "curiously that code  works for me. Perhaps someone can find some clues if you add the kernel version/architecture/filesystem etc. you&#39;re using. Some trials with calling fsync() on the still open descripors might be worthwhile too."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1431539074, "post_id": 30220421, "comment_id": 48547515, "body": "<code>r = ::open( name, 0 );</code> Syntax error. Are you confusing C and C++ ?"}, {"owner": {"reputation": 595, "user_id": 1274868, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bf94875f746c352d74cd9863420dc62c?s=128&d=identicon&r=PG", "display_name": "Lobster", "link": "https://stackoverflow.com/users/1274868/lobster"}, "edited": false, "score": 0, "creation_date": 1431546734, "post_id": 30220421, "comment_id": 48551900, "body": "Closing file before reading the directory doesn&#39;t fix the problem, file is still invisible I am using: Linux version 2.6.32-38-generic (Ubuntu 10.04) I also tried using fsync function - when I use it on file descriptor it does nothing, when I use it on directory descriptor I got EINVAL error code (Invalid argument) Oh, yes, sorry that code is C++, not pure C, my mistake"}], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 4098628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d6dc62ac2b1b581d62f13f8525ff233?s=128&d=identicon&r=PG&f=1", "display_name": "Azwaw", "link": "https://stackoverflow.com/users/4098628/azwaw"}, "is_accepted": false, "score": 3, "last_activity_date": 1431548484, "last_edit_date": 1431548484, "creation_date": 1431547843, "answer_id": 30224321, "question_id": 30220421, "link": "https://stackoverflow.com/questions/30220421/unix-file-descriptor/30224321#30224321", "title": "Unix file descriptor", "body": "<p>Try to do an fsync on your directory. You should open directory with O_RDONLY flags. O_WRONLY will fail. Create a file and sync may not sync metadata for this file. More informations in <a href=\"http://blog.httrack.com/blog/2013/11/15/everything-you-always-wanted-to-know-about-fsync/\" rel=\"nofollow\">this article</a></p>\n"}], "owner": {"reputation": 595, "user_id": 1274868, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bf94875f746c352d74cd9863420dc62c?s=128&d=identicon&r=PG", "display_name": "Lobster", "link": "https://stackoverflow.com/users/1274868/lobster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1431548484, "creation_date": 1431534337, "last_edit_date": 1431546943, "question_id": 30220421, "link": "https://stackoverflow.com/questions/30220421/unix-file-descriptor", "title": "Unix file descriptor", "body": "<p>Today I found very interesting behavior of file descriptors in Linux. Look at that code:</p>\n\n<pre><code>#include &lt;dirent.h&gt;     /* Defines DT_* constants */\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/syscall.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;errno.h&gt;\n\n\n#define handle_error(msg) \\\ndo { trace(msg); exit(0); } while (0)\n#define trace printf\n\nint createFile(const char* name) {\n    int r;\n    r = ::open( name, 0 );\n    if (r &lt; 0)\n    {\n        trace(\"create file : %s\\n\", name);\n        r = ::open( name, O_CREAT, 0666 );\n        if (r &lt; 0)\n            trace(\"error r &lt; 0 %d\\n\",errno);\n    }\n    return r;\n}\n\nint createDir(const char* name) {\n    int r = ::mkdir( name, 0777 );\n    if (r != 0) {\n        trace(\"error r!=0\\n\");\n    }\n    r = open(name, 0);\n    if (r &lt; 0) {\n        trace(\"error create dir r &lt;0\\n\");\n    }\n    return r;\n}\n\nstruct linux_dirent {\n    long           d_ino;\n    off_t          d_off;\n    unsigned short d_reclen;\n    char           d_name[];\n};\n\n#include &lt;sys/types.h&gt;\n#include &lt;dirent.h&gt;\nvoid test123(int fd) {\n    int nread;\n    char buf[1024];\n    unsigned char buffer[1024];\n    struct linux_dirent *d;\n    int bpos,r;\n    char d_type;\n\n\n    if (fd == -1)\n        handle_error(\"open\");\n\n    for ( ; ; ) {\n        nread = syscall(SYS_getdents, fd, buf, 1024);\n        if (nread == -1)\n            handle_error(\"getdents\");\n\n        if (nread == 0)\n            break;\n\n        trace(\"--------------- nread=%d ---------------\\n\", nread);\n        trace(\"i-node#  file type  d_reclen  d_off   d_name\\n\");\n        for (bpos = 0; bpos &lt; nread;) {\n            d = (struct linux_dirent *) (buf + bpos);\n            trace(\"%8ld  \", d-&gt;d_ino);\n            d_type = *(buf + bpos + d-&gt;d_reclen - 1);\n            trace(\"%4d %10lld  %s\\n\", d-&gt;d_reclen,\n                  (long long) d-&gt;d_off, d-&gt;d_name);\n            bpos += d-&gt;d_reclen;\n        }\n    }\n}\n\n\nint main(int argc, const char * argv[]) {\n\n\n\n    int dir = createDir(\"test\");\n\n    int file = createFile(\"test/file.gg\");\n\n    test123(dir);\n    close(dir);\n    close(file);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>in that code I create folder, save its file descriptor, create file in that folder and after I want to print all files in that directory via file descriptors. However I get this output:</p>\n\n<pre><code>create file : test/file.gg\n--------------- nread=32 ---------------\ni-node#  file type  d_reclen  d_off   d_name\n   48879    16          1  .\n   48880    16          2  ..\n</code></pre>\n\n<p>There is no file.gg file in that folder. So, my question is - how it can be and how to work correctly with file descriptors? As I understand file descriptor is just an index in local for process table with all opened files and directories. But it is looks like that folder descriptor caches somehow files in that folder.\nHow to work correctly with descriptors in my case?</p>\n"}, {"tags": ["c++", "c", "exception"], "comments": [{"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1431534069, "post_id": 30220263, "comment_id": 48544493, "body": "@iharob: But the question is about the interaction between C and C++ (specifically, throwing an exception in a function called from C)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1431534223, "post_id": 30220263, "comment_id": 48544595, "body": "Isn&#39;t there something possible like setting an <code>at_exit()</code> handler IIRC?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1431534238, "post_id": 30220263, "comment_id": 48544605, "body": "@MikeSeymour I see, is there a way to do that? I don&#39;t think you can link to a c++ library from a c program that uses c++ specific features like function overloading or exceptions. Suppose that you were to declare the function prototype in c, what would it look like? it would require <code>extern &quot;C&quot;</code> in the c++ program, which might prevent function overloading or exceptions, I am just guessing of course."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1431534321, "post_id": 30220263, "comment_id": 48544685, "body": "@iharob: This is a C++ program with one function written in C, not a C program. As for what it would look like: it would look just like the code in the question. Perhaps you should read the question before commenting further."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1431534610, "post_id": 30220263, "comment_id": 48544874, "body": "Under what conditions does the library call <code>exit</code>?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1431534772, "post_id": 30220263, "comment_id": 48544979, "body": "There are two reasons for a library to invoke <code>exit()</code>. The first is total and utter cluelessness of the programmer who thinks that this is a valid way to handle errors. I&#39;d prefer keeping distance from such libraries. The other case is a fatal condition that normal error handling can&#39;t fix, like e.g. the vital plugin directory doesn&#39;t exist or some programming error is detected. Even there, using <code>abort()</code> instead to trigger the debugger would be the preferred choice. With that in mind, I&#39;d second David&#39;s question why the library calls <code>exit()</code> at all."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1431535183, "post_id": 30220263, "comment_id": 48545222, "body": "FWIW this code works for me with GCC 4.8.1 on Linux; but other compilers might behave differently when exceptions propagate through C functions."}, {"owner": {"reputation": 809, "user_id": 231489, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f037f47f50552082db2a66adb255652?s=128&d=identicon&r=PG", "display_name": "Dave Johansen", "link": "https://stackoverflow.com/users/231489/dave-johansen"}, "edited": false, "score": 0, "creation_date": 1431535224, "post_id": 30220263, "comment_id": 48545251, "body": "<code>exit()</code> is called under &quot;error conditions when the program should close&quot; but my question isn&#39;t &quot;is this a good way to do things?&quot;. I have to use this library, can&#39;t change it, and I&#39;m trying to make things play nicer with C++."}, {"owner": {"reputation": 809, "user_id": 231489, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f037f47f50552082db2a66adb255652?s=128&d=identicon&r=PG", "display_name": "Dave Johansen", "link": "https://stackoverflow.com/users/231489/dave-johansen"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1431535927, "post_id": 30220263, "comment_id": 48545660, "body": "@MikeSeymour I had been trying this on 32-bit RHEL 6 (GCC 4.4.7-11) so I tried it on a 64-bit RHEL 7 machine (GCC 4.8.3-9) and it worked just fine. I then tried on a 64-bit RHEL 6 machine and it worked as well. So is this just a bug with GCC on 32-bit systems?"}, {"owner": {"reputation": 771, "user_id": 1203839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58aff6504ff14291eb19032b17b0e469?s=128&d=identicon&r=PG", "display_name": "Gerard", "link": "https://stackoverflow.com/users/1203839/gerard"}, "edited": false, "score": 3, "creation_date": 1431536010, "post_id": 30220263, "comment_id": 48545716, "body": "If all else fails, you can run the library via <code>fork</code> calls."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1431538161, "post_id": 30220263, "comment_id": 48546920, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: <code>at_exit()</code> doesn&#39;t really help here. The program still terminates after any registered functions are called. You could have an <code>at_exit()</code>-registered function call something that continues doing the program&#39;s work, but when <code>exit()</code> is called again after that (including normal termination of <code>main()</code>), the behavior is undefined."}, {"owner": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "edited": false, "score": 0, "creation_date": 1431539545, "post_id": 30220263, "comment_id": 48547794, "body": "I don&#39;t have handy access to a x86 machine to check, but having done broadly similar things before, I suggest you look at gcc&#39;s <code>-nostdlib</code> and <code>-print-libgcc-file-name</code> options. What&#39;s happening, I think, is that <code>g++</code> is invoking the linker with the standard runtime <i>in front of</i> the file with your redefinition of <code>exit</code>, and the linker search order therefore finds the standard <code>exit</code> first. You want the search order to be <code>main</code>, (your module defining <code>exit</code>), and <i>then</i> <code>-lgcc</code>. So something like <code>g++ -nostdlib test_exception_c.o test_exception_cpp.o -o test_exception -lgcc</code> might do it."}, {"owner": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "edited": false, "score": 0, "creation_date": 1431540546, "post_id": 30220263, "comment_id": 48548346, "body": "Afterthought: it&#39;s probably obvious, but you should use <code>g++ -v</code> to look at the linker line that <code>g++</code> generates, which may make it clear, by the order of the arguments to the linker, where the problem is coming from."}, {"owner": {"reputation": 809, "user_id": 231489, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f037f47f50552082db2a66adb255652?s=128&d=identicon&r=PG", "display_name": "Dave Johansen", "link": "https://stackoverflow.com/users/231489/dave-johansen"}, "reply_to_user": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "edited": false, "score": 0, "creation_date": 1431542534, "post_id": 30220263, "comment_id": 48549478, "body": "@NormanGray The order of everything was basically the same with the minor exception being that x64 had extra paths to lib64. Here were the differences in parameters: &quot;--with-arch=i686 vs --with-arch_32=i686&quot;, &quot;-march=i686 vs Nothing&quot; and &quot;-m elf_i386 vs -m el_x86_64&quot;."}, {"owner": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "edited": false, "score": 0, "creation_date": 1431547890, "post_id": 30220263, "comment_id": 48552515, "body": "@DaveJohansen <code>exit</code> might well be in <code>lib64</code> (probably, but I don&#39;t know). Myself, I would try <code>-nostdlib</code> and friends, to push <code>lib64</code> to the end of the list. It would rule that out, at least."}, {"owner": {"reputation": 809, "user_id": 231489, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f037f47f50552082db2a66adb255652?s=128&d=identicon&r=PG", "display_name": "Dave Johansen", "link": "https://stackoverflow.com/users/231489/dave-johansen"}, "reply_to_user": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "edited": false, "score": 0, "creation_date": 1431551768, "post_id": 30220263, "comment_id": 48554519, "body": "@NormanGray I know that my version of <code>exit</code> is being called because it prints that &quot;terminate called after throwing ...&quot; and that wouldn&#39;t be happening if my version of <code>exit</code> wasn&#39;t being called. Also, linking with <code>-nostdlib</code> causes a bunch of undefined references so I don&#39;t believe that that is the issue."}, {"owner": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "edited": false, "score": 0, "creation_date": 1431552192, "post_id": 30220263, "comment_id": 48554715, "body": "@DaveJohansen Ah well. Onward and upward, eh..."}, {"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1431840350, "post_id": 30220263, "comment_id": 48665397, "body": "Even if this worked, this would have the side-effect of breaking <code>exit</code> in legitimate cases \u2026"}], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 231489, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f037f47f50552082db2a66adb255652?s=128&d=identicon&r=PG", "display_name": "Dave Johansen", "link": "https://stackoverflow.com/users/231489/dave-johansen"}, "edited": false, "score": 0, "creation_date": 1431963592, "post_id": 30283636, "comment_id": 48710207, "body": "I agree completely with the advice. Sorry I wasn&#39;t more clear in the original post. My intention was not to &quot;recall the library&quot; or &quot;stop the program from exiting&quot;, but just to let all of the destructors be called so that resources could be released properly and such."}, {"owner": {"reputation": 414, "user_id": 4889365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OlLkh.jpg?s=128&g=1", "display_name": "denis bider", "link": "https://stackoverflow.com/users/4889365/denis-bider"}, "reply_to_user": {"reputation": 809, "user_id": 231489, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f037f47f50552082db2a66adb255652?s=128&d=identicon&r=PG", "display_name": "Dave Johansen", "link": "https://stackoverflow.com/users/231489/dave-johansen"}, "edited": false, "score": 0, "creation_date": 1432042583, "post_id": 30283636, "comment_id": 48748823, "body": "As much as possible, a program should use resources in such a way that it&#39;s sufficient for the OS to release them when the program exits. There are circumstances, such as system shutdown, when the OS will kill your program without further notice. The program may also be killed by a user. It may be killed by an SSH server upon SSH session ending - which in turn may be caused by something as simple and uncontrollable as network disconnect.  If logging or signaling or other output is required to indicate the reason for exit, I would trigger that from a function that executes on exit. Then, exit."}], "tags": [], "owner": {"reputation": 414, "user_id": 4889365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OlLkh.jpg?s=128&g=1", "display_name": "denis bider", "link": "https://stackoverflow.com/users/4889365/denis-bider"}, "is_accepted": false, "score": 2, "last_activity_date": 1431840002, "creation_date": 1431840002, "answer_id": 30283636, "question_id": 30220263, "link": "https://stackoverflow.com/questions/30220263/can-exit-from-a-library-be-replaced-with-throwing-an-exception/30283636#30283636", "title": "Can exit() from a library be replaced with throwing an exception?", "body": "<p>I understand you may not want to read this, but it's most likely a mistake to continue executing a program after <em>any</em> part of it has attempted to call <code>exit()</code> or similar.</p>\n\n<p>If part of the program called <code>exit()</code>, you have no guarantees about the state of the program at that point. You don't know if the heap is in a consistent state. You don't know if the stack is any good. If you convert the <code>exit()</code> into a <code>throw</code>, the <em>very</em> least you're likely to encounter are memory leaks each time this happens. You don't know if the library that caused this error can be safely called again.</p>\n\n<p>If you have inspected the library's source code, and you're certain that no corruption will result, then the cleanest solution would be to modify the library itself, so that it throws instead of exiting.</p>\n\n<p>If changing the library is not permissible, the other clean and correct solution is to put all usage of the library into a separate process which you can monitor and restart.</p>\n"}, {"tags": [], "owner": {"reputation": 809, "user_id": 231489, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f037f47f50552082db2a66adb255652?s=128&d=identicon&r=PG", "display_name": "Dave Johansen", "link": "https://stackoverflow.com/users/231489/dave-johansen"}, "is_accepted": true, "score": 1, "last_activity_date": 1431963484, "creation_date": 1431963484, "answer_id": 30307419, "question_id": 30220263, "link": "https://stackoverflow.com/questions/30220263/can-exit-from-a-library-be-replaced-with-throwing-an-exception/30307419#30307419", "title": "Can exit() from a library be replaced with throwing an exception?", "body": "<p>The above code works, but on x86 before gcc 4.6, -fexceptions or -funwind-tables needs to be added when building the C code so that the stack unwinding can happen. You can see the <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1222110#c5\" rel=\"nofollow\">details here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1431982713, "creation_date": 1431982713, "answer_id": 30312712, "question_id": 30220263, "link": "https://stackoverflow.com/questions/30220263/can-exit-from-a-library-be-replaced-with-throwing-an-exception/30312712#30312712", "title": "Can exit() from a library be replaced with throwing an exception?", "body": "<p>Unless your C++ implementation is broken, it will call destructors for global variables when <code>exit</code> is called (GCC is not broken, as least all the versions I've tried).  So you only need to clean up stuff that won't be cleaned up by destructors of global vars.</p>\n\n<p>For global stuff on the heap, you can use <code>atexit</code> to register a cleanup function that will be called when <code>exit</code> is called -- this cleanup function can <code>delete</code> any heap objects that need to be cleaned up.</p>\n\n<p>Destructors for stuff on the stack is much trickier.  The best solution is probably to ensure that such destructors don't need to be called -- anything that MUST be cleaned up before exit should be referred to by a global (possibly using static members of classes) that does the cleanup in its destructor.</p>\n"}], "owner": {"reputation": 809, "user_id": 231489, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f037f47f50552082db2a66adb255652?s=128&d=identicon&r=PG", "display_name": "Dave Johansen", "link": "https://stackoverflow.com/users/231489/dave-johansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 1, "closed_date": 1431985555, "accepted_answer_id": 30307419, "answer_count": 3, "score": 7, "last_activity_date": 1431982713, "creation_date": 1431533822, "last_edit_date": 1431963654, "question_id": 30220263, "link": "https://stackoverflow.com/questions/30220263/can-exit-from-a-library-be-replaced-with-throwing-an-exception", "closed_reason": "Duplicate", "title": "Can exit() from a library be replaced with throwing an exception?", "body": "<p>I'm working with a C/Fortran library from C++ and the library calls exit(). I would like it to throw an exception so that the destructors in my C++ program will be called. I have been able to create my one definition of exit that throws an exception, but then terminate is still called. Is there to prevent terminate from being called and allow the normal exception handling to happen?</p>\n\n<p>UPDATE: In the comments it was pointed out that this works on x64 but fails on x86, so the main question is \"is there is a way to make x86 work like x64?\".</p>\n\n<p>UPDATE2: See my response about why this wasn't working on x86 and how to fix it.</p>\n\n<p>Here's my test code:</p>\n\n<p>test_exception.c</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nvoid call_c() { exit(1); }\n</code></pre>\n\n<p>test_exception.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\nextern \"C\" void call_c();\n\nextern \"C\" void exit(int value)\n{\n  throw std::runtime_error(std::string(\"Throwing an exception: \") + char('0' + value));\n}\n\nint main()\n{\n  try {\n    call_c();\n  } catch (const std::exception &amp;e) {\n    std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;\n    return 1;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Built with the following commands:</p>\n\n<pre><code>gcc -c test_exception.c -o test_exception_c.o\ng++ -c test_exception.cpp -o test_exception_cpp.o\ng++ test_exception_c.o test_exception_cpp.o -o test_exception\n</code></pre>\n"}, {"tags": ["c", "pointers", "if-statement", "casting", "void"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1431533055, "post_id": 30219921, "comment_id": 48543848, "body": "What are you trying to do? <code>printf(&quot;b is %F&quot;, x)</code> wants a float argument for <code>x</code> (since <code>%f</code> is a float format specifier). Not <code>void</code>. You&#39;ll get a similar error for the same reason with <code>printf(&quot;Value is %d&quot;, *a)</code>. It&#39;s unclear what you want here. Are you wanting to print the value as a float in either case?"}, {"owner": {"reputation": 15255, "user_id": 3761628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9414f7276059e8c1c63214430338ad7e?s=128&d=identicon&r=PG&f=1", "display_name": "eol", "link": "https://stackoverflow.com/users/3761628/eol"}, "edited": false, "score": 0, "creation_date": 1431533982, "post_id": 30219921, "comment_id": 48544450, "body": "Not sure what you&#39;re trying to do either but if you know the resulting type you can cast a void pointer like this <code>int intVal = *((int *) a);</code>"}, {"owner": {"reputation": 1, "user_id": 4896383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00123d6cc585579457349617778fdca7?s=128&d=identicon&r=PG&f=1", "display_name": "randomCoder", "link": "https://stackoverflow.com/users/4896383/randomcoder"}, "edited": false, "score": 0, "creation_date": 1431583131, "post_id": 30219921, "comment_id": 48563669, "body": "Sorry was the vague/wrong info lurker &amp; fbo3264.Have updated the Q."}], "answers": [{"tags": [], "owner": {"reputation": 2771, "user_id": 4163321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZrgsU.gif?s=128&g=1", "display_name": "Lukas Thomsen", "link": "https://stackoverflow.com/users/4163321/lukas-thomsen"}, "is_accepted": false, "score": 2, "last_activity_date": 1431585431, "last_edit_date": 1431585431, "creation_date": 1431585081, "answer_id": 30230774, "question_id": 30219921, "link": "https://stackoverflow.com/questions/30219921/how-to-typecast-void-pointer-based-on-condition/30230774#30230774", "title": "How to typecast void pointer based on condition?", "body": "<p>You get a compiler warning since the compiler does not understand <code>z-&gt;jack</code> since <code>z</code> is a <code>void *</code> (note that the declarations <code>a* z</code> and <code>b* z</code> are not valid outside the scope of the <code>if</code> and <code>else</code> block).</p>\n\n<p>To overcome this you can use a function <code>printJack</code> as shown in the following listing:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct one\n{\n    int jack;\n    float jill;\n}a;\n\ntypedef struct two\n{\n    int jack;\n    float jill;\n    char something;\n    int something1;\n}b;\n\n\nvoid printJack(void *pStruct, int type)\n{\n    switch (type)\n    {\n        case 1:\n            printf(\"jack: %d\\n\", ((a *)pStruct)-&gt;jack);\n            break;\n\n        default:\n            printf(\"jack: %d\\n\", ((b *)pStruct)-&gt;jack);\n            break;\n    }\n}\n\n\n/*\n**    main\n*/\nint main(void)\n{\n    a first;\n    b second;\n    void *z;\n\n    first.jack = 5;\n    second.jack = 4892;\n\n    printJack(&amp;first, 1);\n    printJack(&amp;second, 0);\n\n    z = &amp;first;\n    printJack(z, 1);\n\n    return (0);\n}\n</code></pre>\n\n<p>I've written code like this often and experienced a lot of trouble with it. Not at the time of implementing, since you are knowing what you are typing at that moment but let's say a few years later if you need to extend your code. You will miss a few places where you cast from <code>void *</code> to <code>a *</code> or <code>b *</code> and you'll spend a lot of time debugging what's going on...</p>\n\n<p>Now I'm writing things like this in the following way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\ntypedef struct header\n{\n    int jack;\n    float jill;\n} h;\n\ntypedef struct one\n{\n    struct header header;\n\n    /* what ever you like */\n}a;\n\ntypedef struct two\n{\n    struct header header;\n\n    char something;\n    int something1;\n\n    /* and even more... */\n}b;\n\n\nvoid printJack(void *pStruct)\n{\n    printf(\"jack: %d\\n\", ((struct header *)pStruct)-&gt;jack);\n}\n\n\n/*\n**    main\n*/\nint main(void)\n{\n    a first;\n    b second;\n    void *z;\n\n    first.header.jack = 5;\n    second.header.jack = 4892;\n\n    printJack(&amp;first);\n    printJack(&amp;second);\n\n    v = &amp;first;\n    printJack(v);\n\n    return (0);\n}\n</code></pre>\n\n<p>As you've noticed I have declared a new <code>struct header</code> which covers the the common parts of <code>struct one</code> and <code>struct two</code>. Instead of casting the <code>void *</code> to either <code>a *</code> or <code>b *</code> a \"common\" cast to <code>struct header *</code> (or <code>h *</code>) is done.</p>\n\n<p>By doing so you can easily extend the \"common attribtues\" of the structs or you can implement further structs using this header and function <code>printJack</code> still will work. Additionally there is no need for attribute <code>type</code> anymore making is easier to call <code>printJack</code>. You can even change the type of <code>jack</code> without needing to change it in various places within your code.</p>\n\n<p>But remember that <code>struct header</code> needs to be the first element of the structs you use this mechanism. Otherwise you will end up with a few surprises since you are using memory which does not contain the data of the <code>struct header</code>...</p>\n"}], "owner": {"reputation": 1, "user_id": 4896383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00123d6cc585579457349617778fdca7?s=128&d=identicon&r=PG&f=1", "display_name": "randomCoder", "link": "https://stackoverflow.com/users/4896383/randomcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431586369, "creation_date": 1431532758, "last_edit_date": 1431586369, "question_id": 30219921, "link": "https://stackoverflow.com/questions/30219921/how-to-typecast-void-pointer-based-on-condition", "title": "How to typecast void pointer based on condition?", "body": "<p>To explain more, I have two structures-'first' and 'second' having common variables 'jack' and 'jill'. I want to print jack via a pointer based on if-else condition.\nI understand at the time of printing I have to typecast the void pointer. But whether the pointer points to struct a or b is decided on run time. \nIt is a basic C code. How to overcome this?</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n\ntypedef struct one\n{\n    int jack;\n    float jill;\n}a;\ntypedef struct two\n{\n    int jack;\n    float jill;\n    char something;\n    int something1;\n}b;\na first;\nb second;\n\nvoid *z;\n\nif(1)\n{\n    a* z;\n    z = &amp;first;\n    printf(\"First one\");\n}\nelse\n{\n    b* z;\n    z = &amp;second;\n    printf(\"Second one\");\n}\n\nprintf(\"%d\\n\", z-&gt;jack);\n\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<pre><code>prog.c:36:17: warning: dereferencing 'void *' pointer printf(\"%d\\n\", z-&gt;jack); prog.c:36:17: error: request for member 'jack' in something not a structure or union\n</code></pre>\n"}, {"tags": ["c", "pointers", "for-loop", "openmp", "reduction"], "comments": [{"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 0, "creation_date": 1431536958, "post_id": 30219882, "comment_id": 48546280, "body": "Please tag your question with the programming language you are using. (I assume this is C?) Also, note that if this is C (not C++), then <a href=\"http://stackoverflow.com/a/605858/3488231\">don&#39;t cast the return value of <code>malloc()</code></a>."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1431672873, "post_id": 30219882, "comment_id": 48606716, "body": "To answer your question <code>how can this example be optimized?</code> the answer is that <a href=\"https://stackoverflow.com/questions/25179738/measuring-memory-bandwidth-from-the-dot-product-of-two-arrays\">it&#39;s memory bandwidth bound so it won&#39;t scale with the number of threads though that does not mean multiple threads won&#39;t help</a>."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 0, "creation_date": 1431673451, "post_id": 30219882, "comment_id": 48607018, "body": "@ace, this is valid C/C++ code but not casting will make it invalid C++ code. Do you have anything useful to say about this question?"}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1431675750, "post_id": 30219882, "comment_id": 48608334, "body": "@Zboson Check the revision history. The first revision did not tag the language, so I asked the OP to tag it accordingly. And since I noticed that OP was using <code>&lt;stdlib.h&gt;</code> and not <code>&lt;cstdlib&gt;</code>, I guessed it was C and not C++, so I added that it should not be casted if this is C. Please explain more if you still think what I did was wrong. Also, now that it <i>is</i> tagged as C, it makes my previous comment even more useful."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 0, "creation_date": 1431676192, "post_id": 30219882, "comment_id": 48608578, "body": "@ace casting or not casting is a matter of opinion it&#39;s not something that is right or wrong."}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1431676839, "post_id": 30219882, "comment_id": 48608915, "body": "@Zboson So is writing unreadable code, or <code>using namespace std</code>, or numerous other bad programming practice. They may not be wrong, but they are bad."}], "answers": [{"tags": [], "owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "is_accepted": true, "score": 3, "last_activity_date": 1431551732, "last_edit_date": 1431551732, "creation_date": 1431535723, "answer_id": 30220856, "question_id": 30219882, "link": "https://stackoverflow.com/questions/30219882/openmp-dot-product-and-pointers/30220856#30220856", "title": "OpenMP Dot Product and Pointers", "body": "<p>There's several things wrong here.</p>\n\n<p>Let's look at the loop as it stands:</p>\n\n<pre><code>#pragma omp parallel shared(y, z) private(i, tid)\n{\n  #pragma omp single\n  {\n      nthreads = omp_get_num_threads();\n  }\n  tid = omp_get_thread_num();\n\n  #pragma omp parallel for reduction(+:x_par)\n  for (i=tid; i&lt;N; i+=nthreads)\n  {\n      x_par += y[i] * z[i];\n  }\n}\n</code></pre>\n\n<p>So (1) notice that you (presumably) want <code>x_par</code> to be accessible outside of this region.  So you'll want the <code>reduction(+:x_par)</code> on the outer section, not the inner.  If you also add the very helpful <code>default(none)</code> clause, you'll also find that there's no clause describing the sharing of <code>nthreads</code>; let's explicitly make that shared.</p>\n\n<p>So let's look again:</p>\n\n<pre><code>#pragma omp parallel shared(y, z, nthreads) private(i, tid) reduction(+:x_par) default(none)\n{\n  #pragma omp single\n  {\n      nthreads = omp_get_num_threads();\n  }\n  tid = omp_get_thread_num();\n\n  #pragma omp parallel for \n  for (i=tid; i&lt;N; i+=nthreads)\n  {\n      x_par += y[i] * z[i];\n  }\n}\n</code></pre>\n\n<p>So looking more carefully, we now see that you have two <code>omp parallel</code> sections.  That means, if nested parallelism is enabled, that you'll have <code>nthreads</code> tasks each launching <code>nthreads</code> taks to do that loop; so the loop would end up with nthreads times the right answer if everything worked.  So let's get rid of the parallel, just using the for:</p>\n\n<pre><code> #pragma omp parallel shared(y, z, nthreads) private(i, tid) reduction(+:x_par) default(none)\n{\n  #pragma omp single\n  {\n      nthreads = omp_get_num_threads();\n  }\n  tid = omp_get_thread_num();\n\n  #pragma omp for \n  for (i=tid; i&lt;N; i+=nthreads)\n  {\n      x_par += y[i] * z[i];\n  }\n}\n</code></pre>\n\n<p>So that has the sharing correct and isn't nesting parallelism, but it still doesn't give the right answer; it gives a much smaller result.  What's wrong?  Let's take a look at the for loop.  Each thread wants to start at tid and skip nthreads, fine; but why do we want the <code>omp for</code> there?  </p>\n\n<p>Let's take a look at a simpler version which works:</p>\n\n<pre><code>#pragma omp parallel shared(y, z) reduction(+:x_par) default(none)\n{\n  #pragma omp for\n  for (i=0; i&lt;N; i++)\n  {\n      x_par += y[i] * z[i];\n  }\n}\n</code></pre>\n\n<p>Note that here we aren't decomposing the loop explicitly with tid and nthreads - we don't have to, because <code>omp for</code> decomposes the loop for us; it assigns loop iterations to threads.  </p>\n\n<p>So looking back at what we have, we have a manual decomposition of the loop - which is fine, sometimes that's what you need to do; <em>and</em> an <code>omp for</code> which tries to take that loop and split it up amongst threads.  But we're already doing that; the <code>omp for</code> simply makes us skip iterations here!  </p>\n\n<p>So getting rid of the <code>omp for</code></p>\n\n<pre><code>#pragma omp parallel shared(y, z, nthreads) private(i, tid) reduction(+:x_par) default(none)\n{\n  #pragma omp single\n  {\n      nthreads = omp_get_num_threads();\n  }\n  tid = omp_get_thread_num();\n\n  for (i=tid; i&lt;N; i+=nthreads)\n  {\n      x_par += y[i] * z[i];\n  }\n}\n</code></pre>\n\n<p>Gets us the right answer.</p>\n"}], "owner": {"reputation": 323, "user_id": 4727359, "user_type": "registered", "accept_rate": 27, "profile_image": "https://lh4.googleusercontent.com/-i2mbn-z5_5Y/AAAAAAAAAAI/AAAAAAAAABA/NYlJh2N4Xuo/photo.jpg?sz=128", "display_name": "neckutrek", "link": "https://stackoverflow.com/users/4727359/neckutrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 30220856, "answer_count": 1, "score": -1, "last_activity_date": 1431605998, "creation_date": 1431532633, "last_edit_date": 1431605998, "question_id": 30219882, "link": "https://stackoverflow.com/questions/30219882/openmp-dot-product-and-pointers", "title": "OpenMP Dot Product and Pointers", "body": "<p>I'm trying to implement dotproduct in OpenMP with large arrays allocated with malloc. However, when I use reduction(+:result) it produces different results for each program run. Why do I get different results? How can I remedy that? And how can this example be optimized? Here's my code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;omp.h&gt;\n\nconst int N = 1e1;\n\nint main ()\n{\n  int    i, nthreads, tid;\n  double x_seq, x_par, *y, *z, cpu_time_used;\n  clock_t start, end;\n\n  y = (double*)malloc(sizeof(double)*N);\n  z = (double*)malloc(sizeof(double)*N);\n\n  for (i=0; i&lt;N; i++) {\n      y[i] = i * 1.0;\n      z[i] = i * 2.0;\n  }\n\n  x_seq = 0;\n  x_par = 0;\n  for (i=0; i&lt;N; i++) x_seq += y[i] * z[i];\n\n  #pragma omp parallel shared(y, z) private(i, tid)\n  {\n      #pragma omp single\n      {\n          nthreads = omp_get_num_threads();\n      }\n      tid = omp_get_thread_num();\n\n      #pragma omp parallel for reduction(+:x_par)\n      for (i=tid; i&lt;N; i+=nthreads)\n      {\n          x_par += y[i] * z[i];\n      }\n\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1431532605, "post_id": 30219813, "comment_id": 48543563, "body": "Please provide sample input, and expected output."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1431532859, "post_id": 30219813, "comment_id": 48543722, "body": "<code>scanf(&quot;%d&quot;, &amp;tp[i].y);</code> --&gt; <code>scanf(&quot;%d%*c&quot;, &amp;tp[i].y);</code>"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 1, "creation_date": 1431533431, "post_id": 30219813, "comment_id": 48544084, "body": "This is probably a duplicate of any number of the questions where <code>scanf()</code> consumes whitespace instead of the intended character."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 2164673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32aae88cf7185f76071bddb18d1bd177?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel  Krasavin", "link": "https://stackoverflow.com/users/2164673/pavel-krasavin"}, "is_accepted": false, "score": 0, "last_activity_date": 1431533928, "last_edit_date": 1495542603, "creation_date": 1431533928, "answer_id": 30220289, "question_id": 30219813, "link": "https://stackoverflow.com/questions/30219813/i-cant-type-all-the-information-in-an-array-of-structs/30220289#30220289", "title": "I can&#39;t type all the information in an array of structs", "body": "<p>There are a lots of similar questions here, for example: <a href=\"https://stackoverflow.com/questions/7060573/c-scanf-and-fgets-problem\">C scanf() and fgets() problem</a>, <a href=\"https://stackoverflow.com/questions/5918079/fgets-doesnt-work-after-scanf\">fgets doesn&#39;t work after scanf</a>.</p>\n\n<p>You could use fgets() for user input and parse string with sscanf() for example.</p>\n\n<p>Or you can use <em>fgetc(stdin);</em> after each scanf() to get rid of '\\n' symbol.</p>\n"}], "owner": {"reputation": 9, "user_id": 4673376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f9ed9787ead7c08ef0fd412de3e172?s=128&d=identicon&r=PG", "display_name": "Mouldi Ouni", "link": "https://stackoverflow.com/users/4673376/mouldi-ouni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1431533928, "creation_date": 1431532435, "last_edit_date": 1431532891, "question_id": 30219813, "link": "https://stackoverflow.com/questions/30219813/i-cant-type-all-the-information-in-an-array-of-structs", "title": "I can&#39;t type all the information in an array of structs", "body": "<p>When I try to compile this small program everything is correct but when I run it I find some problems. For example, I can't type the \"c\" variable in the second element of the table and so on.</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nstruct point{\n    char c;\n    int x,y;\n};\n\nint main(void)\n{\n    int size = 4;\n    struct point tp[size];\n    for(int i = 0; i &lt; size; i++ )\n    {\n        printf(\"entrer le  nom du point no %d: \", i+1);\n        tp[i].c = fgetc(stdin);\n        printf(\"x = \");\n        scanf(\"%d\", &amp;tp[i].x);\n        printf(\"y = \");\n        scanf(\"%d\", &amp;tp[i].y); \n    }\n }\n</code></pre>\n"}, {"tags": ["c", "microcontroller", "avr", "avr-gcc"], "comments": [{"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1431533114, "post_id": 30219812, "comment_id": 48543880, "body": "You have absolutely no logic that I can see to actually make the LED flash (turning it on and off, etc).  Start with just getting the LED lit up before playing with the timers."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1431533679, "post_id": 30219812, "comment_id": 48544244, "body": "@rost0031 He&#39;s trying to make the LED blink using hardware timers."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1431534069, "post_id": 30219812, "comment_id": 48544492, "body": "Ok, I see that now.  OP, are you sure the LED is not flashing so fast that you can&#39;t see it?  Try turning off the timer and see if the LED is lit up by manually toggling the output."}], "answers": [{"tags": [], "owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "is_accepted": false, "score": 0, "last_activity_date": 1431706363, "creation_date": 1431706363, "answer_id": 30264146, "question_id": 30219812, "link": "https://stackoverflow.com/questions/30219812/timers-in-avr-c-atmega324a/30264146#30264146", "title": "timers in avr-c atmega324a", "body": "<p>First of all, when setting registers like TCCR1A you need to simply assign the value you want to put into it, not OR the bits you want to set with what is already in there as you'll get an unwanted mix of old &amp; new.</p>\n\n<p>Then try changing this:</p>\n\n<pre><code>TCCR1A = (1 &lt;&lt; COM1A0);    //COM1A0 in stead of COM0A0, and WGM12 is not part of TCCR1A\nTCCR1B = (1 &lt;&lt; CS11) | (1 &lt;&lt; CS10) | (1 &lt;&lt; WGM12);    //No need to write (0 &lt;&lt; x) for bits you don't want set, WGM12 is part of TCCR1B\n</code></pre>\n\n<p>If the led is flashing too fast, increase OCR1A and/or change the prescaler (cs 10, 11 and 12)</p>\n"}], "owner": {"reputation": 11, "user_id": 4896560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6802451da924b0fb1d0527cfb612bca0?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Tardy", "link": "https://stackoverflow.com/users/4896560/tom-tardy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431706363, "creation_date": 1431532434, "question_id": 30219812, "link": "https://stackoverflow.com/questions/30219812/timers-in-avr-c-atmega324a", "title": "timers in avr-c atmega324a", "body": "<pre><code>#define F_CPU 8000000UL\n#include &lt;avr/io.h&gt;\n\n/*\n * main -- Main program\n */\nint main(void)\n{\n    /* Set OC1A pin to be an output */\n    DDRD|=(1&lt;&lt;5);\n\n    /* Set output compare register value */\n    OCR1A = 4000;\n\n\n    /* Set timer counter control registers A and B so that\n     *  - mode is - clear counter on compare match\n     *  - output compare match action is to toggle pin OC1A\n     *  - correct clock prescale value is chosen.\n     * TCCR1C can just stay as default value (0).\n     */\n\n    TCCR1A |=(1&lt;&lt;COM0A0) | (1&lt;&lt;WGM12);\n    TCCR1B |= (0&lt;&lt;CS12) | (1&lt;&lt;CS11) | (1&lt;&lt;CS10) | (1&lt;&lt;WGM12) | (1&lt;&lt;WGM12);\n\n    while(1){\n\n    }\n}\n</code></pre>\n\n<p>I have a led linked to the OC1A port, yet it never flashes, some help would be much appreciated.</p>\n\n<p>I have scoured the data sheet and do not comprehend what else must be done in order to make the led flash, i am sure it would be simple for someone with any c knowledge.</p>\n"}, {"tags": ["c", "linux", "networking", "kernel"], "comments": [{"owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 0, "creation_date": 1431540028, "post_id": 30219416, "comment_id": 48548080, "body": "Is this to prevent information leaks? If so, the network driver should do it already (zero out the padding for frames smaller than the ethernet minimum)."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1431551025, "post_id": 30219416, "comment_id": 48554096, "body": "What kernel version are you using?"}, {"owner": {"reputation": 21, "user_id": 3909423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775aa6b3470b6ec904e9e0d92cc180de?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto", "link": "https://stackoverflow.com/users/3909423/alberto"}, "reply_to_user": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 0, "creation_date": 1431616058, "post_id": 30219416, "comment_id": 48582939, "body": "Yes @ninjalj , it is to prevent information leaks. I guessed that the driver may do that but I wasn&#39;t sure where it is donde (and I need to specify it). skrrgwasme, I&#39;m using the 3.4.107 kernel"}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1432040101, "post_id": 30219416, "comment_id": 48746822, "body": "@Alberto Instead of editing your answer into the question, please put it down in an answers box. You&#39;ll then be able to click the big checkmark outline under the vote counts to mark it as accepted. Answering your own question on SO is encouraged, but the answers should stay separate from the questions."}, {"owner": {"reputation": 21, "user_id": 3909423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775aa6b3470b6ec904e9e0d92cc180de?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto", "link": "https://stackoverflow.com/users/3909423/alberto"}, "reply_to_user": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1432232681, "post_id": 30219416, "comment_id": 48852256, "body": "wooppsss sorry @skrrgwasme, you&#39;re right"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3909423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775aa6b3470b6ec904e9e0d92cc180de?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto", "link": "https://stackoverflow.com/users/3909423/alberto"}, "edited": false, "score": 0, "creation_date": 1431616695, "post_id": 30225933, "comment_id": 48583364, "body": "Sorry skrrgwasme, I thought that it was the correct driver. But in fact We&#39;re using a standard 3.4 kernel, specifically, linux-image-3.4.107-0304107-generic_3.4.107-0304107.20150421&zwnj;&#8203;0712_amd64.deb It seems that I made a mistake searching for that specific driver (I&#39;m changing now the question), we&#39;re not using a Dell computer. We only use the standard kernel as-is from the debian package, so I guess it hasnt got the NAPI activated. But we need to zeroize if the packets are not being zeroizated (it is not enough for us to free memory, we&#39;ve to overwrite it with zeros)"}, {"owner": {"reputation": 21, "user_id": 3909423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775aa6b3470b6ec904e9e0d92cc180de?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto", "link": "https://stackoverflow.com/users/3909423/alberto"}, "edited": false, "score": 0, "creation_date": 1432020117, "post_id": 30225933, "comment_id": 48733307, "body": "Yes @skrrgwasme, you&#39;re right, the  e1000_clean_tx_ring and e1000_clean_rx_ring functions seem to do the zeroize work, but as it is done only when the hw is down it is not valid for our compliance need."}, {"owner": {"reputation": 21, "user_id": 3909423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775aa6b3470b6ec904e9e0d92cc180de?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto", "link": "https://stackoverflow.com/users/3909423/alberto"}, "edited": false, "score": 0, "creation_date": 1432028203, "post_id": 30225933, "comment_id": 48738595, "body": "I think I found where to do it @skrrgwasme... (I wrote it in question edit)"}], "tags": [], "owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "is_accepted": true, "score": 2, "last_activity_date": 1431638931, "last_edit_date": 1431638931, "creation_date": 1431554457, "answer_id": 30225933, "question_id": 30219416, "link": "https://stackoverflow.com/questions/30219416/where-in-the-e1000-linux-code-can-i-zeroize-rx-tx-network-packets/30225933#30225933", "title": "Where, in the e1000 linux code, can I zeroize rx/tx network packets?", "body": "<h2>TL;DR</h2>\n\n<p>As far as I can tell, both the transmit and receive buffers are already cleaned by the driver for both transmit and receive. I don't think you need to do anything.</p>\n\n<h2>Longer Answer</h2>\n\n<p>I don't think you have to worry about it. The transmit and receive buffer clearing functions, <a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L1120\" rel=\"nofollow\">e1000_clean_rx__irq</a> and <a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L863\" rel=\"nofollow\">e1000_clean_rx_irq</a>, seem to be called in any interrupt configuration, and for both transmit and receive. Interrupts can be triggered with any of the following interrupt signaling methods: legacy, <a href=\"http://en.wikipedia.org/wiki/Message_Signaled_Interrupts#MSI\" rel=\"nofollow\">MSI</a>, or <a href=\"http://en.wikipedia.org/wiki/Message_Signaled_Interrupts#MSI-X\" rel=\"nofollow\">MSI-X</a>. It appears that ring buffer cleaning happens in any interrupt mode, but they call the cleaning functions in different locations.</p>\n\n<p>Since you have two types of transfers (transmit and receive) and three different types of interrupt invocations (Legacy, MSI, and MSI-X), you have a total of six scenarious where you need to make sure things are cleaned. Fortunately, five of the six situations handle the packets by scheduling a job for <a href=\"http://en.wikipedia.org/wiki/New_API\" rel=\"nofollow\">NAPI</a>. These scenarios are transmit and receive for Legacy and MSI interrupts, and receive for MSI-X. Part of NAPI handling those packets is calling the <a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L2537\" rel=\"nofollow\">e1000_clean</a> function as a callback. If you look at the code, you'll see that it calls the buffer cleaning functions for both TX and RX.</p>\n\n<p>The outlier is the <a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L1816\" rel=\"nofollow\">MSI-X TX handler</a>. However, it seems to directly call the TX buffer cleaning function, rather than having NAPI handle it.</p>\n\n<p>Here are the relevant interrupt handlers that weren't specifically listed above:<br>\n<a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L1721\" rel=\"nofollow\">Legacy (both RX and TX)</a><br>\n<a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L1667\" rel=\"nofollow\">MSI (both RX and TX)</a><br>\n<a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L1834\" rel=\"nofollow\">MSI-X RX</a>  </p>\n\n<h2>Notes</h2>\n\n<ol>\n<li><p>All of my function references will open a file in the e1000e driver called netdev.c. They will open a window in the <a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4\" rel=\"nofollow\">Linux Cross Reference database</a>.</p></li>\n<li><p>This post discusses the e1000e driver, but some of the function names are \"e1000...\". I think a lot of the e1000 code was reused in the newer e1000e driver, so some of the names carried over. Just know that it isn't a typo.</p></li>\n<li><p>The <a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L2299\" rel=\"nofollow\">e1000_clean_tx_ring</a> and <a href=\"http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c?v=3.4#L1585\" rel=\"nofollow\">e1000_clean_rx_ring</a> functions that you referred too appear to only be called when the driver is trying to free resources or the hardware is down, during any actual packet handling. The two I referenced above seem to, though. I'm not sure exactly what the difference between them is, but they appear to get the job done.</p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 3909423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775aa6b3470b6ec904e9e0d92cc180de?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto", "link": "https://stackoverflow.com/users/3909423/alberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 30225933, "answer_count": 1, "score": 1, "last_activity_date": 1432028136, "creation_date": 1431531348, "last_edit_date": 1432028136, "question_id": 30219416, "link": "https://stackoverflow.com/questions/30219416/where-in-the-e1000-linux-code-can-i-zeroize-rx-tx-network-packets", "title": "Where, in the e1000 linux code, can I zeroize rx/tx network packets?", "body": "<p>I'd need to know where can I make zeroization for the received/transmitted network packets in the e1000 linux driver. I need to know this to pass one compliance requirement, but I'm not able to find in the code of the e1000 where to do zeroization of the network packet buffer (or if it already does the zeroization somewhere, that would be great)</p>\n\n<p>I saw that it does ring zeroization when the interface goes up or down in the kernel in the file <code>Intel_LAN_15.0.0_Linux_Source_A00/Source/base_driver/e1000e-2.4.14/src/netdev.c</code>, in the <code>e1000_clean_rx_ring()</code> and <code>e1000_clean_tx_ring()</code> functions:</p>\n\n<pre><code>    /* Zero out the descriptor ring */\n    memset(rx_ring-&gt;desc, 0, rx_ring-&gt;size);\n</code></pre>\n\n<p>But I'm not able to find where it should be done for each packet that the system receives/send.</p>\n\n<p>So, does anybody know where is the place in the code where the buffer zeroization for the tx/rx packets should happen? I bet that it will introduce some overhead, but I have to do it anyway.</p>\n\n<p>We're using the intel EF multi port network card: <a href=\"https://www-ssl.intel.com/content/www/us/en/network-adapters/gigabit-network-adapters/gigabit-et-et2-ef-multi-port-server-adapters-brief.html\" rel=\"nofollow\">https://www-ssl.intel.com/content/www/us/en/network-adapters/gigabit-network-adapters/gigabit-et-et2-ef-multi-port-server-adapters-brief.html</a>?\n and the kernel 3.4.107</p>\n\n<h2>We're using the linux-image-3.4.107-0304107-generic_3.4.107-0304107.201504210712_amd64.deb kernel</h2>\n\n<p>EDIT: @skgrrwasme pointed correctly that the e1000_clean_tx_ring and e1000_clean_rx_ring functions seem to do the zeroize work, but as it is done only when the hw is down it is not valid for our compliance need. </p>\n\n<p>So, it seems that the functions that are doing the work for each packet are e1000_clean_rx_irq and e1000_clean_tx_irq, but those functions doesn't zeroize data, they only free memory but doesn't make a memset() with 0 to overwrite memory (and that's what is required). So, what I think could be done is, as it is enough to zeroize data when rx or tx, inside e1000_clean_tx_irq() calls to e1000_unmap_and_free_tx_resource(), but in fact it only frees it, not zeroize it:</p>\n\n<pre><code>    if (buffer_info-&gt;skb) {\n            dev_kfree_skb_any(buffer_info-&gt;skb);\n            buffer_info-&gt;skb = NULL;\n    }\n</code></pre>\n\n<p>So what I think is that we can wrote inside dev_kfree_skb_any(), the memset. That function calls to two functions:\n        dev_kfree_skb_any(struct sk_buff *skb)\n        {\n                 if (in_irq() || irqs_disabled())\n                         dev_kfree_skb_irq(skb);\n                 else\n                         dev_kfree_skb(skb);\n         }</p>\n\n<p>So, something easy would be a call to skb_recycle_check(skb); that will do a:</p>\n\n<pre><code>    memset(skb, 0, offsetof(struct sk_buff, tail));\n</code></pre>\n\n<p>Does this make sense? I think that with this, the memory will be overwritten with zeroes, and the work will be done, but I'm not sure...</p>\n"}, {"tags": ["c", "binary-tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1431531168, "post_id": 30219315, "comment_id": 48542538, "body": "what did you find when you stepped through with a debugger?"}, {"owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1431531273, "post_id": 30219315, "comment_id": 48542603, "body": "nothing , all went just as planned then after this method I printed inorder to see my tree and half of it gone..."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 0, "creation_date": 1431531345, "post_id": 30219315, "comment_id": 48542658, "body": "Please provide <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">minimal reproducible example</a> (so that we can compile it as is and observe the issue)."}, {"owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1431532276, "post_id": 30219315, "comment_id": 48543321, "body": "<a href=\"http://pastebin.com/i6Febeyu\" rel=\"nofollow noreferrer\">pastebin.com/i6Febeyu</a>"}], "answers": [{"tags": [], "owner": {"reputation": 830, "user_id": 4882848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rJN9r.png?s=128&g=1", "display_name": "Andrew Malta", "link": "https://stackoverflow.com/users/4882848/andrew-malta"}, "is_accepted": false, "score": 0, "last_activity_date": 1431533160, "creation_date": 1431533160, "answer_id": 30220059, "question_id": 30219315, "link": "https://stackoverflow.com/questions/30219315/deleting-the-lowest-value-in-a-binary-search-tree/30220059#30220059", "title": "Deleting the lowest value in a binary search tree", "body": "<p>I believe your problem is in your while loop condition. You want to be traversing the left side of the tree while current->m_ls != NULL, otherwise you will delete the entire left side of you tree.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1431536458, "post_id": 30220147, "comment_id": 48545981, "body": "i must do it struct Node *delMin(struct Node **root) (as define in the work) ill try to do what you said and come back with results"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 3, "last_activity_date": 1431537077, "last_edit_date": 1431537077, "creation_date": 1431533393, "answer_id": 30220147, "question_id": 30219315, "link": "https://stackoverflow.com/questions/30219315/deleting-the-lowest-value-in-a-binary-search-tree/30220147#30220147", "title": "Deleting the lowest value in a binary search tree", "body": "<p>Let's look at your function. </p>\n\n<pre><code>struct Node *delMin(struct Node **root)\n</code></pre>\n\n<p>You take a pointer to node pointer as argument and return the new head. That is unnecessary. Returning the head is only useful if it isn't updated otherwise. Your pointer-to-node-pointer approach caters for that (well, it should, but it doesn't), so that the return value is free for other information.</p>\n\n<pre><code>    struct Node *b4Current;\n</code></pre>\n\n<p>Here, you define an uninitialised pointer. You should initialise it to <code>NULL</code> to idicate that the current node, the head, doesn't have a parent. Otherwise the pointer will be a garbage value that is likely to cause undefined behaviour.</p>\n\n<pre><code>    while ((current-&gt;m_ls) == NULL) {\n        b4Current = current;\n        current = current-&gt;m_ls;\n    }\n</code></pre>\n\n<p>Here, your condition is wrong: You want to go left as long as there is a pointer, but you do something else: You go left if there isn't anywhere to go! When the head has a left child, <code>current</code> will stay at the head. Otherwise, it will be <code>NULL</code>, which will cause havoc when you try to dereference it later.</p>\n\n<pre><code>    if ((current-&gt;m_rs) == NULL) {\n        b4Current-&gt;m_ls = 0;\n        free(current);\n\n    } else {\n        b4Current-&gt;m_ls = current-&gt;m_rs;\n        free(current);\n    }\n</code></pre>\n\n<p>The two branches of the <code>if</code> are really the same, if you think about. It's a bit like saying: <code>if (x == 0) y = 0; else y = x;</code>.</p>\n\n<p>But you need an <code>if</code> here, namely to distinguish between the case that <code>current</code> is the head or not. In the former case, you should update <code>*head</code>, the latter case is what you have already written.</p>\n\n<p>You should also catch the case that you can't remove a node from an empty list.</p>\n\n<p>So:</p>\n\n<pre><code>void delMin(struct Node **root)\n{\n    struct Node *current = *root;\n    struct Node *b4Current = NULL;\n\n    if (current == NULL) return NULL;\n\n    while (current-&gt;m_ls != NULL) {\n        b4Current = current;\n        current = current-&gt;m_ls;\n    }\n\n    if (b4Current == NULL) {\n        *root = current-&gt;m_rs;\n    } else {\n        b4Current-&gt;m_ls = current-&gt;m_rs;\n    }\n\n    free(current);\n}\n</code></pre>\n\n<p>But since you are passing a pointer to your head node anyways, you could simplify the function to:</p>\n\n<pre><code>void delMin(struct Node **root)\n{\n    if (*root == NULL) return;\n\n    while ((*root)-&gt;m_ls != NULL) {\n        root = &amp;(*root)-&gt;m_ls;\n    }\n\n    struct Node *old = *root;\n\n    (*root) = (*root)-&gt;m_rs;\n    free(old);\n}\n</code></pre>\n\n<p>You may have some ugly <code>(*root)</code>s here, but you do away with a lot of auxiliary variables and <code>if</code> statements. The idea is that you add one level of indirection by iterating with a pointer to node pointer. <code>*root</code> takes the role of your <code>b4Current</code> and <code>(*root)-&gt;m_ls</code> is your <code>current</code>, except that <code>*root</code> starts with a sensible initial value, namely the root node.</p>\n"}], "owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1431537077, "creation_date": 1431531036, "last_edit_date": 1431535915, "question_id": 30219315, "link": "https://stackoverflow.com/questions/30219315/deleting-the-lowest-value-in-a-binary-search-tree", "title": "Deleting the lowest value in a binary search tree", "body": "<p>I wrote this and somehow it's ending up deleting all my left side on the tree not only the most left leaf.</p>\n\n<p>I can't find my mistake, can someone help?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct Node *delMin(struct Node **root)\n{\n    struct Node *current = *root;\n    struct Node *b4Current;\n\n    while ((current-&gt;m_ls) == NULL) {\n        b4Current = current;\n        current = current-&gt;m_ls;\n    }\n\n    if ((current-&gt;m_rs) == NULL) {\n        b4Current-&gt;m_ls = 0;\n        free(current);\n    } else {\n        b4Current-&gt;m_ls = current-&gt;m_rs;\n        free(current);\n    }\n\n    return *root;\n}\n</code></pre>\n"}, {"tags": ["c", "http"], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 5, "last_activity_date": 1431531886, "last_edit_date": 1431531886, "creation_date": 1431530975, "answer_id": 30219285, "question_id": 30219197, "link": "https://stackoverflow.com/questions/30219197/return-a-char-or-use-memcpy/30219285#30219285", "title": "Return a char* or use memcpy?", "body": "<p>The first method is better, if the string is not going to change or have some fields to be filled by the function, then the first method is much easier to implement, having to keep track of memory allocated on the heap is always difficult, it's not necessary to do it in your case, you can even use a macro, like</p>\n\n<pre><code>#define HTTP_HEADER \\\n    \"POST / HTTP/1.1\\r\\n\" \\\n    \"Host: www.example.com\\r\\n\" \\\n    \"Content-Type: application/x-www-form-urlencoded\\r\\n\\r\\n\"\n</code></pre>\n\n<p>instead of the function.</p>\n\n<p>A situation where you need to dynamically generate the header, for example because the <code>Host</code> changes, would <strong>require</strong> the second solution, since you would need to allocate enough space for the header, and then build up the header string.</p>\n\n<p>And in that case it would be better if the function takes care of returning the pointer to the newly allocated and build string, but yes, the caller shall be responsible of calling <code>free()</code>.</p>\n\n<p>Also, there is absolutely no need for parentheses in your <code>return</code> statement, it makes the code hard to read.</p>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1431541490, "last_edit_date": 1431541490, "creation_date": 1431531069, "answer_id": 30219329, "question_id": 30219197, "link": "https://stackoverflow.com/questions/30219197/return-a-char-or-use-memcpy/30219329#30219329", "title": "Return a char* or use memcpy?", "body": "<p>It's not really the right question as your example generates a header that's a literal. In real life I assume it will have dynamic content. The question is the about how to generate dynamic string content. To generate variable size and content strings you will need to allocate it on the heap (unless you want to do really hard work with static memory pools ). This suggests you need</p>\n\n<pre><code>static char * MakeHeader(...);\n</code></pre>\n\n<p>and tell the caller to free the result when done.</p>\n"}, {"tags": [], "owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "is_accepted": false, "score": 0, "last_activity_date": 1431531637, "creation_date": 1431531637, "answer_id": 30219520, "question_id": 30219197, "link": "https://stackoverflow.com/questions/30219197/return-a-char-or-use-memcpy/30219520#30219520", "title": "Return a char* or use memcpy?", "body": "<p>There are several ways for a function to produce a string:</p>\n\n<ul>\n<li><p>Return a pointer to a static one, as in your first example. This is simple and requires no memory management, but the content of the string has to be known at compile time.</p></li>\n<li><p>Copy the string into a buffer supplied by the caller, as <code>sprintf()</code> does for example:</p>\n\n<pre><code>void genHeader(char* buffer, size_t length);\n</code></pre>\n\n<p>This would write characters into <code>buffer</code> until <code>length</code> is reached. It makes <code>genHeader()</code> simpler by forcing the caller to allocate memory. However, it might not be possible to know in advance how much memory to allocate, in which case the caller will either allocate too much or too little. You could have <code>genHeader()</code> return the size of the buffer requires if <code>buffer</code> is null, or some variation.</p></li>\n<li><p>Allocate the string yourself:</p>\n\n<pre><code>char* genHeader();\n</code></pre>\n\n<p>This avoids most of the problems above by giving you complete control over the process of allocating enough memory to hold the content. However, the caller is now forced to free the memory.</p></li>\n</ul>\n\n<p>I would go with the third option for any kind of dynamic content.</p>\n"}], "owner": {"reputation": 5323, "user_id": 233798, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/22IuH.jpg?s=128&g=1", "display_name": "Kar", "link": "https://stackoverflow.com/users/233798/kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 30219285, "answer_count": 3, "score": 1, "last_activity_date": 1431541490, "creation_date": 1431530739, "last_edit_date": 1431530999, "question_id": 30219197, "link": "https://stackoverflow.com/questions/30219197/return-a-char-or-use-memcpy", "title": "Return a char* or use memcpy?", "body": "<p>I'm trying to write a function that generates the header of HTTP requests. I currently have something like </p>\n\n<pre><code>static char* genHeader() { \n    return(\"POST / HTTP/1.1\\r\\n\\\n            Host: www.example.com\\r\\n\\\n            Content-Type: application/x-www-form-urlencoded\\r\\n\\r\\n\"); \n}\n</code></pre>\n\n<p>I'm aware that it could also be done by:</p>\n\n<pre><code>static void genHeader(char *header) { memcpy(header, ...); }\n</code></pre>\n\n<p>Which one is closer to the \"canonical\" way of generating a header? In the second method, I'd need to free the memory whereas in the first I wouldn't, right?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c", "windows", "sockets"], "comments": [{"owner": {"reputation": 188, "user_id": 4620155, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e6885869e748858183218b08b906dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "Mercious", "link": "https://stackoverflow.com/users/4620155/mercious"}, "edited": false, "score": 0, "creation_date": 1431530570, "post_id": 30219088, "comment_id": 48542098, "body": "Eh  ... you don&#39;t close the socket and keep using it?"}, {"owner": {"reputation": 277, "user_id": 4293446, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9da46dcbbff4536a052417625b06e5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pan Wolodyjowsky", "link": "https://stackoverflow.com/users/4293446/pan-wolodyjowsky"}, "reply_to_user": {"reputation": 188, "user_id": 4620155, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e6885869e748858183218b08b906dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "Mercious", "link": "https://stackoverflow.com/users/4620155/mercious"}, "edited": false, "score": 0, "creation_date": 1431530638, "post_id": 30219088, "comment_id": 48542150, "body": "&quot;closesocket(s);&quot; hm?"}, {"owner": {"reputation": 188, "user_id": 4620155, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e6885869e748858183218b08b906dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "Mercious", "link": "https://stackoverflow.com/users/4620155/mercious"}, "edited": false, "score": 0, "creation_date": 1431530730, "post_id": 30219088, "comment_id": 48542211, "body": "I&#39;m saying the better way is: Don&#39;t close the socket and keep using it. What makes you think that you need to close the socket? It&#39;s connection to the server is maintained, even after receiving a set of data. There is no reason to close it after each successfull recv() call."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1431530874, "post_id": 30219088, "comment_id": 48542321, "body": "Both of your codes are wrong, but primarily your server. Your server accepts a new connection before sending a new message, and does not close the previous connection.  Your client thus has to reconnect each time.  You need to change both sides to reuse the existing connection they already have. And you need to frame your messages so the client knows where one message ends and the next message begins. You cannot assume a 1-to-1 relationship between <code>send()</code> and <code>recv()</code> in TCP, only in UDP."}], "answers": [{"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": true, "score": 1, "last_activity_date": 1431531635, "last_edit_date": 1431531635, "creation_date": 1431531023, "answer_id": 30219309, "question_id": 30219088, "link": "https://stackoverflow.com/questions/30219088/reusing-sockets-with-winsocket-client-server-application/30219309#30219309", "title": "reusing sockets with WinSocket client/server application", "body": "<p>well , some of things here are not very common.</p>\n\n<p>first, you usually name your variables in English, not other languages that are written in latin alphabet. I may get downvote for that, but that is the common practice for a reason.</p>\n\n<p>second of all, I'd prefere use the C++ standard over OS specific API. \nwhy not go with <code>std::thread</code> instead of WinApi thread? it's much more simple, short and elegant.</p>\n\n<p>third, you code is 100% procedural. you don't have a standard C++ socket class, but it doesn't mean you can't (or shouldn't) write your own Socket class which handles in elegant way the creation, binding, sending and receiving functionality.</p>\n\n<p>fourth, <code>s</code> is not a good name for a variable even if MSDN examples so. <code>acceptingSocket</code> might be. </p>\n\n<p>about your actual question:\nyou have many options here, the 3 I can think of:<br/>\n1) not close the socket and keep on receiving data inside a while loop.<br/> \npros: easy to write. when the server has new data the client gets it right away.\ncons: this is not a good way when your server has more the few connections at each time because then it will crash.</p>\n\n<p>2) let the server pack the data. then the client open a connection in pre-defined intervals, ask for all the accumulated data at once and receive it.<br/>\npros: the most CPU resource saving out of the three\noptions.\ncons : your client will not get the data right away, but in a pre-defined intervals</p>\n\n<p>3) let the client send the local IP and port to the server in the begining of each session. then let the client keep a bounded socket on the local host waiting for connections. every time the server has something new to tell the client - it just use the saved IP and port to connect to the client, send the data and close the connection. the client then returns to wait for new connections. this way<br>\npros: in this case the server will have as few as possible connections in each time, wich is a good thing if you intent your server to server many clients.\ncons: the weight actually falls on the client, which in many cases no the best thing to do.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1431532145, "creation_date": 1431532145, "answer_id": 30219710, "question_id": 30219088, "link": "https://stackoverflow.com/questions/30219088/reusing-sockets-with-winsocket-client-server-application/30219710#30219710", "title": "reusing sockets with WinSocket client/server application", "body": "<p>The usual one-connection approach is:</p>\n\n<pre><code>Create socket\nbind socket\nListen on socket\nnewsocket = accept on socket\nwhile no accept errors\n    while newsocket connected and error free\n        process newsocket\n    newsocket = accept on socket\n</code></pre>\n\n<p>Multiple connections can be handles several ways.</p>\n\n<p>Multithreaded:</p>\n\n<pre><code>create thread pool\nCreate socket\nbind socket\nListen on socket\nwhile no errors\n    newsocket = accept on socket\n    hand newsocket off to thread pool for processing\n</code></pre>\n\n<p>Monothread <a href=\"http://www.freebsd.org/cgi/man.cgi?query=select\" rel=\"nofollow\">select</a> based</p>\n\n<pre><code>Create socket\nbind socket\nListen on socket\nadd socket to readFD  list\nwhile no errors\n    select on readFD list\n    if socket selected\n        newsocket = accept on socket\n        add newsocket to readFD  list\n    while other sockets selected\n        process other sockets\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 4293446, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9da46dcbbff4536a052417625b06e5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pan Wolodyjowsky", "link": "https://stackoverflow.com/users/4293446/pan-wolodyjowsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 30219309, "answer_count": 2, "score": 1, "last_activity_date": 1435334053, "creation_date": 1431530422, "last_edit_date": 1435334053, "question_id": 30219088, "link": "https://stackoverflow.com/questions/30219088/reusing-sockets-with-winsocket-client-server-application", "title": "reusing sockets with WinSocket client/server application", "body": "<p>I have 2 simple applications, one client and one server. The client connects to the server and the server sends data to the client. In the main loop of the client application, I'm closing the socket and creating a new one every time I want to receive another piece of information. It works but it doesn't look right to me. Is this right? Do I really need to close and reopen a socket every time, or is there another way to do this?</p>\n\n<p>client:</p>\n\n<pre><code>    int main(){\n    DWORD id;\n    SOCKET s;\n    struct sockaddr_in sa;\n    WSADATA wsas;\n    WORD wersja;\n    int recv_size;\n    LPTHREAD_START_ROUTINE WINAPI funkcja = getCommend;\n\n    watek = CreateThread(NULL, 0, funkcja, 0, 0, &amp;id);\n\n\n\n    wersja = MAKEWORD(2, 0);\n    WSAStartup(wersja, &amp;wsas);\n\n\n    memset((void *)(&amp;sa), 0, sizeof(sa));\n    sa.sin_family = AF_INET;\n    sa.sin_port = htons(PORT);\n    sa.sin_addr.s_addr = inet_addr(\"25.62.229.110\");\n\n    int result;\n    s = socket(AF_INET, SOCK_STREAM, 0);\n    result = connect(s, (struct sockaddr FAR *) &amp;sa, sizeof(sa));\n    if (result == SOCKET_ERROR)\n    {\n        printf(\"\\nB\u0142\u0105d po\u0142\u0105czenia!\");\n        return 1;\n    }\n\n    int a;\n    if ((recv_size = recv(s, server_reply, SIZE, 0)) == SOCKET_ERROR)\n    {\n        printf(\"recv failed\\n\");\n    }\n    else{\n        while (result != SOCKET_ERROR){\n            //printf(\"%s\\n\", server_reply);     \n            closesocket(s);\n            Sleep(1000);\n            s = socket(AF_INET, SOCK_STREAM, 0);\n            result = connect(s, (struct sockaddr FAR *) &amp;sa, sizeof(sa));\n            if (result == SOCKET_ERROR){\n                break;\n            }\n            result = recv_size = recv(s, server_reply, SIZE, 0);\n        }\n    }\n    getchar();\n    closesocket(s);\n    TerminateThread(watek, NULL);\n    WSACleanup();\n    return 1;\n}\n</code></pre>\n\n<p>server:</p>\n\n<pre><code>int main(){\nDWORD id;\nSOCKET s, new_socket;\nLPTHREAD_START_ROUTINE WINAPI funkcja = getCommend;\nstruct sockaddr_in sa, sc;\nWSADATA wsas;\nint c;\nwatek = CreateThread(NULL,0,funkcja,0,0,&amp;id);\n\nWSAStartup(MAKEWORD(1, 1), &amp;wsas);\n\ns = socket(AF_INET, SOCK_STREAM, 0);\n\n//memset((void *)(&amp;sa), 0, sizeof(sa));\nsa.sin_family = AF_INET;\nsa.sin_port = htons(PORT);\nsa.sin_addr.s_addr = htonl(INADDR_ANY);\nbind(s, (struct sockaddr FAR*)&amp;sa, sizeof(sa));\nlisten(s, 5);\nputs(\"Czekam na polaczenie...\");\nc = sizeof(struct sockaddr_in);\nwhile ((new_socket = accept(s, (struct sockaddr *)&amp;sc, &amp;c)) != INVALID_SOCKET)\n{\n    //puts(\"polaczenie zaakceptowane\");\n    send(new_socket, message, strlen(message), 0);\n}\nif (new_socket == INVALID_SOCKET)\n{\n    printf(\"Nie udane po\u0142aczenie, blad nr : %d\", WSAGetLastError());\n    return 1;\n}\nTerminateThread(watek, NULL);   \ngetchar();\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "input", "mips"], "comments": [{"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1431533000, "post_id": 30218936, "comment_id": 48543810, "body": "wwacd? (what would a compiler do...)"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4896382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206812955105436/picture?type=large", "display_name": "Jos&#233; Ribeiro", "link": "https://stackoverflow.com/users/4896382/jos%c3%a9-ribeiro"}, "edited": false, "score": 0, "creation_date": 1431531899, "post_id": 30219112, "comment_id": 48543056, "body": "yes but i already tried it that way and it gives me  268500992 always as an output"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "reply_to_user": {"reputation": 9, "user_id": 4896382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206812955105436/picture?type=large", "display_name": "Jos&#233; Ribeiro", "link": "https://stackoverflow.com/users/4896382/jos%c3%a9-ribeiro"}, "edited": false, "score": 0, "creation_date": 1431532831, "post_id": 30219112, "comment_id": 48543708, "body": "well, syscall 1 expects the integer to print in <code>$a0</code>."}, {"owner": {"reputation": 9, "user_id": 4896382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206812955105436/picture?type=large", "display_name": "Jos&#233; Ribeiro", "link": "https://stackoverflow.com/users/4896382/jos%c3%a9-ribeiro"}, "edited": false, "score": 0, "creation_date": 1431532993, "post_id": 30219112, "comment_id": 48543805, "body": "i have putted the wrong c program now its corrected"}], "tags": [], "owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1431533174, "last_edit_date": 1431533174, "creation_date": 1431530493, "answer_id": 30219112, "question_id": 30218936, "link": "https://stackoverflow.com/questions/30218936/translating-c-to-mips-assembly/30219112#30219112", "title": "translating C to mips Assembly", "body": "<p>Syscalls 3 and 7 are <code>print_double</code> and <code>read_double</code>. That doesn't match your C code, which is using the <code>%d</code> format specifier (i.e. decimal integer). If you intended to read and write integers you should be using syscalls 1 and 5 instead.</p>\n\n<p>And if you use syscall 1 to print an integer you should place the value to print in register <code>$a0</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 4896382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206812955105436/picture?type=large", "display_name": "Jos&#233; Ribeiro", "link": "https://stackoverflow.com/users/4896382/jos%c3%a9-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1431772573, "creation_date": 1431530060, "last_edit_date": 1431772573, "question_id": 30218936, "link": "https://stackoverflow.com/questions/30218936/translating-c-to-mips-assembly", "title": "translating C to mips Assembly", "body": "<p>I have this C program that is used to identify odd numbers:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nint impar (int x)\n{\n    if (x%2 != 0)\n        return 1;\n    else \n        return 0;\n}\n\nvoid test ()\n{\n    int x;\n    while(scanf(\"%d\", &amp;x) != EOF)\n    {\n        int y = impar(x);\n        printf(\"%d\\n\", y);\n    }\n}\n\nint main (void)\n{\n    test();\n    return 0;\n}               \n</code></pre>\n\n<p>and I need to convert it to MIPS assembly. So far I got this:</p>\n\n<pre><code>.data\n.globl main\nlinha1: .asciiz \"Numero a inserir\\n\"\n.text\nbody:\n    la $a0, linha1      # carrega o endereco da linha1 para syscall\n    li $v0,4            # servico de print da string\n    syscall\n\n    main:\n    li $v0,7            # servico para ler um inteiro\n    syscall\n    div $t0, $v0, 2 # divisao do x por 2\n    mfhi $t9 #mover o resto para t9\n    li $t3, 0\n    bne $t3, $t9, if\n    beq $t3, $t9, else\n\n\n    if:\n    add $t6, $v0, 1\n    li $v0,3            # servico para imprimir um inteiro\n    syscall\n    li $v0,10           # servico para terminar o programa\n\n    else: \n    add $t6, $v0, 0     \n    li $v0,3            # servico para imprimir um inteiro\n    syscall\n    li $v0,10           # servico para terminar o programa\n</code></pre>\n\n<p>I am having problems using the number that is on input, since the output is always 0.00.0</p>\n\n<p>Any ideas what is wrong here?          </p>\n"}, {"tags": ["objective-c", "c", "arrays"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1431529268, "post_id": 30218632, "comment_id": 48541091, "body": "Well, did you declare points and velocity?"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1431529491, "post_id": 30218632, "comment_id": 48541288, "body": "(If that&#39;s not clear, the &quot;use of undeclared identifier&quot; is your compiler&#39;s polite way of saying &quot;wtf is <code>points</code>? Where does it come from? What&#39;s its type? Where does it live?&quot;)"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1431529545, "post_id": 30218632, "comment_id": 48541341, "body": "This question has nothing to do with <code>malloc()</code>.  You appear to not know how to declare variables.  Did you read about Objective-C before jumping in and writing code?"}, {"owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1431529731, "post_id": 30218632, "comment_id": 48541476, "body": "@Mat Thanks for pointing this out. I don&#39;t know any C, and looking at the sample project I referenced and that I&#39;m trying to use, I actually don&#39;t see where the original author declared either of these two variables. Where/how should they be declared?"}, {"owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1431529838, "post_id": 30218632, "comment_id": 48541562, "body": "@trojanfoe I learned Objective-C doing tutorials about how to build specific apps. I don&#39;t have any C programming experience. What exactly do you recommend I do that wouldn&#39;t involve months of study when I&#39;m just trying to develop a simple app? For that matter if you have a reference other than the apple docs (which are enormous and dense) that you&#39;d recommend to a beginner to better understand objective C architecture, I&#39;m all ears, but I don&#39;t have hours a day to devote to this either. What is your idea of what I should have read before I started coding simple apps? I&#39;m genuinely curious."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1431529987, "post_id": 30218632, "comment_id": 48541665, "body": "As far as I know Objective-C has the same requirements as C as far as declaring variables (and functions, and structs, etc.). You say &quot;run.localtions.array is an array of CLLocations&quot; - how does your compiler know that? Where did you write in your code that that was the case?"}, {"owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1431530288, "post_id": 30218632, "comment_id": 48541887, "body": "@mat Locations is an array of ordered many-to-one coordinate points that pairs with a Run ...both of these were created in Xcode making the classes based on a Core Data model. I&#39;ve been doing some objective c programming on and off for about 6 months, and what I still find confounding is when something like automagically generating core data classes runs into the need for malloc-ing a C style array. I am out of my depth and often feel like I&#39;m missing something in the leap back and forth between these tasks. I own 4 objective-c books, and none gets at this. Is every app maker a C programmer?"}, {"owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1431530728, "post_id": 30218632, "comment_id": 48542208, "body": "@trojanfoe I&#39;m disappointed. I don&#39;t want to be snippy but you just made a snide remark about my ignorance and then ignore my question about what exactly it was that I should have read but didn&#39;t. Like I said I have read 4 books of tutorials about objective c. You have to admit that&#39;s more than enough to code up lots of little apps. What exactly is the next step in your opinion? I&#39;m all ears, but you don&#39;t actually offer useful criticism here."}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1431537348, "post_id": 30218632, "comment_id": 48546500, "body": "I ignored your question as I was not online. Declaring variables is common to both C and Objective-C (and almost every other language) and not knowing that indicated to me that you had just jumped right in and not studied."}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": true, "score": 1, "last_activity_date": 1431530353, "creation_date": 1431530353, "answer_id": 30219066, "question_id": 30218632, "link": "https://stackoverflow.com/questions/30218632/how-to-declare-c-style-arrays-in-objective-c-app/30219066#30219066", "title": "How to declare C style arrays in objective-c app?", "body": "<p><code>points</code> is an array of <code>CLLocationCoordinate2D</code> (dynamically allocated) so it should be a pointer to <code>CLLocationCoordinate2D</code> i.e.</p>\n\n<pre><code>CLLocationCoordinate2D *points;\n</code></pre>\n\n<p><code>velocity</code> is an array of <code>float</code> so it should be declared as</p>\n\n<pre><code>float *velocity;\n</code></pre>\n\n<p>Alternatively you can do this</p>\n\n<pre><code>float velocity[];\n</code></pre>\n\n<p>if you prefer array syntax.</p>\n"}], "owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 30219066, "answer_count": 1, "score": 0, "last_activity_date": 1431531048, "creation_date": 1431529182, "last_edit_date": 1431531048, "question_id": 30218632, "link": "https://stackoverflow.com/questions/30218632/how-to-declare-c-style-arrays-in-objective-c-app", "title": "How to declare C style arrays in objective-c app?", "body": "<p>I have two NSArrays, one of CLLocation and one of doubles (encased in objects) that I need to write to C vectors to draw a gradient MKPolyline as defined here (<a href=\"https://github.com/wdanxna/GradientPolyline\" rel=\"nofollow\">https://github.com/wdanxna/GradientPolyline</a>). I tried to copy some of the code I saw there in preparation to call one of its functions:</p>\n\n<pre><code>points = malloc(sizeof(CLLocationCoordinate2D)*self.run.locations.array.count);\nvelocity = malloc(sizeof(float)*self.run.locations.array.count);\n\nfor(int i = 0; i&lt;self.run.locations.array.count; i++){\n    points[i] = self.run.locations.array[i];\n    velocity[i] = [velocities[i] floatValue];\n}\n</code></pre>\n\n<p>Here self.run.locations.array is an array of <code>CLLocations</code>. </p>\n\n<p>Right now I can't even build the project because I have not declared the variables. But where/how do I declare these variables? I don't know C, and the project I am trying to use doesn't seem to include these declarations in a place I can find them. </p>\n"}, {"tags": ["c", "string", "return"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1431528535, "post_id": 30218210, "comment_id": 48540504, "body": "Please avoid using many identical names. It is very confusing. And use <code>char *SecuCode = (char*)&amp;SecCode;</code> instead of <code>char *SecuCode = SecCode;</code>. It won&#39;t solve your problem though."}, {"owner": {"reputation": 49, "user_id": 4896168, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153342517268824/picture?type=large", "display_name": "Naz Haque", "link": "https://stackoverflow.com/users/4896168/naz-haque"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1431529737, "post_id": 30218210, "comment_id": 48541481, "body": "I didn&#39;t do what you said I did. Thanks for the naming advice though."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431531545, "post_id": 30218210, "comment_id": 48542790, "body": "Please don&#39;t write <code>char</code> as <code>Char</code>. They&#39;re two different identifiers. (I&#39;ve edited your question.)"}, {"owner": {"reputation": 49, "user_id": 4896168, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153342517268824/picture?type=large", "display_name": "Naz Haque", "link": "https://stackoverflow.com/users/4896168/naz-haque"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431538646, "post_id": 30218210, "comment_id": 48547239, "body": "@KeithThompson Sorry I didn&#39;t realise they are different. I only really know C and (to a lesser extent) Java."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1431538735, "post_id": 30218210, "comment_id": 48547300, "body": "Both C and Java are case-sensitive."}, {"owner": {"reputation": 49, "user_id": 4896168, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153342517268824/picture?type=large", "display_name": "Naz Haque", "link": "https://stackoverflow.com/users/4896168/naz-haque"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436127027, "post_id": 30218210, "comment_id": 50467673, "body": "@KeithThompson Since it was the title to a question, I didn&#39;t think it mattered. Thanks for editing."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4896168, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153342517268824/picture?type=large", "display_name": "Naz Haque", "link": "https://stackoverflow.com/users/4896168/naz-haque"}, "edited": false, "score": 0, "creation_date": 1431528837, "post_id": 30218312, "comment_id": 48540732, "body": "Ah yes I see, I will move SecCode[SECCODELENGTH] to the first function and see what happens. Why does it work if I call the print statement though?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 49, "user_id": 4896168, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153342517268824/picture?type=large", "display_name": "Naz Haque", "link": "https://stackoverflow.com/users/4896168/naz-haque"}, "edited": false, "score": 0, "creation_date": 1431528891, "post_id": 30218312, "comment_id": 48540771, "body": "@NazHaque When you have undefined behavior in your code anything might happen. Luckily it works sometimes and sometimes it doesn;t"}, {"owner": {"reputation": 49, "user_id": 4896168, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153342517268824/picture?type=large", "display_name": "Naz Haque", "link": "https://stackoverflow.com/users/4896168/naz-haque"}, "edited": false, "score": 0, "creation_date": 1431529147, "post_id": 30218312, "comment_id": 48540986, "body": "Thank you very much Gopi, I would&#39;ve never seen it if you hadn&#39;t pointed it out."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 49, "user_id": 4896168, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153342517268824/picture?type=large", "display_name": "Naz Haque", "link": "https://stackoverflow.com/users/4896168/naz-haque"}, "edited": false, "score": 0, "creation_date": 1431529257, "post_id": 30218312, "comment_id": 48541075, "body": "@NazHaque no probs.. :)"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 4, "last_activity_date": 1431528405, "creation_date": 1431528405, "answer_id": 30218312, "question_id": 30218210, "link": "https://stackoverflow.com/questions/30218210/char-disappears-if-i-dont-print-it/30218312#30218312", "title": "char * disappears if I don&#39;t print it?", "body": "<pre><code> char        SecCode[SECCODELENGTH];\n char        *SecuCode = (char*)&amp;SecCode;\n</code></pre>\n\n<p><code>SecCode</code> is a local array to function <code>getSecCode()</code> and you return the address of this local array which will lead to undefined behavior.</p>\n"}], "owner": {"reputation": 49, "user_id": 4896168, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153342517268824/picture?type=large", "display_name": "Naz Haque", "link": "https://stackoverflow.com/users/4896168/naz-haque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 30218312, "answer_count": 1, "score": 1, "last_activity_date": 1431531498, "creation_date": 1431528171, "last_edit_date": 1431531498, "question_id": 30218210, "link": "https://stackoverflow.com/questions/30218210/char-disappears-if-i-dont-print-it", "title": "char * disappears if I don&#39;t print it?", "body": "<p>I have a very odd problem here. I basically have a function which takes in a <code>char*</code> and it splits the string and returns the substring. My problem is if I print length of the <code>char*</code> THEN return it then the value remains but if I don't call the function to get the length then when it comes out of the function it disappears.</p>\n\n<p>I've probably explained it poorly above so I'll copy and paste segments of the code below:</p>\n\n<pre><code>void processFile (char *currentLine, int currentLineNumber)\n{\n    int     type;\n\n    char    *accountName, *secCodeRef, *secCode = NULL, *reference = NULL;\n\n    if ((type = getType(currentLine)) == TYPE_HEADER)\n    {\n        accountName = strtok (currentLine, \" \"); //Remove \"Type\"\n\n        accountName = strtok (NULL, \" \");   //Get Account Name\n        secCodeRef = strtok (NULL, \" \");    //get Security code and reference\n        secCode = getSecCode(secCodeRef, secCode); //Get Security Code\n        printf(\"TEST:%s\\n\", secCode);\n\n    }\n</code></pre>\n\n<p>Basically <code>secCodeRef</code> is a string that contains <strong>both</strong> the security code and the reference (.e.g.) GB0007980592REFERENCE1. The first 11 characters are the security code and the rest is the reference. So I pass this string into a function called <code>getSecCode</code>: (<code>SECCODELENGTH</code> is 13 btw)</p>\n\n<pre><code>char *getSecCode (char *secCodeRef, char *secCode)\n{\n    char        SecCode[SECCODELENGTH];\n    char        *SecuCode = (char*)&amp;SecCode;\n\n    memcpy(SecCode, &amp;secCodeRef[START], SECCODELENGTH-1);\n\n    SecCode[SECCODELENGTH-1] = '\\0';\n\n    printf(\"%d\\n\", getStringLength(SecuCode));\n\n    return SecuCode;\n\n}\n</code></pre>\n\n<p>It extracts <code>SecuCode</code> ok when this line runs:</p>\n\n<pre><code>printf(%d\\n, getStringLength(SecuCode));\n</code></pre>\n\n<p>The result is: (I'm reading from a file btw with different data in it)</p>\n\n<pre><code>12\nTEST:GB0007980592\n12\nTEST:GB0007980593\n12\nTEST:GB0007980594\n</code></pre>\n\n<p>Which is correct</p>\n\n<p>But when I comment out:</p>\n\n<pre><code>//printf(%d\\n, getStringLength(SecuCode));\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>TEST:\nTEST:\nTEST:\n</code></pre>\n\n<p>Why does the print statement affect the return value at all?</p>\n"}, {"tags": ["c", "uart", "obd-ii"], "answers": [{"tags": [], "owner": {"reputation": 3773, "user_id": 415982, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0eb264642f00d1ee59eab2d64746892?s=128&d=identicon&r=PG", "display_name": "DrMickeyLauer", "link": "https://stackoverflow.com/users/415982/drmickeylauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1477409343, "last_edit_date": 1477409343, "creation_date": 1469194883, "answer_id": 38528000, "question_id": 30217669, "link": "https://stackoverflow.com/questions/30217669/problems-in-getting-rpm-message-from-obd2/38528000#38528000", "title": "Problems in getting RPM message from OBD2", "body": "<p>Chances are you have a faulty OBD2 adapter or you don't have the ignition on or your car speaks a l1/l2 protocol that your adapter does not support.</p>\n\n<p>Make sure to issue <code>ATSP0\\r\\n</code> before <code>0100\\r\\n</code>. If you still don't get any answer and ignition and/or engine is on, then check with another OBD2 adapter.</p>\n"}], "owner": {"reputation": 99, "user_id": 1278623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771457fce607ab7758c53856f5175a0d?s=128&d=identicon&r=PG", "display_name": "Vugar", "link": "https://stackoverflow.com/users/1278623/vugar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1477409343, "creation_date": 1431526881, "last_edit_date": 1431570267, "question_id": 30217669, "link": "https://stackoverflow.com/questions/30217669/problems-in-getting-rpm-message-from-obd2", "title": "Problems in getting RPM message from OBD2", "body": "<p>I am new in OBD2 programming. I have my device connected through serial port to OBD2. I try request RPM or Speed messages and getting \"SEARCHING...\" or \"NO CONNECT\" messages instead of a RPM/Speed values. I tried to send \"ATZ\" and even \"ATSP00\" commands before the RPM/Speed request, but it still the same issue.<br>\nWhat am I doing wrong?</p>\n"}, {"tags": ["python", "c", "dictionary", "python-c-api"], "answers": [{"tags": [], "owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "is_accepted": true, "score": 2, "last_activity_date": 1431527114, "last_edit_date": 1431527114, "creation_date": 1431527063, "answer_id": 30217742, "question_id": 30217561, "link": "https://stackoverflow.com/questions/30217561/convert-python-dictionary-into-c-like-structure/30217742#30217742", "title": "Convert Python dictionary into C like structure", "body": "<p>You can use <a href=\"https://docs.python.org/2/c-api/dict.html#c.PyDict_GetItem\" rel=\"nofollow\"><code>PyDict_GetItem()</code></a> for that:</p>\n\n<pre><code>PyObject* pytab1 = PyDict_GetItemString(dict, \"Tab1\");\n</code></pre>\n\n<p>Since the result is a list, you can use <a href=\"https://docs.python.org/2/c-api/list.html\" rel=\"nofollow\">these</a> calls to examine it</p>\n\n<p><a href=\"https://docs.python.org/2/c-api/concrete.html#numeric-objects\" rel=\"nofollow\">This documentation</a> explains how to convert primitive types between C and Python.</p>\n"}], "owner": {"reputation": 171, "user_id": 4317777, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/744e7bc832975dda76ed778dc693fa43?s=128&d=identicon&r=PG&f=1", "display_name": "SOCKet", "link": "https://stackoverflow.com/users/4317777/socket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1681, "favorite_count": 0, "accepted_answer_id": 30217742, "answer_count": 1, "score": 0, "last_activity_date": 1431677295, "creation_date": 1431526615, "last_edit_date": 1431527322, "question_id": 30217561, "link": "https://stackoverflow.com/questions/30217561/convert-python-dictionary-into-c-like-structure", "title": "Convert Python dictionary into C like structure", "body": "<p>I am a newbie in Python and C and I would like to know how to put dictionary elements into a C like structure (struct).</p>\n\n<p>For example, here is my structure:</p>\n\n<pre><code>typedef struct\n{\n    int dim;\n    float *Tab1;\n    float *Tab2;\n}  \nTableaux;\n</code></pre>\n\n<p>Here is my dictionary in Python:</p>\n\n<pre><code>Tableaux = {}\nTableaux[\"dim\"]=None\nTableaux[\"Tab1\"]=[]\nTableaux[\"Tab2\"]=[]\n</code></pre>\n\n<p>Here is my interface function:</p>\n\n<pre><code>static PyObject* py_initTab(PyObject* self, PyObject* args)\n{\n    PyObject* dict;\n    Tableaux Tab;\n    if (!PyArg_ParseTuple(args, \"O!\", &amp;dict))  \n        return NULL;        \n\n     Tab.Tab1=dict[\"Tab1\"]; // How could I do something like that?      \n\n     return Py_BuildValue(\"\");\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "ncurses"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1431526357, "post_id": 30217163, "comment_id": 48538633, "body": "What are you trying to achieve exactly ?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1431526530, "post_id": 30217163, "comment_id": 48538783, "body": "Wrap each <code>case</code> with <code>{</code> and <code>}</code> and use the arrays from each <code>case</code>."}, {"owner": {"reputation": 663, "user_id": 2356536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rO4xS.jpg?s=128&g=1", "display_name": "Pablo De Luca", "link": "https://stackoverflow.com/users/2356536/pablo-de-luca"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1431526582, "post_id": 30217163, "comment_id": 48538837, "body": "I want to make this program to practice, only with that aim :) @MichaelWalz"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1431648559, "post_id": 30217163, "comment_id": 48599424, "body": "I think what you&#39;re trying to do is declare <code>matriz</code> with a different type depending on user input and then (presumably) use <code>matriz</code> to actually do something later.  There ways to get something sort of like this in C but it will be far more complicated than what you&#39;re probable looking for."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1431648608, "post_id": 30217163, "comment_id": 48599438, "body": "also, I&#39;d recommend you use <code>printf</code> or <code>puts</code> instead of using <code>printw</code> (from ncurses?)"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": -1, "last_activity_date": 1431529297, "creation_date": 1431529297, "answer_id": 30218665, "question_id": 30217163, "link": "https://stackoverflow.com/questions/30217163/array-of-type-that-user-enter/30218665#30218665", "title": "Array of type that user enter", "body": "<p>Typical case of type generic programming in C. It can be done but it is a bit burdensome:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#define ROWS 2\n#define COLS 3\n\n\ntypedef enum\n{\n  TYPE_INT,\n  TYPE_SHORT,\n  TYPE_CHAR,\n  TYPE_FLOAT\n} type_t;\n\n\ntypedef struct generic_t generic_t; // forward declaration, incomplete type\n\n// generic print function type\ntypedef void(*print_func_t ) (const generic_t* ptr, size_t row, size_t col);\n\ntypedef struct generic_t\n{\n  type_t        type;   // corresponding to selected data type\n  print_func_t  print_func;\n  void*         matrix2D;\n} generic_t;\n\n\n// specific print function just for float\nvoid print_float (const generic_t* ptr, size_t row, size_t col);\n\n\nint main()\n{\n  generic_t data;\n\n  // take user input etc, determine type selected\n\n  // lets assume they picked float\n  data.type = TYPE_FLOAT;\n  data.print_func = print_float;\n  data.matrix2D = malloc (ROWS*COLS*sizeof(float));\n\n  float some_data[2][3] =   // some random data:\n  {\n    {1, 2, 3}, \n    {4, 5, 6}, \n  };\n  memcpy(data.matrix2D, some_data, ROWS*COLS*sizeof(float));\n\n  for(size_t r=0; r&lt;ROWS; r++)\n  {\n    for(size_t c=0; c&lt;COLS; c++)\n    {\n      data.print_func(&amp;data, r, c);\n    }\n    printf(\"\\n\");\n  }\n\n  free(data.matrix2D);\n}\n\n\nvoid print_float (const generic_t* ptr, size_t row, size_t col)\n{\n  float(*fmatrix)[COLS] = ptr-&gt;matrix2D; // cast to a pointer to a 2D float array\n  printf(\"%f \", fmatrix[row][col]); // treat data as 2D array of float\n}\n</code></pre>\n\n<p>You can create similar functions depending on what you want to do with the data, one function for each possible type.</p>\n"}, {"tags": [], "owner": {"reputation": 8560, "user_id": 1633665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b603faf464ae55fcdd7dc2fb3b7ac063?s=128&d=identicon&r=PG", "display_name": "Virgile", "link": "https://stackoverflow.com/users/1633665/virgile"}, "is_accepted": false, "score": -1, "last_activity_date": 1431529753, "creation_date": 1431529753, "answer_id": 30218835, "question_id": 30217163, "link": "https://stackoverflow.com/questions/30217163/array-of-type-that-user-enter/30218835#30218835", "title": "Array of type that user enter", "body": "<p>As said in the comments, if you only wish to use <code>matriz</code> in each <code>case</code> independently from the others, you just have to put each <code>case</code>'s body inside its own block with <code>{</code> ... <code>}</code>. If on the contrary you want to access <code>matriz</code> in the whole body of your function, you have to declare it before the <code>switch</code>, and with a type that encompasses all possible uses. This is what <code>union</code>s are for.</p>\n\n<p>In the following example, <code>enum kind</code> is used to recall the choice of the user, while <code>union container</code> can store any of your four choices. Then, in the <code>main</code> function, based on the value of <code>k</code>, you can decide which type of value must be in the cells of <code>matriz</code>, and use the appropriate field of <code>union container</code> to access them.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst int rows = 3;\nconst int columns = 3;\n\nenum kind { INT, SHORT, CHAR, FLOAT };\nunion container { int ival; short sval; char cval; float fval; };\n\nint main() {\nenum kind k;\nunion container matriz[rows][columns];\nint h;\ndo{\n    scanf(\"%d\",&amp;h);\n    switch(h){\n      case 1:\n          k = INT;\n          break;\n      case 2:\n          k = SHORT;\n          break;\n      case 3:\n          k = CHAR;\n          break;\n      case 4:\n          k = FLOAT;\n          break;\n      default:\n        printf(\"\\nYou have to enter a number between 1 and 4 :)\\n\");\n        break;\n    }\n } while(h &gt; 4 || h &lt; 1);\n\n if (k == FLOAT) matriz[0][0].fval = 0.0;\n if (k == INT) matriz[0][0].ival = -1;\n if (k == SHORT) matriz[0][0].sval = 2;\n if (k == CHAR) matriz[0][0].cval = 'a';\n\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 2356536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rO4xS.jpg?s=128&g=1", "display_name": "Pablo De Luca", "link": "https://stackoverflow.com/users/2356536/pablo-de-luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1431760968, "creation_date": 1431525638, "last_edit_date": 1431760968, "question_id": 30217163, "link": "https://stackoverflow.com/questions/30217163/array-of-type-that-user-enter", "title": "Array of type that user enter", "body": "<p>I write: </p>\n\n<pre><code>printw(\"\\nNow, Which is the type of data to be saved?\\n\");\nprintw(\"\\n1- Integer\\n2- Short-integer\\n3- Char\\n4- Float\\n\");\nprintw(\"\\nSelect the number of the option (1-4)\\n\");\n\ndo{\n    scanf(\"%d\",&amp;h);\n    switch(h){\n        case 1:\n            int matriz[rows][columns];\n            break;\n        case 2:\n            short int matriz[rows][columns];\n            break;\n        case 3:\n            char matriz[rows][columns];\n            break;\n        case 4:\n            float matriz[rows][columns];\n            break;\n        default:\n            printw(\"\\nYou have to enter a number between 1 and 4 :)\\n\");\n            break;\n\n\n    }\n}while(h &gt; 4 || h &lt; 1);\n</code></pre>\n\n<p>(Previously I defined h, rows, colunmns and I am using ncurses)</p>\n\n<p>I want to do an array of the type that user wants. But I realized that this isn't the way.</p>\n"}, {"tags": ["c", "file", "posix"], "comments": [{"owner": {"reputation": 8293, "user_id": 3460805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c7Zi7.jpg?s=128&g=1", "display_name": "Chnossos", "link": "https://stackoverflow.com/users/3460805/chnossos"}, "edited": false, "score": 5, "creation_date": 1431524574, "post_id": 30216643, "comment_id": 48537166, "body": "Loop through the files as you currently do and process only those whose name finishes with the specific extension you chose ?"}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 1, "creation_date": 1431524696, "post_id": 30216643, "comment_id": 48537270, "body": "Use a <code>for</code> loop in conjunction with <code>sscanf</code>.  You could do something like count the number of &#39;.&#39; characters in the file name, then if everything after the last one read &quot;txt&quot;, print the whole file name."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 2, "creation_date": 1431524984, "post_id": 30216643, "comment_id": 48537518, "body": "i think you are looking for <a href=\"http://linux.die.net/man/3/glob\" rel=\"nofollow noreferrer\">linux.die.net/man/3/glob</a>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1431525021, "post_id": 30216643, "comment_id": 48537553, "body": "<b><i><a href=\"http://stackoverflow.com/q/8149569/645128\">Look Here</a></i></b>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1431525180, "post_id": 30216643, "comment_id": 48537674, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4204666/how-to-list-files-in-a-directory-in-a-c-program\">How to list files in a directory in a C program?</a>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1431531696, "post_id": 30216643, "comment_id": 48542893, "body": "@LPs: not of that particular question, the OP already got that far."}], "answers": [{"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1431531805, "post_id": 30217011, "comment_id": 48542983, "body": "Isn&#39;t it more advisable to use a case indifferent compare? Or is that too OS dependent? (On Windows, <code>&quot;.txt&quot; == &quot;.TXT&quot;</code> but my own Mac has two modes for this -- and I can never recall which one is for what.)"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432036247, "post_id": 30217011, "comment_id": 48744021, "body": "@Jongware Indeed it is."}], "tags": [], "owner": {"reputation": 1581, "user_id": 4788085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8412430be42932ed20e55d7b1400356a?s=128&d=identicon&r=PG&f=1", "display_name": "Moldova", "link": "https://stackoverflow.com/users/4788085/moldova"}, "is_accepted": true, "score": 2, "last_activity_date": 1431525314, "creation_date": 1431525314, "answer_id": 30217011, "question_id": 30216643, "link": "https://stackoverflow.com/questions/30216643/how-to-list-all-the-txt-files-in-the-current-directory/30217011#30217011", "title": "how to list all the .txt files in the current directory?", "body": "<p>Just check the filename before you print it.</p>\n\n<pre><code>  DIR *p;\n  struct dirent *pp;     \n  p = opendir (\"./\");\n\n  if (p != NULL)\n  {\n    while ((pp = readdir (p))!=NULL) {\n      int length = strlen(pp-&gt;d_name);\n      if (strncmp(pp-&gt;d_name + length - 4, \".txt\", 4) == 0) {\n          puts (pp-&gt;d_name);\n      }\n    }\n\n    (void) closedir (p);\n  }\n</code></pre>\n\n<p>Incidentally you were also calling <code>closedir()</code> on your <code>dirent</code> (pp) rather than your <code>DIR *</code> (p).</p>\n"}], "owner": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3140, "favorite_count": 0, "accepted_answer_id": 30217011, "answer_count": 1, "score": 0, "last_activity_date": 1431532167, "creation_date": 1431524411, "last_edit_date": 1431532167, "question_id": 30216643, "link": "https://stackoverflow.com/questions/30216643/how-to-list-all-the-txt-files-in-the-current-directory", "title": "how to list all the .txt files in the current directory?", "body": "<p>I do know how to read all the files from the current directory by opening directory <code>\"./\"</code> and then using <code>readdir</code>. But, how do I list only <code>.txt</code> files or any other specific extension?</p>\n\n<pre><code>  DIR *p;\n  struct dirent *pp;     \n  p = opendir (\"./\");\n\n  if (p != NULL)\n  {\n    while ((pp = readdir (p))!=NULL)\n      puts (pp-&gt;d_name);\n\n    (void) closedir (pp);\n  }\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "debugging"], "comments": [{"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 0, "creation_date": 1431523769, "post_id": 30216217, "comment_id": 48536402, "body": "Are you saying when you run the program, it doesnt work properly as in it crashes in some way? Or does it not output the correct info?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431523774, "post_id": 30216217, "comment_id": 48536405, "body": "Suggestion: <code>void main()</code> --&gt; <code>int main(void)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4810973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7784d571be3cf81429203fb6d02af4b7?s=128&d=identicon&r=PG&f=1", "display_name": "user4810973", "link": "https://stackoverflow.com/users/4810973/user4810973"}, "edited": false, "score": 1, "creation_date": 1431529567, "post_id": 30216315, "comment_id": 48541359, "body": "It is very kind of you! That ,the information you offered, is  really helpful!"}], "tags": [], "owner": {"reputation": 10835, "user_id": 1155650, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f5b5fc0510580f9c682927f135f6d201?s=128&d=identicon&r=PG", "display_name": "Rohit Vipin Mathews", "link": "https://stackoverflow.com/users/1155650/rohit-vipin-mathews"}, "is_accepted": false, "score": 0, "last_activity_date": 1431524039, "last_edit_date": 1495540327, "creation_date": 1431523687, "answer_id": 30216315, "question_id": 30216217, "link": "https://stackoverflow.com/questions/30216217/program-doesnt-work-when-rrun-normally-but-with-debug-step-by-step-the-result/30216315#30216315", "title": "Program doesn&#39;t work when rrun normally, but with debug step by step the result is right", "body": "<p>Random wont be random enough if you access it again and again repeatedly in the time of CPU cycles. To read more about rand please read <a href=\"http://eternallyconfuzzled.com/arts/jsw_art_rand.aspx\" rel=\"nofollow noreferrer\">this</a> page. </p>\n\n<blockquote>\n  <p>The <strong>period</strong> of rand is implementation defined, but typically falls\n  around 2^32-1. Compare this with the Mersenne Twister algorithm, which\n  is 2^19937-1. You typically want the period of a random number\n  generator to exceed the amount of numbers expected to be generated,\n  because that's the point where the sequence repeats.</p>\n</blockquote>\n\n<p>From another answer in SO (<a href=\"https://stackoverflow.com/a/10259041/1155650\">source link</a>): </p>\n\n<blockquote>\n  <p>Don't call srand before every call to rand. Call it once when your\n  program starts.</p>\n</blockquote>\n\n<p>You may want to look at this <a href=\"https://stackoverflow.com/questions/10259028/rand-is-not-returning-random-values\">SO question</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 4810973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7784d571be3cf81429203fb6d02af4b7?s=128&d=identicon&r=PG&f=1", "display_name": "user4810973", "link": "https://stackoverflow.com/users/4810973/user4810973"}, "edited": false, "score": 0, "creation_date": 1431529210, "post_id": 30216418, "comment_id": 48541036, "body": "Thanks a lot ,but I changed my codes as your direction,it still can not work."}, {"owner": {"reputation": 49, "user_id": 4810973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7784d571be3cf81429203fb6d02af4b7?s=128&d=identicon&r=PG&f=1", "display_name": "user4810973", "link": "https://stackoverflow.com/users/4810973/user4810973"}, "edited": false, "score": 1, "creation_date": 1431529458, "post_id": 30216418, "comment_id": 48541263, "body": "sorry for my last commit .Follow your advice ,it really works.after i have checked my code carefully ,i found i forget a &quot;()&quot;to use function &quot;randfoo()&quot;.Thanks again!"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1431523899, "creation_date": 1431523899, "answer_id": 30216418, "question_id": 30216217, "link": "https://stackoverflow.com/questions/30216217/program-doesnt-work-when-rrun-normally-but-with-debug-step-by-step-the-result/30216418#30216418", "title": "Program doesn&#39;t work when rrun normally, but with debug step by step the result is right", "body": "<p>You used <code>srand(randdata);</code> on each call to <code>randfoo()</code>. <code>srand()</code> is used to <em>seed</em> the PRNG for <code>rand()</code>. You don't seed it every time.</p>\n\n<p>Just use <code>srand(randdata)</code> once in <code>main()</code> and <code>rand() % 100</code> directly in all the assignments.</p>\n\n<p>You can get rid of the whole <code>randfoo()</code> function, IMHO.</p>\n"}, {"tags": [], "owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "is_accepted": false, "score": 0, "last_activity_date": 1431524524, "creation_date": 1431524524, "answer_id": 30216687, "question_id": 30216217, "link": "https://stackoverflow.com/questions/30216217/program-doesnt-work-when-rrun-normally-but-with-debug-step-by-step-the-result/30216687#30216687", "title": "Program doesn&#39;t work when rrun normally, but with debug step by step the result is right", "body": "<p>It may be useful to explain the reason it \"works\" when you debug it and \"doesn't work\" when you run it. </p>\n\n<p>When you run it normally it executes in much less time than 1 second. Thus, the <code>time()</code> function always returns the same time (unless you get very lucky and run it exactly on a second boundary) and thus you call <code>srand()</code> with the same value and so <code>rand()</code> returns the same value for each call to <code>randfoo()</code>.</p>\n\n<p>When you debug it, however, it probably takes a few seconds between calls to <code>randfoo()</code> thus you get different <code>time()</code> values, which seeds the pseudo-random generator with different values, and thus different <code>rand()</code> values.</p>\n\n<p>A great example of a <a href=\"http://en.wikipedia.org/wiki/Heisenbug\" rel=\"nofollow\">Heisenbug</a>, a bug that disappears when you try to find it. The solution, as the other answers say, is to simply call <code>srand()</code> once at the program start.</p>\n"}], "owner": {"reputation": 49, "user_id": 4810973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7784d571be3cf81429203fb6d02af4b7?s=128&d=identicon&r=PG&f=1", "display_name": "user4810973", "link": "https://stackoverflow.com/users/4810973/user4810973"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1431750000, "creation_date": 1431523476, "last_edit_date": 1431750000, "question_id": 30216217, "link": "https://stackoverflow.com/questions/30216217/program-doesnt-work-when-rrun-normally-but-with-debug-step-by-step-the-result", "title": "Program doesn&#39;t work when rrun normally, but with debug step by step the result is right", "body": "<p>In the code below, which I wrote on visual studio 2013, I pressed <kbd>Ctrl</kbd>+<kbd>F5</kbd> but don't print the right result, I debug it step by step the results is right.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdint.h&gt;\n\nint randfoo(void)\n{\ntime_t ts;\nint a[10];\nunsigned int randdata = time(&amp;ts);\nsrand(randdata);\nreturn (rand() % 100);\n\n}\n\nint randNumber(int  firstNum, int  lastNumber, int result[][6])\n{\nint ret_val = -1;\nint value1;\n\nif ((firstNum &gt; 0) &amp;&amp; (firstNum &lt; 5))\n{\n    if ((lastNumber&gt;0) &amp;&amp; (lastNumber &lt; 7))\n    {\n        for (int i = 0; i &lt; firstNum; i++)\n        {\n\n            for (int j = 0; j &lt; lastNumber; j++)\n            {\n                value1 = randfoo();\n                result[i][j] = value1;\n                printf(\"a[%d][%d]=%d\\n\", i, j, result[i][j]);\n\n            }\n        }\n        ret_val = 0;\n    }\n    else\n    {\n        ret_val = -1;\n    }\n}\nelse\n{\n    ret_val = -1;\n}\nreturn ret_val;\n }\n\nvoid main()\n{\nint buff[4][6];\nrandNumber(4, 6, buff);\n\nsystem(\"pause\");\n}\n</code></pre>\n\n<p>the first function randfoo just  to generate a rand number.\nthe second function  randNumber in order to put the rand number into the result[4][6],and print the results.</p>\n"}, {"tags": ["c", "modulus"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1431523331, "post_id": 30216062, "comment_id": 48536063, "body": "Reall not clear for me: could you explain better your problem?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1431523399, "post_id": 30216062, "comment_id": 48536120, "body": "Hint: <code>(a + b) mod c == ((a mod c) + (b mod c)) mod c</code>, and similar for multiplication."}, {"owner": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1431523708, "post_id": 30216062, "comment_id": 48536353, "body": "@molbdnilo, Yeah, I have tried this two properties of multiplication and additions. But, getting wrong results. Maybe applied on wrong places"}, {"owner": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1431523952, "post_id": 30216062, "comment_id": 48536589, "body": "@LPs, I have edited some part. please reconsider"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1431524110, "post_id": 30216062, "comment_id": 48536741, "body": "@SurajeetBharati Post your attempt, along with your values for <code>k</code>, <code>N</code>, and the expected and actual output."}, {"owner": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1431524244, "post_id": 30216062, "comment_id": 48536870, "body": "@molbdnilo, ok. I am editing"}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1431524855, "post_id": 30216062, "comment_id": 48537403, "body": "I believe that there is a Gnu Extended Integer system that you can use, which is what things like Python use to do stuff with very large numbers."}, {"owner": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "reply_to_user": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1431525497, "post_id": 30216062, "comment_id": 48537937, "body": "@Gophyr,  I am not allowed to use any extended system"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431526524, "post_id": 30216062, "comment_id": 48538776, "body": "@SurajeetBharati, your updated code does not take much advantage of molbdnilo&#39;s hint.  You are fighting with integer overflow, and you must avoid it <i>ever</i> occurring.  Additional hint: adding two <code>n</code>-digit numbers produces a number of up to <code>n+1</code> digits, and multiplying an <code>n</code>-digit number by an <code>m</code>-digit number produces a result with up to <code>n + m</code> digits."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431526683, "post_id": 30216062, "comment_id": 48538921, "body": "@SurajeetBharati, consider, however, what happens when your <code>N</code> is near its upper bound.  If you have a short time limit on the computation, then performing billions of arithmetic operations is unlikely to be adequately performant."}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1431531249, "post_id": 30216062, "comment_id": 48542592, "body": "@SurajeetBharati Then just write your own system XD  On a serious note, perhaps you could just do something like write a function to approximate the size of the number, and if it exceeds a certain size, then divide it up between two integers.  Say, one integer holding 10^0 through 10^5, and another holding 10^5 through 10^10, etc."}], "answers": [{"tags": [], "owner": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "is_accepted": true, "score": 2, "last_activity_date": 1431529598, "last_edit_date": 1495539825, "creation_date": 1431529241, "answer_id": 30218644, "question_id": 30216062, "link": "https://stackoverflow.com/questions/30216062/modulo-arithmetic-steps-for-this-program/30218644#30218644", "title": "modulo arithmetic steps for this program", "body": "<p>Let's look at a small example:</p>\n\n<pre><code>mb = (k*b + k*(k-1)*a*a)%MOD;\n</code></pre>\n\n<p>Here, <code>k*b</code>, <code>k*(k-1)*a*a</code> can overflow, so can the sum, taking into account</p>\n\n<pre><code>(x + y) mod m = (x mod m + y mod m) mod m\n</code></pre>\n\n<p>we can rewrite this (<code>x= k*b</code>, <code>y=k*(k-1)*a*a</code> and <code>m=MOD</code>)</p>\n\n<pre><code>mb = ((k*b) % MOD + (k*(k-1)*a*a) %MOD) % MOD\n</code></pre>\n\n<p>now, we could go one step futher. Since </p>\n\n<pre><code>x * y mod m = (x mod m * y mod m) mod m\n</code></pre>\n\n<p>we can also rewrite the multiplication <code>k*(k-1)*a*a % MOD</code> with with <code>x=k*(k-1)</code> and <code>y=a*a</code> to</p>\n\n<pre><code>((k*(k-1)) %MOD) * ((a*a) %MOD)) % MOD\n</code></pre>\n\n<p>I'm sure you can do the rest. While you can sprinkle <code>% MOD</code> all over the place, you should careful consider whether you need it or not, taking <a href=\"https://stackoverflow.com/questions/30216062/modulo-arithmetic-steps-for-this-program/30218644#comment48538776_30216062\">John's hint</a> into account:</p>\n\n<blockquote>\n  <p>Adding two n-digit numbers produces a number of up to n+1 digits, and\n  multiplying an n-digit number by an m-digit number produces a result\n  with up to n + m digits.</p>\n</blockquote>\n\n<p>As such, there are places where you will need use modulus properties, and there are some, where you surely don't need it, but this is your part of the work ;).</p>\n"}, {"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1431866923, "post_id": 30219402, "comment_id": 48671371, "body": "Um, that is C++ and the question is for C."}], "tags": [], "owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "is_accepted": false, "score": 0, "last_activity_date": 1431531282, "creation_date": 1431531282, "answer_id": 30219402, "question_id": 30216062, "link": "https://stackoverflow.com/questions/30216062/modulo-arithmetic-steps-for-this-program/30219402#30219402", "title": "modulo arithmetic steps for this program", "body": "<p>That's a good exercise to build a template class along these lines:</p>\n\n<pre><code>template &lt;int N&gt;\nclass modulo_int_t\n{\npublic:\n    modulo_int_t(int value) : value_(value % N) {}\n    modulo_int_t&lt;N&gt; operator+(const modulo_int_t&lt;N&gt; &amp;rhs)\n    {\n        return modulo_int_t&lt;N&gt;(value_ + rhs.value) ;\n    }\n    // fill in the other operations\nprivate:\n    int value_ ;\n} ;\n</code></pre>\n\n<p>Then write the operations using modulo_int_t&lt;1000000007> objects instead of int.\nDisclaimer: make use of long long where appropriate and take care of negative differencies...</p>\n"}], "owner": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 30218644, "answer_count": 2, "score": 1, "last_activity_date": 1431864055, "creation_date": 1431523142, "last_edit_date": 1431864055, "question_id": 30216062, "link": "https://stackoverflow.com/questions/30216062/modulo-arithmetic-steps-for-this-program", "title": "modulo arithmetic steps for this program", "body": "<p>I have written this code in <code>C</code> where each of <code>a,b,cc,ma,mb,mcc,N,k</code> are <code>int</code> . But as per specification of the problem , <code>N</code> and <code>k</code> could be as big as <code>10^9</code> . <code>10^9</code> can be stored within a <code>int</code> variable in my machine. But internal and final value of of <code>a,b,cc,ma,mb,mcc</code> will be much bigger for bigger values of <code>N</code> and <code>k</code> which can not be stored even in a <code>unsigned long long int</code> variable. </p>\n\n<p>Now, I want to print value of <code>mcc % 1000000007</code> as you can see in the code. I know, some clever modulo arithmetic tricks in the operations of the body of the <code>for</code> loop can create correct output without any overflow and also can make the program time efficient. Being new in modulo arithmetic, I failed to solve this. Can someone point me out those steps? </p>\n\n<pre><code>ma=1;mb=0;mcc=0;\nfor(i=1; i&lt;=N; ++i){\n    a=ma;b=mb;cc=mcc;\n    ma = k*a + 1;\n    mb = k*b + k*(k-1)*a*a;\n    mcc = k*cc + k*(k-1)*a*(3*b+(k-2)*a*a);\n}\nprintf(\"%d\\n\",mcc%1000000007);\n</code></pre>\n\n<p><strong>My attempt:</strong></p>\n\n<p>I used <code>a,b,cc,ma,mb,mcc</code> as <code>long long</code> and done this. Could it be optimized more ??</p>\n\n<pre><code>ma=1;mb=0;cc=0;\nok = k*(k-1);\nfor(i=1; i&lt;=N; ++i){\n    a=ma;b=mb;\n    as = (a*a)%MOD;\n\n    ma = (k*a + 1)%MOD;\n\n    temp1 = (k*b)%MOD;\n    temp2 = (as*ok)%MOD;\n    mb = (temp1+temp2)%MOD;\n\n    temp1 = (k*cc)%MOD;\n    temp2 = (as*(k-2))%MOD;\n    temp3 = (3*b)%MOD;\n    temp2 = (temp2+temp3)%MOD;\n    temp2 = (temp2*a)%MOD;\n    temp2 = (ok*temp2)%MOD;\n    cc = (temp1 + temp2)%MOD;\n}\nprintf(\"%lld\\n\",cc);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1431525255, "post_id": 30215728, "comment_id": 48537742, "body": "<code>scanf(&quot;%s&quot;,arr[i]);</code> --&gt; <code>scanf(&quot;%c&quot;,&amp;arr[i]);</code> , <code>arr1[i]=arr[i];</code> --&gt; <code>arr1[i]=arr[i]-&#39;0&#39;;</code> , <code>int arr1[10],i;</code> --&gt; <code>int arr1[10]={0},i;</code>. If this doesn&#39;t work as expected, you need to clarify your question and add more details on what you want as the output (with an example to clarify things)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4851798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02caccd0e6981e73a8e1d604a5df268?s=128&d=identicon&r=PG&f=1", "display_name": "Sutanu", "link": "https://stackoverflow.com/users/4851798/sutanu"}, "edited": false, "score": 0, "creation_date": 1431523436, "post_id": 30215812, "comment_id": 48536149, "body": "Actually it should be &quot;all integer&quot;. Sir i changed the title."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 4851798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02caccd0e6981e73a8e1d604a5df268?s=128&d=identicon&r=PG&f=1", "display_name": "Sutanu", "link": "https://stackoverflow.com/users/4851798/sutanu"}, "edited": false, "score": 0, "creation_date": 1431523618, "post_id": 30215812, "comment_id": 48536279, "body": "@Sutanu then, there&#39;s another question, how do you tell <i>which</i> input was <code>int</code>? I mean, in that case, <code>isdigit</code> will fail and <code>arr1[i]</code> won&#39;t be assigned. You <b>must</b> initalize <code>arr1</code>, at least."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1431522835, "last_edit_date": 1431522835, "creation_date": 1431522530, "answer_id": 30215812, "question_id": 30215728, "link": "https://stackoverflow.com/questions/30215728/extract-integer-from-a-random-array/30215812#30215812", "title": "Extract integer from a random array", "body": "<p>The code shown here  invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>. The problems in your code:</p>\n\n<ol>\n<li><code>scanf()</code> requires a <em>pointer</em> type argument to store the scanned value.</li>\n<li><code>%s</code> is for <em>strings</em>, <code>%c</code> is for <code>char</code>.</li>\n<li>for <code>%c</code>, the <code>\\n</code> is <em>not</em> ignored. So, you've to use it like <code>\" %c\"</code> to avoid the trailing <em>newline</em>.</li>\n</ol>\n\n<p>However, I don't see any logic to \"extract <strong>only one</strong> integer from a random array\". You may need to check your logic once again.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>The recommended signature of <code>main()</code> is <code>int main(void)</code>.</li>\n<li>always initalize all your local variables.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 4851798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02caccd0e6981e73a8e1d604a5df268?s=128&d=identicon&r=PG&f=1", "display_name": "Sutanu", "link": "https://stackoverflow.com/users/4851798/sutanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437628333, "creation_date": 1431522366, "last_edit_date": 1437628333, "question_id": 30215728, "link": "https://stackoverflow.com/questions/30215728/extract-integer-from-a-random-array", "title": "Extract integer from a random array", "body": "<p>I have as input integer,cahr,symbol random array. I want to extract only integers from that array.</p>\n\n<p>For example: input is <code>[@56gY68#$&amp;*+7j^78gu5];</code></p>\n\n<p>output is <code>56 68 7 78 5</code></p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;ctype.h&gt;\nvoid main()\n{\n  char arr[10];\n  int arr1[10],i;\n  clrscr();\n  for(i=0;i&lt;10;i++)\n  {\n    scanf(\"%s\",arr[i]);\n  }\n  for(i=0;i&lt;10;i++){\n      if(isdigit(arr[i])){\n          arr1[i]=arr[i];\n      }\n  }\n  for(i=0;i&lt;10;i++){\n      printf(\"%d\",arr1[i]);\n  }\n  getch();\n}\n</code></pre>\n\n<p>The code fails to extract an integer. What do I need to change?</p>\n"}, {"tags": ["c", "file", "unix", "copy", "copy-paste"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431522018, "post_id": 30215462, "comment_id": 48535018, "body": "<code>char source_file[20]; ... source_file = argv[20];</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1431522229, "post_id": 30215462, "comment_id": 48535205, "body": "<code>fgets(target_file, 20 , stdin);</code> will leave a <code>newline</code> as a part of the filename."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1431525336, "creation_date": 1431525336, "answer_id": 30217023, "question_id": 30215462, "link": "https://stackoverflow.com/questions/30215462/how-to-get-the-source-files-the-file-which-i-want-to-copy-and-the-copied-file/30217023#30217023", "title": "how to get the source file&#39;s (the file which I want to copy) and the copied file&#39;s information in C", "body": "<p>I am unsure where your difficulty lies, apart from errors mentioned in comment. I've simplified your code, removing the bitfield masks as I don't have their definitions.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int ch;                                 // &lt;--- int not char\n    struct stat sb;\n    FILE *source, *target;\n\n    if (argc &lt; 3) {\n        printf(\"Enter two args: source and destination file names\\n\");\n        exit(EXIT_FAILURE);\n    }\n    source = fopen(argv[1], \"r\");\n    if( source == NULL ) {\n        printf(\"Press any key to exit...\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    target = fopen(argv[2], \"w\");\n    if( target == NULL ) {\n        fclose(source);\n        printf(\"Press any key to exit...\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    while( ( ch = fgetc(source) ) != EOF )\n        fputc(ch, target);\n    fclose(source);\n    fclose(target);\n    printf(\"File copied successfully.\\n\");\n\n    if (stat(argv[1], &amp;sb) == -1) {\n        perror(\"stat\");\n        exit(EXIT_SUCCESS);\n    }\n    printf(\"File %s type: 0x%04X Mode: 0x%04X\\n\", argv[1], (unsigned)sb.st_ino, (unsigned)sb.st_mode);\n\n    if (stat(argv[2], &amp;sb) == -1) {\n        perror(\"stat\");\n        exit(EXIT_SUCCESS);\n    }\n    printf(\"File %s type: 0x%04X Mode: 0x%04X\\n\", argv[2], (unsigned)sb.st_ino, (unsigned)sb.st_mode);\n\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>&gt;test test.c test2.c\nFile copied successfully.\nFile test.c type: 0x0000 Mode: 0x81B6\nFile test2.c type: 0x0000 Mode: 0x81B6\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4728257, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a8d3d00617275465c721e8fc43323249?s=128&d=identicon&r=PG&f=1", "display_name": "user4728257", "link": "https://stackoverflow.com/users/4728257/user4728257"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431525336, "creation_date": 1431521779, "question_id": 30215462, "link": "https://stackoverflow.com/questions/30215462/how-to-get-the-source-files-the-file-which-i-want-to-copy-and-the-copied-file", "title": "how to get the source file&#39;s (the file which I want to copy) and the copied file&#39;s information in C", "body": "<p>I want to get the source file information, when I want to copy the source file and then get the destination file information, when the source file has already being copied. The problem with the code is that I can't copy and get the source and destination file information. </p>\n\n<p>How could you be able to fix my code to copy a file and get source and destination information?</p>\n\n<p>Code:</p>\n\n<pre><code>#define BUFFER 100 // ** increased - file path can get pretty long\n#define BUFFERSIZE      4096\n#define COPYMODE        0644\n\nvoid oops(char *, char *);\nint file_exist(char *filename)\n{\n struct stat buffer;\n return (stat (filename, &amp;buffer) == 0);\n}\n\nint main(int argc, char *argv[])\n{\nchar ch, source_file[20], target_file[20];\nFILE *source, *target;\n\n //  printf(\"Enter name of file to copy\\n\");\n //  fgets(source_file, 20, stdin);\nsource_file = argv[20];\n source = fopen(source_file, \"r\");\n\n  if( source == NULL )\n  {\n  printf(\"Press any key to exit...\\n\");\n  exit(EXIT_FAILURE);\n  }\n\n  printf(\"Enter name of target file\\n\");\n  fgets(target_file, 20 , stdin);\n\n  target = fopen(target_file, \"w\");\n\n  if( target == NULL )\n  {\n  fclose(source);\n  printf(\"Press any key to exit...\\n\");\n  exit(EXIT_FAILURE);\n  }\n\n   while( ( ch = fgetc(source) ) != EOF )\n  fputc(ch, target);\n\n   printf(\"File copied successfully.\\n\");\n\n   fclose(source);\n   fclose(target);\n       struct stat sb;\n\n       if (argc != 2) {\n           fprintf(stderr, \"Usage: %s &lt;pathname&gt;\\n\", argv[0]);\n           exit(EXIT_FAILURE);\n       }\n\n       if (stat(argv[1], &amp;sb) == -1) {\n           perror(\"stat\");\n           exit(EXIT_SUCCESS);\n       }\n\n       printf(\"File type:                \");\n\n       switch (sb.st_mode &amp; S_IFMT) {\n       case S_IFBLK:  printf(\"block device\\n\");            break;\n       case S_IFCHR:  printf(\"character device\\n\");        break;\n       case S_IFDIR:  printf(\"directory\\n\");               break;\n       case S_IFIFO:  printf(\"FIFO/pipe\\n\");               break;\n       case S_IFLNK:  printf(\"symlink\\n\");                 break;\n       case S_IFREG:  printf(\"regular file\\n\");            break;\n       case S_IFSOCK: printf(\"socket\\n\");                  break;\n       default:       printf(\"unknown?\\n\");                break;\n       }\n\n       printf(\"I-node number:            %ld\\n\", (long) sb.st_ino);\n\n\n       exit(EXIT_SUCCESS);\n}   \n\nvoid oops(char *s1, char *s2)\n{\nfprintf(stderr,\"Error: %s \", s1);\nperror(s2);\nexit(1);\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "random", "srand"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 5, "creation_date": 1431521508, "post_id": 30215341, "comment_id": 48534632, "body": "What is <code>random()</code>? Maybe it is decoupled from <code>srand()</code>? Or did you mean to use <code>rand()</code>? You need <code>srandom()</code> to set the seed for <code>random()</code>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 10, "creation_date": 1431521521, "post_id": 30215341, "comment_id": 48534647, "body": "<code>srand</code> sets the seed for <code>rand</code>, not for <code>random</code>, for which there is <code>srandom</code>."}, {"owner": {"reputation": 254, "user_id": 2436087, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad60c81e65c6fd89ba6022032076f06f?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Bankosegger", "link": "https://stackoverflow.com/users/2436087/rafael-bankosegger"}, "edited": false, "score": 0, "creation_date": 1431521831, "post_id": 30215341, "comment_id": 48534864, "body": "Thanks oehm. That seems to work. Would you like to write an answer so that I can give you points?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1431531378, "post_id": 30215341, "comment_id": 48542680, "body": "Even if you were using the correct seeding, you still have the problem that you&#39;re only generating one number. There&#39;s no such thing as &quot;one randon number&quot;--what you will have is a hash function of the seed."}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 6, "last_activity_date": 1431522403, "creation_date": 1431522403, "answer_id": 30215756, "question_id": 30215341, "link": "https://stackoverflow.com/questions/30215341/c-srand-does-not-influence-random-number-generator/30215756#30215756", "title": "C: srand does not influence random number generator", "body": "<p>The standard random number generator in C is <code>rand()</code>, which can be seeded with <code>srand(seed)</code>.</p>\n\n<p>There is a second random number generator, <code>random()</code>. This random generator can be seeded with the function <code>srandom(seed)</code>. (These two generators use separate states, even if they share the same implementation.)</p>\n\n<p>So just pick the correct pair of seeding and RNG functions.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1487724891, "post_id": 30215847, "comment_id": 71910701, "body": "<code>srand</code> and <code>rand</code> are defined by the ISO C standard, and exist in all C implementations. <code>srandom</code> and <code>random</code> are defined by POSIX, and are less portable (but are likely to be of higher quality than <code>srand</code> / <code>rand</code>)."}], "tags": [], "owner": {"reputation": 79, "user_id": 4890543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgwHi.jpg?s=128&g=1", "display_name": "Pierre Podevin", "link": "https://stackoverflow.com/users/4890543/pierre-podevin"}, "is_accepted": true, "score": 4, "last_activity_date": 1431524211, "last_edit_date": 1431524211, "creation_date": 1431522611, "answer_id": 30215847, "question_id": 30215341, "link": "https://stackoverflow.com/questions/30215341/c-srand-does-not-influence-random-number-generator/30215847#30215847", "title": "C: srand does not influence random number generator", "body": "<p>Well, your problem here is due to multiple way of making random numbers in C with the standard libraries.</p>\n\n<p>Basically, there is two sets of functions to generate a random number :</p>\n\n<blockquote>\n  <p>From the rand(3) manual:</p>\n</blockquote>\n\n<pre><code>   #include &lt;stdlib.h&gt;\n\n   int rand(void);\n   int rand_r(unsigned int *seedp);\n   void srand(unsigned int seed);\n</code></pre>\n\n<blockquote>\n  <p>From the random(3) manual:</p>\n</blockquote>\n\n<pre><code>   #include &lt;stdlib.h&gt;\n\n   long int random(void);\n\n   void srandom(unsigned int seed);\n\n   char *initstate(unsigned int seed, char *state, size_t n);\n   char *setstate(char *state);\n</code></pre>\n\n<p>You should just pick the one that suit the best your need.\nI invite you to further read those manuals for more information ;-)</p>\n"}], "owner": {"reputation": 254, "user_id": 2436087, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad60c81e65c6fd89ba6022032076f06f?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Bankosegger", "link": "https://stackoverflow.com/users/2436087/rafael-bankosegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1507, "favorite_count": 0, "accepted_answer_id": 30215847, "answer_count": 2, "score": 3, "last_activity_date": 1432936753, "creation_date": 1431521447, "last_edit_date": 1432936753, "question_id": 30215341, "link": "https://stackoverflow.com/questions/30215341/c-srand-does-not-influence-random-number-generator", "title": "C: srand does not influence random number generator", "body": "<p>I have the following c code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char *argv[]) {\n  srand(time(NULL));\n  printf(\"%d\\n\", (int)random());\n  return 0;  \n}\n</code></pre>\n\n<p>To my understanding, this should print a different random number every time I execute the program because the random seed is dependent of the system time.</p>\n\n<p>But every time run the program, I get exactly the same output:</p>\n\n<pre><code>1804289383\n</code></pre>\n\n<p>I still get the same output when I put custom values as argument for srand:</p>\n\n<pre><code>srand(1);\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>srand(12345);\n</code></pre>\n\n<p>Does anyone have an Idea why this happens? Maybe it is because of my operating system (Mac OS 10.10.3)? Or the compiler I use (gcc)?</p>\n\n<p>Are there simple alternatives?</p>\n"}, {"tags": ["c", "pointers", "char"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1431521191, "post_id": 30215184, "comment_id": 48534383, "body": "Use <code>strlen</code> in the <code>malloc</code>."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1431521515, "post_id": 30215184, "comment_id": 48534641, "body": "You should also write <code>sizeof(*inputpath1)</code> and not <code>sizeof(inputpath1)</code>. Same for all others"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1431521657, "last_edit_date": 1431521657, "creation_date": 1431521232, "answer_id": 30215245, "question_id": 30215184, "link": "https://stackoverflow.com/questions/30215184/pointer-to-a-pointer-in-c/30215245#30215245", "title": "Pointer to a Pointer in C", "body": "<p>The variable <code>holder</code> is a pointer to a pointer to <code>char</code>, and you assign to it the result of <a href=\"http://en.cppreference.com/w/c/string/byte/strrchr\" rel=\"nofollow\"><code>strrchr</code></a>, a function that returns a pointer to <code>char</code>.</p>\n\n<p>That will make <code>holder</code> no longer point to the array entry, so when you do <code>holder++</code> it points somewhere else completely which leads to undefined behavior when you dereference <code>holder</code>. You then continue to pass <code>holder</code> to <a href=\"http://en.cppreference.com/w/c/string/byte/strncmp\" rel=\"nofollow\"><code>strncmp</code></a> which again will give you undefined behavior.</p>\n\n<p>The <code>holder</code> variable is not a character either, so you should not initialize it as one. If you want to initialize it you should initialize it to point to <code>NULL</code>.</p>\n\n<p>The things mentioned above should make the compiler shout warnings at you.</p>\n\n<hr>\n\n<p>Also, as noted in a comment by Cool Guy, if you want to get the length of a string you should use <a href=\"http://en.cppreference.com/w/c/string/byte/strlen\" rel=\"nofollow\"><code>strlen</code></a>. When you use <code>sizeof</code> you get the size of the <em>pointer</em> and not what it points to.</p>\n"}, {"tags": [], "owner": {"reputation": 2199, "user_id": 3248493, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/729b76d953fad3ff05b6cc752cb660db?s=128&d=identicon&r=PG&f=1", "display_name": "fandyushin", "link": "https://stackoverflow.com/users/3248493/fandyushin"}, "is_accepted": false, "score": 1, "last_activity_date": 1431521984, "creation_date": 1431521984, "answer_id": 30215535, "question_id": 30215184, "link": "https://stackoverflow.com/questions/30215184/pointer-to-a-pointer-in-c/30215535#30215535", "title": "Pointer to a Pointer in C", "body": "<pre><code>strings[0]=(char*)malloc(strlen(inputpath1));\nstrings[1]=(char*)malloc(strlen(inputpath2));\n</code></pre>\n\n<p>...</p>\n\n<pre><code>char *holder=NULL;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>fclose(inFile);\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4838193, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/874a26041f373f61a5065a08c547cf3a?s=128&d=identicon&r=PG&f=1", "display_name": "Aravind", "link": "https://stackoverflow.com/users/4838193/aravind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1431536758, "creation_date": 1431521076, "last_edit_date": 1431536758, "question_id": 30215184, "link": "https://stackoverflow.com/questions/30215184/pointer-to-a-pointer-in-c", "title": "Pointer to a Pointer in C", "body": "<p>I am writing a below Pro*C program and I am getting core dump error, could someone please help me what I am doing wrong. I am new to <code>C</code></p>\n\n<pre><code>int main(int argc,char *argv[])\n{\n  char inputpath1[300]=\"\";\n  char inputpath2[300]=\"\";\n  gets(inputpath1);\n  gets(inputpath2);\n  ExtractCmpFiles(inputpath1,inputpath2); //contains fullpath with file\nreturn 0;\n}\n\nvoid ExtractCmpFiles(char *inputpath1,char *inputpath2)\n{\n  int i=0;\n  char *strings[2];\n  strings[0]=malloc(sizeof(inputpath1)+1);\n  strcpy(strings[0],inputpath1);\n  strings[1]=malloc(sizeof(inputpath2)+1);\n  strcpy(strings[1],inputpath2);\n  printf(\"Your files are:\\n%s\\n%s\\n\",strings[0],strings[1]);//i am getting output here\n  char **holder='\\0';\n  char ioarea[4096];\n  for(i=0;i&lt;2;i++)\n    {\n      inFile=fopen(strings[i],\"r\");\n      if(!inFile)\n        {\n          fprintf(stderr,\": Open failure for output file:\");\n          fprintf(stderr,strings[i]);\n          fprintf(stderr,\"\\n\");\n        }\n      holder=&amp;strings[i];\n      holder=strrchr(strings[i],'/');  //checking the address of '/' to get only filename\n      holder++; //incrementing pointer\n      printf(\"your holder is: %s\\n\",*holder);\n      if(strncmp(holder,\"bills\",5)==0) //checking value from the pointer address is \"bills\" or not\n        {\n          //do as you wish\n        }\n    }\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>/your/path/bills.cmp\n/your/path/bill.cmp\n</code></pre>\n\n<p>Thank you all. I have modified the function as per suggestions, but still I am getting core dump error\nAdding modified function:</p>\n\n<pre><code> void ExtractCmpFiles(char *inputpath1,char *inputpath2)\n{\n  char *strings[2];\n  strings[0]=(char*)malloc(strlen(*inputpath1)+1);\n  strcpy(strings[0],inputpath1);\n  strings[1]=(char*)malloc(strlen(*inputpath2)+1);\n  strcpy(strings[1],inputpath2);\n\n  printf(\"Your files are:\\n%s\\n%s\\n\",strings[0],strings[1]);\n\n  char *holder=NULL;\n  char ioarea[4096];\n\n  int i=0;\n\n  for(i=0;i&lt;2;i++)\n    {\n      inFile=fopen(strings[i],\"r\");\n      if(!inFile)\n        {\n          fprintf(stderr,\": Open failure for output file:\");\n          fprintf(stderr,strings[i]);\n          fprintf(stderr,\"\\n\");\n        }\n      holder=strings[i];\n      holder=strrchr(strings[i],'/'); \n      printf(\"i=%d --- %s\\n\",i,strings[i]);   //when i=0 it is giving output then it is giving coredump\n      printf(\"your holder1 is: %s\\n\",holder);\n      holder++;\n      printf(\"your holder2 is: %s\\n\",holder);\n      if(strncmp(holder,\"custbills\",9)==0)\n        {\n          //do something\n        }\n      else\n        {\n          //do something\n        }\n\n  fclose(inFile);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "pwm"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1431520525, "post_id": 30214927, "comment_id": 48533865, "body": "At least <code>pwm_PinArr[i]_instance</code> has to be <code>pwm_PinArr_instance[i]</code>, where pwm_PinArr_instance is an array of function poiters. Otherwise you have to read something about templates."}, {"owner": {"reputation": 2106, "user_id": 2375105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/iojsu.jpg?s=128&g=1", "display_name": "traveh", "link": "https://stackoverflow.com/users/2375105/traveh"}, "edited": false, "score": 0, "creation_date": 1431520887, "post_id": 30214927, "comment_id": 48534137, "body": "Looks like you are trying to access constants (like PWM_CHANNEL_7) via array values in runtime. You can&#39;t do that. Constants in C are resolved at compile time."}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 1, "creation_date": 1431521365, "post_id": 30214927, "comment_id": 48534526, "body": "Show the definition of <code>pwm_pin6_instance</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1431526008, "last_edit_date": 1431526008, "creation_date": 1431520860, "answer_id": 30215099, "question_id": 30214927, "link": "https://stackoverflow.com/questions/30214927/two-in-parameters-c/30215099#30215099", "title": "two in parameters c", "body": "<p>if your function look like this</p>\n\n<pre><code>void pwm_pin6_instance ( void )\n</code></pre>\n\n<p>Then you can declare an array</p>\n\n<pre><code>void (*pwm_PinArr_instance[7]) (void);\n</code></pre>\n\n<p>And init it: (ampersand is optional)</p>\n\n<pre><code>pwm_PinArr_instance[0] = &amp;pwm_pin0_instance;\npwm_PinArr_instance[1] = &amp;pwm_pin1_instance;\npwm_PinArr_instance[2] = &amp;pwm_pin2_instance;\npwm_PinArr_instance[3] = &amp;pwm_pin3_instance;\npwm_PinArr_instance[4] = &amp;pwm_pin4_instance;\npwm_PinArr_instance[5] = &amp;pwm_pin5_instance;\npwm_PinArr_instance[6] = &amp;pwm_pin6_instance;\n</code></pre>\n\n<p>Then you can use the array</p>\n\n<pre><code> pwm_channel_init(PWM, pwm_PinArr_instance[i]);\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Looking deeply in your code I think you have to learn something about array.\nI guess you are thinking that the translation of <code>PWM_CHANNEL_ChlArr[i]</code> will be, for <code>i=0</code>, <code>PWM_CHANNEL_0</code>. </p>\n\n<p>Array values are not substituite to variable name at compile time.</p>\n\n<p><strong>Take time to study arrays and to learn how to use them.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1431520937, "creation_date": 1431520937, "answer_id": 30215118, "question_id": 30214927, "link": "https://stackoverflow.com/questions/30214927/two-in-parameters-c/30215118#30215118", "title": "two in parameters c", "body": "<p>It's </p>\n\n<pre><code>char ChlArr[] = {0, 1, 4, 5, 6, 7}\nchar PinArr[] = {34, 36, 6, 7, 8, 9};\n</code></pre>\n\n<p>and not </p>\n\n<pre><code>char ChlArr = [0, 1, 4, 5, 6, 7];\nchar PinArr = [34, 36, 6, 7, 8, 9];\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 2908642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3185ca5ea72f8d6c3c3ce653cf551b1a?s=128&d=identicon&r=PG&f=1", "display_name": "user2908642", "link": "https://stackoverflow.com/users/2908642/user2908642"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431526008, "creation_date": 1431520430, "question_id": 30214927, "link": "https://stackoverflow.com/questions/30214927/two-in-parameters-c", "title": "two in parameters c", "body": "<p>Im working on enabling multiple PWM at once, and i dont wanna copy paste the code 6 times but im having trouble to enable 6 different PWMs, the code that works is : </p>\n\n<pre><code>    void pwmPinChoices(void){\n\n    pwm_channel_disable(PWM, PWM_CHANNEL_7);\n    pwm_pin6_instance.ul_prescaler = PWM_CMR_CPRE_CLKA;\n    pwm_pin6_instance.ul_period = 100;\n    pwm_pin6_instance.ul_duty = 50;\n    pwm_pin6_instance.channel = PWM_CHANNEL_7;\n    pwm_channel_init(PWM, &amp;pwm_pin6_instance);\n    pio_set_peripheral(PIOC, PIO_PERIPH_B, PIO_PC24B_PWML7);\n    pwm_channel_enable(PWM, PWM_CHANNEL_7);\n}\n</code></pre>\n\n<p>I want to be able to change pwm_pinx_instance and pwm_channel_x, i tried using arrays but it does not work.. </p>\n\n<p>The code i tried is:  </p>\n\n<pre><code>    void pwmChoices(void){\n    char ChlArr = [0, 1, 4, 5, 6, 7];\n    char PinArr = [34, 36, 6, 7, 8, 9];\n\n    for(int i = 0; i &lt; 6; i++){\n    pwm_channel_disable(PWM, PWM_CHANNEL_ChlArr[i]);\n    pwm_PinArr[i]_instance.ul_prescaler = PWM_CMR_CPRE_CLKA;\n    pwm_PinArr[i]_instance.ul_period = 100;\n    pwm_PinArr[i]_instance.ul_duty = 50;\n    pwm_PinArr[i]_instance.channel = PWM_CHANNEL_ChlArr[i];\n    pwm_channel_init(PWM, &amp;pwm_PinArr[i]_instance);\n    pio_set_peripheral(PIOC, PIO_PERIPH_B, PIO_PC24B_PWMLChlArr[i]);\n    pwm_channel_enable(PWM, PWM_CHANNEL_ChlArr[i]);\n}\n</code></pre>\n\n<p>But with this code i get alot of errors that the functions are undeclared.. </p>\n"}, {"tags": ["c", "linux", "multithreading", "timer"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1431520364, "post_id": 30214876, "comment_id": 48533740, "body": "Welcome to Stack Overflow! Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions. See <a href=\"http://stackoverflow.com/help/on-topic\">On-topic Reference</a>"}, {"owner": {"reputation": 219, "user_id": 3083866, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/464a65e865d322f85e41e9a3d34a4fe3?s=128&d=identicon&r=PG&f=1", "display_name": "JVN", "link": "https://stackoverflow.com/users/3083866/jvn"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1432039830, "post_id": 30214876, "comment_id": 48746608, "body": "the way i used to implement this is via &quot;select&quot; . we can lock the while loop using the select call. we can give the timeout value in the select call and then get the timer value...."}, {"owner": {"reputation": 219, "user_id": 3083866, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/464a65e865d322f85e41e9a3d34a4fe3?s=128&d=identicon&r=PG&f=1", "display_name": "JVN", "link": "https://stackoverflow.com/users/3083866/jvn"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435055854, "post_id": 30214876, "comment_id": 50028899, "body": "please help me to add answer for this question . i have found the answer for this.  but the question got closed."}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 1, "last_activity_date": 1431522314, "last_edit_date": 1431522314, "creation_date": 1431520635, "answer_id": 30215014, "question_id": 30214876, "link": "https://stackoverflow.com/questions/30214876/what-is-the-best-method-of-implementing-timer-inside-a-thread/30215014#30215014", "title": "What is the best method of implementing timer inside a thread?", "body": "<p>If you use Linux why not try <code>sleep()</code> or <code>usleep()</code> functions of <code>unistd.h</code>?</p>\n\n<pre><code>sleep(5);\n</code></pre>\n\n<p>Will pause the thread for five seconds and then resume execution. </p>\n\n<hr>\n\n<h3><code>sleep(sec)</code></h3>\n\n<blockquote>\n  <p>The <code>sleep()</code> function shall <strong>cause the calling thread to be suspended from execution</strong> until either the number of realtime seconds specified by the argument seconds has elapsed or a signal is delivered to the calling thread and its action is to invoke a signal-catching function or to terminate the process. </p>\n</blockquote>\n\n<h3><code>usleep(usec)</code></h3>\n\n<blockquote>\n  <p><code>usleep()</code> function <strong>suspends execution of the calling thread</strong> for (at least) usec microseconds.</p>\n</blockquote>\n\n<p>Emphasis mine. \nTaken from <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sleep.html\" rel=\"nofollow\">here</a> and <a href=\"http://linux.die.net/man/3/usleep\" rel=\"nofollow\">here</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "is_accepted": false, "score": 0, "last_activity_date": 1431520994, "last_edit_date": 1495541670, "creation_date": 1431520994, "answer_id": 30215140, "question_id": 30214876, "link": "https://stackoverflow.com/questions/30214876/what-is-the-best-method-of-implementing-timer-inside-a-thread/30215140#30215140", "title": "What is the best method of implementing timer inside a thread?", "body": "<p>You should use <a href=\"https://stackoverflow.com/questions/1784136/simple-signals-c-programming-and-alarm-function\">Simple Signals - C programming and alarm function</a> if you want truely accurate timing.  If you don't do this, using <code>sleep()</code> etc will eventually result in your timer shifting due to the overhead of your code, the OS, etc.</p>\n"}], "owner": {"reputation": 219, "user_id": 3083866, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/464a65e865d322f85e41e9a3d34a4fe3?s=128&d=identicon&r=PG&f=1", "display_name": "JVN", "link": "https://stackoverflow.com/users/3083866/jvn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1431526096, "answer_count": 2, "score": -3, "last_activity_date": 1435055799, "creation_date": 1431520328, "last_edit_date": 1435055799, "question_id": 30214876, "link": "https://stackoverflow.com/questions/30214876/what-is-the-best-method-of-implementing-timer-inside-a-thread", "closed_reason": "Needs more focus", "title": "What is the best method of implementing timer inside a thread?", "body": "<p>I need to do some operation at regular intervals in my thread. What is the best method to do this? \nLike if, i have a local socket communication between linux deamon and a android application. In this case, if i want to send data periodically to the android app from deamon, how can i proceed?</p>\n"}, {"tags": ["c", "standards", "language-lawyer", "integer-overflow", "integer-promotion"], "comments": [{"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1431520205, "post_id": 30214643, "comment_id": 48533635, "body": "@LPs Well, that is clearly not true. Unsigned cannot overflow. For example on a platform where uint32_t will not get converted to int and remains unsigned. But that was not my question."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431520948, "post_id": 30214643, "comment_id": 48534196, "body": "Is that first part even true? <code>UINT32_MAX * UINT32_MAX</code> would set the top bit (it&#39;s FFFFFFFE00000001) if you had 64bit ints, that isn&#39;t allowed is it?"}, {"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431521149, "post_id": 30214643, "comment_id": 48534344, "body": "@harold Yes it would overflow the int even if int had 63 value bits. Well that makes is easier."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431521497, "post_id": 30214643, "comment_id": 48534625, "body": "So in that case, see this: <a href=\"http://stackoverflow.com/q/27001604/555045\">stackoverflow.com/q/27001604/555045</a>"}, {"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431521558, "post_id": 30214643, "comment_id": 48534678, "body": "@harold Yes, that is pretty sneaky behavior."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1431521740, "post_id": 30214643, "comment_id": 48534804, "body": "I think you could get away with this by assigning <code>a</code> and <code>b</code> to <code>uint_fast32_t</code> before the multiplication. Type is unsigned, and would very likely be 64-bit on system where <code>int</code> is also 64-bit."}, {"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1431521817, "post_id": 30214643, "comment_id": 48534857, "body": "@user694733 harold linked the duplicate. I guess the solutions is: don&#39;t multiply in C :-), unless you really have to and in that case use a library or something."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431522581, "post_id": 30214643, "comment_id": 48535502, "body": "It&#39;s not <i>that</i> bad, the linked question has a reasonable answer, and personally I&#39;d just ignore this nonsense in practice (let&#39;s be honest here, the bignum library probably does too). It&#39;s a funny thing in theory though."}, {"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431523045, "post_id": 30214643, "comment_id": 48535831, "body": "@harold Those poor uint16_t can&#39;t catch a break."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431535389, "post_id": 30214643, "comment_id": 48545348, "body": "@harold: Unfortunately, some aggressive optimizers try to identify cases where calculations on <code>int</code> will overflow and eliminate code which would only be relevant in such cases.  For example, given <code>uint32_t u</code>, <code>if (u &lt; 0xFF000000) launch_missiles(); u*=u;</code>, some optimizers would recognize that because the program would engage in Undefined Behavior where the <code>if</code> condition was false, they may (and from their view, should) assume the condition will always be true.  Unless or until the language standard is changed to rule that certain expressions involving <code>int</code> whose behavior would be..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1431535614, "post_id": 30214643, "comment_id": 48545475, "body": "...the same in all <i>defined cases</i> as if they had been performed using a shorter unsigned type, must be yield the same result as if they had actually been performed using that shorter unsigned type, I no longer think it&#39;s safe to ignore such nonsense.  BTW, I&#39;m curious whether such a rule would impair the generation of optimal code outside of cases which are contrived to make phony &quot;optimizations&quot; useful."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1431535985, "post_id": 30214643, "comment_id": 48545694, "body": "@supercat that&#39;s still theory. Not even GCC pulls that stunt, though now that we&#39;ve identified it it&#39;s probably only a matter of time, they are after all committed to the cause of language-lawyering first, providing a useful compiler second."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431538318, "post_id": 30214643, "comment_id": 48547023, "body": "@harold: I wish the people involved in the language-lawyering could work toward rules which would maximize <i>useful</i> optimization opportunities without requiring code to go to great lengths to avoid UB in portions of calculations whose results wouldn&#39;t otherwise matter.  For example, if a processor with 64-bit registers doesn&#39;t have any 32-bit arithmetic operations (32-bit ADD, SUB, ADC, SBC, etc. would use opcode space which could be better utilized for other purposes), storing an <code>int32_t</code> whose address is never taken in a 64-bit register would be a useful optimization, but..."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1431538502, "post_id": 30214643, "comment_id": 48547143, "body": "@supercat that isn&#39;t done? Doesn&#39;t sound too hard to do that transformation.. just insert some AND instructions in a couple of places (not everywhere, obviously)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1431538585, "post_id": 30214643, "comment_id": 48547195, "body": "...the Standard would presently not allow it unless the compiler includes code to sign-extend the lower portion of the register every time the result is promoted to a 64-bit integer whose upper bits would matter.  More useful optimization opportunities would be authorized by such a rule than are authorized by the present lack of a rule making the result of any integer addition, multiplication, bitwise, left-shift, or unary operator be defined in all cases where it is cast or coerced to an unsigned type which would be promotable to <code>int</code> (applying coercion to the operands in turn)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1431538791, "post_id": 30214643, "comment_id": 48547351, "body": "@harold: My point is that compilers for such a machine are presently required to insert sign-extending instructions with <code>int32_t</code> math, but such instructions are in most cases, from a <i>practical</i> perspective, useless.  IMHO, processor designers are unlikely to add modes which would make 32-bit math less efficient than 64-bit math unless or until languages change to minimize the number of cases where 32-bit math is actually required.  Even if one wanted to have a language where value loss through overflow couldn&#39;t go undetected, it would be faster for a compiler on a 64-bit machine..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1431538967, "post_id": 30214643, "comment_id": 48547451, "body": "...that was performing a bunch of operations on &quot;32-bit&quot; values, to perform intermediate computations on 64-bit values and only check for &quot;overflow&quot; when assigning the result back to a 32-bit variable, than to have to check the result of every individual operation for overflow.  Freeing up an opcode bit that would otherwise be used for operand-size selection would enable processors to add many additional useful instructions, but I don&#39;t think that&#39;s likely to happen until languages can release most of their ties to 32-bit-ness."}], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "edited": false, "score": 0, "creation_date": 1431520705, "post_id": 30215008, "comment_id": 48534006, "body": "No int is defined to have 64 bits altogether and 31 padding bits. I think I have clearly stated that: <i>32 value bits, one sign bit, and 31 padding bits</i>. Integer with 32 value bits can represent all values of uint32_t, since uint32_t has exactly 32 value bits."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "edited": false, "score": 0, "creation_date": 1431520763, "post_id": 30215008, "comment_id": 48534050, "body": "@reader Ah, misread that part. Let me update the answer."}, {"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "edited": false, "score": 0, "creation_date": 1431521514, "post_id": 30215008, "comment_id": 48534638, "body": "Sorry I have edited the question substantially."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "edited": false, "score": 0, "creation_date": 1431521578, "post_id": 30215008, "comment_id": 48534698, "body": "@reader Good for you, thanks for wasting my time. Bye."}, {"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "edited": false, "score": 0, "creation_date": 1431521605, "post_id": 30215008, "comment_id": 48534709, "body": "What? Are you not trying to help people? Yes you didn&#39;t get points, but you did help someone. So only points matter to you?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "edited": false, "score": 0, "creation_date": 1431521647, "post_id": 30215008, "comment_id": 48534746, "body": "@reader I already updated the answer completely because I misread it the first time. Not going to change it yet again. I don&#39;t care about points, I care about not wasting time on questions that keep changing completely so that the present answers turn outdated and the whole post turns into something that doesn&#39;t make any sense."}, {"owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "edited": false, "score": 0, "creation_date": 1431521891, "post_id": 30215008, "comment_id": 48534917, "body": "You can delete it so I can delete the question since I have found the duplicate. Thank you."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1431521540, "last_edit_date": 1431521540, "creation_date": 1431520615, "answer_id": 30215008, "question_id": 30214643, "link": "https://stackoverflow.com/questions/30214643/integer-promotions-value-bits-and-multiplying/30215008#30215008", "title": "Integer promotions, value bits, and multiplying", "body": "<p>If you have such an obscure 64 bit <code>int</code> type with 32 only value bits, it still has the same precision as uint32_t. Given that 6.3.1.1 seems to only be concerned with precision when it comes to determining conversion rank, I don't think a 64 bit <code>int</code>, with the same number of value bits as a <code>uint32_t</code>, can be regarded to have a higher conversion rank. So no integer promotion should take place.</p>\n\n<p>You will of course still get overflow no matter if there is integer promotion or not, because <code>UINT32_MAX*2</code> can't fit in an uint32_t nor in your peculiar 64-bit-with-32-value-bits <code>int</code>.</p>\n"}], "owner": {"reputation": 486, "user_id": 4507670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9528e34f57a395ced318b66c57ccd8?s=128&d=identicon&r=PG&f=1", "display_name": "reader", "link": "https://stackoverflow.com/users/4507670/reader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "closed_date": 1431522528, "answer_count": 1, "score": 0, "last_activity_date": 1431521540, "creation_date": 1431519750, "last_edit_date": 1431521272, "question_id": 30214643, "link": "https://stackoverflow.com/questions/30214643/integer-promotions-value-bits-and-multiplying", "closed_reason": "Duplicate", "title": "Integer promotions, value bits, and multiplying", "body": "<p>If we multiply two <code>uint32_t</code> types and they type <code>int</code>on this system has 63 value bits and one sign bit, then those values are converted to <code>int</code>( integer promotions ), multiplied, and converted back to <code>uint32_t</code>. The intermediate result cannot be represented by an <code>int</code>: <code>2^32-1 * 2^32-1 &gt; 2^63-1</code>, and triggers a signed integer overflow, causing undefined behavior.</p>\n\n<p>Value of <code>UINT32_MAX</code> is <code>2^32-1</code>, since <code>uint32_t</code> is guaranteed to have 32 value bits.</p>\n\n<pre><code>uint32_t a = UINT32_MAX ;\nuint32_t b = UINT32_MAX ;\nuint32_t c = a*b ;\n</code></pre>\n\n<p>Since platforms that have int the size of 64 bits are common, is my conclusion correct? The programmer expected that the result will wrap, since the type is unsigned, but the integer promotions will cause undefined behavior because of signed overflow.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1431519572, "post_id": 30214537, "comment_id": 48533162, "body": "Please don&#39;t post the question as a continuation of another question, because many users might not know about your previous question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 4, "creation_date": 1431519654, "post_id": 30214537, "comment_id": 48533210, "body": "This is wrong <code>reset == &#39;y&#39; || &#39;Y&#39;</code>, it should be <code>reset == &#39;y&#39; || reset == &#39;Y&#39;</code>, it&#39;s always evaluating to true as it is. And <code>return</code> is not a function!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1431519753, "post_id": 30214537, "comment_id": 48533281, "body": "Run in a debugger to locate the crash. When the crash happens and you have gone up the call stack to your code (if needed) take a look at all involved variables, make sure all pointers and indexes are valid. At the very least, please point out where the crash happens in your code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1431520088, "post_id": 30214537, "comment_id": 48533543, "body": "<code>letterfreq[i] = letterfreq[i] - 32;</code> does not lowercase it. You need <code>letterfreq[i] = letterfreq[i] + &#39;a&#39; - &#39;A&#39;</code>;. Another fault with <code>lowerCase()</code> is you are incrementing <code>i</code> twice. Once in the <code>for</code> statement, again at the end of the loop."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431522283, "post_id": 30214537, "comment_id": 48535243, "body": "@WeatherVane, I agree with you stylistically, but <code>&#39;a&#39; - &#39;A&#39; == 32</code> on any machine with a character set congruent with ASCII.  If you don&#39;t want to assume ASCII congruence then adding <code>&#39;a&#39; - &#39;A&#39;</code> is not a safe mechanism for lowercasing letters other than <code>&#39;A&#39;</code>, as nothing requires the spacing between equivalent lower- and uppercase letters to be consistent."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431522424, "post_id": 30214537, "comment_id": 48535362, "body": "@JohnBollinger I put that to stave off the usual cries of &quot;oh someone will be using EBCDIC&quot;. But although EBCDIC has consistent upper to lower difference, testing the range A to Z will fail."}, {"owner": {"reputation": 6681, "user_id": 619295, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a928b0d96628fa4b5529a85b33c50477?s=128&d=identicon&r=PG", "display_name": "trenki", "link": "https://stackoverflow.com/users/619295/trenki"}, "edited": false, "score": 3, "creation_date": 1431523096, "post_id": 30214537, "comment_id": 48535876, "body": "there is a standard function <code>tolower()</code>which you can use to get the lowercase char."}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 4, "last_activity_date": 1431524074, "last_edit_date": 1495540689, "creation_date": 1431520112, "answer_id": 30214785, "question_id": 30214537, "link": "https://stackoverflow.com/questions/30214537/its-still-crashing-where-am-i-going-wrong/30214785#30214785", "title": "It&#39;s still crashing, where am I going wrong?", "body": "<p>Here(in function <code>lowerCase</code>):</p>\n\n<pre><code>letterfreq[i] = letterfreq[i] - 32;\n</code></pre>\n\n<p>you need to <em>add</em> 32 to convert the character into uppercase. Look at the <a href=\"http://www.asciitable.com/index/asciifull.gif\" rel=\"nofollow noreferrer\">ASCII table</a> to know why.</p>\n\n<p>Here(in function <code>countFreq</code>):</p>\n\n<pre><code>for(i = 0; i &lt; STRSIZE; i++)\n{   \n    while(letterfreq[i] != '\\0')\n    {   \n        if(letterfreq[i] &gt;= 'a' &amp;&amp; letterfreq[i] &lt;= 'z')\n        {\n            counter[c]++;\n            c++;\n        }\n        else \n            if((letterfreq[i] &lt; 'a') || (letterfreq[i] &gt; 'z'))\n            {   \n                counter[COUNT-1]++;\n            }\n    }\n}\n</code></pre>\n\n<p>the <code>for</code> loop doesn't make any sense. Remove it. Then, the <code>while</code> loop never ends as you don't increment <code>i</code>. You need <code>i++;</code> at the end of the <code>while</code> loop.</p>\n\n<p>Here:</p>\n\n<pre><code>        if(letterfreq[i] &gt;= 'a' &amp;&amp; letterfreq[i] &lt;= 'z')\n        {\n            counter[c]++;\n            c++;\n        }\n</code></pre>\n\n<p><code>counter[c]++</code> won't count the frequency of each character. You need </p>\n\n<pre><code>counter[letterfreq[i]-'a']++;\n</code></pre>\n\n<p>for that. <code>c</code> is not needed. Remove it from the function.</p>\n\n<hr>\n\n<p>Also, as <a href=\"https://stackoverflow.com/users/1983495/iharob\">@iharob</a> <a href=\"https://stackoverflow.com/questions/30214537/its-still-crashing-where-am-i-going-wrong/30214785#comment48533162_30214537\">has mentioned in a comment</a>,</p>\n\n<pre><code> }while(reset == 'y' || 'Y');\n</code></pre>\n\n<p>should be</p>\n\n<pre><code> }while(reset == 'y' || reset == 'Y');\n</code></pre>\n\n<p><hr>\nFixed program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nconst int COUNT = 27;\nconst int STRSIZE = 100;\n\nvoid readString(char letterfreq[], int STRSIZE)\n{\n    printf(\"The capacity of the string array is %d\\n\", STRSIZE-1);\n\n    printf(\"Please enter your string:\\n\");\n    fgets(letterfreq, STRSIZE, stdin);\n\n    letterfreq[strlen(letterfreq) - 1] = '\\0';\n\n    //return; Not required\n}\n\nvoid lowerCase(char letterfreq[], int STRSIZE)\n{\n    int i;\n\n    for(i = 0; i &lt; STRSIZE; i++)\n    {\n        if(letterfreq[i] &gt;= 'A' &amp;&amp; letterfreq[i] &lt;= 'Z')\n        {\n            letterfreq[i] = letterfreq[i] + 32; //Add instead of subtract\n        }\n        //i++; You already increment i from the loop\n    }\n\n\n}\n\nvoid countFreq(int counter[], int COUNT, char letterfreq[], int STRSIZE)\n{\n    int i=0; // You forgot to initialize i with 0\n\n    while(letterfreq[i] != '\\0')\n    {   \n        if(letterfreq[i] &gt;= 'a' &amp;&amp; letterfreq[i] &lt;= 'z')\n        {\n            counter[letterfreq[i]-'a']++;\n        }\n        else if((letterfreq[i] &lt; 'a') || (letterfreq[i] &gt; 'z')) //is always true; Use `else`\n        {   \n            counter[COUNT-1]++;\n        }\n\n        i++; //You forgot this\n    }\n\n    //return; Not required\n}\n\nvoid printFreq(int counter[], int COUNT)\n{\n    int c;\n\n    printf(\"Here is the letter frequency of your string:\\n\");\n\n    for(c = 0; c &lt; COUNT-1; c++) //See change here too\n    {\n        printf(\"%c \\t %d \\n\", c + 'a', counter[c]);\n    }\n\n    printf(\"There were also %d special characters in the string.\\n\", counter[26]);\n\n    //return; Not required\n}\n\nchar promptReset(char reset)\n{\n    printf(\"Would you like to calculate the letter frequency of another string? (Y/N)\\n\");\n    scanf(\"%c%*c\", &amp;reset);\n\n    return(reset);\n}\n\nint main()\n{\n    char letterfreq[STRSIZE];\n    char reset = '\\0'; //Always initialize variables to prevent unexpected behavior\n    int counter[COUNT];\n\n\n    printf(\"Welcome to the Letter Frequency program\\n\");\n\n    do\n    {\n        memset(counter,0,sizeof(counter)); //Initializing counter with zeros\n        memset(letterfreq,'\\0',sizeof(letterfreq)); //Do the same for letterfreq\n\n        readString(letterfreq, STRSIZE);\n\n        lowerCase(letterfreq, STRSIZE);\n\n        countFreq(counter, COUNT, letterfreq, STRSIZE);\n\n        printFreq(counter, COUNT);\n\n        reset = promptReset(reset);\n\n    }while(reset == 'y' || reset == 'Y'); //Changed\n\n    return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4886834, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cd97fd04a57df218158c53d76070b641?s=128&d=identicon&r=PG&f=1", "display_name": "Paige Angels", "link": "https://stackoverflow.com/users/4886834/paige-angels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432246512, "creation_date": 1431519503, "last_edit_date": 1432246512, "question_id": 30214537, "link": "https://stackoverflow.com/questions/30214537/its-still-crashing-where-am-i-going-wrong", "title": "It&#39;s still crashing, where am I going wrong?", "body": "<p><em>(Edited to add this bit)</em> I'm writing a program where it reads in a string of characters, then counts the frequency of each letter in the string and outputs the number of times each letter or non-letter occurs.</p>\n\n<p>I was using tolower() but this was creating a problem.</p>\n\n<p>I've changed it so I'm now using a loop to lower the case. Unfortunately the program is still crashing on me and I can't spot the problem. </p>\n\n<p>I've run through each function to make sure I don't have anything loose. I've got the new line element being removed but when I run it through, I type in something as simple as \"hello\" and it crashes out.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid read(char letterfreq[], int STRSIZE)\n{\n    printf(\"The capacity of the string array is %d\\n\", STRSIZE-1);\n\n    printf(\"Please enter your string:\\n\");\n\n    letterfreq[strlen(letterfreq) - 1] = '\\0';\n\n    return;\n}\n\nvoid lowerCase(char letterfreq[], int STRSIZE)\n{\n    }\n\n\n}\n\nvoid countFreq(int counter[], int COUNT, char letterfreq[], int STRSIZE)\n{\n    int c = 0;\n    int i;\n\n    for(i = 0; i &lt; STRSIZE; i++)\n\n            }\n            else \n                if((letterfreq[i] &lt; 'a') || (letterfreq[i] &gt; 'z'))\n                {   \n                    counter[COUNT-1]++;\n                }\n        }\n    }\n\n    return;\n}\n\nvoid printFreq(int counter[], int COUNT)\n{\n    int c;\n\n    printf(\"Here is the letter frequency of your string:\\n\");\n\n    for(c = 0; c &lt; COUNT; c++)\n\n    printf(\"There were also %d special characters in the string.\\n\", counter[26]);\n\n    return;\n}\n\nchar promptReset(char reset)\n{\n    printf(\"Would you like to calculate the letter frequency of another string? (Y/N)\\n\");\n    scanf(\"%c%*c\", &amp;reset);\n\n\n    do\n    {\n        readString(letterfreq, STRSIZE);\n\n        lowerCase(letterfreq, STRSIZE);\n\n        countFreq(counter, COUNT, letterfreq, STRSIZE);\n\n        printFreq(counter, COUNT);\n\n        reset = promptReset(reset);\n\n    }while(reset == 'y' || 'Y');\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "shared-libraries", "libc", "ldd"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1431519388, "post_id": 30214443, "comment_id": 48533019, "body": "The craziest thing to do is to google the names of these libraries and to extract functions&#39; names from the docs. It could be a sort of joke but why not try"}, {"owner": {"reputation": 1453, "user_id": 3195614, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qw0hw.jpg?s=128&g=1", "display_name": "Zach P", "link": "https://stackoverflow.com/users/3195614/zach-p"}, "edited": false, "score": 0, "creation_date": 1431519578, "post_id": 30214443, "comment_id": 48533166, "body": "If I understood you correctly, try googling &#39;dll&#39; instead."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4706816, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bbc9f9c14367a7808629a225f267b9fa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnCage", "link": "https://stackoverflow.com/users/4706816/johncage"}, "edited": false, "score": 0, "creation_date": 1431521570, "post_id": 30214807, "comment_id": 48534687, "body": "Yes I tried nm. It is useful for executables which have symbols, but for others like /bin/ls, it is usefulness. For executables which have no symbol, may be I must have source code..."}, {"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "reply_to_user": {"reputation": 37, "user_id": 4706816, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bbc9f9c14367a7808629a225f267b9fa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnCage", "link": "https://stackoverflow.com/users/4706816/johncage"}, "edited": false, "score": 0, "creation_date": 1431521697, "post_id": 30214807, "comment_id": 48534779, "body": "No symbols means searching source code.  Good luck with that!  :("}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 37, "user_id": 4706816, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bbc9f9c14367a7808629a225f267b9fa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnCage", "link": "https://stackoverflow.com/users/4706816/johncage"}, "edited": false, "score": 0, "creation_date": 1431576162, "post_id": 30214807, "comment_id": 48561526, "body": "@JohnCage Even stripped executables have symbols. You just need to use <code>nm -D</code> on them. You <i>should</i> be using <code>nm -D</code> in the first place (even for non-stripped binaries) because <code>nm</code> will show you the symbols which are not actually exported from the binary (and thus can&#39;t be used from outside of it)."}], "tags": [], "owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "is_accepted": false, "score": 0, "last_activity_date": 1431520185, "creation_date": 1431520185, "answer_id": 30214807, "question_id": 30214443, "link": "https://stackoverflow.com/questions/30214443/common-function-of-a-dynamic-library-shared-by-several-executables/30214807#30214807", "title": "Common function of a dynamic library shared by several executables", "body": "<p>If you have <code>ldd</code> you should also have <code>nm</code>.  This will list symbols in a binary, executable or shared object alike assuming symbols are included.  This tool reports the function names indicating both local and external dependency information.  You should be able to use this to do what you want.</p>\n"}], "owner": {"reputation": 37, "user_id": 4706816, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bbc9f9c14367a7808629a225f267b9fa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnCage", "link": "https://stackoverflow.com/users/4706816/johncage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431520185, "creation_date": 1431519181, "question_id": 30214443, "link": "https://stackoverflow.com/questions/30214443/common-function-of-a-dynamic-library-shared-by-several-executables", "title": "Common function of a dynamic library shared by several executables", "body": "<p>I have an issue I don't know how to solve.</p>\n\n<p>I have ever written a program (Python script) which returns a <strong>list of dynamic libraries</strong> with all the executables using them.\n(My script uses the ldd utility).</p>\n\n<p>Now, I'd like to do a program which would return a <strong>list of functions of dynamic libraries</strong> with all the executables using them.\nBut how can I do that ?? </p>\n\n<p>(I think the main problem is that libraries are build and to do that I need source code, right ?)</p>\n\n<p>Thanks !!\nJC </p>\n"}, {"tags": ["c", "double", "malloc", "difference"], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1431517829, "post_id": 30213944, "comment_id": 48531899, "body": "Declared on stack and Accessible only locally. Not true if is declared global or static."}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 2, "creation_date": 1431518082, "post_id": 30213944, "comment_id": 48532086, "body": "Declared on stack only if constant-sized array. In C99, variable-sized arrays are on the program&#39;s internal automatic memory."}, {"owner": {"reputation": 2461, "user_id": 2106328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rfFc5.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/2106328/nishant"}, "reply_to_user": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1431518361, "post_id": 30213944, "comment_id": 48532310, "body": "@Malina can you explain further. I am hearing this term - &quot;program&#39;s internal automatic memory&quot; for the first time"}, {"owner": {"reputation": 2461, "user_id": 2106328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rfFc5.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/2106328/nishant"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1431518391, "post_id": 30213944, "comment_id": 48532342, "body": "@LPs Thanks for pointing that out"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1431518841, "post_id": 30213944, "comment_id": 48532666, "body": "@Malina , VLAs are also allocated on the stack, aren&#39;t they?"}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1431520044, "post_id": 30213944, "comment_id": 48533518, "body": "<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Variable-Length.html</a> a good reading imo."}], "tags": [], "owner": {"reputation": 2461, "user_id": 2106328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rfFc5.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/2106328/nishant"}, "is_accepted": true, "score": 1, "last_activity_date": 1465298203, "last_edit_date": 1465298203, "creation_date": 1431517745, "answer_id": 30213944, "question_id": 30213863, "link": "https://stackoverflow.com/questions/30213863/difference-between-malloc-and-simple-declaration-in-fixed-sizes/30213944#30213944", "title": "Difference between malloc() and simple declaration in fixed sizes", "body": "<p><code>double myArray[x];</code> Here memory is</p>\n\n<ol>\n<li>declared on stack</li>\n<li>Declared at compile-time, hence faster</li>\n<li>Accessible only in the scope of the declaring function,( globally if declared in global scope)</li>\n<li>Will be freed if the declaring function returns </li>\n<li>generally used when the size of array is known at compile time</li>\n</ol>\n\n<p><code>myArray = malloc(x*sizeof(double));</code> Here memory is</p>\n\n<ol>\n<li>declared on heap (except for variable length arrays(C99) which are allocated on stack as pointed by Malina, read more <a href=\"http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow\">here</a>)</li>\n<li>Declared at run-time, hence slower</li>\n<li>Accessible wherever the myArray variable is accessible </li>\n<li>Will be freed when <code>free(myArray)</code> is called or the program exits</li>\n<li>generally used if the size of array is unknown at compile time</li>\n</ol>\n"}], "owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 2, "closed_date": 1431517752, "accepted_answer_id": 30213944, "answer_count": 1, "score": 0, "last_activity_date": 1465298203, "creation_date": 1431517518, "question_id": 30213863, "link": "https://stackoverflow.com/questions/30213863/difference-between-malloc-and-simple-declaration-in-fixed-sizes", "closed_reason": "Duplicate", "title": "Difference between malloc() and simple declaration in fixed sizes", "body": "<p>Let assume that I want to get space for an array of <em>x</em> <code>double</code>, <em>x</em> being an integer.</p>\n\n<p>Can someone explain me the difference between</p>\n\n<pre><code>double myArray[x];\n</code></pre>\n\n<p>and</p>\n\n<pre><code>malloc(x*sizeof(double));\n</code></pre>\n\n<p>excepted the fact that <code>malloc()</code> returns a <code>void</code> pointer ?</p>\n\n<p>Thank you in advance for your answer.</p>\n"}, {"tags": ["c", "file-io", "fopen", "file-writing"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 3, "creation_date": 1431517272, "post_id": 30213716, "comment_id": 48531475, "body": "<code>fopen(whatever, &quot;a&quot;)</code> is what you need."}, {"owner": {"reputation": 79, "user_id": 4880208, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/50dd0586fe02380fcfe94916cbd46f2f?s=128&d=identicon&r=PG&f=1", "display_name": "user193239", "link": "https://stackoverflow.com/users/4880208/user193239"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1431517454, "post_id": 30213716, "comment_id": 48531616, "body": "thanks!! that works!"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1431517802, "post_id": 30213716, "comment_id": 48531883, "body": "&quot;write line by line to a file&quot; would (to me at least) imply that you are writing multiple lines at a time, where instead here you want to <i>append</i> to a file, writing one line."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1431519524, "last_edit_date": 1431519524, "creation_date": 1431517266, "answer_id": 30213753, "question_id": 30213716, "link": "https://stackoverflow.com/questions/30213716/how-to-properly-append-lines-to-already-existing-file/30213753#30213753", "title": "How to properly append lines to already existing file", "body": "<p>If I understood your problem correctly, you can have two approaches, </p>\n\n<p><strong>Case 1</strong> <em>(Opening / closing multiple times, write one value at a time)</em></p>\n\n<p>You need to open the file in <em>append</em> mode to preserve the previous content. Check the <a href=\"http://linux.die.net/man/3/fopen\" rel=\"nofollow\">man page</a> of <code>fopen()</code> for <code>a</code> or <em>append</em> mode.</p>\n\n<p><strong>Case 2</strong> <em>(Opening / Closing once, writing all the values at a stretch)</em></p>\n\n<p>you need to put the <code>fprintf()</code> statement in some kind of <code>loop</code> to get all the elements printed, i.e., the <em>index</em> (<code>item</code>) value goes from <code>0</code> to <em>some max</em> value.</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 4882154, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/977930685580655/picture?type=large", "display_name": "Gowtham Ganesh", "link": "https://stackoverflow.com/users/4882154/gowtham-ganesh"}, "is_accepted": true, "score": 5, "last_activity_date": 1431519961, "last_edit_date": 1431519961, "creation_date": 1431518044, "answer_id": 30214047, "question_id": 30213716, "link": "https://stackoverflow.com/questions/30213716/how-to-properly-append-lines-to-already-existing-file/30214047#30214047", "title": "How to properly append lines to already existing file", "body": "<p>It is because everytime you execute fprintf in \"w\" mode, <strong>the log gets overwritten</strong> with the new contents as the file was not opened in the 'append' mode but in 'write' mode.</p>\n\n<p>Better thing would be to use:</p>\n\n<pre><code>fopen(\"filename\", \"a\");\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4880208, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/50dd0586fe02380fcfe94916cbd46f2f?s=128&d=identicon&r=PG&f=1", "display_name": "user193239", "link": "https://stackoverflow.com/users/4880208/user193239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10796, "favorite_count": 0, "accepted_answer_id": 30214047, "answer_count": 2, "score": 2, "last_activity_date": 1431520001, "creation_date": 1431517176, "last_edit_date": 1431520001, "question_id": 30213716, "link": "https://stackoverflow.com/questions/30213716/how-to-properly-append-lines-to-already-existing-file", "title": "How to properly append lines to already existing file", "body": "<p>I looked over the internet trying to find a solution for writing line by line into a file in c. I found solutions like changing the mode of <code>fopen()</code> to <code>w+</code>, <code>wt</code>, <code>wb</code> but it did not work for me. I even read to put <code>\\r</code> instead of <code>\\n</code> in the end of the line but still when I try to write to the file the only thing that is written there is the last line.</p>\n\n<pre><code>    FILE *log = NULL;\n    log = fopen(fileName, \"w\");\n    if (log == NULL)\n    {\n        printf(\"Error! can't open log file.\");\n        return -1;\n    }\n\n    fprintf(log, \"you bought %s\\n\", pro[item].name);\n    fclose(log);\n</code></pre>\n\n<p>Many thanks for your time and help.</p>\n"}, {"tags": ["c", "avl-tree"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1431516821, "post_id": 30213493, "comment_id": 48531150, "body": "Which error do you get ?"}, {"owner": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1431517023, "post_id": 30213493, "comment_id": 48531294, "body": "Segmentation fault (core dumped). Error is showing when i am trying to add 12th value."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431517063, "post_id": 30213493, "comment_id": 48531315, "body": "use <code>gdb</code> and try to pinpoint the erroneous instrcution"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1431517074, "post_id": 30213493, "comment_id": 48531320, "body": "run it with a debugger. The debugger will show you where the segfault occurs."}, {"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 1, "creation_date": 1431517191, "post_id": 30213493, "comment_id": 48531414, "body": "You do not need an <code>up</code> aka <code>parent</code> field for <code>AVL</code> Trees. Also trees are preferably written recursively."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1431517363, "post_id": 30213493, "comment_id": 48531550, "body": "Here it segfaults at the <code>B-&gt;right = C-&gt;left;</code> line in the <code>LR</code> function, because <code>C</code> is NULL. You must debug it."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "edited": false, "score": 0, "creation_date": 1431519507, "post_id": 30214464, "comment_id": 48533112, "body": "OMG! It works perfect now! Maybe I&#39;m a little tired right now, but tell me how do you figure that?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "edited": false, "score": 1, "creation_date": 1431520308, "post_id": 30214464, "comment_id": 48533699, "body": "You <code>break;</code> the loop when you insert the element. The assignment of <code>w-&gt;up</code> should take place after that. Also, balancing the tree more than once per insert seemed a bit unnecessary. ;)  Make sure your code is always indented correctly and it is easier to spot such errors. Except for the indentation I found your code clean and easy to read."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 1, "last_activity_date": 1431519252, "creation_date": 1431519252, "answer_id": 30214464, "question_id": 30213493, "link": "https://stackoverflow.com/questions/30213493/insert-values-to-avl-tree/30214464#30214464", "title": "Insert values to AVL Tree", "body": "<p>The <code>while (true)</code> loop in <code>insert()</code> doesn't end where it should:</p>\n\n<pre><code>       }\n    // The while (true) loop should end here, but it doesn't...\n    w-&gt;up = p;\n\n/* 2. Balance AVL */\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 30214464, "answer_count": 1, "score": 2, "last_activity_date": 1431519252, "creation_date": 1431516558, "last_edit_date": 1431518211, "question_id": 30213493, "link": "https://stackoverflow.com/questions/30213493/insert-values-to-avl-tree", "title": "Insert values to AVL Tree", "body": "<p>i wrote AVL Tree implementation in C.\nI have other functions but error is showing when i try to insert some values.\nHere is my code of insert function, rotations and main.\nI am using RR, LL, RL, LR rotations to balance a tree.</p>\n\n<p>Code:</p>\n\n<pre><code>struct avl_tree {\nint key;\nint bf;\nstruct avl_tree *up;\nstruct avl_tree *left;\nstruct avl_tree *right;\n};\n\ntypedef struct avl_tree node;\n\n\nvoid deleteTree(node *tree)\n{\n    if(tree)\n    {\n        deleteTree(tree-&gt;left);\n        deleteTree(tree-&gt;right);\n        free(tree);\n    }\n}\n\nvoid RR(node **tree, node *A)\n{\nnode *B = A-&gt;right;\nnode *p = A-&gt;up;\n\nA-&gt;right = B-&gt;left;\n\nif(A-&gt;right)\n{\n    A-&gt;right-&gt;up = A;\n}\n\nB-&gt;left = A;\nB-&gt;up = p;\nA-&gt;up = B;\n\nif(p)\n{\n    if(p-&gt;left == A) p-&gt;left = B;\n    else p-&gt;right = B;\n}\nelse *tree = B;\n\nif(B-&gt;bf == -1)\n{\n    A-&gt;bf = B-&gt;bf = 0;\n}\nelse\n{\n    A-&gt;bf = -1;\n    B-&gt;bf = 1;\n}\n}\n\n\nvoid LL(node **tree, node *A)\n{\nnode *B = A-&gt;left;\nnode *p = A-&gt;up;\n\nA-&gt;left = B-&gt;right;\n\nif(A-&gt;left)\n{\n    A-&gt;left-&gt;up = A;\n}\n\nB-&gt;right = A;\nB-&gt;up = p;\nA-&gt;up = B;\n\nif(p)\n{\n    if(p-&gt;left == A) p-&gt;left = B;\n    else p-&gt;right = B;\n}\nelse *tree = B;\n\nif(B-&gt;bf == 1)\n{\n    A-&gt;bf = B-&gt;bf = 0;\n}\nelse\n{\n    A-&gt;bf = 1;\n    B-&gt;bf = -1;\n}\n}\n\n\nvoid RL(node **tree, node *A)\n{\nnode *B = A-&gt;right;\nnode *C = B-&gt;left;\nnode *p = A-&gt;up;\n\nB-&gt;left = C-&gt;right;\n\nif(B-&gt;left)\n{\n    B-&gt;left-&gt;up = B;\n}       \n\nA-&gt;right = C-&gt;left;\n\nif(A-&gt;right)\n{\n    A-&gt;right-&gt;up = A;\n}       \n\nC-&gt;left = A;\nC-&gt;right = B;\nA-&gt;up = B-&gt;up = C;\nC-&gt;up = p;\n\nif(p)\n{\n    if(p-&gt;left == A) p-&gt;left = C;\n    else p-&gt;right = C;\n}\nelse *tree = C;\n\nif(C-&gt;bf == -1) A-&gt;bf = 1;\nelse A-&gt;bf = 0;\n\nif(C-&gt;bf == 1) B-&gt;bf = -1;\nelse B-&gt;bf = 0;\n\nC-&gt;bf = 0;\n}\n\nvoid LR(node **tree, node *A)\n{\nnode *B = A-&gt;left;\nnode *C = B-&gt;right;\nnode *p = A-&gt;up;\n\nB-&gt;right = C-&gt;left;\n\nif(B-&gt;right)\n{\n    B-&gt;right-&gt;up = B;\n}\n\nA-&gt;left = C-&gt;right;\n\nif(A-&gt;left)\n{\n    A-&gt;left-&gt;up = A;\n}       \n\nC-&gt;right = A;\nC-&gt;left = B;\nA-&gt;up = B-&gt;up = C;\nC-&gt;up = p;\n\n\nif(p)\n{\n    if(p-&gt;left == A) p-&gt;left = C;\n    else p-&gt;right = C;\n}\nelse *tree = C;\n\nif(C-&gt;bf == 1) A-&gt;bf = -1;\nelse A-&gt;bf = 0;\n\nif(C-&gt;bf == -1) B-&gt;bf =1;\nelse B-&gt;bf = 0;\n\nC-&gt;bf = 0;\n}\n\nvoid insert(node **tree, int k)\n{\nnode *w; \nnode *p;\nnode *r;\nbool t;\n\nw = (node*)malloc(sizeof(node));\nw-&gt;left = w-&gt;right = w-&gt;up = NULL;\nw-&gt;key = k;\nw-&gt;bf = 0;\n\n/* 1. Insert to AVL */\np = *tree; \n\nif(!p)\n{\n    *tree = w;\n}\nelse \n{\n    while(true)\n    {\n        if(k &lt; p-&gt;key)\n        {\n            if(!p-&gt;left)\n            {\n                p-&gt;left = w;\n                break;\n            };\n\n            p = p-&gt;left;\n        }\n        else\n        {\n            if(!p-&gt;right)\n            {\n                p-&gt;right = w;\n                break;\n            };\n\n            p = p-&gt;right;\n        }\n\n    w-&gt;up = p;\n\n/* 2. Balance AVL */\n    if(p-&gt;bf) p-&gt;bf = 0;\n    else \n    {\n        if(p-&gt;left == w) p-&gt;bf = 1;\n        else p-&gt;bf = -1;\n\n        r = p-&gt;up;\n\n        t = false;\n        while(r)\n        {\n            if(r-&gt;bf)\n            {\n                t = true;\n                break;\n            };\n\n            if(r-&gt;left == p) r-&gt;bf = 1;\n            else r-&gt;bf = -1;\n\n            p = r;\n            r = r-&gt;up;\n        }\n\n        if(t)\n        {\n            if(r-&gt;bf == 1)\n            {\n                if(r-&gt;right == p) r-&gt;bf = 0;\n                else if(p-&gt;bf == -1) LR(tree, r);\n                else LL(tree, r);\n            }\n            else\n            {\n                if(r-&gt;left == p) r-&gt;bf = 0;\n                else if(p-&gt;bf == 1) RL(tree, r);\n                else RR(tree, r);\n            }\n        }\n    }\n    }\n}\n}\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>node *root;\nroot = NULL;\n\n\nchar str[100];\nint n, x, i;\n\nscanf(\"%d\", &amp;n);\n\nfor(i = 0; i&lt;=n; i++)\n{\n    fgets(str, sizeof str, stdin);\n\n    if (!strncmp(str, \"insert\", 6)) \n    {\n        sscanf(str,\"%*[^0-9]%d\", &amp;x);\n        insert(&amp;root, x);\n        str[0] = '\\0';          \n    }\n}\n\nreturn 0;\n</code></pre>\n\n<p>Input:  </p>\n\n<pre><code>29\ninsert 15\ninsert 41\ninsert 63\ninsert 99\ninsert 91\ninsert 55\ninsert 31\ninsert 82\ninsert 1\ninsert 90\ninsert 20\ninsert 52\ninsert 80\ninsert 99\ninsert 89\ninsert 32\ninsert 78 \ninsert 25\ninsert 55\ninsert 48\ninsert 33\ninsert 9\ninsert 80\ninsert 54\ninsert 87\ninsert 35\ninsert 33\ninsert 38\ninsert 78\n</code></pre>\n\n<p>I have error after try to insert value 52 with LR rotation, i dont know why.</p>\n\n<p>Edit:</p>\n\n<pre><code>insert 52\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x0000000000400bfd in LR ()\n(gdb) print\nThe history is empty.\n(gdb) where\n#0  0x0000000000400bfd in LR ()\n#1  0x0000000000400f08 in insert ()\n#2  0x0000000000401503 in main ()\n</code></pre>\n\n<p>Edit 2:</p>\n\n<pre><code>clang -Wall -Wextra -std=c99 --analyze Alg3.c \nAlg3.c:33:13: warning: Access to field 'left' results in a dereference of a null\n  pointer (loaded from variable 'B')\n    A-&gt;right = B-&gt;left;\n               ^~~~~~~\nAlg3.c:101:12: warning: Access to field 'left' results in a dereference of a\n  null pointer (loaded from variable 'B')\n    node *C = B-&gt;left;\n              ^~~~~~~\nAlg3.c:394:10: warning: Access to field 'bf' results in a dereference of a null\n  pointer (loaded from variable 't')\n                                    if(!(t-&gt;bf))\n                                        ^~~~~~~\n3 warnings generated.\n</code></pre>\n"}, {"tags": ["c", "file", "pointers"], "comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1431516131, "post_id": 30213308, "comment_id": 48530664, "body": "<code>fputc</code>, <code>putc</code> and <code>rewind</code> change the io object the pointers are pointing to. Therefore, it doesn&#39;t matter that the pointers are local."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1431516269, "post_id": 30213308, "comment_id": 48530780, "body": "<code>fputc(ch,fp);</code> in <code>getdata</code> should be <code>fgetc(ch,fp)</code>, right? BTW, <code>ch</code> should be of type <code>int</code>, not <code>char</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1431516278, "post_id": 30213308, "comment_id": 48530789, "body": "@CoolGuy Problem is, i don&#39;t see the statement that <i>prints</i> <b>all</b> the elements."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431516307, "post_id": 30213308, "comment_id": 48530810, "body": "@SouravGhosh , Right. Didn&#39;t notice it."}, {"owner": {"reputation": 43, "user_id": 4895315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c34f1b3ad401ca83339c45ea1b08a44?s=128&d=identicon&r=PG&f=1", "display_name": "Lokesh Jaddu", "link": "https://stackoverflow.com/users/4895315/lokesh-jaddu"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1431516377, "post_id": 30213308, "comment_id": 48530852, "body": "@undur_gongor  Can you please explain a bit more. I&#39;m new."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1431516909, "post_id": 30213308, "comment_id": 48531213, "body": "They work exactly the same - the first function modifies the thing that <code>q</code> points to, and the second function modifies the thing that <code>fp</code> points to."}], "answers": [{"tags": [], "owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "is_accepted": true, "score": 2, "last_activity_date": 1431516642, "creation_date": 1431516642, "answer_id": 30213516, "question_id": 30213308, "link": "https://stackoverflow.com/questions/30213308/file-pointers-behave-differently-when-passed-to-functions-why/30213516#30213516", "title": "File pointers behave differently when passed to functions. Why?", "body": "<p>Let's look at a possible very simplified implementation of FILE structure. For the purpose of the example, assume <code>content</code> points to a memory that's mapped to a file on the disk..</p>\n\n<pre><code>typedef struct FILE {\n    size_t size;\n    size_t cursor;\n    uint8_t *content;\n} FILE;\n\nint fputc(FILE *f, char c) { size++; return f-&gt;content[f-&gt;cursor++] = c; }\nint fgetc(FILE *f) { return (f-&gt;cursor == f-&gt;size) ? EOF : f-&gt;content[f-&gt;cursor++]; }\nvoid rewind(FILE *f) { f-&gt;cursor = 0; }\n</code></pre>\n\n<p>Now when you call these functions, it is obvious they modify the underlying object. When you are done writing to the file, cursor points to the last element, so <code>fgetc</code> will return EOF immediately if you don't <code>rewind</code>.</p>\n\n<hr>\n\n<p>To clarify, when you call <code>fopen</code> you create a single <code>FILE</code> object that is stored somewhere. You have no control over this object, you just get a pointer to it. You can consider this pointer (<code>fp1</code> in your example) as a file ID if it is easier to understand. Any changes are done on the FILE object, not the pointer/ID itself.</p>\n"}, {"comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1431518956, "post_id": 30213543, "comment_id": 48532735, "body": "Are you sure? I just tried opening the same file twice, reading from the first <code>FILE</code> pointer, then from the second. It started from the beginning. Do you have any reference to your claim?"}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1431537001, "post_id": 30213543, "comment_id": 48546307, "body": "That one is about <code>open</code>, not <code>fopen</code>. It is hardly relevant."}], "tags": [], "owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "is_accepted": false, "score": 0, "last_activity_date": 1431517314, "last_edit_date": 1431517314, "creation_date": 1431516709, "answer_id": 30213543, "question_id": 30213308, "link": "https://stackoverflow.com/questions/30213308/file-pointers-behave-differently-when-passed-to-functions-why/30213543#30213543", "title": "File pointers behave differently when passed to functions. Why?", "body": "<p><img src=\"https://i.stack.imgur.com/OT5yB.png\" alt=\"enter image description here\">Any process which opens a files has a data structure which stores the seek position etc related to a file . no matter how many times you open same file it is a pointer to the same DS. Print the values of both File pointer's it should be same... So it does not matter with which File * you are accessing the file . they will effect each other working ... </p>\n\n<p><strong>nice practise is to have 1 FP to 1 file ... if you need another one close the previous</strong></p>\n\n<p><strong>As open files counts as resources to a process. So this is more related to process resources then locality</strong> </p>\n"}, {"tags": [], "owner": {"reputation": 2461, "user_id": 2106328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rfFc5.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/2106328/nishant"}, "is_accepted": false, "score": 0, "last_activity_date": 1431517374, "creation_date": 1431517374, "answer_id": 30213805, "question_id": 30213308, "link": "https://stackoverflow.com/questions/30213308/file-pointers-behave-differently-when-passed-to-functions-why/30213805#30213805", "title": "File pointers behave differently when passed to functions. Why?", "body": "<p>Other answers explain it more technically, so I will keep it simple.</p>\n\n<p>First understand the following </p>\n\n<ul>\n<li>\nfp is like a head pointer. It is moved forward on each read of write operation, so that next read or write into the file will start from the end of previous operation.</li>\n<li>Since it is a pointer, hence whenever it is changed (in a function or in main) the changes will be reflected everywhere.</li>\n<li>Rewind sets the fp to the start of the file</li>\n</ul>\n\n<p>So in this example, when you write into the file using getdata, fp(or the head) moves forward after writing each character, i.e. always remains at the end of the file. Then rewind is done to bring it back to the head of the file. Hence when you print again, reading starts from the start of the file and not from end of file.</p>\n\n<p>Now, if you do not rewind then fp will remain at the end of file and printdata will not print any thing.</p>\n"}], "owner": {"reputation": 43, "user_id": 4895315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c34f1b3ad401ca83339c45ea1b08a44?s=128&d=identicon&r=PG&f=1", "display_name": "Lokesh Jaddu", "link": "https://stackoverflow.com/users/4895315/lokesh-jaddu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 1, "accepted_answer_id": 30213516, "answer_count": 3, "score": 1, "last_activity_date": 1431517374, "creation_date": 1431515988, "question_id": 30213308, "link": "https://stackoverflow.com/questions/30213308/file-pointers-behave-differently-when-passed-to-functions-why", "title": "File pointers behave differently when passed to functions. Why?", "body": "<p>So i have this code</p>\n\n<pre><code>void getdata(int *q)\n{\n   for(int i=0;i&lt;3;++i)\n      scanf(\"%d\",q++);\n   *q=10;\n}\n\nint main()\n{\n   int *p,a[4];\n   p=a;\n   getdata(p);\n   printf(\"%d\",*p);\n   return 0;\n}\n</code></pre>\n\n<p>And the output is obvious.</p>\n\n<pre><code>7\n8\n9\n7\n</code></pre>\n\n<p>But file pointers dont work the same way. I was trying to write a basic code for appending data into a file.</p>\n\n<pre><code>void getdata(FILE *fp)\n{\n    char ch;\n    while((ch=getchar())!=EOF)\n        fputc(ch,fp);\n    rewind(fp);\n}\n\nvoid printdata(FILE *fp)\n{\n    char ch;\n    while((ch=fgetc(fp))!=EOF)\n        putc(ch,stdout);\n}\nint main()\n{\n    FILE *fp1;\n    fp1=fopen(\"music.txt\",\"w+\");\n    getdata(fp1);\n    printf(\"Text is::\\n\");\n    printdata(fp1);\n    fp1=fopen(\"music.txt\",\"a+\");\n    printf(\"\\nEnter some more text::\\n\");\n    getdata(fp1);\n    printf(\"\\nAfter appending text is::\\n\");\n    printdata(fp1);\n    return 0;\n}\n</code></pre>\n\n<p>This code works fine. But if <code>rewind(fp);</code> is removed it acts weird. Why do i need to rewind the pointer? Though pointing to the same file aren't <code>fp1</code> and <code>fp</code> local to the function and so shouldn't affect each other as in the first program?</p>\n"}, {"tags": ["c++", "c", "struct"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 5, "creation_date": 1431515945, "post_id": 30213256, "comment_id": 48530503, "body": "Look at packing attribute for your compiler."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1431516027, "post_id": 30213256, "comment_id": 48530565, "body": "Could you reorder you fields to pack <code>8+24</code> together (as TOSL) ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431516033, "post_id": 30213256, "comment_id": 48530570, "body": "<code>#pragma pack(1)</code> kind of thingy?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1431516166, "post_id": 30213256, "comment_id": 48530701, "body": "@MohitJain: pack to 1 will reduce <code>Slot</code> size from <code>12</code> to <code>10</code>, not to <code>8</code> though."}, {"owner": {"reputation": 1031, "user_id": 535473, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/1Bkf9.jpg?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/535473/simon"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1431517294, "post_id": 30213256, "comment_id": 48531497, "body": "@Jarod42: why would it be 10? gcc 4.8.2 creates 8 byte sized Slot with pack 1."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1031, "user_id": 535473, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/1Bkf9.jpg?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/535473/simon"}, "edited": false, "score": 0, "creation_date": 1431517637, "post_id": 30213256, "comment_id": 48531756, "body": "@simon: I would expected that the <code>uint32_t</code> of bitfield cannot be shared with normal uint8_t<code>, and then just remove the padding between </code>S` and <code>O</code>, but it seems compilers do differently."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1431516477, "post_id": 30213385, "comment_id": 48530924, "body": "Not sure it is guaranty to have <code>sizeof(Slot) == 8</code> (even if gcc give 8 <a href=\"https://ideone.com/MrtHWQ\" rel=\"nofollow noreferrer\">Demo</a>)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431516513, "post_id": 30213385, "comment_id": 48530953, "body": "That&#39;s even bigger on my MSVC: 16 bytes"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1431516693, "post_id": 30213385, "comment_id": 48531057, "body": "Thats what I actually would expect fro any c++11 compliant compiler: O and T have to be separate memory locations, so I don&#39;t see, how they can be legally packed into a single 4-Byte memory location. @Jarod: did you Test with -std=c++11?"}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1431516775, "post_id": 30213385, "comment_id": 48531112, "body": "If you want bit fields, make everything bit fields. uint32_t T: 8. What you do is actually <i>guaranteed</i> to not fit into 8 bytes, because a non-bit field after a bit field <i>must</i> start with a new storage unit."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1431517166, "post_id": 30213385, "comment_id": 48531396, "body": "@MikeMB: yes, even with clang <a href=\"http://coliru.stacked-crooked.com/a/0bebe97ce90b7cc5\" rel=\"nofollow noreferrer\">Demo</a> (I also expected 16 bytes)."}, {"owner": {"reputation": 4166, "user_id": 1898070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c29fa44faffe872325c40c6d5aea0393?s=128&d=identicon&r=PG", "display_name": "Nipun Talukdar", "link": "https://stackoverflow.com/users/1898070/nipun-talukdar"}, "edited": false, "score": 0, "creation_date": 1431518710, "post_id": 30213385, "comment_id": 48532578, "body": "Dear downvoters, can you please explain why did you downvote the answer?"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1431520587, "post_id": 30213385, "comment_id": 48533915, "body": "Thats interesting, but as almost anything around bitfields is implementation defined, on should probably not be suprised"}], "tags": [], "owner": {"reputation": 4166, "user_id": 1898070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c29fa44faffe872325c40c6d5aea0393?s=128&d=identicon&r=PG", "display_name": "Nipun Talukdar", "link": "https://stackoverflow.com/users/1898070/nipun-talukdar"}, "is_accepted": false, "score": -3, "last_activity_date": 1431516211, "creation_date": 1431516211, "answer_id": 30213385, "question_id": 30213256, "link": "https://stackoverflow.com/questions/30213256/enforce-struct-size-8-byte/30213385#30213385", "title": "Enforce struct size 8 byte", "body": "<p>Try something like as shown below:</p>\n\n<pre><code>struct Slot {\n    uint32_t O : 24;\n    uint8_t T;\n    uint32_t L : 24;\n    uint8_t S;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1431516880, "post_id": 30213476, "comment_id": 48531195, "body": "This is just one of many things related to bit fields that the standard can&#39;t guarantee."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1431517012, "post_id": 30213476, "comment_id": 48531291, "body": "@Lundin Sir, I did not get you. What I understood from the standard is like, for <code>uint32_t</code>, two bitfields of <code>:24</code> and <code>:8</code>  will be packed into a single <code>uint32_t</code>. Please correct me if i&#39;m missing something."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1431517350, "post_id": 30213476, "comment_id": 48531539, "body": "Regarding uint32_t: 6.7.2.1/5 <code>A bit-field shall have a type that is a qualified or unqualified version of _Bool, signed int, unsigned int, or some other implementation-defined type. </code> It is not specified what will happen if you use any other type than the ones mentioned. If we ignore that and assume that uint32_t and int are the same size on the given system, then indeed the compiler must pack them together, because they fit, as stated by the text you cite. But there is also numerous other poorly-defined issues that may cause problems here, such as struct padding bytes."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1431516497, "creation_date": 1431516497, "answer_id": 30213476, "question_id": 30213256, "link": "https://stackoverflow.com/questions/30213256/enforce-struct-size-8-byte/30213476#30213476", "title": "Enforce struct size 8 byte", "body": "<p>I think, what you want, <code>8</code> bytes, is not something that the <code>C</code> standard can gurantee, with your first definition.</p>\n\n<p>Related: from <code>C11</code> standard, Chapter \u00a76.7.2.1, </p>\n\n<blockquote>\n  <p>An implementation may allocate any addressable storage unit large enough to hold a bitfield. If enough space remains, a bit-field that immediately follows another bit-field in a structure shall be packed into adjacent bits of the same unit. <strong>If insufficient space remains, whether a bit-field that does not fit is put into the next unit or overlaps adjacent units is implementation-defined.</strong></p>\n</blockquote>\n\n<p>You can have a way out however, if you can adjust the variable so that they can <em>fit</em> properly in 32-bit alignment, then</p>\n\n<p><code>24 + 8 + 24 + 8</code> = <code>64</code> bits = <code>8</code> bytes.</p>\n\n<p>you can have a structure of size <code>8</code> bytes.</p>\n"}, {"comments": [{"owner": {"reputation": 469, "user_id": 2225200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6320262316015851ca87d020f0f20089?s=128&d=identicon&r=PG", "display_name": "mschrimpf", "link": "https://stackoverflow.com/users/2225200/mschrimpf"}, "edited": false, "score": 0, "creation_date": 1431557364, "post_id": 30213498, "comment_id": 48556841, "body": "Works with g++ as well"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 3, "last_activity_date": 1431516572, "creation_date": 1431516572, "answer_id": 30213498, "question_id": 30213256, "link": "https://stackoverflow.com/questions/30213256/enforce-struct-size-8-byte/30213498#30213498", "title": "Enforce struct size 8 byte", "body": "<p>This gives size 8 bytes on MSVC without packing pragma.</p>\n\n<pre><code>struct Slot {\n    uint32_t O : 24;\n    uint32_t T : 8;\n    uint32_t L : 24;\n    uint32_t S : 8;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1431516834, "post_id": 30213532, "comment_id": 48531162, "body": "An array of bytes is better than a struct, since the former is always portable."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 2, "last_activity_date": 1431516690, "creation_date": 1431516690, "answer_id": 30213532, "question_id": 30213256, "link": "https://stackoverflow.com/questions/30213256/enforce-struct-size-8-byte/30213532#30213532", "title": "Enforce struct size 8 byte", "body": "<p>Your \"hack\" solution is exactly the right one. I suspect that the layout is determined by some outside factors, so you won't be able to map this to a struct in any better way. I suspect the order of bytes in your 24 bit numbers is also determined by the outside, and not by your compiler. </p>\n\n<p>To handle that kind of situation, a struct of bytes or just an array of bytes is the easiest and portable solution. </p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1431516704, "last_edit_date": 1495535049, "creation_date": 1431516704, "answer_id": 30213541, "question_id": 30213256, "link": "https://stackoverflow.com/questions/30213256/enforce-struct-size-8-byte/30213541#30213541", "title": "Enforce struct size 8 byte", "body": "<p>There is no way anyone can tell what your code will do or how the data will end up in memory, because the behavior of bit fields is poorly specified by the C standard. <a href=\"https://stackoverflow.com/questions/6043483/why-bit-endianness-is-an-issue-in-bitfields/6044223#6044223\">See this</a>.</p>\n\n<ul>\n<li>It is not specified what will happen when you use an <code>uint32_t</code> for a bit field.</li>\n<li>You can't know if there will be padding bits.</li>\n<li>You can't know if there will be padding bytes.</li>\n<li>You can't know where padding bits or bytes will end up.</li>\n<li>You can't know whether 8 bits of the 2nd 24 bit chunk end up immediately after previous data, or if it is aligned to the next 32 bit segment.</li>\n<li>You can't know which bit that is msb and which that is lsb.</li>\n<li>Endianess will cause problems.</li>\n</ul>\n\n<p>The solution is to not use bit fields at all. Use the bitwise operators instead. </p>\n"}, {"comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1431521343, "post_id": 30213609, "comment_id": 48534503, "body": "No it doesn&#39;t. I just tried this and it has size of 10 bytes like I would expect."}, {"owner": {"reputation": 1031, "user_id": 535473, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/1Bkf9.jpg?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/535473/simon"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1431524082, "post_id": 30213609, "comment_id": 48536724, "body": "What compiler did you used? It works with gcc 4.8.2."}], "tags": [], "owner": {"reputation": 1031, "user_id": 535473, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/1Bkf9.jpg?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/535473/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1431516870, "creation_date": 1431516870, "answer_id": 30213609, "question_id": 30213256, "link": "https://stackoverflow.com/questions/30213256/enforce-struct-size-8-byte/30213609#30213609", "title": "Enforce struct size 8 byte", "body": "<p>With this compiler dependant solution (works with gcc, msvc) the struct will be 8 bytes:</p>\n\n<pre><code>#pragma pack(push, 1)\nstruct Slot {\n    uint8_t T;\n    uint8_t S;\n    uint32_t O : 24;\n    uint32_t L : 24;\n};\n#pragma pack(pop)\n</code></pre>\n\n<p>This will set the alignment of the struct to 1 byte.</p>\n"}, {"tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": false, "score": 0, "last_activity_date": 1431521458, "creation_date": 1431521458, "answer_id": 30215348, "question_id": 30213256, "link": "https://stackoverflow.com/questions/30213256/enforce-struct-size-8-byte/30215348#30215348", "title": "Enforce struct size 8 byte", "body": "<p>On MSVC the following works and keeps your variable orders the same:</p>\n\n<pre><code>struct Slot {\n    uint64_t T : 8;\n    uint64_t S : 8;\n    uint64_t O : 24;\n    uint64_t L : 24;\n};\n</code></pre>\n\n<p>This is not guaranteed across compilers though. YMMV on other compilers.</p>\n"}], "owner": {"reputation": 469, "user_id": 2225200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6320262316015851ca87d020f0f20089?s=128&d=identicon&r=PG", "display_name": "mschrimpf", "link": "https://stackoverflow.com/users/2225200/mschrimpf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 30213498, "answer_count": 7, "score": 2, "last_activity_date": 1431521458, "creation_date": 1431515828, "question_id": 30213256, "link": "https://stackoverflow.com/questions/30213256/enforce-struct-size-8-byte", "title": "Enforce struct size 8 byte", "body": "<p>I have a struct that is supposed to be 8 byte in size.</p>\n\n<pre><code>struct Slot {\n    uint8_t T;\n    uint8_t S;\n    uint32_t O : 24;\n    uint32_t L : 24;\n}\n</code></pre>\n\n<p>However, <code>sizeof(Slot)</code> tells me the size is 12 byte.\nSo the compiler seems to pad the data although it shouldn't be necessary (probably because the 24-bit cannot be aligned properly).</p>\n\n<p>A hacky solution would be to use 3 one-byte fields instead of a single three-byte field:</p>\n\n<pre><code>struct Slot2 {\n    uint8_t T;\n    uint8_t S;\n    uint8_t O1;\n    uint8_t O2;\n    uint8_t O3;\n    uint8_t L1;\n    uint8_t L2;\n    uint8_t L3;\n}; // sizeof(Slot2) = 8\n</code></pre>\n\n<p>Is there any other way to achieve this?</p>\n"}, {"tags": ["sql", "c", "oracle", "embedded-sql"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1431515622, "post_id": 30213146, "comment_id": 48530275, "body": "and what is the error?"}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1431515669, "post_id": 30213146, "comment_id": 48530303, "body": "<code>EXEC SQL execute immediate  :stmt using :v1, :v2, :v3, :v4;</code> does not look like C to me."}, {"owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "edited": false, "score": 1, "creation_date": 1431515834, "post_id": 30213146, "comment_id": 48530414, "body": "This is PRO*C program."}], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "edited": false, "score": 0, "creation_date": 1431517932, "post_id": 30213556, "comment_id": 48531977, "body": "Hi Alex!Thjis was just a simplified sample of my function. The actual function is really complicated and different arrays as inputs. I have to build this query dynamically. Thank you for your help!"}, {"owner": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "reply_to_user": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "edited": false, "score": 0, "creation_date": 1431519832, "post_id": 30213556, "comment_id": 48533350, "body": "@Dax - it would still be helpful to future visitors to put the error you were getting into the question."}, {"owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "edited": false, "score": 0, "creation_date": 1431522919, "post_id": 30213556, "comment_id": 48535746, "body": "Good idea! :-) I&#39;ll do that"}], "tags": [], "owner": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "is_accepted": true, "score": 2, "last_activity_date": 1431517548, "last_edit_date": 1431517548, "creation_date": 1431516734, "answer_id": 30213556, "question_id": 30213146, "link": "https://stackoverflow.com/questions/30213146/does-anyone-know-why-my-execute-immediate-doesnt-complie-in-proc/30213556#30213556", "title": "Does anyone know why my execute immediate doesn&#39;t complie in PRO*C?", "body": "<p><code>EXECUTE IMMEDIATE</code> (<a href=\"https://docs.oracle.com/cd/E11882_01/appdev.112/e10825/pc_13dyn.htm#i1962\" rel=\"nofollow\">dynamic SQL method 1</a>) doesn't support the <code>USING</code> clause.</p>\n\n<p>You can prepare and execute it instead (using <a href=\"https://docs.oracle.com/cd/E11882_01/appdev.112/e10825/pc_13dyn.htm#i2337\" rel=\"nofollow\">dynamic SQL method 2</a>):</p>\n\n<pre><code>EXEC SQL PREPARE ora_stmt FROM :stmt;\nEXEC SQL EXECUTE stmt USING :v1, :v2, :v3, :v4;\n</code></pre>\n\n<p>It doesn't look you really need to do this dynamically at all, but if you choose to do that then you need to use the appropriate method.</p>\n\n<p>More details from the documentation:</p>\n\n<blockquote>\n  <p>Method 1 parses, then immediately executes the SQL statement using the EXECUTE IMMEDIATE command. The command is followed by a character string (host variable or literal) containing the SQL statement to be executed, which cannot be a query.</p>\n  \n  <p>The syntax of the EXECUTE IMMEDIATE statement follows:</p>\n\n<pre><code>EXEC SQL EXECUTE IMMEDIATE { :host_string | string_literal };\n</code></pre>\n</blockquote>\n\n<p>...</p>\n\n<blockquote>\n  <p>With Method 2, the SQL statement can contain placeholders for input host variables and indicator variables...</p>\n  \n  <p>The syntax of the PREPARE statement follows:</p>\n\n<pre><code>EXEC SQL PREPARE statement_name \n    FROM { :host_string | string_literal }; \n</code></pre>\n  \n  <p>PREPARE parses the SQL statement and gives it a name.</p>\n  \n  <p>The statement_name is an identifier used by the precompiler, not a host or program variable, and should not be declared in the Declare Section. It simply designates the PREPAREd statement you want to EXECUTE.</p>\n  \n  <p>The syntax of the EXECUTE statement is</p>\n\n<pre><code>EXEC SQL EXECUTE statement_name [USING host_variable_list];\n</code></pre>\n  \n  <p>where host_variable_list stands for the following syntax:</p>\n\n<pre><code>:host_variable1[:indicator1] [, host_variable2[:indicator2], ...] \n</code></pre>\n  \n  <p>EXECUTE executes the parsed SQL statement, using the values supplied for each input host variable.</p>\n</blockquote>\n"}], "owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "accepted_answer_id": 30213556, "answer_count": 1, "score": 0, "last_activity_date": 1431517548, "creation_date": 1431515547, "last_edit_date": 1431515981, "question_id": 30213146, "link": "https://stackoverflow.com/questions/30213146/does-anyone-know-why-my-execute-immediate-doesnt-complie-in-proc", "title": "Does anyone know why my execute immediate doesn&#39;t complie in PRO*C?", "body": "<p>Can anyone figure out what is my mistake in the following PRO*C code? I cannot compile this:</p>\n\n<pre><code>int v1 = 5096;\nint v2 = 8110;\nint v3 = 8111;\nint v4 = -1;\nchar stmt[6000];\n\nstrcpy(stmt, \" MERGE INTO LDX_STYLE_MOVEMENTS ssd  USING (SELECT :1 pk from dual) ssd_pk   ON (ssd.style_movements_pk = ssd_pk.pk)  WHEN NOT MATCHED THEN insert (style_movements_pk, style, from_subclass, to_subclass, reclassified_date, change_type_fk) values(LDX_STYLE_MOVEMENTS_SEQ.nextval , null, :2, :3, null, :4 )\");   \n\nEXEC SQL execute immediate  :stmt using :v1, :v2, :v3, :v4;\n</code></pre>\n"}, {"tags": ["c", "binaryfiles", "fread", "bin"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1431515010, "post_id": 30212889, "comment_id": 48529869, "body": "<code>fflush(stdin)</code> is undefined behavior, And your binary file is basically a text file, there is not much difference because you are only storing text. And put the <code>&#39;\\n&#39;</code> at the end of the printed line, because it flushes <code>stdout</code>, if you put it at the beginning of the line, some text might not be printed, I see that a lot in windows programming tutorials, but it doesn&#39;t make sense most of the time."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1431515219, "post_id": 30212889, "comment_id": 48530008, "body": "<code>while(fread(no,</code> --&gt; <code>while(fread(&amp;e,</code> ?  <code>printf(&quot;\\n%s %s %s %s&quot;, &amp;e.name, &amp;e.surname, e.no, &amp;e.aldigiDersKodu);</code> &lt;-- remove <code>&amp;</code>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1431516653, "post_id": 30212889, "comment_id": 48531044, "body": "Do you ever close fp? Why don&#39;t you write a very simple complete test program (simplify your struct to have only one member)? That would also help yourself."}, {"owner": {"reputation": 338, "user_id": 2586896, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1115259043/picture?type=large", "display_name": "Osman Villi", "link": "https://stackoverflow.com/users/2586896/osman-villi"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1431525355, "post_id": 30212889, "comment_id": 48537822, "body": "@BLUEPIXY  while(fread(no, --&gt; while(fread(&amp;e, ? printf(&quot;\\n%s %s %s %s&quot;, &amp;e.name, &amp;e.surname, e.no, &amp;e.aldigiDersKodu); &lt;-- remove &amp;    =&gt; explain this comment please :) which part i should remove ??"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1431525440, "post_id": 30212889, "comment_id": 48537893, "body": "E.g <code>&amp;e.name</code> change to <code>e.name</code>."}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1431517504, "creation_date": 1431517504, "answer_id": 30213856, "question_id": 30212889, "link": "https://stackoverflow.com/questions/30212889/reading-and-writing-binary-file-in-c/30213856#30213856", "title": "Reading and writing binary file in C", "body": "<p>First of all, as you save to file a structure, you can/have to read a structure.</p>\n\n<pre><code>while(fread(&amp;e, sizeof(struct emp), 1, fp) == 1)\n</code></pre>\n\n<p>Secondly you have to pass a poiter to %s format then </p>\n\n<pre><code>printf(\"\\n%s %s %s %s\", e.name, e.surname, e.no, e.aldigiDersKodu);\n</code></pre>\n\n<p>Or at least</p>\n\n<pre><code>printf(\"\\n%s %s %s %s\", &amp;e.name[0], &amp;e.surname[0], &amp;e.no[0], &amp;e.aldigiDersKodu[0]);\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 2586896, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1115259043/picture?type=large", "display_name": "Osman Villi", "link": "https://stackoverflow.com/users/2586896/osman-villi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1048, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1431518974, "creation_date": 1431514814, "last_edit_date": 1495542111, "question_id": 30212889, "link": "https://stackoverflow.com/questions/30212889/reading-and-writing-binary-file-in-c", "title": "Reading and writing binary file in C", "body": "<p>Firstly, I read here:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/13784549/reading-binary-files-in-c\">reading-binary-files-in-c</a></li>\n<li><a href=\"https://stackoverflow.com/questions/15752546/binary-file-reading-writing-in-c\">binary-file-reading-writing-in-c</a></li>\n</ol>\n\n<p>I am trying to read binary file in C. And wrote this code:</p>\n\n<pre><code>struct emp\n{\n    char name[20];\n    char surname[20];\n    char no[20];\n    char aldigiDersKodu[20];\n};\nstruct emp e;\n***\n***\n***\nFILE *fp;\nfp = fopen(\"student.bin\",\"rb+\");\nif(fp == NULL)\n{\n    fp = fopen(\"student.bin\",\"wb+\");\n    if(fp == NULL)\n    {\n        printf(\"File is not opening.\");\n        exit(1);\n    }\n}\n***\n***\n***\nfseek(fp, 0, SEEK_END);\n\nanother = 'y';\nwhile(another == 'y')\n{\n     printf(\"\\nOgrencinin Adi: \");\n     scanf(\"%s\",e.name);\n     printf(\"\\nOgrencinin Soyadi: \");\n     scanf(\"%s\", &amp;e.surname);\n     printf(\"\\nOgrencinin Numarasi: \");\n     scanf(\"%s\", &amp;e.no);\n\n     fwrite(&amp;e, sizeof(struct emp), 1, fp);\n\n     printf(\"\\nYeni Ogrenci Ekle(y/n)\\n\");\n     fflush(stdin);\n     another = getche();\n}\n***\n***\n***\n</code></pre>\n\n<p>And I am adding lesson name and lesson code(ex: Maths,M1) to student.<strong>(SAME METHOD)</strong> </p>\n\n<p>This read to binary file code:</p>\n\n<pre><code>scanf(\"%s\", no);\nrewind(fp);\nwhile(fread(no, sizeof(struct emp), 1, fp) == 1)\n{\n     printf(\"\\n%s %s %s %s\", &amp;e.name, &amp;e.surname, e.no, &amp;e.aldigiDersKodu);\n}\n</code></pre>\n\n<p>And when I read binary file, I was looking like this <strong>in console</strong>:</p>\n\n<p><img src=\"https://i.stack.imgur.com/OLmVj.png\" alt=\"enter image description here\"></p>\n\n<p>And my bin file look like this:</p>\n\n<p>Aytunc  \u00f8A\u2018v:A\u2018vX\u00ff\u00e6\u00afYalcinkaya  \u00b0@ \u00c0\u00fe( 1,Aytunc,Yalcinkaya,M \u2018v\u00cdE\u2018v\u00b0@ \u201d\u00ff( @ Osman   \u00f8A\u2018v:A\u2018vX\u00ff\u00e6\u00afVilli kaya  \u00b0@ \u00c0\u00fe( 2 ( \u00cc\u00ff(  r\u2019v\u00f4@_\u00d9\u00fe\u00ff\u00ff\u00ff:A\u2018v\u00cdE\u2018v\u00b0@ \u201d\u00ff( @ </p>\n\n<p>But I want to look this output in console screen:</p>\n\n<p><em>1 Aytunc Yalcinkaya M</em>  </p>\n"}, {"tags": ["c", "lapack", "lapacke"], "comments": [{"owner": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 0, "creation_date": 1431515794, "post_id": 30212743, "comment_id": 48530391, "body": "I found <a href=\"https://software.intel.com/en-us/forums/topic/499788\" rel=\"nofollow noreferrer\">this thread</a> which indicates an error in LAPACKE with row major packing when computing a cholesky factorization. I am unsure if <code>zgetrf</code>performs one, and if it triggers a similar bug, but it seems possible, given you want to have an LU decomposition."}, {"owner": {"reputation": 3112, "user_id": 2707697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9da9a865b63faae8438d2d57c1c71b9?s=128&d=identicon&r=PG&f=1", "display_name": "ztik", "link": "https://stackoverflow.com/users/2707697/ztik"}, "reply_to_user": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 0, "creation_date": 1431519154, "post_id": 30212743, "comment_id": 48532856, "body": "@martin the cholesky factorization is the LL^T decomposition."}, {"owner": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "reply_to_user": {"reputation": 3112, "user_id": 2707697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9da9a865b63faae8438d2d57c1c71b9?s=128&d=identicon&r=PG&f=1", "display_name": "ztik", "link": "https://stackoverflow.com/users/2707697/ztik"}, "edited": false, "score": 0, "creation_date": 1431519273, "post_id": 30212743, "comment_id": 48532944, "body": "@ctheo yes, which still is a special case of a LU decomposition beneficial in some cases. But you are right, the matrix is not positive definite."}, {"owner": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 0, "creation_date": 1431519872, "post_id": 30212743, "comment_id": 48533381, "body": "In any case, the thread mentions a bug in a transposition in case of symmectric matrices which this could still be (and I think that it has to be a bug in either LAPACK or LAPACKE because it otherwise doesn&#39;t make sense that it works in column major mode but not in row major mode)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 0, "creation_date": 1431519939, "post_id": 30212743, "comment_id": 48533428, "body": "@martin It is not really a special case since one of the results of the the LU-decomposition will be 1 on the diagonal, unlike cholesky. But yeah, probably a bug."}, {"owner": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 0, "creation_date": 1431520265, "post_id": 30212743, "comment_id": 48533673, "body": "Did you try the mentioned version with the fix incorporated?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 0, "creation_date": 1431520430, "post_id": 30212743, "comment_id": 48533796, "body": "@martin Yes, using <code>LAPACK_COL_MAJOR</code> and the solving <code>&#39;T&#39;</code> instead of <code>&#39;N&#39;</code> appears to work."}, {"owner": {"reputation": 3112, "user_id": 2707697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9da9a865b63faae8438d2d57c1c71b9?s=128&d=identicon&r=PG&f=1", "display_name": "ztik", "link": "https://stackoverflow.com/users/2707697/ztik"}, "edited": false, "score": 0, "creation_date": 1431520481, "post_id": 30212743, "comment_id": 48533832, "body": "I checked it with my build and works fine in both cases. Also <code>valgrind</code> reports nothing. Which version of LAPACK do you use?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 3112, "user_id": 2707697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9da9a865b63faae8438d2d57c1c71b9?s=128&d=identicon&r=PG&f=1", "display_name": "ztik", "link": "https://stackoverflow.com/users/2707697/ztik"}, "edited": false, "score": 0, "creation_date": 1431520609, "post_id": 30212743, "comment_id": 48533930, "body": "@ctheo 3.5. as downloaded and built yesterday. Maybe I did something wrong building the lib, that&#39;s why I included the build details in the options."}, {"owner": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 0, "creation_date": 1431520658, "post_id": 30212743, "comment_id": 48533968, "body": "Just as a clarification: Both <code>ROW_MAJOR</code> with <code>T</code> and <code>COL_MAJOR</code> with <code>N</code> work? And the other combinations don&#39;t work?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1431520831, "post_id": 30212743, "comment_id": 48534096, "body": "No, I needed a workaround to get my stuff done, so I ditched <code>ROW_MAJOR</code> completely and pretended that the matrix is <code>COL_MAJOR</code>, then fixed that lie by using <code>&#39;T&#39;</code> instead. I believe this mathematically is the same thing in the end. For my application, I only cared about the solution, not the decomposition"}], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 0, "last_activity_date": 1431536022, "creation_date": 1431536022, "answer_id": 30220942, "question_id": 30212743, "link": "https://stackoverflow.com/questions/30212743/using-lapacke-zgetrs-with-lapack-row-major-causes-illegal-memory-access/30220942#30220942", "title": "Using LAPACKE_zgetrs with LAPACK_ROW_MAJOR causes illegal memory access", "body": "<p>After some more research and overthinking things, I found the culprit:</p>\n\n<p>Using <code>LAPACK_ROW_MAJOR</code> switches the meaning of the <code>ld*</code> leading dimension parameters. While the leading dimension of a normal Fortran array is the numbers of <em>rows</em>, switching to <code>ROW_MAJOR</code> switches its meaning to the number of <em>columns</em>. So the correct calls (giving correct results) would be:</p>\n\n<pre><code>LAPACKE_zgetrs(LAPACK_ROW_MAJOR, 'N', 2, 1, mat, 2, p, vec, 1);\n</code></pre>\n\n<p>where the second <code>2</code> is the number of <em>columns</em> (not rows!) of <code>mat</code>, and the last parameter must equal the number of right hand sides <code>nrhs</code> (not the number of variables!). I isolated this very call because all the other calls in my project dealt with square matrices, so the \"wrong\" calls do not have any negative effect due to symmetry.</p>\n\n<p>As usual, if you are skipping columns at the end, the leading dimensions get bigger accordingly, as they would with skipping rows in the normal setting.</p>\n\n<p>Obviously, this is not mentioned in the Fortran documentations. Unfortunately, I did see no such remark in the Lapacke documentation, which would have saved me a couple of hours of my life. :)</p>\n"}], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 30220942, "answer_count": 1, "score": 1, "last_activity_date": 1431536022, "creation_date": 1431514439, "last_edit_date": 1431522709, "question_id": 30212743, "link": "https://stackoverflow.com/questions/30212743/using-lapacke-zgetrs-with-lapack-row-major-causes-illegal-memory-access", "title": "Using LAPACKE_zgetrs with LAPACK_ROW_MAJOR causes illegal memory access", "body": "<p>I am trying to solve a linear system using the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;lapacke.h&gt;\n\nint main () {\n    lapack_complex_double mat[4];\n    lapack_complex_double vec[2];\n    lapack_int p[2];\n\n    mat[0] = lapack_make_complex_double(1,0);\n    mat[1] = lapack_make_complex_double(1,0);\n    mat[2] = lapack_make_complex_double(1,0);\n    mat[3] = lapack_make_complex_double(-1,0);\n\n    vec[0] = lapack_make_complex_double(1,0);\n    vec[1] = lapack_make_complex_double(1,0);\n\n    LAPACKE_zgetrf(LAPACK_ROW_MAJOR, 2, 2, mat, 2, p);\n    LAPACKE_zgetrs(LAPACK_ROW_MAJOR, 'N', 2, 1, mat, 2, p, vec, 2);\n\n    printf(\"%g %g\\n\", lapack_complex_double_real(vec[0]),\n        lapack_complex_double_imag(vec[0]));\n    return 0;\n}\n</code></pre>\n\n<p>For some reasons, this causes illegal memory access in <code>LAPACKE_zgetrs</code> (as detected by <code>valgrind</code> and by my big program crashing in <code>zgetrs</code> because of <em>\"glibc detected corruption or double free\"</em>). I did not include this in my SSCCE for brevity, but all <code>LAPACKE</code> routines that return, return 0.</p>\n\n<p>The same code with <code>LAPACK_COL_MAJOR</code> runs and valgrinds flawlessly.</p>\n\n<p>My lapacke, lapack etc. is self-built for Ubuntu 12.04. I used the following settings in the lapack CMake file:</p>\n\n<pre><code>BUILD_COMPLEX       ON\nBUILD_COMPLEX16     ON\nBUILD_DOUBLE        ON\nBUILD_SHARED_LIBS   ON\nBUILD_SINGLE        ON\nBUILD_STATIC_LIBS   ON\nBUILD_TESTING       ON\nCMAKE_BUILD_TYPE    Release\nLAPACKE             ON\nLAPACKE_WITH_TMG    ON\n</code></pre>\n\n<p>and the rest (the optimized blas/lapack and xblas) off. There were no errors during the build and all tests succeeded.</p>\n\n<p>Where did I mess up?</p>\n\n<p><strong>Edit:</strong> I just tried this with Fedora21 and the packaged lapacke. It did <em>not</em> reproduce the error.</p>\n\n<p><strong>Edit 2:</strong> While it does not reproduce the memory fails, it produces a wrong solution, namely <code>(1 + 0I, 1 + 0I)</code> for the above input (should be <code>(1,0)</code>)</p>\n"}, {"tags": ["python", "c", "pointers", "struct", "ctypes"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1431540196, "post_id": 30212620, "comment_id": 48548170, "body": "After casting, access the fields directly as attributes of the dereferenced pointer, e.g. <code>user_data[0].MessageCount</code> or <code>user_data.contents.MessageCount</code>. I don&#39;t know where you got the idea to use <code>_type_</code>."}, {"owner": {"reputation": 11632, "user_id": 687739, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0f8509ebd65dc536971efa17a619aa08?s=128&d=identicon&r=PG", "display_name": "Jason Strimpel", "link": "https://stackoverflow.com/users/687739/jason-strimpel"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1431588827, "post_id": 30212620, "comment_id": 48566316, "body": "Added <code>CoreSystem</code> struct above. The <code>MessageCount</code> is actually a <code>__int64</code>, updated in edit. I was looking at <code>_type_</code> in the debugger. It (naturally) contains the field types - not any values. Thanks for your help..."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1431590813, "post_id": 30212620, "comment_id": 48567292, "body": "It&#39;s really storing a pointer in the <code>int</code> field <code>UserData</code>. That&#39;s just wrong. This will only work in a 32-bit process. 64-bit is out of the question."}, {"owner": {"reputation": 682, "user_id": 2534758, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/hEjYN.jpg?s=128&g=1", "display_name": "tauseef_CuriousGuy", "link": "https://stackoverflow.com/users/2534758/tauseef-curiousguy"}, "edited": false, "score": 0, "creation_date": 1504475814, "post_id": 30212620, "comment_id": 79016289, "body": "Did you solve your problem yet ?"}], "owner": {"reputation": 11632, "user_id": 687739, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0f8509ebd65dc536971efa17a619aa08?s=128&d=identicon&r=PG", "display_name": "Jason Strimpel", "link": "https://stackoverflow.com/users/687739/jason-strimpel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431588573, "creation_date": 1431514101, "last_edit_date": 1431588573, "question_id": 30212620, "link": "https://stackoverflow.com/questions/30212620/ctypes-implementation-of-struct-assignment-in-c", "title": "ctypes implementation of struct assignment in c", "body": "<p>I've inherited some C code I am using to translate to Python code using ctypes. I've come across a line of C that I'm having trouble with:</p>\n\n<pre><code>int __stdcall Callback(const CoreSystem* pCoreSys) {\n    UserDataStruct* pUserData = (UserDataStruct*) pCoreSys-&gt;UserData;\n    ++pAppUserData-&gt;MessageCount;\n    return 0;\n}\n</code></pre>\n\n<p>This is an assignment in a callback function. I am reading this as:</p>\n\n<p>\"Set a local variable <code>pUserData</code> which is a pointer to a struct of type <code>UserDataStruct</code> (or is this a local variable which is of <em>type</em> pointer to struct?) to <code>pCoreSys-&gt;UserData</code> casted as a pointer to <code>UserDataStruct</code>\". Note that <code>pCoreSys-&gt;UserData</code> is an <code>int</code>. Also note that I most likely have the interpretation of pointers a incorrect and welcome an astute reader to kindly correct me.</p>\n\n<p>The second line then increments the <code>MessageCount</code> property (?) of the <code>struct</code>.</p>\n\n<p>This is the <code>UserDataStruct</code>:</p>\n\n<pre><code>typedef struct\n{\n  int UserParms;\n  int ErrorCode;\n  __int64 MessageCount;\n  unsigned char IsOSI;\n  unsigned char IsCoreRunning;\n  char RunStatus;\n  int NumInChain;\n} UserDataStruct;\n</code></pre>\n\n<p>This is <code>CoreSystem</code>:</p>\n\n<pre><code>struct CoreSystem {\n  int UserData;\n  int DLLVersion;\n  int ClockUpdateInterval;\n  int Status;\n  int StatusData;\n  const char* StatusDisplay;\n  const char* TapeDisplay;\n  void* Module;\n  void* ThreadInstance;\n};\n</code></pre>\n\n<p>This callback function is run potentially millions of times so I am assuming the pointer allows the ability to essentially keep state.</p>\n\n<p>My implementation of the <code>struct(ure)</code> in Python:</p>\n\n<pre><code>class UserDataStruct(Structure):\n    _fields_ = [\n        ('UserParams', c_int),\n        ('ErrorCode', c_int),\n        ('MessageCount', c_longlong),\n        ('IsOSI', c_ubyte),\n        ('IsCoreRunning', c_ubyte),\n        ('RunStatus', c_char),\n        ('NumInChain', c_int)]\n</code></pre>\n\n<p>I've tried the following to implement the assignment line:</p>\n\n<pre><code>user_data = cast(pCoreSys.contents.UserData, POINTER(UserDataStruct))\n</code></pre>\n\n<p>This runs and <code>user_data._type_</code> contains the elements from the <code>UserDataStruct._fields_</code> list but I cannot seem to access them or increment them. I realize I may have to initialize the struct but then at each call of the callback function, it will be reinitialized losing the set values (?). Also, the C implementation does not seem to initialize the struct either.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li>Have I interpreted the assignment line of C correctly? </li>\n<li>How do I replicate in Python using ctypes? </li>\n<li>How would I manipulate the values (increment, decrement, etc.) in the Python ctypes implementation? </li>\n<li>Why (and how) is the C dev setting a variable of type struct to an integer?</li>\n</ol>\n"}, {"tags": ["c", "regex"], "answers": [{"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1431514142, "post_id": 30212481, "comment_id": 48529248, "body": "Yes, otherwise you can always use the BRE syntax: <code>reti = regcomp(&amp;regex, &quot;[a-c]\\\\{2\\\\}&quot;, 0);</code>"}, {"owner": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431514485, "post_id": 30212481, "comment_id": 48529488, "body": "Thanks a Lot for your answer. The problem got fixed."}, {"owner": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431514639, "post_id": 30212481, "comment_id": 48529611, "body": "The output is showing as always match if i give wrong input .               reti = regcomp(&amp;regex, &quot;[a-c]{4}&quot;, REG_EXTENDED);         if( reti ){ fprintf(stderr, &quot;Could not compile regex\\n&quot;); return(1); }  /* Execute regular expression */         reti = regexec(&amp;regex, &quot;abcbddddddd&quot;, 0, NULL, 0);         if( !reti ){                 puts(&quot;Match&quot;);         }         else if( reti == REG_NOMATCH ){                 puts(&quot;No match&quot;);         }"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1431514817, "post_id": 30212481, "comment_id": 48529732, "body": "BRE in c has the <code>{n}</code> quantifier, you only need to escape curly brackets. <a href=\"http://ideone.com/x7vlIO\" rel=\"nofollow noreferrer\">ideone.com/x7vlIO</a>"}, {"owner": {"reputation": 15387, "user_id": 637284, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1df443ce610afdbcb3da8daf716dfd?s=128&d=identicon&r=PG", "display_name": "halex", "link": "https://stackoverflow.com/users/637284/halex"}, "reply_to_user": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431515708, "post_id": 30212481, "comment_id": 48530333, "body": "@user1720713 This problem occurs because you use the wrong regex. Your version of <code>regexec</code> matches if your regex is found anywhere in your string. If you only want to match whole lines that suffice your regex add the regex special characters<code>^</code> at the beginning and <code>$</code> at the end, so change your regex to <code>^[a-c]{2}$</code>"}, {"owner": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431516159, "post_id": 30212481, "comment_id": 48530694, "body": "Even i changed as per suggestion, the output is showing always as &quot;Match&quot; if i give wrong input.                                                                    reti = regcomp(&amp;regex, &quot;[a-c]\\\\{2\\\\}&quot;, 0);         if( reti ){ fprintf(stderr, &quot;Could not compile regex\\n&quot;); return(1); }  /* Execute regular expression */         reti = regexec(&amp;regex, &quot;acdbdffdgdh&quot;, 0, NULL, 0);         if( !reti ){                 puts(&quot;Match&quot;);         }         else if( reti == REG_NOMATCH ){                 puts(&quot;No match&quot;);         }"}, {"owner": {"reputation": 15387, "user_id": 637284, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1df443ce610afdbcb3da8daf716dfd?s=128&d=identicon&r=PG", "display_name": "halex", "link": "https://stackoverflow.com/users/637284/halex"}, "reply_to_user": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431516309, "post_id": 30212481, "comment_id": 48530812, "body": "@user1720713 Again you forgot <code>^</code> at the beginning and <code>$</code> at the end of your regex to match the whole line"}, {"owner": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431516457, "post_id": 30212481, "comment_id": 48530908, "body": "But Actual;y i need to implement for this regular expression is :                  &quot;[0-9a-f]{4}\\\\.[0-9a-f]{4}\\\\.[0-9a-f]{4}&quot;;  In this case how do i use ^ and $"}, {"owner": {"reputation": 15387, "user_id": 637284, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1df443ce610afdbcb3da8daf716dfd?s=128&d=identicon&r=PG", "display_name": "halex", "link": "https://stackoverflow.com/users/637284/halex"}, "reply_to_user": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431516601, "post_id": 30212481, "comment_id": 48531014, "body": "@user1720713 <code>&quot;^[0-9a-f]{4}\\\\.[0-9a-f]{4}\\\\.[0-9a-f]{4}$&quot;</code> The symbol <code>^</code> at the beginning means <i>match beginning of line</i> and the <code>$</code> at the end means <i>match end of a line</i>"}, {"owner": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431517228, "post_id": 30212481, "comment_id": 48531445, "body": "Thanks a lot for your help. Your help solved my issues."}, {"owner": {"reputation": 15387, "user_id": 637284, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1df443ce610afdbcb3da8daf716dfd?s=128&d=identicon&r=PG", "display_name": "halex", "link": "https://stackoverflow.com/users/637284/halex"}, "reply_to_user": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431517580, "post_id": 30212481, "comment_id": 48531712, "body": "@user1720713 The best way to say thank you is accepting the answer that helped <a href=\"http://stackoverflow.com/help/accepted-answer\">stackoverflow.com/help/accepted-answer</a> :)"}, {"owner": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "edited": false, "score": 0, "creation_date": 1431522107, "post_id": 30212481, "comment_id": 48535101, "body": "Can You provide the correct pattern for this string                                 [0-9a-fA-F]{4}(.[0-9a-fA-F]{4}){2}"}], "tags": [], "owner": {"reputation": 15387, "user_id": 637284, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1df443ce610afdbcb3da8daf716dfd?s=128&d=identicon&r=PG", "display_name": "halex", "link": "https://stackoverflow.com/users/637284/halex"}, "is_accepted": true, "score": 6, "last_activity_date": 1431516374, "last_edit_date": 1431516374, "creation_date": 1431513730, "answer_id": 30212481, "question_id": 30212167, "link": "https://stackoverflow.com/questions/30212167/curley-braces-are-not-working-in-regular-expression-in-c-language/30212481#30212481", "title": "Curley braces are not working in regular expression in C language", "body": "<p>You are using the Basic Regular Expressions dialect that has no knowledge of the quantifier <code>{n}</code> in the regex.</p>\n\n<p>One solution would be to supply the option <code>REG_EXTENDED</code> as the last argument instead of 0 when creating your <code>regex_t</code> object.</p>\n\n<pre><code>reti = regcomp(&amp;regex, \"[a-c]{2}\", REG_EXTENDED);\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/oIBXxu\" rel=\"nofollow\">http://ideone.com/oIBXxu</a> for a Demo of your code with my modification.</p>\n\n<hr>\n\n<p>As Casimir et Hippolyte notes in the comments Basic Regular Expressions support the <code>{}</code> quantifier as well but the curly braces must be escaped with a <code>\\</code> in the regex which again has to be escaped in the C string as <code>\\\\</code>. So you can use the line</p>\n\n<pre><code>reti = regcomp(&amp;regex, \"[a-c]\\\\{2\\\\}\", 0);\n</code></pre>\n\n<p>as well as an alternative to the solution above(running Demo with this line modified under <a href=\"http://ideone.com/x7vlIO\" rel=\"nofollow\">http://ideone.com/x7vlIO</a>).</p>\n\n<p>You can check <a href=\"http://www.regular-expressions.info/posix.html\" rel=\"nofollow\">http://www.regular-expressions.info/posix.html</a> for more information about the difference between Basic and Extended Regular Expressions.</p>\n"}], "owner": {"reputation": 166, "user_id": 1720713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ac272b7dd610752d8ec81571c8606a?s=128&d=identicon&r=PG", "display_name": "user1720713", "link": "https://stackoverflow.com/users/1720713/user1720713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 30212481, "answer_count": 1, "score": 4, "last_activity_date": 1431516374, "creation_date": 1431512867, "question_id": 30212167, "link": "https://stackoverflow.com/questions/30212167/curley-braces-are-not-working-in-regular-expression-in-c-language", "title": "Curley braces are not working in regular expression in C language", "body": "<p>The Curly braces{} are not working in C language Regular expressions, it is always giving output as NO match , if i give correct input as \"ab\" or \"ac\". I would request to help in this case.</p>\n\n<pre><code> #include &lt;sys/types.h&gt;\n  #include &lt;regex.h&gt;\n  #include &lt;stdio.h&gt;\n\n\n   int main(int argc, char *argv[]){ regex_t regex;\n        int reti;\n        char msgbuf[100];\n\n        /* Compile regular expression */\n        reti = regcomp(&amp;regex, \"[a-c]{2}\", 0);\n        if( reti ){ fprintf(stderr, \"Could not compile regex\\n\"); return(1); }\n\n        /* Execute regular expression */\n        reti = regexec(&amp;regex, \"ab\", 0, NULL, 0);\n        if( !reti ){\n                puts(\"Match\");\n        }\n        else if( reti == REG_NOMATCH ){\n                puts(\"No match\");\n        }\n        else{\n                regerror(reti, &amp;regex, msgbuf, sizeof(msgbuf));\n                fprintf(stderr, \"Regex match failed: %s\\n\", msgbuf);\n                return 1;\n        }\n\n       /* Free compiled regular expression if you want to use the regex_t again */\n        regfree(&amp;regex);\n\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "execution-time"], "comments": [{"owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431512001, "post_id": 30211791, "comment_id": 48527877, "body": "Btw if i put clock t2 after &quot;for loop&quot;,it shows difference so elapsed time"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1431512283, "post_id": 30211791, "comment_id": 48528046, "body": "Possibly because of the granularity of <code>clock()</code>. In <code>time.h</code> in my MSVC there is <code>#define CLOCKS_PER_SEC 1000</code>"}, {"owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431513890, "post_id": 30211791, "comment_id": 48529065, "body": "Same here i use visual studio 2013.CLOCKS_PER_SEC defined as 1000.My problem is that &quot;why t2 and t1 are the same&quot;?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431515063, "post_id": 30211791, "comment_id": 48529907, "body": "Haven&#39;t you answered your own question in your very first comment? The time difference is too small to be measured by this method, without adding more code to execute."}, {"owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431515466, "post_id": 30211791, "comment_id": 48530184, "body": "@WeatherVane yes i thought the same thing, but i am a beginner C programmer so i was not sure of it.So is there a way you know to measure the execution time of this function?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1431515740, "post_id": 30211791, "comment_id": 48530353, "body": "Usually, you contrive a way to measure a large number of loops of what you want to time. 10, 100, 1000, whatever produces a significant result. Bear in mind too that on a multi-tasking OS each iteration will take a slightly different time, and so you&#39;ll also establish a typical average.The result might also be affected by processor caching and/or file caching."}, {"owner": {"reputation": 620, "user_id": 6180077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJGsl.jpg?s=128&g=1", "display_name": "Abdullah Farweez", "link": "https://stackoverflow.com/users/6180077/abdullah-farweez"}, "edited": false, "score": 0, "creation_date": 1494997474, "post_id": 30211791, "comment_id": 75059338, "body": "time taken to execute a complete function <a href=\"http://stackoverflow.com/a/40380118/6180077\">stackoverflow.com/a/40380118/6180077</a>"}], "answers": [{"comments": [{"owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431514035, "post_id": 30211987, "comment_id": 48529170, "body": "Your solutions gave lots of error,i am trying to fix them.And as a reminder : This is a C program not C++."}, {"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "reply_to_user": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431514318, "post_id": 30211987, "comment_id": 48529380, "body": "@BerkKarabacak:- What is the error which you are getting?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431514632, "post_id": 30211987, "comment_id": 48529608, "body": "<code>double(t2- t1)</code> --&gt; <code>(double)(t2- t1)</code>"}, {"owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431514851, "post_id": 30211987, "comment_id": 48529752, "body": "For your second solution : when casting(t2-t1) to double it says &quot;Expected an expression&quot; For your first solution :  Cannot open include file: &#39;sys/time.h&#39;: No such file or directory.And if i delete &quot;sys&quot; part from &lt;sys/time.h&gt; then it says  &#39;td&#39; uses undefined struct &#39;timediff&quot;"}, {"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "reply_to_user": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431514947, "post_id": 30211987, "comment_id": 48529822, "body": "@BerkKarabacak:- Can you try to use <code>double d= (double)(t2- t1) &#47; CLOCKS_PER_SEC;</code>?"}, {"owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431515100, "post_id": 30211987, "comment_id": 48529927, "body": "I have tried that,still zero.Why you hope getting different result?As long as t2 and t1 are same,it is gonna show zero"}, {"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "reply_to_user": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431515185, "post_id": 30211987, "comment_id": 48529984, "body": "@BerkKarabacak: I did not hope that t2 and t1 to be same, I thought it would be a very small very value but certainly not 0. But looks like my assumption is wrong"}, {"owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431515263, "post_id": 30211987, "comment_id": 48530047, "body": "I feel like before it finishes function,it runs &quot;clock_t t2 = clock()&quot; line but i guess it is not possible in C"}, {"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "reply_to_user": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431515424, "post_id": 30211987, "comment_id": 48530156, "body": "@BerkKarabacak:- No thats not possible. clock_t t2 = clock() will be executed only after the method call"}], "tags": [], "owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1431512454, "last_edit_date": 1495541430, "creation_date": 1431512454, "answer_id": 30211987, "question_id": 30211791, "link": "https://stackoverflow.com/questions/30211791/getting-0-when-trying-to-measure-the-execution-time-of-function-in-c/30211987#30211987", "title": "Getting 0 when trying to measure the execution time of function in C", "body": "<p>Try like this:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ndouble gettime(void)\n{\n   struct timediff td;\n   double d=0;\n   gettimeofday(&amp;td, NULL);\n   d=td.td_usec;\n   d+= (double)td.td_usecs / 1000000.;\n   return d;\n}\n\ndouble t1=gettime();\nInsertionSort(data, n);\nprintf(\"%.6f\", gettime() - t1);\n</code></pre>\n\n<p>or may be you need to change your code like this:</p>\n\n<pre><code> clock_t t1 = clock();\n InsertionSort(data, n);\n clock_t t2 = clock();\n double d= double(t2- t1) / CLOCKS_PER_SEC;\n</code></pre>\n\n<p>You can also refer: <strong><a href=\"https://stackoverflow.com/questions/2808398/easily-measure-elapsed-time\">Easily measure elapsed time</a></strong></p>\n"}, {"comments": [{"owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431513433, "post_id": 30212080, "comment_id": 48528767, "body": "Nope,it still prints 0"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "edited": false, "score": 0, "creation_date": 1431513702, "post_id": 30212080, "comment_id": 48528938, "body": "Well it is still incorrect to pass an integral value as a floating-point argument. The compiler doesn&#39;t generate code to convert the value to <code>double</code> to suit the <code>%g</code> specifier."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1431512646, "creation_date": 1431512646, "answer_id": 30212080, "question_id": 30211791, "link": "https://stackoverflow.com/questions/30211791/getting-0-when-trying-to-measure-the-execution-time-of-function-in-c/30212080#30212080", "title": "Getting 0 when trying to measure the execution time of function in C", "body": "<p>You are incorrectly using the floating-point format specifier <code>%g</code>. Try this</p>\n\n<pre><code>printf(\"The time taken is.. %u clock ticks\", (unsigned)(t2 -t1));\n</code></pre>\n\n<p>Always assuming the execution time is longer than the granularity of <code>clock()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 0, "last_activity_date": 1445419877, "creation_date": 1445419877, "answer_id": 33255644, "question_id": 30211791, "link": "https://stackoverflow.com/questions/30211791/getting-0-when-trying-to-measure-the-execution-time-of-function-in-c/33255644#33255644", "title": "Getting 0 when trying to measure the execution time of function in C", "body": "<p>The time difference is too small to be measured by this method, without adding more code to execute. \u2013 Weather Vane</p>\n\n<p>Usually, you contrive a way to measure a large number of loops of what you want to time. 10, 100, 1000, whatever produces a significant result. Bear in mind too that on a multi-tasking OS each iteration will take a slightly different time, and so you'll also establish a typical average.The result might also be affected by processor caching and/or file caching. \u2013 Weather Vane</p>\n"}], "owner": {"reputation": 198, "user_id": 972733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9LjRF.jpg?s=128&g=1", "display_name": "Wardruna", "link": "https://stackoverflow.com/users/972733/wardruna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1846, "favorite_count": 0, "accepted_answer_id": 33255644, "answer_count": 3, "score": 1, "last_activity_date": 1445419877, "creation_date": 1431511937, "question_id": 30211791, "link": "https://stackoverflow.com/questions/30211791/getting-0-when-trying-to-measure-the-execution-time-of-function-in-c", "title": "Getting 0 when trying to measure the execution time of function in C", "body": "<p>I have simple function which takes random words and puts them in lexicographical order using insertion sort algorithm.I have no problem with function(It works,tested),but when i try to measure execution time of function using two different clock() values, i get same values before and after the execution of function,so it shows 0 as elapsed time</p>\n\n<pre><code>                clock_t t1 = clock();\n                InsertionSort(data, n);\n                clock_t t2 = clock();\n\n                /*\n                * Display the results.\n                */\n\n                for (size = i, i = 0; i &lt; size; ++i)\n                {\n                    printf(\"data[%d] = \\\"%s\\\"\\n\", (int)i, data[i]);\n                }\n\n                /*\n                * Display the execution time\n                */\n                printf(\"The time taken is.. %g \", (t2 -t1));\n</code></pre>\n"}, {"tags": ["c", "sleep"], "comments": [{"owner": {"reputation": 160, "user_id": 3912343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4D8KP.png?s=128&g=1", "display_name": "abuv", "link": "https://stackoverflow.com/users/3912343/abuv"}, "edited": false, "score": 0, "creation_date": 1431511857, "post_id": 30211485, "comment_id": 48527782, "body": "Maybe I&#39;m not understanding this correctly, but can&#39;t you just do sleep(.04)?"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1431511955, "post_id": 30211485, "comment_id": 48527845, "body": "You should also be aware your code won&#39;t be really going through the loop <b>exactly</b> every .04 second. Things like <code>sprintf</code>, <code>printf</code>, and whatever else you do on your data can take time."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1431514342, "post_id": 30211485, "comment_id": 48529403, "body": "Windows/Linux/whatever desktop os you are using is not a RTOS. So there are no guarantees of any timing what-so-ever."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "reply_to_user": {"reputation": 160, "user_id": 3912343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4D8KP.png?s=128&g=1", "display_name": "abuv", "link": "https://stackoverflow.com/users/3912343/abuv"}, "edited": false, "score": 0, "creation_date": 1431519345, "post_id": 30211485, "comment_id": 48532994, "body": "@abuv if he use usecTosleep he can always get the correct framerate by just changing the const"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1431523386, "post_id": 30211485, "comment_id": 48536114, "body": "You&#39;ll very likely run into trouble with this (skipped frames etc). You&#39;ll probably want a driver which reacts to some hardware event (hysnc or vsync or whatever)."}], "answers": [{"comments": [{"owner": {"reputation": 1737, "user_id": 1309431, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mxtYD.jpg?s=128&g=1", "display_name": "lppier", "link": "https://stackoverflow.com/users/1309431/lppier"}, "edited": false, "score": 0, "creation_date": 1431583296, "post_id": 30211850, "comment_id": 48563739, "body": "Thanks for the idea.. I don&#39;t think the code actually works because currentFrameUsec and lastFrameUsec would quickly go out of range. One way to to clock_gettime twice and get the difference I guess. I think measuring it in this way would definitely get me better results."}], "tags": [], "owner": {"reputation": 18956, "user_id": 1149736, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b3a4cc349fe80219a82a9e749ad65377?s=128&d=identicon&r=PG", "display_name": "Vyktor", "link": "https://stackoverflow.com/users/1149736/vyktor"}, "is_accepted": true, "score": 2, "last_activity_date": 1431512100, "creation_date": 1431512100, "answer_id": 30211850, "question_id": 30211485, "link": "https://stackoverflow.com/questions/30211485/is-this-a-correct-use-of-sleep/30211850#30211850", "title": "Is this a correct use of sleep()?", "body": "<p>Your \"recording operation\" still takes some time...</p>\n\n<p>So you need to calculate time that should be spent on on frame (<code>usecTosleep = (1.0f/VIDEO_FRAME_RATE) * 1000000;</code>) and then calculate time operation really took, adjust sleep time accordingly:</p>\n\n<pre><code>usecTosleep = (1.0f/VIDEO_FRAME_RATE) * 1000000;\nlastFrameUsec = 0;\n\nwhile (RECORDING) {\n  sprintf(buffer, \"Someting from a data struct that is updated\\n\"); \n  fprintf(Output, buffer); \n  usecTosleep = (1.0f/VIDEO_FRAME_RATE) * 1000000;\n\n  // currentFrameUec - lastFrameUsec = actual time spending on operation\n  currentFrameUsec = getUsecElapsedFromStart();\n  actualSleep = usecToSleep - (currentFrameUsec - lastFrameUsec);\n\n  // If there's time to sleep left, sleep\n  if(actualSleep &gt; 0){\n      usleep(actualSleep);\n      lastFrameUsec = getUsecElepasedFromStart();\n  } else {\n      lastFrameUsec = currentFrameUsec;\n  }\n}\n</code></pre>\n\n<p>I'm not aware of multi platform <code>getUsecElapsedFromStart()</code> so you probably will have to implement your own for example like <a href=\"http://][1]\" rel=\"nofollow\">this one</a>.</p>\n\n<pre><code>int getUsecElapsedFromStart(const struct timespec *tstart)\n{\n    struct timespec *tnow;\n    clock_gettime(CLOCK_MONOTONIC, &amp;tnow);\n\n     return (int)((tnow tv_sec*10.0e9 + tnow.tv_nsec) - \n            (tstart.tv_ses*10.0e9 + tstart.tv_nsec));\n}\n\nclock_gettime(CLOCK_MONOTONIC, &amp;tstart);\nwhile(RECORDING){\n    // ...\n    currentFrameUsec = getUsecElapsedFromStart(&amp;tstart);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1581, "user_id": 4788085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8412430be42932ed20e55d7b1400356a?s=128&d=identicon&r=PG&f=1", "display_name": "Moldova", "link": "https://stackoverflow.com/users/4788085/moldova"}, "is_accepted": false, "score": 2, "last_activity_date": 1431519049, "creation_date": 1431519049, "answer_id": 30214399, "question_id": 30211485, "link": "https://stackoverflow.com/questions/30211485/is-this-a-correct-use-of-sleep/30214399#30214399", "title": "Is this a correct use of sleep()?", "body": "<p>In response to your first question, there is no such guarantee. <code>usleep()</code> promises only that it will sleep <strong>at least</strong> as long as you tell it to. But it may sleep longer:</p>\n\n<pre><code>     The usleep() function suspends execution of the calling process for (at least) usec microseconds.  The\n     sleep may be lengthened slightly by any system activity or by the time spent processing the call or by\n     the granularity of system timers.\n</code></pre>\n"}], "owner": {"reputation": 1737, "user_id": 1309431, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mxtYD.jpg?s=128&g=1", "display_name": "lppier", "link": "https://stackoverflow.com/users/1309431/lppier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 30211850, "answer_count": 2, "score": 2, "last_activity_date": 1431521222, "creation_date": 1431511185, "last_edit_date": 1431521222, "question_id": 30211485, "link": "https://stackoverflow.com/questions/30211485/is-this-a-correct-use-of-sleep", "title": "Is this a correct use of sleep()?", "body": "<p>I'm using sleep like this to grab a frame every 1/25th of a second. OS is Debian 6 armel.</p>\n\n<pre><code>#define VIDEO_FRAME_RATE 25.0f\n\nwhile (RECORDING) {\n\n  sprintf(buffer, \"Someting from a data struct that is updated\\n\"); \n  fprintf(Output, buffer); \n  usecTosleep = (1.0f/VIDEO_FRAME_RATE) * 1000000;\n  usleep(usecToSleep);\n\n}\n</code></pre>\n\n<p>Question: What is the guarantee that the loop will output the buffer to Output file descriptor at every 1/25th of a second?<br>\nIs there a better way to do this in C? I need it to be as precise as possible to prevent drifting.</p>\n\n<p>Thank you. </p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431511186, "post_id": 30211457, "comment_id": 48527335, "body": "but we can suggest <code>int main(void)</code> over <code>int main()</code>, right?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1431512316, "post_id": 30211457, "comment_id": 48528063, "body": "<code>while(letterfreq[i] != &#39;\\0&#39;)</code> Cause an infinite loop Because this loop <code>i</code> is not updated"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1432248458, "post_id": 30211457, "comment_id": 48860450, "body": "This code has major syntax errors. I guess you have made a copy-paste error somewhere."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4886834, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cd97fd04a57df218158c53d76070b641?s=128&d=identicon&r=PG&f=1", "display_name": "Paige Angels", "link": "https://stackoverflow.com/users/4886834/paige-angels"}, "edited": false, "score": 0, "creation_date": 1431511554, "post_id": 30211535, "comment_id": 48527573, "body": "I&#39;m trying to convert the whole lot to lower case so I only have to worry about counting a through z instead of a to z and A to Z.  There is no need to pass COUNT, STRSIZE as arguments to functions. (lecturer syntax)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 29, "user_id": 4886834, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cd97fd04a57df218158c53d76070b641?s=128&d=identicon&r=PG&f=1", "display_name": "Paige Angels", "link": "https://stackoverflow.com/users/4886834/paige-angels"}, "edited": false, "score": 0, "creation_date": 1431511594, "post_id": 30211535, "comment_id": 48527597, "body": "@PaigeAngels that. my friend, you have to do using a loop. Also, keep an eye of the <i>valid</i> index, ok?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1431511302, "creation_date": 1431511302, "answer_id": 30211535, "question_id": 30211457, "link": "https://stackoverflow.com/questions/30211457/my-program-is-locking-up-and-doesnt-seem-to-do-what-its-supposed-to-what-have/30211535#30211535", "title": "My program is locking up and doesn&#39;t seem to do what it&#39;s supposed to. What have I done wrong?", "body": "<p>In your code,</p>\n\n<pre><code> tolower(letterfreq[STRSIZE]);\n</code></pre>\n\n<p>is overruning allocated memory, which in turn invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>. Remember, C array index is <code>0</code> based.</p>\n\n<p>That said, </p>\n\n<ol>\n<li><p>I don't see the point of the whole statement here. Maybe you'd want to have a look at the man page of <code>tolower(http://linux.die.net/man/3/tolower)</code> one again.</p></li>\n<li><p>There is no need to pass <code>COUNT</code>, <code>STRSIZE</code> as arguments to functions.</p></li>\n</ol>\n"}], "owner": {"reputation": 29, "user_id": 4886834, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cd97fd04a57df218158c53d76070b641?s=128&d=identicon&r=PG&f=1", "display_name": "Paige Angels", "link": "https://stackoverflow.com/users/4886834/paige-angels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432246538, "creation_date": 1431511110, "last_edit_date": 1432246538, "question_id": 30211457, "link": "https://stackoverflow.com/questions/30211457/my-program-is-locking-up-and-doesnt-seem-to-do-what-its-supposed-to-what-have", "title": "My program is locking up and doesn&#39;t seem to do what it&#39;s supposed to. What have I done wrong?", "body": "<p>I'm a newbie to C programming and I'm up to learning about strings and arrays. My latest challenge is to read in a string, calculate the frequency of each letter and output these including non-letters.</p>\n\n<p>I've written the program but it either locks up or just stops. I can't get it to start the count. Where have I gone wrong?</p>\n\n<p><em>NB: My lecturer has some particular views on syntax that other people don't necessarily share. I'm going to stick with the syntax that's going to keep my lecturer happy so please don't pick on the \"return (0);\" at the end of the main function.</em></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nconst int COUNT = 27;\nconst int STRSIZE = 100;\n\n                counter[c]++;\n                c++;\n            }\n            else \n                if((letterfreq[i] &lt; 'a') || (letterfreq[i] &gt; 'z'))\n                {   \n                    counter[26]++;\n                }\n        }\n    }\n\n    return;\n}\n\nvoid printFreq(int counter[], int COUNT)\n{\n    int c;\n\n    in the string.\\n\", counter[26]);\n\n    return;\n}\n\nchar promptReset(char reset)\n{\n    printf(\"Would you like to calculate the letter frequency of another string? (Y/N)\\n\");\n    scanf(\"%c%*c\", &amp;reset);\n\n    tolower(reset);\n\n    return(reset);\n}\n\nint main()\n{\n</code></pre>\n"}, {"tags": ["c", "assembly", "arm", "cortex-a8"], "comments": [{"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1431512484, "post_id": 30210605, "comment_id": 48528155, "body": "Isn&#39;t this working as is ? What is the error you get ? Also, never declare a variable in a .h. Declare it in a .c."}, {"owner": {"reputation": 25764, "user_id": 1163019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG", "display_name": "auselen", "link": "https://stackoverflow.com/users/1163019/auselen"}, "edited": false, "score": 0, "creation_date": 1431515137, "post_id": 30210605, "comment_id": 48529961, "body": "XY problem? <a href=\"http://meta.stackexchange.com/a/66378\">meta.stackexchange.com/a/66378</a>"}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1431557019, "post_id": 30210605, "comment_id": 48556740, "body": "I hope you meant the other &quot;d&quot; word there @ElderBug  (i.e. <i>define</i>)  :-)"}, {"owner": {"reputation": 360, "user_id": 2733049, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a32e5143b971bccf4ed16586a110132f?s=128&d=identicon&r=PG&f=1", "display_name": "van", "link": "https://stackoverflow.com/users/2733049/van"}, "edited": false, "score": 0, "creation_date": 1431593270, "post_id": 30210605, "comment_id": 48568453, "body": "Good point, I completely forgot to mention the errors. I added them at the end of the question..."}, {"owner": {"reputation": 360, "user_id": 2733049, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a32e5143b971bccf4ed16586a110132f?s=128&d=identicon&r=PG&f=1", "display_name": "van", "link": "https://stackoverflow.com/users/2733049/van"}, "reply_to_user": {"reputation": 25764, "user_id": 1163019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG", "display_name": "auselen", "link": "https://stackoverflow.com/users/1163019/auselen"}, "edited": false, "score": 0, "creation_date": 1431593614, "post_id": 30210605, "comment_id": 48568663, "body": "@auselen It&#39;s really about how to reference that variable and how to save data from the registers to it. I need it, because I need the state at a specific point and my registers and stack may get altered. There may be alternative ways to solve this - and probably also better ways. But I need a solution for the described problem."}, {"owner": {"reputation": 25764, "user_id": 1163019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG", "display_name": "auselen", "link": "https://stackoverflow.com/users/1163019/auselen"}, "edited": false, "score": 0, "creation_date": 1431621960, "post_id": 30210605, "comment_id": 48586648, "body": "well you don&#39;t mention if this is on top of an existing OS, your own roll, if you are in user or system context..."}, {"owner": {"reputation": 360, "user_id": 2733049, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a32e5143b971bccf4ed16586a110132f?s=128&d=identicon&r=PG&f=1", "display_name": "van", "link": "https://stackoverflow.com/users/2733049/van"}, "edited": false, "score": 0, "creation_date": 1431665494, "post_id": 30210605, "comment_id": 48603884, "body": "Fair enough. This should be part of our context switch and I am in the IRQ mode. We don&#39;t have an existing OS, instead we are writing our own - Its for studying purposes. The interrupted process will be in a user mode, but at the moment they are in system mode. Because our IRQ handler may do other stuff as well and alter the registers, I need to save them somewhere. Saving it on the stack is an option, but I cannot assure other things will be pushed atop it, therefore I decided to save it somewhere else."}], "owner": {"reputation": 360, "user_id": 2733049, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a32e5143b971bccf4ed16586a110132f?s=128&d=identicon&r=PG&f=1", "display_name": "van", "link": "https://stackoverflow.com/users/2733049/van"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431594431, "creation_date": 1431508909, "last_edit_date": 1431594431, "question_id": 30210605, "link": "https://stackoverflow.com/questions/30210605/cortex-a8-get-c-variable", "title": "Cortex-A8 Get C Variable", "body": "<p>I am a total newby when it comes to assembly. But I need to load the address of a C variable in order to save the values of the registers into it. I have to save them, because I need the data for an interrupted process. My IRQ handler may alter the registers and the stack, therefore I have to save them temporarly. I decided to save the registers into a global variable.</p>\n\n<p>My problem is that I don't know how to reference the variable __context_current (see second line in __context_save_tmp).</p>\n\n<pre><code>;\n; Context.asm\n;\n        .global __context_save_tmp\n\n; Save the context of the interrupted process into the temporary __context_current variable\n__context_save_tmp:\n    STMFD R13!, {R12}               ; Temporarly save R12 in Stack\n    LDR R12, =__context_current     ; Load the address of the context variable in R12\n    STMEA R12!, {R0-R11}            ; Save Registers R0-R11 in context variable\n    MOV R5, R12                     ; Move address of context variable to register R5\n    LDMFD R13!, {R12}               ; Get the original R12 value from the stack\n    STMEA R5!, {R12}                ; Store R12 to the context variable\n</code></pre>\n\n<p>The variable __context_current is defined in a C file. It's type is a struct, containing all registers.</p>\n\n<pre><code>/*\n * Context.h\n */\n\ntypedef struct {\n    uint32_t R0;    //&lt; R0\n    uint32_t R1;    //&lt; R1\n    uint32_t R2;    //&lt; R2\n    uint32_t R3;    //&lt; R3\n    uint32_t R4;    //&lt; R4\n    uint32_t R5;    //&lt; R5\n    uint32_t R6;    //&lt; R6\n    uint32_t R7;    //&lt; R7\n    uint32_t R8;    //&lt; R8\n    uint32_t R9;    //&lt; R9\n    uint32_t R10;   //&lt; R10\n    uint32_t R11;   //&lt; R11\n    uint32_t R12;   //&lt; R12\n    uint32_t SP;    //&lt; R13, Stack Pointer\n    uint32_t LR;    //&lt; R14, Link Register\n    uint32_t PC;    //&lt; Program Counter\n    uint32_t CPSR;  //&lt; Mode\n } Registers_t;\n\nRegisters_t __context_current;\n</code></pre>\n\n<p>I get multiple compile errors:</p>\n\n<pre><code>[E0001] Illegal symbol\n[E0003] Unexpected trailing operand(s)\n[E0200] Bad term in expression  \n#10010 errors encountered during linking; \"project.out\" not built\n#10056 symbol \"__context_current\" redefined: first defined in \"./main.obj\"; redefined in \"./src/system/scheduler/scheduler.obj\"\n#10234-D unresolved symbols remain\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers", "constants"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431508864, "post_id": 30210546, "comment_id": 48525688, "body": "FWIW, in <code>C</code> you don&#39;t need a pointer to pointer to <code>free()</code> it."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431508921, "post_id": 30210546, "comment_id": 48525730, "body": "Neither do I in C++. As i said i&#39;m passing pointers by address so that they can be unset once the memory is released."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1431508963, "post_id": 30210546, "comment_id": 48525768, "body": "Unrelated, but don&#39;t use symbols with leading underscore followed by an upper-case letter, <a href=\"http://stackoverflow.com/a/228797/440558\">those are reserved in all scopes</a>."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1431509097, "post_id": 30210546, "comment_id": 48525870, "body": "Mmmm i knew about the double underscores, but not this which i&#39;ve always used for non-public things. Good to know."}], "answers": [{"comments": [{"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1431510090, "post_id": 30211010, "comment_id": 48526558, "body": "Thanks for your answer. What i don&#39;t understand is why it is forbidden. Trying to convert const to non-const generates an error and that makes sense, but converting from non-const to const should not, and this is why i&#39;m trying to do here. Also if i add a second const i won&#39;t be able to unset the pointer once i&#39;ve deleted what it points to.  EDIT ho didn&#39;t see the link, i&#39;m gonna read this."}, {"owner": {"reputation": 2060, "user_id": 3854322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EQMf.jpg?s=128&g=1", "display_name": "BlackDwarf", "link": "https://stackoverflow.com/users/3854322/blackdwarf"}, "reply_to_user": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1431510342, "post_id": 30211010, "comment_id": 48526720, "body": "The link I provided in the answer explains why some non-const to const conversions result in errors. About adding the second const, you&#39;re right, in your case it wouldn&#39;t work since you could not set the pointer to NULL, it&#39;s just a general workaround for this issue. I edited my answer to make it clearer."}], "tags": [], "owner": {"reputation": 2060, "user_id": 3854322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EQMf.jpg?s=128&g=1", "display_name": "BlackDwarf", "link": "https://stackoverflow.com/users/3854322/blackdwarf"}, "is_accepted": true, "score": 2, "last_activity_date": 1431510375, "last_edit_date": 1431510375, "creation_date": 1431509948, "answer_id": 30211010, "question_id": 30210546, "link": "https://stackoverflow.com/questions/30210546/const-issue-with-pointer-to-pointer/30211010#30211010", "title": "const issue with pointer to pointer", "body": "<p>The issue here is when you call the <code>_FreeBuf( &amp; m_wsBuf );</code> function: you try to convert a <code>X**</code> to a <code>const X**</code> (here X is <code>uchar16_t</code>, but the error would have occured no matter what the type is).</p>\n\n<p>This is forbidden in C++ when this type of conversion is done implicitly (ie without <code>const_cast</code>).</p>\n\n<p>You can fix this either by removing <code>const</code>, or by changing the parameter type to <code>const uchar16_t * const*</code> (which wouldn't work in this case since you could not set the pointer to NULL in your function).</p>\n\n<p>For more info about the reason why C++ works that way, see <a href=\"https://isocpp.org/wiki/faq/const-correctness#constptrptr-conversion\" rel=\"nofollow\">this link</a>.</p>\n"}], "owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 30211010, "answer_count": 1, "score": 0, "last_activity_date": 1431517640, "creation_date": 1431508734, "last_edit_date": 1431517640, "question_id": 30210546, "link": "https://stackoverflow.com/questions/30210546/const-issue-with-pointer-to-pointer", "title": "const issue with pointer to pointer", "body": "<p>I have a function that i'm using to delete buffers. The pointers are passed by address so that the function can also unset them once the memory is released :</p>\n\n<pre><code>static void _FreeBuf( const uchar16_t ** pBufPtr );\n\nvoid Ucs2String::_FreeBuf( const uchar16_t ** pBufPtr );\n{\n   assert( NULL != pBufPtr &amp;&amp; NULL != *pBufPtr );\n\n   delete[] *pBufPtr;\n   *pBufPtr = NULL;\n}\n</code></pre>\n\n<p>But when using it as follows :</p>\n\n<pre><code>_FreeBuf( &amp; m_wsBuf );\n</code></pre>\n\n<p>Where <code>m_wsBuf</code> is a member : <code>uchar16_t * m_wsBuf;</code></p>\n\n<p>It generates an error :</p>\n\n<pre><code>Error   1   error C2664: 'core::Ucs2String::_FreeBuf' : cannot convert parameter 1 from 'uchar16_t **__w64 ' to 'const uchar16_t **'\n</code></pre>\n\n<p>Removing the const fixes the issue, but I don't understand why.\nThe function is modifying the pointer passed by address, not the const uchar16_t array pointed to, so why do I need to remove this const ?</p>\n\n<p>PS : I'm using VS2005 (and no C++11)</p>\n"}, {"tags": ["c", "hashtable", "hash-function"], "comments": [{"owner": {"reputation": 3568, "user_id": 898813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4417b6ee5bec5bc83de0b2f7f31d258b?s=128&d=identicon&r=PG", "display_name": "Markus Mayr", "link": "https://stackoverflow.com/users/898813/markus-mayr"}, "edited": false, "score": 3, "creation_date": 1431508755, "post_id": 30210046, "comment_id": 48525595, "body": "What do you mean by <code>LARGE_PRIME</code>? <code>value mod LARGE_PRIME</code> is <code>value</code> for all values smaller than <code>LARGE_PRIME</code>."}, {"owner": {"reputation": 2687, "user_id": 2456722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XcG0h.png?s=128&g=1", "display_name": "Flying_Banana", "link": "https://stackoverflow.com/users/2456722/flying-banana"}, "reply_to_user": {"reputation": 3568, "user_id": 898813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4417b6ee5bec5bc83de0b2f7f31d258b?s=128&d=identicon&r=PG", "display_name": "Markus Mayr", "link": "https://stackoverflow.com/users/898813/markus-mayr"}, "edited": false, "score": 0, "creation_date": 1431508898, "post_id": 30210046, "comment_id": 48525717, "body": "Good question. I estimate my table to be no bigger than 256 entries, so some prime around 1000, I suppose. Question edited."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1431949505, "post_id": 30210046, "comment_id": 48700242, "body": "&quot;take on random values&quot; - that &quot;random&quot; means you don&#39;t need hashing or primes, and your &quot;as efficient as possible&quot; might or might not be stringent enough for you to care, but a simple bitwise-AND can mask a larger random value into a power-of-2 bucket count more efficiently than a mod operation (when the bucket count isn&#39;t known until runtime)."}], "answers": [{"comments": [{"owner": {"reputation": 2687, "user_id": 2456722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XcG0h.png?s=128&g=1", "display_name": "Flying_Banana", "link": "https://stackoverflow.com/users/2456722/flying-banana"}, "edited": false, "score": 0, "creation_date": 1431509593, "post_id": 30210739, "comment_id": 48526243, "body": "Hmm good point! I guess I was a little concerned about how using 2^n number of buckets might make it more collision-prone. I see that it doesn&#39;t really matter now, if my input is truly random!"}], "tags": [], "owner": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "is_accepted": true, "score": 3, "last_activity_date": 1432065652, "last_edit_date": 1432065652, "creation_date": 1431509257, "answer_id": 30210739, "question_id": 30210046, "link": "https://stackoverflow.com/questions/30210046/is-mod-prime-good-enough-as-a-hash-function-for-a-hashtable-in-c/30210739#30210739", "title": "Is mod prime good enough as a hash function for a hashtable in C", "body": "<p>The right hash function boils down to the data you are hashing: how random are your values? If your values are uniformly distributed over the range, and the range is much larger than the number of hash buckets, then just using</p>\n\n<pre><code>value MOD number_of_buckets\n</code></pre>\n\n<p>will be a reasonable hash function - adding in <code>MOD &lt;prime&gt;</code> won't actually give you very much, and in fact might well make the hashing worse (because some buckets will be under- or over-used more than they would otherwise have been).</p>\n\n<p>Primes aren't magic - they can sometimes be used to \"smooth out\" correlation effects due to common factors, but if you don't have those correlations to begin with, you may be better off without them - especially if speed is paramount!</p>\n"}], "owner": {"reputation": 2687, "user_id": 2456722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XcG0h.png?s=128&g=1", "display_name": "Flying_Banana", "link": "https://stackoverflow.com/users/2456722/flying-banana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 30210739, "answer_count": 1, "score": 1, "last_activity_date": 1432065652, "creation_date": 1431507315, "last_edit_date": 1431508858, "question_id": 30210046, "link": "https://stackoverflow.com/questions/30210046/is-mod-prime-good-enough-as-a-hash-function-for-a-hashtable-in-c", "title": "Is mod prime good enough as a hash function for a hashtable in C", "body": "<p>I need a hash function that is as efficient as possible, for a hash table (actually a hash set) that uses probing (open addressing) for collision resolution. The entries stored in the table are all 4 byte ints that take on random values over the range.</p>\n\n<p>I am considering something even faster than djb2, something like</p>\n\n<pre><code>value mod LARGE_PRIME\n</code></pre>\n\n<p>Then mod it again with my bucket size. I suppose this prime is necessarily bigger than my bucket size, which means I also have some kind of sanity limit on how big my table has to grow (it probably won't ever get past 256 entries).</p>\n\n<p>I don't require any cryptography aspects of hash function - as long as it isn't terribly collision-prone, it should work fine.</p>\n\n<p>Will this make a good hash function? Can I define a specific algorithm for my hash table capacity every time I resize to improve it?</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1431507440, "post_id": 30209989, "comment_id": 48524686, "body": "How about <code>$(CC) $(OBJS) -o client -pthread</code>? and simmilar for all other cases."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1431507750, "post_id": 30209989, "comment_id": 48524890, "body": "Welcome to Stack Overflow! Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1431507847, "post_id": 30209989, "comment_id": 48524956, "body": "Just add to what Mr. @Eregrith said, please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1431508068, "last_edit_date": 1592644375, "creation_date": 1431507754, "answer_id": 30210195, "question_id": 30209989, "link": "https://stackoverflow.com/questions/30209989/makefile-link-2-source-files-non-is-main/30210195#30210195", "title": "makefile (link 2 source files non is main)", "body": "<p>Your question is not very verbose, however, from a quick glance at your makefile, we can say, as per the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html#Overall-Options\" rel=\"nofollow noreferrer\">online gcc manual</a>,</p>\n<blockquote>\n<p><code>-o file</code></p>\n<p>Place output in file <code>file</code>. This applies to whatever sort of output is being produced, whether it be an executable file, an object file, an assembler file or preprocessed C code.</p>\n</blockquote>\n<p>Basically, this says, the immidiate next argument to <code>-o</code> should be the output file name.</p>\n<p>Also, to follow the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html#Link-Options\" rel=\"nofollow noreferrer\">order of linking</a>, the <code>pthread</code> library should be placed at the end, like</p>\n<pre><code> $(CC) $(OBJS) -o  client -pthread\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4894826, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eyVkeLnOxc4/AAAAAAAAAAI/AAAAAAAAAC0/11PZ7URdNGw/photo.jpg?sz=128", "display_name": "neveen allan", "link": "https://stackoverflow.com/users/4894826/neveen-allan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1431508068, "creation_date": 1431507109, "question_id": 30209989, "link": "https://stackoverflow.com/questions/30209989/makefile-link-2-source-files-non-is-main", "title": "makefile (link 2 source files non is main)", "body": "<p>I have a project that contains 4 source files :\n   RTP.c, RTCP.c RTSP.c main.c \nand 3 header files : \n  RTP.h RTCP.h RTSP.h\nI have to include all the header files in the main and the RTCP.h in the RTP.c after I included the header files in the source files I linked them in a make file please help me understand the problem.\nthe RTP.c</p>\n\n<pre><code>    #include \"RTP.h\"\n    #include \"RTCP.h\"\n</code></pre>\n\n<p>the RTCP.c</p>\n\n<pre><code>    #include \"RTCP.h\"\n</code></pre>\n\n<p>The RTSP.c</p>\n\n<pre><code>    #include \"RTSP.h\"\n</code></pre>\n\n<p>The main.c</p>\n\n<pre><code>    #include \"RTP.h\"\n    #include \"RTSP.h\"\n</code></pre>\n\n<p>The make file:</p>\n\n<pre><code>    OBJS = main.o RTPfunctions.o RTCPfunctions.o RTSPfunctions.o\n    CC = gcc\n    CCFLAGS  = -g\n\n   Client : $(OBJS)\n         $(CC) $(OBJS) -o -pthread client\n\n   RTCPfunctions.o : RTCPfunctions.c RTCPfunctions.h\n         $(CC) -c -g -pthread RTCPfunctions.c\n\n   RTSPfunctions.o : RTSPfunctions.c RTSPfunctions.h\n        $(CC) -c -g  -pthread RTSPfunctions.c\n\n   RTPfunctions.o : RTPfunctions.c RTPfunctions.h RTCPfunctions.h\n       $(CC) -c -g -o -pthread RTPfunctions.c RTCPfunctions.o\n\n   main.o : main.c RTPfunctions.h RTSPfunctions.h\n      $(CC) -c  -g -o -pthread main.c RTPfunctions.o RTSPfunctions.o\n\n   clean:\n     \\rm *.o *~ client\n</code></pre>\n"}, {"tags": ["c", "list"], "comments": [{"owner": {"reputation": 1070, "user_id": 1283083, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Vy6f7.jpg?s=128&g=1", "display_name": "gustafbstrom", "link": "https://stackoverflow.com/users/1283083/gustafbstrom"}, "edited": false, "score": 0, "creation_date": 1431504659, "post_id": 30209060, "comment_id": 48522832, "body": "So, when is your deadline?"}, {"owner": {"reputation": 1070, "user_id": 1283083, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Vy6f7.jpg?s=128&g=1", "display_name": "gustafbstrom", "link": "https://stackoverflow.com/users/1283083/gustafbstrom"}, "edited": false, "score": 0, "creation_date": 1431505063, "post_id": 30209060, "comment_id": 48523074, "body": "My best tip: choose a favorite type of calendar \u2013 paper, Google Calendar or likewise \u2013 and start adding assignment deadlines there. It takes a minute extra of your life per scheduling task, but you&#39;ll never regret it in the end, at least I didn&#39;t. Now, and secondary, (I&#39;m not giving you code, you should think about how to implement this yourself): loop over both lists in the same loop and add the elements together in a separate variable. That&#39;s the answer to your problem \u2013 happy hacking!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1431505170, "post_id": 30209060, "comment_id": 48523144, "body": "Just parse the lists. You know how (see <code>consFin</code>)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1431505509, "post_id": 30209060, "comment_id": 48523358, "body": "What is the purpose of <code>memoire</code>? You never use it beyond initialisation."}, {"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "edited": false, "score": 0, "creation_date": 1431505997, "post_id": 30209060, "comment_id": 48523685, "body": "I disagree that homework questions are somehow special. What is homework for them might be something useful for a random user landing on this page. But this question is meh anyway so I&#39;ll remove the answer given both  gustafbstrom and Weather Vane want that :-)"}, {"owner": {"reputation": 1070, "user_id": 1283083, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Vy6f7.jpg?s=128&g=1", "display_name": "gustafbstrom", "link": "https://stackoverflow.com/users/1283083/gustafbstrom"}, "reply_to_user": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "edited": false, "score": 0, "creation_date": 1431506171, "post_id": 30209060, "comment_id": 48523805, "body": "@cnicutar And hopefully, you want it too. :-)"}, {"owner": {"reputation": 1, "user_id": 4054703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47432cecb0c56decfb24077ae278199?s=128&d=identicon&r=PG&f=1", "display_name": "rudstep", "link": "https://stackoverflow.com/users/4054703/rudstep"}, "edited": false, "score": 0, "creation_date": 1431506203, "post_id": 30209060, "comment_id": 48523820, "body": "cnicutar thank you for your help. gustafbstrom no one force you to answer. guys like you who don&#39;t want to help just have to make something else and do not loose their time on this website."}, {"owner": {"reputation": 1, "user_id": 4054703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47432cecb0c56decfb24077ae278199?s=128&d=identicon&r=PG&f=1", "display_name": "rudstep", "link": "https://stackoverflow.com/users/4054703/rudstep"}, "edited": false, "score": 0, "creation_date": 1431508947, "post_id": 30209060, "comment_id": 48525750, "body": "Another question, if I have to have a list as answer example: newlist (1 2 3 4 5) newlist2 (1 2 3 4 5) answer -&gt; sum (2 4 6 8 10)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1431527113, "post_id": 30209060, "comment_id": 48539310, "body": "Your hour would be better spent on actual debugging rather than posting questions on here."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3911658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0402033723fe7dbfc8eae303e0ed6ea3?s=128&d=identicon&r=PG&f=1", "display_name": "rawnish", "link": "https://stackoverflow.com/users/3911658/rawnish"}, "is_accepted": false, "score": 0, "last_activity_date": 1431513153, "creation_date": 1431513153, "answer_id": 30212261, "question_id": 30209060, "link": "https://stackoverflow.com/questions/30209060/addition-of-two-lists-in-c/30212261#30212261", "title": "Addition of two lists in C", "body": "<p>you can checkout this link for code you can use to do it:\n<a href=\"http://www.geeksforgeeks.org/add-two-numbers-represented-by-linked-lists/\" rel=\"nofollow\">http://www.geeksforgeeks.org/add-two-numbers-represented-by-linked-lists/</a></p>\n\n<p>and as you need represent sum in integer you can do it by saving right most number in the integer variable and then whenever some other element come you can do variable=10^i+variable, where i represent ten places like i=1 for 10, i=2 for 100 and so on.</p>\n"}], "owner": {"reputation": 1, "user_id": 4054703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47432cecb0c56decfb24077ae278199?s=128&d=identicon&r=PG&f=1", "display_name": "rudstep", "link": "https://stackoverflow.com/users/4054703/rudstep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1431513153, "creation_date": 1431504242, "last_edit_date": 1431504375, "question_id": 30209060, "link": "https://stackoverflow.com/questions/30209060/addition-of-two-lists-in-c", "title": "Addition of two lists in C", "body": "<p>I need help. I want to add two lists together (sum of two lists).</p>\n\n<p>The idea is to take two list of elements and I need to have the sum of those two list. the answer should be an integer (int).</p>\n\n<p>Here are my codes: </p>\n\n<pre><code>typedef struct element element;\nstruct element {\n  int val;\n  struct element *nxt;\n};\n\n\nenum { STOCK_MEM = 1024};\n\nstruct element memoire[STOCK_MEM];\n\ntypedef element* llist;\n\nvoid init_memoire() {\n  int i;\n   for(i = 0; i &lt; STOCK_MEM; i++)\n    memoire[i].val = -2;\n}\n\nllist consDebut(llist liste, int valeur) {\n  element* newEl = malloc(sizeof(element));\n  newEl-&gt;val = valeur;\n  newEl-&gt;nxt = liste;\n  return newEl;\n}\n\n//Ajouter un \u00e9l\u00e9ment en fin de la liste\nllist consFin(llist liste, int valeur) {\n  element* newEl = malloc(sizeof(element));\n  newEl-&gt;val = valeur;\n  newEl-&gt;nxt = NULL;\n  if(liste == NULL) {\n    return newEl;\n  } else {\n    element* temp = liste;\n    while(temp-&gt;nxt != NULL) {\n      temp = temp-&gt;nxt;\n    }\n    temp-&gt;nxt = newEl;\n    return liste;\n  }\n}\n\n\nint estVide(llist liste) {\n  if(liste == NULL) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n\nint main() {\n  init_memoire();\n  llist newlist = NULL;\n  int i;\n  for(i = 1; i &lt;= 3; i++) {\n    newlist = consDebut(newlist, i);\n    newlist = consFin(newlist, i);\n  }\n\n\n  llist list2 = NULL;\n  int c;\n  for(c = 1; c &lt;= 5; c++) {\n    list2 = consDebut(list2, c);\n  }\nreturn 0;\n}\n</code></pre>\n\n<p>Can somebody help please</p>\n"}, {"tags": ["c", "static"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1431502954, "post_id": 30208592, "comment_id": 48521843, "body": "<code>Main()</code> won&#39;t even compile. &quot;<i>I wanna know progress</i>&quot; Progress? of what?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1431502962, "post_id": 30208592, "comment_id": 48521848, "body": "use some online compiler like <a href=\"http://ideone.com/\" rel=\"nofollow noreferrer\">ideone.com</a> and check it yourself"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1431503102, "post_id": 30208592, "comment_id": 48521942, "body": "you are wrong. A small hint: <code>a</code> in main is not the same as the global <code>a</code>."}, {"owner": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1431503277, "post_id": 30208592, "comment_id": 48522034, "body": "@LPs  Perhaps you are doing the same mistake what OP did."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 0, "creation_date": 1431503507, "post_id": 30208592, "comment_id": 48522164, "body": "@Dayal and Frank No, I have to press the correct number on my f***ing keyboard :). Anyway your code cannot compile. At least change <code>Main</code> to <code>void main (void)</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431503652, "post_id": 30208592, "comment_id": 48522241, "body": "The output is `    8   10` formatted in spaces."}, {"owner": {"reputation": 1, "user_id": 4877224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Uekr9l6B8SA/AAAAAAAAAAI/AAAAAAAABdw/FrKmTOL_EZk/photo.jpg?sz=128", "display_name": "Frank Hao", "link": "https://stackoverflow.com/users/4877224/frank-hao"}, "edited": false, "score": 0, "creation_date": 1431503952, "post_id": 30208592, "comment_id": 48522412, "body": "in main a=2 How&#39;s the gobal a and a in fun?I wanna know why is 8.sorry for my dumb.I am Chinese with not really good English :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431504023, "post_id": 30208592, "comment_id": 48522457, "body": "If you change the first <code>int a;</code> to <code>int d;</code> and change <code>(++a)</code> to <code>(++d)</code> the result should be a bit more obvious, since <code>fun()</code> knows nothing about the <code>a</code> in <code>main()</code>."}, {"owner": {"reputation": 1, "user_id": 4877224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Uekr9l6B8SA/AAAAAAAAAAI/AAAAAAAABdw/FrKmTOL_EZk/photo.jpg?sz=128", "display_name": "Frank Hao", "link": "https://stackoverflow.com/users/4877224/frank-hao"}, "edited": false, "score": 0, "creation_date": 1431504190, "post_id": 30208592, "comment_id": 48522554, "body": "One more question, those int float double number,what would happen if they are not given values? Int goes 0?I think compiler will give me &quot;error&quot; for that"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1431504325, "post_id": 30208592, "comment_id": 48522633, "body": "Previous question about initialiazation: <a href=\"http://stackoverflow.com/questions/1831290/static-variable-initialization\" title=\"static variable initialization\">stackoverflow.com/questions/1831290/&hellip;</a>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1431504592, "post_id": 30208592, "comment_id": 48522797, "body": "&quot;<i>those int float double number,what would happen if they are not given values</i>&quot; Some random &quot;garbage&quot; value is in them. Reading it leads to undefined behavior. You should not do this. 0 will be stored if the variable is global or <code>static</code>. In this case, you can read/write into these variables."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1431507517, "post_id": 30208592, "comment_id": 48524736, "body": "If you don&#39;t have a compiler, why are you programming? This isn&#39;t a &quot;I&#39;m too lazy to even use an online compiler&quot; service. And what&#39;s &quot;I wanna know progress&quot; supposed to mean?"}, {"owner": {"reputation": 1, "user_id": 4877224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Uekr9l6B8SA/AAAAAAAAAAI/AAAAAAAABdw/FrKmTOL_EZk/photo.jpg?sz=128", "display_name": "Frank Hao", "link": "https://stackoverflow.com/users/4877224/frank-hao"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1431509374, "post_id": 30208592, "comment_id": 48526085, "body": "@Lundin Sorry.in this case,I just wanna pass my C programming test.I love programming. I mean really,I was a active python programmer, and I love that awesome language. For now,I had c p programming language at my university, and I don&#39;t have enough time to catch every detail of this language.but I must pass the exam"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1431527163, "post_id": 30208592, "comment_id": 48539355, "body": "Your problem.  Why are you trying to export it here?"}], "answers": [{"tags": [], "owner": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "is_accepted": true, "score": 2, "last_activity_date": 1431503819, "creation_date": 1431503819, "answer_id": 30208897, "question_id": 30208592, "link": "https://stackoverflow.com/questions/30208592/about-usage-of-static-really-basic/30208897#30208897", "title": "about usage of &quot;static&quot;, really basic", "body": "<p>in response to  Frank Hao comment</p>\n\n<p>Global <code>int a</code> is initialized as 0.</p>\n\n<pre><code>for i = 0;\nfirst call fun(2)\n{\nreturn ((1)+(3)+(4));\n}\n\nfor i = 1;\nsecond call fun(2)\n{\nreturn ((2)+(3)+(5));\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4877224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Uekr9l6B8SA/AAAAAAAAAAI/AAAAAAAABdw/FrKmTOL_EZk/photo.jpg?sz=128", "display_name": "Frank Hao", "link": "https://stackoverflow.com/users/4877224/frank-hao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 30208897, "answer_count": 1, "score": -4, "last_activity_date": 1431507510, "creation_date": 1431502872, "last_edit_date": 1431507510, "question_id": 30208592, "link": "https://stackoverflow.com/questions/30208592/about-usage-of-static-really-basic", "title": "about usage of &quot;static&quot;, really basic", "body": "<pre><code>#include&lt;stdio.h&gt;\nint a;\nint fun(int b)\n{\n   static int c=3;\n   return ((++a)+(++b)+(++c));\n}\nMain()\n{\n   int i,a=2;\n   for(i=0;i&lt;2;i++)\n      printf(\"%5d\",fun(a));\n}\n</code></pre>\n\n<p>I think answer is 1012 but don't have comp</p>\n\n<p>I wanna know progress</p>\n"}]