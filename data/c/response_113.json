[{"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1489017157, "post_id": 42684073, "comment_id": 72492363, "body": "<code>for(CarType type = A; type &lt;= M; ++type) for(Color color = BLACK; color &lt;= WHITE; color++) *garage++ =(Car){ type, color};</code>"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 5, "last_activity_date": 1489017035, "creation_date": 1489017035, "answer_id": 42684167, "question_id": 42684073, "link": "https://stackoverflow.com/questions/42684073/c-assign-enum-values-to-members-in-structures/42684167#42684167", "title": "C Assign enum values to members in structures?", "body": "<p>You should add an extra element to each <code>enum</code> to hold the size, so you can loop over all the values.</p>\n\n<pre><code>enum carType {A, B, C, D, E, F, G, H, I, J, K, L, M, carType_size};\nenum color {BLACK, WHITE, color_size};\n\nvoid createGarage(Car *garage)\n{ \n    for (int t = 0; t &lt; carType_size; t++) {\n        for (int c = 0; c &lt; color_size; c++) {\n            garage-&gt;carType = t;\n            garage-&gt;color = c;\n            garage++;\n        }\n    }   \n}\n</code></pre>\n\n<p>This depends on the fact that <code>enum</code>s default to assigning values sequentially from <code>0</code>. This won't work if you have an <code>enum</code> where you override this with specific values, but that's an uncommon style.</p>\n"}], "owner": {"reputation": 179, "user_id": 4790874, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1ed4a493c4440af5ec1b1195d484eaa9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D", "link": "https://stackoverflow.com/users/4790874/daniel-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 42684167, "answer_count": 1, "score": 0, "last_activity_date": 1489017035, "creation_date": 1489016528, "question_id": 42684073, "link": "https://stackoverflow.com/questions/42684073/c-assign-enum-values-to-members-in-structures", "title": "C Assign enum values to members in structures?", "body": "<p>I have 2 enumerations, color with 2 colors, and car type with 13 car types. I have a car structure, with 2 respective members. How can I assign an enumerated value through a loop if my structure is in an array?</p>\n\n<pre><code>enum carType {A, B, C, D, E, F, G, H, I, J, K, L, M};\nenum color {BLACK, WHITE};\n\ntypedef enum carType CarType;\ntypedef enum color Color;\n\nstruct car {                                 \nCarType myCarType;\nColor myColor;\n};                  \n\ntypedef struct car Car;\n\nvoid createGarage(Car *garage)\n{ \n\n\n\n}\n\nmain()\n{ \nCar garage[26];\ncreateGarage(garage);\n}\n</code></pre>\n\n<p>How can I loop through my array of garage, and ensure that each car type has both black and white colors?</p>\n\n<p>I know I have 26 spaces in my garage array so I know I could use a for loop, but how would I exactly do the assignment?</p>\n"}, {"tags": ["c++", "c", "architecture", "abstraction-layer"], "owner": {"reputation": 73, "user_id": 2966689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0398c4bf209c622938da158e27b53451?s=128&d=identicon&r=PG&f=1", "display_name": "tobawo", "link": "https://stackoverflow.com/users/2966689/tobawo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489050121, "creation_date": 1489016056, "last_edit_date": 1489050121, "question_id": 42683972, "link": "https://stackoverflow.com/questions/42683972/using-low-level-datatype-from-hardware-abstraction-layer-in-high-level-applica", "title": "Using low level datatype from hardware abstraction layer in (high level) application", "body": "<p>I have a hardware abstraction layer for a peripheral of a MCU which is written in C. The application code is using the peripheral via a C++ wrapper. Now I have a low level enum <code>ll_enum</code> and a function, that requires a parameter with this datatype.</p>\n\n<p>My understanding of a good architecture would imply the following things:</p>\n\n<ul>\n<li>Low-level peripheral driver (C) \n\n<ul>\n<li>should not know that there is a higher level</li>\n<li>has the definition of the enum</li>\n</ul></li>\n<li>C++ Wrapper\n\n<ul>\n<li>obviously knows the low-level layer and that there is an application</li>\n</ul></li>\n<li>Application Code that uses the C++ Wrapper \n\n<ul>\n<li>Just knows the C++ Wrapper</li>\n</ul></li>\n</ul>\n\n<p>My solution right now:</p>\n\n<p>I have a enum in the C++ Wrapper that has the same entries as the low level enum. The enum gets casted to the low level type in the C++ Wrapper.</p>\n\n<pre><code>// ### C++ Wrapper ###\nenum hl_enum {\n    foo = 1,\n    bar = 2,\n}\n\nvoid Peripheral::hl_function(hl_enum param) {\n    ll_function((ll_enum)param);\n}\n\n// ### Low level C-file ###\ntypedef enum {\n    foo = 1,\n    bar = 2,\n} ll_enum;\n\nvoid ll_function(ll_enum param);\n</code></pre>\n\n<p>Obviously that is a bad solution, because you have to change code at two positions and get in trouble if you missed that. </p>\n\n<p>Is there a better solution?</p>\n"}, {"tags": ["c", "for-loop", "multidimensional-array"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7681148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf39237bf48aeb1aa97dced8ad05cf4?s=128&d=identicon&r=PG&f=1", "display_name": "R.Nbkd ", "link": "https://stackoverflow.com/users/7681148/r-nbkd"}, "edited": false, "score": 0, "creation_date": 1489016963, "post_id": 42684022, "comment_id": 72492277, "body": "result[k] will be equal with c[i][j], and result[k] is a 1D array. result[k] = c[i][j];"}], "tags": [], "owner": {"reputation": 111, "user_id": 7674669, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ef990766cf99f212404a0a090dc99373?s=128&d=identicon&r=PG&f=1", "display_name": "Enes Keles", "link": "https://stackoverflow.com/users/7674669/enes-keles"}, "is_accepted": false, "score": 0, "last_activity_date": 1489016295, "creation_date": 1489016295, "answer_id": 42684022, "question_id": 42683928, "link": "https://stackoverflow.com/questions/42683928/converting-a-2d-array-into-1d/42684022#42684022", "title": "converting a 2D array into 1D", "body": "<p>c[i][j] is not changed in the second one. But it is changed in the first one.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7681148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf39237bf48aeb1aa97dced8ad05cf4?s=128&d=identicon&r=PG&f=1", "display_name": "R.Nbkd ", "link": "https://stackoverflow.com/users/7681148/r-nbkd"}, "edited": false, "score": 0, "creation_date": 1489016882, "post_id": 42684099, "comment_id": 72492244, "body": "With this I get the result:2 3 2 3 4 6 4 6 and not:  2 4 2 4 4 8 4 8"}, {"owner": {"reputation": 3862, "user_id": 2991872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9bc4382fe0c117be6b29768c66439be7?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2991872/mehdi"}, "reply_to_user": {"reputation": 3, "user_id": 7681148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf39237bf48aeb1aa97dced8ad05cf4?s=128&d=identicon&r=PG&f=1", "display_name": "R.Nbkd ", "link": "https://stackoverflow.com/users/7681148/r-nbkd"}, "edited": false, "score": 0, "creation_date": 1489017003, "post_id": 42684099, "comment_id": 72492296, "body": "ok, let me fix it for you :D, you should basically save <code>c</code> before this loop in results. :))"}, {"owner": {"reputation": 3, "user_id": 7681148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf39237bf48aeb1aa97dced8ad05cf4?s=128&d=identicon&r=PG&f=1", "display_name": "R.Nbkd ", "link": "https://stackoverflow.com/users/7681148/r-nbkd"}, "edited": false, "score": 0, "creation_date": 1489017232, "post_id": 42684099, "comment_id": 72492387, "body": "yes, it worked thank you very much. I added it before the  for (k = 0; k &lt; n; k++)"}], "tags": [], "owner": {"reputation": 3862, "user_id": 2991872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9bc4382fe0c117be6b29768c66439be7?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2991872/mehdi"}, "is_accepted": true, "score": 2, "last_activity_date": 1489017356, "last_edit_date": 1489017356, "creation_date": 1489016687, "answer_id": 42684099, "question_id": 42683928, "link": "https://stackoverflow.com/questions/42683928/converting-a-2d-array-into-1d/42684099#42684099", "title": "converting a 2D array into 1D", "body": "<p>Maybe you want this index <code>i+n*j</code> for the 1D array. </p>\n\n<pre><code>int i,j,k, n=2, result[50];\n\nfor (i = 0; i &lt; n; i++) {\n    for (j = 0; j &lt; n; j++) {\n        result[i+n*j] = c[i][j];\n        for (k = 0; k &lt; n; k++) {\n            result[i+n*j] += a[i][k] * b[k][j];\n            printf(\"%i \", result[i+n*j]);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6556935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b037757bda837668f2bac92372529b25?s=128&d=identicon&r=PG&f=1", "display_name": "Creative", "link": "https://stackoverflow.com/users/6556935/creative"}, "is_accepted": false, "score": 0, "last_activity_date": 1489022168, "creation_date": 1489022168, "answer_id": 42684922, "question_id": 42683928, "link": "https://stackoverflow.com/questions/42683928/converting-a-2d-array-into-1d/42684922#42684922", "title": "converting a 2D array into 1D", "body": "<p>Create a global array as a calculated array of size 4*m where m is the number of 2x2 matrices. Then use a do while loop where the loop counter variable is used to calculate a pointer a group of four elements. Pass that pointer to a method that extracts the 2x2 matrice elements in a left to right, row by row fashion into the global array. Use pointer de referencing in the method but don't increment the pointer in the method.  Upon return of the method if there are more groups of 4 elements to process recalculate the pointer and process the next 2x2 matrice.  My pc is broken at the moment so i can describe this in code.</p>\n"}], "owner": {"reputation": 3, "user_id": 7681148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf39237bf48aeb1aa97dced8ad05cf4?s=128&d=identicon&r=PG&f=1", "display_name": "R.Nbkd ", "link": "https://stackoverflow.com/users/7681148/r-nbkd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2839, "favorite_count": 0, "accepted_answer_id": 42684099, "answer_count": 3, "score": 0, "last_activity_date": 1489032074, "creation_date": 1489015874, "last_edit_date": 1489032074, "question_id": 42683928, "link": "https://stackoverflow.com/questions/42683928/converting-a-2d-array-into-1d", "title": "converting a 2D array into 1D", "body": "<p>Here is the code, for the 2D arrays a,b,c: </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    int main(){\n       int a[2][2]=\n       {\n         {1, 1},\n         {2, 2}\n       };\n\n        int b[2][2]=\n        {\n          {1, 1},\n          {2, 2}\n        };\n\n        int c[2][2]=\n        {\n          {1, 1},\n          {2, 2}\n        };\n\n        //Loop for 2D\n        int i,j,k, n=2;\n        for (i = 0; i &lt; n; i++) {\n            for (j = 0; j &lt; n; j++) {\n                for (k = 0; k &lt; n; k++) {\n                    c[i][j] += a[i][k] * b[k][j];\n                    printf(\"%i \",c[i][j]);\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>The result is: 2 4 2 4 4 8 4 8 </p>\n\n<p>I wrote this code, that converts the array c[i][j] into a 1D array. After running it I don't get the same result.</p>\n\n<pre><code>//Loop for 1D\n\n    int i,j,k, n=2, result[50];\n    for (i = 0; i &lt; n; i++) {\n        for (j = 0; j &lt; n; j++) {\n            for (k = 0; k &lt; n; k++) {\n                result[k] = c[i][j];\n                result[k] += a[i][k] * b[k][j];\n                printf(\"%i \", result[k]);\n            }\n        }\n    }\n</code></pre>\n\n<p>For this Loop the result is: 2 3 2 3 4 6 4 6</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 226, "user_id": 6719685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bba0fa8e1d3dc87fdfe24ac804756e0?s=128&d=identicon&r=PG&f=1", "display_name": "Wade Tyler", "link": "https://stackoverflow.com/users/6719685/wade-tyler"}, "edited": false, "score": 0, "creation_date": 1489016017, "post_id": 42683918, "comment_id": 72491938, "body": "That&#39;s simple, you just need to calculate how much a number divided by <code>0</code> is and then replace the <code>mean</code> with the answer."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1489016061, "post_id": 42683918, "comment_id": 72491950, "body": "Any help with what? You haven&#39;t listed the problem with the program. Does it work? What is your question?"}, {"owner": {"reputation": 1, "user_id": 7681179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4587cf9ebfe556cf02ec87b04bfb33f0?s=128&d=identicon&r=PG&f=1", "display_name": "code0011", "link": "https://stackoverflow.com/users/7681179/code0011"}, "edited": false, "score": 0, "creation_date": 1489016252, "post_id": 42683918, "comment_id": 72492015, "body": "Well it compiles and runs, but doesn&#39;t progress past the <a href=\"http://i.imgur.com/PUQM6Ug.png\" rel=\"nofollow noreferrer\">user input</a>, and will eventually crash"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1489016643, "post_id": 42683918, "comment_id": 72492157, "body": "Shouldn&#39;t your <code>scanf</code> be <b><i>inside</i></b> the loop? (e.g. <code>while (scanf (&quot;%d&quot;, &amp;total) == 1 &amp;&amp; total &gt; 0) {.. stuff ..}</code>) You don&#39;t really even need the <code>total &gt; 0</code> test, you can divide <code>0</code> just not by <code>0</code> without issue."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1489016769, "post_id": 42683918, "comment_id": 72492202, "body": "<code>scanf (&quot; %d\\n&quot;, &amp;mean);</code> --&gt; <code>scanf (&quot; %d\\n&quot;, &amp;total);</code>? And you don&#39;t need to calculate the mean inside the loop."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1489017023, "post_id": 42683918, "comment_id": 72492305, "body": "<code>scanf (&quot; %d\\n&quot;, &amp;mean);</code> --&gt; <code>scanf (&quot;%d&quot;, &amp;total);</code>  mean --&gt; total, drop space, drop \\n .  That \\n &quot;delays&quot; <code>scanf()</code> return - that is causing the &quot;doesn&#39;t progress past the user input&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1489017155, "post_id": 42683918, "comment_id": 72492361, "body": "&quot;stopping when 0 is entered&quot; --&gt; then why <code>while (total &gt; 0)</code> instead of <code>while (total != 0)</code>?"}, {"owner": {"reputation": 1, "user_id": 7681179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4587cf9ebfe556cf02ec87b04bfb33f0?s=128&d=identicon&r=PG&f=1", "display_name": "code0011", "link": "https://stackoverflow.com/users/7681179/code0011"}, "edited": false, "score": 0, "creation_date": 1489018153, "post_id": 42683918, "comment_id": 72492660, "body": "I&#39;ve updated the post to take into account the corrections made, however the average is always 0 regardless of which numbers are used. As to why I use something instead of something else, it&#39;s because I have very little idea of what I&#39;m doing"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1489018274, "post_id": 42683918, "comment_id": 72492699, "body": "Step through the code with a debugger.  The problem should become apparent."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1489018611, "post_id": 42683918, "comment_id": 72492801, "body": "Hint: in new code, where is <code>+=</code>?"}, {"owner": {"reputation": 1, "user_id": 7681179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4587cf9ebfe556cf02ec87b04bfb33f0?s=128&d=identicon&r=PG&f=1", "display_name": "code0011", "link": "https://stackoverflow.com/users/7681179/code0011"}, "edited": false, "score": 0, "creation_date": 1489019069, "post_id": 42683918, "comment_id": 72492945, "body": "In the same place as it was before, didn&#39;t notice I&#39;d missed it from the updated code"}, {"owner": {"reputation": 1, "user_id": 7681179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4587cf9ebfe556cf02ec87b04bfb33f0?s=128&d=identicon&r=PG&f=1", "display_name": "code0011", "link": "https://stackoverflow.com/users/7681179/code0011"}, "edited": false, "score": 0, "creation_date": 1489019541, "post_id": 42683918, "comment_id": 72493076, "body": "if I change <code>mean = (float) total &#47; h;</code> to <code>mean = (float)sum2 &#47; h;</code> I get a value for the average. Thank you everyone for the help"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1489026700, "post_id": 42683918, "comment_id": 72494936, "body": "Hmm, in the new code <code>sum2 </code> is not declared, suggest posted true tested code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1489026802, "post_id": 42683918, "comment_id": 72494970, "body": "Detail: no need for <code>mean</code>, just use <code>printf(&quot;Average = %.2f\\n&quot;, 1.0*total &#47; h);</code> and avoid using casts and <code>float</code>.   Also why so narrow with <code>total</code>, how about <code>long long total</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1489018565, "creation_date": 1489018565, "answer_id": 42684425, "question_id": 42683918, "link": "https://stackoverflow.com/questions/42683918/find-the-average-of-a-potentially-infinite-number-of-integers-in-c/42684425#42684425", "title": "Find the average of a potentially infinite number of integers in C", "body": "<p>Basically what you want is a <em><a href=\"https://en.wikipedia.org/wiki/Moving_average#Cumulative_moving_average\" rel=\"nofollow noreferrer\">cumulative moving average</a></em>; you update the average with each new input value.</p>\n\n<p>In pseudocode, it would look something like</p>\n\n<pre><code>cma = 0; // mean is initially 0\nn = 0;   // n is number of inputs read so far\nwhile nextValue is not 0\n  cma = (nextValue + (n * cma )) / (n + 1)\n  n = n + 1\nend while\n</code></pre>\n\n<p>Let's look at how it would work with a sequence like <code>1, 2, 3, 4, 5, 0</code>:</p>\n\n<pre><code>cma = 0;\nn = 0\nnextValue = 1\ncma = (1 + (0 * 0))/(0 + 1) == 1/1 == 1\nn = 1\nnextValue = 2\ncma = (2 + (1 * 1))/(1 + 1) == 3/2 == 1.5 // (1 + 2)/2 == 1.5\nn = 2\nnextValue = 3\ncma = (3 + (2 * 1.5))/(2 + 1) == 6/3 == 2 // (1 + 2 + 3)/3 == 2\nn = 3\nnextValue = 4\ncma = (4 + (3 * 2))/(3 + 1) == 10/4 == 2.5 // (1 + 2 + 3 + 4)/4 == 2.5\nn = 4\nnextValue = 5\ncma = (5 + (4 * 2.5))/(4 + 1) == 15/5 == 3 // (1 + 2 + 3 + 4 + 5)/5 == 3 \nn = 5\nnextValue = 0\n</code></pre>\n\n<p>You should be able to translate that pseudocode into C fairly easily.  Remember that integer division gives an integer result - <code>1/2</code> will yield <code>0</code>, not <code>0.5</code>.  At least one operand must be a floating point type to get a floating point result.  You will probably want to use <code>double</code> for your inputs and result.  </p>\n"}], "owner": {"reputation": 1, "user_id": 7681179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4587cf9ebfe556cf02ec87b04bfb33f0?s=128&d=identicon&r=PG&f=1", "display_name": "code0011", "link": "https://stackoverflow.com/users/7681179/code0011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1489019095, "creation_date": 1489015822, "last_edit_date": 1489019095, "question_id": 42683918, "link": "https://stackoverflow.com/questions/42683918/find-the-average-of-a-potentially-infinite-number-of-integers-in-c", "title": "Find the average of a potentially infinite number of integers in C", "body": "<p>I need to write a program in C that reads integers as entered by a user, stopping when 0 is entered, and then finds the average of them.<br>\nThis is what I have currently</p>\n\n<pre><code>int main(void) {\n\nint total, h = -1, sum2 = 0;\nfloat mean;\n\nprintf(\"\\nYou've chosen Average.\\nEnter the numbers you want to find the average of with a 0 at the end (eg. 2 1 5 12 0)\\n\");\n    scanf(\" %d\", &amp;total);\n    while (total &gt; 0) {\n        h++;\n        sum2 += total;\n        scanf (\" %d\\n\", &amp;mean);\n        mean = (float)total / h;                        \n    }                   \n    printf(\"Average = %.2f\\n\", mean);\n    return 0;\n}\n</code></pre>\n\n<p>Any help would be appreciated</p>\n\n<p>Update </p>\n\n<pre><code>int main(void) {\n\nint total, h = 0;\nfloat mean;\n\nprintf(\"\\nYou've chosen Average.\\nEnter the numbers you want to find the average of with a 0 at the end (eg. 2 1 5 12 0)\\n\");\n    while (scanf (\" %d\", &amp;total) == 1 &amp;&amp; total &gt; 0) {\n        h++;\n        sum2 += total;  \n    }\n    mean = (float)total / h;                    \n    printf(\"Average = %.2f\\n\", mean);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "fork", "stdout", "stderr"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1489015889, "post_id": 42683884, "comment_id": 72491894, "body": "Sorry, your question is not clear and is possibly an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. Describe what you are trying to achieve rather than how you think it should be done."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489016242, "post_id": 42683884, "comment_id": 72492010, "body": "If you want to print to both the screen and also save in a file, use the <code>tee</code> program."}, {"owner": {"reputation": 19, "user_id": 6084451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dc66f3ef7ee87c3322d448e8b08be8?s=128&d=identicon&r=PG&f=1", "display_name": "sorryiamrookie", "link": "https://stackoverflow.com/users/6084451/sorryiamrookie"}, "edited": false, "score": 0, "creation_date": 1489016257, "post_id": 42683884, "comment_id": 72492018, "body": "I want to print a line on the screen and aswell as redirect it to a file by replacing stdout with stderr in child process. So basically print &quot;Hi am rookie&quot; on the screen and put this statement in the file. hope i made it a bit clearer. Any help is appreciated."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489035319, "post_id": 42683884, "comment_id": 72497356, "body": "If you are still confused, reread @Barmar&#39;s comment. You use the <code>tee</code> program in your shell to accomplish this as you run your program. (obviously within your program you would need to write to both <code>stdout</code> and <code>stderr</code> in two separate calls or write a function that does that)"}, {"owner": {"reputation": 19, "user_id": 6084451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dc66f3ef7ee87c3322d448e8b08be8?s=128&d=identicon&r=PG&f=1", "display_name": "sorryiamrookie", "link": "https://stackoverflow.com/users/6084451/sorryiamrookie"}, "edited": false, "score": 0, "creation_date": 1489066271, "post_id": 42683884, "comment_id": 72515214, "body": "how do i implement &quot;tee&quot; in C. Can&#39;t figure out a way to do it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489102698, "post_id": 42683884, "comment_id": 72536923, "body": "the <code>tee</code> utility is used on the command line, similar to: `myprogram myparameters &amp;2&gt; tee myoutFile"}], "owner": {"reputation": 19, "user_id": 6084451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14dc66f3ef7ee87c3322d448e8b08be8?s=128&d=identicon&r=PG&f=1", "display_name": "sorryiamrookie", "link": "https://stackoverflow.com/users/6084451/sorryiamrookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489015663, "creation_date": 1489015663, "question_id": 42683884, "link": "https://stackoverflow.com/questions/42683884/printing-stderr-to-screen-without-using-stdout-before-redirecting-it-to-a-file-i", "title": "Printing stderr to Screen without using stdout before redirecting it to a file in C", "body": "<p>Is there any possible way to print out stderr on the screen without using stdout/printf before proceeding to redirect it to a file?</p>\n\n<pre><code>int pid = fork()  \nif(pid == 0)  \n    {  \n      // file open  \n      //dup2(file,2)  \n      // print to screen how to?  \n      // printf(stderr, \"...\")redirect it to a file  \n\n    } \n</code></pre>\n"}, {"tags": ["php", "c", "bash", "file-io", "pipe"], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489023994, "post_id": 42683793, "comment_id": 72494212, "body": "Don&#39;t try to put a script into a comment. Edit the question."}, {"owner": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489024300, "post_id": 42683793, "comment_id": 72494288, "body": "Updated the question. So, I think that the problem here is that I want \\x00 to be counted by the scanf whereas in this way it doesn&#39;t. It&#39;s about a buffer overflow so the size is specific. Do these make sense? @barmar"}, {"owner": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489024362, "post_id": 42683793, "comment_id": 72494305, "body": "can I just ouput them in the exact way that bash&#39;s echo -ne &quot;....&quot; does?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489024372, "post_id": 42683793, "comment_id": 72494307, "body": "<code>scanf()</code> is for processing formatted text, not binary data. It can&#39;t handle null bytes like that, because in C those are string terminators."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489024399, "post_id": 42683793, "comment_id": 72494316, "body": "The code in my answer outputs exactly what bash&#39;s <code>echo -ne</code> does."}, {"owner": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489024582, "post_id": 42683793, "comment_id": 72494372, "body": "What do you mean buy that? Then why in echo of bash when I put 11 * \\x00  it is accepted whereas if I put just one it&#39;s not? I think they are counted but not considered as values, its just empty but if buf[16] is consisted lets say of 5 real chars and 11 null then its full."}, {"owner": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489024663, "post_id": 42683793, "comment_id": 72494393, "body": "How is it possible to output the same but I get correct message when execute it by echo, but wrong when trying this?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489025075, "post_id": 42683793, "comment_id": 72494492, "body": "Don&#39;t use <code>bin2hex()</code> in the PHP. You want to write the binary, not its hex representation. Hex is just needed in literals, to produce binary data."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489025158, "post_id": 42683793, "comment_id": 72494512, "body": "But if you already have binary data, you don&#39;t need to convert it back to hex."}, {"owner": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489025331, "post_id": 42683793, "comment_id": 72494567, "body": "I used bin2hex() to concatenate the whole string in the proper form. I mean in order to inject it all together with the other part"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "edited": false, "score": 0, "creation_date": 1489025460, "post_id": 42683793, "comment_id": 72494594, "body": "You don&#39;t need to. You&#39;re totally confused about the way hex is used in programming. It&#39;s used as a way to input binary data from users or display it to users, not as a way to store it. It&#39;s not needed for internal communication between components."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1489023207, "last_edit_date": 1489023207, "creation_date": 1489015132, "answer_id": 42683793, "question_id": 42683767, "link": "https://stackoverflow.com/questions/42683767/output-from-a-php-script-to-c-scanf-of-program/42683793#42683793", "title": "Output from a PHP script to C scanf of program", "body": "<p>Use <code>popen()</code> inside the script to run a command with input from the script. To get hex characters, put them inside a double-quoted string, and concatenate them to the variables.</p>\n\n<pre><code>$pipe = popen($program, \"w\");\n$vartmp = $passwordHEX . \"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\u200c\\x00\\x00x00\" . $Pass\u200c\u200bwordHash;\nfwrite($pipe, $vartmp);\npclose($pipe);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7681194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d0940eca969e808561d678a4fc8c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Nih4x", "link": "https://stackoverflow.com/users/7681194/nih4x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1489050071, "creation_date": 1489014987, "last_edit_date": 1489050071, "question_id": 42683767, "link": "https://stackoverflow.com/questions/42683767/output-from-a-php-script-to-c-scanf-of-program", "title": "Output from a PHP script to C scanf of program", "body": "<p>I wonder how is it possible to pass an output from PHP to scanf of a c program? The normal way of inputing in this C program is to use an <code>echo -ne \"\\x0a etc...........\" | ./program</code> on terminal. The thing is that I cannot apply it on PHP. could someone help me? Lets say I want to output the variable $var from PHP to the C program.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1489014393, "post_id": 42683644, "comment_id": 72491321, "body": "No there is no NUL in your <code>a</code> array as shown. I&#39;m sure this is a dup and am looking for that (I may have even answered it myself)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489014395, "post_id": 42683644, "comment_id": 72491324, "body": "No, there isn&#39;t."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1489014514, "post_id": 42683644, "comment_id": 72491363, "body": "So the compiler only add the null character if the lenght is sufficient right ?"}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1489014553, "post_id": 42683644, "comment_id": 72491380, "body": "@yellowantphil sorry just made copy-paste and forgot to remove the precision."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1489014597, "post_id": 42683644, "comment_id": 72491398, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/18688971/c-char-array-initialization\">C char array initialization</a>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1489014632, "post_id": 42683644, "comment_id": 72491417, "body": "One of the answers in the dup quotes the relevant sections of the C spec which answers your question."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489105851, "post_id": 42683644, "comment_id": 72537927, "body": "the compiler will produce code that always inserts the full literal (4 characters) starting at the location where the array starts.  I.E. the array will be overrun.  This is undefined behavior and can/will lead to a seg fault event."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489337224, "post_id": 42683644, "comment_id": 72616617, "body": "@user3629249 You are incorrect."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1489337261, "post_id": 42683644, "comment_id": 72616636, "body": "@kaylum I think this <i>question</i> is sufficiently different from the linked one to warrant its own answer."}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 1, "last_activity_date": 1489337208, "creation_date": 1489337208, "answer_id": 42750152, "question_id": 42683644, "link": "https://stackoverflow.com/questions/42683644/is-there-a-null-character-added-after-the-string-literal-even-the-bound-is-not-c/42750152#42750152", "title": "Is there a null character added after the string literal even the bound is not correct?", "body": "<p><code>char a[3] = \"abc\";</code> is well-formed; the three elements of the array will be the characters <code>'a'</code>, <code>'b'</code>, and <code>'c'</code>.  There will not be a NUL terminator.  (There might still happen to be a zero byte in memory immediately after the storage allocated to the array, but if there is, it is not part of the array. <code>printf(\"%s\", a)</code> has undefined behavior.)</p>\n\n<p>You might think that this violates the normal rule for when the initializer is too long for the object, C99 6.7.8p2</p>\n\n<blockquote>\n  <p>No initializer shall attempt to provide a value for an object not contained within the entity\n  being initialized.</p>\n</blockquote>\n\n<p>That's a \"shall\" sentence in a \"constraints\" section, so a program that violates it is ill-formed. But there is a special case for when you initialize a <code>char</code> array with a string literal: C99 6.7.8p14 reads</p>\n\n<blockquote>\n  <p>An array of character type may be initialized by a character string literal, optionally\n  enclosed in braces. Successive characters of the character string literal (including the\n  terminating null character if there is room or if the array is of unknown size) initialize the\n  elements of the array.</p>\n</blockquote>\n\n<p>The parenthetical overrides 6.7.8p2 and specifies that in this case the terminating null character is discarded.</p>\n\n<p>There is a similar special case for initializing a <code>wchar_t</code> array with a wide string literal.</p>\n"}], "owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489337208, "creation_date": 1489014345, "last_edit_date": 1489014531, "question_id": 42683644, "link": "https://stackoverflow.com/questions/42683644/is-there-a-null-character-added-after-the-string-literal-even-the-bound-is-not-c", "title": "Is there a null character added after the string literal even the bound is not correct?", "body": "<p>Is there any null character after the character c in memory:</p>\n\n<pre><code>char a[3]=\"abc\";\nprintf(\"the value of the character is %.3s\\n\",a);\nprintf(\"the value of the character is %s\\n\",a);\n</code></pre>\n\n<p>Which line is correct ?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1489015489, "post_id": 42683527, "comment_id": 72491751, "body": "The compiler knows nothing about your critical section. It operates at a much more micro-level than that. It operates at the assembly level. It may move individual assembly instructions to be outside the critical section. But it will not affect the correctness of your code as that&#39;s one of its core guarantees."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1489015549, "post_id": 42683527, "comment_id": 72491777, "body": "It is pretty simple, it cannot do &quot;whatever re-ordering&quot;.  The optimizer will not move code across a function call that it doesn&#39;t know beans about.  It has to assume it has observable side-effects.  Just like it will never print &quot;Bye&quot; before &quot;Hi&quot;."}, {"owner": {"reputation": 679, "user_id": 7663425, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eeb15b66507a9374260b7a5472f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7663425/christopher"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1489015798, "post_id": 42683527, "comment_id": 72491868, "body": "@Hans Passant So even if I used <code>foo()</code> and <code>boo()</code> instead of <code>EnterCriticalSection()</code> and <code>LeaveCriticalSection()</code>, the code inside <code>foo()</code> and <code>boo()</code> will not be moved outside of these two functions, correct?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1489017404, "post_id": 42683527, "comment_id": 72492441, "body": "compiler have no knowledge about <code>EnterCriticalSection</code> or <code>LeaveCriticalSection</code> api. <code>EnterCriticalSection</code> or <code>foo</code> or <code>boo</code> - no any different for compiler. and any external function call - stop any re-ordering. compiler can do reordering only in code snippet, not containing any external calls. first external call some <code>boo</code> - stoping reordering and act as memory barrier"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1489017791, "post_id": 42683527, "comment_id": 72492551, "body": "<code>the code inside foo() and boo() will not be moved outside of these two functions, correct?</code> - of course will be not moved. compiler never re-order external functions calls and code between this calls. it can only reorder some instructions in code snippet where <i>no any external calls</i>"}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1489015832, "creation_date": 1489015832, "answer_id": 42683919, "question_id": 42683527, "link": "https://stackoverflow.com/questions/42683527/how-does-a-compiler-knows-not-to-move-the-code-inside-a-critical-section-to-the/42683919#42683919", "title": "How does a compiler knows not to move the code inside a critical section to the outside of the critical section?", "body": "<p>Supposing the compiler doesn't have any special knowledge about EnterCriticalSection;  it won't be able to make any assumptions about what the function does.</p>\n\n<p>Therefore it cannot reorder the <code>printf</code> statements because it has to allow for the possibility that <code>EnterCriticalSection</code> might also write to <code>stdout</code>, and the output on <code>stdout</code> has to appear in the same order as if the <code>printf</code> statements were executed as written.</p>\n\n<p>The same applies to things like access to global variables, the compiler has to allow for the function maybe accessing such variables.</p>\n"}, {"tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 6, "last_activity_date": 1489016300, "last_edit_date": 1489016300, "creation_date": 1489015993, "answer_id": 42683955, "question_id": 42683527, "link": "https://stackoverflow.com/questions/42683527/how-does-a-compiler-knows-not-to-move-the-code-inside-a-critical-section-to-the/42683955#42683955", "title": "How does a compiler knows not to move the code inside a critical section to the outside of the critical section?", "body": "<blockquote>\n  <p>A compiler can do whatever re-ordering it wants to my code.</p>\n</blockquote>\n\n<p>This is incorrect.  The compiler is limited.</p>\n\n<blockquote>\n  <p>The code inside a critical section will not be moved to the outside of the critical section.</p>\n</blockquote>\n\n<p>This is also incorrect, depending on what code is inside / outside the critical section.</p>\n\n<h2>Optimization and constraints</h2>\n\n<p>The compiler has a bunch of constraints about each piece of code in your function.  These constraints might be inputs and outputs (can't execute Y unless you execute X first) or more general statements like \"this affects the contents of memory somewhere\".  The compiler will preserve these constraints when compiling your code.  If the compiler doesn't know what a function does it will use the heaviest set of constraints.</p>\n\n<p><em>In general,</em> this means that the compiler won't flip the order of two function calls<sup>1</sup>.</p>\n\n<pre><code>f(); // Maybe affects memory somewhere.\ng(); // Maybe affects memory somewhere.\n</code></pre>\n\n<p>It also means that generally, if you access memory, those memory accesses have to be sequenced relative to the function calls.</p>\n\n<pre><code>void myfunc(X *ptr) {\n    my_lock(ptr-&gt;mutex);   // Maybe affects memory somewhere.\n    ptr-&gt;field++;          // Definitely affects memory at ptr-&gt;field.\n    my_unlock(ptr-&gt;mutex); // Maybe affects memory somewhere.\n}\n</code></pre>\n\n<p>However, it can reorder things out of critical sections:</p>\n\n<pre><code>int i = 5;\nmy_lock();   // Maybe affects memory somewhere.\ni++;         // This is not \"memory somewhere\", this is my variable,\n             // it's a register or on the stack and nobody else can\n             // change it.\nmy_unlock(); // Maybe affects memory somewhere.\n</code></pre>\n\n<p>So it could reorder that to:</p>\n\n<pre><code>int i = 6;\nmy_lock();\nmy_unlock();\n</code></pre>\n\n<p>The above code can be reordered because the compiler has special knowledge about who is allowed to modify <code>i</code>.  If you have some special code somewhere else which walks up the stack to try and create a pointer to <code>i</code> even though <code>&amp;i</code> never appears in your program, you're breaking your contract with the compiler (a.k.a. your program has undefined behavior).</p>\n\n<p>I hope this clarifies things.</p>\n\n<h3>Footnote</h3>\n\n<p><sup>1</sup>: You can add annotations like <code>__declspec(noalias)</code> which change this rule, and LTO / whole-program-optimization / interprocedural optimization can change things too.</p>\n"}], "owner": {"reputation": 679, "user_id": 7663425, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eeb15b66507a9374260b7a5472f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7663425/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 42683955, "answer_count": 2, "score": 1, "last_activity_date": 1489016300, "creation_date": 1489013773, "last_edit_date": 1489014906, "question_id": 42683527, "link": "https://stackoverflow.com/questions/42683527/how-does-a-compiler-knows-not-to-move-the-code-inside-a-critical-section-to-the", "title": "How does a compiler knows not to move the code inside a critical section to the outside of the critical section?", "body": "<p>Based on my understanding:</p>\n\n<ul>\n<li><p>A compiler can do whatever re-ordering it wants to my code.</p></li>\n<li><p>The code inside a critical section will not be moved to the outside of the critical section.</p></li>\n</ul>\n\n<p>Now say I have the following code:</p>\n\n<pre><code>printf(\"Hi\");\n\nEnterCriticalSection(&amp;CriticalSection);\nprintf(\"Inside the critical section\");\nprintf(\"Also inside the critical section\");\nLeaveCriticalSection(&amp;CriticalSection);\n\nprintf(\"Bye\");\n</code></pre>\n\n<p>Now, will the compiler actually look for the functions <code>EnterCriticalSection()</code> and <code>LeaveCriticalSection()</code> and not move the code inside of them to the outside?</p>\n"}, {"tags": ["c", "gcc", "static-libraries", "unix-ar", ".a"], "answers": [{"comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1489014449, "post_id": 42683543, "comment_id": 72491345, "body": "&quot;its name must begin with lib&quot; - <a href=\"http://stackoverflow.com/questions/10234208/how-do-i-link-a-library-file-in-gcc-that-does-not-start-with-lib\">not necessarily!</a> :)"}, {"owner": {"reputation": 1216, "user_id": 2252948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb6114307bc12f710bf50ed7b929aa0?s=128&d=identicon&r=PG", "display_name": "AnthonyD973", "link": "https://stackoverflow.com/users/2252948/anthonyd973"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1489014622, "post_id": 42683543, "comment_id": 72491408, "body": "@davmac Excellent! I&#39;ll wake up tomorrow less unintelligent."}, {"owner": {"reputation": 427, "user_id": 7681114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ca4f94a93211c2a1d8a5f57a1a902a3?s=128&d=identicon&r=PG&f=1", "display_name": "DEADBEEF", "link": "https://stackoverflow.com/users/7681114/deadbeef"}, "edited": false, "score": 0, "creation_date": 1489030877, "post_id": 42683543, "comment_id": 72496064, "body": "Thanks. Had to move the <code>.a</code> into <code>MinGW\\lib</code>, but otherwise, this was the answer."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 427, "user_id": 7681114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ca4f94a93211c2a1d8a5f57a1a902a3?s=128&d=identicon&r=PG&f=1", "display_name": "DEADBEEF", "link": "https://stackoverflow.com/users/7681114/deadbeef"}, "edited": false, "score": 1, "creation_date": 1489071289, "post_id": 42683543, "comment_id": 72518812, "body": "@L\u036c\u036c\u0343\u0344\u0367\u0363\u033dO\u036d\u0307\u0342\u034b\u030a\u0306\u0351\u0367\u0346\u0346\u036b\u036cL\u0363\u0369\u0357\u033e\u0350\u031a to avoid needing to move your archive you likely need to specify <i>both</i> the library path and the library to link against: <code>-L. -l:mylib.a</code>"}, {"owner": {"reputation": 427, "user_id": 7681114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ca4f94a93211c2a1d8a5f57a1a902a3?s=128&d=identicon&r=PG&f=1", "display_name": "DEADBEEF", "link": "https://stackoverflow.com/users/7681114/deadbeef"}, "edited": false, "score": 1, "creation_date": 1489173428, "post_id": 42683543, "comment_id": 72571756, "body": "Great link, btw!"}], "tags": [], "owner": {"reputation": 1216, "user_id": 2252948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb6114307bc12f710bf50ed7b929aa0?s=128&d=identicon&r=PG", "display_name": "AnthonyD973", "link": "https://stackoverflow.com/users/2252948/anthonyd973"}, "is_accepted": true, "score": 6, "last_activity_date": 1489015027, "last_edit_date": 1495535486, "creation_date": 1489013842, "answer_id": 42683543, "question_id": 42683496, "link": "https://stackoverflow.com/questions/42683496/attempting-to-compile-with-my-own-static-c-library/42683543#42683543", "title": "Attempting to compile with my own static C library", "body": "<p>You probably want the <code>-l</code> flag instead of the <code>-L</code> flag for gcc. <code>-L</code> adds library paths, whereas <code>-l</code> links to the library.</p>\n\n<p>Also, if you are making that static library for Linux, its name should begin with <code>lib</code> (but <a href=\"https://stackoverflow.com/a/10259822/2252948\">does not have to</a>, thanks to @davmac for mentioning). So your library's file name should be <code>libmyLib.a</code>, and then you should link against it with <code>-lmyLib</code>. (Yes, I find that awkward too.).</p>\n\n<p>I don't know about Windows, but I guess the Windows static library's equivalent is simply <code>myLib.lib</code>. Please verify this statement first if you are making a Windows library.</p>\n\n<p>See more <a href=\"http://www.rapidtables.com/code/linux/gcc/gcc-l.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 427, "user_id": 7681114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8ca4f94a93211c2a1d8a5f57a1a902a3?s=128&d=identicon&r=PG&f=1", "display_name": "DEADBEEF", "link": "https://stackoverflow.com/users/7681114/deadbeef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 42683543, "answer_count": 1, "score": 4, "last_activity_date": 1489101453, "creation_date": 1489013637, "last_edit_date": 1489101453, "question_id": 42683496, "link": "https://stackoverflow.com/questions/42683496/attempting-to-compile-with-my-own-static-c-library", "title": "Attempting to compile with my own static C library", "body": "<p>I compiled a static library. I have two files.</p>\n\n<ul>\n<li><code>mylib_1.c</code> with function <code>foo1</code> in it</li>\n<li><code>mylib_2.c</code> with function <code>foo2</code> in it.</li>\n</ul>\n\n<p>Both <code>#include \"mylib.h\"</code>.</p>\n\n<p>I compiled a library like so:</p>\n\n<pre><code>gcc -c mylib_1.c -o mylib_1.o\ngcc -c mylib_2.c -o mylib_2.o\nar cr mylib.a mylib_1.o mylib_2.o\n</code></pre>\n\n<p>Then I tried to compile <code>mylib_test.c</code> with my library.</p>\n\n<pre><code>#include \"mylib.h\"\n\nint main(void)\n{\n    foo1(\"do something cool\");\n    foo2(\"do something cool\");\n\n    return 0;\n}\n</code></pre>\n\n<p>If I compile like <code>gcc mylib_test.c mylib.a</code>, GCC succeeds and everything works fine.</p>\n\n<p>If I compile like <code>gcc mylib_test.c -Lmylib.a</code>, GCC fails with:</p>\n\n<pre><code>C:\\path\\to\\mylib_test.c:x: undefined reference to foo1\nC:\\path\\to\\mylib_test.c:x: undefined reference to foo2\n</code></pre>\n\n<p>Why does GCC fail?</p>\n\n<p>If it makes a d&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;&#x307;ifference, I'm running the latest version of MinGW on Windows 7.1.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489100595, "post_id": 42682646, "comment_id": 72536133, "body": "or ease of readability and understanding: 1) follow the axiom: only one statement per line and (at most) one variable declaration per statement. 2) separate code blocks (for, if, else, while, do...while, switch, case, default) via one blank line. 3) separate functions by 2 or 3 blank lines (be consistent)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489100645, "post_id": 42682646, "comment_id": 72536161, "body": "when the wrong number of parameters provided, the code should put out a &#39;usage&#39; statement similar to: <code>fprintf( stderr, &quot;USAGE: %s &lt;portNum&gt;\\n, argv[0] )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489100670, "post_id": 42682646, "comment_id": 72536174, "body": "the function: <code>htons()</code> is expecting a uint16_t parameter, not a int parameter."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489100693, "post_id": 42682646, "comment_id": 72536182, "body": "the function: <code>listen()</code> has a returned value, that should be checked to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489100716, "post_id": 42682646, "comment_id": 72536192, "body": "when the call to <code>read()</code> returns an error condition, do not continue in the program and certainly do not be comparing the input buffer to anything."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489100738, "post_id": 42682646, "comment_id": 72536202, "body": "the posted code contains several &#39;magic&#39; numbers. &#39;magic&#39; numbers are numbers with no basis. (I.E. 255, 256) &#39;magic&#39; numbers make the code much more difficult to understand, debug, maintain. Strongly suggest using a <code>enum</code> statement or <code>#define</code> statements to give those &#39;magic&#39; numbers meaningful names, then use those meaningful names through out the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489100763, "post_id": 42682646, "comment_id": 72536213, "body": "this line, <code>while (strcmp(buffer, &quot;+++&quot;) != 0)</code> at least on the first pass through the loop, is not set via a call to read(). Suggest basing the loop on the results of a call to read() rather than on the contents of the buffer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489100975, "post_id": 42682646, "comment_id": 72536312, "body": "when compiling, always enable all the warnings, then fix those warnings. (for gcc at a minimum use: <code>-Wall -Wextra -pedantic</code> I also use: <code>-Wconversion -std=gnu11</code> )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489101101, "post_id": 42682646, "comment_id": 72536353, "body": "when calling <code>fgets()</code> the length should be the full length of the input buffer, not one less than the length of the input buffer.  Also, the <code>fgets()</code> will include the newline sequence for best results, the code should search the input buffer for a &#39;\\n&#39; and overlay that char with a NUL byte"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489101217, "post_id": 42682646, "comment_id": 72536394, "body": "if the call to <code>write()</code> returns an error condition, then the other computer will not have received the message, so do not be calling <code>read()</code>, expecting the other computer to send a response."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489101400, "post_id": 42682646, "comment_id": 72536459, "body": "when communicating via a <code>socket</code> it is best to not use low level functions like <code>read()</code> and <code>write()</code> best to use high level functions like <code>send()</code> and <code>recv()</code> as they will handle a lot of the error checking"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489101624, "post_id": 42682646, "comment_id": 72536543, "body": "when writing a server, it is best to not delay other client communications by processing the communications within the main thread.  Much better to 1) have previously created a <code>thread pool</code>  then 2) pass each client processing to the the next available thread"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489101955, "post_id": 42682646, "comment_id": 72536665, "body": "this line: <code>while (strcmp(buffer, &quot;+++&quot;) != 0)</code> will fail to catch the final communication because the user entered the <code>+++</code> which was entered via a newline and when using <code>fgets()</code> that new line will also be in the input buffer so this will never match."}], "answers": [{"tags": [], "owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "is_accepted": false, "score": 1, "last_activity_date": 1489014569, "last_edit_date": 1489014569, "creation_date": 1489011536, "answer_id": 42682985, "question_id": 42682646, "link": "https://stackoverflow.com/questions/42682646/how-to-fix-the-while-loop-in-server-c-and-client-c/42682985#42682985", "title": "how to fix the while loop in server.c and client.c", "body": "<p>Few things:</p>\n\n<p>In the client loop, you do a <code>write</code> and a <code>read</code> on the socket. But your server never writes to that socket(no <code>write</code> call in the server, only <code>read</code>). As a result, your client gets blocked on the <code>read</code> call. That's why you cannot enter more...</p>\n\n<p>In general, you need to check how much you wrote in and keep writing until done (a loop is needed). </p>\n\n<pre><code>int n = 0;\nwhile (n != strlen(buffer){\n   n += write(sockfd,&amp;buffer[n],strlen(buffer)-n);      \n}\n</code></pre>\n\n<p>Same goes for reading from a socket:</p>\n\n<pre><code>int n = 0;\nwhile (n != strlen(buffer){\n   n += read(sockfd,&amp;buffer[n],strlen(buffer)-n);      \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "is_accepted": false, "score": 0, "last_activity_date": 1489012440, "creation_date": 1489012440, "answer_id": 42683202, "question_id": 42682646, "link": "https://stackoverflow.com/questions/42682646/how-to-fix-the-while-loop-in-server-c-and-client-c/42683202#42683202", "title": "how to fix the while loop in server.c and client.c", "body": "<p>Here's what I believe is likely happening.</p>\n\n<ol>\n<li>Client sends some chunk of data. Possibly all of the string <code>harris@ics.uci.edu</code>, but possibly less.</li>\n<li>The server reads some chunk of this, most likely less than the full string, say <code>harris@ic</code>.</li>\n<li>The server performs the <code>strcmp</code>, which doesn't match anything, so returns to the top of the loop.</li>\n<li>The server reads the remainder of the email, say <code>s.uci.edu</code> <em>into <code>buffer</code>, thus overwriting it</em>.</li>\n<li>Again, this doesn't match anything, so the server goes to the top of the while loop again.</li>\n<li>The server hangs on the <code>read</code> call, waiting for data from the client. Because the client is waiting for a reply, it's stuck on its own <code>read</code> call. ...And nothing else happens.</li>\n</ol>\n\n<p>There are two main problems here. First, TCP sockets are just streams of bytes, and when you read data from them, the OS no longer keeps it around. You are now expected to handle any previously- or partially-read data if you need. And second, the OS often transmits (both sending and receiving) fewer bytes than you request. While you ask that the full string <code>harris@ics.uci.edu</code> be sent, only a portion of that may be sent, or only a portion of that may be read on the other side.</p>\n\n<p>This means two things for you. It's always important to check the amount of data read/written any time you call <code>read(2)</code> or <code>write(2)</code>, but it's <em>crucial</em> in networking. Make sure you read/write as much as you need (the full email in this case) before moving on to, for example, waiting for a reply.</p>\n\n<p>The second thing is that you need some way of delineating full messages and buffering partial messages. In what you've got, as is common in lots of text-based messaging protocols, the newline <code>\\n</code> is your delimiter. So instead of a single call to <code>read(2)</code> in the server, you need something like this (pseduocode):</p>\n\n<pre><code>while newline not in data:\n    data += read(sockfd, ...)\n</code></pre>\n\n<p>Once you receive your newline, process the full message, but don't throw away any extra bytes you've read from the next message. Keep those around, and append the next bytes read from the socket to them, and so on.</p>\n\n<p>EDIT:</p>\n\n<p>Note that it's usually better to use <code>recv(2)</code> and <code>send(2)</code> when working with sockets. The <code>read(2)</code>/<code>write(2)</code> system calls will work just fine, but the others are more clear when working with sockets, and allow you to specify other flags, for example, peeking at the bytes currently on the socket or waiting until all the bytes you request are available before returning.</p>\n"}], "owner": {"reputation": 119, "user_id": 7062915, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/748abc6c6b34fc8d4762b6c0485d46a7?s=128&d=identicon&r=PG&f=1", "display_name": "zhangdi", "link": "https://stackoverflow.com/users/7062915/zhangdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489014569, "creation_date": 1489010142, "question_id": 42682646, "link": "https://stackoverflow.com/questions/42682646/how-to-fix-the-while-loop-in-server-c-and-client-c", "title": "how to fix the while loop in server.c and client.c", "body": "<p>server.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt; \n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid error(char *msg)\n{\n    perror(msg);\n    exit(1);\n}\n\nint main(int argc, char *argv[])\n{\n     int sockfd, newsockfd, portno, clilen;\n     char buffer[256];\n     struct sockaddr_in serv_addr, cli_addr;\n     int n;\n     char *result1 = \"Ian G. Harris\";\n     char *result2 = \"Joe Smith\";\n     char *result3 = \"Jane Smith\";\n     if (argc &lt; 2) \n     {\n         fprintf(stderr,\"ERROR, no port provided\\n\");\n         exit(1);\n     }\n     sockfd = socket(AF_INET, SOCK_STREAM, 0);\n     if (sockfd &lt; 0) \n     {\n        error(\"ERROR opening socket\");\n     }\n     bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n     portno = atoi(argv[1]);\n     serv_addr.sin_family = AF_INET;\n     serv_addr.sin_addr.s_addr = INADDR_ANY;\n     serv_addr.sin_port = htons(portno);\n     if (bind(sockfd, (struct sockaddr *) &amp;serv_addr,\n              sizeof(serv_addr)) &lt; 0) \n              error(\"ERROR on binding\");\n     listen(sockfd,5);\n     clilen = sizeof(cli_addr);\n     newsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clilen);\n     if (newsockfd &lt; 0) \n     {\n          error(\"ERROR on accept\");\n     }\n     while (strcmp(buffer, \"+++\") != 0)\n     {\n         bzero(buffer,256);\n         n = read(newsockfd,buffer,255);\n         if (n &lt; 0) error(\"ERROR reading from socket\");\n         printf(\"Address server started\\n\");\n         if (strcmp(buffer, \"harris@ics.uci.edu\\n\") == 0)\n         {\n             printf(\"%s\\n\", result1);\n         }\n         else if(strcmp(buffer, \"joe@cnn.com\\n\") == 0)\n         {\n              printf(\"%s\\n\", result2);\n         }\n         else if(strcmp(buffer, \"jane@slashdot.org\\n\")==0)\n         {\n             printf(\"%s\\n\", result3);\n         }\n     }\n     return 0; \n}\n</code></pre>\n\n<p>client.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt; \n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid error(char *msg)\n{\n    perror(msg);\n    exit(0);\n}\nint main(int argc, char *argv[])\n{\n    int sockfd, portno, n;\n    struct sockaddr_in serv_addr;\n    struct hostent *server;\n\n    char buffer[256];\n    if (argc &lt; 3) \n    {\n           fprintf(stderr,\"usage %s hostname port\\n\", argv[0]);\n           exit(0);\n    }\n    portno = atoi(argv[2]);\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockfd &lt; 0) \n        error(\"ERROR opening socket\");\n    server = gethostbyname(argv[1]);\n    if (server == NULL)\n    {\n        fprintf(stderr,\"ERROR, no such host\\n\");\n        exit(0);\n    }\n    bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    bcopy((char *)server-&gt;h_addr, \n         (char *)&amp;serv_addr.sin_addr.s_addr,\n         server-&gt;h_length);\n    serv_addr.sin_port = htons(portno);\n    if (connect(sockfd,(struct sockaddr *)&amp;serv_addr,sizeof(serv_addr)) &lt; 0) \n        error(\"ERROR connecting\");\n    while (strcmp(buffer, \"+++\") != 0)\n    {\n        printf(\"&gt; \");\n        bzero(buffer,256);\n        fgets(buffer,255,stdin);\n        n = write(sockfd,buffer,strlen(buffer));\n        if (n &lt; 0) \n             error(\"ERROR writing to socket\");\n        bzero(buffer,256);\n        n = read(sockfd,buffer,255);\n        if (n &lt; 0) \n             error(\"ERROR reading from socket\");\n        printf(\"%s\\n\",buffer);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I am new to c and I am writing a server.c and client.c. The problem of my code is that I cannot make the program keep taking inputs until I enter \"+++\" to quit. The correct output is shown below:</p>\n\n<p>client terminal:</p>\n\n<pre><code>&gt; harris@ics.uci.edu\nIan G. Harris\n&gt; joe@cnn.com\nJoe\n&gt;\n</code></pre>\n\n<p>server terminal:</p>\n\n<pre><code>Address server started\nharris@ics.uci.edu\njoe@cnn.com\n</code></pre>\n\n<p>in my code, when I enter \"harris@ics.uci.edu\" in client terminal, it does the following:</p>\n\n<pre><code>&gt; harris@ics.uci.edu\n(empty line) \n</code></pre>\n\n<p>and it does not take any input anymore. </p>\n\n<p>Is there something wrong in the while loop? can someone help me to fix it? Thanks in advance. </p>\n"}, {"tags": ["c", "subprocess", "pipe", "file-descriptor", "fdopen"], "comments": [{"owner": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "edited": false, "score": 0, "creation_date": 1489010266, "post_id": 42682605, "comment_id": 72489511, "body": "I would recommend using a named pipe, that way you can pull the name from constants file instead of passing file descriptors."}, {"owner": {"reputation": 458, "user_id": 4859841, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bdd16a42c66bc68a465c6197629174fc?s=128&d=identicon&r=PG&f=1", "display_name": "Herbert", "link": "https://stackoverflow.com/users/4859841/herbert"}, "reply_to_user": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "edited": false, "score": 0, "creation_date": 1489010340, "post_id": 42682605, "comment_id": 72489537, "body": "@Dan I want it to be cross platform. But it will be hard to have named pipe in windows as it don&#39;t have os.mkfifo() function."}, {"owner": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "edited": false, "score": 0, "creation_date": 1489010425, "post_id": 42682605, "comment_id": 72489571, "body": "Can you simply redirect stdin and stdout?"}, {"owner": {"reputation": 458, "user_id": 4859841, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bdd16a42c66bc68a465c6197629174fc?s=128&d=identicon&r=PG&f=1", "display_name": "Herbert", "link": "https://stackoverflow.com/users/4859841/herbert"}, "reply_to_user": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "edited": false, "score": 0, "creation_date": 1489010558, "post_id": 42682605, "comment_id": 72489635, "body": "@Dan No, since I use stdin and stdout for other purpose."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489014840, "post_id": 42682605, "comment_id": 72491504, "body": "Did you check the value of <code>readfd</code>? Is t the same in the subrocess as in the python script? What is the error message reported by <code>fdopen</code>?"}, {"owner": {"reputation": 458, "user_id": 4859841, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bdd16a42c66bc68a465c6197629174fc?s=128&d=identicon&r=PG&f=1", "display_name": "Herbert", "link": "https://stackoverflow.com/users/4859841/herbert"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489015064, "post_id": 42682605, "comment_id": 72491589, "body": "@DYZ It&#39;s 5 in my case. I don&#39;t know what&#39;s the error message because it simply return NULL as <code>FILE* fp</code> is nullptr after that line. I think the problem might because the file descriptor is not real one as it is created by python?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489015236, "post_id": 42682605, "comment_id": 72491661, "body": "Please use <code>perror()</code> to retrieve the error message."}], "owner": {"reputation": 458, "user_id": 4859841, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bdd16a42c66bc68a465c6197629174fc?s=128&d=identicon&r=PG&f=1", "display_name": "Herbert", "link": "https://stackoverflow.com/users/4859841/herbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 595, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489014196, "creation_date": 1489009995, "last_edit_date": 1489010677, "question_id": 42682605, "link": "https://stackoverflow.com/questions/42682605/python-os-pipe-to-create-pipe-and-open-the-file-descriptor-in-c", "title": "python os.pipe() to create pipe and open the file descriptor in c", "body": "<p>I want to use python to create a pipe <code>readfd, writefd = os.pipe()</code>. And then I create a subprocess inside my python script to run some c code where it tries to open the readfd(which is an int say 5) <code>FILE* fp  = fdopen(readfd, \"r\");</code> but it returns a nullptr. Why is this wrong? How can I open the file descriptor in my c code?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 448, "user_id": 2499645, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Tbsis.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2499645/peter"}, "edited": false, "score": 0, "creation_date": 1489009206, "post_id": 42682276, "comment_id": 72488943, "body": "Shouldn&#39;t the initial input print (assuming input like &quot;Bad&quot; corresponds to placing <code>value B</code> at <code>row a</code> and <code>column d</code> is :  abcdef  a UUUBUU b UUUBUU c UWUUUU d UUUUWU e UUUUUU f UUUUUU  Or what am I misunderstanding?"}, {"owner": {"reputation": 95, "user_id": 7679710, "user_type": "registered", "profile_image": "https://graph.facebook.com/2251221841769903/picture?type=large", "display_name": "gouhaha", "link": "https://stackoverflow.com/users/7679710/gouhaha"}, "reply_to_user": {"reputation": 448, "user_id": 2499645, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Tbsis.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2499645/peter"}, "edited": false, "score": 0, "creation_date": 1489012897, "post_id": 42682276, "comment_id": 72490717, "body": "Oh yes, this question is actually the second step of a project. The very first thing should be to print a WBBW in the center, and afterwards it prompts for inputs of some number of steps and print again. I&#39;ll edit the question."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7679710, "user_type": "registered", "profile_image": "https://graph.facebook.com/2251221841769903/picture?type=large", "display_name": "gouhaha", "link": "https://stackoverflow.com/users/7679710/gouhaha"}, "edited": false, "score": 0, "creation_date": 1489042891, "post_id": 42686034, "comment_id": 72500369, "body": "Thank you so much!!"}], "tags": [], "owner": {"reputation": 72, "user_id": 7681792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc66b5eb8e7207c8e24c66c114545319?s=128&d=identicon&r=PG&f=1", "display_name": "Wei-Yuan Chen", "link": "https://stackoverflow.com/users/7681792/wei-yuan-chen"}, "is_accepted": true, "score": 0, "last_activity_date": 1489029589, "creation_date": 1489029589, "answer_id": 42686034, "question_id": 42682276, "link": "https://stackoverflow.com/questions/42682276/ordering-positions-of-a-tile-on-a-board-using-c/42686034#42686034", "title": "Ordering positions of a tile on a board using C", "body": "<p>try this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n// Maximum size\n#define Maximum_size 26\n// board initial size\n#define Ini_Row_size 6\n#define Ini_Col_size 6\n/* test input\nBbd\nBad\nWde\nWcb\n!!!\n*/\nint main(void) {\n    // Maximum size\n    int sizeMax = Maximum_size;\n    // board size\n    int sizeRow = Ini_Row_size - 1;\n    int sizeCol = Ini_Row_size - 1;\n\n    int i, j;\n    char color, row, col;\n    char board[sizeMax][sizeMax];\n    // board initial\n    for ( i=0 ; i&lt;sizeMax ; i++ ) for ( j=0 ; j&lt;sizeMax ; j++ ) board[i][j] = 'U';\n\n    printf(\"Enter board configuration: \\n\");\n\n    // moves\n    while (true) {\n\n        // read the moves\n        scanf(\" %c%c%c\", &amp;color, &amp;row, &amp;col); \n        if( (color == '!') &amp;&amp; (row == '!') &amp;&amp; (col == '!') ) break;\n\n        // turn char to int (index)\n        int temp_row = row - 'a';\n        int temp_col = col - 'a';\n\n        // if the move is out-of the sizeMax then ignore the move\n        if( temp_row&gt;=sizeMax || temp_row&lt;0 || temp_col&gt;=sizeMax || temp_col&lt;0) continue;\n\n        // save the color\n        board[temp_row][temp_col] = color;\n\n        // update the board size when the move is out-of the board range\n        sizeRow = sizeRow &gt; temp_row ? sizeRow : temp_row;\n        sizeCol = sizeCol &gt; temp_col ? sizeCol : temp_col;\n    }\n\n    // the size have to +1 because for-loop is i&lt;size\n    sizeRow++;\n    sizeCol++;\n\n    // set the center\n        // center index\n    int ci[4][2]={  {(sizeRow-1)/2,(sizeCol-1)/2},\n                    {(sizeRow)/2,(sizeCol)/2},\n                    {(sizeRow-1)/2,(sizeCol)/2},\n                    {(sizeRow)/2,(sizeCol-1)/2} };\n        // center color\n    char cc[4]={ 'W', 'W', 'B', 'B'};\n\n    for( i=0 ; i&lt;4 ; i++) {\n        // if there is no any move to center point then set center color\n        if( board[ (ci[i][0]) ][ (ci[i][1]) ] == 'U')\n            board[ (ci[i][0]) ][ (ci[i][1]) ] = cc[i];\n    }\n\n    // show the board\n\n    // first row\n    printf(\"  \");\n    for ( i=0 ; i&lt;sizeCol ; i++ ) printf(\"%c\", 'a'+i );\n    printf(\"\\n\");\n\n    // first col &amp; board\n    for ( i=0 ; i&lt;sizeRow ; i++ ) {\n        // first col\n        printf(\"%c \", 'a'+i);\n        for ( j=0 ; j&lt;sizeCol ; j++ ) {\n            // board\n            printf(\"%c\", board[i][j] );\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Is this a game?\nIf so, I think it should change the way to operate.\nNow is like:</p>\n\n<pre><code>-- user input\nmove-1\nmove-2\nmove-3\n...\n-- board output\nboard\n</code></pre>\n\n<p>Maybe change to this way:</p>\n\n<pre><code>-- user input\nmove-1\n-- board output\nboard\n-- user input\nmove-2\n-- board output\nboard\n...\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7679710, "user_type": "registered", "profile_image": "https://graph.facebook.com/2251221841769903/picture?type=large", "display_name": "gouhaha", "link": "https://stackoverflow.com/users/7679710/gouhaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 42686034, "answer_count": 1, "score": -1, "last_activity_date": 1489029589, "creation_date": 1489008680, "last_edit_date": 1489013015, "question_id": 42682276, "link": "https://stackoverflow.com/questions/42682276/ordering-positions-of-a-tile-on-a-board-using-c", "title": "Ordering positions of a tile on a board using C", "body": "<p>Suppose I have Black ('B') and White ('W') tiles on a board of n x n dimension. n is a user input, which can go from 'a' to 'z'. When user entered n, it will print the \"board\" with 2 Whites and 2 Blacks in the center. Then a number of steps will be entered by the user. Assume n is always even, and user input will only be stopped from storing when '!!!' is entered. So the tiles take the position I need to print out the configuration of the board after a series of user input as follows: </p>\n\n<pre><code>Enter a board configuration:\nBbd\nBad\nWde\nWcb\n!!!\n</code></pre>\n\n<p>Then, it SHOULD print:</p>\n\n<pre><code>  abcdef \na UUUBUU\nb UUUBUU\nc UWWBUU\nd UUBWWU\ne UUUUUU\nf UUUUUU\n</code></pre>\n\n<p>However, I realized that unless I re-order the tiles by increasing order, so from the previous example: </p>\n\n<pre><code>Enter a board configuration:\nBad\nBbd\nWcb\nWde\n!!!\n</code></pre>\n\n<p>It would only print out one or a couple, but not all of the tiles. \nIt applies to tiles with same row number but different column number, or vice versa: </p>\n\n<pre><code>Enter a board configuration:\n Baa\n Bab\n Wbc\n Wbd\n !!!\n</code></pre>\n\n<p>would work, but </p>\n\n<pre><code>Enter a board configuration:\n Bab\n Baa\n Wbd\n Wbc\n !!!\n</code></pre>\n\n<p>wouldn't.</p>\n\n<p>There is no upper limit of how many moves in total there are (well, the absolute maximum is the size of the board so 26*26 - 4, but I feel that is too inefficient), only that it stops once \"!!!\" is read. </p>\n\n<p>How can I write a function to order these tiles by row and column? </p>\n\n<p>Thank you!</p>\n\n<p>The following is my code for this part (it's actually a helper function, but I wrote it in another file in main() so that it's easier to test. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    int sizeBoard = 6;\n\n    int i, j; //row and col, a is the number of moves - 1\n    int numMove = 0; \n    char color[numMove], row[numMove], col[numMove];\n    char board[sizeBoard][sizeBoard];\n\n    printf(\"Enter board configuration: \\n\");\n    scanf(\" %c%c%c\", &amp;color[numMove], &amp;row[numMove], &amp;col[numMove]); \n        //color[a] = board[row + 1][col + 2];\n\n    while ((color[numMove] != '!') &amp;&amp; (row[numMove] != '!') &amp;&amp; (col[numMove] != '!')) {\n        numMove++;\n        scanf(\" %c%c%c\", &amp;color[numMove], &amp;row[numMove], &amp;col[numMove]); \n    }\n\n    printf(\"  \"); //two spaces before the column header (row 0)\n    for (j = 2; j &lt; sizeBoard + 2; j++) {\n        board[0][j] = 'a' - 2 + j;\n        printf(\"%c\", board[0][j]);\n    }\n    printf(\"\\n\");\n    numMove = 0; //set it back to initial value that gives first input of color[], row[] and col[]\n    for (i = 1; i &lt; sizeBoard + 1; i++) {\n        board[i][0] = 'a' - 1 + i;\n        printf(\"%c \", board[i][0]); \n        for (j = 2; j &lt; sizeBoard + 2; j++) {\n\n            //initial placement of the tiles in center\n            if (((j == ((sizeBoard + 2) / 2)) &amp;&amp; (i == ((sizeBoard + 1) / 2))) || ((j == ((sizeBoard + 2) / 2) + 1) &amp;&amp; (i == ((sizeBoard + 1) / 2) + 1)))\n                board[i][j] = 'W';\n            else if (((j == ((sizeBoard + 2) / 2) + 1) &amp;&amp; (i == ((sizeBoard + 1) / 2))) || ((j == ((sizeBoard + 2) / 2)) &amp;&amp; (i == ((sizeBoard + 1) / 2) + 1)))\n                board[i][j] = 'B';\n            else  \n                board[i][j] = 'U'; //if not centered, set it as unoccupied\n\n            //mid-game placement of tiles\n            if ((i == ((row[numMove] - 'a') + 1)) &amp;&amp; (j == ((col[numMove] - 'a') + 2))) {\n                board[i][j] = color[numMove];\n                numMove++;\n            }\n            printf(\"%c\", board[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    return (EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement", "for-loop", "floating-point"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1489008222, "post_id": 42682134, "comment_id": 72488448, "body": "Google <i>epsilon</i> in the context. For example, <code>if(fabs(x - y) &lt; EPSILON) { ... }</code>"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1489008351, "post_id": 42682134, "comment_id": 72488519, "body": "Near could means that given some e, |y-x|&lt;e then you have your condition, or that 1-e&lt;|y/x|&lt;1+e, or..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1489008415, "post_id": 42682134, "comment_id": 72488544, "body": "@WeatherVane: If <code>x</code> is 0.0002 and y is 0.0001, your test is true but the difference is 50%, not 1% as requested in the question."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1489008534, "post_id": 42682134, "comment_id": 72488605, "body": "@JonathanLeffler that&#39;s true, my comment was not an answer but a suggested avenue of approach, an <i>absolute</i> approach, not a <i>proportional</i> one as in your answer."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 4, "last_activity_date": 1489008351, "creation_date": 1489008351, "answer_id": 42682190, "question_id": 42682134, "link": "https://stackoverflow.com/questions/42682134/if-statement-when-x-is-near-a-value/42682190#42682190", "title": "If Statement when x is near a value", "body": "<p>Use a relative difference, such as:</p>\n\n<pre><code>#include &lt;math.h&gt;\n\nstatic inline double reldiff(double x, double y)\n{\n    return fabs(x - y) / fmax(fabs(x), fabs(y));\n}\n</code></pre>\n\n<p>Now your test becomes:</p>\n\n<pre><code>if (reldiff(x, y) &lt; 0.01)   // 1% as requested\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8519, "user_id": 7662085, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/X4wrF.jpg?s=128&g=1", "display_name": "stybl", "link": "https://stackoverflow.com/users/7662085/stybl"}, "is_accepted": false, "score": 0, "last_activity_date": 1489008496, "creation_date": 1489008496, "answer_id": 42682230, "question_id": 42682134, "link": "https://stackoverflow.com/questions/42682134/if-statement-when-x-is-near-a-value/42682230#42682230", "title": "If Statement when x is near a value", "body": "<p>Well, a simple solution would be.</p>\n\n<pre><code>if (y &gt;= x-x/100 &amp;&amp; y &lt;= x+x/100)\n{\n   [execute code...]\n}\n</code></pre>\n\n<p>Essentially what it does is check if <code>y</code> is between [x minus 1% of <code>x</code>] and [x plus 1% of <code>x</code>]. Should work alright.</p>\n"}], "owner": {"reputation": 13, "user_id": 7409500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e90d3cde3048ed83e8ecf8273b6f8140?s=128&d=identicon&r=PG", "display_name": "user138774", "link": "https://stackoverflow.com/users/7409500/user138774"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 42682190, "answer_count": 2, "score": 1, "last_activity_date": 1489036826, "creation_date": 1489008084, "last_edit_date": 1489036826, "question_id": 42682134, "link": "https://stackoverflow.com/questions/42682134/if-statement-when-x-is-near-a-value", "title": "If Statement when x is near a value", "body": "<p>I am trying to solve the numerical equation:</p>\n\n<p>sin^2(x)tan(x) = 0.499999</p>\n\n<p>Using a while loop in C.\nHowever I was only able to get program to print an answer if I rounded to 0.5. This led me to thinking, is there a way of writing:</p>\n\n<pre><code>For(x=0;x&lt;=360;x=x+0.001)\n{ y=f(x)\nIf(y **is near x**(e.g. Within 1 percent) )\nDo something etc.\n}\n</code></pre>\n\n<p>Is there a way of telling the computer to execute a task if the value is sufficiently near. Such as in this if statement?\nThank you.</p>\n"}, {"tags": ["c", "gcc", "assembly", "inline-assembly"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1489006699, "post_id": 42681720, "comment_id": 72487649, "body": "Have you tried naming the label without the dot? Assembly labels generated from C normally have the dot form. I think it might be reserved."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1489006811, "post_id": 42681720, "comment_id": 72487705, "body": "the latter solution is the correct syntax. It&#39;s just that your code doesn&#39;t work properly and crashes."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1489007166, "post_id": 42681720, "comment_id": 72487877, "body": "@PSkocik Yes, I tried naming it &quot;CustomLabel1&quot; (without a dot), and it still gives me the same error."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1489007281, "post_id": 42681720, "comment_id": 72487945, "body": "I may be wrong, but maybe you&#39;re retrieving the parameters from the stack, and there&#39;s no valid stack since the function is inlined and the parameters are optimized out."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1489007290, "post_id": 42681720, "comment_id": 72487952, "body": "@Jean-Fran&#231;oisFabre But then why does it work correctly when running without optimization?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1489007342, "post_id": 42681720, "comment_id": 72487978, "body": "because when not inlined it remains a call, and parameters are passed on the stack."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1489007409, "post_id": 42681720, "comment_id": 72488015, "body": "Tried it. <code>__attribute__((__noinline__))</code> fixes it."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1489007716, "post_id": 42681720, "comment_id": 72488176, "body": "@Jean-Fran&#231;oisFabre When running without optimization, the 2 parameters are passed in registers <code>rdi</code> and <code>rsi</code>. Does this change when running with <code>-O2</code>? Isn&#39;t passing parameters on the stack slower than passing them in registers?"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1489007744, "post_id": 42681720, "comment_id": 72488190, "body": "@PSkocik Yeah, but now the compiler won&#39;t inline the function right?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1489007785, "post_id": 42681720, "comment_id": 72488207, "body": "@fighting_falcon93 just disassemble the optimized version to find out. My answer is then inaccurate..."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1489008229, "post_id": 42681720, "comment_id": 72488455, "body": "@Jean-Fran&#231;oisFabre I&#39;ve added the dissasemble output of the optimized version to the question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489008380, "post_id": 42681720, "comment_id": 72488530, "body": "Note: the single <code>asm</code> statements can be arbitrarily reordered by the compiler. I strongly doubt that&#39;s what you want! How about reading the documentation? and don&#39;t rely on the registers being set as you think. gcc provides extensions to make this all transparent to both sides."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1489008612, "post_id": 42681720, "comment_id": 72488656, "body": "You need to tell GCC what to store in <code>rsi</code> and <code>rdi</code> in the asm statement parameters, you can&#39;t just expect them to have the values you need."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1489008846, "post_id": 42681720, "comment_id": 72488774, "body": "similar issue here: <a href=\"http://stackoverflow.com/questions/24471469/force-gcc-to-pass-arguments-in-registers\" title=\"force gcc to pass arguments in registers\">stackoverflow.com/questions/24471469/&hellip;</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1489008893, "post_id": 42681720, "comment_id": 72488800, "body": "@PSkocik: Forbidding inlining is the wrong approach. Instead 1) don&#39;t use assmbly unless <b>unavoidable</b> (mostly if you have to use special instructions) 2) Use the gcc facilities to access variables from assembly to make it transparent to where the data is located."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489009108, "post_id": 42681720, "comment_id": 72488903, "body": "@Olaf But if the compiler decides to inline my functions, shouldn&#39;t it also be the compilers task to set up the registers in a way so the function is still  working as before? Let&#39;s say I wrote the function in C instead, and the compiler decided to inline it, it would have to make this work aswell?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1489009205, "post_id": 42681720, "comment_id": 72488942, "body": "@fighting_falcon93: And how would the compiler know which registers your assembly code uses?? - Exactly! By you telling it. Again: Read the documentation. The <code>asm</code> extension is well documented. But in the first place: do not use assembly. That function above is commonly used in normal C. The compiler know this pattern, if not written too complicated, the compiler well possibly can use a single instruction or even none at all, depending on the surrounding code."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489009576, "post_id": 42681720, "comment_id": 72489146, "body": "@Olaf By setting registers and pushing the stack in the exact same way as if it would have been a function, except that the function call itself is never done? If I specify that a function written in C takes 2 parameters, the compiler will have to &quot;translate&quot; these 2 parameters into a format that works for an inlined version of the same function, that&#39;s why I expected it to do the same for the registers."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1489011499, "post_id": 42681720, "comment_id": 72490065, "body": "I don&#39;t think the segfault is related to your labels, it&#39;ll be because the optimizer rearranges things. @fighting_falcon93 You could think of the compiler as doing that and then optimizing the result - except the optimizer doesn&#39;t know what your inline assembly is doing so it more-or-less ignores it and puts the variables in whatever registers are most convenient."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489012165, "post_id": 42681720, "comment_id": 72490368, "body": "@fighting_falcon93: That&#39;s not how inline assembly works and the reason why I multiple times pointed you at the documentation! As you seem to prefer to ignore this, feel free to discuss this with the compiler, it might have more time; good bye."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489013321, "post_id": 42681720, "comment_id": 72490903, "body": "@Olaf I&#39;ll read the documentation, I just explained why I expected the compiler to do this automaticly :)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1489038021, "post_id": 42681720, "comment_id": 72498297, "body": "You could also do something like this: <code>void swap(int *a, int *b) {      __asm__ (         &quot;cmp %[b], %[a]\\n\\t&quot;         &quot;jle 1f\\n\\t&quot;         &quot;xchg %[a], %[b]\\n\\t&quot;         &quot;1:\\n&quot;         : [a]&quot;+r&quot;(*a),[b]&quot;+r&quot;(*b)         :         : &quot;cc&quot;     );      return; }</code>"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1489038792, "post_id": 42681720, "comment_id": 72498580, "body": "@MichaelPetch - yikes! don&#39;t know if the OP is that keen on saving bytes yet, but you definitely don&#39;t want to use <code>xchg</code> on any processor much younger than 20 years old! It has an implicit lock prefix - and can cost a lot of cycles. And as a sync primitive, it can be very, very expensive. It&#39;s a pity it ever attained such a purpose. It would be an incredibly useful instruction otherwise..."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1489038843, "post_id": 42681720, "comment_id": 72498601, "body": "@BrettHale Implicit lock with <i>XCHG</i> only occurs when you use a memory operand. I use 2 registers here, so there is no lock on <i>XCHG</i>."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1489039052, "post_id": 42681720, "comment_id": 72498669, "body": "@MichaelPetch - you&#39;re right - I jumped the gun there! I also wonder if, given the OPs disassembly clearly being x86-64, a couple of <code>cmov</code>s might be a better. I&#39;m never quite sure with <code>cmov</code>. I suppose it&#39;s better than a cold / unpredictable branch? That Peter Cordes guy would know, right down to the transistor level:)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 1, "creation_date": 1489039261, "post_id": 42681720, "comment_id": 72498750, "body": "@BrettHale : <i>CMOV</i>s would work, and only reason I didn&#39;t suggest it was that there&#39;d be no use for the label (and then part of his question disappears lol)"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1489056246, "post_id": 42681720, "comment_id": 72508667, "body": "@MichaelPetch + @BrettHale: Yeah, I&#39;m going to learn to use the <code>cmov</code> instruction aswell, but I wanted to start with conditional jumps first, and therefore I wrote the code in a not fully optimal way to suit the learning ;) Is it correct that <code>cmov</code> doesn&#39;t cause branch mispredictions as the instruction is always fetched, but the execution step decides whether to mov or not?"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1489056660, "post_id": 42681720, "comment_id": 72508970, "body": "A question to the people downvoting this question: Why? I asked an honest question about something that I&#39;m trying to learn, I explained the problem in detail, I did my own research before asking, and I asked the question in a way so that it could be answered effectively. I know there are a lot of people with the opinion that I should let the compiler do this for me, but does that mean it&#39;s a bad question?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1489074911, "post_id": 42681720, "comment_id": 72521527, "body": "Possibly downvotes might be related to the fact that the question posed in the title is not really your problem at all. In your question you have a proper answer of using <code>jle 1f</code> and a label <code>1:</code> . That is perfectly fine. The reason your code doesn&#39;t work when run in some environments (optimized code especially) is that you incorrectly use <code>asm</code> statements without understanding the intricacies of inline assembler. It is likely the reason so may people suggested not using inline assembly unless one has to."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1489075095, "post_id": 42681720, "comment_id": 72521659, "body": "Inline GCC assembly is also a bad way to learn assembly because it can be difficult to get right and if you don&#39;t get it right it can cause subtle bugs that may only manifest in the future. GCC doesn&#39;t analyze what the assembly template does. GCC inline assembler templates force the developer to tell it what they want."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1489075932, "post_id": 42681720, "comment_id": 72522303, "body": "You might have posed a different question had you taken the code and run it through a debugger like <i>GDB</i> or dumped the exectuable out with <i>OBJDUMP</i>. You would have likely observed that the <code>swap</code> function was inlined and inserted right into <code>main</code> and that the normal parameter passing mechanism didn&#39;t apply - they were optimized out. As well by not specifying proper constraints and clobbers the code generator would have tried to perform optimizations that would create further potential conflicts."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 1, "creation_date": 1489010109, "post_id": 42682460, "comment_id": 72489430, "body": "I tried your suggestion, but it still generates a segmentation fault when compiled with <code>-O2</code>, however it runs fine without any optimization."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1489011547, "post_id": 42682460, "comment_id": 72490092, "body": "@fighting_falcon93 Maybe try compiling to assembly code (gcc -S) so you can look at what the compiler is actually doing"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 3, "creation_date": 1489013155, "post_id": 42682460, "comment_id": 72490831, "body": "I might have tried something similar (without the goto); avoiding the &quot;memory&quot; clobber; and getting the assembler to pick temp registers: <code>int temp1, temp2;      __asm__ (         &quot;mov %[a], %[tmp1]\\n\\t&quot;         &quot;mov %[b], %[tmp2]\\n\\t&quot;         &quot;cmp %[tmp2], %[tmp1]\\n\\t&quot;         &quot;jle 1f\\n\\t&quot;         &quot;mov %[tmp2], %[a]\\n\\t&quot;         &quot;mov %[tmp1], %[b]\\n\\t&quot;         &quot;1:\\n&quot;         : [a]&quot;+m&quot;(*a),[b]&quot;+m&quot;(*b), [tmp1]&quot;=r&quot;(temp1), [tmp2]&quot;=r&quot;(temp2)         :         : &quot;cc&quot;     );</code>"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 1, "creation_date": 1489013172, "post_id": 42682460, "comment_id": 72490840, "body": "Don&#39;t mix <code>&quot;r&quot;</code> constraints with explicit register use. The compiler is free to choose <code>%edx</code> or <code>%ecx</code> for <code>(a)</code> and <code>(b)</code>, regardless of what you list as clobbered registers. Consider what happens if <code>%edx</code> is assigned to <code>%1</code>..."}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1489013288, "post_id": 42682460, "comment_id": 72490895, "body": "@BrettHale Oh that&#39;s probably it. Easy fix, just have to create a couple temporaries..."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1489013987, "post_id": 42682460, "comment_id": 72491187, "body": "On top of what Brett mentioned be careful. If the contents of a register may be modified never use it as an input operand. If you potentially change a register make sure they are output operand (or input/output) because the compiler may potentially mess up if it can assume the registers used will contain the same value before and after the template is run."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1489014436, "post_id": 42682460, "comment_id": 72491340, "body": "I&#39;m reading all the comments and trying to follow ;) I thought that there was a caller and callee convention that specifies which registers that must be pushed/popped before/after a function call, and which specific registers that should be used for sending parameters etc. Is this not the case? Is the compiler allowed to do this as it wants? @ephemient: Temporaries? You mean like copying the parameters into local function variables and then using them in the assembly code?"}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1489014628, "post_id": 42682460, "comment_id": 72491411, "body": "@fighting_falcon93 There are caller/callee save registers, but the C compiler can choose to use any registers for any purpose before or after your asm code runs. The ABI isn&#39;t respected for inlined calls anyway. Yes, local variables in the C function."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537836085, "post_id": 42682460, "comment_id": 91919247, "body": "It&#39;s not safe to dereference a pointer input operand (even for reading) without a &quot;memory&quot; clobber or a dummy memory input operand that tells the compiler you&#39;re reading from the pointed-to memory.  Just use <code>&quot;m&quot;</code> inputs / outputs and let the compiler pick an addressing mode."}], "tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": false, "score": 3, "last_activity_date": 1560430888, "last_edit_date": 1560430888, "creation_date": 1489009395, "answer_id": 42682460, "question_id": 42681720, "link": "https://stackoverflow.com/questions/42681720/how-do-i-use-labels-in-gcc-inline-assembly/42682460#42682460", "title": "How Do I Use Labels In GCC Inline Assembly?", "body": "<p>You cannot just put a bunch of <code>asm</code> statements inline like that. The optimizer is free to re-order, duplicate, and drop them based on what constraints it knows. (In your case, it knows none.)</p>\n\n<p>So firstly, you should consolidate the asm together, with proper read/write/clobber constraints. Secondly, there is a special <code>asm goto</code> form that gives assembly to C-level labels.</p>\n\n<pre><code>void swap(int *a, int *b) {\n    int tmp1, tmp2;\n    asm(\n        \"mov (%2), %0\\n\"\n        \"mov (%3), %1\\n\"\n        : \"=r\" (tmp1), \"=r\" (tmp2)\n        : \"r\" (a), \"r\" (b)\n        : \"memory\"   // pointer in register doesn't imply that the pointed-to memory has to be \"in sync\"\n        // or use \"m\" memory source operands to let the compiler pick the addressing mode\n    );\n    asm goto(\n        \"cmp %1, %0\\n\"\n        \"jle %l4\\n\"\n        \"mov %1, (%2)\\n\"\n        \"mov %0, (%3)\\n\"\n        :\n        : \"r\" (tmp1), \"r\" (tmp2), \"r\" (a), \"r\" (b)\n        : \"cc\", \"memory\"\n        : L1\n    );\nL1:\n    return;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1489023148, "creation_date": 1489023148, "answer_id": 42685057, "question_id": 42681720, "link": "https://stackoverflow.com/questions/42681720/how-do-i-use-labels-in-gcc-inline-assembly/42685057#42685057", "title": "How Do I Use Labels In GCC Inline Assembly?", "body": "<p>You cannot assume values are in any particular register in your asm code -- you need to use constraints to tell gcc what values you want to read and write and get it to tell you which register they are in. The <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Using-Assembly-Language-with-C.html#Using-Assembly-Language-with-C\" rel=\"nofollow noreferrer\">gcc docs</a> tell you most of what you need to know, but are pretty dense.  There are also tutorials out there that you can easily find with a web search (<a href=\"https://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html\" rel=\"nofollow noreferrer\">here</a> or <a href=\"http://ericw.ca/notes/a-tiny-guide-to-gcc-inline-assembly.html\" rel=\"nofollow noreferrer\">here</a>)</p>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1489055687, "post_id": 42685997, "comment_id": 72508287, "body": "Very detailed explanation, and the code works without any segfaults and produces the correct output, so I&#39;ll choose this one as the answer. Although, may I ask, why doesn&#39;t the compiler do this automaticly? Shouldn&#39;t the compiler be able to read the asm instructions that we write and understand what registers and memory locations that have been changed? May I also ask, how would this have looked in Intel-syntax? Once again thanks for your very detailed answer."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1489079231, "post_id": 42685997, "comment_id": 72524709, "body": "@fighting_falcon93 Depending on the complexity of an inline assembler template a code analysis tool may not be able to determine exactly what changes and what the side effects are in an assembler template. Rather than GCC developers wasting their efforts on something that may not always work they force the developer to be explicit and force them to describe exactly what the input, outputs, clobbers and other side effects are."}], "tags": [], "owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "is_accepted": true, "score": 7, "last_activity_date": 1517211033, "last_edit_date": 1517211033, "creation_date": 1489029284, "answer_id": 42685997, "question_id": 42681720, "link": "https://stackoverflow.com/questions/42681720/how-do-i-use-labels-in-gcc-inline-assembly/42685997#42685997", "title": "How Do I Use Labels In GCC Inline Assembly?", "body": "<p>There are plenty of tutorials - including <a href=\"http://locklessinc.com/articles/gcc_asm/\" rel=\"nofollow noreferrer\">this one</a> (probably the best I know of), and some info on <a href=\"https://stackoverflow.com/questions/34459803/in-gnu-c-inline-asm-whatre-the-modifiers-for-xmm-ymm-zmm-for-a-single-operand?answertab=active#tab-top\">operand size modifiers</a>.</p>\n\n<p>Here's the first implementation - <code>swap_2</code> :</p>\n\n<pre><code>void swap_2 (int *a, int *b)\n{\n    int tmp0, tmp1;\n\n    __asm__ volatile (\n        \"movl (%0), %k2\\n\\t\" /* %2 (tmp0) = (*a) */\n        \"movl (%1), %k3\\n\\t\" /* %3 (tmp1) = (*b) */\n        \"cmpl %k3, %k2\\n\\t\"\n        \"jle  %=f\\n\\t\"       /* if (%2 &lt;= %3) (at&amp;t!) */\n        \"movl %k3, (%0)\\n\\t\"\n        \"movl %k2, (%1)\\n\\t\"\n        \"%=:\\n\\t\"\n\n        : \"+r\" (a), \"+r\" (b), \"=r\" (tmp0), \"=r\" (tmp1) :\n        : \"memory\" /* \"cc\" */ );\n}\n</code></pre>\n\n<p><strong>A few notes</strong>:</p>\n\n<ul>\n<li><p><code>volatile</code> (or <code>__volatile__</code>) is required, as the compiler only 'sees' <code>(a)</code> and <code>(b)</code> (and doesn't 'know' you're potentially exchanging their contents), and would otherwise be free to optimize the whole <code>asm</code> statement away - <code>tmp0</code> and <code>tmp1</code> would otherwise be considered unused variables too.</p></li>\n<li><p><code>\"+r\"</code> means that this is both an input and output that may be modified; only it <em>isn't</em> in this case, and they could strictly be <em>input only</em> - more on that in a bit...</p></li>\n<li><p>The 'l' suffix on 'movl' isn't really necessary; neither is the 'k' (32-bit) length modifier for the registers. Since you're using the Linux (ELF) ABI, an <code>int</code> is 32 bits for both IA32 and x86-64 ABIs.</p></li>\n<li><p>The <code>%=</code> token generates a unique label for us. BTW, the jump syntax <code>&lt;label&gt;f</code> means a <em>forward</em> jump, and <code>&lt;label&gt;b</code> means <em>back</em>.</p></li>\n<li><p>For correctness, we need <code>\"memory\"</code> as the compiler has no way of knowing if values from dereferenced pointers have been changed. This may be an issue in more complex inline asm surrounded by C code, as it invalidates all currently held values in memory - and is often a sledgehammer approach. Appearing at the end of a function in this fashion, it's not going to be an issue - but you can read more on it <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">here</a> (see: <em>Clobbers</em>)</p></li>\n<li><p>The <code>\"cc\"</code> flags register clobber is detailed in the same section. on x86, it does <em>nothing</em>. Some writers include it for clarity, but since practically all non-trivial <code>asm</code> statements affect the flags register, it's just assumed to be clobbered by default.</p></li>\n</ul>\n\n<p>Here's the C implementation - <code>swap_1</code> :</p>\n\n<pre><code>void swap_1 (int *a, int *b)\n{\n    if (*a &gt; *b)\n    {\n        int t = *a; *a = *b; *b = t;\n    }\n}\n</code></pre>\n\n<p>Compiling with <code>gcc -O2</code> for x86-64 ELF, I get identical code. Just a bit of luck that the compiler chose <code>tmp0</code> and <code>tmp1</code> to use the same free registers for temps... cutting out the noise, like the .cfi directives, etc., gives:</p>\n\n<pre><code>swap_2:\n        movl (%rdi), %eax\n        movl (%rsi), %edx\n        cmpl %edx, %eax\n        jle  21f\n        movl %edx, (%rdi)\n        movl %eax, (%rsi)\n        21:\n        ret\n</code></pre>\n\n<p>As stated, the <code>swap_1</code> code was identical, except that the compiler chose <code>.L1</code> for its jump label. Compiling the code with <code>-m32</code> generated the same code (apart from using the tmp registers in a different order). There's more overhead, as the IA32 ELF ABI passes parameters on the stack, whereas the x86-64 ABI passes the first two parameters in <code>%rdi</code> and <code>%rsi</code> respectively.</p>\n\n<hr>\n\n<p>Treating <code>(a)</code> and <code>(b)</code> as input only - <code>swap_3</code> :</p>\n\n<pre><code>void swap_3 (int *a, int *b)\n{\n    int tmp0, tmp1;\n\n    __asm__ volatile (\n        \"mov (%[a]), %[x]\\n\\t\" /* x = (*a) */\n        \"mov (%[b]), %[y]\\n\\t\" /* y = (*b) */\n        \"cmp %[y], %[x]\\n\\t\"\n        \"jle  %=f\\n\\t\"         /* if (x &lt;= y) (at&amp;t!) */\n        \"mov %[y], (%[a])\\n\\t\"\n        \"mov %[x], (%[b])\\n\\t\"\n        \"%=:\\n\\t\"\n\n        : [x] \"=&amp;r\" (tmp0), [y] \"=&amp;r\" (tmp1)\n        : [a] \"r\" (a), [b] \"r\" (b) : \"memory\" /* \"cc\" */ );\n}\n</code></pre>\n\n<p>I've done away with the 'l' suffix and 'k' modifiers here, because they're not needed. I've also used the 'symbolic name' syntax for operands, as it often helps to make the code more readable.</p>\n\n<p><code>(a)</code> and <code>(b)</code> are now indeed input-only registers. So what's the <code>\"=&amp;r\"</code> syntax mean? The <code>&amp;</code> denotes an <em>early clobber</em> operand. In this case, the value may be written to <em>before</em> we finish using the input operands, and therefore the compiler must choose registers different from those selected for the input operands.</p>\n\n<p>Once again, the compiler generates identical code as it did for <code>swap_1</code> and <code>swap_2</code>.</p>\n\n<hr>\n\n<p>I wrote way more than I planned on this answer, but as you can see, it's very difficult to maintain awareness of all the information the compiler must be made aware of, as well as the idiosyncrasies of each instruction set (ISA) and ABI.</p>\n"}], "owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5744, "favorite_count": 3, "accepted_answer_id": 42685997, "answer_count": 3, "score": 2, "last_activity_date": 1560430888, "creation_date": 1489006386, "last_edit_date": 1495540831, "question_id": 42681720, "link": "https://stackoverflow.com/questions/42681720/how-do-i-use-labels-in-gcc-inline-assembly", "title": "How Do I Use Labels In GCC Inline Assembly?", "body": "<p>I'm trying to learn x86-64 inline assembly and decided to implement this very simple swap method that simply orders <code>a</code> and <code>b</code> in ascending order:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int* a, int* b)\n{\n    asm(\".intel_syntax noprefix\");\n    asm(\"mov    eax, DWORD PTR [rdi]\");\n    asm(\"mov    ebx, DWORD PTR [rsi]\");\n    asm(\"cmp    eax, ebx\");\n    asm(\"jle    .L1\");\n    asm(\"mov    DWORD PTR [rdi], ebx\");\n    asm(\"mov    DWORD PTR [rsi], eax\");\n    asm(\".L1:\");\n    asm(\".att_syntax noprefix\");\n}\n\nint main()\n{\n    int input[3];\n\n    scanf(\"%d%d%d\", &amp;input[0], &amp;input[1], &amp;input[2]);\n\n    swap(&amp;input[0], &amp;input[1]);\n    swap(&amp;input[1], &amp;input[2]);\n    swap(&amp;input[0], &amp;input[1]);\n\n    printf(\"%d %d %d\\n\", input[0], input[1], input[2]);\n\n    return 0;\n}\n</code></pre>\n\n<p>The above code works as expected when I run it with this command:</p>\n\n<pre><code>&gt; gcc main.c\n&gt; ./a.out\n&gt; 3 2 1\n&gt; 1 2 3\n</code></pre>\n\n<p>However, as soon as I turn optimazation on I get the following error messages:</p>\n\n<pre><code>&gt; gcc -O2 main.c\n&gt; main.c: Assembler messages:\n&gt; main.c:12: Error: symbol `.L1' is already defined\n&gt; main.c:12: Error: symbol `.L1' is already defined\n&gt; main.c:12: Error: symbol `.L1' is already defined\n</code></pre>\n\n<p>If I've understood it correctly, this is because <code>gcc</code> tries to inline my <code>swap</code> function when optimization is turned on, causing the label <code>.L1</code> to be defined multiple times in the assembly file.</p>\n\n<p>I've tried to find an answer to this problem, but nothing seems to work. In <a href=\"https://stackoverflow.com/questions/3898435/labels-in-gcc-inline-assembly\">this previusly asked question</a> it's suggested to use local labels instead, and I've tried that aswell:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int* a, int* b)\n{\n    asm(\".intel_syntax noprefix\");\n    asm(\"mov    eax, DWORD PTR [rdi]\");\n    asm(\"mov    ebx, DWORD PTR [rsi]\");\n    asm(\"cmp    eax, ebx\");\n    asm(\"jle    1f\");\n    asm(\"mov    DWORD PTR [rdi], ebx\");\n    asm(\"mov    DWORD PTR [rsi], eax\");\n    asm(\"1:\");\n    asm(\".att_syntax noprefix\");\n}\n</code></pre>\n\n<p>But when trying to run the program I now get a segmentation fault instead:</p>\n\n<pre><code>&gt; gcc -O2 main.c\n&gt; ./a.out\n&gt; 3 2 1\n&gt; Segmentation fault\n</code></pre>\n\n<p>I also tried the suggested solution to <a href=\"https://stackoverflow.com/questions/10080939/c-inline-assembly-label-issue\">this previusly asked question</a> and changed the name <code>.L1</code> to <code>CustomLabel1</code> in case there would be a name collision, but it still gives me the old error:</p>\n\n<pre><code>&gt; gcc -O2 main.c\n&gt; main.c: Assembler messages:\n&gt; main.c:12: Error: symbol `CustomLabel1' is already defined\n&gt; main.c:12: Error: symbol `CustomLabel1' is already defined\n&gt; main.c:12: Error: symbol `CustomLabel1' is already defined\n</code></pre>\n\n<p>Finally I also tried <a href=\"https://stackoverflow.com/questions/31529224/inline-assembly-lable-already-defined-error\">this suggestion</a>:</p>\n\n<pre><code>void swap(int* a, int* b)\n{\n    asm(\".intel_syntax noprefix\");\n    asm(\"mov    eax, DWORD PTR [rdi]\");\n    asm(\"mov    ebx, DWORD PTR [rsi]\");\n    asm(\"cmp    eax, ebx\");\n    asm(\"jle    label%=\");\n    asm(\"mov    DWORD PTR [rdi], ebx\");\n    asm(\"mov    DWORD PTR [rsi], eax\");\n    asm(\"label%=:\");\n    asm(\".att_syntax noprefix\");\n}\n</code></pre>\n\n<p>But then I get these errors instead:</p>\n\n<pre><code>main.c: Assembler messages:\nmain.c:9: Error: invalid character '=' in operand 1\nmain.c:12: Error: invalid character '%' in mnemonic\nmain.c:9: Error: invalid character '=' in operand 1\nmain.c:12: Error: invalid character '%' in mnemonic\nmain.c:9: Error: invalid character '=' in operand 1\nmain.c:12: Error: invalid character '%' in mnemonic\nmain.c:9: Error: invalid character '=' in operand 1\nmain.c:12: Error: invalid character '%' in mnemonic\n</code></pre>\n\n<p>So, my question is: </p>\n\n<p><strong>How can I use labels in inline assembly?</strong></p>\n\n<hr>\n\n<p>This is the disassemble output for the optimized version:</p>\n\n<pre><code>&gt; gcc -O2 -S main.c\n\n    .file   \"main.c\"\n    .section    .text.unlikely,\"ax\",@progbits\n.LCOLDB0:\n    .text\n.LHOTB0:\n    .p2align 4,,15\n    .globl  swap\n    .type   swap, @function\nswap:\n.LFB23:\n    .cfi_startproc\n#APP\n# 5 \"main.c\" 1\n    .intel_syntax noprefix\n# 0 \"\" 2\n# 6 \"main.c\" 1\n    mov eax, DWORD PTR [rdi]\n# 0 \"\" 2\n# 7 \"main.c\" 1\n    mov ebx, DWORD PTR [rsi]\n# 0 \"\" 2\n# 8 \"main.c\" 1\n    cmp eax, ebx\n# 0 \"\" 2\n# 9 \"main.c\" 1\n    jle 1f\n# 0 \"\" 2\n# 10 \"main.c\" 1\n    mov DWORD PTR [rdi], ebx\n# 0 \"\" 2\n# 11 \"main.c\" 1\n    mov DWORD PTR [rsi], eax\n# 0 \"\" 2\n# 12 \"main.c\" 1\n    1:\n# 0 \"\" 2\n# 13 \"main.c\" 1\n    .att_syntax noprefix\n# 0 \"\" 2\n#NO_APP\n    ret\n    .cfi_endproc\n.LFE23:\n    .size   swap, .-swap\n    .section    .text.unlikely\n.LCOLDE0:\n    .text\n.LHOTE0:\n    .section    .rodata.str1.1,\"aMS\",@progbits,1\n.LC1:\n    .string \"%d%d%d\"\n.LC2:\n    .string \"%d %d %d\\n\"\n    .section    .text.unlikely\n.LCOLDB3:\n    .section    .text.startup,\"ax\",@progbits\n.LHOTB3:\n    .p2align 4,,15\n    .globl  main\n    .type   main, @function\nmain:\n.LFB24:\n    .cfi_startproc\n    subq    $40, %rsp\n    .cfi_def_cfa_offset 48\n    movl    $.LC1, %edi\n    movq    %fs:40, %rax\n    movq    %rax, 24(%rsp)\n    xorl    %eax, %eax\n    leaq    8(%rsp), %rcx\n    leaq    4(%rsp), %rdx\n    movq    %rsp, %rsi\n    call    __isoc99_scanf\n#APP\n# 5 \"main.c\" 1\n    .intel_syntax noprefix\n# 0 \"\" 2\n# 6 \"main.c\" 1\n    mov eax, DWORD PTR [rdi]\n# 0 \"\" 2\n# 7 \"main.c\" 1\n    mov ebx, DWORD PTR [rsi]\n# 0 \"\" 2\n# 8 \"main.c\" 1\n    cmp eax, ebx\n# 0 \"\" 2\n# 9 \"main.c\" 1\n    jle 1f\n# 0 \"\" 2\n# 10 \"main.c\" 1\n    mov DWORD PTR [rdi], ebx\n# 0 \"\" 2\n# 11 \"main.c\" 1\n    mov DWORD PTR [rsi], eax\n# 0 \"\" 2\n# 12 \"main.c\" 1\n    1:\n# 0 \"\" 2\n# 13 \"main.c\" 1\n    .att_syntax noprefix\n# 0 \"\" 2\n# 5 \"main.c\" 1\n    .intel_syntax noprefix\n# 0 \"\" 2\n# 6 \"main.c\" 1\n    mov eax, DWORD PTR [rdi]\n# 0 \"\" 2\n# 7 \"main.c\" 1\n    mov ebx, DWORD PTR [rsi]\n# 0 \"\" 2\n# 8 \"main.c\" 1\n    cmp eax, ebx\n# 0 \"\" 2\n# 9 \"main.c\" 1\n    jle 1f\n# 0 \"\" 2\n# 10 \"main.c\" 1\n    mov DWORD PTR [rdi], ebx\n# 0 \"\" 2\n# 11 \"main.c\" 1\n    mov DWORD PTR [rsi], eax\n# 0 \"\" 2\n# 12 \"main.c\" 1\n    1:\n# 0 \"\" 2\n# 13 \"main.c\" 1\n    .att_syntax noprefix\n# 0 \"\" 2\n# 5 \"main.c\" 1\n    .intel_syntax noprefix\n# 0 \"\" 2\n# 6 \"main.c\" 1\n    mov eax, DWORD PTR [rdi]\n# 0 \"\" 2\n# 7 \"main.c\" 1\n    mov ebx, DWORD PTR [rsi]\n# 0 \"\" 2\n# 8 \"main.c\" 1\n    cmp eax, ebx\n# 0 \"\" 2\n# 9 \"main.c\" 1\n    jle 1f\n# 0 \"\" 2\n# 10 \"main.c\" 1\n    mov DWORD PTR [rdi], ebx\n# 0 \"\" 2\n# 11 \"main.c\" 1\n    mov DWORD PTR [rsi], eax\n# 0 \"\" 2\n# 12 \"main.c\" 1\n    1:\n# 0 \"\" 2\n# 13 \"main.c\" 1\n    .att_syntax noprefix\n# 0 \"\" 2\n#NO_APP\n    movl    8(%rsp), %r8d\n    movl    4(%rsp), %ecx\n    movl    $.LC2, %esi\n    movl    (%rsp), %edx\n    xorl    %eax, %eax\n    movl    $1, %edi\n    call    __printf_chk\n    movq    24(%rsp), %rsi\n    xorq    %fs:40, %rsi\n    jne .L6\n    xorl    %eax, %eax\n    addq    $40, %rsp\n    .cfi_remember_state\n    .cfi_def_cfa_offset 8\n    ret\n.L6:\n    .cfi_restore_state\n    call    __stack_chk_fail\n    .cfi_endproc\n.LFE24:\n    .size   main, .-main\n    .section    .text.unlikely\n.LCOLDE3:\n    .section    .text.startup\n.LHOTE3:\n    .ident  \"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\"\n    .section    .note.GNU-stack,\"\",@progbits\n</code></pre>\n"}, {"tags": ["c", "arrays", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1489005152, "post_id": 42681379, "comment_id": 72486846, "body": "formatting, please?"}, {"owner": {"reputation": 25, "user_id": 7474169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e278b8589ebedbc6055a355eafcdea6d?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Franco", "link": "https://stackoverflow.com/users/7474169/diego-franco"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1489005381, "post_id": 42681379, "comment_id": 72486967, "body": "@SouravGhosh i&#39;m new to programming and new to stackoverflow. What is it that you need please excuse my ignorance."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489005430, "post_id": 42681379, "comment_id": 72486981, "body": "Right. this time @WeatherVane did the job for you, but please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page for more guidance. Thank you."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489005448, "post_id": 42681379, "comment_id": 72486987, "body": "You can format the code for the question by selecting all the code and clicking the <code>{}</code> button."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489005647, "post_id": 42681379, "comment_id": 72487081, "body": "Please set <code>found = 0;</code> at the start of the <code>do-while</code> loop. It is not enough to initialise it when defined. Sorry I do not post this as an answer, because that would require me to exhaustively test the code, which I will not do."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489006109, "post_id": 42681379, "comment_id": 72487314, "body": "BTW please do not use <code>float</code> unless there is a good reason why you cannot use <code>double</code>."}, {"owner": {"reputation": 25, "user_id": 7474169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e278b8589ebedbc6055a355eafcdea6d?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Franco", "link": "https://stackoverflow.com/users/7474169/diego-franco"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489006417, "post_id": 42681379, "comment_id": 72487486, "body": "@WeatherVane noted! thanks"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489006884, "post_id": 42681379, "comment_id": 72487743, "body": "I would be interested to know if <i>&quot;set <code>found = 0;</code> at the start of the <code>do-while</code> loop&quot;</i> solved the problem."}, {"owner": {"reputation": 25, "user_id": 7474169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e278b8589ebedbc6055a355eafcdea6d?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Franco", "link": "https://stackoverflow.com/users/7474169/diego-franco"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489007404, "post_id": 42681379, "comment_id": 72488011, "body": "@WeatherVane Unfortunately it did not."}, {"owner": {"reputation": 25, "user_id": 7474169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e278b8589ebedbc6055a355eafcdea6d?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Franco", "link": "https://stackoverflow.com/users/7474169/diego-franco"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489007655, "post_id": 42681379, "comment_id": 72488147, "body": "@WeatherVane It did solve the problem! I made a mistake to put found = 0; before the do while loop and not at the start of..  Thank you for your help"}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1489007811, "creation_date": 1489007811, "answer_id": 42682070, "question_id": 42681379, "link": "https://stackoverflow.com/questions/42681379/re-prompt-user-after-invalid-input-in-c/42682070#42682070", "title": "re-prompt user after invalid input in c", "body": "<p>Please reset <code>found</code></p>\n\n<pre><code>do {\n    found = 0; \n    // ...\n</code></pre>\n\n<p>at the start of the do-while loop. It is not enough to initialise it when defined.</p>\n"}], "owner": {"reputation": 25, "user_id": 7474169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e278b8589ebedbc6055a355eafcdea6d?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Franco", "link": "https://stackoverflow.com/users/7474169/diego-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1475, "favorite_count": 0, "accepted_answer_id": 42682070, "answer_count": 1, "score": 1, "last_activity_date": 1489007811, "creation_date": 1489005123, "last_edit_date": 1489006715, "question_id": 42681379, "link": "https://stackoverflow.com/questions/42681379/re-prompt-user-after-invalid-input-in-c", "title": "re-prompt user after invalid input in c", "body": "<p>I'm writing this program in c where I need to re-prompt the user after an invalid input. I came to a solution only to discover that if the user enters another invalid input after the re-prompt then it continues. Can someone please show me a better solution to this? I'll show you what I had anyway:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nmain()\n{\n    int ctr; // loop counter\n    int custID[10] = {1, 3, 5, 9, 10, // ID array\n                      6, 4, 7, 8, 2};\n    double custBal[10] = {153.56, 1300.45, 684.45, 990.45, 45.54, // Balance array\n                         1100.34, 594.45, 1340.45, 1000.00, 1134.00};\n    int IDsearch; // For interaction\n    int found = 0; // Search criteria\n    int inner, outer, tempID, didSwap; // For sorting the arrays\n    double tempBal;\n    char ans;\n\n    /* Firs step: Sort the arrays for efficiency */\n    for(outer = 0; outer &lt; 9; outer++) // &lt;9 and not &lt;10, because 9 numbers will be bubble sorted\n    {                                  // the highest (10th) will  remain at the bottom\n        didSwap = 0;                   // Turns one after the arrays sort\n        for(inner = outer; inner &lt; 10; inner++)\n        {\n            if(custID[inner] &lt; custID[outer]) // Ascending sort\n            {\n                tempID = custID[inner];       // Must include both,\n                tempBal = custBal[inner];     // otherwise the arrays wont be linked\n                custID[inner] = custID[outer];\n                custBal[inner] = custBal[outer];\n                custID[outer] = tempID;\n                custBal[outer] = tempBal;\n                didSwap = 1;                 // Flag that a swap took place\n            }\n        }\n        if(didSwap == 0)\n        {\n            break;\n        }\n    }\n    /* Second step: Interacting with the program */\n    printf(\"***Customer Balance Search***\\n\");\n    do\n    {\n        printf(\"Which ID number do you want to check?\\n\");\n        scanf(\" %d\", &amp;IDsearch);\n\n        for(ctr = 0; ctr &lt; 10; ctr++)\n        {\n            if(IDsearch == custID[ctr])\n            {\n                found = 1;\n                break;\n            }\n        }\n        if(found)\n        {\n            if(custBal[ctr] &lt; 1000)\n            {\n                printf(\"\\nCustomer #%d has a balance of $%.2f.\\n\", custID[ctr], custBal[ctr]);\n                printf(\"Credit is good!\\n\");\n            }\n            else\n            {\n                printf(\"\\nCustomer #%d has a balance of %.2f.\\n\", custID[ctr], custBal[ctr]);\n                printf(\"Credit is bad! No more credit!\\n\");\n            }\n        }\n        else\n        {\n            printf(\"\\nCustomer #%d was not found!\\n\", IDsearch);\n            printf(\"Please enter a correct ID number!\\n\\n\");\n            continue;\n        }\n        printf(\"\\nDo you want to search another ID number?\\n\");\n        printf(\"Enter (Y)es or (N)o\\n\");\n        scanf(\" %c\", &amp;ans);\n        ans = toupper(ans);\n    }\n    while((found != 1) || (ans == 'Y' &amp;&amp; ans != 'N'));\n    printf(\"\\nExiting...\\n\\n\");\n\n    return (0);\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1489004935, "post_id": 42681175, "comment_id": 72486727, "body": "Whether the threads are detached has nothing in particular to do with whether they run concurrently."}, {"owner": {"reputation": 27, "user_id": 4061447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0756a8140060b9a84fcbfe50b40e2fdb?s=128&d=identicon&r=PG&f=1", "display_name": "TheNavesinkBanks", "link": "https://stackoverflow.com/users/4061447/thenavesinkbanks"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1489008315, "post_id": 42681175, "comment_id": 72488502, "body": "@JohnBollinger I thought joined threads, execute sequentially? Isn&#39;t that what pthread_join() does?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1489009685, "post_id": 42681175, "comment_id": 72489210, "body": "No.  In the first place, the distinction is not between join<i>ed</i> threads and detached ones, it&#39;s between join<i>able</i> threads and detached ones.  In the second place, all threads in a process run concurrently as long as they are not blocked.  <code>pthread_join()</code> makes the <b>calling</b> thread wait for the specified one to terminate (one way in which a thread can be blocked), but it does not affect the concurrency of other threads.  In particular, if your main thread joined the other two, that would not prevent those other two from running concurrently with each other."}, {"owner": {"reputation": 27, "user_id": 4061447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0756a8140060b9a84fcbfe50b40e2fdb?s=128&d=identicon&r=PG&f=1", "display_name": "TheNavesinkBanks", "link": "https://stackoverflow.com/users/4061447/thenavesinkbanks"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1489010553, "post_id": 42681175, "comment_id": 72489631, "body": "@JohnBollinger Ahhhh, thank you for the clarification!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4061447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0756a8140060b9a84fcbfe50b40e2fdb?s=128&d=identicon&r=PG&f=1", "display_name": "TheNavesinkBanks", "link": "https://stackoverflow.com/users/4061447/thenavesinkbanks"}, "edited": false, "score": 0, "creation_date": 1489008051, "post_id": 42681376, "comment_id": 72488355, "body": "That makes total sense. Thank you, this is my first attempt at multithreading. I should have noticed all the example code didn&#39;t pass arguments the way I did. The warnings I was getting were all unrelated to the threads, though."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1489012300, "post_id": 42681376, "comment_id": 72490433, "body": "You should get in the habit of fixing all warnings (compiling with -Werror in gcc helps). Warnings are there for a reason."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 5, "last_activity_date": 1489005117, "creation_date": 1489005117, "answer_id": 42681376, "question_id": 42681175, "link": "https://stackoverflow.com/questions/42681175/detached-threads-dont-run-simultaneously/42681376#42681376", "title": "Detached threads don&#39;t run simultaneously", "body": "<p>This line is the problem:</p>\n\n<pre><code>pthread_create(&amp;ignore1, &amp;attr, readerthread(minheap, eventlist, nowtimestamp), 0);\n</code></pre>\n\n<p>You're calling <code>readerthread</code> <em>on the main thread</em> and passing its <em>result</em> to <code>pthread_create</code>.  Since <code>readerthread</code> never returns, you never even get to the first call to <code>pthread_create</code>, let alone the second one.</p>\n\n<p>You need to call it like this instead:</p>\n\n<pre><code>pthread_create(&amp;ignore1, &amp;attr, readerthread, &amp;readerthread_args);\n</code></pre>\n\n<p>where <code>readerthread_args</code> is a struct encapsulating the arguments to pass to <code>readerthread</code>.  You'll also need to change <code>readerthread</code> to take a single <code>void *</code> argument, cast it to the type of <code>readerthread_args</code>, and unpack the args.</p>\n\n<p>You should have got a whole bunch of warnings from your compiler.  Did you remember to turn them on?</p>\n"}], "owner": {"reputation": 27, "user_id": 4061447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0756a8140060b9a84fcbfe50b40e2fdb?s=128&d=identicon&r=PG&f=1", "display_name": "TheNavesinkBanks", "link": "https://stackoverflow.com/users/4061447/thenavesinkbanks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 42681376, "answer_count": 1, "score": -1, "last_activity_date": 1489005117, "creation_date": 1489004399, "question_id": 42681175, "link": "https://stackoverflow.com/questions/42681175/detached-threads-dont-run-simultaneously", "title": "Detached threads don&#39;t run simultaneously", "body": "<p>Hey so I'm trying to create a multithreaded program. The first thread takes in input from std in and stores it in a minheap. The second thread... well for now, all it does is print \"sequencer thread works\" and nothing else because it doesn't run properly. </p>\n\n<p>Both threads are detached, so they should run simultaneously, and yet for some reason the second thread doesn't run until the first exits. Is it something simple I am overlooking? I'm new to multithreading.</p>\n\n<p>Thanks</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;string.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/time.h&gt;\n#include \"MinHeap.h\"\n\n\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\n\n\nvoid* readerthread(MinHeap minheap, char eventlist[], char timestamp[])\n{\n    char buffer[100];\n    char input;\n    int ret, len, fd;\n\n\n\n    while(1)\n    {\n        char *choice;\n        choice = malloc(50*sizeof(char));\n\n\n        fgets(choice, 50, stdin);\n        printf(\"choice = : %s\", choice);\n        if(checkTimestamp(choice)==0)\n        {\n        pthread_mutex_lock(&amp;mutex);\n        addElement(&amp;minheap, choice);\n        pthread_mutex_unlock(&amp;mutex);\n        }\n        free(choice);\n        printf( \"min of minheap: %s\\n\", getMin(&amp;minheap));\n\n\n}\n\nvoid* sequencerthread()\n{\n    printf(\"sequencer works\\n\");\n    fflush(stdout);\n    pthread_exit(0);\n}\n\nint main(int argc, char *argv[])\n{\n    if (argv &lt; 2)\n    {\n        printf(\"not enough arguments. exiting...\\n\");\n        return 1;\n    }\n\n    char timestamp[50];\n    char event[50];\n    char eventlist[sizeof(char)+170];\n    int i;\n\n    char nowtimestamp[] = \"2400/001/00/00/00\";\n\n\n    MinHeap minheap;\n    initializeMinHeap(&amp;minheap, intCompare, sizeof(char)*50);\n\n    strcpy(timestamp, argv[1]);\n    strcpy(event, argv[2]);\n\n\n\n    pthread_t ignore1, ignore2;\n    pthread_attr_t attr;\n    pthread_attr_init(&amp;attr);\n    pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_DETACHED);\n    pthread_attr_setscope(&amp;attr, PTHREAD_SCOPE_SYSTEM);\n\n    pthread_create(&amp;ignore1, &amp;attr, readerthread(minheap, eventlist, nowtimestamp), 0);\n    pthread_create(&amp;ignore2, &amp;attr, sequencerthread, 0);\n\n    pthread_attr_destroy(&amp;attr);\n    pthread_exit(0);\n\n\n\n    return (EXIT_SUCCESS);\n    }\n</code></pre>\n"}, {"tags": ["c", "logical-operators"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1489004386, "post_id": 42681149, "comment_id": 72486411, "body": "<code>if (passwordLength &lt; 5 &amp;&amp; passwordLength&gt;25)</code> should be <code>if (passwordLength &lt; 5 || passwordLength&gt;25)</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1489004390, "post_id": 42681149, "comment_id": 72486414, "body": "What is the problem you see?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1489004529, "post_id": 42681149, "comment_id": 72486494, "body": "How exactly is it not working?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1489004725, "post_id": 42681149, "comment_id": 72486598, "body": "<code>int main()</code> --&gt; <code>int main() {</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1489004840, "post_id": 42681149, "comment_id": 72486676, "body": "Nice catch. I&#39;m getting a feeling you&#39;re the only one who actually tried compiling this @dbush, kudos."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1489004970, "last_edit_date": 1489004970, "creation_date": 1489004445, "answer_id": 42681185, "question_id": 42681149, "link": "https://stackoverflow.com/questions/42681149/trying-to-make-a-random-password-generator-in-c/42681185#42681185", "title": "Trying to make a random &quot;password generator&quot; in C", "body": "<p>First of all, review the logic you're trying to use.</p>\n\n<pre><code>if (passwordLength &lt; 5 &amp;&amp; passwordLength&gt;25) {\n    printf(\"Your password must be from 5 to 25!!\");\n}\n</code></pre>\n\n<p>No value ever, can be less than 5 <strong>and</strong> greater than 25 at the same time. You need to check for <strong>either</strong> of them, not both. Use logical OR operator <code>||</code> instead.</p>\n\n<p>That said, it probably makes sense to check for the condition immediately after scanning the value. There's no point in calculating a lot of things and then, just throw them away, based on a condition that was already known long time ago.</p>\n\n<p>Also, always check for the returned value of <code>scanf()</code> to ensure successful scanning, otherwise you may end up using an indeterminate value.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1489005514, "creation_date": 1489005514, "answer_id": 42681480, "question_id": 42681149, "link": "https://stackoverflow.com/questions/42681149/trying-to-make-a-random-password-generator-in-c/42681480#42681480", "title": "Trying to make a random &quot;password generator&quot; in C", "body": "<p>Besides the logic issue identified in Sourav's answer, there's a compile error.</p>\n\n<p>The issue isn't immediately apparent from looking at the compiler output, however:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/tmp/x1.c: In function \u2018main\u2019:\n/tmp/x1.c:7: error: parameter \u2018counter\u2019 is initialized\n/tmp/x1.c:8: error: expected declaration specifiers before \u2018srandom\u2019\n/tmp/x1.c:13: error: expected declaration specifiers before \u2018printf\u2019\n/tmp/x1.c:14: error: expected declaration specifiers before \u2018scanf\u2019\n/tmp/x1.c:16: error: expected declaration specifiers before \u2018while\u2019\n/tmp/x1.c:22: error: expected declaration specifiers before \u2018if\u2019\n/tmp/x1.c:26: error: expected declaration specifiers before \u2018printf\u2019\n/tmp/x1.c:27: error: expected declaration specifiers before \u2018return\u2019\n/tmp/x1.c:28: error: expected declaration specifiers before \u2018}\u2019 token\n/tmp/x1.c:11: error: declaration for parameter \u2018passwordLength\u2019 but no such parameter\n/tmp/x1.c:9: error: declaration for parameter \u2018randChar\u2019 but no such parameter\n/tmp/x1.c:7: error: declaration for parameter \u2018counter\u2019 but no such parameter\n/tmp/x1.c:28: error: expected \u2018{\u2019 at end of input\n</code></pre>\n\n<p>Typically, you start by looking at the error at the top and fixing that, and see if that gets rid of others further down.  In this case, the real clue is actually at the end.</p>\n\n<p>You're missing an opening brace for your <code>main</code> function.  Add that and it will compile successfully and print a random password (without checking the length properly).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7672766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2610893d8aefb1dd4e83dbd569d6558?s=128&d=identicon&r=PG", "display_name": "religionKills", "link": "https://stackoverflow.com/users/7672766/religionkills"}, "is_accepted": false, "score": 0, "last_activity_date": 1489005984, "creation_date": 1489005984, "answer_id": 42681613, "question_id": 42681149, "link": "https://stackoverflow.com/questions/42681149/trying-to-make-a-random-password-generator-in-c/42681613#42681613", "title": "Trying to make a random &quot;password generator&quot; in C", "body": "<p>It's not <code>if(passwordLength &lt; 5 &amp;&amp; passwordLength &gt;25)</code> but rather <code>||</code></p>\n\n<p>The <code>passwordLength</code> variable <strong>must</strong> be checked immediately after <code>scanf</code>. If it fails the program <strong>must</strong> return</p>\n\n<p>There's no need for <code>counter</code>, use <code>for</code> loop instead</p>\n\n<p>In case you need to store the password for processing later, which is which I recommend, you should store it in a variable</p>\n\n<pre><code>int main(){\n    srandom(time(NULL));\n    char randChar;\n    int passwordLength;\n\n    printf(\"Give password length: \");\n    scanf(\"%d\", &amp;passwordLength);\n    if(passwordLength &lt; 5 || passwordLength &gt;25){\n        printf(\"Your password must be from 5 to 25!!\");\n        return 1;\n    }\n\n    char pwd[passwordLength];\n\n    for(int i = 0; i &lt; passwordLength; i++){\n        randChar = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[random() % 62];\n        pwd[i] = randChar;\n    }\n    printf(\"%s\\n\", pwd);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7495634"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 42681185, "answer_count": 3, "score": 0, "last_activity_date": 1489005984, "creation_date": 1489004301, "last_edit_date": 1489004735, "question_id": 42681149, "link": "https://stackoverflow.com/questions/42681149/trying-to-make-a-random-password-generator-in-c", "title": "Trying to make a random &quot;password generator&quot; in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n\nint counter = 0;\nsrandom(time(NULL));  // Correct seeding function for random()\nchar randChar;\n\nint  passwordLength;\n\nprintf(\"Give password length \\n\");\nscanf(\"%d\", &amp;passwordLength);\n\nwhile (counter &lt; passwordLength)\n{\n    randChar = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[random() % 62];\n    printf(\"Your password is: %c\", randChar);\n    counter++;\n}\nif (passwordLength &lt; 5 &amp;&amp; passwordLength&gt;25) {\n    printf(\"Your password must be from 5 to 25!!\");\n}\n\nprintf(\"\\n\");\nreturn 0;\n}\n</code></pre>\n\n<p>Long story short im trying to make this program work but for some reasons i have no idea how to make it work.Thanks in advance.</p>\n"}, {"tags": ["c", "compare", "qsort"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1489004209, "post_id": 42680900, "comment_id": 72486321, "body": "Notes: 1) Could use <code>int k = sprintf(arr, &quot;%d%d&quot;, a, b);</code> &quot;sprintf function returns the number of characters written in the array, not counting the terminating null character, or a negative value if an encoding error occurred.&quot;  2) <code>char arr[10000]={0};</code> is fairly extreme, maybe <code>char arr[100]={0};</code>?  3) the whole <code>for(i=0; i &lt; k; i++){             if(arr[i] != brr[i]) ...</code> looks akin to <code>strcmp()</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489004487, "post_id": 42680900, "comment_id": 72486466, "body": "If you are using <code>sprintf</code> and loops within the <code>compare</code> function provided to <code>qsort</code>, it could take forever and a day. That function is intended to make a simple comparison of values, or several if there is a hierarchy in a <code>struct</code>. But your <code>compare</code> function seems to be trying to take over the job of <code>qsort</code>. Perhaps you should re-think the algorithm. The solution might benefit from a recursive approach."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489004657, "post_id": 42680900, "comment_id": 72486561, "body": "@WeatherVane Disagree - it is still pretty much an n log n problem., <code>sprintf()</code> is simply forming the lexicographical values in which to compare."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1489004727, "post_id": 42680900, "comment_id": 72486601, "body": "@chux, perhaps, I added another sentence while you were posting."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1489007949, "post_id": 42680900, "comment_id": 72488302, "body": "It seems a bit excessive to allocate a ten-million-character space in which to record the answer, though I guess that depends to some extent on how large <code>n1</code> may be, and on the bounds on elements of the input array."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1489213118, "post_id": 42680900, "comment_id": 72582927, "body": "<a href=\"http://stackoverflow.com/q/605845/995714\">don&#39;t cast the result of <code>malloc</code> family in C</a>"}, {"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1489213842, "post_id": 42680900, "comment_id": 72583064, "body": "compare() should compare its two arguments which, in this case, appear to be <code>int</code> a &amp; b. Simple tests like <code>if (a &lt; b) ...</code> (or even <code>return a-b</code>) should be used. Comparing instead their ascii representation is wrong."}], "answers": [{"tags": [], "owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1489244615, "creation_date": 1489244615, "answer_id": 42736694, "question_id": 42680900, "link": "https://stackoverflow.com/questions/42680900/how-does-this-compare-function-work/42736694#42736694", "title": "How does this compare function work?", "body": "<p>This compare function is quite odd.<br>\nTo understand how it works, let's start considering <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/qsort.html\" rel=\"nofollow noreferrer\">what qsort expects</a>: it expects a function that accepts 2 numbers, <code>a</code> and <code>b</code>, and which</p>\n\n<blockquote>\n  <p>returns an integer less than, equal to, or greater than 0, if the first argument is considered respectively less than, equal to, or greater than the second.</p>\n</blockquote>\n\n<p>In this case, as we will see, it actually returns the opposite result, that is, it returns an integer less than, equal to, or greater than 0, if the <strong>second</strong> argument is considered respectively less than, equal to, or greater than the <strong>first</strong>. This is just because the author of this code wants to sort in descending order and not in ascending order.</p>\n\n<p>That said, this compare function is a special one: let's see what it does. Although it works with numbers (it accepts <code>void*</code>, which is a generic pointer, but then it casts both parameters to <code>int*</code> and dereferences them), it doesn't compare them numerically, and not even in the classic alphanumeric way.\nRather, it indicates in which order the two numbers, once converted to string, have to be concatenated to generate the sequence of digits that, interpreted as a number, yields the largest possible result (this is hinted at by the name of the other function, <code>largestNumber</code>). It does so by indicating as largest number the one that must be taken first. It sounds complicated, but some examples will clarify.</p>\n\n<p>Let's take the numbers 3 and 4. If you treat them as strings (<code>\"3\"</code> and <code>\"4\"</code>) you can concatenate them in two different orders, getting either <code>\"34\"</code> or <code>\"43\"</code>. Now, convert these strings back to numbers: which one is larger? Clearly, 34 &lt; 43, and if you want the largest number (43) you must take 4 as first number, and 3 as second. In this case the function will tell you that the largest number is 4. It does so by returning a positive number (1, in this case).</p>\n\n<p>Let's take 30 and 4 instead. If you concatenate them you get either <code>\"304\"</code> or <code>\"430\"</code>. Since 304 &lt; 430, the function tells you that the largest number is 4. So, from this point of view, 4 > 30, which is the opposite of the numeric sort.</p>\n\n<p>If you take 3 and 30, the two possible concatenations are <code>\"330\"</code> and <code>\"303\"</code>, and since 330 > 303 you have to take 3 first, and the function tells you that 3 > 30. Again, it's the opposite of the numeric sort.</p>\n\n<p>If you take 30 and 30 you have to choose between <code>\"3030\"</code> and <code>\"3030\"</code>, which are identical, and in this case the function returns 0.</p>\n\n<p>Now a tricky case: if you compare 3 and 33, the two \"stringified\" numbers are identical (<code>\"333\"</code> and <code>\"333\"</code>), so we'd expect 0. Actually in this case the function tells you that the largest number is the second one... But it doesn't matter, as the result would be identical.</p>\n\n<p>And how does the comparison work, exactly? First, the numbers are converted to string using <code>sprintf</code>. Consider that the 2 strings (let's call them <code>\"ab\"</code> and <code>\"ba\"</code>) must have the same length, so it checks the length of one with <code>strlen</code>, and then the loop checks every digit, starting from the first. If the digit is the same between <code>ab</code> and <code>ba</code>, it does nothing and just goes to the next one; if it is different, it compares them and returns the digit of <code>brr</code> minus the digit of <code>arr</code>. For example, when comparing 3 and 30, <code>arr</code> would contain 330 and <code>brr</code> 303. At the first iteration (when <code>i==0</code>) it would check the first digit: it's 3 for both, so you can't choose which number is higher yet. Move to the second digit: 3 > 0, so <code>arr</code> > <code>brr</code>, so the function must return a negative number, and indeed it does: it returns <code>0 - 3 = -3</code>.</p>\n\n<p>So, the function compares <code>a</code> and <code>b</code> and returns:</p>\n\n<ul>\n<li>a negative number if they yield the largest number by concatenating them in this order (a, b);</li>\n<li>0, if the numbers are the same, so that it doesn't matter in which order they are taken;</li>\n<li>a positive number if they have to be concatenated in the opposite order (b, a) to yield the largest number.</li>\n</ul>\n\n<p>This table shows the result of the classic numeric sort, the classic alphanumeric sort, and this custom sort (which I've called \"largest stringified number sort\")</p>\n\n<pre><code> a   b    Numeric sort   Alphanumeric sort   Largest stringified number sort\n 3   4      3 &lt;   4          3 &lt;   4            34 &lt;    43  --&gt; return  1 &gt;  0 --&gt;  3  &lt;  4\n30   4     30 &gt;   4         30 &lt;   4           304 &lt;   430  --&gt; return  1 &gt;  0 --&gt;  30 &lt;  4\n 3  30      3 &lt;  30          3 &lt;  30           330 &gt;   303  --&gt; return -3 &lt;  0 --&gt;  3  &gt; 30\n 3  31      3 &lt;  31          3 &lt;  31           331 &gt;   313  --&gt; return -2 &lt;  0 --&gt;  3  &gt; 31\n 3  32      3 &lt;  32          3 &lt;  32           332 &gt;   323  --&gt; return -1 &lt;  0 --&gt;  3  &gt; 32\n 3  33      3 &lt;  33          3 &lt;  33           333 ==  333  --&gt; return 30 &gt;  0 --&gt;  3  &lt; 33\n 3  34      3 &lt;  34          3 &lt;  34           334 &lt;   343  --&gt; return  1 &gt;  0 --&gt;  3  &lt; 34\n30  30     30 == 30         30 == 30          3030 == 3030  --&gt; return  0 == 0 --&gt; 30 == 30\n</code></pre>\n\n<p>As to why they are printed in decreasing order, it's simply because of this line:</p>\n\n<pre><code>return brr[i] - arr[i];\n</code></pre>\n\n<p>If you want to see them in increasing order, change it to:</p>\n\n<pre><code>return arr[i] - brr[i];\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7680012, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/171a114f06c29faf1d41dbd055020923?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/7680012/abhijit-sarkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489244785, "creation_date": 1489003459, "last_edit_date": 1489244785, "question_id": 42680900, "link": "https://stackoverflow.com/questions/42680900/how-does-this-compare-function-work", "title": "How does this compare function work?", "body": "<p>I have understood that the <code>compare</code> function is sorting the values so that it shows a combination of numbers in decreasing order.</p>\n\n<p>For example: Given <code>[3, 30, 34, 5, 9]</code>, the largest formed number is <code>9534330</code>.</p>\n\n<pre><code> int compare(const void *a1,const void *b1){\n        int a = *(int*)a1;\n        int b = *(int*)b1;\n        int i=0;\n        char arr[10000]={0};\n        char brr[10000]={0};\n        sprintf(arr, \"%d%d\", a, b);\n        sprintf(brr, \"%d%d\", b, a);\n        int k = strlen(arr);\n        for(i=0; i &lt; k; i++){\n            if(arr[i] != brr[i])\n                return brr[i] - arr[i];\n        }\n        return b-a;\n    }\n    char* largestNumber(const int* A, int n1) {\n        char *ans = (char*) calloc(10000000,sizeof(char));\n        int i=0, count=0;\n         qsort(A, n1, sizeof(int), compare);\n        if(A[0] == 0){  \n            ans[0] = '0'; ans[1]=0; return ans;\n        }\n        for(i=0; i&lt;n1; i++){\n            int k = A[i];\n            // printf(\"%d \", k);\n            count += sprintf(ans+count, \"%d\", k);\n        }\n        // printf(\"\\n\");\n        ans[count] = 0;\n        return ans;\n    }\n</code></pre>\n\n<p>My doubts are as follows: </p>\n\n<ol>\n<li><p>How does this piece of code work?</p>\n\n<pre><code>for(i=0; i &lt; k; i++){\n    if(arr[i] != brr[i])\n        return brr[i] - arr[i];\n}\n</code></pre>\n\n<p>It is comparing the contents of <code>arr</code> and <code>brr</code>, but how is it returning the value so that the values are getting sorted in this fashion?</p></li>\n<li><p>And even if it returns the values, they should be printed in increasing order. Why is it showing them in decreasing order?</p></li>\n</ol>\n"}, {"tags": ["c", "linux", "makefile", "autotools", "automake"], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1489004779, "post_id": 42681218, "comment_id": 72486636, "body": "Yes.  Even better, though, would be for <code>configure</code> to locate, check, and add the needed libraries, instead of specifying them in <code>Makefile.am</code>.  As I&#39;m sure you know, Autoconf has a family of macros for such purposes."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1489004854, "post_id": 42681218, "comment_id": 72486680, "body": "Yes, that&#39;s definitely true."}, {"owner": {"reputation": 23, "user_id": 5230057, "user_type": "registered", "profile_image": "https://graph.facebook.com/698918133574231/picture?type=large", "display_name": "Mayank Gupta", "link": "https://stackoverflow.com/users/5230057/mayank-gupta"}, "edited": false, "score": 0, "creation_date": 1489038558, "post_id": 42681218, "comment_id": 72498494, "body": "Thank you for the info, I&#39;ll update <code>configure.ac</code> and <code>Makefile.am</code> and update the question if the problem persists. Thank you for the help."}, {"owner": {"reputation": 23, "user_id": 5230057, "user_type": "registered", "profile_image": "https://graph.facebook.com/698918133574231/picture?type=large", "display_name": "Mayank Gupta", "link": "https://stackoverflow.com/users/5230057/mayank-gupta"}, "edited": false, "score": 0, "creation_date": 1489164826, "post_id": 42681218, "comment_id": 72567094, "body": "@MadScientist a polite ping. I updated the question statement. Can you please help me on it?"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1489173356, "post_id": 42681218, "comment_id": 72571721, "body": "At this point I recommend you just ask a new question.  Your original question has been answered and you&#39;ve accepted the answer which means people are no longer looking at this as an open question.  Your new problem is different and should get a new question.  Your errors here are link-time errors, not compile-time errors, which means that header files are not relevant.  What matters is ensuring that the object files and libraries that define those functions are available on the link line."}], "tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": true, "score": 2, "last_activity_date": 1489004573, "creation_date": 1489004573, "answer_id": 42681218, "question_id": 42680874, "link": "https://stackoverflow.com/questions/42680874/make-using-autotools-gives-undefined-reference-errors-while-custom-makefile-work/42681218#42681218", "title": "make using autotools gives undefined reference errors while custom Makefile works fine", "body": "<p>You don't show the line make invoked to link your code, which would be very useful.</p>\n\n<p>However, you don't want to put libraries into the <code>LDLFLAGS</code> (or <code>AM_LDLFAGS</code>) variable; that variable is for linker flags like <code>-L</code>, etc.  You should use <code>LDADD</code>:</p>\n\n<pre><code>LDADD = -lm -lz -ltesseract -llept\n</code></pre>\n\n<p>If you look at the link line that make is generating you'll see all these options coming BEFORE any of your object files on the link line; that's not right.  The GNU binutils ld is a single-pass linker, which means that the order of <code>-l</code> flags is very important for proper linking.</p>\n"}], "owner": {"reputation": 23, "user_id": 5230057, "user_type": "registered", "profile_image": "https://graph.facebook.com/698918133574231/picture?type=large", "display_name": "Mayank Gupta", "link": "https://stackoverflow.com/users/5230057/mayank-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 42681218, "answer_count": 1, "score": 0, "last_activity_date": 1489164992, "creation_date": 1489003381, "last_edit_date": 1489164992, "question_id": 42680874, "link": "https://stackoverflow.com/questions/42680874/make-using-autotools-gives-undefined-reference-errors-while-custom-makefile-work", "title": "make using autotools gives undefined reference errors while custom Makefile works fine", "body": "<p>I'm trying to convert the build mechanism of ccextractor (Open source closed caption extractor) from custom Makefile to Autotools generated Makefile.</p>\n\n<p>Current Makefile looks like this:</p>\n\n<pre><code>SHELL = /bin/sh\n\nCC = gcc\nSYS := $(shell gcc -dumpmachine)\nCFLAGS = -O3 -std=gnu99 -s\nINCLUDE = -Isrc/gpacmp4/ -Isrc/libpng -Isrc/lib_hash -Isrc/protobuf-c -Isrc/zlib -Isrc/lib_ccx -Isrc/.\nINCLUDE += -Isrc/zvbi -Isrc/utf8proc\nALL_FLAGS = -Wno-write-strings -D_FILE_OFFSET_BITS=64 -DVERSION_FILE_PRESENT\nLDFLAGS = -lm\n\nifneq (, $(findstring linux, $(SYS)))\nCFLAGS +=-DGPAC_CONFIG_LINUX\nendif\nTARGET = ccextractor\n\nOBJS_DIR = objs\nVPATH = src:src/gpacmp4:src/libpng:src/zlib:src/lib_ccx:src/zvbi:src/lib_hash:src/utf8proc:src/protobuf-c\n\nSRCS_DIR = src\nSRCS_C = $(wildcard $(SRCS_DIR)/*.c)\nOBJS = $(SRCS_C:$(SRCS_DIR)/%.c=$(OBJS_DIR)/%.o)\n\nSRCS_CCX_DIR = $(SRCS_DIR)/lib_ccx\nSRCS_CCX = $(wildcard $(SRCS_CCX_DIR)/*.c)\nOBJS_CCX = $(SRCS_CCX:$(SRCS_CCX_DIR)/%.c=$(OBJS_DIR)/%.o)\n\nSRCS_PNG_DIR = $(SRCS_DIR)/libpng\nSRCS_PNG = $(wildcard $(SRCS_PNG_DIR)/*.c)\nOBJS_PNG = $(SRCS_PNG:$(SRCS_PNG_DIR)/%.c=$(OBJS_DIR)/%.o)\n\nSRCS_ZVBI_DIR = $(SRCS_DIR)/zvbi\nSRCS_ZVBI = $(wildcard $(SRCS_ZVBI_DIR)/*.c)\nOBJS_ZVBI = $(SRCS_ZVBI:$(SRCS_ZVBI_DIR)/%.c=$(OBJS_DIR)/%.o)\n\nSRCS_GPACMP4_DIR = $(SRCS_DIR)/gpacmp4\nSRCS_GPACMP4_C = $(wildcard $(SRCS_GPACMP4_DIR)/*.c)\nSRCS_GPACMP4_CPP = $(wildcard $(SRCS_GPACMP4_DIR)/*.cpp)\nOBJS_GPACMP4 = $(SRCS_GPACMP4_C:$(SRCS_GPACMP4_DIR)/%.c=$(OBJS_DIR)/%.o) \\\n               $(SRCS_GPACMP4_CPP:$(SRCS_GPACMP4_DIR)/%.cpp=$(OBJS_DIR)/%.o)\n\nSRCS_ZLIB_DIR = $(SRCS_DIR)/zlib\nSRCS_ZLIB = $(wildcard $(SRCS_ZLIB_DIR)/*.c)\nOBJS_ZLIB = $(SRCS_ZLIB:$(SRCS_ZLIB_DIR)/%.c=$(OBJS_DIR)/%.o)\n\nSRCS_HASH_DIR = $(SRCS_DIR)/lib_hash\nSRCS_HASH = $(wildcard $(SRCS_HASH_DIR)/*.c)\nOBJS_HASH = $(SRCS_HASH:$(SRCS_HASH_DIR)/%.c=$(OBJS_DIR)/%.o)\n\nSRCS_UTF8_DIR = $(SRCS_DIR)/utf8proc\nSRCS_UTF8 = $(SRCS_UTF8_DIR)/utf8proc.c\nOBJS_UTF8 = $(SRCS_UTF8:$(SRCS_UTF8_DIR)/%.c=$(OBJS_DIR)/%.o)\n\nINSTLALL = cp -f -p\nINSTLALL_PROGRAM = $(INSTLALL)\nDESTDIR = /usr/bin\n\nifeq ($(ENABLE_HARDSUBX),yes)\nENABLE_OCR=yes\nCFLAGS+=-DENABLE_HARDSUBX\nCFLAGS+= $(shell pkg-config --cflags libavcodec)\nCFLAGS+= $(shell pkg-config --cflags libavformat)\nCFLAGS+= $(shell pkg-config --cflags libavutil)\nCFLAGS+= $(shell pkg-config --cflags libswscale)\nAV_LDFLAGS+= $(shell pkg-config --libs libavcodec )\nAV_LDFLAGS+= $(shell pkg-config --libs libavformat )\nAV_LDFLAGS+= $(shell pkg-config --libs libavutil )\nAV_LDFLAGS+= $(shell pkg-config --libs libswscale )\nifeq ($(AV_LDFLAGS),$(EMPTY))\n$(error **ERROR** \"libav not found\")\nelse\n$(info \"libav found\")\nendif\nLDFLAGS+= $(AV_LDFLAGS)\nendif\n\nifeq ($(ENABLE_OCR),yes)\nCFLAGS+=-DENABLE_OCR -DPNG_NO_CONFIG_H\nLEPT_LDFLAGS+= $(shell pkg-config --libs lept)\n\nifneq ($(shell pkg-config --exists tesseract), $(EMPTY))\nTESS_LDFLAGS+= $(shell pkg-config --libs tesseract)\nTESS_CFLAGS+= $(shell pkg-config --cflags tesseract)\nelse\n#fix for raspberry pi not having a pkgconfig file for tesseract\nifneq ($(wildcard /usr/include/tesseract/*),$(EMPTY))\nTESS_LDFLAGS+= -ltesseract\nTESS_CFLAGS+= -I/usr/include/tesseract\nendif\nendif\n\n#error checking of library are there or not\nifeq ($(TESS_LDFLAGS),$(EMPTY))\n$(error **ERROR** \"tesseract not found\")\nelse\n#TODO print the version of library found\n$(info  \"tesseract found\")\nendif\n\nifeq ($(LEPT_LDFLAGS),$(EMPTY))\n$(error **ERROR** \"leptonica not found\")\nelse\n#TODO print the version of library found\n$(info  \"Leptonica found\")\nendif\n\nCFLAGS  += $(TESS_CFLAGS)\nCFLAGS  += $(shell pkg-config --cflags lept)\nLDFLAGS += $(TESS_LDFLAGS)\nLDFLAGS += $(LEPT_LDFLAGS)\nendif\n\n\nifeq ($(ENABLE_FFMPEG),yes)\nCFLAGS+=-DENABLE_FFMPEG\nCFLAGS+= $(shell pkg-config --cflags libavcodec)\nCFLAGS+= $(shell pkg-config --cflags libavformat)\nCFLAGS+= $(shell pkg-config --cflags libavutil)\nLDFLAGS+= $(shell pkg-config --libs libavcodec )\nLDFLAGS+= $(shell pkg-config --libs libavformat )\nLDFLAGS+= $(shell pkg-config --libs libavutil )\nendif\n\n.PHONY: all\nall: pre-build objs_dir $(TARGET) \n\n.PHONY: objs_dir\nobjs_dir: \n    mkdir -p $(OBJS_DIR)\n\n$(TARGET): $(OBJS) $(OBJS_PNG) $(OBJS_GPACMP4) $(OBJS_ZVBI) $(OBJS_ZLIB) $(OBJS_HASH) $(OBJS_CCX) $(OBJS_UTF8)\n    $(CC) $(ALL_FLAGS) $(CFLAGS) $(OBJS) $(OBJS_CCX) $(OBJS_PNG) $(OBJS_ZVBI) $(OBJS_GPACMP4) $(OBJS_ZLIB) $(OBJS_HASH) $(OBJS_UTF8) $(LDFLAGS) -o $@\n\n$(OBJS_DIR)/%.o: %.c\n    $(CC) -c $(ALL_FLAGS) $(INCLUDE) $(CFLAGS) $&lt; -o $@  \n\n$(OBJS_DIR)/%.o: %.cpp\n    $(CC) -c $(ALL_FLAGS) $(INCLUDE) $(CFLAGS) $&lt; -o $@ -Isrc/gpacmp4 \n\n$(OBJS_DIR)/ccextractor.o: ccextractor.c\n    $(CC) -c $(ALL_FLAGS) $(INCLUDE) $(CFLAGS) -O0 $&lt; -o $@  \n\n.PHONY: clean\nclean:\n    rm -rf $(TARGET) 2&gt;/dev/null || true\n    rm -rf $(OBJS_CCX) $(OBJS_PNG) $(OBJS_ZLIB) $(OBJS_GPACMP4) $(OBJS_HASH) $(OBJS_UTF8) $(OBJS) 2&gt;/dev/null || true\n    rm -rdf $(OBJS_DIR) 2&gt;/dev/null || true\n    rm -rf .depend 2&gt;/dev/null || true\n\n.PHONY: install\ninstall: $(TARGET)\n    $(INSTLALL_PROGRAM) $(TARGET) $(DESTDIR)\n\n.PHONY: uninstall\nuninstall: \n    rm -iv $(DESTDIR)/$(TARGET) \n\n.PHONY: depend dep\ndepend dep:\n    $(CC) $(CFLAGS) $(INCLUDE) -E -MM $(SRCS_C) $(SRCS_PNG) $(SRCS_ZVBI) $(SRCS_ZLIB) $(SRCS_HASH) $(SRCS_UTF8) $(SRCS_CCX) \\\n        $(SRCS_GPACMP4_C) $(SRCS_GPACMP4_CPP) |\\\n        sed 's/^[a-zA-Z_0-9]*.o/$(OBJS_DIR)\\/&amp;/' &gt; .depend\n\n.PHONY: pre-build\npre-build:\n    ./pre-build.sh\n\n-include .depend\n</code></pre>\n\n<p>Building through above Makefile works fine. My Makefile.am looks like this:</p>\n\n<pre><code>bin_PROGRAMS = ccextractor\nccextractor_SOURCES = \\\n                **Removing common content of Makefile.am as below due to maximum character limit**\n\nAM_CPPFLAGS = -I src -I /usr/include/leptonica/ -I /usr/include/tesseract/ -I src/lib_ccx/ -I src/gpacmp4/ -I src/libpng/ -I src/zlib/ -I src/zvbi/ -I src/lib_hash/ -I src/protobuf-c/ -I src/utf8proc/\n\nAM_CFLAGS = -std=gnu99 -Wno-write-strings -DGPAC_CONFIG_LINUX -D_FILE_OFFSET_BITS=64 -DVERSION_FILE_PRESENT -DENABLE_OCR\n\nAM_LDFLAGS = -lm -lz -ltesseract -llept\n</code></pre>\n\n<p>If I run <code>make</code> after <code>autoreconf -i</code> on above file, build fails with error:</p>\n\n<pre><code>/usr/bin/ld: src/gpacmp4/av_parsers.o: undefined reference to symbol 'trunc@@GLIBC_2.2.5'\n/lib/x86_64-linux-gnu/libm.so.6: error adding symbols: DSO missing from command line\n</code></pre>\n\n<p>If I run <code>./configure</code> as <code>./configure LIBS=\"-lm -lz\"</code> build fails with errors as:</p>\n\n<pre><code>/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/gpacmp4/drm_sample.c:1358: undefined reference to `gf_isom_get_track_from_file'\nsrc/gpacmp4/drm_sample.o: In function `gf_isom_get_adobe_protection_info':\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/gpacmp4/drm_sample.c:1378: undefined reference to `gf_isom_get_track_from_file'\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/gpacmp4/drm_sample.c:1387: undefined reference to `IsMP4Description'\nsrc/gpacmp4/drm_sample.o: In function `gf_isom_cenc_is_pattern_mode':\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/gpacmp4/drm_sample.c:1401: undefined reference to `gf_isom_get_track_from_file'\nsrc/gpacmp4/drm_sample.o: In function `gf_isom_ipmpx_remove_tool_list':\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/gpacmp4/drm_sample.c:1421: undefined reference to `gf_odf_desc_del'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p><code>tree</code> in <code>src</code> dir is:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 ccextractor.c\n\u251c\u2500\u2500 CCExtractorConfig.h.in\n\u251c\u2500\u2500 ccextractor.o\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 gpacmp4\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 avc_ext.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 avc_ext.o\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 avilib.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 avilib.o\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 av_parsers.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 drm_sample.o\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 error.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 error.o\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gpac\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 avparse.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 base_coding.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 bitstream.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 config_file.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 configuration.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 constants.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 events_constants.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 ietf.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 internal\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 avilib.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 isomedia_dev.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 media_dev.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 odf_dev.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 odf_parse_common.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 ogg.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 isomedia.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 list.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 math.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 media_tools.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 mpeg4_odf.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 network.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 revision.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 setup.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sync_layer.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 tools.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 utf.h\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 version.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gpac_ogg.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hinting.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ipmpx_code.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ipmpx_parse.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 isom_intern.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 isom_read.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 isom_store.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 isom_write.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 list.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 math.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 media.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 media_odf.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 meta.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 movie_fragments.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 mp4.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 odf_code.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 odf_codec.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 odf_command.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 os_config_init.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 os_divers.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 os_file.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 qos.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ReadMe.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 sample_descs.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 slc.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 stbl_read.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 stbl_write.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 track.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 tx3g.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 url.c\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 utf.c\n\u251c\u2500\u2500 lib_ccx\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 activity.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 activity.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 asf_constants.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 asf_functions.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 avc_functions.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 avc_functions.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bitstream.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cc_bitstream.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccfont2.xbm\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccx_common_char_encoding.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccx_common_char_encoding.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccx_decoders_708.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccx_decoders_708_output.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccx_encoders_xds.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccx_gxf.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccx_gxf.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccx_mp4.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dvd_subtitle_decoder.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 utility.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 wtv_constants.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 wtv_functions.c\n\u251c\u2500\u2500 lib_hash\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 README\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 sha2.c\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 sha2.h\n\u251c\u2500\u2500 libpng\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 png.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 pngconf.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 pngdebug.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 pngerror.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 pngget.c\n|   |\n\u251c\u2500\u2500 protobuf-c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 protobuf-c.c\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 protobuf-c.h\n\u251c\u2500\u2500 utf8proc\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 utf8proc.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 utf8proc_data.c\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 utf8proc.h\n\u251c\u2500\u2500 win_iconv\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 iconv.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 win_iconv.c\n\u251c\u2500\u2500 win_spec_incld\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dirent.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 inttypes.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 stdint.h\n\u251c\u2500\u2500 zlib\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 adler32.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 compress.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 crc32.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 crc32.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 deflate.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 deflate.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gzclose.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gzguts.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 zutil.c\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 zutil.h\n\u2514\u2500\u2500 zvbi\n    \u251c\u2500\u2500 bcd.h\n    \u251c\u2500\u2500 bit_slicer.c\n    \u251c\u2500\u2500 bit_slicer.h\n    \u251c\u2500\u2500 decoder.c\n    \u251c\u2500\u2500 macros.h\n    \u251c\u2500\u2500 misc.h\n    \u251c\u2500\u2500 raw_decoder.c\n    \u251c\u2500\u2500 raw_decoder.h\n    \u251c\u2500\u2500 sampling_par.c\n    \u251c\u2500\u2500 sampling_par.h\n    \u251c\u2500\u2500 sliced.h\n    \u2514\u2500\u2500 zvbi_decoder.h\n**Stripped some filenames (not directory) due to max character limit**\n</code></pre>\n\n<p>And also, all includes are done with full path in sub directories of <code>src</code>, like for a file in <code>gpacmp4</code> directory, <code>#include &lt;gpac/avparse.h&gt;</code>. All but the main <code>ccextractor.c</code> file, for which all the <code>-I flags</code> are provided.</p>\n\n<p>To refer ccextractor original code:\n<a href=\"https://github.com/CCExtractor/ccextractor\" rel=\"nofollow noreferrer\">https://github.com/CCExtractor/ccextractor</a></p>\n\n<p>The original <code>Makefile</code> will be in <code>linux</code> directory.</p>\n\n<p>PS: Currently I'm trying to get the ccextractor build all the checks will be introduced later. For simplified mechanism <code>ccextractor/linux/build</code> is useful to refer.</p>\n\n<p>Even the slightest help is appreciated.</p>\n\n<p><strong>UPDATE:</strong> (courtesy of @MadScientist)\nI updated <code>Makefile.am</code> as:</p>\n\n<pre><code>AUTOMAKE_OPTIONS = foreign\n\nbin_PROGRAMS = ccextractor\nccextractor_SOURCES = \\\n                src/ccextractor.c \\\n                src/gpacmp4/avc_ext.c \\\n                src/gpacmp4/avilib.c \\\n                src/gpacmp4/av_parsers.c \\\n                src/gpacmp4/base_encoding.c \\\n                src/gpacmp4/bitstream.c \\\n                src/gpacmp4/box_code_3gpp.c \\\n                src/gpacmp4/box_code_adobe.c \\\n                src/gpacmp4/box_code_apple.c \\\n                src/gpacmp4/box_code_base.c \\\n                src/gpacmp4/box_code_drm.c \\\n                src/gpacmp4/box_code_meta.c \\\n                src/gpacmp4/box_funcs.c \\\n                src/gpacmp4/configfile.c \\\n                src/gpacmp4/data_map.c \\\n                src/gpacmp4/desc_private.c \\\n                src/gpacmp4/descriptors.c \\\n                src/gpacmp4/drm_sample.c \\\n                src/gpacmp4/error.c \\\n                src/gpacmp4/gpac/avparse.h \\\n                src/gpacmp4/gpac/base_coding.h \\\n                src/gpacmp4/gpac/bitstream.h \\\n                src/gpacmp4/gpac/config_file.h \\\n                src/gpacmp4/gpac/configuration.h \\\n                src/gpacmp4/gpac/constants.h \\\n                src/gpacmp4/gpac/events_constants.h \\\n                src/gpacmp4/gpac/ietf.h \\\n                src/gpacmp4/gpac/internal\n                src/gpacmp4/gpac/internal/avilib.h \\\n                src/gpacmp4/gpac/internal/isomedia_dev.h \\\n                src/gpacmp4/gpac/internal/media_dev.h \\\n                src/gpacmp4/gpac/internal/odf_dev.h \\\n                src/gpacmp4/gpac/internal/odf_parse_common.h \\\n                src/gpacmp4/gpac/internal/ogg.h \\\n                src/gpacmp4/gpac/isomedia.h \\\n                src/gpacmp4/gpac/list.h \\\n                src/gpacmp4/gpac/math.h \\\n                src/gpacmp4/gpac/media_tools.h \\\n                src/gpacmp4/gpac/mpeg4_odf.h \\\n                src/gpacmp4/gpac/network.h \\\n                src/gpacmp4/gpac/revision.h \\\n                src/gpacmp4/gpac/setup.h \\\n                src/gpacmp4/gpac/sync_layer.h \\\n                src/gpacmp4/gpac/tools.h \\\n                src/gpacmp4/gpac/utf.h \\\n                src/gpacmp4/gpac/version.h \\\n                src/gpacmp4/gpac_ogg.c \\\n                src/gpacmp4/hinting.c \\\n                src/gpacmp4/ipmpx_code.c \\\n                src/gpacmp4/ipmpx_parse.c \\\n                src/gpacmp4/isom_intern.c \\\n                src/gpacmp4/isom_read.c \\\n                src/gpacmp4/isom_store.c \\\n                src/gpacmp4/isom_write.c \\\n                src/gpacmp4/list.c \\\n                src/gpacmp4/math.c \\\n                src/gpacmp4/media.c \\\n                src/gpacmp4/media_odf.c \\\n                src/gpacmp4/meta.c \\\n                src/gpacmp4/movie_fragments.c \\\n                src/gpacmp4/mp4.c \\\n                src/gpacmp4/odf_code.c \\\n                src/gpacmp4/odf_codec.c \\\n                src/gpacmp4/odf_command.c \\\n                src/gpacmp4/os_config_init.c \\\n                src/gpacmp4/os_divers.c \\\n                src/gpacmp4/os_file.c \\\n                src/gpacmp4/qos.c \\\n                src/gpacmp4/ReadMe.txt\n                src/gpacmp4/sample_descs.c \\\n                src/gpacmp4/slc.c \\\n                src/gpacmp4/stbl_read.c \\\n                src/gpacmp4/stbl_write.c \\\n                src/gpacmp4/track.c \\\n                src/gpacmp4/tx3g.c \\\n                src/gpacmp4/url.c \\\n                src/gpacmp4/utf.c \\\n                src/lib_ccx/activity.c \\\n                src/lib_ccx/activity.h \\\n                src/lib_ccx/asf_constants.h \\\n                src/lib_ccx/asf_functions.c \\\n                src/lib_ccx/avc_functions.c \\\n                src/lib_ccx/avc_functions.h \\\n                src/lib_ccx/bitstream.h \\\n                src/lib_ccx/cc_bitstream.c \\\n                src/lib_ccx/ccx_common_char_encoding.c \\\n                src/lib_ccx/ccx_common_char_encoding.h \\\n                src/lib_ccx/ccx_common_common.c \\\n                src/lib_ccx/ccx_common_common.h \\\n                src/lib_ccx/ccx_common_constants.c \\\n                src/lib_ccx/ccx_common_constants.h \\\n                src/lib_ccx/ccx_common_option.c \\\n                src/lib_ccx/ccx_common_option.h \\\n                src/lib_ccx/ccx_common_platform.h \\\n                src/lib_ccx/ccx_common_structs.h \\\n                src/lib_ccx/ccx_common_timing.c \\\n                src/lib_ccx/ccx_common_timing.h \\\n                src/lib_ccx/ccx_decoders_608.c \\\n                src/lib_ccx/ccx_decoders_608.h \\\n                src/lib_ccx/ccx_decoders_708.c \\\n                src/lib_ccx/ccx_decoders_708_encoding.c \\\n                src/lib_ccx/ccx_decoders_708_encoding.h \\\n                src/lib_ccx/ccx_decoders_708.h \\\n                src/lib_ccx/ccx_decoders_708_output.c \\\n                src/lib_ccx/ccx_decoders_708_output.h \\\n                src/lib_ccx/ccx_decoders_common.c \\\n                src/lib_ccx/ccx_decoders_common.h \\\n                src/lib_ccx/ccx_decoders_isdb.c \\\n                src/lib_ccx/ccx_decoders_isdb.h \\\n                src/lib_ccx/ccx_decoders_structs.h \\\n                src/lib_ccx/ccx_decoders_vbi.c \\\n                src/lib_ccx/ccx_decoders_vbi.h \\\n                src/lib_ccx/ccx_decoders_xds.c \\\n                src/lib_ccx/ccx_decoders_xds.h \\\n                src/lib_ccx/ccx_demuxer.c \\\n                src/lib_ccx/ccx_demuxer.h \\\n                src/lib_ccx/ccx_dtvcc.c \\\n                src/lib_ccx/ccx_dtvcc.h \\\n                src/lib_ccx/ccx_encoders_common.c \\\n                src/lib_ccx/ccx_encoders_common.h \\\n                src/lib_ccx/ccx_encoders_curl.c \\\n                src/lib_ccx/ccx_encoders_g608.c \\\n                src/lib_ccx/ccx_encoders_helpers.c \\\n                src/lib_ccx/ccx_encoders_helpers.h \\\n                src/lib_ccx/ccx_encoders_sami.c \\\n                src/lib_ccx/ccx_encoders_smptett.c \\\n                src/lib_ccx/ccx_encoders_splitbysentence.c \\\n                src/lib_ccx/ccx_encoders_spupng.c \\\n                src/lib_ccx/ccx_encoders_spupng.h \\\n                src/lib_ccx/ccx_encoders_srt.c \\\n                src/lib_ccx/ccx_encoders_ssa.c \\\n                src/lib_ccx/ccx_encoders_structs.h \\\n                src/lib_ccx/ccx_encoders_transcript.c \\\n                src/lib_ccx/ccx_encoders_webvtt.c \\\n                src/lib_ccx/ccx_encoders_xds.c \\\n                src/lib_ccx/ccx_encoders_xds.h \\\n                src/lib_ccx/ccx_gxf.c \\\n                src/lib_ccx/ccx_gxf.h \\\n                src/lib_ccx/ccx_mp4.h \\\n                src/lib_ccx/ccx_share.c \\\n                src/lib_ccx/ccx_share.h \\\n                src/lib_ccx/ccx_sub_entry_message.pb-c.c \\\n                src/lib_ccx/ccx_sub_entry_message.pb-c.h \\\n                src/lib_ccx/CMakeLists.txt\n                src/lib_ccx/compile_info.h \\\n                src/lib_ccx/compile_info_real.h \\\n                src/lib_ccx/configuration.c \\\n                src/lib_ccx/configuration.h \\\n                src/lib_ccx/disable_warnings.h \\\n                src/lib_ccx/dvb_subtitle_decoder.c \\\n                src/lib_ccx/dvb_subtitle_decoder.h \\\n                src/lib_ccx/dvd_subtitle_decoder.c \\\n                src/lib_ccx/dvd_subtitle_decoder.h \\\n                src/lib_ccx/es_functions.c \\\n                src/lib_ccx/es_userdata.c \\\n                src/lib_ccx/ffmpeg_intgr.c \\\n                src/lib_ccx/ffmpeg_intgr.h \\\n                src/lib_ccx/file_buffer.h \\\n                src/lib_ccx/file_functions.c \\\n                src/lib_ccx/general_loop.c \\\n                src/lib_ccx/hamming.h \\\n                src/lib_ccx/hardsubx.c \\\n                src/lib_ccx/hardsubx_classifier.c \\\n                src/lib_ccx/hardsubx_decoder.c \\\n                src/lib_ccx/hardsubx.h \\\n                src/lib_ccx/hardsubx_imgops.c \\\n                src/lib_ccx/hardsubx_utility.c \\\n                src/lib_ccx/lib_ccx.c \\\n                src/lib_ccx/lib_ccx.h \\\n                src/lib_ccx/list.h \\\n                src/lib_ccx/matroska.c \\\n                src/lib_ccx/matroska.h \\\n                src/lib_ccx/myth.c \\\n                src/lib_ccx/networking.c \\\n                src/lib_ccx/networking.h \\\n                src/lib_ccx/ocr.c \\\n                src/lib_ccx/ocr.h \\\n                src/lib_ccx/output.c \\\n                src/lib_ccx/params.c \\\n                src/lib_ccx/params_dump.c \\\n                src/lib_ccx/sequencing.c \\\n                src/lib_ccx/spupng_encoder.c \\\n                src/lib_ccx/spupng_encoder.h \\\n                src/lib_ccx/stdintmsc.h \\\n                src/lib_ccx/stream_functions.c \\\n                src/lib_ccx/teletext.h \\\n                src/lib_ccx/telxcc.c \\\n                src/lib_ccx/ts_functions.c \\\n                src/lib_ccx/ts_functions.h \\\n                src/lib_ccx/ts_info.c \\\n                src/lib_ccx/ts_tables.c \\\n                src/lib_ccx/ts_tables_epg.c \\\n                src/lib_ccx/utility.c \\\n                src/lib_ccx/utility.h \\\n                src/lib_ccx/wtv_constants.h \\\n                src/lib_ccx/wtv_functions.c \\\n                src/lib_hash/sha2.c \\\n                src/lib_hash/sha2.h \\\n                src/libpng/png.c \\\n                src/libpng/pngconf.h \\\n                src/libpng/pngdebug.h \\\n                src/libpng/pngerror.c \\\n                src/libpng/pngget.c \\\n                src/libpng/png.h \\\n                src/libpng/pnginfo.h \\\n                src/libpng/pnglibconf.h \\\n                src/libpng/pngmem.c \\\n                src/libpng/pngpread.c \\\n                src/libpng/pngpriv.h \\\n                src/libpng/pngread.c \\\n                src/libpng/pngrio.c \\\n                src/libpng/pngrtran.c \\\n                src/libpng/pngrutil.c \\\n                src/libpng/pngset.c \\\n                src/libpng/pngstruct.h \\\n                src/libpng/pngtrans.c \\\n                src/libpng/pngwio.c \\\n                src/libpng/pngwrite.c \\\n                src/libpng/pngwtran.c \\\n                src/libpng/pngwutil.c \\\n                src/protobuf-c/protobuf-c.c \\\n                src/protobuf-c/protobuf-c.h \\\n                src/utf8proc/utf8proc.c \\\n                src/utf8proc/utf8proc_data.c \\\n                src/utf8proc/utf8proc.h \\\n                src/win_iconv/iconv.h \\\n                src/win_iconv/win_iconv.c \\\n                src/win_spec_incld/dirent.h \\\n                src/win_spec_incld/inttypes.h \\\n                src/win_spec_incld/stdint.h \\\n                src/zlib/adler32.c \\\n                src/zlib/compress.c \\\n                src/zlib/crc32.c \\\n                src/zlib/crc32.h \\\n                src/zlib/deflate.c \\\n                src/zlib/deflate.h \\\n                src/zlib/gzclose.c \\\n                src/zlib/gzguts.h \\\n                src/zlib/gzlib.c \\\n                src/zlib/gzread.c \\\n                src/zlib/gzwrite.c \\\n                src/zlib/infback.c \\\n                src/zlib/inffast.c \\\n                src/zlib/inffast.h \\\n                src/zlib/inffixed.h \\\n                src/zlib/inflate.c \\\n                src/zlib/inflate.h \\\n                src/zlib/inftrees.c \\\n                src/zlib/inftrees.h \\\n                src/zlib/trees.c \\\n                src/zlib/trees.h \\\n                src/zlib/uncompr.c \\\n                src/zlib/zconf.h \\\n                src/zlib/zlib.h \\\n                src/zlib/zutil.c \\\n                src/zlib/zutil.h \\\n                src/zvbi/bcd.h \\\n                src/zvbi/bit_slicer.c \\\n                src/zvbi/bit_slicer.h \\\n                src/zvbi/decoder.c \\\n                src/zvbi/macros.h \\\n                src/zvbi/misc.h \\\n                src/zvbi/raw_decoder.c \\\n                src/zvbi/raw_decoder.h \\\n                src/zvbi/sampling_par.c \\\n                src/zvbi/sampling_par.h \\\n                src/zvbi/sliced.h \\\n                src/zvbi/zvbi_decoder.h\n\nccextractor_CFLAGS =-std=gnu99 -Wno-write-strings -DGPAC_CONFIG_LINUX -D_FILE_OFFSET_BITS=64 -DVERSION_FILE_PRESENT -DENABLE_OCR\n\nccextractor_CPPFLAGS =-I /usr/include/leptonica/ -I /usr/include/tesseract/ -I src/lib_ccx/ -I src/gpacmp4/ -I src/libpng/ -I src/zlib/ -I src/zvbi/ -I src/lib_hash/ -I src/protobuf-c/ -I src/utf8proc/\n\nccextractor_LDADD =-lm -ltesseract -llept\n\nccextractor_LDFLAGS=-zmuldefs\n</code></pre>\n\n<p>The <code>build</code> script which builds \"ccextractor\" perfectly fine is:</p>\n\n<pre><code>#!/bin/bash\nBLD_FLAGS=\"-std=gnu99 -Wno-write-strings -DGPAC_CONFIG_LINUX -D_FILE_OFFSET_BITS=64 -DVERSION_FILE_PRESENT -DENABLE_OCR\"\nBLD_INCLUDE=\"-Isrc -I /usr/include/leptonica/ -I /usr/include/tesseract/ -Isrc/lib_ccx/ -Isrc/gpacmp4/ -Isrc/libpng/ -Isrc/zlib/ -Isrc/zvbi -Isrc/lib_hash -Isrc/protobuf-c -Isrc/utf8proc\"\nSRC_LIBPNG=\"$(find src/libpng/ -name '*.c')\"\nSRC_ZLIB=\"$(find src/zlib/ -name '*.c')\"\nSRC_ZVBI=\"$(find src/zvbi/ -name '*.c')\"\nSRC_CCX=\"$(find src/lib_ccx/ -name '*.c')\"\nSRC_GPAC=\"$(find src/gpacmp4/ -name '*.c')\"\nSRC_HASH=\"$(find src/lib_hash/ -name '*.c')\"\nSRC_PROTOBUF=\"$(find src/protobuf-c/ -name '*.c')\"\nSRC_UTF8PROC=\"src/utf8proc/utf8proc.c\"\nBLD_SOURCES=\"src/ccextractor.c $SRC_CCX $SRC_GPAC $SRC_ZLIB $SRC_ZVBI $SRC_LIBPNG $SRC_HASH $SRC_PROTOBUF $SRC_UTF8PROC\"\nBLD_LINKER=\"-lm -zmuldefs -l tesseract -l lept\"\n\n\n**Stripped a call for a script which checks the git commit (nothing that'd interfere with build**\n\nout=$((LC_ALL=C gcc $BLD_FLAGS $BLD_INCLUDE -o ccextractor $BLD_SOURCES $BLD_LINKER) 2&gt;&amp;1)\nres=$?\nif [[ $out == *\"gcc: command not found\"* ]]\nthen\n    echo \"Error: please install gcc\";\n    exit 1\nfi\nif [[ $out == *\"curl.h: No such file or directory\"* ]]\nthen\n    echo \"Error: please install curl development library (libcurl4-gnutls-dev for Debian/Ubuntu)\";\n    exit 2\nfi\nif [[ $out == *\"capi.h: No such file or directory\"* ]]\nthen\n    echo \"Error: please install tesseract development library (tesseract-ocr-dev for Debian/Ubuntu)\";\n    exit 3\nfi\nif [[ $out == *\"allheaders.h: No such file or directory\"* ]]\nthen\n    echo \"Error: please install leptonica development library (libleptonica-dev for Debian/Ubuntu)\";\n    exit 4\nfi\nif [[ $res -ne 0 ]]  # Unknown error\nthen\n    echo \"Compiled with errors\"\n    &gt;&amp;2 echo \"$out\"\n    exit 5\nfi\necho \"Compilation successful\";\n</code></pre>\n\n<p>Here are some initial statements which <code>make</code> invokes:</p>\n\n<pre><code>gcc -DHAVE_CONFIG_H -I.  -I /usr/include/leptonica/ -I /usr/include/tesseract/ -I src/lib_ccx/ -I src/gpacmp4/ -I src/libpng/ -I src/zlib/ -I src/zvbi/ -I src/lib_hash/ -I src/protobuf-c/ -I src/utf8proc/  -std=gnu99 -Wno-write-strings -DGPAC_CONFIG_LINUX -D_FILE_OFFSET_BITS=64 -DVERSION_FILE_PRESENT -DENABLE_OCR -g -O2 -MT src/ccextractor-ccextractor.o -MD -MP -MF src/.deps/ccextractor-ccextractor.Tpo -c -o src/ccextractor-ccextractor.o `test -f 'src/ccextractor.c' || echo './'`src/ccextractor.c\nmv -f src/.deps/ccextractor-ccextractor.Tpo src/.deps/ccextractor-ccextractor.Po\ngcc -DHAVE_CONFIG_H -I.  -I /usr/include/leptonica/ -I /usr/include/tesseract/ -I src/lib_ccx/ -I src/gpacmp4/ -I src/libpng/ -I src/zlib/ -I src/zvbi/ -I src/lib_hash/ -I src/protobuf-c/ -I src/utf8proc/  -std=gnu99 -Wno-write-strings -DGPAC_CONFIG_LINUX -D_FILE_OFFSET_BITS=64 -DVERSION_FILE_PRESENT -DENABLE_OCR -g -O2 -MT src/gpacmp4/ccextractor-avc_ext.o -MD -MP -MF src/gpacmp4/.deps/ccextractor-avc_ext.Tpo -c -o src/gpacmp4/ccextractor-avc_ext.o `test -f 'src/gpacmp4/avc_ext.c' || echo './'`src/gpacmp4/avc_ext.c\nmv -f src/gpacmp4/.deps/ccextractor-avc_ext.Tpo src/gpacmp4/.deps/ccextractor-avc_ext.Po\ngcc -DHAVE_CONFIG_H -I.  -I /usr/include/leptonica/ -I /usr/include/tesseract/ -I src/lib_ccx/ -I src/gpacmp4/ -I src/libpng/ -I src/zlib/ -I src/zvbi/ -I src/lib_hash/ -I src/protobuf-c/ -I src/utf8proc/  -std=gnu99 -Wno-write-strings -DGPAC_CONFIG_LINUX -D_FILE_OFFSET_BITS=64 -DVERSION_FILE_PRESENT -DENABLE_OCR -g -O2 -MT src/gpacmp4/ccextractor-avilib.o -MD -MP -MF src/gpacmp4/.deps/ccextractor-avilib.Tpo -c -o src/gpacmp4/ccextractor-avilib.o `test -f 'src/gpacmp4/avilib.c' || echo './'`src/gpacmp4/avilib.c\nmv -f src/gpacmp4/.deps/ccextractor-avilib.Tpo src/gpacmp4/.deps/ccextractor-avilib.Po\n</code></pre>\n\n<p>Statement which <code>make</code> invokes just before showing undefined reference errors:</p>\n\n<pre><code>gcc -std=gnu99 -Wno-write-strings -DGPAC_CONFIG_LINUX -D_FILE_OFFSET_BITS=64 -DVERSION_FILE_PRESENT -DENABLE_OCR -g -O2 -zmuldefs  -o ccextractor src/ccextractor-ccextractor.o src/gpacmp4/ccextractor-avc_ext.o src/gpacmp4/ccextractor-avilib.o src/gpacmp4/ccextractor-av_parsers.o src/gpacmp4/ccextractor-base_encoding.o src/gpacmp4/ccextractor-bitstream.o src/gpacmp4/ccextractor-box_code_3gpp.o src/gpacmp4/ccextractor-box_code_adobe.o src/gpacmp4/ccextractor-box_code_apple.o src/gpacmp4/ccextractor-box_code_base.o src/gpacmp4/ccextractor-box_code_drm.o src/gpacmp4/ccextractor-box_code_meta.o src/gpacmp4/ccextractor-box_funcs.o src/gpacmp4/ccextractor-configfile.o src/gpacmp4/ccextractor-data_map.o src/gpacmp4/ccextractor-desc_private.o src/gpacmp4/ccextractor-descriptors.o src/gpacmp4/ccextractor-drm_sample.o src/gpacmp4/ccextractor-error.o -lm -ltesseract -llept\n\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/ccextractor.c:32: undefined reference to `mprint'\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/ccextractor.c:33: undefined reference to `change_filename_requested'\nsrc/ccextractor-ccextractor.o: In function `sigint_handler':\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/ccextractor.c:47: undefined reference to `print_file_report'\nsrc/ccextractor-ccextractor.o: In function `print_end_msg':\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/ccextractor.c:55: undefined reference to `mprint'\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/ccextractor.c:56: undefined reference to `mprint'\nsrc/ccextractor-ccextractor.o: In function `main':\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/ccextractor.c:68: undefined reference to `init_options'\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/ccextractor.c:70: undefined reference to `parse_configuration'\n/media/mayank/Mayank/GSOC 2017/Projects/ccextractor/src/ccextractor.c:71: undefined reference to `parse_parameters'\n</code></pre>\n\n<p>PS: Sorry for the delay in update. Any help is appreciated.I tried many things including changing the path of the <code>#include &lt;path/to/header&gt;</code> statements in code and then adding <code>-I</code> statement in <code>CFLAGS</code> but that didn't help either. Almost all the undefined reference errors are from the functions declared in the headers residing in subdirectories of directories in source like, <code>src/dir/subdir</code> the <code>-I</code> flags are added only till <code>src/dir/</code> and then the files in <code>src/dir/</code> have statements like <code>#include&lt;subdir/filename.h&gt;</code>. </p>\n\n<p>PPS: I used <code>grep -r \"&lt;Name_of_function_leading_to_error&gt;\" .</code> in <code>src</code> to find out the declaration header.</p>\n"}, {"tags": ["c", "parsing", "dynamic", "memory-leaks", "allocation"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1489002898, "post_id": 42680711, "comment_id": 72485612, "body": "If you turn on debugging symbols, leaving the compiled code annotated with things like function names, file names, and line numbers, the valgrind output will include file and line numbers. With most compilers its <code>-g</code>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1489003033, "post_id": 42680711, "comment_id": 72485691, "body": "You&#39;re not even allocating memory for <code>counter</code>th token, except on first iteration for each line. Also, as these are <i>numbers</i>, as you say, I am not sure why would you want to store the <i>strings</i> in the array?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489003110, "post_id": 42680711, "comment_id": 72485732, "body": "It is unclear whether you are reading 30000 numbers or 6000 lines (5 numbers per line). Why do you need to store the 6000 (30000?) lines, but not the 30000 numbers? Is this an X-Y question? Did you really want a 2-D array <code>[6000][5]</code> of those numbers? And why do you throw away the first line, is it column headers?"}, {"owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489003401, "post_id": 42680711, "comment_id": 72485888, "body": "I am reading in 6000 lines, but I store each number from that line into the array, which gives me an array of 30,000 numbers @WeatherVane"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 4, "last_activity_date": 1489002814, "creation_date": 1489002814, "answer_id": 42680732, "question_id": 42680711, "link": "https://stackoverflow.com/questions/42680711/valgrind-to-fix-memory-leaks/42680732#42680732", "title": "Valgrind to fix memory leaks", "body": "<pre><code>nums = malloc(sizeof(char) * 30000);\n</code></pre>\n\n<p>won't hold 30000 pointers on numbers. The size is too low, should be:</p>\n\n<pre><code>nums = malloc(sizeof(char*) * 30000);\n</code></pre>\n\n<p>Aside, instead of doing:</p>\n\n<pre><code>token = strtok(buffer,\" \");\nnums[counter] = malloc(sizeof(char) * 50);\n</code></pre>\n\n<p>you should do:</p>\n\n<pre><code>token = strtok(buffer,\" \");\nnums[counter] = malloc(strlen(token)+1);\n</code></pre>\n\n<p>so you allocate the right amount of memory for each token (not too much, but not too few), and note that <code>sizeof(char)</code> is always 1, so omit it.</p>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1489005053, "last_edit_date": 1495541831, "creation_date": 1489003471, "answer_id": 42680903, "question_id": 42680711, "link": "https://stackoverflow.com/questions/42680711/valgrind-to-fix-memory-leaks/42680903#42680903", "title": "Valgrind to fix memory leaks", "body": "<p>If you compile with debugging symbols, usually with <code>-g</code>, then valgrind will include file and line numbers in its output making it much easier to understand.</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/a/42680732/14660\">@Jean-Fran\u00e7oisFabre already found one malloc problem</a>, your while loop contains more.</p>\n\n<pre><code>while (fgets(buffer,sizeof(buffer),fp) != NULL)\n{\n    token = strtok(buffer,\" \");\n    nums[counter] = malloc(sizeof(char) * 50);\n</code></pre>\n\n<p>You're always allocating memory for <code>nums[counter]</code>, but...</p>\n\n<pre><code>    while (token != NULL)\n    {\n        if (strlen(token) &gt; 1)\n        {\n            strcpy(nums[counter],token);\n            counter++;\n</code></pre>\n\n<p>You only sometimes increment <code>counter</code>. You're going to leak a lot of memory.</p>\n\n<p>You're also copying <code>token</code>, which could be up to 29998 bytes, into <code>nums[counter]</code> which is just 50.</p>\n\n<pre><code>        }\n        token = strtok(NULL,\" \");\n    } \n}\n</code></pre>\n\n<hr>\n\n<p>Instead, allocate <code>nums[counter]</code> as it's needed and to the right size.</p>\n\n<pre><code>while (fgets(buffer,sizeof(buffer),fp) != NULL)\n{\n    token = strtok(buffer,\" \");\n\n    while (token != NULL)\n    {\n        if (strlen(token) &gt; 1)\n        {\n            nums[counter] = malloc(sizeof(char) * (strlen(token) + 1));\n            strcpy(nums[counter],token);\n            counter++;\n        }\n        token = strtok(NULL,\" \");\n    } \n}\n</code></pre>\n\n<p>Or, if you don't mind using POSIX functions, use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html\" rel=\"nofollow noreferrer\"><code>strdup</code></a>.</p>\n\n<pre><code>nums[counter] = strdup(token);\n</code></pre>\n\n<p>And, as others have pointed out in the comments, it's questionable why you're storing numbers as strings. Convert them to numbers immediately with <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strtol.htm\" rel=\"nofollow noreferrer\"><code>strtol</code></a> or <code>strtod</code> and store that. It's simpler and consumes a lot less memory.</p>\n\n<pre><code>long nums[30000];\n\n...\n\nchar *end;\nnums[counter] = strtol(token, &amp;end, 10);\nif( end != '\\0' ) {\n    fprintf(stderr, \"Couldn't understand %s\\n\", token);\n}\n</code></pre>\n\n<p><code>end</code> is a pointer to the spot on <code>token</code> where <code>strtol</code> stopped parsing. Checking it's a null byte requires that <code>token</code> must contain only digits. How strict you want to be with your conversion is up to you.</p>\n"}], "owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 42680903, "answer_count": 2, "score": -2, "last_activity_date": 1489005053, "creation_date": 1489002727, "question_id": 42680711, "link": "https://stackoverflow.com/questions/42680711/valgrind-to-fix-memory-leaks", "title": "Valgrind to fix memory leaks", "body": "<p>I have a program which I am reading in a text file of 30,000 numbers that are space separated (5 per line). When I run the program, sometimes it works but other times it doesn't (seg faults) which I believe that means I have memory leaks. </p>\n\n<p>I have the following:</p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\n\n    char input[256];\n    char buffer[30000];\n    char **nums = NULL;\n    nums = malloc(sizeof(char) * 30000);\n\n    char *token;\n    int counter = 0;\n    FILE *fp;\n    fp = fopen(\"textfile.txt\",\"r\");\n\n    fgets(input,sizeof(input),stdin);\n\n    while (fgets(buffer,sizeof(buffer),fp) != NULL)\n    {\n        token = strtok(buffer,\" \");\n        nums[counter] = malloc(sizeof(char) * 50);\n\n        while (token != NULL)\n        {\n            if (strlen(token) &gt; 1)\n            {\n                strcpy(nums[counter],token);\n                counter++;\n            }\n            token = strtok(NULL,\" \");\n        } \n    }\n\n    for (int x = 0; x &lt; 30000;x++)\n    {\n        free(nums[x]);\n    }\n\n    free(nums);\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n\n<p>I am running valgrind to try to debug but I am having issues reading the output. Could somebody tell me where I am going wrong?</p>\n\n<pre><code>==24368== Use of uninitialised value of size 8\n==24368==    at 0x4C2588C: strcpy (mc_replace_strmem.c:311)\n==24368==    by 0x400820: main (in /home/a.out)\n==24368==\n==24368== Invalid write of size 1\n==24368==    at 0x4C2588C: strcpy (mc_replace_strmem.c:311)\n==24368==    by 0x400820: main (in /home/a.out)\n==24368==  Address 0x0 is not stack'd, malloc'd or (recently) free'd\n==24368==\n</code></pre>\n"}, {"tags": ["c", "file-exists"], "comments": [{"owner": {"reputation": 34174, "user_id": 65464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1fc3a85db4ff7618a7639742f356b3b?s=128&d=identicon&r=PG", "display_name": "Erich Kitzmueller", "link": "https://stackoverflow.com/users/65464/erich-kitzmueller"}, "edited": false, "score": 2, "creation_date": 1489002013, "post_id": 42680439, "comment_id": 72485095, "body": "that&#39;s how it&#39;s done, bob"}, {"owner": {"reputation": 5213, "user_id": 1380285, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f9a9583aed6db34815797c68823225b9?s=128&d=identicon&r=PG", "display_name": "bob.sacamento", "link": "https://stackoverflow.com/users/1380285/bob-sacamento"}, "reply_to_user": {"reputation": 34174, "user_id": 65464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1fc3a85db4ff7618a7639742f356b3b?s=128&d=identicon&r=PG", "display_name": "Erich Kitzmueller", "link": "https://stackoverflow.com/users/65464/erich-kitzmueller"}, "edited": false, "score": 0, "creation_date": 1489002509, "post_id": 42680439, "comment_id": 72485382, "body": "@ammoQ Thanks for the word!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1489002577, "post_id": 42680439, "comment_id": 72485436, "body": "The wildcard is used by the shell file searching utilities. One way it can be done is to pass such a command to the shell with redirected output, and then analyse the file it creates. But it&#39;s a horrible way to go about it."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1489004296, "post_id": 42680439, "comment_id": 72486360, "body": "<code>popen(&quot;ls -1 lockfile*&quot;, &quot;r&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5213, "user_id": 1380285, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f9a9583aed6db34815797c68823225b9?s=128&d=identicon&r=PG", "display_name": "bob.sacamento", "link": "https://stackoverflow.com/users/1380285/bob-sacamento"}, "edited": false, "score": 0, "creation_date": 1489002494, "post_id": 42680549, "comment_id": 72485372, "body": "Thanks.  Trying to accept your answer but Stack is telling me I have to wait five minutes.  Remind me if I forget!"}, {"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "edited": false, "score": 1, "creation_date": 1489005562, "post_id": 42680549, "comment_id": 72487043, "body": "You should check @PSkocik&#39;s <a href=\"http://stackoverflow.com/a/42680722/451601\">answer</a>.  You provided in your question a glob pattern, and he pointed you to **glob**(3)."}], "tags": [], "owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "is_accepted": false, "score": 1, "last_activity_date": 1489002225, "creation_date": 1489002225, "answer_id": 42680549, "question_id": 42680439, "link": "https://stackoverflow.com/questions/42680439/in-c-checking-for-existence-of-file-with-name-matching-a-pattern/42680549#42680549", "title": "In C, checking for existence of file with name matching a pattern", "body": "<p>To my knowledge, that's how it should be done.</p>\n\n<p>For each name <code>d_name</code> of the file, you can check it's length and if it has at least 8 characters, <code>strcmp</code> that 8 first characters to <strong>lockfile</strong>.</p>\n\n<p>You can also use <code>&lt;regex.h&gt;</code> for that check. </p>\n\n<p>As for the iteration, I believe that's he best way to go.</p>\n"}, {"comments": [{"owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "edited": false, "score": 0, "creation_date": 1489013594, "post_id": 42680722, "comment_id": 72491023, "body": "Thanks for that! good to know :) but isn&#39;t it really bad efficiency wise? doesn&#39;t it check all places?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "edited": false, "score": 0, "creation_date": 1489014307, "post_id": 42680722, "comment_id": 72491300, "body": "<code>lockfile*</code> will fire off a recursive root tree search. You&#39;ll have the matches ready in a couple of hours. Just kidding. Of course it won&#39;t &quot;check all places&quot;. Try it out."}, {"owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "edited": false, "score": 0, "creation_date": 1489053943, "post_id": 42680722, "comment_id": 72506986, "body": "haha yes, but how does it work? how does it map the fs so it doesn&#39;t have to check all dirs?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "edited": false, "score": 1, "creation_date": 1489054335, "post_id": 42680722, "comment_id": 72507272, "body": "If you have a pattern such as <code>lockfile*</code>, it&#39;ll need to iterate over the current  directory and look for maching names. glibc&#39;s implementation uses <code>readdir()</code> + <code>fnmatch()</code>."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 7, "last_activity_date": 1489003819, "last_edit_date": 1489003819, "creation_date": 1489002762, "answer_id": 42680722, "question_id": 42680439, "link": "https://stackoverflow.com/questions/42680439/in-c-checking-for-existence-of-file-with-name-matching-a-pattern/42680722#42680722", "title": "In C, checking for existence of file with name matching a pattern", "body": "<p>You can use <a href=\"https://linux.die.net/man/3/glob\" rel=\"nofollow noreferrer\">glob(3)</a> (standardized by POSIX). You give it a wildcard pattern and it will search the filesystem for matches. </p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>#include &lt;glob.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n   glob_t globbuf;\n   if (0==glob(argv[1], 0, NULL, &amp;globbuf)){\n       char **a=globbuf.gl_pathv;\n\n       puts(\"MATCHES\");\n       for(;*a;a++)\n           puts(*a);\n   }\n   globfree(&amp;globbuf);\n}\n</code></pre>\n\n<p>Running:</p>\n\n<pre><code>./a.out 'lockfile*'\n</code></pre>\n\n<p>should give you your lockfiles.</p>\n"}], "owner": {"reputation": 5213, "user_id": 1380285, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f9a9583aed6db34815797c68823225b9?s=128&d=identicon&r=PG", "display_name": "bob.sacamento", "link": "https://stackoverflow.com/users/1380285/bob-sacamento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 2, "accepted_answer_id": 42680722, "answer_count": 2, "score": 1, "last_activity_date": 1489003819, "creation_date": 1489001898, "question_id": 42680439, "link": "https://stackoverflow.com/questions/42680439/in-c-checking-for-existence-of-file-with-name-matching-a-pattern", "title": "In C, checking for existence of file with name matching a pattern", "body": "<p>I've seen a few methods for checking the existence of a file in C.  However, everything I've seen works for a specific file name.  I would like to check for any file that matches a particular pattern.  For instance, maybe the pattern is \"lockfile*\" and \"lockfileA\", \"lockfile.txt\", or \"lockfile.abc\" would register in the check.  The way I am doing this currently is to open the directory with opendir() then cycle through readdir() and try to match the pattern with name of each file returned.  It works, but I sure would like a more compact way to do this.  Any ideas?</p>\n"}, {"tags": ["c", "signals", "sigaction", "setitimer"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1489001872, "post_id": 42680373, "comment_id": 72485023, "body": "Note: You should not call printf() (and friends) from a signal handler. It is not signal safe."}, {"owner": {"reputation": 174, "user_id": 1829376, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/57a99b4d09f0204222e3cb8f0f00457b?s=128&d=identicon&r=PG", "display_name": "Katharine Kim", "link": "https://stackoverflow.com/users/1829376/katharine-kim"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1489002030, "post_id": 42680373, "comment_id": 72485107, "body": "@wildplasser Thanks for reminding that, but I have to call it since my assignment asked to do so."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1489007942, "post_id": 42680373, "comment_id": 72488295, "body": "Note that if the signal handler exits, the whole program exits.  If you want to do this more than once, you need the signal handler to return, not call <code>exit()</code>.  As to measuring elapsed time: record the start time; in the handler, find the current time; calculate and format the difference."}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 1829376, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/57a99b4d09f0204222e3cb8f0f00457b?s=128&d=identicon&r=PG", "display_name": "Katharine Kim", "link": "https://stackoverflow.com/users/1829376/katharine-kim"}, "edited": false, "score": 0, "creation_date": 1489020511, "post_id": 42684232, "comment_id": 72493356, "body": "The printf() in the loop should be removed? NO! That is just simply changing the purpose of the program.  Please consider that carefully before answering."}, {"owner": {"reputation": 101, "user_id": 2023997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0a42f04c6829c6b8c69b209b2ed1f8?s=128&d=identicon&r=PG", "display_name": "Kevin Li", "link": "https://stackoverflow.com/users/2023997/kevin-li"}, "reply_to_user": {"reputation": 174, "user_id": 1829376, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/57a99b4d09f0204222e3cb8f0f00457b?s=128&d=identicon&r=PG", "display_name": "Katharine Kim", "link": "https://stackoverflow.com/users/1829376/katharine-kim"}, "edited": false, "score": 0, "creation_date": 1489117245, "post_id": 42684232, "comment_id": 72541095, "body": "My mistake, looks like the printf() is needed for printing the data from the file. In this case, there is no way to prevent the handler from interrupting the main loop during the call to printf(). This will sometimes cause the final integer to be printed after the handler has already printed the time elapsed. An alternative approach would be to have the handler set a boolean, and have the loop exit gracefully when the boolean value changes. In this case the time elapsed would be printed by the main function, after the loop, before finally exiting."}], "tags": [], "owner": {"reputation": 101, "user_id": 2023997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0a42f04c6829c6b8c69b209b2ed1f8?s=128&d=identicon&r=PG", "display_name": "Kevin Li", "link": "https://stackoverflow.com/users/2023997/kevin-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1489017417, "creation_date": 1489017417, "answer_id": 42684232, "question_id": 42680373, "link": "https://stackoverflow.com/questions/42680373/how-to-have-signal-handler-print-time-elapsed/42684232#42684232", "title": "How to have signal handler print time elapsed?", "body": "<p>In order to print the elapsed time, the handler must have access to the timer. A simple way to do this is to have the timer be a global variable too, just like the counter. For the extra integer being printed, this is because the signal interrupted the loop in the middle of the call to printf(). The printf() in the loop should be removed, as the total number of loop iterations will be printed by the signal handler.</p>\n"}], "owner": {"reputation": 174, "user_id": 1829376, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/57a99b4d09f0204222e3cb8f0f00457b?s=128&d=identicon&r=PG", "display_name": "Katharine Kim", "link": "https://stackoverflow.com/users/1829376/katharine-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489017417, "creation_date": 1489001651, "last_edit_date": 1489007517, "question_id": 42680373, "link": "https://stackoverflow.com/questions/42680373/how-to-have-signal-handler-print-time-elapsed", "title": "How to have signal handler print time elapsed?", "body": "<p>I am writing a C program that has a sigaction handler. It also has a itimerval in case SIGALRM doesn't come in a while.</p>\n\n<p>The handler should<br></p>\n\n<ol>\n<li>print the total number of infinite loop completed</li>\n<li>print the time elapsed</li>\n<li>exit(1);</li>\n</ol>\n\n<p>I noticed that signal handler doesn't take customized parameters, so I have a global loop counter.<br>\nMy problem is: How do I get the time elapsed? Do I get that information from the timer? I am not completely understanding the usage of timer.<br>\nAlso the code is printing 1 extra integer (from the loop) after the fprintf call before termination. How to fix that?<br></p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/time.h&gt;\n\nint count = 0;\n\nvoid handler (int code) {\n    fprintf(stderr, \"Reads completed: %d \\n\", count);\n    exit(1);\n}\n\nint main(int argc, char const *argv[])\n{\n    if (argc != 3) {\n        fprintf(stderr, \"Usage: time_reads FILENAME TIMER\\n\");\n        exit(1);\n    }\n\n    FILE *fp;\n    fp = fopen(argv[1], \"rb\");\n    if (fp == NULL) {\n        fprintf(stderr, \"Fail to open file\\n\");\n        exit(1);\n    }\n\n    int i;\n    srand(time(NULL));\n\n    struct sigaction sa;\n    sa.sa_handler = handler;\n    sa.sa_flags = 0;\n    sigemptyset(&amp;sa.sa_mask);\n    sigaction(SIGALRM, &amp;sa, NULL);\n\n    struct itimerval timer;\n    timer.it_value.tv_sec = strtol(argv[2], NULL, 10    );\n    timer.it_value.tv_usec = 0;\n    timer.it_interval.tv_sec = 0;\n    timer.it_interval.tv_usec = 0;\n\n    if (setitimer(0, &amp;timer, NULL) &lt; 0) {\n        fprintf(stderr, \"Fail to set timer\\n\");\n        exit(1);    \n    }\n\n    while(1) {\n        fseek(fp, (rand() % 100) * sizeof(int), SEEK_SET);\n        fread(&amp;i, sizeof(int), 1, fp);\n        printf(\"%d\\n\", i);\n        count++;\n    }\n\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 620, "user_id": 1658543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Fvc8F.png?s=128&g=1", "display_name": "Nils Lindemann", "link": "https://stackoverflow.com/users/1658543/nils-lindemann"}, "edited": false, "score": 6, "creation_date": 1489000819, "post_id": 42680027, "comment_id": 72484349, "body": "im not fluid in C but i believe it assigns <code>z</code> to <code>y</code> and then checks if <code>y</code> is true."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1489000820, "post_id": 42680027, "comment_id": 72484350, "body": "<code>y = z</code> is assignment not comparison!"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 5, "creation_date": 1489000925, "post_id": 42680027, "comment_id": 72484426, "body": "If <code>x</code> is non-zero, it doesn&#39;t do the <code>y = z</code> part, and <code>if</code> body executes.  When <code>x</code> <i>is</i> zero, it does the <code>y = z</code> and if <code>z</code> was non-zero, the <code>if</code> body executes.  The <code>break</code> only happens when both <code>x</code> and <code>z</code> are zero."}, {"owner": {"reputation": 163, "user_id": 4299323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-8QQSPW-vFEs/AAAAAAAAAAI/AAAAAAAAAB8/BBl6jcXyZ0I/photo.jpg?sz=128", "display_name": "Mike B.", "link": "https://stackoverflow.com/users/4299323/mike-b"}, "edited": false, "score": 0, "creation_date": 1489000997, "post_id": 42680027, "comment_id": 72484494, "body": "Yes, I know. This code is from a book, and I&#39;m trying to understand it."}, {"owner": {"reputation": 163, "user_id": 4299323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-8QQSPW-vFEs/AAAAAAAAAAI/AAAAAAAAAB8/BBl6jcXyZ0I/photo.jpg?sz=128", "display_name": "Mike B.", "link": "https://stackoverflow.com/users/4299323/mike-b"}, "edited": false, "score": 0, "creation_date": 1489001057, "post_id": 42680027, "comment_id": 72484520, "body": "Thank you Dimitri, It&#39;s all clear now."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 13, "creation_date": 1489001090, "post_id": 42680027, "comment_id": 72484547, "body": "If your book <i>really</i> has <code>void main()</code> time to throw out that book."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1489001424, "post_id": 42680027, "comment_id": 72484740, "body": "@Chad why is it bad to have <code>void main()</code>  ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 12, "creation_date": 1489001507, "post_id": 42680027, "comment_id": 72484784, "body": "@TonyTannous Because main <b>always</b> returns an <code>int</code>."}, {"owner": {"reputation": 16152, "user_id": 205233, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd3b79356ba4ea1f7e8d6be783446e59?s=128&d=identicon&r=PG&f=1", "display_name": "Filburt", "link": "https://stackoverflow.com/users/205233/filburt"}, "edited": false, "score": 0, "creation_date": 1489001553, "post_id": 42680027, "comment_id": 72484816, "body": "I think this example only exists to throw off the javascript kids."}, {"owner": {"reputation": 622, "user_id": 5648269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cd1032af3f0fc4bc46331c2095290b?s=128&d=identicon&r=PG&f=1", "display_name": "noel zubin", "link": "https://stackoverflow.com/users/5648269/noel-zubin"}, "edited": false, "score": 0, "creation_date": 1489001570, "post_id": 42680027, "comment_id": 72484824, "body": "<code>||</code>  is a conditional <code>or</code> it will execute the statement on the right only if the first condition is false."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1489001637, "post_id": 42680027, "comment_id": 72484868, "body": "@TonyTannous <code>main</code> is the one C function that does not <i>have to</i> explicitly return a value. Please read <a href=\"http://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c\">What should main() return in C and C++?</a>"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489001766, "post_id": 42680027, "comment_id": 72484962, "body": "@WeatherVane, Chad this is why I love being on StackOverflow. I learn everyday things I didn&#39;t know. Thanks guys!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1489002001, "post_id": 42680027, "comment_id": 72485084, "body": "@TonyTannous me too: Weather Vane, aged 105 3/4 .... if <code>main</code> returns at all, which in embedded it won&#39;t if there is nowhere to return <i>to</i>."}, {"owner": {"reputation": 716, "user_id": 2899410, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/38ef66d5b80ab60e7a8e9c29e3bd3493?s=128&d=identicon&r=PG&f=1", "display_name": "Dadan", "link": "https://stackoverflow.com/users/2899410/dadan"}, "edited": false, "score": 0, "creation_date": 1489043304, "post_id": 42680027, "comment_id": 72500560, "body": "Is this what we call short-circuiting of C?"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1489047794, "post_id": 42680027, "comment_id": 72502942, "body": "@SouravGhosh: To be fair, debuggers are not necessarily that great at showing the inner workings of single expressions."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1489048748, "post_id": 42680027, "comment_id": 72503556, "body": "@MatthieuM. Maybe you&#39;re right but that is not a reason to stop me or anybody from trying at least. :) For further confusions, we are anyways here."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1489049568, "post_id": 42680027, "comment_id": 72504071, "body": "@SouravGhosh: I agree, it&#39;s always better to try to debug first, but in this particular case I&#39;m afraid it won&#39;t be very helpful."}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1489126818, "post_id": 42680027, "comment_id": 72544027, "body": "@NathanOliver C99 5.1.2.2.1 &quot;It shall be defined with a return type of int ... or in some other implementation-defined manner.&quot; The book may be for some implementation that defines main to return void?"}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489127317, "post_id": 42680027, "comment_id": 72544241, "body": "@NathanOliver In addition &quot;In a freestanding environment (in which C program execution may take place without any benefit of an operating system), the name and type of the function called at program startup are implementation-defined.&quot; It is also possible the book regards programming for some embedded freestanding environment."}], "answers": [{"comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1489001353, "post_id": 42680168, "comment_id": 72484701, "body": "Ah now I see :). Ok, you should elaborate for OP."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1489004913, "post_id": 42680168, "comment_id": 72486712, "body": "Please do not preach for <code>void main()</code>."}], "tags": [], "owner": {"reputation": 2532, "user_id": 6756852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SLhoO.jpg?s=128&g=1", "display_name": "Adrian Bobrowski", "link": "https://stackoverflow.com/users/6756852/adrian-bobrowski"}, "is_accepted": false, "score": 7, "last_activity_date": 1489011506, "last_edit_date": 1489011506, "creation_date": 1489001022, "answer_id": 42680168, "question_id": 42680027, "link": "https://stackoverflow.com/questions/42680027/how-does-ifx-y-z-work/42680168#42680168", "title": "How does &#39;if((x) || (y=z))&#39; work?", "body": "<pre><code>int main()\n{\n    int x = 3;\n    int y = 2;\n    int z = 3;\n    unsigned int i;\n\n    for (i = 0; i &lt; 10; i++)\n        if (x != 0) {\n            x = x-1;\n            z = z-1;\n        } \n        else {\n            y = z;\n\n            if (y != 0) {\n                x = x-1;\n                z = z-1;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    printf(\"%d %d %d\", x, y, z);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1216, "user_id": 2252948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb6114307bc12f710bf50ed7b929aa0?s=128&d=identicon&r=PG", "display_name": "AnthonyD973", "link": "https://stackoverflow.com/users/2252948/anthonyd973"}, "is_accepted": false, "score": 31, "last_activity_date": 1489420863, "last_edit_date": 1489420863, "creation_date": 1489001026, "answer_id": 42680171, "question_id": 42680027, "link": "https://stackoverflow.com/questions/42680027/how-does-ifx-y-z-work/42680171#42680171", "title": "How does &#39;if((x) || (y=z))&#39; work?", "body": "<p>Let's decompose that into smaller bits.</p>\n\n<ol>\n<li><p><code>if (x)</code> is the same as <code>if (x != 0)</code>. If <code>x != 0</code>, then you know the condition is <code>true</code>, so you don't do the other portion of the <code>if</code>.</p></li>\n<li><p>If part 1. was <code>false</code>, then <code>y = z</code> assigns <code>z</code> into <code>y</code> and returns the final value of <code>y</code>.</p></li>\n<li><p>From point 2., we can understand that <code>if (y = z)</code> is equivalent to <code>y = z; if (y != 0)</code></p></li>\n</ol>\n\n<hr>\n\n<p>Thus, from points 1. and 3., we can understand that :</p>\n\n<pre><code>if ((x) || (y = z)) {\n    doSomething();\n}\nelse {\n    doSomethingElse();\n}\n</code></pre>\n\n<p>Is the same as :</p>\n\n<pre><code>if (x != 0) {\n    doSomething();\n}\nelse {\n    y = z;\n    if (y != 0) {\n        doSomething();\n    }\n    else {\n        doSomethingElse();\n    }\n}\n</code></pre>\n\n<p>It's true it's not particularly readable code though.</p>\n"}, {"tags": [], "owner": {"reputation": 6058, "user_id": 1952500, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd15d38fd1e508e6c2bcad9e153e789d?s=128&d=identicon&r=PG", "display_name": "user1952500", "link": "https://stackoverflow.com/users/1952500/user1952500"}, "is_accepted": false, "score": 3, "last_activity_date": 1489001065, "creation_date": 1489001065, "answer_id": 42680186, "question_id": 42680027, "link": "https://stackoverflow.com/questions/42680027/how-does-ifx-y-z-work/42680186#42680186", "title": "How does &#39;if((x) || (y=z))&#39; work?", "body": "<p>In C, there is <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">short-circuiting</a>, so the statement <code>y=z</code> will not be evaluated until <code>x</code> becomes zero.</p>\n\n<p>When <code>x == 0</code>, since <code>z</code> also decrements the same way, <code>z == 0</code>. Hence <code>y</code> will also be zero at that time due to the assignment. The statement <code>y=z</code> also returns <code>y</code> at this point which will be evaluated as a condition, and since that is also <code>0</code>, the <code>else break</code> will be hit.</p>\n\n<p>Hence I believe the answer should be <code>0 0 0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1489001337, "post_id": 42680200, "comment_id": 72484694, "body": "<code>(y = z)</code> is only executed when <code>x == 0</code>."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1489001380, "post_id": 42680200, "comment_id": 72484716, "body": "@WeatherVane Correct. Clarified."}, {"owner": {"reputation": 1216, "user_id": 2252948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb6114307bc12f710bf50ed7b929aa0?s=128&d=identicon&r=PG", "display_name": "AnthonyD973", "link": "https://stackoverflow.com/users/2252948/anthonyd973"}, "edited": false, "score": 1, "creation_date": 1489001459, "post_id": 42680200, "comment_id": 72484757, "body": "Your answer is even better than mine! \u2665 the English translation. I&#39;ll remember that for future explanations."}, {"owner": {"reputation": 6058, "user_id": 1952500, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd15d38fd1e508e6c2bcad9e153e789d?s=128&d=identicon&r=PG", "display_name": "user1952500", "link": "https://stackoverflow.com/users/1952500/user1952500"}, "edited": false, "score": 1, "creation_date": 1489001663, "post_id": 42680200, "comment_id": 72484886, "body": "There is a slight error here. The statement should read: if <code>x</code> <b>IS</b> 0, set <code>y</code> to <code>z</code> and check if <code>y</code> isn&#39;t 0"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 6058, "user_id": 1952500, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd15d38fd1e508e6c2bcad9e153e789d?s=128&d=identicon&r=PG", "display_name": "user1952500", "link": "https://stackoverflow.com/users/1952500/user1952500"}, "edited": false, "score": 0, "creation_date": 1489001791, "post_id": 42680200, "comment_id": 72484976, "body": "@user1952500 Thanks. Corrected."}, {"owner": {"reputation": 6348, "user_id": 4768433, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4NgfY.jpg?s=128&g=1", "display_name": "Shaggy", "link": "https://stackoverflow.com/users/4768433/shaggy"}, "edited": false, "score": 0, "creation_date": 1489042998, "post_id": 42680200, "comment_id": 72500426, "body": "Your last line should read &quot;if <code>x</code> is zero <b>and</b> <code>y</code> is zero ... &quot;."}, {"owner": {"reputation": 4604, "user_id": 711006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/332d86b71d1ba573668d6620e2121a37?s=128&d=identicon&r=PG", "display_name": "Melebius", "link": "https://stackoverflow.com/users/711006/melebius"}, "edited": false, "score": 0, "creation_date": 1489049633, "post_id": 42680200, "comment_id": 72504111, "body": "I find \u201cthe following code\u201d a bit misleading. Does it mean the following part of the expression? Or the body of the if-statement? (The latter is true, of course.)"}], "tags": [], "owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "is_accepted": false, "score": 18, "last_activity_date": 1489002162, "last_edit_date": 1489002162, "creation_date": 1489001115, "answer_id": 42680200, "question_id": 42680027, "link": "https://stackoverflow.com/questions/42680027/how-does-ifx-y-z-work/42680200#42680200", "title": "How does &#39;if((x) || (y=z))&#39; work?", "body": "<p>No. <code>if ((x) || (y = z)) {</code>\nin C-English is basically:</p>\n\n<ul>\n<li>if <code>x</code> is nonzero, evaluate the following code.</li>\n<li>if <code>x</code> is zero, set <code>y</code> to <code>z</code>.</li>\n<li>if <code>y</code> is nonzero, evaluate the following code.</li>\n<li>otherwise, break out of the loop.</li>\n</ul>\n\n<p>If <code>x</code> is zero or <code>y</code> is zero, it breaks out of the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 7054387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-6bDjhl9WjJI/AAAAAAAAAAI/AAAAAAAAAA0/HLJVVOTCc1Q/photo.jpg?sz=128", "display_name": "Fatemeh Karimi", "link": "https://stackoverflow.com/users/7054387/fatemeh-karimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1533145919, "last_edit_date": 1533145919, "creation_date": 1489597954, "answer_id": 42816429, "question_id": 42680027, "link": "https://stackoverflow.com/questions/42680027/how-does-ifx-y-z-work/42816429#42816429", "title": "How does &#39;if((x) || (y=z))&#39; work?", "body": "<p>When you use assignment in an if statement, the result of the assignment is returned. so when you write :</p>\n\n<pre><code>if (x = y)\n</code></pre>\n\n<p>It will be always true unless the value of <code>y</code> is <code>0</code>, so <code>0</code> is returned as the result of assigning and the if statement is not executed.(anything except <code>0</code> is considered as true.)</p>\n\n<p>So when you write :</p>\n\n<pre><code>if ( x || (x = y))\n</code></pre>\n\n<p>The if statement doesn't execute only if <code>x</code> is <code>0</code> &amp; <code>y</code> is <code>0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 851, "user_id": 2341861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2e757bc5bed1b0b00e2848d7d3b022?s=128&d=identicon&r=PG", "display_name": "anis programmer", "link": "https://stackoverflow.com/users/2341861/anis-programmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1491387457, "creation_date": 1491387457, "answer_id": 43228287, "question_id": 42680027, "link": "https://stackoverflow.com/questions/42680027/how-does-ifx-y-z-work/43228287#43228287", "title": "How does &#39;if((x) || (y=z))&#39; work?", "body": "<p>Here </p>\n\n<pre><code>if ((x) || (y = z))\n</code></pre>\n\n<p>there are two condition\none condition is \n<code>if ((x))</code> and another condition is <code>if ((y = z))</code> \nif one of them is true then if portion is execute otherwise else condition work</p>\n\n<ul>\n<li>only and only when both condition are false then else execute.</li>\n</ul>\n"}], "owner": {"reputation": 163, "user_id": 4299323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-8QQSPW-vFEs/AAAAAAAAAAI/AAAAAAAAAB8/BBl6jcXyZ0I/photo.jpg?sz=128", "display_name": "Mike B.", "link": "https://stackoverflow.com/users/4299323/mike-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7246, "favorite_count": 2, "answer_count": 6, "score": 8, "last_activity_date": 1533145919, "creation_date": 1489000598, "last_edit_date": 1489004984, "question_id": 42680027, "link": "https://stackoverflow.com/questions/42680027/how-does-ifx-y-z-work", "title": "How does &#39;if((x) || (y=z))&#39; work?", "body": "<p>I don't quite understand how the if statement in this case works. It evaluates the <code>x != 0</code> statement and when that is not true anymore, it assigns <code>z</code> to <code>y</code> and then <code>break</code>s the if statement?</p>\n\n<pre><code>int main()\n{\n    int x, y, z, i;\n    x = 3;\n    y = 2;\n    z = 3;\n\n    for (i = 0; i &lt; 10; i++) {\n        if ((x) || (y = z)) {\n            x--;\n            z--;\n        } else {\n            break;\n        }\n    }\n\n    printf(\"%d %d %d\", x, y, z);\n}\n</code></pre>\n"}, {"tags": ["c", "matlab", "matlab-compiler", "codegen"], "comments": [{"owner": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "edited": false, "score": 0, "creation_date": 1489000573, "post_id": 42679666, "comment_id": 72484216, "body": "Is <code>h</code> an array of <code>struct</code>s?"}, {"owner": {"reputation": 803, "user_id": 1699003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f04cce69add362c6f25602998465ba30?s=128&d=identicon&r=PG", "display_name": "noobuntu", "link": "https://stackoverflow.com/users/1699003/noobuntu"}, "reply_to_user": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "edited": false, "score": 0, "creation_date": 1489000936, "post_id": 42679666, "comment_id": 72484436, "body": "@Suever It is an array of doubles"}, {"owner": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "edited": false, "score": 0, "creation_date": 1489001579, "post_id": 42679666, "comment_id": 72484831, "body": "Does explicitly changing <code>h</code> to <code>double(h)</code> resolve the issue?"}, {"owner": {"reputation": 803, "user_id": 1699003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f04cce69add362c6f25602998465ba30?s=128&d=identicon&r=PG", "display_name": "noobuntu", "link": "https://stackoverflow.com/users/1699003/noobuntu"}, "reply_to_user": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "edited": false, "score": 0, "creation_date": 1489002448, "post_id": 42679666, "comment_id": 72485344, "body": "I tried something like: <code>h1 = [double(h) zeros(1,Nfft-mod(coh,Nfft))];</code> which doesn&#39;t work. Is that what you meant?"}], "answers": [{"tags": [], "owner": {"reputation": 803, "user_id": 1699003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f04cce69add362c6f25602998465ba30?s=128&d=identicon&r=PG", "display_name": "noobuntu", "link": "https://stackoverflow.com/users/1699003/noobuntu"}, "is_accepted": true, "score": 2, "last_activity_date": 1489008591, "creation_date": 1489008591, "answer_id": 42682251, "question_id": 42679666, "link": "https://stackoverflow.com/questions/42679666/codegen-error-conversion-to-struct-from-double-is-not-possible/42682251#42682251", "title": "codegen error: Conversion to struct from double is not possible", "body": "<p>Found the solution!</p>\n\n<p>When using coder.load, the .MAT file is imported as an array structure. So, in my code, I was trying to concatenate a structure with an array of doubles.</p>\n\n<p>The solution to this was the way that I was loading the .MAT file:</p>\n\n<p>old way:</p>\n\n<pre><code>h = coder.load('my_file.mat', 'my_file_var1');\n</code></pre>\n\n<p>new way:</p>\n\n<pre><code>tmp = coder.load('my_file.mat');\nh = tmp.my_file_var1;\n</code></pre>\n\n<p>Then I was able to use <code>h</code> as an array of doubles.</p>\n"}], "owner": {"reputation": 803, "user_id": 1699003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f04cce69add362c6f25602998465ba30?s=128&d=identicon&r=PG", "display_name": "noobuntu", "link": "https://stackoverflow.com/users/1699003/noobuntu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 42682251, "answer_count": 1, "score": 1, "last_activity_date": 1489008591, "creation_date": 1488999469, "last_edit_date": 1489004329, "question_id": 42679666, "link": "https://stackoverflow.com/questions/42679666/codegen-error-conversion-to-struct-from-double-is-not-possible", "title": "codegen error: Conversion to struct from double is not possible", "body": "<p>I am trying to convert Matlab legacy code into a C program. I went though the usual flows, but am having a build error that I do not understand:</p>\n\n<pre><code>Nfft = 8;\n[~,coh] = size(h); // h = array of 168 elements;\ndisplay(coh); // displays 168\nif mod(coh,Nfft)~=0,  \n    h1 = [h zeros(1,Nfft-mod(coh,Nfft))];\nelse \n    h1 = h;\nend\n</code></pre>\n\n<p>This works as expected in Matlab. But when I run it through codegen (after removing the display), I get an error at the line <code>h1 = [h zeros(1,Nfft-mod(coh,Nfft))];</code> with the error message:</p>\n\n<blockquote>\n  <p>Conversion to struct from double is not possible.</p>\n</blockquote>\n\n<p>I realize that in the matlab code, it doesn't go through this part of the code. (since 168%8 == 0). </p>\n\n<p>Any ideas how to fix this?</p>\n\n<p>EDIT: After some investigating, I realize that I am reading in <code>h</code> from a .mat file and this may be the reason. Is data read in from a .mat file considered to be a structure? If this is the case, then maybe I need to convert each element to a double first? Seems kind of hacky..</p>\n"}, {"tags": ["c", "arrays", "unions"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 4, "creation_date": 1488999530, "post_id": 42679621, "comment_id": 72483602, "body": "Create a union of the two unions?"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1489000408, "last_edit_date": 1489000408, "creation_date": 1488999931, "answer_id": 42679814, "question_id": 42679621, "link": "https://stackoverflow.com/questions/42679621/storing-similar-unions-in-an-array-in-c/42679814#42679814", "title": "Storing similar unions in an array in C", "body": "<p>You cannot directly store objects of your types <code>opWord</code> and <code>immediate</code> in the same array.  You cannot declare such an array, and if you try to wrangle it with pointer casting and / or dynamically-allocated space then you run up against the strict aliasing rule.</p>\n\n<p>What you <em>can</em> do is create a <code>union</code> type with an <code>opWord</code> and an <code>immediate</code> as members, and make an array of that type, as @jxh suggested in comments.  In its simplest, most concise form, that might look like this:</p>\n\n<pre><code>union {\n    opWord op;\n    immediate imm;\n} instructions[1000];\n</code></pre>\n\n<p>You could also consider merging your two union types into one, and creating an array of that type:</p>\n\n<pre><code>union instruction {\n    struct {\n        unsigned short ARE : 2;\n        unsigned short opDest : 2;\n        unsigned short opSource : 2;\n        unsigned short opcode : 4;\n        unsigned short group : 2;\n        unsigned short unused : 3;\n    } opWord;\n    struct {\n        unsigned short ARE : 2;\n        unsigned short imm : 13;\n    } immediate;\n    unsigned short fullReg;\n};\n\nunion instruction instructions[1000];\n</code></pre>\n\n<p>That reduces the number of layers involved, which may be useful, at the cost of losing separate types for your two kinds of instructions.</p>\n"}], "owner": {"reputation": 39, "user_id": 6692972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f17e296b19627b2248882e152e94949e?s=128&d=identicon&r=PG&f=1", "display_name": "Avishai Fuss ", "link": "https://stackoverflow.com/users/6692972/avishai-fuss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489000408, "creation_date": 1488999307, "last_edit_date": 1489000252, "question_id": 42679621, "link": "https://stackoverflow.com/questions/42679621/storing-similar-unions-in-an-array-in-c", "title": "Storing similar unions in an array in C", "body": "<p>I have one union defined like this:</p>\n\n<pre><code>typedef union opWord\n{\n    struct\n    {\n        unsigned short ARE : 2;\n        unsigned short opDest : 2;\n        unsigned short opSource : 2;\n        unsigned short opcode : 4;\n        unsigned short group : 2;\n        unsigned short unused : 3;\n    } word;\n    unsigned short fullReg;\n} opWord;\n</code></pre>\n\n<p>and another very similar one only differing by bitfield arrangement:</p>\n\n<pre><code>typedef union immediate\n{\n    struct\n    {\n        unsigned short ARE : 2;\n        unsigned short imm : 13;\n    } word;\n    unsigned short fullReg;\n} immediate;\n</code></pre>\n\n<p>Can these be stored in the same array somehow since they only vary by the arrangement of the bits?</p>\n\n<p>Something like </p>\n\n<pre><code>opWord instructions[1000]?\n</code></pre>\n\n<p>If not, is there a way to do it as a linked list?\nHow would I declare pointers for that?</p>\n"}, {"tags": ["c", "powershell"], "comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1488999464, "post_id": 42679607, "comment_id": 72483566, "body": "<code>lower</code> is not initialized. So <code>fahr</code> may be greater then <code>upper</code> and the loop is skipped."}, {"owner": {"reputation": 439, "user_id": 3046635, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/76d5738f9f26d5bc3b4028deed8473e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mdomin45", "link": "https://stackoverflow.com/users/3046635/mdomin45"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1488999527, "post_id": 42679607, "comment_id": 72483599, "body": "That won&#39;t change anything and it doesn&#39;t need to be because it&#39;s in the main scope. It&#39;s set to 0 by default, and that&#39;s what it is meant to be."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1488999677, "post_id": 42679607, "comment_id": 72483683, "body": "Try with <code>int lower = 0, step = 20, upper = 300;</code> instead."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1488999685, "post_id": 42679607, "comment_id": 72483686, "body": "It&#39;s not set to 0 by default. Variables that are not inside a function are 0 by default. Inside main is inside a function."}, {"owner": {"reputation": 439, "user_id": 3046635, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/76d5738f9f26d5bc3b4028deed8473e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mdomin45", "link": "https://stackoverflow.com/users/3046635/mdomin45"}, "edited": false, "score": 0, "creation_date": 1488999726, "post_id": 42679607, "comment_id": 72483711, "body": "I tried initializing lower to 0. Nothing changes.  EDIT: You are both correct. That was the problem. I just forgot to recompile."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1489000148, "post_id": 42679607, "comment_id": 72483954, "body": "It works just fine, <a href=\"https://ideone.com/w4kNF6\" rel=\"nofollow noreferrer\">with minor changes</a>."}], "owner": {"reputation": 439, "user_id": 3046635, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/76d5738f9f26d5bc3b4028deed8473e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mdomin45", "link": "https://stackoverflow.com/users/3046635/mdomin45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488999246, "creation_date": 1488999246, "question_id": 42679607, "link": "https://stackoverflow.com/questions/42679607/output-from-c-program-missing-with-powershell", "title": "Output from C Program missing with Powershell", "body": "<p>I realize that many similar questions have been answered before, but I can only find solutions for Unix systems and I'm using Powershell in Windows with MinGW. </p>\n\n<p>I know my path is set properly because my Hello World program will give output, but this program does not:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n  float fahr, celsius;\n  int lower, step, upper;\n\n  upper = 300;\n  step = 20;\n  fahr = lower;\n\n  while (fahr &lt;= upper) {\n    celsius = (5.0/9.0) * (fahr - 32.0);\n    printf (\"%3.0f %6.1f\\n\", fahr, celsius);\n    fahr += step;\n  }\n\n}\n</code></pre>\n\n<p>No output is shown when I run the executable produced by MinGW; it just proceeds to the next line in Powershell. I've seen answers that claim you need to use ctrl-D to simulate EOF, but this is just for Unix systems. I have seen people say that ctrl-Z works for Windows, but that does not work in this case.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488999025, "post_id": 42679391, "comment_id": 72483314, "body": "<code>if(table[hashVal] == NULL) { ... &#47;* add *&#47; table[hashVal]-&gt;next = NULL; }</code>"}, {"owner": {"reputation": 522, "user_id": 2507710, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1972bd20155bc8fd9a5377136ccc13a?s=128&d=identicon&r=PG&f=1", "display_name": "online.0227", "link": "https://stackoverflow.com/users/2507710/online-0227"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488999342, "post_id": 42679391, "comment_id": 72483504, "body": "@BLUEPIXY that didn&#39;t work sorry."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1488999434, "post_id": 42679391, "comment_id": 72483552, "body": "That&#39;s one of problems."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1488999510, "post_id": 42679391, "comment_id": 72483587, "body": "<code>table = (SinglyLinkedList**)malloc(sizeof(SinglyLinkedList*));</code> --&gt; <code>table = (SinglyLinkedList**)malloc(tableSize*sizeof(SinglyLinkedList&zwnj;&#8203;*));</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1489000338, "post_id": 42679391, "comment_id": 72484063, "body": "Also You need <code>ptr-&gt;next-&gt;next = NULL;</code> at else-block, off course."}, {"owner": {"reputation": 522, "user_id": 2507710, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1972bd20155bc8fd9a5377136ccc13a?s=128&d=identicon&r=PG&f=1", "display_name": "online.0227", "link": "https://stackoverflow.com/users/2507710/online-0227"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1489000547, "post_id": 42679391, "comment_id": 72484202, "body": "tried all of your suggestions but still not fixed"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1489001185, "post_id": 42679391, "comment_id": 72484597, "body": "After that it seems to be only a blank line problem.  <a href=\"http://ideone.com/75FgEg\" rel=\"nofollow noreferrer\">DEMO</a>"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1489003581, "post_id": 42679391, "comment_id": 72485979, "body": "Should be a relatively simple matter to solve if you execute the code in a debugger and look at the data that is being stored and retrieved."}], "answers": [{"comments": [{"owner": {"reputation": 522, "user_id": 2507710, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1972bd20155bc8fd9a5377136ccc13a?s=128&d=identicon&r=PG&f=1", "display_name": "online.0227", "link": "https://stackoverflow.com/users/2507710/online-0227"}, "edited": false, "score": 0, "creation_date": 1489078091, "post_id": 42690765, "comment_id": 72523904, "body": "Thank you very much, i got the problem"}], "tags": [], "owner": {"reputation": 762, "user_id": 5456631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac7baf0c7db5e866813487fca4202ff?s=128&d=identicon&r=PG&f=1", "display_name": "Muntasir", "link": "https://stackoverflow.com/users/5456631/muntasir"}, "is_accepted": true, "score": 2, "last_activity_date": 1489049741, "last_edit_date": 1495541385, "creation_date": 1489049741, "answer_id": 42690765, "question_id": 42679391, "link": "https://stackoverflow.com/questions/42679391/unexpected-output-triggered-by-trailing-whitespace-during-c-language-i-o/42690765#42690765", "title": "Unexpected Output Triggered by Trailing Whitespace During C-language I/O", "body": "<p>Let me explain what happened here.</p>\n\n<p>When you add 10 blank lines at the end of your input file, the file becomes something like this:</p>\n\n<pre><code>// previous contents of the file\nJesse Boster\n88\n29\n'\\n'\n'\\n'\n'\\n'\n'\\n'\n'\\n'\n'\\n'\n'\\n'\n'\\n'\n'\\n'\n'\\n'\n</code></pre>\n\n<p>Then because you are reading the line and making a table record from 3 lines at a time - as a result, you are getting 3 additional record in the table (as <code>3*3=9</code>; the remaining 1 line can't form a table record).</p>\n\n<p>Now the answer about how <code>88</code> and <code>29</code> are inserted in the table.</p>\n\n<p>You have used 3 <code>fgets</code> in one iteration of the <code>while</code> loop. The first one is to get the names - which is a string; the remaining two are for values - which are <code>int</code>s.</p>\n\n<p>When encountering blank lines, after executing each <code>fgets</code>, <code>s = \"\\n\"</code>. For the first <code>fgets</code>, you manually converted <code>s</code> and made <code>s = \"\"</code>.</p>\n\n<p>But for the remaining cases, you tried to get integer from <code>s = \"\\n\"</code> and failed. This resulted a garbage value getting inserted in <code>temp-&gt;mid</code> and <code>temp-&gt;final</code>; and in this case, the values are the last successful <code>int</code> values read from the file.</p>\n\n<p>Now about ignoring blank lines in input file; you can check whether <code>s = \"\\n\"</code> after <code>fgets</code>. Then your code will become something like this (<a href=\"https://stackoverflow.com/questions/26052014/fgets-skip-the-blank-line\">Reference</a>):</p>\n\n<pre><code>/* previous parts of the code */\nwhile(fgets(s, sizeof(s), file) != NULL) {\n\n    if(strcmp(s,\"\\n\") == 0) // or: if(s[0] == '\\n')\n        continue;\n\n    /* remaining part of the while loop */\n\n} // end of while loop\n\n/* remaining part of the code */\n</code></pre>\n"}], "owner": {"reputation": 522, "user_id": 2507710, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1972bd20155bc8fd9a5377136ccc13a?s=128&d=identicon&r=PG&f=1", "display_name": "online.0227", "link": "https://stackoverflow.com/users/2507710/online-0227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 42690765, "answer_count": 1, "score": 0, "last_activity_date": 1489049741, "creation_date": 1488998508, "last_edit_date": 1488999159, "question_id": 42679391, "link": "https://stackoverflow.com/questions/42679391/unexpected-output-triggered-by-trailing-whitespace-during-c-language-i-o", "title": "Unexpected Output Triggered by Trailing Whitespace During C-language I/O", "body": "<p>I am reading the following file:</p>\n\n<p><strong>records.txt:</strong></p>\n\n<pre><code>John Smith\n10\n20\nMichael J Smith\n15\n20\nGlennie Macarthur\n30\n40\nMelia Ramsburg\n23\n45\nWallace Weiss\n49\n23\nEmmy Rodi\n50\n90\nShaunta Sinkfield\n29\n85\nLyndsay Riser\n79\n68\nLeilani Weldy\n14\n95\nJason Roye\n59\n67\nGerman Hoy\n43\n68\nJesse Boster\n88\n29\n</code></pre>\n\n<p>...with the code....</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct SinglyLinkedList {\n    struct SinglyLinkedList *next;\n    char name[50];\n    int mid;\n    int final;\n} SinglyLinkedList;\n\nint tableSize;\n\nint hashFunction(char *s) {\n    int hashValue;\n    for(hashValue = 0; *s != '\\0'; s++) {\n        hashValue += *s;\n    }\n    return hashValue % tableSize;\n}\n\nint main() {\n    int i,j,k, found, distance, hashVal;\n    SinglyLinkedList **table;\n    SinglyLinkedList *temp, *ptr;\n    FILE *file;\n    char s[50];\n\n    // get table size from user\n    fgets(s, sizeof(s), stdin);\n    sscanf(s, \"%d\", &amp;tableSize);\n\n    // initialize pointer\n    table = (SinglyLinkedList**)malloc(sizeof(SinglyLinkedList*));\n    for(i=0; i&lt;tableSize; i++) {\n        table[i] = NULL;\n    }\n\n    //get data from file\n    file = fopen(\"records.txt\", \"r\");\n    while(fgets(s, sizeof(s), file) != NULL) {\n        temp = (SinglyLinkedList*)malloc(sizeof(SinglyLinkedList));\n        s[strlen(s)-1] = '\\0';\n        strcpy(temp-&gt;name, s);\n\n        fgets(s, sizeof(s), file); sscanf(s, \"%d\", &amp;(temp-&gt;mid));\n        fgets(s, sizeof(s), file); sscanf(s, \"%d\", &amp;(temp-&gt;final));\n\n        hashVal = hashFunction(temp-&gt;name);\n\n        if(table[hashVal] == NULL) {\n            table[hashVal] = (SinglyLinkedList*)malloc(sizeof(SinglyLinkedList));\n            strcpy(table[hashVal]-&gt;name, temp-&gt;name);\n            table[hashVal]-&gt;mid = temp-&gt;mid; \n            table[hashVal]-&gt;final = temp-&gt;final;\n        } else {\n            ptr = table[hashVal];\n            while(ptr-&gt;next != NULL) ptr = ptr-&gt;next;\n            ptr-&gt;next = (SinglyLinkedList*)malloc(sizeof(SinglyLinkedList));\n            strcpy(ptr-&gt;next-&gt;name, temp-&gt;name);\n            ptr-&gt;next-&gt;mid = temp-&gt;mid; ptr-&gt;next-&gt;final = temp-&gt;final;\n        }\n\n        free(temp);\n\n\n    } // end of while\n\n// display whole data in Linked List\n    for(i=0; i&lt;tableSize; i++) {\n        ptr = table[i];\n\n        while(ptr != NULL) {\n            printf(\"%d : %s, %d, %d\\n\", i, ptr-&gt;name, ptr-&gt;mid, ptr-&gt;final);\n            ptr = ptr-&gt;next;\n        }\n    }\n\n} \n</code></pre>\n\n<p>The expected output is:</p>\n\n<pre><code>0 : Melia Ramsburg, 23, 45\n1 : Michael J Smith, 15, 20\n1 : Leilani Weldy, 14, 95\n1 : Jesse Boster, 88, 29\n2 : Wallace Weiss, 49, 23\n2 : Shaunta Sinkfield, 29, 85\n3 : John Smith, 10, 20\n3 : Glennie Macarthur, 30, 40\n3 : Emmy Rodi, 50, 90\n3 : German Hoy, 43, 68\n4 : Lyndsay Riser, 79, 68\n4 : Jason Roye, 59, 67\n</code></pre>\n\n<p>However, if I put trailing lines of whitespace(like 10 blank lines after 29 in the end of file) at the end of the input file the following unexpected output occurs:</p>\n\n<pre><code>0 : Melia Ramsburg, 23, 45\n0 : , 88, 29\n0 : , 88, 29\n0 : , 88, 29\n1 : Michael J Smith, 15, 20\n1 : Leilani Weldy, 14, 95\n1 : Jesse Boster, 88, 29\n2 : Wallace Weiss, 49, 23\n2 : Shaunta Sinkfield, 29, 85\n3 : John Smith, 10, 20\n3 : Glennie Macarthur, 30, 40\n3 : Emmy Rodi, 50, 90\n3 : German Hoy, 43, 68\n4 : Lyndsay Riser, 79, 68\n4 : Jason Roye, 59, 67\n</code></pre>\n\n<p>What's going wrong (where does the <code>88</code> come from?) and how can I ignore blank lines in the file properly?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1488998662, "post_id": 42679384, "comment_id": 72483100, "body": "What is with the <code>int == 0; for(i == 0; i &lt; argc; i++)</code> ??"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1488998707, "post_id": 42679384, "comment_id": 72483124, "body": "Use <code>isupper</code> in <code>ctype.h</code>. For example: <code>if(isupper(argv[i][0]) ...</code>."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1488998836, "post_id": 42679384, "comment_id": 72483191, "body": "also <code>printf(&quot;%c,argv[i+i]);</code> - <code>argv[i+1]</code> refers to a <code>char[]</code> not a single character"}, {"owner": {"reputation": 258, "user_id": 4133766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300e39108a2b9778965b9e46bae8d42f?s=128&d=identicon&r=PG", "display_name": "Koen", "link": "https://stackoverflow.com/users/4133766/koen"}, "edited": false, "score": 0, "creation_date": 1488998840, "post_id": 42679384, "comment_id": 72483195, "body": "argv[i] would evaluate to an address; the &quot;==&quot; operator is a test, not an assignment"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1488998842, "post_id": 42679384, "comment_id": 72483198, "body": "I suggest you rewind one step, and just print the program arguments. When that is done, approach the acronym problem."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488999104, "post_id": 42679500, "comment_id": 72483348, "body": "a &quot;mybad&quot; for deletion."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488999200, "post_id": 42679500, "comment_id": 72483424, "body": "But still... question says lowercase should be ignored so I would expect to see <code>isupper</code>."}], "tags": [], "owner": {"reputation": 6351, "user_id": 1150462, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/092b20f85f41e56494e4d1fabcb7099c?s=128&d=identicon&r=PG", "display_name": "xuhdev", "link": "https://stackoverflow.com/users/1150462/xuhdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1488999447, "last_edit_date": 1488999447, "creation_date": 1488998826, "answer_id": 42679500, "question_id": 42679384, "link": "https://stackoverflow.com/questions/42679384/c-print-out-the-acronym-based-on-user-input/42679500#42679500", "title": "C print out the acronym based on user input", "body": "<p><code>argv[i]</code> itself is already a string. You should only check its first character and iterate over <code>i</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, char *argv[])\n{\n    for(int i = 1; i &lt; argc; i++)\n    {\n        if(isupper(argv[i][0]))\n            printf(\"%c\", argv[i][0]);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1489000011, "creation_date": 1489000011, "answer_id": 42679839, "question_id": 42679384, "link": "https://stackoverflow.com/questions/42679384/c-print-out-the-acronym-based-on-user-input/42679839#42679839", "title": "C print out the acronym based on user input", "body": "<p>You have some errors with </p>\n\n<pre><code>int == 0;                       // syntax error\nfor(i == 0; i &lt; argc; i++)      // i is not set by a comparison\n</code></pre>\n\n<p>And the code doesn't really do it anyway, please try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char acronym[argc];\n    int index = 0;\n    for(int i = 1; i &lt; argc; i++) {\n        if(isupper(argv[i][0])) {\n            acronym[index] = argv[i][0];\n            index++;\n        }\n    }\n    acronym[index] = '\\0';\n    printf(\"The acronym is %s\\n\", acronym);\n    return 0;\n}\n</code></pre>\n\n<p>Program session:</p>\n\n<pre>\ntest Three Letter better Acronym\nThe acronym is TLA\n</pre>\n"}], "owner": {"reputation": 27, "user_id": 6649568, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/72cc82c856084fdc1b0bdf4eb37cd3b3?s=128&d=identicon&r=PG&f=1", "display_name": "Will Ferguson", "link": "https://stackoverflow.com/users/6649568/will-ferguson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1489393626, "creation_date": 1488998480, "last_edit_date": 1489393626, "question_id": 42679384, "link": "https://stackoverflow.com/questions/42679384/c-print-out-the-acronym-based-on-user-input", "title": "C print out the acronym based on user input", "body": "<p>I am new to Linux and C programming. I have been trying to study command line coding (using nano editor) and been trying to figure out how to make a program that takes one or more command line arguments and prints out the acronym.</p>\n\n<p>My attempt so far:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n  int i = 0;\n  for(i = 0; i &lt; argc; i++)\n  {\n    while(argv[i]!='\\0')\n    {\n      if(argv[i] = ' ')\n      {\n        i++;\n        printf(\"%c,argv[i+i]);\n      }\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "dictionary", "struct", "iar"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1488999333, "post_id": 42679273, "comment_id": 72483497, "body": "First of all each static assignment in the <b>*.h</b> file will be copied as many times as you used it in different cases. Second, it&#39;s not clear what you would like to achieve? Dynamic size of the callback structure? It&#39;s semi-possible if you have a list of functions where you register function at runtime. That&#39;s how plugins are being registered usually."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1488999903, "post_id": 42679273, "comment_id": 72483815, "body": "0andriy, thanks for the reply. This is given from the manufacturer and I am supposed to use it with some alteration. Their Idea of doing this is, use Interface (function pointers) without much worrying about whats happening in the function call. I am playing around inside of it because of the code section optimization."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1489000169, "post_id": 42679273, "comment_id": 72483971, "body": "Your question is not clear. Reduce amount of words and give just simple example: a) what is exists and b) what you would like to achieve."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1489000968, "post_id": 42679273, "comment_id": 72484464, "body": "0andriy, adc_on_g_adc is an interface for my application which gives me access to ADC module. Eg. I use one these function as adc_on_g_adc.open() in my application. Now, If I use one or more functions from the struct, MAP file shows all the function symbols instead of showing symbols for the function used.   Just ignore the Static code, I was experimenting there."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1489001128, "post_id": 42679273, "comment_id": 72484573, "body": "Update the post, please. There is an article how to ask good question."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1489003264, "post_id": 42679273, "comment_id": 72485816, "body": "Updated! Hope its clear now."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1489003527, "post_id": 42679273, "comment_id": 72485951, "body": "The answer is quite simple to your question. The compiler doesn&#39;t know what functions are going to be used. It includes all of them! There are some tricks to avoid this, but in your case the simplest choice (if you have sources of the library you are using) is just cut the functions from the library.  <b>But</b> looking into API I hardly can imagine how you use only <b>one</b> function from it. it doesn&#39;t make any sense."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1489004807, "post_id": 42679273, "comment_id": 72486654, "body": "@0andriy, Thanks for the answer, it makes sense. However, its manual to go end edit the code. Thats not something I am looking for. I want compiler to sense this. If I put all this code in one single file that has main(), the compiler senses it correctly and omits unused ones. Also, I am just taking use of one function as an example, I ll definitely need more."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1489007181, "post_id": 42679273, "comment_id": 72487883, "body": "Yeah, you need some linker tricks. I dunno if LTO helps here, otherwise I doubt that exported variant of functions can be eliminated easily."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "edited": false, "score": 0, "creation_date": 1489005716, "post_id": 42681134, "comment_id": 72487114, "body": "I appreciate you taking time to answer. Pls check my edit in the question. All these code together in one file gives me linker-output I need. Meaning, if I use one function, MAP file has only that function. It just doesn&#39;t work with code scattered in multiple header and source files. In my opinion, its a matter of using right scope or linking option or something I do not know. In any case, I definitely do not want to play with function reference as you are suggesting. There has to be a way for linker to know about unused functions in scattered code as its the case of code in one file"}, {"owner": {"reputation": 6143, "user_id": 2147218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQVSl.jpg?s=128&g=1", "display_name": "bazza", "link": "https://stackoverflow.com/users/2147218/bazza"}, "reply_to_user": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "edited": false, "score": 1, "creation_date": 1489008336, "post_id": 42681134, "comment_id": 72488509, "body": "Putting everything together in one file allows the compiler to recognise that parts of the <code>g_adc_on_adc</code> structure are entirely unused, and can optimise them away. Bit like declaring variables that are unused - the compiler simply does away with them altogether."}, {"owner": {"reputation": 6143, "user_id": 2147218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQVSl.jpg?s=128&g=1", "display_name": "bazza", "link": "https://stackoverflow.com/users/2147218/bazza"}, "reply_to_user": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "edited": false, "score": 0, "creation_date": 1489008588, "post_id": 42681134, "comment_id": 72488640, "body": "However, I&#39;m afraid there is no linking option to do what you want. If you declare <code>g_adc_on_adc</code> with every field assigned to a function and the compiler doesn&#39;t have the opportunity to optimise unused fields away because you have multiple source code files, then the linker has no choice but to include the referenced functions in the resulting executable."}], "tags": [], "owner": {"reputation": 6143, "user_id": 2147218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQVSl.jpg?s=128&g=1", "display_name": "bazza", "link": "https://stackoverflow.com/users/2147218/bazza"}, "is_accepted": true, "score": 1, "last_activity_date": 1489005450, "last_edit_date": 1489005450, "creation_date": 1489004256, "answer_id": 42681134, "question_id": 42679273, "link": "https://stackoverflow.com/questions/42679273/iar-compiler-using-struct-with-function-pointers-map-file-shows-all-the-functi/42681134#42681134", "title": "IAR Compiler: using struct with function pointers, map file shows all the function declared in struct irrespective of function used or not", "body": "<p>If you fill up the structure with function pointers, the functions have been \"used\" so far as the linker is concerned. </p>\n\n<p>Think about it in terms of what the linker is supposed to replace <code>R_ADC_ScanConfigure</code> with. It can't choose to set <code>g_adc_on_adc.scanCfg</code> to NULL, can it? It doesn't know that the object code doesn't actually call <code>g_adc_on_adc.scanCfg</code>. </p>\n\n<p>Basically, it's only option is to include <code>R_ADC_ScanConfigure</code> in the output.</p>\n\n<p>However, if instead of assigning <code>R_ADC_ScanConfigure</code> in the structure <em>you</em> set <code>g_adc_on_adc.scanCfg</code> to NULL, the linker would then be able omit <code>R_ADC_ScanConfigure</code> from the output.</p>\n\n<pre><code>const adc_api_t g_adc_on_adc =\n{\n    .open                   = R_ADC_Open,\n    .scanCfg                = NULL,\n    .infoGet                = R_ADC_InfoGet,\n    .scanStart              = R_ADC_ScanStart,\n    .scanStop               = R_ADC_ScanStop,\n    .scanStatusGet          = R_ADC_CheckScanDone,\n    .sampleStateCountSet    = R_ADC_SetSampleStateCount,\n    .read                   = R_ADC_Read,\n    .close                  = R_ADC_Close,\n    .versionGet             = R_ADC_VersionGet\n};\n</code></pre>\n\n<p>Of course, if your code then did end up calling <code>g_adc_on_adc.scanCfg</code> you'd be trying to run code at address 0 (probably), which would be a very bad thing indeed. You could make <code>.scanCfg</code> point to a function that simply prints up a nasty error message on your console / down your serial port / whatever so that at least you know something has gone wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 5462741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a1f3a0f0ff730d918d96e26b625650?s=128&d=identicon&r=PG&f=1", "display_name": "PNY", "link": "https://stackoverflow.com/users/5462741/pny"}, "is_accepted": false, "score": 0, "last_activity_date": 1518462845, "creation_date": 1518462845, "answer_id": 48753843, "question_id": 42679273, "link": "https://stackoverflow.com/questions/42679273/iar-compiler-using-struct-with-function-pointers-map-file-shows-all-the-functi/48753843#48753843", "title": "IAR Compiler: using struct with function pointers, map file shows all the function declared in struct irrespective of function used or not", "body": "<p>The feature you are looking for is called virtual function elimination and does just what you want but for only for virtual functions in C++. </p>\n\n<p>In your code all the compiler sees is a structure initialized with some pointers to functions. If this structure is global or somehow exported from this module the compiler must assume that all the initialized parts of the structure are used.</p>\n\n<p>When the linker gets hold of all this it sees a reference to the structure, that's all. There is no information there to tell the linker what part of the structure is used.</p>\n\n<p>When you put everything in the same module the compiler can find out what function you actually reference and go there directly, this will leave the structure without references meaning it can be thrown away and with it all the references to the other functions.</p>\n"}], "owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 42681134, "answer_count": 2, "score": 1, "last_activity_date": 1518462845, "creation_date": 1488998139, "last_edit_date": 1518341376, "question_id": 42679273, "link": "https://stackoverflow.com/questions/42679273/iar-compiler-using-struct-with-function-pointers-map-file-shows-all-the-functi", "title": "IAR Compiler: using struct with function pointers, map file shows all the function declared in struct irrespective of function used or not", "body": "<p>I have a struct with 10 function pointers. A global instance of the struct is initialized wit function pointers pointing to local functions. \nIn my application, using any one or more of the function references causes linker to include all 10 functions in the map file.  </p>\n\n<p>In order to save memory, I need linker to include onle those functions that used in the application. Not all the functions referenced in the struct.</p>\n\n<p><strong>Struct in file r_adc_api.h</strong> (from Manufacturer)</p>\n\n<pre><code>typedef struct st_adc_api\n    {\n        ssp_err_t (* open)(adc_ctrl_t * const p_ctrl,  adc_cfg_t const * const      p_cfg);\n        ssp_err_t (* scanCfg)(adc_ctrl_t * const p_ctrl,  adc_channel_cfg_t const * const p_channel_cfg);\n        ssp_err_t (* scanStart)(adc_ctrl_t * const p_ctrl);\n        ssp_err_t (* scanStop)(adc_ctrl_t * const p_ctrl);\n        ssp_err_t (* scanStatusGet)(adc_ctrl_t * const p_ctrl);\n        ssp_err_t (* read)(adc_ctrl_t  * const p_ctrl, adc_register_t const  reg_id,  adc_data_size_t * const p_data);\n        ssp_err_t (* sampleStateCountSet)(adc_ctrl_t * const p_ctrl,  adc_sample_state_t  * p_sample);\n        ssp_err_t (* close)(adc_ctrl_t * const p_ctrl);\n        ssp_err_t (* infoGet) (adc_ctrl_t * const p_ctrl, adc_info_t * const p_adc_info);\n        ssp_err_t (* versionGet)(ssp_version_t * const p_version);\n    } adc_api_t;\n</code></pre>\n\n<p>**Header r_adc.h ** (from Manufacturer)</p>\n\n<pre><code>extern const adc_api_t g_adc_on_adc;\n</code></pre>\n\n<p><strong>Assignment and function definitions is in file r_adc.c</strong> (from Manufacturer)</p>\n\n<pre><code>const adc_api_t g_adc_on_adc =\n{\n    .open                   = R_ADC_Open,\n    .scanCfg                = R_ADC_ScanConfigure,\n    .infoGet                = R_ADC_InfoGet,\n    .scanStart              = R_ADC_ScanStart,\n    .scanStop               = R_ADC_ScanStop,\n    .scanStatusGet          = R_ADC_CheckScanDone,\n    .sampleStateCountSet    = R_ADC_SetSampleStateCount,\n    .read                   = R_ADC_Read,\n    .close                  = R_ADC_Close,\n    .versionGet             = R_ADC_VersionGet\n};\n</code></pre>\n\n<p>and ## Function Definitions ##</p>\n\n<p>** MAP File **\n<a href=\"https://i.stack.imgur.com/U2bDa.jpg\" rel=\"nofollow noreferrer\">MAP file</a></p>\n\n<p>In my Application, if i use adc_on_g_adc.open(...); linker pulls all 10 symbols to the map file instead of just pulling <strong>R_ADC_Open();</strong></p>\n\n<p>What might be causing .map file to pull all the functions from the struct even if one function is called? </p>\n\n<p><strong>Edit:</strong> Putting all these together in one single file gives map file I need. IAR compiler omits unused functions. Just doesn't work when I use multiple header and source. </p>\n"}, {"tags": ["c", "linux", "system-calls", "interrupt-handling"], "comments": [{"owner": {"reputation": 2502, "user_id": 501739, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6b8fa3bc7278508dd85dc6090608f26c?s=128&d=identicon&r=PG", "display_name": "Jolta", "link": "https://stackoverflow.com/users/501739/jolta"}, "edited": false, "score": 0, "creation_date": 1489061141, "post_id": 42679263, "comment_id": 72511933, "body": "Did you check out this question: <a href=\"http://stackoverflow.com/questions/3149175/what-is-the-difference-between-trap-and-interrupt/37558741#37558741\" title=\"what is the difference between trap and interrupt\">stackoverflow.com/questions/3149175/&hellip;</a> Maybe you&#39;ll find the answer there?"}, {"owner": {"reputation": 2502, "user_id": 501739, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6b8fa3bc7278508dd85dc6090608f26c?s=128&d=identicon&r=PG", "display_name": "Jolta", "link": "https://stackoverflow.com/users/501739/jolta"}, "edited": false, "score": 0, "creation_date": 1489061208, "post_id": 42679263, "comment_id": 72511980, "body": "One more thing, it looks like you&#39;ve put two questions into this question. Perhaps you should post them separately.  <a href=\"https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post\" title=\"can i ask only one question per post\">meta.stackexchange.com/questions/222735/&hellip;</a>"}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1489070064, "post_id": 42679263, "comment_id": 72517913, "body": "The tag <a href=\"https://stackoverflow.com/questions/tagged/exception-handling\">exception-handling</a> is generally for C++ type exceptions and not OS &quot;exceptions/traps/faults&quot;, etc.  It is common to call them exceptions; but the terminology often depends on who designed the CPU.  Linux itself tries to be fairly CPU agnostic in the core sections and there are often configurations that will select different core mechanisms to handle exceptions depending on the CPU.  For instance, the mm (memory management) layer is often tied to the &#39;page fault&#39; handler.  The fault can be accessing memory that is swapped or non-existent (bus error)."}], "answers": [{"comments": [{"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1489077753, "post_id": 42697912, "comment_id": 72523672, "body": "If you meant for the question to be x86 specific, then this is a duplicate of <a href=\"http://stackoverflow.com/questions/3149175/what-is-the-difference-between-trap-and-interrupt/37558741#37558741\">Difference between trap and interrupt</a> and if not, the questions are very similar so it is a good idea to look there."}], "tags": [], "owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "is_accepted": true, "score": 2, "last_activity_date": 1489077322, "last_edit_date": 1495541840, "creation_date": 1489069762, "answer_id": 42697912, "question_id": 42679263, "link": "https://stackoverflow.com/questions/42679263/how-are-trap-handlers-exception-handlers-and-interrupt-handlers-different-from/42697912#42697912", "title": "How are trap handlers, exception handlers, and interrupt handlers different from system calls?", "body": "<p>According to <a href=\"https://en.wikipedia.org/wiki/Trap_(computing)\" rel=\"nofollow noreferrer\">wikipedia</a>, a <strong>TRAP</strong> is an exception.  Exceptions are defined differently depending on who you talk to.  In a generic form, interrupts are exceptions.  Exceptions could be a page fault (code or data), an alignment, an undefined instruction, divide by zero, etc.</p>\n\n<p>Generally, they are all very similar.  They will switch context to the OS to handle the issue resulting in registers saves (a user-space to OS context switch) and a possible process context switch depending on the request or circumstance.  When you transition to the OS, different MMU protection (the CPU view of memory) are in effect and a different stack is used.  In most cases, the instruction that caused the <em>fault</em> is the one that was executing when the switch happens.</p>\n\n<p>The interrupt is different in that any user-space instruction could be interrupted.  For most others, there are only specific classes of instructions that may cause a fault.  This has ramification for compilers and libraries that need to do things atomically (to the thread, process or to the system globally).  More details really depend on the CPU in use.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/572942/whats-the-difference-between-c-system-calls-and-c-library-routines\">Difference between library and system calls</a></li>\n</ul>\n\n<hr>\n\n<blockquote>\n  <p>Considering Linux environment, what is the difference between them?</p>\n</blockquote>\n\n<p>This is almost unanswerable in a definite way.  Linux versions, CPU versions and your definition of what these are would influence the answer.  However, I think the above is a good conceptual guide.</p>\n\n<blockquote>\n  <p>How is a system call different from a normal function call?</p>\n</blockquote>\n\n<p>A normal function call doesn't transition to 'kernel space'.  Many access permissions change when entering kernel space.  Usually this has some physical hard wiring into the CPU.  However the Linux 'mm' and 'io' layers are most definitely different and code maybe required to make it so.  It can also depend on what the 'system call' does.  In some cases, Linux has been optimize so the system call isn't needed (from one version to the next).  See for example the <a href=\"http://man7.org/linux/man-pages/man7/vdso.7.html\" rel=\"nofollow noreferrer\">vdso man page</a>.  In other cases, the C libraries or other mechanism might avoid the system call; for instance DNS name caching, etc.</p>\n"}], "owner": {"reputation": 410, "user_id": 7554912, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-mPMSLX772Cw/AAAAAAAAAAI/AAAAAAAAADM/uQ9yzgu-_Rg/photo.jpg?sz=128", "display_name": "Krishna", "link": "https://stackoverflow.com/users/7554912/krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1017, "favorite_count": 0, "accepted_answer_id": 42697912, "answer_count": 1, "score": 0, "last_activity_date": 1552409817, "creation_date": 1488998114, "last_edit_date": 1552409817, "question_id": 42679263, "link": "https://stackoverflow.com/questions/42679263/how-are-trap-handlers-exception-handlers-and-interrupt-handlers-different-from", "title": "How are trap handlers, exception handlers, and interrupt handlers different from system calls?", "body": "<p>Considering Linux environment, what is the difference between them?</p>\n\n<p>How is a system call different from a normal function call?</p>\n"}, {"tags": ["c", "compiler-errors", "compilation", "cudd"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488996934, "post_id": 42678383, "comment_id": 72482064, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 949, "user_id": 376973, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/50f9d43d82da443a02a4d59e68f1f60f?s=128&d=identicon&r=PG&f=1", "display_name": "kafka", "link": "https://stackoverflow.com/users/376973/kafka"}, "edited": false, "score": 0, "creation_date": 1489075167, "post_id": 42690282, "comment_id": 72521710, "body": "Thank you very much for your answer. Unfortunately I again have an error: &quot;ld: library not found for -lcrt0.o &quot;, Can you help me on this?"}, {"owner": {"reputation": 330, "user_id": 7561599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dLvCt3wo_Ec/AAAAAAAAAAI/AAAAAAAAAFs/ea7rBaBajkM/photo.jpg?sz=128", "display_name": "Aadil Hoda", "link": "https://stackoverflow.com/users/7561599/aadil-hoda"}, "edited": false, "score": 0, "creation_date": 1576560242, "post_id": 42690282, "comment_id": 104929353, "body": "how to run the generated testprogram? @DCTLib"}, {"owner": {"reputation": 861, "user_id": 2253564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688b3d797dc2fb32a5b1d288c72651fa?s=128&d=identicon&r=PG", "display_name": "DCTLib", "link": "https://stackoverflow.com/users/2253564/dctlib"}, "reply_to_user": {"reputation": 330, "user_id": 7561599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dLvCt3wo_Ec/AAAAAAAAAAI/AAAAAAAAAFs/ea7rBaBajkM/photo.jpg?sz=128", "display_name": "Aadil Hoda", "link": "https://stackoverflow.com/users/7561599/aadil-hoda"}, "edited": false, "score": 1, "creation_date": 1576566928, "post_id": 42690282, "comment_id": 104931389, "body": "@AadilHoda ./testprogram"}], "tags": [], "owner": {"reputation": 861, "user_id": 2253564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688b3d797dc2fb32a5b1d288c72651fa?s=128&d=identicon&r=PG", "display_name": "DCTLib", "link": "https://stackoverflow.com/users/2253564/dctlib"}, "is_accepted": true, "score": 2, "last_activity_date": 1489048830, "last_edit_date": 1489048830, "creation_date": 1489048168, "answer_id": 42690282, "question_id": 42678383, "link": "https://stackoverflow.com/questions/42678383/cudd-package-problems-compile-and-makefile/42690282#42690282", "title": "CUDD package : problems compile and makefile", "body": "<p>In version 3, CUDD got a major overhaul of its build system, so older HOWTOs for compiling programs that use CUDD are no longer applicable.</p>\n\n<p>To simplify the build process, I typically recommend to build against CUDD <em>statically</em> -- this allows you to run the later compiled program without giving the paths to the CUDD library and/or installing the CUDD library into \"/usr/lib\".</p>\n\n<p>To do so, first recompile cudd with:</p>\n\n<pre><code> ./configure --enable-dddmp --enable-obj --enable-shared --enable-static; make\n</code></pre>\n\n<p>This makes sure that the static library is build, along with the optional components of CUDD that you may later need.</p>\n\n<p>Then, you can compile your example program from the command line as follows:</p>\n\n<pre><code>gcc test.c -o testprogram -I /path/to/cudd-3.0.0/cudd -I /path/to/cudd-3.0.0/util -I /path/to/cudd-3.0.0/ -static -L /path/to/cudd-3.0.0/cudd/.libs/ -lcudd -lm\n</code></pre>\n\n<p>There are other ways of compiling against CUDD, but I'm personally not a big fan of globally installing libraries. If you start to use more features of CUDD, you may have to add more include directories for the compiler to find the CUDD .h files, and more libraries may be needed. Note that all parameters starting with \"-static\" are linker parameters in the compilation command above, while the others are for the compiler - this is important to know when you start writing Makefiles to automate your build process. A sample Makefile looks as follows:</p>\n\n<pre><code>CFLAGS = -I /path/to/cudd-3.0.0/cudd -I /path/to/cudd-3.0.0/util -I /path/to/cudd-3.0.0/\nLFLAGS = -static -L /path/to/cudd-3.0.0/cudd/.libs/ -lcudd -lm\n\ndefault: testprogram\n\ntestprogram: test.o\n    $(CC) test.o -o testprogram $(LFLAGS)\n\ntest.o: test.c\n    $(CC) test.c -c -o test.o $(CFLAGS)\n</code></pre>\n\n<p>Please consult a more comprehensive documentation for how to write Makefiles or use an alternative build system. Note that in the above file, the \"four spaces in a row\" need to be tabs in order for the Makefile to work. If you store it in the same directory as \"test.c\" under the name \"Makefile\", running \"make\" should build the program.</p>\n"}], "owner": {"reputation": 949, "user_id": 376973, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/50f9d43d82da443a02a4d59e68f1f60f?s=128&d=identicon&r=PG&f=1", "display_name": "kafka", "link": "https://stackoverflow.com/users/376973/kafka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 0, "accepted_answer_id": 42690282, "answer_count": 1, "score": 1, "last_activity_date": 1524597061, "creation_date": 1488995310, "last_edit_date": 1489043555, "question_id": 42678383, "link": "https://stackoverflow.com/questions/42678383/cudd-package-problems-compile-and-makefile", "title": "CUDD package : problems compile and makefile", "body": "<p>I'm trying to run a simple program to learn how to use the CUDD package version 3.0.0. I downloaded the package and installed it: ( 1- ./configure 2- make 3- make check). </p>\n\n<p>I created the following simple program :</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  #include \"cudd.h\"\n  #include \"util.h\"\n\n  int main (int argc, char *argv[])\n  {\n       printf(\"Its working\");\n       DdManager *gbm; /* Global BDD manager. */\n       char filename[30];\n       gbm = Cudd_Init(0,0,CUDD_UNIQUE_SLOTS,CUDD_CACHE_SLOTS,0); \n       DdNode *bdd = Cudd_bddNewVar(gbm); \n       Cudd_Ref(bdd); \n       Cudd_Quit(gbm);\n       return 0;\n   }\n</code></pre>\n\n<p>I would like create a makefile to compile it, How can I do it?\nMoreover, if I want compile it through the command line, how can I to link its libraries?</p>\n"}, {"tags": ["c", "curl", "web-scraping", "http-headers", "libcurl"], "comments": [{"owner": {"reputation": 25905, "user_id": 313421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ipQVy.jpg?s=128&g=1", "display_name": "Xaqron", "link": "https://stackoverflow.com/users/313421/xaqron"}, "edited": false, "score": 0, "creation_date": 1488996704, "post_id": 42678110, "comment_id": 72481927, "body": "Did you try with complete address including <code>https:&#47;&#47;</code>?"}, {"owner": {"reputation": 77, "user_id": 6266693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b3471a685b5cb5aa07db44c0edb69c5?s=128&d=identicon&r=PG&f=1", "display_name": "RealGas", "link": "https://stackoverflow.com/users/6266693/realgas"}, "reply_to_user": {"reputation": 25905, "user_id": 313421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ipQVy.jpg?s=128&g=1", "display_name": "Xaqron", "link": "https://stackoverflow.com/users/313421/xaqron"}, "edited": false, "score": 0, "creation_date": 1488996886, "post_id": 42678110, "comment_id": 72482039, "body": "@Xaqron Just tried it, same results."}, {"owner": {"reputation": 25905, "user_id": 313421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ipQVy.jpg?s=128&g=1", "display_name": "Xaqron", "link": "https://stackoverflow.com/users/313421/xaqron"}, "edited": false, "score": 0, "creation_date": 1488997090, "post_id": 42678110, "comment_id": 72482159, "body": "add custom header in right syntax and try again.<code>&quot;a: b&quot;</code> instead of <code>&quot;a : b&quot;</code> (note the space between <code>a</code> and <code>:</code>)"}, {"owner": {"reputation": 77, "user_id": 6266693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b3471a685b5cb5aa07db44c0edb69c5?s=128&d=identicon&r=PG&f=1", "display_name": "RealGas", "link": "https://stackoverflow.com/users/6266693/realgas"}, "reply_to_user": {"reputation": 25905, "user_id": 313421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ipQVy.jpg?s=128&g=1", "display_name": "Xaqron", "link": "https://stackoverflow.com/users/313421/xaqron"}, "edited": false, "score": 0, "creation_date": 1488997316, "post_id": 42678110, "comment_id": 72482282, "body": "@Xaqron Thanks, it worked for &quot;a: b&quot;, but how do I replace existing &quot;Connection: close&quot; with &quot;Connection: keep-alive&quot; ?"}, {"owner": {"reputation": 25905, "user_id": 313421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ipQVy.jpg?s=128&g=1", "display_name": "Xaqron", "link": "https://stackoverflow.com/users/313421/xaqron"}, "edited": false, "score": 0, "creation_date": 1488998174, "post_id": 42678110, "comment_id": 72482779, "body": "<code>curl_easy_setopt(curl, CURLOPT_TCP_KEEPALIVE, 1L);</code>"}, {"owner": {"reputation": 77, "user_id": 6266693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b3471a685b5cb5aa07db44c0edb69c5?s=128&d=identicon&r=PG&f=1", "display_name": "RealGas", "link": "https://stackoverflow.com/users/6266693/realgas"}, "reply_to_user": {"reputation": 25905, "user_id": 313421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ipQVy.jpg?s=128&g=1", "display_name": "Xaqron", "link": "https://stackoverflow.com/users/313421/xaqron"}, "edited": false, "score": 0, "creation_date": 1488998669, "post_id": 42678110, "comment_id": 72483102, "body": "@Xaqron I tried that earlier, doesn&#39;t change anything, I think it doesn&#39;t matter and as you said, depends on requestbin itself."}, {"owner": {"reputation": 25905, "user_id": 313421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ipQVy.jpg?s=128&g=1", "display_name": "Xaqron", "link": "https://stackoverflow.com/users/313421/xaqron"}, "edited": false, "score": 0, "creation_date": 1488998956, "post_id": 42678110, "comment_id": 72483264, "body": "Note that unlike custom headers when you set default headers like <code>connection type</code> underlying library will overwrite your value so in this case you should use built-in functionality. See: <a href=\"https://curl.haxx.se/libcurl/c/CURLOPT_TCP_KEEPALIVE.html\" rel=\"nofollow noreferrer\">curl.haxx.se/libcurl/c/CURLOPT_TCP_KEEPALIVE.html</a>"}, {"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "reply_to_user": {"reputation": 25905, "user_id": 313421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ipQVy.jpg?s=128&g=1", "display_name": "Xaqron", "link": "https://stackoverflow.com/users/313421/xaqron"}, "edited": false, "score": 0, "creation_date": 1489010446, "post_id": 42678110, "comment_id": 72489583, "body": "@Xaqron: no, that option is for TCP keep-alive, which is something completely different. RealGas: curl doesn&#39;t normally send &quot;Connection: close&quot; at all so your problem is a mystery to me. Can you show the full request you send?"}], "owner": {"reputation": 77, "user_id": 6266693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b3471a685b5cb5aa07db44c0edb69c5?s=128&d=identicon&r=PG&f=1", "display_name": "RealGas", "link": "https://stackoverflow.com/users/6266693/realgas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489005275, "creation_date": 1488994430, "last_edit_date": 1489005275, "question_id": 42678110, "link": "https://stackoverflow.com/questions/42678110/libcurlcant-send-custom-headers-to-requestbin", "title": "Libcurl:can&#39;t send custom headers to requestbin?", "body": "<p>This is the code </p>\n\n<pre><code>#include &lt;curl/curl.h&gt;\n\nint main(){\n   CURL * curl;\n   curl=curl_easy_init();\n   struct curl_slist *headers=NULL;\n   headers = curl_slist_append(headers, \"Connection: keep-alive\");\n   headers = curl_slist_append(headers,\"a : b\");\n   curl_easy_setopt(curl,CURLOPT_URL,\"requestb.in/1ar78su1\");\n   curl_easy_setopt(curl,CURLOPT_HTTPHEADER,headers);\n   curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);\n   curl_easy_perform(curl);\n   curl_slist_free_all(headers);\n  }\n</code></pre>\n\n<p>Heres the requestbin link:  ,\nwhy doesn't it show \"a : b\" and \"Connection : keep-alive\" on requestbin?</p>\n"}, {"tags": ["c", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 4777, "user_id": 375828, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PZNgw.gif?s=128&g=1", "display_name": "Jason R. Mick", "link": "https://stackoverflow.com/users/375828/jason-r-mick"}, "edited": false, "score": 0, "creation_date": 1488993823, "post_id": 42677820, "comment_id": 72480166, "body": "Is that supposed to be <code>N = 1000000</code>, I&#39;d assume?"}, {"owner": {"reputation": 341, "user_id": 7173844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cfdfe748639997a2869bd614ceb6667?s=128&d=identicon&r=PG&f=1", "display_name": "Karan Nagpal", "link": "https://stackoverflow.com/users/7173844/karan-nagpal"}, "edited": false, "score": 0, "creation_date": 1488993842, "post_id": 42677820, "comment_id": 72480176, "body": "Please show us what have you tired so far."}, {"owner": {"reputation": 109, "user_id": 4775128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mWZiO.png?s=128&g=1", "display_name": "Shivalnu", "link": "https://stackoverflow.com/users/4775128/shivalnu"}, "edited": false, "score": 0, "creation_date": 1488993876, "post_id": 42677820, "comment_id": 72480191, "body": "Yes, i wanted to make it easier to read but apparently, it is more confusing that way. I will edit it out."}, {"owner": {"reputation": 4777, "user_id": 375828, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PZNgw.gif?s=128&g=1", "display_name": "Jason R. Mick", "link": "https://stackoverflow.com/users/375828/jason-r-mick"}, "edited": false, "score": 0, "creation_date": 1488993980, "post_id": 42677820, "comment_id": 72480256, "body": "Duplicate of: <a href=\"http://stackoverflow.com/questions/3255/big-o-how-do-you-calculate-approximate-it\" title=\"big o how do you calculate approximate it\">stackoverflow.com/questions/3255/&hellip;</a>"}, {"owner": {"reputation": 4777, "user_id": 375828, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PZNgw.gif?s=128&g=1", "display_name": "Jason R. Mick", "link": "https://stackoverflow.com/users/375828/jason-r-mick"}, "edited": false, "score": 1, "creation_date": 1488993996, "post_id": 42677820, "comment_id": 72480261, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3255/big-o-how-do-you-calculate-approximate-it\">Big O, how do you calculate/approximate it?</a>"}, {"owner": {"reputation": 109, "user_id": 4775128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mWZiO.png?s=128&g=1", "display_name": "Shivalnu", "link": "https://stackoverflow.com/users/4775128/shivalnu"}, "edited": false, "score": 1, "creation_date": 1488994080, "post_id": 42677820, "comment_id": 72480320, "body": "My question is not about calculating the order of the algorithm. I know it is O(N^3). My question is if i can calculate the time it would take to run for N =1000000"}, {"owner": {"reputation": 109, "user_id": 4775128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mWZiO.png?s=128&g=1", "display_name": "Shivalnu", "link": "https://stackoverflow.com/users/4775128/shivalnu"}, "edited": false, "score": 0, "creation_date": 1488994117, "post_id": 42677820, "comment_id": 72480348, "body": "Thank you, Thomas this answers my question"}], "answers": [{"tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": true, "score": 1, "last_activity_date": 1499039287, "last_edit_date": 1499039287, "creation_date": 1488994499, "answer_id": 42678126, "question_id": 42677820, "link": "https://stackoverflow.com/questions/42677820/approximate-run-time/42678126#42678126", "title": "Approximate run time", "body": "<p>If it is O(N^3) you can approximate N=1,000,000 by running it with N=1,000 and then multiply by 1,000,000,000. (But, since the O notation can hide other significant terms except the N^3 one, you can't be sure that it is a very good approximation.)</p>\n"}], "owner": {"reputation": 109, "user_id": 4775128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mWZiO.png?s=128&g=1", "display_name": "Shivalnu", "link": "https://stackoverflow.com/users/4775128/shivalnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 42678126, "answer_count": 1, "score": -1, "last_activity_date": 1516537518, "creation_date": 1488993658, "last_edit_date": 1516537518, "question_id": 42677820, "link": "https://stackoverflow.com/questions/42677820/approximate-run-time", "title": "Approximate run time", "body": "<p>I have written a program in C to solve the maximum sub-array problem. This solution is of O(N^3) complexity. Is there any way to approximate the run time for N = 1,000,000? I know there are much faster algorithms than that of third order but I need to compare those to my current program.</p>\n\n<pre><code>int MaxSubSlow(){\n    int max_so_far = 0,i,j,k,temp_sum;\n\n\n    for(j=1;j&lt;N;j++){   \n        for(k=j;k&lt;N;k++){\n            temp_sum = 0;\n            for(i=j;i&lt;k;i++){\n                temp_sum += A[i];\n            }   \n            if(temp_sum &gt; max_so_far){\n                max_so_far = temp_sum;      \n            }\n        }\n    }\n\n\n    return max_so_far;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "kernel", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 888, "user_id": 1096140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5rFfC.jpg?s=128&g=1", "display_name": "hesham_EE", "link": "https://stackoverflow.com/users/1096140/hesham-ee"}, "edited": false, "score": 1, "creation_date": 1488997135, "post_id": 42677691, "comment_id": 72482184, "body": "AFAIK, <code>__kernel_write</code> would update <code>pos</code> with the new position. I don&#39;t see a point in this line <code>pos += popped_length;</code>."}, {"owner": {"reputation": 11, "user_id": 7679659, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IoZyozpCLQM/AAAAAAAAAAI/AAAAAAAAASo/-lgNp5jkfgo/photo.jpg?sz=128", "display_name": "Henry Harrison", "link": "https://stackoverflow.com/users/7679659/henry-harrison"}, "reply_to_user": {"reputation": 888, "user_id": 1096140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5rFfC.jpg?s=128&g=1", "display_name": "hesham_EE", "link": "https://stackoverflow.com/users/1096140/hesham-ee"}, "edited": false, "score": 0, "creation_date": 1489058031, "post_id": 42677691, "comment_id": 72509869, "body": "If I try opening the file from within the kthread then it fails to open the file. I get a null pointer error in strlen() from getname_kernel from filp_open()"}], "owner": {"reputation": 11, "user_id": 7679659, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IoZyozpCLQM/AAAAAAAAAAI/AAAAAAAAASo/-lgNp5jkfgo/photo.jpg?sz=128", "display_name": "Henry Harrison", "link": "https://stackoverflow.com/users/7679659/henry-harrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488997972, "creation_date": 1488993317, "last_edit_date": 1488997972, "question_id": 42677691, "link": "https://stackoverflow.com/questions/42677691/how-do-i-write-to-a-file-from-new-linux-system-call-in-a-loop-from-a-kthread", "title": "How do I write to a file from new Linux system call in a loop from a Kthread", "body": "<p>I am using a kthread as a worker to write to a file. I want the kthread to keep writing once the initial system call has terminated. The thread is writing data from a buffer. I open the file and the kthread like this:</p>\n\n<pre><code>f = filp_open(file, O_RDWR | O_APPEND, 0);\nif (!f)\n{\n    return -1;\n}\nrunning_thread = kthread_run(write_to_disk_thread, (void*)&amp;thread_args, \"write_to_disk\");\n</code></pre>\n\n<p>I then run this code in a loop on the thread. text_to_append is the next char* to be written from the buffer. It is created by kmalloc() and then the data is coppied into it on each loop. popped_length is its length.</p>\n\n<pre><code>loff_t pos = f-&gt;f_pos;\n__kernel_write(f, text_to_append, popped_length, &amp;pos);\npos += popped_length;\nset_fs(KERNEL_DS);\n__fput_sync(f);\nf-&gt;f_pos = pos;\nvfs_fsync_range(f, pos-popped_length, pos, 1);\nset_fs(old_fs);`\n</code></pre>\n\n<p>When I run my code I get a null pointer bug but only on the second iteration of the loop.</p>\n\n<p><a href=\"https://i.stack.imgur.com/acr87.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/acr87.png\" alt=\"screenshot of error\"></a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1488992888, "post_id": 42677521, "comment_id": 72479564, "body": "<code>imput</code>? :D good."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1488992983, "post_id": 42677521, "comment_id": 72479629, "body": "You are not using <code>read</code> function, you are using <code>getline</code> function. Verify this with your instructor or whatever."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1488993063, "post_id": 42677521, "comment_id": 72479691, "body": "Yes, it&#39;s possible. It&#39;s unclear how you want to manage the input information or what they represent, but if you want to manage them as individual strings, you could use an array of strings (or equivalently, an array of character pointers that point to dynamically allocated string buffers)."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1488993451, "post_id": 42677521, "comment_id": 72479918, "body": "It&#39;s a very bad idea to use <code>read</code> as a variable name as it&#39;s a function in the standard libraries"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1488993613, "post_id": 42677521, "comment_id": 72480032, "body": "Input is line oriented. User composes a line in the terminal, then presses enter. You receive it, then prompt for the next line. If you don&#39;t prompt then user is confused and lost, but you don&#39;t have to prompt. You must read line by line however."}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "edited": false, "score": 0, "creation_date": 1488993944, "post_id": 42677521, "comment_id": 72480233, "body": "I update the code. So I can only read line by line. It seams to be ok, but how the user can quit the input mode when he has finishes to give instructions ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1488994010, "post_id": 42677521, "comment_id": 72480275, "body": "@KevinDTimm: <code>read</code> is not part of the C standard library, but part of POSIX (and possbly other systems)."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489001193, "post_id": 42677521, "comment_id": 72484601, "body": "@Olaf - You&#39;re correct about my misspeaking, but in 99.99999% of the cases, that doesn&#39;t matter ;) And, this is not one of the cases where it matters, specifically because the OP has been tasked with using <code>read</code> as a function - which is going to cause problems if he has a variable named <code>read</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1489005106, "post_id": 42677521, "comment_id": 72486820, "body": "@KevinDTimm: Actually <b>most</b> systems C is used for do <b>not</b> support <code>read</code>. But those also will not provide <code>getline</code> or the standard library except for headers mandatory for a freestanding implementation. For a hosted environment, the name is a legacy and violates actually the rules for reserved names: a user can assume a name without leading underscore to be available for his application, unless he explicitly includes a header for it or has to define a macro for conditional declarations."}], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 5770601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7fcff4e00f6308d83beb849e557a2820?s=128&d=identicon&r=PG&f=1", "display_name": "Orionss", "link": "https://stackoverflow.com/users/5770601/orionss"}, "is_accepted": true, "score": 1, "last_activity_date": 1488994299, "creation_date": 1488994299, "answer_id": 42678062, "question_id": 42677521, "link": "https://stackoverflow.com/questions/42677521/read-an-input-from-the-terminal/42678062#42678062", "title": "Read an input from the terminal", "body": "<p>I think you should do </p>\n\n<pre><code>while (read(0, line, 50) &gt; 0)\n    printf(\"%s\\n\", line);\n</code></pre>\n\n<p>But if you do so, you'll have troubles if you have the first input with 42 characters for example and the second input with 30 because the read function does not reset the \"line\" buffer.\nUse memset if you can or make your own function to do it !</p>\n\n<p>Why > 0 and not != -1 : Because read returns -1 if it's an error and 0 if it's the end of the input.</p>\n"}], "owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 42678062, "answer_count": 1, "score": -2, "last_activity_date": 1488994299, "creation_date": 1488992803, "last_edit_date": 1488994121, "question_id": 42677521, "link": "https://stackoverflow.com/questions/42677521/read-an-input-from-the-terminal", "title": "Read an input from the terminal", "body": "<p>I'm doing a project and I have to read data from the terminal.</p>\n\n<p>So the program is started normally and the user has to give some instructions.\nI would like the program to wait for the instructions given by the user (taping in the terminal) and then execute all of them.</p>\n\n<p>I can only use the function <code>read</code> to get the input.\nUntil now, I found the way bellow </p>\n\n<pre><code>int main (void)\n{\n    char line[50];\n    int ret;\n\n    printf (\"\\nEnter string below\\n\");\n    while ((ret = read(0, line, 50)) != -1)\n    {\n        line[ret] = '\\0';\n        printf (\"result %s\\n\", line);\n    }\n}   \n</code></pre>\n\n<p>It works but I would like to type all the instructions and then when pressing ENTER quit the input mode and treat them.</p>\n\n<p>Is it possible ?\nAlso, is there a common way to quit the imput mode using CRTL + D</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 1777, "user_id": 976686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ede54d46af9980731445194bc6603312?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/976686/simon"}, "edited": false, "score": 0, "creation_date": 1488993119, "post_id": 42677485, "comment_id": 72479726, "body": "you mean a single value per row ?"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1488993317, "post_id": 42677485, "comment_id": 72479835, "body": "What&#39;s wrong with getting all the values back in a single row?"}, {"owner": {"reputation": 61, "user_id": 2208038, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9dd2dd1fab7b75310bd22efc7f4712fc?s=128&d=identicon&r=PG", "display_name": "Rich G.", "link": "https://stackoverflow.com/users/2208038/rich-g"}, "edited": false, "score": 0, "creation_date": 1488996461, "post_id": 42677485, "comment_id": 72481801, "body": "Yes, right now it returns a single value per row... but there&#39;s nothing wrong with getting everything back in one row.  I would just have to parse that row in the callback.  I&#39;m not sure how to put everything in a single row with the &quot;WHERE LogTime &gt; %f&quot; cases."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2208038, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9dd2dd1fab7b75310bd22efc7f4712fc?s=128&d=identicon&r=PG", "display_name": "Rich G.", "link": "https://stackoverflow.com/users/2208038/rich-g"}, "edited": false, "score": 0, "creation_date": 1489008512, "post_id": 42680681, "comment_id": 72488593, "body": "Hmmm... interesting.  I just did a test where I called these statements 1000 times.  The top statement with the UNION ALLs took 4.2 seconds to run while the more concise bottom statement took 9.6 seconds.  This is exactly why I&#39;m looking for the more efficient way to do things.  Even though the bottom statement is more concise, it takes over 2x longer to execute."}], "tags": [], "owner": {"reputation": 61, "user_id": 2208038, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9dd2dd1fab7b75310bd22efc7f4712fc?s=128&d=identicon&r=PG", "display_name": "Rich G.", "link": "https://stackoverflow.com/users/2208038/rich-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1489002611, "creation_date": 1489002611, "answer_id": 42680681, "question_id": 42677485, "link": "https://stackoverflow.com/questions/42677485/sqlite-in-c-getting-multiple-single-valued-stats-from-table-more-efficiently/42680681#42680681", "title": "SQLite in C: Getting multiple single valued stats from table more efficiently", "body": "<p>Ok, I think I figured it out after JeremyP suggested a single row option.  Everything will output in a single row by using a single SELECT * followed by the desired comma separated SELECTs. Unless someone can suggest a more efficient way I think I'll go with this:</p>\n\n<pre><code>sql_stmt = sqlite3_mprintf( \\\n\"SELECT * FROM \\\n(SELECT MIN(LogTime), MAX(LogTime), COUNT(*), MIN(ID), MAX(ID) FROM log), \\\n(SELECT LogTime FROM log WHERE LogTime &gt; %f ORDER BY logTime LIMIT 1), \\\n(SELECT COUNT(*) FROM log WHERE LogTime &gt; %f)\", t1, t2);\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 2208038, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9dd2dd1fab7b75310bd22efc7f4712fc?s=128&d=identicon&r=PG", "display_name": "Rich G.", "link": "https://stackoverflow.com/users/2208038/rich-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489002611, "creation_date": 1488992702, "question_id": 42677485, "link": "https://stackoverflow.com/questions/42677485/sqlite-in-c-getting-multiple-single-valued-stats-from-table-more-efficiently", "title": "SQLite in C: Getting multiple single valued stats from table more efficiently", "body": "<p>I'm interested in getting several single valued statistic from a table, log, that contains fields ID and LogTime.  I can do this with several SELECT * (SELECT  FROM log) statements linked together with UNION ALL like this:</p>\n\n<pre><code>sql_stmt = sqlite3_mprintf( \\\n\"SELECT * FROM (SELECT MIN(LogTime) FROM log) UNION ALL \\\nSELECT * FROM (SELECT MAX(LogTime) FROM log) UNION ALL \\\nSELECT * FROM (SELECT LogTime FROM log WHERE LogTime &gt; %f ORDER BY logTime LIMIT 1) UNION ALL \\\nSELECT * FROM (SELECT COUNT(*) FROM log) UNION ALL \\\nSELECT * FROM (SELECT COUNT(*) FROM log WHERE LogTime &gt; %f) UNION ALL \\\nSELECT * FROM (SELECT MIN(ID) FROM log) UNION ALL \\\nSELECT * FROM (SELECT MAX(ID) FROM log)\", t1, t2);\n\nsqlite3_exec(db, sql_stmt, f_CallBack, pCallBack_Data, &amp;errmsg)\n</code></pre>\n\n<p>This puts the returned values into a structure defined as pCallBack_Data, but is there a more efficient way of doing this?  Maybe combining elements into a single SELECT like this?</p>\n\n<pre><code>SELECT MIN(LogTime), MAX(LogTime), COUNT(*) from log\n</code></pre>\n\n<p>I know that won't work because it returns three values in a single row where the other statements in the UNION return a single value.</p>\n"}, {"tags": ["c", "parsing", "query-string", "fastcgi"], "owner": {"reputation": 3800, "user_id": 795910, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/921b253c1d4b4aeaf444f8213c3b859e?s=128&d=identicon&r=PG", "display_name": "Ottavio Campana", "link": "https://stackoverflow.com/users/795910/ottavio-campana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1488992122, "creation_date": 1488992122, "question_id": 42677282, "link": "https://stackoverflow.com/questions/42677282/how-to-parse-passed-paramaters-with-libfcgi", "title": "how to parse passed paramaters with libfcgi", "body": "<p>I am studying all the examples provided with fcgi-2.4.0 . I want to parse the variables passed with either GET or POST to my fast cgi application, but I am not able to find any example.</p>\n\n<p>Does fcgi provide method for parsing the passed parameter or shall I parse by hand QUERY_STRING? And what about posted files to the cgi?</p>\n"}, {"tags": ["c", "image", "bitmap"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488992660, "post_id": 42677240, "comment_id": 72479426, "body": "By writing the appropriate code... OK more seriously, show us what you have done so far and then ask specific questions on the parts where you have difficulties."}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1489004844, "post_id": 42677240, "comment_id": 72486677, "body": "I think it should be <code>unsigned char data_bit = image_data_bits[i&#47;8]</code>"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1489004993, "post_id": 42677240, "comment_id": 72486757, "body": "It comes out as a strip of punctuation characters, the digits 0-9 and the alphabet (twice), by the way. like this... <a href=\"http://thesetchells.com/a.jpg\" rel=\"nofollow noreferrer\">thesetchells.com/a.jpg</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1285, "user_id": 2402979, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/829bc316fab5f901254854af172a6778?s=128&d=identicon&r=PG", "display_name": "Fr0stBit", "link": "https://stackoverflow.com/users/2402979/fr0stbit"}, "is_accepted": true, "score": 0, "last_activity_date": 1489025757, "creation_date": 1489025757, "answer_id": 42685448, "question_id": 42677240, "link": "https://stackoverflow.com/questions/42677240/how-to-convert-monochrome-xbm-bitmap-data-to-1-channel-8bpp-image/42685448#42685448", "title": "How to convert monochrome xbm bitmap data to 1 channel 8bpp image?", "body": "<p>As it seems, the xbm format contains 8-bit aligned rows.\nA sample implementation that worked is the following:</p>\n\n<pre><code>static void uncompress_bm(unsigned char** buf, int* w, int* h)\n{\n    *w = IMAGE_WIDTH; *h = IMAGE_HEIGHT;\n    /* Align width to 8 byte boundary */\n    *w = (*w) + (8 - (*w) % 8);\n    unsigned int num_pixels = (*w) * (*h);\n    *buf = malloc(num_pixels * sizeof(char));\n    memset(*buf, 0, num_pixels * sizeof(char));\n    for (int i = 0; i &lt; *h; ++i) {\n        for (int j = 0; j &lt; *w; ++j) {\n            unsigned int cur = i * (*w) + j;\n            (*buf)[cur] = (image_data_bits[cur / 8] &amp; (1 &lt;&lt; (cur % 8))) ? 255 : 0;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1285, "user_id": 2402979, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/829bc316fab5f901254854af172a6778?s=128&d=identicon&r=PG", "display_name": "Fr0stBit", "link": "https://stackoverflow.com/users/2402979/fr0stbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 42685448, "answer_count": 1, "score": 0, "last_activity_date": 1489025757, "creation_date": 1488992002, "last_edit_date": 1488993897, "question_id": 42677240, "link": "https://stackoverflow.com/questions/42677240/how-to-convert-monochrome-xbm-bitmap-data-to-1-channel-8bpp-image", "title": "How to convert monochrome xbm bitmap data to 1 channel 8bpp image?", "body": "<p>I'm trying to convert the data of a monochrome xbm file (1 byte per 8 pixels, meaning 1 bit per pixel) to a memory bitmap representation of 1 byte per pixel in C. How can i do it?</p>\n\n<p>[UPDATE]<br>\nSo far i've been trying (without any success) something in the lines of:</p>\n\n<pre><code>#define IMAGE_WIDTH 769\n#define IMAGE_HEIGHT 14\n\nstatic void uncompress_bm(unsigned char** buf, int* w, int* h)\n{\n    *w = IMAGE_WIDTH; *h = IMAGE_HEIGHT;\n    unsigned int num_pixels = (*w) * (*h);\n    *buf = malloc(num_pixels * sizeof(char));\n    memset(*buf, 0, num_pixels * sizeof(char));\n    for (unsigned int i = 0; i &lt; num_pixels; ++i) {\n        unsigned short data_bit = image_data_bits2[i / 8];\n        (*buf)[i] = (data_bit &amp; (1 &lt;&lt; (i % 8))) ? 255 : 0;\n    }\n}\n\nunsigned char image_data_bits[] = {\n  0xFF, 0xFF, 0xFF, 0xF3, 0xFF, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0xFF, 0xFF,\n  0x01, 0xFF, 0xFF, 0xFF, 0xF3, 0xFF, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0xFF,\n  0xFF, 0x01, 0xC9, 0x9C, 0xF9, 0x40, 0x98, 0x0F, 0xE4, 0xE4, 0xCF, 0x7F,\n  0xFE, 0xFF, 0xFF, 0x39, 0x1C, 0x0E, 0x1C, 0x38, 0x73, 0x80, 0xC3, 0x01,\n  0x0E, 0x1F, 0xFE, 0xFF, 0xFC, 0xF3, 0x81, 0x0F, 0x7C, 0x38, 0xF0, 0xE1,\n  0xC0, 0x81, 0xC0, 0x81, 0x3C, 0xF9, 0x93, 0x27, 0x9F, 0x9F, 0xFC, 0x1C,\n  0x0E, 0x7C, 0x38, 0xF0, 0x81, 0x40, 0x9E, 0xFC, 0xE4, 0x27, 0x3F, 0xF9,\n  0x09, 0x84, 0x7C, 0xC8, 0xFC, 0xCF, 0x87, 0x03, 0x1F, 0x0E, 0x1C, 0x08,\n  0x1C, 0xC8, 0x93, 0x3F, 0x79, 0xF2, 0xF9, 0xC9, 0xCF, 0xE1, 0xC0, 0x87,\n  0x03, 0x1F, 0x08, 0xE4, 0xC9, 0x4F, 0x7E, 0xF2, 0x93, 0x9F, 0xC0, 0x21,\n  0xE1, 0x33, 0x01, 0xC9, 0x9C, 0xF9, 0x40, 0x98, 0x0F, 0xE4, 0xE4, 0xCF,\n  0x7F, 0xFE, 0xFF, 0xFF, 0x39, 0x1C, 0x0E, 0x1C, 0x38, 0x73, 0x80, 0xC3,\n  0x01, 0x0E, 0x1F, 0xFE, 0xFF, 0xFC, 0xF3, 0x81, 0x0F, 0x7C, 0x38, 0xF0,\n  0xE1, 0xC0, 0x81, 0xC0, 0x81, 0x3C, 0xF9, 0x93, 0x27, 0x9F, 0x9F, 0xFC,\n  0x1C, 0x0E, 0x7C, 0x38, 0xF0, 0x81, 0x40, 0x9E, 0xFC, 0xE4, 0x27, 0x3F,\n  0xF9, 0x09, 0x84, 0x7C, 0xC8, 0xFC, 0xCF, 0x87, 0x03, 0x1F, 0x0E, 0x1C,\n  0x08, 0x1C, 0xC8, 0x93, 0x3F, 0x79, 0xF2, 0xF9, 0xC9, 0xCF, 0xE1, 0xC0,\n  0x87, 0x03, 0x1F, 0x08, 0xE4, 0xC9, 0x4F, 0x7E, 0xF2, 0x93, 0x9F, 0xC0,\n  0x21, 0xE1, 0x33, 0x01, 0xC9, 0x04, 0x20, 0x7F, 0x98, 0xF3, 0x27, 0x9F,\n  0xCC, 0x7C, 0xFE, 0xFF, 0xFF, 0xC9, 0x73, 0xFE, 0xF3, 0x27, 0x73, 0xFE,\n  0xFC, 0x7F, 0xF2, 0xE4, 0xC9, 0x39, 0x07, 0xCE, 0x7F, 0x32, 0x93, 0x27,\n  0x4F, 0x9E, 0x3C, 0xF9, 0x7C, 0xFE, 0x3C, 0xF9, 0x93, 0x39, 0x1F, 0x86,\n  0xF0, 0xE4, 0xC9, 0x93, 0x27, 0x4F, 0xFE, 0x73, 0x9E, 0xFC, 0x64, 0xE6,\n  0xCC, 0x67, 0xFE, 0xE4, 0xFC, 0xF9, 0xFF, 0x3F, 0x79, 0xF2, 0xE4, 0xC9,\n  0x93, 0xCF, 0xE7, 0xCF, 0x93, 0x3F, 0x99, 0xF3, 0x61, 0x08, 0x4F, 0x9E,\n  0x3C, 0x79, 0xF2, 0xE4, 0x3F, 0xE7, 0xC9, 0x4F, 0x66, 0xCE, 0x7C, 0xE6,\n  0xCF, 0x39, 0xE7, 0xCC, 0x01, 0xC9, 0x04, 0x20, 0x7F, 0x98, 0xF3, 0x27,\n  0x9F, 0xCC, 0x7C, 0xFE, 0xFF, 0xFF, 0xC9, 0x73, 0xFE, 0xF3, 0x27, 0x73,\n  0xFE, 0xFC, 0x7F, 0xF2, 0xE4, 0xC9, 0x39, 0x07, 0xCE, 0x7F, 0x32, 0x93,\n  0x27, 0x4F, 0x9E, 0x3C, 0xF9, 0x7C, 0xFE, 0x3C, 0xF9, 0x93, 0x39, 0x1F,\n  0x86, 0xF0, 0xE4, 0xC9, 0x93, 0x27, 0x4F, 0xFE, 0x73, 0x9E, 0xFC, 0x64,\n  0xE6, 0xCC, 0x67, 0xFE, 0xE4, 0xFC, 0xF9, 0xFF, 0x3F, 0x79, 0xF2, 0xE4,\n  0xC9, 0x93, 0xCF, 0xE7, 0xCF, 0x93, 0x3F, 0x99, 0xF3, 0x61, 0x08, 0x4F,\n  0x9E, 0x3C, 0x79, 0xF2, 0xE4, 0x3F, 0xE7, 0xC9, 0x4F, 0x66, 0xCE, 0x7C,\n  0xE6, 0xCF, 0x39, 0xE7, 0xCC, 0x01, 0xF9, 0x9F, 0xF9, 0xF0, 0xE7, 0x0F,\n  0x3F, 0x9F, 0x03, 0x07, 0xE0, 0x07, 0x7E, 0xCE, 0x73, 0x3E, 0x7C, 0x38,\n  0x40, 0xE0, 0xC0, 0x9F, 0x0F, 0x1F, 0xF8, 0xCF, 0xFF, 0x3F, 0x87, 0x33,\n  0x1C, 0x20, 0x40, 0xFE, 0x3C, 0x81, 0x40, 0x86, 0x00, 0xF9, 0x13, 0x3E,\n  0x9F, 0x99, 0xCC, 0xE4, 0x09, 0x9C, 0x27, 0xF0, 0xE1, 0x73, 0x9E, 0x33,\n  0x67, 0xE6, 0xF3, 0x9F, 0x3F, 0xE7, 0xF3, 0xF9, 0xFF, 0xFF, 0x01, 0x02,\n  0xE4, 0xCF, 0x13, 0x08, 0x64, 0x08, 0x90, 0x3F, 0xE1, 0xF3, 0x99, 0xC9,\n  0x4C, 0x9E, 0xC0, 0x79, 0x02, 0x1F, 0x3E, 0xE7, 0x39, 0x73, 0x66, 0x3E,\n  0xFF, 0xF9, 0x73, 0x3E, 0x9F, 0xFF, 0x01, 0xF9, 0x9F, 0xF9, 0xF0, 0xE7,\n  0x0F, 0x3F, 0x9F, 0x03, 0x07, 0xE0, 0x07, 0x7E, 0xCE, 0x73, 0x3E, 0x7C,\n  0x38, 0x40, 0xE0, 0xC0, 0x9F, 0x0F, 0x1F, 0xF8, 0xCF, 0xFF, 0x3F, 0x87,\n  0x33, 0x1C, 0x20, 0x40, 0xFE, 0x3C, 0x81, 0x40, 0x86, 0x00, 0xF9, 0x13,\n  0x3E, 0x9F, 0x99, 0xCC, 0xE4, 0x09, 0x9C, 0x27, 0xF0, 0xE1, 0x73, 0x9E,\n  0x33, 0x67, 0xE6, 0xF3, 0x9F, 0x3F, 0xE7, 0xF3, 0xF9, 0xFF, 0xFF, 0x01,\n  0x02, 0xE4, 0xCF, 0x13, 0x08, 0x64, 0x08, 0x90, 0x3F, 0xE1, 0xF3, 0x99,\n  0xC9, 0x4C, 0x9E, 0xC0, 0x79, 0x02, 0x1F, 0x3E, 0xE7, 0x39, 0x73, 0x66,\n  0x3E, 0xFF, 0xF9, 0x73, 0x3E, 0x9F, 0xFF, 0x01, 0xFF, 0x07, 0xE0, 0xCF,\n  0x19, 0xF2, 0x3F, 0x9F, 0xCC, 0x7C, 0xFE, 0xFF, 0x9F, 0xCF, 0x73, 0xCE,\n  0xFF, 0xE7, 0xF3, 0x9F, 0x3C, 0xE7, 0xF3, 0xFC, 0xC9, 0x39, 0x07, 0xCE,\n  0xFF, 0xF3, 0x9F, 0x27, 0x4F, 0x9E, 0x3C, 0xF9, 0x7C, 0x9E, 0x3C, 0xC9,\n  0x93, 0x39, 0x9F, 0x9F, 0x3C, 0xE4, 0xC9, 0x9F, 0x27, 0xF3, 0x9F, 0x73,\n  0x9E, 0x33, 0x67, 0xE6, 0xCC, 0x9F, 0xCF, 0xE7, 0xCF, 0xF9, 0xFF, 0xFF,\n  0x79, 0xF2, 0xE4, 0xC9, 0x93, 0xCF, 0xE7, 0xC9, 0x93, 0x3C, 0x99, 0xF3,\n  0xF9, 0xC9, 0x43, 0x9E, 0xFC, 0x79, 0x32, 0xFF, 0x39, 0xE7, 0x39, 0x73,\n  0x66, 0xCE, 0xFC, 0xF9, 0xFC, 0x39, 0xE7, 0xFF, 0x01, 0xFF, 0x07, 0xE0,\n  0xCF, 0x19, 0xF2, 0x3F, 0x9F, 0xCC, 0x7C, 0xFE, 0xFF, 0x9F, 0xCF, 0x73,\n  0xCE, 0xFF, 0xE7, 0xF3, 0x9F, 0x3C, 0xE7, 0xF3, 0xFC, 0xC9, 0x39, 0x07,\n  0xCE, 0xFF, 0xF3, 0x9F, 0x27, 0x4F, 0x9E, 0x3C, 0xF9, 0x7C, 0x9E, 0x3C,\n  0xC9, 0x93, 0x39, 0x9F, 0x9F, 0x3C, 0xE4, 0xC9, 0x9F, 0x27, 0xF3, 0x9F,\n  0x73, 0x9E, 0x33, 0x67, 0xE6, 0xCC, 0x9F, 0xCF, 0xE7, 0xCF, 0xF9, 0xFF,\n  0xFF, 0x79, 0xF2, 0xE4, 0xC9, 0x93, 0xCF, 0xE7, 0xC9, 0x93, 0x3C, 0x99,\n  0xF3, 0xF9, 0xC9, 0x43, 0x9E, 0xFC, 0x79, 0x32, 0xFF, 0x39, 0xE7, 0x39,\n  0x73, 0x66, 0xCE, 0xFC, 0xF9, 0xFC, 0x39, 0xE7, 0xFF, 0x01, 0xF9, 0x9F,\n  0x39, 0xF0, 0x19, 0x0E, 0xFC, 0xE4, 0xCF, 0x7F, 0xFE, 0xFC, 0x93, 0x3F,\n  0x1C, 0x08, 0x10, 0xF8, 0x73, 0xE0, 0xC3, 0xE7, 0x0F, 0x1F, 0x7E, 0xFE,\n  0xFC, 0xF3, 0xE7, 0x0F, 0x9C, 0x27, 0xF0, 0xE1, 0xC0, 0x81, 0xFC, 0xE1,\n  0x3C, 0x39, 0x9C, 0x27, 0x90, 0x9F, 0xFC, 0x1C, 0xCE, 0x7F, 0x38, 0x4F,\n  0xE0, 0xF3, 0xE1, 0xCF, 0x9F, 0x39, 0x3F, 0x9F, 0x0F, 0x84, 0x4F, 0xF8,\n  0xFF, 0xFF, 0x79, 0x02, 0x1F, 0x0E, 0x1C, 0xC8, 0x1F, 0xCE, 0x93, 0xC3,\n  0x79, 0x02, 0xF9, 0xC9, 0xCF, 0xE1, 0xFC, 0x87, 0xF3, 0x04, 0x3E, 0x1F,\n  0xFE, 0xFC, 0x99, 0xF3, 0xF3, 0xF9, 0xC0, 0x21, 0xE1, 0xFF, 0x01, 0xF9,\n  0x9F, 0x39, 0xF0, 0x19, 0x0E, 0xFC, 0xE4, 0xCF, 0x7F, 0xFE, 0xFC, 0x93,\n  0x3F, 0x1C, 0x08, 0x10, 0xF8, 0x73, 0xE0, 0xC3, 0xE7, 0x0F, 0x1F, 0x7E,\n  0xFE, 0xFC, 0xF3, 0xE7, 0x0F, 0x9C, 0x27, 0xF0, 0xE1, 0xC0, 0x81, 0xFC,\n  0xE1, 0x3C, 0x39, 0x9C, 0x27, 0x90, 0x9F, 0xFC, 0x1C, 0xCE, 0x7F, 0x38,\n  0x4F, 0xE0, 0xF3, 0xE1, 0xCF, 0x9F, 0x39, 0x3F, 0x9F, 0x0F, 0x84, 0x4F,\n  0xF8, 0xFF, 0xFF, 0x79, 0x02, 0x1F, 0x0E, 0x1C, 0xC8, 0x1F, 0xCE, 0x93,\n  0xC3, 0x79, 0x02, 0xF9, 0xC9, 0xCF, 0xE1, 0xFC, 0x87, 0xF3, 0x04, 0x3E,\n  0x1F, 0xFE, 0xFC, 0x99, 0xF3, 0xF3, 0xF9, 0xC0, 0x21, 0xE1, 0xFF, 0x01,\n  0xFF, 0xFF, 0xFF, 0xFC, 0xFF, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xE7, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0x07, 0xF8, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0xFE, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0xFF, 0xFF,\n  0x01, 0xFF, 0xFF, 0xFF, 0xFC, 0xFF, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xE7, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0x07, 0xF8, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0xFE,\n  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0xFF,\n  0xFF, 0x01,\n};\n</code></pre>\n"}, {"tags": ["c", "pointers", "dereference"], "comments": [{"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 5, "creation_date": 1488989697, "post_id": 42676386, "comment_id": 72477354, "body": "<code>++((*q)-&gt;len));</code>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 4, "creation_date": 1488989706, "post_id": 42676386, "comment_id": 72477359, "body": "see the wiki page on <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a>"}, {"owner": {"reputation": 880, "user_id": 4515030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3EsAY.jpg?s=128&g=1", "display_name": "izaak_pyzaak", "link": "https://stackoverflow.com/users/4515030/izaak-pyzaak"}, "edited": false, "score": 0, "creation_date": 1488989806, "post_id": 42676386, "comment_id": 72477446, "body": "Lol, see update. I got there in the end...has been a long day."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1488991294, "post_id": 42676386, "comment_id": 72478577, "body": "Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and remove the tag of the unrelated language. C and C++ are different languages."}, {"owner": {"reputation": 1777, "user_id": 976686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ede54d46af9980731445194bc6603312?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/976686/simon"}, "edited": false, "score": 0, "creation_date": 1488991390, "post_id": 42676386, "comment_id": 72478641, "body": "yes q is basically struct { int len; etc } **q;"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1488991634, "post_id": 42676386, "comment_id": 72478796, "body": "Check out the the C clockwise/spiral rule: <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">c-faq.com/decl/spiral.anderson.html</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1488993517, "post_id": 42676386, "comment_id": 72479956, "body": "@FiddlingBits, the spiral rule is for interpreting declarations, not expressions, and it doesn&#39;t even work correctly for all declarations (consider <code>char **a[3][3]</code>).  It&#39;s easy to construct an <i>expression</i> whose correct interpretation is different than the spiral rule would indicate; sticking close to the OP&#39;s question, consider <code>++(*q)-&gt;next-&gt;len</code>.  You have to know your operator precedence, or else keep a reference close by."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 1, "creation_date": 1489102114, "post_id": 42676386, "comment_id": 72536713, "body": "the C precedence order will trip you/the code up.  Suggest adding another set of parens, as suggested by @RyanMcCullagh"}], "answers": [{"comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1488989806, "post_id": 42676442, "comment_id": 72477444, "body": "He&#39;s not inferring it to be a contiguous array based off the statement, though--that&#39;s what he&#39;s gleaned from the context where he found this statement."}, {"owner": {"reputation": 880, "user_id": 4515030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3EsAY.jpg?s=128&g=1", "display_name": "izaak_pyzaak", "link": "https://stackoverflow.com/users/4515030/izaak-pyzaak"}, "edited": false, "score": 1, "creation_date": 1488989864, "post_id": 42676442, "comment_id": 72477477, "body": "I know that, I&#39;m telling you that  <code>q</code> is pointing to a contiguous array in memory."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 880, "user_id": 4515030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3EsAY.jpg?s=128&g=1", "display_name": "izaak_pyzaak", "link": "https://stackoverflow.com/users/4515030/izaak-pyzaak"}, "edited": false, "score": 2, "creation_date": 1488989989, "post_id": 42676442, "comment_id": 72477583, "body": "@izaak_pyzaak Rather than describe <code>q</code> in words with &quot;appears to be&quot;, post could better show what <code>q</code> is with code, like its declaration."}], "tags": [], "owner": {"reputation": 585, "user_id": 4617334, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/GwUnw.jpg?s=128&g=1", "display_name": "Madhusoodan P", "link": "https://stackoverflow.com/users/4617334/madhusoodan-p"}, "is_accepted": false, "score": 6, "last_activity_date": 1488989902, "last_edit_date": 1488989902, "creation_date": 1488989762, "answer_id": 42676442, "question_id": 42676386, "link": "https://stackoverflow.com/questions/42676386/how-should-i-mentally-parse-this-statement/42676442#42676442", "title": "How should I mentally parse this statement?", "body": "<p><code>*q</code> doesn't really mean it's contiguous array of memory.\nThe answer is it increments the <code>len</code> field of the structure object at memory location <code>q</code></p>\n"}], "owner": {"reputation": 880, "user_id": 4515030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3EsAY.jpg?s=128&g=1", "display_name": "izaak_pyzaak", "link": "https://stackoverflow.com/users/4515030/izaak-pyzaak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489007215, "creation_date": 1488989583, "last_edit_date": 1489007215, "question_id": 42676386, "link": "https://stackoverflow.com/questions/42676386/how-should-i-mentally-parse-this-statement", "title": "How should I mentally parse this statement?", "body": "<p>I encountered the following statement, and mind-farted.</p>\n\n<pre><code>++(*q)-&gt;len;\n</code></pre>\n\n<p><code>q</code> appears to be a contiguous array of memory, which by the looks of it, \nappears to be an array of pointers to <code>structs</code>; getting to grips with a new\ncode base, sorry for the vagueness. </p>\n\n<p>With the above statement are we\ndereferencing <code>q</code>, to get the value which is a pointer, which we then dereference and access the field <code>len</code>, which we then increment? In code, what i'm trying to say is this <code>++((*q)-&gt;len)</code>, would be the explicit execution.</p>\n\n<p>Or should I be reading this as, we dereferenced <code>q</code> and then incremented the value, which we then dereference and get the <code>len</code> field, of the <code>struct</code> that is one ahead of <code>q</code> before the incrementation. Again, in code, what i'm trying to say is this <code>(++(*q))-&gt;len</code>, would be the explicit execution. </p>\n\n<p>Any guidance would be grand</p>\n\n<p>UPDATE: \nI guess the first parse makes sense <code>++((*q)-&gt;len)</code>, as if it was the second case,\nwe would get the value of <code>len</code> and then do nothing with it. </p>\n"}, {"tags": ["c", "memory", "realloc", "strcat-s"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1488988675, "post_id": 42676008, "comment_id": 72476578, "body": "Check the <a href=\"http://en.cppreference.com/w/cpp/string/byte/strcat\" rel=\"nofollow noreferrer\">reference</a>: <i>The behavior is undefined if the destination array is not large enough for the contents of both src and dest and the terminating null character.</i>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1488988696, "post_id": 42676008, "comment_id": 72476592, "body": "I wouldn&#39;t recommend using <code>malloc</code>, <code>strlen</code>, or <code>strcat_s</code> in C++. There are better tools."}, {"owner": {"reputation": 179, "user_id": 4343260, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/RXh8O.jpg?s=128&g=1", "display_name": "Synthetic Ascension", "link": "https://stackoverflow.com/users/4343260/synthetic-ascension"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1488988822, "post_id": 42676008, "comment_id": 72476689, "body": "@FredLarson Quite so - I have considered using std::string, but it sort of feels like cheating. But given the arduous nature of manual memory management on a larger scale, I think I might have to."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1488989082, "post_id": 42676008, "comment_id": 72476897, "body": "It&#39;s not cheating to use the right tools for the job."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1488989099, "post_id": 42676008, "comment_id": 72476916, "body": "&quot; leading me to believe that memory reallocation is taking place&quot;  - none of the standard str*** functions allocate memory."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1488989124, "post_id": 42676008, "comment_id": 72476930, "body": "@SyntheticAscension: Why &quot;cheating&quot;? If I could use nothing from C++ other than string and vector, that alone would be worth the switch. If you&#39;re into &quot;actual&quot; string processing, though (the stuff including lowercase / uppercase conversions, regexes etc.), I&#39;d take a look at <a href=\"http://site.icu-project.org/\" rel=\"nofollow noreferrer\">icu::UnicodeString</a>. A bit clumsier to handle (as it&#39;s based off the Java code base, lacking some of the scaffolding you&#39;d expect from a C++ class), but basically the only way to get &quot;real&quot; (Unicode) string handling capabilities."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488989603, "post_id": 42676008, "comment_id": 72477279, "body": "Maybe you should give us a broader picture of what you are <i>actually</i> trying to achieve. See also <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1488990865, "post_id": 42676008, "comment_id": 72478231, "body": "@FredLarson The question isn&#39;t tagged C++ so <code>std::string</code> is out."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1488991016, "post_id": 42676008, "comment_id": 72478360, "body": "@JeremyP: It was when I commented."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1488991227, "post_id": 42676008, "comment_id": 72478522, "body": "@FredLarson Oh yes. In fact, it was <b>only</b> tagged C++, in which case &quot;use <code>std::string</code>&quot; would have been the best answer."}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1488989941, "post_id": 42676307, "comment_id": 72477544, "body": "I always like to point out that <code>sizeof(char)</code> is 1 by definition, so you could just as well use <code>malloc(100)</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1488990232, "post_id": 42676307, "comment_id": 72477751, "body": "@FredLarson entirely correct, but if I had written <code>malloc(100)</code>, someone else would certainly comment <i>I&#39;d rather write <code>sizeof(char) * 100</code> to emphasize we&#39;re allocating chars</i>."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1488990712, "post_id": 42676307, "comment_id": 72478121, "body": "I&#39;d be one of them :) Prefer <code>sizeof(char) * 100</code> to just <code>100</code>. Actually, I&#39;d prefer <code>calloc(100, sizeof(char))</code>."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1488989387, "creation_date": 1488989387, "answer_id": 42676307, "question_id": 42676008, "link": "https://stackoverflow.com/questions/42676008/does-strcat-s-require-the-use-of-realloc/42676307#42676307", "title": "Does strcat_s() require the use of realloc()?", "body": "<p>Here you allocate exactly 1 char</p>\n\n<pre><code> char *string = (char*)malloc(sizeof(char));\n</code></pre>\n\n<p>so the only string the <code>string</code> can hold is <code>\"\"</code> (the zero length string)</p>\n\n<p>Then you try to append the string <code>\"characters\"</code> to <code>string</code> which cannot hold a string other than <code>\"\"</code> and which is not initialized. Furthermore the result of <code>strlen(string)</code> will be undetermined, because again <code>string</code> is not initialized.</p>\n\n<pre><code> strcat_s(string, strlen(string) + 10 + 1, \"characters\");\n</code></pre>\n\n<p>You probably want this:</p>\n\n<pre><code>char *string = (char*)malloc(sizeof(char) * 100);   // allocate 100 bytes\nstrcpy(string, \"Hello \");\nstrcat_s(string, 100, \"characters\");\n\nprintf(\"%s\\n\", string);  // will display \"Hello characters\".\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1488993690, "last_edit_date": 1488993690, "creation_date": 1488990989, "answer_id": 42676882, "question_id": 42676008, "link": "https://stackoverflow.com/questions/42676008/does-strcat-s-require-the-use-of-realloc/42676882#42676882", "title": "Does strcat_s() require the use of realloc()?", "body": "<blockquote>\n  <p>The above code compiles and runs, leading me to believe that memory\n  reallocation is taking place.</p>\n</blockquote>\n\n<p>Just because the program appears to behave as you expect does not mean that it is correct, or even that its behavior is defined at all from C's perspective.</p>\n\n<blockquote>\n  <p>However when applied on a greater scale\n  (recursively also), I receive memory errors in random places\n  (different each time the program is run).</p>\n  \n  <p>Could <code>strcat_s()</code> be exceeding boundaries?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>Is <code>realloc()</code> therefore\n  required to ensure the memory is properly allocated?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>Neither <code>strcat_s()</code> nor <code>strcat()</code> performs any reallocation.  They are not specified to do so, and it would be unsafe for them to do so.</p>\n\n<p>You receive errors because you are using the function incorrectly (even when you <em>don't</em> get errors).  It is your responsibility to ensure that the second argument does not exceed the size of the array pointed to by the first, but you are flagrantly disregarding that responsibility.  I presume you simply have a serious misunderstanding about what <code>strcat_s()</code> is supposed to do, and what its second parameter means.</p>\n\n<p>The main thing that <code>strcat_s()</code> provides but <code>strcat()</code> doesn't is checking that the <em>specified</em> array bounds are not overrun as a result of the second string being longer than can be accommodated.  This relieves you of checking the length of the second string before performing the concatentation, which is advantageous because <code>strcat_s()</code> can do that itself at very low cost, since it must scan that string anyway. <code>strcat_s()</code> has no more ability than any other C operation or function to determine independently how long is the array to which the first argument points.  It relies on you to tell it.</p>\n\n<p>If you need to accommodate dynamic adjustment of your array size, then that's your responsibility, as is tracking the current size of the allocation.</p>\n"}], "owner": {"reputation": 179, "user_id": 4343260, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/RXh8O.jpg?s=128&g=1", "display_name": "Synthetic Ascension", "link": "https://stackoverflow.com/users/4343260/synthetic-ascension"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1488993690, "creation_date": 1488988570, "last_edit_date": 1488988859, "question_id": 42676008, "link": "https://stackoverflow.com/questions/42676008/does-strcat-s-require-the-use-of-realloc", "title": "Does strcat_s() require the use of realloc()?", "body": "<p>Take the example code*:</p>\n\n<pre><code>char *string = (char*)malloc(sizeof(char));\nstrcat_s(string, strlen(string) + 10 + 1, \"characters\");\n</code></pre>\n\n<p>The above code compiles and runs, leading me to believe that memory reallocation is taking place. However when applied on a greater scale (recursively also), I receive memory errors in random places (different each time the program is run). </p>\n\n<p><strong>Could strcat_s() be exceeding boundaries? Is realloc() therefore required to ensure the memory is properly allocated?</strong></p>\n\n<p><strong>Note:</strong> It could be that the errors are unrelated, although they have been coincidentally cropping up after applying the code from the example.</p>\n\n<p>*The reason I've only allocated one byte initially, is that contextually I'm working with dynamic sizes, so the size of <code>string</code> will change, but by an unknown amount.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488988261, "post_id": 42675537, "comment_id": 72476208, "body": "<code>head = curr-&gt;next;</code> : <code>curr-&gt;next</code> is uninitialezed. It should not be overwritten. maybe <code>curr-&gt;next = head;</code>...<code>head = curr;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488988414, "post_id": 42675537, "comment_id": 72476332, "body": "<code>push(komponen.name,...</code> : <code>komponen</code> is not input data at first time."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488988569, "post_id": 42675537, "comment_id": 72476474, "body": "<code>curr-&gt;name = nm;</code> and <code>char* name to char name[21]</code> : <code>strcpy(curr-&gt;name, nm);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6853587"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488989347, "post_id": 42675537, "comment_id": 72477083, "body": "What should I do with <code>komponen</code>?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488989425, "post_id": 42675537, "comment_id": 72477150, "body": "E.g <code>case 2: &#47;* input to komponen here then push*&#47;             push(komponen.name,komponen.type,komponen.price,  komponen.quantity, komponen.num);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6853587"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488989849, "post_id": 42675537, "comment_id": 72477469, "body": "that fixed it. Thanks."}], "owner": {"user_type": "does_not_exist", "display_name": "user6853587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488987791, "creation_date": 1488987326, "last_edit_date": 1488987791, "question_id": 42675537, "link": "https://stackoverflow.com/questions/42675537/c-thread-bad-access-error-when-input-string-link-list", "title": "C Thread bad access error when input string (link list)", "body": "<p>I have been getting Thread 1 : EXC_BAD_ACCESS error when trying to push a string element into the stack. I've changed the <code>char* name</code> to <code>char name[21]</code> but the assignment char[21] is not assignable to curr->name. Also I've tried fgets but the error still there. Anyone know where the error?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct parts\n{\n    char* name;\n    char* type;\n    int quantity;\n    int price;\n    int num;\n\n    struct parts * next;\n\n}*head,*tail,*curr,komponen;\n\nvoid menu();\nvoid show_Parts();\nvoid push(char* nm, char* tip, int jml, int harga, int nom);\nvoid del();\n\nint main() {\n\n    menu();\n\n\n    del();\n    getchar();\n    return 0;\n}\n\nvoid push(char* nm, char* tip, int jml, int harga, int nom)\n{\n    // 1.\n    curr = (struct parts *)malloc(sizeof(struct parts));\n    // 2.\n    if (curr == NULL) {\n        exit(0);\n    }\n\n    head = NULL;\n    head = curr-&gt;next;\n\n    curr-&gt;name = nm;\n    curr-&gt;type = tip;\n    curr-&gt;quantity = jml;\n    curr-&gt;price = harga;\n    curr-&gt;num = nom;\n\n    curr = head;\n\n    //\n\n    printf(\"Input name of the new item [3..20]: \");\n    scanf(\"%s\",nm);\n    if (strlen(nm) &lt; 3 || strlen(nm) &gt; 20) {\n        printf(\"Length of name must between 3 and 20\");\n        exit(0);\n    }\n    printf(\"Input type of the new item [processor/graphic card/memory]: \");\n    scanf(\"%s\",tip);\n    if (tip != \"processor\" || tip != \"graphic card\" || tip != \"memory\") {\n        printf(\"Input type of existing item. Error\");\n        exit(0);\n    }\n    printf(\"Input quantity of the new item [1..20]: \");\n    scanf(\"%d\",&amp;jml);\n    if (jml &lt; 1 || jml &gt; 20) {\n        printf(\"Quantity between 1 and 20\\n\");\n        exit(0);\n    }\n    printf(\"Input price of new item [$1..$1000]: \");\n    scanf(\"%d\",&amp;harga);\n    if (harga &lt; 1 || harga &gt; 1000) {\n        printf(\"Price between 1 and 1000\\n\");\n        exit(0);\n    }\n    nom++;\n\n    printf(\"--- Add New Item Success ---\\n\");\n\n    tail-&gt;next = NULL;\n}\n\nvoid del()\n{\n    if (curr == NULL) {\n        exit(0);\n    }\n    curr = head;\n    head = head-&gt;next;\n    free(curr);\n}\n\n\nvoid menu()\n{\n    int choic;\n    do {\n    printf(\"BLUE COMPUTER ADMINISTRATOR\\n\");\n    printf(\"++++++++++++++++++++++++++++\\n\");\n    printf(\"1. Item list\\n\");\n    printf(\"2. Add &lt;PUSH&gt; New item\\n\");\n    printf(\"3. Exit\\n\");\n    printf(\"&gt;&gt; Input your choice : \");\n\n    switch (choic) {\n        case 1:\n            show_Parts();\n            break;\n        case 2:\n            push(komponen.name,komponen.type,komponen.price,  komponen.quantity, komponen.num);\n            break;\n        case 3:\n            del();\n            exit(0);\n            break;\n    }\n    scanf(\"%d\",&amp;choic);\n\n    } while (choic != 3);\n}\n\n\nvoid show_Parts()\n{\n    if (curr == NULL) {\n        printf(\"No item in list\\n\");\n        exit(0);\n    }\n    printf(\"            ---- ITEM LIST ----         \\n\\n\");\n    printf(\"-----+------------------+--------+-----------+--------\\n\");\n    printf(\"|No. |    Name          |  Type  |  Quantity | Price|\\n\");\n    do {\n    printf(\"|%d  |%s                |%s      |%d         |%d      \\n\",curr-&gt;num, curr-&gt;name, curr-&gt;type, curr-&gt;quantity, curr-&gt;price);\n        curr = curr-&gt;next;\n    }while (curr != NULL);\n\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "arrays", "recursion"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1488984994, "post_id": 42674481, "comment_id": 72473794, "body": "You do know the size of the array. It is <code>i</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1488985008, "post_id": 42674481, "comment_id": 72473802, "body": "Binary search needs to know the <i>length</i> of the array.  This array is terminated with a sentinel <code>0</code>.  To find the array length, each element needs to be checked against 0.  Might as well also check each element for the sought after number too and skip this whole recursion bit.  If the length is in <code>i</code>, then no need for the terminating <code>0</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488985022, "post_id": 42674481, "comment_id": 72473811, "body": "BTW <code>find_m(a, first, mid-1, m);</code> --&gt; <code>return find_m(a, first, mid-1, m);</code>, <code>if (found==1) {</code> --&gt; <code>if (found == -1) {</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488987610, "post_id": 42674481, "comment_id": 72475709, "body": "<code>scanf (&quot;%d&quot;, m);</code> --&gt; <code>scanf (&quot;%d&quot;, &amp;m); </code>"}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1488985276, "creation_date": 1488985276, "answer_id": 42674754, "question_id": 42674481, "link": "https://stackoverflow.com/questions/42674481/binary-search-using-recursion-without-number-of-elements-in-an-array/42674754#42674754", "title": "Binary search using recursion without number of elements in an array?", "body": "<pre><code>if (a[mid]&gt;m) {\n    find_m(a, first, mid-1, m);\n}\nelse if (a[mid]&lt;m) {\n    find_m(a, first, mid+1, m);\n}\nelse {\n    return mid;\n}\n</code></pre>\n\n<p>In the above code, you're only returning a value in 1 out of the 3 possible branches of that if/else if/else block and then the function ends. So you're getting undefined behaviour for those other 2. You'll need to <code>return</code> the results you get from your calls to <code>find_m()</code>, although by the looks of it <code>found</code> ultimately becomes the position within the array of that value not just 1.</p>\n"}], "owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1488985276, "creation_date": 1488984605, "last_edit_date": 1488984650, "question_id": 42674481, "link": "https://stackoverflow.com/questions/42674481/binary-search-using-recursion-without-number-of-elements-in-an-array", "title": "Binary search using recursion without number of elements in an array?", "body": "<p>I'm writing a program that uses binary search via recursion for integers entered by the user with 0 being the last integer entered. I am assuming the user will enter them in increasing order and that they will not enter more than 10 integers. I've gotten it to work, but it always returns that the number searched for is in the series when it's not. Example:</p>\n\n<pre><code>Numbers entered: 1 2 3 4 5 6 0\nNumber to search for: 9\n9 is in the series\n</code></pre>\n\n<p>I imagine it has something to do with not knowing the size of the array other than that it's maximum is 10, but I don't want to ask for the number of elements the user wants. How do I fix this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint find_m(int a[], int i, int m)\n\n{ \n    int mid;\n\n    if (first&gt;last) {\n        return -1;\n    }\n    mid=(first+last)/2;\n    if (a[mid]&gt;m) {\n        find_m(a, first, mid-1, m);\n    }\n    else if (a[mid]&lt;m) {\n        find_m(a, first, mid+1, m);\n    }\n    else {\n        return mid;\n    }\n\n}\n\n\nint main()\n\n{\n    int a[10], i, m, first, mid, last, found;\n\n    for (i=0; i&lt;10; i++) {\n        printf (\"Please enter integers (no more than 10 numbers) in increasing order with a 0 as the last number\\n\"); \n        scanf (\"%d\", &amp;a[i]);\n        if (a[i]==0) {\n            break;\n        }\n    }   \n\n    printf (\"Now enter a number you would like to find in the series\\n\");\n    scanf (\"%d\", m); \n\n    found=find_m(a, m, 0, i-1);\n\n    if (found==1) {\n        printf (\"%d is not in the series\\n\", m);\n    }\n    else {\n        printf (\"%d is in the series\\n\", m);\n    }\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "azure-cosmosdb"], "comments": [{"owner": {"reputation": 9492, "user_id": 743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/40KVo.jpg?s=128&g=1", "display_name": "Ralph Willgoss", "link": "https://stackoverflow.com/users/743/ralph-willgoss"}, "edited": false, "score": 0, "creation_date": 1548255881, "post_id": 42674478, "comment_id": 95478270, "body": "I use this technique when I just want to check it exists, but not create it."}], "answers": [{"comments": [{"owner": {"reputation": 242, "user_id": 5242327, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/23e14cf6754769c8ddaf32ed2ef50760?s=128&d=identicon&r=PG&f=1", "display_name": "Strelnikov Lev", "link": "https://stackoverflow.com/users/5242327/strelnikov-lev"}, "edited": false, "score": 0, "creation_date": 1489043445, "post_id": 42679824, "comment_id": 72500634, "body": "Thanks. I was using an old version of DocumentDB SDK and the function wasn&#39;t present."}], "tags": [], "owner": {"reputation": 7345, "user_id": 4002490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pnrxe.png?s=128&g=1", "display_name": "Aravind Krishna R.", "link": "https://stackoverflow.com/users/4002490/aravind-krishna-r"}, "is_accepted": true, "score": 12, "last_activity_date": 1488999963, "creation_date": 1488999963, "answer_id": 42679824, "question_id": 42674478, "link": "https://stackoverflow.com/questions/42674478/correct-way-to-check-if-documentdb-object-exists/42679824#42679824", "title": "Correct way to check if DocumentDB object exists", "body": "<p>You should use the new <code>CreateDatabaseIfNotExistsAsync</code> in the DocumentDB SDK instead of both these approaches, if that's what you're trying to do. </p>\n\n<p>In terms of server resources (request units), a <code>ReadDocumentAsync</code> is slightly more lightweight than <code>CreateDatabaseQuery</code>, so you should use that when possible. </p>\n"}, {"tags": [], "owner": {"reputation": 250, "user_id": 4676239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce55e6ba2fe0471db7742af3544d98e?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Ja", "link": "https://stackoverflow.com/users/4676239/michal-ja"}, "is_accepted": false, "score": 9, "last_activity_date": 1524521080, "last_edit_date": 1524521080, "creation_date": 1524091475, "answer_id": 49910118, "question_id": 42674478, "link": "https://stackoverflow.com/questions/42674478/correct-way-to-check-if-documentdb-object-exists/49910118#49910118", "title": "Correct way to check if DocumentDB object exists", "body": "<p>I've just seen the try/catch example in one of the Microsoft provided sample project and it got me baffled, as it is plain wrong: you don't use try/catch for control flow. </p>\n\n<p>Never.</p>\n\n<p>This is just bad code. The new SDK provides  CreateDatabaseIfNotExistsAsync  which I can only hope doesn't just hide this shit. In older lib just use the query approach, unless you want to get shouted at by whoever is going to review the code.</p>\n"}], "owner": {"reputation": 242, "user_id": 5242327, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/23e14cf6754769c8ddaf32ed2ef50760?s=128&d=identicon&r=PG&f=1", "display_name": "Strelnikov Lev", "link": "https://stackoverflow.com/users/5242327/strelnikov-lev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5383, "favorite_count": 0, "accepted_answer_id": 42679824, "answer_count": 2, "score": 11, "last_activity_date": 1524521080, "creation_date": 1488984596, "last_edit_date": 1516218559, "question_id": 42674478, "link": "https://stackoverflow.com/questions/42674478/correct-way-to-check-if-documentdb-object-exists", "title": "Correct way to check if DocumentDB object exists", "body": "<p>In Microsoft examples I saw two ways to check if DocumentDb object like Database, DocumentCollection, Document etc. exists :</p>\n\n<p>First is by creating a query:</p>\n\n<pre><code>Database db = client.CreateDatabaseQuery().Where(x =&gt; x.Id == DatabaseId).AsEnumerable().FirstOrDefault();\nif (db == null)\n    {\n        await client.CreateDatabaseAsync(new Database { Id = DatabaseId });\n    }\n</code></pre>\n\n<p>The second one is by using \"try catch\" block:</p>\n\n<pre><code>    try\n    {\n       await this.client.ReadDatabaseAsync(UriFactory.CreateDatabaseUri(databaseName));\n    }\n    catch (DocumentClientException de)\n    {\n        if (de.StatusCode == HttpStatusCode.NotFound)\n        {\n           await this.client.CreateDatabaseAsync(new Database { Id = databaseName });\n         }\n         else\n         {\n             throw;\n          }\n    }\n</code></pre>\n\n<p>What is the correct way to do this procedure in terms of performance?</p>\n"}, {"tags": ["c", "linux", "http", "ssl", "https"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1488986954, "post_id": 42674227, "comment_id": 72475222, "body": "Shouldn&#39;t the encoded username/password be passed in as a header?"}, {"owner": {"reputation": 33, "user_id": 6473926, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MbHnZU1qAxI/AAAAAAAAAAI/AAAAAAAAAEU/fjG5PThFtS0/photo.jpg?sz=128", "display_name": "Tarun", "link": "https://stackoverflow.com/users/6473926/tarun"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1489033260, "post_id": 42674227, "comment_id": 72496742, "body": "Yes it has been passed. The variable name is base64EncodeOutput."}, {"owner": {"reputation": 33, "user_id": 6473926, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MbHnZU1qAxI/AAAAAAAAAAI/AAAAAAAAAEU/fjG5PThFtS0/photo.jpg?sz=128", "display_name": "Tarun", "link": "https://stackoverflow.com/users/6473926/tarun"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1489053945, "post_id": 42674227, "comment_id": 72506987, "body": "The problem is related to TLS/SSL. The server supports TLSv1.0. I used openssl s_client command to test if the openssl connection establishes.The output is --- No client certificate CA names sent     Protocol  : TLSv1     ------ SOME FIELDS ---------------     Verify return code: 18 (self signed certificate) --- read:errno=0"}, {"owner": {"reputation": 33, "user_id": 6473926, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MbHnZU1qAxI/AAAAAAAAAAI/AAAAAAAAAEU/fjG5PThFtS0/photo.jpg?sz=128", "display_name": "Tarun", "link": "https://stackoverflow.com/users/6473926/tarun"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1489086457, "post_id": 42674227, "comment_id": 72529076, "body": "The cause of the problem is weak ephemeral key used by the server. Somehow my application rejects the weak key. If anyone can suggest how to overcome this problem, then please reply."}], "owner": {"reputation": 33, "user_id": 6473926, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MbHnZU1qAxI/AAAAAAAAAAI/AAAAAAAAAEU/fjG5PThFtS0/photo.jpg?sz=128", "display_name": "Tarun", "link": "https://stackoverflow.com/users/6473926/tarun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488984525, "creation_date": 1488983923, "last_edit_date": 1488984525, "question_id": 42674227, "link": "https://stackoverflow.com/questions/42674227/https-client-could-not-get-authorized-by-the-server", "title": "HTTPS client could not get authorized by the server", "body": "<p>I am writing a C code on Linux platform(Fedora) for HTTPS client. The client can successfully create TCP connection and SSL connection. It could get the certificate from the server but when I send a HTTP GET request on the SSL socket the server sends \"Authorization Exception\".</p>\n\n<p>When I send the GET request from a web browser (<a href=\"https://hostname:port/path\" rel=\"nofollow noreferrer\">https://hostname:port/path</a>) I get the prompt for entering username/password and after entering the credentials(same credentials as being entered in my HTTPS client application), correct response is received from the server.</p>\n\n<p>I am afraid if I am making a wrong HTTP \"request\" string.</p>\n\n<p>Below is the code snippet:</p>\n\n<pre><code>  char* base64EncodeOutput, *text=\"user1:pass\"; \n\n  // Server expects credentials in base64encoding\n  Base64Encode(text, strlen(text), &amp;base64EncodeOutput);\n  printf(\"Output (base64): %s\\n\", base64EncodeOutput);\n\n  char request[800];\n  sprintf(request,\"GET /abc_webapi_version/HTTP/1.1\\r\\n\"\n                   \"Authorization: Basic %s\\r\\n\"\n                   \"Accept: application/xml\\r\\n\"\n                   \"Host: 10.0.10.10:8080\\r\\n\"\n                   \"User-Agent: WebAPI/HTTP-client\\r\\n\"\n                   \"\\r\\n\"\n                   ,base64EncodeOutput);\n  int rety=0;\n  rety = SSL_write(ssl, (const void *)request, strlen(request));\n  printf(\"Ret SSL_Write %d\\n\",rety);\n\n  char *response;\n  response = (char *)malloc(100*sizeof(char));\n  rety = SSL_read(ssl, (void *)respnonse, 100);\n  printf(\"Bytes read %d\\n\", rety);\n  printf(\"Data= %s\\n\", response);\n\n  SSL_free(ssl);\n  close(server);\n</code></pre>\n\n<p>Please help me and let me know if I am making a correct HTTP get request or if there is anything else which is causing the problem.</p>\n"}, {"tags": ["c", "optimization"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1488983559, "post_id": 42674009, "comment_id": 72472661, "body": "is it necessary to use double?"}, {"owner": {"reputation": 4757, "user_id": 382485, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/422fe6da66c4912411106a60a3de4da1?s=128&d=identicon&r=PG", "display_name": "Maanu", "link": "https://stackoverflow.com/users/382485/maanu"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1488983666, "post_id": 42674009, "comment_id": 72472756, "body": "cmd_data is INT32. But parameters are floating point contsants"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1488983772, "post_id": 42674009, "comment_id": 72472844, "body": "First: measure it. Secondly: a construct of if/else ifs is effectively the worst case of a switch."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1488983810, "post_id": 42674009, "comment_id": 72472868, "body": "<i>&quot;Customer complaints that code is not optimized.&quot;</i> How you define <i>optimized</i>? Why is the code above not considered optimized?  You have not defined the problem enough."}, {"owner": {"reputation": 24524, "user_id": 1457000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3irT.jpg?s=128&g=1", "display_name": "Adam D. Ruppe", "link": "https://stackoverflow.com/users/1457000/adam-d-ruppe"}, "edited": false, "score": 0, "creation_date": 1488983849, "post_id": 42674009, "comment_id": 72472907, "body": "What, exactly, are your customers complaining about? Is it executing too slowly? (that should be false if it isn&#39;t used... usually) Taking up too much space? Or are they just ignorant fools trying to tell you how to do your job and you need to diplomatically deal with nonsense?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1488984396, "post_id": 42674009, "comment_id": 72473330, "body": "Using <code>static inline</code> and perhaps an early if statement that handles the most frequent command (if there truly is one), should solve the problem."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1488985963, "post_id": 42674009, "comment_id": 72474492, "body": "What are the definitions of CMD_WR_SUP_PARA1 etc, are they integers?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1488986947, "post_id": 42674009, "comment_id": 72475216, "body": "If <code>cmd_data</code> and all the <code>*_PARA1</code> and <code>*_PARA2</code> are integers, then you can rewrite the conversions presented to use only integer arithmetic.  That could make those a bit faster."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1488987353, "post_id": 42674009, "comment_id": 72475523, "body": "@wildplasser No, a construct of <code>if - else if</code> is identical to a <code>switch</code>, on the machine code level. The only difference is that <code>if - else if</code> might be harder to read."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1488988870, "post_id": 42674009, "comment_id": 72476746, "body": "Given that you seem to consider the fact that &quot;Some of the commands for which data conversion is not required are frequently used&quot; to be relevant to the optimization question, I hypothesize that either you, the reviewer, or both of you suppose that it is comparatively expensive to reach the <code>default</code> block.  That&#39;s probably wrong, but you might nevertheless mollify the reviewer simply by putting the <code>default</code> block first in the switch.  Some people recommend that anyway as a matter of style.  There is no reason to think that it will really make the code any faster, however."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1488989182, "post_id": 42674009, "comment_id": 72476973, "body": "@Lundin I wrote <i>the worst case</i> . That is: primitive compilers and the <i>I could not find any smarter way</i> for non-primitive compilers."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488990798, "post_id": 42674009, "comment_id": 72478188, "body": "Rather than using incorrect rounding <code>(INT32)((((DOUBLE)cmd_data * CMD_WR_ACC_PARA1) &#47; CMD_WR_ACC_PARA2) + 0.5)</code> use <code>lrint(1.0*cmd_data * CMD_WR_ACC_PARA1 &#47; CMD_WR_ACC_PARA2)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1488984892, "post_id": 42674510, "comment_id": 72473730, "body": "Nice refactoring +1. It probably isn&#39;t any faster though or significantly smaller than the switch."}, {"owner": {"reputation": 4757, "user_id": 382485, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/422fe6da66c4912411106a60a3de4da1?s=128&d=identicon&r=PG", "display_name": "Maanu", "link": "https://stackoverflow.com/users/382485/maanu"}, "edited": false, "score": 0, "creation_date": 1488985103, "post_id": 42674510, "comment_id": 72473866, "body": "The customer complained about the optimization during code review.  I have to check what bothers him. The refactoring will not work as for other commands, the formulas are different. Profiling is not possible as itron system is not ready."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1488985905, "post_id": 42674510, "comment_id": 72474446, "body": "Because the result is truncated to 32 bits, and a <code>double</code> has 52 bits of mantissa, you can safely combine the multiplier and the divisor into a single multiplicative double constant. Most C compilers cannot infer that, so it might even yield a runtime speedup. Also, your if clause should probably read <code>if (params_table[cmd_no].convert)</code>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1488986552, "post_id": 42674510, "comment_id": 72474917, "body": "@NominalAnimal Thanks.  Edited."}, {"owner": {"reputation": 1260, "user_id": 3804799, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/938bb746e768e52b02aa3c2c1f7a672b?s=128&d=identicon&r=PG&f=1", "display_name": "icebp", "link": "https://stackoverflow.com/users/3804799/icebp"}, "edited": false, "score": 0, "creation_date": 1488998372, "post_id": 42674510, "comment_id": 72482918, "body": "The compiler is probably smart enought to optimize the switch. Look at the generated assembly to get an idea. But this solution has the advantage of making the code cleaner. You can have a table of functions that perform the conversion, but that feels like overkill."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 5, "last_activity_date": 1488986410, "last_edit_date": 1488986410, "creation_date": 1488984687, "answer_id": 42674510, "question_id": 42674009, "link": "https://stackoverflow.com/questions/42674009/optimize-case-statement/42674510#42674510", "title": "Optimize Case Statement", "body": "<p>If by \"not optimized\" your customer means repetitive, it looks like you can put a good deal of this logic in a table.</p>\n\n<p>Assuming your command types are sequentially numbered, i.e.</p>\n\n<pre><code>#define CMD_WR_ACC 0\n#define CMD_WR_BIAS 1\n#define CMD_WR_SUP 2\n...\n</code></pre>\n\n<p>You define the table like this:</p>\n\n<pre><code>struct params {\n    int convert;       // whether or not to convert\n    double param1;\n    double param2;\n} params_table[] = {\n    { 1, CMD_WR_ACC_PARA1, CMD_WR_ACC_PARA2 },\n    { 1, CMD_WR_BIAS_PARA1, CMD_WR_BIAS_PARA2 },\n    { 1, CMD_WR_SUP_PARA1, CMD_WR_SUP_PARA2 },\n    ...\n    { 0, 0, 0}\n    ...\n};\n</code></pre>\n\n<p>Then your code looks like this:</p>\n\n<pre><code>if (params_table[cmd_no].convert) {\n    converted_command_data = (INT32)((((DOUBLE)cmd_data * \n         params_table[cmd_no].param1) / params_table[cmd_no].param2) + 0.5);\n} else {\n    converted_command_data = cmd_data;\n}\n</code></pre>\n\n<p>If the starting index of your commands is not 0, you'll need to subtract the lowest command number from <code>cmd_no</code> to get the index into the table.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1488986553, "post_id": 42674750, "comment_id": 72474919, "body": "I&#39;d say that rewriting to use <code>if</code>/<code>then</code>/<code>else</code> instead of <code>switch</code> will not help <i>at all</i>.  There&#39;s no reason to think that the compiler would produce smaller or faster code that way, and the resulting source would be less readable (to me)."}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1488986922, "post_id": 42674750, "comment_id": 72475204, "body": "I agree @JohnBollinger. I said the same thing. Let the compiler do the optimization. That is what I suggested. That, and look if it is possible to eliminate double floating points using integer math or a lookup table."}], "tags": [], "owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "is_accepted": false, "score": 0, "last_activity_date": 1488988364, "last_edit_date": 1495535404, "creation_date": 1488985265, "answer_id": 42674750, "question_id": 42674009, "link": "https://stackoverflow.com/questions/42674009/optimize-case-statement/42674750#42674750", "title": "Optimize Case Statement", "body": "<p>Rewriting your code from a switch to a if/then/else is not going to improve it much. The first thing to try, is compiling with the optimization options set to the highest. Let the compiler, gcc I assume, optimize it for you. That is where the low hanging fruit usually is.</p>\n\n<p>How can this help? \nGCC by default balances code speed optimization with code size and debugging ease. By default, gcc generates that is easy to debug because the code flow more closely matches the source code, and Variables are stored (which is slow) but this enables easier debugging using gdb and breakpoints, since the variables will be easily visible on the stack. </p>\n\n<p>When we turn on optimization, more optimization is done including storing some local variables only in processor registers (which are fast) and also by reordering the code to optimize code flow through the cpu execution pipeline. The downside is it is harder to follow when single stepping through the machine code. It also takes slightly longer to compile. <strong>But it is worth it!</strong></p>\n\n<p>To compile with optimization flags set to their highest, try -O3 which sets optimization more for code size and execution time:</p>\n\n<pre><code>-O3\n</code></pre>\n\n<p>There is a good discussion about the optimization flags here:\n<a href=\"https://stackoverflow.com/a/32941238/6693299\">https://stackoverflow.com/a/32941238/6693299</a></p>\n\n<p>After compiling with the optimization flag set, look to the math which is using expensive floating point operations. Do you need them? Double multiplications and divisions are expensive, just to convert them to int32s? Are you sure this needs to be done. Can you convert the math to use only integer operations?  </p>\n\n<p>Can you share the values for the listed constants? You might be able to convert some or all of the math into a lookup table.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1488987393, "post_id": 42675420, "comment_id": 72475555, "body": "In fact, an <code>if</code> / <code>else</code> / <code>if</code> is not necessarily compiled to the same thing as a <code>switch</code>.  A compiler is more likely to compile a <code>switch</code> to use a jump table than it is to do the same with an <code>if</code> / <code>else</code> / <code>if</code> block.  Since the alternative is to test each condition in turn, a <code>switch</code> may sometimes yield different and more efficient code."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1488987923, "post_id": 42675420, "comment_id": 72475942, "body": "@JohnBollinger I clarified what I meant with an edit."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1488987879, "last_edit_date": 1495540974, "creation_date": 1488987046, "answer_id": 42675420, "question_id": 42674009, "link": "https://stackoverflow.com/questions/42674009/optimize-case-statement/42675420#42675420", "title": "Optimize Case Statement", "body": "<blockquote>\n  <p>Will direct if else statements optimize code?</p>\n</blockquote>\n\n<p>No, a list of <code>if - else if</code> is the very same things as using <code>switch</code> on the machine code level, given that the <code>if - else if</code> is of the nature</p>\n\n<pre><code>if(integer == 1) \n{ ... }  \nelse if (integer == 2) \n{ ... }\n</code></pre>\n\n<p>Where 1 and 2 are any kind of compile-time integer constants. In which case it will yield 100% equivalent machine code as </p>\n\n<pre><code>switch(integer)\n{\n  case 1: ... break;\n  case 2: ... break;\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Is there any other options to optimize the code in this case?</p>\n</blockquote>\n\n<p>A few things:</p>\n\n<ul>\n<li>In case the constants used by the switch are adjacent, preferably going from 0 to <em>n</em>, the whole switch could be replaced by a function pointer jump table. Modern compilers should do just that behind the lines, but older compilers may struggle.</li>\n<li><p>It isn't obvious while floating point is needed here, since you cast the result to int. Replacing floating point calculations with integer calculations might improve performance quite a bit, especially on microcontroller systems etc that lack FPU. If the only purpose of the float numbers is to round division, then consider that</p>\n\n<pre><code>// probably slow\nint32_t a = (int32_t)((((double)cmd_data * CMD_WR_ACC_PARA1) / CMD_WR_ACC_PARA2) + 0.5);\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>// probably faster\nint32_t b = ( (cmd_data * CMD_WR_ACC_PARA1) + CMD_WR_ACC_PARA2/2 ) / CMD_WR_ACC_PARA2;\n</code></pre>\n\n<p>(See <a href=\"https://stackoverflow.com/questions/2422712/rounding-integer-division-instead-of-truncating\">Rounding integer division (instead of truncating)</a>)</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "is_accepted": false, "score": 1, "last_activity_date": 1489044186, "last_edit_date": 1489044186, "creation_date": 1488991837, "answer_id": 42677190, "question_id": 42674009, "link": "https://stackoverflow.com/questions/42674009/optimize-case-statement/42677190#42677190", "title": "Optimize Case Statement", "body": "<p>This does not even need a case statement since it is easily vectorizable.  One of the easiest ways to do this is to use an X-macro.</p>\n\n<p>Since no values were provided, I am just using sequential integers as placeholders</p>\n\n<pre><code>#define XMACRO(X,...) \\\n  /*Label, Parameter1, Parameter2,...*/ \\\n  X(ACC, 1.0, 2.0, __VA_ARGS__) \\\n  X(BIAS, 3.0, 4.0, __VA_ARGS__) \\\n  X(SUP, 5.0, 6.0, __VA_ARGS__) \\\n  X(FILL, 7,0, 8.0, __VA_ARGS__) \\\n  //more entries here\n\n#define AS_ENUM(label,...) CMD_WR_##label,\nenum commands { XMACRO(AS_ENUM) CMD_WR_COUNT };\n\n#define AS_PREMULTIPLIED(label, p1, p2,...) ((p1)/(p2)),\nconst double convert_multipliers[CMD_WR_COUNT] = { XMACRO(AS_PREMULTIPLIED) };\n\nint convert_data(int cmd_data, unsigned cmd_no){\nreturn (cmd_no &gt;= CMD_WR_COUNT) \n  ? cmd_data\n  : (int) (cmd_data * convert_multipliers[cmd_no] + 0.5);\n}\n</code></pre>\n\n<p>Edit:\nIt's actually possible that the switch statement is more optimal if the code is called often, but not in tight loops since most compilers can generate a jump table.  The other parameters may even be compiled into a single constant if the correct options are enabled (such as -Ofast with gcc).  Fortunately the X-macro can handle your case statements too:</p>\n\n<pre><code>#define AS_CASE(label, p1, p2,...) case CMD_WR_##label : \\\n  return (int) (cmd_data * ((p1)/(p2)) + 0.5);\n\nswitch(cmd_no){\n  XMACRO(AS_CASE)\n  default: return cmd_data;\n}\n</code></pre>\n\n<p>The only way to know if its performance optimized for sure is to measure, but X-macros will help eliminate repetitive code and allow you to keep the data together in an easily readable and modifiable tabular format (and at least look optimized).  When you have to add another parameter down the road, you will only need to add a row instead of grokking through every function.</p>\n"}, {"tags": [], "owner": {"reputation": 1777, "user_id": 976686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ede54d46af9980731445194bc6603312?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/976686/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1489076406, "last_edit_date": 1489076406, "creation_date": 1488992316, "answer_id": 42677341, "question_id": 42674009, "link": "https://stackoverflow.com/questions/42674009/optimize-case-statement/42677341#42677341", "title": "Optimize Case Statement", "body": "<p>You can regroup common code together, and do divisions at compile or init time instead of at execution. </p>\n\n<p>I assume CMD_WR_* are increments (elements of an enum).</p>\n\n<p>Here you do the division first :</p>\n\n<pre><code>double coef[] = {CMD_WR_ACC_PARA1/CMD_WR_ACC_PARA2, CMD_WR_BIAS_PARA1/CMD_WR_BIAS_PARA2, CMD_WR_SUP_PARA1/CMD_WR_SUP_PARA2, CMD_WR_FIL_PARA1/CMD_WR_FIL_PARA2, etc};\n</code></pre>\n\n<p>Then you do the computation with an if/else (if there are few) :</p>\n\n<pre><code>if (cmd_no &gt;= CMD_WR_ACC &amp;&amp; cmd_no &lt;= CMD_WR_FIL) {\n   converted_command_data = (INT32)((DOUBLE)cmd_data * coef[cmd_no-CMD_WR_ACC]) + 0.5;\n} else {\n    converted_command_data = cmd_data;\n}\n</code></pre>\n\n<p>Or with a switch if they are many :</p>\n\n<pre><code>switch (cmd_no) {\n  case CMD_WR_ACC:\n  case CMD_WR_BIAS:\n  case CMD_WR_SUP:\n  case CMD_WR_FIL:\n     converted_command_data = (INT32)((DOUBLE)cmd_data * coef[cmd_no-CMD_WR_ACC]) + 0.5;\n     break;\n  [...]\n  default:\n    converted_command_data = cmd_data;\n    break;\n}\n</code></pre>\n\n<p>(I don't think this makes a significant difference in terms of performance)</p>\n"}], "owner": {"reputation": 4757, "user_id": 382485, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/422fe6da66c4912411106a60a3de4da1?s=128&d=identicon&r=PG", "display_name": "Maanu", "link": "https://stackoverflow.com/users/382485/maanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 993, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1489076406, "creation_date": 1488983342, "question_id": 42674009, "link": "https://stackoverflow.com/questions/42674009/optimize-case-statement", "title": "Optimize Case Statement", "body": "<p>We have a method for writing command data to a device. The method first converts the data to the form accepted by the device and then writes the data to the serial port. The data conversion is done with a case statement as given below. For 10 commands we need to convert data. For other commands,we don't have to convert the data (around 10 commands).</p>\n\n<p>Customer complaints that code is not optimized. Some of the commands for which data conversion is not required are frequently used.</p>\n\n<p>Will direct if else statements optimize code?<br>\nIs there any other options to optimize the code in this case?</p>\n\n<pre><code>switch (cmd_no)\n{\ncase CMD_WR_ACC:\n    converted_command_data = (INT32)((((DOUBLE)cmd_data * CMD_WR_ACC_PARA1) / CMD_WR_ACC_PARA2) + 0.5);\n    break;\ncase CMD_WR_BIAS:\n    converted_command_data = (INT32)((((DOUBLE)cmd_data * CMD_WR_BIAS_PARA1) / CMD_WR_BIAS_PARA2) + 0.5);\n    break;\ncase CMD_WR_SUP:\n    converted_command_data = (INT32)((((DOUBLE)cmd_data * CMD_WR_SUP_PARA1) / CMD_WR_SUP_PARA2) + 0.5);\n    break;\ncase CMD_WR_FIL:\n    converted_command_data = (INT32)((((DOUBLE)cmd_data * CMD_WR_FIL_PARA1) / CMD_WR_FIL_PARA2) + 0.5);\n    break;\n    .\n    .\ndefault:\n    converted_command_data = cmd_data;\n    break;\n}\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor", "inline"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488982840, "post_id": 42673756, "comment_id": 72472097, "body": "The only answer is incorrect how!? That GCC specific attribute does as advertised."}, {"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 3, "creation_date": 1488983066, "post_id": 42673756, "comment_id": 72472277, "body": "It&#39;s not wrong, it just doesn&#39;t do what this question is asking (because they&#39;re totally different questions)."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1488983284, "post_id": 42673756, "comment_id": 72472467, "body": "IMO it is either impossible or meaningless: inlining works because there is no argument passing needed, and because variables are shared between caller and callee. This process depends on (register-)allocation, which is compiler- and architecture dependent. For example: Imagine what would happen if you <i>inlined</i> on a machine with 32 registers, and compiled the preprocessed code on a machine with fewer: register-trashing would be the result."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1488986607, "post_id": 42673756, "comment_id": 72474958, "body": "This is not a simple preprocessing transformation, because standard C does not have an expression construction which can accommodate local variables. Nor can you easily express control flow within an expression. You could try using clang or some other compiler library to produce an internal representation of the inlined code and then attempt to recreate C code from that, but it will be a lot of work and the results won&#39;t be particularly readable. Perhaps this is an X-Y problem and you need to ask a more direct question about what you really need."}], "answers": [{"tags": [], "owner": {"reputation": 260, "user_id": 2110544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678d90e7d4d521f4e9a5b85c1bc4bd27?s=128&d=identicon&r=PG", "display_name": "ArchimedesMP", "link": "https://stackoverflow.com/users/2110544/archimedesmp"}, "is_accepted": false, "score": 1, "last_activity_date": 1488983774, "creation_date": 1488983774, "answer_id": 42674179, "question_id": 42673756, "link": "https://stackoverflow.com/questions/42673756/inline-all-functions-and-get-c-code/42674179#42674179", "title": "Inline all functions and get C code", "body": "<p>That won't help you. At least for gcc the inlining happens after the textual source code has been transformed into the internal representation.</p>\n\n<p>You can take a look at this:</p>\n\n<pre><code>int x;\n\n__attribute__((always_inline)) inline void foobar () { x--; }\n\nint main() {\n    x = 1;\n    foobar (); \n    return x;\n}\n</code></pre>\n\n<p>Calling <code>g++ example.cpp -O0 -g -E</code> on this will result in:</p>\n\n<pre><code>\u2713 pan:~$ g++ example.cpp -O0 -g -E\n# 1 \"example.cpp\"\n# 1 \"/home/meyer//\"\n# 1 \"&lt;built-in&gt;\"\n# 1 \"&lt;command-line&gt;\"\n# 1 \"/usr/include/stdc-predef.h\" 1 3 4\n# 1 \"&lt;command-line&gt;\" 2\n# 1 \"example.cpp\"\nint x;\n\n__attribute__((always_inline)) inline void foobar () { x--; }\n\nint main() {\n    x = 1;\n    foobar ();\n    return x;\n}\n</code></pre>\n\n<p>but when compiling with <code>g++ example.cpp -O0 -g -o example.elf</code>, the resulting executable will not have a function <code>foobar</code> anymore. You can check with <code>objdump -w | less</code>, and compare to omitting the attribute.</p>\n\n<p>I used <code>-O0</code> to prevent any optimizations from happening, since most compilers should be smart enough to figure out that the function can be trivially optimized to a <code>int main () { return 0; }</code>.</p>\n\n<p>I don't know if there is a tool for what you try to do out there. But I'm afraid you need a full C++-aware lexer/parser-combination for a C++-to-C++-cross-compiler to do this correctly in all cases.</p>\n"}], "owner": {"reputation": 2899, "user_id": 1072062, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b3be091020b4de9ecd4391d6833fc7e8?s=128&d=identicon&r=PG", "display_name": "iomartin", "link": "https://stackoverflow.com/users/1072062/iomartin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "closed_date": 1488986135, "answer_count": 1, "score": -1, "last_activity_date": 1488988480, "creation_date": 1488982693, "last_edit_date": 1495541831, "question_id": 42673756, "link": "https://stackoverflow.com/questions/42673756/inline-all-functions-and-get-c-code", "closed_reason": "Not suitable for this site", "title": "Inline all functions and get C code", "body": "<p>Is there a tool that takes a C source file as input, inlines all functions and outputs another C source file?</p>\n\n<p>All functions are contained in one single file and there are no recursions/gotos. Functions do not necessarily have the <code>inline</code> attribute.</p>\n\n<p>It is OK (and actually desirable) if this tool ignores functions declared in standard libraries (such as <code>printf</code>, <code>malloc</code> and <code>sqrt</code>).</p>\n\n<p>Related question: <a href=\"https://stackoverflow.com/questions/13970806/inline-all-the-functions-in-c-code-with-gcc/13970971#13970971\">link</a>: the only answer is incorrect.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 102162, "user_id": 613130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/40bd5f390cba274159501bb244bc29f4?s=128&d=identicon&r=PG", "display_name": "xanatos", "link": "https://stackoverflow.com/users/613130/xanatos"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1488982538, "post_id": 42673564, "comment_id": 72471882, "body": "@usr You should explain <a href=\"http://stackoverflow.com/q/1694036/613130\">Why is the gets function so dangerous that it should not be used?</a>"}, {"owner": {"reputation": 102162, "user_id": 613130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/40bd5f390cba274159501bb244bc29f4?s=128&d=identicon&r=PG", "display_name": "xanatos", "link": "https://stackoverflow.com/users/613130/xanatos"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1488982945, "post_id": 42673564, "comment_id": 72472176, "body": "@usr Sadly &quot;scholastic&quot; C often doesn&#39;t include the chapter &quot;how to write safe and secure C code&quot; :-)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1489102406, "post_id": 42673564, "comment_id": 72536818, "body": "when compiling, always enable all the warnings, then fix those warnings (don&#39;t hide them)  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic</code>  I also use: <code>-Wconversion -std=gnu11</code> )"}], "answers": [{"tags": [], "owner": {"reputation": 102162, "user_id": 613130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/40bd5f390cba274159501bb244bc29f4?s=128&d=identicon&r=PG", "display_name": "xanatos", "link": "https://stackoverflow.com/users/613130/xanatos"}, "is_accepted": true, "score": 2, "last_activity_date": 1488982417, "creation_date": 1488982417, "answer_id": 42673641, "question_id": 42673564, "link": "https://stackoverflow.com/questions/42673564/what-is-wrong-with-this-program-string-related/42673641#42673641", "title": "What is wrong with this program? (string related)", "body": "<p>You must repeat the</p>\n\n<pre><code>if(is_word_started==1)\n{\n    is_word_started=0;\n    word[j]='\\0';\n    printf(\"%s\\n\", word);\n    j=0;\n}\n</code></pre>\n\n<p>outside the <code>for ()</code> cycle (at the end of its <code>}</code>)</p>\n\n<p>Otherwise when you finish parsing the <code>str</code>, the letters you were accumulating in <code>word</code> are \"lost\".</p>\n\n<p>Technically you could short it to:</p>\n\n<pre><code>if(is_word_started==1)\n{\n    word[j]='\\0';\n    printf(\"%s\\n\", word);\n}\n</code></pre>\n\n<p>because after that you won't reuse those variables.</p>\n\n<p>Other than the \"Never use <code>gets()</code>\" suggested by @usr, you should correctly-size <code>word</code>: always use the worst case. If <code>str[1000]</code> then <code>word[1000]</code>!</p>\n"}], "owner": {"reputation": 7, "user_id": 7608806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80958ebe8d9f3e16a79ef562d49ca530?s=128&d=identicon&r=PG&f=1", "display_name": "Reaz", "link": "https://stackoverflow.com/users/7608806/reaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42673641, "answer_count": 1, "score": 0, "last_activity_date": 1488982417, "creation_date": 1488982234, "question_id": 42673564, "link": "https://stackoverflow.com/questions/42673564/what-is-wrong-with-this-program-string-related", "title": "What is wrong with this program? (string related)", "body": "<p>I'm trying to find bug in the following program.</p>\n\n<p>If I give input as \"This is a test\", output shows \"This Is A\". I'm trying to find out why \"Test\" is missing.</p>\n\n<p>Please help me to understand the problem. Thanks in advance.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n    char str[1000], word[100];\n    int i, j, length, is_word_started;\n\n    gets(str);\n    length=strlen(str);\n    is_word_started=0;\n\n    for(i=0, j=0; i&lt;length; i++)\n    {\n        if(str[i]&gt;='a' &amp;&amp; str[i]&lt;='z')\n        {\n            if(is_word_started==0)\n            {\n                is_word_started=1;\n                word[j]='A'+str[i]-'a';\n                j++;\n            }\n            else\n            {\n                word[j]=str[i];\n                j++;\n            }\n        }\n        else if(str[i]&gt;='A' &amp;&amp; str[i]&lt;='Z' || str[i]&gt;='0' &amp;&amp; str[i]&lt;='9')\n        {\n            if(is_word_started==0)\n            {\n                is_word_started=1;\n\n            }\n            word[j]=str[i];\n            j++;\n        }\n        else\n        {\n            if(is_word_started==1)\n            {\n                is_word_started=0;\n                word[j]='\\0';\n                printf(\"%s\\n\", word);\n                j=0;\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "timer"], "owner": {"reputation": 41, "user_id": 7047816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95c58c21a124bcfb4a6fecd0b79772c?s=128&d=identicon&r=PG&f=1", "display_name": "J Doe", "link": "https://stackoverflow.com/users/7047816/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 707, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1488982029, "creation_date": 1488982029, "question_id": 42673503, "link": "https://stackoverflow.com/questions/42673503/timerfd-windows-equivalent", "title": "timerfd windows equivalent", "body": "<p>Is there a timerfd equivalent on windows in C? For example i would like to convert this piece of code with a socket.</p>\n\n<p><strong>timerfd_settime(timer->ev.sock, 0, &amp;timeout, NULL);</strong></p>\n\n<pre><code>static int timer_start(void *this_ptr, uint64_t timeout_ns, timer_handler handler, void *handler_context)\n{\n    struct cjet_timer *timer = (struct cjet_timer *)this_ptr;\n    timer-&gt;handler = handler;\n    timer-&gt;handler_context = handler_context;\n\n    struct itimerspec timeout = convert_timeoutns_to_itimerspec(timeout_ns);\n    return timerfd_settime(timer-&gt;ev.sock, 0, &amp;timeout, NULL);\n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "multithreading", "sockets", "webserver"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1488980261, "post_id": 42672784, "comment_id": 72470255, "body": "For this case it might be easier to fork() instead of creating threads. Ok, you might not have this option on windows..."}, {"owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1488980440, "post_id": 42672784, "comment_id": 72470395, "body": "Yes, sorry for that. Also, not interested of using CygWin at the moment"}], "answers": [{"tags": [], "owner": {"reputation": 2473, "user_id": 3360424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053232b4741b328e70079b94c6d2fa73?s=128&d=identicon&r=PG&f=1", "display_name": "diidu", "link": "https://stackoverflow.com/users/3360424/diidu"}, "is_accepted": false, "score": 0, "last_activity_date": 1488981363, "last_edit_date": 1495535402, "creation_date": 1488981363, "answer_id": 42673238, "question_id": 42672784, "link": "https://stackoverflow.com/questions/42672784/c-web-server-using-threads-on-windows/42673238#42673238", "title": "C web server using threads on windows", "body": "<p>Normally, when implementing a server that forks separate processes, I would make the child process stay alive to serve predefined amount of requests (e.g. 100) and then kill itself. This is to reduce overhead created by forking and on the other hand recover from possible memory leaks or other problems in the process. Threads are lighter than processes, so it may make sense to close them faster.</p>\n\n<p>I think you should compare the benefits and drawbacks. Measure the overhead of thread creation and closing compared to keeping them alive. In any case you must make sure that there is limit on the number threads you have alive at one time.</p>\n\n<p>About the windows specifics on creating ans closing the thread you could go and add e.g. <a href=\"https://stackoverflow.com/a/31257350/4025606\">this</a> response.</p>\n"}], "owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488981363, "creation_date": 1488980116, "last_edit_date": 1488980333, "question_id": 42672784, "link": "https://stackoverflow.com/questions/42672784/c-web-server-using-threads-on-windows", "title": "C web server using threads on windows", "body": "<p>I started writing a <code>c</code> web server a while ago (windows 8), but I tried using only threads by myself, without using the <code>select()</code> option.</p>\n\n<p>This is my main loop, and I'm opening each new thread like this:</p>\n\n<pre><code>uintptr_t new_thread;\nwhile (client_sock = accept(server-&gt;sock, (struct sockaddr *)&amp;client_info, &amp;size))\n{\n    if (client_sock &lt;= 0) quit();\n    printf(\"\\n[***] : Got a connection from localhost on port %d\\n\",ntohs(client_info.sin_port));\n\n    code = init_connection(client_sock);\n    if (code)\n    {\n        new_thread = _beginthread(handle_connection, 0, ID++, client_sock);\n        if (new_thread == -1)\n        {\n            fprintf(stderr, \"Could not create thread for sending data: %d\\n\", GetLastError());\n            closesocket(client_sock);\n            quit();\n        }\n    }\n    else\n    {\n        debug(\"Failed to init connection\");\n        closesocket(client_sock);\n        debug(\"Connection to client ended\");\n    }   \n}\n</code></pre>\n\n<p>First of all, I would love to here if I can make this code better.</p>\n\n<p>Testing this program by trying to enter the localhost from chrome, I see that no more data is sent (after recieving one http request).</p>\n\n<p>My question is what would be the best way for the program to act then: close the thread and when another request will be made it will open a new one? if so, how do I close that thread?  if not, when <strong>should</strong> I close that thread?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1488980137, "post_id": 42672729, "comment_id": 72470177, "body": "Read e.g. <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">this <code>printf</code> (and family) reference</a>. Pay close attention to the possibility to set the field width and more importantly the <i>precision</i>."}, {"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "edited": false, "score": 2, "creation_date": 1488980175, "post_id": 42672729, "comment_id": 72470205, "body": "you did not show your printf code."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1488980917, "post_id": 42672729, "comment_id": 72470726, "body": "What platform are you on? 0.41 should be no problem even when scanf&#39;d and stored as a float on a normal 32-bit system"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488984605, "post_id": 42672729, "comment_id": 72473492, "body": "Show the code that printed <code>0.409999999</code>"}, {"owner": {"reputation": 11, "user_id": 7678587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd6d89a3340b8e62f3d2aa3947568eb?s=128&d=identicon&r=PG&f=1", "display_name": "Drishti makhija", "link": "https://stackoverflow.com/users/7678587/drishti-makhija"}, "edited": false, "score": 0, "creation_date": 1488992600, "post_id": 42672729, "comment_id": 72479387, "body": "I am working on CS50 IDE platform"}], "answers": [{"tags": [], "owner": {"reputation": 1524, "user_id": 1396061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4qS3F.jpg?s=128&g=1", "display_name": "Muhammad Qasim", "link": "https://stackoverflow.com/users/1396061/muhammad-qasim"}, "is_accepted": false, "score": 1, "last_activity_date": 1488980134, "creation_date": 1488980134, "answer_id": 42672793, "question_id": 42672729, "link": "https://stackoverflow.com/questions/42672729/how-to-round-off-a-floating-point-no-to-two-decimal-points/42672793#42672793", "title": "How to round off a floating point no. To two decimal points?", "body": "<p>This is simple. Use:</p>\n\n<pre><code>printf(\"%.2f\", 0.409999999);\n</code></pre>\n\n<p>This will print 0.41</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488984506, "post_id": 42672870, "comment_id": 72473411, "body": "Detail: floating points data types are very precise, each finite value is exact.  It is the functions and operations that use these types that are the source of imprecision.  <code>double x = 0.41;</code>  <code>x</code> takes on an exact value - perhaps 0.409999999999999975575093458246556110680103302001953125, which does not equal 0.41."}, {"owner": {"reputation": 260, "user_id": 2110544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678d90e7d4d521f4e9a5b85c1bc4bd27?s=128&d=identicon&r=PG", "display_name": "ArchimedesMP", "link": "https://stackoverflow.com/users/2110544/archimedesmp"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488985191, "post_id": 42672870, "comment_id": 72473930, "body": "@chux yeah, for what they&#39;re doing, they&#39;re quite precise. But they don&#39;t have unlimited precision. If 0.41 becomes 0.4099[...]999, then it&#39;s close to, but not precisely 0.41. A new developer coming from ints and starting  with floats the 1st time might not be aware of this; thus wondering what (s)he&#39; doing wrong when (s)he&#39;s building a float from 0.41 and getting only something really close to that value... Of course if the OP is a software engineer with 5+ yrs of experience, that&#39;s a plain * question to ask. For a newbie, it&#39;s ok (so I gave a real answer instead of &quot;omg, you should know&quot;)"}], "tags": [], "owner": {"reputation": 260, "user_id": 2110544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678d90e7d4d521f4e9a5b85c1bc4bd27?s=128&d=identicon&r=PG", "display_name": "ArchimedesMP", "link": "https://stackoverflow.com/users/2110544/archimedesmp"}, "is_accepted": false, "score": 0, "last_activity_date": 1488980298, "creation_date": 1488980298, "answer_id": 42672870, "question_id": 42672729, "link": "https://stackoverflow.com/questions/42672729/how-to-round-off-a-floating-point-no-to-two-decimal-points/42672870#42672870", "title": "How to round off a floating point no. To two decimal points?", "body": "<p>Most floating points datatypes are, by their nature, imprecise. They try to store real numbers (infinite precision) in a limited precision bit-vector. As such, it's possible the closest representation of 0.41 on your platform is 0.409999999.</p>\n\n<p>You should read up on the IEEE754 floating point representation to get an idea what's kind of issue you hit there.</p>\n"}, {"tags": [], "owner": {"reputation": 1603, "user_id": 7444762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a44e052a4db5240eb8c531132404fa2?s=128&d=identicon&r=PG&f=1", "display_name": "Lyncean Patel", "link": "https://stackoverflow.com/users/7444762/lyncean-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1488980507, "creation_date": 1488980507, "answer_id": 42672951, "question_id": 42672729, "link": "https://stackoverflow.com/questions/42672729/how-to-round-off-a-floating-point-no-to-two-decimal-points/42672951#42672951", "title": "How to round off a floating point no. To two decimal points?", "body": "<ul>\n<li>%f   (print as a floating point) </li>\n<li>%4f  (print as a floating point with a width of at least 4 wide) </li>\n<li>%.4f (print as a floating point with a precision of four characters after the decimal point) </li>\n<li>%3.2f    (print as a floating point at least 3 wide and a precision of   2)</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 7678587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd6d89a3340b8e62f3d2aa3947568eb?s=128&d=identicon&r=PG&f=1", "display_name": "Drishti makhija", "link": "https://stackoverflow.com/users/7678587/drishti-makhija"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1488980507, "creation_date": 1488979976, "question_id": 42672729, "link": "https://stackoverflow.com/questions/42672729/how-to-round-off-a-floating-point-no-to-two-decimal-points", "title": "How to round off a floating point no. To two decimal points?", "body": "<p>I have written a programs in which computer ask for a floating point no. From the user. For example if, i am entring 0.41, the ouput in printf is 0.409999999. How to resolve this error?</p>\n"}, {"tags": ["c++", "c", "io", "formatting", "iomanip"], "comments": [{"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 4, "creation_date": 1488980711, "post_id": 42672702, "comment_id": 72470580, "body": "I will never understand people giving negative votes to a perfectly valid question, including code of what has been tried and being specific about what it is asked. Trolls maybe?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1488981044, "post_id": 42672702, "comment_id": 72470813, "body": "Actually, using printf is absolutely legal in C++, too... You&#39;d prefer to <code>#include &lt;cstdio&gt;</code> over <code>#include &lt;stdio.h&gt;</code> then, though. I personally use printf (and sometimes (s)scanf) function quite often, as it can be more handy than the C++ streams. On the other hand, the latter ones come in quite handy if complex classes are involved or typedefs you do not expect to be the same on all platforms involved (think of <code>uint32_t</code> for instance...). So if assignment requires C++ only, you could leave the calls to printf as are - if requirement is explicitly to use streams, then you need to change..."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1488989689, "post_id": 42672702, "comment_id": 72477346, "body": "@Aconcagua: Still good practice to avoid the printf() / scanf() family of functions, for the various potentially fatal errors they allow (due to being variadic functions, i.e. no type checking). Plus, I&#39;d stay well clear of any scanf() even in C -- its only <i>marginally</i> easier to get a scanf() call right than it was with gets()..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1489046955, "post_id": 42672702, "comment_id": 72502521, "body": "@DevSolar Truth, scanf I normally don&#39;t use - prefer to read a whole line at once (<b>f</b>gets) and use <b>s</b>scanf afterwards - <i>if</i> I do... Don&#39;t get me wrong, I appreciate C++ streams very much. But sometimes, good old printf family comes in just more handy than the streams, compare <code>fprintf(stderr, &quot;[...] failed with error %d (%s)\\n&quot;, errno, strerror(errno));</code> vs. <code>std::cerr &lt;&lt; &quot;[...] failed with error &quot; &lt;&lt; errno &lt;&lt; &quot; (&quot; &lt;&lt; strerror(errno) &lt;&lt; &#39;)&#39; &lt;&lt; std::endl;</code>. And if there is code already working correctly, I would stay with it, following the maxim of never touching a running system.."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1489047354, "post_id": 42672702, "comment_id": 72502710, "body": "@Aconcagua: Agreed, if it&#39;s there <b>and</b> tested, don&#39;t touch it. But I go to some lengths avoiding such constructs in <i>new</i> code."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 6089768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29acf723047aa4f26948f00fe5e8663?s=128&d=identicon&r=PG&f=1", "display_name": "TenzoNakami", "link": "https://stackoverflow.com/users/6089768/tenzonakami"}, "edited": false, "score": 1, "creation_date": 1488980703, "post_id": 42672871, "comment_id": 72470571, "body": "According to gsamaras&#39;s answer, this is indeed a true answer. But a little bit more explanation is always appreciated! :)"}], "tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 3, "last_activity_date": 1488980299, "creation_date": 1488980299, "answer_id": 42672871, "question_id": 42672702, "link": "https://stackoverflow.com/questions/42672702/printf-formatting-equivalent-in-cpps-cout/42672871#42672871", "title": "printf formatting equivalent in cpp&#39;s cout", "body": "<p>Minus in <code>printf</code> does left alignment.</p>\n\n<p>To do that in C++ you need <a href=\"http://en.cppreference.com/w/cpp/io/manip/left\" rel=\"nofollow noreferrer\"><code>std::left</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 6089768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29acf723047aa4f26948f00fe5e8663?s=128&d=identicon&r=PG&f=1", "display_name": "TenzoNakami", "link": "https://stackoverflow.com/users/6089768/tenzonakami"}, "edited": false, "score": 0, "creation_date": 1488980761, "post_id": 42672988, "comment_id": 72470613, "body": "Thank you for the detailed explanation! I&#39;m sorry if the question was a bit dumb, I&#39;m totally new to C++ :)"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 95, "user_id": 6089768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29acf723047aa4f26948f00fe5e8663?s=128&d=identicon&r=PG&f=1", "display_name": "TenzoNakami", "link": "https://stackoverflow.com/users/6089768/tenzonakami"}, "edited": false, "score": 3, "creation_date": 1488980820, "post_id": 42672988, "comment_id": 72470664, "body": "Some years back I was at the same level as you, when I started learning C++ in uni, so no dumb question, I upvoted it @TenzoNakami! =) You are welcome."}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 1, "creation_date": 1488981030, "post_id": 42672988, "comment_id": 72470801, "body": "It should be <code>cout &lt;&lt; &quot;\\n\\n\\t&quot; &lt;&lt; setw(30) &lt;&lt; left &lt;&lt; &quot;Current gasoline...&quot;</code> as you don&#39;t want to count the newlines/tabs."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1488981078, "post_id": 42672988, "comment_id": 72470835, "body": "Indeed @KlitosKyriacou, I was just about to modify my answer, but thank you! :)"}, {"owner": {"reputation": 95, "user_id": 6089768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29acf723047aa4f26948f00fe5e8663?s=128&d=identicon&r=PG&f=1", "display_name": "TenzoNakami", "link": "https://stackoverflow.com/users/6089768/tenzonakami"}, "edited": false, "score": 0, "creation_date": 1488983065, "post_id": 42672988, "comment_id": 72472276, "body": "Thank you all for supporting me! I&#39;ve been using StackOverflow since my first day in the university, but the community always is amazing :) Thank you for supporting people who&#39;s on the learning curve like me!"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 6, "last_activity_date": 1488981608, "last_edit_date": 1488981608, "creation_date": 1488980603, "answer_id": 42672988, "question_id": 42672702, "link": "https://stackoverflow.com/questions/42672702/printf-formatting-equivalent-in-cpps-cout/42672988#42672988", "title": "printf formatting equivalent in cpp&#39;s cout", "body": "<p>Indeed there is a difference, like this:</p>\n\n<pre><code>Georgioss-MacBook-Pro:~ gsamaras$ g++ -Wall main.cpp\nGeorgioss-MacBook-Pro:~ gsamaras$ ./a.out \n\n\n    Current gasoline in reserve:       6litres       \n    Total gasoline used:       5litres     \n    Total travel distance:       4kmGeorgioss-MacBook-Pro:~ gsamaras$ gcc -W\nGeorgioss-MacBook-Pro:~ gsamaras$ ./a.out \n\n\n    Current gasoline in reserve:   6       liters\n    Total gasoline used:           5       liters\n    Total travel distance:         4       kmGeorgioss-MacBook-Pro:~ gsamaras$ \n</code></pre>\n\n<p>But the question is <em>where</em> is the difference?</p>\n\n<p><code>setw(30)</code> is equivalent to <code>%30s</code>, <strong>but</strong>, you have used <code>-30s</code>, which left-aligns the output! In order to get a similar behavior, use <a href=\"http://www.cplusplus.com/reference/ios/left/\" rel=\"nofollow noreferrer\">std::left</a>, like this:</p>\n\n<pre><code>cout &lt;&lt; \"\\n\\n\" &lt;&lt; left &lt;&lt; setw(30) &lt;&lt; \"\\tCurrent gasoline in reserve: \" &lt;&lt; left &lt;&lt; setw(7) &lt;&lt; 6 &lt;&lt; \"litres\\n\" &lt;&lt; left &lt;&lt; setw(30) &lt;&lt; \"\\tTotal gasoline used: \" &lt;&lt; left &lt;&lt; setw(7) &lt;&lt; 5 &lt;&lt; \"litres\\n\" &lt;&lt; left &lt;&lt; setw(30) &lt;&lt; \"\\tTotal travel distance: \" &lt;&lt; left &lt;&lt; setw(7) &lt;&lt; 4 &lt;&lt; \"km\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36528, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1614746698, "creation_date": 1614746698, "answer_id": 66450933, "question_id": 42672702, "link": "https://stackoverflow.com/questions/42672702/printf-formatting-equivalent-in-cpps-cout/66450933#66450933", "title": "printf formatting equivalent in cpp&#39;s cout", "body": "<p>In C++20 you will be able to use <code>std::format</code> for this which is very easy to translate from <code>printf</code>:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>std::cout &lt;&lt; std::format(\n       &quot;\\n\\n\\t{:30} {:&lt;7} liters\\n\\t{:30} {:&lt;7} liters\\n\\t{:30} {:&lt;7} km&quot;,\n       &quot;Current gasoline in reserve:&quot;,\n       db.currentGas,\n       &quot;Total gasoline used:&quot;,\n       db.usedGas,\n       &quot;Total travel distance:&quot;,\n       db.usedGas);\n</code></pre>\n<p>In the meantime you can use <a href=\"https://github.com/fmtlib/fmt\" rel=\"nofollow noreferrer\">the {fmt} library</a>, <code>std::format</code> is based on. {fmt} also provides the <code>print</code> function that makes this even easier and more efficient (<a href=\"https://godbolt.org/z/49r5MW\" rel=\"nofollow noreferrer\">godbolt</a>):</p>\n<pre><code>fmt::print(\n       &quot;\\n\\n\\t{:30} {:&lt;7} liters\\n\\t{:30} {:&lt;7} liters\\n\\t{:30} {:&lt;7} km&quot;,\n       &quot;Current gasoline in reserve:&quot;,\n       db.currentGas,\n       &quot;Total gasoline used:&quot;,\n       db.usedGas,\n       &quot;Total travel distance:&quot;,\n       db.usedGas);\n</code></pre>\n<p><strong>Disclaimer</strong>: I'm the author of {fmt} and C++20 <code>std::format</code>.</p>\n"}], "owner": {"reputation": 95, "user_id": 6089768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29acf723047aa4f26948f00fe5e8663?s=128&d=identicon&r=PG&f=1", "display_name": "TenzoNakami", "link": "https://stackoverflow.com/users/6089768/tenzonakami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 42672988, "answer_count": 3, "score": 3, "last_activity_date": 1614746698, "creation_date": 1488979904, "last_edit_date": 1488980931, "question_id": 42672702, "link": "https://stackoverflow.com/questions/42672702/printf-formatting-equivalent-in-cpps-cout", "title": "printf formatting equivalent in cpp&#39;s cout", "body": "<p>I am currently a student of Computer Science, and today I received an extra-ordinary assignment, which should be written under C++. I was learning full C until today. This is more like a blind assignment.</p>\n\n<p>In C, I usually use this:</p>\n\n<pre><code>printf(\"\\n\\n\\t%-30s %-7d liters\\n\\t%-30s %-7d liters\\n\\t%-30s %-7d km\",\n       \"Current gasoline in reserve:\",\n       db.currentGas,\n       \"Total gasoline used:\",\n       db.usedGas,\n       \"Total travel distance:\",\n       db.usedGas);\n</code></pre>\n\n<p>Since the assignment's condition is that it should be written in C++, this is what I've tried:</p>\n\n<pre><code>cout &lt;&lt; setw(30) &lt;&lt; \"\\n\\n\\tCurrent gasoline in reserve: \"\n     &lt;&lt; setw(7) &lt;&lt; db.currentGas &lt;&lt; \"litres\"\n     &lt;&lt; setw(30) &lt;&lt; \"\\n\\tTotal gasoline used: \"\n     &lt;&lt; setw(7) &lt;&lt; db.usedGas &lt;&lt; \"litres\"\n     &lt;&lt; setw(30) &lt;&lt; \"\\n\\tTotal travel distance: \"\n     &lt;&lt; setw(7) &lt;&lt; db.travelDistance &lt;&lt; \"km\";\n</code></pre>\n\n<p>But it looks like there is a differences between C's <code>%-30s</code> and C++'s <code>setw(30)</code>?</p>\n"}, {"tags": ["c", "scanf", "format-specifiers"], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1488980179, "last_edit_date": 1488980179, "creation_date": 1488979713, "answer_id": 42672638, "question_id": 42672534, "link": "https://stackoverflow.com/questions/42672534/when-i-enter-an-input-using-command-line-tool-in-xcode-the-code-ignores-it-the/42672638#42672638", "title": "When I enter an input using command line tool in Xcode, the code ignores it the first time I enter it. Why is this and is there a way to avoid it?", "body": "<p>The format string supplied in <code>scanf()</code> needs to have the exact same input to be a <em>match</em>. In your case</p>\n\n<pre><code>  scanf(\"celsius=%d\\n\", &amp;start);\n</code></pre>\n\n<p>is creating the <em>problem</em>, it expects an input which consists of</p>\n\n<ul>\n<li><code>celsius=</code> string</li>\n<li>and integer value</li>\n<li>one (or more) <code>whitespace</code></li>\n</ul>\n\n<p>and another <code>newline</code>, to terminate the input. So, finally you need two <kbd>ENTER</kbd> key press to match the criteria. First keypress produces a <code>newline</code> which matches the requirement of the whitespace and second time, it produces another newline, which terminates the input.  </p>\n\n<p>Related, quoting <code>C11</code>, chapter \u00a77.21.6.2, </p>\n\n<blockquote>\n  <p>A directive composed of white-space character(s) is executed by reading input up to the\n  first non-white-space character (which remains unread), or until no more characters can\n  be read. [...]</p>\n</blockquote>\n\n<p>You need to reduce it to</p>\n\n<pre><code> scanf(\"celsius=%d\", &amp;start);  //remove the trailing `\\n`\n</code></pre>\n\n<p>and check for the return value of <code>scanf()</code> to ensure success.</p>\n"}], "owner": {"reputation": 11, "user_id": 7678449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef9bcdefb4ae17691565c1a9319d4e3?s=128&d=identicon&r=PG&f=1", "display_name": "user7678449", "link": "https://stackoverflow.com/users/7678449/user7678449"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488980517, "creation_date": 1488979407, "last_edit_date": 1488980517, "question_id": 42672534, "link": "https://stackoverflow.com/questions/42672534/when-i-enter-an-input-using-command-line-tool-in-xcode-the-code-ignores-it-the", "title": "When I enter an input using command line tool in Xcode, the code ignores it the first time I enter it. Why is this and is there a way to avoid it?", "body": "<p>I am a newbie to Xcode and am learning C using the command line tool. Often when I write a program and enter an input, the code will not execute for the first time I enter it, however once this first input is ignored, the code executes exactly as expected. I was just wondering why this is? Am I doing something wrong when I'm writing my code or is this just something that happens in Xcode? </p>\n\n<p>Example of code that this occurs in (this is something that I had to do for college. It reads an input \"celsius=[something]\" and displays a chart showing the conversion from celsius to fahrenheit and makes comments on it): </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int start;\n    int celsius;\n    float fahrenheit;\n\n    scanf(\"celsius=%d\\n\", &amp;start);\n\n    if(start&lt;0||start&gt;100)\n    {\n            printf(\"The value entered should be in the right range\\n\");\n    }\n    else\n    {\n        printf(\"Celsius | Fahrenheit | comment\\n\");\n        printf(\"------------------------------\\n\");\n\n        for(celsius=start;celsius&lt;=100;celsius=celsius+20)\n        {\n            fahrenheit=celsius*(9.0/5.0)+32;\n            printf(\"   %d   |   %.2f   |\", celsius, fahrenheit);\n\n            if(fahrenheit==32.0)\n            {\n                printf(\"  Freezing point\\n\");\n            }\n            else if(fahrenheit&gt;=64.0&amp;&amp;fahrenheit&lt;=77.0)\n            {\n                printf(\"  Room temperature\\n\");\n            }\n            else if(fahrenheit&gt;=122.0&amp;&amp;fahrenheit&lt;=176.0)\n            {\n                printf(\"  Hot bath\\n\");\n            }\n            else if(fahrenheit==212.0)\n            {\n                printf(\"  Water boils\\n\");\n            }\n            else\n            {\n                printf(\"\\n\");\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "internationalization", "po"], "comments": [{"owner": {"reputation": 14609, "user_id": 1694368, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ce50876f1ca095cb2b4c3f2033f72ed0?s=128&d=identicon&r=PG", "display_name": "Koby Douek", "link": "https://stackoverflow.com/users/1694368/koby-douek"}, "edited": false, "score": 0, "creation_date": 1488978385, "post_id": 42672151, "comment_id": 72468984, "body": "Use Google translate. This has nothing to do with programming."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 14609, "user_id": 1694368, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ce50876f1ca095cb2b4c3f2033f72ed0?s=128&d=identicon&r=PG", "display_name": "Koby Douek", "link": "https://stackoverflow.com/users/1694368/koby-douek"}, "edited": false, "score": 0, "creation_date": 1488978470, "post_id": 42672151, "comment_id": 72469064, "body": "@KobyDouek This is a highly technical usage, I doubt (and a quick attempt proved me right) that Google will get the context here."}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 1, "creation_date": 1488978542, "post_id": 42672151, "comment_id": 72469111, "body": "stat auf %s konnte nicht ausgef&#252;hrt werden"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1488979984, "post_id": 42672151, "comment_id": 72470085, "body": "A technical\u013ay savvy user will understand the english term, all others will not know what to do with the message anyway... If you want to express, that a file was not found, say &quot;File %s not found&quot; on -ENOENT, or &quot;Permission denied on file %s&quot; on -EPERM etc. pp."}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1488978694, "post_id": 42672202, "comment_id": 72469204, "body": "Statusabfrage (stat) f&#252;r Datei &#39;%s&#39; fehlgeschlagen."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1488978714, "last_edit_date": 1488978714, "creation_date": 1488978406, "answer_id": 42672202, "question_id": 42672151, "link": "https://stackoverflow.com/questions/42672151/how-to-translate-unable-to-stat-s-n-in-german/42672202#42672202", "title": "How to translate &quot;Unable to stat %s\\n&quot; in German?", "body": "<p>Here <code>stat</code> is a reference to the POSIX standard call of that name, <a href=\"https://linux.die.net/man/2/stat\" rel=\"nofollow noreferrer\"><code>stat(2)</code></a>.</p>\n\n<p>Perhaps you can take some clue from the manual page's description, the brief one is \"get file status\".</p>\n\n<p>My German is waaaay too rusty to suggest a translation, but inserting it into the English would give \"Unable to get file status (stat) %s\\n\" (I kept the original \"stat\" phrase since it's highly-detailed technical information and might be useful).</p>\n\n<p>You could of course not try to work around the function name, and instead just say \"The stat() function failed for %s\", it's the use of the funtion name as a verb which makes it harder to translate, I think.</p>\n"}], "owner": {"reputation": 1919, "user_id": 2018961, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f5dbdf7e2694730fd8f0ca1ce8e94af?s=128&d=identicon&r=PG&f=1", "display_name": "haheute", "link": "https://stackoverflow.com/users/2018961/haheute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 42672202, "answer_count": 1, "score": 1, "last_activity_date": 1488978714, "creation_date": 1488978249, "question_id": 42672151, "link": "https://stackoverflow.com/questions/42672151/how-to-translate-unable-to-stat-s-n-in-german", "title": "How to translate &quot;Unable to stat %s\\n&quot; in German?", "body": "<p>I have a translation question but I am asking it here because I think it needs technical understanding.</p>\n\n<p>In order to translate a program to German, I have this line in the <code>.po</code> file:</p>\n\n<pre><code>#, c-format\nmsgid \"Unable to stat %s\\n\"\nmsgstr \"\"\n</code></pre>\n\n<p>What does this mean and how would I say it in German?</p>\n"}, {"tags": ["c", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 2, "last_activity_date": 1488977102, "creation_date": 1488977102, "answer_id": 42671756, "question_id": 42671718, "link": "https://stackoverflow.com/questions/42671718/when-using-array-as-a-parameter-how-do-get-the-length-of-that-array-parameter-i/42671756#42671756", "title": "When using array as a parameter, how do get the length of that array parameter in C", "body": "<p>You cannot get the array size inside a function.</p>\n\n<p>What you do instead is to pass the size as another parameter.</p>\n\n<pre><code>void insertion_sort(int arr[], int size)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1488977345, "creation_date": 1488977345, "answer_id": 42671841, "question_id": 42671718, "link": "https://stackoverflow.com/questions/42671718/when-using-array-as-a-parameter-how-do-get-the-length-of-that-array-parameter-i/42671841#42671841", "title": "When using array as a parameter, how do get the length of that array parameter in C", "body": "<p>You can't find the size of an array from inside the function. In the call, the array decays into a pointer to the first element, and clearly a pointer has no concept of how much data it points at in terms of number of elements.</p>\n\n<p>This is simply how C works.</p>\n\n<p>You should add a second argument to indicate the length, and make it have type <code>size_t</code> since that type conveys that we're talking about a size.</p>\n\n<p>See, for instance, the standard library's <a href=\"https://linux.die.net/man/3/qsort\" rel=\"nofollow noreferrer\"><code>qsort()</code></a> function:</p>\n\n<blockquote>\n  <p><code>void qsort(void *base, size_t nmemb, size_t size,\n                int (*compar)(const void *, const void *));</code></p>\n</blockquote>\n\n<p>Basically <code>base</code> and <code>nmemb</code> describe an array.</p>\n"}], "owner": {"reputation": 1, "user_id": 7678289, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154341302255568/picture?type=large", "display_name": "Dennnis", "link": "https://stackoverflow.com/users/7678289/dennnis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1488977447, "answer_count": 2, "score": -4, "last_activity_date": 1488977345, "creation_date": 1488977008, "question_id": 42671718, "link": "https://stackoverflow.com/questions/42671718/when-using-array-as-a-parameter-how-do-get-the-length-of-that-array-parameter-i", "closed_reason": "Duplicate", "title": "When using array as a parameter, how do get the length of that array parameter in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nvoid insertion_sort(int arr[]);\n\nvoid insertion_sort(int arr[]) {\n\n    int hold;\n    int key;\n\n    for (int i = 2; i &lt; 7; i++) {\n        key = arr[i];\n        hold = i- 1;\n        while (hold &gt;= 0 &amp;&amp; arr[hold] &gt; key) {\n            arr[hold + 1] = arr[hold];\n            hold--;\n        }\n        arr[hold + 1] = key;\n    }\n\n}\n\n\nint main() {\n\n\n    int arr[] = {3,4,5,6,7,1,4};\n\n    insertion_sort(arr);\n\n    for (int i = 0; i &lt; sizeof(arr) / sizeof(int); i++) {\n        printf(\"%d\", arr[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It seems like I cannot use [ sizeof(arr) / sizeof(int) ] in order to get the length of the array in insertion_sort. So I used the integer number instead. What is the reason and what's the proper way of manipulating the array that's taken as a parameter of a function??</p>\n"}, {"tags": ["c", "linux", "gtk", "gnome"], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1488977638, "creation_date": 1488977638, "answer_id": 42671948, "question_id": 42671632, "link": "https://stackoverflow.com/questions/42671632/gtk-how-to-pass-an-argument-to-a-gtkeventbox/42671948#42671948", "title": "GTK - How to pass an argument to a GtkEventBox", "body": "<p>Your prototype for <code>on_event_clicked()</code>  is wrong, it doesn't match what GTK+ expects.</p>\n\n<p>It should be:</p>\n\n<pre><code>gboolean user_function (GtkWidget *widget, GdkEvent *event, gpointer user_data);\n</code></pre>\n\n<p>You need to add the missing argument to your function, and also deal with the requirement for a return value. Remember to <a href=\"https://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-button-press-event\" rel=\"nofollow noreferrer\">read the signal documentation</a> seriously.</p>\n"}], "owner": {"reputation": 50, "user_id": 4987327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9z0o7.gif?s=128&g=1", "display_name": "Giorgio Dramis", "link": "https://stackoverflow.com/users/4987327/giorgio-dramis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 42671948, "answer_count": 1, "score": 1, "last_activity_date": 1488977638, "creation_date": 1488976755, "question_id": 42671632, "link": "https://stackoverflow.com/questions/42671632/gtk-how-to-pass-an-argument-to-a-gtkeventbox", "title": "GTK - How to pass an argument to a GtkEventBox", "body": "<p>This code make a program that create a window with label, if you click the label, the program executes an fprintf of buffer passed as an argument of <code>g_signal_connect(G_OBJECT(eventbox), \"button_press_event\", G_CALLBACK(on_event_clicked), buffer)</code>. Previously the program put in <em>buffer</em> the string \"Hello Word\" and then the program should print this message, but maybe the program print only garbled char. Where I'm wrong?</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nvoid on_event_clicked (GtkWidget* widget, gpointer user_data);\n\nint main (int argc, char **argv) {\n    GtkWidget   *window;\n    GtkWidget   *eventbox;\n    GtkWidget   *label;\n    char*       buffer = malloc(sizeof(char)*10);\n\n    strcpy(buffer, \"Hello Word\\0\");\n\n    gtk_init (&amp;argc,&amp;argv);\n\n    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);\n    label = gtk_label_new (\"Hello Word\");\n    eventbox = gtk_event_box_new ();\n\n    gtk_container_add (GTK_CONTAINER(eventbox), label);\n    gtk_container_add (GTK_CONTAINER(window), eventbox);\n    gtk_widget_show_all (window);\n\n    g_signal_connect(G_OBJECT(window), \"destroy\",\n                     G_CALLBACK(gtk_main_quit), NULL);\n\n    g_signal_connect(G_OBJECT(eventbox), \"button_press_event\",\n                     G_CALLBACK(on_event_clicked), buffer);\n\n    gtk_main();\n\n    return 0;\n}\n\nvoid on_event_clicked (GtkWidget *widget, gpointer user_data) {\n    char* pn = user_data;\n    fprintf(stderr, \"%s\\n\", pn);\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "pthreads", "mutex"], "answers": [{"tags": [], "owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "is_accepted": false, "score": 2, "last_activity_date": 1488976582, "creation_date": 1488976582, "answer_id": 42671575, "question_id": 42671092, "link": "https://stackoverflow.com/questions/42671092/pthreads-mutex-without-global-variable-only-return-arrays-in-thread-struct/42671575#42671575", "title": "pthreads mutex without global variable, only return arrays in thread_struct", "body": "<p><code>pthread_join()</code> is specified by POSIX (<em>Base Definitions, 4.12 Memory Synchronization</em>, POSIX is available at <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/\" rel=\"nofollow noreferrer\">http://pubs.opengroup.org/onlinepubs/9699919799/</a>) to synchronize memory with respect to other threads, so no, you don't need a mutex, the assignment to <code>thread_args[t].part_sum</code> by <code>thread_number()</code> is visible to the main code after <code>pthread_join()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 7182718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29b8b5d14e9bc613cc00f9f57fa8f695?s=128&d=identicon&r=PG&f=1", "display_name": "Maethor", "link": "https://stackoverflow.com/users/7182718/maethor"}, "edited": false, "score": 0, "creation_date": 1488977343, "post_id": 42671641, "comment_id": 72468239, "body": "hej thanks okay so I got that at least right with mutexes. I will try out to improve it according to your comment about the order. Computer numbers still mess with my mind somehow ...  About your side note: renaming to fit better to the text, and ofc I have overseen one buf ^^"}, {"owner": {"reputation": 101, "user_id": 7182718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29b8b5d14e9bc613cc00f9f57fa8f695?s=128&d=identicon&r=PG&f=1", "display_name": "Maethor", "link": "https://stackoverflow.com/users/7182718/maethor"}, "edited": false, "score": 0, "creation_date": 1488977883, "post_id": 42671641, "comment_id": 72468625, "body": "would it be better, from a computational pov, to use a global sum maybe?"}, {"owner": {"reputation": 514, "user_id": 7671559, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wcE1huhny94/AAAAAAAAAAI/AAAAAAAAAGU/Wmov4fen7p0/photo.jpg?sz=128", "display_name": "Gert Wollny", "link": "https://stackoverflow.com/users/7671559/gert-wollny"}, "reply_to_user": {"reputation": 101, "user_id": 7182718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29b8b5d14e9bc613cc00f9f57fa8f695?s=128&d=identicon&r=PG&f=1", "display_name": "Maethor", "link": "https://stackoverflow.com/users/7182718/maethor"}, "edited": false, "score": 0, "creation_date": 1488997450, "post_id": 42671641, "comment_id": 72482352, "body": "Always using a global sum is quite the opposite, since in the worst case the error grows proportional to the number of elements to be added. One method to actually reduce the summation error is the <a href=\"https://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"nofollow noreferrer\">Kahan summation algorithm</a>."}], "tags": [], "owner": {"reputation": 514, "user_id": 7671559, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wcE1huhny94/AAAAAAAAAAI/AAAAAAAAAGU/Wmov4fen7p0/photo.jpg?sz=128", "display_name": "Gert Wollny", "link": "https://stackoverflow.com/users/7671559/gert-wollny"}, "is_accepted": false, "score": 1, "last_activity_date": 1488976781, "creation_date": 1488976781, "answer_id": 42671641, "question_id": 42671092, "link": "https://stackoverflow.com/questions/42671092/pthreads-mutex-without-global-variable-only-return-arrays-in-thread-struct/42671641#42671641", "title": "pthreads mutex without global variable, only return arrays in thread_struct", "body": "<p>Locking is not required because <em>sum</em> is only accessed in the serial part of the code.</p>\n\n<p>The small error/variation in the result most likely stems from changing the order of summation, i.e. when you accumulate the sum in a single thread, and the value of the sum becomes big, then small additional values might be numerically ignored and this can accumulate to a significant error. Summing partial sums first alleviates this problem, and hence, the multi-threaded result is probably more accurate.</p>\n\n<p>When in doubt about proper multi-threaded access to variables in you code you might consider compiling and running the program with a <a href=\"https://developers.redhat.com/blog/2014/12/02/address-and-thread-sanitizers-gcc/\" rel=\"nofollow noreferrer\">thread sanitizer</a> enabled.</p>\n\n<p>As a side note, nothing is assigned to the member <em>param->buf</em> in your example code.</p>\n"}], "owner": {"reputation": 101, "user_id": 7182718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29b8b5d14e9bc613cc00f9f57fa8f695?s=128&d=identicon&r=PG&f=1", "display_name": "Maethor", "link": "https://stackoverflow.com/users/7182718/maethor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488977367, "creation_date": 1488975215, "last_edit_date": 1488977367, "question_id": 42671092, "link": "https://stackoverflow.com/questions/42671092/pthreads-mutex-without-global-variable-only-return-arrays-in-thread-struct", "title": "pthreads mutex without global variable, only return arrays in thread_struct", "body": "<p>Hi once more everyone!</p>\n\n<p>I am implementing a calculation function, that runs through a big array of numbers and should therefore be cut into small snippets all calculated by single threads. Using less than 8 threads &amp; dividiable by 2 it runs okayish (small error, using one thread, so n_threads = 1, gives the correct result!).</p>\n\n<p>Question: \"So I was wondering if I need mutexes if I never access a global variable?\"</p>\n\n<p>Explanation status quo: I have a <code>double sum</code> then I create the threads and run the calculation through the array by parts. \nIn the end I take all partial sums and add them up to my sum in the main program. Then I add the rest of the array, that was not divided into the threads (for example in the case having a total array length of 10 and 4 threads: which would give 8 array elements to the threads and 2 have to be calculated additionally). This seems not to be the correct way, I fear. I am not deep enough into the topic yet, so I am not sure if I have to lock some access somewhere to the sum in the main program.</p>\n\n<p>The main-code:</p>\n\n<pre><code>  double sum = 0;\n  // arr, p and n_threads are given into this as input to a function\n\n  pthread_t threads[n_threads];\n  struct thread_input thread_args[n_threads];\n  int thread_size = total_elemts/n_threads;\n\n for (int t = 0; t &lt; n_threads; t++){\n    thread_args[t].tid = t;\n    thread_args[t].start = t*thread_size;\n    thread_args[t].end = ((t+1)*thread_size)-1;\n    thread_args[t].arr = arr;\n    thread_args[t].p = p;\n    thread_args[t].part_sum = 0;\n    pthread_create(&amp;threads[t], NULL, thread_number, (void*) &amp;thread_args[t]);\n   }\n\n for (int t = 0; t &lt; n_threads; t++){\n    pthread_join(threads[t], NULL);\n    printf(\"thread %d %15.10lf\\n\", t, thread_args[t].part_sum);\n    sum += thread_args[t].part_sum;\n }\nreturn sum;\n</code></pre>\n\n<p>The number_thread:</p>\n\n<pre><code>void* thread_number(void* arg){\n    struct thread_input *param = (struct thread_input*)arg;\n\n    int i;\n    for(i = param-&gt;start; i &lt;= param-&gt;end; i++){\n      param-&gt;part_sum += Func1(param-&gt;arr[i]);\n    }\n\n    for(i = param-&gt;start; i &lt;= param-&gt;end-1; i+=2){\n      param-&gt;part_sum += Func2(param-&gt;arr[i], param-&gt;arr[i+1]);\n    }\n\n    for(i = param-&gt;start; i &lt;= param-&gt;end-3; i+=4){\n      param-&gt;part_sum += Func3(&amp;param-&gt;arr[i], param-&gt;p);\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>Is this okay without locks or have I missed something else?\nThanks to everyone!</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1488975315, "post_id": 42671012, "comment_id": 72466804, "body": "Hmm, you assume the programmer knew what he was doing.  Finding this back in a .h file should not impress you.  Use a telephone."}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1488975459, "post_id": 42671012, "comment_id": 72466896, "body": "most of source looks as if he indeed knew what he was doing. He left the company some years ago and im tasked to surf his legacy.. :)"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1488975533, "post_id": 42671012, "comment_id": 72466956, "body": "It seems more context is required."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1488976127, "post_id": 42671012, "comment_id": 72467390, "body": "Please add the definition of <code>WriteData</code>, too -- without that there&#39;s not much added information. Also please copy/paste code as code, not screenshots."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1488977554, "post_id": 42671012, "comment_id": 72468392, "body": "Another question is why an array pointer is passed to those functions and not a pointer to the first element (the decayed array). Identical result, but supports the &quot;didn&#39;t know what he was doing&quot; theory."}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1488977986, "post_id": 42671012, "comment_id": 72468698, "body": "@Lundin i remember you commenting that i probably &#39;camp in the sewage&#39; when i told that my mindset is that of a boyscout, always leaving a place better than it was before.. :D  Half the issues i have with this legacy-lib are due to lack of documentation  - other half due my lack of knowledge in C."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 3, "creation_date": 1488978370, "post_id": 42671012, "comment_id": 72468974, "body": "rule #1 of programming and driving a car: assume anyone else is a braindead monkey/psychopath (until proven otherwise). I have seen Code from &quot;godlike&quot; coders at our company, it was the living hell to read 6000 loc in one file all functions without parameters but working on global variables. What made him allegedly  &quot;godlike&quot; was that he still knew what every line did and that it compiled on the first time and two years later he could fix things quite fast as he still knew where everything was. But the code was a massacre of coding standards.... and noone else could maintain it.Too bad he left"}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "edited": false, "score": 0, "creation_date": 1488978785, "post_id": 42671012, "comment_id": 72469265, "body": "I&#39;m a bad programmer. What makes me a mediocre programmer is that i have good habbits: I comment clearly, i format, i KISS, i read on SO before doing anything, i&#39;ll ask ppl to review, ...   Sad story with the godlike-guys. I consider writing code easier than reading, most of the times."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1488981783, "post_id": 42671012, "comment_id": 72471352, "body": "@Gewure As it turns out, keeping it simple and documented are traits of a good programmer. Truly great programmers are those who can take complex code and replace it with much shorter and simpler code. Anyway, this particular code is not that bad, seems like a pretty standard way of declaring a struct to be used by some API function in some library code."}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "edited": false, "score": 0, "creation_date": 1488986783, "post_id": 42671012, "comment_id": 72475095, "body": "thanks for the discussion, guys. I feel privileged to have such good teachers here. Thanks for your time. i really mean it!"}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1488975614, "post_id": 42671111, "comment_id": 72467015, "body": "For reference, this is what <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">GMP</a> uses for all of their types so you can pass them &quot;by reference&quot; to functions without scattering <code>&amp;</code>&#39;s everywhere."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1488975684, "post_id": 42671111, "comment_id": 72467059, "body": "@Quentin Right, read that somewhere, thanks for chiming in. :)"}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1488975767, "post_id": 42671111, "comment_id": 72467117, "body": "first, thanks for this valueable answer Sourav Ghosh.  than thanks for this valueable comment @Quentin  i <i>think</i> this is what the original dev intended, give me some time and i&#39;ll supply more info / cross check your hints!"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1488975648, "last_edit_date": 1488975648, "creation_date": 1488975275, "answer_id": 42671111, "question_id": 42671012, "link": "https://stackoverflow.com/questions/42671012/what-is-the-purpose-of-an-array-with-undefined-length-but-only-one-int-element/42671111#42671111", "title": "What is the purpose of an array with undefined length but only one int element?", "body": "<p>All the definitions create arrays with only one element, true. The actual use case may vary.</p>\n\n<p>One <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">commonly used scenario</a> is, this variable can be passed as a function argument and it will be possible to change the content of the array (the only element value) from the called function, which in case of a non-array variable is not possible. This maybe not the very <em>smart</em> way, but still, it's possible and someone chose to use it.</p>\n\n<p>Also, as always, array size determined by the supplied initializer leaves the room for expansion without requiring major code changes.</p>\n"}, {"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1488975473, "creation_date": 1488975473, "answer_id": 42671193, "question_id": 42671012, "link": "https://stackoverflow.com/questions/42671012/what-is-the-purpose-of-an-array-with-undefined-length-but-only-one-int-element/42671193#42671193", "title": "What is the purpose of an array with undefined length but only one int element?", "body": "<p>Well, one reason I can think of has to do with code organization. If you write your code in a tabular form:</p>\n\n<pre><code>struct {\n  char const *file_name;\n  uint16_t    flags;\n  // Other data\n} table [] = {\n  { .file_name = \"/usr/bin/foo\", .flags = 0x0 },\n};\n\nfor (size_t i = 0; i &lt; sizeof(table)/sizeof(table[0]); ++i) {\n  // do something meaningful with a table row table[i]\n}\n</code></pre>\n\n<p>While it's just an array of 1 now, if you need to add more cases, your code is already written well for it. You'd just need to add another \"row' to the table initializer.</p>\n"}], "owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 42671111, "answer_count": 2, "score": 0, "last_activity_date": 1488980461, "creation_date": 1488975018, "last_edit_date": 1488980461, "question_id": 42671012, "link": "https://stackoverflow.com/questions/42671012/what-is-the-purpose-of-an-array-with-undefined-length-but-only-one-int-element", "title": "What is the purpose of an array with undefined length but only one int element?", "body": "<p>I have a headerfile which declares these arrays: </p>\n\n<pre><code>int stVal_On[] = {2};\nint stVal_Off[] ={1};\nint subVal_On[]={1};\nint subMss[]={1};\nint subVal_Off[]={0};\n</code></pre>\n\n<p>The dereferenced arrays are then used in structs that are declared:</p>\n\n<p><a href=\"https://i.stack.imgur.com/68PkE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/68PkE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Definition of WriteData struct:</p>\n\n<pre><code>/* Write structure used in loop for Read- and Write Tests */\ntypedef struct WriteData {\n    char* name;                 // MMS object name\n    const VOID* data;           // Data to write\n    const SINT32 localFormat;   // SVI type (on server)\n    const SINT32 dataLength;    // length of data to write/read\n    const SINT32 NbrofElmnts;   // Number of elements to write/read\n    char* description;          // SVI type as String (on server)\n    char* SVI_Name;             // SVI address of the SVI mapped on server\n    UINT32 svi_Length;          // length of SVI variable on server (used for readback)\n} WriteData;\n</code></pre>\n\n<p>What is the purpose of this <code>int arr[] = {1};</code> idiom? Why use arrays at all if only one value is assigned?</p>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1488975584, "post_id": 42670991, "comment_id": 72466983, "body": "Do you want to set the address as 0xFF to send_data or the value as 0xFF. In the code above you are setting the address as 0xFF, in which case there should be some meaningful data at that address."}, {"owner": {"reputation": 15176, "user_id": 390363, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/662dda87a8ad559dca5570b7786cf6fb?s=128&d=identicon&r=PG", "display_name": "aragaer", "link": "https://stackoverflow.com/users/390363/aragaer"}, "edited": false, "score": 0, "creation_date": 1488975682, "post_id": 42670991, "comment_id": 72467058, "body": "&quot;Cast&quot; means using the same data as if it was a different type. You want to get a pointer to some value - it isn&#39;t called &quot;cast&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3733068, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ca7f1a7ed5c24a89ffd97a4f1457def9?s=128&d=identicon&r=PG", "display_name": "benjamin button", "link": "https://stackoverflow.com/users/3733068/benjamin-button"}, "edited": false, "score": 0, "creation_date": 1488979328, "post_id": 42671188, "comment_id": 72469631, "body": "send_data((unsigned char[1]) { SEPARATOR }, 1); &gt;&gt; ugly but what I&#39;ve asked for. thanks!!"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 3, "last_activity_date": 1488975464, "creation_date": 1488975464, "answer_id": 42671188, "question_id": 42670991, "link": "https://stackoverflow.com/questions/42670991/cast-single-character-so-it-can-be-used-where-a-char-is-needed/42671188#42671188", "title": "Cast single character so it can be used where a char * is needed", "body": "<p>The old-school way would be to work around it, if you don't want to change it:</p>\n\n<pre><code>void welcome(void)\n{\n  unsigned char data = SEPARATOR;\n  send_data(&amp;data, 1);\n}\n</code></pre>\n\n<p>But you should also be able to use a C99 compound literal:</p>\n\n<pre><code>send_data((unsigned char[1]) { SEPARATOR }, 1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1488976040, "post_id": 42671190, "comment_id": 72467322, "body": "The second argument to <code>send_data()</code> is the length, so 0-termination (with unchanged length of <code>1</code>) makes little sense."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1488982671, "post_id": 42671190, "comment_id": 72471986, "body": "@unwind It is not obvious if the function works with strings or with raw data. Without clarification of what the function does, this code is safer than your version. Suppose for example that the function passes on both parameters to <code>strncpy</code> or similar."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1488983943, "post_id": 42671190, "comment_id": 72472983, "body": "@Lundin I disagree. Any code dealing with <code>unsigned char</code> explicitly is trying to signal &quot;I want raw bytes&quot;, in my world (since the signedness of <code>char</code> is implementation-specific), and having an explicit length field makes that even more clear. Doing it @MikeCAT&#39;s way is ambiguous, doing work to create a buffer that is longer than you then say to the function getting that buffer is a code smell, in my opinion."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1488984901, "post_id": 42671190, "comment_id": 72473737, "body": "@unwind There&#39;s coding standards that ban the use of <code>char</code> entirely, for that very reason. Meaning you&#39;d have to work with <code>unsigned char</code> for strings, which does make sense since symbol tables are unlikely to have negative indices. The presence of the <code>0xFF</code> constant does suggest that this isn&#39;t a string though... would be good if the OP could clarify this."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 2, "last_activity_date": 1488975467, "creation_date": 1488975467, "answer_id": 42671190, "question_id": 42670991, "link": "https://stackoverflow.com/questions/42670991/cast-single-character-so-it-can-be-used-where-a-char-is-needed/42671190#42671190", "title": "Cast single character so it can be used where a char * is needed", "body": "<p>Compound literals (C99 or later) may be useful.</p>\n\n<pre><code>void welcome(){\n   // I want to call it in a one line\n   send_data((unsigned char[]){SEPARATOR} ,1);\n}\n</code></pre>\n\n<p>Add terminating null-character if it is required.</p>\n\n<pre><code>void welcome(){\n   // I want to call it in a one line\n   send_data((unsigned char[]){SEPARATOR, 0} ,1);\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3733068, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ca7f1a7ed5c24a89ffd97a4f1457def9?s=128&d=identicon&r=PG", "display_name": "benjamin button", "link": "https://stackoverflow.com/users/3733068/benjamin-button"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42671188, "answer_count": 2, "score": 1, "last_activity_date": 1488975640, "creation_date": 1488974978, "last_edit_date": 1488975640, "question_id": 42670991, "link": "https://stackoverflow.com/questions/42670991/cast-single-character-so-it-can-be-used-where-a-char-is-needed", "title": "Cast single character so it can be used where a char * is needed", "body": "<p>How to correctly cast SEPARATOR in the following code while calling the send_data function?</p>\n\n<p><strong><em>foo.h</em></strong></p>\n\n<pre><code>#define SEPARATOR 0xFF\n\nvoid send_data(unsigned char * data, int dataSize);\n</code></pre>\n\n<p><strong><em>foo.c</em></strong></p>\n\n<pre><code>void welcome(){\n   // I want to call it in a one line\n   send_data(SEPARATOR ,1);\n}\n</code></pre>\n\n<p><em>Btw, of course I can define the SEPARATOR as a const char. But I just wonder about if there is any way to use it like that.</em></p>\n"}, {"tags": ["c", "fgets", "scanf", "file-pointer"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7379240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c509d109ec93122919643924f28bdca?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Streeter", "link": "https://stackoverflow.com/users/7379240/dan-streeter"}, "edited": false, "score": 0, "creation_date": 1488977456, "post_id": 42670895, "comment_id": 72468329, "body": "Ahh ha! Thanks, I haven&#39;t come across fseek before that&#39;s interesting. So I guess it just makes sure that you&#39;re at the start of the file before reading? Cheers"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1, "user_id": 7379240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c509d109ec93122919643924f28bdca?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Streeter", "link": "https://stackoverflow.com/users/7379240/dan-streeter"}, "edited": false, "score": 0, "creation_date": 1488978707, "post_id": 42670895, "comment_id": 72469210, "body": "In that example, yes, it &quot;sets&quot; the position to 0 within the file. You can also use it to position yourself relative to the current position or the end of the file too."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 2, "last_activity_date": 1488974695, "creation_date": 1488974695, "answer_id": 42670895, "question_id": 42670705, "link": "https://stackoverflow.com/questions/42670705/how-to-read-from-a-file-using-fgets/42670895#42670895", "title": "How to read from a file using fgets?", "body": "<p>Since you're both reading and writing from the file you want to use \"w+\" to open the file rather than just \"w\".</p>\n\n<p>But that won't fix things because once you've written out that text, your position in the file is still at the end, so you'll also need to reset the position before you can read anything in using <code>fseek()</code></p>\n\n<pre><code>fseek(Danfile,0,SEEK_SET);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7673886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72041fa79a0a663444dd82fb56285b29?s=128&d=identicon&r=PG&f=1", "display_name": "Radoslav T.", "link": "https://stackoverflow.com/users/7673886/radoslav-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1488984417, "creation_date": 1488984417, "answer_id": 42674413, "question_id": 42670705, "link": "https://stackoverflow.com/questions/42670705/how-to-read-from-a-file-using-fgets/42674413#42674413", "title": "How to read from a file using fgets?", "body": "<p>While using <strong>fopen()</strong> you pass the option for opening as an argument to the funtion. Here is the list:</p>\n\n<pre><code>\"r\"  - Opens the file for reading. The file must exist. \n\"w\"  - Creates an empty file for writing. If a file with the same name already exists,\n      its content is erased and the file is considered as a new empty file.\n\"a\"  - Appends to a file. Writing operations, append data at the end of the \n      file. The file is created if it does not exist.\n\"r+\" - Opens a file to update both reading and writing. The file must exist.\n\"w+\" - Creates an empty file for both reading and writing.\n\"a+\" - Opens a file for reading and appending.\n</code></pre>\n\n<p>Try using <strong>\"r+\"</strong> or <strong>\"w+\"</strong>. After writing some text, your position in the file will move forward along with the text. Use <strong>rewind(FILE* filename)</strong> to move your position straight to the start of the file. For more information related to file handling i recommend checking what is inside <strong>stdio</strong> library: \n<a href=\"https://www.tutorialspoint.com/c_standard_library/stdio_h.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/c_standard_library/stdio_h.htm</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7379240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c509d109ec93122919643924f28bdca?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Streeter", "link": "https://stackoverflow.com/users/7379240/dan-streeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488984417, "creation_date": 1488974136, "question_id": 42670705, "link": "https://stackoverflow.com/questions/42670705/how-to-read-from-a-file-using-fgets", "title": "How to read from a file using fgets?", "body": "<p>I'm trying to read the contents of \"Danfilez.txt\" using fgets. However on completion the program returns a random value and i'm unsure why. I'm new to programming so any help would be greatly appreciated!</p>\n\n<pre><code>int main()\n{\n    FILE* Danfile = fopen (\"Danfilez.txt\", \"w\");\n    char fileinfo [50];// Character arrays for file data //\n\n    if (Danfile == NULL)\n    {\n        printf (\"ERROR\\n\");\n\n    }\n\n    else\n    {\n        printf(\"Everything works!\\n\");\n        fprintf (Danfile, \"Welcome to Dan's file.\"); \n        fgets(fileinfo,50,Danfile);\n        printf(\"%s\\n\",fileinfo);\n        fclose (Danfile); // CLOSES FILE //\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "switch-statement"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 9, "creation_date": 1488974074, "post_id": 42670630, "comment_id": 72465924, "body": "You can start by realizing the a simple call to <code>toupper</code> can reduce the number of cases in your switch by half."}, {"owner": {"reputation": 43, "user_id": 7678075, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AAAt6qySpCE/AAAAAAAAAAI/AAAAAAAABS8/s_x_NFsiD4g/photo.jpg?sz=128", "display_name": "Youcef Ali", "link": "https://stackoverflow.com/users/7678075/youcef-ali"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488975238, "post_id": 42670630, "comment_id": 72466763, "body": "Thanks @StoryTellr"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7678075, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AAAt6qySpCE/AAAAAAAAAAI/AAAAAAAABS8/s_x_NFsiD4g/photo.jpg?sz=128", "display_name": "Youcef Ali", "link": "https://stackoverflow.com/users/7678075/youcef-ali"}, "edited": false, "score": 0, "creation_date": 1488974457, "post_id": 42670731, "comment_id": 72466217, "body": "The objective here is to select the action it may wrote in uppercase or tiny (pa,Pa,aP,PA)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 43, "user_id": 7678075, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AAAt6qySpCE/AAAAAAAAAAI/AAAAAAAABS8/s_x_NFsiD4g/photo.jpg?sz=128", "display_name": "Youcef Ali", "link": "https://stackoverflow.com/users/7678075/youcef-ali"}, "edited": false, "score": 0, "creation_date": 1488974678, "post_id": 42670731, "comment_id": 72466379, "body": "@YoucefAli Yes, and I showed how to do that. Just duplicate the <code>case</code> labels without duplicating their code."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1488974202, "creation_date": 1488974202, "answer_id": 42670731, "question_id": 42670630, "link": "https://stackoverflow.com/questions/42670630/switch-statement-many-parameters-and-the-same-treatment/42670731#42670731", "title": "Switch statement many parameters and the same treatment", "body": "<p>Change code like:</p>\n\n<pre><code>          case 'A' :\n              AA(x,y,z);\n          break;  \n          case 'a' :\n            AA(x,y,z);\n          break;  \n</code></pre>\n\n<p>to:</p>\n\n<pre><code>          case 'A' :\n          case 'a' :\n              AA(x,y,z);\n          break;  \n</code></pre>\n\n<p>You still have an absurd amount of code duplication. Why aren't you using something like a lookup table? Or even an <code>if</code>/<code>else if</code> tree that would eliminate the need for all the <code>break</code> statements? Or <code>toupper</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1488975707, "last_edit_date": 1488975707, "creation_date": 1488975132, "answer_id": 42671060, "question_id": 42670630, "link": "https://stackoverflow.com/questions/42670630/switch-statement-many-parameters-and-the-same-treatment/42671060#42671060", "title": "Switch statement many parameters and the same treatment", "body": "<p>You could use <code>strcasecmp()</code> which compares two strings but doesn't care about the case of the characters.</p>\n\n<pre><code>if(strcasecmp(instruction, \"pa\") == 0)\n  {\n  PA(x,y);\n  }\nelse if(strcasecmp(intruction, \"pr\") == 0)\n  {\n  PR(x,y);\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 1, "last_activity_date": 1488975340, "creation_date": 1488975340, "answer_id": 42671136, "question_id": 42670630, "link": "https://stackoverflow.com/questions/42670630/switch-statement-many-parameters-and-the-same-treatment/42671136#42671136", "title": "Switch statement many parameters and the same treatment", "body": "<p>One way to do it would be by using the switch <strong>fall through</strong>. Though in your case, you would have to use it in a nested manner. </p>\n\n<p>Something like this.</p>\n\n<pre><code>switch (instruction[0])\n{\n    case 'P' :\n    case 'p' :\n\n        switch (instruction[1])\n        {\n            case 'A' :\n            case 'a' :\n                PA(x,y);\n            break ; \n\n            case 'R' :\n            case 'r' :\n                  PR(x,y);\n             break ; \n\n            case 'U' :\n            case 'u' :\n                  PU(x,y);\n            break ; \n\n            case 'D' :\n            case 'd' :\n                  PD(x,y);\n            break ;  \n        }\n    break;\n    case 'T' :\n    case 't' :\n        Serial.println(\"error\");\n        break;\n\n    case 'A' :\n    case 'a' :\n        switch(instruction[1])\n        {\n            case 'A' :\n            case 'a' :\n                  AA(x,y,z);\n            break;  \n        }\n    break;\n}\n</code></pre>\n\n<p>Note that the default case is not taken care of in the various switch statements. You need to decide what action to take if the user inputs a value of \"px\". Currently this code takes no action.</p>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 4184258, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MTjh4PmfESE/AAAAAAAAAAI/AAAAAAAAADg/xKTQKcqhUj8/photo.jpg?sz=128", "display_name": "luc", "link": "https://stackoverflow.com/users/4184258/luc"}, "is_accepted": false, "score": 0, "last_activity_date": 1488980552, "creation_date": 1488980552, "answer_id": 42672970, "question_id": 42670630, "link": "https://stackoverflow.com/questions/42670630/switch-statement-many-parameters-and-the-same-treatment/42672970#42672970", "title": "Switch statement many parameters and the same treatment", "body": "<p>Depending on how flexible you are with those functions, you could refactor them so that they take the second letter as a parameter.</p>\n\n<p>So, instead of having</p>\n\n<pre><code>PA(x,y);\nPR(x,y);\nPU(x,y);\nPD(x,y);\n...\n</code></pre>\n\n<p>use</p>\n\n<pre><code>P( c, x, y );\n</code></pre>\n\n<p>and hand over <code>A</code>, <code>R</code>, <code>U</code>, <code>D</code>, etc (i.e, <code>instruction[1]</code>) for the parameter <code>c</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 7678075, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AAAt6qySpCE/AAAAAAAAAAI/AAAAAAAABS8/s_x_NFsiD4g/photo.jpg?sz=128", "display_name": "Youcef Ali", "link": "https://stackoverflow.com/users/7678075/youcef-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 42671136, "answer_count": 4, "score": -4, "last_activity_date": 1488984623, "creation_date": 1488973949, "last_edit_date": 1488984623, "question_id": 42670630, "link": "https://stackoverflow.com/questions/42670630/switch-statement-many-parameters-and-the-same-treatment", "title": "Switch statement many parameters and the same treatment", "body": "<p>I use switch Case to select function the Variable is entred by serial (Ardiuino) Exemple if i write UP or Up even up the same treatment and the same action is called \nI did it but i got a longer text it's possible to reduce it \n The code is above </p>\n\n<pre><code>switch (instruction[0])\n    {\n     case 'P' :\n\n                  switch (instruction[1])\n            {\n             case 'A' :\n                        PA(x,y);\n             break ; \n             case 'R' :\n                      PR(x,y);\n             break ; \n             case 'U' :\n                      PU(x,y);\n             break ; \n             case 'D' :\n                      PD(x,y);\n             break ;  \n\n            case 'a' :\n            PA(x,y);\n             break ; \n             case 'r' :\n                      PR(x,y);\n             break ; \n             case 'u' :\n                      PU(x,y);\n             break ; \n             case 'd' :\n                      PD(x,y);\n             break ;   \n            }\n\n        break;\n        case 'p' :\n\n                  switch (instruction[1])\n            {\n             case 'A' :\n                        PA(x,y);\n             break ; \n             case 'R' :\n                      PR(x,y);\n             break ; \n             case 'U' :\n                      PU(x,y);\n             break ; \n             case 'D' :\n                      PD(x,y);\n             break ;  \n\n            case 'a' :\n            PA(x,y);\n             break ; \n             case 'r' :\n                      PR(x,y);\n             break ; \n             case 'u' :\n                      PU(x,y);\n             break ; \n             case 'd' :\n                      PD(x,y);\n             break ;   \n            }              \n        break;\n\n\n\n\n\n     case 'T' :\n        Serial.println(\"error\");\n        break;\n     case 'A' :\n\n            switch(instruction[1])\n            {\n              case 'A' :\n                  AA(x,y,z);\n              break;  \n              case 'a' :\n                AA(x,y,z);\n              break;  \n\n            }\n        break;\n\n      case 'a':     \n            switch(instruction[1])\n            {\n              case 'A' :\n                  AA(x,y,z);\n              break;  \n              case 'a' :\n                AA(x,y,z);\n              break;  \n\n            }\n        break;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["java", "c", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488973130, "post_id": 42670245, "comment_id": 72465206, "body": "Because Java tries to be a &quot;safe&quot; language, and C doesn&#39;t pretend to be one. C is therefore more powerful when it comes to certain applications of it."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1488973171, "post_id": 42670245, "comment_id": 72465237, "body": "There&#39;s no &quot;visiting NULL&quot; in your C code example - it&#39;s working the same way as the Java, by adding the node at the end of the list."}, {"owner": {"reputation": 5673, "user_id": 1794706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/duk1R.png?s=128&g=1", "display_name": "anacron", "link": "https://stackoverflow.com/users/1794706/anacron"}, "edited": false, "score": 0, "creation_date": 1488973172, "post_id": 42670245, "comment_id": 72465239, "body": "Does your C code actually work? I thought it would work the same way as in Java.."}, {"owner": {"reputation": 113, "user_id": 7407352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a830cdf63ab5a7420d121f96fdb1272?s=128&d=identicon&r=PG&f=1", "display_name": "asddf", "link": "https://stackoverflow.com/users/7407352/asddf"}, "edited": false, "score": 0, "creation_date": 1488973251, "post_id": 42670245, "comment_id": 72465307, "body": "The java code doesnt work. The C one does. for the java code to work i have to stop before i go right the while loop should be while(k.right!=null)"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 2, "creation_date": 1488973287, "post_id": 42670245, "comment_id": 72465333, "body": "Downvotes come for lack of prior research, unclear input and asking about things that could be found in the first chapter of any reasonable book on the subject. Just to name some of the reasons that result in downvotes here."}, {"owner": {"reputation": 113, "user_id": 7407352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a830cdf63ab5a7420d121f96fdb1272?s=128&d=identicon&r=PG&f=1", "display_name": "asddf", "link": "https://stackoverflow.com/users/7407352/asddf"}, "edited": false, "score": 0, "creation_date": 1488973368, "post_id": 42670245, "comment_id": 72465389, "body": "I can add the whole C code if anyone wishes to see"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1488974230, "post_id": 42670245, "comment_id": 72466048, "body": "In C you are using a pointer to a pointer. Such a thing does not exist in Java."}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1488979848, "post_id": 42671593, "comment_id": 72469975, "body": "Does the java version also not have any means of passing back the first node if it&#39;s created?"}, {"owner": {"reputation": 1372, "user_id": 4057465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86e26dcaa334e64a9266d4b459df095?s=128&d=identicon&r=PG&f=1", "display_name": "Zizy Archer", "link": "https://stackoverflow.com/users/4057465/zizy-archer"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1489048270, "post_id": 42671593, "comment_id": 72503263, "body": "@ChrisTurner You mean in case this node you are passing to is not initialized, can you create and return it? With the function as written, nope - if you give this function node=null, there is no way it could create something and return.   But for example if you passed it &quot;linkedListStart&quot;, which is a structure that contains a node (that might be null), then you could put the first node to the list. Which is what the C code is actually doing - there is a ll1 which has &quot;head&quot; = first node. And if that first node is null, put the freshly created one there. If ll1 itself is null, it crashes."}], "tags": [], "owner": {"reputation": 1372, "user_id": 4057465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86e26dcaa334e64a9266d4b459df095?s=128&d=identicon&r=PG&f=1", "display_name": "Zizy Archer", "link": "https://stackoverflow.com/users/4057465/zizy-archer"}, "is_accepted": false, "score": 0, "last_activity_date": 1488976653, "creation_date": 1488976653, "answer_id": 42671593, "question_id": 42670245, "link": "https://stackoverflow.com/questions/42670245/difference-in-linked-lists-between-c-and-java/42671593#42671593", "title": "Difference in linked lists between c and java", "body": "<p>In C, you have a well defined location in memory where you encounter this null. Then you replace that null value with your new node.</p>\n\n<p>In Java, you are trying to put a new node in the middle of nowhere. This null is not linked to anything anymore. Sure, you know it came from k.right, but you at that point of <code>k = new</code> you only have the null value, not its address. Unlike in C. So, there is no way to put new node anywhere and you get error.</p>\n\n<p>As you figured out yourself, simply use the <code>k.right!=null</code> check. This is essentially what the C code is doing too, just hidden behind another layer of pointers.</p>\n"}], "owner": {"reputation": 113, "user_id": 7407352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a830cdf63ab5a7420d121f96fdb1272?s=128&d=identicon&r=PG&f=1", "display_name": "asddf", "link": "https://stackoverflow.com/users/7407352/asddf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1488976653, "creation_date": 1488972853, "last_edit_date": 1488973131, "question_id": 42670245, "link": "https://stackoverflow.com/questions/42670245/difference-in-linked-lists-between-c-and-java", "title": "Difference in linked lists between c and java", "body": "<p>In java i cant add a node to a linked list when i visit null for example</p>\n\n<pre><code>void add(int val,node k){\n    while(k!=null)\n    k=k.right;\n    k=new node(val,null);\n}\n</code></pre>\n\n<p>Where as in C</p>\n\n<pre><code>void add(ll* ll1,int val){\n    node* neu=(node*)malloc(sizeof(node));\n    neu-&gt;val=val;\n    neu-&gt;right=NULL;\n    if(ll1-&gt;head==NULL){\n        ll1-&gt;head=neu;\n        return;\n    }\n    node** curr=&amp;(ll1-&gt;head);\n    while(*curr){\n        curr=&amp;((*curr)-&gt;right);\n    }\n\n    (*curr)=neu;\n}\n</code></pre>\n\n<p>I can add a node when i visit NULL. Can someone please explain me the difference ?Why does it work like this ?</p>\n\n<p>Im sorry if my question is explained badly.(you can ask in comments to understand better)</p>\n"}, {"tags": ["c", "linux", "makefile", "xenomai"], "owner": {"reputation": 41, "user_id": 7040879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aed67a8e9ac381913bb73a385ce930d?s=128&d=identicon&r=PG&f=1", "display_name": "aurel94100", "link": "https://stackoverflow.com/users/7040879/aurel94100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1488971693, "creation_date": 1488971693, "question_id": 42669796, "link": "https://stackoverflow.com/questions/42669796/building-app-with-xenomai-linux", "title": "Building app with Xenomai (linux)", "body": "<p>I am new to Xenomai and Linux and I have a problem for building app with many files. I have a folder which contains some of .c and .h\nfiles.</p>\n\n<p>I have this xenomai makefile sample which work if I have only one file.</p>\n\n<pre><code>XENO_CONFIG := PATH_TO_XENO_CONFIG\nCFLAGS := $(shell $(XENO_CONFIG) --cobalt --cflags)\nLDFLAGS := $(shell $(XENO_CONFIG) --cobalt --ldflags)\nCC := $(shell $(XENO_CONFIG) --cc)\n\nEXECUTABLE := cobalt_app\n\nall: $(EXECUTABLE)\n\n%: %.c\n        $(CC) -o $@ $&lt; $(CFLAGS) $(LDFLAGS)\n</code></pre>\n\n<p>No I want to change it to use it with many files. Do you have any ideas ? I plan to to use the wildcard variables but I don't know how.</p>\n"}, {"tags": ["c", "gcc", "stack", "bios", "uefi"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 4, "creation_date": 1488971450, "post_id": 42669666, "comment_id": 72464006, "body": "Perhaps GCC put the variable in a register, or optimized it out since it wasn&#39;t being used? You fail to describe why this is a problem (and of course also fail to show any code)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1488971451, "post_id": 42669666, "comment_id": 72464007, "body": "Maybe it&#39;s an optimization issue? And local variables (a.k.a. <i>automatic variables</i>) doesn&#39;t <i>have</i> to be on the stack."}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 0, "last_activity_date": 1488975053, "creation_date": 1488975053, "answer_id": 42671024, "question_id": 42669666, "link": "https://stackoverflow.com/questions/42669666/local-variable-of-a-c-file-is-not-getting-created-in-stack-its-gcc-compiled-cod/42671024#42671024", "title": "Local variable of a c file is not getting created in stack, its GCC compiled code,", "body": "<p>If you read the C11 language specification, you'll find that it never mentions the stack or stack frames or putting variables on the stack. There is no requirment in C to put automatic variables in any kind of stack.</p>\n\n<p>How the program stores automatic variables (i.e. those defined within a function scope but without the <code>static</code> keyword) is entirely up to the compiler. In olden days, most compilers created space on the system stack for arguments, the return address and local variables. In modern times, this has fallen out of favour because processors generally have lots of registers and it's more efficient to keep local variables and function arguments in registers if at all possible. </p>\n\n<p>There are only two reasons why a compiler needs to store an automatic variable on the stack:</p>\n\n<ol>\n<li><p>There are too many variables and arguments to put them all in registers</p></li>\n<li><p>The function takes the address of the variable (you can't have a pointer to a register)</p></li>\n</ol>\n\n<p>So gcc is probably deciding that it doesn't need to create stack space for your variable and it goes in a register. The Visual Studio C compiler always used to be notorious for being neglected by Microsoft so it is probably not so up to date with modern ideas about automatic variables.</p>\n\n<p>Also, you'll find that compilers often optimise variables away. If you don't do anything useful with your variable, the compiler may decide it doesn't need it at all. For example in the following code</p>\n\n<pre><code>int f()\n{\n    int i;\n\n    for (i = 0 ; i &lt; 10 ; ++i);\n    return 0;\n}\n</code></pre>\n\n<p>The loop is empty, so the compiler knows it can throw it away and then it doesn't need the variable so it will throw that away too. </p>\n"}], "owner": {"reputation": 1, "user_id": 7677653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7213c9eb7219538a986c7b70c6f8c81?s=128&d=identicon&r=PG&f=1", "display_name": "Divya", "link": "https://stackoverflow.com/users/7677653/divya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488975053, "creation_date": 1488971314, "last_edit_date": 1488971420, "question_id": 42669666, "link": "https://stackoverflow.com/questions/42669666/local-variable-of-a-c-file-is-not-getting-created-in-stack-its-gcc-compiled-cod", "title": "Local variable of a c file is not getting created in stack, its GCC compiled code,", "body": "<p>I am working in UEFI EDK2 Bios source. We created a platform related new package in the EDK2 source. I find a strange issue with the platform related code we added.</p>\n\n<p>When I did source level debugging I noticed the\nlocal variable in a C function is not getting created in stack when its compiled with GCC.</p>\n\n<p>The same UEFI code when compiled with visual studio then local variable in a C function is getting created in stack.</p>\n\n<p>I am executing this code on a Simulation environment where I can see the Stack Base, all segment registers, Current executing code, memory etc..</p>\n\n<p>Its a multi-core system but only Boot Strap processors in enabled</p>\n"}, {"tags": ["c", "pointers", "malloc", "llvm"], "comments": [{"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1488972198, "post_id": 42669492, "comment_id": 72464524, "body": "What is the &#39;total size&#39;... If the struct resides on the stack, one pointer points to a value in the data segment and another pointer points to malloced value on the heap there is no block of size x. You could only get a count of bytes totally used. To get the size of your pointer s.a, someone has to ask the internal malloc structs. Only these structs know the size of the allocated block."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1488972297, "post_id": 42669492, "comment_id": 72464597, "body": "<code>struct S foo(void) {   s.a = (int *)malloc(sizeof(int) * 10);   s.b = 2;    return s;}</code>  There is no <code>s</code> : s is undefined. (and  <code>llvm::Type</code> is a syntax error in C)"}], "owner": {"reputation": 19, "user_id": 7545202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ba7bfa18233e606df49f51ffe42f6b?s=128&d=identicon&r=PG&f=1", "display_name": "Foort", "link": "https://stackoverflow.com/users/7545202/foort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1488970820, "creation_date": 1488970820, "question_id": 42669492, "link": "https://stackoverflow.com/questions/42669492/get-block-of-size-bytes-of-memory", "title": "Get block of size bytes of memory", "body": "<p>Suppose I have this code:</p>\n\n<pre><code>struct S {\n  int* a;\n  float b;\n};\n\nstruct S foo(void) {\n  s.a = (int *)malloc(sizeof(int) * 10);\n  s.b = 2;\n\n  return s;\n}\n\nint main() {\n  struct S s = foo();\n\n  // Parse the code here\n\n  return 0;\n}\n</code></pre>\n\n<p>By using <code>LLVM</code> is it possible to get the number of bytes allocated by the malloc by only using the <code>llvm::Type</code> on <code>s.a</code> in the <code>main</code> function? I know that it is possible to get the size of the pointer, in bits and bytes, but not the total size. I'm actually using the <code>bitcode</code> (<code>.bc</code> file) in order to get the <code>llvm::Type</code>.</p>\n"}, {"tags": ["c", "if-statement", "compiler-errors", "runtime-error"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1488967887, "post_id": 42668384, "comment_id": 72461595, "body": "No image and C/C++ tagging please. Please read <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a>."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 4, "creation_date": 1488967903, "post_id": 42668384, "comment_id": 72461603, "body": "There&#39;s millions of errors here, you should pick up a book on C, guessing&#39;s not the way."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1488967914, "post_id": 42668384, "comment_id": 72461608, "body": "You get errors because you haven&#39;t learned the language yet. <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">Please find a good beginners book</a> to read, and start over with something simpler."}, {"owner": {"reputation": 5326, "user_id": 614065, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f164c6c3b709c97862a0d14f7725830b?s=128&d=identicon&r=PG", "display_name": "Olcay Erta\u015f", "link": "https://stackoverflow.com/users/614065/olcay-erta%c5%9f"}, "edited": false, "score": 0, "creation_date": 1496387833, "post_id": 42668384, "comment_id": 75650877, "body": "Mert, arad\u0131\u011f\u0131n cevab\u0131 bulduysan cevaplardan birini kabul etmelisin. Sorunun puan\u0131n\u0131n alt\u0131ndaki ye\u015fil tik i\u015faretine t\u0131klayarak yapabilirsin bunu."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 4, "last_activity_date": 1488967879, "creation_date": 1488967879, "answer_id": 42668414, "question_id": 42668384, "link": "https://stackoverflow.com/questions/42668384/errorexpected-before-hours/42668414#42668414", "title": "[Error]:expected &#39;(&#39; before &#39;hours&#39;", "body": "<p>The solution is literally in the error message.</p>\n\n<p>In C, the syntax of the <code>if</code> requires the parentheses around the condition.</p>\n\n<p>So it should be</p>\n\n<pre><code>else if(hours &lt; 24)\n</code></pre>\n\n<p>It's a good hint that your first <code>if</code> was accepted.</p>\n\n<p>Also you need braces around your scopes, your code looks like un-indented Python or something. Please read some basic reference material before trying to use a new programming language.</p>\n"}, {"tags": [], "owner": {"reputation": 5326, "user_id": 614065, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f164c6c3b709c97862a0d14f7725830b?s=128&d=identicon&r=PG", "display_name": "Olcay Erta\u015f", "link": "https://stackoverflow.com/users/614065/olcay-erta%c5%9f"}, "is_accepted": true, "score": 0, "last_activity_date": 1488969433, "creation_date": 1488969433, "answer_id": 42668986, "question_id": 42668384, "link": "https://stackoverflow.com/questions/42668384/errorexpected-before-hours/42668986#42668986", "title": "[Error]:expected &#39;(&#39; before &#39;hours&#39;", "body": "<p>I didn't read your problem definition but your code sould be at least like this to be correct as syntax and logic:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nfloat totalFee = 0;\nint hours = 0;\n\nint main(void) {\n\n    int i;\n    int b;\n    printf(\"Please Enter Number of Cars \");\n    scanf(\"%d\", &amp;i);\n\n    for (b = 0; b &lt; i; b++) {\n        scanf(\"%d\", &amp;hours);\n        if (hours &lt; 8) {\n            totalFee += hours * 0.5;\n        } else if (hours &lt; 24) {\n            float additionalHours = hours - 7;\n            totalFee += additionalHours * 5;\n            totalFee += hours * 0.5;\n        } else {\n            float days = hours / 24;\n            float extraHours = hours % 24;\n            totalFee += days * 50;\n            totalFee += days * 24 * 0.5;\n            totalFee += extraHours * 5;\n            totalFee += extraHours * 0.5;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7128249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f667eed9f75aa460081a12c9b1c8a73f?s=128&d=identicon&r=PG&f=1", "display_name": "Mert", "link": "https://stackoverflow.com/users/7128249/mert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 42668986, "answer_count": 2, "score": -6, "last_activity_date": 1488974031, "creation_date": 1488967807, "last_edit_date": 1488974031, "question_id": 42668384, "link": "https://stackoverflow.com/questions/42668384/errorexpected-before-hours", "title": "[Error]:expected &#39;(&#39; before &#39;hours&#39;", "body": "<p>I am trying to learn programming. It is a simple question but I can't solve it.\nWhy am I getting an error? What's wrong? \nHow can I solve this problem? Please help me.</p>\n\n<p>Here is problem definition and my code:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aprZQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aprZQ.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid calculateCharged(int c) {\n    int a;\n    int hours = scanf(\"%d\", &amp;a);\n    int totalFee = 25;\n}\n\nint main(void) {\n\n    int i;\n    int b;\n    printf(\"Please Enter Number of Cars \");\n    scanf(\"%d\", &amp;i);\n    for (b = 0; b &lt; i; b++) {\n        calculateCharged(hours)\n        if (hours)&lt;8\n        totalFee += hours * 0, 5\n        else if hours &lt; 24\n        int additionalHours = hours - 7\n        totalFee += additionalHours * 5\n        totalFee += hours * 0, 5\n        else\n        int days = hours / 24\n        int extraHours = hours % 24\n        totalFee += days * 50\n        totalFee += days * 24 * 0, 5\n        totalFee += extraHours * 5\n        totalFee += extraHours * 0, 5\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1488966955, "post_id": 42668005, "comment_id": 72460955, "body": "You could just pass sum as a second parameter. Is that cheating?"}, {"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "reply_to_user": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 1, "creation_date": 1488967659, "post_id": 42668005, "comment_id": 72461421, "body": "no i can&#39;t do that. this is the restriction for the program. i can pass only one parameter which is the input number"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488985897, "post_id": 42668005, "comment_id": 72474440, "body": "Do you need to handle numbers that when reversed are not representable as an <code>int</code>?  <code>1123456789</code> vs. <code>9876543211</code>  (too big for 32 bits.)"}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488967233, "post_id": 42668093, "comment_id": 72461137, "body": "Worth mentioning that this also makes the working function tail-recursive. Thus increasing the likelihood of the compiler emitting a simple loop for the operation."}, {"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488967493, "post_id": 42668093, "comment_id": 72461304, "body": "i can pass only one parameter in pali function and i can not use static function."}, {"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488968237, "post_id": 42668093, "comment_id": 72461809, "body": "the function which perform recursion only have one parameter in function calling."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1488966977, "creation_date": 1488966977, "answer_id": 42668093, "question_id": 42668005, "link": "https://stackoverflow.com/questions/42668005/i-have-to-check-a-number-is-palindrome-or-not-by-recursion/42668093#42668093", "title": "I have to check a number is palindrome or not by recursion", "body": "<p>Yes, the typical (\"functional\") approach is to carry the state in the form of a function argument. This often makes it necessary/nice to have a second function that does the actual recursion, which you can start by calling with the proper initial values for the state:</p>\n\n<pre><code>int do_pali(int sum, int n)\n{\n  if(n != 0)\n  {\n    const int r = n % 10;\n    return do_pali(10 * sum + r, n / 10);\n  }\n  return sum;\n}\n</code></pre>\n\n<p>the public function then just becomes:</p>\n\n<pre><code>int pali(int n)\n{\n  return do_pali(0, n);\n}\n</code></pre>\n\n<p>In languages with inner functions this can be more neatly expressed (GCC supports this as an extension).</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1488966987, "creation_date": 1488966987, "answer_id": 42668099, "question_id": 42668005, "link": "https://stackoverflow.com/questions/42668005/i-have-to-check-a-number-is-palindrome-or-not-by-recursion/42668099#42668099", "title": "I have to check a number is palindrome or not by recursion", "body": "<p>Since your function returns <code>sum</code> you could replace this line:</p>\n\n<pre><code>pali(n/10);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>sum=pali(n/10);\n</code></pre>\n\n<p>You'd also have to move it up a line too.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488967895, "post_id": 42668275, "comment_id": 72461601, "body": "i think it is not a recursion program. because you used a for loop to make the digits apart to reverse the number but you have to use recursion technique in which a function call itself untill the condition will remains true"}, {"owner": {"reputation": 439, "user_id": 6472546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kzrm.png?s=128&g=1", "display_name": "Sygmei", "link": "https://stackoverflow.com/users/6472546/sygmei"}, "reply_to_user": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488968244, "post_id": 42668275, "comment_id": 72461818, "body": "@ShivamGoel I added recursion version, I thought the &quot;or not by recursion&quot; in the title was &quot;not using recursion&quot;, better reading twice next time :)"}, {"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488968352, "post_id": 42668275, "comment_id": 72461883, "body": "i can&#39;t pass another variable as sum in recursion function. there is only one parameter in function call which is input number"}, {"owner": {"reputation": 439, "user_id": 6472546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kzrm.png?s=128&g=1", "display_name": "Sygmei", "link": "https://stackoverflow.com/users/6472546/sygmei"}, "reply_to_user": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488968391, "post_id": 42668275, "comment_id": 72461911, "body": "@ShivamGoel I&#39;ll edit with this new restriction then :)"}, {"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488968632, "post_id": 42668275, "comment_id": 72462080, "body": "i know you edit it but you pass a second parameter in pali function ( int pali(int n, int sum) ) which is not allowed you can pass only one parameter"}, {"owner": {"reputation": 439, "user_id": 6472546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kzrm.png?s=128&g=1", "display_name": "Sygmei", "link": "https://stackoverflow.com/users/6472546/sygmei"}, "reply_to_user": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488969410, "post_id": 42668275, "comment_id": 72462586, "body": "@ShivamGoel That&#39;s why I used the future tense &quot;I&#39;ll&quot;, meaning now it&#39;s done :) (With my third edit)"}, {"owner": {"reputation": 439, "user_id": 6472546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kzrm.png?s=128&g=1", "display_name": "Sygmei", "link": "https://stackoverflow.com/users/6472546/sygmei"}, "reply_to_user": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488969741, "post_id": 42668275, "comment_id": 72462814, "body": "No problem :) I hope the last version resolves your problem !"}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1488970846, "post_id": 42668275, "comment_id": 72463596, "body": "I don&#39;t think it&#39;s possible to find a recursive function with one parameter and no static variable. For the multiplication by 10 you need a static counter or the depth of recursion. Without static or a 2nd parameter, you can&#39;t get this information."}, {"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488971293, "post_id": 42668275, "comment_id": 72463901, "body": "great. its working but it is a little bit complex .But Thanks."}, {"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488971801, "post_id": 42668275, "comment_id": 72464247, "body": "but it is possible. i search a program where someone use math_function( log10 and pow ) to write that program"}], "tags": [], "owner": {"reputation": 439, "user_id": 6472546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kzrm.png?s=128&g=1", "display_name": "Sygmei", "link": "https://stackoverflow.com/users/6472546/sygmei"}, "is_accepted": false, "score": 1, "last_activity_date": 1488969377, "last_edit_date": 1488969377, "creation_date": 1488967495, "answer_id": 42668275, "question_id": 42668005, "link": "https://stackoverflow.com/questions/42668005/i-have-to-check-a-number-is-palindrome-or-not-by-recursion/42668275#42668275", "title": "I have to check a number is palindrome or not by recursion", "body": "<p>Sure, you can do it this way :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint pali(int n)\n{\n  int sum = 0;\n  int keeper = 0;\n  for (int i = n; i &gt; 0; i /= 10) {\n    if (keeper != 0) {\n      sum *= 10;\n      sum += (keeper - i * 10);\n    }\n    keeper = i;\n  }\n  sum *= 10;\n  sum += keeper;\n  return sum;\n}\n\nint main(int argc, char** argv)\n{\n  int i, n;     \n  printf(\"Enter the number : \");\n  scanf(\"%d\",&amp;n);\n  i = pali(n);\n  if(n == i) \n    printf(\"Number is palindrome\"); \n  else     \n    printf(\"Not Palindrome\");  \n}\n</code></pre>\n\n<p>Using recursion is even easier : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint pali(int n, int sum)\n{\n  sum += n - ((n / 10) * 10);\n  n /= 10;\n  if (n &gt; 0)\n    pali(n, sum * 10);\n  else\n    return sum;\n}\n\nint main(int argc, char** argv)\n{\n  int i, n;     \n  printf(\"Enter the number : \");\n  scanf(\"%d\",&amp;n);\n  i = pali(n, 0);\n  if(n == i) \n    printf(\"Number is palindrome\"); \n  else     \n    printf(\"Not Palindrome\");  \n}\n</code></pre>\n\n<p>And a recursive version with only one parameter :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint pali(int n)\n{\n  int fUnit, lUnit;\n  fUnit = n;\n  int mul = 1;\n  while (fUnit &gt; 10) {\n    fUnit /= 10;\n    mul *= 10;\n  }\n\n  lUnit = n - ((n / 10) * 10);\n  n -= (fUnit * mul);\n  n /= 10;\n\n  if (mul == 1) return 1;\n  else if (fUnit == lUnit) return pali(n);\n  else return 0;\n}\n\nint main(int argc, char** argv)\n{\n  int n;     \n  printf(\"Enter the number : \");\n  scanf(\"%d\",&amp;n);\n  if(pali(n) == 1) \n    printf(\"Number is palindrome\"); \n  else     \n    printf(\"Not Palindrome\");  \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488969398, "post_id": 42668699, "comment_id": 72462581, "body": "i have enough time and enough memory to make my program run. it doesn&#39;t matter of some few bytes or few milliseconds"}, {"owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488969475, "post_id": 42668699, "comment_id": 72462630, "body": "i just want to make a program in different ways so that i can improve my logical ability."}, {"owner": {"reputation": 439, "user_id": 6472546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kzrm.png?s=128&g=1", "display_name": "Sygmei", "link": "https://stackoverflow.com/users/6472546/sygmei"}, "edited": false, "score": 0, "creation_date": 1488969706, "post_id": 42668699, "comment_id": 72462786, "body": "&quot;perform_useless_recursion&quot; &gt; Not sure it would be accepted in a exam where you have to use recursion, but nice trick :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "edited": false, "score": 0, "creation_date": 1488974108, "post_id": 42668699, "comment_id": 72465959, "body": "@ShivamGoel Practicing recursion is mostly harmful, because the real world uses for it are so very few. You are better off spending your time on other things."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488968643, "creation_date": 1488968643, "answer_id": 42668699, "question_id": 42668005, "link": "https://stackoverflow.com/questions/42668005/i-have-to-check-a-number-is-palindrome-or-not-by-recursion/42668699#42668699", "title": "I have to check a number is palindrome or not by recursion", "body": "<p>Here is an optimized version that</p>\n\n<ul>\n<li>Doesn't use local <code>static</code>.</li>\n<li>Only includes stdio.h</li>\n<li>Uses recursion.</li>\n</ul>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic void perform_useless_recursion (int n)\n{\n  if(n--)\n  {\n    perform_useless_recursion(n);\n  }\n}\n\n_Bool is_pali (int n)\n{\n  perform_useless_recursion(1);\n\n  int sum = 0;\n  for(int i=n; i!=0; i/=10)\n  {\n    sum = sum*10 + i%10;\n  }\n  return n == sum;\n}\n\nint main (void)\n{\n  int n=5005;\n\n  if(is_pali(n)) \n    printf(\"Number is pall\"); \n  else     \n    printf(\"Not Pall\");  \n\n  return 0;  \n}\n</code></pre>\n\n<p>The code could be improved even further by removing the <code>perform_useless_recursion()</code> function.</p>\n\n<p>The advantage of this code is that the actual calculation is performed by a fast loop, instead of slow, dangerous recursion. In the real world outside artificial school assignments, there is no reason to write inefficient and dangerous code when you could write efficient and safe code. As a bonus, removing recursion also gives far more readable code.</p>\n\n<p>If you benchmark this code you'll notice that it will be faster than all other versions posted and consumes less memory.</p>\n"}, {"tags": [], "owner": {"reputation": 112, "user_id": 7362590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04c77032929fd5a552eced9d6285234d?s=128&d=identicon&r=PG&f=1", "display_name": "NomeQueEuLembro", "link": "https://stackoverflow.com/users/7362590/nomequeeulembro"}, "is_accepted": false, "score": 0, "last_activity_date": 1488977610, "creation_date": 1488977610, "answer_id": 42671942, "question_id": 42668005, "link": "https://stackoverflow.com/questions/42668005/i-have-to-check-a-number-is-palindrome-or-not-by-recursion/42671942#42671942", "title": "I have to check a number is palindrome or not by recursion", "body": "<p>You can make a function that check only the first and the last digits of the number and pass the rest of the number onward.</p>\n\n<p>To explain better, think about the following cases:</p>\n\n<ul>\n<li><p>pali(<strong>1</strong>22<strong>0</strong>) would check for the first (<strong>1</strong>) and last (<strong>0</strong>) digits. Since 1 != 0 pali would return false.</p></li>\n<li><p>pali(1<strong>789</strong>1) would check first (1) and last (1). Since they're equal then the function would recursively return pali(<strong>789</strong>) (which itself would return false since 7 != 9).</p></li>\n<li><p>pali(<strong>878</strong>) would check that 8=8 and recursively return pali(<strong>7</strong>)</p></li>\n<li><p>pali(<strong>3</strong>) would check that first (<strong>3</strong>) and last (<strong>3</strong>) numbers are equal and return 0.</p></li>\n</ul>\n\n<p>The challenge here is to develop an algorithm that:</p>\n\n<ul>\n<li><p>Check if first and last numbers are the same (even if it's only one digit!)</p></li>\n<li><p>Strip the number from first and last digits and call itself on the remainder</p></li>\n</ul>\n\n<p>Then all you need to do is apply recursion. Here's a sample implementation:</p>\n\n<pre><code>int pali(int number)\n{\n    int smallDigit, bigDigit;\n\n    /* When recursion ends suceffuly*/\n    if (number == 0)\n        return 1;\n\n    /* Check for first and last digit of a number */\n    smallDigit = number % 10;\n    bigDigit = number;\n\n    while(bigDigit/10!=0)\n    {\n        bigDigit = bigDigit/10;\n        smallDigit = smallDigit*10;\n    }\n\n    /* Check to see if both digits are equal (Note: you can't use smallDigit here because it's been multiplied by 10 a few times) */\n    if (bigDigit != number%10)\n        return 0;\n    else\n    {\n        number = (number - smallDigit)/10; /* This is why smallDigit was multiplied by 10 a few times */\n        return pali(number); /* Recursion time */\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7545113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z6N-BQ05dqE/AAAAAAAAAAI/AAAAAAAAAs8/2OyRLxdZaHU/photo.jpg?sz=128", "display_name": "Shivam Goel", "link": "https://stackoverflow.com/users/7545113/shivam-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1488977610, "creation_date": 1488966706, "last_edit_date": 1488969407, "question_id": 42668005, "link": "https://stackoverflow.com/questions/42668005/i-have-to-check-a-number-is-palindrome-or-not-by-recursion", "title": "I have to check a number is palindrome or not by recursion", "body": "<pre><code>int main()\n{\n  int i,n;     \n  printf(\"Enter the number\");\n  scanf(\"%d\",&amp;n);     \n  i=pali(n);    \n  if(n==i) \n    printf(\"Number is pall\"); \n  else     \n    printf(\"Not Pall\");  \n}  \n\nint pali(int n) \n{   \n  int r;  \n  static sum=0;  \n  if(n!=0) \n  {      \n    r=n%10;    \n    sum=sum*10+r;   \n    pali(n/10);  \n  }  \n  return sum;\n}\n</code></pre>\n\n<p>I used a static variable to add up the sum. Is there any way where no static variable will be used?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488965868, "post_id": 42667645, "comment_id": 72460194, "body": "According to <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">the manual page</a> the <code>poll</code> functions doesn&#39;t return with an <code>EINPROGRESS</code> error. Perhaps you can elaborate on the <i>actual</i> problem you are having? And please take some time to <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a> and learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1488967861, "post_id": 42667645, "comment_id": 72461573, "body": "Get rid of the bogus underscores. They&#39;re reserved in many contexts, not free for you to use. (Cargo culted from Python?)"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1488967904, "post_id": 42667645, "comment_id": 72461604, "body": "Also you tagged this c but it looks like c++..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488967972, "post_id": 42667645, "comment_id": 72461646, "body": "From the manual page cited by @Someprogrammerdude: &quot;A value of 0 indicates that the call timed out and no file descriptors were ready.&quot; May I assume this is what you were after?"}], "owner": {"reputation": 47, "user_id": 1371637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f942f710d3c6ae842f22629b36750e2f?s=128&d=identicon&r=PG&f=1", "display_name": "yuxing", "link": "https://stackoverflow.com/users/1371637/yuxing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488965739, "creation_date": 1488965739, "question_id": 42667645, "link": "https://stackoverflow.com/questions/42667645/would-linux-poll-return-1-and-set-the-errno-115", "title": "Would linux poll return -1 and set the errno 115?", "body": "<p>the code is:</p>\n\n<pre><code>struct pollfd _conncet_client[1];\nint _nfd = 1;\nmemset(&amp;_conncet_client[0],0,sizeof(pollfd));\n_conncet_client[0].fd = fd;\n_conncet_client[0].events = POLLIN ;\n\nint _ret;\nint _loop_max = 5;\nfor( int i=0;i&lt;_loop_max;i++)\n{\n    _ret = ::poll(_conncet_client, _nfd, (int)(timeout_sec*1000));\n    if ( _ret &lt; 0 &amp;&amp; errno == EINTR )\n        continue;\n    else\n        break;  \n}\nreturn _ret;\n</code></pre>\n\n<p>I just want to know would poll return -1 and set errno 115(EINPROGRESS)</p>\n"}, {"tags": ["c", "arrays", "void-pointers"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488965104, "post_id": 42667385, "comment_id": 72459702, "body": "Any reason you can&#39;t just use <code>complex.h</code> with its superior support?"}, {"owner": {"reputation": 177, "user_id": 5520361, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c7594aeb9ae2d12acb3cdfc1d299a7a?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5520361/rodrigo"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488965373, "post_id": 42667385, "comment_id": 72459882, "body": "Yes, I&#39;m not allowed to include any h files (besides stdio.h)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 5, "creation_date": 1488965399, "post_id": 42667385, "comment_id": 72459897, "body": "<code>complex cArr[]</code> is not <code>void *arr[]</code>... You should look at compiler warnings..."}, {"owner": {"reputation": 177, "user_id": 5520361, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c7594aeb9ae2d12acb3cdfc1d299a7a?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5520361/rodrigo"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1488965846, "post_id": 42667385, "comment_id": 72460179, "body": "@LPs , I don&#39;t get any warning (using visual studio). Can you tell how to declare cArr correctly so that I won&#39;t have this problem?"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 5520361, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c7594aeb9ae2d12acb3cdfc1d299a7a?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5520361/rodrigo"}, "edited": false, "score": 0, "creation_date": 1488965777, "post_id": 42667621, "comment_id": 72460137, "body": "I don&#39;t get any warning (using visual studio). Anyway, I must use void* in my swap. Can you tell how can I change my code so that I will be able to use swap with void* arr?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 177, "user_id": 5520361, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c7594aeb9ae2d12acb3cdfc1d299a7a?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5520361/rodrigo"}, "edited": false, "score": 1, "creation_date": 1488966257, "post_id": 42667621, "comment_id": 72460461, "body": "@Rodrigo Read the last sentence of this answer. Your array doesn&#39;t contain pointers. Therefore there are no <code>void*</code> to swap. This answer is correct for the task you&#39;ve posted, so either your instruction isn&#39;t clear or was misunderstood."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1488968634, "post_id": 42667621, "comment_id": 72462082, "body": "Should be <code>swap(cArr, 1, 2, sizeof(   *   cArr));</code> (size of single element, not whole array); alternative to tmp[MAX_SIZE] (if no maximum imposition is desired) might be using malloc/free or - where available - even alloca."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1488969338, "post_id": 42667621, "comment_id": 72462545, "body": "@Aconcagua thanks for the <code>sizeof( * cArr)</code>. Using <code>malloc&#47;free</code> is possible, but expensive, and <code>alloca</code> is deprecated but inexpensive."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1488975537, "post_id": 42667621, "comment_id": 72466960, "body": "@MichaelWalz Well, the C99&#39;s variable length array <code>char tmp[size]</code> certainly is best option anyway - just wanted to give hints to alternatives not imposing size limits (and possibly allocating far too large memory in other cases, btw...). Should have mentioned the disadvantages myself. Hm, alloca is not documented as deprecated, at least on the linux sites I looked at (MSVC does so, though). If it actually is, then probably in favour to exactly these variable length arrays..."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 5, "last_activity_date": 1488969245, "last_edit_date": 1488969245, "creation_date": 1488965659, "answer_id": 42667621, "question_id": 42667385, "link": "https://stackoverflow.com/questions/42667385/swap-on-void-array-doesnt-work-correctly/42667621#42667621", "title": "Swap on void* array doesn&#39;t work correctly", "body": "<p>You probably want this:</p>\n\n<pre><code>void swap(struct complex arr[], int i, int j)\n{\n    struct complex temp;\n    temp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = temp;\n}\n</code></pre>\n\n<p>Your solution swaps <em>pointers</em> but your array doesn't contain pointers but <code>struct complex</code>s. That's basically what the compiler warning told you.</p>\n\n<p>If you really want to swap unknown types, you need this:</p>\n\n<pre><code>void swap(void *arr, int i, int j, size_t size)\n{\n    char temp[size];\n    char *a = (char*)arr;\n\n    memcpy(temp, (a + size * i), size);\n    memcpy((a + size * i), (a + size * j), size);\n    memcpy((a + size * j), temp, size);\n}\n...\nswap(cArr, 1, 2, sizeof(*cArr));\n</code></pre>\n\n<p>The size parameter is necessary because if the type is unknown, the size of the type is of course unknown too and therefore you need to specify the size.</p>\n\n<p>For <code>memcpy</code> you need to include <code>&lt;memory.h&gt;</code>, so you must write your own <code>memcpy</code>, as you are allowed to include only <code>&lt;stdio.h&gt;</code>.</p>\n\n<p>Some compilers won't allow <code>char temp[size];</code> so you just can use <code>char temp[MAX_SIZE];</code> with <code>MAX_SIZE</code> defined to the maximum expected size for your unknown types.</p>\n"}, {"tags": [], "owner": {"reputation": 3783, "user_id": 2428235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sj48p.jpg?s=128&g=1", "display_name": "Roman Hocke", "link": "https://stackoverflow.com/users/2428235/roman-hocke"}, "is_accepted": false, "score": 1, "last_activity_date": 1488966775, "creation_date": 1488966775, "answer_id": 42668026, "question_id": 42667385, "link": "https://stackoverflow.com/questions/42667385/swap-on-void-array-doesnt-work-correctly/42668026#42668026", "title": "Swap on void* array doesn&#39;t work correctly", "body": "<p>You can't implement swap for unknown type, You need to know the size of the type. Your function swaps pointers (pointers have known size), but You are feeding it array of <code>complex</code>, not an array of pointers. Try this (not tested):</p>\n\n<pre><code>void swap(void *array, size_t i, size_t j, size_t element_length) {\n\n    char *src, *dst, tmp;\n\n    src = (char*)array + i * element_length;\n    dst = (char*)array + j * element_length;\n\n    while (element_length--) {\n\n        tmp = *src;\n        *src = *dst;\n        *dst = tmp;\n\n        src++;\n        dst++;\n    }\n}\n\n...\n\nswap(cArr, 1, 2, sizeof(complex));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1488966782, "creation_date": 1488966782, "answer_id": 42668029, "question_id": 42667385, "link": "https://stackoverflow.com/questions/42667385/swap-on-void-array-doesnt-work-correctly/42668029#42668029", "title": "Swap on void* array doesn&#39;t work correctly", "body": "<p>The only way to do so using <code>void *</code> (as far as I can see) is to re-design your <code>swap</code> function swapping/coping byte of structs, like</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef struct complex complex;\n\nstruct complex {\n    int real;\n    int img;\n};\n\n\nvoid swap(void * to, void * from, size_t len)\n{\n    unsigned char *uc_to   = to;\n    unsigned char *uc_from = from;\n    unsigned char tmp;\n\n    for (size_t i = 0; i &lt; len; i++)\n    {\n        tmp = uc_to[i];\n        uc_to[i] = uc_from[i];\n        uc_from[i] = tmp;\n    }\n}\n\nvoid printComplexArray(complex* cArr, size_t len)\n{\n    size_t i;\n    for (i = 0; i &lt; len; i++)\n    {\n        printf(\"Cell %zu : real- %02d , img- %02d\\n\", i, cArr[i].real, cArr[i].img);\n    }\n}\n\nint main(void)\n{\n    complex cArr[] = { { 22, 3 }, { 1, 13 }, { 5, 7 }, { 8, 4 } };\n\n    size_t cLen = (sizeof(cArr) / sizeof(cArr[0]));\n\n    swap((void *)(&amp;cArr[0]), (void *)(&amp;cArr[1]), sizeof(complex));\n\n    printComplexArray(cArr, cLen);\n}\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 5520361, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c7594aeb9ae2d12acb3cdfc1d299a7a?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5520361/rodrigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1488969245, "creation_date": 1488964990, "last_edit_date": 1495542319, "question_id": 42667385, "link": "https://stackoverflow.com/questions/42667385/swap-on-void-array-doesnt-work-correctly", "title": "Swap on void* array doesn&#39;t work correctly", "body": "<p>I have an array of complex numbers, and I just want to swap between two elements. However, I want to implement the swap for unknown types (using void*). So I wrote the following code, using the first swap implementation that I saw <a href=\"https://stackoverflow.com/questions/16543052/swap-items-of-void-pointer-array-without-memcpy-in-c\">here</a>:        </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef struct complex complex;\n\nstruct complex {\n    int real;\n    int img;\n};\n\nvoid swap(void *arr[], int i, int j)\n{\n    void *temp;\n    temp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = temp;\n}\n\nvoid printComplexArray(complex* cArr, size_t len)\n{\n    int i;\n    for (i = 0; i &lt; len; i++)\n    {\n        printf(\"Cell %d : real- %d , img- %d\\n\", i, cArr[i].real, cArr[i].img);\n    }\n}\n\nvoid main(void)\n{\n    complex cArr[] = { { 22, 3 },{ 1, 13 },{ 5, 7 },{ 8, 4 } };\n    size_t cLen = (sizeof(cArr) / sizeof(cArr[0]));\n    swap(cArr, 1, 2);\n    printComplexArray(cArr, cLen);\n}\n</code></pre>\n\n<p>I expected to get:                 </p>\n\n<pre><code>Cell 0 : real- 22 , img- 3\nCell 1 : real- 5 , img- 7\nCell 2 : real- 1 , img- 13\nCell 3 : real- 8 , img- 4\n</code></pre>\n\n<p>But I got:                   </p>\n\n<pre><code>Cell 0 : real- 22 , img- 1\nCell 1 : real- 3 , img- 13\nCell 2 : real- 5 , img- 7\nCell 3 : real- 8 , img- 4                     \n</code></pre>\n\n<p>As you can see, not only that the swapping wasn't performed correctly- the content of some array elements was changed. Can you explain why, and how can I fix this?</p>\n"}, {"tags": ["c", "opencl"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1488964128, "post_id": 42666879, "comment_id": 72459091, "body": "<i>want to run it on private memory for speed</i>.....could you elaborate a bit?"}, {"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 3, "creation_date": 1488987346, "post_id": 42666879, "comment_id": 72475519, "body": "All the memory being used in the kernel is private, unless it comes as part of the argument."}, {"owner": {"reputation": 1, "user_id": 7098881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9aFpKINTBRo/AAAAAAAAAAI/AAAAAAAAABk/7solY6rMC9U/photo.jpg?sz=128", "display_name": "mounika", "link": "https://stackoverflow.com/users/7098881/mounika"}, "edited": false, "score": 0, "creation_date": 1489120880, "post_id": 42666879, "comment_id": 72542011, "body": "actually my requiement is read a single password from dict file which contains million passwords..so i want to take a single password run it in private memory and then copy back to the global memory and send back to the host side to read  the passowrd..im not able to get how can i do??"}], "owner": {"reputation": 1, "user_id": 7098881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9aFpKINTBRo/AAAAAAAAAAI/AAAAAAAAABk/7solY6rMC9U/photo.jpg?sz=128", "display_name": "mounika", "link": "https://stackoverflow.com/users/7098881/mounika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488963425, "creation_date": 1488963425, "question_id": 42666879, "link": "https://stackoverflow.com/questions/42666879/how-to-declare-private-memory-in-kernel-part-using-opencl-in-c", "title": "how to declare private memory in kernel part using opencl in c", "body": "<p>MY question is when coding the kernel part i don't want my code to run on global memory and want to run it on private memory for speed but the problem M facing is i really don't know how to declare private memory and assign it with the global thread id so can anyone help me in terms of code or with an example??</p>\n"}, {"tags": ["c", "multithreading", "memory-barriers"], "comments": [{"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1488962722, "post_id": 42665704, "comment_id": 72458274, "body": "This is an interesting question but very very broad. Each architecture has its own barriers. In general, neither of your enumerated tasks are mandatory for a barrier."}], "answers": [{"tags": [], "owner": {"reputation": 7497, "user_id": 1213227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78179ef730f268752c0f6fdde3943b99?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1213227/matthias"}, "is_accepted": false, "score": 0, "last_activity_date": 1488962589, "creation_date": 1488962589, "answer_id": 42666638, "question_id": 42665704, "link": "https://stackoverflow.com/questions/42665704/what-tasks-does-a-memory-barrier-enforces-other-than-preventing-the-re-ordering/42666638#42666638", "title": "What tasks does a memory barrier enforces other than preventing the re-ordering of instructions?", "body": "<p>At least for IBM's powerPC, finishing is not guaranteed, c.f. <a href=\"http://www.ibm.com/developerworks/systems/articles/powerpc.html\" rel=\"nofollow noreferrer\">IBM's documentation</a>:</p>\n\n<blockquote>\n  <p>[The] execution or completion of the eieio instruction does not imply that the storage accesses caused by instructions preceding the eieio have completed. The barrier created by the instruction will ensure that all accesses separated by the barrier are performed in the specified order, but accesses issued prior to the barrier might not be performed until long after the eieio instruction completes</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3378, "user_id": 2069150, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/filKc.jpg?s=128&g=1", "display_name": "Arch D. Robison", "link": "https://stackoverflow.com/users/2069150/arch-d-robison"}, "is_accepted": false, "score": 0, "last_activity_date": 1489116059, "creation_date": 1489116059, "answer_id": 42709590, "question_id": 42665704, "link": "https://stackoverflow.com/questions/42665704/what-tasks-does-a-memory-barrier-enforces-other-than-preventing-the-re-ordering/42709590#42709590", "title": "What tasks does a memory barrier enforces other than preventing the re-ordering of instructions?", "body": "<p>Technically a memory barrier does not enforce any order on instruction execution.  It constrains the order in instruction executions become <em>visible</em> to other observers.  </p>\n\n<p>Flushing to memory is not required, and indeed would greatly slow down cache-based architectures.  For example, consider a core that maintains a private queue of pending memory operations and has a coherent cache shared with other cores.  When it reaches a barrier, it can drain its queue of memory operations before letting any more memory operations into its queue.  It does not have to drain its cache -- cache coherence will deal with the rest.  See <a href=\"https://lagunita.stanford.edu/c4x/Engineering/CS316/asset/A_Primer_on_Memory_Consistency_and_Coherence.pdf\" rel=\"nofollow noreferrer\">A Primer on Memory Consistency\nand Cache Coherence</a> for detailed descriptions of how these protocols can work.</p>\n"}], "owner": {"reputation": 679, "user_id": 7663425, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eeb15b66507a9374260b7a5472f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7663425/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1489116059, "creation_date": 1488959261, "question_id": 42665704, "link": "https://stackoverflow.com/questions/42665704/what-tasks-does-a-memory-barrier-enforces-other-than-preventing-the-re-ordering", "title": "What tasks does a memory barrier enforces other than preventing the re-ordering of instructions?", "body": "<p>I know that a memory barrier prevents the re-ordering of instruction from before to after and from after to before the memory barrier, for example if I have the following instructions:</p>\n\n<pre><code>instruction 1\ninstruction 2\ninstruction 3\nmemory barrier\ninstruction 4\ninstruction 5\ninstruction 6\n</code></pre>\n\n<p>These instructions can be executed in the following order:</p>\n\n<pre><code>instruction 3\ninstruction 1\ninstruction 2\nmemory barrier\ninstruction 6\ninstruction 5\ninstruction 4\n</code></pre>\n\n<p>But they will never be executed in the following order:</p>\n\n<pre><code>instruction 1\ninstruction 2\ninstruction 5\nmemory barrier\ninstruction 4\ninstruction 3\ninstruction 6\n</code></pre>\n\n<p>But I am not sure if the following tasks are also enforced by a memory barrier:</p>\n\n<ul>\n<li>All pending operations before the memory barrier are completed.</li>\n<li>All data that are still in the cache from write operations before the memory barrier are flushed.</li>\n</ul>\n"}, {"tags": ["c", "linux", "bash", "inode"], "comments": [{"owner": {"reputation": 5835, "user_id": 1446154, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e203591509f88fc8c8aeadc01dc1a5d1?s=128&d=identicon&r=PG&f=1", "display_name": "Laser", "link": "https://stackoverflow.com/users/1446154/laser"}, "edited": false, "score": 0, "creation_date": 1488960766, "post_id": 42665695, "comment_id": 72457273, "body": "As for <code>C</code> source code you may take a part of <code>df.c</code> which is open source.  <a href=\"http://git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob_plain;f=src/df.c;hb=refs/heads/master\" rel=\"nofollow noreferrer\">git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob_plain;f=&zwnj;&#8203;src/&hellip;</a>    As for <code>bash</code> solution please take a look in other SO question  <a href=\"http://stackoverflow.com/questions/653096/how-to-free-inode-usage\" title=\"how to free inode usage\">stackoverflow.com/questions/653096/how-to-free-inode-usage</a>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1488961158, "post_id": 42665695, "comment_id": 72457454, "body": "Could you use Perl <a href=\"http://search.cpan.org/~iguthrie/Filesys-Df-0.92/Df.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~iguthrie/Filesys-Df-0.92/Df.pm</a> or Python? <a href=\"http://stackoverflow.com/questions/20727179/calculate-percentage-inode-usage-using-python\" title=\"calculate percentage inode usage using python\">stackoverflow.com/questions/20727179/&hellip;</a>"}, {"owner": {"reputation": 734, "user_id": 6620962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LArCW.png?s=128&g=1", "display_name": "J63", "link": "https://stackoverflow.com/users/6620962/j63"}, "edited": false, "score": 0, "creation_date": 1488963854, "post_id": 42665695, "comment_id": 72458932, "body": "I do have Perl but don&#39;t have python. I&#39;ll take a look at that solution. Ty."}], "answers": [{"comments": [{"owner": {"reputation": 734, "user_id": 6620962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LArCW.png?s=128&g=1", "display_name": "J63", "link": "https://stackoverflow.com/users/6620962/j63"}, "edited": false, "score": 0, "creation_date": 1488963972, "post_id": 42666377, "comment_id": 72458999, "body": "Neither stat or busybox stat works for me. I&#39;ll try that C solution and report later."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 734, "user_id": 6620962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LArCW.png?s=128&g=1", "display_name": "J63", "link": "https://stackoverflow.com/users/6620962/j63"}, "edited": false, "score": 0, "creation_date": 1488964353, "post_id": 42666377, "comment_id": 72459219, "body": "@J63: Please do; I could only test it on an x86-64 system, for now. You should also be able to cross-compile it to your target system in the normal fashion."}, {"owner": {"reputation": 734, "user_id": 6620962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LArCW.png?s=128&g=1", "display_name": "J63", "link": "https://stackoverflow.com/users/6620962/j63"}, "edited": false, "score": 0, "creation_date": 1488966862, "post_id": 42666377, "comment_id": 72460889, "body": "I compiled it to my target system and it just works fine. Thank you very much =)"}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 4, "last_activity_date": 1488961595, "creation_date": 1488961595, "answer_id": 42666377, "question_id": 42665695, "link": "https://stackoverflow.com/questions/42665695/inode-usage-without-df-i/42666377#42666377", "title": "Inode usage without df -i", "body": "<p>What you seek, is reported by the <a href=\"http://man7.org/linux/man-pages/man3/statvfs.3.html\" rel=\"nofollow noreferrer\"><code>statvfs()</code></a> function, for each mounted filesystem (specified by providing a path to any file or directory on said mounted filesystem).</p>\n\n<p>If the system has GNU coreutils installed, it has a small utility called <code>stat</code>. For each path to a file or directory on a filesystem,</p>\n\n<pre><code>stat -c '%d %c' -f /path\n</code></pre>\n\n<p>reports the number of free inodes and the total number of inodes, one line per path given. If the system uses busybox, then</p>\n\n<pre><code>busybox stat -c '%d %c' -f /path\n</code></pre>\n\n<p>does the same thing.</p>\n\n<p>If you need more control with the output, or neither of the above work for you for some reason, you can easily write your own utility to report a summary: \nHere is an example, <strong>inode-stats.c</strong>:</p>\n\n<pre><code>#define _POSIX_C_SOURCE 200809L\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/statvfs.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    dev_t       device[argc];\n    int         devices = 0;\n    uint64_t    total_inodes = 0;\n    uint64_t    avail_inodes = 0; /* Free to normal users */\n    uint64_t    free_inodes = 0;  /* Free to superuser */\n    int         arg, i;\n\n    if (argc &lt; 2 || !strcmp(argv[1], \"-h\") || !strcmp(argv[1], \"--help\")) {\n        printf(\"\\n\");\n        printf(\"Usage: %s [\u00a0-h | --help ]\\n\", argv[0]);\n        printf(\"       %s mountpoint [ mountpoint ... ]\\n\", argv[0]);\n        printf(\"\\n\");\n        printf(\"This program will report the percentage of inodes in use,\\n\");\n        printf(\"the number free inodes available for normal users,\\n\");\n        printf(\"the number of free inodes available for root,\\n\");\n        printf(\"and the total number of inodes,\\n\");\n        printf(\"in the filesystems referred to the supplied paths.\\n\");\n        printf(\"\\n\");\n        printf(\"Each mount is only counted once, even if multiple paths\\n\");\n        printf(\"to the same mount are given as parameters.\\n\");\n        printf(\"\\n\");\n        return EXIT_SUCCESS;\n    }\n\n    for (arg = 1; arg &lt; argc; arg++) {\n        struct stat     info;\n        struct statvfs  vfsinfo;\n\n        if (stat(argv[arg], &amp;info) == -1) {\n            fprintf(stderr, \"%s: %s.\\n\", argv[arg], strerror(errno));\n            continue;\n        }\n        if (statvfs(argv[arg], &amp;vfsinfo) == -1) {\n            fprintf(stderr, \"%s: %s.\\n\", argv[arg], strerror(errno));\n            continue;\n        }\n\n        /* Check if device already seen. */\n        for (i = 0; i &lt; devices; i++)\n            if (info.st_dev == device[i])\n                break;\n        if (i &lt; devices)\n            continue;\n\n        /* Add to known devices. */\n        device[devices++] = info.st_dev;\n\n        /* Add to inode counters. */\n        total_inodes += (uint64_t)vfsinfo.f_files;\n        avail_inodes += (uint64_t)vfsinfo.f_favail;\n        free_inodes  += (uint64_t)vfsinfo.f_ffree;\n    }\n\n    if (total_inodes &lt; 0) {\n        fprintf(stderr, \"No inodes!\\n\");\n        return EXIT_FAILURE;\n    }\n\n    /* Print result. */\n    printf(\"%.3f%% - %\" PRIu64 \" free (%\" PRIu64 \" for root) out of %\" PRIu64 \" inodes.\\n\",\n           100.0 - 100.0 * (double)avail_inodes / (double)total_inodes,\n           avail_inodes, free_inodes, total_inodes);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Compile it using e.g.</p>\n\n<pre><code>gcc -Wall -O2 inode-stats.c -o inode-stats\n</code></pre>\n\n<p>optionally install it using e.g.</p>\n\n<pre><code>sudo install -o root -g root -m 0755 inode-stats /usr/bin\n</code></pre>\n\n<p>and run it, supplying a path to any directory or file in the mounts (mounted filesystems) you are interested in. For example,</p>\n\n<pre><code>inode-stats / /usr /var /home\n</code></pre>\n\n<p>The program is smart enough to only count mounts once, even if you supply multiple paths to directories/files in it -- unlike GNU coreutils' or busybox <code>stat</code>.</p>\n\n<p>You can trivially change the output report format, and easily add other statistics (like free disk space, using <code>(uint64_t)vfsinfo.f_bavail * (uint64_t)vfsinfo.f_bsize</code> for amount of disk space available for normal users, and <code>(uint64_t)vfsinfo.f_blocks * (uint64_t)vfsinfo.f_frsize</code> for total size of each filesystem).</p>\n"}], "owner": {"reputation": 734, "user_id": 6620962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LArCW.png?s=128&g=1", "display_name": "J63", "link": "https://stackoverflow.com/users/6620962/j63"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2849, "favorite_count": 1, "accepted_answer_id": 42666377, "answer_count": 1, "score": 0, "last_activity_date": 1488961595, "creation_date": 1488959237, "question_id": 42665695, "link": "https://stackoverflow.com/questions/42665695/inode-usage-without-df-i", "title": "Inode usage without df -i", "body": "<p>I want to automate a remote proccess to know if a machine of mine is running out of inodes (something that happens quite often due to bad configuration...). Sadly it runs on a light weight linux that does not have -i option on the df command, so that option is unaviable. I have done some research and I have encountered some ways to find the folders with the most inodes and similar, but I don't want that. </p>\n\n<p>I need a way (in C or bash) to know how many inodes my system has in total and currently aviable. </p>\n"}, {"tags": ["c", "sockets", "malloc"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "edited": false, "score": 0, "creation_date": 1488961092, "post_id": 42665614, "comment_id": 72457423, "body": "how do I make this valid? I thought I was creating another pointer to cast back to int * and then free the memory."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "edited": false, "score": 1, "creation_date": 1488961229, "post_id": 42665614, "comment_id": 72457500, "body": "The question is: why do you want to free the memory if you need it?"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "edited": false, "score": 1, "creation_date": 1489052332, "post_id": 42665614, "comment_id": 72505837, "body": "@Karth: You need to understand the difference between pointers (the address of a house) and memory (a house). You created two addresses for one house. Then you call a demolition team to destroy the house. Then you tell the postman to send your letter to the second address thinking that the second address would lead him to a different house. Alas when he gets there he finds a destroyed house ... you program then crashes (or whatever, the behavior is undefined)"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1488958959, "creation_date": 1488958959, "answer_id": 42665614, "question_id": 42665506, "link": "https://stackoverflow.com/questions/42665506/client-server-issues-with-malloc/42665614#42665614", "title": "Client / Server issues with Malloc?", "body": "<p>Your piece of code</p>\n\n<pre><code>// I wrote these 2 lines.\nint *castMe = (int *)vPtr;\nfree(vPtr);\n</code></pre>\n\n<p><code>free</code> the memory pointed by <code>castMe</code> and when you use it you are dereferencing to non valid memory</p>\n\n<pre><code>int fd = castMe[0];       //&lt;----- BOOM\nint threadNum = castMe[1];//&lt;----- BOOM\n</code></pre>\n\n<p>It is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a></p>\n\n<p>Moreover when you wrote <strong><em>I remove a = malloc(sizeof(int) * 2)</em></strong> I guess you leave <code>a</code> declaration as is</p>\n\n<pre><code>int *a;\n</code></pre>\n\n<p>That is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> because of a is not pointing to a valid memory address.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "edited": false, "score": 0, "creation_date": 1488959839, "post_id": 42665615, "comment_id": 72456769, "body": "How can I use another pointer to cast back to int *? Then when I free the memory which pointer am I freeing if that makes sense..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "edited": false, "score": 0, "creation_date": 1488962256, "post_id": 42665615, "comment_id": 72458046, "body": "@Karth You don&#39;t &quot;free pointers&quot;, you free what they point at. As for the cast, it is superfluous."}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "edited": false, "score": 0, "creation_date": 1489052542, "post_id": 42665615, "comment_id": 72505988, "body": "@Karth: To do what you want is not about pointers. It&#39;s about memory. Thus you cannot just create a pointer you need to memcpy the memory (which you ALSO must free later). Once you memcpy the memory you may free the old memory. C memory management is highly manual"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488958967, "creation_date": 1488958967, "answer_id": 42665615, "question_id": 42665506, "link": "https://stackoverflow.com/questions/42665506/client-server-issues-with-malloc/42665615#42665615", "title": "Client / Server issues with Malloc?", "body": "<p>Here's the bug:</p>\n\n<pre><code>int *castMe = (int *)vPtr;\nfree(vPtr);\n...\nint fd = castMe[0];\n</code></pre>\n\n<p>You deallocate the memory that <code>vPtr</code> points at and then later on attempt to access that memory through another pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "edited": false, "score": 0, "creation_date": 1489000390, "post_id": 42666643, "comment_id": 72484101, "body": "What should the pthread_create contain instead of &amp;a. Isn&#39;t that the address of my malloc()-ed array?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "edited": false, "score": 0, "creation_date": 1489050455, "post_id": 42666643, "comment_id": 72504611, "body": "@Karth Oops, I failed to mention it straight out, fixed. Thanks."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1489050434, "last_edit_date": 1489050434, "creation_date": 1488962604, "answer_id": 42666643, "question_id": 42665506, "link": "https://stackoverflow.com/questions/42665506/client-server-issues-with-malloc/42666643#42666643", "title": "Client / Server issues with Malloc?", "body": "<p>This:</p>\n\n<pre><code>pthread_create(&amp;threadId, &amp;threadAttr, handleClient, &amp;a);\n                                                     ^\n                                                     |\n                                                    WAT\n</code></pre>\n\n<p>Is a problem, since here you make the pthreads library pass the <em>address of the pointer to the first element in <code>a</code></em> to the thread, where you meant to pass just a pointer to the first element in <code>a</code>.</p>\n\n<p>So, you should have passed <code>&amp;a[0]</code>, which is more easily and clearly written as just <code>a</code>.</p>\n\n<p>This call doesn't match how you then use the argument inside the thread function. You can print the two to see the difference:</p>\n\n<pre><code>printf(\"&amp;a=%p\\n\", (void *) &amp;a);\n</code></pre>\n\n<p>and then in the function add:</p>\n\n<pre><code>printf(\"castMe=%p\\n\", (void *) castMe);\n</code></pre>\n\n<p>The values will be different.</p>\n\n<p>Also, your memory handling is off, never <code>free()</code> data that you still need. And in C you don't need explicit casts to/from data pointers and <code>void *</code>, you can just do:</p>\n\n<pre><code>int * const numbers = vPtr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 7465880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261f03f566138d6bcf72e76dc9701c57?s=128&d=identicon&r=PG&f=1", "display_name": "waterbottledotdot", "link": "https://stackoverflow.com/users/7465880/waterbottledotdot"}, "is_accepted": false, "score": 0, "last_activity_date": 1489538204, "creation_date": 1489538204, "answer_id": 42799141, "question_id": 42665506, "link": "https://stackoverflow.com/questions/42665506/client-server-issues-with-malloc/42799141#42799141", "title": "Client / Server issues with Malloc?", "body": "<p>is this answered? I am working on this too!</p>\n"}], "owner": {"reputation": 65, "user_id": 7623127, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/79d57cff6845989a4e4fb0e4b6d4725f?s=128&d=identicon&r=PG&f=1", "display_name": "Karth", "link": "https://stackoverflow.com/users/7623127/karth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1489538204, "creation_date": 1488958601, "last_edit_date": 1488960666, "question_id": 42665506, "link": "https://stackoverflow.com/questions/42665506/client-server-issues-with-malloc", "title": "Client / Server issues with Malloc?", "body": "<p>Part of this assignment I'm working on involves a program that executes commands from a client via a socket. Now the only file I have to edit is my mathServer.c I'm currently stuck on <strong>one</strong> of the several parts from the instructions provided:</p>\n\n<p>Finish the method - doServer(). doServer() should have a loop in which it waits for a client to connect to listenFd. When a client does, it should:</p>\n\n<ol>\n<li><p>malloc() enough memory for 2 integers</p></li>\n<li><p>put the file descriptor from accept() in one of those spaces</p></li>\n<li><p>put the value of threadCount in the other space, and increment \nthreadCount</p></li>\n<li><p>Make a detached thread to handle this new client. I called my function handleClient(), but you may call yours whatever. Pass the address of your malloc()-ed array.</p></li>\n</ol>\n\n<p>The loop should then go back for another accept().</p>\n\n<p>Here's my doServer:</p>\n\n<pre><code>void doServer (int listenFd)\n{\n  //  I.  Application validity check:\n\n  //  II.  Server clients:\n  pthread_t     threadId;\n  pthread_attr_t    threadAttr;\n\n  int   threadCount = 0; \n\n  // YOUR CODE HERE\n  int *a;\n\n  while(1) {\n\n    //1. If Malloc was NEVER (outside or inside loop) in this program then \n    // it outputs Thread 0 recieved\n    a = malloc(sizeof(int) * 2);\n\n    accept(getServerFileDescriptor(), NULL, NULL);\n\n    // 2.\n    a[0] = getServerFileDescriptor();\n\n    // 3.\n    a[1] = threadCount++;\n\n    // ALL 4\n    pthread_attr_init(&amp;threadAttr);\n    pthread_attr_setdetachstate(&amp;threadAttr, PTHREAD_CREATE_DETACHED);\n    pthread_create(&amp;threadId, &amp;threadAttr, handleClient, &amp;a);\n\n    pthread_join(threadId, NULL); \n    pthread_attr_destroy(&amp;threadAttr);\n\n   }\n\n}\n</code></pre>\n\n<p>Here's my handleClient method:</p>\n\n<pre><code>void* handleClient(void* vPtr) {\n\n  // Use another pointer to cast back to int*\n  // Save the file descriptor and thread number in local vars\n  // free() the memory\n\n  // I wrote these 2 lines.\n  int *castMe = (int *)vPtr;\n  free(vPtr);\n\n  //  II.B.  Read command:\n  char  buffer[BUFFER_LEN];\n  char  command;\n  int fileNum;\n\n  int fd = castMe[0];\n  int threadNum = castMe[1];\n\n  char  text[BUFFER_LEN];\n  int   shouldContinue  = 1;\n\n  while  (shouldContinue)\n  {\n    text[0] = '\\0';\n\n    read(fd,buffer,BUFFER_LEN);\n    printf(\"Thread %d received: %s\\n\",threadNum,buffer);\n    sscanf(buffer,\"%c %d \\\"%[^\\\"]\\\"\",&amp;command,&amp;fileNum,text);\n\n    //printf(\"Thread %d quitting.\\n\",threadNum);\n    return(NULL);\n\n    // YOUR CODE HERE\n\n  }\n\n}\n</code></pre>\n\n<p>I've discovered whenever I remove <strong>a = malloc(sizeof(int) * 2)</strong> and everything associated with malloc it does output <strong>Thread 0 received</strong>. However, when I keep malloc the output is just blank and will not return anything. </p>\n\n<p>At first I thought it was because I didn't free the memory, but the memory is being freed from handleClient correct?</p>\n\n<p>**please note this is not the whole program. Any methods you see here are the professors work. these two methods are my own (your code here). Just assume the professors code works :) **</p>\n\n<p>Any help is much appreciated!</p>\n"}, {"tags": ["c", "linux", "macos", "compiler-errors"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488958652, "post_id": 42665285, "comment_id": 72456166, "body": "This is not a free-standing question! You must tell what you&#39;re trying to compile, what did you change, copy paste of the error codes, compiler commands and so on. Linking to apple.se is not enough"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1488958660, "post_id": 42665285, "comment_id": 72456172, "body": "Which USB libraries?  Are those libraries available on Mac by default?  Have you ported the libraries to Mac?  If the code doesn&#39;t delve into Linux-specific function calls \u2014 whether that&#39;s in your program or in the USB libraries \u2014 you should be OK.  If the code either uses Linux-only calls or calls which differ between Linux and Mac, you&#39;ll have to work harder on the port.  I&#39;m not convinced that the folks over at <a href=\"https://apple.stackexchange.com\">Ask Different</a> will consider that question on-topic.  Where are the USB libraries from?  Such things are apt to be system-specific."}, {"owner": {"reputation": 295, "user_id": 4901743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXBTK.jpg?s=128&g=1", "display_name": "Enrico", "link": "https://stackoverflow.com/users/4901743/enrico"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488971441, "post_id": 42665285, "comment_id": 72464002, "body": "@AnttiHaapala Edited with all details. Should it still be on-hold?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488975782, "post_id": 42665285, "comment_id": 72467125, "body": "@Enrico voted to reopen already. Indeed, libusb should be portable. My answer was in wrong direction."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488975823, "post_id": 42665285, "comment_id": 72467162, "body": "But <code>RTLD_DEFAULT</code> should exist on MacOS X in dlfcn"}, {"owner": {"reputation": 295, "user_id": 4901743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXBTK.jpg?s=128&g=1", "display_name": "Enrico", "link": "https://stackoverflow.com/users/4901743/enrico"}, "edited": false, "score": 0, "creation_date": 1488978046, "post_id": 42665285, "comment_id": 72468748, "body": "Right now I don&#39;t have my Mac handy, but I found over the Internet an old version of dlfcn.h, which indeed has what I report now in a new edit. If the present dlfcn.h is the same, how should I manage with <code>_POSIX_C_SOURCE</code> and <code>_DARWIN_C_SOURCE</code>?"}, {"owner": {"reputation": 295, "user_id": 4901743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXBTK.jpg?s=128&g=1", "display_name": "Enrico", "link": "https://stackoverflow.com/users/4901743/enrico"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488979697, "post_id": 42665285, "comment_id": 72469867, "body": "@AnttiHaapala Sorry, forgot to tag you in my previous comment."}], "answers": [{"comments": [{"owner": {"reputation": 295, "user_id": 4901743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXBTK.jpg?s=128&g=1", "display_name": "Enrico", "link": "https://stackoverflow.com/users/4901743/enrico"}, "edited": false, "score": 0, "creation_date": 1488982225, "post_id": 42665633, "comment_id": 72471660, "body": "I agree. I would add the -D switch in the makefile, is that correct? If yes, how exactly to do that?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 295, "user_id": 4901743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXBTK.jpg?s=128&g=1", "display_name": "Enrico", "link": "https://stackoverflow.com/users/4901743/enrico"}, "edited": false, "score": 0, "creation_date": 1488995355, "post_id": 42665633, "comment_id": 72481163, "body": "@Enrico like this?"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 0, "last_activity_date": 1488995349, "last_edit_date": 1488995349, "creation_date": 1488959024, "answer_id": 42665633, "question_id": 42665285, "link": "https://stackoverflow.com/questions/42665285/compiling-a-linux-program-under-mac-os-x/42665633#42665633", "title": "Compiling a Linux program under Mac OS X", "body": "<p>Looking at the <a href=\"https://opensource.apple.com/source/dyld/dyld-195.5/include/dlfcn.h.auto.html\" rel=\"nofollow noreferrer\"><code>dlfcn.h</code> source code</a>, it seems that the identifier is defined only if <code>_POSIX_C_SOURCE</code> is <em>not</em> defined, or <code>_DARWIN_C_SOURCE</code> <em>is</em> defined. Thus I'd just add <code>#define _DARWIN_C_SOURCE</code>;</p>\n\n<p>Or you could add the corresponding <code>-D</code> switch in the config.mk:</p>\n\n<pre><code>CPPFLAGS += -I/usr/local/include -D_DARWIN_C_SOURCE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 295, "user_id": 4901743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXBTK.jpg?s=128&g=1", "display_name": "Enrico", "link": "https://stackoverflow.com/users/4901743/enrico"}, "is_accepted": true, "score": 1, "last_activity_date": 1489011062, "creation_date": 1489011062, "answer_id": 42682873, "question_id": 42665285, "link": "https://stackoverflow.com/questions/42665285/compiling-a-linux-program-under-mac-os-x/42682873#42682873", "title": "Compiling a Linux program under Mac OS X", "body": "<p>Ok, finally I have been successful. I think it be worth publishing my solution - maybe others could find it useful.</p>\n\n<p>So, the first point is: if I run make in the program's main folder, usb.h is not found. Then, we have to install the corresponding library.</p>\n\n<p>There are two possibilities for this to be done. The first and more obvious would be to install, through home brew, libusb-1.0 and libusb-compat (the latter provides a compatibility interface for programs that use libusb-0.1, which is the first version of libusb, and is not compatible with libusb-1.0. usb.h is included in libusb-compat):</p>\n\n<pre><code>brew install libusb\nbrew install libusb-compat\n</code></pre>\n\n<p>However, this leads to other problems, as reported in the other answer. I had worked around them, but eventually found out that my program got angry when using libusb-compat (if I understand correctly, interfacing the usb port through two layers of libraries is too slow for a flasher).</p>\n\n<p>So, the other possibility: installing the actual libusb-0.1. This is <em>not</em> available through home brew. It is however available through ports, with the name of libusb-legacy. So, I had to install ports, install the X-code command line utilities (which required first going to Apples' website to accept their legal things...) and run</p>\n\n<pre><code>sudo port install libusb-legacy\n</code></pre>\n\n<p>Ok, now calling make would <em>not</em> do the trick since the compiler is not able to find the library yet. For that, I had to edit the config.mk file which is included in the main directory of the program, uncommenting the last two lines, and editing them somewhat in order to point to the directory where libusb-legacy is stored:</p>\n\n<pre><code>CPPFLAGS += -I/opt/local/include/libusb-legacy -D_DARWIN_C_SOURCE\nLDFLAGS += -L/opt/local/lib/libusb-legacy\n</code></pre>\n\n<p>(the -D_DARWIN_C_SOURCE defines the environmental variable required for other variables to be defined by the libraries. In the Makefile in the src directory, in fact, _POSIX_C_SOURCE is defined.)</p>\n\n<p>Do you think all this did the job? No. In fact at this point I ended up with another error: the linker not being able to find some library called -lusb. I don't know why this syntax, but after some thought I realised that -lusb is somewhat a short for libusb. And the libusb I am using is actually called libusb-legacy... So I went into the Makefile in the src directory, where -lusb is introduced, and changed -lusb to -lusb-compat. Tah-dah! Compiled. A few warnings about non-used variables and a comparison between two different types of integers, but nothing more. And the program runs - after a few trials, I have been able to reflash my bricked phone, which now is alive again! Very happy!!! :)</p>\n"}], "owner": {"reputation": 295, "user_id": 4901743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXBTK.jpg?s=128&g=1", "display_name": "Enrico", "link": "https://stackoverflow.com/users/4901743/enrico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 1, "accepted_answer_id": 42682873, "answer_count": 2, "score": 1, "last_activity_date": 1489011062, "creation_date": 1488957812, "last_edit_date": 1488978614, "question_id": 42665285, "link": "https://stackoverflow.com/questions/42665285/compiling-a-linux-program-under-mac-os-x", "title": "Compiling a Linux program under Mac OS X", "body": "<p>I am trying to use <code>make</code> under Mac OS X (El Capitan) to compile a program which I know to work under Linux. The program makes use of USB libraries. I had to modify the config.mk file for these libraries to be found, but now I end up with errors in the compilation (undeclared identifiers).</p>\n\n<p>Link to source: <a href=\"https://github.com/pali/0xFFFF\" rel=\"nofollow noreferrer\">https://github.com/pali/0xFFFF</a></p>\n\n<p>It requires usb.h, which seems to be part of usblib-compat. I installed the latter by <code>brew install usblib-compat</code>. But still usb.h couldn't be seen, although I knew where it was: specifically, symbolic link to usb.h and to the library may be found under /usr/local/include and under /usr/local/lib, respectively.</p>\n\n<p>After many trials, I progressed somehow. Namely, the file config.mk is clearly read during the make'ing process, although I have to admit that it is not clear to me how this is done; anyway, I noticed two lines commented:</p>\n\n<pre><code>CPPFLAGS += -I/usr/local/include\nLDFLAGS += -L/usr/local/lib -Wl,-R/usr/local/lib\n</code></pre>\n\n<p>(for the sake of precision, in the original config.mk the local dir was replaced by a pkg dir. I replaced it in these lines.)</p>\n\n<p>I uncommented them and now something happens: the usb.h is found. I think the first of these variable definitions tells the compiler where to look tor header files, and the second tells the linker where to look for libraries - but again it is not completely clear to me.</p>\n\n<p>In any case, I have still problems. Namely, the make'ing process outputs two warnings and an error, and then stops:</p>\n\n<pre><code>usb-device.c:90:57: warning: unused parameter 'udev' [-Wunused-parameter]\nstatic void usb_reattach_kernel_driver(usb_dev_handle * udev, int interface) {\n                                                        ^\nusb-device.c:90:67: warning: unused parameter 'interface' [-Wunused-parameter]\nstatic void usb_reattach_kernel_driver(usb_dev_handle * udev, int interface) {\n\nusb-device.c:324:13: error: use of undeclared identifier 'RTLD_DEFAULT' if ( dlsym(RTLD_DEFAULT, \"libusb_init\") )\n</code></pre>\n\n<p>Seems this program is difficult to port from Linux to Mac, although I think it should be portable. If anyone has any idea about what to do (apart from running a Linux distribution...), it would be much appreciated.</p>\n\n<p>EDIT</p>\n\n<p>dlfcn.h has the following:</p>\n\n<pre><code>#if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)\n#define RTLD_NOLOAD 0x10\n#define RTLD_NODELETE   0x80\n#define RTLD_FIRST  0x100   /* Mac OS X 10.5 and later */\n/*\n * Special handle arguments for dlsym().\n*/\n#define RTLD_NEXT       ((void *) -1)   /* Search subsequent objects. */\n#define RTLD_DEFAULT    ((void *) -2)   /* Use default search algorithm. */\n#define RTLD_SELF       ((void *) -3)   /* Search this and subsequent objects (Mac OS X 10.5 and later) */\n#endif /* not POSIX */\n</code></pre>\n"}, {"tags": ["c", "memory-management", "global-variables"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 6, "creation_date": 1488956978, "post_id": 42665042, "comment_id": 72455289, "body": "Don&#39;t print addresses using <code>%d</code>."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 3, "creation_date": 1488957434, "post_id": 42665042, "comment_id": 72455528, "body": "Use <a href=\"http://stackoverflow.com/questions/9356510/int-main-vs-void-main-in-c\">int main(void)</a>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1488957819, "post_id": 42665042, "comment_id": 72455728, "body": "If you want the variables to be in a known relationship, I think you&#39;ll need to ensure that they&#39;re part of a structure or an array.  I&#39;m not sure how far apart they need to be for your purposes, but if it was 4 KiB (a page size), then you could play games with <code>struct Spacer { int i; char space[4096 - sizeof(int)]; int j; };</code>  You&#39;d have to revise the references to the variables as well, of course.  But this gives you control over the layout of the two variables."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1488959471, "post_id": 42665042, "comment_id": 72456583, "body": "<a href=\"http://electronics.stackexchange.com/questions/237740/what-resides-in-the-different-memory-types-of-a-microcontroller/237759#237759\">This</a> applies universally to pretty much all computers."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1488958937, "last_edit_date": 1488958937, "creation_date": 1488956989, "answer_id": 42665060, "question_id": 42665042, "link": "https://stackoverflow.com/questions/42665042/peculiar-memory-allocation-of-global-variables-by-c-compiler/42665060#42665060", "title": "Peculiar memory allocation of global variables by c compiler", "body": "<p>One problem there,</p>\n\n<pre><code>  printf(\"%d\\n%d\",&amp;i,&amp;j);\n</code></pre>\n\n<p>invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. So, the outputs cannot be justified in any way. You need to use <code>%p</code> format specifier <strong>and</strong> cast the corresponding argument to <code>(void *)</code> to print a pointer.</p>\n\n<p>That said, C standard does neither impose any constraints nor provide any guideline on where and how the variables will be stored in memory. It's up to the compiler implementation to decide how to place different variables in memory. You need to check the documentation of the compiler in use to find out the rules your compiler is following.</p>\n\n<p>To elaborate in a generic way, an <a href=\"https://en.wikipedia.org/wiki/Object_file\" rel=\"nofollow noreferrer\">object file</a> consists of many segments, like</p>\n\n<ul>\n<li>Header (descriptive and control information)</li>\n<li>Code segment (\"text segment\", executable code)</li>\n<li>Data segment (initialized static variables)</li>\n<li>Read-only data segment (rodata, initialized static constants)</li>\n<li>BSS segment (uninitialized static data, both variables and constants)</li>\n<li>External definitions and references for linking</li>\n<li>Relocation information</li>\n<li>Dynamic linking information</li>\n<li>Debugging information</li>\n</ul>\n\n<p>and it's up to the compiler to decide the address space (range/value) to be used for each segment.</p>\n\n<p>As per the rules,</p>\n\n<ul>\n<li>Global variables (i.e., having static storage duration) left uninitialized and initialized with <code>0</code> are placed in <code>.bss</code> segment.</li>\n<li>Variables initialized with a non-zero value are placed in the <code>.data</code> segment</li>\n</ul>\n\n<p>so, it's fair enough to say that the addresses of two variables pertaining to two different segments will not be contiguous.</p>\n\n<p>Now, your observation checks out.</p>\n\n<blockquote>\n  <p><em>If both <code>i</code> and <code>j</code> are not initialized or equals 0 or equals some positive values then they are stored at continuous address spaces in memory</em></p>\n</blockquote>\n\n<p>yes, then all of them go to either <code>.bss</code> or <code>.data</code> and compiler choose to place them one after another, usually.</p>\n\n<blockquote>\n  <p><em>whereas if <code>i=0</code> and <code>j = some +ve</code> integer then their addresses are separated by fairly large distance.</em></p>\n</blockquote>\n\n<p>This also holds true, both the variables are now placed in different segments.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1488957645, "post_id": 42665101, "comment_id": 72455629, "body": "Sir, <i>Often globals initialized with 0 are kept in BSS section</i> is that correct? I thought unitialized variables go to BSS so that initialization can be done easily by zeroing the whole segment...."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1488957776, "post_id": 42665101, "comment_id": 72455705, "body": "Hi @SouravGhosh, <i>uninitialized globals</i> and <i>globals initialized with 0</i> may be seen with same eye by the compiler. Nevertheless I would confirm this once."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488957879, "post_id": 42665101, "comment_id": 72455759, "body": "globals are always initialized, to 0, if no other value is specified"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1488958015, "post_id": 42665101, "comment_id": 72455832, "body": "@SouravGhosh Not the best reference but <a href=\"https://en.wikipedia.org/wiki/.bss\" rel=\"nofollow noreferrer\">this wiki article</a> says, <i>&quot;[...]An implementation may also assign statically-allocated variables and constants initialized with a value consisting solely of zero-valued bits to the BSS section.&quot;</i>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488958032, "post_id": 42665101, "comment_id": 72455837, "body": "@AnttiHaapala Right, because of the property with variable having static storage duration, agree, but I was wondering whether explicit and implicit makes any differrence in this case."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1488958221, "post_id": 42665101, "comment_id": 72455922, "body": "@MohitJain OK, it makes sense. Only when the init value != 0, then it moves to the <code>.data</code>. Fair enough. :)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488958493, "post_id": 42665101, "comment_id": 72456077, "body": "yea, it shouldn&#39;t, in a linked program. The initialized/uninitialized would only matter when the object has external linkage, then a declaration without initialization is program-wide tentative definition and some other translation unit might initialize it with non-zero value."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1488958830, "post_id": 42665101, "comment_id": 72456264, "body": "@MohitJain I have added that in my answer now, maybe I was just overthinking. :)"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1488962085, "post_id": 42665101, "comment_id": 72457963, "body": "In terms of completeness, your answer looks better."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1488966104, "post_id": 42665101, "comment_id": 72460355, "body": "gcc changed the behavior of where variables initialized to 0 are stored. In the past they used to be stored in the data segment, many years ago they were changed to be stored in BSS by default. There is a flag called <code>-fno-zero-initialized-in-bss</code> to change that. This might seem like a very esoteric piece of trivia and the flag seems completely unnecessary but this actually broke some things that patched binaries after compilation (like for example certain BSD installation kernels that used a massive empty array as a built in ramdisk that was later populated with installation scripts)."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1488967579, "post_id": 42665101, "comment_id": 72461370, "body": "@Art Thanks for adding this info :)"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 3, "last_activity_date": 1488957441, "last_edit_date": 1488957441, "creation_date": 1488957121, "answer_id": 42665101, "question_id": 42665042, "link": "https://stackoverflow.com/questions/42665042/peculiar-memory-allocation-of-global-variables-by-c-compiler/42665101#42665101", "title": "Peculiar memory allocation of global variables by c compiler", "body": "<p>Assuming you meant <code>printf(\"%p, %p\\n\",(void *)&amp;i,(void *)&amp;j);</code>, note the following:</p>\n\n<ol>\n<li>It is not mandated by C specs to allocate variables in contiguous memory.</li>\n<li>Often globals initialized with <code>0</code> are kept in <a href=\"https://en.wikipedia.org/wiki/.bss\" rel=\"nofollow noreferrer\">BSS section</a> (which is a part of data section) to save binary size. Other globals are kept in rest of the <a href=\"https://en.wikipedia.org/wiki/Data_segment\" rel=\"nofollow noreferrer\">data section</a>. (Depends on implementation detail, not mandated by C specs)</li>\n</ol>\n\n<blockquote>\n  <p>How can I intentionally do what compiler is doing automatically?</p>\n</blockquote>\n\n<p>This is compiler specific question and your compiler documentation should possibly contain an answer to this.</p>\n"}], "owner": {"reputation": 47, "user_id": 7671116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f51b84e4afd7d787661e1730dbd1a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Kumar", "link": "https://stackoverflow.com/users/7671116/rahul-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1488958937, "creation_date": 1488956924, "last_edit_date": 1495540436, "question_id": 42665042, "link": "https://stackoverflow.com/questions/42665042/peculiar-memory-allocation-of-global-variables-by-c-compiler", "title": "Peculiar memory allocation of global variables by c compiler", "body": "<p>When I am declaring some variable outside main then compile stores them in some peculiar way.</p>\n\n<pre><code>int i=1,j=1;\nvoid main(void)\n{\n     printf(\"%d\\n%d\",&amp;i,&amp;j);\n}\n</code></pre>\n\n<p>If both <code>i</code> and <code>j</code> are not initialized or equals 0 or equals some positive values then they are stored at continuous address spaces in memory whereas if <code>i=0</code> and <code>j = some +ve integer</code> then their addresses are separated by fairly large distance. </p>\n\n<p>The problem with is when they are stored on contiguous address spaces it causes some real performance issues like false sharing (have a look <a href=\"https://stackoverflow.com/questions/42644890/notorious-behaviour-of-pthread-program-any-help-appreciated\">here</a>). I've learned that to prevent this, there should be some space between variable's addresses which is automatically provided when <code>i=0</code> and <code>j=any +ve value</code>.</p>\n\n<p>Now, what I want to understand is:</p>\n\n<ul>\n<li>Why the compiler stores variables to noncontinuous addresses only when one initialized to 0 and other initialized to positive values, and</li>\n<li>How can I intentionally do what compiler is doing automatically i.e allocating variables to fairly separated address space. </li>\n</ul>\n\n<p>(Using devcpp gcc 4.9.2)</p>\n"}, {"tags": ["c", "string", "strlen"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1488956664, "post_id": 42664932, "comment_id": 72455149, "body": "Because a char is not a string"}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1488956821, "post_id": 42664932, "comment_id": 72455217, "body": "@Ryan yes. he can use <code>sizeof(s)</code> instead."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1488956878, "post_id": 42664932, "comment_id": 72455246, "body": "Enable compiler warnings...."}], "answers": [{"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 8, "last_activity_date": 1488956755, "creation_date": 1488956755, "answer_id": 42664989, "question_id": 42664932, "link": "https://stackoverflow.com/questions/42664932/why-c-function-strlen-returns-a-wrong-length-of-a-char/42664989#42664989", "title": "Why C function strlen() returns a wrong length of a char?", "body": "<p>Signature of <code>strlen</code> is:</p>\n\n<pre><code>size_t strlen(const char *s);\n/* The strlen() function calculates the\n   length of the string s, excluding the\n   terminating null byte ('\\0'). */\n</code></pre>\n\n<p><code>strlen</code> expects the input <code>const char array</code> is null terminated. But when you pass the address of an <code>auto</code> variable, you can't guarantee this and thus your program has an <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a>.</p>\n\n<blockquote>\n  <p>Does anybody know why and how to solve this problem?</p>\n</blockquote>\n\n<p><code>sizeof(char)</code> is guaranteed to be <code>1</code>. So use <code>sizeof</code> or <code>1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 6, "last_activity_date": 1488958972, "last_edit_date": 1488958972, "creation_date": 1488956765, "answer_id": 42664993, "question_id": 42664932, "link": "https://stackoverflow.com/questions/42664932/why-c-function-strlen-returns-a-wrong-length-of-a-char/42664993#42664993", "title": "Why C function strlen() returns a wrong length of a char?", "body": "<p>The statement  </p>\n\n<pre><code>printf(\"%d\\n\",strlen(&amp;s));  \n</code></pre>\n\n<p>make no sense for the given case. <code>strlen</code> expects a null terminating string, <code>s</code> is of <code>char</code> type and <code>&amp;s</code> need not necessarily point to an string. What you are getting is one the result of undefined behavior of the program.   </p>\n\n<p>To get the size of <code>s</code> you can use <code>sizeof</code> operator  </p>\n\n<pre><code>printf(\"%zu\\n\", sizeof(s)); \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 587, "user_id": 4052624, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8Phur.png?s=128&g=1", "display_name": "BioCoder", "link": "https://stackoverflow.com/users/4052624/biocoder"}, "edited": false, "score": 1, "creation_date": 1488957163, "post_id": 42664995, "comment_id": 72455385, "body": "OK, the problem is that I didn&#39;t realize the difference between a single character and a char array. Thanks for your patient explanation to an inexperienced C programmer like me."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 10, "last_activity_date": 1488956767, "creation_date": 1488956767, "answer_id": 42664995, "question_id": 42664932, "link": "https://stackoverflow.com/questions/42664932/why-c-function-strlen-returns-a-wrong-length-of-a-char/42664995#42664995", "title": "Why C function strlen() returns a wrong length of a char?", "body": "<p>That's actually quite an interesting question. Let's break it up:</p>\n\n<pre><code>\"MIDSH\"[3]\n</code></pre>\n\n<p>String literals have array types. So the above applies the subscript operator to the array and evaluates to the 4th character 'S'. It then assigns it to the <strong>single character variable</strong> <code>s</code>.</p>\n\n<pre><code>printf(\"%d\\n\",strlen(&amp;s));\n</code></pre>\n\n<p>Since <code>s</code> is a single character, and not part of an actual string, the behavior is undefined for the above code.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1488956900, "creation_date": 1488956900, "answer_id": 42665035, "question_id": 42664932, "link": "https://stackoverflow.com/questions/42664932/why-c-function-strlen-returns-a-wrong-length-of-a-char/42665035#42665035", "title": "Why C function strlen() returns a wrong length of a char?", "body": "<p>The <code>strlen</code> function treats its argument as a pointer to a sequence of characters, where the sequence is terminated by the <code>'\\0'</code> character.</p>\n\n<p>By passing a pointer to the single character variable <code>s</code> you effectively say that <code>&amp;s</code> is the first character in such a sequence, but it's not. That means <code>strlen</code> will continue to search in memory under false premises and you will have <em>undefined behavior</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 7676668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7569d95c3c98af0473729350be63e28e?s=128&d=identicon&r=PG&f=1", "display_name": "RockDeria", "link": "https://stackoverflow.com/users/7676668/rockderia"}, "is_accepted": false, "score": 1, "last_activity_date": 1488957865, "creation_date": 1488957865, "answer_id": 42665295, "question_id": 42664932, "link": "https://stackoverflow.com/questions/42664932/why-c-function-strlen-returns-a-wrong-length-of-a-char/42665295#42665295", "title": "Why C function strlen() returns a wrong length of a char?", "body": "<p>when you use \n\"char s=\" you create a new address on the stack for 's',and this address can't be add or reduce!so though you give strlen a char* but it can't find '\\0' by add address.All is wrong.\nyou should use strlen with a address for char which is a array.like:</p>\n\n<pre><code>char* s = \"MIDSH\";\nprintf(\"%d\\n\", strlen(s)); //print 5\ns++;\nprintf(\"%d\\n\", strlen(s)); //print 4\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 4052624, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8Phur.png?s=128&g=1", "display_name": "BioCoder", "link": "https://stackoverflow.com/users/4052624/biocoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3549, "favorite_count": 0, "accepted_answer_id": 42664995, "answer_count": 5, "score": 0, "last_activity_date": 1488958972, "creation_date": 1488956522, "question_id": 42664932, "link": "https://stackoverflow.com/questions/42664932/why-c-function-strlen-returns-a-wrong-length-of-a-char", "title": "Why C function strlen() returns a wrong length of a char?", "body": "<p>My C codes are listed below:</p>\n\n<pre><code>char s=\"MIDSH\"[3];\nprintf(\"%d\\n\",strlen(&amp;s));\n</code></pre>\n\n<p>The result of running is 2, which is wrong because char s is just an 'S'.</p>\n\n<p>Does anybody know why and how to solve this problem?</p>\n"}, {"tags": ["c", "data-structures", "stack"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488956415, "post_id": 42664885, "comment_id": 72454994, "body": "That stackoverflow message has nothing to do with your stack data structure :)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "edited": false, "score": 0, "creation_date": 1488957053, "post_id": 42665055, "comment_id": 72455324, "body": "Why? is for not allowed?"}, {"owner": {"reputation": 179, "user_id": 4223191, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-z2ZDkHuGYG4/AAAAAAAAAAI/AAAAAAAAABA/HCv_WxrEJi8/photo.jpg?sz=128", "display_name": "Saran", "link": "https://stackoverflow.com/users/4223191/saran"}, "reply_to_user": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "edited": false, "score": 0, "creation_date": 1488957706, "post_id": 42665055, "comment_id": 72455664, "body": "for is popping the first element 5 times, The way I edited your program makes sense. You can push elements one at a time and pop one at a time. Pushing all elements at once and popping doesn&#39;t fit good for stacks."}, {"owner": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "edited": false, "score": 0, "creation_date": 1488958009, "post_id": 42665055, "comment_id": 72455829, "body": "Yeah, i know, but in order to solve this problem statement, i need to take 5 elements at ONE GO, and pop them out in one go, so, i thought for loop should be the best way to do it. Can you suggest some other way to implement it."}, {"owner": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "edited": false, "score": 0, "creation_date": 1488958604, "post_id": 42665055, "comment_id": 72456138, "body": "Thanks, you&#39;re the best!"}], "tags": [], "owner": {"reputation": 179, "user_id": 4223191, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-z2ZDkHuGYG4/AAAAAAAAAAI/AAAAAAAAABA/HCv_WxrEJi8/photo.jpg?sz=128", "display_name": "Saran", "link": "https://stackoverflow.com/users/4223191/saran"}, "is_accepted": true, "score": 0, "last_activity_date": 1488958314, "last_edit_date": 1488958314, "creation_date": 1488956965, "answer_id": 42665055, "question_id": 42664885, "link": "https://stackoverflow.com/questions/42664885/getting-error-in-stackpush-pop/42665055#42665055", "title": "Getting Error in Stack(Push &amp; Pop)", "body": "<p>You shouldn't be using the '<strong>for</strong>' loops for popping,pushing.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n# define MAX 5\nint stack1[MAX];\nint top=-1;\nvoid push(int);\nint pop();\nvoid display();\nmain()\n{\nint choice,num;\nwhile(1)\n{\n    printf(\"\\nEnter Your Choice: \\n\");\n    printf(\"Enter 1. to Push \\n\");\n    printf(\"Enter 2. to pop \\n\");\n    printf(\"Enter 3. to Display \\n\");\n    printf(\"Enter 4. To Exit\\n\");\n    scanf(\"%d\",&amp;choice);\nswitch(choice)\n{\n\ncase 1:\n    printf(\"Enter Elements to be pushed\\n\");\n    int z;\n    for(z=1;z&lt;=5;z++)\n    {\n    printf(\"Enter a the code In Room %d: \",z);\n    scanf(\"%d\",&amp;num);\n    push(num);//Function call, Calling push\n    }\n    break;\ncase 2:\n    printf(\"Numbers to be poped\\n\");\n    int b;\n    for(b=1;b&lt;=5;b++)\n    {\n    num=pop();\n    }//Return a integer Value;\n    break;\n\ncase 3:\n    display();\n    break;\ncase 4:\n    exit(1);\ndefault:\n    printf(\"Invalid Choice\\n\");\n}\n}\n} \nvoid push(int element)//Push Function\n{\nint x;\n\nif(top== MAX-1)//Check if Stack is Full\n{\n    printf(\"Stack Overflow \\n\");\n    return;//Terminate the function\n}\ntop=top+1;//start from -1 and gets incremented\nstack1[top]=element;//insert elements at each step\n\n}\nint pop()\n{\nint a;\n\n\nint element;\nif(top==-1)\n{\n    printf(\"Stack EMPTY can't delete anything\");\n     return;\n}\nelement=stack1[top];//In stack Elements are Always delete from TOP\ntop=top-1;//To shift the pointer\nprintf(\"%d has been deleted \\n\", element);\nreturn element;\n\n}\nvoid display()\n{\nint i;\nif(top==-1)\n{\n    printf(\"Stack Is empty can't display\");\n    return;//Terminates Display function\n}\nprintf(\"\\n\\n\");\nfor(i=top;i&gt;=0;i--)//Displays top elements and decrements on each step\n    printf(\"%d\\n\",stack1[i]);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "edited": false, "score": 0, "creation_date": 1488958088, "post_id": 42665092, "comment_id": 72455866, "body": "Yeah, i know, but in order to solve this problem statement, i need to take(push) 5 elements at ONE GO, and pop them out in one go, so, i thought for loop should be the best way to do it. Can you suggest some other way to implement it"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "edited": false, "score": 0, "creation_date": 1488961749, "post_id": 42665092, "comment_id": 72457787, "body": "You already have a loop in the main function which will push 5 elements. If you have another loop in the push function, you are trying to push a total of 25 elements. Actually, since your array size is 5, what happens is that the first element is pushed 5 times, and the rest of the 4 elements try to push (5 times each) but find the stack full. So, when you try to pop, you pop out the first element 5 times."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1488957106, "creation_date": 1488957106, "answer_id": 42665092, "question_id": 42664885, "link": "https://stackoverflow.com/questions/42664885/getting-error-in-stackpush-pop/42665092#42665092", "title": "Getting Error in Stack(Push &amp; Pop)", "body": "<p>You have 2 for loops. There is a loop in the main function, inside the switch and there is also a loop inside the <code>push</code> and <code>pop</code> functions.</p>\n\n<p>The <code>push</code> and <code>pop</code> functions will <code>push</code> or <code>pop</code> only one element and will not require a loop inside that.</p>\n\n<p>This would be more apparent if you used indenting while writing the code. Which is one of the reasons to properly indent your code.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "edited": false, "score": 0, "creation_date": 1488958500, "post_id": 42665385, "comment_id": 72456082, "body": "So, what changes shud i make in the program to shift the pointer and take(push) different elements at each iteration?"}, {"owner": {"reputation": 103, "user_id": 2920772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29f463c6b8239d4b6c28c221871b699?s=128&d=identicon&r=PG&f=1", "display_name": "Behram Buhariwala", "link": "https://stackoverflow.com/users/2920772/behram-buhariwala"}, "reply_to_user": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "edited": false, "score": 0, "creation_date": 1488958723, "post_id": 42665385, "comment_id": 72456214, "body": "Okay. Since you already have loop running which is accepting elements from the user, you simple pass that element to your push function. In your push function what you have currently, you will have to remove the for loop because of the reason I explained above. You will simple take that element, increment the top value and do stack[top] = yourNewValue. Simple. Also, just wanted to mention, when u define an array of 5, the index stars from 0. So your loop would be something like, for(i=0;i&lt;=4;i++) and not from 1 to 5 since stack[5] is undefined."}], "tags": [], "owner": {"reputation": 103, "user_id": 2920772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29f463c6b8239d4b6c28c221871b699?s=128&d=identicon&r=PG&f=1", "display_name": "Behram Buhariwala", "link": "https://stackoverflow.com/users/2920772/behram-buhariwala"}, "is_accepted": false, "score": 0, "last_activity_date": 1488958204, "creation_date": 1488958204, "answer_id": 42665385, "question_id": 42664885, "link": "https://stackoverflow.com/questions/42664885/getting-error-in-stackpush-pop/42665385#42665385", "title": "Getting Error in Stack(Push &amp; Pop)", "body": "<p>Let's take this one step at a time.</p>\n\n<p>1).You started a for loop so that the user can enter 5 elements for your stack. Once he enters the number, your push function gets called. In push, again you have a loop which is running 5 times. Thus, the same element is being pushed 5 times to the stack. So on your next  choice the stack is already full. Thus the stack overflow message.</p>\n\n<p>2). Now your stack is something like- [5,5,5,5,5], assuming 5 was the 5 number entered, in your pop function again you are running a loop. Ideally, you are only supposed to pop one element at a time for the user. So since you are running a loop, all 5 elements are getting popped and since only the first element is in the stack, that's what you see in the output.</p>\n"}], "owner": {"reputation": 23, "user_id": 7676603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5a66a6ff179690e796ced35fd8d7?s=128&d=identicon&r=PG&f=1", "display_name": "harsh97", "link": "https://stackoverflow.com/users/7676603/harsh97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1330, "favorite_count": 0, "accepted_answer_id": 42665055, "answer_count": 3, "score": 2, "last_activity_date": 1488958314, "creation_date": 1488956305, "last_edit_date": 1488956421, "question_id": 42664885, "link": "https://stackoverflow.com/questions/42664885/getting-error-in-stackpush-pop", "title": "Getting Error in Stack(Push &amp; Pop)", "body": "<p>i am new to c programming, While implementing stack using c program, It is giving me an error.</p>\n\n<p>In spite of having 5 elements-space in my stack array, it's giving me \"Stack Overflow\"(message) in my Second iteration of for loop(While Pushing elements). </p>\n\n<p>&amp; While popping out the numbers, only the first number is popped(5 times)</p>\n\n<p>what seems to be wrong?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n# define MAX 5\nint stack1[MAX];\nint top=-1;\nvoid push(int);\nint pop();\nvoid display();\nmain()\n{\nint choice,num;\nwhile(1)\n{\n    printf(\"\\nEnter Your Choice: \\n\");\n    printf(\"Enter 1. to Push \\n\");\n    printf(\"Enter 2. to pop \\n\");\n    printf(\"Enter 3. to Display \\n\");\n    printf(\"Enter 4. To Exit\\n\");\n    scanf(\"%d\",&amp;choice);\nswitch(choice)\n{\n\ncase 1:\n    printf(\"Enter Elements to be pushed\\n\");\n    int z;\n    for(z=1;z&lt;=5;z++)\n    {\n    printf(\"Enter a the code In Room %d: \",z);\n    scanf(\"%d\",&amp;num);\n    push(num);//Function call, Calling push\n    }\n    break;\ncase 2:\n    printf(\"Numbers to be poped\\n\");\n    int b;\n    for(b=1;b&lt;=5;b++)\n    {\n    num=pop();\n    }//Return a integer Value;\n    break;\n\ncase 3:\n    display();\n    break;\ncase 4:\n    exit(1);\ndefault:\n    printf(\"Invalid Choice\\n\");\n}\n}\n} \nvoid push(int element)//Push Function\n{\nint x;\nfor(x=1;x&lt;=5;x++)\n{\nif(top== MAX-1)//Check if Stack is Full\n{\n    printf(\"Stack Overflow \\n\");\n    return;//Terminate the function\n}\ntop=top+1;//start from -1 and gets incremented\nstack1[top]=element;//insert elements at each step\n}\n}\nint pop()\n{\nint a;\nfor(a=1;a&lt;=5;a++)\n{\n\nint element;\nif(top==-1)\n{\n    printf(\"Stack EMPTY can't delete anything\");\n     return;\n}\nelement=stack1[top];//In stack Elements are Always delete from TOP\ntop=top-1;//To shift the pointer\nprintf(\"%d has been deleted \\n\", element);\nreturn element;\n}\n}\nvoid display()\n{\nint i;\nif(top==-1)\n{\n    printf(\"Stack Is empty can't display\");\n    return;//Terminates Display function\n}\nprintf(\"\\n\\n\");\nfor(i=top;i&gt;=0;i--)//Displays top elements and decrements on each step\n    printf(\"%d\\n\",stack1[i]);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488956334, "post_id": 42664872, "comment_id": 72454948, "body": "Greater type safety and ease of implementation. A &quot;type for all&quot; is an error prone approach for both you and users of the library."}, {"owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488956609, "post_id": 42664872, "comment_id": 72455114, "body": "@StoryTeller so if I&#39;m trying to make my own implementation that also allows the user to put their own types in should I just use the same approach of having a specific struct/function for each type but leaving a &quot;type for all&quot; for the user to use if they would like to use a custom type?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488956941, "post_id": 42664872, "comment_id": 72455275, "body": "So what would <code>matrix_void_add</code> do? Add n voids together? Or it would have a switch-case for every data type? Even when the programmer knows what data they&#39;re using, you&#39;d want to move this from compile time to run-time?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488957018, "post_id": 42664872, "comment_id": 72455304, "body": "Yes and no, actually. You should implement it like that, but you can offer an API that wraps is all up by using a <a href=\"http://en.cppreference.com/w/c/language/generic\" rel=\"nofollow noreferrer\">Generic Selection</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488957106, "post_id": 42664872, "comment_id": 72455355, "body": "Yes, generic selection could work here; it would make the use of API easier on C11+"}, {"owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488957201, "post_id": 42664872, "comment_id": 72455404, "body": "I think if I&#39;m understanding your question that I wouldn&#39;t add those functions to the void one especially since how I see it it would mostly be used as a way to hold structs etc which you can&#39;t really do math.  @StoryTeller as nice as that would be I&#39;m trying to stick to c99 for now ;)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488957310, "post_id": 42664872, "comment_id": 72455450, "body": "c99 is superseded and replaced by c11, as it goes. It&#39;s been six years since the recent publication and compilers have excellent support for it. There&#39;s no virtue to sticking to c99."}, {"owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488957417, "post_id": 42664872, "comment_id": 72455517, "body": "@StoryTeller I see, I&#39;ll take that into account. I&#39;m just generally confused as when I go on here people encourage me to use c11 but in other places (forums, chats, etc) people encourage using c99."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488957580, "post_id": 42664872, "comment_id": 72455589, "body": "Probably because there are opinionated people everywhere :) But if you want to be proficient in modern C programming, then that&#39;s C11, not C99 (which coincidentally was also treated with suspicion for years, when people vehemently argued that one should stick to C90)"}, {"owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "edited": false, "score": 0, "creation_date": 1488957771, "post_id": 42664872, "comment_id": 72455701, "body": "That does make sense I suppose, I&#39;m quite new to C so I&#39;m not really sure and have been depending on what people have told me. I guess it wouldn&#39;t kill me to use C11, thank you :)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1488960965, "post_id": 42664872, "comment_id": 72457366, "body": "Could you post a link to the documentation for functions like this one: matrix_int_add ?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488963298, "post_id": 42664872, "comment_id": 72458627, "body": "@StoryTeller: <i>&quot;Compilers have excellent support for C11&quot;</i>. No, they definitely do not. There is excellent support for <i>parts of C11</i>, but no compiler I know of fully implement C11 yet. (Because there are many optional parts to C11, the definition of <i>&quot;fully&quot;</i> may vary.) C99 is very well supported in comparison -- and I for one would have preferred C11 to include parts of POSIX.1, rather than those oddball/weird/suspicious <i>&quot;safe <code>_s()</code> function variants&quot;</i> --, and the only one who treated it with suspicion was Microsoft."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1488964649, "post_id": 42664872, "comment_id": 72459417, "body": "@NominalAnimal - Considering quite a few optional features of C11 are mandatory features of C99 that were retconned as optional, I fail to see how a tool-chain that very well supports C99 can fail to support the very same features in C11. What makes its support less than &quot;excellent&quot; in comparison!? As for POSIX support... well, that&#39;s why I personally prefer to stick with POSIX systems :)"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488970098, "post_id": 42664872, "comment_id": 72463050, "body": "@StoryTeller: You forget that there are compilers that support C11 but do not support C99, simply by omitting the support for the features mandatory in C99. There are also differences from C99+POSIX.1/GNU extensions to C11 wrt. atomics, for example. This includes the Microsoft compiler. As to POSIX: yup, me too; I do not want to be restricted to a single <i>vendor</i>. I do play with microcontrollers that are programmable via an open toolchain (esp. GCC, again mostly for <code>__atomic_*()</code> support; quite useful in interrupt handlers), too."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1488970725, "post_id": 42664872, "comment_id": 72463490, "body": "@NominalAnimal - Yes, well, that particular retconning was indeed done to appease certain vendors whom shall remain unnamed (<i>cough</i>)... Microsoft... (<i>cough</i>). IMO making previously mandatory features into optional ones just makes the whole discussion about which standard to adopt a moot point."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488972272, "post_id": 42664872, "comment_id": 72464576, "body": "@StoryTeller: Agreed. And therein we arrive at my point: I recommend C99 and not C11 precisely for those reasons. The compilers that implement C99 (i.e., all but Microsoft) have implemented it as fully as I care about; I rely on POSIX.1 and occasionally GNU/BSD extensions for the rest. I will only include C11 features as they arrive in stable form in GCC for all architectures I use, and will only recommend specific C11 features as they are implemented in several other C compilers with the same semantics (for portability). Therefore, I recommend C99 over C11."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1488972754, "post_id": 42664872, "comment_id": 72464928, "body": "@NominalAnimal - It&#39;s not that hard to get around the under-specification of certain features to get portable code. I recommend C11 precisely to feed the adoption-support feedback loop of reasonable vendors. If enough people don&#39;t use C11, how are vendors to know where to focus their development effort? Plus, the more use, the more defect report, the better C2x."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488973411, "post_id": 42664872, "comment_id": 72465419, "body": "@StoryTeller: C11 itself is proof otherwise; otherwise unambiguous POSIX.1 features (like <code>getline()</code>) would have gotten in. The C standards committee exists only to serve the big member corporations&#39; interests; they care <b>nothing</b> about individual developers or developers&#39; needs. Even less about true code portability (as you need POSIX.1 or similar for e.g. filesystem operations anyway). I have zero hope for a better C2x."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1488973567, "post_id": 42664872, "comment_id": 72465545, "body": "@NominalAnimal - The big corporations I know of don&#39;t even adopt C11 yet, so I fail to see the pandering. As nice of a chat as this was, I think we can mainly just agree to respectfully disagree on this :)"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488981647, "post_id": 42664872, "comment_id": 72471264, "body": "@StoryTeller: I&#39;m not &quot;chatting&quot; with you. I&#39;m objecting to your <i>&quot;there is no virtue in sticking to C99&quot;</i> comment above, and have tried showing it is factually incorrect. Your opinion and mine are irrelevant; what matters is the advice you give to others should be based on reality and facts, and not your own personal preferences (unless clearly stated as such)."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1488982286, "post_id": 42664872, "comment_id": 72471696, "body": "@NominalAnimal - You most certainly were &quot;chatting&quot; with me, at least until I refused to be swayed by your remarks. This overly pedantic and objectionable comment is not a surprise, given your &quot;fact based&quot; belief that the committee exists solely to pander to &quot;Big Corporations&quot;. Feel free to go on a diatribe, nothing more for me to add."}], "answers": [{"tags": [], "owner": {"reputation": 328, "user_id": 6626231, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eYZT2fS8s2E/AAAAAAAAAAI/AAAAAAAADLE/ECHiXOjj3dY/photo.jpg?sz=128", "display_name": "GurstTavo", "link": "https://stackoverflow.com/users/6626231/gursttavo"}, "is_accepted": false, "score": 2, "last_activity_date": 1488961039, "last_edit_date": 1495542709, "creation_date": 1488959631, "answer_id": 42665821, "question_id": 42664872, "link": "https://stackoverflow.com/questions/42664872/is-there-an-advantage-writing-a-single-function-that-takes-void-instead-of-mul/42665821#42665821", "title": "is there an advantage writing a single function that takes void*, instead of multiple functions each of which takes a different type?", "body": "<p>Addressing the question, yes there are several advantages in implementing a function for each type, and in some cases is mandatory. Some libraries which are aimed for high performance\nuse very specific instructions in order to handle the fetch/processing/write of the data an efficient manner based on the variable type.</p>\n\n<p>A clear example of this is would be the case for <code>float</code> and <code>int</code>, even when they have the same size (for 32 bit processors),\nthe representation is comp\u013aetely different and the operation is handled by a different operational unit, <a href=\"https://en.wikipedia.org/wiki/Arithmetic_logic_unit\" rel=\"nofollow noreferrer\"><code>ALU</code></a> for <code>int</code> and <a href=\"https://en.wikipedia.org/wiki/Floating-point_unit\" rel=\"nofollow noreferrer\"><code>FPU</code></a> for <a href=\"https://en.wikipedia.org/wiki/IEEE_floating_point\" rel=\"nofollow noreferrer\"><code>float</code></a>s.</p>\n\n<p>Also only for a C11 compiler you could use the <a href=\"http://en.cppreference.com/w/c/language/generic\" rel=\"nofollow noreferrer\"><code>_Generic()</code></a> but if you are using <code>C99</code> there's no way to know the type of the variable. <a href=\"https://stackoverflow.com/questions/6280055/how-do-i-check-if-a-variable-is-of-a-certain-type-compare-two-types-in-c\">(AFAIK)</a>\n<code>_Generic()</code> works at compile time so either you end up with a function for each type.</p>\n"}, {"tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": false, "score": 0, "last_activity_date": 1488962620, "creation_date": 1488962620, "answer_id": 42666646, "question_id": 42664872, "link": "https://stackoverflow.com/questions/42664872/is-there-an-advantage-writing-a-single-function-that-takes-void-instead-of-mul/42666646#42666646", "title": "is there an advantage writing a single function that takes void*, instead of multiple functions each of which takes a different type?", "body": "<p>It depends what your functions do.  If they do not actually use the data at all then <code>void*</code> could be correct, whereas if they do need to know anything about the data then specifying the types is the correct way to go.</p>\n\n<p>For example, your dynamic array library probably does not need separate functions to add, remove, sort (etc) <code>int</code> and <code>float</code> data items to the array.  In this instance the functions do not need to know anything about the type of the object being stored, just its location; in which case passing a <code>void*</code> is correct.</p>\n\n<p>On the other hand, the matrix library may need different prototypes for the different data types, because <code>int</code> and <code>float</code> (etc) data use different instructions to manipulate them.</p>\n"}, {"tags": [], "owner": {"reputation": 452, "user_id": 5898372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s33No.gif?s=128&g=1", "display_name": "John Forkosh", "link": "https://stackoverflow.com/users/5898372/john-forkosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1488970019, "creation_date": 1488970019, "answer_id": 42669198, "question_id": 42664872, "link": "https://stackoverflow.com/questions/42664872/is-there-an-advantage-writing-a-single-function-that-takes-void-instead-of-mul/42669198#42669198", "title": "is there an advantage writing a single function that takes void*, instead of multiple functions each of which takes a different type?", "body": "<p>You could easily and correctly write a function <strong>matrixop(void *arg, int type_of_arg, etc)</strong> and then cast <strong>arg</strong> as necessary according to <strong>type_of_arg</strong>. Of course, as has already been said, for the function to work correctly, some operations might have to be performed differently for different <strong>type_of_arg</strong>'s. But the user wouldn't have to know that, and would see just the one function. And since you say, \"get my head wrapped around C more and especially pointers\", I'd definitely recommend you give it a try this way. Your particular matrix example may not be the very, very best situation where void pointers are most useful, but it's definitely fine and dandy for practice.</p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1488982429, "last_edit_date": 1488982429, "creation_date": 1488973189, "answer_id": 42670363, "question_id": 42664872, "link": "https://stackoverflow.com/questions/42664872/is-there-an-advantage-writing-a-single-function-that-takes-void-instead-of-mul/42670363#42670363", "title": "is there an advantage writing a single function that takes void*, instead of multiple functions each of which takes a different type?", "body": "<blockquote>\n  <p>My question is, is there an advantage in having a function/struct for each data type?</p>\n</blockquote>\n\n<p>Yes. It adds compile-time type checking.</p>\n\n<p>The code used to implement the same operation for different types does differ, and not necessarily by just the element type used. (For matrix operations, the optimum caching strategy may differ between integer and floating-point types of the same size, for example; especially if the hardware supports vectorization.) This means each element type requires their own version of each operation.</p>\n\n<p>It is possible to use some templating techniques to generate element type specific versions of operations that only differ by the type, but usually the end result is more complicated (and thus harder to maintain) than just maintaining the slightly differing implementations separately. </p>\n\n<p>It is quite possible to add an additional layer -- no modifications, just an additional header file included after GSL --, using the preprocessor and either GCC extensions (<code>__typeof__</code>) or C11 <code>_Generic()</code> to present a single \"function\" for each matrix operation, that chooses the function called at compile time based on the type of the parameter(s).</p>\n\n<blockquote>\n  <p>Why not just use a void pointer instead to only have one set of those structs/functions?</p>\n</blockquote>\n\n<p>Because not only do you lose the compile-time type checking -- the user can supply say a literal string, and the compiler won't warn about it, no matter what warnings are enabled --, but it would also add run-time overhead. </p>\n\n<p>Instead of choosing the proper function (implementation) to call at compile time, the data type field would have to be examined and the correct function called at run time. The generic matrix multiply function, for example, might look like</p>\n\n<pre><code>status_code_type matrix_multiply(void *dest, void *left, void *right)\n{\n    const element_type  tleft = ((struct generic_matrix_type *)left)-&gt;type;\n    const element_type  tright = ((struct generic_matrix_type *)right)-&gt;type;\n\n    if (tleft != tright)\n        return ERROR_TYPES_MISMATCH;\n\n    switch (tleft) {\n    case ELEMENT_TYPE_INT:\n        return matrix_mul_int_int(dest, left, right);\n    case ELEMENT_TYPE_FLOAT:\n        return matrix_mul_float_float(dest, left, right);\n    case ELEMENT_TYPE_DOUBLE:\n        return matrix_mul_double_double(dest, left, right);\n    case ELEMENT_TYPE_COMPLEX_FLOAT:\n        return matrix_mul_cfloat_cfloat(dest, left, right);\n    case ELEMENT_TYPE_COMPLEX_DOUBLE:\n        return matrix_mul_cdouble_cdouble(dest, left, right);\n    default:\n        return ERROR_UNSUPPORTED_TYPE;\n    }\n}\n</code></pre>\n\n<p>All of the above code is pure overhead, with the sole purpose of making it \"slightly easier\" on the programmer.  The GSL developers, for example, didn't find it necessary or useful.</p>\n\n<hr>\n\n<p>Quite a lot of C code -- including most C libraries' <code>FILE</code> implementation -- does utilize a related approach, however: the data structure itself contains function pointers for each operation the data type supports, in an object-oriented fashion.</p>\n\n<p>For example, you could have</p>\n\n<pre><code>struct matrix {\n    long     rows;\n    long     cols;\n    long     rowstep; /* Number of bytes to next row */\n    long     colstep; /* Number of bytes to next element */\n    size_t   size;    /* Size of each element */\n    int      type;    /* Type of each element */\n    char    *data;    /* Logically void*, but allows pointer arithmetic */\n    int    (*supports)(int, int);\n    int    (*get)(struct matrix *, long, long, int, void *);\n    int    (*set)(struct matrix *, long, long, int, const void *);\n    int    (*mul)(struct matrix *, long, long, int, const void *);\n    int    (*div)(struct matrix *, long, long, int, const void *);\n    int    (*add)(struct matrix *, long, long, int, const void *);\n    int    (*sub)(struct matrix *, long, long, int, const void *);\n};\n</code></pre>\n\n<p>where the </p>\n\n<pre><code>int supports(int source_type, int target_type);\n</code></pre>\n\n<p>is used to find out whether the other callbacks support the necessary operations between the two types, and the rest of the member functions,</p>\n\n<pre><code>int get(struct matrix *m, long row, long col, int to_type, void *to);\nint set(struct matrix *m, long row, long col, int from_type, void *from);\nint mul(struct matrix *m, long row, long col, int by_type, void *by);\nint div(struct matrix *m, long row, long col, int by_type, void *by);\nint add(struct matrix *m, long row, long col, int by_type, void *by);\nint sub(struct matrix *m, long row, long col, int by_type, void *by);\n</code></pre>\n\n<p>operate on a single element of a given matrix. Note how we need to pass a reference to the matrix itself; if we call e.g. <code>some-&gt;get(...)</code>, the function that the <code>get</code> function pointer points to, does not automatically get a pointer to the structure via which it was called.</p>\n\n<p>Also note how the value read from the matrix (<code>get</code>), or otherwise used in the operation, is provided via a pointer; and the type of the data specified by the pointer is separately provided. This is needed, if you want a function that say initializes a matrix to identity to work, without the user implementing every single matrix operation function for their custom type themselves.</p>\n\n<p>Because access to an element involves an indirect call, the overhead of the function pointers is quite significant -- especially if you consider how simple and fast the single-element operations actually take. (For example, a 5 clock cycle indirect call overhead on an operation that itself only takes 10 clock cycles, adds 50% overhead!)</p>\n"}], "owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 42669198, "answer_count": 4, "score": 0, "last_activity_date": 1488982429, "creation_date": 1488956250, "last_edit_date": 1488958907, "question_id": 42664872, "link": "https://stackoverflow.com/questions/42664872/is-there-an-advantage-writing-a-single-function-that-takes-void-instead-of-mul", "title": "is there an advantage writing a single function that takes void*, instead of multiple functions each of which takes a different type?", "body": "<p>I've been recently trying to make both a dynamic array library + a matrix library to get my head wrapped around C more and especially pointers.</p>\n\n<p>Lately however I found I've been doing things in a different way than some other libraries such as gsl for example. I've been trying to make a single function/struct that can handle every type in c + user defined ones, however when I look at gsl and specifically that matrices part of it they define it in a much different way. The gsl libraries has multiple structs for varying data types (<code>matrix_int</code>, <code>matrix_float</code>, <code>matrix_double</code>, etc.) as well as a set of functions that would only work with that struct (<code>matrix_int_add</code>, etc). My question is, is there an advantage in having a function/struct for each data type? Why not just use a void pointer instead to only have one set of those structs/functions?</p>\n"}, {"tags": ["c", "arrays", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 1, "creation_date": 1488956421, "post_id": 42664860, "comment_id": 72455002, "body": "Try to allocate some memory for the array? Then assign integers to each array position? Then don&#39;t increment array because then it doesn&#39;t point to the base anymore? (<i>for starters</i>)"}, {"owner": {"reputation": 574, "user_id": 7007908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f79a82f2485d7fbd434c8886ccddba9?s=128&d=identicon&r=PG&f=1", "display_name": "Jirka Picek", "link": "https://stackoverflow.com/users/7007908/jirka-picek"}, "edited": false, "score": 1, "creation_date": 1488956509, "post_id": 42664860, "comment_id": 72455052, "body": "You didn&#39;t allocate memory for the array. You need to add line <code>array = (int*)malloc(sizeof(int)*size);</code>"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1488957044, "post_id": 42664860, "comment_id": 72455317, "body": "You didn&#39;t initialize <code>count</code> before dereferencing it."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1488959100, "post_id": 42664860, "comment_id": 72456394, "body": "You&#39;re also reading an integer into an <code>int*</code> which is unlikely to end well."}], "answers": [{"tags": [], "owner": {"reputation": 574, "user_id": 7007908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f79a82f2485d7fbd434c8886ccddba9?s=128&d=identicon&r=PG&f=1", "display_name": "Jirka Picek", "link": "https://stackoverflow.com/users/7007908/jirka-picek"}, "is_accepted": false, "score": 1, "last_activity_date": 1488959926, "last_edit_date": 1488959926, "creation_date": 1488959122, "answer_id": 42665661, "question_id": 42664860, "link": "https://stackoverflow.com/questions/42664860/finding-largest-element-in-an-array-in-c/42665661#42665661", "title": "Finding largest element in an array in C", "body": "<p>Mistakes in the function main:</p>\n\n<p>You didn't allocate memory for the array. You need to add line <code>array = (int*) malloc(sizeof(int) * size);</code>. <em>Without this line you get <code>segmentation fault</code>.</em></p>\n\n<p>Another mistake is in filling array. Array is pointer already so you don't have to reference it again. <em>Now you are changing pointer, not array values</em></p>\n\n<p><em>Potential bug</em>: In loop when you fill array, you increase pointer, so you loose information about beginning of array. You can get it again after loop doing <code>array = array - size;</code>, but it won't work if you break loop earlier. It is better to work with temporary pointer.</p>\n\n<p>Mistakes in the function largest:</p>\n\n<p>You created pointer <code>count</code>, which is not allocated and then in for loop initialization you write value <code>0</code> to unknown address. <em>Causes <code>segmentation fault</code>.</em></p>\n\n<p>In for loop you are trying to read memory from address <strong>0</strong> to address <strong>array + size - 2</strong>, but you want to read it from beginning of array to the end of array which is from <strong>array</strong> to <strong>array + size - 1</strong>.</p>\n\n<p>Returning <code>count</code> makes no sense, but to sum it up, look at the example.</p>\n\n<p>Pointer is just number which is address to memory, so when you don't allocate it or don't assign existing pointer, then it points randomly to memory and OS don't let you access that memory. It can happen that you will read something from random pointer, but new compilers sets initial value to 0. In BSD you can read from address 0, but linux cause segmentation fault (I hope that I didn't switch it). Writing to address 0 causes segmentation fault in both systems.</p>\n\n<p>You should also check in function if you got valid pointer and allocation can fail so you need to check pointer immediatelly after allocation too. To sum this: <strong>Never trust pointer, always check it's validity.</strong></p>\n\n<p>Example <strong>doesn't</strong> check validity of pointers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint *largest(int *array, int size){\n    int *end = array + size; // address behind array\n    int *max = *array; // address with largest value\n    for(; array &lt; end; ++array){ // you dont need initialization since the array points to beginning\n        if (*max &lt; *array){ // compare values, not address\n            max = array; // save position of pointer with largest value\n        }\n    }\n    return max; // return address with largest value\n}\n\nint main(void){\n    int *array, size = 10;\n    array = (int*)malloc(sizeof(int) * size); // allocate memory\n\n    printf(\"enter elements; \");\n\n    int *tmp = array; // temporary variable to not loose information about beginning of array\n    for(int i = 0; i &lt; size; i++){\n        scanf(\"%d \", tmp); // reference is not needed since tmp is already pointer to value\n        tmp++;\n    }\n\n    printf(\"\\nThe largest element in the array is in element %d\", *largest(array, size));\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 0, "closed_date": 1488959370, "answer_count": 1, "score": -1, "last_activity_date": 1488959926, "creation_date": 1488956196, "question_id": 42664860, "link": "https://stackoverflow.com/questions/42664860/finding-largest-element-in-an-array-in-c", "closed_reason": "Duplicate", "title": "Finding largest element in an array in C", "body": "<p>My program need to have a function in which it finds the largest element of an array. It then returns the position of largest element. However, when finding the largest element, I am only allowed to use pointer arithmetic.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint *largest(int *array, int size){\n    int *p1 = array;\n    int *count, max = *p1;\n    for(*count = 0; count &lt; p1 + size - 1; p1++){\n        if (max &lt; *p1){\n            max = *p1;\n            count++;\n        }\n    }\n    return count;\n}\n\nint main(void){\n    int *array, size = 10;\n\n    printf(\"enter elements; \");\n    for(int i = 0; i &lt; size; i++){\n        scanf(\"%d \", &amp;array);\n        array++;\n    }\n\n    printf(\"\\nThe largest element in the array is in element %d\", *largest(array, size));\n}\n</code></pre>\n\n<p>However, when I run the program, after enter values for the elements, it gives me:</p>\n\n<pre><code>segmentation fault (core dumped)\n</code></pre>\n"}, {"tags": ["c", "linux", "gcc", "assembly", "x86"], "comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1488958022, "post_id": 42664698, "comment_id": 72455835, "body": "GCC doesn&#39;t know how to generate code for <code>printf</code> except by making a call to the C library function."}, {"owner": {"reputation": 1697, "user_id": 5172820, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/da4f4afa5dabda9b8e3de78e61e55713?s=128&d=identicon&r=PG&f=1", "display_name": "minecraftplayer1234", "link": "https://stackoverflow.com/users/5172820/minecraftplayer1234"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1488958139, "post_id": 42664698, "comment_id": 72455888, "body": "Hmm, okay. So maybe if I insert some assembly code in <code>C</code> instead of <code>printf</code>, then it will work..."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 1, "creation_date": 1488964022, "post_id": 42664698, "comment_id": 72459027, "body": "The section 2 of the manual is <a href=\"http://man7.org/linux/man-pages/dir_section_2.html\" rel=\"nofollow noreferrer\">dedicated to system calls</a> which enumerates the POSIX <a href=\"https://en.wikipedia.org/wiki/System_call#The_library_as_an_intermediary\" rel=\"nofollow noreferrer\">wrappers around the syscalls</a>. You can use those for starting. The calling convention will be different but that should be manageable."}, {"owner": {"reputation": 7497, "user_id": 1213227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78179ef730f268752c0f6fdde3943b99?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1213227/matthias"}, "edited": false, "score": 0, "creation_date": 1488967367, "post_id": 42664698, "comment_id": 72461222, "body": "Syscalls are OS specific. What OS do you use?"}, {"owner": {"reputation": 1697, "user_id": 5172820, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/da4f4afa5dabda9b8e3de78e61e55713?s=128&d=identicon&r=PG&f=1", "display_name": "minecraftplayer1234", "link": "https://stackoverflow.com/users/5172820/minecraftplayer1234"}, "edited": false, "score": 0, "creation_date": 1488967706, "post_id": 42664698, "comment_id": 72461458, "body": "Linux, 64bit, but have to compile for 32bit"}], "answers": [{"tags": [], "owner": {"reputation": 7497, "user_id": 1213227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78179ef730f268752c0f6fdde3943b99?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1213227/matthias"}, "is_accepted": false, "score": 1, "last_activity_date": 1488983945, "creation_date": 1488983945, "answer_id": 42674239, "question_id": 42664698, "link": "https://stackoverflow.com/questions/42664698/force-gcc-to-use-syscalls/42674239#42674239", "title": "Force gcc to use syscalls", "body": "<p>Under Linux there exist the macro family <code>_syscallX</code> to generate a syscall where the X names the number of parameters. It is marked as obsolete, but IMHO still working. E.g., the following code should work (not tested here):</p>\n\n<pre><code>_syscall3(int,syswrite,int,handle,char*,str,int len);\n// ---\n\nchar str[]=\"Hello, world!\\n\";\n// file handle 1 is stdout\nsyswrite(1,str,14);\n</code></pre>\n"}], "owner": {"reputation": 1697, "user_id": 5172820, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/da4f4afa5dabda9b8e3de78e61e55713?s=128&d=identicon&r=PG&f=1", "display_name": "minecraftplayer1234", "link": "https://stackoverflow.com/users/5172820/minecraftplayer1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488983945, "creation_date": 1488955586, "last_edit_date": 1488971263, "question_id": 42664698, "link": "https://stackoverflow.com/questions/42664698/force-gcc-to-use-syscalls", "title": "Force gcc to use syscalls", "body": "<p>So I am currently learning assembly language (<code>AT&amp;T</code> syntax). We all know that <code>gcc</code> has an option to generate assembly code from C code with <code>-S</code> argument. Now, I would like to look at some code, how it looks in assembly. The problem is, on laboratories we compile it with <code>as+ld</code>, and as for now, we cannot use C libraries. So for example we cannot use printf. We should do it by syscalls (32 bit is enough). And now I have this code in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int a = 5;\n    int b = 3;\n    int c = a + b;\n    printf(\"%d\", c);\n    return 0;\n}\n</code></pre>\n\n<p>This is simple code, so I know how it will look with syscalls. But if I have some more complicated code, I don't want to mess around and replace every <code>call printf</code> and modify other registers, cuz <code>gcc</code> generated code for printf, and I should have it with syscalls. So can I somehow make <code>gcc</code> generate assembly code with syscalls (for example for I/O (console, files)), not with C libs?</p>\n"}, {"tags": ["c", "pointers", "realloc", "double-pointer"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1488955609, "post_id": 42664684, "comment_id": 72454606, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1488955655, "post_id": 42664684, "comment_id": 72454629, "body": "You mind creating a <a href=\"http://stackoverflow.com/help/mcve\"><b><i>MCVE</i></b></a>?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1488956039, "post_id": 42664684, "comment_id": 72454817, "body": "@SouravGhosh - I learned a neat feature of comments the other day, if you enter the markup <code>[mcve]</code> is expands to <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488956937, "post_id": 42664684, "comment_id": 72455274, "body": "@StoryTeller Right, that&#39;s the way it is, also helps while suggesting <a href=\"https://stackoverflow.com/posts/42664684/edit\">edit</a>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1488963426, "post_id": 42664684, "comment_id": 72458692, "body": "Posted code seems OK if rather inefficient (except return value of malloc/realloc is not checked). The problem is elsewhere."}, {"owner": {"reputation": 7497, "user_id": 1213227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78179ef730f268752c0f6fdde3943b99?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1213227/matthias"}, "edited": false, "score": 0, "creation_date": 1488967603, "post_id": 42664684, "comment_id": 72461383, "body": "Are you sure that <code>numele</code> is zero in the first run?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1489077230, "post_id": 42664684, "comment_id": 72523295, "body": "You&#39;ll need to provide a simple <code>main()</code> so that we can see how <code>n</code> and <code>ne</code> are initialized.  Simply asserting that &quot;somewhere else in the code&quot; is all correct isn&#39;t very convincing.  Please <a href=\"https://stackoverflow.com/posts/42664684/edit\">edit</a> your question so that it has a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that anyone can reproduce."}], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1488969273, "creation_date": 1488969273, "answer_id": 42668921, "question_id": 42664684, "link": "https://stackoverflow.com/questions/42664684/realloc-invalid-pointer-in-c/42668921#42668921", "title": "realloc() : Invalid pointer in C", "body": "<p>Code for <code>realloc()</code> seems to be OK. But if <code>net *n</code> is not initialized properly in  first call of <code>add()</code>, ie <code>numele != 0 &amp;&amp; e != NULL</code>.  In such cases <code>e</code> might have some junk values and <code>realloc()</code> tries with invalid address. So that error can happen.</p>\n"}], "owner": {"reputation": 77, "user_id": 7634787, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6c140a8b11e08476ee581210644a4327?s=128&d=identicon&r=PG&f=1", "display_name": "Prakhar Ganesh", "link": "https://stackoverflow.com/users/7634787/prakhar-ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 887, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1489077004, "creation_date": 1488955530, "last_edit_date": 1488962271, "question_id": 42664684, "link": "https://stackoverflow.com/questions/42664684/realloc-invalid-pointer-in-c", "title": "realloc() : Invalid pointer in C", "body": "<p>Net is a structure which contain</p>\n\n<pre><code>typedef struct net{\n    int numele;\n    struct net **e;\n} net;\n</code></pre>\n\n<p>The following code raises the error:</p>\n\n<blockquote>\n  <p>realloc(): invalid pointer</p>\n</blockquote>\n\n<p>The realloc is causing problems whenever it is accessed and gives the above error. I don't understand why. If you think there is no problem in this part of the code, let me know because the whole code is 800 line long so i don't think I can post it here.</p>\n\n<pre><code>void add(net *n, net *ne) {\n    if(n-&gt;numele==0) {\n        n-&gt;e = (net **)malloc(sizeof(net *));\n        n-&gt;e[0] = ne;\n        n-&gt;numele = 1;\n    } else {\n        n-&gt;e = (net **)realloc(n-&gt;e, (1 + n-&gt;numele)*sizeof(net *));\n        n-&gt;e[n-&gt;numele] = ne;\n        n-&gt;numele = n-&gt;numele + 1;\n    }\n}\n</code></pre>\n\n<p>The nets <code>n</code> and <code>ne</code> are already initialized somewhere else in the code, so  you can assume that they will not be null.</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488955464, "post_id": 42664656, "comment_id": 72454538, "body": "You want only a newline (Return or Enter) to terminate the input?"}, {"owner": {"reputation": 11, "user_id": 7653984, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X7Hii6g_Ek4/AAAAAAAAAAI/AAAAAAAACe4/TUf9SLfWqAg/photo.jpg?sz=128", "display_name": "Kin Hang Lee", "link": "https://stackoverflow.com/users/7653984/kin-hang-lee"}, "edited": false, "score": 0, "creation_date": 1488955604, "post_id": 42664656, "comment_id": 72454602, "body": "I have tried gets() but it wont let me enter anythings, it just skip the line"}, {"owner": {"reputation": 11, "user_id": 7653984, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X7Hii6g_Ek4/AAAAAAAAAAI/AAAAAAAACe4/TUf9SLfWqAg/photo.jpg?sz=128", "display_name": "Kin Hang Lee", "link": "https://stackoverflow.com/users/7653984/kin-hang-lee"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488955670, "post_id": 42664656, "comment_id": 72454635, "body": "@StoryTeller I want something similar to scanf but i can enter wors with space e.g. &quot;The Pen&quot;"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488955737, "post_id": 42664656, "comment_id": 72454673, "body": "Then the duplicate question has all the approaches that can be suggested"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1488955835, "post_id": 42664656, "comment_id": 72454714, "body": "@KinHangLee  Welcome to Stack Overflow! <a href=\"http://stackoverflow.com/q/1694036/2173917\">DO NOT use <code>gets()</code>, it is dangerous</a>. use <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> instead."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1488987548, "post_id": 42664695, "comment_id": 72475666, "body": "Detail: &quot;scanf() with %s format specifier stops scanning as soon as it hits a whitespace&quot;  --&gt; With <code>&quot;%s&quot;</code> leading spaces do not stop scanning, they are consumed and not saved.  It is spaces after non-white-space that stops scanning with <code>&quot;%s&quot;</code>.  This is not directly observed with  OP&#39;s example which has a middle space.  Good suggestion about <code>fgets()</code>."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1488955577, "creation_date": 1488955577, "answer_id": 42664695, "question_id": 42664656, "link": "https://stackoverflow.com/questions/42664656/how-can-i-enter-space-bar-as-input-using-scanf/42664695#42664695", "title": "How can I enter space bar as input using scanf?", "body": "<p><code>scanf()</code> with <code>%s</code> format specifier stops scanning as soon as it hits a whitespace. You cannot scan <code>space</code> using it.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a77.21.6.2,</p>\n\n<blockquote>\n  <p><code>s</code> Matches a sequence of non-white-space characters.</p>\n</blockquote>\n\n<p>For a better and robust alternative, you can use <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> to scan an entire line, terminated by a <code>newline</code>. Remember, in this case, <code>fgets()</code> scans and stores the terminating newline also in the supplied buffer, so you need to manually get rid of it, if that matters.</p>\n"}, {"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 5, "creation_date": 1488955704, "post_id": 42664727, "comment_id": 72454653, "body": "The <code>s</code> isn&#39;t part of the format specifier."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1489039939, "post_id": 42664727, "comment_id": 72499018, "body": "@StoryTeller I don&#39;t understand. this used to work for space separated input."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1489040074, "post_id": 42664727, "comment_id": 72499071, "body": "Look at the specification for scanf. There&#39;s <code>%s</code> and <code>%[]</code>. I also must mention that I didn&#39;t downvote, just wanted to point out what I thought was a typo."}], "tags": [], "owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "is_accepted": false, "score": 1, "last_activity_date": 1489062795, "last_edit_date": 1495540821, "creation_date": 1488955664, "answer_id": 42664727, "question_id": 42664656, "link": "https://stackoverflow.com/questions/42664656/how-can-i-enter-space-bar-as-input-using-scanf/42664727#42664727", "title": "How can I enter space bar as input using scanf?", "body": "<p><a href=\"https://stackoverflow.com/questions/1247989/how-do-you-allow-spaces-to-be-entered-using-scanf\">Try this</a> </p>\n\n<pre><code>scanf(\"%[^\\n]\", book.travellername);\n</code></pre>\n\n<p>Input string will read space separated words and terminate upon encountering a newline character (i.e. <code>\\n</code>). Also be Careful that this does not get buffer overflows. so define size of <code>book.travellername</code> accordingly. </p>\n\n<p><strong>update:</strong> I have updated the format specifier.  </p>\n"}], "owner": {"reputation": 11, "user_id": 7653984, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X7Hii6g_Ek4/AAAAAAAAAAI/AAAAAAAACe4/TUf9SLfWqAg/photo.jpg?sz=128", "display_name": "Kin Hang Lee", "link": "https://stackoverflow.com/users/7653984/kin-hang-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2499, "favorite_count": 1, "closed_date": 1488966030, "answer_count": 2, "score": 1, "last_activity_date": 1489062795, "creation_date": 1488955413, "last_edit_date": 1488955895, "question_id": 42664656, "link": "https://stackoverflow.com/questions/42664656/how-can-i-enter-space-bar-as-input-using-scanf", "closed_reason": "Duplicate", "title": "How can I enter space bar as input using scanf?", "body": "<p>I'm writing an fuction and I got a problem, the scanf function cant read spacebar \" \", how can I solve it?</p>\n\n<pre><code>void add()\n{\nchar choose2;   \n\nFILE *fp;\nstruct booking book;    \nsystem(\"cls\");          \nfp=fopen(\"hotelbooking.txt\",\"a\");\n    if(fp == NULL)\n    {   \n        printf(\"There are no data file!\");\n    }\n    else\n    {\n        printf(\"Add New Hotel Booking Record(s)\\n\");\n\n        printf(\"  Name of Traveller: \\n\");  \n        scanf(\"%s\",book.travellername);\n        fprintf(fp,\"\\n%s\",book.travellername);\n\n        printf(\"  Destination: \");  \n        scanf(\"%s\",book.destination);\n        fprintf(fp,\"\\n%s\",book.destination);                            \n        fclose(fp);     \n    }               \n}\n</code></pre>\n\n<p>In the tervellername part, If I want to enter e.g. \"Jason George\", How can I scan the space bar between the name?</p>\n\n<p>I'm using the structure below:</p>\n\n<pre><code>    struct booking\n    {\n    char travellername[20];\n    char destination[20];\n    }book;\n</code></pre>\n"}, {"tags": ["c", "algorithm", "return", "structure"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488955020, "post_id": 42664536, "comment_id": 72454310, "body": "You don&#39;t have a structure in sight."}, {"owner": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1488955101, "post_id": 42664536, "comment_id": 72454352, "body": "What is your question? What is your sample code supposed to do? Please go to <a href=\"http://stackoverflow.com/help/how-to-ask\">the how to ask page</a> to see how to ask a question"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488955285, "post_id": 42664536, "comment_id": 72454444, "body": "I think the OP is asking how to return multiple values. (Note that <code>return(crossSum, crossLow, crossHigh);</code>.)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488955342, "post_id": 42664536, "comment_id": 72454479, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2620146/how-do-i-return-multiple-values-from-a-function-in-c\">How do I return multiple values from a function in C?</a>"}, {"owner": {"reputation": 1, "user_id": 5357085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f3932b2d28ceaf80ca02372647b1b5?s=128&d=identicon&r=PG&f=1", "display_name": "heretolearn", "link": "https://stackoverflow.com/users/5357085/heretolearn"}, "edited": false, "score": 0, "creation_date": 1488958742, "post_id": 42664536, "comment_id": 72456220, "body": "updated with an attempt"}], "owner": {"reputation": 1, "user_id": 5357085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f3932b2d28ceaf80ca02372647b1b5?s=128&d=identicon&r=PG&f=1", "display_name": "heretolearn", "link": "https://stackoverflow.com/users/5357085/heretolearn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488958589, "creation_date": 1488954965, "last_edit_date": 1488958589, "question_id": 42664536, "link": "https://stackoverflow.com/questions/42664536/i-am-having-issues-understanding-how-to-pass-multiple-values-using-structures-in", "title": "I am having issues understanding how to pass multiple values using structures in C", "body": "<pre><code>struct Tuple {\n    int crossSum;\n    int crossLow;\n    int crossHigh;\n};\n\nstruct Tuple findmaxcrossingsubarray(int A[], int low, int mid, int high){\n\nint leftSum = -INFINITY;\nint sum = 0;\nint i;\nint j;\n\nint *crossLow;\nint *crossHigh;\nint *crossSum;\n\nfor ( j = mid; j == low; j--) {\n  sum = sum + A[j];\n  if (sum &gt; leftSum)\n      leftSum = sum;\n      crossLow = &amp;j;   //THIS COULD BE WRONG\n}\n\nint rightSum = -INFINITY;\nsum = 0;\n\nfor (i = mid + 1; i == high ; i++) {\n  sum = sum + A[j];\n  if (sum &gt; rightSum)\n      rightSum = sum;\n      crossHigh= &amp;i;\n}\n    crossSum = crossLow + crossHigh;\n}\n\nvoid foo() {\n  struct Tuple t = findmaxcrossingsubarray();\n}\n</code></pre>\n\n<p>This is my function I need to pass crossSum, crossLow, and crossHigh to main where my other functions are.  This is an issue for all my functions.  I've seen how to do it but not with variables that are being used in loop statements.</p>\n\n<p>I need to pass crossSum. crossLow, and crossHigh into my main function </p>\n\n<p>Thanks for your time</p>\n\n<p>Ryan </p>\n"}, {"tags": ["c", "arrays", "function", "return", "factorial"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488950835, "post_id": 42663578, "comment_id": 72452735, "body": "You need <code>printf(&quot;%d\\n&quot;, nCr);</code> after <code>nCr=combination (k, n);</code>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1488954993, "post_id": 42663578, "comment_id": 72454293, "body": "Your functions <code>faktorial</code>, <code>facktorial</code>, and <code>factorial</code> differ only in names. Why do you need three of them???"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488955584, "post_id": 42663578, "comment_id": 72454592, "body": "<code>nfa=factorial(n); kfa=faktorial(k); nkfa=facktorial(k,n);</code> better written as <code>nfa=factorial(n); kfa=factorial(k); nkfa=factorial(n-k);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "is_accepted": false, "score": 2, "last_activity_date": 1488951149, "last_edit_date": 1488951149, "creation_date": 1488950848, "answer_id": 42663639, "question_id": 42663578, "link": "https://stackoverflow.com/questions/42663578/c-calculating-factorials-using-functions/42663639#42663639", "title": "C calculating factorials using functions", "body": "<p>You just need to output the result when it is returned:</p>\n\n<pre><code>printf(\"%d\\n\", nCr);\nreturn 0;\n</code></pre>\n\n<p>Another issue, your program will crash if the input is 0 or a number greater than 10, it is better not to use an array to computer factorial.</p>\n"}], "owner": {"reputation": 77, "user_id": 7431345, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051568748304209/picture?type=large", "display_name": "Han Sen", "link": "https://stackoverflow.com/users/7431345/han-sen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1488967986, "answer_count": 1, "score": 0, "last_activity_date": 1488951149, "creation_date": 1488950585, "last_edit_date": 1488950957, "question_id": 42663578, "link": "https://stackoverflow.com/questions/42663578/c-calculating-factorials-using-functions", "closed_reason": "Not suitable for this site", "title": "C calculating factorials using functions", "body": "<p>So i tried to code a function to output nCr (the combinations of choosing k elements from n elements) but it does not show any output...\nI think I am unable to call the function correctly but I think my syntax is correct:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint factorial( int n)\n{\n    int i, nff, nf[10];\n    for(i=0;i&lt;n;i++)\n        nf[i]=(n-i);\n\n    for(i=0;i&lt;n-1;i++)\n       nf[i+1]*=nf[i];\n\n    nff=nf[n-1]; \n    return nff;\n}\n\nint faktorial( int k){\n    int i, kff, kf[10];\n    for(i=0;i&lt;k;i++)\n        kf[i]=(k-i);\n\n    for(i=0;i&lt;k-1;i++)\n       kf[i+1]*=kf[i];\n\n    kff=kf[k-1]; \n    return kff;   \n}\n\nint facktorial( int k, int n){\n    int i, nkff, nkf[10];\n    for(i=0;i&lt;(n-k);i++)\n        nkf[i]=(n-k)-i;\n\n    for(i=0;i&lt;(n-k)-1;i++)\n       nkf[i+1]*=nkf[i];\n\n    nkff=nkf[(n-k)-1]; \n    return nkff; \n}\n\nint combination( int k, int n)\n{\n    // this function shall call (make use of) another function factorial()\n    int nfa,kfa,nkfa,nCra;\n    nfa=factorial(n);\n    kfa=faktorial(k);\n    nkfa=facktorial(k,n);\n    nCra = nfa/(kfa*nkfa);\n    return nCra;\n}\n\nint main(void)\n{\n    int n, k, nCr;\n\n    scanf(\"%d %d\", &amp;n, &amp;k);\n    nCr=combination (k, n);\n\n    return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "gcc", "c99"], "comments": [{"owner": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1488950119, "post_id": 42663456, "comment_id": 72452490, "body": "Have you read through <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"nofollow noreferrer\">GCC&#39;s Warnings documentation</a>?"}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "reply_to_user": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1488950385, "post_id": 42663456, "comment_id": 72452580, "body": "@GabrieleB-David Yup."}, {"owner": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1488950691, "post_id": 42663456, "comment_id": 72452696, "body": "have you tried using the -Wall flag during compilation and see if it catches that?"}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "reply_to_user": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1488950856, "post_id": 42663456, "comment_id": 72452744, "body": "@GabrieleB-David Yes, I have. I always use both <code>-Wall</code> and <code>-Wextra</code> for my own programs (with <code>-Wno-unused-function</code> because that&#39;s just too annoying)."}, {"owner": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1488951066, "post_id": 42663456, "comment_id": 72452813, "body": "As far as I know, the only flag that has to do with pointer casting is <code>-Wint-to-pointer-cast</code> (which is on by default)."}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "reply_to_user": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 1, "creation_date": 1488951509, "post_id": 42663456, "comment_id": 72452944, "body": "@GabrieleB-David I guess the obvious workaround is <code>typedef { } opaque_t</code> and use <code>opaque_t*</code> everywhere instead of <code>void*</code> but I will leave this open if someone has a better idea or knows of a non-<code>gcc</code> linter that can do this check."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 2, "creation_date": 1488953711, "post_id": 42663456, "comment_id": 72453761, "body": "@GabrieleB-David: <code>void *</code> can be assiggned to any other pointer type in C. OP asks about warning for a legal expression whihc does not make sense."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1488953879, "post_id": 42663456, "comment_id": 72453839, "body": "@DepressedDaniel: That would violate the effective type rule, thus invoke UB. Just introduce a coding style guide and tgrust your peers. There are enouigh other things in C you can shoot your feet, arms and head. If you already have a problem with that, you should think about using a strongly typed language. Ada comes into mind, or Python (whereas from your question I suspect a dynamically typed language would be a problem of coding discipline, too)."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1488955029, "post_id": 42663456, "comment_id": 72454317, "body": "<code>-Wc++-compat</code>, but it will also add a number of other warnings."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1488960230, "post_id": 42663456, "comment_id": 72456978, "body": "There isn&#39;t a clean solution for this. I suggest you stop using void*, and the problem disappears."}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1488960283, "post_id": 42663456, "comment_id": 72457015, "body": "@2501 So what should I use for pointers where I don&#39;t know the exact type?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1488960330, "post_id": 42663456, "comment_id": 72457036, "body": "@DepressedDaniel Can you describe a scenario where you don&#39;t know the types of the objects you&#39;re defining?"}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1488960430, "post_id": 42663456, "comment_id": 72457091, "body": "@2501 When something has to work for arbitrary types, consider, e.g., <code>qsort</code>."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1488960574, "post_id": 42663456, "comment_id": 72457179, "body": "@DepressedDaniel But you know the types in that case. It is just that the information is lost when you pass then to qsort. And at that point you shouldn&#39;t care anymore since qsort doesn&#39;t return anything."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1488960700, "post_id": 42663456, "comment_id": 72457236, "body": "If those predefined functions, where you&#39;re unable to change their type, are the problem, then define function wrappers, with a proper type, which will give out a warning."}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1488991470, "post_id": 42663456, "comment_id": 72478699, "body": "@2501 Alright, instead of <code>qsort</code>, consider <code>bsearch</code> ... and defining function wrappers for everything is a lot more overkill than adding a few explicit casts where necessary."}], "answers": [{"comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1488978930, "post_id": 42668680, "comment_id": 72469355, "body": "Er, you do realize that when things are illegal, compilers try to report errors, and warnings are usually about things that are legal (but suspicious)? Being a &quot;required part of C&quot; is not an argument not to warn. Being a best-practice / common idiom is a better reason."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1488979770, "post_id": 42668680, "comment_id": 72469927, "body": "@MarcGlisse In C it is not only perfectly acceptable to assign a <code>void *</code> pointer <i>without a cast</i>, it&#39;s actually preferable in many ways. The <a href=\"http://stackoverflow.com/a/605858/4756299\">highest ranked answer</a> on <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">the fourth-highest ranked question on all of Stackoverflow</a> specifically states to assign <code>void *</code> to specific pointer types <i>without a cast</i>.  Casting <code>void *</code> is <b>not</b> a &quot;best practice&quot; in C, and there are significant arguments for not casting. Again, it&#39;s like asking for a warning on <code>int x = 5;</code>."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1488980611, "post_id": 42668680, "comment_id": 72470499, "body": "I agree that warning on this would be wrong. What I said is that &quot;a required part of C&quot; is the wrong argument, what you just wrote in the comment is a much stronger argument."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1488983120, "post_id": 42668680, "comment_id": 72472327, "body": "@MarcGlisse My point in saying &quot;a required part of C&quot; is that a warning would be absurd on code where the syntax is literally <i>required</i> to be supported by the language standard. In this case it&#39;s the assignment of a <code>void *</code> without a cast to a specific type of pointer. 6.3.2.3 requires that such an assignment can be done in C without a cast."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1488986378, "post_id": 42668680, "comment_id": 72474788, "body": "The semantics of <code>a&amp;&amp;b||c</code> are a required part of C and gcc still warns about missing parentheses. Unused variables are a required part of C and gcc still warns. etc. In first approximation: illegal -&gt; error, legal (but questionable) -&gt; warning."}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1488990833, "post_id": 42668680, "comment_id": 72478210, "body": "@AndrewHenle -1 I don&#39;t usually like to be negative but such a warning has clear upsides - the reason I asked this question is because I had just finished spending time debugging a program where the exact problem was that a <code>void*</code> was silently cast to a different type without actually being of that type. Since there are pros and cons either way, the choice should rest with the programmer as which kind of error is more likely ultimately depends on the characteristics of the program&#39;s design. And as to the argument that it&#39;s a required standard - well, so is <code>gets</code>. Nuff said."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1488997521, "post_id": 42668680, "comment_id": 72482384, "body": "@DepressedDaniel <i>-1 I don&#39;t usually like to be negative but such a warning has clear upsides</i>  The C language mandates that <code>void *</code> can be assigned to any type of pointer.  The fact that a programmer <i>put an incorrect cast in place</i> is not the fault of the language - and the cast would have eliminated any warning anyway.  Ever hear the phrase <a href=\"https://en.wiktionary.org/wiki/a_bad_workman_always_blames_his_tools\" rel=\"nofollow noreferrer\">&quot;a bad workman always blames his tools&quot;?</a>  If C is the wrong tool for you to use - as stated in the comments - <b>don&#39;t use it</b>."}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1489006432, "post_id": 42668680, "comment_id": 72487502, "body": "@AndrewHenle You&#39;re not on point with your logic. The problem was not that a programmer <i>put an incorrect cast in place</i>. There was no cast at all. <code>foo* f; bar* b; void* x; x = f; b = x;</code> succeeds without any cast and that is a Bad Thing."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1489018787, "post_id": 42668680, "comment_id": 72492859, "body": "@DepressedDaniel <i>You&#39;re not on point with your logic. The problem was not that a programmer put an incorrect cast in place. There was no cast at all. <code>foo* f; bar* b; void* x; x = f; b = x;</code> succeeds without any cast and that is a Bad Thing.</i>  That&#39;s <b><i>NOT</i></b> a &quot;bad thing&quot;, that&#39;s C:  <b>A pointer to <code>void</code> may be converted to or from a pointer to any object type.</b>  Again you&#39;re blaming the tool for doing <i>exactly</i> as the governing standard for that tool says it <i>must</i>, And a lot of other programmers believe it is <i>better</i> to assign a pointer to <code>void *</code> <i>without</i> a cast."}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1489019644, "post_id": 42668680, "comment_id": 72493104, "body": "@AndrewHenle This is turning into a bit of a flamewar. I&#39;m not blaming the tool, in fact I&#39;m happy with <code>gcc</code> since it can actually do the check, and it now enabled in my build. There is a strong technical reason not to want to allow silent conversion of <code>void*</code> to any other pointer type - while on the other side the best arguments are &quot;that&#39;s the standard&quot; and &quot;other people think it&#39;s better [for no articulable reason]&quot;. Come on."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "reply_to_user": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1489042456, "post_id": 42668680, "comment_id": 72500153, "body": "@DepressedDaniel why are you using void* at all? The main point of void* is the implicit conversions. Otherwise, you could just use char*."}, {"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1489042799, "post_id": 42668680, "comment_id": 72500325, "body": "@MarcGlisse Well for arbitrary binary data I don&#39;t think <code>char*</code> is advisable since it can end up fed into the <code>str*</code> functions that operate on null-terminated strings. Really I&#39;m quite happy with the <code>-Wc++-compat</code> solution it gives me the right kind of safety net from the type system."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1489056930, "post_id": 42668680, "comment_id": 72509140, "body": "@DepressedDaniel <i>I&#39;m not blaming the tool</i> yet <i>while on the other side the best arguments are &quot;that&#39;s the standard&quot;</i>?!? The C Standard specifies how this tool must behave to be standard C. Yet you don&#39;t like that behavior and want something different? How is that not blaming the tool? So you spent time fixing a bug <i>where the exact problem was that a <code>void*</code> was silently cast to a different type</i>?  Well, C is an unforgiving tool when the programmer <i>loses track of what he&#39;s working with</i>. Seems like you want a more forgiving tool, which has already been noted. You seem to <i>want</i> not-quite-C."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1488968594, "creation_date": 1488968594, "answer_id": 42668680, "question_id": 42663456, "link": "https://stackoverflow.com/questions/42663456/can-gcc-warn-on-assignment-of-void-pointer-to-more-specific-pointer/42668680#42668680", "title": "can gcc warn on assignment of void pointer to more specific pointer?", "body": "<blockquote>\n  <p>How can I make <code>gcc</code> warn when a <code>void*</code> is assigned or passed as a\n  parameter to a type that is a more specific kind of pointer</p>\n</blockquote>\n\n<p>Being able to assign a <code>void *</code> to a more-specific type without a cast is a <em>required</em> part of the C programming language.  Per Paragraph 1 of <strong>6.3.2.3  Pointers</strong> of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">the C Standard</a>:</p>\n\n<blockquote>\n  <p><strong>A pointer to <code>void</code> may be converted to or from a pointer to any\n  object type.</strong>  A pointer to any object  type  may  be  converted  to  a\n  pointer  to <code>void</code> and  back  again;  the  result  shall compare equal\n  to the original pointer.</p>\n</blockquote>\n\n<p>You're asking to be warned about a required part of C.  It's not far removed from asking for a warning when <code>5</code> is assigned to an <code>int</code>.</p>\n\n<p>As noted by @MarcGlisse, though, <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.2.0/gcc/Warning-Options.html#Warning-Options\" rel=\"nofollow noreferrer\">GCC does provide the <code>-Wc++-compat</code> warning option</a>:</p>\n\n<blockquote>\n  <p><code>-Wc++-compat</code> (C and Objective-C only)</p>\n  \n  <p>Warn about ISO C constructs that are outside of the common subset of ISO C and ISO C++, e.g. request for implicit conversion from <code>void *</code> to a pointer to non-<code>void</code> type.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "is_accepted": false, "score": -1, "last_activity_date": 1489008324, "last_edit_date": 1489008324, "creation_date": 1488991381, "answer_id": 42677021, "question_id": 42663456, "link": "https://stackoverflow.com/questions/42663456/can-gcc-warn-on-assignment-of-void-pointer-to-more-specific-pointer/42677021#42677021", "title": "can gcc warn on assignment of void pointer to more specific pointer?", "body": "<p>As noted by @MarcGlisse, <code>gcc</code> provides the <code>-Wc++-compat</code> warning option. Among other non-<code>C++</code>-compatible constructs, it warns about silent conversion of <code>void*</code>.</p>\n\n<p>@AndrewHenle linked to an answer to another question which indicates that requiring an explicit cast has the downside of increasing the likelihood that incompatible conversion may result, for example, if the programmer accidentally casts a numeric value.</p>\n\n<p>I think that's significantly less of a concern, since by an explicit cast the programmer certifies that they know what they're doing. Neverthless, even that small drawback can be addressed by using the following macro in conjunction with <code>-Wc++-compat</code>:</p>\n\n<pre><code>#define VOID_CAST(T, x) ({ __typeof__(x) void_cast_x __attribute__((__unused__)) = ((__typeof__(x))((void*)(x))); ((T*)(x)); })\n</code></pre>\n\n<p>With luck, the \"useless\" assignment will be optimized out and the benefit of using <code>VOID_CAST</code> is that it will generate an error or warning if <code>x</code> is not a <code>void*</code> to begin with.</p>\n"}], "owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 420, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1489008324, "creation_date": 1488949860, "last_edit_date": 1489006603, "question_id": 42663456, "link": "https://stackoverflow.com/questions/42663456/can-gcc-warn-on-assignment-of-void-pointer-to-more-specific-pointer", "title": "can gcc warn on assignment of void pointer to more specific pointer?", "body": "<p>How can I make <code>gcc</code> warn when a <code>void*</code> is assigned or passed as a parameter to a type that is a more specific kind of pointer, like <code>my_struct*</code> without a cast? I would like to make sure all casting is explicit.</p>\n\n<p><strong>Update</strong>: The scope of this question has been extended to non-<code>gcc</code> linters as well.</p>\n\n<p><strong>Update2</strong>: Minuses everywhere? I'm flummoxed by the amount of controversy that a simple, purely technical question can generate.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 5, "creation_date": 1488945729, "post_id": 42662753, "comment_id": 72451135, "body": "Why not? The behavior is undefined anyway. Pointer arithmetic on a null pointer is illegal in C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488946263, "post_id": 42662753, "comment_id": 72451273, "body": "What do you expect? Why?"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1488946131, "post_id": 42662782, "comment_id": 72451232, "body": "Pointer to non-array object is defined to behave like a pointer to array of size 1 ... so I think your cases are limited to null and invalid pointers"}, {"owner": {"reputation": 19, "user_id": 7348886, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/72903ad487bb2a71a7895085203a4be5?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/7348886/charles"}, "edited": false, "score": 0, "creation_date": 1488946218, "post_id": 42662782, "comment_id": 72451261, "body": "&quot;This is pointer arithmetic: when you add a number x to a pointer to T, numeric value that corresponds to the pointer is increased by x * sizeof(T).&quot; I didn&#39;t notice this point before, thanks for your explain."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 19, "user_id": 7348886, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/72903ad487bb2a71a7895085203a4be5?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/7348886/charles"}, "edited": false, "score": 0, "creation_date": 1488946393, "post_id": 42662782, "comment_id": 72451306, "body": "@Charles Because this is UB, anything can happen. You happen to get <code>16</code>, but as well could your harddrive be formatted."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1488945788, "creation_date": 1488945788, "answer_id": 42662782, "question_id": 42662753, "link": "https://stackoverflow.com/questions/42662753/why-is-intint-0-4-16/42662782#42662782", "title": "Why is (int)((int *)0 + 4) == 16?", "body": "<p><strong>Important note:</strong> Pointer arithmetic on a pointer that does not point to an array is undefined behavior. You can get 16, but you can also get a crash, for example, if the implementation chooses to produce a trap representation for the result.</p>\n\n<p>This is pointer arithmetic: when you add a number <code>x</code> to a pointer to <code>T</code>, numeric value that corresponds to the pointer is increased by <code>x * sizeof(T)</code>.</p>\n\n<p>In your case, the numeric value of the pointer is zero, <code>x</code> is 4, and <code>sizeof(int)</code> is also 4. <code>4*4</code> yields 16.</p>\n"}, {"tags": [], "owner": {"reputation": 3416, "user_id": 2484972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea1c4b2c5aa3c7da2f2740bc1a643ee0?s=128&d=identicon&r=PG", "display_name": "Tatsuyuki Ishi", "link": "https://stackoverflow.com/users/2484972/tatsuyuki-ishi"}, "is_accepted": false, "score": 1, "last_activity_date": 1488945808, "creation_date": 1488945808, "answer_id": 42662791, "question_id": 42662753, "link": "https://stackoverflow.com/questions/42662753/why-is-intint-0-4-16/42662791#42662791", "title": "Why is (int)((int *)0 + 4) == 16?", "body": "<p>Pointer arithmetic in C use the type's size as an unit; adding 1 to int* will make it advance by 4 (assuming int is 32bit).</p>\n\n<p>EDIT: pointer arithmetic on invalid pointers (including NULL) is undefined behavior.</p>\n"}], "owner": {"reputation": 19, "user_id": 7348886, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/72903ad487bb2a71a7895085203a4be5?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/7348886/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 42662782, "answer_count": 2, "score": 0, "last_activity_date": 1488945808, "creation_date": 1488945574, "question_id": 42662753, "link": "https://stackoverflow.com/questions/42662753/why-is-intint-0-4-16", "title": "Why is (int)((int *)0 + 4) == 16?", "body": "<p>I have tested this, <code>k</code> is 16, but why?</p>\n\n<pre><code>int main(int argc, char **argv) {\n    int k = (int)((int *)0 + 4);\n    printf(\"%d\", k);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "openssl"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 7135684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82d718bbfddcd16a97a9021dfe58557f?s=128&d=identicon&r=PG&f=1", "display_name": "tianmt", "link": "https://stackoverflow.com/users/7135684/tianmt"}, "edited": false, "score": 0, "creation_date": 1489023161, "post_id": 42666983, "comment_id": 72494020, "body": "thanks, I modified the code in this way and it started working."}], "tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": true, "score": 18, "last_activity_date": 1488963783, "creation_date": 1488963783, "answer_id": 42666983, "question_id": 42662733, "link": "https://stackoverflow.com/questions/42662733/evp-md-ctx-error-storage-size-of-ctx-isn-t-known/42666983#42666983", "title": "EVP_MD_CTX &quot;error: storage size of \u2018ctx\u2019 isn\u2019t known&quot;", "body": "<p>You are using OpenSSL 1.1.0 which made this structure (and many others) opaque - which means you cannot stack allocate it. Instead do this:</p>\n\n<pre><code>EVP_MD_CTX *md_ctx;\n\nmd_ctx = EVP_MD_CTX_new();\nif (md_ctx == NULL)\n    ...\n...\nEVP_MD_CTX_free(md_ctx);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4939, "user_id": 2906820, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2d458add2417430233cc4877e80a01d5?s=128&d=identicon&r=PG&f=1", "display_name": "rodolk", "link": "https://stackoverflow.com/users/2906820/rodolk"}, "is_accepted": false, "score": 0, "last_activity_date": 1590780156, "creation_date": 1590780156, "answer_id": 62093274, "question_id": 42662733, "link": "https://stackoverflow.com/questions/42662733/evp-md-ctx-error-storage-size-of-ctx-isn-t-known/62093274#62093274", "title": "EVP_MD_CTX &quot;error: storage size of \u2018ctx\u2019 isn\u2019t known&quot;", "body": "<p>I had a similar error but with EVP_CIPHER_CTX</p>\n\n<pre><code>error: storage size of \u2018ctx\u2019 isn\u2019t known\n       EVP_CIPHER_CTX ctx;\n</code></pre>\n\n<p>I solved with this:</p>\n\n<pre><code>EVP_CIPHER_CTX *ctx;\nctx = EVP_CIPHER_CTX_new();\n</code></pre>\n\n<p>I hope this helps somebody with the same problem I had.</p>\n"}], "owner": {"reputation": 93, "user_id": 7135684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82d718bbfddcd16a97a9021dfe58557f?s=128&d=identicon&r=PG&f=1", "display_name": "tianmt", "link": "https://stackoverflow.com/users/7135684/tianmt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16195, "favorite_count": 2, "accepted_answer_id": 42666983, "answer_count": 2, "score": 9, "last_activity_date": 1590780156, "creation_date": 1488945432, "last_edit_date": 1557064701, "question_id": 42662733, "link": "https://stackoverflow.com/questions/42662733/evp-md-ctx-error-storage-size-of-ctx-isn-t-known", "title": "EVP_MD_CTX &quot;error: storage size of \u2018ctx\u2019 isn\u2019t known&quot;", "body": "<p>My system is Ubuntu16.04 LTS. when I use the OpenSSL <code>EVP_MD_CTX</code>, this error appeared. Can anyone help me?</p>\n\n<hr>\n\n<p><strong><em>CODE</em></strong>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/rsa.h&gt;\nint main()\n{\n    int ret,inlen,outlen=0;\n    unsigned long e=RSA_3;\n    char data[100],out[500];\n    EVP_MD_CTX md_ctx, md_ctx2;\n    ...\n}\n</code></pre>\n\n<p><strong><em>ERROR</em></strong>:</p>\n\n<pre><code>root@ubuntu:/work/test# gcc evp_openssl_test.c -I/usr/local/include -L/usr/local/lib -lssl -lcrypto -o\nevptestevp_openssl_test.c: In function \u2018main\u2019:\nevp_openssl_test.c:13:19: error: storage size of \u2018md_ctx\u2019 isn\u2019t known\n    EVP_MD_CTX md_ctx,md_ctx2;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1488945028, "post_id": 42662655, "comment_id": 72450923, "body": "You&#39;ll have to be more specific... did that error message pop up while you were having a coffee or what?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1488945170, "post_id": 42662655, "comment_id": 72450960, "body": "The code you pasted has non-printable characters at the end, <code>0x7D 0xEF 0xBB 0xBF</code>, if you are getting a compilation error then perhaps that is the problem"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1488945329, "post_id": 42662655, "comment_id": 72451010, "body": "Also using uninitialized variables. and <code>add</code> doesn&#39;t return value."}, {"owner": {"reputation": 1, "user_id": 7572884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d589ba8d66eda1b5210dc9756b315ed?s=128&d=identicon&r=PG&f=1", "display_name": "Noct", "link": "https://stackoverflow.com/users/7572884/noct"}, "edited": false, "score": 0, "creation_date": 1488945494, "post_id": 42662655, "comment_id": 72451062, "body": "this error appear while build solution...."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7572884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d589ba8d66eda1b5210dc9756b315ed?s=128&d=identicon&r=PG&f=1", "display_name": "Noct", "link": "https://stackoverflow.com/users/7572884/noct"}, "edited": false, "score": 0, "creation_date": 1488947192, "post_id": 42662888, "comment_id": 72451541, "body": "Hi , after i edit it still appear the same error.."}, {"owner": {"reputation": 269, "user_id": 7671689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a0467ea86d277101daee12341325706?s=128&d=identicon&r=PG&f=1", "display_name": "Sweta Parmar", "link": "https://stackoverflow.com/users/7671689/sweta-parmar"}, "reply_to_user": {"reputation": 1, "user_id": 7572884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d589ba8d66eda1b5210dc9756b315ed?s=128&d=identicon&r=PG&f=1", "display_name": "Noct", "link": "https://stackoverflow.com/users/7572884/noct"}, "edited": false, "score": 0, "creation_date": 1488947278, "post_id": 42662888, "comment_id": 72451563, "body": "make void main() instead of int main()"}, {"owner": {"reputation": 269, "user_id": 7671689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a0467ea86d277101daee12341325706?s=128&d=identicon&r=PG&f=1", "display_name": "Sweta Parmar", "link": "https://stackoverflow.com/users/7671689/sweta-parmar"}, "reply_to_user": {"reputation": 1, "user_id": 7572884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d589ba8d66eda1b5210dc9756b315ed?s=128&d=identicon&r=PG&f=1", "display_name": "Noct", "link": "https://stackoverflow.com/users/7572884/noct"}, "edited": false, "score": 0, "creation_date": 1488947624, "post_id": 42662888, "comment_id": 72451661, "body": "replace your code with the code i just pisted"}, {"owner": {"reputation": 1, "user_id": 7572884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d589ba8d66eda1b5210dc9756b315ed?s=128&d=identicon&r=PG&f=1", "display_name": "Noct", "link": "https://stackoverflow.com/users/7572884/noct"}, "edited": false, "score": 0, "creation_date": 1488948443, "post_id": 42662888, "comment_id": 72451904, "body": "Thanks you ..... :)"}, {"owner": {"reputation": 269, "user_id": 7671689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a0467ea86d277101daee12341325706?s=128&d=identicon&r=PG&f=1", "display_name": "Sweta Parmar", "link": "https://stackoverflow.com/users/7671689/sweta-parmar"}, "reply_to_user": {"reputation": 1, "user_id": 7572884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d589ba8d66eda1b5210dc9756b315ed?s=128&d=identicon&r=PG&f=1", "display_name": "Noct", "link": "https://stackoverflow.com/users/7572884/noct"}, "edited": false, "score": 0, "creation_date": 1488949637, "post_id": 42662888, "comment_id": 72452310, "body": "your welcome :)"}], "tags": [], "owner": {"reputation": 269, "user_id": 7671689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a0467ea86d277101daee12341325706?s=128&d=identicon&r=PG&f=1", "display_name": "Sweta Parmar", "link": "https://stackoverflow.com/users/7671689/sweta-parmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1488947561, "last_edit_date": 1488947561, "creation_date": 1488946417, "answer_id": 42662888, "question_id": 42662655, "link": "https://stackoverflow.com/questions/42662655/unexpected-end-of-file-found-error-in-c-programming/42662888#42662888", "title": "Unexpected end-of-file found error in C programming", "body": "<pre><code>   int main() {\n   int num1, num2, ans;\n\n   printf(\"Enter the two numbers : \");\n   scanf(\"%d %d\", &amp;num1, &amp;num2);\n\n   ans= sum(num1, num2);\n\n   printf(\"\\nAddition of two number is : \");\n   return (0);\n}\n\nint sum(int num1, int num2) {\n   int num3;\n   num3 = num1 + num2;\n   return (num3);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7572884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d589ba8d66eda1b5210dc9756b315ed?s=128&d=identicon&r=PG&f=1", "display_name": "Noct", "link": "https://stackoverflow.com/users/7572884/noct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1754, "favorite_count": 0, "closed_date": 1488973743, "accepted_answer_id": 42662888, "answer_count": 1, "score": -4, "last_activity_date": 1488947788, "creation_date": 1488944957, "last_edit_date": 1488945674, "question_id": 42662655, "link": "https://stackoverflow.com/questions/42662655/unexpected-end-of-file-found-error-in-c-programming", "closed_reason": "Not suitable for this site", "title": "Unexpected end-of-file found error in C programming", "body": "<p>Hi guys i have been check for my code many many times but i still confuse where is this error come from....\nThis error appear while build solution...</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\n int add(int a, int b);\n\n int main()\n{\nint num1, num2, ans;\nprintf(\"Please Enter the two numbers :%d %d\", num1, num2);\n\nscanf_s(\"%d %d\", &amp;num1, &amp;num2);\n\nans = add(num1, num2);\n\nreturn 0;\n}\n\nint add(int a, int b)\n{\nint sum = a + b;\nprintf(\"\\nSummition is = %d\", sum);\n}\n</code></pre>\n\n<p>Unexpected end-of-file found error</p>\n"}, {"tags": ["c", "linux", "exit"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1488945551, "post_id": 42662653, "comment_id": 72451079, "body": "Reading the <a href=\"https://linux.die.net/man/2/wait\" rel=\"nofollow noreferrer\">man page</a> carefully usually helps: &quot;If status is not NULL, wait() and waitpid() store status information in the int to which it points. <b>This integer can be inspected with the following macros</b>&quot;. That is, wait does not give you the exit status value directly."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1488945636, "post_id": 42662653, "comment_id": 72451101, "body": "<code>wait()</code> is storing termination information into <code>s</code> when you pass the address. One of the pieces of that information is the exit status (if it terminated normally). Another piece is how it was terminated, for example if it terminated normally via <code>exit()</code>, or if it was terminated by receipt of a signal. You have to use macros like <code>WIFEXITED()</code> and <code>WEXITSTATUS()</code> to interpret this information, it&#39;s not usually useful to examine the value directly."}, {"owner": {"reputation": 38, "user_id": 5364050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/243590392e8efbe54704424d4855e439?s=128&d=identicon&r=PG&f=1", "display_name": "amzshow", "link": "https://stackoverflow.com/users/5364050/amzshow"}, "edited": false, "score": 0, "creation_date": 1488946353, "post_id": 42662653, "comment_id": 72451295, "body": "Buy why 256, what does 256 signify or imply? and if it is storing information about termination, then why does it multiply with the previous value of S?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488946650, "post_id": 42662653, "comment_id": 72451380, "body": "This code will do nothing, because it does not even compile. Why don&#39;t you ask whoever you got it from ?"}, {"owner": {"reputation": 38, "user_id": 5364050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/243590392e8efbe54704424d4855e439?s=128&d=identicon&r=PG&f=1", "display_name": "amzshow", "link": "https://stackoverflow.com/users/5364050/amzshow"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488947059, "post_id": 42662653, "comment_id": 72451506, "body": "@Olaf its just missing some headers, that&#39;s about it.  #include &lt;stdio.h&gt; #include&lt;unistd.h&gt; #include&lt;stdlib.h&gt; #include&lt;sys/types.h&gt;"}, {"owner": {"reputation": 38, "user_id": 5364050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/243590392e8efbe54704424d4855e439?s=128&d=identicon&r=PG&f=1", "display_name": "amzshow", "link": "https://stackoverflow.com/users/5364050/amzshow"}, "edited": false, "score": 0, "creation_date": 1488947709, "post_id": 42662653, "comment_id": 72451698, "body": "OK I have understood why it gives us 256: The exit code is a 16 bit value and the higher 8 bits are returned from exit() and the lower half are zeros when the process terminates normally, I still don&#39;t get why it multiplies the value of the integer S in my code with 256..."}], "owner": {"reputation": 38, "user_id": 5364050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/243590392e8efbe54704424d4855e439?s=128&d=identicon&r=PG&f=1", "display_name": "amzshow", "link": "https://stackoverflow.com/users/5364050/amzshow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488948408, "creation_date": 1488944952, "question_id": 42662653, "link": "https://stackoverflow.com/questions/42662653/regarding-wait-in-linux-c-programming", "title": "Regarding wait in Linux C programming", "body": "<p>I was given this code to run on Linux and its output was </p>\n\n<pre><code> S=512 P=0\n</code></pre>\n\n<p>I didn't understand why when we passed the memory address of the variable S to exit, it became a multiple of 256*S. </p>\n\n<p>A few experiments I tried: I set S=1 and the output was 256, I entered S=256, the output was S=0 and when I entered S=-1, the output was 256*255</p>\n\n<p>Note: I am used to C++ and haven't used C much.</p>\n\n<pre><code> int s=2, p=fork();\n\n  if (p) {\n\n    p -= wait(&amp;s);\n\n        printf(\"s=%d p=%d\\n\", s, p);\n\n  }\n\n  else\n\n        exit(s);\n</code></pre>\n"}, {"tags": ["c", "string", "pointers", "memory-address"], "comments": [{"owner": {"reputation": 1543, "user_id": 6947337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf5002789a65c778f9f20c5bfa8efee?s=128&d=identicon&r=PG&f=1", "display_name": "rlee827", "link": "https://stackoverflow.com/users/6947337/rlee827"}, "edited": false, "score": 4, "creation_date": 1488944463, "post_id": 42662542, "comment_id": 72450729, "body": "I believe you meant <code>%c%s\\n</code>. Is this typo in your original code?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1488944558, "post_id": 42662542, "comment_id": 72450768, "body": "The argument to <code>%s</code> is a pointer to the first character of a string.  The address of S1[1] is exactly that."}], "answers": [{"tags": [], "owner": {"reputation": 687, "user_id": 940510, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dca6fa99c5facfb4981bb78550641c83?s=128&d=identicon&r=PG", "display_name": "Bishal", "link": "https://stackoverflow.com/users/940510/bishal"}, "is_accepted": false, "score": 4, "last_activity_date": 1488944915, "creation_date": 1488944915, "answer_id": 42662645, "question_id": 42662542, "link": "https://stackoverflow.com/questions/42662542/c-passing-a-char-to-a-s-in-a-printf-statement/42662645#42662645", "title": "C: Passing a char* to a %s in a printf statement", "body": "<p><code>printf(\"%c%s\\n\", toupper(S1[0]), &amp;S1[1]);</code></p>\n\n<p>Let's break that down</p>\n\n<p><code>%c</code> and the corresponding <code>S1[0]</code> print the uppercased first character of S1. (J)</p>\n\n<p><code>%s</code> and corresponding <code>&amp;S1[1]</code> prints the remainder of the string. (ack)</p>\n\n<p><code>&amp;S1[1]</code> is passing the memory address of the second character of the string.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1488945431, "post_id": 42662661, "comment_id": 72451040, "body": "<code>&#39;\\0&#39;</code> is always the end of a string. That&#39;s the definition of &quot;string&quot;"}], "tags": [], "owner": {"reputation": 31, "user_id": 7669568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c05e6d0a339948c36cbfc1a23547a97?s=128&d=identicon&r=PG&f=1", "display_name": "Jing", "link": "https://stackoverflow.com/users/7669568/jing"}, "is_accepted": false, "score": 3, "last_activity_date": 1488945621, "last_edit_date": 1488945621, "creation_date": 1488944985, "answer_id": 42662661, "question_id": 42662542, "link": "https://stackoverflow.com/questions/42662542/c-passing-a-char-to-a-s-in-a-printf-statement/42662661#42662661", "title": "C: Passing a char* to a %s in a printf statement", "body": "<p>&amp;S1[1] is an address, which points to 'a' of 'jack'. so %s means to show a string from 'a'  of 'jack' to the end. usually '\\0' is the end of a string. that means '%s' prints 'ack' of 'jack'. '%c' prints one character, that is J. toupper()  just changes one character.</p>\n"}], "owner": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488945621, "creation_date": 1488944342, "question_id": 42662542, "link": "https://stackoverflow.com/questions/42662542/c-passing-a-char-to-a-s-in-a-printf-statement", "title": "C: Passing a char* to a %s in a printf statement", "body": "<p>I'm studying for a midterm and am having some trouble understanding a concept. Here's the question:</p>\n\n<p>What is the output of the following lines of code:</p>\n\n<pre><code>char S1[50] = \"jack\", S2[50] = \"jill\", S3[50], *Sptr;\n\nprintf(\"%c$s\\n\", toupper(S1[0]), &amp;S1[1]);\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>Jack\n</code></pre>\n\n<p>I don't understand, why it's printing  \"Jack\". %s is supposed to print a string, right? Is &amp;S1[1] a string? I thought it was the address of S1[1]. Is that not the case?</p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["c", "unix", "makefile", "gnu-make", "gnu"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5610750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/346cf3f4f16f6fa6141f9a44bc62a31e?s=128&d=identicon&r=PG&f=1", "display_name": "J.S. M", "link": "https://stackoverflow.com/users/5610750/j-s-m"}, "edited": false, "score": 0, "creation_date": 1488990217, "post_id": 42664245, "comment_id": 72477742, "body": "Just want to clarify, the &quot;$(patsubst %, test@%, $(PROGS)): test@%: %&quot; means for every target produced by the pattern, each target (test@%) requires (%). So the second colon indicates a dependency, but what does the first colon formally meant (named?) Is there a source that you can direct me to? This is the first time of me seeing two colons. Thank you very much."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 13, "user_id": 5610750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/346cf3f4f16f6fa6141f9a44bc62a31e?s=128&d=identicon&r=PG&f=1", "display_name": "J.S. M", "link": "https://stackoverflow.com/users/5610750/j-s-m"}, "edited": false, "score": 0, "creation_date": 1488994629, "post_id": 42664245, "comment_id": 72480683, "body": "@J.S.M: It is <code>targets: target-pattern: prerequisite-pattern</code>, as described in the <a href=\"https://www.gnu.org/software/make/manual/make.html#Static-Usage\" rel=\"nofollow noreferrer\">GNU make documentation</a>. Whenever I write Makefiles, I do keep a browser window open to the <a href=\"https://www.gnu.org/software/make/manual/make.html\" rel=\"nofollow noreferrer\">single-page version of GNU make documentation</a>."}, {"owner": {"reputation": 13, "user_id": 5610750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/346cf3f4f16f6fa6141f9a44bc62a31e?s=128&d=identicon&r=PG&f=1", "display_name": "J.S. M", "link": "https://stackoverflow.com/users/5610750/j-s-m"}, "edited": false, "score": 0, "creation_date": 1488995510, "post_id": 42664245, "comment_id": 72481260, "body": "Thank you very much for the inputs"}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 1, "last_activity_date": 1488953818, "creation_date": 1488953818, "answer_id": 42664245, "question_id": 42662359, "link": "https://stackoverflow.com/questions/42662359/how-to-build-multiple-targets-with-similar-name/42664245#42664245", "title": "How to build multiple targets with similar name?", "body": "<p>Use <code>$(ALL_PROG): %: %.c</code> instead of <code>$(ALL_PROG): $(SRC)</code>.</p>\n\n<hr>\n\n<p>Here is an example Makefile I might use with GNU <code>make</code>:</p>\n\n<pre><code>CC      := gcc\nCFLAGS  := -Wall -O2\nLDFLAGS := -lm\nPROGS   := $(patsubst %.c, %, $(wildcard *.c))\n\n.PHONY: all clean test $(patsubst %, test@%, $(PROGS))\n\nall: $(PROGS)\n\nclean:\n    rm -f $(PROGS)\n\n$(PROGS): %: %.c\n    $(CC) $(CFLAGS) $^ $(LDFLAGS) -o $@\n\n$(patsubst %, test@%, $(PROGS)): test@%: %\n    ./$^\n\ntest: $(patsubst %, test@%, $(PROGS))\n</code></pre>\n\n<p>As usual, note that the indentation should use a <kbd>Tab</kbd> rather than spaces; the editor used here on stackoverflow.com auto-converts them to spaces.</p>\n\n<p>The <code>PROGS</code> variable will contain the names of all <code>*.c</code> files in the directory.</p>\n\n<p>The <code>.PHONY:</code> directive tells Make which targets do not refer to actual files. The <code>$(patsubst %, test@%, $(PROGS))</code> expands to the list of executable names, with each name prepended with <code>test@</code>: if the directory contains files <code>foo.c</code> and <code>bar.c</code>, this expands to <code>test@foo test@bar</code>.</p>\n\n<p>The <code>$(PROGS): %: %.c</code> recipe compiles each .c file to the corresponding binary.</p>\n\n<p>The <code>$(patsubst %, test@%, $(PROGS)): test@%: %</code> recipe creates a test target for each binary. If we have files <code>foo.c</code> and <code>bar.c</code>, then this rule expands to <code>test@foo test@bar: test@%: %</code>. This means that for both <code>test@foo</code> and <code>test@bar</code> targets, the corresponding <code>test@%</code> target requires the <code>%</code> binary. The <code>./$^</code> in turn expands to <code>./%</code>, and thus the binary name. (If you don't want Make to show the command being run, use <code>@./$^</code>. If you don't care if a test fails, use <code>-./$^</code>.)</p>\n\n<p>The <code>test</code> recipe expands to <code>test@foo</code> <code>test@bar</code> if we have <code>foo.c</code> and <code>bar.c</code>; i.e. all possible test targets.</p>\n\n<p>You can run <code>make clean test</code> to recompile all .c files in the directory, and execute them.</p>\n\n<p>If you are only worried about a specific test program, say <code>foo.c</code>, you can run <code>make test@foo</code>, which will recompile the program if <code>foo.c</code> is newer than <code>foo</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5610750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/346cf3f4f16f6fa6141f9a44bc62a31e?s=128&d=identicon&r=PG&f=1", "display_name": "J.S. M", "link": "https://stackoverflow.com/users/5610750/j-s-m"}, "edited": false, "score": 0, "creation_date": 1488986715, "post_id": 42664268, "comment_id": 72475037, "body": "Thanks, this will be suitable for small number of tests; however, what I would like to do is to build a series of tests, say 20 and more. That&#39;s why, I want to know if there&#39;s a pattern rule that I can write to build more tests without having to write individual rules."}], "tags": [], "owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1488953906, "creation_date": 1488953906, "answer_id": 42664268, "question_id": 42662359, "link": "https://stackoverflow.com/questions/42662359/how-to-build-multiple-targets-with-similar-name/42664268#42664268", "title": "How to build multiple targets with similar name?", "body": "<p>You can do that. I am updating a simple make file which builds multiple targets. You can modify it as your requirement.</p>\n\n<pre><code>TEST1       = test1.exe\nTEST2       = test2.exe\n\n### Executable Program Files ###\n\nall : $(TEST1) $(TEST2)\n\n$(TEST1) : test1.c\n    gcc -o $(TEST1) test1.c \n\n$(TEST2) : test2.c\n    gcc -o $(TEST2) test2.c \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5610750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/346cf3f4f16f6fa6141f9a44bc62a31e?s=128&d=identicon&r=PG&f=1", "display_name": "J.S. M", "link": "https://stackoverflow.com/users/5610750/j-s-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 42664245, "answer_count": 2, "score": 1, "last_activity_date": 1488953906, "creation_date": 1488943165, "last_edit_date": 1495540436, "question_id": 42662359, "link": "https://stackoverflow.com/questions/42662359/how-to-build-multiple-targets-with-similar-name", "title": "How to build multiple targets with similar name?", "body": "<p>So I have the exact same question as the one below, but no one has answered it.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26479180/pattern-matching-makefile-with-multiple-executable-targets\">Pattern matching Makefile with multiple executable targets</a></p>\n\n<p>I am trying to build a series of small test files each have a pattern of \"test*.c\" to test my library.</p>\n\n<p>I wanted to write a makefile that builds executables for every one of the test files all at once (each name: test1, test2, test3..etc.). However, I am not sure how to achieve that.\nWhat I have so far is the following:</p>\n\n<pre><code>SRC := $(shell find *.c)\nALL_PROG := $(patsubst %.c, %, *.c)\n.PHONY: all\n\nall: $(ALL_PROG)\n\n$(ALL_PROG): $(SRC)\n    -gcc $&lt; -o $@\n</code></pre>\n\n<p>This is a bad attempt because the targets take all .c files as dependency, which caused circular dependency.</p>\n\n<p>Using shell script can get the job done very easily, but I am wondering if there's a way to do the same job.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 0, "creation_date": 1488942794, "post_id": 42662279, "comment_id": 72450286, "body": "...... have you tried?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1488942848, "post_id": 42662279, "comment_id": 72450298, "body": "No, you cannot assign one array to another. Instead, you must use a pointer."}], "answers": [{"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": true, "score": 2, "last_activity_date": 1488972777, "last_edit_date": 1488972777, "creation_date": 1488946042, "answer_id": 42662831, "question_id": 42662279, "link": "https://stackoverflow.com/questions/42662279/passing-arrays-to-function/42662831#42662831", "title": "Passing arrays to function", "body": "<p>In C, you cannot assign arrays to one another. Instead, you must use a pointer which points to the address of the first element in your array. Here is an example which shows this:</p>\n\n<pre><code>/* My array */\nint arr[] = {1, 2, 3, 4};\n\n/* pointer which points to the first element of arr[] */\nint *ptr = &amp;arr[0];\n\n/* prints out contents of pointer */\nfor (size_t i = 0; i &lt; sizeof arr / sizeof arr[0]; i++) {\n    printf(\"%d\\n\", ptr[i]);\n}\n\n/* Outputs: \n   1\n   2 \n   3\n   4\n*/\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7271389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217aa42dd9cf78d254d266354fc0865?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Bhuwalka", "link": "https://stackoverflow.com/users/7271389/piyush-bhuwalka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 42662831, "answer_count": 1, "score": -3, "last_activity_date": 1488972777, "creation_date": 1488942710, "last_edit_date": 1488942928, "question_id": 42662279, "link": "https://stackoverflow.com/questions/42662279/passing-arrays-to-function", "title": "Passing arrays to function", "body": "<pre><code>#include &lt;stdio.h&gt;\nfloat average(float age[]);\n\nint main()\u200b\n{\n    float avg, age[] = { 23.4, 55, 22.6, 3, 40.5, 18 };\n    avg = average(age); /* Only name of array is passed as       argument. */\n    printf(\"Average age=%.2f\", avg);\n    return 0;\n}\n\nfloat average(float age[])\n{\n    int i;\n    float avg, sum = 0.0;\n    for (i = 0; i &lt; 6; ++i)\n   {\n        sum += age[i];\n   }\navg = (sum / 6);\nreturn avg;\n}\n</code></pre>\n\n<p>If I follow the same convention ,\nWould it be correct to write </p>\n\n<pre><code>int main()\n{\n    int a[]={1,2,3};\n    int a1[]=a;\n    ....\n}\n</code></pre>\n\n<p>Can I assign the address of a into a1here</p>\n\n<p>Or would this be correct</p>\n\n<pre><code>int main()\n{\nint a[]={1,2,3};\nint a1[];\na1=a;\n...\n}\n</code></pre>\n\n<p>The second one is probably wrong since I have already created an array a1 with 0 space alloted</p>\n\n<p>If we can pass it to a function like that \nWhy can't we use it directly like in first case I gave</p>\n"}, {"tags": ["c", "hash", "integer"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1488942623, "post_id": 42662206, "comment_id": 72450240, "body": "treat your struct as a contiguous array of bytes and used Adler-32 or some other rolling checksum"}], "answers": [{"tags": [], "owner": {"reputation": 1216, "user_id": 2252948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb6114307bc12f710bf50ed7b929aa0?s=128&d=identicon&r=PG", "display_name": "AnthonyD973", "link": "https://stackoverflow.com/users/2252948/anthonyd973"}, "is_accepted": true, "score": 1, "last_activity_date": 1488945015, "creation_date": 1488945015, "answer_id": 42662666, "question_id": 42662206, "link": "https://stackoverflow.com/questions/42662206/c-hashing-struct-with-n-amount-of-unsigned-int-properties/42662666#42662666", "title": "C - Hashing Struct with n amount of unsigned int properties", "body": "<p>I think implicitly you are asking how it is possible to treat the entire object just like a long byte-stream, like @bruceg explained. If I'm wrong, then you might as well ignore this answer, because this is what I will address. Note that this solution does not apply merely for hashing, but for anything that requires you to treat data like bytes (such as copying from/writing to memory or files).</p>\n\n<p>I think what you are looking for is merely reading byte by byte. For this you can insipre yourself from <a href=\"http://www.cplusplus.com/reference/ostream/ostream/write/\" rel=\"nofollow noreferrer\"><code>std::ostream::write</code></a> (which is a C++ method though). For example, you could write <code>A_hash</code> in such a way that you could invoke it like this :</p>\n\n<pre><code>int hash = A_hash((char*)&amp;a, sizeof(a)); // where 'a' is of type 'struct A'.\n</code></pre>\n\n<p>You could write <code>A_hash</code>, for example, like this:</p>\n\n<pre><code>unsigned int A_hash(char* data, unsigned int dataSize)\n{\n    unsigned int hash = someValue;\n\n    for (unsigned int i = 0; i &lt; dataSize; ++i)\n    {\n        char byte = data[i];\n        doSomethingWith(hash);\n    }\n\n    return hash;\n\n}\n</code></pre>\n\n<p>The great advantage of this method is that you don't need to rewrite the function if you add/remove fields to your struct ; <code>sizeof(A)</code> will expand/reduce at compile-time. The other great advantage is that it works for any value, so you can reuse that function with any type you want, including <code>int</code>, another <code>struct</code>, an <code>enum</code>, a pointer, ...</p>\n"}], "owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 42662666, "answer_count": 1, "score": 1, "last_activity_date": 1488945015, "creation_date": 1488942297, "question_id": 42662206, "link": "https://stackoverflow.com/questions/42662206/c-hashing-struct-with-n-amount-of-unsigned-int-properties", "title": "C - Hashing Struct with n amount of unsigned int properties", "body": "<p>I have a struct:</p>\n\n<pre><code>struct A\n{\n    unsigned int a, b, c, d, ...    \n}\n</code></pre>\n\n<p>I want to make a function:</p>\n\n<pre><code>unsigned int A_hash(const A* const var)\n{\n\n    return ...  \n}\n</code></pre>\n\n<p>The number returned needs to be very very large as modulus for HashTable insertion will not work properly if <code>A_hash(var) &lt; myHashTable.capacity</code>.</p>\n\n<p>I've seen questions like this before like <em>\"Hash function that takes in two integers\", \"hash function that takes in five integers\", etc</em> but what about<code>n</code> integers? I'm looking for a more general algorithm for <em>decent</em> hashing. It doesn't need to be enterprise-level.</p>\n\n<p>I was thinking perhaps start with a massive number like</p>\n\n<p><code>return (0x7FFFFFFFF &amp; a) + (0x7FFFFFFFF &amp; b) + ...</code></p>\n\n<p>but I don't think this will be good enough. I also don't know how to stop the <code>A_hash</code> function from overflowing but that may be another problem all together.</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1488939409, "post_id": 42661626, "comment_id": 72449328, "body": "Are you sure that is your real and exact output? It seems too regular to be real and doesn&#39;t seem to match how your code as shown would behave."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1488940392, "post_id": 42661626, "comment_id": 72449626, "body": "That&#39;s better. The reason is because your assumptions are wrong. There is nothing in your code that guarantees thread 2 will execute immediately after thread 1 and so on. That is, you have mutual exclusion but you have no sequencing."}, {"owner": {"reputation": 31, "user_id": 5648454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce3c88665bcbda45acaf2b113db56808?s=128&d=identicon&r=PG&f=1", "display_name": "user456", "link": "https://stackoverflow.com/users/5648454/user456"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1488942302, "post_id": 42661626, "comment_id": 72450153, "body": "How can I do this?"}, {"owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "edited": false, "score": 0, "creation_date": 1488947179, "post_id": 42661626, "comment_id": 72451538, "body": "I&#39;ve had the same problem and apparently it&#39;s not possible to code a completely fair mutex system - see <a href=\"http://stackoverflow.com/questions/5385777/implementing-a-fifo-mutex-in-pthreads\" title=\"implementing a fifo mutex in pthreads\">stackoverflow.com/questions/5385777/&hellip;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2028, "user_id": 3435777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f1a766d687b55f0f8a9bd80ce02491?s=128&d=identicon&r=PG&f=1", "display_name": "zzn", "link": "https://stackoverflow.com/users/3435777/zzn"}, "is_accepted": false, "score": 0, "last_activity_date": 1488952436, "creation_date": 1488952436, "answer_id": 42663968, "question_id": 42661626, "link": "https://stackoverflow.com/questions/42661626/programming-thread/42663968#42663968", "title": "Programming thread", "body": "<p>in order to run sequentially from thread 1 to thread 5, you can use <code>conditional variable</code>(<code>pthread_cond_t</code>).  variable <code>current</code> to specify which thread can run. </p>\n\n<p>another obvious way to do the job, is using <code>pipe</code>. </p>\n\n<p>code below is using <code>conditional variable</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n#define NUM_THREADS 5\n\nint Next_ID = 1;\n\npthread_t threads[NUM_THREADS];\npthread_mutex_t mutex;\npthread_cond_t cond;\nint current;\n\ntypedef struct threadArgs {\n    int threadId;\n    int numOfCalls;\n} ThreadArgs;\n\nThreadArgs threadArgsArray[NUM_THREADS];\n\nvoid * printThread(void *pThreadArgs) {\n    ThreadArgs *threadArgs = (ThreadArgs *) pThreadArgs;\n    int *threadId = &amp;threadArgs-&gt;threadId;\n\n    for(int i = 0; i &lt; 20; i++) {\n        pthread_mutex_lock(&amp;mutex);\n        while (current+1!=*threadId){\n            pthread_cond_wait(&amp;cond, &amp;mutex);\n        }\n        if (Next_ID == *threadId) {\n            printf(\"My Turn: %d\\n\", *threadId);\n        } else {\n            printf(\"Not My Turn: %d\\n\", *threadId);\n        }\n\n        if (*threadId==5){\n            Next_ID++;\n            if (Next_ID==6){\n                Next_ID=1;\n            }\n        }\n        current=(current+1)%NUM_THREADS;\n        pthread_cond_broadcast(&amp;cond);\n        pthread_mutex_unlock(&amp;mutex);\n    }\n    pthread_exit(NULL);\n}\n\n\nvoid * printThread(void *);\n\nint main(int argc, char const *argv[]) {\n    pthread_attr_t attr;\n    void *status;\n\n    pthread_mutex_init(&amp;mutex, NULL);\n    pthread_cond_init(&amp;cond, NULL);\n    pthread_attr_init(&amp;attr);\n    pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);\n    current=0;\n    for (int i = 0; i &lt; NUM_THREADS; i++) {\n        threadArgsArray[i].threadId = i + 1;\n\n        int rc = pthread_create(&amp;threads[i], &amp;attr, printThread,\n                    &amp;threadArgsArray[i]);\n    }\n\n    for (int i = 0; i &lt; NUM_THREADS; i++) {\n        int rc = pthread_join(threads[i], &amp;status);\n    }\n\n    pthread_attr_destroy(&amp;attr);\n    pthread_mutex_destroy(&amp;mutex);\n\n    pthread_exit(NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5648454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce3c88665bcbda45acaf2b113db56808?s=128&d=identicon&r=PG&f=1", "display_name": "user456", "link": "https://stackoverflow.com/users/5648454/user456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488952436, "creation_date": 1488938234, "last_edit_date": 1488940475, "question_id": 42661626, "link": "https://stackoverflow.com/questions/42661626/programming-thread", "title": "Programming thread", "body": "<p>I created 5 threads in the program and assign ID 1,2,3,4,5 to them respectively. Each thread will try to access the Next_ID. When a thread acquires Next_ID it compares its ID with the Next_ID. If it matches I print my turn and others print not my turn. And increments Next_ID by 1. If Next_ID reaches 6 it resets back to 1. However my code prints the following:</p>\n\n<pre><code>My Turn: 1\nNot My Turn: 3\nMy Turn: 4\nMy Turn: 5\nNot My Turn: 2\nNot My Turn: 1\nNot My Turn: 3\nMy Turn: 4\nMy Turn: 5\nNot My Turn: 2\nNot My Turn: 1\nNot My Turn: 3\nMy Turn: 4\nMy Turn: 5\nNot My Turn: 2\nNot My Turn: 1\nNot My Turn: 3\nMy Turn: 4\nMy Turn: 5\nNot My Turn: 2\nNot My Turn: 1\nNot My Turn: 3\nMy Turn: 4\nMy Turn: 5\n</code></pre>\n\n<p>The expected output should be:</p>\n\n<pre><code>My Turn: 1\nnot my Turn: 2\nnot my Turn: 3\nnot my Turn: 4\nnot my Turn: 5\nnot my Turn: 1\nMy Turn: 2\nnot my Turn: 3\nnot my Turn: 4\nnot my Turn: 5\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n#define NUM_THREADS 5 \n\nint Next_ID = 1; \n\npthread_t threads[NUM_THREADS];\npthread_mutex_t mutex;\n\ntypedef struct threadArgs { \n    int threadId;\n    int numOfCalls;\n} ThreadArgs;\n\nThreadArgs threadArgsArray[NUM_THREADS]; \n\nvoid * printThread(void *pThreadArgs) {\n    ThreadArgs *threadArgs = (ThreadArgs *) pThreadArgs; \n    int *threadId = &amp;threadArgs-&gt;threadId; \n\n    for(int i = 0; i &lt; 20; i++) { \n        pthread_mutex_lock(&amp;mutex); \n        if (Next_ID == *threadID) {\n            printf(\"My Turn: %d\\n\", *threadId);\n        } else {\n            printf(\"Not My Turn: %d\\n\", *threadId);\n        }\n\n        Next_ID = (*threadId == 5) ? 1 : *threadId + 1;\n        pthread_mutex_unlock (&amp;mutex);\n    }\n    pthread_exit(NULL);\n}\n\n\nvoid * printThread(void *); \n\nint main(int argc, char const *argv[]) {\n    pthread_attr_t attr;\n    void *status;\n\n    pthread_mutex_init(&amp;mutex, NULL); \n    pthread_attr_init(&amp;attr); \n    pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);\n    for (int i = 0; i &lt; NUM_THREADS; i++) {\n        threadArgsArray[i].threadId = i + 1;\n\n        int rc = pthread_create(&amp;threads[i], &amp;attr, printThread,\n                                &amp;threadArgsArray[i]);\n    }\n\n    for (int i = 0; i &lt; NUM_THREADS; i++) {\n        int rc = pthread_join(threads[i], &amp;status);\n    }\n\n    pthread_attr_destroy(&amp;attr);\n    pthread_mutex_destroy(&amp;mutex);\n\n    pthread_exit(NULL);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 2, "creation_date": 1488938252, "post_id": 42661595, "comment_id": 72449023, "body": "No.  that is not correct.  wset-&gt;head is of type WordNode*, not WordNode**."}, {"owner": {"reputation": 1250, "user_id": 5679985, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/146c3943e20149fbc04a050430f9c99f?s=128&d=identicon&r=PG&f=1", "display_name": "Human Cyborg Relations", "link": "https://stackoverflow.com/users/5679985/human-cyborg-relations"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1488938328, "post_id": 42661595, "comment_id": 72449046, "body": "Hm, okay. Is there a way to make p point to the head field without changing its type?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1488938383, "post_id": 42661595, "comment_id": 72449059, "body": "Yes. Declare it properly as <code>WordNode*</code>, just as @OldProgrammer said."}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1488938504, "post_id": 42661595, "comment_id": 72449100, "body": "Why?  Just change **p to *p.  There is no need for double indirection.  C and pointers can be a difficult concept to grasp at first.  I would recommend reading up on that - <a href=\"http://boredzo.org/pointers/\" rel=\"nofollow noreferrer\">boredzo.org/pointers</a>"}, {"owner": {"reputation": 1250, "user_id": 5679985, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/146c3943e20149fbc04a050430f9c99f?s=128&d=identicon&r=PG&f=1", "display_name": "Human Cyborg Relations", "link": "https://stackoverflow.com/users/5679985/human-cyborg-relations"}, "edited": false, "score": 0, "creation_date": 1488938505, "post_id": 42661595, "comment_id": 72449102, "body": "Lets assume I can&#39;t change the declaration of p. What if it absolutely have to be a double pointer, as part of the challenge?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1488938524, "post_id": 42661595, "comment_id": 72449109, "body": "Or, <code>WordNode **p = &amp;(wset-&gt;head);</code>"}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1488938540, "post_id": 42661595, "comment_id": 72449114, "body": "then change to  WordNode **p = &amp;(wset-&gt;head);"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1488938568, "post_id": 42661595, "comment_id": 72449121, "body": "Great minds think alike..."}], "owner": {"reputation": 1250, "user_id": 5679985, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/146c3943e20149fbc04a050430f9c99f?s=128&d=identicon&r=PG&f=1", "display_name": "Human Cyborg Relations", "link": "https://stackoverflow.com/users/5679985/human-cyborg-relations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488938043, "creation_date": 1488938043, "question_id": 42661595, "link": "https://stackoverflow.com/questions/42661595/assignment-from-incompatible-pointer-type-error", "title": "Assignment from incompatible pointer type error", "body": "<p>These are the structs I have. Think of linked lists in C.</p>\n\n<pre><code>/**\n * The WordNode struct is used to represent a node in a linked list of\n * words. It is defined in this file because it is used only within this\n * file. It is used only as part of the implementation of a word set.\n */\ntypedef struct WordNode WordNode;\nstruct WordNode {\n  int       freq;   // The frequency of the the word.\n  char     *word;   // The word itself.\n  WordNode *next;   // The next word node in the list.\n};\n\n/**\n * A WordSet struct is used to represent a \"set\". We are implementing a set as\n * a linked list of WordNodes.\n */\nstruct WordSet {\n  int       size;   // The number of elements in the set.\n  WordNode *head;   // The starting node in the set.\n};\n</code></pre>\n\n<p>Now, I've got a search function in my file,</p>\n\n<pre><code>static WordNode **search (WordSet *wset, char *word) {\n  // TODO: This function will return the address of the cell containing the\n  // pointer to the WordNode for the given word, or else the address of the\n  // cell containing NULL marking the end of the list.  Note that the cell in\n  // question can be either the `head` field of the WordSet struct or the\n  // `next` field of some WordNode.\n  //\n  // Hints:\n  // (1) p can start by pointing to the `head` field\n\n  WordNode **p = wset-&gt;head;\n\n  // if word is in head\n  if ((*p) != NULL){\n    if (strcmp((*p)-&gt;word, word)){\n      return p;\n    }\n  }\n\n  while ((*p)-&gt;next != NULL){\n    if (strcmp((*p)-&gt;next-&gt;word, word)){\n      return p;\n    }\n    p = (*p)-&gt;next;\n  }\n\n  // put loop here\n  return p;\n}\n</code></pre>\n\n<p>I get the warning: Assignment from incompatible pointer type error p = wset->head</p>\n\n<p>From my understanding, **p means that this is a pointer to a pointer. So, when I initialize p as p = wset->head, I am basically initializing the pointer p to the pointer head, so it is a pointer to a pointer. Why am I still getting the incompatible pointer type error?</p>\n\n<p>I'm also a little confused about the way I'm referencing stuff inside the WordNode. For example, when I do something like (*p)->next, is this the correct way to access the 'next' pointer?</p>\n"}, {"tags": ["c", "header-files"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1488939354, "post_id": 42661591, "comment_id": 72449312, "body": "I think these may help <a href=\"http://stackoverflow.com/q/614794/995714\">Detecting superfluous #includes?</a>, <a href=\"http://stackoverflow.com/q/1301850/995714\">Tools to find included headers which are unused?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7675594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/68xsi.jpg?s=128&g=1", "display_name": "Schwarzy", "link": "https://stackoverflow.com/users/7675594/schwarzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1488938563, "creation_date": 1488938563, "answer_id": 42661666, "question_id": 42661591, "link": "https://stackoverflow.com/questions/42661591/is-there-a-way-to-generate-the-include-map-for-a-c-file/42661666#42661666", "title": "Is there a way to generate the include map for a C file?", "body": "<p>Recently almost any of the featured IDE can help you in that built in.Visual Studio or Jetbrain's Clion are proper for that. You did not wrote neither platform or environment, but maybe it worth to give a try even with efforts to properly set the project that compiles. \nBack in days I found also useful to generate documentation with doxygen, as I remember that will also create such maps /links/ as well.</p>\n"}, {"tags": [], "owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "is_accepted": false, "score": 2, "last_activity_date": 1488951509, "last_edit_date": 1488951509, "creation_date": 1488949712, "answer_id": 42663427, "question_id": 42661591, "link": "https://stackoverflow.com/questions/42661591/is-there-a-way-to-generate-the-include-map-for-a-c-file/42663427#42663427", "title": "Is there a way to generate the include map for a C file?", "body": "<p>Not sure if this is quite what you're after, but I was curious what a graph of this would look like, so I threw this together.  It's a bit of a mess, but workable for a throw-away script:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\nINCLUDE_DIRS=()\n\n# Add any include dirs here\n# INCLUDE_DIRS+=(\"/usr/include\")\n\n# If you want to add flags for some pkg-config modules (space\n# separated)\nPKG_CONFIG_PKGS=\"\"\n\nFOLLOW_SYS_INCLUDES=y\n\n\n\nwhile read dir; do\n    dir=\"$(readlink -f \"${dir}\")\"\n    for d in \"${INCLUDE_DIRS[@]}\"; do\n    if [ \"${dir}\" = \"${d}\" ]; then\n        continue\n    fi\n    done\n\n    INCLUDE_DIRS+=(\"${dir}\")\ndone &lt; &lt;(echo | cc -Wp,-v -x c - -fsyntax-only 2&gt;&amp;1 | grep '^ ' | cut -b2-)\n\nPROCESSED=()\n\nwhile read flag; do\n    if [ -n \"${flag}\" ]; then\n    INCLUDE_DIRS+=(\"${flag}\")\n    fi\ndone &lt; &lt;(pkg-config --cflags-only-I \"${PKG_CONFIG_PKGS}\" | sed -E 's/-I([^ ]*)/\\1\\n/g')\n\nfunction not_found {\n    echo \"  \\\"$1\\\" [style=filled,color=lightgrey];\"\n    echo \"  \\\"$2\\\" -&gt; \\\"$1\\\"\"\n}\n\nfunction handle_file {\n    filename=\"${1}\"\n    for f in \"${PROCESSED[@]}\"; do\n    if [ \"${f}\" = \"${1}\" ]; then\n        echo \"  \\\"$2\\\" -&gt; \\\"$1\\\"\"\n        return\n    fi\n    done\n\n    PROCESSED+=(\"$1\")\n    if [ -n \"${2}\" ]; then\n    echo \"  \\\"${2}\\\" -&gt; \\\"${1}\\\";\"\n    fi\n\n    if [ ! \"${FOLLOW_SYS_INCLUDES}\" = \"y\" ]; then\n    for d in \"${INCLUDE_DIRS[@]}\"; do\n        case \"${1}\" in\n        \"${d}\"/*)\n            return\n            ;;\n        esac\n    done\n    fi\n\n    parse_file \"$1\"\n}\n\nfunction handle_include {\n    case \"${1}\" in\n    /*)\n        handle_file \"${name}\" \"$2\"\n        return\n        ;;\n    esac\n\n    for dir in \"${INCLUDE_DIRS[@]}\"; do\n    if [ -f \"${dir}/${1}\" ]; then\n        handle_file \"${dir}/${1}\" \"$2\"\n        return\n    fi\n    done\n\n    not_found \"${1}\" \"${2}\"\n}\n\nfunction handle_include_2 {\n    case \"${1}\" in\n    /*)\n        handle_file \"${1}\" \"$2\"\n        return\n        ;;\n    esac\n\n    FILE=\"$(readlink -f \"$(dirname \"${2}\")/${1}\")\"\n    if [ -f \"${FILE}\" ]; then\n    handle_file \"${FILE}\" \"$2\"\n    fi\n}\n\nfunction parse_file {\n    while read name; do\n        handle_include \"$name\" \"$1\";\n    done &lt; &lt;(grep '^[ \\t]*#[ \\t]*include &lt;' \"$1\" | sed -E 's/[ \\t]*#[ \\t]*include ?&lt;([^&gt;]+)&gt;.*/\\1/')\n\n    while read name; do\n        handle_include_2 \"$name\" \"$1\" \"$PWD\";\n    done &lt; &lt;(grep '^[ \\t]*#[ \\t]*include \"' \"$1\" | sed -E 's/[ \\t]*#[ \\t]*include \\\"([^\"]+)\\\"/\\1/')\n}\n\necho \"digraph G {\"\necho \"graph [rankdir = \\\"LR\\\"];\"\nparse_file \"$(readlink -f \"${1}\")\" \"\" \"$PWD\"\necho \"}\"\n</code></pre>\n\n\n\n<p>Pass it a file and it will generate a graphviz file.  Pipe it to dot:</p>\n\n<pre><code>$ ./include-map.sh /usr/include/stdint.h | dot -Tx11\n</code></pre>\n\n<p>And you have something nice to look at.</p>\n"}], "owner": {"reputation": 52264, "user_id": 264052, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG", "display_name": "smwikipedia", "link": "https://stackoverflow.com/users/264052/smwikipedia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1489793985, "creation_date": 1488938018, "last_edit_date": 1495542728, "question_id": 42661591, "link": "https://stackoverflow.com/questions/42661591/is-there-a-way-to-generate-the-include-map-for-a-c-file", "title": "Is there a way to generate the include map for a C file?", "body": "<p>Given:</p>\n\n<ul>\n<li>a C file with several included header files</li>\n<li>a bunch of include file search folder</li>\n</ul>\n\n<p>Is there a way to generate some kind of <em>include map</em> for the C file? </p>\n\n<p>Though IDEs can <em>sometimes</em> help locate the definition/declaration of a symbol in the header file. But I think an <em>include map</em> can give me a better insight into how these files are related when project gets complicated. And identify issues such as circular includes.</p>\n\n<h2>ADD 1</h2>\n\n<p>A similar thread but not much helpful. </p>\n\n<ul>\n<li>It only generates an include hierarchy in text in the Output window when building.</li>\n<li>And it only works for native VC++ project. Not work for NMAKE C project.</li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/questions/1137966/displaying-the-include-hierarchy-for-a-c-file-in-visual-studio\">Displaying the #include hierarchy for a C++ file in Visual Studio</a></p>\n\n<h2>ADD 2</h2>\n\n<p>I just tried the <a href=\"https://secure.profactor.co.uk/includemanager.php\" rel=\"nofollow noreferrer\">Include Manager</a> mentioned in above thread. Though not free, it's not expensive and perfectly fits in my scenario.</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1488937957, "post_id": 42661522, "comment_id": 72448956, "body": "well, you will highly probably have problem in your next malloc. :-) Just duplicate your code in the main and  try to create another queue.."}, {"owner": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "edited": false, "score": 0, "creation_date": 1488938515, "post_id": 42661522, "comment_id": 72449107, "body": "Interesting. The clang static analyzer warns me of a possible memory leak in the a second  queue."}], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "edited": false, "score": 0, "creation_date": 1488937867, "post_id": 42661560, "comment_id": 72448927, "body": "That is interesting. Would you be willing to explain more about it or point to some source of information that I could use for studying this case? Thanks a lot!"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "edited": false, "score": 0, "creation_date": 1488937944, "post_id": 42661560, "comment_id": 72448951, "body": "This may help: <a href=\"http://stackoverflow.com/questions/1957099/how-do-free-and-malloc-work-in-c\" title=\"how do free and malloc work in c\">stackoverflow.com/questions/1957099/&hellip;</a>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "edited": false, "score": 0, "creation_date": 1488938095, "post_id": 42661560, "comment_id": 72448994, "body": "<i>Will probably</i> cause. Changed the answer to address the probability aspect."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1488938062, "last_edit_date": 1488938062, "creation_date": 1488937801, "answer_id": 42661560, "question_id": 42661522, "link": "https://stackoverflow.com/questions/42661522/c-pushing-too-many-items-on-handrolled-queue-why-is-this-not-segfaulting/42661560#42661560", "title": "C pushing too many items on handrolled queue -- Why is this not segfaulting?", "body": "<p>C does not check out of bounds accesses, but your program corrupts the heap, and when you call <code>malloc()</code> again in the future, you will probably have a segfault.</p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "edited": false, "score": 1, "creation_date": 1488939162, "post_id": 42661715, "comment_id": 72449273, "body": "Very good explanation! So now I understand what is happening. But if I can write beyond the end of array, what is a segfault then? From <a href=\"http://www.cprogramming.com/debugging/segfaults.html\" rel=\"nofollow noreferrer\">cprogramming.com/debugging/segfaults.html</a> I have: &quot;There are four common mistakes that lead to segmentation faults: dereferencing NULL, dereferencing an uninitialized pointer, dereferencing a pointer that has been freed (or deleted, in C++) or that has gone out of scope (in the case of arrays declared in functions), and writing off the end of an array.&quot;"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "edited": false, "score": 1, "creation_date": 1488939590, "post_id": 42661715, "comment_id": 72449383, "body": "I guess writing off the end of an array won&#39;t always cause the segmentation fault.  It depends what you write into.  Some memory managers will automatically detect it and throw a runtime error.  Also, when you free the memory it will most likely throw an error.  So, maybe add these two lines before the <code>return</code> of your <code>main</code>: \t<code>free(queue-&gt;space); free(queue);</code>"}, {"owner": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "edited": false, "score": 2, "creation_date": 1488940102, "post_id": 42661715, "comment_id": 72449531, "body": "Yep. That throws an error straight from the memory allocator. How much fun is this? TKS!"}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 2, "creation_date": 1488940124, "post_id": 42661715, "comment_id": 72449537, "body": "Segfaults aren&#39;t like exceptions: they don&#39;t happen when you break the rules, only when the breakage is irrecoverable. You might write past the end of an array, but get &quot;lucky&quot; in that the array was placed near the beginning of the <a href=\"https://en.wikipedia.org/wiki/Paging\" rel=\"nofollow noreferrer\">page</a> and therefore there&#39;s &quot;room&quot; to wreck the rest of your memory instead of segfaulting immediately."}, {"owner": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "edited": false, "score": 1, "creation_date": 1488940287, "post_id": 42661715, "comment_id": 72449584, "body": "I was thinking just this; but I supposed that the array should be placed at the end of the heap, not just the end of the page to cause segfault, because at the end of the heap it could overwrite other process&#39; code. But maybe because of virtual memory page mapping the next page might just be other process&#39;!"}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 2, "creation_date": 1488941225, "post_id": 42661715, "comment_id": 72449841, "body": "Right, it&#39;s wholly possible for <code>malloc()</code> to return a pointer to anywhere in the heap. I was thinking of a specific situation but pages are really irrelevant to the main point, which you seem to have understood anyway."}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 0, "last_activity_date": 1488938917, "creation_date": 1488938917, "answer_id": 42661715, "question_id": 42661522, "link": "https://stackoverflow.com/questions/42661522/c-pushing-too-many-items-on-handrolled-queue-why-is-this-not-segfaulting/42661715#42661715", "title": "C pushing too many items on handrolled queue -- Why is this not segfaulting?", "body": "<p>You allocate space to hold 5 ints with your call to <code>queue_init</code>.  If you run your code in gdb, and examine the memory at the location of <code>queue-&gt;start</code> you will see something like this:</p>\n\n<pre><code>(gdb) p *queue\n</code></pre>\n\n<p>You'll see a memory address for the start member.  Use that address in the examine memory command, something like this:</p>\n\n<pre><code>(gdb) x/8 0x602450\n</code></pre>\n\n<p>gdb will print something like this:</p>\n\n<pre><code>0x602450:   0   0   0   0\n0x602460:   0   0   134049  0\n</code></pre>\n\n<p>Everything after the 5th byte belongs to something either unallocated or previously allocated.  After your 7th call to queue_push, and you examine memory again, you'd see something like this:</p>\n\n<pre><code>(gdb) x/8 0x602450\n0x602450:   1   2   3   4\n0x602460:   5   6   7   0\n</code></pre>\n\n<p>So, the runtime doesn't prevent you from overwriting unallocated or previously allocated memory.  But, you might have written over something important that can cause problems for the runtime or maybe other threads in your process.</p>\n"}], "owner": {"reputation": 269, "user_id": 4038547, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100006406093905/picture?type=large", "display_name": "Rodrigo Stv", "link": "https://stackoverflow.com/users/4038547/rodrigo-stv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1488971339, "answer_count": 2, "score": 2, "last_activity_date": 1488938917, "creation_date": 1488937549, "question_id": 42661522, "link": "https://stackoverflow.com/questions/42661522/c-pushing-too-many-items-on-handrolled-queue-why-is-this-not-segfaulting", "closed_reason": "Duplicate", "title": "C pushing too many items on handrolled queue -- Why is this not segfaulting?", "body": "<p>I am pushing 7 items while I only malloc'd for 5 items, but I don't see any segfaults happening. What am I missing? I thought this would cause the pointer to move past the array bounds and</p>\n\n<pre><code>#include \"stdlib.h\"\n#include \"stdio.h\"\n#include \"assert.h\"\n\ntypedef struct {\n    int *space;\n    int size;\n    int *start;\n    int *end;\n} queue_t;\n\ntypedef char BOOL;\n\n#define TRUE 1\n#define FALSE 0\n\nvoid queue_print(queue_t *queue) {\n\n    for (int *cur = queue-&gt;start; cur &lt; queue-&gt;end; cur++) {\n        printf(\"%i,\", *cur);\n    }\n\n    printf(\"\\n\");\n}\n\nvoid queue_init(queue_t **queue, int size) {\n    (*queue) = (queue_t*) malloc(sizeof(queue_t));\n    (*queue)-&gt;space = (int*) malloc(sizeof(int) * size);\n    (*queue)-&gt;size = size;\n    (*queue)-&gt;start = (*queue)-&gt;space;\n    (*queue)-&gt;end = (*queue)-&gt;space;\n}\n\nvoid queue_push(queue_t *queue, int elem) {\n    *(queue-&gt;end) = elem;\n    queue-&gt;end++;\n}\n\nint queue_pop(queue_t *queue) {\n    int ret = *(queue-&gt;start);\n    queue-&gt;start++;\n    return ret;\n}\n\nint main(int argc, char const *argv[])\n{\n    queue_t *queue;\n    queue_init(&amp;queue, 5);\n    queue_print(queue);\n    queue_push(queue, 1);\n    queue_print(queue);\n    queue_push(queue, 2);\n    queue_print(queue);\n    queue_push(queue, 3);\n    queue_print(queue);\n    queue_push(queue, 4);\n    queue_print(queue);\n    queue_push(queue, 5);\n    queue_print(queue);\n    queue_push(queue, 6);\n    queue_print(queue);\n    queue_push(queue, 7);\n    queue_print(queue);\n    printf(\"%i\\n\", queue-&gt;size);\n    queue-&gt;space[123] = 4;\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>1,\n1,2,\n1,2,3,\n1,2,3,4,\n1,2,3,4,5,\n1,2,3,4,5,6,\n1,2,3,4,5,6,7,\n</code></pre>\n"}, {"tags": ["c", "shell", "multidimensional-array"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488937346, "post_id": 42661450, "comment_id": 72448791, "body": "There is no multidimensional array in the snippet shown. A pointer is not a array, nor is a <i>pointer to pointer to <code>char</code></i> one."}, {"owner": {"reputation": 31, "user_id": 7536216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4044f7f08ea89ebd296d1fbdb7d4114?s=128&d=identicon&r=PG&f=1", "display_name": "Ric", "link": "https://stackoverflow.com/users/7536216/ric"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488937918, "post_id": 42661450, "comment_id": 72448940, "body": "I just edited the title thanks."}], "owner": {"reputation": 31, "user_id": 7536216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4044f7f08ea89ebd296d1fbdb7d4114?s=128&d=identicon&r=PG&f=1", "display_name": "Ric", "link": "https://stackoverflow.com/users/7536216/ric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488938580, "creation_date": 1488937047, "last_edit_date": 1488938580, "question_id": 42661450, "link": "https://stackoverflow.com/questions/42661450/copy-array1-contents-to-array2-in-c", "title": "Copy **array1 Contents to **array2 in C", "body": "<p>I am doing a shell program in C. I am working on the simulation of the \"!!\" command which fetch the previous command and executes it. I am trying to copy *currentargv[] contents to *prevargv[] in order to save the command just given for future use. I was trying to use strcpy but not sure if it works with multidimensional arrays. This is one part of my code:</p>\n\n<pre><code>/*We are going to save in 'buffer' the words (separated by the null char)\n*given by user which are going to be processed by parse(). 'buffer' is going\n* to be reused on the next prompt and previous contents are going to be \n* overwritten, that is why i want to copy its contents to another place.\n*/\nchar buffer[STORAGE];\n\n/*They only point to contents in buffer*/\nchar *outputfile;\nchar *inputfile;\nchar *errfile;\n\n/*cmd.newargv is going to store the program name in cmd.newargv[0];\n* the other blocks of memory are going to store the arguments to the \n*given to the program i.e 'echo hello world'. All this pointers are \n*fetched from buffer\n*/\nstruct Command{\n  int indx;\n  char **newargv;\n}cmd;\n\nstruct Save {\n  int indx;\n  char *newargv[STORAGE];\n  char outfile[STORAGE];\n  char infile[STORAGE];\n  char errfile[STORAGE];\n}prevCmd;\n//main()\n//prompt for user for input \n//parse input\n//call saveCommand \"explicitly used for the '!!' command\"\n//execute command (fork(), execvp(), etc.)\n\nvoid saveCommand {\n  strcpy(prevCmd.inputfile, inputfile);\n  strcpy(prevCmd.outputfile, outputfile);\n  strcpy(prevCmd.errfile, errfile);\n  //Here want to copy contents in cmd.newargv to prevCmd.newargv.\n}\n</code></pre>\n\n<p>I ommit much of my code on saveCommand for simplicity. Also I am not sure if this is the best way to implement the \"!!\" command functionality. If you know another way to implement this i will really like to know it. Thanks</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1488937315, "post_id": 42661447, "comment_id": 72448782, "body": "Conventionally, macros are all uppercase and underscores. For example, <code>SIZE</code> and <code>MAX</code>. Also, you should consider defining <code>max</code> as <code>(size * 4)</code> instead of just <code>size * 4</code> to avoid unexpected results when it gets replaced in a more complex expression."}, {"owner": {"reputation": 171, "user_id": 5270618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3703fe2b1b20e4eb9dcabe83fdd76b9e?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5270618/john-doe"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1488937389, "post_id": 42661447, "comment_id": 72448804, "body": "@MadPhysicist Thanks! This is noted."}, {"owner": {"reputation": 171, "user_id": 5270618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3703fe2b1b20e4eb9dcabe83fdd76b9e?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5270618/john-doe"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1488937444, "post_id": 42661447, "comment_id": 72448816, "body": "@John3136 I&#39;m trying to print only the first letter of the first name."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 3, "creation_date": 1488937485, "post_id": 42661447, "comment_id": 72448824, "body": "@JohnDoe Then why are you using <code>%s</code>? (should be <code>%c</code>)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1488938317, "post_id": 42661447, "comment_id": 72449043, "body": "Note you can always get the first character by dereferencing the pointer, e.g. <code>if (read == 3) printf (&quot;%s, %c %c\\n&quot;, last, *first, *mid);</code> Also, you don&#39;t need <code>stdlib.h</code>, you are not using anything it provides."}, {"owner": {"reputation": 171, "user_id": 5270618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3703fe2b1b20e4eb9dcabe83fdd76b9e?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5270618/john-doe"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1488938526, "post_id": 42661447, "comment_id": 72449110, "body": "@DavidC.Rankin Thank you for the advice! Also, what can I do in the future to word my question better? It seems that I&#39;m getting downvoted."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1488939231, "post_id": 42661447, "comment_id": 72449286, "body": "Honestly, it&#39;s a phase of the moon thing on downvotes. If I had to guess, the downvotes were due to the basic nature of the <i>format string</i> question that could be answered by referencing the <b>man page</b>. I don&#39;t think the number of downvotes were warranted. Sometimes if you get one, there are bands of juvenile downvoters that pile on as well. I don&#39;t know if that is the case here, but don&#39;t sweat it. They are 2pts. each -- it will come out in the wash. The takeaway is to check the easy references first, but we have all been stuck on forrest-and-the-trees issues..."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 5270618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3703fe2b1b20e4eb9dcabe83fdd76b9e?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5270618/john-doe"}, "edited": false, "score": 0, "creation_date": 1488937757, "post_id": 42661518, "comment_id": 72448897, "body": "Thanks @DYZ this works! Not sure why am I getting downvotes on my question though. Is there something I can improve about the question?"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 3, "last_activity_date": 1488937532, "creation_date": 1488937532, "answer_id": 42661518, "question_id": 42661447, "link": "https://stackoverflow.com/questions/42661447/c-segmentation-fault-when-reading-separate-strings/42661518#42661518", "title": "C segmentation fault when reading separate strings", "body": "<p>Your second and last printout values are characters, not strings, so use <code>%c</code> instead of <code>%s</code>;</p>\n\n<pre><code>if (read == 2) printf(\"%s, %c\", mid, first[0]);\nif (read == 3) printf(\"%s, %c %c\", last, first[0], mid[0]);\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 5270618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3703fe2b1b20e4eb9dcabe83fdd76b9e?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5270618/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 42661518, "answer_count": 1, "score": 0, "last_activity_date": 1522946476, "creation_date": 1488937031, "last_edit_date": 1522946476, "question_id": 42661447, "link": "https://stackoverflow.com/questions/42661447/c-segmentation-fault-when-reading-separate-strings", "title": "C segmentation fault when reading separate strings", "body": "<p>I'm trying to make a C program that reads in a <strong>first name,</strong> <strong>last name</strong>, and sometimes it <strong>may</strong> contain a <strong>middle name</strong> as well. In other words, I might be reading two strings or three depending on the input.</p>\n\n<p><strong>Desired Output:</strong></p>\n\n<p>last name, followed by a comma, followed the the initial of the first name, or in the case of a middle name, include both first name initial and middle name initials. </p>\n\n<p><strong>Examples:</strong></p>\n\n<p><strong>Input:</strong></p>\n\n<pre><code>John Smith\n\nJohn David Smith\n\nJohn D. Smith\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Smith, J.\n\nSmith, J. D.\n\nSmith, J. D.\n</code></pre>\n\n<hr>\n\n<p><strong>My Attempt:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define size 20\n#define max size*4\nint main()\n{\n    char name[max];\n    char first[size];\n    char mid[size];\n    char last[size];\n    int read;\n\n    /* Read the full name string*/\n    fgets(name, max, stdin);\n    /* 'read' returns number of variables read */\n    read = sscanf(name, \"%s %s %s\", first, mid, last);\n    /* If we only read first name and last name */\n    if (read == 2) printf(\"%s, %s\", mid, first[0]);\n    /* 'read' should be 3 if we read all three variables */ \n    if (read == 3) printf(\"%s, %s %s\", last, first[0], mid[0]);\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run this, it gives me segmentation fault. What am I doing wrong?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1488934193, "post_id": 42661023, "comment_id": 72447933, "body": "@yellowantphil I am not sure if that&#39;s a good idea."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1488934421, "post_id": 42661023, "comment_id": 72447982, "body": "&quot;On 32-bit system , the structure&#39;s strict alignment is 4bytes&quot; - Err.... no! There is no guarantee about alignment on any platform. But feel free to provide a reference to the standard stating different. That&#39;s an XY problem like your other question. <b>Why</b> do you want this alignment? It seems you should rethink your whole design."}, {"owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488934632, "post_id": 42661023, "comment_id": 72448042, "body": "@Olaf I want 4-byte alignment because I don&#39;t want the compiler to add padding. If you look at the structure, considering strict alignment is 8-byte, 4bytes are added at the end."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1488934639, "post_id": 42661023, "comment_id": 72448054, "body": "@yellowantphil: That will not work, but potentially cause even more problems."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488934661, "post_id": 42661023, "comment_id": 72448063, "body": "Alignment is not related to padding. And that&#39;s not your actualy problem, but what you <b>think</b> is a solution."}, {"owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488934742, "post_id": 42661023, "comment_id": 72448081, "body": "@Olaf Care to explain."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1488934863, "post_id": 42661023, "comment_id": 72448113, "body": "Possibly related question: <a href=\"http://stackoverflow.com/questions/3266766/field-alignment-of-a-struct-in-c-c\" title=\"field alignment of a struct in c c\">stackoverflow.com/questions/3266766/&hellip;</a> (look at the 3rd answer)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488935241, "post_id": 42661023, "comment_id": 72448219, "body": "@Monku: Too broad. And I already stated this is an XY problem."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488935270, "post_id": 42661023, "comment_id": 72448230, "body": "If <code>time_t time;</code> needs 8-byte alignment, using code to force some sort of 4-byte alignment will certainly cause problems."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1488935344, "post_id": 42661023, "comment_id": 72448258, "body": "@DYZ: That&#39;s a different question. But both are most likely the wrong way for a specific problem. TRoo bad we don&#39;t know the problem because both askers don&#39;t tell us."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1488935478, "post_id": 42661023, "comment_id": 72448297, "body": "What @chux said: Best case scenario, aligning eight byte <code>time_t</code> to four byte boundary will make your code run slower (forgiving architectures won&#39;t die, but unaligned access still costs). Worst case, unaligned access causes the code to crash. Which means it&#39;s definitionally non-portable. Saving four bytes out of 24 (when memory is cheap) in exchange for breaking portability and running slower even where it works is not a good trade-off."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1488935903, "post_id": 42661023, "comment_id": 72448431, "body": "Useful link <a href=\"http://stackoverflow.com/q/8568432/2410359\">Is gcc&#39;s __attribute__((packed)) / #pragma pack unsafe?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 0, "last_activity_date": 1488937484, "creation_date": 1488937484, "answer_id": 42661512, "question_id": 42661023, "link": "https://stackoverflow.com/questions/42661023/how-to-align-c-structure-to-4-byte-boundary/42661512#42661512", "title": "How to align C structure to 4-byte boundary?", "body": "<p>The most straightforward thing to do is ... not use <code>time_t</code>.  Use fixed-width types only.</p>\n\n<pre><code>typedef struct LOG_EVENT\n{\n    int32_t time;\n    uint32_t count;\n    int32_t error_type;\n    uint16_t gm_state;\n    uint8_t gm_mode;\n    uint8_t mc_state;\n} LOG_EVENT;\n</code></pre>\n\n<p>You give up the ability to handle timestamps outside the range of signed 32-bit <code>time_t</code> (usually, but not always, 1901-12-13T20:45:52Z through 2038-01-19T03:14:07Z) but if you're trying to work with an on-disk record array with 32-bit timestamps, which is the most plausible explanation here, that's not an issue.</p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1578923913, "post_id": 42661586, "comment_id": 105586670, "body": "<i>Also know that there is no benefit in using 64-bit applications</i> Not true.  On x86 systems, the number of general-purpose registers doubles from 8 to 16.  SSE registers are also doubled."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1578945798, "post_id": 42661586, "comment_id": 105597283, "body": "@AndrewHenle That&#39;s true, but from what I&#39;ve read this basically just mitigates the fact that you&#39;re using significantly more L2 space and the longer instructions take more memory bandwidth and so on, I don&#39;t know if this notion is outdated with current CPUs, but the consensus at the time was that 64-bit applications were, although marginally, in fact slower. This may have changed, but I&#39;m not the person to ask. Not that it matters since like it or not 32-bit on PC is eventually going to die."}], "tags": [], "owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "is_accepted": true, "score": 1, "last_activity_date": 1579225497, "last_edit_date": 1579225497, "creation_date": 1488937990, "answer_id": 42661586, "question_id": 42661023, "link": "https://stackoverflow.com/questions/42661023/how-to-align-c-structure-to-4-byte-boundary/42661586#42661586", "title": "How to align C structure to 4-byte boundary?", "body": "<p><code>#pragma pack(4)</code> will set alignment to 4 bytes.</p>\n\n<p>Notice this directive is not part of the standard, this was originally introduced in MSVC and later adopted by gcc for compatibility with the Microsoft's compiler.</p>\n\n<p>Also, notice the size of types like <code>time_t</code>, <code>size_t</code> and all pointer types will vary between those architectures. If your intention is to make a structure that is intelligible between applications running on those two architectures this will be a problem.</p>\n\n<p>Also know that there is no benefit in using 64-bit applications other than the fact that you can address more than 4GB of memory, if you don't need all that memory you can stick to 32-bit, there is no sin in that.</p>\n"}], "owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2374, "favorite_count": 1, "accepted_answer_id": 42661586, "answer_count": 2, "score": 0, "last_activity_date": 1579225497, "creation_date": 1488934043, "question_id": 42661023, "link": "https://stackoverflow.com/questions/42661023/how-to-align-c-structure-to-4-byte-boundary", "title": "How to align C structure to 4-byte boundary?", "body": "<p>I have the following structure:</p>\n\n<pre><code>typedef struct LOG_EVENT\n{\n    time_t time;\n    uint32_t count;\n    int32_t error_type;\n    uint16_t gm_state;\n    uint8_t gm_mode;\n    uint8_t mc_state;\n} LOG_EVENT;\n</code></pre>\n\n<p>On 32-bit system , the structure's <code>strict alignment</code> is 4bytes so the members are aligned across 4-byte boundary. There is no padding added in this case because all members together are 4-byte aligned.</p>\n\n<p>But this is not true on 64-bit system, where <code>time_t</code> is 64bit. The <code>strict alignment</code> in that case is 8-byte. </p>\n\n<p>How can I change the alignment to 4-byte ? I want to align across 4-byte boundary on 64-bit system because I want to make sure no padding is done.</p>\n\n<p>From the gcc attributes page <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Variable-Attributes.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Variable-Attributes.html</a> , it says that <code>The aligned attribute can only increase the alignment; but you can decrease it by specifying packed as well</code>.</p>\n\n<p>I don't see <code>packed</code> attribute taking in any arguments.</p>\n\n<p>Also, if I use the byte-alignment like below, would it cause any issues compared to 4-byte alignment:</p>\n\n<pre><code>typedef struct __attribute__ ((packed)) LOG_EVENT\n{\n    time_t time;\n    uint32_t count;\n    int32_t error_type;\n    uint16_t gm_state;\n    uint8_t gm_mode;\n    uint8_t mc_state;\n} LOG_EVENT;\n</code></pre>\n"}, {"tags": ["c", "multithreading", "winapi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1488933794, "post_id": 42660921, "comment_id": 72447831, "body": "What type of variable is it exactly? For 32-bit and 64-bit integers, the Win32 API has an <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684122.aspx\" rel=\"nofollow noreferrer\">Interlocked Variable Access</a> API to handle this situation."}, {"owner": {"reputation": 679, "user_id": 7663425, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eeb15b66507a9374260b7a5472f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7663425/christopher"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1488934155, "post_id": 42660921, "comment_id": 72447926, "body": "@Remy Lebeau It could be anything (primitive type, struct instance, array)."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 3, "creation_date": 1488934579, "post_id": 42660921, "comment_id": 72448027, "body": "As long as you protect <i>all</i> accesses to the variable (from either thread) with the same critical section object, you should be okay... changes made in one thread while it has the critical section will be visible to the other when <i>that</i> thread has the critical section.  If that weren&#39;t true, they wouldn&#39;t be very useful."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1488936082, "post_id": 42660921, "comment_id": 72448468, "body": "and that will work fine even if the data is written to a cache first, since the read should get the cached data."}, {"owner": {"reputation": 679, "user_id": 7663425, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eeb15b66507a9374260b7a5472f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7663425/christopher"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1488937504, "post_id": 42660921, "comment_id": 72448831, "body": "@Dmitr The documentation says that a critical section only enforces mutual exclusion, where did you read that a critical section allows a thread to see changes made by another thread?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1488937632, "post_id": 42660921, "comment_id": 72448868, "body": "It isn&#39;t documented (that I know of) but it is well-known.  Microsoft aren&#39;t great on the rigorous documentation front.  They are, however, pretty good at backwards compatibility, the sheer number of programs that would break if critical sections stopped acting as memory barriers means that it need not be of practical concern."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1488938067, "post_id": 42660921, "comment_id": 72448982, "body": "(This isn&#39;t language independent, mind you, or at least not inherently.  The API can control CPU optimizations, but there&#39;s no way for it to control what optimizations a compiler does.  <i>In  practice,</i> I <i>think</i> a compiler that reordered memory operations across a call to a critical section function would have to be considered pathological, but there might be edge cases in the weirder hypothetical languages.)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1488962276, "post_id": 42660921, "comment_id": 72458054, "body": "&quot;the value can be written in some cache and not written directly to memory &quot; - what is cache can be for <i>memory</i> ? for local variable (in stack)  compiler with optimization can use CPU register, but this is because no any another thread can access it - even if another thread execute same function in concurrent - every have unique stack and own copy of this variable. but for global variable compilers never use registers because they understand - this variable can be assigned by different threads. so all changes direct write to memory as is."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1488984487, "post_id": 42660921, "comment_id": 72473396, "body": "@Dmitri - compilers (<i>CL</i> how minimum, but think all) understand that global variable  can be accessed from any part of code, from any thread - and <i>never</i> use registers as temporary storage for this variables. about CPU cache - if we use interlocked functions (with <i>lock</i> prefix) here synchronization is done by <i>lock</i>. if used some os synchronization like crit-sections, read-write locks, etc - it also effective work as memory barrier"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1489007662, "post_id": 42660921, "comment_id": 72488150, "body": "@RbMm, that&#39;s not true.  Most C compilers will cache global variables in registers when necessary for optimizations.  For example, consider a loop like <code>for (n = 0, j = 0; n &lt; size; n++) data[n] = j++;</code> and you will find that the compiler only writes the value of <code>n</code> and <code>j</code> to memory at the end of the loop, and certainly never checks during the loop to see if another thread has changed them.  During the loop, both <code>n</code> and <code>j</code> are kept in registers."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1489008358, "post_id": 42660921, "comment_id": 72488523, "body": "(Tested on Visual Studio 2010, in Release mode.)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1489009566, "post_id": 42660921, "comment_id": 72489139, "body": "@HarryJohnston - ok, yes. in this example <code>CL</code> view that we not care about any synchronizations. but try bit modify this example - call in loop any external function, about compiler have no knowledge - and <code>CL</code> just drop any optimization with registers (it can still use nonvolatile registers for <code>n</code> and <code>j</code> but <i>not use</i> ) try for example next loop - <code>for (n = 0, j = 0; n &lt; size; n++) { GetTickCount(); data[n] = j++; }</code>"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1489010060, "post_id": 42660921, "comment_id": 72489402, "body": "@RbMm, yes, in practice any C/C++ compiler I&#39;ve ever heard of will assume that any external function might access or modify any global variable, and ensure that the values aren&#39;t cached across the call.  Most other languages are probably the same.  It is however possible to imagine a compiler that &quot;knows&quot; which API calls don&#39;t modify global variables and takes advantage of that."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1489010551, "post_id": 42660921, "comment_id": 72489629, "body": "@HarryJohnston - very important - are we call any external function inside expression. if no - compiler can consider whole code snippet as internal atomic term - he understand that we not care about any synchronization <i>inside</i> this snippet and let optimize. if we call external functions <i>before</i> and <i>after</i> this &#39;term&#39; - this not break optimization. but any call <i>inside</i> expression - just break any optimization (despite that compiler still can use nonvolatile registers (which will be not changed in during external call)."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1489010555, "post_id": 42660921, "comment_id": 72489633, "body": "really in some extreme case CL can mistake with optimization and produce unpleasant mistakes. hard topic and need say about specific code for details"}, {"owner": {"reputation": 344, "user_id": 4648172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105cf92132664f564cca25531e35a6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei Vorobiev", "link": "https://stackoverflow.com/users/4648172/sergei-vorobiev"}, "edited": false, "score": 0, "creation_date": 1489049497, "post_id": 42660921, "comment_id": 72504016, "body": "Folks, let&#39;s get back on topic. OP wants to write from one thread and to read from another. Is there anything that volatile won&#39;t do?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 344, "user_id": 4648172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105cf92132664f564cca25531e35a6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei Vorobiev", "link": "https://stackoverflow.com/users/4648172/sergei-vorobiev"}, "edited": false, "score": 0, "creation_date": 1489616284, "post_id": 42660921, "comment_id": 72755172, "body": "@SergeiVorobiev, that use of <code>volatile</code> is a Microsoft-specific extension, not part of the standard, and in recent MS compilers can be turned off."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1489869782, "post_id": 42660921, "comment_id": 72862789, "body": "&quot;the value can be written in some cache and not written directly to memory (and hence the other thread will not be able to see it).&quot; - if the variable is actually written to cache or memory and read from cache or memory, and the write or read is inherently atomic (32 bit variable on 32 bit boundary), then <a href=\"https://en.wikipedia.org/wiki/Cache_coherence\" rel=\"nofollow noreferrer\">cache coherence</a> will eliminate cache issues. There&#39;s no guarantee about the timing, and depending on how the variable is declared, it could be kept in a register in the write and/or read threads."}], "answers": [{"tags": [], "owner": {"reputation": 344, "user_id": 4648172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105cf92132664f564cca25531e35a6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei Vorobiev", "link": "https://stackoverflow.com/users/4648172/sergei-vorobiev"}, "is_accepted": false, "score": 1, "last_activity_date": 1489816253, "creation_date": 1489816253, "answer_id": 42871008, "question_id": 42660921, "link": "https://stackoverflow.com/questions/42660921/how-to-allow-two-threads-to-share-a-global-variable-in-winapi/42871008#42871008", "title": "How to allow two threads to share a global variable in WinAPI?", "body": "<p>MSDN explicitly states that critical sections are memory barriers. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686355(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms686355(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 679, "user_id": 7663425, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eeb15b66507a9374260b7a5472f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7663425/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1489823143, "creation_date": 1488933357, "question_id": 42660921, "link": "https://stackoverflow.com/questions/42660921/how-to-allow-two-threads-to-share-a-global-variable-in-winapi", "title": "How to allow two threads to share a global variable in WinAPI?", "body": "<p>I have two threads that are created using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682453(v=vs.85).aspx\" rel=\"nofollow noreferrer\">CreateThread()</a>, and I have a global variable that one thread writes to, and the other thread reads from.</p>\n\n<p>Now based on my understanding, the compiler and/or the CPU can do all sorts of optimizations, which could mean for example that when I write a value to the variable, the value can be written in some cache and not written directly to memory (and hence the other thread will not be able to see it).</p>\n\n<p>I have read that I can wrap the code that access the variable in a critical section, but the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682530(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a> says that a critical section will only enforce mutual exclusion, and does not say anything about enforcing writing directly to memory and reading directly from memory.</p>\n\n<p><em>Note that I do not which to use the <strong>volatile</strong> keyword, I want to know how this is done in pure WinAPI (as I could use a language other than C in a later time).</em></p>\n"}]